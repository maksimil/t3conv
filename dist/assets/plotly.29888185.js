function L0(El,Sh){return Sh.forEach(function(d){d&&typeof d!="string"&&!Array.isArray(d)&&Object.keys(d).forEach(function(ne){if(ne!=="default"&&!(ne in El)){var ae=Object.getOwnPropertyDescriptor(d,ne);Object.defineProperty(El,ne,ae.get?ae:{enumerable:!0,get:function(){return d[ne]}})}})}),Object.freeze(Object.defineProperty(El,Symbol.toStringTag,{value:"Module"}))}var To=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function P0(El){return El&&El.__esModule&&Object.prototype.hasOwnProperty.call(El,"default")?El.default:El}function Zc(El){throw new Error('Could not dynamically require "'+El+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Mh={exports:{}};(function(El,Sh){(function(d){El.exports=d()})(function(){return function(){function d(ne,ae,w){function v(e,a){if(!ae[e]){if(!ne[e]){var n=typeof Zc=="function"&&Zc;if(!a&&n)return n(e,!0);if(M)return M(e,!0);var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}var t=ae[e]={exports:{}};ne[e][0].call(t.exports,function(f){var o=ne[e][1][f];return v(o||f)},t,t.exports,d,ne,ae,w)}return ae[e].exports}for(var M=typeof Zc=="function"&&Zc,T=0;T<w.length;T++)v(w[T]);return v}return d}()({1:[function(d,ne,ae){var w=d("../src/lib"),v={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:rgba(0,0,0,0);border:6px solid rgba(0,0,0,0);z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid rgba(0,0,0,0);border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:#fff;","X .select-outline-2":"stroke:#000;stroke-dasharray:2px 2px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var M in v){var T=M.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");w.addStyleRule(T,v[M])}},{"../src/lib":503}],2:[function(d,ne,ae){ne.exports=d("../src/transforms/aggregate")},{"../src/transforms/aggregate":1118}],3:[function(d,ne,ae){ne.exports=d("../src/traces/bar")},{"../src/traces/bar":656}],4:[function(d,ne,ae){ne.exports=d("../src/traces/barpolar")},{"../src/traces/barpolar":669}],5:[function(d,ne,ae){ne.exports=d("../src/traces/box")},{"../src/traces/box":679}],6:[function(d,ne,ae){ne.exports=d("../src/components/calendars")},{"../src/components/calendars":364}],7:[function(d,ne,ae){ne.exports=d("../src/traces/candlestick")},{"../src/traces/candlestick":688}],8:[function(d,ne,ae){ne.exports=d("../src/traces/carpet")},{"../src/traces/carpet":707}],9:[function(d,ne,ae){ne.exports=d("../src/traces/choropleth")},{"../src/traces/choropleth":721}],10:[function(d,ne,ae){ne.exports=d("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":728}],11:[function(d,ne,ae){ne.exports=d("../src/traces/cone")},{"../src/traces/cone":734}],12:[function(d,ne,ae){ne.exports=d("../src/traces/contour")},{"../src/traces/contour":749}],13:[function(d,ne,ae){ne.exports=d("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":760}],14:[function(d,ne,ae){ne.exports=d("../src/core")},{"../src/core":481}],15:[function(d,ne,ae){ne.exports=d("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":768}],16:[function(d,ne,ae){ne.exports=d("../src/transforms/filter")},{"../src/transforms/filter":1119}],17:[function(d,ne,ae){ne.exports=d("../src/traces/funnel")},{"../src/traces/funnel":778}],18:[function(d,ne,ae){ne.exports=d("../src/traces/funnelarea")},{"../src/traces/funnelarea":787}],19:[function(d,ne,ae){ne.exports=d("../src/transforms/groupby")},{"../src/transforms/groupby":1120}],20:[function(d,ne,ae){ne.exports=d("../src/traces/heatmap")},{"../src/traces/heatmap":800}],21:[function(d,ne,ae){ne.exports=d("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":811}],22:[function(d,ne,ae){ne.exports=d("../src/traces/histogram")},{"../src/traces/histogram":823}],23:[function(d,ne,ae){ne.exports=d("../src/traces/histogram2d")},{"../src/traces/histogram2d":829}],24:[function(d,ne,ae){ne.exports=d("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":833}],25:[function(d,ne,ae){ne.exports=d("../src/traces/icicle")},{"../src/traces/icicle":839}],26:[function(d,ne,ae){ne.exports=d("../src/traces/image")},{"../src/traces/image":852}],27:[function(d,ne,ae){var w=d("./core");w.register([d("./bar"),d("./box"),d("./heatmap"),d("./histogram"),d("./histogram2d"),d("./histogram2dcontour"),d("./contour"),d("./scatterternary"),d("./violin"),d("./funnel"),d("./waterfall"),d("./image"),d("./pie"),d("./sunburst"),d("./treemap"),d("./icicle"),d("./funnelarea"),d("./scatter3d"),d("./surface"),d("./isosurface"),d("./volume"),d("./mesh3d"),d("./cone"),d("./streamtube"),d("./scattergeo"),d("./choropleth"),d("./scattergl"),d("./splom"),d("./pointcloud"),d("./heatmapgl"),d("./parcoords"),d("./parcats"),d("./scattermapbox"),d("./choroplethmapbox"),d("./densitymapbox"),d("./sankey"),d("./indicator"),d("./table"),d("./carpet"),d("./scattercarpet"),d("./contourcarpet"),d("./ohlc"),d("./candlestick"),d("./scatterpolar"),d("./scatterpolargl"),d("./barpolar"),d("./scattersmith"),d("./aggregate"),d("./filter"),d("./groupby"),d("./sort"),d("./calendars")]),ne.exports=w},{"./aggregate":2,"./bar":3,"./barpolar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./icicle":25,"./image":26,"./indicator":28,"./isosurface":29,"./mesh3d":30,"./ohlc":31,"./parcats":32,"./parcoords":33,"./pie":34,"./pointcloud":35,"./sankey":36,"./scatter3d":37,"./scattercarpet":38,"./scattergeo":39,"./scattergl":40,"./scattermapbox":41,"./scatterpolar":42,"./scatterpolargl":43,"./scattersmith":44,"./scatterternary":45,"./sort":46,"./splom":47,"./streamtube":48,"./sunburst":49,"./surface":50,"./table":51,"./treemap":52,"./violin":53,"./volume":54,"./waterfall":55}],28:[function(d,ne,ae){ne.exports=d("../src/traces/indicator")},{"../src/traces/indicator":860}],29:[function(d,ne,ae){ne.exports=d("../src/traces/isosurface")},{"../src/traces/isosurface":866}],30:[function(d,ne,ae){ne.exports=d("../src/traces/mesh3d")},{"../src/traces/mesh3d":871}],31:[function(d,ne,ae){ne.exports=d("../src/traces/ohlc")},{"../src/traces/ohlc":876}],32:[function(d,ne,ae){ne.exports=d("../src/traces/parcats")},{"../src/traces/parcats":885}],33:[function(d,ne,ae){ne.exports=d("../src/traces/parcoords")},{"../src/traces/parcoords":896}],34:[function(d,ne,ae){ne.exports=d("../src/traces/pie")},{"../src/traces/pie":907}],35:[function(d,ne,ae){ne.exports=d("../src/traces/pointcloud")},{"../src/traces/pointcloud":916}],36:[function(d,ne,ae){ne.exports=d("../src/traces/sankey")},{"../src/traces/sankey":922}],37:[function(d,ne,ae){ne.exports=d("../src/traces/scatter3d")},{"../src/traces/scatter3d":960}],38:[function(d,ne,ae){ne.exports=d("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":967}],39:[function(d,ne,ae){ne.exports=d("../src/traces/scattergeo")},{"../src/traces/scattergeo":975}],40:[function(d,ne,ae){ne.exports=d("../src/traces/scattergl")},{"../src/traces/scattergl":989}],41:[function(d,ne,ae){ne.exports=d("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":999}],42:[function(d,ne,ae){ne.exports=d("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1007}],43:[function(d,ne,ae){ne.exports=d("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1015}],44:[function(d,ne,ae){ne.exports=d("../src/traces/scattersmith")},{"../src/traces/scattersmith":1022}],45:[function(d,ne,ae){ne.exports=d("../src/traces/scatterternary")},{"../src/traces/scatterternary":1030}],46:[function(d,ne,ae){ne.exports=d("../src/transforms/sort")},{"../src/transforms/sort":1122}],47:[function(d,ne,ae){ne.exports=d("../src/traces/splom")},{"../src/traces/splom":1040}],48:[function(d,ne,ae){ne.exports=d("../src/traces/streamtube")},{"../src/traces/streamtube":1048}],49:[function(d,ne,ae){ne.exports=d("../src/traces/sunburst")},{"../src/traces/sunburst":1056}],50:[function(d,ne,ae){ne.exports=d("../src/traces/surface")},{"../src/traces/surface":1065}],51:[function(d,ne,ae){ne.exports=d("../src/traces/table")},{"../src/traces/table":1073}],52:[function(d,ne,ae){ne.exports=d("../src/traces/treemap")},{"../src/traces/treemap":1084}],53:[function(d,ne,ae){ne.exports=d("../src/traces/violin")},{"../src/traces/violin":1097}],54:[function(d,ne,ae){ne.exports=d("../src/traces/volume")},{"../src/traces/volume":1105}],55:[function(d,ne,ae){ne.exports=d("../src/traces/waterfall")},{"../src/traces/waterfall":1113}],56:[function(d,ne,ae){(function(w,v){typeof ae=="object"&&typeof ne<"u"?v(ae,d("d3-array"),d("d3-collection"),d("d3-shape"),d("elementary-circuits-directed-graph")):v(w.d3=w.d3||{},w.d3,w.d3,w.d3,null)})(this,function(w,v,M,T,e){e=e&&e.hasOwnProperty("default")?e.default:e;function a(fe){return fe.target.depth}function n(fe){return fe.depth}function r(fe,pe){return pe-1-fe.height}function t(fe,pe){return fe.sourceLinks.length?fe.depth:pe-1}function f(fe){return fe.targetLinks.length?fe.depth:fe.sourceLinks.length?v.min(fe.sourceLinks,a)-1:0}function o(fe){return function(){return fe}}var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(fe){return typeof fe}:function(fe){return fe&&typeof Symbol=="function"&&fe.constructor===Symbol&&fe!==Symbol.prototype?"symbol":typeof fe};function g(fe,pe){return y(fe.source,pe.source)||fe.index-pe.index}function p(fe,pe){return y(fe.target,pe.target)||fe.index-pe.index}function y(fe,pe){return fe.partOfCycle===pe.partOfCycle?fe.y0-pe.y0:fe.circularLinkType==="top"||pe.circularLinkType==="bottom"?-1:1}function c(fe){return fe.value}function b(fe){return(fe.y0+fe.y1)/2}function l(fe){return b(fe.source)}function _(fe){return b(fe.target)}function s(fe){return fe.index}function A(fe){return fe.nodes}function m(fe){return fe.links}function h(fe,pe){var ye=fe.get(pe);if(!ye)throw new Error("missing: "+pe);return ye}function x(fe,pe){return pe(fe)}var u=25,L=10,S=.3;function k(){var fe=0,pe=0,ye=1,Te=1,_e=24,De,Be=s,Ue=t,xe=A,Pe=m,Ve=32,Qe=2,Fe,Le=null;function Ne(){var Mt={nodes:xe.apply(null,arguments),links:Pe.apply(null,arguments)};dt(Mt),P(Mt,Be,Le),Dt(Mt),zt(Mt),z(Mt,Be),Ut(Mt,Ve,Be),Ct(Mt);for(var rt=4,ct=0;ct<rt;ct++)X(Mt,Te,Be),ee(Mt,Te,Be),q(Mt,pe,Te,Be),X(Mt,Te,Be),ee(Mt,Te,Be);return ge(Mt,pe,Te),V(Mt,Qe,Te,Be),Mt}Ne.nodeId=function(Mt){return arguments.length?(Be=typeof Mt=="function"?Mt:o(Mt),Ne):Be},Ne.nodeAlign=function(Mt){return arguments.length?(Ue=typeof Mt=="function"?Mt:o(Mt),Ne):Ue},Ne.nodeWidth=function(Mt){return arguments.length?(_e=+Mt,Ne):_e},Ne.nodePadding=function(Mt){return arguments.length?(De=+Mt,Ne):De},Ne.nodes=function(Mt){return arguments.length?(xe=typeof Mt=="function"?Mt:o(Mt),Ne):xe},Ne.links=function(Mt){return arguments.length?(Pe=typeof Mt=="function"?Mt:o(Mt),Ne):Pe},Ne.size=function(Mt){return arguments.length?(fe=pe=0,ye=+Mt[0],Te=+Mt[1],Ne):[ye-fe,Te-pe]},Ne.extent=function(Mt){return arguments.length?(fe=+Mt[0][0],ye=+Mt[1][0],pe=+Mt[0][1],Te=+Mt[1][1],Ne):[[fe,pe],[ye,Te]]},Ne.iterations=function(Mt){return arguments.length?(Ve=+Mt,Ne):Ve},Ne.circularLinkGap=function(Mt){return arguments.length?(Qe=+Mt,Ne):Qe},Ne.nodePaddingRatio=function(Mt){return arguments.length?(Fe=+Mt,Ne):Fe},Ne.sortNodes=function(Mt){return arguments.length?(Le=Mt,Ne):Le},Ne.update=function(Mt){return z(Mt,Be),Ct(Mt),Mt.links.forEach(function(rt){rt.circular&&(rt.circularLinkType=rt.y0+rt.y1<Te?"top":"bottom",rt.source.circularLinkType=rt.circularLinkType,rt.target.circularLinkType=rt.circularLinkType)}),X(Mt,Te,Be,!1),ee(Mt,Te,Be),V(Mt,Qe,Te,Be),Mt};function dt(Mt){Mt.nodes.forEach(function(ct,Ze){ct.index=Ze,ct.sourceLinks=[],ct.targetLinks=[]});var rt=M.map(Mt.nodes,Be);return Mt.links.forEach(function(ct,Ze){ct.index=Ze;var ke=ct.source,Ge=ct.target;(typeof ke>"u"?"undefined":i(ke))!=="object"&&(ke=ct.source=h(rt,ke)),(typeof Ge>"u"?"undefined":i(Ge))!=="object"&&(Ge=ct.target=h(rt,Ge)),ke.sourceLinks.push(ct),Ge.targetLinks.push(ct)}),Mt}function Dt(Mt){Mt.nodes.forEach(function(rt){rt.partOfCycle=!1,rt.value=Math.max(v.sum(rt.sourceLinks,c),v.sum(rt.targetLinks,c)),rt.sourceLinks.forEach(function(ct){ct.circular&&(rt.partOfCycle=!0,rt.circularLinkType=ct.circularLinkType)}),rt.targetLinks.forEach(function(ct){ct.circular&&(rt.partOfCycle=!0,rt.circularLinkType=ct.circularLinkType)})})}function Xt(Mt){var rt=0,ct=0,Ze=0,ke=0,Ge=v.max(Mt.nodes,function(Je){return Je.column});return Mt.links.forEach(function(Je){Je.circular&&(Je.circularLinkType=="top"?rt=rt+Je.width:ct=ct+Je.width,Je.target.column==0&&(ke=ke+Je.width),Je.source.column==Ge&&(Ze=Ze+Je.width))}),rt=rt>0?rt+u+L:rt,ct=ct>0?ct+u+L:ct,Ze=Ze>0?Ze+u+L:Ze,ke=ke>0?ke+u+L:ke,{top:rt,bottom:ct,left:ke,right:Ze}}function At(Mt,rt){var ct=v.max(Mt.nodes,function(_t){return _t.column}),Ze=ye-fe,ke=Te-pe,Ge=Ze+rt.right+rt.left,Je=ke+rt.top+rt.bottom,ot=Ze/Ge,Pt=ke/Je;return fe=fe*ot+rt.left,ye=rt.right==0?ye:ye*ot,pe=pe*Pt+rt.top,Te=Te*Pt,Mt.nodes.forEach(function(_t){_t.x0=fe+_t.column*((ye-fe-_e)/ct),_t.x1=_t.x0+_e}),Pt}function zt(Mt){var rt,ct,Ze;for(rt=Mt.nodes,ct=[],Ze=0;rt.length;++Ze,rt=ct,ct=[])rt.forEach(function(ke){ke.depth=Ze,ke.sourceLinks.forEach(function(Ge){ct.indexOf(Ge.target)<0&&!Ge.circular&&ct.push(Ge.target)})});for(rt=Mt.nodes,ct=[],Ze=0;rt.length;++Ze,rt=ct,ct=[])rt.forEach(function(ke){ke.height=Ze,ke.targetLinks.forEach(function(Ge){ct.indexOf(Ge.source)<0&&!Ge.circular&&ct.push(Ge.source)})});Mt.nodes.forEach(function(ke){ke.column=Math.floor(Ue.call(null,ke,Ze))})}function Ut(Mt,rt,ct){var Ze=M.nest().key(function(_t){return _t.column}).sortKeys(v.ascending).entries(Mt.nodes).map(function(_t){return _t.values});Je(ct),Pt();for(var ke=1,Ge=rt;Ge>0;--Ge)ot(ke*=.99,ct),Pt();function Je(_t){if(Fe){var Bt=1/0;Ze.forEach(function(rr){var er=Te*Fe/(rr.length+1);Bt=er<Bt?er:Bt}),De=Bt}var qt=v.min(Ze,function(rr){return(Te-pe-(rr.length-1)*De)/v.sum(rr,c)});qt=qt*S,Mt.links.forEach(function(rr){rr.width=rr.value*qt});var Ot=Xt(Mt),$t=At(Mt,Ot);qt=qt*$t,Mt.links.forEach(function(rr){rr.width=rr.value*qt}),Ze.forEach(function(rr){var er=rr.length;rr.forEach(function(pr,Xr){pr.depth==Ze.length-1&&er==1||pr.depth==0&&er==1?(pr.y0=Te/2-pr.value*qt,pr.y1=pr.y0+pr.value*qt):pr.partOfCycle?R(pr,_t)==0?(pr.y0=Te/2+Xr,pr.y1=pr.y0+pr.value*qt):pr.circularLinkType=="top"?(pr.y0=pe+Xr,pr.y1=pr.y0+pr.value*qt):(pr.y0=Te-pr.value*qt-Xr,pr.y1=pr.y0+pr.value*qt):Ot.top==0||Ot.bottom==0?(pr.y0=(Te-pe)/er*Xr,pr.y1=pr.y0+pr.value*qt):(pr.y0=(Te-pe)/2-er/2+Xr,pr.y1=pr.y0+pr.value*qt)})})}function ot(_t,Bt){var qt=Ze.length;Ze.forEach(function(Ot){var $t=Ot.length,rr=Ot[0].depth;Ot.forEach(function(er){var pr;if((er.sourceLinks.length||er.targetLinks.length)&&!(er.partOfCycle&&R(er,Bt)>0))if(rr==0&&$t==1)pr=er.y1-er.y0,er.y0=Te/2-pr/2,er.y1=Te/2+pr/2;else if(rr==qt-1&&$t==1)pr=er.y1-er.y0,er.y0=Te/2-pr/2,er.y1=Te/2+pr/2;else{var Xr=0,hn=v.mean(er.sourceLinks,_),Qr=v.mean(er.targetLinks,l);hn&&Qr?Xr=(hn+Qr)/2:Xr=hn||Qr;var nt=(Xr-b(er))*_t;er.y0+=nt,er.y1+=nt}})})}function Pt(){Ze.forEach(function(_t){var Bt,qt,Ot=pe,$t=_t.length,rr;for(_t.sort(y),rr=0;rr<$t;++rr)Bt=_t[rr],qt=Ot-Bt.y0,qt>0&&(Bt.y0+=qt,Bt.y1+=qt),Ot=Bt.y1+De;if(qt=Ot-De-Te,qt>0)for(Ot=Bt.y0-=qt,Bt.y1-=qt,rr=$t-2;rr>=0;--rr)Bt=_t[rr],qt=Bt.y1+De-Ot,qt>0&&(Bt.y0-=qt,Bt.y1-=qt),Ot=Bt.y0})}}function Ct(Mt){Mt.nodes.forEach(function(rt){rt.sourceLinks.sort(p),rt.targetLinks.sort(g)}),Mt.nodes.forEach(function(rt){var ct=rt.y0,Ze=ct,ke=rt.y1,Ge=ke;rt.sourceLinks.forEach(function(Je){Je.circular?(Je.y0=ke-Je.width/2,ke=ke-Je.width):(Je.y0=ct+Je.width/2,ct+=Je.width)}),rt.targetLinks.forEach(function(Je){Je.circular?(Je.y1=Ge-Je.width/2,Ge=Ge-Je.width):(Je.y1=Ze+Je.width/2,Ze+=Je.width)})})}return Ne}function P(fe,pe,ye){var Te=0;if(ye===null){for(var _e=[],De=0;De<fe.links.length;De++){var Be=fe.links[De],Ue=Be.source.index,xe=Be.target.index;_e[Ue]||(_e[Ue]=[]),_e[xe]||(_e[xe]=[]),_e[Ue].indexOf(xe)===-1&&_e[Ue].push(xe)}var Pe=e(_e);Pe.sort(function(Le,Ne){return Le.length-Ne.length});var Ve={};for(De=0;De<Pe.length;De++){var Qe=Pe[De],Fe=Qe.slice(-2);Ve[Fe[0]]||(Ve[Fe[0]]={}),Ve[Fe[0]][Fe[1]]=!0}fe.links.forEach(function(Le){var Ne=Le.target.index,dt=Le.source.index;Ne===dt||Ve[dt]&&Ve[dt][Ne]?(Le.circular=!0,Le.circularLinkID=Te,Te=Te+1):Le.circular=!1})}else fe.links.forEach(function(Le){Le.source[ye]<Le.target[ye]?Le.circular=!1:(Le.circular=!0,Le.circularLinkID=Te,Te=Te+1)})}function z(fe,pe){var ye=0,Te=0;fe.links.forEach(function(_e){_e.circular&&(_e.source.circularLinkType||_e.target.circularLinkType?_e.circularLinkType=_e.source.circularLinkType?_e.source.circularLinkType:_e.target.circularLinkType:_e.circularLinkType=ye<Te?"top":"bottom",_e.circularLinkType=="top"?ye=ye+1:Te=Te+1,fe.nodes.forEach(function(De){(x(De,pe)==x(_e.source,pe)||x(De,pe)==x(_e.target,pe))&&(De.circularLinkType=_e.circularLinkType)}))}),fe.links.forEach(function(_e){_e.circular&&(_e.source.circularLinkType==_e.target.circularLinkType&&(_e.circularLinkType=_e.source.circularLinkType),le(_e,pe)&&(_e.circularLinkType=_e.source.circularLinkType))})}function I(fe){var pe=Math.abs(fe.y1-fe.y0),ye=Math.abs(fe.target.x0-fe.source.x1);return Math.atan(ye/pe)}function D(fe,pe){return fe.source.column<pe.target.column?!1:!(fe.target.column>pe.source.column)}function R(fe,pe){var ye=0;fe.sourceLinks.forEach(function(_e){ye=_e.circular&&!le(_e,pe)?ye+1:ye});var Te=0;return fe.targetLinks.forEach(function(_e){Te=_e.circular&&!le(_e,pe)?Te+1:Te}),ye+Te}function O(fe){var pe=fe.source.sourceLinks,ye=0;pe.forEach(function(De){ye=De.circular?ye+1:ye});var Te=fe.target.targetLinks,_e=0;return Te.forEach(function(De){_e=De.circular?_e+1:_e}),!(ye>1||_e>1)}function F(fe,pe,ye){return fe.sort(J),fe.forEach(function(Te,_e){var De=0;if(le(Te,ye)&&O(Te))Te.circularPathData.verticalBuffer=De+Te.width/2;else{var Be=0;for(Be;Be<_e;Be++)if(D(fe[_e],fe[Be])){var Ue=fe[Be].circularPathData.verticalBuffer+fe[Be].width/2+pe;De=Ue>De?Ue:De}Te.circularPathData.verticalBuffer=De+Te.width/2}}),fe}function V(fe,pe,ye,Te){var _e=5,De=v.min(fe.links,function(xe){return xe.source.y0});fe.links.forEach(function(xe){xe.circular&&(xe.circularPathData={})});var Be=fe.links.filter(function(xe){return xe.circularLinkType=="top"});F(Be,pe,Te);var Ue=fe.links.filter(function(xe){return xe.circularLinkType=="bottom"});F(Ue,pe,Te),fe.links.forEach(function(xe){if(xe.circular){if(xe.circularPathData.arcRadius=xe.width+L,xe.circularPathData.leftNodeBuffer=_e,xe.circularPathData.rightNodeBuffer=_e,xe.circularPathData.sourceWidth=xe.source.x1-xe.source.x0,xe.circularPathData.sourceX=xe.source.x0+xe.circularPathData.sourceWidth,xe.circularPathData.targetX=xe.target.x0,xe.circularPathData.sourceY=xe.y0,xe.circularPathData.targetY=xe.y1,le(xe,Te)&&O(xe))xe.circularPathData.leftSmallArcRadius=L+xe.width/2,xe.circularPathData.leftLargeArcRadius=L+xe.width/2,xe.circularPathData.rightSmallArcRadius=L+xe.width/2,xe.circularPathData.rightLargeArcRadius=L+xe.width/2,xe.circularLinkType=="bottom"?(xe.circularPathData.verticalFullExtent=xe.source.y1+u+xe.circularPathData.verticalBuffer,xe.circularPathData.verticalLeftInnerExtent=xe.circularPathData.verticalFullExtent-xe.circularPathData.leftLargeArcRadius,xe.circularPathData.verticalRightInnerExtent=xe.circularPathData.verticalFullExtent-xe.circularPathData.rightLargeArcRadius):(xe.circularPathData.verticalFullExtent=xe.source.y0-u-xe.circularPathData.verticalBuffer,xe.circularPathData.verticalLeftInnerExtent=xe.circularPathData.verticalFullExtent+xe.circularPathData.leftLargeArcRadius,xe.circularPathData.verticalRightInnerExtent=xe.circularPathData.verticalFullExtent+xe.circularPathData.rightLargeArcRadius);else{var Pe=xe.source.column,Ve=xe.circularLinkType,Qe=fe.links.filter(function(Ne){return Ne.source.column==Pe&&Ne.circularLinkType==Ve});xe.circularLinkType=="bottom"?Qe.sort(Y):Qe.sort(Z);var Fe=0;Qe.forEach(function(Ne,dt){Ne.circularLinkID==xe.circularLinkID&&(xe.circularPathData.leftSmallArcRadius=L+xe.width/2+Fe,xe.circularPathData.leftLargeArcRadius=L+xe.width/2+dt*pe+Fe),Fe=Fe+Ne.width}),Pe=xe.target.column,Qe=fe.links.filter(function(Ne){return Ne.target.column==Pe&&Ne.circularLinkType==Ve}),xe.circularLinkType=="bottom"?Qe.sort(re):Qe.sort(j),Fe=0,Qe.forEach(function(Ne,dt){Ne.circularLinkID==xe.circularLinkID&&(xe.circularPathData.rightSmallArcRadius=L+xe.width/2+Fe,xe.circularPathData.rightLargeArcRadius=L+xe.width/2+dt*pe+Fe),Fe=Fe+Ne.width}),xe.circularLinkType=="bottom"?(xe.circularPathData.verticalFullExtent=Math.max(ye,xe.source.y1,xe.target.y1)+u+xe.circularPathData.verticalBuffer,xe.circularPathData.verticalLeftInnerExtent=xe.circularPathData.verticalFullExtent-xe.circularPathData.leftLargeArcRadius,xe.circularPathData.verticalRightInnerExtent=xe.circularPathData.verticalFullExtent-xe.circularPathData.rightLargeArcRadius):(xe.circularPathData.verticalFullExtent=De-u-xe.circularPathData.verticalBuffer,xe.circularPathData.verticalLeftInnerExtent=xe.circularPathData.verticalFullExtent+xe.circularPathData.leftLargeArcRadius,xe.circularPathData.verticalRightInnerExtent=xe.circularPathData.verticalFullExtent+xe.circularPathData.rightLargeArcRadius)}xe.circularPathData.leftInnerExtent=xe.circularPathData.sourceX+xe.circularPathData.leftNodeBuffer,xe.circularPathData.rightInnerExtent=xe.circularPathData.targetX-xe.circularPathData.rightNodeBuffer,xe.circularPathData.leftFullExtent=xe.circularPathData.sourceX+xe.circularPathData.leftLargeArcRadius+xe.circularPathData.leftNodeBuffer,xe.circularPathData.rightFullExtent=xe.circularPathData.targetX-xe.circularPathData.rightLargeArcRadius-xe.circularPathData.rightNodeBuffer}if(xe.circular)xe.path=G(xe);else{var Le=T.linkHorizontal().source(function(Ne){var dt=Ne.source.x0+(Ne.source.x1-Ne.source.x0),Dt=Ne.y0;return[dt,Dt]}).target(function(Ne){var dt=Ne.target.x0,Dt=Ne.y1;return[dt,Dt]});xe.path=Le(xe)}})}function G(fe){var pe="";return fe.circularLinkType=="top"?pe="M"+fe.circularPathData.sourceX+" "+fe.circularPathData.sourceY+" L"+fe.circularPathData.leftInnerExtent+" "+fe.circularPathData.sourceY+" A"+fe.circularPathData.leftLargeArcRadius+" "+fe.circularPathData.leftSmallArcRadius+" 0 0 0 "+fe.circularPathData.leftFullExtent+" "+(fe.circularPathData.sourceY-fe.circularPathData.leftSmallArcRadius)+" L"+fe.circularPathData.leftFullExtent+" "+fe.circularPathData.verticalLeftInnerExtent+" A"+fe.circularPathData.leftLargeArcRadius+" "+fe.circularPathData.leftLargeArcRadius+" 0 0 0 "+fe.circularPathData.leftInnerExtent+" "+fe.circularPathData.verticalFullExtent+" L"+fe.circularPathData.rightInnerExtent+" "+fe.circularPathData.verticalFullExtent+" A"+fe.circularPathData.rightLargeArcRadius+" "+fe.circularPathData.rightLargeArcRadius+" 0 0 0 "+fe.circularPathData.rightFullExtent+" "+fe.circularPathData.verticalRightInnerExtent+" L"+fe.circularPathData.rightFullExtent+" "+(fe.circularPathData.targetY-fe.circularPathData.rightSmallArcRadius)+" A"+fe.circularPathData.rightLargeArcRadius+" "+fe.circularPathData.rightSmallArcRadius+" 0 0 0 "+fe.circularPathData.rightInnerExtent+" "+fe.circularPathData.targetY+" L"+fe.circularPathData.targetX+" "+fe.circularPathData.targetY:pe="M"+fe.circularPathData.sourceX+" "+fe.circularPathData.sourceY+" L"+fe.circularPathData.leftInnerExtent+" "+fe.circularPathData.sourceY+" A"+fe.circularPathData.leftLargeArcRadius+" "+fe.circularPathData.leftSmallArcRadius+" 0 0 1 "+fe.circularPathData.leftFullExtent+" "+(fe.circularPathData.sourceY+fe.circularPathData.leftSmallArcRadius)+" L"+fe.circularPathData.leftFullExtent+" "+fe.circularPathData.verticalLeftInnerExtent+" A"+fe.circularPathData.leftLargeArcRadius+" "+fe.circularPathData.leftLargeArcRadius+" 0 0 1 "+fe.circularPathData.leftInnerExtent+" "+fe.circularPathData.verticalFullExtent+" L"+fe.circularPathData.rightInnerExtent+" "+fe.circularPathData.verticalFullExtent+" A"+fe.circularPathData.rightLargeArcRadius+" "+fe.circularPathData.rightLargeArcRadius+" 0 0 1 "+fe.circularPathData.rightFullExtent+" "+fe.circularPathData.verticalRightInnerExtent+" L"+fe.circularPathData.rightFullExtent+" "+(fe.circularPathData.targetY+fe.circularPathData.rightSmallArcRadius)+" A"+fe.circularPathData.rightLargeArcRadius+" "+fe.circularPathData.rightSmallArcRadius+" 0 0 1 "+fe.circularPathData.rightInnerExtent+" "+fe.circularPathData.targetY+" L"+fe.circularPathData.targetX+" "+fe.circularPathData.targetY,pe}function J(fe,pe){return se(fe)==se(pe)?fe.circularLinkType=="bottom"?Y(fe,pe):Z(fe,pe):se(pe)-se(fe)}function Z(fe,pe){return fe.y0-pe.y0}function Y(fe,pe){return pe.y0-fe.y0}function j(fe,pe){return fe.y1-pe.y1}function re(fe,pe){return pe.y1-fe.y1}function se(fe){return fe.target.column-fe.source.column}function oe(fe){return fe.target.x0-fe.source.x1}function N(fe,pe){var ye=I(fe),Te=oe(pe)/Math.tan(ye),_e=ie(fe)=="up"?fe.y1+Te:fe.y1-Te;return _e}function U(fe,pe){var ye=I(fe),Te=oe(pe)/Math.tan(ye),_e=ie(fe)=="up"?fe.y1-Te:fe.y1+Te;return _e}function q(fe,pe,ye,Te){fe.links.forEach(function(_e){if(!_e.circular&&_e.target.column-_e.source.column>1){var De=_e.source.column+1,Be=_e.target.column-1,Ue=1,xe=Be-De+1;for(Ue=1;De<=Be;De++,Ue++)fe.nodes.forEach(function(Pe){if(Pe.column==De){var Ve=Ue/(xe+1),Qe=Math.pow(1-Ve,3),Fe=3*Ve*Math.pow(1-Ve,2),Le=3*Math.pow(Ve,2)*(1-Ve),Ne=Math.pow(Ve,3),dt=Qe*_e.y0+Fe*_e.y0+Le*_e.y1+Ne*_e.y1,Dt=dt-_e.width/2,Xt=dt+_e.width/2,At;Dt>Pe.y0&&Dt<Pe.y1?(At=Pe.y1-Dt+10,At=Pe.circularLinkType=="bottom"?At:-At,Pe=W(Pe,At,pe,ye),fe.nodes.forEach(function(zt){x(zt,Te)==x(Pe,Te)||zt.column!=Pe.column||Q(Pe,zt)&&W(zt,At,pe,ye)})):Xt>Pe.y0&&Xt<Pe.y1?(At=Xt-Pe.y0+10,Pe=W(Pe,At,pe,ye),fe.nodes.forEach(function(zt){x(zt,Te)==x(Pe,Te)||zt.column!=Pe.column||zt.y0<Pe.y1&&zt.y1>Pe.y1&&W(zt,At,pe,ye)})):Dt<Pe.y0&&Xt>Pe.y1&&(At=Xt-Pe.y0+10,Pe=W(Pe,At,pe,ye),fe.nodes.forEach(function(zt){x(zt,Te)==x(Pe,Te)||zt.column!=Pe.column||zt.y0<Pe.y1&&zt.y1>Pe.y1&&W(zt,At,pe,ye)}))}})}})}function Q(fe,pe){return fe.y0>pe.y0&&fe.y0<pe.y1||fe.y1>pe.y0&&fe.y1<pe.y1?!0:fe.y0<pe.y0&&fe.y1>pe.y1}function W(fe,pe,ye,Te){return fe.y0+pe>=ye&&fe.y1+pe<=Te&&(fe.y0=fe.y0+pe,fe.y1=fe.y1+pe,fe.targetLinks.forEach(function(_e){_e.y1=_e.y1+pe}),fe.sourceLinks.forEach(function(_e){_e.y0=_e.y0+pe})),fe}function X(fe,pe,ye,Te){fe.nodes.forEach(function(_e){Te&&_e.y+(_e.y1-_e.y0)>pe&&(_e.y=_e.y-(_e.y+(_e.y1-_e.y0)-pe));var De=fe.links.filter(function(xe){return x(xe.source,ye)==x(_e,ye)}),Be=De.length;Be>1&&De.sort(function(xe,Pe){if(!xe.circular&&!Pe.circular){if(xe.target.column==Pe.target.column)return xe.y1-Pe.y1;if(te(xe,Pe)){if(xe.target.column>Pe.target.column){var Ve=U(Pe,xe);return xe.y1-Ve}if(Pe.target.column>xe.target.column){var Qe=U(xe,Pe);return Qe-Pe.y1}}else return xe.y1-Pe.y1}if(xe.circular&&!Pe.circular)return xe.circularLinkType=="top"?-1:1;if(Pe.circular&&!xe.circular)return Pe.circularLinkType=="top"?1:-1;if(xe.circular&&Pe.circular)return xe.circularLinkType===Pe.circularLinkType&&xe.circularLinkType=="top"?xe.target.column===Pe.target.column?xe.target.y1-Pe.target.y1:Pe.target.column-xe.target.column:xe.circularLinkType===Pe.circularLinkType&&xe.circularLinkType=="bottom"?xe.target.column===Pe.target.column?Pe.target.y1-xe.target.y1:xe.target.column-Pe.target.column:xe.circularLinkType=="top"?-1:1});var Ue=_e.y0;De.forEach(function(xe){xe.y0=Ue+xe.width/2,Ue=Ue+xe.width}),De.forEach(function(xe,Pe){if(xe.circularLinkType=="bottom"){var Ve=Pe+1,Qe=0;for(Ve;Ve<Be;Ve++)Qe=Qe+De[Ve].width;xe.y0=_e.y1-Qe-xe.width/2}})})}function ee(fe,pe,ye){fe.nodes.forEach(function(Te){var _e=fe.links.filter(function(Ue){return x(Ue.target,ye)==x(Te,ye)}),De=_e.length;De>1&&_e.sort(function(Ue,xe){if(!Ue.circular&&!xe.circular){if(Ue.source.column==xe.source.column)return Ue.y0-xe.y0;if(te(Ue,xe)){if(xe.source.column<Ue.source.column){var Pe=N(xe,Ue);return Ue.y0-Pe}if(Ue.source.column<xe.source.column){var Ve=N(Ue,xe);return Ve-xe.y0}}else return Ue.y0-xe.y0}if(Ue.circular&&!xe.circular)return Ue.circularLinkType=="top"?-1:1;if(xe.circular&&!Ue.circular)return xe.circularLinkType=="top"?1:-1;if(Ue.circular&&xe.circular)return Ue.circularLinkType===xe.circularLinkType&&Ue.circularLinkType=="top"?Ue.source.column===xe.source.column?Ue.source.y1-xe.source.y1:Ue.source.column-xe.source.column:Ue.circularLinkType===xe.circularLinkType&&Ue.circularLinkType=="bottom"?Ue.source.column===xe.source.column?Ue.source.y1-xe.source.y1:xe.source.column-Ue.source.column:Ue.circularLinkType=="top"?-1:1});var Be=Te.y0;_e.forEach(function(Ue){Ue.y1=Be+Ue.width/2,Be=Be+Ue.width}),_e.forEach(function(Ue,xe){if(Ue.circularLinkType=="bottom"){var Pe=xe+1,Ve=0;for(Pe;Pe<De;Pe++)Ve=Ve+_e[Pe].width;Ue.y1=Te.y1-Ve-Ue.width/2}})})}function te(fe,pe){return ie(fe)==ie(pe)}function ie(fe){return fe.y0-fe.y1>0?"up":"down"}function le(fe,pe){return x(fe.source,pe)==x(fe.target,pe)}function ge(fe,pe,ye){var Te=fe.nodes,_e=fe.links,De=!1,Be=!1;if(_e.forEach(function(Fe){Fe.circularLinkType=="top"?De=!0:Fe.circularLinkType=="bottom"&&(Be=!0)}),De==!1||Be==!1){var Ue=v.min(Te,function(Fe){return Fe.y0}),xe=v.max(Te,function(Fe){return Fe.y1}),Pe=xe-Ue,Ve=ye-pe,Qe=Ve/Pe;Te.forEach(function(Fe){var Le=(Fe.y1-Fe.y0)*Qe;Fe.y0=(Fe.y0-Ue)*Qe,Fe.y1=Fe.y0+Le}),_e.forEach(function(Fe){Fe.y0=(Fe.y0-Ue)*Qe,Fe.y1=(Fe.y1-Ue)*Qe,Fe.width=Fe.width*Qe})}}w.sankeyCircular=k,w.sankeyCenter=f,w.sankeyLeft=n,w.sankeyRight=r,w.sankeyJustify=t,Object.defineProperty(w,"__esModule",{value:!0})})},{"d3-array":107,"d3-collection":108,"d3-shape":119,"elementary-circuits-directed-graph":130}],57:[function(d,ne,ae){(function(w,v){typeof ae=="object"&&typeof ne<"u"?v(ae,d("d3-array"),d("d3-collection"),d("d3-shape")):v(w.d3=w.d3||{},w.d3,w.d3,w.d3)})(this,function(w,v,M,T){function e(L){return L.target.depth}function a(L){return L.depth}function n(L,S){return S-1-L.height}function r(L,S){return L.sourceLinks.length?L.depth:S-1}function t(L){return L.targetLinks.length?L.depth:L.sourceLinks.length?v.min(L.sourceLinks,e)-1:0}function f(L){return function(){return L}}function o(L,S){return g(L.source,S.source)||L.index-S.index}function i(L,S){return g(L.target,S.target)||L.index-S.index}function g(L,S){return L.y0-S.y0}function p(L){return L.value}function y(L){return(L.y0+L.y1)/2}function c(L){return y(L.source)*L.value}function b(L){return y(L.target)*L.value}function l(L){return L.index}function _(L){return L.nodes}function s(L){return L.links}function A(L,S){var k=L.get(S);if(!k)throw new Error("missing: "+S);return k}var m=function(){var L=0,S=0,k=1,P=1,z=24,I=8,D=l,R=r,O=_,F=s,V=32,G=2/3;function J(){var oe={nodes:O.apply(null,arguments),links:F.apply(null,arguments)};return Z(oe),Y(oe),j(oe),re(oe),se(oe),oe}J.update=function(oe){return se(oe),oe},J.nodeId=function(oe){return arguments.length?(D=typeof oe=="function"?oe:f(oe),J):D},J.nodeAlign=function(oe){return arguments.length?(R=typeof oe=="function"?oe:f(oe),J):R},J.nodeWidth=function(oe){return arguments.length?(z=+oe,J):z},J.nodePadding=function(oe){return arguments.length?(I=+oe,J):I},J.nodes=function(oe){return arguments.length?(O=typeof oe=="function"?oe:f(oe),J):O},J.links=function(oe){return arguments.length?(F=typeof oe=="function"?oe:f(oe),J):F},J.size=function(oe){return arguments.length?(L=S=0,k=+oe[0],P=+oe[1],J):[k-L,P-S]},J.extent=function(oe){return arguments.length?(L=+oe[0][0],k=+oe[1][0],S=+oe[0][1],P=+oe[1][1],J):[[L,S],[k,P]]},J.iterations=function(oe){return arguments.length?(V=+oe,J):V};function Z(oe){oe.nodes.forEach(function(U,q){U.index=q,U.sourceLinks=[],U.targetLinks=[]});var N=M.map(oe.nodes,D);oe.links.forEach(function(U,q){U.index=q;var Q=U.source,W=U.target;typeof Q!="object"&&(Q=U.source=A(N,Q)),typeof W!="object"&&(W=U.target=A(N,W)),Q.sourceLinks.push(U),W.targetLinks.push(U)})}function Y(oe){oe.nodes.forEach(function(N){N.value=Math.max(v.sum(N.sourceLinks,p),v.sum(N.targetLinks,p))})}function j(oe){var N,U,q;for(N=oe.nodes,U=[],q=0;N.length;++q,N=U,U=[])N.forEach(function(W){W.depth=q,W.sourceLinks.forEach(function(X){U.indexOf(X.target)<0&&U.push(X.target)})});for(N=oe.nodes,U=[],q=0;N.length;++q,N=U,U=[])N.forEach(function(W){W.height=q,W.targetLinks.forEach(function(X){U.indexOf(X.source)<0&&U.push(X.source)})});var Q=(k-L-z)/(q-1);oe.nodes.forEach(function(W){W.x1=(W.x0=L+Math.max(0,Math.min(q-1,Math.floor(R.call(null,W,q))))*Q)+z})}function re(oe){var N=M.nest().key(function(te){return te.x0}).sortKeys(v.ascending).entries(oe.nodes).map(function(te){return te.values});Q(),ee();for(var U=1,q=V;q>0;--q)X(U*=.99),ee(),W(U),ee();function Q(){var te=v.max(N,function(ge){return ge.length}),ie=G*(P-S)/(te-1);I>ie&&(I=ie);var le=v.min(N,function(ge){return(P-S-(ge.length-1)*I)/v.sum(ge,p)});N.forEach(function(ge){ge.forEach(function(fe,pe){fe.y1=(fe.y0=pe)+fe.value*le})}),oe.links.forEach(function(ge){ge.width=ge.value*le})}function W(te){N.forEach(function(ie){ie.forEach(function(le){if(le.targetLinks.length){var ge=(v.sum(le.targetLinks,c)/v.sum(le.targetLinks,p)-y(le))*te;le.y0+=ge,le.y1+=ge}})})}function X(te){N.slice().reverse().forEach(function(ie){ie.forEach(function(le){if(le.sourceLinks.length){var ge=(v.sum(le.sourceLinks,b)/v.sum(le.sourceLinks,p)-y(le))*te;le.y0+=ge,le.y1+=ge}})})}function ee(){N.forEach(function(te){var ie,le,ge=S,fe=te.length,pe;for(te.sort(g),pe=0;pe<fe;++pe)ie=te[pe],le=ge-ie.y0,le>0&&(ie.y0+=le,ie.y1+=le),ge=ie.y1+I;if(le=ge-I-P,le>0)for(ge=ie.y0-=le,ie.y1-=le,pe=fe-2;pe>=0;--pe)ie=te[pe],le=ie.y1+I-ge,le>0&&(ie.y0-=le,ie.y1-=le),ge=ie.y0})}}function se(oe){oe.nodes.forEach(function(N){N.sourceLinks.sort(i),N.targetLinks.sort(o)}),oe.nodes.forEach(function(N){var U=N.y0,q=U;N.sourceLinks.forEach(function(Q){Q.y0=U+Q.width/2,U+=Q.width}),N.targetLinks.forEach(function(Q){Q.y1=q+Q.width/2,q+=Q.width})})}return J};function h(L){return[L.source.x1,L.y0]}function x(L){return[L.target.x0,L.y1]}var u=function(){return T.linkHorizontal().source(h).target(x)};w.sankey=m,w.sankeyCenter=t,w.sankeyLeft=a,w.sankeyRight=n,w.sankeyJustify=r,w.sankeyLinkHorizontal=u,Object.defineProperty(w,"__esModule",{value:!0})})},{"d3-array":107,"d3-collection":108,"d3-shape":119}],58:[function(d,ne,ae){(function(){var w={version:"3.8.0"},v=[].slice,M=function(ue){return v.call(ue)},T=self.document;function e(ue){return ue&&(ue.ownerDocument||ue.document||ue).documentElement}function a(ue){return ue&&(ue.ownerDocument&&ue.ownerDocument.defaultView||ue.document&&ue||ue.defaultView)}if(T)try{M(T.documentElement.childNodes)[0].nodeType}catch{M=function(be){for(var Ee=be.length,Oe=new Array(Ee);Ee--;)Oe[Ee]=be[Ee];return Oe}}if(Date.now||(Date.now=function(){return+new Date}),T)try{T.createElement("DIV").style.setProperty("opacity",0,"")}catch{var n=this.Element.prototype,r=n.setAttribute,t=n.setAttributeNS,f=this.CSSStyleDeclaration.prototype,o=f.setProperty;n.setAttribute=function(be,Ee){r.call(this,be,Ee+"")},n.setAttributeNS=function(be,Ee,Oe){t.call(this,be,Ee,Oe+"")},f.setProperty=function(be,Ee,Oe){o.call(this,be,Ee+"",Oe)}}w.ascending=i;function i(ue,be){return ue<be?-1:ue>be?1:ue>=be?0:NaN}w.descending=function(ue,be){return be<ue?-1:be>ue?1:be>=ue?0:NaN},w.min=function(ue,be){var Ee=-1,Oe=ue.length,ze,We;if(arguments.length===1){for(;++Ee<Oe;)if((We=ue[Ee])!=null&&We>=We){ze=We;break}for(;++Ee<Oe;)(We=ue[Ee])!=null&&ze>We&&(ze=We)}else{for(;++Ee<Oe;)if((We=be.call(ue,ue[Ee],Ee))!=null&&We>=We){ze=We;break}for(;++Ee<Oe;)(We=be.call(ue,ue[Ee],Ee))!=null&&ze>We&&(ze=We)}return ze},w.max=function(ue,be){var Ee=-1,Oe=ue.length,ze,We;if(arguments.length===1){for(;++Ee<Oe;)if((We=ue[Ee])!=null&&We>=We){ze=We;break}for(;++Ee<Oe;)(We=ue[Ee])!=null&&We>ze&&(ze=We)}else{for(;++Ee<Oe;)if((We=be.call(ue,ue[Ee],Ee))!=null&&We>=We){ze=We;break}for(;++Ee<Oe;)(We=be.call(ue,ue[Ee],Ee))!=null&&We>ze&&(ze=We)}return ze},w.extent=function(ue,be){var Ee=-1,Oe=ue.length,ze,We,xt;if(arguments.length===1){for(;++Ee<Oe;)if((We=ue[Ee])!=null&&We>=We){ze=xt=We;break}for(;++Ee<Oe;)(We=ue[Ee])!=null&&(ze>We&&(ze=We),xt<We&&(xt=We))}else{for(;++Ee<Oe;)if((We=be.call(ue,ue[Ee],Ee))!=null&&We>=We){ze=xt=We;break}for(;++Ee<Oe;)(We=be.call(ue,ue[Ee],Ee))!=null&&(ze>We&&(ze=We),xt<We&&(xt=We))}return[ze,xt]};function g(ue){return ue===null?NaN:+ue}function p(ue){return!isNaN(ue)}w.sum=function(ue,be){var Ee=0,Oe=ue.length,ze,We=-1;if(arguments.length===1)for(;++We<Oe;)p(ze=+ue[We])&&(Ee+=ze);else for(;++We<Oe;)p(ze=+be.call(ue,ue[We],We))&&(Ee+=ze);return Ee},w.mean=function(ue,be){var Ee=0,Oe=ue.length,ze,We=-1,xt=Oe;if(arguments.length===1)for(;++We<Oe;)p(ze=g(ue[We]))?Ee+=ze:--xt;else for(;++We<Oe;)p(ze=g(be.call(ue,ue[We],We)))?Ee+=ze:--xt;if(xt)return Ee/xt},w.quantile=function(ue,be){var Ee=(ue.length-1)*be+1,Oe=Math.floor(Ee),ze=+ue[Oe-1],We=Ee-Oe;return We?ze+We*(ue[Oe]-ze):ze},w.median=function(ue,be){var Ee=[],Oe=ue.length,ze,We=-1;if(arguments.length===1)for(;++We<Oe;)p(ze=g(ue[We]))&&Ee.push(ze);else for(;++We<Oe;)p(ze=g(be.call(ue,ue[We],We)))&&Ee.push(ze);if(Ee.length)return w.quantile(Ee.sort(i),.5)},w.variance=function(ue,be){var Ee=ue.length,Oe=0,ze,We,xt=0,ht=-1,Et=0;if(arguments.length===1)for(;++ht<Ee;)p(ze=g(ue[ht]))&&(We=ze-Oe,Oe+=We/++Et,xt+=We*(ze-Oe));else for(;++ht<Ee;)p(ze=g(be.call(ue,ue[ht],ht)))&&(We=ze-Oe,Oe+=We/++Et,xt+=We*(ze-Oe));if(Et>1)return xt/(Et-1)},w.deviation=function(){var ue=w.variance.apply(this,arguments);return ue&&Math.sqrt(ue)};function y(ue){return{left:function(be,Ee,Oe,ze){for(arguments.length<3&&(Oe=0),arguments.length<4&&(ze=be.length);Oe<ze;){var We=Oe+ze>>>1;ue(be[We],Ee)<0?Oe=We+1:ze=We}return Oe},right:function(be,Ee,Oe,ze){for(arguments.length<3&&(Oe=0),arguments.length<4&&(ze=be.length);Oe<ze;){var We=Oe+ze>>>1;ue(be[We],Ee)>0?ze=We:Oe=We+1}return Oe}}}var c=y(i);w.bisectLeft=c.left,w.bisect=w.bisectRight=c.right,w.bisector=function(ue){return y(ue.length===1?function(be,Ee){return i(ue(be),Ee)}:ue)},w.shuffle=function(ue,be,Ee){(Oe=arguments.length)<3&&(Ee=ue.length,Oe<2&&(be=0));for(var Oe=Ee-be,ze,We;Oe;)We=Math.random()*Oe--|0,ze=ue[Oe+be],ue[Oe+be]=ue[We+be],ue[We+be]=ze;return ue},w.permute=function(ue,be){for(var Ee=be.length,Oe=new Array(Ee);Ee--;)Oe[Ee]=ue[be[Ee]];return Oe},w.pairs=function(ue){for(var be=0,Ee=ue.length-1,Oe=ue[0],ze=new Array(Ee<0?0:Ee);be<Ee;)ze[be]=[Oe,Oe=ue[++be]];return ze},w.transpose=function(ue){if(!(We=ue.length))return[];for(var be=-1,Ee=w.min(ue,b),Oe=new Array(Ee);++be<Ee;)for(var ze=-1,We,xt=Oe[be]=new Array(We);++ze<We;)xt[ze]=ue[ze][be];return Oe};function b(ue){return ue.length}w.zip=function(){return w.transpose(arguments)},w.keys=function(ue){var be=[];for(var Ee in ue)be.push(Ee);return be},w.values=function(ue){var be=[];for(var Ee in ue)be.push(ue[Ee]);return be},w.entries=function(ue){var be=[];for(var Ee in ue)be.push({key:Ee,value:ue[Ee]});return be},w.merge=function(ue){for(var be=ue.length,Ee,Oe=-1,ze=0,We,xt;++Oe<be;)ze+=ue[Oe].length;for(We=new Array(ze);--be>=0;)for(xt=ue[be],Ee=xt.length;--Ee>=0;)We[--ze]=xt[Ee];return We};var l=Math.abs;w.range=function(ue,be,Ee){if(arguments.length<3&&(Ee=1,arguments.length<2&&(be=ue,ue=0)),(be-ue)/Ee===1/0)throw new Error("infinite range");var Oe=[],ze=_(l(Ee)),We=-1,xt;if(ue*=ze,be*=ze,Ee*=ze,Ee<0)for(;(xt=ue+Ee*++We)>be;)Oe.push(xt/ze);else for(;(xt=ue+Ee*++We)<be;)Oe.push(xt/ze);return Oe};function _(ue){for(var be=1;ue*be%1;)be*=10;return be}function s(ue,be){for(var Ee in be)Object.defineProperty(ue.prototype,Ee,{value:be[Ee],enumerable:!1})}w.map=function(ue,be){var Ee=new A;if(ue instanceof A)ue.forEach(function(ht,Et){Ee.set(ht,Et)});else if(Array.isArray(ue)){var Oe=-1,ze=ue.length,We;if(arguments.length===1)for(;++Oe<ze;)Ee.set(Oe,ue[Oe]);else for(;++Oe<ze;)Ee.set(be.call(ue,We=ue[Oe],Oe),We)}else for(var xt in ue)Ee.set(xt,ue[xt]);return Ee};function A(){this._=Object.create(null)}var m="__proto__",h="\0";s(A,{has:L,get:function(ue){return this._[x(ue)]},set:function(ue,be){return this._[x(ue)]=be},remove:S,keys:k,values:function(){var ue=[];for(var be in this._)ue.push(this._[be]);return ue},entries:function(){var ue=[];for(var be in this._)ue.push({key:u(be),value:this._[be]});return ue},size:P,empty:z,forEach:function(ue){for(var be in this._)ue.call(this,u(be),this._[be])}});function x(ue){return(ue+="")===m||ue[0]===h?h+ue:ue}function u(ue){return(ue+="")[0]===h?ue.slice(1):ue}function L(ue){return x(ue)in this._}function S(ue){return(ue=x(ue))in this._&&delete this._[ue]}function k(){var ue=[];for(var be in this._)ue.push(u(be));return ue}function P(){var ue=0;for(var be in this._)++ue;return ue}function z(){for(var ue in this._)return!1;return!0}w.nest=function(){var ue={},be=[],Ee=[],Oe,ze;function We(ht,Et,Vt){if(Vt>=be.length)return ze?ze.call(ue,Et):Oe?Et.sort(Oe):Et;for(var jt=-1,Jt=Et.length,Tr=be[Vt++],Kr,ln,kr,zr=new A,Gr;++jt<Jt;)(Gr=zr.get(Kr=Tr(ln=Et[jt])))?Gr.push(ln):zr.set(Kr,[ln]);return ht?(ln=ht(),kr=function(nn,on){ln.set(nn,We(ht,on,Vt))}):(ln={},kr=function(nn,on){ln[nn]=We(ht,on,Vt)}),zr.forEach(kr),ln}function xt(ht,Et){if(Et>=be.length)return ht;var Vt=[],jt=Ee[Et++];return ht.forEach(function(Jt,Tr){Vt.push({key:Jt,values:xt(Tr,Et)})}),jt?Vt.sort(function(Jt,Tr){return jt(Jt.key,Tr.key)}):Vt}return ue.map=function(ht,Et){return We(Et,ht,0)},ue.entries=function(ht){return xt(We(w.map,ht,0),0)},ue.key=function(ht){return be.push(ht),ue},ue.sortKeys=function(ht){return Ee[be.length-1]=ht,ue},ue.sortValues=function(ht){return Oe=ht,ue},ue.rollup=function(ht){return ze=ht,ue},ue},w.set=function(ue){var be=new I;if(ue)for(var Ee=0,Oe=ue.length;Ee<Oe;++Ee)be.add(ue[Ee]);return be};function I(){this._=Object.create(null)}s(I,{has:L,add:function(ue){return this._[x(ue+="")]=!0,ue},remove:S,values:k,size:P,empty:z,forEach:function(ue){for(var be in this._)ue.call(this,u(be))}}),w.behavior={};function D(ue){return ue}w.rebind=function(ue,be){for(var Ee=1,Oe=arguments.length,ze;++Ee<Oe;)ue[ze=arguments[Ee]]=R(ue,be,be[ze]);return ue};function R(ue,be,Ee){return function(){var Oe=Ee.apply(be,arguments);return Oe===be?ue:Oe}}function O(ue,be){if(be in ue)return be;be=be.charAt(0).toUpperCase()+be.slice(1);for(var Ee=0,Oe=F.length;Ee<Oe;++Ee){var ze=F[Ee]+be;if(ze in ue)return ze}}var F=["webkit","ms","moz","Moz","o","O"];function V(){}w.dispatch=function(){for(var ue=new G,be=-1,Ee=arguments.length;++be<Ee;)ue[arguments[be]]=J(ue);return ue};function G(){}G.prototype.on=function(ue,be){var Ee=ue.indexOf("."),Oe="";if(Ee>=0&&(Oe=ue.slice(Ee+1),ue=ue.slice(0,Ee)),ue)return arguments.length<2?this[ue].on(Oe):this[ue].on(Oe,be);if(arguments.length===2){if(be==null)for(ue in this)this.hasOwnProperty(ue)&&this[ue].on(Oe,null);return this}};function J(ue){var be=[],Ee=new A;function Oe(){for(var ze=be,We=-1,xt=ze.length,ht;++We<xt;)(ht=ze[We].on)&&ht.apply(this,arguments);return ue}return Oe.on=function(ze,We){var xt=Ee.get(ze),ht;return arguments.length<2?xt&&xt.on:(xt&&(xt.on=null,be=be.slice(0,ht=be.indexOf(xt)).concat(be.slice(ht+1)),Ee.remove(ze)),We&&be.push(Ee.set(ze,{on:We})),ue)},Oe}w.event=null;function Z(){w.event.preventDefault()}function Y(){for(var ue=w.event,be;be=ue.sourceEvent;)ue=be;return ue}function j(ue){for(var be=new G,Ee=0,Oe=arguments.length;++Ee<Oe;)be[arguments[Ee]]=J(be);return be.of=function(ze,We){return function(xt){try{var ht=xt.sourceEvent=w.event;xt.target=ue,w.event=xt,be[xt.type].apply(ze,We)}finally{w.event=ht}}},be}w.requote=function(ue){return ue.replace(re,"\\$&")};var re=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,se={}.__proto__?function(ue,be){ue.__proto__=be}:function(ue,be){for(var Ee in be)ue[Ee]=be[Ee]};function oe(ue){return se(ue,Q),ue}var N=function(ue,be){return be.querySelector(ue)},U=function(ue,be){return be.querySelectorAll(ue)},q=function(ue,be){var Ee=ue.matches||ue[O(ue,"matchesSelector")];return q=function(Oe,ze){return Ee.call(Oe,ze)},q(ue,be)};typeof Sizzle=="function"&&(N=function(ue,be){return Sizzle(ue,be)[0]||null},U=Sizzle,q=Sizzle.matchesSelector),w.selection=function(){return w.select(T.documentElement)};var Q=w.selection.prototype=[];Q.select=function(ue){var be=[],Ee,Oe,ze,We;ue=W(ue);for(var xt=-1,ht=this.length;++xt<ht;){be.push(Ee=[]),Ee.parentNode=(ze=this[xt]).parentNode;for(var Et=-1,Vt=ze.length;++Et<Vt;)(We=ze[Et])?(Ee.push(Oe=ue.call(We,We.__data__,Et,xt)),Oe&&"__data__"in We&&(Oe.__data__=We.__data__)):Ee.push(null)}return oe(be)};function W(ue){return typeof ue=="function"?ue:function(){return N(ue,this)}}Q.selectAll=function(ue){var be=[],Ee,Oe;ue=X(ue);for(var ze=-1,We=this.length;++ze<We;)for(var xt=this[ze],ht=-1,Et=xt.length;++ht<Et;)(Oe=xt[ht])&&(be.push(Ee=M(ue.call(Oe,Oe.__data__,ht,ze))),Ee.parentNode=Oe);return oe(be)};function X(ue){return typeof ue=="function"?ue:function(){return U(ue,this)}}var ee="http://www.w3.org/1999/xhtml",te={svg:"http://www.w3.org/2000/svg",xhtml:ee,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};w.ns={prefix:te,qualify:function(ue){var be=ue.indexOf(":"),Ee=ue;return be>=0&&(Ee=ue.slice(0,be))!=="xmlns"&&(ue=ue.slice(be+1)),te.hasOwnProperty(Ee)?{space:te[Ee],local:ue}:ue}},Q.attr=function(ue,be){if(arguments.length<2){if(typeof ue=="string"){var Ee=this.node();return ue=w.ns.qualify(ue),ue.local?Ee.getAttributeNS(ue.space,ue.local):Ee.getAttribute(ue)}for(be in ue)this.each(ie(be,ue[be]));return this}return this.each(ie(ue,be))};function ie(ue,be){ue=w.ns.qualify(ue);function Ee(){this.removeAttribute(ue)}function Oe(){this.removeAttributeNS(ue.space,ue.local)}function ze(){this.setAttribute(ue,be)}function We(){this.setAttributeNS(ue.space,ue.local,be)}function xt(){var Et=be.apply(this,arguments);Et==null?this.removeAttribute(ue):this.setAttribute(ue,Et)}function ht(){var Et=be.apply(this,arguments);Et==null?this.removeAttributeNS(ue.space,ue.local):this.setAttributeNS(ue.space,ue.local,Et)}return be==null?ue.local?Oe:Ee:typeof be=="function"?ue.local?ht:xt:ue.local?We:ze}function le(ue){return ue.trim().replace(/\s+/g," ")}Q.classed=function(ue,be){if(arguments.length<2){if(typeof ue=="string"){var Ee=this.node(),Oe=(ue=fe(ue)).length,ze=-1;if(be=Ee.classList){for(;++ze<Oe;)if(!be.contains(ue[ze]))return!1}else for(be=Ee.getAttribute("class");++ze<Oe;)if(!ge(ue[ze]).test(be))return!1;return!0}for(be in ue)this.each(pe(be,ue[be]));return this}return this.each(pe(ue,be))};function ge(ue){return new RegExp("(?:^|\\s+)"+w.requote(ue)+"(?:\\s+|$)","g")}function fe(ue){return(ue+"").trim().split(/^|\s+/)}function pe(ue,be){ue=fe(ue).map(ye);var Ee=ue.length;function Oe(){for(var We=-1;++We<Ee;)ue[We](this,be)}function ze(){for(var We=-1,xt=be.apply(this,arguments);++We<Ee;)ue[We](this,xt)}return typeof be=="function"?ze:Oe}function ye(ue){var be=ge(ue);return function(Ee,Oe){if(ze=Ee.classList)return Oe?ze.add(ue):ze.remove(ue);var ze=Ee.getAttribute("class")||"";Oe?(be.lastIndex=0,be.test(ze)||Ee.setAttribute("class",le(ze+" "+ue))):Ee.setAttribute("class",le(ze.replace(be," ")))}}Q.style=function(ue,be,Ee){var Oe=arguments.length;if(Oe<3){if(typeof ue!="string"){Oe<2&&(be="");for(Ee in ue)this.each(Te(Ee,ue[Ee],be));return this}if(Oe<2){var ze=this.node();return a(ze).getComputedStyle(ze,null).getPropertyValue(ue)}Ee=""}return this.each(Te(ue,be,Ee))};function Te(ue,be,Ee){function Oe(){this.style.removeProperty(ue)}function ze(){this.style.setProperty(ue,be,Ee)}function We(){var xt=be.apply(this,arguments);xt==null?this.style.removeProperty(ue):this.style.setProperty(ue,xt,Ee)}return be==null?Oe:typeof be=="function"?We:ze}Q.property=function(ue,be){if(arguments.length<2){if(typeof ue=="string")return this.node()[ue];for(be in ue)this.each(_e(be,ue[be]));return this}return this.each(_e(ue,be))};function _e(ue,be){function Ee(){delete this[ue]}function Oe(){this[ue]=be}function ze(){var We=be.apply(this,arguments);We==null?delete this[ue]:this[ue]=We}return be==null?Ee:typeof be=="function"?ze:Oe}Q.text=function(ue){return arguments.length?this.each(typeof ue=="function"?function(){var be=ue.apply(this,arguments);this.textContent=be??""}:ue==null?function(){this.textContent=""}:function(){this.textContent=ue}):this.node().textContent},Q.html=function(ue){return arguments.length?this.each(typeof ue=="function"?function(){var be=ue.apply(this,arguments);this.innerHTML=be??""}:ue==null?function(){this.innerHTML=""}:function(){this.innerHTML=ue}):this.node().innerHTML},Q.append=function(ue){return ue=De(ue),this.select(function(){return this.appendChild(ue.apply(this,arguments))})};function De(ue){function be(){var Oe=this.ownerDocument,ze=this.namespaceURI;return ze===ee&&Oe.documentElement.namespaceURI===ee?Oe.createElement(ue):Oe.createElementNS(ze,ue)}function Ee(){return this.ownerDocument.createElementNS(ue.space,ue.local)}return typeof ue=="function"?ue:(ue=w.ns.qualify(ue)).local?Ee:be}Q.insert=function(ue,be){return ue=De(ue),be=W(be),this.select(function(){return this.insertBefore(ue.apply(this,arguments),be.apply(this,arguments)||null)})},Q.remove=function(){return this.each(Be)};function Be(){var ue=this.parentNode;ue&&ue.removeChild(this)}Q.data=function(ue,be){var Ee=-1,Oe=this.length,ze,We;if(!arguments.length){for(ue=new Array(Oe=(ze=this[0]).length);++Ee<Oe;)(We=ze[Ee])&&(ue[Ee]=We.__data__);return ue}function xt(jt,Jt){var Tr,Kr=jt.length,ln=Jt.length,kr=Math.min(Kr,ln),zr=new Array(ln),Gr=new Array(ln),nn=new Array(Kr),on,Wr;if(be){var Nn=new A,ra=new Array(Kr),ba;for(Tr=-1;++Tr<Kr;)(on=jt[Tr])&&(Nn.has(ba=be.call(on,on.__data__,Tr))?nn[Tr]=on:Nn.set(ba,on),ra[Tr]=ba);for(Tr=-1;++Tr<ln;)(on=Nn.get(ba=be.call(Jt,Wr=Jt[Tr],Tr)))?on!==!0&&(zr[Tr]=on,on.__data__=Wr):Gr[Tr]=Ue(Wr),Nn.set(ba,!0);for(Tr=-1;++Tr<Kr;)Tr in ra&&Nn.get(ra[Tr])!==!0&&(nn[Tr]=jt[Tr])}else{for(Tr=-1;++Tr<kr;)on=jt[Tr],Wr=Jt[Tr],on?(on.__data__=Wr,zr[Tr]=on):Gr[Tr]=Ue(Wr);for(;Tr<ln;++Tr)Gr[Tr]=Ue(Jt[Tr]);for(;Tr<Kr;++Tr)nn[Tr]=jt[Tr]}Gr.update=zr,Gr.parentNode=zr.parentNode=nn.parentNode=jt.parentNode,ht.push(Gr),Et.push(zr),Vt.push(nn)}var ht=Qe([]),Et=oe([]),Vt=oe([]);if(typeof ue=="function")for(;++Ee<Oe;)xt(ze=this[Ee],ue.call(ze,ze.parentNode.__data__,Ee));else for(;++Ee<Oe;)xt(ze=this[Ee],ue);return Et.enter=function(){return ht},Et.exit=function(){return Vt},Et};function Ue(ue){return{__data__:ue}}Q.datum=function(ue){return arguments.length?this.property("__data__",ue):this.property("__data__")},Q.filter=function(ue){var be=[],Ee,Oe,ze;typeof ue!="function"&&(ue=xe(ue));for(var We=0,xt=this.length;We<xt;We++){be.push(Ee=[]),Ee.parentNode=(Oe=this[We]).parentNode;for(var ht=0,Et=Oe.length;ht<Et;ht++)(ze=Oe[ht])&&ue.call(ze,ze.__data__,ht,We)&&Ee.push(ze)}return oe(be)};function xe(ue){return function(){return q(this,ue)}}Q.order=function(){for(var ue=-1,be=this.length;++ue<be;)for(var Ee=this[ue],Oe=Ee.length-1,ze=Ee[Oe],We;--Oe>=0;)(We=Ee[Oe])&&(ze&&ze!==We.nextSibling&&ze.parentNode.insertBefore(We,ze),ze=We);return this},Q.sort=function(ue){ue=Pe.apply(this,arguments);for(var be=-1,Ee=this.length;++be<Ee;)this[be].sort(ue);return this.order()};function Pe(ue){return arguments.length||(ue=i),function(be,Ee){return be&&Ee?ue(be.__data__,Ee.__data__):!be-!Ee}}Q.each=function(ue){return Ve(this,function(be,Ee,Oe){ue.call(be,be.__data__,Ee,Oe)})};function Ve(ue,be){for(var Ee=0,Oe=ue.length;Ee<Oe;Ee++)for(var ze=ue[Ee],We=0,xt=ze.length,ht;We<xt;We++)(ht=ze[We])&&be(ht,We,Ee);return ue}Q.call=function(ue){var be=M(arguments);return ue.apply(be[0]=this,be),this},Q.empty=function(){return!this.node()},Q.node=function(){for(var ue=0,be=this.length;ue<be;ue++)for(var Ee=this[ue],Oe=0,ze=Ee.length;Oe<ze;Oe++){var We=Ee[Oe];if(We)return We}return null},Q.size=function(){var ue=0;return Ve(this,function(){++ue}),ue};function Qe(ue){return se(ue,Fe),ue}var Fe=[];w.selection.enter=Qe,w.selection.enter.prototype=Fe,Fe.append=Q.append,Fe.empty=Q.empty,Fe.node=Q.node,Fe.call=Q.call,Fe.size=Q.size,Fe.select=function(ue){for(var be=[],Ee,Oe,ze,We,xt,ht=-1,Et=this.length;++ht<Et;){ze=(We=this[ht]).update,be.push(Ee=[]),Ee.parentNode=We.parentNode;for(var Vt=-1,jt=We.length;++Vt<jt;)(xt=We[Vt])?(Ee.push(ze[Vt]=Oe=ue.call(We.parentNode,xt.__data__,Vt,ht)),Oe.__data__=xt.__data__):Ee.push(null)}return oe(be)},Fe.insert=function(ue,be){return arguments.length<2&&(be=Le(this)),Q.insert.call(this,ue,be)};function Le(ue){var be,Ee;return function(Oe,ze,We){var xt=ue[We].update,ht=xt.length,Et;for(We!=Ee&&(Ee=We,be=0),ze>=be&&(be=ze+1);!(Et=xt[be])&&++be<ht;);return Et}}w.select=function(ue){var be;return typeof ue=="string"?(be=[N(ue,T)],be.parentNode=T.documentElement):(be=[ue],be.parentNode=e(ue)),oe([be])},w.selectAll=function(ue){var be;return typeof ue=="string"?(be=M(U(ue,T)),be.parentNode=T.documentElement):(be=M(ue),be.parentNode=null),oe([be])},Q.on=function(ue,be,Ee){var Oe=arguments.length;if(Oe<3){if(typeof ue!="string"){Oe<2&&(be=!1);for(Ee in ue)this.each(Ne(Ee,ue[Ee],be));return this}if(Oe<2)return(Oe=this.node()["__on"+ue])&&Oe._;Ee=!1}return this.each(Ne(ue,be,Ee))};function Ne(ue,be,Ee){var Oe="__on"+ue,ze=ue.indexOf("."),We=Dt;ze>0&&(ue=ue.slice(0,ze));var xt=dt.get(ue);xt&&(ue=xt,We=Xt);function ht(){var jt=this[Oe];jt&&(this.removeEventListener(ue,jt,jt.$),delete this[Oe])}function Et(){var jt=We(be,M(arguments));ht.call(this),this.addEventListener(ue,this[Oe]=jt,jt.$=Ee),jt._=be}function Vt(){var jt=new RegExp("^__on([^.]+)"+w.requote(ue)+"$"),Jt;for(var Tr in this)if(Jt=Tr.match(jt)){var Kr=this[Tr];this.removeEventListener(Jt[1],Kr,Kr.$),delete this[Tr]}}return ze?be?Et:ht:be?V:Vt}var dt=w.map({mouseenter:"mouseover",mouseleave:"mouseout"});T&&dt.forEach(function(ue){"on"+ue in T&&dt.remove(ue)});function Dt(ue,be){return function(Ee){var Oe=w.event;w.event=Ee,be[0]=this.__data__;try{ue.apply(this,be)}finally{w.event=Oe}}}function Xt(ue,be){var Ee=Dt(ue,be);return function(Oe){var ze=this,We=Oe.relatedTarget;(!We||We!==ze&&!(We.compareDocumentPosition(ze)&8))&&Ee.call(ze,Oe)}}var At,zt=0;function Ut(ue){var be=".dragsuppress-"+ ++zt,Ee="click"+be,Oe=w.select(a(ue)).on("touchmove"+be,Z).on("dragstart"+be,Z).on("selectstart"+be,Z);if(At==null&&(At="onselectstart"in ue?!1:O(ue.style,"userSelect")),At){var ze=e(ue).style,We=ze[At];ze[At]="none"}return function(xt){if(Oe.on(be,null),At&&(ze[At]=We),xt){var ht=function(){Oe.on(Ee,null)};Oe.on(Ee,function(){Z(),ht()},!0),setTimeout(ht,0)}}}w.mouse=function(ue){return Mt(ue,Y())};var Ct=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Mt(ue,be){be.changedTouches&&(be=be.changedTouches[0]);var Ee=ue.ownerSVGElement||ue;if(Ee.createSVGPoint){var Oe=Ee.createSVGPoint();if(Ct<0){var ze=a(ue);if(ze.scrollX||ze.scrollY){Ee=w.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var We=Ee[0][0].getScreenCTM();Ct=!(We.f||We.e),Ee.remove()}}return Ct?(Oe.x=be.pageX,Oe.y=be.pageY):(Oe.x=be.clientX,Oe.y=be.clientY),Oe=Oe.matrixTransform(ue.getScreenCTM().inverse()),[Oe.x,Oe.y]}var xt=ue.getBoundingClientRect();return[be.clientX-xt.left-ue.clientLeft,be.clientY-xt.top-ue.clientTop]}w.touch=function(ue,be,Ee){if(arguments.length<3&&(Ee=be,be=Y().changedTouches),be){for(var Oe=0,ze=be.length,We;Oe<ze;++Oe)if((We=be[Oe]).identifier===Ee)return Mt(ue,We)}},w.behavior.drag=function(){var ue=j(ze,"drag","dragstart","dragend"),be=null,Ee=We(V,w.mouse,a,"mousemove","mouseup"),Oe=We(rt,w.touch,D,"touchmove","touchend");function ze(){this.on("mousedown.drag",Ee).on("touchstart.drag",Oe)}function We(xt,ht,Et,Vt,jt){return function(){var Jt=this,Tr=w.event.target.correspondingElement||w.event.target,Kr=Jt.parentNode,ln=ue.of(Jt,arguments),kr=0,zr=xt(),Gr=".drag"+(zr==null?"":"-"+zr),nn,on=w.select(Et(Tr)).on(Vt+Gr,ra).on(jt+Gr,ba),Wr=Ut(Tr),Nn=ht(Kr,zr);be?(nn=be.apply(Jt,arguments),nn=[nn.x-Nn[0],nn.y-Nn[1]]):nn=[0,0],ln({type:"dragstart"});function ra(){var oa=ht(Kr,zr),Ea,ua;!oa||(Ea=oa[0]-Nn[0],ua=oa[1]-Nn[1],kr|=Ea|ua,Nn=oa,ln({type:"drag",x:oa[0]+nn[0],y:oa[1]+nn[1],dx:Ea,dy:ua}))}function ba(){!ht(Kr,zr)||(on.on(Vt+Gr,null).on(jt+Gr,null),Wr(kr),ln({type:"dragend"}))}}}return ze.origin=function(xt){return arguments.length?(be=xt,ze):be},w.rebind(ze,ue,"on")};function rt(){return w.event.changedTouches[0].identifier}w.touches=function(ue,be){return arguments.length<2&&(be=Y().touches),be?M(be).map(function(Ee){var Oe=Mt(ue,Ee);return Oe.identifier=Ee.identifier,Oe}):[]};var ct=1e-6,Ze=ct*ct,ke=Math.PI,Ge=2*ke,Je=Ge-ct,ot=ke/2,Pt=ke/180,_t=180/ke;function Bt(ue,be,Ee){return(be[0]-ue[0])*(Ee[1]-ue[1])-(be[1]-ue[1])*(Ee[0]-ue[0])}function qt(ue){return ue>1?ot:ue<-1?-ot:Math.asin(ue)}function Ot(ue){return((ue=Math.exp(ue))-1/ue)/2}function $t(ue){return((ue=Math.exp(ue))+1/ue)/2}function rr(ue){return((ue=Math.exp(2*ue))-1)/(ue+1)}var er=Math.SQRT2,pr=2,Xr=4;w.interpolateZoom=function(ue,be){var Ee=ue[0],Oe=ue[1],ze=ue[2],We=be[0],xt=be[1],ht=be[2],Et=We-Ee,Vt=xt-Oe,jt=Et*Et+Vt*Vt,Jt,Tr;if(jt<Ze)Tr=Math.log(ht/ze)/er,Jt=function(nn){return[Ee+nn*Et,Oe+nn*Vt,ze*Math.exp(er*nn*Tr)]};else{var Kr=Math.sqrt(jt),ln=(ht*ht-ze*ze+Xr*jt)/(2*ze*pr*Kr),kr=(ht*ht-ze*ze-Xr*jt)/(2*ht*pr*Kr),zr=Math.log(Math.sqrt(ln*ln+1)-ln),Gr=Math.log(Math.sqrt(kr*kr+1)-kr);Tr=(Gr-zr)/er,Jt=function(nn){var on=nn*Tr,Wr=$t(zr),Nn=ze/(pr*Kr)*(Wr*rr(er*on+zr)-Ot(zr));return[Ee+Nn*Et,Oe+Nn*Vt,ze*Wr/$t(er*on+zr)]}}return Jt.duration=Tr*1e3,Jt},w.behavior.zoom=function(){var ue={x:0,y:0,k:1},be,Ee,Oe,ze=[960,500],We=hn,xt=250,ht=0,Et="mousedown.zoom",Vt="mousemove.zoom",jt="mouseup.zoom",Jt,Tr="touchstart.zoom",Kr,ln=j(on,"zoomstart","zoom","zoomend"),kr,zr,Gr,nn;nt||(nt="onwheel"in T?(Qr=function(){return-w.event.deltaY*(w.event.deltaMode?120:1)},"wheel"):"onmousewheel"in T?(Qr=function(){return w.event.wheelDelta},"mousewheel"):(Qr=function(){return-w.event.detail},"MozMousePixelScroll"));function on(fa){fa.on(Et,Ja).on(nt+".zoom",fo).on("dblclick.zoom",Ii).on(Tr,yi)}on.event=function(fa){fa.each(function(){var ai=ln.of(this,arguments),Wa=ue;Ya?w.select(this).transition().each("start.zoom",function(){ue=this.__chart__||{x:0,y:0,k:1},ua(ai)}).tween("zoom:zoom",function(){var Si=ze[0],ui=ze[1],io=Ee?Ee[0]:Si/2,Qi=Ee?Ee[1]:ui/2,go=w.interpolateZoom([(io-ue.x)/ue.k,(Qi-ue.y)/ue.k,Si/ue.k],[(io-Wa.x)/Wa.k,(Qi-Wa.y)/Wa.k,Si/Wa.k]);return function(Go){var Fo=go(Go),Yo=Si/Fo[2];this.__chart__=ue={x:io-Fo[0]*Yo,y:Qi-Fo[1]*Yo,k:Yo},Ua(ai)}}).each("interrupt.zoom",function(){Da(ai)}).each("end.zoom",function(){Da(ai)}):(this.__chart__=ue,ua(ai),Ua(ai),Da(ai))})},on.translate=function(fa){return arguments.length?(ue={x:+fa[0],y:+fa[1],k:ue.k},Ea(),on):[ue.x,ue.y]},on.scale=function(fa){return arguments.length?(ue={x:ue.x,y:ue.y,k:null},ra(+fa),Ea(),on):ue.k},on.scaleExtent=function(fa){return arguments.length?(We=fa==null?hn:[+fa[0],+fa[1]],on):We},on.center=function(fa){return arguments.length?(Oe=fa&&[+fa[0],+fa[1]],on):Oe},on.size=function(fa){return arguments.length?(ze=fa&&[+fa[0],+fa[1]],on):ze},on.duration=function(fa){return arguments.length?(xt=+fa,on):xt},on.x=function(fa){return arguments.length?(zr=fa,kr=fa.copy(),ue={x:0,y:0,k:1},on):zr},on.y=function(fa){return arguments.length?(nn=fa,Gr=fa.copy(),ue={x:0,y:0,k:1},on):nn};function Wr(fa){return[(fa[0]-ue.x)/ue.k,(fa[1]-ue.y)/ue.k]}function Nn(fa){return[fa[0]*ue.k+ue.x,fa[1]*ue.k+ue.y]}function ra(fa){ue.k=Math.max(We[0],Math.min(We[1],fa))}function ba(fa,ai){ai=Nn(ai),ue.x+=fa[0]-ai[0],ue.y+=fa[1]-ai[1]}function oa(fa,ai,Wa,Si){fa.__chart__={x:ue.x,y:ue.y,k:ue.k},ra(Math.pow(2,Si)),ba(Ee=ai,Wa),fa=w.select(fa),xt>0&&(fa=fa.transition().duration(xt)),fa.call(on.event)}function Ea(){zr&&zr.domain(kr.range().map(function(fa){return(fa-ue.x)/ue.k}).map(kr.invert)),nn&&nn.domain(Gr.range().map(function(fa){return(fa-ue.y)/ue.k}).map(Gr.invert))}function ua(fa){ht++||fa({type:"zoomstart"})}function Ua(fa){Ea(),fa({type:"zoom",scale:ue.k,translate:[ue.x,ue.y]})}function Da(fa){--ht||(fa({type:"zoomend"}),Ee=null)}function Ja(){var fa=this,ai=ln.of(fa,arguments),Wa=0,Si=w.select(a(fa)).on(Vt,Qi).on(jt,go),ui=Wr(w.mouse(fa)),io=Ut(fa);Dn.call(fa),ua(ai);function Qi(){Wa=1,ba(w.mouse(fa),ui),Ua(ai)}function go(){Si.on(Vt,null).on(jt,null),io(Wa),Da(ai)}}function yi(){var fa=this,ai=ln.of(fa,arguments),Wa={},Si=0,ui,io=".zoom-"+w.event.changedTouches[0].identifier,Qi="touchmove"+io,go="touchend"+io,Go=[],Fo=w.select(fa),Yo=Ut(fa);Oi(),ua(ai),Fo.on(Et,null).on(Tr,Oi);function Gi(){var xo=w.touches(fa);return ui=ue.k,xo.forEach(function(eo){eo.identifier in Wa&&(Wa[eo.identifier]=Wr(eo))}),xo}function Oi(){var xo=w.event.target;w.select(xo).on(Qi,za).on(go,Xa),Go.push(xo);for(var eo=w.event.changedTouches,Po=0,Xi=eo.length;Po<Xi;++Po)Wa[eo[Po].identifier]=null;var Wo=Gi(),ms=Date.now();if(Wo.length===1){if(ms-Kr<500){var Nl=Wo[0];oa(fa,Nl,Wa[Nl.identifier],Math.floor(Math.log(ue.k)/Math.LN2)+1),Z()}Kr=ms}else if(Wo.length>1){var Nl=Wo[0],Zi=Wo[1],$u=Nl[0]-Zi[0],Tl=Nl[1]-Zi[1];Si=$u*$u+Tl*Tl}}function za(){var xo=w.touches(fa),eo,Po,Xi,Wo;Dn.call(fa);for(var ms=0,Nl=xo.length;ms<Nl;++ms,Wo=null)if(Xi=xo[ms],Wo=Wa[Xi.identifier]){if(Po)break;eo=Xi,Po=Wo}if(Wo){var Zi=(Zi=Xi[0]-eo[0])*Zi+(Zi=Xi[1]-eo[1])*Zi,$u=Si&&Math.sqrt(Zi/Si);eo=[(eo[0]+Xi[0])/2,(eo[1]+Xi[1])/2],Po=[(Po[0]+Wo[0])/2,(Po[1]+Wo[1])/2],ra($u*ui)}Kr=null,ba(eo,Po),Ua(ai)}function Xa(){if(w.event.touches.length){for(var xo=w.event.changedTouches,eo=0,Po=xo.length;eo<Po;++eo)delete Wa[xo[eo].identifier];for(var Xi in Wa)return void Gi()}w.selectAll(Go).on(io,null),Fo.on(Et,Ja).on(Tr,yi),Yo(),Da(ai)}}function fo(){var fa=ln.of(this,arguments);Jt?clearTimeout(Jt):(Dn.call(this),be=Wr(Ee=Oe||w.mouse(this)),ua(fa)),Jt=setTimeout(function(){Jt=null,Da(fa)},50),Z(),ra(Math.pow(2,Qr()*.002)*ue.k),ba(Ee,be),Ua(fa)}function Ii(){var fa=w.mouse(this),ai=Math.log(ue.k)/Math.LN2;oa(this,fa,Wr(fa),w.event.shiftKey?Math.ceil(ai)-1:Math.floor(ai)+1)}return w.rebind(on,ln,"on")};var hn=[0,1/0],Qr,nt;w.color=Ht;function Ht(){}Ht.prototype.toString=function(){return this.rgb()+""},w.hsl=Kt;function Kt(ue,be,Ee){return this instanceof Kt?(this.h=+ue,this.s=+be,void(this.l=+Ee)):arguments.length<2?ue instanceof Kt?new Kt(ue.h,ue.s,ue.l):en(""+ue,dr,Kt):new Kt(ue,be,Ee)}var Gt=Kt.prototype=new Ht;Gt.brighter=function(ue){return ue=Math.pow(.7,arguments.length?ue:1),new Kt(this.h,this.s,this.l/ue)},Gt.darker=function(ue){return ue=Math.pow(.7,arguments.length?ue:1),new Kt(this.h,this.s,ue*this.l)},Gt.rgb=function(){return br(this.h,this.s,this.l)};function br(ue,be,Ee){var Oe,ze;ue=isNaN(ue)?0:(ue%=360)<0?ue+360:ue,be=isNaN(be)||be<0?0:be>1?1:be,Ee=Ee<0?0:Ee>1?1:Ee,ze=Ee<=.5?Ee*(1+be):Ee+be-Ee*be,Oe=2*Ee-ze;function We(ht){return ht>360?ht-=360:ht<0&&(ht+=360),ht<60?Oe+(ze-Oe)*ht/60:ht<180?ze:ht<240?Oe+(ze-Oe)*(240-ht)/60:Oe}function xt(ht){return Math.round(We(ht)*255)}return new nr(xt(ue+120),xt(ue),xt(ue-120))}w.hcl=tt;function tt(ue,be,Ee){return this instanceof tt?(this.h=+ue,this.c=+be,void(this.l=+Ee)):arguments.length<2?ue instanceof tt?new tt(ue.h,ue.c,ue.l):ue instanceof ft?vt(ue.l,ue.a,ue.b):vt((ue=xr((ue=w.rgb(ue)).r,ue.g,ue.b)).l,ue.a,ue.b):new tt(ue,be,Ee)}var je=tt.prototype=new Ht;je.brighter=function(ue){return new tt(this.h,this.c,Math.min(100,this.l+Me*(arguments.length?ue:1)))},je.darker=function(ue){return new tt(this.h,this.c,Math.max(0,this.l-Me*(arguments.length?ue:1)))},je.rgb=function(){return st(this.h,this.c,this.l).rgb()};function st(ue,be,Ee){return isNaN(ue)&&(ue=0),isNaN(be)&&(be=0),new ft(Ee,Math.cos(ue*=Pt)*be,Math.sin(ue)*be)}w.lab=ft;function ft(ue,be,Ee){return this instanceof ft?(this.l=+ue,this.a=+be,void(this.b=+Ee)):arguments.length<2?ue instanceof ft?new ft(ue.l,ue.a,ue.b):ue instanceof tt?st(ue.h,ue.c,ue.l):xr((ue=nr(ue)).r,ue.g,ue.b):new ft(ue,be,Ee)}var Me=18,Se=.95047,Ke=1,Xe=1.08883,it=ft.prototype=new Ht;it.brighter=function(ue){return new ft(Math.min(100,this.l+Me*(arguments.length?ue:1)),this.a,this.b)},it.darker=function(ue){return new ft(Math.max(0,this.l-Me*(arguments.length?ue:1)),this.a,this.b)},it.rgb=function(){return pt(this.l,this.a,this.b)};function pt(ue,be,Ee){var Oe=(ue+16)/116,ze=Oe+be/500,We=Oe-Ee/200;return ze=St(ze)*Se,Oe=St(Oe)*Ke,We=St(We)*Xe,new nr(Nt(3.2404542*ze-1.5371385*Oe-.4985314*We),Nt(-.969266*ze+1.8760108*Oe+.041556*We),Nt(.0556434*ze-.2040259*Oe+1.0572252*We))}function vt(ue,be,Ee){return ue>0?new tt(Math.atan2(Ee,be)*_t,Math.sqrt(be*be+Ee*Ee),ue):new tt(NaN,NaN,ue)}function St(ue){return ue>.206893034?ue*ue*ue:(ue-4/29)/7.787037}function kt(ue){return ue>.008856?Math.pow(ue,1/3):7.787037*ue+4/29}function Nt(ue){return Math.round(255*(ue<=.00304?12.92*ue:1.055*Math.pow(ue,1/2.4)-.055))}w.rgb=nr;function nr(ue,be,Ee){return this instanceof nr?(this.r=~~ue,this.g=~~be,void(this.b=~~Ee)):arguments.length<2?ue instanceof nr?new nr(ue.r,ue.g,ue.b):en(""+ue,nr,br):new nr(ue,be,Ee)}function fr(ue){return new nr(ue>>16,ue>>8&255,ue&255)}function Hr(ue){return fr(ue)+""}var Er=nr.prototype=new Ht;Er.brighter=function(ue){ue=Math.pow(.7,arguments.length?ue:1);var be=this.r,Ee=this.g,Oe=this.b,ze=30;return!be&&!Ee&&!Oe?new nr(ze,ze,ze):(be&&be<ze&&(be=ze),Ee&&Ee<ze&&(Ee=ze),Oe&&Oe<ze&&(Oe=ze),new nr(Math.min(255,be/ue),Math.min(255,Ee/ue),Math.min(255,Oe/ue)))},Er.darker=function(ue){return ue=Math.pow(.7,arguments.length?ue:1),new nr(ue*this.r,ue*this.g,ue*this.b)},Er.hsl=function(){return dr(this.r,this.g,this.b)},Er.toString=function(){return"#"+_r(this.r)+_r(this.g)+_r(this.b)};function _r(ue){return ue<16?"0"+Math.max(0,ue).toString(16):Math.min(255,ue).toString(16)}function en(ue,be,Ee){var Oe=0,ze=0,We=0,xt,ht,Et;if(xt=/([a-z]+)\((.*)\)/.exec(ue=ue.toLowerCase()),xt)switch(ht=xt[2].split(","),xt[1]){case"hsl":return Ee(parseFloat(ht[0]),parseFloat(ht[1])/100,parseFloat(ht[2])/100);case"rgb":return be(Yr(ht[0]),Yr(ht[1]),Yr(ht[2]))}return(Et=Ar.get(ue))?be(Et.r,Et.g,Et.b):(ue!=null&&ue.charAt(0)==="#"&&!isNaN(Et=parseInt(ue.slice(1),16))&&(ue.length===4?(Oe=(Et&3840)>>4,Oe=Oe>>4|Oe,ze=Et&240,ze=ze>>4|ze,We=Et&15,We=We<<4|We):ue.length===7&&(Oe=(Et&16711680)>>16,ze=(Et&65280)>>8,We=Et&255)),be(Oe,ze,We))}function dr(ue,be,Ee){var Oe=Math.min(ue/=255,be/=255,Ee/=255),ze=Math.max(ue,be,Ee),We=ze-Oe,xt,ht,Et=(ze+Oe)/2;return We?(ht=Et<.5?We/(ze+Oe):We/(2-ze-Oe),ue==ze?xt=(be-Ee)/We+(be<Ee?6:0):be==ze?xt=(Ee-ue)/We+2:xt=(ue-be)/We+4,xt*=60):(xt=NaN,ht=Et>0&&Et<1?0:xt),new Kt(xt,ht,Et)}function xr(ue,be,Ee){ue=Ur(ue),be=Ur(be),Ee=Ur(Ee);var Oe=kt((.4124564*ue+.3575761*be+.1804375*Ee)/Se),ze=kt((.2126729*ue+.7151522*be+.072175*Ee)/Ke),We=kt((.0193339*ue+.119192*be+.9503041*Ee)/Xe);return ft(116*ze-16,500*(Oe-ze),200*(ze-We))}function Ur(ue){return(ue/=255)<=.04045?ue/12.92:Math.pow((ue+.055)/1.055,2.4)}function Yr(ue){var be=parseFloat(ue);return ue.charAt(ue.length-1)==="%"?Math.round(be*2.55):be}var Ar=w.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Ar.forEach(function(ue,be){Ar.set(ue,fr(be))});function et(ue){return typeof ue=="function"?ue:function(){return ue}}w.functor=et,w.xhr=Lt(D);function Lt(ue){return function(be,Ee,Oe){return arguments.length===2&&typeof Ee=="function"&&(Oe=Ee,Ee=null),Zt(be,Ee,ue,Oe)}}function Zt(ue,be,Ee,Oe){var ze={},We=w.dispatch("beforesend","progress","load","error"),xt={},ht=new XMLHttpRequest,Et=null;self.XDomainRequest&&!("withCredentials"in ht)&&/^(http(s)?:)?\/\//.test(ue)&&(ht=new XDomainRequest),"onload"in ht?ht.onload=ht.onerror=Vt:ht.onreadystatechange=function(){ht.readyState>3&&Vt()};function Vt(){var jt=ht.status,Jt;if(!jt&&Ir(ht)||jt>=200&&jt<300||jt===304){try{Jt=Ee.call(ze,ht)}catch(Tr){We.error.call(ze,Tr);return}We.load.call(ze,Jt)}else We.error.call(ze,ht)}return ht.onprogress=function(jt){var Jt=w.event;w.event=jt;try{We.progress.call(ze,ht)}finally{w.event=Jt}},ze.header=function(jt,Jt){return jt=(jt+"").toLowerCase(),arguments.length<2?xt[jt]:(Jt==null?delete xt[jt]:xt[jt]=Jt+"",ze)},ze.mimeType=function(jt){return arguments.length?(be=jt==null?null:jt+"",ze):be},ze.responseType=function(jt){return arguments.length?(Et=jt,ze):Et},ze.response=function(jt){return Ee=jt,ze},["get","post"].forEach(function(jt){ze[jt]=function(){return ze.send.apply(ze,[jt].concat(M(arguments)))}}),ze.send=function(jt,Jt,Tr){if(arguments.length===2&&typeof Jt=="function"&&(Tr=Jt,Jt=null),ht.open(jt,ue,!0),be!=null&&!("accept"in xt)&&(xt.accept=be+",*/*"),ht.setRequestHeader)for(var Kr in xt)ht.setRequestHeader(Kr,xt[Kr]);return be!=null&&ht.overrideMimeType&&ht.overrideMimeType(be),Et!=null&&(ht.responseType=Et),Tr!=null&&ze.on("error",Tr).on("load",function(ln){Tr(null,ln)}),We.beforesend.call(ze,ht),ht.send(Jt??null),ze},ze.abort=function(){return ht.abort(),ze},w.rebind(ze,We,"on"),Oe==null?ze:ze.get(sr(Oe))}function sr(ue){return ue.length===1?function(be,Ee){ue(be==null?Ee:null)}:ue}function Ir(ue){var be=ue.responseType;return be&&be!=="text"?ue.response:ue.responseText}w.dsv=function(ue,be){var Ee=new RegExp('["'+ue+`
]`),Oe=ue.charCodeAt(0);function ze(Vt,jt,Jt){arguments.length<3&&(Jt=jt,jt=null);var Tr=Zt(Vt,be,jt==null?We:xt(jt),Jt);return Tr.row=function(Kr){return arguments.length?Tr.response((jt=Kr)==null?We:xt(Kr)):jt},Tr}function We(Vt){return ze.parse(Vt.responseText)}function xt(Vt){return function(jt){return ze.parse(jt.responseText,Vt)}}ze.parse=function(Vt,jt){var Jt;return ze.parseRows(Vt,function(Tr,Kr){if(Jt)return Jt(Tr,Kr-1);var ln=function(kr){for(var zr={},Gr=Tr.length,nn=0;nn<Gr;++nn)zr[Tr[nn]]=kr[nn];return zr};Jt=jt?function(kr,zr){return jt(ln(kr),zr)}:ln})},ze.parseRows=function(Vt,jt){var Jt={},Tr={},Kr=[],ln=Vt.length,kr=0,zr=0,Gr,nn;function on(){if(kr>=ln)return Tr;if(nn)return nn=!1,Jt;var Nn=kr;if(Vt.charCodeAt(Nn)===34){for(var ra=Nn;ra++<ln;)if(Vt.charCodeAt(ra)===34){if(Vt.charCodeAt(ra+1)!==34)break;++ra}kr=ra+2;var ba=Vt.charCodeAt(ra+1);return ba===13?(nn=!0,Vt.charCodeAt(ra+2)===10&&++kr):ba===10&&(nn=!0),Vt.slice(Nn+1,ra).replace(/""/g,'"')}for(;kr<ln;){var ba=Vt.charCodeAt(kr++),oa=1;if(ba===10)nn=!0;else if(ba===13)nn=!0,Vt.charCodeAt(kr)===10&&(++kr,++oa);else if(ba!==Oe)continue;return Vt.slice(Nn,kr-oa)}return Vt.slice(Nn)}for(;(Gr=on())!==Tr;){for(var Wr=[];Gr!==Jt&&Gr!==Tr;)Wr.push(Gr),Gr=on();jt&&(Wr=jt(Wr,zr++))==null||Kr.push(Wr)}return Kr},ze.format=function(Vt){if(Array.isArray(Vt[0]))return ze.formatRows(Vt);var jt=new I,Jt=[];return Vt.forEach(function(Tr){for(var Kr in Tr)jt.has(Kr)||Jt.push(jt.add(Kr))}),[Jt.map(Et).join(ue)].concat(Vt.map(function(Tr){return Jt.map(function(Kr){return Et(Tr[Kr])}).join(ue)})).join(`
`)},ze.formatRows=function(Vt){return Vt.map(ht).join(`
`)};function ht(Vt){return Vt.map(Et).join(ue)}function Et(Vt){return Ee.test(Vt)?'"'+Vt.replace(/\"/g,'""')+'"':Vt}return ze},w.csv=w.dsv(",","text/csv"),w.tsv=w.dsv("	","text/tab-separated-values");var Zr,Pr,wr,Nr,Sn=this[O(this,"requestAnimationFrame")]||function(ue){setTimeout(ue,17)};w.timer=function(){_n.apply(this,arguments)};function _n(ue,be,Ee){var Oe=arguments.length;Oe<2&&(be=0),Oe<3&&(Ee=Date.now());var ze=Ee+be,We={c:ue,t:ze,n:null};return Pr?Pr.n=We:Zr=We,Pr=We,wr||(Nr=clearTimeout(Nr),wr=1,Sn(Wn)),We}function Wn(){var ue=Ln(),be=Xn()-ue;be>24?(isFinite(be)&&(clearTimeout(Nr),Nr=setTimeout(Wn,be)),wr=0):(wr=1,Sn(Wn))}w.timer.flush=function(){Ln(),Xn()};function Ln(){for(var ue=Date.now(),be=Zr;be;)ue>=be.t&&be.c(ue-be.t)&&(be.c=null),be=be.n;return ue}function Xn(){for(var ue,be=Zr,Ee=1/0;be;)be.c?(be.t<Ee&&(Ee=be.t),be=(ue=be).n):be=ue?ue.n=be.n:Zr=be.n;return Pr=ue,Ee}w.round=function(ue,be){return be?Math.round(ue*(be=Math.pow(10,be)))/be:Math.round(ue)},w.geom={};function Kn(ue){return ue[0]}function Aa(ue){return ue[1]}w.geom.hull=function(ue){var be=Kn,Ee=Aa;if(arguments.length)return Oe(ue);function Oe(ze){if(ze.length<3)return[];var We=et(be),xt=et(Ee),ht,Et=ze.length,Vt=[],jt=[];for(ht=0;ht<Et;ht++)Vt.push([+We.call(this,ze[ht],ht),+xt.call(this,ze[ht],ht),ht]);for(Vt.sort(oi),ht=0;ht<Et;ht++)jt.push([Vt[ht][0],-Vt[ht][1]]);var Jt=Ta(Vt),Tr=Ta(jt),Kr=Tr[0]===Jt[0],ln=Tr[Tr.length-1]===Jt[Jt.length-1],kr=[];for(ht=Jt.length-1;ht>=0;--ht)kr.push(ze[Vt[Jt[ht]][2]]);for(ht=+Kr;ht<Tr.length-ln;++ht)kr.push(ze[Vt[Tr[ht]][2]]);return kr}return Oe.x=function(ze){return arguments.length?(be=ze,Oe):be},Oe.y=function(ze){return arguments.length?(Ee=ze,Oe):Ee},Oe};function Ta(ue){for(var be=ue.length,Ee=[0,1],Oe=2,ze=2;ze<be;ze++){for(;Oe>1&&Bt(ue[Ee[Oe-2]],ue[Ee[Oe-1]],ue[ze])<=0;)--Oe;Ee[Oe++]=ze}return Ee.slice(0,Oe)}function oi(ue,be){return ue[0]-be[0]||ue[1]-be[1]}w.geom.polygon=function(ue){return se(ue,$a),ue};var $a=w.geom.polygon.prototype=[];$a.area=function(){for(var ue=-1,be=this.length,Ee,Oe=this[be-1],ze=0;++ue<be;)Ee=Oe,Oe=this[ue],ze+=Ee[1]*Oe[0]-Ee[0]*Oe[1];return ze*.5},$a.centroid=function(ue){var be=-1,Ee=this.length,Oe=0,ze=0,We,xt=this[Ee-1],ht;for(arguments.length||(ue=-1/(6*this.area()));++be<Ee;)We=xt,xt=this[be],ht=We[0]*xt[1]-xt[0]*We[1],Oe+=(We[0]+xt[0])*ht,ze+=(We[1]+xt[1])*ht;return[Oe*ue,ze*ue]},$a.clip=function(ue){for(var be,Ee=Mr(ue),Oe=-1,ze=this.length-Mr(this),We,xt,ht=this[ze-1],Et,Vt,jt;++Oe<ze;){for(be=ue.slice(),ue.length=0,Et=this[Oe],Vt=be[(xt=be.length-Ee)-1],We=-1;++We<xt;)jt=be[We],Va(jt,ht,Et)?(Va(Vt,ht,Et)||ue.push(ti(Vt,jt,ht,Et)),ue.push(jt)):Va(Vt,ht,Et)&&ue.push(ti(Vt,jt,ht,Et)),Vt=jt;Ee&&ue.push(ue[0]),ht=Et}return ue};function Va(ue,be,Ee){return(Ee[0]-be[0])*(ue[1]-be[1])<(Ee[1]-be[1])*(ue[0]-be[0])}function ti(ue,be,Ee,Oe){var ze=ue[0],We=Ee[0],xt=be[0]-ze,ht=Oe[0]-We,Et=ue[1],Vt=Ee[1],jt=be[1]-Et,Jt=Oe[1]-Vt,Tr=(ht*(Et-Vt)-Jt*(ze-We))/(Jt*xt-ht*jt);return[ze+Tr*xt,Et+Tr*jt]}function Mr(ue){var be=ue[0],Ee=ue[ue.length-1];return!(be[0]-Ee[0]||be[1]-Ee[1])}var vn,fn,An,Gn=[],ia,Yn,zn=[];function ea(){la(this),this.edge=this.site=this.circle=null}function wa(ue){var be=Gn.pop()||new ea;return be.site=ue,be}function si(ue){gr(ue),An.remove(ue),Gn.push(ue),la(ue)}function Ft(ue){var be=ue.circle,Ee=be.x,Oe=be.cy,ze={x:Ee,y:Oe},We=ue.P,xt=ue.N,ht=[ue];si(ue);for(var Et=We;Et.circle&&l(Ee-Et.circle.x)<ct&&l(Oe-Et.circle.cy)<ct;)We=Et.P,ht.unshift(Et),si(Et),Et=We;ht.unshift(Et),gr(Et);for(var Vt=xt;Vt.circle&&l(Ee-Vt.circle.x)<ct&&l(Oe-Vt.circle.cy)<ct;)xt=Vt.N,ht.push(Vt),si(Vt),Vt=xt;ht.push(Vt),gr(Vt);var jt=ht.length,Jt;for(Jt=1;Jt<jt;++Jt)Vt=ht[Jt],Et=ht[Jt-1],aa(Vt.edge,Et.site,Vt.site,ze);Et=ht[0],Vt=ht[jt-1],Vt.edge=bn(Et.site,Vt.site,null,ze),yr(Et),yr(Vt)}function cr(ue){for(var be=ue.x,Ee=ue.y,Oe,ze,We,xt,ht=An._;ht;)if(We=$r(ht,Ee)-be,We>ct)ht=ht.L;else if(xt=be-rn(ht,Ee),xt>ct){if(!ht.R){Oe=ht;break}ht=ht.R}else{We>-ct?(Oe=ht.P,ze=ht):xt>-ct?(Oe=ht,ze=ht.N):Oe=ze=ht;break}var Et=wa(ue);if(An.insert(Oe,Et),!(!Oe&&!ze)){if(Oe===ze){gr(Oe),ze=wa(Oe.site),An.insert(Et,ze),Et.edge=ze.edge=bn(Oe.site,Et.site),yr(Oe),yr(ze);return}if(!ze){Et.edge=bn(Oe.site,Et.site);return}gr(Oe),gr(ze);var Vt=Oe.site,jt=Vt.x,Jt=Vt.y,Tr=ue.x-jt,Kr=ue.y-Jt,ln=ze.site,kr=ln.x-jt,zr=ln.y-Jt,Gr=2*(Tr*zr-Kr*kr),nn=Tr*Tr+Kr*Kr,on=kr*kr+zr*zr,Wr={x:(zr*nn-Kr*on)/Gr+jt,y:(Tr*on-kr*nn)/Gr+Jt};aa(ze.edge,Vt,ln,Wr),Et.edge=bn(Vt,ue,null,Wr),ze.edge=bn(ue,ln,null,Wr),yr(Oe),yr(ze)}}function $r(ue,be){var Ee=ue.site,Oe=Ee.x,ze=Ee.y,We=ze-be;if(!We)return Oe;var xt=ue.P;if(!xt)return-1/0;Ee=xt.site;var ht=Ee.x,Et=Ee.y,Vt=Et-be;if(!Vt)return ht;var jt=ht-Oe,Jt=1/We-1/Vt,Tr=jt/Vt;return Jt?(-Tr+Math.sqrt(Tr*Tr-2*Jt*(jt*jt/(-2*Vt)-Et+Vt/2+ze-We/2)))/Jt+Oe:(Oe+ht)/2}function rn(ue,be){var Ee=ue.N;if(Ee)return $r(Ee,be);var Oe=ue.site;return Oe.y===be?Oe.x:1/0}function sn(ue){this.site=ue,this.edges=[]}sn.prototype.prepare=function(){for(var ue=this.edges,be=ue.length,Ee;be--;)Ee=ue[be].edge,(!Ee.b||!Ee.a)&&ue.splice(be,1);return ue.sort(mn),ue.length};function kn(ue){for(var be=ue[0][0],Ee=ue[1][0],Oe=ue[0][1],ze=ue[1][1],We,xt,ht,Et,Vt=fn,jt=Vt.length,Jt,Tr,Kr,ln,kr,zr;jt--;)if(Jt=Vt[jt],!(!Jt||!Jt.prepare()))for(Kr=Jt.edges,ln=Kr.length,Tr=0;Tr<ln;)zr=Kr[Tr].end(),ht=zr.x,Et=zr.y,kr=Kr[++Tr%ln].start(),We=kr.x,xt=kr.y,(l(ht-We)>ct||l(Et-xt)>ct)&&(Kr.splice(Tr,0,new pa(Zn(Jt.site,zr,l(ht-be)<ct&&ze-Et>ct?{x:be,y:l(We-be)<ct?xt:ze}:l(Et-ze)<ct&&Ee-ht>ct?{x:l(xt-ze)<ct?We:Ee,y:ze}:l(ht-Ee)<ct&&Et-Oe>ct?{x:Ee,y:l(We-Ee)<ct?xt:Oe}:l(Et-Oe)<ct&&ht-be>ct?{x:l(xt-Oe)<ct?We:be,y:Oe}:null),Jt.site,null)),++ln)}function mn(ue,be){return be.angle-ue.angle}function un(){la(this),this.x=this.y=this.arc=this.site=this.cy=null}function yr(ue){var be=ue.P,Ee=ue.N;if(!(!be||!Ee)){var Oe=be.site,ze=ue.site,We=Ee.site;if(Oe!==We){var xt=ze.x,ht=ze.y,Et=Oe.x-xt,Vt=Oe.y-ht,jt=We.x-xt,zr=We.y-ht,Jt=2*(Et*zr-Vt*jt);if(!(Jt>=-Ze)){var Tr=Et*Et+Vt*Vt,Kr=jt*jt+zr*zr,ln=(zr*Tr-Vt*Kr)/Jt,kr=(Et*Kr-jt*Tr)/Jt,zr=kr+ht,Gr=zn.pop()||new un;Gr.arc=ue,Gr.site=ze,Gr.x=ln+xt,Gr.y=zr+Math.sqrt(ln*ln+kr*kr),Gr.cy=zr,ue.circle=Gr;for(var nn=null,on=Yn._;on;)if(Gr.y<on.y||Gr.y===on.y&&Gr.x<=on.x)if(on.L)on=on.L;else{nn=on.P;break}else if(on.R)on=on.R;else{nn=on;break}Yn.insert(nn,Gr),nn||(ia=Gr)}}}}function gr(ue){var be=ue.circle;be&&(be.P||(ia=be.N),Yn.remove(be),zn.push(be),la(be),ue.circle=null)}function Dr(ue,be,Ee,Oe){return function(ze){var We=ze.a,xt=ze.b,ht=We.x,Et=We.y,Vt=xt.x,jt=xt.y,Jt=0,Tr=1,Kr=Vt-ht,ln=jt-Et,kr;if(kr=ue-ht,!(!Kr&&kr>0)){if(kr/=Kr,Kr<0){if(kr<Jt)return;kr<Tr&&(Tr=kr)}else if(Kr>0){if(kr>Tr)return;kr>Jt&&(Jt=kr)}if(kr=Ee-ht,!(!Kr&&kr<0)){if(kr/=Kr,Kr<0){if(kr>Tr)return;kr>Jt&&(Jt=kr)}else if(Kr>0){if(kr<Jt)return;kr<Tr&&(Tr=kr)}if(kr=be-Et,!(!ln&&kr>0)){if(kr/=ln,ln<0){if(kr<Jt)return;kr<Tr&&(Tr=kr)}else if(ln>0){if(kr>Tr)return;kr>Jt&&(Jt=kr)}if(kr=Oe-Et,!(!ln&&kr<0)){if(kr/=ln,ln<0){if(kr>Tr)return;kr>Jt&&(Jt=kr)}else if(ln>0){if(kr<Jt)return;kr<Tr&&(Tr=kr)}return Jt>0&&(ze.a={x:ht+Jt*Kr,y:Et+Jt*ln}),Tr<1&&(ze.b={x:ht+Tr*Kr,y:Et+Tr*ln}),ze}}}}}}function dn(ue){for(var be=vn,Ee=Dr(ue[0][0],ue[0][1],ue[1][0],ue[1][1]),Oe=be.length,ze;Oe--;)ze=be[Oe],(!Bn(ze,ue)||!Ee(ze)||l(ze.a.x-ze.b.x)<ct&&l(ze.a.y-ze.b.y)<ct)&&(ze.a=ze.b=null,be.splice(Oe,1))}function Bn(ue,be){var Ee=ue.b;if(Ee)return!0;var Oe=ue.a,ze=be[0][0],We=be[1][0],xt=be[0][1],ht=be[1][1],Et=ue.l,Vt=ue.r,jt=Et.x,Jt=Et.y,Tr=Vt.x,Kr=Vt.y,ln=(jt+Tr)/2,kr=(Jt+Kr)/2,zr,Gr;if(Kr===Jt){if(ln<ze||ln>=We)return;if(jt>Tr){if(!Oe)Oe={x:ln,y:xt};else if(Oe.y>=ht)return;Ee={x:ln,y:ht}}else{if(!Oe)Oe={x:ln,y:ht};else if(Oe.y<xt)return;Ee={x:ln,y:xt}}}else if(zr=(jt-Tr)/(Kr-Jt),Gr=kr-zr*ln,zr<-1||zr>1)if(jt>Tr){if(!Oe)Oe={x:(xt-Gr)/zr,y:xt};else if(Oe.y>=ht)return;Ee={x:(ht-Gr)/zr,y:ht}}else{if(!Oe)Oe={x:(ht-Gr)/zr,y:ht};else if(Oe.y<xt)return;Ee={x:(xt-Gr)/zr,y:xt}}else if(Jt<Kr){if(!Oe)Oe={x:ze,y:zr*ze+Gr};else if(Oe.x>=We)return;Ee={x:We,y:zr*We+Gr}}else{if(!Oe)Oe={x:We,y:zr*We+Gr};else if(Oe.x<ze)return;Ee={x:ze,y:zr*ze+Gr}}return ue.a=Oe,ue.b=Ee,!0}function ta(ue,be){this.l=ue,this.r=be,this.a=this.b=null}function bn(ue,be,Ee,Oe){var ze=new ta(ue,be);return vn.push(ze),Ee&&aa(ze,ue,be,Ee),Oe&&aa(ze,be,ue,Oe),fn[ue.i].edges.push(new pa(ze,ue,be)),fn[be.i].edges.push(new pa(ze,be,ue)),ze}function Zn(ue,be,Ee){var Oe=new ta(ue,null);return Oe.a=be,Oe.b=Ee,vn.push(Oe),Oe}function aa(ue,be,Ee,Oe){!ue.a&&!ue.b?(ue.a=Oe,ue.l=be,ue.r=Ee):ue.l===Ee?ue.b=Oe:ue.a=Oe}function pa(ue,be,Ee){var Oe=ue.a,ze=ue.b;this.edge=ue,this.site=be,this.angle=Ee?Math.atan2(Ee.y-be.y,Ee.x-be.x):ue.l===be?Math.atan2(ze.x-Oe.x,Oe.y-ze.y):Math.atan2(Oe.x-ze.x,ze.y-Oe.y)}pa.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function ya(){this._=null}function la(ue){ue.U=ue.C=ue.L=ue.R=ue.P=ue.N=null}ya.prototype={insert:function(ue,be){var Ee,Oe,ze;if(ue){if(be.P=ue,be.N=ue.N,ue.N&&(ue.N.P=be),ue.N=be,ue.R){for(ue=ue.R;ue.L;)ue=ue.L;ue.L=be}else ue.R=be;Ee=ue}else this._?(ue=Ro(this._),be.P=null,be.N=ue,ue.P=ue.L=be,Ee=ue):(be.P=be.N=null,this._=be,Ee=null);for(be.L=be.R=null,be.U=Ee,be.C=!0,ue=be;Ee&&Ee.C;)Oe=Ee.U,Ee===Oe.L?(ze=Oe.R,ze&&ze.C?(Ee.C=ze.C=!1,Oe.C=!0,ue=Oe):(ue===Ee.R&&(Sa(this,Ee),ue=Ee,Ee=ue.U),Ee.C=!1,Oe.C=!0,ho(this,Oe))):(ze=Oe.L,ze&&ze.C?(Ee.C=ze.C=!1,Oe.C=!0,ue=Oe):(ue===Ee.L&&(ho(this,Ee),ue=Ee,Ee=ue.U),Ee.C=!1,Oe.C=!0,Sa(this,Oe))),Ee=ue.U;this._.C=!1},remove:function(ue){ue.N&&(ue.N.P=ue.P),ue.P&&(ue.P.N=ue.N),ue.N=ue.P=null;var be=ue.U,Ee,Oe=ue.L,ze=ue.R,We,xt;if(Oe?ze?We=Ro(ze):We=Oe:We=ze,be?be.L===ue?be.L=We:be.R=We:this._=We,Oe&&ze?(xt=We.C,We.C=ue.C,We.L=Oe,Oe.U=We,We!==ze?(be=We.U,We.U=ue.U,ue=We.R,be.L=ue,We.R=ze,ze.U=We):(We.U=be,be=We,ue=We.R)):(xt=ue.C,ue=We),ue&&(ue.U=be),!xt){if(ue&&ue.C){ue.C=!1;return}do{if(ue===this._)break;if(ue===be.L){if(Ee=be.R,Ee.C&&(Ee.C=!1,be.C=!0,Sa(this,be),Ee=be.R),Ee.L&&Ee.L.C||Ee.R&&Ee.R.C){(!Ee.R||!Ee.R.C)&&(Ee.L.C=!1,Ee.C=!0,ho(this,Ee),Ee=be.R),Ee.C=be.C,be.C=Ee.R.C=!1,Sa(this,be),ue=this._;break}}else if(Ee=be.L,Ee.C&&(Ee.C=!1,be.C=!0,ho(this,be),Ee=be.L),Ee.L&&Ee.L.C||Ee.R&&Ee.R.C){(!Ee.L||!Ee.L.C)&&(Ee.R.C=!1,Ee.C=!0,Sa(this,Ee),Ee=be.L),Ee.C=be.C,be.C=Ee.L.C=!1,ho(this,be),ue=this._;break}Ee.C=!0,ue=be,be=be.U}while(!ue.C);ue&&(ue.C=!1)}}};function Sa(ue,be){var Ee=be,Oe=be.R,ze=Ee.U;ze?ze.L===Ee?ze.L=Oe:ze.R=Oe:ue._=Oe,Oe.U=ze,Ee.U=Oe,Ee.R=Oe.L,Ee.R&&(Ee.R.U=Ee),Oe.L=Ee}function ho(ue,be){var Ee=be,Oe=be.L,ze=Ee.U;ze?ze.L===Ee?ze.L=Oe:ze.R=Oe:ue._=Oe,Oe.U=ze,Ee.U=Oe,Ee.L=Oe.R,Ee.L&&(Ee.L.U=Ee),Oe.R=Ee}function Ro(ue){for(;ue.L;)ue=ue.L;return ue}function Zo(ue,be){var Ee=ue.sort(tl).pop(),Oe,ze,We;for(vn=[],fn=new Array(ue.length),An=new ya,Yn=new ya;;)if(We=ia,Ee&&(!We||Ee.y<We.y||Ee.y===We.y&&Ee.x<We.x))(Ee.x!==Oe||Ee.y!==ze)&&(fn[Ee.i]=new sn(Ee),cr(Ee),Oe=Ee.x,ze=Ee.y),Ee=ue.pop();else if(We)Ft(We.arc);else break;be&&(dn(be),kn(be));var xt={cells:fn,edges:vn};return An=Yn=vn=fn=null,xt}function tl(ue,be){return be.y-ue.y||be.x-ue.x}w.geom.voronoi=function(ue){var be=Kn,Ee=Aa,Oe=be,ze=Ee,We=hl;if(ue)return xt(ue);function xt(Et){var Vt=new Array(Et.length),jt=We[0][0],Jt=We[0][1],Tr=We[1][0],Kr=We[1][1];return Zo(ht(Et),We).cells.forEach(function(ln,kr){var zr=ln.edges,Gr=ln.site,nn=Vt[kr]=zr.length?zr.map(function(on){var Wr=on.start();return[Wr.x,Wr.y]}):Gr.x>=jt&&Gr.x<=Tr&&Gr.y>=Jt&&Gr.y<=Kr?[[jt,Kr],[Tr,Kr],[Tr,Jt],[jt,Jt]]:[];nn.point=Et[kr]}),Vt}function ht(Et){return Et.map(function(Vt,jt){return{x:Math.round(Oe(Vt,jt)/ct)*ct,y:Math.round(ze(Vt,jt)/ct)*ct,i:jt}})}return xt.links=function(Et){return Zo(ht(Et)).edges.filter(function(Vt){return Vt.l&&Vt.r}).map(function(Vt){return{source:Et[Vt.l.i],target:Et[Vt.r.i]}})},xt.triangles=function(Et){var Vt=[];return Zo(ht(Et)).cells.forEach(function(jt,Jt){for(var Tr=jt.site,Kr=jt.edges.sort(mn),ln=-1,kr=Kr.length,zr,Gr=Kr[kr-1].edge,nn=Gr.l===Tr?Gr.r:Gr.l;++ln<kr;)zr=nn,Gr=Kr[ln].edge,nn=Gr.l===Tr?Gr.r:Gr.l,Jt<zr.i&&Jt<nn.i&&Gl(Tr,zr,nn)<0&&Vt.push([Et[Jt],Et[zr.i],Et[nn.i]])}),Vt},xt.x=function(Et){return arguments.length?(Oe=et(be=Et),xt):be},xt.y=function(Et){return arguments.length?(ze=et(Ee=Et),xt):Ee},xt.clipExtent=function(Et){return arguments.length?(We=Et??hl,xt):We===hl?null:We},xt.size=function(Et){return arguments.length?xt.clipExtent(Et&&[[0,0],Et]):We===hl?null:We&&We[1]},xt};var hl=[[-1e6,-1e6],[1e6,1e6]];function Gl(ue,be,Ee){return(ue.x-Ee.x)*(be.y-ue.y)-(ue.x-be.x)*(Ee.y-ue.y)}w.geom.delaunay=function(ue){return w.geom.voronoi().triangles(ue)},w.geom.quadtree=function(ue,be,Ee,Oe,ze){var We=Kn,xt=Aa,ht;if(ht=arguments.length)return We=vi,xt=Vs,ht===3&&(ze=Ee,Oe=be,Ee=be=0),Et(ue);function Et(Vt){var jt,Jt=et(We),Tr=et(xt),Kr,ln,kr,zr,Gr,nn,on,Wr;if(be!=null)Gr=be,nn=Ee,on=Oe,Wr=ze;else if(on=Wr=-(Gr=nn=1/0),Kr=[],ln=[],zr=Vt.length,ht)for(kr=0;kr<zr;++kr)jt=Vt[kr],jt.x<Gr&&(Gr=jt.x),jt.y<nn&&(nn=jt.y),jt.x>on&&(on=jt.x),jt.y>Wr&&(Wr=jt.y),Kr.push(jt.x),ln.push(jt.y);else for(kr=0;kr<zr;++kr){var Nn=+Jt(jt=Vt[kr],kr),ra=+Tr(jt,kr);Nn<Gr&&(Gr=Nn),ra<nn&&(nn=ra),Nn>on&&(on=Nn),ra>Wr&&(Wr=ra),Kr.push(Nn),ln.push(ra)}var ba=on-Gr,oa=Wr-nn;ba>oa?Wr=nn+ba:on=Gr+oa;function Ea(Da,Ja,yi,fo,Ii,fa,ai,Wa){if(!(isNaN(yi)||isNaN(fo)))if(Da.leaf){var Si=Da.x,ui=Da.y;if(Si!=null)if(l(Si-yi)+l(ui-fo)<.01)ua(Da,Ja,yi,fo,Ii,fa,ai,Wa);else{var io=Da.point;Da.x=Da.y=Da.point=null,ua(Da,io,Si,ui,Ii,fa,ai,Wa),ua(Da,Ja,yi,fo,Ii,fa,ai,Wa)}else Da.x=yi,Da.y=fo,Da.point=Ja}else ua(Da,Ja,yi,fo,Ii,fa,ai,Wa)}function ua(Da,Ja,yi,fo,Ii,fa,ai,Wa){var Si=(Ii+ai)*.5,ui=(fa+Wa)*.5,io=yi>=Si,Qi=fo>=ui,go=Qi<<1|io;Da.leaf=!1,Da=Da.nodes[go]||(Da.nodes[go]=Ps()),io?Ii=Si:ai=Si,Qi?fa=ui:Wa=ui,Ea(Da,Ja,yi,fo,Ii,fa,ai,Wa)}var Ua=Ps();if(Ua.add=function(Da){Ea(Ua,Da,+Jt(Da,++kr),+Tr(Da,kr),Gr,nn,on,Wr)},Ua.visit=function(Da){Ui(Da,Ua,Gr,nn,on,Wr)},Ua.find=function(Da){return Ao(Ua,Da[0],Da[1],Gr,nn,on,Wr)},kr=-1,be==null){for(;++kr<zr;)Ea(Ua,Vt[kr],Kr[kr],ln[kr],Gr,nn,on,Wr);--kr}else Vt.forEach(Ua.add);return Kr=ln=Vt=jt=null,Ua}return Et.x=function(Vt){return arguments.length?(We=Vt,Et):We},Et.y=function(Vt){return arguments.length?(xt=Vt,Et):xt},Et.extent=function(Vt){return arguments.length?(Vt==null?be=Ee=Oe=ze=null:(be=+Vt[0][0],Ee=+Vt[0][1],Oe=+Vt[1][0],ze=+Vt[1][1]),Et):be==null?null:[[be,Ee],[Oe,ze]]},Et.size=function(Vt){return arguments.length?(Vt==null?be=Ee=Oe=ze=null:(be=Ee=0,Oe=+Vt[0],ze=+Vt[1]),Et):be==null?null:[Oe-be,ze-Ee]},Et};function vi(ue){return ue.x}function Vs(ue){return ue.y}function Ps(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Ui(ue,be,Ee,Oe,ze,We){if(!ue(be,Ee,Oe,ze,We)){var xt=(Ee+ze)*.5,ht=(Oe+We)*.5,Et=be.nodes;Et[0]&&Ui(ue,Et[0],Ee,Oe,xt,ht),Et[1]&&Ui(ue,Et[1],xt,Oe,ze,ht),Et[2]&&Ui(ue,Et[2],Ee,ht,xt,We),Et[3]&&Ui(ue,Et[3],xt,ht,ze,We)}}function Ao(ue,be,Ee,Oe,ze,We,xt){var ht=1/0,Et;return function Vt(jt,Jt,Tr,Kr,ln){if(!(Jt>We||Tr>xt||Kr<Oe||ln<ze)){if(kr=jt.point){var kr,zr=be-jt.x,Gr=Ee-jt.y,nn=zr*zr+Gr*Gr;if(nn<ht){var on=Math.sqrt(ht=nn);Oe=be-on,ze=Ee-on,We=be+on,xt=Ee+on,Et=kr}}for(var Wr=jt.nodes,Nn=(Jt+Kr)*.5,ra=(Tr+ln)*.5,ba=be>=Nn,oa=Ee>=ra,Ea=oa<<1|ba,ua=Ea+4;Ea<ua;++Ea)if(jt=Wr[Ea&3])switch(Ea&3){case 0:Vt(jt,Jt,Tr,Nn,ra);break;case 1:Vt(jt,Nn,Tr,Kr,ra);break;case 2:Vt(jt,Jt,ra,Nn,ln);break;case 3:Vt(jt,Nn,ra,Kr,ln);break}}}(ue,Oe,ze,We,xt),Et}w.interpolateRgb=vl;function vl(ue,be){ue=w.rgb(ue),be=w.rgb(be);var Ee=ue.r,Oe=ue.g,ze=ue.b,We=be.r-Ee,xt=be.g-Oe,ht=be.b-ze;return function(Et){return"#"+_r(Math.round(Ee+We*Et))+_r(Math.round(Oe+xt*Et))+_r(Math.round(ze+ht*Et))}}w.interpolateObject=hs;function hs(ue,be){var Ee={},Oe={},ze;for(ze in ue)ze in be?Ee[ze]=no(ue[ze],be[ze]):Oe[ze]=ue[ze];for(ze in be)ze in ue||(Oe[ze]=be[ze]);return function(We){for(ze in Ee)Oe[ze]=Ee[ze](We);return Oe}}w.interpolateNumber=Di;function Di(ue,be){return ue=+ue,be=+be,function(Ee){return ue*(1-Ee)+be*Ee}}w.interpolateString=rl;function rl(ue,be){var Ee=Ki.lastIndex=Fi.lastIndex=0,Oe,ze,We,xt=-1,ht=[],Et=[];for(ue=ue+"",be=be+"";(Oe=Ki.exec(ue))&&(ze=Fi.exec(be));)(We=ze.index)>Ee&&(We=be.slice(Ee,We),ht[xt]?ht[xt]+=We:ht[++xt]=We),(Oe=Oe[0])===(ze=ze[0])?ht[xt]?ht[xt]+=ze:ht[++xt]=ze:(ht[++xt]=null,Et.push({i:xt,x:Di(Oe,ze)})),Ee=Fi.lastIndex;return Ee<be.length&&(We=be.slice(Ee),ht[xt]?ht[xt]+=We:ht[++xt]=We),ht.length<2?Et[0]?(be=Et[0].x,function(Vt){return be(Vt)+""}):function(){return be}:(be=Et.length,function(Vt){for(var jt=0,Jt;jt<be;++jt)ht[(Jt=Et[jt]).i]=Jt.x(Vt);return ht.join("")})}var Ki=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Fi=new RegExp(Ki.source,"g");w.interpolate=no;function no(ue,be){for(var Ee=w.interpolators.length,Oe;--Ee>=0&&!(Oe=w.interpolators[Ee](ue,be)););return Oe}w.interpolators=[function(ue,be){var Ee=typeof be;return(Ee==="string"?Ar.has(be.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(be)?vl:rl:be instanceof Ht?vl:Array.isArray(be)?Ji:Ee==="object"&&isNaN(be)?hs:Di)(ue,be)}],w.interpolateArray=Ji;function Ji(ue,be){var Ee=[],Oe=[],ze=ue.length,We=be.length,xt=Math.min(ue.length,be.length),ht;for(ht=0;ht<xt;++ht)Ee.push(no(ue[ht],be[ht]));for(;ht<ze;++ht)Oe[ht]=ue[ht];for(;ht<We;++ht)Oe[ht]=be[ht];return function(Et){for(ht=0;ht<xt;++ht)Oe[ht]=Ee[ht](Et);return Oe}}var es=function(){return D},Hs=w.map({linear:es,poly:bs,quad:function(){return Mo},cubic:function(){return Au},sin:function(){return Cl},exp:function(){return Mu},circle:function(){return Su},elastic:Gs,back:Ll,bounce:function(){return _s}}),nu=w.map({in:D,out:au,"in-out":Ds,"out-in":function(ue){return Ds(au(ue))}});w.ease=function(ue){var be=ue.indexOf("-"),Ee=be>=0?ue.slice(0,be):ue,Oe=be>=0?ue.slice(be+1):"in";return Ee=Hs.get(Ee)||es,Oe=nu.get(Oe)||D,jo(Oe(Ee.apply(null,v.call(arguments,1))))};function jo(ue){return function(be){return be<=0?0:be>=1?1:ue(be)}}function au(ue){return function(be){return 1-ue(1-be)}}function Ds(ue){return function(be){return .5*(be<.5?ue(2*be):2-ue(2-2*be))}}function Mo(ue){return ue*ue}function Au(ue){return ue*ue*ue}function Rs(ue){if(ue<=0)return 0;if(ue>=1)return 1;var be=ue*ue,Ee=be*ue;return 4*(ue<.5?Ee:3*(ue-be)+Ee-.75)}function bs(ue){return function(be){return Math.pow(be,ue)}}function Cl(ue){return 1-Math.cos(ue*ot)}function Mu(ue){return Math.pow(2,10*(ue-1))}function Su(ue){return 1-Math.sqrt(1-ue*ue)}function Gs(ue,be){var Ee;return arguments.length<2&&(be=.45),arguments.length?Ee=be/Ge*Math.asin(1/ue):(ue=1,Ee=be/4),function(Oe){return 1+ue*Math.pow(2,-10*Oe)*Math.sin((Oe-Ee)*Ge/be)}}function Ll(ue){return ue||(ue=1.70158),function(be){return be*be*((ue+1)*be-ue)}}function _s(ue){return ue<1/2.75?7.5625*ue*ue:ue<2/2.75?7.5625*(ue-=1.5/2.75)*ue+.75:ue<2.5/2.75?7.5625*(ue-=2.25/2.75)*ue+.9375:7.5625*(ue-=2.625/2.75)*ue+.984375}w.interpolateHcl=Yl;function Yl(ue,be){ue=w.hcl(ue),be=w.hcl(be);var Ee=ue.h,Oe=ue.c,ze=ue.l,We=be.h-Ee,xt=be.c-Oe,ht=be.l-ze;return isNaN(xt)&&(xt=0,Oe=isNaN(Oe)?be.c:Oe),isNaN(We)?(We=0,Ee=isNaN(Ee)?be.h:Ee):We>180?We-=360:We<-180&&(We+=360),function(Et){return st(Ee+We*Et,Oe+xt*Et,ze+ht*Et)+""}}w.interpolateHsl=nl;function nl(ue,be){ue=w.hsl(ue),be=w.hsl(be);var Ee=ue.h,Oe=ue.s,ze=ue.l,We=be.h-Ee,xt=be.s-Oe,ht=be.l-ze;return isNaN(xt)&&(xt=0,Oe=isNaN(Oe)?be.s:Oe),isNaN(We)?(We=0,Ee=isNaN(Ee)?be.h:Ee):We>180?We-=360:We<-180&&(We+=360),function(Et){return br(Ee+We*Et,Oe+xt*Et,ze+ht*Et)+""}}w.interpolateLab=Wl;function Wl(ue,be){ue=w.lab(ue),be=w.lab(be);var Ee=ue.l,Oe=ue.a,ze=ue.b,We=be.l-Ee,xt=be.a-Oe,ht=be.b-ze;return function(Et){return pt(Ee+We*Et,Oe+xt*Et,ze+ht*Et)+""}}w.interpolateRound=iu;function iu(ue,be){return be-=ue,function(Ee){return Math.round(ue+be*Ee)}}w.transform=function(ue){var be=T.createElementNS(w.ns.prefix.svg,"g");return(w.transform=function(Ee){if(Ee!=null){be.setAttribute("transform",Ee);var Oe=be.transform.baseVal.consolidate()}return new Pl(Oe?Oe.matrix:Dl)})(ue)};function Pl(ue){var be=[ue.a,ue.b],Ee=[ue.c,ue.d],Oe=Ys(be),ze=ku(be,Ee),We=Ys(Xl(Ee,be,-ze))||0;be[0]*Ee[1]<Ee[0]*be[1]&&(be[0]*=-1,be[1]*=-1,Oe*=-1,ze*=-1),this.rotate=(Oe?Math.atan2(be[1],be[0]):Math.atan2(-Ee[0],Ee[1]))*_t,this.translate=[ue.e,ue.f],this.scale=[Oe,We],this.skew=We?Math.atan2(ze,We)*_t:0}Pl.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function ku(ue,be){return ue[0]*be[0]+ue[1]*be[1]}function Ys(ue){var be=Math.sqrt(ku(ue,ue));return be&&(ue[0]/=be,ue[1]/=be),be}function Xl(ue,be,Ee){return ue[0]+=Ee*be[0],ue[1]+=Ee*be[1],ue}var Dl={a:1,b:0,c:0,d:1,e:0,f:0};w.interpolateTransform=Rl;function vs(ue){return ue.length?ue.pop()+",":""}function pl(ue,be,Ee,Oe){if(ue[0]!==be[0]||ue[1]!==be[1]){var ze=Ee.push("translate(",null,",",null,")");Oe.push({i:ze-4,x:Di(ue[0],be[0])},{i:ze-2,x:Di(ue[1],be[1])})}else(be[0]||be[1])&&Ee.push("translate("+be+")")}function Zl(ue,be,Ee,Oe){ue!==be?(ue-be>180?be+=360:be-ue>180&&(ue+=360),Oe.push({i:Ee.push(vs(Ee)+"rotate(",null,")")-2,x:Di(ue,be)})):be&&Ee.push(vs(Ee)+"rotate("+be+")")}function ou(ue,be,Ee,Oe){ue!==be?Oe.push({i:Ee.push(vs(Ee)+"skewX(",null,")")-2,x:Di(ue,be)}):be&&Ee.push(vs(Ee)+"skewX("+be+")")}function su(ue,be,Ee,Oe){if(ue[0]!==be[0]||ue[1]!==be[1]){var ze=Ee.push(vs(Ee)+"scale(",null,",",null,")");Oe.push({i:ze-4,x:Di(ue[0],be[0])},{i:ze-2,x:Di(ue[1],be[1])})}else(be[0]!==1||be[1]!==1)&&Ee.push(vs(Ee)+"scale("+be+")")}function Rl(ue,be){var Ee=[],Oe=[];return ue=w.transform(ue),be=w.transform(be),pl(ue.translate,be.translate,Ee,Oe),Zl(ue.rotate,be.rotate,Ee,Oe),ou(ue.skew,be.skew,Ee,Oe),su(ue.scale,be.scale,Ee,Oe),ue=be=null,function(ze){for(var We=-1,xt=Oe.length,ht;++We<xt;)Ee[(ht=Oe[We]).i]=ht.x(ze);return Ee.join("")}}function Eu(ue,be){return be=(be-=ue=+ue)||1/be,function(Ee){return(Ee-ue)/be}}function lu(ue,be){return be=(be-=ue=+ue)||1/be,function(Ee){return Math.max(0,Math.min(1,(Ee-ue)/be))}}w.layout={},w.layout.bundle=function(){return function(ue){for(var be=[],Ee=-1,Oe=ue.length;++Ee<Oe;)be.push(Ko(ue[Ee]));return be}};function Ko(ue){for(var be=ue.source,Ee=ue.target,Oe=il(be,Ee),ze=[be];be!==Oe;)be=be.parent,ze.push(be);for(var We=ze.length;Ee!==Oe;)ze.splice(We,0,Ee),Ee=Ee.parent;return ze}function al(ue){for(var be=[],Ee=ue.parent;Ee!=null;)be.push(ue),ue=Ee,Ee=Ee.parent;return be.push(ue),be}function il(ue,be){if(ue===be)return ue;for(var Ee=al(ue),Oe=al(be),ze=Ee.pop(),We=Oe.pop(),xt=null;ze===We;)xt=ze,ze=Ee.pop(),We=Oe.pop();return xt}w.layout.chord=function(){var ue={},be,Ee,Oe,ze,We=0,xt,ht,Et;function Vt(){var Jt={},Tr=[],Kr=w.range(ze),ln=[],kr,zr,Gr,nn,on;for(be=[],Ee=[],kr=0,nn=-1;++nn<ze;){for(zr=0,on=-1;++on<ze;)zr+=Oe[nn][on];Tr.push(zr),ln.push(w.range(ze)),kr+=zr}for(xt&&Kr.sort(function(Ua,Da){return xt(Tr[Ua],Tr[Da])}),ht&&ln.forEach(function(Ua,Da){Ua.sort(function(Ja,yi){return ht(Oe[Da][Ja],Oe[Da][yi])})}),kr=(Ge-We*ze)/kr,zr=0,nn=-1;++nn<ze;){for(Gr=zr,on=-1;++on<ze;){var Wr=Kr[nn],Nn=ln[Wr][on],ra=Oe[Wr][Nn],ba=zr,oa=zr+=ra*kr;Jt[Wr+"-"+Nn]={index:Wr,subindex:Nn,startAngle:ba,endAngle:oa,value:ra}}Ee[Wr]={index:Wr,startAngle:Gr,endAngle:zr,value:Tr[Wr]},zr+=We}for(nn=-1;++nn<ze;)for(on=nn-1;++on<ze;){var Ea=Jt[nn+"-"+on],ua=Jt[on+"-"+nn];(Ea.value||ua.value)&&be.push(Ea.value<ua.value?{source:ua,target:Ea}:{source:Ea,target:ua})}Et&&jt()}function jt(){be.sort(function(Jt,Tr){return Et((Jt.source.value+Jt.target.value)/2,(Tr.source.value+Tr.target.value)/2)})}return ue.matrix=function(Jt){return arguments.length?(ze=(Oe=Jt)&&Oe.length,be=Ee=null,ue):Oe},ue.padding=function(Jt){return arguments.length?(We=Jt,be=Ee=null,ue):We},ue.sortGroups=function(Jt){return arguments.length?(xt=Jt,be=Ee=null,ue):xt},ue.sortSubgroups=function(Jt){return arguments.length?(ht=Jt,be=null,ue):ht},ue.sortChords=function(Jt){return arguments.length?(Et=Jt,be&&jt(),ue):Et},ue.chords=function(){return be||Vt(),be},ue.groups=function(){return Ee||Vt(),Ee},ue},w.layout.force=function(){var ue={},be=w.dispatch("start","tick","end"),Ee,Oe=[1,1],ze,We,xt=.9,ht=Ts,Et=oo,Vt=-30,jt=dl,Jt=.1,Tr=.64,Kr=[],ln=[],kr,zr,Gr;function nn(Wr){return function(Nn,ra,ba,oa){if(Nn.point!==Wr){var Ea=Nn.cx-Wr.x,ua=Nn.cy-Wr.y,Ua=oa-ra,Da=Ea*Ea+ua*ua;if(Ua*Ua/Tr<Da){if(Da<jt){var Ja=Nn.charge/Da;Wr.px-=Ea*Ja,Wr.py-=ua*Ja}return!0}if(Nn.point&&Da&&Da<jt){var Ja=Nn.pointCharge/Da;Wr.px-=Ea*Ja,Wr.py-=ua*Ja}}return!Nn.charge}}ue.tick=function(){if((We*=.99)<.005)return Ee=null,be.end({type:"end",alpha:We=0}),!0;var Wr=Kr.length,Nn=ln.length,ra,ba,oa,Ea,ua,Ua,Da,Ja,yi;for(ba=0;ba<Nn;++ba)oa=ln[ba],Ea=oa.source,ua=oa.target,Ja=ua.x-Ea.x,yi=ua.y-Ea.y,(Ua=Ja*Ja+yi*yi)&&(Ua=We*zr[ba]*((Ua=Math.sqrt(Ua))-kr[ba])/Ua,Ja*=Ua,yi*=Ua,ua.x-=Ja*(Da=Ea.weight+ua.weight?Ea.weight/(Ea.weight+ua.weight):.5),ua.y-=yi*Da,Ea.x+=Ja*(Da=1-Da),Ea.y+=yi*Da);if((Da=We*Jt)&&(Ja=Oe[0]/2,yi=Oe[1]/2,ba=-1,Da))for(;++ba<Wr;)oa=Kr[ba],oa.x+=(Ja-oa.x)*Da,oa.y+=(yi-oa.y)*Da;if(Vt)for(ws(ra=w.geom.quadtree(Kr),We,Gr),ba=-1;++ba<Wr;)(oa=Kr[ba]).fixed||ra.visit(nn(oa));for(ba=-1;++ba<Wr;)oa=Kr[ba],oa.fixed?(oa.x=oa.px,oa.y=oa.py):(oa.x-=(oa.px-(oa.px=oa.x))*xt,oa.y-=(oa.py-(oa.py=oa.y))*xt);be.tick({type:"tick",alpha:We})},ue.nodes=function(Wr){return arguments.length?(Kr=Wr,ue):Kr},ue.links=function(Wr){return arguments.length?(ln=Wr,ue):ln},ue.size=function(Wr){return arguments.length?(Oe=Wr,ue):Oe},ue.linkDistance=function(Wr){return arguments.length?(ht=typeof Wr=="function"?Wr:+Wr,ue):ht},ue.distance=ue.linkDistance,ue.linkStrength=function(Wr){return arguments.length?(Et=typeof Wr=="function"?Wr:+Wr,ue):Et},ue.friction=function(Wr){return arguments.length?(xt=+Wr,ue):xt},ue.charge=function(Wr){return arguments.length?(Vt=typeof Wr=="function"?Wr:+Wr,ue):Vt},ue.chargeDistance=function(Wr){return arguments.length?(jt=Wr*Wr,ue):Math.sqrt(jt)},ue.gravity=function(Wr){return arguments.length?(Jt=+Wr,ue):Jt},ue.theta=function(Wr){return arguments.length?(Tr=Wr*Wr,ue):Math.sqrt(Tr)},ue.alpha=function(Wr){return arguments.length?(Wr=+Wr,We?Wr>0?We=Wr:(Ee.c=null,Ee.t=NaN,Ee=null,be.end({type:"end",alpha:We=0})):Wr>0&&(be.start({type:"start",alpha:We=Wr}),Ee=_n(ue.tick)),ue):We},ue.start=function(){var Wr,Nn=Kr.length,ra=ln.length,ba=Oe[0],oa=Oe[1],Ea,ua;for(Wr=0;Wr<Nn;++Wr)(ua=Kr[Wr]).index=Wr,ua.weight=0;for(Wr=0;Wr<ra;++Wr)ua=ln[Wr],typeof ua.source=="number"&&(ua.source=Kr[ua.source]),typeof ua.target=="number"&&(ua.target=Kr[ua.target]),++ua.source.weight,++ua.target.weight;for(Wr=0;Wr<Nn;++Wr)ua=Kr[Wr],isNaN(ua.x)&&(ua.x=Ua("x",ba)),isNaN(ua.y)&&(ua.y=Ua("y",oa)),isNaN(ua.px)&&(ua.px=ua.x),isNaN(ua.py)&&(ua.py=ua.y);if(kr=[],typeof ht=="function")for(Wr=0;Wr<ra;++Wr)kr[Wr]=+ht.call(this,ln[Wr],Wr);else for(Wr=0;Wr<ra;++Wr)kr[Wr]=ht;if(zr=[],typeof Et=="function")for(Wr=0;Wr<ra;++Wr)zr[Wr]=+Et.call(this,ln[Wr],Wr);else for(Wr=0;Wr<ra;++Wr)zr[Wr]=Et;if(Gr=[],typeof Vt=="function")for(Wr=0;Wr<Nn;++Wr)Gr[Wr]=+Vt.call(this,Kr[Wr],Wr);else for(Wr=0;Wr<Nn;++Wr)Gr[Wr]=Vt;function Ua(Da,Ja){if(!Ea){for(Ea=new Array(Nn),Ii=0;Ii<Nn;++Ii)Ea[Ii]=[];for(Ii=0;Ii<ra;++Ii){var yi=ln[Ii];Ea[yi.source.index].push(yi.target),Ea[yi.target.index].push(yi.source)}}for(var fo=Ea[Wr],Ii=-1,fa=fo.length,ai;++Ii<fa;)if(!isNaN(ai=fo[Ii][Da]))return ai;return Math.random()*Ja}return ue.resume()},ue.resume=function(){return ue.alpha(.1)},ue.stop=function(){return ue.alpha(0)},ue.drag=function(){if(ze||(ze=w.behavior.drag().origin(D).on("dragstart.force",jl).on("drag.force",on).on("dragend.force",ps)),!arguments.length)return ze;this.on("mouseover.force",So).on("mouseout.force",Il).call(ze)};function on(Wr){Wr.px=w.event.x,Wr.py=w.event.y,ue.resume()}return w.rebind(ue,be,"on")};function jl(ue){ue.fixed|=2}function ps(ue){ue.fixed&=-7}function So(ue){ue.fixed|=4,ue.px=ue.x,ue.py=ue.y}function Il(ue){ue.fixed&=-5}function ws(ue,be,Ee){var Oe=0,ze=0;if(ue.charge=0,!ue.leaf)for(var We=ue.nodes,xt=We.length,ht=-1,Et;++ht<xt;)Et=We[ht],Et!=null&&(ws(Et,be,Ee),ue.charge+=Et.charge,Oe+=Et.charge*Et.cx,ze+=Et.charge*Et.cy);if(ue.point){ue.leaf||(ue.point.x+=Math.random()-.5,ue.point.y+=Math.random()-.5);var Vt=be*Ee[ue.point.index];ue.charge+=ue.pointCharge=Vt,Oe+=Vt*ue.point.x,ze+=Vt*ue.point.y}ue.cx=Oe/ue.charge,ue.cy=ze/ue.charge}var Ts=20,oo=1,dl=1/0;w.layout.hierarchy=function(){var ue=zl,be=ml,Ee=ol;function Oe(ze){var We=[ze],xt=[],ht;for(ze.depth=0;(ht=We.pop())!=null;)if(xt.push(ht),(Vt=be.call(Oe,ht,ht.depth))&&(Et=Vt.length)){for(var Et,Vt,jt;--Et>=0;)We.push(jt=Vt[Et]),jt.parent=ht,jt.depth=ht.depth+1;Ee&&(ht.value=0),ht.children=Vt}else Ee&&(ht.value=+Ee.call(Oe,ht,ht.depth)||0),delete ht.children;return ds(ze,function(Jt){var Tr,Kr;ue&&(Tr=Jt.children)&&Tr.sort(ue),Ee&&(Kr=Jt.parent)&&(Kr.value+=Jt.value)}),xt}return Oe.sort=function(ze){return arguments.length?(ue=ze,Oe):ue},Oe.children=function(ze){return arguments.length?(be=ze,Oe):be},Oe.value=function(ze){return arguments.length?(Ee=ze,Oe):Ee},Oe.revalue=function(ze){return Ee&&(Ws(ze,function(We){We.children&&(We.value=0)}),ds(ze,function(We){var xt;We.children||(We.value=+Ee.call(Oe,We,We.depth)||0),(xt=We.parent)&&(xt.value+=We.value)})),ze},Oe};function yl(ue,be){return w.rebind(ue,be,"sort","children","value"),ue.nodes=ue,ue.links=xl,ue}function Ws(ue,be){for(var Ee=[ue];(ue=Ee.pop())!=null;)if(be(ue),(ze=ue.children)&&(Oe=ze.length))for(var Oe,ze;--Oe>=0;)Ee.push(ze[Oe])}function ds(ue,be){for(var Ee=[ue],Oe=[];(ue=Ee.pop())!=null;)if(Oe.push(ue),(xt=ue.children)&&(We=xt.length))for(var ze=-1,We,xt;++ze<We;)Ee.push(xt[ze]);for(;(ue=Oe.pop())!=null;)be(ue)}function ml(ue){return ue.children}function ol(ue){return ue.value}function zl(ue,be){return be.value-ue.value}function xl(ue){return w.merge(ue.map(function(be){return(be.children||[]).map(function(Ee){return{source:be,target:Ee}})}))}w.layout.partition=function(){var ue=w.layout.hierarchy(),be=[1,1];function Ee(We,xt,ht,Et){var Vt=We.children;if(We.x=xt,We.y=We.depth*Et,We.dx=ht,We.dy=Et,Vt&&(Jt=Vt.length)){var jt=-1,Jt,Tr,Kr;for(ht=We.value?ht/We.value:0;++jt<Jt;)Ee(Tr=Vt[jt],xt,Kr=Tr.value*ht,Et),xt+=Kr}}function Oe(We){var xt=We.children,ht=0;if(xt&&(Vt=xt.length))for(var Et=-1,Vt;++Et<Vt;)ht=Math.max(ht,Oe(xt[Et]));return 1+ht}function ze(We,xt){var ht=ue.call(this,We,xt);return Ee(ht[0],0,be[0],be[1]/Oe(ht[0])),ht}return ze.size=function(We){return arguments.length?(be=We,ze):be},yl(ze,ue)},w.layout.pie=function(){var ue=Number,be=Xs,Ee=0,Oe=Ge,ze=0;function We(xt){var ht=xt.length,Et=xt.map(function(nn,on){return+ue.call(We,nn,on)}),Vt=+(typeof Ee=="function"?Ee.apply(this,arguments):Ee),jt=(typeof Oe=="function"?Oe.apply(this,arguments):Oe)-Vt,Jt=Math.min(Math.abs(jt)/ht,+(typeof ze=="function"?ze.apply(this,arguments):ze)),Tr=Jt*(jt<0?-1:1),Kr=w.sum(Et),ln=Kr?(jt-ht*Tr)/Kr:0,kr=w.range(ht),zr=[],Gr;return be!=null&&kr.sort(be===Xs?function(nn,on){return Et[on]-Et[nn]}:function(nn,on){return be(xt[nn],xt[on])}),kr.forEach(function(nn){zr[nn]={data:xt[nn],value:Gr=Et[nn],startAngle:Vt,endAngle:Vt+=Gr*ln+Tr,padAngle:Jt}}),zr}return We.value=function(xt){return arguments.length?(ue=xt,We):ue},We.sort=function(xt){return arguments.length?(be=xt,We):be},We.startAngle=function(xt){return arguments.length?(Ee=xt,We):Ee},We.endAngle=function(xt){return arguments.length?(Oe=xt,We):Oe},We.padAngle=function(xt){return arguments.length?(ze=xt,We):ze},We};var Xs={};w.layout.stack=function(){var ue=D,be=bl,Ee=Zs,Oe=Gu,ze=Cu,We=ts;function xt(ht,Et){if(!(ln=ht.length))return ht;var Vt=ht.map(function(nn,on){return ue.call(xt,nn,on)}),jt=Vt.map(function(nn){return nn.map(function(on,Wr){return[ze.call(xt,on,Wr),We.call(xt,on,Wr)]})}),Jt=be.call(xt,jt,Et);Vt=w.permute(Vt,Jt),jt=w.permute(jt,Jt);var Tr=Ee.call(xt,jt,Et),Kr=Vt[0].length,ln,kr,zr,Gr;for(zr=0;zr<Kr;++zr)for(Oe.call(xt,Vt[0][zr],Gr=Tr[zr],jt[0][zr][1]),kr=1;kr<ln;++kr)Oe.call(xt,Vt[kr][zr],Gr+=jt[kr-1][zr][1],jt[kr][zr][1]);return ht}return xt.values=function(ht){return arguments.length?(ue=ht,xt):ue},xt.order=function(ht){return arguments.length?(be=typeof ht=="function"?ht:Kl.get(ht)||bl,xt):be},xt.offset=function(ht){return arguments.length?(Ee=typeof ht=="function"?ht:sl.get(ht)||Zs,xt):Ee},xt.x=function(ht){return arguments.length?(ze=ht,xt):ze},xt.y=function(ht){return arguments.length?(We=ht,xt):We},xt.out=function(ht){return arguments.length?(Oe=ht,xt):Oe},xt};function Cu(ue){return ue.x}function ts(ue){return ue.y}function Gu(ue,be,Ee){ue.y0=be,ue.y=Ee}var Kl=w.map({"inside-out":function(ue){var be=ue.length,Ee,Oe,ze=ue.map(_l),We=ue.map(uu),xt=w.range(be).sort(function(Jt,Tr){return ze[Jt]-ze[Tr]}),ht=0,Et=0,Vt=[],jt=[];for(Ee=0;Ee<be;++Ee)Oe=xt[Ee],ht<Et?(ht+=We[Oe],Vt.push(Oe)):(Et+=We[Oe],jt.push(Oe));return jt.reverse().concat(Vt)},reverse:function(ue){return w.range(ue.length).reverse()},default:bl}),sl=w.map({silhouette:function(ue){var be=ue.length,Ee=ue[0].length,Oe=[],ze=0,We,xt,ht,Et=[];for(xt=0;xt<Ee;++xt){for(We=0,ht=0;We<be;We++)ht+=ue[We][xt][1];ht>ze&&(ze=ht),Oe.push(ht)}for(xt=0;xt<Ee;++xt)Et[xt]=(ze-Oe[xt])/2;return Et},wiggle:function(ue){var be=ue.length,Ee=ue[0],Oe=Ee.length,ze,We,xt,ht,Et,Vt,jt,Jt,Tr,Kr=[];for(Kr[0]=Jt=Tr=0,We=1;We<Oe;++We){for(ze=0,ht=0;ze<be;++ze)ht+=ue[ze][We][1];for(ze=0,Et=0,jt=Ee[We][0]-Ee[We-1][0];ze<be;++ze){for(xt=0,Vt=(ue[ze][We][1]-ue[ze][We-1][1])/(2*jt);xt<ze;++xt)Vt+=(ue[xt][We][1]-ue[xt][We-1][1])/jt;Et+=Vt*ue[ze][We][1]}Kr[We]=Jt-=ht?Et/ht*jt:0,Jt<Tr&&(Tr=Jt)}for(We=0;We<Oe;++We)Kr[We]-=Tr;return Kr},expand:function(ue){var be=ue.length,Ee=ue[0].length,Oe=1/be,ze,We,xt,ht=[];for(We=0;We<Ee;++We){for(ze=0,xt=0;ze<be;ze++)xt+=ue[ze][We][1];if(xt)for(ze=0;ze<be;ze++)ue[ze][We][1]/=xt;else for(ze=0;ze<be;ze++)ue[ze][We][1]=Oe}for(We=0;We<Ee;++We)ht[We]=0;return ht},zero:Zs});function bl(ue){return w.range(ue.length)}function Zs(ue){for(var be=-1,Ee=ue[0].length,Oe=[];++be<Ee;)Oe[be]=0;return Oe}function _l(ue){for(var be=1,Ee=0,Oe=ue[0][1],ze,We=ue.length;be<We;++be)(ze=ue[be][1])>Oe&&(Ee=be,Oe=ze);return Ee}function uu(ue){return ue.reduce(fu,0)}function fu(ue,be){return ue+be[1]}w.layout.histogram=function(){var ue=!0,be=Number,Ee=ll,Oe=Yu;function ze(We,Tr){for(var ht=[],Et=We.map(be,this),Vt=Ee.call(this,Et,Tr),jt=Oe.call(this,Vt,Et,Tr),Jt,Tr=-1,Kr=Et.length,ln=jt.length-1,kr=ue?1:1/Kr,zr;++Tr<ln;)Jt=ht[Tr]=[],Jt.dx=jt[Tr+1]-(Jt.x=jt[Tr]),Jt.y=0;if(ln>0)for(Tr=-1;++Tr<Kr;)zr=Et[Tr],zr>=Vt[0]&&zr<=Vt[1]&&(Jt=ht[w.bisect(jt,zr,1,ln)-1],Jt.y+=kr,Jt.push(We[Tr]));return ht}return ze.value=function(We){return arguments.length?(be=We,ze):be},ze.range=function(We){return arguments.length?(Ee=et(We),ze):Ee},ze.bins=function(We){return arguments.length?(Oe=typeof We=="number"?function(xt){return Ri(xt,We)}:et(We),ze):Oe},ze.frequency=function(We){return arguments.length?(ue=!!We,ze):ue},ze};function Yu(ue,be){return Ri(ue,Math.ceil(Math.log(be.length)/Math.LN2+1))}function Ri(ue,be){for(var Ee=-1,Oe=+ue[0],ze=(ue[1]-Oe)/be,We=[];++Ee<=be;)We[Ee]=ze*Ee+Oe;return We}function ll(ue){return[w.min(ue),w.max(ue)]}w.layout.pack=function(){var ue=w.layout.hierarchy().sort(js),be=0,Ee=[1,1],Oe;function ze(We,xt){var ht=ue.call(this,We,xt),Et=ht[0],Vt=Ee[0],jt=Ee[1],Jt=Oe==null?Math.sqrt:typeof Oe=="function"?Oe:function(){return Oe};if(Et.x=Et.y=0,ds(Et,function(Kr){Kr.r=+Jt(Kr.value)}),ds(Et,so),be){var Tr=be*(Oe?1:Math.max(2*Et.r/Vt,2*Et.r/jt))/2;ds(Et,function(Kr){Kr.r+=Tr}),ds(Et,so),ds(Et,function(Kr){Kr.r-=Tr})}return Is(Et,Vt/2,jt/2,Oe?1:1/Math.max(2*Et.r/Vt,2*Et.r/jt)),ht}return ze.size=function(We){return arguments.length?(Ee=We,ze):Ee},ze.radius=function(We){return arguments.length?(Oe=We==null||typeof We=="function"?We:+We,ze):Oe},ze.padding=function(We){return arguments.length?(be=+We,ze):be},yl(ze,ue)};function js(ue,be){return ue.value-be.value}function Jo(ue,be){var Ee=ue._pack_next;ue._pack_next=be,be._pack_prev=ue,be._pack_next=Ee,Ee._pack_prev=be}function rs(ue,be){ue._pack_next=be,be._pack_prev=ue}function wl(ue,be){var Ee=be.x-ue.x,Oe=be.y-ue.y,ze=ue.r+be.r;return .999*ze*ze>Ee*Ee+Oe*Oe}function so(ue){if(!(be=ue.children)||!(Tr=be.length))return;var be,Ee=1/0,Oe=-1/0,ze=1/0,We=-1/0,xt,ht,Et,Vt,jt,Jt,Tr;function Kr(Wr){Ee=Math.min(Wr.x-Wr.r,Ee),Oe=Math.max(Wr.x+Wr.r,Oe),ze=Math.min(Wr.y-Wr.r,ze),We=Math.max(Wr.y+Wr.r,We)}if(be.forEach(cu),xt=be[0],xt.x=-xt.r,xt.y=0,Kr(xt),Tr>1&&(ht=be[1],ht.x=ht.r,ht.y=0,Kr(ht),Tr>2))for(Et=be[2],zs(xt,ht,Et),Kr(Et),Jo(xt,Et),xt._pack_prev=Et,Jo(Et,ht),ht=xt._pack_next,Vt=3;Vt<Tr;Vt++){zs(xt,ht,Et=be[Vt]);var ln=0,kr=1,zr=1;for(jt=ht._pack_next;jt!==ht;jt=jt._pack_next,kr++)if(wl(jt,Et)){ln=1;break}if(ln==1)for(Jt=xt._pack_prev;Jt!==jt._pack_prev&&!wl(Jt,Et);Jt=Jt._pack_prev,zr++);ln?(kr<zr||kr==zr&&ht.r<xt.r?rs(xt,ht=jt):rs(xt=Jt,ht),Vt--):(Jo(xt,Et),ht=Et,Kr(Et))}var Gr=(Ee+Oe)/2,nn=(ze+We)/2,on=0;for(Vt=0;Vt<Tr;Vt++)Et=be[Vt],Et.x-=Gr,Et.y-=nn,on=Math.max(on,Et.r+Math.sqrt(Et.x*Et.x+Et.y*Et.y));ue.r=on,be.forEach(ns)}function cu(ue){ue._pack_next=ue._pack_prev=ue}function ns(ue){delete ue._pack_next,delete ue._pack_prev}function Is(ue,be,Ee,Oe){var ze=ue.children;if(ue.x=be+=Oe*ue.x,ue.y=Ee+=Oe*ue.y,ue.r*=Oe,ze)for(var We=-1,xt=ze.length;++We<xt;)Is(ze[We],be,Ee,Oe)}function zs(ue,be,Ee){var Oe=ue.r+Ee.r,ze=be.x-ue.x,We=be.y-ue.y;if(Oe&&(ze||We)){var xt=be.r+Ee.r,ht=ze*ze+We*We;xt*=xt,Oe*=Oe;var Et=.5+(Oe-xt)/(2*ht),Vt=Math.sqrt(Math.max(0,2*xt*(Oe+ht)-(Oe-=ht)*Oe-xt*xt))/(2*ht);Ee.x=ue.x+Et*ze+Vt*We,Ee.y=ue.y+Et*We-Vt*ze}else Ee.x=ue.x+Oe,Ee.y=ue.y}w.layout.tree=function(){var ue=w.layout.hierarchy().sort(null).value(null),be=As,Ee=[1,1],Oe=null;function ze(jt,Jt){var Tr=ue.call(this,jt,Jt),Kr=Tr[0],ln=We(Kr);if(ds(ln,xt),ln.parent.m=-ln.z,Ws(ln,ht),Oe)Ws(Kr,Vt);else{var kr=Kr,zr=Kr,Gr=Kr;Ws(Kr,function(Nn){Nn.x<kr.x&&(kr=Nn),Nn.x>zr.x&&(zr=Nn),Nn.depth>Gr.depth&&(Gr=Nn)});var nn=be(kr,zr)/2-kr.x,on=Ee[0]/(zr.x+be(zr,kr)/2+nn),Wr=Ee[1]/(Gr.depth||1);Ws(Kr,function(Nn){Nn.x=(Nn.x+nn)*on,Nn.y=Nn.depth*Wr})}return Tr}function We(jt){for(var Jt={A:null,children:[jt]},Tr=[Jt],Kr;(Kr=Tr.pop())!=null;)for(var ln=Kr.children,kr,zr=0,Gr=ln.length;zr<Gr;++zr)Tr.push((ln[zr]=kr={_:ln[zr],parent:Kr,children:(kr=ln[zr].children)&&kr.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:zr}).a=kr);return Jt.children[0]}function xt(jt){var Jt=jt.children,Tr=jt.parent.children,Kr=jt.i?Tr[jt.i-1]:null;if(Jt.length){is(jt);var ln=(Jt[0].z+Jt[Jt.length-1].z)/2;Kr?(jt.z=Kr.z+be(jt._,Kr._),jt.m=jt.z-ln):jt.z=ln}else Kr&&(jt.z=Kr.z+be(jt._,Kr._));jt.parent.A=Et(jt,Kr,jt.parent.A||Tr[0])}function ht(jt){jt._.x=jt.z+jt.parent.m,jt.m+=jt.parent.m}function Et(jt,Jt,Tr){if(Jt){for(var Kr=jt,ln=jt,kr=Jt,zr=Kr.parent.children[0],Gr=Kr.m,nn=ln.m,on=kr.m,Wr=zr.m,Nn;kr=Vi(kr),Kr=as(Kr),kr&&Kr;)zr=as(zr),ln=Vi(ln),ln.a=jt,Nn=kr.z+on-Kr.z-Gr+be(kr._,Kr._),Nn>0&&(ko(hu(kr,jt,Tr),jt,Nn),Gr+=Nn,nn+=Nn),on+=kr.m,Gr+=Kr.m,Wr+=zr.m,nn+=ln.m;kr&&!Vi(ln)&&(ln.t=kr,ln.m+=on-nn),Kr&&!as(zr)&&(zr.t=Kr,zr.m+=Gr-Wr,Tr=jt)}return Tr}function Vt(jt){jt.x*=Ee[0],jt.y=jt.depth*Ee[1]}return ze.separation=function(jt){return arguments.length?(be=jt,ze):be},ze.size=function(jt){return arguments.length?(Oe=(Ee=jt)==null?Vt:null,ze):Oe?null:Ee},ze.nodeSize=function(jt){return arguments.length?(Oe=(Ee=jt)==null?null:Vt,ze):Oe?Ee:null},yl(ze,ue)};function As(ue,be){return ue.parent==be.parent?1:2}function as(ue){var be=ue.children;return be.length?be[0]:ue.t}function Vi(ue){var be=ue.children,Ee;return(Ee=be.length)?be[Ee-1]:ue.t}function ko(ue,be,Ee){var Oe=Ee/(be.i-ue.i);be.c-=Oe,be.s+=Ee,ue.c+=Oe,be.z+=Ee,be.m+=Ee}function is(ue){for(var be=0,Ee=0,Oe=ue.children,ze=Oe.length,We;--ze>=0;)We=Oe[ze],We.z+=be,We.m+=be,be+=We.s+(Ee+=We.c)}function hu(ue,be,Ee){return ue.a.parent===be.parent?ue.a:Ee}w.layout.cluster=function(){var ue=w.layout.hierarchy().sort(null).value(null),be=As,Ee=[1,1],Oe=!1;function ze(We,xt){var ht=ue.call(this,We,xt),Et=ht[0],Vt,jt=0;ds(Et,function(kr){var zr=kr.children;zr&&zr.length?(kr.x=vu(zr),kr.y=Fl(zr)):(kr.x=Vt?jt+=be(kr,Vt):0,kr.y=0,Vt=kr)});var Jt=yt(Et),Tr=It(Et),Kr=Jt.x-be(Jt,Tr)/2,ln=Tr.x+be(Tr,Jt)/2;return ds(Et,Oe?function(kr){kr.x=(kr.x-Et.x)*Ee[0],kr.y=(Et.y-kr.y)*Ee[1]}:function(kr){kr.x=(kr.x-Kr)/(ln-Kr)*Ee[0],kr.y=(1-(Et.y?kr.y/Et.y:1))*Ee[1]}),ht}return ze.separation=function(We){return arguments.length?(be=We,ze):be},ze.size=function(We){return arguments.length?(Oe=(Ee=We)==null,ze):Oe?null:Ee},ze.nodeSize=function(We){return arguments.length?(Oe=(Ee=We)!=null,ze):Oe?Ee:null},yl(ze,ue)};function Fl(ue){return 1+w.max(ue,function(be){return be.y})}function vu(ue){return ue.reduce(function(be,Ee){return be+Ee.x},0)/ue.length}function yt(ue){var be=ue.children;return be&&be.length?yt(be[0]):ue}function It(ue){var be=ue.children,Ee;return be&&(Ee=be.length)?It(be[Ee-1]):ue}w.layout.treemap=function(){var ue=w.layout.hierarchy(),be=Math.round,Ee=[1,1],Oe=null,ze=lr,We=!1,xt,ht="squarify",Et=.5*(1+Math.sqrt(5));function Vt(kr,zr){for(var Gr=-1,nn=kr.length,on,Wr;++Gr<nn;)Wr=(on=kr[Gr]).value*(zr<0?0:zr),on.area=isNaN(Wr)||Wr<=0?0:Wr}function jt(kr){var zr=kr.children;if(zr&&zr.length){var Gr=ze(kr),nn=[],on=zr.slice(),Wr,Nn=1/0,ra,ba=ht==="slice"?Gr.dx:ht==="dice"?Gr.dy:ht==="slice-dice"?kr.depth&1?Gr.dy:Gr.dx:Math.min(Gr.dx,Gr.dy),oa;for(Vt(on,Gr.dx*Gr.dy/kr.value),nn.area=0;(oa=on.length)>0;)nn.push(Wr=on[oa-1]),nn.area+=Wr.area,ht!=="squarify"||(ra=Tr(nn,ba))<=Nn?(on.pop(),Nn=ra):(nn.area-=nn.pop().area,Kr(nn,ba,Gr,!1),ba=Math.min(Gr.dx,Gr.dy),nn.length=nn.area=0,Nn=1/0);nn.length&&(Kr(nn,ba,Gr,!0),nn.length=nn.area=0),zr.forEach(jt)}}function Jt(kr){var zr=kr.children;if(zr&&zr.length){var Gr=ze(kr),nn=zr.slice(),on,Wr=[];for(Vt(nn,Gr.dx*Gr.dy/kr.value),Wr.area=0;on=nn.pop();)Wr.push(on),Wr.area+=on.area,on.z!=null&&(Kr(Wr,on.z?Gr.dx:Gr.dy,Gr,!nn.length),Wr.length=Wr.area=0);zr.forEach(Jt)}}function Tr(kr,zr){for(var Gr=kr.area,nn,on=0,Wr=1/0,Nn=-1,ra=kr.length;++Nn<ra;)!(nn=kr[Nn].area)||(nn<Wr&&(Wr=nn),nn>on&&(on=nn));return Gr*=Gr,zr*=zr,Gr?Math.max(zr*on*Et/Gr,Gr/(zr*Wr*Et)):1/0}function Kr(kr,zr,Gr,nn){var on=-1,Wr=kr.length,Nn=Gr.x,ra=Gr.y,ba=zr?be(kr.area/zr):0,oa;if(zr==Gr.dx){for((nn||ba>Gr.dy)&&(ba=Gr.dy);++on<Wr;)oa=kr[on],oa.x=Nn,oa.y=ra,oa.dy=ba,Nn+=oa.dx=Math.min(Gr.x+Gr.dx-Nn,ba?be(oa.area/ba):0);oa.z=!0,oa.dx+=Gr.x+Gr.dx-Nn,Gr.y+=ba,Gr.dy-=ba}else{for((nn||ba>Gr.dx)&&(ba=Gr.dx);++on<Wr;)oa=kr[on],oa.x=Nn,oa.y=ra,oa.dx=ba,ra+=oa.dy=Math.min(Gr.y+Gr.dy-ra,ba?be(oa.area/ba):0);oa.z=!1,oa.dy+=Gr.y+Gr.dy-ra,Gr.x+=ba,Gr.dx-=ba}}function ln(kr){var zr=xt||ue(kr),Gr=zr[0];return Gr.x=Gr.y=0,Gr.value?(Gr.dx=Ee[0],Gr.dy=Ee[1]):Gr.dx=Gr.dy=0,xt&&ue.revalue(Gr),Vt([Gr],Gr.dx*Gr.dy/Gr.value),(xt?Jt:jt)(Gr),We&&(xt=zr),zr}return ln.size=function(kr){return arguments.length?(Ee=kr,ln):Ee},ln.padding=function(kr){if(!arguments.length)return Oe;function zr(on){var Wr=kr.call(ln,on,on.depth);return Wr==null?lr(on):tr(on,typeof Wr=="number"?[Wr,Wr,Wr,Wr]:Wr)}function Gr(on){return tr(on,kr)}var nn;return ze=(Oe=kr)==null?lr:(nn=typeof kr)=="function"?zr:(nn==="number"&&(kr=[kr,kr,kr,kr]),Gr),ln},ln.round=function(kr){return arguments.length?(be=kr?Math.round:Number,ln):be!=Number},ln.sticky=function(kr){return arguments.length?(We=kr,xt=null,ln):We},ln.ratio=function(kr){return arguments.length?(Et=kr,ln):Et},ln.mode=function(kr){return arguments.length?(ht=kr+"",ln):ht},yl(ln,ue)};function lr(ue){return{x:ue.x,y:ue.y,dx:ue.dx,dy:ue.dy}}function tr(ue,be){var Ee=ue.x+be[3],Oe=ue.y+be[0],ze=ue.dx-be[1]-be[3],We=ue.dy-be[0]-be[2];return ze<0&&(Ee+=ze/2,ze=0),We<0&&(Oe+=We/2,We=0),{x:Ee,y:Oe,dx:ze,dy:We}}w.random={normal:function(ue,be){var Ee=arguments.length;return Ee<2&&(be=1),Ee<1&&(ue=0),function(){var Oe,ze,We;do Oe=Math.random()*2-1,ze=Math.random()*2-1,We=Oe*Oe+ze*ze;while(!We||We>1);return ue+be*Oe*Math.sqrt(-2*Math.log(We)/We)}},logNormal:function(){var ue=w.random.normal.apply(w,arguments);return function(){return Math.exp(ue())}},bates:function(ue){var be=w.random.irwinHall(ue);return function(){return be()/ue}},irwinHall:function(ue){return function(){for(var be=0,Ee=0;Ee<ue;Ee++)be+=Math.random();return be}}},w.scale={};function Lr(ue){var be=ue[0],Ee=ue[ue.length-1];return be<Ee?[be,Ee]:[Ee,be]}function tn(ue){return ue.rangeExtent?ue.rangeExtent():Lr(ue.range())}function pn(ue,be,Ee,Oe){var ze=Ee(ue[0],ue[1]),We=Oe(be[0],be[1]);return function(xt){return We(ze(xt))}}function wn(ue,be){var Ee=0,Oe=ue.length-1,ze=ue[Ee],We=ue[Oe],xt;return We<ze&&(xt=Ee,Ee=Oe,Oe=xt,xt=ze,ze=We,We=xt),ue[Ee]=be.floor(ze),ue[Oe]=be.ceil(We),ue}function Cn(ue){return ue?{floor:function(be){return Math.floor(be/ue)*ue},ceil:function(be){return Math.ceil(be/ue)*ue}}:On}var On={floor:D,ceil:D};function gn(ue,be,Ee,Oe){var ze=[],We=[],xt=0,ht=Math.min(ue.length,be.length)-1;for(ue[ht]<ue[0]&&(ue=ue.slice().reverse(),be=be.slice().reverse());++xt<=ht;)ze.push(Ee(ue[xt-1],ue[xt])),We.push(Oe(be[xt-1],be[xt]));return function(Et){var Vt=w.bisect(ue,Et,1,ht)-1;return We[Vt](ze[Vt](Et))}}w.scale.linear=function(){return In([0,1],[0,1],no,!1)};function In(ue,be,Ee,Oe){var ze,We;function xt(){var Et=Math.min(ue.length,be.length)>2?gn:pn,Vt=Oe?lu:Eu;return ze=Et(ue,be,Vt,Ee),We=Et(be,ue,Vt,no),ht}function ht(Et){return ze(Et)}return ht.invert=function(Et){return We(Et)},ht.domain=function(Et){return arguments.length?(ue=Et.map(Number),xt()):ue},ht.range=function(Et){return arguments.length?(be=Et,xt()):be},ht.rangeRound=function(Et){return ht.range(Et).interpolate(iu)},ht.clamp=function(Et){return arguments.length?(Oe=Et,xt()):Oe},ht.interpolate=function(Et){return arguments.length?(Ee=Et,xt()):Ee},ht.ticks=function(Et){return Fa(ue,Et)},ht.tickFormat=function(Et,Vt){return d3_scale_linearTickFormat(ue,Et,Vt)},ht.nice=function(Et){return Un(ue,Et),xt()},ht.copy=function(){return In(ue,be,Ee,Oe)},xt()}function Pn(ue,be){return w.rebind(ue,be,"range","rangeRound","interpolate","clamp")}function Un(ue,be){return wn(ue,Cn($n(ue,be)[2])),wn(ue,Cn($n(ue,be)[2])),ue}function $n(ue,be){be==null&&(be=10);var Ee=Lr(ue),Oe=Ee[1]-Ee[0],ze=Math.pow(10,Math.floor(Math.log(Oe/be)/Math.LN10)),We=be/Oe*ze;return We<=.15?ze*=10:We<=.35?ze*=5:We<=.75&&(ze*=2),Ee[0]=Math.ceil(Ee[0]/ze)*ze,Ee[1]=Math.floor(Ee[1]/ze)*ze+ze*.5,Ee[2]=ze,Ee}function Fa(ue,be){return w.range.apply(w,$n(ue,be))}w.scale.log=function(){return Ca(w.scale.linear().domain([0,1]),10,!0,[1,10])};function Ca(ue,be,Ee,Oe){function ze(ht){return(Ee?Math.log(ht<0?0:ht):-Math.log(ht>0?0:-ht))/Math.log(be)}function We(ht){return Ee?Math.pow(be,ht):-Math.pow(be,-ht)}function xt(ht){return ue(ze(ht))}return xt.invert=function(ht){return We(ue.invert(ht))},xt.domain=function(ht){return arguments.length?(Ee=ht[0]>=0,ue.domain((Oe=ht.map(Number)).map(ze)),xt):Oe},xt.base=function(ht){return arguments.length?(be=+ht,ue.domain(Oe.map(ze)),xt):be},xt.nice=function(){var ht=wn(Oe.map(ze),Ee?Math:Ba);return ue.domain(ht),Oe=ht.map(We),xt},xt.ticks=function(){var ht=Lr(Oe),Et=[],Vt=ht[0],jt=ht[1],Jt=Math.floor(ze(Vt)),Tr=Math.ceil(ze(jt)),Kr=be%1?2:be;if(isFinite(Tr-Jt)){if(Ee){for(;Jt<Tr;Jt++)for(var ln=1;ln<Kr;ln++)Et.push(We(Jt)*ln);Et.push(We(Jt))}else for(Et.push(We(Jt));Jt++<Tr;)for(var ln=Kr-1;ln>0;ln--)Et.push(We(Jt)*ln);for(Jt=0;Et[Jt]<Vt;Jt++);for(Tr=Et.length;Et[Tr-1]>jt;Tr--);Et=Et.slice(Jt,Tr)}return Et},xt.copy=function(){return Ca(ue.copy(),be,Ee,Oe)},Pn(xt,ue)}var Ba={floor:function(ue){return-Math.ceil(-ue)},ceil:function(ue){return-Math.floor(-ue)}};w.scale.pow=function(){return Oa(w.scale.linear(),1,[0,1])};function Oa(ue,be,Ee){var Oe=Jn(be),ze=Jn(1/be);function We(xt){return ue(Oe(xt))}return We.invert=function(xt){return ze(ue.invert(xt))},We.domain=function(xt){return arguments.length?(ue.domain((Ee=xt.map(Number)).map(Oe)),We):Ee},We.ticks=function(xt){return Fa(Ee,xt)},We.tickFormat=function(xt,ht){return d3_scale_linearTickFormat(Ee,xt,ht)},We.nice=function(xt){return We.domain(Un(Ee,xt))},We.exponent=function(xt){return arguments.length?(Oe=Jn(be=xt),ze=Jn(1/be),ue.domain(Ee.map(Oe)),We):be},We.copy=function(){return Oa(ue.copy(),be,Ee)},Pn(We,ue)}function Jn(ue){return function(be){return be<0?-Math.pow(-be,ue):Math.pow(be,ue)}}w.scale.sqrt=function(){return w.scale.pow().exponent(.5)},w.scale.ordinal=function(){return ha([],{t:"range",a:[[]]})};function ha(ue,be){var Ee,Oe,ze;function We(ht){return Oe[((Ee.get(ht)||(be.t==="range"?Ee.set(ht,ue.push(ht)):NaN))-1)%Oe.length]}function xt(ht,Et){return w.range(ue.length).map(function(Vt){return ht+Et*Vt})}return We.domain=function(ht){if(!arguments.length)return ue;ue=[],Ee=new A;for(var Et=-1,Vt=ht.length,jt;++Et<Vt;)Ee.has(jt=ht[Et])||Ee.set(jt,ue.push(jt));return We[be.t].apply(We,be.a)},We.range=function(ht){return arguments.length?(Oe=ht,ze=0,be={t:"range",a:arguments},We):Oe},We.rangePoints=function(ht,Et){arguments.length<2&&(Et=0);var Vt=ht[0],jt=ht[1],Jt=ue.length<2?(Vt=(Vt+jt)/2,0):(jt-Vt)/(ue.length-1+Et);return Oe=xt(Vt+Jt*Et/2,Jt),ze=0,be={t:"rangePoints",a:arguments},We},We.rangeRoundPoints=function(ht,Et){arguments.length<2&&(Et=0);var Vt=ht[0],jt=ht[1],Jt=ue.length<2?(Vt=jt=Math.round((Vt+jt)/2),0):(jt-Vt)/(ue.length-1+Et)|0;return Oe=xt(Vt+Math.round(Jt*Et/2+(jt-Vt-(ue.length-1+Et)*Jt)/2),Jt),ze=0,be={t:"rangeRoundPoints",a:arguments},We},We.rangeBands=function(ht,Et,Vt){arguments.length<2&&(Et=0),arguments.length<3&&(Vt=Et);var jt=ht[1]<ht[0],Jt=ht[jt-0],Tr=ht[1-jt],Kr=(Tr-Jt)/(ue.length-Et+2*Vt);return Oe=xt(Jt+Kr*Vt,Kr),jt&&Oe.reverse(),ze=Kr*(1-Et),be={t:"rangeBands",a:arguments},We},We.rangeRoundBands=function(ht,Et,Vt){arguments.length<2&&(Et=0),arguments.length<3&&(Vt=Et);var jt=ht[1]<ht[0],Jt=ht[jt-0],Tr=ht[1-jt],Kr=Math.floor((Tr-Jt)/(ue.length-Et+2*Vt));return Oe=xt(Jt+Math.round((Tr-Jt-(ue.length-Et)*Kr)/2),Kr),jt&&Oe.reverse(),ze=Math.round(Kr*(1-Et)),be={t:"rangeRoundBands",a:arguments},We},We.rangeBand=function(){return ze},We.rangeExtent=function(){return Lr(be.a[0])},We.copy=function(){return ha(ue,be)},We.domain(ue)}w.scale.category10=function(){return w.scale.ordinal().range(Ga)},w.scale.category20=function(){return w.scale.ordinal().range(Ka)},w.scale.category20b=function(){return w.scale.ordinal().range(di)},w.scale.category20c=function(){return w.scale.ordinal().range(gi)};var Ga=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Hr),Ka=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Hr),di=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Hr),gi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Hr);w.scale.quantile=function(){return mi([],[])};function mi(ue,be){var Ee;function Oe(){var We=0,xt=be.length;for(Ee=[];++We<xt;)Ee[We-1]=w.quantile(ue,We/xt);return ze}function ze(We){if(!isNaN(We=+We))return be[w.bisect(Ee,We)]}return ze.domain=function(We){return arguments.length?(ue=We.map(g).filter(p).sort(i),Oe()):ue},ze.range=function(We){return arguments.length?(be=We,Oe()):be},ze.quantiles=function(){return Ee},ze.invertExtent=function(We){return We=be.indexOf(We),We<0?[NaN,NaN]:[We>0?Ee[We-1]:ue[0],We<Ee.length?Ee[We]:ue[ue.length-1]]},ze.copy=function(){return mi(ue,be)},Oe()}w.scale.quantize=function(){return Ai(0,1,[0,1])};function Ai(ue,be,Ee){var Oe,ze;function We(ht){return Ee[Math.max(0,Math.min(ze,Math.floor(Oe*(ht-ue))))]}function xt(){return Oe=Ee.length/(be-ue),ze=Ee.length-1,We}return We.domain=function(ht){return arguments.length?(ue=+ht[0],be=+ht[ht.length-1],xt()):[ue,be]},We.range=function(ht){return arguments.length?(Ee=ht,xt()):Ee},We.invertExtent=function(ht){return ht=Ee.indexOf(ht),ht=ht<0?NaN:ht/Oe+ue,[ht,ht+1/Oe]},We.copy=function(){return Ai(ue,be,Ee)},xt()}w.scale.threshold=function(){return li([.5],[0,1])};function li(ue,be){function Ee(Oe){if(Oe<=Oe)return be[w.bisect(ue,Oe)]}return Ee.domain=function(Oe){return arguments.length?(ue=Oe,Ee):ue},Ee.range=function(Oe){return arguments.length?(be=Oe,Ee):be},Ee.invertExtent=function(Oe){return Oe=be.indexOf(Oe),[ue[Oe-1],ue[Oe]]},Ee.copy=function(){return li(ue,be)},Ee}w.scale.identity=function(){return yo([0,1])};function yo(ue){function be(Ee){return+Ee}return be.invert=be,be.domain=be.range=function(Ee){return arguments.length?(ue=Ee.map(be),be):ue},be.ticks=function(Ee){return Fa(ue,Ee)},be.tickFormat=function(Ee,Oe){return d3_scale_linearTickFormat(ue,Ee,Oe)},be.copy=function(){return yo(ue)},be}w.svg={};function qi(){return 0}w.svg.arc=function(){var ue=va,be=xi,Ee=qi,Oe=ja,ze=lo,We=vo,xt=os;function ht(){var Vt=Math.max(0,+ue.apply(this,arguments)),jt=Math.max(0,+be.apply(this,arguments)),Jt=ze.apply(this,arguments)-ot,Tr=We.apply(this,arguments)-ot,Kr=Math.abs(Tr-Jt),ln=Jt>Tr?0:1;if(jt<Vt&&(kr=jt,jt=Vt,Vt=kr),Kr>=Je)return Et(jt,ln)+(Vt?Et(Vt,1-ln):"")+"Z";var kr,zr,Gr,nn,on=0,Wr=0,Nn,ra,ba,oa,Ea,ua,Ua,Da,Ja=[];if((nn=(+xt.apply(this,arguments)||0)/2)&&(Gr=Oe===ja?Math.sqrt(Vt*Vt+jt*jt):+Oe.apply(this,arguments),ln||(Wr*=-1),jt&&(Wr=qt(Gr/jt*Math.sin(nn))),Vt&&(on=qt(Gr/Vt*Math.sin(nn)))),jt){Nn=jt*Math.cos(Jt+Wr),ra=jt*Math.sin(Jt+Wr),ba=jt*Math.cos(Tr-Wr),oa=jt*Math.sin(Tr-Wr);var yi=Math.abs(Tr-Jt-2*Wr)<=ke?0:1;if(Wr&&Ms(Nn,ra,ba,oa)===ln^yi){var fo=(Jt+Tr)/2;Nn=jt*Math.cos(fo),ra=jt*Math.sin(fo),ba=oa=null}}else Nn=ra=0;if(Vt){Ea=Vt*Math.cos(Tr-on),ua=Vt*Math.sin(Tr-on),Ua=Vt*Math.cos(Jt+on),Da=Vt*Math.sin(Jt+on);var Ii=Math.abs(Jt-Tr+2*on)<=ke?0:1;if(on&&Ms(Ea,ua,Ua,Da)===1-ln^Ii){var fa=(Jt+Tr)/2;Ea=Vt*Math.cos(fa),ua=Vt*Math.sin(fa),Ua=Da=null}}else Ea=ua=0;if(Kr>ct&&(kr=Math.min(Math.abs(jt-Vt)/2,+Ee.apply(this,arguments)))>.001){zr=Vt<jt^ln?0:1;var ai=kr,Wa=kr;if(Kr<ke){var Si=Ua==null?[Ea,ua]:ba==null?[Nn,ra]:ti([Nn,ra],[Ua,Da],[ba,oa],[Ea,ua]),ui=Nn-Si[0],io=ra-Si[1],Qi=ba-Si[0],go=oa-Si[1],Go=1/Math.sin(Math.acos((ui*Qi+io*go)/(Math.sqrt(ui*ui+io*io)*Math.sqrt(Qi*Qi+go*go)))/2),Fo=Math.sqrt(Si[0]*Si[0]+Si[1]*Si[1]);Wa=Math.min(kr,(Vt-Fo)/(Go-1)),ai=Math.min(kr,(jt-Fo)/(Go+1))}if(ba!=null){var Yo=Io(Ua==null?[Ea,ua]:[Ua,Da],[Nn,ra],jt,ai,ln),Gi=Io([ba,oa],[Ea,ua],jt,ai,ln);kr===ai?Ja.push("M",Yo[0],"A",ai,",",ai," 0 0,",zr," ",Yo[1],"A",jt,",",jt," 0 ",1-ln^Ms(Yo[1][0],Yo[1][1],Gi[1][0],Gi[1][1]),",",ln," ",Gi[1],"A",ai,",",ai," 0 0,",zr," ",Gi[0]):Ja.push("M",Yo[0],"A",ai,",",ai," 0 1,",zr," ",Gi[0])}else Ja.push("M",Nn,",",ra);if(Ua!=null){var Oi=Io([Nn,ra],[Ua,Da],Vt,-Wa,ln),za=Io([Ea,ua],ba==null?[Nn,ra]:[ba,oa],Vt,-Wa,ln);kr===Wa?Ja.push("L",za[0],"A",Wa,",",Wa," 0 0,",zr," ",za[1],"A",Vt,",",Vt," 0 ",ln^Ms(za[1][0],za[1][1],Oi[1][0],Oi[1][1]),",",1-ln," ",Oi[1],"A",Wa,",",Wa," 0 0,",zr," ",Oi[0]):Ja.push("L",za[0],"A",Wa,",",Wa," 0 0,",zr," ",Oi[0])}else Ja.push("L",Ea,",",ua)}else Ja.push("M",Nn,",",ra),ba!=null&&Ja.push("A",jt,",",jt," 0 ",yi,",",ln," ",ba,",",oa),Ja.push("L",Ea,",",ua),Ua!=null&&Ja.push("A",Vt,",",Vt," 0 ",Ii,",",1-ln," ",Ua,",",Da);return Ja.push("Z"),Ja.join("")}function Et(Vt,jt){return"M0,"+Vt+"A"+Vt+","+Vt+" 0 1,"+jt+" 0,"+-Vt+"A"+Vt+","+Vt+" 0 1,"+jt+" 0,"+Vt}return ht.innerRadius=function(Vt){return arguments.length?(ue=et(Vt),ht):ue},ht.outerRadius=function(Vt){return arguments.length?(be=et(Vt),ht):be},ht.cornerRadius=function(Vt){return arguments.length?(Ee=et(Vt),ht):Ee},ht.padRadius=function(Vt){return arguments.length?(Oe=Vt==ja?ja:et(Vt),ht):Oe},ht.startAngle=function(Vt){return arguments.length?(ze=et(Vt),ht):ze},ht.endAngle=function(Vt){return arguments.length?(We=et(Vt),ht):We},ht.padAngle=function(Vt){return arguments.length?(xt=et(Vt),ht):xt},ht.centroid=function(){var Vt=(+ue.apply(this,arguments)+ +be.apply(this,arguments))/2,jt=(+ze.apply(this,arguments)+ +We.apply(this,arguments))/2-ot;return[Math.cos(jt)*Vt,Math.sin(jt)*Vt]},ht};var ja="auto";function va(ue){return ue.innerRadius}function xi(ue){return ue.outerRadius}function lo(ue){return ue.startAngle}function vo(ue){return ue.endAngle}function os(ue){return ue&&ue.padAngle}function Ms(ue,be,Ee,Oe){return(ue-Ee)*be-(be-Oe)*ue>0?0:1}function Io(ue,be,Ee,Oe,ze){var We=ue[0]-be[0],xt=ue[1]-be[1],ht=(ze?Oe:-Oe)/Math.sqrt(We*We+xt*xt),Et=ht*xt,Vt=-ht*We,jt=ue[0]+Et,Jt=ue[1]+Vt,Tr=be[0]+Et,Kr=be[1]+Vt,ln=(jt+Tr)/2,kr=(Jt+Kr)/2,zr=Tr-jt,Gr=Kr-Jt,nn=zr*zr+Gr*Gr,on=Ee-Oe,Wr=jt*Kr-Tr*Jt,Nn=(Gr<0?-1:1)*Math.sqrt(Math.max(0,on*on*nn-Wr*Wr)),ra=(Wr*Gr-zr*Nn)/nn,ba=(-Wr*zr-Gr*Nn)/nn,oa=(Wr*Gr+zr*Nn)/nn,Ea=(-Wr*zr+Gr*Nn)/nn,ua=ra-ln,Ua=ba-kr,Da=oa-ln,Ja=Ea-kr;return ua*ua+Ua*Ua>Da*Da+Ja*Ja&&(ra=oa,ba=Ea),[[ra-Et,ba-Vt],[ra*Ee/on,ba*Ee/on]]}function Ks(){return!0}function gs(ue){var be=Kn,Ee=Aa,Oe=Ks,ze=mo,We=ze.key,xt=.7;function ht(Et){var Vt=[],jt=[],Jt=-1,Tr=Et.length,Kr,ln=et(be),kr=et(Ee);function zr(){Vt.push("M",ze(ue(jt),xt))}for(;++Jt<Tr;)Oe.call(this,Kr=Et[Jt],Jt)?jt.push([+ln.call(this,Kr,Jt),+kr.call(this,Kr,Jt)]):jt.length&&(zr(),jt=[]);return jt.length&&zr(),Vt.length?Vt.join(""):null}return ht.x=function(Et){return arguments.length?(be=Et,ht):be},ht.y=function(Et){return arguments.length?(Ee=Et,ht):Ee},ht.defined=function(Et){return arguments.length?(Oe=Et,ht):Oe},ht.interpolate=function(Et){return arguments.length?(typeof Et=="function"?We=ze=Et:We=(ze=ss.get(Et)||mo).key,ht):We},ht.tension=function(Et){return arguments.length?(xt=Et,ht):xt},ht}w.svg.line=function(){return gs(D)};var ss=w.map({linear:mo,"linear-closed":Bl,step:Jl,"step-before":ls,"step-after":pu,basis:Ss,"basis-open":Wu,"basis-closed":Du,bundle:Ru,cardinal:Lu,"cardinal-open":Ol,"cardinal-closed":hf,monotone:He});ss.forEach(function(ue,be){be.key=ue,be.closed=/-closed$/.test(ue)});function mo(ue){return ue.length>1?ue.join("L"):ue+"Z"}function Bl(ue){return ue.join("L")+"Z"}function Jl(ue){for(var be=0,Ee=ue.length,Oe=ue[0],ze=[Oe[0],",",Oe[1]];++be<Ee;)ze.push("H",(Oe[0]+(Oe=ue[be])[0])/2,"V",Oe[1]);return Ee>1&&ze.push("H",Oe[0]),ze.join("")}function ls(ue){for(var be=0,Ee=ue.length,Oe=ue[0],ze=[Oe[0],",",Oe[1]];++be<Ee;)ze.push("V",(Oe=ue[be])[1],"H",Oe[0]);return ze.join("")}function pu(ue){for(var be=0,Ee=ue.length,Oe=ue[0],ze=[Oe[0],",",Oe[1]];++be<Ee;)ze.push("H",(Oe=ue[be])[0],"V",Oe[1]);return ze.join("")}function Ol(ue,be){return ue.length<4?mo(ue):ue[1]+du(ue.slice(1,-1),Pu(ue,be))}function hf(ue,be){return ue.length<3?Bl(ue):ue[0]+du((ue.push(ue[0]),ue),Pu([ue[ue.length-2]].concat(ue,[ue[1]]),be))}function Lu(ue,be){return ue.length<3?mo(ue):ue[0]+du(ue,Pu(ue,be))}function du(ue,be){if(be.length<1||ue.length!=be.length&&ue.length!=be.length+2)return mo(ue);var Ee=ue.length!=be.length,Oe="",ze=ue[0],We=ue[1],xt=be[0],ht=xt,Et=1;if(Ee&&(Oe+="Q"+(We[0]-xt[0]*2/3)+","+(We[1]-xt[1]*2/3)+","+We[0]+","+We[1],ze=ue[1],Et=2),be.length>1){ht=be[1],We=ue[Et],Et++,Oe+="C"+(ze[0]+xt[0])+","+(ze[1]+xt[1])+","+(We[0]-ht[0])+","+(We[1]-ht[1])+","+We[0]+","+We[1];for(var Vt=2;Vt<be.length;Vt++,Et++)We=ue[Et],ht=be[Vt],Oe+="S"+(We[0]-ht[0])+","+(We[1]-ht[1])+","+We[0]+","+We[1]}if(Ee){var jt=ue[Et];Oe+="Q"+(We[0]+ht[0]*2/3)+","+(We[1]+ht[1]*2/3)+","+jt[0]+","+jt[1]}return Oe}function Pu(ue,be){for(var Ee=[],Oe=(1-be)/2,ze,We=ue[0],xt=ue[1],ht=1,Et=ue.length;++ht<Et;)ze=We,We=xt,xt=ue[ht],Ee.push([Oe*(xt[0]-ze[0]),Oe*(xt[1]-ze[1])]);return Ee}function Ss(ue){if(ue.length<3)return mo(ue);var be=1,Ee=ue.length,Oe=ue[0],ze=Oe[0],We=Oe[1],xt=[ze,ze,ze,(Oe=ue[1])[0]],ht=[We,We,We,Oe[1]],Et=[ze,",",We,"L",zo(ys,xt),",",zo(ys,ht)];for(ue.push(ue[Ee-1]);++be<=Ee;)Oe=ue[be],xt.shift(),xt.push(Oe[0]),ht.shift(),ht.push(Oe[1]),gu(Et,xt,ht);return ue.pop(),Et.push("L",Oe),Et.join("")}function Wu(ue){if(ue.length<4)return mo(ue);for(var be=[],Ee=-1,Oe=ue.length,ze,We=[0],xt=[0];++Ee<3;)ze=ue[Ee],We.push(ze[0]),xt.push(ze[1]);for(be.push(zo(ys,We)+","+zo(ys,xt)),--Ee;++Ee<Oe;)ze=ue[Ee],We.shift(),We.push(ze[0]),xt.shift(),xt.push(ze[1]),gu(be,We,xt);return be.join("")}function Du(ue){for(var be,Ee=-1,Oe=ue.length,ze=Oe+4,We,xt=[],ht=[];++Ee<4;)We=ue[Ee%Oe],xt.push(We[0]),ht.push(We[1]);for(be=[zo(ys,xt),",",zo(ys,ht)],--Ee;++Ee<ze;)We=ue[Ee%Oe],xt.shift(),xt.push(We[0]),ht.shift(),ht.push(We[1]),gu(be,xt,ht);return be.join("")}function Ru(ue,be){var Ee=ue.length-1;if(Ee)for(var Oe=ue[0][0],ze=ue[0][1],We=ue[Ee][0]-Oe,xt=ue[Ee][1]-ze,ht=-1,Et,Vt;++ht<=Ee;)Et=ue[ht],Vt=ht/Ee,Et[0]=be*Et[0]+(1-be)*(Oe+Vt*We),Et[1]=be*Et[1]+(1-be)*(ze+Vt*xt);return Ss(ue)}function zo(ue,be){return ue[0]*be[0]+ue[1]*be[1]+ue[2]*be[2]+ue[3]*be[3]}var Iu=[0,2/3,1/3,0],Qu=[0,1/3,2/3,0],ys=[0,1/6,2/3,1/6];function gu(ue,be,Ee){ue.push("C",zo(Iu,be),",",zo(Iu,Ee),",",zo(Qu,be),",",zo(Qu,Ee),",",zo(ys,be),",",zo(ys,Ee))}function yu(ue,be){return(be[1]-ue[1])/(be[0]-ue[0])}function zu(ue){for(var be=0,Ee=ue.length-1,Oe=[],ze=ue[0],We=ue[1],xt=Oe[0]=yu(ze,We);++be<Ee;)Oe[be]=(xt+(xt=yu(ze=We,We=ue[be+1])))/2;return Oe[be]=xt,Oe}function Re(ue){for(var be=[],Ee,Oe,ze,We,xt=zu(ue),ht=-1,Et=ue.length-1;++ht<Et;)Ee=yu(ue[ht],ue[ht+1]),l(Ee)<ct?xt[ht]=xt[ht+1]=0:(Oe=xt[ht]/Ee,ze=xt[ht+1]/Ee,We=Oe*Oe+ze*ze,We>9&&(We=Ee*3/Math.sqrt(We),xt[ht]=We*Oe,xt[ht+1]=We*ze));for(ht=-1;++ht<=Et;)We=(ue[Math.min(Et,ht+1)][0]-ue[Math.max(0,ht-1)][0])/(6*(1+xt[ht]*xt[ht])),be.push([We||0,xt[ht]*We||0]);return be}function He(ue){return ue.length<3?mo(ue):ue[0]+du(ue,Re(ue))}w.svg.line.radial=function(){var ue=gs(qe);return ue.radius=ue.x,delete ue.x,ue.angle=ue.y,delete ue.y,ue};function qe(ue){for(var be,Ee=-1,Oe=ue.length,ze,We;++Ee<Oe;)be=ue[Ee],ze=be[0],We=be[1]-ot,be[0]=ze*Math.cos(We),be[1]=ze*Math.sin(We);return ue}function at(ue){var be=Kn,Ee=Kn,Oe=0,ze=Aa,We=Ks,xt=mo,ht=xt.key,Et=xt,Vt="L",jt=.7;function Jt(Tr){var Kr=[],ln=[],kr=[],zr=-1,Gr=Tr.length,nn,on=et(be),Wr=et(Oe),Nn=be===Ee?function(){return ba}:et(Ee),ra=Oe===ze?function(){return oa}:et(ze),ba,oa;function Ea(){Kr.push("M",xt(ue(kr),jt),Vt,Et(ue(ln.reverse()),jt),"Z")}for(;++zr<Gr;)We.call(this,nn=Tr[zr],zr)?(ln.push([ba=+on.call(this,nn,zr),oa=+Wr.call(this,nn,zr)]),kr.push([+Nn.call(this,nn,zr),+ra.call(this,nn,zr)])):ln.length&&(Ea(),ln=[],kr=[]);return ln.length&&Ea(),Kr.length?Kr.join(""):null}return Jt.x=function(Tr){return arguments.length?(be=Ee=Tr,Jt):Ee},Jt.x0=function(Tr){return arguments.length?(be=Tr,Jt):be},Jt.x1=function(Tr){return arguments.length?(Ee=Tr,Jt):Ee},Jt.y=function(Tr){return arguments.length?(Oe=ze=Tr,Jt):ze},Jt.y0=function(Tr){return arguments.length?(Oe=Tr,Jt):Oe},Jt.y1=function(Tr){return arguments.length?(ze=Tr,Jt):ze},Jt.defined=function(Tr){return arguments.length?(We=Tr,Jt):We},Jt.interpolate=function(Tr){return arguments.length?(typeof Tr=="function"?ht=xt=Tr:ht=(xt=ss.get(Tr)||mo).key,Et=xt.reverse||xt,Vt=xt.closed?"M":"L",Jt):ht},Jt.tension=function(Tr){return arguments.length?(jt=Tr,Jt):jt},Jt}ls.reverse=pu,pu.reverse=ls,w.svg.area=function(){return at(D)},w.svg.area.radial=function(){var ue=at(qe);return ue.radius=ue.x,delete ue.x,ue.innerRadius=ue.x0,delete ue.x0,ue.outerRadius=ue.x1,delete ue.x1,ue.angle=ue.y,delete ue.y,ue.startAngle=ue.y0,delete ue.y0,ue.endAngle=ue.y1,delete ue.y1,ue};function bt(ue){return ue.source}function mt(ue){return ue.target}w.svg.chord=function(){var ue=bt,be=mt,Ee=wt,Oe=lo,ze=vo;function We(jt,Jt){var Tr=xt(this,ue,jt,Jt),Kr=xt(this,be,jt,Jt);return"M"+Tr.p0+Et(Tr.r,Tr.p1,Tr.a1-Tr.a0)+(ht(Tr,Kr)?Vt(Tr.r,Tr.p1,Tr.r,Tr.p0):Vt(Tr.r,Tr.p1,Kr.r,Kr.p0)+Et(Kr.r,Kr.p1,Kr.a1-Kr.a0)+Vt(Kr.r,Kr.p1,Tr.r,Tr.p0))+"Z"}function xt(jt,Jt,Tr,Kr){var ln=Jt.call(jt,Tr,Kr),kr=Ee.call(jt,ln,Kr),zr=Oe.call(jt,ln,Kr)-ot,Gr=ze.call(jt,ln,Kr)-ot;return{r:kr,a0:zr,a1:Gr,p0:[kr*Math.cos(zr),kr*Math.sin(zr)],p1:[kr*Math.cos(Gr),kr*Math.sin(Gr)]}}function ht(jt,Jt){return jt.a0==Jt.a0&&jt.a1==Jt.a1}function Et(jt,Jt,Tr){return"A"+jt+","+jt+" 0 "+ +(Tr>ke)+",1 "+Jt}function Vt(jt,Jt,Tr,Kr){return"Q 0,0 "+Kr}return We.radius=function(jt){return arguments.length?(Ee=et(jt),We):Ee},We.source=function(jt){return arguments.length?(ue=et(jt),We):ue},We.target=function(jt){return arguments.length?(be=et(jt),We):be},We.startAngle=function(jt){return arguments.length?(Oe=et(jt),We):Oe},We.endAngle=function(jt){return arguments.length?(ze=et(jt),We):ze},We};function wt(ue){return ue.radius}w.svg.diagonal=function(){var ue=bt,be=mt,Ee=or;function Oe(ze,We){var xt=ue.call(this,ze,We),ht=be.call(this,ze,We),Et=(xt.y+ht.y)/2,Vt=[xt,{x:xt.x,y:Et},{x:ht.x,y:Et},ht];return Vt=Vt.map(Ee),"M"+Vt[0]+"C"+Vt[1]+" "+Vt[2]+" "+Vt[3]}return Oe.source=function(ze){return arguments.length?(ue=et(ze),Oe):ue},Oe.target=function(ze){return arguments.length?(be=et(ze),Oe):be},Oe.projection=function(ze){return arguments.length?(Ee=ze,Oe):Ee},Oe};function or(ue){return[ue.x,ue.y]}w.svg.diagonal.radial=function(){var ue=w.svg.diagonal(),be=or,Ee=ue.projection;return ue.projection=function(Oe){return arguments.length?Ee(hr(be=Oe)):be},ue};function hr(ue){return function(){var be=ue.apply(this,arguments),Ee=be[0],Oe=be[1]-ot;return[Ee*Math.cos(Oe),Ee*Math.sin(Oe)]}}w.svg.symbol=function(){var ue=mr,be=ar;function Ee(Oe,ze){return(Vr.get(ue.call(this,Oe,ze))||Cr)(be.call(this,Oe,ze))}return Ee.type=function(Oe){return arguments.length?(ue=et(Oe),Ee):ue},Ee.size=function(Oe){return arguments.length?(be=et(Oe),Ee):be},Ee};function ar(){return 64}function mr(){return"circle"}function Cr(ue){var be=Math.sqrt(ue/ke);return"M0,"+be+"A"+be+","+be+" 0 1,1 0,"+-be+"A"+be+","+be+" 0 1,1 0,"+be+"Z"}var Vr=w.map({circle:Cr,cross:function(ue){var be=Math.sqrt(ue/5)/2;return"M"+-3*be+","+-be+"H"+-be+"V"+-3*be+"H"+be+"V"+-be+"H"+3*be+"V"+be+"H"+be+"V"+3*be+"H"+-be+"V"+be+"H"+-3*be+"Z"},diamond:function(ue){var be=Math.sqrt(ue/(2*xn)),Ee=be*xn;return"M0,"+-be+"L"+Ee+",0 0,"+be+" "+-Ee+",0Z"},square:function(ue){var be=Math.sqrt(ue)/2;return"M"+-be+","+-be+"L"+be+","+-be+" "+be+","+be+" "+-be+","+be+"Z"},"triangle-down":function(ue){var be=Math.sqrt(ue/qr),Ee=be*qr/2;return"M0,"+Ee+"L"+be+","+-Ee+" "+-be+","+-Ee+"Z"},"triangle-up":function(ue){var be=Math.sqrt(ue/qr),Ee=be*qr/2;return"M0,"+-Ee+"L"+be+","+Ee+" "+-be+","+Ee+"Z"}});w.svg.symbolTypes=Vr.keys();var qr=Math.sqrt(3),xn=Math.tan(30*Pt);Q.transition=function(ue){for(var be=Ya||++Za,Ee=ri(ue),Oe=[],ze,We,xt=qa||{time:Date.now(),ease:Rs,delay:0,duration:250},ht=-1,Et=this.length;++ht<Et;){Oe.push(ze=[]);for(var Vt=this[ht],jt=-1,Jt=Vt.length;++jt<Jt;)(We=Vt[jt])&&Hi(We,jt,Ee,be,xt),ze.push(We)}return da(Oe,Ee,be)},Q.interrupt=function(ue){return this.each(ue==null?Dn:Hn(ri(ue)))};var Dn=Hn(ri());function Hn(ue){return function(){var be,Ee,Oe;(be=this[ue])&&(Oe=be[Ee=be.active])&&(Oe.timer.c=null,Oe.timer.t=NaN,--be.count?delete be[Ee]:delete this[ue],be.active+=.5,Oe.event&&Oe.event.interrupt.call(this,this.__data__,Oe.index))}}function da(ue,be,Ee){return se(ue,ma),ue.namespace=be,ue.id=Ee,ue}var ma=[],Za=0,Ya,qa;ma.call=Q.call,ma.empty=Q.empty,ma.node=Q.node,ma.size=Q.size,w.transition=function(ue,be){return ue&&ue.transition?Ya?ue.transition(be):ue:w.selection().transition(ue)},w.transition.prototype=ma,ma.select=function(ue){var be=this.id,Ee=this.namespace,Oe=[],ze,We,xt;ue=W(ue);for(var ht=-1,Et=this.length;++ht<Et;){Oe.push(ze=[]);for(var Vt=this[ht],jt=-1,Jt=Vt.length;++jt<Jt;)(xt=Vt[jt])&&(We=ue.call(xt,xt.__data__,jt,ht))?("__data__"in xt&&(We.__data__=xt.__data__),Hi(We,jt,Ee,be,xt[Ee][be]),ze.push(We)):ze.push(null)}return da(Oe,Ee,be)},ma.selectAll=function(ue){var be=this.id,Ee=this.namespace,Oe=[],ze,We,xt,ht,Et;ue=X(ue);for(var Vt=-1,jt=this.length;++Vt<jt;)for(var Jt=this[Vt],Tr=-1,Kr=Jt.length;++Tr<Kr;)if(xt=Jt[Tr]){Et=xt[Ee][be],We=ue.call(xt,xt.__data__,Tr,Vt),Oe.push(ze=[]);for(var ln=-1,kr=We.length;++ln<kr;)(ht=We[ln])&&Hi(ht,ln,Ee,be,Et),ze.push(ht)}return da(Oe,Ee,be)},ma.filter=function(ue){var be=[],Ee,Oe,ze;typeof ue!="function"&&(ue=xe(ue));for(var We=0,xt=this.length;We<xt;We++){be.push(Ee=[]);for(var Oe=this[We],ht=0,Et=Oe.length;ht<Et;ht++)(ze=Oe[ht])&&ue.call(ze,ze.__data__,ht,We)&&Ee.push(ze)}return da(be,this.namespace,this.id)},ma.tween=function(ue,be){var Ee=this.id,Oe=this.namespace;return arguments.length<2?this.node()[Oe][Ee].tween.get(ue):Ve(this,be==null?function(ze){ze[Oe][Ee].tween.remove(ue)}:function(ze){ze[Oe][Ee].tween.set(ue,be)})};function hi(ue,be,Ee,Oe){var ze=ue.id,We=ue.namespace;return Ve(ue,typeof Ee=="function"?function(xt,ht,Et){xt[We][ze].tween.set(be,Oe(Ee.call(xt,xt.__data__,ht,Et)))}:(Ee=Oe(Ee),function(xt){xt[We][ze].tween.set(be,Ee)}))}ma.attr=function(ue,be){if(arguments.length<2){for(be in ue)this.attr(be,ue[be]);return this}var Ee=ue=="transform"?Rl:no,Oe=w.ns.qualify(ue);function ze(){this.removeAttribute(Oe)}function We(){this.removeAttributeNS(Oe.space,Oe.local)}function xt(Et){return Et==null?ze:(Et+="",function(){var Vt=this.getAttribute(Oe),jt;return Vt!==Et&&(jt=Ee(Vt,Et),function(Jt){this.setAttribute(Oe,jt(Jt))})})}function ht(Et){return Et==null?We:(Et+="",function(){var Vt=this.getAttributeNS(Oe.space,Oe.local),jt;return Vt!==Et&&(jt=Ee(Vt,Et),function(Jt){this.setAttributeNS(Oe.space,Oe.local,jt(Jt))})})}return hi(this,"attr."+ue,be,Oe.local?ht:xt)},ma.attrTween=function(ue,be){var Ee=w.ns.qualify(ue);function Oe(We,xt){var ht=be.call(this,We,xt,this.getAttribute(Ee));return ht&&function(Et){this.setAttribute(Ee,ht(Et))}}function ze(We,xt){var ht=be.call(this,We,xt,this.getAttributeNS(Ee.space,Ee.local));return ht&&function(Et){this.setAttributeNS(Ee.space,Ee.local,ht(Et))}}return this.tween("attr."+ue,Ee.local?ze:Oe)},ma.style=function(ue,be,Ee){var Oe=arguments.length;if(Oe<3){if(typeof ue!="string"){Oe<2&&(be="");for(Ee in ue)this.style(Ee,ue[Ee],be);return this}Ee=""}function ze(){this.style.removeProperty(ue)}function We(xt){return xt==null?ze:(xt+="",function(){var ht=a(this).getComputedStyle(this,null).getPropertyValue(ue),Et;return ht!==xt&&(Et=no(ht,xt),function(Vt){this.style.setProperty(ue,Et(Vt),Ee)})})}return hi(this,"style."+ue,be,We)},ma.styleTween=function(ue,be,Ee){arguments.length<3&&(Ee="");function Oe(ze,We){var xt=be.call(this,ze,We,a(this).getComputedStyle(this,null).getPropertyValue(ue));return xt&&function(ht){this.style.setProperty(ue,xt(ht),Ee)}}return this.tween("style."+ue,Oe)},ma.text=function(ue){return hi(this,"text",ue,ao)};function ao(ue){return ue==null&&(ue=""),function(){this.textContent=ue}}ma.remove=function(){var ue=this.namespace;return this.each("end.transition",function(){var be;this[ue].count<2&&(be=this.parentNode)&&be.removeChild(this)})},ma.ease=function(ue){var be=this.id,Ee=this.namespace;return arguments.length<1?this.node()[Ee][be].ease:(typeof ue!="function"&&(ue=w.ease.apply(w,arguments)),Ve(this,function(Oe){Oe[Ee][be].ease=ue}))},ma.delay=function(ue){var be=this.id,Ee=this.namespace;return arguments.length<1?this.node()[Ee][be].delay:Ve(this,typeof ue=="function"?function(Oe,ze,We){Oe[Ee][be].delay=+ue.call(Oe,Oe.__data__,ze,We)}:(ue=+ue,function(Oe){Oe[Ee][be].delay=ue}))},ma.duration=function(ue){var be=this.id,Ee=this.namespace;return arguments.length<1?this.node()[Ee][be].duration:Ve(this,typeof ue=="function"?function(Oe,ze,We){Oe[Ee][be].duration=Math.max(1,ue.call(Oe,Oe.__data__,ze,We))}:(ue=Math.max(1,ue),function(Oe){Oe[Ee][be].duration=ue}))},ma.each=function(ue,be){var Ee=this.id,Oe=this.namespace;if(arguments.length<2){var ze=qa,We=Ya;try{Ya=Ee,Ve(this,function(xt,ht,Et){qa=xt[Oe][Ee],ue.call(xt,xt.__data__,ht,Et)})}finally{qa=ze,Ya=We}}else Ve(this,function(xt){var ht=xt[Oe][Ee];(ht.event||(ht.event=w.dispatch("start","end","interrupt"))).on(ue,be)});return this},ma.transition=function(){for(var ue=this.id,be=++Za,Ee=this.namespace,Oe=[],ze,We,xt,ht,Et=0,Vt=this.length;Et<Vt;Et++){Oe.push(ze=[]);for(var We=this[Et],jt=0,Jt=We.length;jt<Jt;jt++)(xt=We[jt])&&(ht=xt[Ee][ue],Hi(xt,jt,Ee,be,{time:ht.time,ease:ht.ease,delay:ht.delay+ht.duration,duration:ht.duration})),ze.push(xt)}return da(Oe,Ee,be)};function ri(ue){return ue==null?"__transition__":"__transition_"+ue+"__"}function Hi(ue,be,Ee,Oe,ze){var We=ue[Ee]||(ue[Ee]={active:0,count:0}),xt=We[Oe],ht,Et,Vt,jt,Jt;function Tr(kr){var zr=xt.delay;if(Et.t=zr+ht,zr<=kr)return Kr(kr-zr);Et.c=Kr}function Kr(kr){var zr=We.active,Gr=We[zr];Gr&&(Gr.timer.c=null,Gr.timer.t=NaN,--We.count,delete We[zr],Gr.event&&Gr.event.interrupt.call(ue,ue.__data__,Gr.index));for(var nn in We)if(+nn<Oe){var on=We[nn];on.timer.c=null,on.timer.t=NaN,--We.count,delete We[nn]}Et.c=ln,_n(function(){return Et.c&&ln(kr||1)&&(Et.c=null,Et.t=NaN),1},0,ht),We.active=Oe,xt.event&&xt.event.start.call(ue,ue.__data__,be),Jt=[],xt.tween.forEach(function(Wr,Nn){(Nn=Nn.call(ue,ue.__data__,be))&&Jt.push(Nn)}),jt=xt.ease,Vt=xt.duration}function ln(kr){for(var zr=kr/Vt,Gr=jt(zr),nn=Jt.length;nn>0;)Jt[--nn].call(ue,Gr);if(zr>=1)return xt.event&&xt.event.end.call(ue,ue.__data__,be),--We.count?delete We[Oe]:delete ue[Ee],1}xt||(ht=ze.time,Et=_n(Tr,0,ht),xt=We[Oe]={tween:new A,time:ht,timer:Et,delay:ze.delay,duration:ze.duration,ease:ze.ease,index:be},ze=null,++We.count)}w.svg.axis=function(){var ue=w.scale.linear(),be=uo,Ee=6,Oe=6,ze=3,We=[10],xt=null,ht;function Et(Vt){Vt.each(function(){var jt=w.select(this),Jt=this.__chart__||ue,Tr=this.__chart__=ue.copy(),Kr=xt??(Tr.ticks?Tr.ticks.apply(Tr,We):Tr.domain()),ln=ht??(Tr.tickFormat?Tr.tickFormat.apply(Tr,We):D),kr=jt.selectAll(".tick").data(Kr,Tr),zr=kr.enter().insert("g",".domain").attr("class","tick").style("opacity",ct),Gr=w.transition(kr.exit()).style("opacity",ct).remove(),nn=w.transition(kr.order()).style("opacity",1),on=Math.max(Ee,0)+ze,Wr,Nn=tn(Tr),ra=jt.selectAll(".domain").data([0]),ba=(ra.enter().append("path").attr("class","domain"),w.transition(ra));zr.append("line"),zr.append("text");var oa=zr.select("line"),Ea=nn.select("line"),ua=kr.select("text").text(ln),Ua=zr.select("text"),Da=nn.select("text"),Ja=be==="top"||be==="left"?-1:1,yi,fo,Ii,fa;if(be==="bottom"||be==="top"?(Wr=bi,yi="x",Ii="y",fo="x2",fa="y2",ua.attr("dy",Ja<0?"0em":".71em").style("text-anchor","middle"),ba.attr("d","M"+Nn[0]+","+Ja*Oe+"V0H"+Nn[1]+"V"+Ja*Oe)):(Wr=Mi,yi="y",Ii="x",fo="y2",fa="x2",ua.attr("dy",".32em").style("text-anchor",Ja<0?"end":"start"),ba.attr("d","M"+Ja*Oe+","+Nn[0]+"H0V"+Nn[1]+"H"+Ja*Oe)),oa.attr(fa,Ja*Ee),Ua.attr(Ii,Ja*on),Ea.attr(fo,0).attr(fa,Ja*Ee),Da.attr(yi,0).attr(Ii,Ja*on),Tr.rangeBand){var ai=Tr,Wa=ai.rangeBand()/2;Jt=Tr=function(Si){return ai(Si)+Wa}}else Jt.rangeBand?Jt=Tr:Gr.call(Wr,Tr,Jt);zr.call(Wr,Jt,Tr),nn.call(Wr,Tr,Tr)})}return Et.scale=function(Vt){return arguments.length?(ue=Vt,Et):ue},Et.orient=function(Vt){return arguments.length?(be=Vt in bo?Vt+"":uo,Et):be},Et.ticks=function(){return arguments.length?(We=M(arguments),Et):We},Et.tickValues=function(Vt){return arguments.length?(xt=Vt,Et):xt},Et.tickFormat=function(Vt){return arguments.length?(ht=Vt,Et):ht},Et.tickSize=function(Vt){var jt=arguments.length;return jt?(Ee=+Vt,Oe=+arguments[jt-1],Et):Ee},Et.innerTickSize=function(Vt){return arguments.length?(Ee=+Vt,Et):Ee},Et.outerTickSize=function(Vt){return arguments.length?(Oe=+Vt,Et):Oe},Et.tickPadding=function(Vt){return arguments.length?(ze=+Vt,Et):ze},Et.tickSubdivide=function(){return arguments.length&&Et},Et};var uo="bottom",bo={top:1,right:1,bottom:1,left:1};function bi(ue,be,Ee){ue.attr("transform",function(Oe){var ze=be(Oe);return"translate("+(isFinite(ze)?ze:Ee(Oe))+",0)"})}function Mi(ue,be,Ee){ue.attr("transform",function(Oe){var ze=be(Oe);return"translate(0,"+(isFinite(ze)?ze:Ee(Oe))+")"})}w.svg.brush=function(){var ue=j(jt,"brushstart","brush","brushend"),be=null,Ee=null,Oe=[0,0],ze=[0,0],We,xt,ht=!0,Et=!0,Vt=po[0];function jt(kr){kr.each(function(){var zr=w.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",ln).on("touchstart.brush",ln),Gr=zr.selectAll(".background").data([0]);Gr.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),zr.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var nn=zr.selectAll(".resize").data(Vt,D);nn.exit().remove(),nn.enter().append("g").attr("class",function(ra){return"resize "+ra}).style("cursor",function(ra){return us[ra]}).append("rect").attr("x",function(ra){return/[ew]$/.test(ra)?-3:null}).attr("y",function(ra){return/^[ns]/.test(ra)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),nn.style("display",jt.empty()?"none":null);var on=w.transition(zr),Wr=w.transition(Gr),Nn;be&&(Nn=tn(be),Wr.attr("x",Nn[0]).attr("width",Nn[1]-Nn[0]),Tr(on)),Ee&&(Nn=tn(Ee),Wr.attr("y",Nn[0]).attr("height",Nn[1]-Nn[0]),Kr(on)),Jt(on)})}jt.event=function(kr){kr.each(function(){var zr=ue.of(this,arguments),Gr={x:Oe,y:ze,i:We,j:xt},nn=this.__chart__||Gr;this.__chart__=Gr,Ya?w.select(this).transition().each("start.brush",function(){We=nn.i,xt=nn.j,Oe=nn.x,ze=nn.y,zr({type:"brushstart"})}).tween("brush:brush",function(){var on=Ji(Oe,Gr.x),Wr=Ji(ze,Gr.y);return We=xt=null,function(Nn){Oe=Gr.x=on(Nn),ze=Gr.y=Wr(Nn),zr({type:"brush",mode:"resize"})}}).each("end.brush",function(){We=Gr.i,xt=Gr.j,zr({type:"brush",mode:"resize"}),zr({type:"brushend"})}):(zr({type:"brushstart"}),zr({type:"brush",mode:"resize"}),zr({type:"brushend"}))})};function Jt(kr){kr.selectAll(".resize").attr("transform",function(zr){return"translate("+Oe[+/e$/.test(zr)]+","+ze[+/^s/.test(zr)]+")"})}function Tr(kr){kr.select(".extent").attr("x",Oe[0]),kr.selectAll(".extent,.n>rect,.s>rect").attr("width",Oe[1]-Oe[0])}function Kr(kr){kr.select(".extent").attr("y",ze[0]),kr.selectAll(".extent,.e>rect,.w>rect").attr("height",ze[1]-ze[0])}function ln(){var kr=this,zr=w.select(w.event.target),Gr=ue.of(kr,arguments),nn=w.select(kr),on=zr.datum(),Wr=!/^(n|s)$/.test(on)&&be,Nn=!/^(e|w)$/.test(on)&&Ee,ra=zr.classed("extent"),ba=Ut(kr),oa,Ea=w.mouse(kr),ua,Ua=w.select(a(kr)).on("keydown.brush",yi).on("keyup.brush",fo);if(w.event.changedTouches?Ua.on("touchmove.brush",Ii).on("touchend.brush",ai):Ua.on("mousemove.brush",Ii).on("mouseup.brush",ai),nn.interrupt().selectAll("*").interrupt(),ra)Ea[0]=Oe[0]-Ea[0],Ea[1]=ze[0]-Ea[1];else if(on){var Da=+/w$/.test(on),Ja=+/^n/.test(on);ua=[Oe[1-Da]-Ea[0],ze[1-Ja]-Ea[1]],Ea[0]=Oe[Da],Ea[1]=ze[Ja]}else w.event.altKey&&(oa=Ea.slice());nn.style("pointer-events","none").selectAll(".resize").style("display",null),w.select("body").style("cursor",zr.style("cursor")),Gr({type:"brushstart"}),Ii();function yi(){w.event.keyCode==32&&(ra||(oa=null,Ea[0]-=Oe[1],Ea[1]-=ze[1],ra=2),Z())}function fo(){w.event.keyCode==32&&ra==2&&(Ea[0]+=Oe[1],Ea[1]+=ze[1],ra=0,Z())}function Ii(){var Wa=w.mouse(kr),Si=!1;ua&&(Wa[0]+=ua[0],Wa[1]+=ua[1]),ra||(w.event.altKey?(oa||(oa=[(Oe[0]+Oe[1])/2,(ze[0]+ze[1])/2]),Ea[0]=Oe[+(Wa[0]<oa[0])],Ea[1]=ze[+(Wa[1]<oa[1])]):oa=null),Wr&&fa(Wa,be,0)&&(Tr(nn),Si=!0),Nn&&fa(Wa,Ee,1)&&(Kr(nn),Si=!0),Si&&(Jt(nn),Gr({type:"brush",mode:ra?"move":"resize"}))}function fa(Wa,Si,ui){var io=tn(Si),Qi=io[0],go=io[1],Go=Ea[ui],Fo=ui?ze:Oe,Yo=Fo[1]-Fo[0],Gi,Oi;if(ra&&(Qi-=Go,go-=Yo+Go),Gi=(ui?Et:ht)?Math.max(Qi,Math.min(go,Wa[ui])):Wa[ui],ra?Oi=(Gi+=Go)+Yo:(oa&&(Go=Math.max(Qi,Math.min(go,2*oa[ui]-Gi))),Go<Gi?(Oi=Gi,Gi=Go):Oi=Go),Fo[0]!=Gi||Fo[1]!=Oi)return ui?xt=null:We=null,Fo[0]=Gi,Fo[1]=Oi,!0}function ai(){Ii(),nn.style("pointer-events","all").selectAll(".resize").style("display",jt.empty()?"none":null),w.select("body").style("cursor",null),Ua.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),ba(),Gr({type:"brushend"})}}return jt.x=function(kr){return arguments.length?(be=kr,Vt=po[!be<<1|!Ee],jt):be},jt.y=function(kr){return arguments.length?(Ee=kr,Vt=po[!be<<1|!Ee],jt):Ee},jt.clamp=function(kr){return arguments.length?(be&&Ee?(ht=!!kr[0],Et=!!kr[1]):be?ht=!!kr:Ee&&(Et=!!kr),jt):be&&Ee?[ht,Et]:be?ht:Ee?Et:null},jt.extent=function(kr){var zr,Gr,nn,on,Wr;return arguments.length?(be&&(zr=kr[0],Gr=kr[1],Ee&&(zr=zr[0],Gr=Gr[0]),We=[zr,Gr],be.invert&&(zr=be(zr),Gr=be(Gr)),Gr<zr&&(Wr=zr,zr=Gr,Gr=Wr),(zr!=Oe[0]||Gr!=Oe[1])&&(Oe=[zr,Gr])),Ee&&(nn=kr[0],on=kr[1],be&&(nn=nn[1],on=on[1]),xt=[nn,on],Ee.invert&&(nn=Ee(nn),on=Ee(on)),on<nn&&(Wr=nn,nn=on,on=Wr),(nn!=ze[0]||on!=ze[1])&&(ze=[nn,on])),jt):(be&&(We?(zr=We[0],Gr=We[1]):(zr=Oe[0],Gr=Oe[1],be.invert&&(zr=be.invert(zr),Gr=be.invert(Gr)),Gr<zr&&(Wr=zr,zr=Gr,Gr=Wr))),Ee&&(xt?(nn=xt[0],on=xt[1]):(nn=ze[0],on=ze[1],Ee.invert&&(nn=Ee.invert(nn),on=Ee.invert(on)),on<nn&&(Wr=nn,nn=on,on=Wr))),be&&Ee?[[zr,nn],[Gr,on]]:be?[zr,Gr]:Ee&&[nn,on])},jt.clear=function(){return jt.empty()||(Oe=[0,0],ze=[0,0],We=xt=null),jt},jt.empty=function(){return!!be&&Oe[0]==Oe[1]||!!Ee&&ze[0]==ze[1]},w.rebind(jt,ue,"on")};var us={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},po=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];w.text=Lt(function(ue){return ue.responseText}),w.json=function(ue,be){return Zt(ue,"application/json",Lo,be)};function Lo(ue){return JSON.parse(ue.responseText)}w.html=function(ue,be){return Zt(ue,"text/html",Ho,be)};function Ho(ue){var be=T.createRange();return be.selectNode(T.body),be.createContextualFragment(ue.responseText)}w.xml=Lt(function(ue){return ue.responseXML}),typeof ne=="object"&&ne.exports?ne.exports=w:this.d3=w}).apply(self)},{}],59:[function(d,ne,ae){ne.exports=d("./quad")},{"./quad":60}],60:[function(d,ne,ae){var w=d("binary-search-bounds"),v=d("clamp"),M=d("parse-rect"),T=d("array-bounds"),e=d("pick-by-alias"),a=d("defined"),n=d("flatten-vertex-data"),r=d("is-obj"),t=d("dtype"),f=d("math-log2"),o=1073741824;ne.exports=function(p,y){y||(y={}),p=n(p,"float64"),y=e(y,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var c=a(y.maxDepth,255),b=a(y.bounds,T(p,2));b[0]===b[2]&&b[2]++,b[1]===b[3]&&b[3]++;var l=i(p,b),_=p.length>>>1,s;y.dtype||(y.dtype="array"),typeof y.dtype=="string"?s=new(t(y.dtype))(_):y.dtype&&(s=y.dtype,Array.isArray(s)&&(s.length=_));for(var A=0;A<_;++A)s[A]=A;var m=[],h=[],x=[],u=[];D(0,0,1,s,0,1);for(var L=0,S=0;S<m.length;S++){var k=m[S];if(s.set)s.set(k,L);else for(var P=0,z=k.length;P<z;P++)s[P+L]=k[P];var I=L+m[S].length;u[S]=[L,I],L=I}return s.range=R,s;function D(V,G,J,Z,Y,j){if(!Z.length)return null;var re=m[Y]||(m[Y]=[]),se=x[Y]||(x[Y]=[]),oe=h[Y]||(h[Y]=[]),N=re.length;if(Y++,Y>c||j>o){for(var U=0;U<Z.length;U++)re.push(Z[U]),se.push(j),oe.push(null,null,null,null);return N}if(re.push(Z[0]),se.push(j),Z.length<=1)return oe.push(null,null,null,null),N;for(var q=J*.5,Q=V+q,W=G+q,X=[],ee=[],te=[],ie=[],le=1,ge=Z.length;le<ge;le++){var fe=Z[le],pe=l[fe*2],ye=l[fe*2+1];pe<Q?ye<W?X.push(fe):ee.push(fe):ye<W?te.push(fe):ie.push(fe)}return j<<=2,oe.push(D(V,G,q,X,Y,j),D(V,W,q,ee,Y,j+1),D(Q,G,q,te,Y,j+2),D(Q,W,q,ie,Y,j+3)),N}function R(){for(var V=[],G=arguments.length;G--;)V[G]=arguments[G];var J;if(r(V[V.length-1])){var Z=V.pop();!V.length&&(Z.x!=null||Z.l!=null||Z.left!=null)&&(V=[Z],J={}),J=e(Z,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else J={};V.length||(V=b);var Y=M.apply(void 0,V),j=[Math.min(Y.x,Y.x+Y.width),Math.min(Y.y,Y.y+Y.height),Math.max(Y.x,Y.x+Y.width),Math.max(Y.y,Y.y+Y.height)],re=j[0],se=j[1],oe=j[2],N=j[3],U=i([re,se,oe,N],b),q=U[0],Q=U[1],W=U[2],X=U[3],ee=a(J.level,m.length);if(J.d!=null){var te;typeof J.d=="number"?te=[J.d,J.d]:J.d.length&&(te=J.d),ee=Math.min(Math.max(Math.ceil(-f(Math.abs(te[0])/(b[2]-b[0]))),Math.ceil(-f(Math.abs(te[1])/(b[3]-b[1])))),ee)}if(ee=Math.min(ee,m.length),J.lod)return O(q,Q,W,X,ee);var ie=[];le(0,0,1,0,0,1);function le(fe,pe,ye,Te,_e,De){if(!(_e===null||De===null)){var Be=fe+ye,Ue=pe+ye;if(!(q>Be||Q>Ue||W<fe||X<pe)&&!(Te>=ee)&&_e!==De){var xe=m[Te];De===void 0&&(De=xe.length);for(var Pe=_e;Pe<De;Pe++){var Ve=xe[Pe],Qe=p[Ve*2],Fe=p[Ve*2+1];Qe>=re&&Qe<=oe&&Fe>=se&&Fe<=N&&ie.push(Ve)}var Le=h[Te],Ne=Le[_e*4+0],dt=Le[_e*4+1],Dt=Le[_e*4+2],Xt=Le[_e*4+3],At=ge(Le,_e+1),zt=ye*.5,Ut=Te+1;le(fe,pe,zt,Ut,Ne,dt||Dt||Xt||At),le(fe,pe+zt,zt,Ut,dt,Dt||Xt||At),le(fe+zt,pe,zt,Ut,Dt,Xt||At),le(fe+zt,pe+zt,zt,Ut,Xt,At)}}}function ge(fe,pe){for(var ye=null,Te=0;ye===null;)if(ye=fe[pe*4+Te],Te++,Te>fe.length)return null;return ye}return ie}function O(V,G,J,Z,Y){for(var j=[],re=0;re<Y;re++){var se=x[re],oe=u[re][0],N=F(V,G,re),U=F(J,Z,re),q=w.ge(se,N),Q=w.gt(se,U,q,se.length-1);j[re]=[q+oe,Q+oe]}return j}function F(V,G,J){for(var Z=1,Y=.5,j=.5,re=.5,se=0;se<J;se++)Z<<=2,Z+=V<Y?G<j?0:1:G<j?2:3,re*=.5,Y+=V<Y?-re:re,j+=G<j?-re:re;return Z}};function i(g,p){for(var y=p[0],c=p[1],b=p[2],l=p[3],_=1/(b-y),s=1/(l-c),A=new Array(g.length),m=0,h=g.length/2;m<h;m++)A[2*m]=v((g[2*m]-y)*_,0,1),A[2*m+1]=v((g[2*m+1]-c)*s,0,1);return A}},{"array-bounds":71,"binary-search-bounds":80,clamp:86,defined:124,dtype:127,"flatten-vertex-data":191,"is-obj":235,"math-log2":240,"parse-rect":249,"pick-by-alias":253}],61:[function(d,ne,ae){Object.defineProperty(ae,"__esModule",{value:!0});var w=d("@turf/meta"),v=6378137;function M(r){return w.geomReduce(r,function(t,f){return t+T(f)},0)}ae.default=M;function T(r){var t=0,f;switch(r.type){case"Polygon":return e(r.coordinates);case"MultiPolygon":for(f=0;f<r.coordinates.length;f++)t+=e(r.coordinates[f]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function e(r){var t=0;if(r&&r.length>0){t+=Math.abs(a(r[0]));for(var f=1;f<r.length;f++)t-=Math.abs(a(r[f]))}return t}function a(r){var t,f,o,i,g,p,y,c=0,b=r.length;if(b>2){for(y=0;y<b;y++)y===b-2?(i=b-2,g=b-1,p=0):y===b-1?(i=b-1,g=0,p=1):(i=y,g=y+1,p=y+2),t=r[i],f=r[g],o=r[p],c+=(n(o[0])-n(t[0]))*Math.sin(n(f[1]));c=c*v*v/2}return c}function n(r){return r*Math.PI/180}},{"@turf/meta":63}],62:[function(d,ne,ae){Object.defineProperty(ae,"__esModule",{value:!0}),ae.earthRadius=63710088e-1,ae.factors={centimeters:ae.earthRadius*100,centimetres:ae.earthRadius*100,degrees:ae.earthRadius/111325,feet:ae.earthRadius*3.28084,inches:ae.earthRadius*39.37,kilometers:ae.earthRadius/1e3,kilometres:ae.earthRadius/1e3,meters:ae.earthRadius,metres:ae.earthRadius,miles:ae.earthRadius/1609.344,millimeters:ae.earthRadius*1e3,millimetres:ae.earthRadius*1e3,nauticalmiles:ae.earthRadius/1852,radians:1,yards:ae.earthRadius*1.0936},ae.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/ae.earthRadius,yards:1.0936133},ae.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function w(S,k,P){P===void 0&&(P={});var z={type:"Feature"};return(P.id===0||P.id)&&(z.id=P.id),P.bbox&&(z.bbox=P.bbox),z.properties=k||{},z.geometry=S,z}ae.feature=w;function v(S,k,P){switch(S){case"Point":return M(k).geometry;case"LineString":return n(k).geometry;case"Polygon":return e(k).geometry;case"MultiPoint":return o(k).geometry;case"MultiLineString":return f(k).geometry;case"MultiPolygon":return i(k).geometry;default:throw new Error(S+" is invalid")}}ae.geometry=v;function M(S,k,P){if(P===void 0&&(P={}),!S)throw new Error("coordinates is required");if(!Array.isArray(S))throw new Error("coordinates must be an Array");if(S.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!h(S[0])||!h(S[1]))throw new Error("coordinates must contain numbers");var z={type:"Point",coordinates:S};return w(z,k,P)}ae.point=M;function T(S,k,P){return P===void 0&&(P={}),t(S.map(function(z){return M(z,k)}),P)}ae.points=T;function e(S,k,P){P===void 0&&(P={});for(var z=0,I=S;z<I.length;z++){var D=I[z];if(D.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var R=0;R<D[D.length-1].length;R++)if(D[D.length-1][R]!==D[0][R])throw new Error("First and last Position are not equivalent.")}var O={type:"Polygon",coordinates:S};return w(O,k,P)}ae.polygon=e;function a(S,k,P){return P===void 0&&(P={}),t(S.map(function(z){return e(z,k)}),P)}ae.polygons=a;function n(S,k,P){if(P===void 0&&(P={}),S.length<2)throw new Error("coordinates must be an array of two or more positions");var z={type:"LineString",coordinates:S};return w(z,k,P)}ae.lineString=n;function r(S,k,P){return P===void 0&&(P={}),t(S.map(function(z){return n(z,k)}),P)}ae.lineStrings=r;function t(S,k){k===void 0&&(k={});var P={type:"FeatureCollection"};return k.id&&(P.id=k.id),k.bbox&&(P.bbox=k.bbox),P.features=S,P}ae.featureCollection=t;function f(S,k,P){P===void 0&&(P={});var z={type:"MultiLineString",coordinates:S};return w(z,k,P)}ae.multiLineString=f;function o(S,k,P){P===void 0&&(P={});var z={type:"MultiPoint",coordinates:S};return w(z,k,P)}ae.multiPoint=o;function i(S,k,P){P===void 0&&(P={});var z={type:"MultiPolygon",coordinates:S};return w(z,k,P)}ae.multiPolygon=i;function g(S,k,P){P===void 0&&(P={});var z={type:"GeometryCollection",geometries:S};return w(z,k,P)}ae.geometryCollection=g;function p(S,k){if(k===void 0&&(k=0),k&&!(k>=0))throw new Error("precision must be a positive number");var P=Math.pow(10,k||0);return Math.round(S*P)/P}ae.round=p;function y(S,k){k===void 0&&(k="kilometers");var P=ae.factors[k];if(!P)throw new Error(k+" units is invalid");return S*P}ae.radiansToLength=y;function c(S,k){k===void 0&&(k="kilometers");var P=ae.factors[k];if(!P)throw new Error(k+" units is invalid");return S/P}ae.lengthToRadians=c;function b(S,k){return _(c(S,k))}ae.lengthToDegrees=b;function l(S){var k=S%360;return k<0&&(k+=360),k}ae.bearingToAzimuth=l;function _(S){var k=S%(2*Math.PI);return k*180/Math.PI}ae.radiansToDegrees=_;function s(S){var k=S%360;return k*Math.PI/180}ae.degreesToRadians=s;function A(S,k,P){if(k===void 0&&(k="kilometers"),P===void 0&&(P="kilometers"),!(S>=0))throw new Error("length must be a positive number");return y(c(S,k),P)}ae.convertLength=A;function m(S,k,P){if(k===void 0&&(k="meters"),P===void 0&&(P="kilometers"),!(S>=0))throw new Error("area must be a positive number");var z=ae.areaFactors[k];if(!z)throw new Error("invalid original units");var I=ae.areaFactors[P];if(!I)throw new Error("invalid final units");return S/z*I}ae.convertArea=m;function h(S){return!isNaN(S)&&S!==null&&!Array.isArray(S)}ae.isNumber=h;function x(S){return!!S&&S.constructor===Object}ae.isObject=x;function u(S){if(!S)throw new Error("bbox is required");if(!Array.isArray(S))throw new Error("bbox must be an Array");if(S.length!==4&&S.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");S.forEach(function(k){if(!h(k))throw new Error("bbox must only contain numbers")})}ae.validateBBox=u;function L(S){if(!S)throw new Error("id is required");if(["string","number"].indexOf(typeof S)===-1)throw new Error("id must be a number or a string")}ae.validateId=L},{}],63:[function(d,ne,ae){Object.defineProperty(ae,"__esModule",{value:!0});var w=d("@turf/helpers");function v(_,s,A){if(_!==null)for(var m,h,x,u,L,S,k,P=0,z=0,I,D=_.type,R=D==="FeatureCollection",O=D==="Feature",F=R?_.features.length:1,V=0;V<F;V++){k=R?_.features[V].geometry:O?_.geometry:_,I=k?k.type==="GeometryCollection":!1,L=I?k.geometries.length:1;for(var G=0;G<L;G++){var J=0,Z=0;if(u=I?k.geometries[G]:k,u!==null){S=u.coordinates;var Y=u.type;switch(P=A&&(Y==="Polygon"||Y==="MultiPolygon")?1:0,Y){case null:break;case"Point":if(s(S,z,V,J,Z)===!1)return!1;z++,J++;break;case"LineString":case"MultiPoint":for(m=0;m<S.length;m++){if(s(S[m],z,V,J,Z)===!1)return!1;z++,Y==="MultiPoint"&&J++}Y==="LineString"&&J++;break;case"Polygon":case"MultiLineString":for(m=0;m<S.length;m++){for(h=0;h<S[m].length-P;h++){if(s(S[m][h],z,V,J,Z)===!1)return!1;z++}Y==="MultiLineString"&&J++,Y==="Polygon"&&Z++}Y==="Polygon"&&J++;break;case"MultiPolygon":for(m=0;m<S.length;m++){for(Z=0,h=0;h<S[m].length;h++){for(x=0;x<S[m][h].length-P;x++){if(s(S[m][h][x],z,V,J,Z)===!1)return!1;z++}Z++}J++}break;case"GeometryCollection":for(m=0;m<u.geometries.length;m++)if(v(u.geometries[m],s,A)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function M(_,s,A,m){var h=A;return v(_,function(x,u,L,S,k){u===0&&A===void 0?h=x:h=s(h,x,u,L,S,k)},m),h}function T(_,s){var A;switch(_.type){case"FeatureCollection":for(A=0;A<_.features.length&&s(_.features[A].properties,A)!==!1;A++);break;case"Feature":s(_.properties,0);break}}function e(_,s,A){var m=A;return T(_,function(h,x){x===0&&A===void 0?m=h:m=s(m,h,x)}),m}function a(_,s){if(_.type==="Feature")s(_,0);else if(_.type==="FeatureCollection")for(var A=0;A<_.features.length&&s(_.features[A],A)!==!1;A++);}function n(_,s,A){var m=A;return a(_,function(h,x){x===0&&A===void 0?m=h:m=s(m,h,x)}),m}function r(_){var s=[];return v(_,function(A){s.push(A)}),s}function t(_,s){var A,m,h,x,u,L,S,k,P,z,I=0,D=_.type==="FeatureCollection",R=_.type==="Feature",O=D?_.features.length:1;for(A=0;A<O;A++){for(L=D?_.features[A].geometry:R?_.geometry:_,k=D?_.features[A].properties:R?_.properties:{},P=D?_.features[A].bbox:R?_.bbox:void 0,z=D?_.features[A].id:R?_.id:void 0,S=L?L.type==="GeometryCollection":!1,u=S?L.geometries.length:1,h=0;h<u;h++){if(x=S?L.geometries[h]:L,x===null){if(s(null,I,k,P,z)===!1)return!1;continue}switch(x.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(s(x,I,k,P,z)===!1)return!1;break}case"GeometryCollection":{for(m=0;m<x.geometries.length;m++)if(s(x.geometries[m],I,k,P,z)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}I++}}function f(_,s,A){var m=A;return t(_,function(h,x,u,L,S){x===0&&A===void 0?m=h:m=s(m,h,x,u,L,S)}),m}function o(_,s){t(_,function(A,m,h,x,u){var L=A===null?null:A.type;switch(L){case null:case"Point":case"LineString":case"Polygon":return s(w.feature(A,h,{bbox:x,id:u}),m,0)===!1?!1:void 0}var S;switch(L){case"MultiPoint":S="Point";break;case"MultiLineString":S="LineString";break;case"MultiPolygon":S="Polygon";break}for(var k=0;k<A.coordinates.length;k++){var P=A.coordinates[k],z={type:S,coordinates:P};if(s(w.feature(z,h),m,k)===!1)return!1}})}function i(_,s,A){var m=A;return o(_,function(h,x,u){x===0&&u===0&&A===void 0?m=h:m=s(m,h,x,u)}),m}function g(_,s){o(_,function(A,m,h){var x=0;if(!!A.geometry){var u=A.geometry.type;if(!(u==="Point"||u==="MultiPoint")){var L,S=0,k=0,P=0;if(v(A,function(z,I,D,R,O){if(L===void 0||m>S||R>k||O>P){L=z,S=m,k=R,P=O,x=0;return}var F=w.lineString([L,z],A.properties);if(s(F,m,h,O,x)===!1)return!1;x++,L=z})===!1)return!1}}})}function p(_,s,A){var m=A,h=!1;return g(_,function(x,u,L,S,k){h===!1&&A===void 0?m=x:m=s(m,x,u,L,S,k),h=!0}),m}function y(_,s){if(!_)throw new Error("geojson is required");o(_,function(A,m,h){if(A.geometry!==null){var x=A.geometry.type,u=A.geometry.coordinates;switch(x){case"LineString":if(s(A,m,h,0,0)===!1)return!1;break;case"Polygon":for(var L=0;L<u.length;L++)if(s(w.lineString(u[L],A.properties),m,h,L)===!1)return!1;break}}})}function c(_,s,A){var m=A;return y(_,function(h,x,u,L){x===0&&A===void 0?m=h:m=s(m,h,x,u,L)}),m}function b(_,s){if(s=s||{},!w.isObject(s))throw new Error("options is invalid");var A=s.featureIndex||0,m=s.multiFeatureIndex||0,h=s.geometryIndex||0,x=s.segmentIndex||0,u=s.properties,L;switch(_.type){case"FeatureCollection":A<0&&(A=_.features.length+A),u=u||_.features[A].properties,L=_.features[A].geometry;break;case"Feature":u=u||_.properties,L=_.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=_;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var S=L.coordinates;switch(L.type){case"Point":case"MultiPoint":return null;case"LineString":return x<0&&(x=S.length+x-1),w.lineString([S[x],S[x+1]],u,s);case"Polygon":return h<0&&(h=S.length+h),x<0&&(x=S[h].length+x-1),w.lineString([S[h][x],S[h][x+1]],u,s);case"MultiLineString":return m<0&&(m=S.length+m),x<0&&(x=S[m].length+x-1),w.lineString([S[m][x],S[m][x+1]],u,s);case"MultiPolygon":return m<0&&(m=S.length+m),h<0&&(h=S[m].length+h),x<0&&(x=S[m][h].length-x-1),w.lineString([S[m][h][x],S[m][h][x+1]],u,s)}throw new Error("geojson is invalid")}function l(_,s){if(s=s||{},!w.isObject(s))throw new Error("options is invalid");var A=s.featureIndex||0,m=s.multiFeatureIndex||0,h=s.geometryIndex||0,x=s.coordIndex||0,u=s.properties,L;switch(_.type){case"FeatureCollection":A<0&&(A=_.features.length+A),u=u||_.features[A].properties,L=_.features[A].geometry;break;case"Feature":u=u||_.properties,L=_.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=_;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var S=L.coordinates;switch(L.type){case"Point":return w.point(S,u,s);case"MultiPoint":return m<0&&(m=S.length+m),w.point(S[m],u,s);case"LineString":return x<0&&(x=S.length+x),w.point(S[x],u,s);case"Polygon":return h<0&&(h=S.length+h),x<0&&(x=S[h].length+x),w.point(S[h][x],u,s);case"MultiLineString":return m<0&&(m=S.length+m),x<0&&(x=S[m].length+x),w.point(S[m][x],u,s);case"MultiPolygon":return m<0&&(m=S.length+m),h<0&&(h=S[m].length+h),x<0&&(x=S[m][h].length-x),w.point(S[m][h][x],u,s)}throw new Error("geojson is invalid")}ae.coordEach=v,ae.coordReduce=M,ae.propEach=T,ae.propReduce=e,ae.featureEach=a,ae.featureReduce=n,ae.coordAll=r,ae.geomEach=t,ae.geomReduce=f,ae.flattenEach=o,ae.flattenReduce=i,ae.segmentEach=g,ae.segmentReduce=p,ae.lineEach=y,ae.lineReduce=c,ae.findSegment=b,ae.findPoint=l},{"@turf/helpers":62}],64:[function(d,ne,ae){Object.defineProperty(ae,"__esModule",{value:!0});var w=d("@turf/meta");function v(M){var T=[1/0,1/0,-1/0,-1/0];return w.coordEach(M,function(e){T[0]>e[0]&&(T[0]=e[0]),T[1]>e[1]&&(T[1]=e[1]),T[2]<e[0]&&(T[2]=e[0]),T[3]<e[1]&&(T[3]=e[1])}),T}v.default=v,ae.default=v},{"@turf/meta":66}],65:[function(d,ne,ae){arguments[4][62][0].apply(ae,arguments)},{dup:62}],66:[function(d,ne,ae){arguments[4][63][0].apply(ae,arguments)},{"@turf/helpers":65,dup:63}],67:[function(d,ne,ae){Object.defineProperty(ae,"__esModule",{value:!0});var w=d("@turf/meta"),v=d("@turf/helpers");function M(T,e){e===void 0&&(e={});var a=0,n=0,r=0;return w.coordEach(T,function(t){a+=t[0],n+=t[1],r++}),v.point([a/r,n/r],e.properties)}ae.default=M},{"@turf/helpers":68,"@turf/meta":69}],68:[function(d,ne,ae){Object.defineProperty(ae,"__esModule",{value:!0}),ae.earthRadius=63710088e-1,ae.factors={centimeters:ae.earthRadius*100,centimetres:ae.earthRadius*100,degrees:ae.earthRadius/111325,feet:ae.earthRadius*3.28084,inches:ae.earthRadius*39.37,kilometers:ae.earthRadius/1e3,kilometres:ae.earthRadius/1e3,meters:ae.earthRadius,metres:ae.earthRadius,miles:ae.earthRadius/1609.344,millimeters:ae.earthRadius*1e3,millimetres:ae.earthRadius*1e3,nauticalmiles:ae.earthRadius/1852,radians:1,yards:ae.earthRadius/1.0936},ae.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/ae.earthRadius,yards:1/1.0936},ae.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function w(O,F,V){V===void 0&&(V={});var G={type:"Feature"};return(V.id===0||V.id)&&(G.id=V.id),V.bbox&&(G.bbox=V.bbox),G.properties=F||{},G.geometry=O,G}ae.feature=w;function v(O,F,V){switch(O){case"Point":return M(F).geometry;case"LineString":return n(F).geometry;case"Polygon":return e(F).geometry;case"MultiPoint":return o(F).geometry;case"MultiLineString":return f(F).geometry;case"MultiPolygon":return i(F).geometry;default:throw new Error(O+" is invalid")}}ae.geometry=v;function M(O,F,V){V===void 0&&(V={});var G={type:"Point",coordinates:O};return w(G,F,V)}ae.point=M;function T(O,F,V){return V===void 0&&(V={}),t(O.map(function(G){return M(G,F)}),V)}ae.points=T;function e(O,F,V){V===void 0&&(V={});for(var G=0,J=O;G<J.length;G++){var Z=J[G];if(Z.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var Y=0;Y<Z[Z.length-1].length;Y++)if(Z[Z.length-1][Y]!==Z[0][Y])throw new Error("First and last Position are not equivalent.")}var j={type:"Polygon",coordinates:O};return w(j,F,V)}ae.polygon=e;function a(O,F,V){return V===void 0&&(V={}),t(O.map(function(G){return e(G,F)}),V)}ae.polygons=a;function n(O,F,V){if(V===void 0&&(V={}),O.length<2)throw new Error("coordinates must be an array of two or more positions");var G={type:"LineString",coordinates:O};return w(G,F,V)}ae.lineString=n;function r(O,F,V){return V===void 0&&(V={}),t(O.map(function(G){return n(G,F)}),V)}ae.lineStrings=r;function t(O,F){F===void 0&&(F={});var V={type:"FeatureCollection"};return F.id&&(V.id=F.id),F.bbox&&(V.bbox=F.bbox),V.features=O,V}ae.featureCollection=t;function f(O,F,V){V===void 0&&(V={});var G={type:"MultiLineString",coordinates:O};return w(G,F,V)}ae.multiLineString=f;function o(O,F,V){V===void 0&&(V={});var G={type:"MultiPoint",coordinates:O};return w(G,F,V)}ae.multiPoint=o;function i(O,F,V){V===void 0&&(V={});var G={type:"MultiPolygon",coordinates:O};return w(G,F,V)}ae.multiPolygon=i;function g(O,F,V){V===void 0&&(V={});var G={type:"GeometryCollection",geometries:O};return w(G,F,V)}ae.geometryCollection=g;function p(O,F){if(F===void 0&&(F=0),F&&!(F>=0))throw new Error("precision must be a positive number");var V=Math.pow(10,F||0);return Math.round(O*V)/V}ae.round=p;function y(O,F){F===void 0&&(F="kilometers");var V=ae.factors[F];if(!V)throw new Error(F+" units is invalid");return O*V}ae.radiansToLength=y;function c(O,F){F===void 0&&(F="kilometers");var V=ae.factors[F];if(!V)throw new Error(F+" units is invalid");return O/V}ae.lengthToRadians=c;function b(O,F){return _(c(O,F))}ae.lengthToDegrees=b;function l(O){var F=O%360;return F<0&&(F+=360),F}ae.bearingToAzimuth=l;function _(O){var F=O%(2*Math.PI);return F*180/Math.PI}ae.radiansToDegrees=_;function s(O){var F=O%360;return F*Math.PI/180}ae.degreesToRadians=s;function A(O,F,V){if(F===void 0&&(F="kilometers"),V===void 0&&(V="kilometers"),!(O>=0))throw new Error("length must be a positive number");return y(c(O,F),V)}ae.convertLength=A;function m(O,F,V){if(F===void 0&&(F="meters"),V===void 0&&(V="kilometers"),!(O>=0))throw new Error("area must be a positive number");var G=ae.areaFactors[F];if(!G)throw new Error("invalid original units");var J=ae.areaFactors[V];if(!J)throw new Error("invalid final units");return O/G*J}ae.convertArea=m;function h(O){return!isNaN(O)&&O!==null&&!Array.isArray(O)&&!/^\s*$/.test(O)}ae.isNumber=h;function x(O){return!!O&&O.constructor===Object}ae.isObject=x;function u(O){if(!O)throw new Error("bbox is required");if(!Array.isArray(O))throw new Error("bbox must be an Array");if(O.length!==4&&O.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");O.forEach(function(F){if(!h(F))throw new Error("bbox must only contain numbers")})}ae.validateBBox=u;function L(O){if(!O)throw new Error("id is required");if(["string","number"].indexOf(typeof O)===-1)throw new Error("id must be a number or a string")}ae.validateId=L;function S(){throw new Error("method has been renamed to `radiansToDegrees`")}ae.radians2degrees=S;function k(){throw new Error("method has been renamed to `degreesToRadians`")}ae.degrees2radians=k;function P(){throw new Error("method has been renamed to `lengthToDegrees`")}ae.distanceToDegrees=P;function z(){throw new Error("method has been renamed to `lengthToRadians`")}ae.distanceToRadians=z;function I(){throw new Error("method has been renamed to `radiansToLength`")}ae.radiansToDistance=I;function D(){throw new Error("method has been renamed to `bearingToAzimuth`")}ae.bearingToAngle=D;function R(){throw new Error("method has been renamed to `convertLength`")}ae.convertDistance=R},{}],69:[function(d,ne,ae){Object.defineProperty(ae,"__esModule",{value:!0});var w=d("@turf/helpers");function v(_,s,A){if(_!==null)for(var m,h,x,u,L,S,k,P=0,z=0,I,D=_.type,R=D==="FeatureCollection",O=D==="Feature",F=R?_.features.length:1,V=0;V<F;V++){k=R?_.features[V].geometry:O?_.geometry:_,I=k?k.type==="GeometryCollection":!1,L=I?k.geometries.length:1;for(var G=0;G<L;G++){var J=0,Z=0;if(u=I?k.geometries[G]:k,u!==null){S=u.coordinates;var Y=u.type;switch(P=A&&(Y==="Polygon"||Y==="MultiPolygon")?1:0,Y){case null:break;case"Point":if(s(S,z,V,J,Z)===!1)return!1;z++,J++;break;case"LineString":case"MultiPoint":for(m=0;m<S.length;m++){if(s(S[m],z,V,J,Z)===!1)return!1;z++,Y==="MultiPoint"&&J++}Y==="LineString"&&J++;break;case"Polygon":case"MultiLineString":for(m=0;m<S.length;m++){for(h=0;h<S[m].length-P;h++){if(s(S[m][h],z,V,J,Z)===!1)return!1;z++}Y==="MultiLineString"&&J++,Y==="Polygon"&&Z++}Y==="Polygon"&&J++;break;case"MultiPolygon":for(m=0;m<S.length;m++){for(Z=0,h=0;h<S[m].length;h++){for(x=0;x<S[m][h].length-P;x++){if(s(S[m][h][x],z,V,J,Z)===!1)return!1;z++}Z++}J++}break;case"GeometryCollection":for(m=0;m<u.geometries.length;m++)if(v(u.geometries[m],s,A)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function M(_,s,A,m){var h=A;return v(_,function(x,u,L,S,k){u===0&&A===void 0?h=x:h=s(h,x,u,L,S,k)},m),h}function T(_,s){var A;switch(_.type){case"FeatureCollection":for(A=0;A<_.features.length&&s(_.features[A].properties,A)!==!1;A++);break;case"Feature":s(_.properties,0);break}}function e(_,s,A){var m=A;return T(_,function(h,x){x===0&&A===void 0?m=h:m=s(m,h,x)}),m}function a(_,s){if(_.type==="Feature")s(_,0);else if(_.type==="FeatureCollection")for(var A=0;A<_.features.length&&s(_.features[A],A)!==!1;A++);}function n(_,s,A){var m=A;return a(_,function(h,x){x===0&&A===void 0?m=h:m=s(m,h,x)}),m}function r(_){var s=[];return v(_,function(A){s.push(A)}),s}function t(_,s){var A,m,h,x,u,L,S,k,P,z,I=0,D=_.type==="FeatureCollection",R=_.type==="Feature",O=D?_.features.length:1;for(A=0;A<O;A++){for(L=D?_.features[A].geometry:R?_.geometry:_,k=D?_.features[A].properties:R?_.properties:{},P=D?_.features[A].bbox:R?_.bbox:void 0,z=D?_.features[A].id:R?_.id:void 0,S=L?L.type==="GeometryCollection":!1,u=S?L.geometries.length:1,h=0;h<u;h++){if(x=S?L.geometries[h]:L,x===null){if(s(null,I,k,P,z)===!1)return!1;continue}switch(x.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(s(x,I,k,P,z)===!1)return!1;break}case"GeometryCollection":{for(m=0;m<x.geometries.length;m++)if(s(x.geometries[m],I,k,P,z)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}I++}}function f(_,s,A){var m=A;return t(_,function(h,x,u,L,S){x===0&&A===void 0?m=h:m=s(m,h,x,u,L,S)}),m}function o(_,s){t(_,function(A,m,h,x,u){var L=A===null?null:A.type;switch(L){case null:case"Point":case"LineString":case"Polygon":return s(w.feature(A,h,{bbox:x,id:u}),m,0)===!1?!1:void 0}var S;switch(L){case"MultiPoint":S="Point";break;case"MultiLineString":S="LineString";break;case"MultiPolygon":S="Polygon";break}for(var k=0;k<A.coordinates.length;k++){var P=A.coordinates[k],z={type:S,coordinates:P};if(s(w.feature(z,h),m,k)===!1)return!1}})}function i(_,s,A){var m=A;return o(_,function(h,x,u){x===0&&u===0&&A===void 0?m=h:m=s(m,h,x,u)}),m}function g(_,s){o(_,function(A,m,h){var x=0;if(!!A.geometry){var u=A.geometry.type;if(!(u==="Point"||u==="MultiPoint")){var L,S=0,k=0,P=0;if(v(A,function(z,I,D,R,O){if(L===void 0||m>S||R>k||O>P){L=z,S=m,k=R,P=O,x=0;return}var F=w.lineString([L,z],A.properties);if(s(F,m,h,O,x)===!1)return!1;x++,L=z})===!1)return!1}}})}function p(_,s,A){var m=A,h=!1;return g(_,function(x,u,L,S,k){h===!1&&A===void 0?m=x:m=s(m,x,u,L,S,k),h=!0}),m}function y(_,s){if(!_)throw new Error("geojson is required");o(_,function(A,m,h){if(A.geometry!==null){var x=A.geometry.type,u=A.geometry.coordinates;switch(x){case"LineString":if(s(A,m,h,0,0)===!1)return!1;break;case"Polygon":for(var L=0;L<u.length;L++)if(s(w.lineString(u[L],A.properties),m,h,L)===!1)return!1;break}}})}function c(_,s,A){var m=A;return y(_,function(h,x,u,L){x===0&&A===void 0?m=h:m=s(m,h,x,u,L)}),m}function b(_,s){if(s=s||{},!w.isObject(s))throw new Error("options is invalid");var A=s.featureIndex||0,m=s.multiFeatureIndex||0,h=s.geometryIndex||0,x=s.segmentIndex||0,u=s.properties,L;switch(_.type){case"FeatureCollection":A<0&&(A=_.features.length+A),u=u||_.features[A].properties,L=_.features[A].geometry;break;case"Feature":u=u||_.properties,L=_.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=_;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var S=L.coordinates;switch(L.type){case"Point":case"MultiPoint":return null;case"LineString":return x<0&&(x=S.length+x-1),w.lineString([S[x],S[x+1]],u,s);case"Polygon":return h<0&&(h=S.length+h),x<0&&(x=S[h].length+x-1),w.lineString([S[h][x],S[h][x+1]],u,s);case"MultiLineString":return m<0&&(m=S.length+m),x<0&&(x=S[m].length+x-1),w.lineString([S[m][x],S[m][x+1]],u,s);case"MultiPolygon":return m<0&&(m=S.length+m),h<0&&(h=S[m].length+h),x<0&&(x=S[m][h].length-x-1),w.lineString([S[m][h][x],S[m][h][x+1]],u,s)}throw new Error("geojson is invalid")}function l(_,s){if(s=s||{},!w.isObject(s))throw new Error("options is invalid");var A=s.featureIndex||0,m=s.multiFeatureIndex||0,h=s.geometryIndex||0,x=s.coordIndex||0,u=s.properties,L;switch(_.type){case"FeatureCollection":A<0&&(A=_.features.length+A),u=u||_.features[A].properties,L=_.features[A].geometry;break;case"Feature":u=u||_.properties,L=_.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=_;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var S=L.coordinates;switch(L.type){case"Point":return w.point(S,u,s);case"MultiPoint":return m<0&&(m=S.length+m),w.point(S[m],u,s);case"LineString":return x<0&&(x=S.length+x),w.point(S[x],u,s);case"Polygon":return h<0&&(h=S.length+h),x<0&&(x=S[h].length+x),w.point(S[h][x],u,s);case"MultiLineString":return m<0&&(m=S.length+m),x<0&&(x=S[m].length+x),w.point(S[m][x],u,s);case"MultiPolygon":return m<0&&(m=S.length+m),h<0&&(h=S[m].length+h),x<0&&(x=S[m][h].length-x),w.point(S[m][h][x],u,s)}throw new Error("geojson is invalid")}ae.coordEach=v,ae.coordReduce=M,ae.propEach=T,ae.propReduce=e,ae.featureEach=a,ae.featureReduce=n,ae.coordAll=r,ae.geomEach=t,ae.geomReduce=f,ae.flattenEach=o,ae.flattenReduce=i,ae.segmentEach=g,ae.segmentReduce=p,ae.lineEach=y,ae.lineReduce=c,ae.findSegment=b,ae.findPoint=l},{"@turf/helpers":68}],70:[function(d,ne,ae){ne.exports=w;function w(v){var M=0,T=0,e=0,a=0;return v.map(function(n){n=n.slice();var r=n[0],t=r.toUpperCase();if(r!=t)switch(n[0]=t,r){case"a":n[6]+=e,n[7]+=a;break;case"v":n[1]+=a;break;case"h":n[1]+=e;break;default:for(var f=1;f<n.length;)n[f++]+=e,n[f++]+=a}switch(t){case"Z":e=M,a=T;break;case"H":e=n[1];break;case"V":a=n[1];break;case"M":e=M=n[1],a=T=n[2];break;default:e=n[n.length-2],a=n[n.length-1]}return n})}},{}],71:[function(d,ne,ae){ne.exports=w;function w(v,M){if(!v||v.length==null)throw Error("Argument should be an array");M==null?M=1:M=Math.floor(M);for(var T=Array(M*2),e=0;e<M;e++){for(var a=-1/0,n=1/0,r=e,t=v.length;r<t;r+=M)v[r]>a&&(a=v[r]),v[r]<n&&(n=v[r]);T[e]=n,T[M+e]=a}return T}},{}],72:[function(d,ne,ae){ne.exports=function(w,v,M){if(typeof Array.prototype.findIndex=="function")return w.findIndex(v,M);if(typeof v!="function")throw new TypeError("predicate must be a function");var T=Object(w),e=T.length;if(e===0)return-1;for(var a=0;a<e;a++)if(v.call(M,T[a],a,T))return a;return-1}},{}],73:[function(d,ne,ae){var w=d("array-bounds");ne.exports=v;function v(M,T,e){if(!M||M.length==null)throw Error("Argument should be an array");T==null&&(T=1),e==null&&(e=w(M,T));for(var a=0;a<T;a++){var n=e[T+a],r=e[a],t=a,f=M.length;if(n===1/0&&r===-1/0)for(t=a;t<f;t+=T)M[t]=M[t]===n?1:M[t]===r?0:.5;else if(n===1/0)for(t=a;t<f;t+=T)M[t]=M[t]===n?1:0;else if(r===-1/0)for(t=a;t<f;t+=T)M[t]=M[t]===r?0:1;else{var o=n-r;for(t=a;t<f;t+=T)isNaN(M[t])||(M[t]=o===0?.5:(M[t]-r)/o)}}return M}},{"array-bounds":71}],74:[function(d,ne,ae){ne.exports=function(v,M){var T=typeof v=="number",e=typeof M=="number";T&&!e?(M=v,v=0):!T&&!e&&(v=0,M=0),v=v|0,M=M|0;var a=M-v;if(a<0)throw new Error("array length must be positive");for(var n=new Array(a),r=0,t=v;r<a;r++,t++)n[r]=t;return n}},{}],75:[function(d,ne,ae){(function(w){(function(){var v=d("object-assign");/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function M(k,P){if(k===P)return 0;for(var z=k.length,I=P.length,D=0,R=Math.min(z,I);D<R;++D)if(k[D]!==P[D]){z=k[D],I=P[D];break}return z<I?-1:I<z?1:0}function T(k){return w.Buffer&&typeof w.Buffer.isBuffer=="function"?w.Buffer.isBuffer(k):!!(k!=null&&k._isBuffer)}var e=d("util/"),a=Object.prototype.hasOwnProperty,n=Array.prototype.slice,r=function(){return function(){}.name==="foo"}();function t(k){return Object.prototype.toString.call(k)}function f(k){return T(k)||typeof w.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(k):k?!!(k instanceof DataView||k.buffer&&k.buffer instanceof ArrayBuffer):!1}var o=ne.exports=l,i=/\s*function\s+([^\(\s]*)\s*/;function g(k){if(!!e.isFunction(k)){if(r)return k.name;var P=k.toString(),z=P.match(i);return z&&z[1]}}o.AssertionError=function(P){this.name="AssertionError",this.actual=P.actual,this.expected=P.expected,this.operator=P.operator,P.message?(this.message=P.message,this.generatedMessage=!1):(this.message=c(this),this.generatedMessage=!0);var z=P.stackStartFunction||b;if(Error.captureStackTrace)Error.captureStackTrace(this,z);else{var I=new Error;if(I.stack){var D=I.stack,R=g(z),O=D.indexOf(`
`+R);if(O>=0){var F=D.indexOf(`
`,O+1);D=D.substring(F+1)}this.stack=D}}},e.inherits(o.AssertionError,Error);function p(k,P){return typeof k=="string"?k.length<P?k:k.slice(0,P):k}function y(k){if(r||!e.isFunction(k))return e.inspect(k);var P=g(k),z=P?": "+P:"";return"[Function"+z+"]"}function c(k){return p(y(k.actual),128)+" "+k.operator+" "+p(y(k.expected),128)}function b(k,P,z,I,D){throw new o.AssertionError({message:z,actual:k,expected:P,operator:I,stackStartFunction:D})}o.fail=b;function l(k,P){k||b(k,!0,P,"==",o.ok)}o.ok=l,o.equal=function(P,z,I){P!=z&&b(P,z,I,"==",o.equal)},o.notEqual=function(P,z,I){P==z&&b(P,z,I,"!=",o.notEqual)},o.deepEqual=function(P,z,I){_(P,z,!1)||b(P,z,I,"deepEqual",o.deepEqual)},o.deepStrictEqual=function(P,z,I){_(P,z,!0)||b(P,z,I,"deepStrictEqual",o.deepStrictEqual)};function _(k,P,z,I){if(k===P)return!0;if(T(k)&&T(P))return M(k,P)===0;if(e.isDate(k)&&e.isDate(P))return k.getTime()===P.getTime();if(e.isRegExp(k)&&e.isRegExp(P))return k.source===P.source&&k.global===P.global&&k.multiline===P.multiline&&k.lastIndex===P.lastIndex&&k.ignoreCase===P.ignoreCase;if((k===null||typeof k!="object")&&(P===null||typeof P!="object"))return z?k===P:k==P;if(f(k)&&f(P)&&t(k)===t(P)&&!(k instanceof Float32Array||k instanceof Float64Array))return M(new Uint8Array(k.buffer),new Uint8Array(P.buffer))===0;if(T(k)!==T(P))return!1;I=I||{actual:[],expected:[]};var D=I.actual.indexOf(k);return D!==-1&&D===I.expected.indexOf(P)?!0:(I.actual.push(k),I.expected.push(P),A(k,P,z,I))}function s(k){return Object.prototype.toString.call(k)=="[object Arguments]"}function A(k,P,z,I){if(k==null||P===null||P===void 0)return!1;if(e.isPrimitive(k)||e.isPrimitive(P))return k===P;if(z&&Object.getPrototypeOf(k)!==Object.getPrototypeOf(P))return!1;var D=s(k),R=s(P);if(D&&!R||!D&&R)return!1;if(D)return k=n.call(k),P=n.call(P),_(k,P,z);var O=S(k),F=S(P),V,G;if(O.length!==F.length)return!1;for(O.sort(),F.sort(),G=O.length-1;G>=0;G--)if(O[G]!==F[G])return!1;for(G=O.length-1;G>=0;G--)if(V=O[G],!_(k[V],P[V],z,I))return!1;return!0}o.notDeepEqual=function(P,z,I){_(P,z,!1)&&b(P,z,I,"notDeepEqual",o.notDeepEqual)},o.notDeepStrictEqual=m;function m(k,P,z){_(k,P,!0)&&b(k,P,z,"notDeepStrictEqual",m)}o.strictEqual=function(P,z,I){P!==z&&b(P,z,I,"===",o.strictEqual)},o.notStrictEqual=function(P,z,I){P===z&&b(P,z,I,"!==",o.notStrictEqual)};function h(k,P){if(!k||!P)return!1;if(Object.prototype.toString.call(P)=="[object RegExp]")return P.test(k);try{if(k instanceof P)return!0}catch{}return Error.isPrototypeOf(P)?!1:P.call({},k)===!0}function x(k){var P;try{k()}catch(z){P=z}return P}function u(k,P,z,I){var D;if(typeof P!="function")throw new TypeError('"block" argument must be a function');typeof z=="string"&&(I=z,z=null),D=x(P),I=(z&&z.name?" ("+z.name+").":".")+(I?" "+I:"."),k&&!D&&b(D,z,"Missing expected exception"+I);var R=typeof I=="string",O=!k&&e.isError(D),F=!k&&D&&!z;if((O&&R&&h(D,z)||F)&&b(D,z,"Got unwanted exception"+I),k&&D&&z&&!h(D,z)||!k&&D)throw D}o.throws=function(k,P,z){u(!0,k,P,z)},o.doesNotThrow=function(k,P,z){u(!1,k,P,z)},o.ifError=function(k){if(k)throw k};function L(k,P){k||b(k,!0,P,"==",L)}o.strict=v(L,o,{equal:o.strictEqual,deepEqual:o.deepStrictEqual,notEqual:o.notStrictEqual,notDeepEqual:o.notDeepStrictEqual}),o.strict.strict=o.strict;var S=Object.keys||function(k){var P=[];for(var z in k)a.call(k,z)&&P.push(z);return P}}).call(this)}).call(this,typeof To<"u"?To:typeof self<"u"?self:typeof window<"u"?window:{})},{"object-assign":247,"util/":78}],76:[function(d,ne,ae){typeof Object.create=="function"?ne.exports=function(v,M){v.super_=M,v.prototype=Object.create(M.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}})}:ne.exports=function(v,M){v.super_=M;var T=function(){};T.prototype=M.prototype,v.prototype=new T,v.prototype.constructor=v}},{}],77:[function(d,ne,ae){ne.exports=function(v){return v&&typeof v=="object"&&typeof v.copy=="function"&&typeof v.fill=="function"&&typeof v.readUInt8=="function"}},{}],78:[function(d,ne,ae){(function(w,v){(function(){var M=/%[sdj%]/g;ae.format=function(F){if(!A(F)){for(var V=[],G=0;G<arguments.length;G++)V.push(a(arguments[G]));return V.join(" ")}for(var G=1,J=arguments,Z=J.length,Y=String(F).replace(M,function(re){if(re==="%%")return"%";if(G>=Z)return re;switch(re){case"%s":return String(J[G++]);case"%d":return Number(J[G++]);case"%j":try{return JSON.stringify(J[G++])}catch{return"[Circular]"}default:return re}}),j=J[G];G<Z;j=J[++G])l(j)||!u(j)?Y+=" "+j:Y+=" "+a(j);return Y},ae.deprecate=function(F,V){if(h(v.process))return function(){return ae.deprecate(F,V).apply(this,arguments)};if(w.noDeprecation===!0)return F;var G=!1;function J(){if(!G){if(w.throwDeprecation)throw new Error(V);w.traceDeprecation?console.trace(V):console.error(V),G=!0}return F.apply(this,arguments)}return J};var T={},e;ae.debuglog=function(F){if(h(e)&&(e={}.NODE_DEBUG||""),F=F.toUpperCase(),!T[F])if(new RegExp("\\b"+F+"\\b","i").test(e)){var V=w.pid;T[F]=function(){var G=ae.format.apply(ae,arguments);console.error("%s %d: %s",F,V,G)}}else T[F]=function(){};return T[F]};function a(F,V){var G={seen:[],stylize:r};return arguments.length>=3&&(G.depth=arguments[2]),arguments.length>=4&&(G.colors=arguments[3]),b(V)?G.showHidden=V:V&&ae._extend(G,V),h(G.showHidden)&&(G.showHidden=!1),h(G.depth)&&(G.depth=2),h(G.colors)&&(G.colors=!1),h(G.customInspect)&&(G.customInspect=!0),G.colors&&(G.stylize=n),f(G,F,G.depth)}ae.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function n(F,V){var G=a.styles[V];return G?"\x1B["+a.colors[G][0]+"m"+F+"\x1B["+a.colors[G][1]+"m":F}function r(F,V){return F}function t(F){var V={};return F.forEach(function(G,J){V[G]=!0}),V}function f(F,V,G){if(F.customInspect&&V&&k(V.inspect)&&V.inspect!==ae.inspect&&!(V.constructor&&V.constructor.prototype===V)){var J=V.inspect(G,F);return A(J)||(J=f(F,J,G)),J}var Z=o(F,V);if(Z)return Z;var Y=Object.keys(V),j=t(Y);if(F.showHidden&&(Y=Object.getOwnPropertyNames(V)),S(V)&&(Y.indexOf("message")>=0||Y.indexOf("description")>=0))return i(V);if(Y.length===0){if(k(V)){var re=V.name?": "+V.name:"";return F.stylize("[Function"+re+"]","special")}if(x(V))return F.stylize(RegExp.prototype.toString.call(V),"regexp");if(L(V))return F.stylize(Date.prototype.toString.call(V),"date");if(S(V))return i(V)}var se="",oe=!1,N=["{","}"];if(c(V)&&(oe=!0,N=["[","]"]),k(V)){var U=V.name?": "+V.name:"";se=" [Function"+U+"]"}if(x(V)&&(se=" "+RegExp.prototype.toString.call(V)),L(V)&&(se=" "+Date.prototype.toUTCString.call(V)),S(V)&&(se=" "+i(V)),Y.length===0&&(!oe||V.length==0))return N[0]+se+N[1];if(G<0)return x(V)?F.stylize(RegExp.prototype.toString.call(V),"regexp"):F.stylize("[Object]","special");F.seen.push(V);var q;return oe?q=g(F,V,G,j,Y):q=Y.map(function(Q){return p(F,V,G,j,Q,oe)}),F.seen.pop(),y(q,se,N)}function o(F,V){if(h(V))return F.stylize("undefined","undefined");if(A(V)){var G="'"+JSON.stringify(V).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return F.stylize(G,"string")}if(s(V))return F.stylize(""+V,"number");if(b(V))return F.stylize(""+V,"boolean");if(l(V))return F.stylize("null","null")}function i(F){return"["+Error.prototype.toString.call(F)+"]"}function g(F,V,G,J,Z){for(var Y=[],j=0,re=V.length;j<re;++j)O(V,String(j))?Y.push(p(F,V,G,J,String(j),!0)):Y.push("");return Z.forEach(function(se){se.match(/^\d+$/)||Y.push(p(F,V,G,J,se,!0))}),Y}function p(F,V,G,J,Z,Y){var j,re,se;if(se=Object.getOwnPropertyDescriptor(V,Z)||{value:V[Z]},se.get?se.set?re=F.stylize("[Getter/Setter]","special"):re=F.stylize("[Getter]","special"):se.set&&(re=F.stylize("[Setter]","special")),O(J,Z)||(j="["+Z+"]"),re||(F.seen.indexOf(se.value)<0?(l(G)?re=f(F,se.value,null):re=f(F,se.value,G-1),re.indexOf(`
`)>-1&&(Y?re=re.split(`
`).map(function(oe){return"  "+oe}).join(`
`).substr(2):re=`
`+re.split(`
`).map(function(oe){return"   "+oe}).join(`
`))):re=F.stylize("[Circular]","special")),h(j)){if(Y&&Z.match(/^\d+$/))return re;j=JSON.stringify(""+Z),j.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(j=j.substr(1,j.length-2),j=F.stylize(j,"name")):(j=j.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),j=F.stylize(j,"string"))}return j+": "+re}function y(F,V,G){var J=F.reduce(function(Z,Y){return Y.indexOf(`
`)>=0,Z+Y.replace(/\u001b\[\d\d?m/g,"").length+1},0);return J>60?G[0]+(V===""?"":V+`
 `)+" "+F.join(`,
  `)+" "+G[1]:G[0]+V+" "+F.join(", ")+" "+G[1]}function c(F){return Array.isArray(F)}ae.isArray=c;function b(F){return typeof F=="boolean"}ae.isBoolean=b;function l(F){return F===null}ae.isNull=l;function _(F){return F==null}ae.isNullOrUndefined=_;function s(F){return typeof F=="number"}ae.isNumber=s;function A(F){return typeof F=="string"}ae.isString=A;function m(F){return typeof F=="symbol"}ae.isSymbol=m;function h(F){return F===void 0}ae.isUndefined=h;function x(F){return u(F)&&z(F)==="[object RegExp]"}ae.isRegExp=x;function u(F){return typeof F=="object"&&F!==null}ae.isObject=u;function L(F){return u(F)&&z(F)==="[object Date]"}ae.isDate=L;function S(F){return u(F)&&(z(F)==="[object Error]"||F instanceof Error)}ae.isError=S;function k(F){return typeof F=="function"}ae.isFunction=k;function P(F){return F===null||typeof F=="boolean"||typeof F=="number"||typeof F=="string"||typeof F=="symbol"||typeof F>"u"}ae.isPrimitive=P,ae.isBuffer=d("./support/isBuffer");function z(F){return Object.prototype.toString.call(F)}function I(F){return F<10?"0"+F.toString(10):F.toString(10)}var D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function R(){var F=new Date,V=[I(F.getHours()),I(F.getMinutes()),I(F.getSeconds())].join(":");return[F.getDate(),D[F.getMonth()],V].join(" ")}ae.log=function(){console.log("%s - %s",R(),ae.format.apply(ae,arguments))},ae.inherits=d("inherits"),ae._extend=function(F,V){if(!V||!u(V))return F;for(var G=Object.keys(V),J=G.length;J--;)F[G[J]]=V[G[J]];return F};function O(F,V){return Object.prototype.hasOwnProperty.call(F,V)}}).call(this)}).call(this,d("_process"),typeof To<"u"?To:typeof self<"u"?self:typeof window<"u"?window:{})},{"./support/isBuffer":77,_process:277,inherits:76}],79:[function(d,ne,ae){ae.byteLength=r,ae.toByteArray=f,ae.fromByteArray=g;for(var w=[],v=[],M=typeof Uint8Array<"u"?Uint8Array:Array,T="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,a=T.length;e<a;++e)w[e]=T[e],v[T.charCodeAt(e)]=e;v["-".charCodeAt(0)]=62,v["_".charCodeAt(0)]=63;function n(p){var y=p.length;if(y%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=p.indexOf("=");c===-1&&(c=y);var b=c===y?0:4-c%4;return[c,b]}function r(p){var y=n(p),c=y[0],b=y[1];return(c+b)*3/4-b}function t(p,y,c){return(y+c)*3/4-c}function f(p){var y,c=n(p),b=c[0],l=c[1],_=new M(t(p,b,l)),s=0,A=l>0?b-4:b,m;for(m=0;m<A;m+=4)y=v[p.charCodeAt(m)]<<18|v[p.charCodeAt(m+1)]<<12|v[p.charCodeAt(m+2)]<<6|v[p.charCodeAt(m+3)],_[s++]=y>>16&255,_[s++]=y>>8&255,_[s++]=y&255;return l===2&&(y=v[p.charCodeAt(m)]<<2|v[p.charCodeAt(m+1)]>>4,_[s++]=y&255),l===1&&(y=v[p.charCodeAt(m)]<<10|v[p.charCodeAt(m+1)]<<4|v[p.charCodeAt(m+2)]>>2,_[s++]=y>>8&255,_[s++]=y&255),_}function o(p){return w[p>>18&63]+w[p>>12&63]+w[p>>6&63]+w[p&63]}function i(p,y,c){for(var b,l=[],_=y;_<c;_+=3)b=(p[_]<<16&16711680)+(p[_+1]<<8&65280)+(p[_+2]&255),l.push(o(b));return l.join("")}function g(p){for(var y,c=p.length,b=c%3,l=[],_=16383,s=0,A=c-b;s<A;s+=_)l.push(i(p,s,s+_>A?A:s+_));return b===1?(y=p[c-1],l.push(w[y>>2]+w[y<<4&63]+"==")):b===2&&(y=(p[c-2]<<8)+p[c-1],l.push(w[y>>10]+w[y>>4&63]+w[y<<2&63]+"=")),l.join("")}},{}],80:[function(d,ne,ae){function w(n,r,t,f,o){for(var i=o+1;f<=o;){var g=f+o>>>1,p=n[g],y=t!==void 0?t(p,r):p-r;y>=0?(i=g,o=g-1):f=g+1}return i}function v(n,r,t,f,o){for(var i=o+1;f<=o;){var g=f+o>>>1,p=n[g],y=t!==void 0?t(p,r):p-r;y>0?(i=g,o=g-1):f=g+1}return i}function M(n,r,t,f,o){for(var i=f-1;f<=o;){var g=f+o>>>1,p=n[g],y=t!==void 0?t(p,r):p-r;y<0?(i=g,f=g+1):o=g-1}return i}function T(n,r,t,f,o){for(var i=f-1;f<=o;){var g=f+o>>>1,p=n[g],y=t!==void 0?t(p,r):p-r;y<=0?(i=g,f=g+1):o=g-1}return i}function e(n,r,t,f,o){for(;f<=o;){var i=f+o>>>1,g=n[i],p=t!==void 0?t(g,r):g-r;if(p===0)return i;p<=0?f=i+1:o=i-1}return-1}function a(n,r,t,f,o,i){return typeof t=="function"?i(n,r,t,f===void 0?0:f|0,o===void 0?n.length-1:o|0):i(n,r,void 0,t===void 0?0:t|0,f===void 0?n.length-1:f|0)}ne.exports={ge:function(n,r,t,f,o){return a(n,r,t,f,o,w)},gt:function(n,r,t,f,o){return a(n,r,t,f,o,v)},lt:function(n,r,t,f,o){return a(n,r,t,f,o,M)},le:function(n,r,t,f,o){return a(n,r,t,f,o,T)},eq:function(n,r,t,f,o){return a(n,r,t,f,o,e)}}},{}],81:[function(d,ne,ae){var w=32;ae.INT_BITS=w,ae.INT_MAX=2147483647,ae.INT_MIN=-1<<w-1,ae.sign=function(T){return(T>0)-(T<0)},ae.abs=function(T){var e=T>>w-1;return(T^e)-e},ae.min=function(T,e){return e^(T^e)&-(T<e)},ae.max=function(T,e){return T^(T^e)&-(T<e)},ae.isPow2=function(T){return!(T&T-1)&&!!T},ae.log2=function(T){var e,a;return e=(T>65535)<<4,T>>>=e,a=(T>255)<<3,T>>>=a,e|=a,a=(T>15)<<2,T>>>=a,e|=a,a=(T>3)<<1,T>>>=a,e|=a,e|T>>1},ae.log10=function(T){return T>=1e9?9:T>=1e8?8:T>=1e7?7:T>=1e6?6:T>=1e5?5:T>=1e4?4:T>=1e3?3:T>=100?2:T>=10?1:0},ae.popCount=function(T){return T=T-(T>>>1&1431655765),T=(T&858993459)+(T>>>2&858993459),(T+(T>>>4)&252645135)*16843009>>>24};function v(T){var e=32;return T&=-T,T&&e--,T&65535&&(e-=16),T&16711935&&(e-=8),T&252645135&&(e-=4),T&858993459&&(e-=2),T&1431655765&&(e-=1),e}ae.countTrailingZeros=v,ae.nextPow2=function(T){return T+=T===0,--T,T|=T>>>1,T|=T>>>2,T|=T>>>4,T|=T>>>8,T|=T>>>16,T+1},ae.prevPow2=function(T){return T|=T>>>1,T|=T>>>2,T|=T>>>4,T|=T>>>8,T|=T>>>16,T-(T>>>1)},ae.parity=function(T){return T^=T>>>16,T^=T>>>8,T^=T>>>4,T&=15,27030>>>T&1};var M=new Array(256);(function(T){for(var e=0;e<256;++e){var a=e,n=e,r=7;for(a>>>=1;a;a>>>=1)n<<=1,n|=a&1,--r;T[e]=n<<r&255}})(M),ae.reverse=function(T){return M[T&255]<<24|M[T>>>8&255]<<16|M[T>>>16&255]<<8|M[T>>>24&255]},ae.interleave2=function(T,e){return T&=65535,T=(T|T<<8)&16711935,T=(T|T<<4)&252645135,T=(T|T<<2)&858993459,T=(T|T<<1)&1431655765,e&=65535,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,T|e<<1},ae.deinterleave2=function(T,e){return T=T>>>e&1431655765,T=(T|T>>>1)&858993459,T=(T|T>>>2)&252645135,T=(T|T>>>4)&16711935,T=(T|T>>>16)&65535,T<<16>>16},ae.interleave3=function(T,e,a){return T&=1023,T=(T|T<<16)&4278190335,T=(T|T<<8)&251719695,T=(T|T<<4)&3272356035,T=(T|T<<2)&1227133513,e&=1023,e=(e|e<<16)&4278190335,e=(e|e<<8)&251719695,e=(e|e<<4)&3272356035,e=(e|e<<2)&1227133513,T|=e<<1,a&=1023,a=(a|a<<16)&4278190335,a=(a|a<<8)&251719695,a=(a|a<<4)&3272356035,a=(a|a<<2)&1227133513,T|a<<2},ae.deinterleave3=function(T,e){return T=T>>>e&1227133513,T=(T|T>>>2)&3272356035,T=(T|T>>>4)&251719695,T=(T|T>>>8)&4278190335,T=(T|T>>>16)&1023,T<<22>>22},ae.nextCombination=function(T){var e=T|T-1;return e+1|(~e&-~e)-1>>>v(T)+1}},{}],82:[function(d,ne,ae){var w=d("clamp");ne.exports=M;var v=1e20;function M(a,n){n||(n={});var r=n.cutoff==null?.25:n.cutoff,t=n.radius==null?8:n.radius,f=n.channel||0,o,i,g,p,y,c,b,l,_,s,A;if(ArrayBuffer.isView(a)||Array.isArray(a)){if(!n.width||!n.height)throw Error("For raw data width and height should be provided by options");o=n.width,i=n.height,p=a,n.stride?c=n.stride:c=Math.floor(a.length/o/i)}else window.HTMLCanvasElement&&a instanceof window.HTMLCanvasElement?(l=a,b=l.getContext("2d"),o=l.width,i=l.height,_=b.getImageData(0,0,o,i),p=_.data,c=4):window.CanvasRenderingContext2D&&a instanceof window.CanvasRenderingContext2D?(l=a.canvas,b=a,o=l.width,i=l.height,_=b.getImageData(0,0,o,i),p=_.data,c=4):window.ImageData&&a instanceof window.ImageData&&(_=a,o=a.width,i=a.height,p=_.data,c=4);if(g=Math.max(o,i),window.Uint8ClampedArray&&p instanceof window.Uint8ClampedArray||window.Uint8Array&&p instanceof window.Uint8Array)for(y=p,p=Array(o*i),s=0,A=y.length;s<A;s++)p[s]=y[s*c+f]/255;else if(c!==1)throw Error("Raw data can have only 1 value per pixel");var m=Array(o*i),h=Array(o*i),x=Array(g),u=Array(g),L=Array(g+1),S=Array(g);for(s=0,A=o*i;s<A;s++){var k=p[s];m[s]=k===1?0:k===0?v:Math.pow(Math.max(0,.5-k),2),h[s]=k===1?v:k===0?0:Math.pow(Math.max(0,k-.5),2)}T(m,o,i,x,u,S,L),T(h,o,i,x,u,S,L);var P=window.Float32Array?new Float32Array(o*i):new Array(o*i);for(s=0,A=o*i;s<A;s++)P[s]=w(1-((m[s]-h[s])/t+r),0,1);return P}function T(a,n,r,t,f,o,i){for(var g=0;g<n;g++){for(var p=0;p<r;p++)t[p]=a[p*n+g];for(e(t,f,o,i,r),p=0;p<r;p++)a[p*n+g]=f[p]}for(p=0;p<r;p++){for(g=0;g<n;g++)t[g]=a[p*n+g];for(e(t,f,o,i,n),g=0;g<n;g++)a[p*n+g]=Math.sqrt(f[g])}}function e(a,n,r,t,f){r[0]=0,t[0]=-v,t[1]=+v;for(var o=1,i=0;o<f;o++){for(var g=(a[o]+o*o-(a[r[i]]+r[i]*r[i]))/(2*o-2*r[i]);g<=t[i];)i--,g=(a[o]+o*o-(a[r[i]]+r[i]*r[i]))/(2*o-2*r[i]);i++,r[i]=o,t[i]=g,t[i+1]=+v}for(o=0,i=0;o<f;o++){for(;t[i+1]<o;)i++;n[o]=(o-r[i])*(o-r[i])+a[r[i]]}}},{clamp:86}],83:[function(d,ne,ae){},{}],84:[function(d,ne,ae){var w=typeof Reflect=="object"?Reflect:null,v=w&&typeof w.apply=="function"?w.apply:function(s,A,m){return Function.prototype.apply.call(s,A,m)},M;w&&typeof w.ownKeys=="function"?M=w.ownKeys:Object.getOwnPropertySymbols?M=function(s){return Object.getOwnPropertyNames(s).concat(Object.getOwnPropertySymbols(s))}:M=function(s){return Object.getOwnPropertyNames(s)};function T(_){console&&console.warn&&console.warn(_)}var e=Number.isNaN||function(s){return s!==s};function a(){a.init.call(this)}ne.exports=a,ne.exports.once=l,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var n=10;function r(_){if(typeof _!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof _)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return n},set:function(_){if(typeof _!="number"||_<0||e(_))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+_+".");n=_}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(s){if(typeof s!="number"||s<0||e(s))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+s+".");return this._maxListeners=s,this};function t(_){return _._maxListeners===void 0?a.defaultMaxListeners:_._maxListeners}a.prototype.getMaxListeners=function(){return t(this)},a.prototype.emit=function(s){for(var A=[],m=1;m<arguments.length;m++)A.push(arguments[m]);var h=s==="error",x=this._events;if(x!==void 0)h=h&&x.error===void 0;else if(!h)return!1;if(h){var u;if(A.length>0&&(u=A[0]),u instanceof Error)throw u;var L=new Error("Unhandled error."+(u?" ("+u.message+")":""));throw L.context=u,L}var S=x[s];if(S===void 0)return!1;if(typeof S=="function")v(S,this,A);else for(var k=S.length,P=y(S,k),m=0;m<k;++m)v(P[m],this,A);return!0};function f(_,s,A,m){var h,x,u;if(r(A),x=_._events,x===void 0?(x=_._events=Object.create(null),_._eventsCount=0):(x.newListener!==void 0&&(_.emit("newListener",s,A.listener?A.listener:A),x=_._events),u=x[s]),u===void 0)u=x[s]=A,++_._eventsCount;else if(typeof u=="function"?u=x[s]=m?[A,u]:[u,A]:m?u.unshift(A):u.push(A),h=t(_),h>0&&u.length>h&&!u.warned){u.warned=!0;var L=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(s)+" listeners added. Use emitter.setMaxListeners() to increase limit");L.name="MaxListenersExceededWarning",L.emitter=_,L.type=s,L.count=u.length,T(L)}return _}a.prototype.addListener=function(s,A){return f(this,s,A,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(s,A){return f(this,s,A,!0)};function o(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function i(_,s,A){var m={fired:!1,wrapFn:void 0,target:_,type:s,listener:A},h=o.bind(m);return h.listener=A,m.wrapFn=h,h}a.prototype.once=function(s,A){return r(A),this.on(s,i(this,s,A)),this},a.prototype.prependOnceListener=function(s,A){return r(A),this.prependListener(s,i(this,s,A)),this},a.prototype.removeListener=function(s,A){var m,h,x,u,L;if(r(A),h=this._events,h===void 0)return this;if(m=h[s],m===void 0)return this;if(m===A||m.listener===A)--this._eventsCount===0?this._events=Object.create(null):(delete h[s],h.removeListener&&this.emit("removeListener",s,m.listener||A));else if(typeof m!="function"){for(x=-1,u=m.length-1;u>=0;u--)if(m[u]===A||m[u].listener===A){L=m[u].listener,x=u;break}if(x<0)return this;x===0?m.shift():c(m,x),m.length===1&&(h[s]=m[0]),h.removeListener!==void 0&&this.emit("removeListener",s,L||A)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(s){var A,m,h;if(m=this._events,m===void 0)return this;if(m.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):m[s]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete m[s]),this;if(arguments.length===0){var x=Object.keys(m),u;for(h=0;h<x.length;++h)u=x[h],u!=="removeListener"&&this.removeAllListeners(u);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(A=m[s],typeof A=="function")this.removeListener(s,A);else if(A!==void 0)for(h=A.length-1;h>=0;h--)this.removeListener(s,A[h]);return this};function g(_,s,A){var m=_._events;if(m===void 0)return[];var h=m[s];return h===void 0?[]:typeof h=="function"?A?[h.listener||h]:[h]:A?b(h):y(h,h.length)}a.prototype.listeners=function(s){return g(this,s,!0)},a.prototype.rawListeners=function(s){return g(this,s,!1)},a.listenerCount=function(_,s){return typeof _.listenerCount=="function"?_.listenerCount(s):p.call(_,s)},a.prototype.listenerCount=p;function p(_){var s=this._events;if(s!==void 0){var A=s[_];if(typeof A=="function")return 1;if(A!==void 0)return A.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?M(this._events):[]};function y(_,s){for(var A=new Array(s),m=0;m<s;++m)A[m]=_[m];return A}function c(_,s){for(;s+1<_.length;s++)_[s]=_[s+1];_.pop()}function b(_){for(var s=new Array(_.length),A=0;A<s.length;++A)s[A]=_[A].listener||_[A];return s}function l(_,s){return new Promise(function(A,m){function h(){x!==void 0&&_.removeListener("error",x),A([].slice.call(arguments))}var x;s!=="error"&&(x=function(L){_.removeListener(s,h),m(L)},_.once("error",x)),_.once(s,h)})}},{}],85:[function(d,ne,ae){(function(w){(function(){var v=d("base64-js"),M=d("ieee754");ae.Buffer=n,ae.SlowBuffer=b,ae.INSPECT_MAX_BYTES=50;var T=2147483647;ae.kMaxLength=T,n.TYPED_ARRAY_SUPPORT=e(),!n.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function e(){try{var te=new Uint8Array(1);return te.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},te.foo()===42}catch{return!1}}Object.defineProperty(n.prototype,"parent",{enumerable:!0,get:function(){if(!!n.isBuffer(this))return this.buffer}}),Object.defineProperty(n.prototype,"offset",{enumerable:!0,get:function(){if(!!n.isBuffer(this))return this.byteOffset}});function a(te){if(te>T)throw new RangeError('The value "'+te+'" is invalid for option "size"');var ie=new Uint8Array(te);return ie.__proto__=n.prototype,ie}function n(te,ie,le){if(typeof te=="number"){if(typeof ie=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return o(te)}return r(te,ie,le)}typeof Symbol<"u"&&Symbol.species!=null&&n[Symbol.species]===n&&Object.defineProperty(n,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),n.poolSize=8192;function r(te,ie,le){if(typeof te=="string")return i(te,ie);if(ArrayBuffer.isView(te))return g(te);if(te==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof te);if(X(te,ArrayBuffer)||te&&X(te.buffer,ArrayBuffer))return p(te,ie,le);if(typeof te=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ge=te.valueOf&&te.valueOf();if(ge!=null&&ge!==te)return n.from(ge,ie,le);var fe=y(te);if(fe)return fe;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof te[Symbol.toPrimitive]=="function")return n.from(te[Symbol.toPrimitive]("string"),ie,le);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof te)}n.from=function(te,ie,le){return r(te,ie,le)},n.prototype.__proto__=Uint8Array.prototype,n.__proto__=Uint8Array;function t(te){if(typeof te!="number")throw new TypeError('"size" argument must be of type number');if(te<0)throw new RangeError('The value "'+te+'" is invalid for option "size"')}function f(te,ie,le){return t(te),te<=0?a(te):ie!==void 0?typeof le=="string"?a(te).fill(ie,le):a(te).fill(ie):a(te)}n.alloc=function(te,ie,le){return f(te,ie,le)};function o(te){return t(te),a(te<0?0:c(te)|0)}n.allocUnsafe=function(te){return o(te)},n.allocUnsafeSlow=function(te){return o(te)};function i(te,ie){if((typeof ie!="string"||ie==="")&&(ie="utf8"),!n.isEncoding(ie))throw new TypeError("Unknown encoding: "+ie);var le=l(te,ie)|0,ge=a(le),fe=ge.write(te,ie);return fe!==le&&(ge=ge.slice(0,fe)),ge}function g(te){for(var ie=te.length<0?0:c(te.length)|0,le=a(ie),ge=0;ge<ie;ge+=1)le[ge]=te[ge]&255;return le}function p(te,ie,le){if(ie<0||te.byteLength<ie)throw new RangeError('"offset" is outside of buffer bounds');if(te.byteLength<ie+(le||0))throw new RangeError('"length" is outside of buffer bounds');var ge;return ie===void 0&&le===void 0?ge=new Uint8Array(te):le===void 0?ge=new Uint8Array(te,ie):ge=new Uint8Array(te,ie,le),ge.__proto__=n.prototype,ge}function y(te){if(n.isBuffer(te)){var ie=c(te.length)|0,le=a(ie);return le.length===0||te.copy(le,0,0,ie),le}if(te.length!==void 0)return typeof te.length!="number"||ee(te.length)?a(0):g(te);if(te.type==="Buffer"&&Array.isArray(te.data))return g(te.data)}function c(te){if(te>=T)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+T.toString(16)+" bytes");return te|0}function b(te){return+te!=te&&(te=0),n.alloc(+te)}n.isBuffer=function(ie){return ie!=null&&ie._isBuffer===!0&&ie!==n.prototype},n.compare=function(ie,le){if(X(ie,Uint8Array)&&(ie=n.from(ie,ie.offset,ie.byteLength)),X(le,Uint8Array)&&(le=n.from(le,le.offset,le.byteLength)),!n.isBuffer(ie)||!n.isBuffer(le))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ie===le)return 0;for(var ge=ie.length,fe=le.length,pe=0,ye=Math.min(ge,fe);pe<ye;++pe)if(ie[pe]!==le[pe]){ge=ie[pe],fe=le[pe];break}return ge<fe?-1:fe<ge?1:0},n.isEncoding=function(ie){switch(String(ie).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(ie,le){if(!Array.isArray(ie))throw new TypeError('"list" argument must be an Array of Buffers');if(ie.length===0)return n.alloc(0);var ge;if(le===void 0)for(le=0,ge=0;ge<ie.length;++ge)le+=ie[ge].length;var fe=n.allocUnsafe(le),pe=0;for(ge=0;ge<ie.length;++ge){var ye=ie[ge];if(X(ye,Uint8Array)&&(ye=n.from(ye)),!n.isBuffer(ye))throw new TypeError('"list" argument must be an Array of Buffers');ye.copy(fe,pe),pe+=ye.length}return fe};function l(te,ie){if(n.isBuffer(te))return te.length;if(ArrayBuffer.isView(te)||X(te,ArrayBuffer))return te.byteLength;if(typeof te!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof te);var le=te.length,ge=arguments.length>2&&arguments[2]===!0;if(!ge&&le===0)return 0;for(var fe=!1;;)switch(ie){case"ascii":case"latin1":case"binary":return le;case"utf8":case"utf-8":return N(te).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le*2;case"hex":return le>>>1;case"base64":return Q(te).length;default:if(fe)return ge?-1:N(te).length;ie=(""+ie).toLowerCase(),fe=!0}}n.byteLength=l;function _(te,ie,le){var ge=!1;if((ie===void 0||ie<0)&&(ie=0),ie>this.length||((le===void 0||le>this.length)&&(le=this.length),le<=0)||(le>>>=0,ie>>>=0,le<=ie))return"";for(te||(te="utf8");;)switch(te){case"hex":return F(this,ie,le);case"utf8":case"utf-8":return z(this,ie,le);case"ascii":return R(this,ie,le);case"latin1":case"binary":return O(this,ie,le);case"base64":return P(this,ie,le);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,ie,le);default:if(ge)throw new TypeError("Unknown encoding: "+te);te=(te+"").toLowerCase(),ge=!0}}n.prototype._isBuffer=!0;function s(te,ie,le){var ge=te[ie];te[ie]=te[le],te[le]=ge}n.prototype.swap16=function(){var ie=this.length;if(ie%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var le=0;le<ie;le+=2)s(this,le,le+1);return this},n.prototype.swap32=function(){var ie=this.length;if(ie%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var le=0;le<ie;le+=4)s(this,le,le+3),s(this,le+1,le+2);return this},n.prototype.swap64=function(){var ie=this.length;if(ie%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var le=0;le<ie;le+=8)s(this,le,le+7),s(this,le+1,le+6),s(this,le+2,le+5),s(this,le+3,le+4);return this},n.prototype.toString=function(){var ie=this.length;return ie===0?"":arguments.length===0?z(this,0,ie):_.apply(this,arguments)},n.prototype.toLocaleString=n.prototype.toString,n.prototype.equals=function(ie){if(!n.isBuffer(ie))throw new TypeError("Argument must be a Buffer");return this===ie?!0:n.compare(this,ie)===0},n.prototype.inspect=function(){var ie="",le=ae.INSPECT_MAX_BYTES;return ie=this.toString("hex",0,le).replace(/(.{2})/g,"$1 ").trim(),this.length>le&&(ie+=" ... "),"<Buffer "+ie+">"},n.prototype.compare=function(ie,le,ge,fe,pe){if(X(ie,Uint8Array)&&(ie=n.from(ie,ie.offset,ie.byteLength)),!n.isBuffer(ie))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ie);if(le===void 0&&(le=0),ge===void 0&&(ge=ie?ie.length:0),fe===void 0&&(fe=0),pe===void 0&&(pe=this.length),le<0||ge>ie.length||fe<0||pe>this.length)throw new RangeError("out of range index");if(fe>=pe&&le>=ge)return 0;if(fe>=pe)return-1;if(le>=ge)return 1;if(le>>>=0,ge>>>=0,fe>>>=0,pe>>>=0,this===ie)return 0;for(var ye=pe-fe,Te=ge-le,_e=Math.min(ye,Te),De=this.slice(fe,pe),Be=ie.slice(le,ge),Ue=0;Ue<_e;++Ue)if(De[Ue]!==Be[Ue]){ye=De[Ue],Te=Be[Ue];break}return ye<Te?-1:Te<ye?1:0};function A(te,ie,le,ge,fe){if(te.length===0)return-1;if(typeof le=="string"?(ge=le,le=0):le>2147483647?le=2147483647:le<-2147483648&&(le=-2147483648),le=+le,ee(le)&&(le=fe?0:te.length-1),le<0&&(le=te.length+le),le>=te.length){if(fe)return-1;le=te.length-1}else if(le<0)if(fe)le=0;else return-1;if(typeof ie=="string"&&(ie=n.from(ie,ge)),n.isBuffer(ie))return ie.length===0?-1:m(te,ie,le,ge,fe);if(typeof ie=="number")return ie=ie&255,typeof Uint8Array.prototype.indexOf=="function"?fe?Uint8Array.prototype.indexOf.call(te,ie,le):Uint8Array.prototype.lastIndexOf.call(te,ie,le):m(te,[ie],le,ge,fe);throw new TypeError("val must be string, number or Buffer")}function m(te,ie,le,ge,fe){var pe=1,ye=te.length,Te=ie.length;if(ge!==void 0&&(ge=String(ge).toLowerCase(),ge==="ucs2"||ge==="ucs-2"||ge==="utf16le"||ge==="utf-16le")){if(te.length<2||ie.length<2)return-1;pe=2,ye/=2,Te/=2,le/=2}function _e(Pe,Ve){return pe===1?Pe[Ve]:Pe.readUInt16BE(Ve*pe)}var De;if(fe){var Be=-1;for(De=le;De<ye;De++)if(_e(te,De)===_e(ie,Be===-1?0:De-Be)){if(Be===-1&&(Be=De),De-Be+1===Te)return Be*pe}else Be!==-1&&(De-=De-Be),Be=-1}else for(le+Te>ye&&(le=ye-Te),De=le;De>=0;De--){for(var Ue=!0,xe=0;xe<Te;xe++)if(_e(te,De+xe)!==_e(ie,xe)){Ue=!1;break}if(Ue)return De}return-1}n.prototype.includes=function(ie,le,ge){return this.indexOf(ie,le,ge)!==-1},n.prototype.indexOf=function(ie,le,ge){return A(this,ie,le,ge,!0)},n.prototype.lastIndexOf=function(ie,le,ge){return A(this,ie,le,ge,!1)};function h(te,ie,le,ge){le=Number(le)||0;var fe=te.length-le;ge?(ge=Number(ge),ge>fe&&(ge=fe)):ge=fe;var pe=ie.length;ge>pe/2&&(ge=pe/2);for(var ye=0;ye<ge;++ye){var Te=parseInt(ie.substr(ye*2,2),16);if(ee(Te))return ye;te[le+ye]=Te}return ye}function x(te,ie,le,ge){return W(N(ie,te.length-le),te,le,ge)}function u(te,ie,le,ge){return W(U(ie),te,le,ge)}function L(te,ie,le,ge){return u(te,ie,le,ge)}function S(te,ie,le,ge){return W(Q(ie),te,le,ge)}function k(te,ie,le,ge){return W(q(ie,te.length-le),te,le,ge)}n.prototype.write=function(ie,le,ge,fe){if(le===void 0)fe="utf8",ge=this.length,le=0;else if(ge===void 0&&typeof le=="string")fe=le,ge=this.length,le=0;else if(isFinite(le))le=le>>>0,isFinite(ge)?(ge=ge>>>0,fe===void 0&&(fe="utf8")):(fe=ge,ge=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var pe=this.length-le;if((ge===void 0||ge>pe)&&(ge=pe),ie.length>0&&(ge<0||le<0)||le>this.length)throw new RangeError("Attempt to write outside buffer bounds");fe||(fe="utf8");for(var ye=!1;;)switch(fe){case"hex":return h(this,ie,le,ge);case"utf8":case"utf-8":return x(this,ie,le,ge);case"ascii":return u(this,ie,le,ge);case"latin1":case"binary":return L(this,ie,le,ge);case"base64":return S(this,ie,le,ge);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,ie,le,ge);default:if(ye)throw new TypeError("Unknown encoding: "+fe);fe=(""+fe).toLowerCase(),ye=!0}},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function P(te,ie,le){return ie===0&&le===te.length?v.fromByteArray(te):v.fromByteArray(te.slice(ie,le))}function z(te,ie,le){le=Math.min(te.length,le);for(var ge=[],fe=ie;fe<le;){var pe=te[fe],ye=null,Te=pe>239?4:pe>223?3:pe>191?2:1;if(fe+Te<=le){var _e,De,Be,Ue;switch(Te){case 1:pe<128&&(ye=pe);break;case 2:_e=te[fe+1],(_e&192)===128&&(Ue=(pe&31)<<6|_e&63,Ue>127&&(ye=Ue));break;case 3:_e=te[fe+1],De=te[fe+2],(_e&192)===128&&(De&192)===128&&(Ue=(pe&15)<<12|(_e&63)<<6|De&63,Ue>2047&&(Ue<55296||Ue>57343)&&(ye=Ue));break;case 4:_e=te[fe+1],De=te[fe+2],Be=te[fe+3],(_e&192)===128&&(De&192)===128&&(Be&192)===128&&(Ue=(pe&15)<<18|(_e&63)<<12|(De&63)<<6|Be&63,Ue>65535&&Ue<1114112&&(ye=Ue))}}ye===null?(ye=65533,Te=1):ye>65535&&(ye-=65536,ge.push(ye>>>10&1023|55296),ye=56320|ye&1023),ge.push(ye),fe+=Te}return D(ge)}var I=4096;function D(te){var ie=te.length;if(ie<=I)return String.fromCharCode.apply(String,te);for(var le="",ge=0;ge<ie;)le+=String.fromCharCode.apply(String,te.slice(ge,ge+=I));return le}function R(te,ie,le){var ge="";le=Math.min(te.length,le);for(var fe=ie;fe<le;++fe)ge+=String.fromCharCode(te[fe]&127);return ge}function O(te,ie,le){var ge="";le=Math.min(te.length,le);for(var fe=ie;fe<le;++fe)ge+=String.fromCharCode(te[fe]);return ge}function F(te,ie,le){var ge=te.length;(!ie||ie<0)&&(ie=0),(!le||le<0||le>ge)&&(le=ge);for(var fe="",pe=ie;pe<le;++pe)fe+=oe(te[pe]);return fe}function V(te,ie,le){for(var ge=te.slice(ie,le),fe="",pe=0;pe<ge.length;pe+=2)fe+=String.fromCharCode(ge[pe]+ge[pe+1]*256);return fe}n.prototype.slice=function(ie,le){var ge=this.length;ie=~~ie,le=le===void 0?ge:~~le,ie<0?(ie+=ge,ie<0&&(ie=0)):ie>ge&&(ie=ge),le<0?(le+=ge,le<0&&(le=0)):le>ge&&(le=ge),le<ie&&(le=ie);var fe=this.subarray(ie,le);return fe.__proto__=n.prototype,fe};function G(te,ie,le){if(te%1!==0||te<0)throw new RangeError("offset is not uint");if(te+ie>le)throw new RangeError("Trying to access beyond buffer length")}n.prototype.readUIntLE=function(ie,le,ge){ie=ie>>>0,le=le>>>0,ge||G(ie,le,this.length);for(var fe=this[ie],pe=1,ye=0;++ye<le&&(pe*=256);)fe+=this[ie+ye]*pe;return fe},n.prototype.readUIntBE=function(ie,le,ge){ie=ie>>>0,le=le>>>0,ge||G(ie,le,this.length);for(var fe=this[ie+--le],pe=1;le>0&&(pe*=256);)fe+=this[ie+--le]*pe;return fe},n.prototype.readUInt8=function(ie,le){return ie=ie>>>0,le||G(ie,1,this.length),this[ie]},n.prototype.readUInt16LE=function(ie,le){return ie=ie>>>0,le||G(ie,2,this.length),this[ie]|this[ie+1]<<8},n.prototype.readUInt16BE=function(ie,le){return ie=ie>>>0,le||G(ie,2,this.length),this[ie]<<8|this[ie+1]},n.prototype.readUInt32LE=function(ie,le){return ie=ie>>>0,le||G(ie,4,this.length),(this[ie]|this[ie+1]<<8|this[ie+2]<<16)+this[ie+3]*16777216},n.prototype.readUInt32BE=function(ie,le){return ie=ie>>>0,le||G(ie,4,this.length),this[ie]*16777216+(this[ie+1]<<16|this[ie+2]<<8|this[ie+3])},n.prototype.readIntLE=function(ie,le,ge){ie=ie>>>0,le=le>>>0,ge||G(ie,le,this.length);for(var fe=this[ie],pe=1,ye=0;++ye<le&&(pe*=256);)fe+=this[ie+ye]*pe;return pe*=128,fe>=pe&&(fe-=Math.pow(2,8*le)),fe},n.prototype.readIntBE=function(ie,le,ge){ie=ie>>>0,le=le>>>0,ge||G(ie,le,this.length);for(var fe=le,pe=1,ye=this[ie+--fe];fe>0&&(pe*=256);)ye+=this[ie+--fe]*pe;return pe*=128,ye>=pe&&(ye-=Math.pow(2,8*le)),ye},n.prototype.readInt8=function(ie,le){return ie=ie>>>0,le||G(ie,1,this.length),this[ie]&128?(255-this[ie]+1)*-1:this[ie]},n.prototype.readInt16LE=function(ie,le){ie=ie>>>0,le||G(ie,2,this.length);var ge=this[ie]|this[ie+1]<<8;return ge&32768?ge|4294901760:ge},n.prototype.readInt16BE=function(ie,le){ie=ie>>>0,le||G(ie,2,this.length);var ge=this[ie+1]|this[ie]<<8;return ge&32768?ge|4294901760:ge},n.prototype.readInt32LE=function(ie,le){return ie=ie>>>0,le||G(ie,4,this.length),this[ie]|this[ie+1]<<8|this[ie+2]<<16|this[ie+3]<<24},n.prototype.readInt32BE=function(ie,le){return ie=ie>>>0,le||G(ie,4,this.length),this[ie]<<24|this[ie+1]<<16|this[ie+2]<<8|this[ie+3]},n.prototype.readFloatLE=function(ie,le){return ie=ie>>>0,le||G(ie,4,this.length),M.read(this,ie,!0,23,4)},n.prototype.readFloatBE=function(ie,le){return ie=ie>>>0,le||G(ie,4,this.length),M.read(this,ie,!1,23,4)},n.prototype.readDoubleLE=function(ie,le){return ie=ie>>>0,le||G(ie,8,this.length),M.read(this,ie,!0,52,8)},n.prototype.readDoubleBE=function(ie,le){return ie=ie>>>0,le||G(ie,8,this.length),M.read(this,ie,!1,52,8)};function J(te,ie,le,ge,fe,pe){if(!n.isBuffer(te))throw new TypeError('"buffer" argument must be a Buffer instance');if(ie>fe||ie<pe)throw new RangeError('"value" argument is out of bounds');if(le+ge>te.length)throw new RangeError("Index out of range")}n.prototype.writeUIntLE=function(ie,le,ge,fe){if(ie=+ie,le=le>>>0,ge=ge>>>0,!fe){var pe=Math.pow(2,8*ge)-1;J(this,ie,le,ge,pe,0)}var ye=1,Te=0;for(this[le]=ie&255;++Te<ge&&(ye*=256);)this[le+Te]=ie/ye&255;return le+ge},n.prototype.writeUIntBE=function(ie,le,ge,fe){if(ie=+ie,le=le>>>0,ge=ge>>>0,!fe){var pe=Math.pow(2,8*ge)-1;J(this,ie,le,ge,pe,0)}var ye=ge-1,Te=1;for(this[le+ye]=ie&255;--ye>=0&&(Te*=256);)this[le+ye]=ie/Te&255;return le+ge},n.prototype.writeUInt8=function(ie,le,ge){return ie=+ie,le=le>>>0,ge||J(this,ie,le,1,255,0),this[le]=ie&255,le+1},n.prototype.writeUInt16LE=function(ie,le,ge){return ie=+ie,le=le>>>0,ge||J(this,ie,le,2,65535,0),this[le]=ie&255,this[le+1]=ie>>>8,le+2},n.prototype.writeUInt16BE=function(ie,le,ge){return ie=+ie,le=le>>>0,ge||J(this,ie,le,2,65535,0),this[le]=ie>>>8,this[le+1]=ie&255,le+2},n.prototype.writeUInt32LE=function(ie,le,ge){return ie=+ie,le=le>>>0,ge||J(this,ie,le,4,4294967295,0),this[le+3]=ie>>>24,this[le+2]=ie>>>16,this[le+1]=ie>>>8,this[le]=ie&255,le+4},n.prototype.writeUInt32BE=function(ie,le,ge){return ie=+ie,le=le>>>0,ge||J(this,ie,le,4,4294967295,0),this[le]=ie>>>24,this[le+1]=ie>>>16,this[le+2]=ie>>>8,this[le+3]=ie&255,le+4},n.prototype.writeIntLE=function(ie,le,ge,fe){if(ie=+ie,le=le>>>0,!fe){var pe=Math.pow(2,8*ge-1);J(this,ie,le,ge,pe-1,-pe)}var ye=0,Te=1,_e=0;for(this[le]=ie&255;++ye<ge&&(Te*=256);)ie<0&&_e===0&&this[le+ye-1]!==0&&(_e=1),this[le+ye]=(ie/Te>>0)-_e&255;return le+ge},n.prototype.writeIntBE=function(ie,le,ge,fe){if(ie=+ie,le=le>>>0,!fe){var pe=Math.pow(2,8*ge-1);J(this,ie,le,ge,pe-1,-pe)}var ye=ge-1,Te=1,_e=0;for(this[le+ye]=ie&255;--ye>=0&&(Te*=256);)ie<0&&_e===0&&this[le+ye+1]!==0&&(_e=1),this[le+ye]=(ie/Te>>0)-_e&255;return le+ge},n.prototype.writeInt8=function(ie,le,ge){return ie=+ie,le=le>>>0,ge||J(this,ie,le,1,127,-128),ie<0&&(ie=255+ie+1),this[le]=ie&255,le+1},n.prototype.writeInt16LE=function(ie,le,ge){return ie=+ie,le=le>>>0,ge||J(this,ie,le,2,32767,-32768),this[le]=ie&255,this[le+1]=ie>>>8,le+2},n.prototype.writeInt16BE=function(ie,le,ge){return ie=+ie,le=le>>>0,ge||J(this,ie,le,2,32767,-32768),this[le]=ie>>>8,this[le+1]=ie&255,le+2},n.prototype.writeInt32LE=function(ie,le,ge){return ie=+ie,le=le>>>0,ge||J(this,ie,le,4,2147483647,-2147483648),this[le]=ie&255,this[le+1]=ie>>>8,this[le+2]=ie>>>16,this[le+3]=ie>>>24,le+4},n.prototype.writeInt32BE=function(ie,le,ge){return ie=+ie,le=le>>>0,ge||J(this,ie,le,4,2147483647,-2147483648),ie<0&&(ie=4294967295+ie+1),this[le]=ie>>>24,this[le+1]=ie>>>16,this[le+2]=ie>>>8,this[le+3]=ie&255,le+4};function Z(te,ie,le,ge,fe,pe){if(le+ge>te.length)throw new RangeError("Index out of range");if(le<0)throw new RangeError("Index out of range")}function Y(te,ie,le,ge,fe){return ie=+ie,le=le>>>0,fe||Z(te,ie,le,4),M.write(te,ie,le,ge,23,4),le+4}n.prototype.writeFloatLE=function(ie,le,ge){return Y(this,ie,le,!0,ge)},n.prototype.writeFloatBE=function(ie,le,ge){return Y(this,ie,le,!1,ge)};function j(te,ie,le,ge,fe){return ie=+ie,le=le>>>0,fe||Z(te,ie,le,8),M.write(te,ie,le,ge,52,8),le+8}n.prototype.writeDoubleLE=function(ie,le,ge){return j(this,ie,le,!0,ge)},n.prototype.writeDoubleBE=function(ie,le,ge){return j(this,ie,le,!1,ge)},n.prototype.copy=function(ie,le,ge,fe){if(!n.isBuffer(ie))throw new TypeError("argument should be a Buffer");if(ge||(ge=0),!fe&&fe!==0&&(fe=this.length),le>=ie.length&&(le=ie.length),le||(le=0),fe>0&&fe<ge&&(fe=ge),fe===ge||ie.length===0||this.length===0)return 0;if(le<0)throw new RangeError("targetStart out of bounds");if(ge<0||ge>=this.length)throw new RangeError("Index out of range");if(fe<0)throw new RangeError("sourceEnd out of bounds");fe>this.length&&(fe=this.length),ie.length-le<fe-ge&&(fe=ie.length-le+ge);var pe=fe-ge;if(this===ie&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(le,ge,fe);else if(this===ie&&ge<le&&le<fe)for(var ye=pe-1;ye>=0;--ye)ie[ye+le]=this[ye+ge];else Uint8Array.prototype.set.call(ie,this.subarray(ge,fe),le);return pe},n.prototype.fill=function(ie,le,ge,fe){if(typeof ie=="string"){if(typeof le=="string"?(fe=le,le=0,ge=this.length):typeof ge=="string"&&(fe=ge,ge=this.length),fe!==void 0&&typeof fe!="string")throw new TypeError("encoding must be a string");if(typeof fe=="string"&&!n.isEncoding(fe))throw new TypeError("Unknown encoding: "+fe);if(ie.length===1){var pe=ie.charCodeAt(0);(fe==="utf8"&&pe<128||fe==="latin1")&&(ie=pe)}}else typeof ie=="number"&&(ie=ie&255);if(le<0||this.length<le||this.length<ge)throw new RangeError("Out of range index");if(ge<=le)return this;le=le>>>0,ge=ge===void 0?this.length:ge>>>0,ie||(ie=0);var ye;if(typeof ie=="number")for(ye=le;ye<ge;++ye)this[ye]=ie;else{var Te=n.isBuffer(ie)?ie:n.from(ie,fe),_e=Te.length;if(_e===0)throw new TypeError('The value "'+ie+'" is invalid for argument "value"');for(ye=0;ye<ge-le;++ye)this[ye+le]=Te[ye%_e]}return this};var re=/[^+/0-9A-Za-z-_]/g;function se(te){if(te=te.split("=")[0],te=te.trim().replace(re,""),te.length<2)return"";for(;te.length%4!==0;)te=te+"=";return te}function oe(te){return te<16?"0"+te.toString(16):te.toString(16)}function N(te,ie){ie=ie||1/0;for(var le,ge=te.length,fe=null,pe=[],ye=0;ye<ge;++ye){if(le=te.charCodeAt(ye),le>55295&&le<57344){if(!fe){if(le>56319){(ie-=3)>-1&&pe.push(239,191,189);continue}else if(ye+1===ge){(ie-=3)>-1&&pe.push(239,191,189);continue}fe=le;continue}if(le<56320){(ie-=3)>-1&&pe.push(239,191,189),fe=le;continue}le=(fe-55296<<10|le-56320)+65536}else fe&&(ie-=3)>-1&&pe.push(239,191,189);if(fe=null,le<128){if((ie-=1)<0)break;pe.push(le)}else if(le<2048){if((ie-=2)<0)break;pe.push(le>>6|192,le&63|128)}else if(le<65536){if((ie-=3)<0)break;pe.push(le>>12|224,le>>6&63|128,le&63|128)}else if(le<1114112){if((ie-=4)<0)break;pe.push(le>>18|240,le>>12&63|128,le>>6&63|128,le&63|128)}else throw new Error("Invalid code point")}return pe}function U(te){for(var ie=[],le=0;le<te.length;++le)ie.push(te.charCodeAt(le)&255);return ie}function q(te,ie){for(var le,ge,fe,pe=[],ye=0;ye<te.length&&!((ie-=2)<0);++ye)le=te.charCodeAt(ye),ge=le>>8,fe=le%256,pe.push(fe),pe.push(ge);return pe}function Q(te){return v.toByteArray(se(te))}function W(te,ie,le,ge){for(var fe=0;fe<ge&&!(fe+le>=ie.length||fe>=te.length);++fe)ie[fe+le]=te[fe];return fe}function X(te,ie){return te instanceof ie||te!=null&&te.constructor!=null&&te.constructor.name!=null&&te.constructor.name===ie.name}function ee(te){return te!==te}}).call(this)}).call(this,d("buffer").Buffer)},{"base64-js":79,buffer:85,ieee754:230}],86:[function(d,ne,ae){ne.exports=w;function w(v,M,T){return M<T?v<M?M:v>T?T:v:v<T?T:v>M?M:v}},{}],87:[function(d,ne,ae){var w=d("clamp");ne.exports=v,ne.exports.to=v,ne.exports.from=M;function v(T,e){e==null&&(e=!0);var a=T[0],n=T[1],r=T[2],t=T[3];t==null&&(t=e?1:255),e&&(a*=255,n*=255,r*=255,t*=255),a=w(a,0,255)&255,n=w(n,0,255)&255,r=w(r,0,255)&255,t=w(t,0,255)&255;var f=a*16777216+(n<<16)+(r<<8)+t;return f}function M(T,e){T=+T;var a=T>>>24,n=(T&16711680)>>>16,r=(T&65280)>>>8,t=T&255;return e===!1?[a,n,r,t]:[a/255,n/255,r/255,t/255]}},{clamp:86}],88:[function(d,ne,ae){ne.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],89:[function(d,ne,ae){var w=d("color-rgba"),v=d("clamp"),M=d("dtype");ne.exports=function(a,n){(n==="float"||!n)&&(n="array"),n==="uint"&&(n="uint8"),n==="uint_clamped"&&(n="uint8_clamped");var r=M(n),t=new r(4),f=n!=="uint8"&&n!=="uint8_clamped";return(!a.length||typeof a=="string")&&(a=w(a),a[0]/=255,a[1]/=255,a[2]/=255),T(a)?(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3]!=null?a[3]:255,f&&(t[0]/=255,t[1]/=255,t[2]/=255,t[3]/=255),t):(f?(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3]!=null?a[3]:1):(t[0]=v(Math.floor(a[0]*255),0,255),t[1]=v(Math.floor(a[1]*255),0,255),t[2]=v(Math.floor(a[2]*255),0,255),t[3]=a[3]==null?255:v(Math.floor(a[3]*255),0,255)),t)};function T(e){return!!(e instanceof Uint8Array||e instanceof Uint8ClampedArray||Array.isArray(e)&&(e[0]>1||e[0]===0)&&(e[1]>1||e[1]===0)&&(e[2]>1||e[2]===0)&&(!e[3]||e[3]>1))}},{clamp:86,"color-rgba":91,dtype:127}],90:[function(d,ne,ae){(function(w){(function(){var v=d("color-name"),M=d("is-plain-obj"),T=d("defined");ne.exports=a;var e={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function a(n){var r,t=[],f=1,o;if(typeof n=="string")if(v[n])t=v[n].slice(),o="rgb";else if(n==="transparent")f=0,o="rgb",t=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(n)){var i=n.slice(1),g=i.length,p=g<=4;f=1,p?(t=[parseInt(i[0]+i[0],16),parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16)],g===4&&(f=parseInt(i[3]+i[3],16)/255)):(t=[parseInt(i[0]+i[1],16),parseInt(i[2]+i[3],16),parseInt(i[4]+i[5],16)],g===8&&(f=parseInt(i[6]+i[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),o="rgb"}else if(r=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(n)){var y=r[1],c=y==="rgb",i=y.replace(/a$/,"");o=i;var g=i==="cmyk"?4:i==="gray"?1:3;t=r[2].trim().split(/\s*,\s*/).map(function(s,A){if(/%$/.test(s))return A===g?parseFloat(s)/100:i==="rgb"?parseFloat(s)*255/100:parseFloat(s);if(i[A]==="h"){if(/deg$/.test(s))return parseFloat(s);if(e[s]!==void 0)return e[s]}return parseFloat(s)}),y===i&&t.push(1),f=c||t[g]===void 0?1:t[g],t=t.slice(0,g)}else n.length>10&&/[0-9](?:\s|\/)/.test(n)&&(t=n.match(/([0-9]+)/g).map(function(l){return parseFloat(l)}),o=n.match(/([a-z])/ig).join("").toLowerCase());else if(!isNaN(n))o="rgb",t=[n>>>16,(n&65280)>>>8,n&255];else if(M(n)){var b=T(n.r,n.red,n.R,null);b!==null?(o="rgb",t=[b,T(n.g,n.green,n.G),T(n.b,n.blue,n.B)]):(o="hsl",t=[T(n.h,n.hue,n.H),T(n.s,n.saturation,n.S),T(n.l,n.lightness,n.L,n.b,n.brightness)]),f=T(n.a,n.alpha,n.opacity,1),n.opacity!=null&&(f/=100)}else(Array.isArray(n)||w.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(n))&&(t=[n[0],n[1],n[2]],o="rgb",f=n.length===4?n[3]:1);return{space:o,values:t,alpha:f}}}).call(this)}).call(this,typeof To<"u"?To:typeof self<"u"?self:typeof window<"u"?window:{})},{"color-name":88,defined:124,"is-plain-obj":236}],91:[function(d,ne,ae){var w=d("color-parse"),v=d("color-space/hsl"),M=d("clamp");ne.exports=function(e){var a,n=w(e);return n.space?(a=Array(3),a[0]=M(n.values[0],0,255),a[1]=M(n.values[1],0,255),a[2]=M(n.values[2],0,255),n.space[0]==="h"&&(a=v.rgb(a)),a.push(M(n.alpha,0,1)),a):[]}},{clamp:86,"color-parse":90,"color-space/hsl":92}],92:[function(d,ne,ae){var w=d("./rgb");ne.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(v){var M=v[0]/360,T=v[1]/100,e=v[2]/100,a,n,r,t,f;if(T===0)return f=e*255,[f,f,f];e<.5?n=e*(1+T):n=e+T-e*T,a=2*e-n,t=[0,0,0];for(var o=0;o<3;o++)r=M+1/3*-(o-1),r<0?r++:r>1&&r--,6*r<1?f=a+(n-a)*6*r:2*r<1?f=n:3*r<2?f=a+(n-a)*(2/3-r)*6:f=a,t[o]=f*255;return t}},w.hsl=function(v){var M=v[0]/255,T=v[1]/255,e=v[2]/255,a=Math.min(M,T,e),n=Math.max(M,T,e),r=n-a,t,f,o;return n===a?t=0:M===n?t=(T-e)/r:T===n?t=2+(e-M)/r:e===n&&(t=4+(M-T)/r),t=Math.min(t*60,360),t<0&&(t+=360),o=(a+n)/2,n===a?f=0:o<=.5?f=r/(n+a):f=r/(2-n-a),[t,f*100,o*100]}},{"./rgb":93}],93:[function(d,ne,ae){ne.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],94:[function(d,ne,ae){ne.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xE7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xE9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xE9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xE3)o.?tom(e|\xE9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],95:[function(d,ne,ae){ne.exports=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]},{}],96:[function(d,ne,ae){ne.exports=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]},{}],97:[function(d,ne,ae){ne.exports=["normal","italic","oblique"]},{}],98:[function(d,ne,ae){ne.exports=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},{}],99:[function(d,ne,ae){ne.exports={parse:d("./parse"),stringify:d("./stringify")}},{"./parse":101,"./stringify":102}],100:[function(d,ne,ae){var w=d("css-font-size-keywords");ne.exports={isSize:function(M){return/^[\d\.]/.test(M)||M.indexOf("/")!==-1||w.indexOf(M)!==-1}}},{"css-font-size-keywords":95}],101:[function(d,ne,ae){var w=d("unquote"),v=d("css-global-keywords"),M=d("css-system-font-keywords"),T=d("css-font-weight-keywords"),e=d("css-font-style-keywords"),a=d("css-font-stretch-keywords"),n=d("string-split-by"),r=d("./lib/util").isSize;ne.exports=f;var t=f.cache={};function f(i){if(typeof i!="string")throw new Error("Font argument must be a string.");if(t[i])return t[i];if(i==="")throw new Error("Cannot parse an empty string.");if(M.indexOf(i)!==-1)return t[i]={system:i};for(var g={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},p=n(i,/\s+/),y;y=p.shift();){if(v.indexOf(y)!==-1)return["style","variant","weight","stretch"].forEach(function(b){g[b]=y}),t[i]=g;if(e.indexOf(y)!==-1){g.style=y;continue}if(y==="normal"||y==="small-caps"){g.variant=y;continue}if(a.indexOf(y)!==-1){g.stretch=y;continue}if(T.indexOf(y)!==-1){g.weight=y;continue}if(r(y)){var c=n(y,"/");if(g.size=c[0],c[1]!=null?g.lineHeight=o(c[1]):p[0]==="/"&&(p.shift(),g.lineHeight=o(p.shift())),!p.length)throw new Error("Missing required font-family.");return g.family=n(p.join(" "),/\s*,\s*/).map(w),t[i]=g}throw new Error("Unknown or unsupported font token: "+y)}throw new Error("Missing required font-size.")}function o(i){var g=parseFloat(i);return g.toString()===i?g:i}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"string-split-by":305,unquote:328}],102:[function(d,ne,ae){var w=d("pick-by-alias"),v=d("./lib/util").isSize,M=i(d("css-global-keywords")),T=i(d("css-system-font-keywords")),e=i(d("css-font-weight-keywords")),a=i(d("css-font-style-keywords")),n=i(d("css-font-stretch-keywords")),r={normal:1,"small-caps":1},t={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},f={style:"normal",variant:"normal",weight:"normal",stretch:"normal",size:"1rem",lineHeight:"normal",family:"serif"};ne.exports=function(p){if(p=w(p,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"}),p.system)return p.system&&o(p.system,T),p.system;if(o(p.style,a),o(p.variant,r),o(p.weight,e),o(p.stretch,n),p.size==null&&(p.size=f.size),typeof p.size=="number"&&(p.size+="px"),!v)throw Error("Bad size value `"+p.size+"`");p.family||(p.family=f.family),Array.isArray(p.family)&&(p.family.length||(p.family=[f.family]),p.family=p.family.map(function(c){return t[c]?c:'"'+c+'"'}).join(", "));var y=[];return y.push(p.style),p.variant!==p.style&&y.push(p.variant),p.weight!==p.variant&&p.weight!==p.style&&y.push(p.weight),p.stretch!==p.weight&&p.stretch!==p.variant&&p.stretch!==p.style&&y.push(p.stretch),y.push(p.size+(p.lineHeight==null||p.lineHeight==="normal"||p.lineHeight+""=="1"?"":"/"+p.lineHeight)),y.push(p.family),y.filter(Boolean).join(" ")};function o(g,p){if(g&&!p[g]&&!M[g])throw Error("Unknown keyword `"+g+"`");return g}function i(g){for(var p={},y=0;y<g.length;y++)p[g[y]]=1;return p}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"pick-by-alias":253}],103:[function(d,ne,ae){ne.exports=["inherit","initial","unset"]},{}],104:[function(d,ne,ae){ne.exports=["caption","icon","menu","message-box","small-caption","status-bar"]},{}],105:[function(d,ne,ae){var w=d("type/value/is"),v=d("type/value/ensure"),M=d("type/plain-function/ensure"),T=d("es5-ext/object/copy"),e=d("es5-ext/object/normalize-options"),a=d("es5-ext/object/map"),n=Function.prototype.bind,r=Object.defineProperty,t=Object.prototype.hasOwnProperty,f;f=function(o,i,g){var p=v(i)&&M(i.value),y;return y=T(i),delete y.writable,delete y.value,y.get=function(){return!g.overwriteDefinition&&t.call(this,o)?p:(i.value=n.call(p,g.resolveContext?g.resolveContext(this):this),r(this,o,i),this[o])},y},ne.exports=function(o){var i=e(arguments[1]);return w(i.resolveContext)&&M(i.resolveContext),a(o,function(g,p){return f(p,g,i)})}},{"es5-ext/object/copy":147,"es5-ext/object/map":155,"es5-ext/object/normalize-options":156,"type/plain-function/ensure":321,"type/value/ensure":325,"type/value/is":326}],106:[function(d,ne,ae){var w=d("type/value/is"),v=d("type/plain-function/is"),M=d("es5-ext/object/assign"),T=d("es5-ext/object/normalize-options"),e=d("es5-ext/string/#/contains"),a=ne.exports=function(n,r){var t,f,o,i,g;return arguments.length<2||typeof n!="string"?(i=r,r=n,n=null):i=arguments[2],w(n)?(t=e.call(n,"c"),f=e.call(n,"e"),o=e.call(n,"w")):(t=o=!0,f=!1),g={value:r,configurable:t,enumerable:f,writable:o},i?M(T(i),g):g};a.gs=function(n,r,t){var f,o,i,g;return typeof n!="string"?(i=t,t=r,r=n,n=null):i=arguments[3],w(r)?v(r)?w(t)?v(t)||(i=t,t=void 0):t=void 0:(i=r,r=t=void 0):r=void 0,w(n)?(f=e.call(n,"c"),o=e.call(n,"e")):(f=!0,o=!1),g={get:r,set:t,configurable:f,enumerable:o},i?M(T(i),g):g}},{"es5-ext/object/assign":144,"es5-ext/object/normalize-options":156,"es5-ext/string/#/contains":163,"type/plain-function/is":322,"type/value/is":326}],107:[function(d,ne,ae){(function(w,v){v(typeof ae=="object"&&typeof ne<"u"?ae:w.d3=w.d3||{})})(this,function(w){function v(N,U){return N<U?-1:N>U?1:N>=U?0:NaN}function M(N){return N.length===1&&(N=T(N)),{left:function(U,q,Q,W){for(Q==null&&(Q=0),W==null&&(W=U.length);Q<W;){var X=Q+W>>>1;N(U[X],q)<0?Q=X+1:W=X}return Q},right:function(U,q,Q,W){for(Q==null&&(Q=0),W==null&&(W=U.length);Q<W;){var X=Q+W>>>1;N(U[X],q)>0?W=X:Q=X+1}return Q}}}function T(N){return function(U,q){return v(N(U),q)}}var e=M(v),a=e.right,n=e.left;function r(N,U){U==null&&(U=t);for(var q=0,Q=N.length-1,W=N[0],X=new Array(Q<0?0:Q);q<Q;)X[q]=U(W,W=N[++q]);return X}function t(N,U){return[N,U]}function f(N,U,q){var Q=N.length,W=U.length,X=new Array(Q*W),ee,te,ie,le;for(q==null&&(q=t),ee=ie=0;ee<Q;++ee)for(le=N[ee],te=0;te<W;++te,++ie)X[ie]=q(le,U[te]);return X}function o(N,U){return U<N?-1:U>N?1:U>=N?0:NaN}function i(N){return N===null?NaN:+N}function g(N,U){var q=N.length,Q=0,W=-1,X=0,ee,te,ie=0;if(U==null)for(;++W<q;)isNaN(ee=i(N[W]))||(te=ee-X,X+=te/++Q,ie+=te*(ee-X));else for(;++W<q;)isNaN(ee=i(U(N[W],W,N)))||(te=ee-X,X+=te/++Q,ie+=te*(ee-X));if(Q>1)return ie/(Q-1)}function p(N,U){var q=g(N,U);return q&&Math.sqrt(q)}function y(N,U){var q=N.length,Q=-1,W,X,ee;if(U==null){for(;++Q<q;)if((W=N[Q])!=null&&W>=W)for(X=ee=W;++Q<q;)(W=N[Q])!=null&&(X>W&&(X=W),ee<W&&(ee=W))}else for(;++Q<q;)if((W=U(N[Q],Q,N))!=null&&W>=W)for(X=ee=W;++Q<q;)(W=U(N[Q],Q,N))!=null&&(X>W&&(X=W),ee<W&&(ee=W));return[X,ee]}var c=Array.prototype,b=c.slice,l=c.map;function _(N){return function(){return N}}function s(N){return N}function A(N,U,q){N=+N,U=+U,q=(W=arguments.length)<2?(U=N,N=0,1):W<3?1:+q;for(var Q=-1,W=Math.max(0,Math.ceil((U-N)/q))|0,X=new Array(W);++Q<W;)X[Q]=N+Q*q;return X}var m=Math.sqrt(50),h=Math.sqrt(10),x=Math.sqrt(2);function u(N,U,q){var Q,W=-1,X,ee,te;if(U=+U,N=+N,q=+q,N===U&&q>0)return[N];if((Q=U<N)&&(X=N,N=U,U=X),(te=L(N,U,q))===0||!isFinite(te))return[];if(te>0)for(N=Math.ceil(N/te),U=Math.floor(U/te),ee=new Array(X=Math.ceil(U-N+1));++W<X;)ee[W]=(N+W)*te;else for(N=Math.floor(N*te),U=Math.ceil(U*te),ee=new Array(X=Math.ceil(N-U+1));++W<X;)ee[W]=(N-W)/te;return Q&&ee.reverse(),ee}function L(N,U,q){var Q=(U-N)/Math.max(0,q),W=Math.floor(Math.log(Q)/Math.LN10),X=Q/Math.pow(10,W);return W>=0?(X>=m?10:X>=h?5:X>=x?2:1)*Math.pow(10,W):-Math.pow(10,-W)/(X>=m?10:X>=h?5:X>=x?2:1)}function S(N,U,q){var Q=Math.abs(U-N)/Math.max(0,q),W=Math.pow(10,Math.floor(Math.log(Q)/Math.LN10)),X=Q/W;return X>=m?W*=10:X>=h?W*=5:X>=x&&(W*=2),U<N?-W:W}function k(N){return Math.ceil(Math.log(N.length)/Math.LN2)+1}function P(){var N=s,U=y,q=k;function Q(W){var X,ee=W.length,te,ie=new Array(ee);for(X=0;X<ee;++X)ie[X]=N(W[X],X,W);var le=U(ie),ge=le[0],fe=le[1],pe=q(ie,ge,fe);Array.isArray(pe)||(pe=S(ge,fe,pe),pe=A(Math.ceil(ge/pe)*pe,fe,pe));for(var ye=pe.length;pe[0]<=ge;)pe.shift(),--ye;for(;pe[ye-1]>fe;)pe.pop(),--ye;var Te=new Array(ye+1),_e;for(X=0;X<=ye;++X)_e=Te[X]=[],_e.x0=X>0?pe[X-1]:ge,_e.x1=X<ye?pe[X]:fe;for(X=0;X<ee;++X)te=ie[X],ge<=te&&te<=fe&&Te[a(pe,te,0,ye)].push(W[X]);return Te}return Q.value=function(W){return arguments.length?(N=typeof W=="function"?W:_(W),Q):N},Q.domain=function(W){return arguments.length?(U=typeof W=="function"?W:_([W[0],W[1]]),Q):U},Q.thresholds=function(W){return arguments.length?(q=typeof W=="function"?W:Array.isArray(W)?_(b.call(W)):_(W),Q):q},Q}function z(N,U,q){if(q==null&&(q=i),!!(Q=N.length)){if((U=+U)<=0||Q<2)return+q(N[0],0,N);if(U>=1)return+q(N[Q-1],Q-1,N);var Q,W=(Q-1)*U,X=Math.floor(W),ee=+q(N[X],X,N),te=+q(N[X+1],X+1,N);return ee+(te-ee)*(W-X)}}function I(N,U,q){return N=l.call(N,i).sort(v),Math.ceil((q-U)/(2*(z(N,.75)-z(N,.25))*Math.pow(N.length,-1/3)))}function D(N,U,q){return Math.ceil((q-U)/(3.5*p(N)*Math.pow(N.length,-1/3)))}function R(N,U){var q=N.length,Q=-1,W,X;if(U==null){for(;++Q<q;)if((W=N[Q])!=null&&W>=W)for(X=W;++Q<q;)(W=N[Q])!=null&&W>X&&(X=W)}else for(;++Q<q;)if((W=U(N[Q],Q,N))!=null&&W>=W)for(X=W;++Q<q;)(W=U(N[Q],Q,N))!=null&&W>X&&(X=W);return X}function O(N,U){var q=N.length,Q=q,W=-1,X,ee=0;if(U==null)for(;++W<q;)isNaN(X=i(N[W]))?--Q:ee+=X;else for(;++W<q;)isNaN(X=i(U(N[W],W,N)))?--Q:ee+=X;if(Q)return ee/Q}function F(N,U){var q=N.length,Q=-1,W,X=[];if(U==null)for(;++Q<q;)isNaN(W=i(N[Q]))||X.push(W);else for(;++Q<q;)isNaN(W=i(U(N[Q],Q,N)))||X.push(W);return z(X.sort(v),.5)}function V(N){for(var U=N.length,q,Q=-1,W=0,X,ee;++Q<U;)W+=N[Q].length;for(X=new Array(W);--U>=0;)for(ee=N[U],q=ee.length;--q>=0;)X[--W]=ee[q];return X}function G(N,U){var q=N.length,Q=-1,W,X;if(U==null){for(;++Q<q;)if((W=N[Q])!=null&&W>=W)for(X=W;++Q<q;)(W=N[Q])!=null&&X>W&&(X=W)}else for(;++Q<q;)if((W=U(N[Q],Q,N))!=null&&W>=W)for(X=W;++Q<q;)(W=U(N[Q],Q,N))!=null&&X>W&&(X=W);return X}function J(N,U){for(var q=U.length,Q=new Array(q);q--;)Q[q]=N[U[q]];return Q}function Z(N,U){if(!!(q=N.length)){var q,Q=0,W=0,X,ee=N[W];for(U==null&&(U=v);++Q<q;)(U(X=N[Q],ee)<0||U(ee,ee)!==0)&&(ee=X,W=Q);if(U(ee,ee)===0)return W}}function Y(N,U,q){for(var Q=(q??N.length)-(U=U==null?0:+U),W,X;Q;)X=Math.random()*Q--|0,W=N[Q+U],N[Q+U]=N[X+U],N[X+U]=W;return N}function j(N,U){var q=N.length,Q=-1,W,X=0;if(U==null)for(;++Q<q;)(W=+N[Q])&&(X+=W);else for(;++Q<q;)(W=+U(N[Q],Q,N))&&(X+=W);return X}function re(N){if(!(X=N.length))return[];for(var U=-1,q=G(N,se),Q=new Array(q);++U<q;)for(var W=-1,X,ee=Q[U]=new Array(X);++W<X;)ee[W]=N[W][U];return Q}function se(N){return N.length}function oe(){return re(arguments)}w.bisect=a,w.bisectRight=a,w.bisectLeft=n,w.ascending=v,w.bisector=M,w.cross=f,w.descending=o,w.deviation=p,w.extent=y,w.histogram=P,w.thresholdFreedmanDiaconis=I,w.thresholdScott=D,w.thresholdSturges=k,w.max=R,w.mean=O,w.median=F,w.merge=V,w.min=G,w.pairs=r,w.permute=J,w.quantile=z,w.range=A,w.scan=Z,w.shuffle=Y,w.sum=j,w.ticks=u,w.tickIncrement=L,w.tickStep=S,w.transpose=re,w.variance=g,w.zip=oe,Object.defineProperty(w,"__esModule",{value:!0})})},{}],108:[function(d,ne,ae){(function(w,v){v(typeof ae=="object"&&typeof ne<"u"?ae:w.d3=w.d3||{})})(this,function(w){var v="$";function M(){}M.prototype=T.prototype={constructor:M,has:function(c){return v+c in this},get:function(c){return this[v+c]},set:function(c,b){return this[v+c]=b,this},remove:function(c){var b=v+c;return b in this&&delete this[b]},clear:function(){for(var c in this)c[0]===v&&delete this[c]},keys:function(){var c=[];for(var b in this)b[0]===v&&c.push(b.slice(1));return c},values:function(){var c=[];for(var b in this)b[0]===v&&c.push(this[b]);return c},entries:function(){var c=[];for(var b in this)b[0]===v&&c.push({key:b.slice(1),value:this[b]});return c},size:function(){var c=0;for(var b in this)b[0]===v&&++c;return c},empty:function(){for(var c in this)if(c[0]===v)return!1;return!0},each:function(c){for(var b in this)b[0]===v&&c(this[b],b.slice(1),this)}};function T(c,b){var l=new M;if(c instanceof M)c.each(function(h,x){l.set(x,h)});else if(Array.isArray(c)){var _=-1,s=c.length,A;if(b==null)for(;++_<s;)l.set(_,c[_]);else for(;++_<s;)l.set(b(A=c[_],_,c),A)}else if(c)for(var m in c)l.set(m,c[m]);return l}function e(){var c=[],b=[],l,_,s;function A(h,x,u,L){if(x>=c.length)return l!=null&&h.sort(l),_!=null?_(h):h;for(var S=-1,k=h.length,P=c[x++],z,I,D=T(),R,O=u();++S<k;)(R=D.get(z=P(I=h[S])+""))?R.push(I):D.set(z,[I]);return D.each(function(F,V){L(O,V,A(F,x,u,L))}),O}function m(h,x){if(++x>c.length)return h;var u,L=b[x-1];return _!=null&&x>=c.length?u=h.entries():(u=[],h.each(function(S,k){u.push({key:k,values:m(S,x)})})),L!=null?u.sort(function(S,k){return L(S.key,k.key)}):u}return s={object:function(h){return A(h,0,a,n)},map:function(h){return A(h,0,r,t)},entries:function(h){return m(A(h,0,r,t),0)},key:function(h){return c.push(h),s},sortKeys:function(h){return b[c.length-1]=h,s},sortValues:function(h){return l=h,s},rollup:function(h){return _=h,s}}}function a(){return{}}function n(c,b,l){c[b]=l}function r(){return T()}function t(c,b,l){c.set(b,l)}function f(){}var o=T.prototype;f.prototype=i.prototype={constructor:f,has:o.has,add:function(c){return c+="",this[v+c]=c,this},remove:o.remove,clear:o.clear,values:o.keys,size:o.size,empty:o.empty,each:o.each};function i(c,b){var l=new f;if(c instanceof f)c.each(function(A){l.add(A)});else if(c){var _=-1,s=c.length;if(b==null)for(;++_<s;)l.add(c[_]);else for(;++_<s;)l.add(b(c[_],_,c))}return l}function g(c){var b=[];for(var l in c)b.push(l);return b}function p(c){var b=[];for(var l in c)b.push(c[l]);return b}function y(c){var b=[];for(var l in c)b.push({key:l,value:c[l]});return b}w.nest=e,w.set=i,w.map=T,w.keys=g,w.values=p,w.entries=y,Object.defineProperty(w,"__esModule",{value:!0})})},{}],109:[function(d,ne,ae){(function(w,v){typeof ae=="object"&&typeof ne<"u"?v(ae):(w=w||self,v(w.d3=w.d3||{}))})(this,function(w){function v(Le,Ne,dt){Le.prototype=Ne.prototype=dt,dt.constructor=Le}function M(Le,Ne){var dt=Object.create(Le.prototype);for(var Dt in Ne)dt[Dt]=Ne[Dt];return dt}function T(){}var e=.7,a=1/e,n="\\s*([+-]?\\d+)\\s*",r="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",t="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",f=/^#([0-9a-f]{3,8})$/,o=new RegExp("^rgb\\("+[n,n,n]+"\\)$"),i=new RegExp("^rgb\\("+[t,t,t]+"\\)$"),g=new RegExp("^rgba\\("+[n,n,n,r]+"\\)$"),p=new RegExp("^rgba\\("+[t,t,t,r]+"\\)$"),y=new RegExp("^hsl\\("+[r,t,t]+"\\)$"),c=new RegExp("^hsla\\("+[r,t,t,r]+"\\)$"),b={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};v(T,A,{copy:function(Le){return Object.assign(new this.constructor,this,Le)},displayable:function(){return this.rgb().displayable()},hex:l,formatHex:l,formatHsl:_,formatRgb:s,toString:s});function l(){return this.rgb().formatHex()}function _(){return I(this).formatHsl()}function s(){return this.rgb().formatRgb()}function A(Le){var Ne,dt;return Le=(Le+"").trim().toLowerCase(),(Ne=f.exec(Le))?(dt=Ne[1].length,Ne=parseInt(Ne[1],16),dt===6?m(Ne):dt===3?new L(Ne>>8&15|Ne>>4&240,Ne>>4&15|Ne&240,(Ne&15)<<4|Ne&15,1):dt===8?h(Ne>>24&255,Ne>>16&255,Ne>>8&255,(Ne&255)/255):dt===4?h(Ne>>12&15|Ne>>8&240,Ne>>8&15|Ne>>4&240,Ne>>4&15|Ne&240,((Ne&15)<<4|Ne&15)/255):null):(Ne=o.exec(Le))?new L(Ne[1],Ne[2],Ne[3],1):(Ne=i.exec(Le))?new L(Ne[1]*255/100,Ne[2]*255/100,Ne[3]*255/100,1):(Ne=g.exec(Le))?h(Ne[1],Ne[2],Ne[3],Ne[4]):(Ne=p.exec(Le))?h(Ne[1]*255/100,Ne[2]*255/100,Ne[3]*255/100,Ne[4]):(Ne=y.exec(Le))?z(Ne[1],Ne[2]/100,Ne[3]/100,1):(Ne=c.exec(Le))?z(Ne[1],Ne[2]/100,Ne[3]/100,Ne[4]):b.hasOwnProperty(Le)?m(b[Le]):Le==="transparent"?new L(NaN,NaN,NaN,0):null}function m(Le){return new L(Le>>16&255,Le>>8&255,Le&255,1)}function h(Le,Ne,dt,Dt){return Dt<=0&&(Le=Ne=dt=NaN),new L(Le,Ne,dt,Dt)}function x(Le){return Le instanceof T||(Le=A(Le)),Le?(Le=Le.rgb(),new L(Le.r,Le.g,Le.b,Le.opacity)):new L}function u(Le,Ne,dt,Dt){return arguments.length===1?x(Le):new L(Le,Ne,dt,Dt??1)}function L(Le,Ne,dt,Dt){this.r=+Le,this.g=+Ne,this.b=+dt,this.opacity=+Dt}v(L,u,M(T,{brighter:function(Le){return Le=Le==null?a:Math.pow(a,Le),new L(this.r*Le,this.g*Le,this.b*Le,this.opacity)},darker:function(Le){return Le=Le==null?e:Math.pow(e,Le),new L(this.r*Le,this.g*Le,this.b*Le,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:S,formatHex:S,formatRgb:k,toString:k}));function S(){return"#"+P(this.r)+P(this.g)+P(this.b)}function k(){var Le=this.opacity;return Le=isNaN(Le)?1:Math.max(0,Math.min(1,Le)),(Le===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(Le===1?")":", "+Le+")")}function P(Le){return Le=Math.max(0,Math.min(255,Math.round(Le)||0)),(Le<16?"0":"")+Le.toString(16)}function z(Le,Ne,dt,Dt){return Dt<=0?Le=Ne=dt=NaN:dt<=0||dt>=1?Le=Ne=NaN:Ne<=0&&(Le=NaN),new R(Le,Ne,dt,Dt)}function I(Le){if(Le instanceof R)return new R(Le.h,Le.s,Le.l,Le.opacity);if(Le instanceof T||(Le=A(Le)),!Le)return new R;if(Le instanceof R)return Le;Le=Le.rgb();var Ne=Le.r/255,dt=Le.g/255,Dt=Le.b/255,Xt=Math.min(Ne,dt,Dt),At=Math.max(Ne,dt,Dt),zt=NaN,Ut=At-Xt,Ct=(At+Xt)/2;return Ut?(Ne===At?zt=(dt-Dt)/Ut+(dt<Dt)*6:dt===At?zt=(Dt-Ne)/Ut+2:zt=(Ne-dt)/Ut+4,Ut/=Ct<.5?At+Xt:2-At-Xt,zt*=60):Ut=Ct>0&&Ct<1?0:zt,new R(zt,Ut,Ct,Le.opacity)}function D(Le,Ne,dt,Dt){return arguments.length===1?I(Le):new R(Le,Ne,dt,Dt??1)}function R(Le,Ne,dt,Dt){this.h=+Le,this.s=+Ne,this.l=+dt,this.opacity=+Dt}v(R,D,M(T,{brighter:function(Le){return Le=Le==null?a:Math.pow(a,Le),new R(this.h,this.s,this.l*Le,this.opacity)},darker:function(Le){return Le=Le==null?e:Math.pow(e,Le),new R(this.h,this.s,this.l*Le,this.opacity)},rgb:function(){var Le=this.h%360+(this.h<0)*360,Ne=isNaN(Le)||isNaN(this.s)?0:this.s,dt=this.l,Dt=dt+(dt<.5?dt:1-dt)*Ne,Xt=2*dt-Dt;return new L(O(Le>=240?Le-240:Le+120,Xt,Dt),O(Le,Xt,Dt),O(Le<120?Le+240:Le-120,Xt,Dt),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var Le=this.opacity;return Le=isNaN(Le)?1:Math.max(0,Math.min(1,Le)),(Le===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(Le===1?")":", "+Le+")")}}));function O(Le,Ne,dt){return(Le<60?Ne+(dt-Ne)*Le/60:Le<180?dt:Le<240?Ne+(dt-Ne)*(240-Le)/60:Ne)*255}var F=Math.PI/180,V=180/Math.PI,G=18,J=.96422,Z=1,Y=.82521,j=4/29,re=6/29,se=3*re*re,oe=re*re*re;function N(Le){if(Le instanceof Q)return new Q(Le.l,Le.a,Le.b,Le.opacity);if(Le instanceof fe)return pe(Le);Le instanceof L||(Le=x(Le));var Ne=te(Le.r),dt=te(Le.g),Dt=te(Le.b),Xt=W((.2225045*Ne+.7168786*dt+.0606169*Dt)/Z),At,zt;return Ne===dt&&dt===Dt?At=zt=Xt:(At=W((.4360747*Ne+.3850649*dt+.1430804*Dt)/J),zt=W((.0139322*Ne+.0971045*dt+.7141733*Dt)/Y)),new Q(116*Xt-16,500*(At-Xt),200*(Xt-zt),Le.opacity)}function U(Le,Ne){return new Q(Le,0,0,Ne??1)}function q(Le,Ne,dt,Dt){return arguments.length===1?N(Le):new Q(Le,Ne,dt,Dt??1)}function Q(Le,Ne,dt,Dt){this.l=+Le,this.a=+Ne,this.b=+dt,this.opacity=+Dt}v(Q,q,M(T,{brighter:function(Le){return new Q(this.l+G*(Le??1),this.a,this.b,this.opacity)},darker:function(Le){return new Q(this.l-G*(Le??1),this.a,this.b,this.opacity)},rgb:function(){var Le=(this.l+16)/116,Ne=isNaN(this.a)?Le:Le+this.a/500,dt=isNaN(this.b)?Le:Le-this.b/200;return Ne=J*X(Ne),Le=Z*X(Le),dt=Y*X(dt),new L(ee(3.1338561*Ne-1.6168667*Le-.4906146*dt),ee(-.9787684*Ne+1.9161415*Le+.033454*dt),ee(.0719453*Ne-.2289914*Le+1.4052427*dt),this.opacity)}}));function W(Le){return Le>oe?Math.pow(Le,1/3):Le/se+j}function X(Le){return Le>re?Le*Le*Le:se*(Le-j)}function ee(Le){return 255*(Le<=.0031308?12.92*Le:1.055*Math.pow(Le,1/2.4)-.055)}function te(Le){return(Le/=255)<=.04045?Le/12.92:Math.pow((Le+.055)/1.055,2.4)}function ie(Le){if(Le instanceof fe)return new fe(Le.h,Le.c,Le.l,Le.opacity);if(Le instanceof Q||(Le=N(Le)),Le.a===0&&Le.b===0)return new fe(NaN,0<Le.l&&Le.l<100?0:NaN,Le.l,Le.opacity);var Ne=Math.atan2(Le.b,Le.a)*V;return new fe(Ne<0?Ne+360:Ne,Math.sqrt(Le.a*Le.a+Le.b*Le.b),Le.l,Le.opacity)}function le(Le,Ne,dt,Dt){return arguments.length===1?ie(Le):new fe(dt,Ne,Le,Dt??1)}function ge(Le,Ne,dt,Dt){return arguments.length===1?ie(Le):new fe(Le,Ne,dt,Dt??1)}function fe(Le,Ne,dt,Dt){this.h=+Le,this.c=+Ne,this.l=+dt,this.opacity=+Dt}function pe(Le){if(isNaN(Le.h))return new Q(Le.l,0,0,Le.opacity);var Ne=Le.h*F;return new Q(Le.l,Math.cos(Ne)*Le.c,Math.sin(Ne)*Le.c,Le.opacity)}v(fe,ge,M(T,{brighter:function(Le){return new fe(this.h,this.c,this.l+G*(Le??1),this.opacity)},darker:function(Le){return new fe(this.h,this.c,this.l-G*(Le??1),this.opacity)},rgb:function(){return pe(this).rgb()}}));var ye=-.14861,Te=1.78277,_e=-.29227,De=-.90649,Be=1.97294,Ue=Be*De,xe=Be*Te,Pe=Te*_e-De*ye;function Ve(Le){if(Le instanceof Fe)return new Fe(Le.h,Le.s,Le.l,Le.opacity);Le instanceof L||(Le=x(Le));var Ne=Le.r/255,dt=Le.g/255,Dt=Le.b/255,Xt=(Pe*Dt+Ue*Ne-xe*dt)/(Pe+Ue-xe),At=Dt-Xt,zt=(Be*(dt-Xt)-_e*At)/De,Ut=Math.sqrt(zt*zt+At*At)/(Be*Xt*(1-Xt)),Ct=Ut?Math.atan2(zt,At)*V-120:NaN;return new Fe(Ct<0?Ct+360:Ct,Ut,Xt,Le.opacity)}function Qe(Le,Ne,dt,Dt){return arguments.length===1?Ve(Le):new Fe(Le,Ne,dt,Dt??1)}function Fe(Le,Ne,dt,Dt){this.h=+Le,this.s=+Ne,this.l=+dt,this.opacity=+Dt}v(Fe,Qe,M(T,{brighter:function(Le){return Le=Le==null?a:Math.pow(a,Le),new Fe(this.h,this.s,this.l*Le,this.opacity)},darker:function(Le){return Le=Le==null?e:Math.pow(e,Le),new Fe(this.h,this.s,this.l*Le,this.opacity)},rgb:function(){var Le=isNaN(this.h)?0:(this.h+120)*F,Ne=+this.l,dt=isNaN(this.s)?0:this.s*Ne*(1-Ne),Dt=Math.cos(Le),Xt=Math.sin(Le);return new L(255*(Ne+dt*(ye*Dt+Te*Xt)),255*(Ne+dt*(_e*Dt+De*Xt)),255*(Ne+dt*(Be*Dt)),this.opacity)}})),w.color=A,w.cubehelix=Qe,w.gray=U,w.hcl=ge,w.hsl=D,w.lab=q,w.lch=le,w.rgb=u,Object.defineProperty(w,"__esModule",{value:!0})})},{}],110:[function(d,ne,ae){(function(w,v){typeof ae=="object"&&typeof ne<"u"?v(ae):(w=w||self,v(w.d3=w.d3||{}))})(this,function(w){var v={value:function(){}};function M(){for(var r=0,t=arguments.length,f={},o;r<t;++r){if(!(o=arguments[r]+"")||o in f||/[\s.]/.test(o))throw new Error("illegal type: "+o);f[o]=[]}return new T(f)}function T(r){this._=r}function e(r,t){return r.trim().split(/^|\s+/).map(function(f){var o="",i=f.indexOf(".");if(i>=0&&(o=f.slice(i+1),f=f.slice(0,i)),f&&!t.hasOwnProperty(f))throw new Error("unknown type: "+f);return{type:f,name:o}})}T.prototype=M.prototype={constructor:T,on:function(r,t){var f=this._,o=e(r+"",f),i,g=-1,p=o.length;if(arguments.length<2){for(;++g<p;)if((i=(r=o[g]).type)&&(i=a(f[i],r.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++g<p;)if(i=(r=o[g]).type)f[i]=n(f[i],r.name,t);else if(t==null)for(i in f)f[i]=n(f[i],r.name,null);return this},copy:function(){var r={},t=this._;for(var f in t)r[f]=t[f].slice();return new T(r)},call:function(r,t){if((i=arguments.length-2)>0)for(var f=new Array(i),o=0,i,g;o<i;++o)f[o]=arguments[o+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(g=this._[r],o=0,i=g.length;o<i;++o)g[o].value.apply(t,f)},apply:function(r,t,f){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var o=this._[r],i=0,g=o.length;i<g;++i)o[i].value.apply(t,f)}};function a(r,t){for(var f=0,o=r.length,i;f<o;++f)if((i=r[f]).name===t)return i.value}function n(r,t,f){for(var o=0,i=r.length;o<i;++o)if(r[o].name===t){r[o]=v,r=r.slice(0,o).concat(r.slice(o+1));break}return f!=null&&r.push({name:t,value:f}),r}w.dispatch=M,Object.defineProperty(w,"__esModule",{value:!0})})},{}],111:[function(d,ne,ae){(function(w,v){typeof ae=="object"&&typeof ne<"u"?v(ae,d("d3-quadtree"),d("d3-collection"),d("d3-dispatch"),d("d3-timer")):v(w.d3=w.d3||{},w.d3,w.d3,w.d3,w.d3)})(this,function(w,v,M,T,e){function a(x,u){var L;x==null&&(x=0),u==null&&(u=0);function S(){var k,P=L.length,z,I=0,D=0;for(k=0;k<P;++k)z=L[k],I+=z.x,D+=z.y;for(I=I/P-x,D=D/P-u,k=0;k<P;++k)z=L[k],z.x-=I,z.y-=D}return S.initialize=function(k){L=k},S.x=function(k){return arguments.length?(x=+k,S):x},S.y=function(k){return arguments.length?(u=+k,S):u},S}function n(x){return function(){return x}}function r(){return(Math.random()-.5)*1e-6}function t(x){return x.x+x.vx}function f(x){return x.y+x.vy}function o(x){var u,L,S=1,k=1;typeof x!="function"&&(x=n(x==null?1:+x));function P(){for(var D,R=u.length,O,F,V,G,J,Z,Y=0;Y<k;++Y)for(O=v.quadtree(u,t,f).visitAfter(z),D=0;D<R;++D)F=u[D],J=L[F.index],Z=J*J,V=F.x+F.vx,G=F.y+F.vy,O.visit(j);function j(re,se,oe,N,U){var q=re.data,Q=re.r,W=J+Q;if(q){if(q.index>F.index){var X=V-q.x-q.vx,ee=G-q.y-q.vy,te=X*X+ee*ee;te<W*W&&(X===0&&(X=r(),te+=X*X),ee===0&&(ee=r(),te+=ee*ee),te=(W-(te=Math.sqrt(te)))/te*S,F.vx+=(X*=te)*(W=(Q*=Q)/(Z+Q)),F.vy+=(ee*=te)*W,q.vx-=X*(W=1-W),q.vy-=ee*W)}return}return se>V+W||N<V-W||oe>G+W||U<G-W}}function z(D){if(D.data)return D.r=L[D.data.index];for(var R=D.r=0;R<4;++R)D[R]&&D[R].r>D.r&&(D.r=D[R].r)}function I(){if(!!u){var D,R=u.length,O;for(L=new Array(R),D=0;D<R;++D)O=u[D],L[O.index]=+x(O,D,u)}}return P.initialize=function(D){u=D,I()},P.iterations=function(D){return arguments.length?(k=+D,P):k},P.strength=function(D){return arguments.length?(S=+D,P):S},P.radius=function(D){return arguments.length?(x=typeof D=="function"?D:n(+D),I(),P):x},P}function i(x){return x.index}function g(x,u){var L=x.get(u);if(!L)throw new Error("missing: "+u);return L}function p(x){var u=i,L=O,S,k=n(30),P,z,I,D,R=1;x==null&&(x=[]);function O(Z){return 1/Math.min(I[Z.source.index],I[Z.target.index])}function F(Z){for(var Y=0,j=x.length;Y<R;++Y)for(var re=0,se,oe,N,U,q,Q,W;re<j;++re)se=x[re],oe=se.source,N=se.target,U=N.x+N.vx-oe.x-oe.vx||r(),q=N.y+N.vy-oe.y-oe.vy||r(),Q=Math.sqrt(U*U+q*q),Q=(Q-P[re])/Q*Z*S[re],U*=Q,q*=Q,N.vx-=U*(W=D[re]),N.vy-=q*W,oe.vx+=U*(W=1-W),oe.vy+=q*W}function V(){if(!!z){var Z,Y=z.length,j=x.length,re=M.map(z,u),se;for(Z=0,I=new Array(Y);Z<j;++Z)se=x[Z],se.index=Z,typeof se.source!="object"&&(se.source=g(re,se.source)),typeof se.target!="object"&&(se.target=g(re,se.target)),I[se.source.index]=(I[se.source.index]||0)+1,I[se.target.index]=(I[se.target.index]||0)+1;for(Z=0,D=new Array(j);Z<j;++Z)se=x[Z],D[Z]=I[se.source.index]/(I[se.source.index]+I[se.target.index]);S=new Array(j),G(),P=new Array(j),J()}}function G(){if(!!z)for(var Z=0,Y=x.length;Z<Y;++Z)S[Z]=+L(x[Z],Z,x)}function J(){if(!!z)for(var Z=0,Y=x.length;Z<Y;++Z)P[Z]=+k(x[Z],Z,x)}return F.initialize=function(Z){z=Z,V()},F.links=function(Z){return arguments.length?(x=Z,V(),F):x},F.id=function(Z){return arguments.length?(u=Z,F):u},F.iterations=function(Z){return arguments.length?(R=+Z,F):R},F.strength=function(Z){return arguments.length?(L=typeof Z=="function"?Z:n(+Z),G(),F):L},F.distance=function(Z){return arguments.length?(k=typeof Z=="function"?Z:n(+Z),J(),F):k},F}function y(x){return x.x}function c(x){return x.y}var b=10,l=Math.PI*(3-Math.sqrt(5));function _(x){var u,L=1,S=.001,k=1-Math.pow(S,1/300),P=0,z=.6,I=M.map(),D=e.timer(O),R=T.dispatch("tick","end");x==null&&(x=[]);function O(){F(),R.call("tick",u),L<S&&(D.stop(),R.call("end",u))}function F(J){var Z,Y=x.length,j;J===void 0&&(J=1);for(var re=0;re<J;++re)for(L+=(P-L)*k,I.each(function(se){se(L)}),Z=0;Z<Y;++Z)j=x[Z],j.fx==null?j.x+=j.vx*=z:(j.x=j.fx,j.vx=0),j.fy==null?j.y+=j.vy*=z:(j.y=j.fy,j.vy=0);return u}function V(){for(var J=0,Z=x.length,Y;J<Z;++J){if(Y=x[J],Y.index=J,Y.fx!=null&&(Y.x=Y.fx),Y.fy!=null&&(Y.y=Y.fy),isNaN(Y.x)||isNaN(Y.y)){var j=b*Math.sqrt(J),re=J*l;Y.x=j*Math.cos(re),Y.y=j*Math.sin(re)}(isNaN(Y.vx)||isNaN(Y.vy))&&(Y.vx=Y.vy=0)}}function G(J){return J.initialize&&J.initialize(x),J}return V(),u={tick:F,restart:function(){return D.restart(O),u},stop:function(){return D.stop(),u},nodes:function(J){return arguments.length?(x=J,V(),I.each(G),u):x},alpha:function(J){return arguments.length?(L=+J,u):L},alphaMin:function(J){return arguments.length?(S=+J,u):S},alphaDecay:function(J){return arguments.length?(k=+J,u):+k},alphaTarget:function(J){return arguments.length?(P=+J,u):P},velocityDecay:function(J){return arguments.length?(z=1-J,u):1-z},force:function(J,Z){return arguments.length>1?(Z==null?I.remove(J):I.set(J,G(Z)),u):I.get(J)},find:function(J,Z,Y){var j=0,re=x.length,se,oe,N,U,q;for(Y==null?Y=1/0:Y*=Y,j=0;j<re;++j)U=x[j],se=J-U.x,oe=Z-U.y,N=se*se+oe*oe,N<Y&&(q=U,Y=N);return q},on:function(J,Z){return arguments.length>1?(R.on(J,Z),u):R.on(J)}}}function s(){var x,u,L,S=n(-30),k,P=1,z=1/0,I=.81;function D(V){var G,J=x.length,Z=v.quadtree(x,y,c).visitAfter(O);for(L=V,G=0;G<J;++G)u=x[G],Z.visit(F)}function R(){if(!!x){var V,G=x.length,J;for(k=new Array(G),V=0;V<G;++V)J=x[V],k[J.index]=+S(J,V,x)}}function O(V){var G=0,J,Z,Y=0,j,re,se;if(V.length){for(j=re=se=0;se<4;++se)(J=V[se])&&(Z=Math.abs(J.value))&&(G+=J.value,Y+=Z,j+=Z*J.x,re+=Z*J.y);V.x=j/Y,V.y=re/Y}else{J=V,J.x=J.data.x,J.y=J.data.y;do G+=k[J.data.index];while(J=J.next)}V.value=G}function F(V,G,J,Z){if(!V.value)return!0;var Y=V.x-u.x,j=V.y-u.y,re=Z-G,se=Y*Y+j*j;if(re*re/I<se)return se<z&&(Y===0&&(Y=r(),se+=Y*Y),j===0&&(j=r(),se+=j*j),se<P&&(se=Math.sqrt(P*se)),u.vx+=Y*V.value*L/se,u.vy+=j*V.value*L/se),!0;if(V.length||se>=z)return;(V.data!==u||V.next)&&(Y===0&&(Y=r(),se+=Y*Y),j===0&&(j=r(),se+=j*j),se<P&&(se=Math.sqrt(P*se)));do V.data!==u&&(re=k[V.data.index]*L/se,u.vx+=Y*re,u.vy+=j*re);while(V=V.next)}return D.initialize=function(V){x=V,R()},D.strength=function(V){return arguments.length?(S=typeof V=="function"?V:n(+V),R(),D):S},D.distanceMin=function(V){return arguments.length?(P=V*V,D):Math.sqrt(P)},D.distanceMax=function(V){return arguments.length?(z=V*V,D):Math.sqrt(z)},D.theta=function(V){return arguments.length?(I=V*V,D):Math.sqrt(I)},D}function A(x,u,L){var S,k=n(.1),P,z;typeof x!="function"&&(x=n(+x)),u==null&&(u=0),L==null&&(L=0);function I(R){for(var O=0,F=S.length;O<F;++O){var V=S[O],G=V.x-u||1e-6,J=V.y-L||1e-6,Z=Math.sqrt(G*G+J*J),Y=(z[O]-Z)*P[O]*R/Z;V.vx+=G*Y,V.vy+=J*Y}}function D(){if(!!S){var R,O=S.length;for(P=new Array(O),z=new Array(O),R=0;R<O;++R)z[R]=+x(S[R],R,S),P[R]=isNaN(z[R])?0:+k(S[R],R,S)}}return I.initialize=function(R){S=R,D()},I.strength=function(R){return arguments.length?(k=typeof R=="function"?R:n(+R),D(),I):k},I.radius=function(R){return arguments.length?(x=typeof R=="function"?R:n(+R),D(),I):x},I.x=function(R){return arguments.length?(u=+R,I):u},I.y=function(R){return arguments.length?(L=+R,I):L},I}function m(x){var u=n(.1),L,S,k;typeof x!="function"&&(x=n(x==null?0:+x));function P(I){for(var D=0,R=L.length,O;D<R;++D)O=L[D],O.vx+=(k[D]-O.x)*S[D]*I}function z(){if(!!L){var I,D=L.length;for(S=new Array(D),k=new Array(D),I=0;I<D;++I)S[I]=isNaN(k[I]=+x(L[I],I,L))?0:+u(L[I],I,L)}}return P.initialize=function(I){L=I,z()},P.strength=function(I){return arguments.length?(u=typeof I=="function"?I:n(+I),z(),P):u},P.x=function(I){return arguments.length?(x=typeof I=="function"?I:n(+I),z(),P):x},P}function h(x){var u=n(.1),L,S,k;typeof x!="function"&&(x=n(x==null?0:+x));function P(I){for(var D=0,R=L.length,O;D<R;++D)O=L[D],O.vy+=(k[D]-O.y)*S[D]*I}function z(){if(!!L){var I,D=L.length;for(S=new Array(D),k=new Array(D),I=0;I<D;++I)S[I]=isNaN(k[I]=+x(L[I],I,L))?0:+u(L[I],I,L)}}return P.initialize=function(I){L=I,z()},P.strength=function(I){return arguments.length?(u=typeof I=="function"?I:n(+I),z(),P):u},P.y=function(I){return arguments.length?(x=typeof I=="function"?I:n(+I),z(),P):x},P}w.forceCenter=a,w.forceCollide=o,w.forceLink=p,w.forceManyBody=s,w.forceRadial=A,w.forceSimulation=_,w.forceX=m,w.forceY=h,Object.defineProperty(w,"__esModule",{value:!0})})},{"d3-collection":108,"d3-dispatch":110,"d3-quadtree":118,"d3-timer":123}],112:[function(d,ne,ae){(function(w,v){typeof ae=="object"&&typeof ne<"u"?v(ae):(w=typeof globalThis<"u"?globalThis:w||self,v(w.d3=w.d3||{}))})(this,function(w){function v(x){return Math.abs(x=Math.round(x))>=1e21?x.toLocaleString("en").replace(/,/g,""):x.toString(10)}function M(x,u){if((L=(x=u?x.toExponential(u-1):x.toExponential()).indexOf("e"))<0)return null;var L,S=x.slice(0,L);return[S.length>1?S[0]+S.slice(2):S,+x.slice(L+1)]}function T(x){return x=M(Math.abs(x)),x?x[1]:NaN}function e(x,u){return function(L,S){for(var k=L.length,P=[],z=0,I=x[0],D=0;k>0&&I>0&&(D+I+1>S&&(I=Math.max(1,S-D)),P.push(L.substring(k-=I,k+I)),!((D+=I+1)>S));)I=x[z=(z+1)%x.length];return P.reverse().join(u)}}function a(x){return function(u){return u.replace(/[0-9]/g,function(L){return x[+L]})}}var n=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function r(x){if(!(u=n.exec(x)))throw new Error("invalid format: "+x);var u;return new t({fill:u[1],align:u[2],sign:u[3],symbol:u[4],zero:u[5],width:u[6],comma:u[7],precision:u[8]&&u[8].slice(1),trim:u[9],type:u[10]})}r.prototype=t.prototype;function t(x){this.fill=x.fill===void 0?" ":x.fill+"",this.align=x.align===void 0?">":x.align+"",this.sign=x.sign===void 0?"-":x.sign+"",this.symbol=x.symbol===void 0?"":x.symbol+"",this.zero=!!x.zero,this.width=x.width===void 0?void 0:+x.width,this.comma=!!x.comma,this.precision=x.precision===void 0?void 0:+x.precision,this.trim=!!x.trim,this.type=x.type===void 0?"":x.type+""}t.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function f(x){e:for(var u=x.length,L=1,S=-1,k;L<u;++L)switch(x[L]){case".":S=k=L;break;case"0":S===0&&(S=L),k=L;break;default:if(!+x[L])break e;S>0&&(S=0);break}return S>0?x.slice(0,S)+x.slice(k+1):x}var o;function i(x,u){var L=M(x,u);if(!L)return x+"";var S=L[0],k=L[1],P=k-(o=Math.max(-8,Math.min(8,Math.floor(k/3)))*3)+1,z=S.length;return P===z?S:P>z?S+new Array(P-z+1).join("0"):P>0?S.slice(0,P)+"."+S.slice(P):"0."+new Array(1-P).join("0")+M(x,Math.max(0,u+P-1))[0]}function g(x,u){var L=M(x,u);if(!L)return x+"";var S=L[0],k=L[1];return k<0?"0."+new Array(-k).join("0")+S:S.length>k+1?S.slice(0,k+1)+"."+S.slice(k+1):S+new Array(k-S.length+2).join("0")}var p={"%":function(x,u){return(x*100).toFixed(u)},b:function(x){return Math.round(x).toString(2)},c:function(x){return x+""},d:v,e:function(x,u){return x.toExponential(u)},f:function(x,u){return x.toFixed(u)},g:function(x,u){return x.toPrecision(u)},o:function(x){return Math.round(x).toString(8)},p:function(x,u){return g(x*100,u)},r:g,s:i,X:function(x){return Math.round(x).toString(16).toUpperCase()},x:function(x){return Math.round(x).toString(16)}};function y(x){return x}var c=Array.prototype.map,b=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function l(x){var u=x.grouping===void 0||x.thousands===void 0?y:e(c.call(x.grouping,Number),x.thousands+""),L=x.currency===void 0?"":x.currency[0]+"",S=x.currency===void 0?"":x.currency[1]+"",k=x.decimal===void 0?".":x.decimal+"",P=x.numerals===void 0?y:a(c.call(x.numerals,String)),z=x.percent===void 0?"%":x.percent+"",I=x.minus===void 0?"-":x.minus+"",D=x.nan===void 0?"NaN":x.nan+"";function R(F){F=r(F);var V=F.fill,G=F.align,J=F.sign,Z=F.symbol,Y=F.zero,j=F.width,re=F.comma,se=F.precision,oe=F.trim,N=F.type;N==="n"?(re=!0,N="g"):p[N]||(se===void 0&&(se=12),oe=!0,N="g"),(Y||V==="0"&&G==="=")&&(Y=!0,V="0",G="=");var U=Z==="$"?L:Z==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",q=Z==="$"?S:/[%p]/.test(N)?z:"",Q=p[N],W=/[defgprs%]/.test(N);se=se===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,se)):Math.max(0,Math.min(20,se));function X(ee){var te=U,ie=q,le,ge,fe;if(N==="c")ie=Q(ee)+ie,ee="";else{ee=+ee;var pe=ee<0||1/ee<0;if(ee=isNaN(ee)?D:Q(Math.abs(ee),se),oe&&(ee=f(ee)),pe&&+ee==0&&J!=="+"&&(pe=!1),te=(pe?J==="("?J:I:J==="-"||J==="("?"":J)+te,ie=(N==="s"?b[8+o/3]:"")+ie+(pe&&J==="("?")":""),W){for(le=-1,ge=ee.length;++le<ge;)if(fe=ee.charCodeAt(le),48>fe||fe>57){ie=(fe===46?k+ee.slice(le+1):ee.slice(le))+ie,ee=ee.slice(0,le);break}}}re&&!Y&&(ee=u(ee,1/0));var ye=te.length+ee.length+ie.length,Te=ye<j?new Array(j-ye+1).join(V):"";switch(re&&Y&&(ee=u(Te+ee,Te.length?j-ie.length:1/0),Te=""),G){case"<":ee=te+ee+ie+Te;break;case"=":ee=te+Te+ee+ie;break;case"^":ee=Te.slice(0,ye=Te.length>>1)+te+ee+ie+Te.slice(ye);break;default:ee=Te+te+ee+ie;break}return P(ee)}return X.toString=function(){return F+""},X}function O(F,V){var G=R((F=r(F),F.type="f",F)),J=Math.max(-8,Math.min(8,Math.floor(T(V)/3)))*3,Z=Math.pow(10,-J),Y=b[8+J/3];return function(j){return G(Z*j)+Y}}return{format:R,formatPrefix:O}}var _;s({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function s(x){return _=l(x),w.format=_.format,w.formatPrefix=_.formatPrefix,_}function A(x){return Math.max(0,-T(Math.abs(x)))}function m(x,u){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(T(u)/3)))*3-T(Math.abs(x)))}function h(x,u){return x=Math.abs(x),u=Math.abs(u)-x,Math.max(0,T(u)-T(x))+1}w.FormatSpecifier=t,w.formatDefaultLocale=s,w.formatLocale=l,w.formatSpecifier=r,w.precisionFixed=A,w.precisionPrefix=m,w.precisionRound=h,Object.defineProperty(w,"__esModule",{value:!0})})},{}],113:[function(d,ne,ae){(function(w,v){typeof ae=="object"&&typeof ne<"u"?v(ae,d("d3-geo"),d("d3-array")):v(w.d3=w.d3||{},w.d3,w.d3)})(this,function(w,v,M){var T=Math.abs,e=Math.atan,a=Math.atan2,n=Math.cos,r=Math.exp,t=Math.floor,f=Math.log,o=Math.max,i=Math.min,g=Math.pow,p=Math.round,y=Math.sign||function(Re){return Re>0?1:Re<0?-1:0},c=Math.sin,b=Math.tan,l=1e-6,_=1e-12,s=Math.PI,A=s/2,m=s/4,h=Math.SQRT1_2,x=D(2),u=D(s),L=s*2,S=180/s,k=s/180;function P(Re){return Re?Re/Math.sin(Re):1}function z(Re){return Re>1?A:Re<-1?-A:Math.asin(Re)}function I(Re){return Re>1?0:Re<-1?s:Math.acos(Re)}function D(Re){return Re>0?Math.sqrt(Re):0}function R(Re){return Re=r(2*Re),(Re-1)/(Re+1)}function O(Re){return(r(Re)-r(-Re))/2}function F(Re){return(r(Re)+r(-Re))/2}function V(Re){return f(Re+D(Re*Re+1))}function G(Re){return f(Re+D(Re*Re-1))}function J(Re){var He=b(Re/2),qe=2*f(n(Re/2))/(He*He);function at(bt,mt){var wt=n(bt),or=n(mt),hr=c(mt),ar=or*wt,mr=-((1-ar?f((1+ar)/2)/(1-ar):-.5)+qe/(1+ar));return[mr*or*c(bt),mr*hr]}return at.invert=function(bt,mt){var wt=D(bt*bt+mt*mt),or=-Re/2,hr=50,ar;if(!wt)return[0,0];do{var mr=or/2,Cr=n(mr),Vr=c(mr),qr=Vr/Cr,xn=-f(T(Cr));or-=ar=(2/qr*xn-qe*qr-wt)/(-xn/(Vr*Vr)+1-qe/(2*Cr*Cr))*(Cr<0?.7:1)}while(T(ar)>l&&--hr>0);var Dn=c(or);return[a(bt*Dn,wt*n(or)),z(mt*Dn/wt)]},at}function Z(){var Re=A,He=v.geoProjectionMutator(J),qe=He(Re);return qe.radius=function(at){return arguments.length?He(Re=at*k):Re*S},qe.scale(179.976).clipAngle(147)}function Y(Re,He){var qe=n(He),at=P(I(qe*n(Re/=2)));return[2*qe*c(Re)*at,c(He)*at]}Y.invert=function(Re,He){if(!(Re*Re+4*He*He>s*s+l)){var qe=Re,at=He,bt=25;do{var mt=c(qe),wt=c(qe/2),or=n(qe/2),hr=c(at),ar=n(at),mr=c(2*at),Cr=hr*hr,Vr=ar*ar,qr=wt*wt,xn=1-Vr*or*or,Dn=xn?I(ar*or)*D(Hn=1/xn):Hn=0,Hn,da=2*Dn*ar*wt-Re,ma=Dn*hr-He,Za=Hn*(Vr*qr+Dn*ar*or*Cr),Ya=Hn*(.5*mt*mr-Dn*2*hr*wt),qa=Hn*.25*(mr*wt-Dn*hr*Vr*mt),hi=Hn*(Cr*or+Dn*qr*ar),ao=Ya*qa-hi*Za;if(!ao)break;var ri=(ma*Ya-da*hi)/ao,Hi=(da*qa-ma*Za)/ao;qe-=ri,at-=Hi}while((T(ri)>l||T(Hi)>l)&&--bt>0);return[qe,at]}};function j(){return v.geoProjection(Y).scale(152.63)}function re(Re){var He=c(Re),qe=n(Re),at=Re>=0?1:-1,bt=b(at*Re),mt=(1+He-qe)/2;function wt(or,hr){var ar=n(hr),mr=n(or/=2);return[(1+ar)*c(or),(at*hr>-a(mr,bt)-.001?0:-at*10)+mt+c(hr)*qe-(1+ar)*He*mr]}return wt.invert=function(or,hr){var ar=0,mr=0,Cr=50;do{var Vr=n(ar),qr=c(ar),xn=n(mr),Dn=c(mr),Hn=1+xn,da=Hn*qr-or,ma=mt+Dn*qe-Hn*He*Vr-hr,Za=Hn*Vr/2,Ya=-qr*Dn,qa=He*Hn*qr/2,hi=qe*xn+He*Vr*Dn,ao=Ya*qa-hi*Za,ri=(ma*Ya-da*hi)/ao/2,Hi=(da*qa-ma*Za)/ao;T(Hi)>2&&(Hi/=2),ar-=ri,mr-=Hi}while((T(ri)>l||T(Hi)>l)&&--Cr>0);return at*mr>-a(n(ar),bt)-.001?[ar*2,mr]:null},wt}function se(){var Re=20*k,He=Re>=0?1:-1,qe=b(He*Re),at=v.geoProjectionMutator(re),bt=at(Re),mt=bt.stream;return bt.parallel=function(wt){return arguments.length?(qe=b((He=(Re=wt*k)>=0?1:-1)*Re),at(Re)):Re*S},bt.stream=function(wt){var or=bt.rotate(),hr=mt(wt),ar=(bt.rotate([0,0]),mt(wt)),mr=bt.precision();return bt.rotate(or),hr.sphere=function(){ar.polygonStart(),ar.lineStart();for(var Cr=He*-180;He*Cr<180;Cr+=He*90)ar.point(Cr,He*90);if(Re)for(;He*(Cr-=3*He*mr)>=-180;)ar.point(Cr,He*-a(n(Cr*k/2),qe)*S);ar.lineEnd(),ar.polygonEnd()},hr},bt.scale(218.695).center([0,28.0974])}function oe(Re,He){var qe=b(He/2),at=D(1-qe*qe),bt=1+at*n(Re/=2),mt=c(Re)*at/bt,wt=qe/bt,or=mt*mt,hr=wt*wt;return[4/3*mt*(3+or-3*hr),4/3*wt*(3+3*or-hr)]}oe.invert=function(Re,He){if(Re*=3/8,He*=3/8,!Re&&T(He)>1)return null;var qe=Re*Re,at=He*He,bt=1+qe+at,mt=D((bt-D(bt*bt-4*He*He))/2),wt=z(mt)/3,or=mt?G(T(He/mt))/3:V(T(Re))/3,hr=n(wt),ar=F(or),mr=ar*ar-hr*hr;return[y(Re)*2*a(O(or)*hr,.25-mr),y(He)*2*a(ar*c(wt),.25+mr)]};function N(){return v.geoProjection(oe).scale(66.1603)}var U=D(8),q=f(1+x);function Q(Re,He){var qe=T(He);return qe<m?[Re,f(b(m+He/2))]:[Re*n(qe)*(2*x-1/c(qe)),y(He)*(2*x*(qe-m)-f(b(qe/2)))]}Q.invert=function(Re,He){if((mt=T(He))<q)return[Re,2*e(r(He))-A];var qe=m,at=25,bt,mt;do{var wt=n(qe/2),or=b(qe/2);qe-=bt=(U*(qe-m)-f(or)-mt)/(U-wt*wt/(2*or))}while(T(bt)>_&&--at>0);return[Re/(n(qe)*(U-1/c(qe))),y(He)*qe]};function W(){return v.geoProjection(Q).scale(112.314)}function X(Re){var He=2*s/Re;function qe(at,bt){var mt=v.geoAzimuthalEquidistantRaw(at,bt);if(T(at)>A){var wt=a(mt[1],mt[0]),or=D(mt[0]*mt[0]+mt[1]*mt[1]),hr=He*p((wt-A)/He)+A,ar=a(c(wt-=hr),2-n(wt));wt=hr+z(s/or*c(ar))-ar,mt[0]=or*n(wt),mt[1]=or*c(wt)}return mt}return qe.invert=function(at,bt){var mt=D(at*at+bt*bt);if(mt>A){var wt=a(bt,at),or=He*p((wt-A)/He)+A,hr=wt>or?-1:1,ar=mt*n(or-wt),mr=1/b(hr*I((ar-s)/D(s*(s-2*ar)+mt*mt)));wt=or+2*e((mr+hr*D(mr*mr-3))/3),at=mt*n(wt),bt=mt*c(wt)}return v.geoAzimuthalEquidistantRaw.invert(at,bt)},qe}function ee(){var Re=5,He=v.geoProjectionMutator(X),qe=He(Re),at=qe.stream,bt=.01,mt=-n(bt*k),wt=c(bt*k);return qe.lobes=function(or){return arguments.length?He(Re=+or):Re},qe.stream=function(or){var hr=qe.rotate(),ar=at(or),mr=(qe.rotate([0,0]),at(or));return qe.rotate(hr),ar.sphere=function(){mr.polygonStart(),mr.lineStart();for(var Cr=0,Vr=360/Re,qr=2*s/Re,xn=90-180/Re,Dn=A;Cr<Re;++Cr,xn-=Vr,Dn-=qr)mr.point(a(wt*n(Dn),mt)*S,z(wt*c(Dn))*S),xn<-90?(mr.point(-90,-180-xn-bt),mr.point(-90,-180-xn+bt)):(mr.point(90,xn+bt),mr.point(90,xn-bt));mr.lineEnd(),mr.polygonEnd()},ar},qe.scale(87.8076).center([0,17.1875]).clipAngle(180-.001)}function te(Re,He){if(arguments.length<2&&(He=Re),He===1)return v.geoAzimuthalEqualAreaRaw;if(He===1/0)return ie;function qe(at,bt){var mt=v.geoAzimuthalEqualAreaRaw(at/He,bt);return mt[0]*=Re,mt}return qe.invert=function(at,bt){var mt=v.geoAzimuthalEqualAreaRaw.invert(at/Re,bt);return mt[0]*=He,mt},qe}function ie(Re,He){return[Re*n(He)/n(He/=2),2*c(He)]}ie.invert=function(Re,He){var qe=2*z(He/2);return[Re*n(qe/2)/n(qe),qe]};function le(){var Re=2,He=v.geoProjectionMutator(te),qe=He(Re);return qe.coefficient=function(at){return arguments.length?He(Re=+at):Re},qe.scale(169.529)}function ge(Re,He,qe){var at=100,bt,mt,wt;qe=qe===void 0?0:+qe,He=+He;do mt=Re(qe),wt=Re(qe+l),mt===wt&&(wt=mt+l),qe-=bt=-1*l*(mt-He)/(mt-wt);while(at-- >0&&T(bt)>l);return at<0?NaN:qe}function fe(Re,He,qe){return He===void 0&&(He=40),qe===void 0&&(qe=_),function(at,bt,mt,wt){var or,hr,ar;mt=mt===void 0?0:+mt,wt=wt===void 0?0:+wt;for(var mr=0;mr<He;mr++){var Cr=Re(mt,wt),Vr=Cr[0]-at,qr=Cr[1]-bt;if(T(Vr)<qe&&T(qr)<qe)break;var xn=Vr*Vr+qr*qr;if(xn>or){mt-=hr/=2,wt-=ar/=2;continue}or=xn;var Dn=(mt>0?-1:1)*qe,Hn=(wt>0?-1:1)*qe,da=Re(mt+Dn,wt),ma=Re(mt,wt+Hn),Za=(da[0]-Cr[0])/Dn,Ya=(da[1]-Cr[1])/Dn,qa=(ma[0]-Cr[0])/Hn,hi=(ma[1]-Cr[1])/Hn,ao=hi*Za-Ya*qa,ri=(T(ao)<.5?.5:1)/ao;if(hr=(qr*qa-Vr*hi)*ri,ar=(Vr*Ya-qr*Za)*ri,mt+=hr,wt+=ar,T(hr)<qe&&T(ar)<qe)break}return[mt,wt]}}function pe(){var Re=te(1.68,2),He=1.4,qe=12;function at(bt,mt){if(bt+mt<-He){var wt=(bt-mt+1.6)*(bt+mt+He)/8;bt+=wt,mt-=.8*wt*c(mt+s/2)}var or=Re(bt,mt),hr=(1-n(bt*mt))/qe;return or[1]<0&&(or[0]*=1+hr),or[1]>0&&(or[1]*=1+hr/1.5*or[0]*or[0]),or}return at.invert=fe(at),at}function ye(){return v.geoProjection(pe()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function Te(Re,He){var qe=Re*c(He),at=30,bt;do He-=bt=(He+c(He)-qe)/(1+n(He));while(T(bt)>l&&--at>0);return He/2}function _e(Re,He,qe){function at(bt,mt){return[Re*bt*n(mt=Te(qe,mt)),He*c(mt)]}return at.invert=function(bt,mt){return mt=z(mt/He),[bt/(Re*n(mt)),z((2*mt+c(2*mt))/qe)]},at}var De=_e(x/A,x,s);function Be(){return v.geoProjection(De).scale(169.529)}var Ue=2.00276,xe=1.11072;function Pe(Re,He){var qe=Te(s,He);return[Ue*Re/(1/n(He)+xe/n(qe)),(He+x*c(qe))/Ue]}Pe.invert=function(Re,He){var qe=Ue*He,at=He<0?-m:m,bt=25,mt,wt;do wt=qe-x*c(at),at-=mt=(c(2*at)+2*at-s*c(wt))/(2*n(2*at)+2+s*n(wt)*x*n(at));while(T(mt)>l&&--bt>0);return wt=qe-x*c(at),[Re*(1/n(wt)+xe/n(at))/Ue,wt]};function Ve(){return v.geoProjection(Pe).scale(160.857)}function Qe(Re){var He=0,qe=v.geoProjectionMutator(Re),at=qe(He);return at.parallel=function(bt){return arguments.length?qe(He=bt*k):He*S},at}function Fe(Re,He){return[Re*n(He),He]}Fe.invert=function(Re,He){return[Re/n(He),He]};function Le(){return v.geoProjection(Fe).scale(152.63)}function Ne(Re){if(!Re)return Fe;var He=1/b(Re);function qe(at,bt){var mt=He+Re-bt,wt=mt&&at*n(bt)/mt;return[mt*c(wt),He-mt*n(wt)]}return qe.invert=function(at,bt){var mt=D(at*at+(bt=He-bt)*bt),wt=He+Re-mt;return[mt/n(wt)*a(at,bt),wt]},qe}function dt(){return Qe(Ne).scale(123.082).center([0,26.1441]).parallel(45)}function Dt(Re){function He(qe,at){var bt=A-at,mt=bt&&qe*Re*c(bt)/bt;return[bt*c(mt)/Re,A-bt*n(mt)]}return He.invert=function(qe,at){var bt=qe*Re,mt=A-at,wt=D(bt*bt+mt*mt),or=a(bt,mt);return[(wt?wt/c(wt):1)*or/Re,A-wt]},He}function Xt(){var Re=.5,He=v.geoProjectionMutator(Dt),qe=He(Re);return qe.fraction=function(at){return arguments.length?He(Re=+at):Re},qe.scale(158.837)}var At=_e(1,4/s,s);function zt(){return v.geoProjection(At).scale(152.63)}function Ut(Re,He,qe,at,bt,mt){var wt=n(mt),or;if(T(Re)>1||T(mt)>1)or=I(qe*bt+He*at*wt);else{var hr=c(Re/2),ar=c(mt/2);or=2*z(D(hr*hr+He*at*ar*ar))}return T(or)>l?[or,a(at*c(mt),He*bt-qe*at*wt)]:[0,0]}function Ct(Re,He,qe){return I((Re*Re+He*He-qe*qe)/(2*Re*He))}function Mt(Re){return Re-2*s*t((Re+s)/(2*s))}function rt(Re,He,qe){for(var at=[[Re[0],Re[1],c(Re[1]),n(Re[1])],[He[0],He[1],c(He[1]),n(He[1])],[qe[0],qe[1],c(qe[1]),n(qe[1])]],bt=at[2],mt,wt=0;wt<3;++wt,bt=mt)mt=at[wt],bt.v=Ut(mt[1]-bt[1],bt[3],bt[2],mt[3],mt[2],mt[0]-bt[0]),bt.point=[0,0];var or=Ct(at[0].v[0],at[2].v[0],at[1].v[0]),hr=Ct(at[0].v[0],at[1].v[0],at[2].v[0]),ar=s-or;at[2].point[1]=0,at[0].point[0]=-(at[1].point[0]=at[0].v[0]/2);var mr=[at[2].point[0]=at[0].point[0]+at[2].v[0]*n(or),2*(at[0].point[1]=at[1].point[1]=at[2].v[0]*c(or))];function Cr(Vr,qr){var xn=c(qr),Dn=n(qr),Hn=new Array(3),da;for(da=0;da<3;++da){var ma=at[da];if(Hn[da]=Ut(qr-ma[1],ma[3],ma[2],Dn,xn,Vr-ma[0]),!Hn[da][0])return ma.point;Hn[da][1]=Mt(Hn[da][1]-ma.v[1])}var Za=mr.slice();for(da=0;da<3;++da){var Ya=da==2?0:da+1,qa=Ct(at[da].v[0],Hn[da][0],Hn[Ya][0]);Hn[da][1]<0&&(qa=-qa),da?da==1?(qa=hr-qa,Za[0]-=Hn[da][0]*n(qa),Za[1]-=Hn[da][0]*c(qa)):(qa=ar-qa,Za[0]+=Hn[da][0]*n(qa),Za[1]+=Hn[da][0]*c(qa)):(Za[0]+=Hn[da][0]*n(qa),Za[1]-=Hn[da][0]*c(qa))}return Za[0]/=3,Za[1]/=3,Za}return Cr}function ct(Re){return Re[0]*=k,Re[1]*=k,Re}function Ze(){return ke([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function ke(Re,He,qe){var at=v.geoCentroid({type:"MultiPoint",coordinates:[Re,He,qe]}),bt=[-at[0],-at[1]],mt=v.geoRotation(bt),wt=rt(ct(mt(Re)),ct(mt(He)),ct(mt(qe)));wt.invert=fe(wt);var or=v.geoProjection(wt).rotate(bt),hr=or.center;return delete or.rotate,or.center=function(ar){return arguments.length?hr(mt(ar)):mt.invert(hr())},or.clipAngle(90)}function Ge(Re,He){var qe=D(1-c(He));return[2/u*Re*qe,u*(1-qe)]}Ge.invert=function(Re,He){var qe=(qe=He/u-1)*qe;return[qe>0?Re*D(s/qe)/2:0,z(1-qe)]};function Je(){return v.geoProjection(Ge).scale(95.6464).center([0,30])}function ot(Re){var He=b(Re);function qe(at,bt){return[at,(at?at/c(at):1)*(c(bt)*n(at)-He*n(bt))]}return qe.invert=He?function(at,bt){at&&(bt*=c(at)/at);var mt=n(at);return[at,2*a(D(mt*mt+He*He-bt*bt)-mt,He-bt)]}:function(at,bt){return[at,z(at?bt*b(at)/at:bt)]},qe}function Pt(){return Qe(ot).scale(249.828).clipAngle(90)}var _t=D(3);function Bt(Re,He){return[_t*Re*(2*n(2*He/3)-1)/u,_t*u*c(He/3)]}Bt.invert=function(Re,He){var qe=3*z(He/(_t*u));return[u*Re/(_t*(2*n(2*qe/3)-1)),qe]};function qt(){return v.geoProjection(Bt).scale(156.19)}function Ot(Re){var He=n(Re);function qe(at,bt){return[at*He,c(bt)/He]}return qe.invert=function(at,bt){return[at/He,z(bt*He)]},qe}function $t(){return Qe(Ot).parallel(38.58).scale(195.044)}function rr(Re){var He=n(Re);function qe(at,bt){return[at*He,(1+He)*b(bt/2)]}return qe.invert=function(at,bt){return[at/He,e(bt/(1+He))*2]},qe}function er(){return Qe(rr).scale(124.75)}function pr(Re,He){var qe=D(8/(3*s));return[qe*Re*(1-T(He)/s),qe*He]}pr.invert=function(Re,He){var qe=D(8/(3*s)),at=He/qe;return[Re/(qe*(1-T(at)/s)),at]};function Xr(){return v.geoProjection(pr).scale(165.664)}function hn(Re,He){var qe=D(4-3*c(T(He)));return[2/D(6*s)*Re*qe,y(He)*D(2*s/3)*(2-qe)]}hn.invert=function(Re,He){var qe=2-T(He)/D(2*s/3);return[Re*D(6*s)/(2*qe),y(He)*z((4-qe*qe)/3)]};function Qr(){return v.geoProjection(hn).scale(165.664)}function nt(Re,He){var qe=D(s*(4+s));return[2/qe*Re*(1+D(1-4*He*He/(s*s))),4/qe*He]}nt.invert=function(Re,He){var qe=D(s*(4+s))/2;return[Re*qe/(1+D(1-He*He*(4+s)/(4*s))),He*qe/2]};function Ht(){return v.geoProjection(nt).scale(180.739)}function Kt(Re,He){var qe=(2+A)*c(He);He/=2;for(var at=0,bt=1/0;at<10&&T(bt)>l;at++){var mt=n(He);He-=bt=(He+c(He)*(mt+2)-qe)/(2*mt*(1+mt))}return[2/D(s*(4+s))*Re*(1+n(He)),2*D(s/(4+s))*c(He)]}Kt.invert=function(Re,He){var qe=He*D((4+s)/s)/2,at=z(qe),bt=n(at);return[Re/(2/D(s*(4+s))*(1+bt)),z((at+qe*(bt+2))/(2+A))]};function Gt(){return v.geoProjection(Kt).scale(180.739)}function br(Re,He){return[Re*(1+n(He))/D(2+s),2*He/D(2+s)]}br.invert=function(Re,He){var qe=D(2+s),at=He*qe/2;return[qe*Re/(1+n(at)),at]};function tt(){return v.geoProjection(br).scale(173.044)}function je(Re,He){for(var qe=(1+A)*c(He),at=0,bt=1/0;at<10&&T(bt)>l;at++)He-=bt=(He+c(He)-qe)/(1+n(He));return qe=D(2+s),[Re*(1+n(He))/qe,2*He/qe]}je.invert=function(Re,He){var qe=1+A,at=D(qe/2);return[Re*2*at/(1+n(He*=at)),z((He+c(He))/qe)]};function st(){return v.geoProjection(je).scale(173.044)}var ft=3+2*x;function Me(Re,He){var qe=c(Re/=2),at=n(Re),bt=D(n(He)),mt=n(He/=2),wt=c(He)/(mt+x*at*bt),or=D(2/(1+wt*wt)),hr=D((x*mt+(at+qe)*bt)/(x*mt+(at-qe)*bt));return[ft*(or*(hr-1/hr)-2*f(hr)),ft*(or*wt*(hr+1/hr)-2*e(wt))]}Me.invert=function(Re,He){if(!(mt=oe.invert(Re/1.2,He*1.065)))return null;var qe=mt[0],at=mt[1],bt=20,mt;Re/=ft,He/=ft;do{var wt=qe/2,or=at/2,hr=c(wt),ar=n(wt),mr=c(or),Cr=n(or),Vr=n(at),qr=D(Vr),xn=mr/(Cr+x*ar*qr),Dn=xn*xn,Hn=D(2/(1+Dn)),da=x*Cr+(ar+hr)*qr,ma=x*Cr+(ar-hr)*qr,Za=da/ma,Ya=D(Za),qa=Ya-1/Ya,hi=Ya+1/Ya,ao=Hn*qa-2*f(Ya)-Re,ri=Hn*xn*hi-2*e(xn)-He,Hi=mr&&h*qr*hr*Dn/mr,uo=(x*ar*Cr+qr)/(2*(Cr+x*ar*qr)*(Cr+x*ar*qr)*qr),bo=-.5*xn*Hn*Hn*Hn,bi=bo*Hi,Mi=bo*uo,us=(us=2*Cr+x*qr*(ar-hr))*us*Ya,po=(x*ar*Cr*qr+Vr)/us,Lo=-(x*hr*mr)/(qr*us),Ho=qa*bi-2*po/Ya+Hn*(po+po/Za),ue=qa*Mi-2*Lo/Ya+Hn*(Lo+Lo/Za),be=xn*hi*bi-2*Hi/(1+Dn)+Hn*hi*Hi+Hn*xn*(po-po/Za),Ee=xn*hi*Mi-2*uo/(1+Dn)+Hn*hi*uo+Hn*xn*(Lo-Lo/Za),Oe=ue*be-Ee*Ho;if(!Oe)break;var ze=(ri*ue-ao*Ee)/Oe,We=(ao*be-ri*Ho)/Oe;qe-=ze,at=o(-A,i(A,at-We))}while((T(ze)>l||T(We)>l)&&--bt>0);return T(T(at)-A)<l?[0,at]:bt&&[qe,at]};function Se(){return v.geoProjection(Me).scale(62.5271)}var Ke=n(35*k);function Xe(Re,He){var qe=b(He/2);return[Re*Ke*D(1-qe*qe),(1+Ke)*qe]}Xe.invert=function(Re,He){var qe=He/(1+Ke);return[Re&&Re/(Ke*D(1-qe*qe)),2*e(qe)]};function it(){return v.geoProjection(Xe).scale(137.152)}function pt(Re,He){var qe=He/2,at=n(qe);return[2*Re/u*n(He)*at*at,u*b(qe)]}pt.invert=function(Re,He){var qe=e(He/u),at=n(qe),bt=2*qe;return[Re*u/2/(n(bt)*at*at),bt]};function vt(){return v.geoProjection(pt).scale(135.264)}function St(Re){var He=1-Re,qe=mt(s,0)[0]-mt(-s,0)[0],at=mt(0,A)[1]-mt(0,-A)[1],bt=D(2*at/qe);function mt(hr,ar){var mr=n(ar),Cr=c(ar);return[mr/(He+Re*mr)*hr,He*ar+Re*Cr]}function wt(hr,ar){var mr=mt(hr,ar);return[mr[0]*bt,mr[1]/bt]}function or(hr){return wt(0,hr)[1]}return wt.invert=function(hr,ar){var mr=ge(or,ar),Cr=hr/bt*(Re+He/n(mr));return[Cr,mr]},wt}function kt(){var Re=.5,He=v.geoProjectionMutator(St),qe=He(Re);return qe.alpha=function(at){return arguments.length?He(Re=+at):Re},qe.scale(168.725)}function Nt(Re){return[Re[0]/2,z(b(Re[1]/2*k))*S]}function nr(Re){return[Re[0]*2,2*e(c(Re[1]*k))*S]}function fr(Re){Re==null&&(Re=v.geoOrthographic);var He=Re(),qe=v.geoEquirectangular().scale(S).precision(0).clipAngle(null).translate([0,0]);function at(mt){return He(Nt(mt))}He.invert&&(at.invert=function(mt){return nr(He.invert(mt))}),at.stream=function(mt){var wt=He.stream(mt),or=qe.stream({point:function(hr,ar){wt.point(hr/2,z(b(-ar/2*k))*S)},lineStart:function(){wt.lineStart()},lineEnd:function(){wt.lineEnd()},polygonStart:function(){wt.polygonStart()},polygonEnd:function(){wt.polygonEnd()}});return or.sphere=wt.sphere,or};function bt(mt){at[mt]=function(){return arguments.length?(He[mt].apply(He,arguments),at):He[mt]()}}return at.rotate=function(mt){return arguments.length?(qe.rotate(mt),at):qe.rotate()},at.center=function(mt){return arguments.length?(He.center(Nt(mt)),at):nr(He.center())},bt("angle"),bt("clipAngle"),bt("clipExtent"),bt("fitExtent"),bt("fitHeight"),bt("fitSize"),bt("fitWidth"),bt("scale"),bt("translate"),bt("precision"),at.scale(249.5)}function Hr(Re,He){var qe=2*s/He,at=Re*Re;function bt(mt,wt){var or=v.geoAzimuthalEquidistantRaw(mt,wt),hr=or[0],ar=or[1],mr=hr*hr+ar*ar;if(mr>at){var Cr=D(mr),Vr=a(ar,hr),qr=qe*p(Vr/qe),xn=Vr-qr,Dn=Re*n(xn),Hn=(Re*c(xn)-xn*c(Dn))/(A-Dn),da=Er(xn,Hn),ma=(s-Re)/_r(da,Dn,s);hr=Cr;var Za=50,Ya;do hr-=Ya=(Re+_r(da,Dn,hr)*ma-Cr)/(da(hr)*ma);while(T(Ya)>l&&--Za>0);ar=xn*c(hr),hr<A&&(ar-=Hn*(hr-A));var qa=c(qr),hi=n(qr);or[0]=hr*hi-ar*qa,or[1]=hr*qa+ar*hi}return or}return bt.invert=function(mt,wt){var or=mt*mt+wt*wt;if(or>at){var hr=D(or),ar=a(wt,mt),mr=qe*p(ar/qe),Cr=ar-mr;mt=hr*n(Cr),wt=hr*c(Cr);for(var Vr=mt-A,qr=c(mt),xn=wt/qr,Dn=mt<A?1/0:0,Hn=10;;){var da=Re*c(xn),ma=Re*n(xn),Za=c(ma),Ya=A-ma,qa=(da-xn*Za)/Ya,hi=Er(xn,qa);if(T(Dn)<_||!--Hn)break;xn-=Dn=(xn*qr-qa*Vr-wt)/(qr-Vr*2*(Ya*(ma+xn*da*n(ma)-Za)-da*(da-xn*Za))/(Ya*Ya))}hr=Re+_r(hi,ma,mt)*(s-Re)/_r(hi,ma,s),ar=mr+xn,mt=hr*n(ar),wt=hr*c(ar)}return v.geoAzimuthalEquidistantRaw.invert(mt,wt)},bt}function Er(Re,He){return function(qe){var at=Re*n(qe);return qe<A&&(at-=He),D(1+at*at)}}function _r(Re,He,qe){for(var at=50,bt=(qe-He)/at,mt=Re(He)+Re(qe),wt=1,or=He;wt<at;++wt)mt+=2*Re(or+=bt);return mt*.5*bt}function en(){var Re=6,He=30*k,qe=n(He),at=c(He),bt=v.geoProjectionMutator(Hr),mt=bt(He,Re),wt=mt.stream,or=.01,hr=-n(or*k),ar=c(or*k);return mt.radius=function(mr){return arguments.length?(qe=n(He=mr*k),at=c(He),bt(He,Re)):He*S},mt.lobes=function(mr){return arguments.length?bt(He,Re=+mr):Re},mt.stream=function(mr){var Cr=mt.rotate(),Vr=wt(mr),qr=(mt.rotate([0,0]),wt(mr));return mt.rotate(Cr),Vr.sphere=function(){qr.polygonStart(),qr.lineStart();for(var xn=0,Dn=2*s/Re,Hn=0;xn<Re;++xn,Hn-=Dn)qr.point(a(ar*n(Hn),hr)*S,z(ar*c(Hn))*S),qr.point(a(at*n(Hn-Dn/2),qe)*S,z(at*c(Hn-Dn/2))*S);qr.lineEnd(),qr.polygonEnd()},Vr},mt.rotate([90,-40]).scale(91.7095).clipAngle(180-.001)}function dr(Re,He,qe,at,bt,mt,wt,or){arguments.length<8&&(or=0);function hr(ar,mr){if(!mr)return[Re*ar/s,0];var Cr=mr*mr,Vr=Re+Cr*(He+Cr*(qe+Cr*at)),qr=mr*(bt-1+Cr*(mt-or+Cr*wt)),xn=(Vr*Vr+qr*qr)/(2*qr),Dn=ar*z(Vr/xn)/s;return[xn*c(Dn),mr*(1+Cr*or)+xn*(1-n(Dn))]}return hr.invert=function(ar,mr){var Cr=s*ar/Re,Vr=mr,qr,xn,Dn=50;do{var Hn=Vr*Vr,da=Re+Hn*(He+Hn*(qe+Hn*at)),ma=Vr*(bt-1+Hn*(mt-or+Hn*wt)),Za=da*da+ma*ma,Ya=2*ma,qa=Za/Ya,hi=qa*qa,ao=z(da/qa)/s,ri=Cr*ao,Hi=da*da,uo=(2*He+Hn*(4*qe+Hn*6*at))*Vr,bo=bt+Hn*(3*mt+Hn*5*wt),bi=2*(da*uo+ma*(bo-1)),Mi=2*(bo-1),us=(bi*Ya-Za*Mi)/(Ya*Ya),po=n(ri),Lo=c(ri),Ho=qa*po,ue=qa*Lo,be=Cr/s*(1/D(1-Hi/hi))*(uo*qa-da*us)/hi,Ee=ue-ar,Oe=Vr*(1+Hn*or)+qa-Ho-mr,ze=us*Lo+Ho*be,We=Ho*ao,xt=1+us-(us*po-ue*be),ht=ue*ao,Et=ze*ht-xt*We;if(!Et)break;Cr-=qr=(Oe*ze-Ee*xt)/Et,Vr-=xn=(Ee*ht-Oe*We)/Et}while((T(qr)>l||T(xn)>l)&&--Dn>0);return[Cr,Vr]},hr}var xr=dr(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function Ur(){return v.geoProjection(xr).scale(149.995)}var Yr=dr(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function Ar(){return v.geoProjection(Yr).scale(153.93)}var et=dr(5/6*s,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Lt(){return v.geoProjection(et).scale(130.945)}function Zt(Re,He){var qe=Re*Re,at=He*He;return[Re*(1-.162388*at)*(.87-952426e-9*qe*qe),He*(1+at/12)]}Zt.invert=function(Re,He){var qe=Re,at=He,bt=50,mt;do{var wt=at*at;at-=mt=(at*(1+wt/12)-He)/(1+wt/4)}while(T(mt)>l&&--bt>0);bt=50,Re/=1-.162388*wt;do{var or=(or=qe*qe)*or;qe-=mt=(qe*(.87-952426e-9*or)-Re)/(.87-.00476213*or)}while(T(mt)>l&&--bt>0);return[qe,at]};function sr(){return v.geoProjection(Zt).scale(131.747)}var Ir=dr(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function Zr(){return v.geoProjection(Ir).scale(131.087)}function Pr(Re){var He=Re(A,0)[0]-Re(-A,0)[0];function qe(at,bt){var mt=at>0?-.5:.5,wt=Re(at+mt*s,bt);return wt[0]-=mt*He,wt}return Re.invert&&(qe.invert=function(at,bt){var mt=at>0?-.5:.5,wt=Re.invert(at+mt*He,bt),or=wt[0]-mt*s;return or<-s?or+=2*s:or>s&&(or-=2*s),wt[0]=or,wt}),qe}function wr(Re,He){var qe=y(Re),at=y(He),bt=n(He),mt=n(Re)*bt,wt=c(Re)*bt,or=c(at*He);Re=T(a(wt,or)),He=z(mt),T(Re-A)>l&&(Re%=A);var hr=Nr(Re>s/4?A-Re:Re,He);return Re>s/4&&(or=hr[0],hr[0]=-hr[1],hr[1]=-or),hr[0]*=qe,hr[1]*=-at,hr}wr.invert=function(Re,He){T(Re)>1&&(Re=y(Re)*2-Re),T(He)>1&&(He=y(He)*2-He);var qe=y(Re),at=y(He),bt=-qe*Re,mt=-at*He,wt=mt/bt<1,or=Sn(wt?mt:bt,wt?bt:mt),hr=or[0],ar=or[1],mr=n(ar);return wt&&(hr=-A-hr),[qe*(a(c(hr)*mr,-c(ar))+s),at*z(n(hr)*mr)]};function Nr(Re,He){if(He===A)return[0,0];var qe=c(He),at=qe*qe,bt=at*at,mt=1+bt,wt=1+3*bt,or=1-bt,hr=z(1/D(mt)),ar=or+at*mt*hr,mr=(1-qe)/ar,Cr=D(mr),Vr=mr*mt,qr=D(Vr),xn=Cr*or,Dn,Hn;if(Re===0)return[0,-(xn+at*qr)];var da=n(He),ma=1/da,Za=2*qe*da,Ya=(-3*at+hr*wt)*Za,qa=(-ar*da-(1-qe)*Ya)/(ar*ar),hi=.5*qa/Cr,ao=or*hi-2*at*Cr*Za,ri=at*mt*qa+mr*wt*Za,Hi=-ma*Za,uo=-ma*ri,bo=-2*ma*ao,bi=4*Re/s,Mi;if(Re>.222*s||He<s/4&&Re>.175*s){if(Dn=(xn+at*D(Vr*(1+bt)-xn*xn))/(1+bt),Re>s/4)return[Dn,Dn];var us=Dn,po=.5*Dn;Dn=.5*(po+us),Hn=50;do{var Lo=D(Vr-Dn*Dn),Ho=Dn*(bo+Hi*Lo)+uo*z(Dn/qr)-bi;if(!Ho)break;Ho<0?po=Dn:us=Dn,Dn=.5*(po+us)}while(T(us-po)>l&&--Hn>0)}else{Dn=l,Hn=25;do{var ue=Dn*Dn,be=D(Vr-ue),Ee=bo+Hi*be,Oe=Dn*Ee+uo*z(Dn/qr)-bi,ze=Ee+(uo-Hi*ue)/be;Dn-=Mi=be?Oe/ze:0}while(T(Mi)>l&&--Hn>0)}return[Dn,-xn-at*D(Vr-Dn*Dn)]}function Sn(Re,He){for(var qe=0,at=1,bt=.5,mt=50;;){var wt=bt*bt,or=D(bt),hr=z(1/D(1+wt)),ar=1-wt+bt*(1+wt)*hr,mr=(1-or)/ar,Cr=D(mr),Vr=mr*(1+wt),qr=Cr*(1-wt),xn=Vr-Re*Re,Dn=D(xn),Hn=He+qr+bt*Dn;if(T(at-qe)<_||--mt===0||Hn===0)break;Hn>0?qe=bt:at=bt,bt=.5*(qe+at)}if(!mt)return null;var da=z(or),ma=n(da),Za=1/ma,Ya=2*or*ma,qa=(-3*bt+hr*(1+3*wt))*Ya,hi=(-ar*ma-(1-or)*qa)/(ar*ar),ao=.5*hi/Cr,ri=(1-wt)*ao-2*bt*Cr*Ya,Hi=-2*Za*ri,uo=-Za*Ya,bo=-Za*(bt*(1+wt)*hi+mr*(1+3*wt)*Ya);return[s/4*(Re*(Hi+uo*Dn)+bo*z(Re/D(Vr))),da]}function _n(){return v.geoProjection(Pr(wr)).scale(239.75)}function Wn(Re,He,qe){var at,bt,mt;return Re?(at=Ln(Re,qe),He?(bt=Ln(He,1-qe),mt=bt[1]*bt[1]+qe*at[0]*at[0]*bt[0]*bt[0],[[at[0]*bt[2]/mt,at[1]*at[2]*bt[0]*bt[1]/mt],[at[1]*bt[1]/mt,-at[0]*at[2]*bt[0]*bt[2]/mt],[at[2]*bt[1]*bt[2]/mt,-qe*at[0]*at[1]*bt[0]/mt]]):[[at[0],0],[at[1],0],[at[2],0]]):(bt=Ln(He,1-qe),[[0,bt[0]/bt[1]],[1/bt[1],0],[bt[2]/bt[1],0]])}function Ln(Re,He){var qe,at,bt,mt,wt;if(He<l)return mt=c(Re),at=n(Re),qe=He*(Re-mt*at)/4,[mt-qe*at,at+qe*mt,1-He*mt*mt/2,Re-qe];if(He>=1-l)return qe=(1-He)/4,at=F(Re),mt=R(Re),bt=1/at,wt=at*O(Re),[mt+qe*(wt-Re)/(at*at),bt-qe*mt*bt*(wt-Re),bt+qe*mt*bt*(wt+Re),2*e(r(Re))-A+qe*(wt-Re)/at];var or=[1,0,0,0,0,0,0,0,0],hr=[D(He),0,0,0,0,0,0,0,0],ar=0;for(at=D(1-He),wt=1;T(hr[ar]/or[ar])>l&&ar<8;)qe=or[ar++],hr[ar]=(qe-at)/2,or[ar]=(qe+at)/2,at=D(qe*at),wt*=2;bt=wt*or[ar]*Re;do mt=hr[ar]*c(at=bt)/or[ar],bt=(z(mt)+bt)/2;while(--ar);return[c(bt),mt=n(bt),mt/n(bt-at),bt]}function Xn(Re,He,qe){var at=T(Re),bt=T(He),mt=O(bt);if(at){var wt=1/c(at),or=1/(b(at)*b(at)),hr=-(or+qe*(mt*mt*wt*wt)-1+qe),ar=(qe-1)*or,mr=(-hr+D(hr*hr-4*ar))/2;return[Kn(e(1/D(mr)),qe)*y(Re),Kn(e(D((mr/or-1)/qe)),1-qe)*y(He)]}return[0,Kn(e(mt),1-qe)*y(He)]}function Kn(Re,He){if(!He)return Re;if(He===1)return f(b(Re/2+m));for(var qe=1,at=D(1-He),bt=D(He),mt=0;T(bt)>l;mt++){if(Re%s){var wt=e(at*b(Re)/qe);wt<0&&(wt+=s),Re+=wt+~~(Re/s)*s}else Re+=Re;bt=(qe+at)/2,at=D(qe*at),bt=((qe=bt)-at)/2}return Re/(g(2,mt)*qe)}function Aa(Re,He){var qe=(x-1)/(x+1),at=D(1-qe*qe),bt=Kn(A,at*at),mt=-1,wt=f(b(s/4+T(He)/2)),or=r(mt*wt)/D(qe),hr=Ta(or*n(mt*Re),or*c(mt*Re)),ar=Xn(hr[0],hr[1],at*at);return[-ar[1],(He>=0?1:-1)*(.5*bt-ar[0])]}function Ta(Re,He){var qe=Re*Re,at=He+1,bt=1-qe-He*He;return[.5*((Re>=0?A:-A)-a(bt,2*Re)),-.25*f(bt*bt+4*qe)+.5*f(at*at+qe)]}function oi(Re,He){var qe=He[0]*He[0]+He[1]*He[1];return[(Re[0]*He[0]+Re[1]*He[1])/qe,(Re[1]*He[0]-Re[0]*He[1])/qe]}Aa.invert=function(Re,He){var qe=(x-1)/(x+1),at=D(1-qe*qe),bt=Kn(A,at*at),mt=-1,wt=Wn(.5*bt-He,-Re,at*at),or=oi(wt[0],wt[1]),hr=a(or[1],or[0])/mt;return[hr,2*e(r(.5/mt*f(qe*or[0]*or[0]+qe*or[1]*or[1])))-A]};function $a(){return v.geoProjection(Pr(Aa)).scale(151.496)}function Va(Re){var He=c(Re),qe=n(Re),at=ti(Re);at.invert=ti(-Re);function bt(mt,wt){var or=at(mt,wt);mt=or[0],wt=or[1];var hr=c(wt),ar=n(wt),mr=n(mt),Cr=I(He*hr+qe*ar*mr),Vr=c(Cr),qr=T(Vr)>l?Cr/Vr:1;return[qr*qe*c(mt),(T(mt)>A?qr:-qr)*(He*ar-qe*hr*mr)]}return bt.invert=function(mt,wt){var or=D(mt*mt+wt*wt),hr=-c(or),ar=n(or),mr=or*ar,Cr=-wt*hr,Vr=or*He,qr=D(mr*mr+Cr*Cr-Vr*Vr),xn=a(mr*Vr+Cr*qr,Cr*Vr-mr*qr),Dn=(or>A?-1:1)*a(mt*hr,or*n(xn)*ar+wt*c(xn)*hr);return at.invert(Dn,xn)},bt}function ti(Re){var He=c(Re),qe=n(Re);return function(at,bt){var mt=n(bt),wt=n(at)*mt,or=c(at)*mt,hr=c(bt);return[a(or,wt*qe-hr*He),z(hr*qe+wt*He)]}}function Mr(){var Re=0,He=v.geoProjectionMutator(Va),qe=He(Re),at=qe.rotate,bt=qe.stream,mt=v.geoCircle();return qe.parallel=function(wt){if(!arguments.length)return Re*S;var or=qe.rotate();return He(Re=wt*k).rotate(or)},qe.rotate=function(wt){return arguments.length?(at.call(qe,[wt[0],wt[1]-Re*S]),mt.center([-wt[0],-wt[1]]),qe):(wt=at.call(qe),wt[1]+=Re*S,wt)},qe.stream=function(wt){return wt=bt(wt),wt.sphere=function(){wt.polygonStart();var or=.01,hr=mt.radius(90-or)().coordinates[0],ar=hr.length-1,mr=-1,Cr;for(wt.lineStart();++mr<ar;)wt.point((Cr=hr[mr])[0],Cr[1]);for(wt.lineEnd(),hr=mt.radius(90+or)().coordinates[0],ar=hr.length-1,wt.lineStart();--mr>=0;)wt.point((Cr=hr[mr])[0],Cr[1]);wt.lineEnd(),wt.polygonEnd()},wt},qe.scale(79.4187).parallel(45).clipAngle(180-.001)}var vn=3,fn=z(1-1/vn)*S,An=Ot(0);function Gn(Re){var He=fn*k,qe=Ge(s,He)[0]-Ge(-s,He)[0],at=An(0,He)[1],bt=Ge(0,He)[1],mt=u-bt,wt=L/Re,or=4/L,hr=at+mt*mt*4/L;function ar(mr,Cr){var Vr,qr=T(Cr);if(qr>He){var xn=i(Re-1,o(0,t((mr+s)/wt)));mr+=s*(Re-1)/Re-xn*wt,Vr=Ge(mr,qr),Vr[0]=Vr[0]*L/qe-L*(Re-1)/(2*Re)+xn*L/Re,Vr[1]=at+(Vr[1]-bt)*4*mt/L,Cr<0&&(Vr[1]=-Vr[1])}else Vr=An(mr,Cr);return Vr[0]*=or,Vr[1]/=hr,Vr}return ar.invert=function(mr,Cr){mr/=or,Cr*=hr;var Vr=T(Cr);if(Vr>at){var qr=i(Re-1,o(0,t((mr+s)/wt)));mr=(mr+s*(Re-1)/Re-qr*wt)*qe/L;var xn=Ge.invert(mr,.25*(Vr-at)*L/mt+bt);return xn[0]-=s*(Re-1)/Re-qr*wt,Cr<0&&(xn[1]=-xn[1]),xn}return An.invert(mr,Cr)},ar}function ia(Re,He){return[Re,He&1?90-l:fn]}function Yn(Re,He){return[Re,He&1?-90+l:-fn]}function zn(Re){return[Re[0]*(1-l),Re[1]]}function ea(Re){var He=[].concat(M.range(-180,180+Re/2,Re).map(ia),M.range(180,-180-Re/2,-Re).map(Yn));return{type:"Polygon",coordinates:[Re===180?He.map(zn):He]}}function wa(){var Re=4,He=v.geoProjectionMutator(Gn),qe=He(Re),at=qe.stream;return qe.lobes=function(bt){return arguments.length?He(Re=+bt):Re},qe.stream=function(bt){var mt=qe.rotate(),wt=at(bt),or=(qe.rotate([0,0]),at(bt));return qe.rotate(mt),wt.sphere=function(){v.geoStream(ea(180/Re),or)},wt},qe.scale(239.75)}function si(Re){var He=1+Re,qe=c(1/He),at=z(qe),bt=2*D(s/(mt=s+4*at*He)),mt,wt=.5*bt*(He+D(Re*(2+Re))),or=Re*Re,hr=He*He;function ar(mr,Cr){var Vr=1-c(Cr),qr,xn;if(Vr&&Vr<2){var Dn=A-Cr,Hn=25,da;do{var ma=c(Dn),Za=n(Dn),Ya=at+a(ma,He-Za),qa=1+hr-2*He*Za;Dn-=da=(Dn-or*at-He*ma+qa*Ya-.5*Vr*mt)/(2*He*ma*Ya)}while(T(da)>_&&--Hn>0);qr=bt*D(qa),xn=mr*Ya/s}else qr=bt*(Re+Vr),xn=mr*at/s;return[qr*c(xn),wt-qr*n(xn)]}return ar.invert=function(mr,Cr){var Vr=mr*mr+(Cr-=wt)*Cr,qr=(1+hr-Vr/(bt*bt))/(2*He),xn=I(qr),Dn=c(xn),Hn=at+a(Dn,He-qr);return[z(mr/D(Vr))*s/Hn,z(1-2*(xn-or*at-He*Dn+(1+hr-2*He*qr)*Hn)/mt)]},ar}function Ft(){var Re=1,He=v.geoProjectionMutator(si),qe=He(Re);return qe.ratio=function(at){return arguments.length?He(Re=+at):Re},qe.scale(167.774).center([0,18.67])}var cr=.7109889596207567,$r=.0528035274542;function rn(Re,He){return He>-cr?(Re=De(Re,He),Re[1]+=$r,Re):Fe(Re,He)}rn.invert=function(Re,He){return He>-cr?De.invert(Re,He-$r):Fe.invert(Re,He)};function sn(){return v.geoProjection(rn).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function kn(Re,He){return T(He)>cr?(Re=De(Re,He),Re[1]-=He>0?$r:-$r,Re):Fe(Re,He)}kn.invert=function(Re,He){return T(He)>cr?De.invert(Re,He+(He>0?$r:-$r)):Fe.invert(Re,He)};function mn(){return v.geoProjection(kn).scale(152.63)}function un(Re,He,qe,at){var bt=D(4*s/(2*qe+(1+Re-He/2)*c(2*qe)+(Re+He)/2*c(4*qe)+He/2*c(6*qe))),mt=D(at*c(qe)*D((1+Re*n(2*qe)+He*n(4*qe))/(1+Re+He))),wt=qe*hr(1);function or(Cr){return D(1+Re*n(2*Cr)+He*n(4*Cr))}function hr(Cr){var Vr=Cr*qe;return(2*Vr+(1+Re-He/2)*c(2*Vr)+(Re+He)/2*c(4*Vr)+He/2*c(6*Vr))/qe}function ar(Cr){return or(Cr)*c(Cr)}var mr=function(Cr,Vr){var qr=qe*ge(hr,wt*c(Vr)/qe,Vr/s);isNaN(qr)&&(qr=qe*y(Vr));var xn=bt*or(qr);return[xn*mt*Cr/s*n(qr),xn/mt*c(qr)]};return mr.invert=function(Cr,Vr){var qr=ge(ar,Vr*mt/bt);return[Cr*s/(n(qr)*bt*mt*or(qr)),z(qe*hr(qr/qe)/wt)]},qe===0&&(bt=D(at/s),mr=function(Cr,Vr){return[Cr*bt,c(Vr)/bt]},mr.invert=function(Cr,Vr){return[Cr/bt,z(Vr*bt)]}),mr}function yr(){var Re=1,He=0,qe=45*k,at=2,bt=v.geoProjectionMutator(un),mt=bt(Re,He,qe,at);return mt.a=function(wt){return arguments.length?bt(Re=+wt,He,qe,at):Re},mt.b=function(wt){return arguments.length?bt(Re,He=+wt,qe,at):He},mt.psiMax=function(wt){return arguments.length?bt(Re,He,qe=+wt*k,at):qe*S},mt.ratio=function(wt){return arguments.length?bt(Re,He,qe,at=+wt):at},mt.scale(180.739)}function gr(Re,He,qe,at,bt,mt,wt,or,hr,ar,mr){if(mr.nanEncountered)return NaN;var Cr,Vr,qr,xn,Dn,Hn,da,ma,Za,Ya;if(Cr=qe-He,Vr=Re(He+Cr*.25),qr=Re(qe-Cr*.25),isNaN(Vr)){mr.nanEncountered=!0;return}if(isNaN(qr)){mr.nanEncountered=!0;return}return xn=Cr*(at+4*Vr+bt)/12,Dn=Cr*(bt+4*qr+mt)/12,Hn=xn+Dn,Ya=(Hn-wt)/15,ar>hr?(mr.maxDepthCount++,Hn+Ya):Math.abs(Ya)<or?Hn+Ya:(da=He+Cr*.5,ma=gr(Re,He,da,at,Vr,bt,xn,or*.5,hr,ar+1,mr),isNaN(ma)?(mr.nanEncountered=!0,NaN):(Za=gr(Re,da,qe,bt,qr,mt,Dn,or*.5,hr,ar+1,mr),isNaN(Za)?(mr.nanEncountered=!0,NaN):ma+Za))}function Dr(Re,He,qe,at,bt){var mt={maxDepthCount:0,nanEncountered:!1};at===void 0&&(at=1e-8),bt===void 0&&(bt=20);var wt=Re(He),or=Re(.5*(He+qe)),hr=Re(qe),ar=(wt+4*or+hr)*(qe-He)/6,mr=gr(Re,He,qe,wt,or,hr,ar,at,bt,1,mt);return mr}function dn(Re,He,qe){function at(qr){return Re+(1-Re)*g(1-g(qr,He),1/He)}function bt(qr){return Dr(at,0,qr,1e-4)}for(var mt=1/bt(1),wt=1e3,or=(1+1e-8)*mt,hr=[],ar=0;ar<=wt;ar++)hr.push(bt(ar/wt)*or);function mr(qr){var xn=0,Dn=wt,Hn=wt>>1;do hr[Hn]>qr?Dn=Hn:xn=Hn,Hn=xn+Dn>>1;while(Hn>xn);var da=hr[Hn+1]-hr[Hn];return da&&(da=(qr-hr[Hn+1])/da),(Hn+1+da)/wt}var Cr=2*mr(1)/s*mt/qe,Vr=function(qr,xn){var Dn=mr(T(c(xn))),Hn=at(Dn)*qr;return Dn/=Cr,[Hn,xn>=0?Dn:-Dn]};return Vr.invert=function(qr,xn){var Dn;return xn*=Cr,T(xn)<1&&(Dn=y(xn)*z(bt(T(xn))*mt)),[qr/at(T(xn)),Dn]},Vr}function Bn(){var Re=0,He=2.5,qe=1.183136,at=v.geoProjectionMutator(dn),bt=at(Re,He,qe);return bt.alpha=function(mt){return arguments.length?at(Re=+mt,He,qe):Re},bt.k=function(mt){return arguments.length?at(Re,He=+mt,qe):He},bt.gamma=function(mt){return arguments.length?at(Re,He,qe=+mt):qe},bt.scale(152.63)}function ta(Re,He){return T(Re[0]-He[0])<l&&T(Re[1]-He[1])<l}function bn(Re,He){for(var qe=-1,at=Re.length,bt=Re[0],mt,wt,or,hr=[];++qe<at;){mt=Re[qe],wt=(mt[0]-bt[0])/He,or=(mt[1]-bt[1])/He;for(var ar=0;ar<He;++ar)hr.push([bt[0]+ar*wt,bt[1]+ar*or]);bt=mt}return hr.push(mt),hr}function Zn(Re){var He=[],qe,at,bt,mt,wt,or,hr,ar=Re[0].length;for(hr=0;hr<ar;++hr)qe=Re[0][hr],at=qe[0][0],bt=qe[0][1],mt=qe[1][1],wt=qe[2][0],or=qe[2][1],He.push(bn([[at+l,bt+l],[at+l,mt-l],[wt-l,mt-l],[wt-l,or+l]],30));for(hr=Re[1].length-1;hr>=0;--hr)qe=Re[1][hr],at=qe[0][0],bt=qe[0][1],mt=qe[1][1],wt=qe[2][0],or=qe[2][1],He.push(bn([[wt-l,or-l],[wt-l,mt+l],[at+l,mt+l],[at+l,bt-l]],30));return{type:"Polygon",coordinates:[M.merge(He)]}}function aa(Re,He,qe){var at,bt;function mt(hr,ar){for(var mr=ar<0?-1:1,Cr=He[+(ar<0)],Vr=0,qr=Cr.length-1;Vr<qr&&hr>Cr[Vr][2][0];++Vr);var xn=Re(hr-Cr[Vr][1][0],ar);return xn[0]+=Re(Cr[Vr][1][0],mr*ar>mr*Cr[Vr][0][1]?Cr[Vr][0][1]:ar)[0],xn}qe?mt.invert=qe(mt):Re.invert&&(mt.invert=function(hr,ar){for(var mr=bt[+(ar<0)],Cr=He[+(ar<0)],Vr=0,qr=mr.length;Vr<qr;++Vr){var xn=mr[Vr];if(xn[0][0]<=hr&&hr<xn[1][0]&&xn[0][1]<=ar&&ar<xn[1][1]){var Dn=Re.invert(hr-Re(Cr[Vr][1][0],0)[0],ar);return Dn[0]+=Cr[Vr][1][0],ta(mt(Dn[0],Dn[1]),[hr,ar])?Dn:null}}});var wt=v.geoProjection(mt),or=wt.stream;return wt.stream=function(hr){var ar=wt.rotate(),mr=or(hr),Cr=(wt.rotate([0,0]),or(hr));return wt.rotate(ar),mr.sphere=function(){v.geoStream(at,Cr)},mr},wt.lobes=function(hr){return arguments.length?(at=Zn(hr),He=hr.map(function(ar){return ar.map(function(mr){return[[mr[0][0]*k,mr[0][1]*k],[mr[1][0]*k,mr[1][1]*k],[mr[2][0]*k,mr[2][1]*k]]})}),bt=He.map(function(ar){return ar.map(function(mr){var Cr=Re(mr[0][0],mr[0][1])[0],Vr=Re(mr[2][0],mr[2][1])[0],qr=Re(mr[1][0],mr[0][1])[1],xn=Re(mr[1][0],mr[1][1])[1],Dn;return qr>xn&&(Dn=qr,qr=xn,xn=Dn),[[Cr,qr],[Vr,xn]]})}),wt):He.map(function(ar){return ar.map(function(mr){return[[mr[0][0]*S,mr[0][1]*S],[mr[1][0]*S,mr[1][1]*S],[mr[2][0]*S,mr[2][1]*S]]})})},He!=null&&wt.lobes(He),wt}var pa=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function ya(){return aa(Pe,pa).scale(160.857)}var la=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Sa(){return aa(kn,la).scale(152.63)}var ho=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Ro(){return aa(De,ho).scale(169.529)}var Zo=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function tl(){return aa(De,Zo).scale(169.529).rotate([20,0])}var hl=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function Gl(){return aa(rn,hl,fe).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var vi=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function Vs(){return aa(Fe,vi).scale(152.63).rotate([-20,0])}function Ps(Re,He){return[3/L*Re*D(s*s/3-He*He),He]}Ps.invert=function(Re,He){return[L/3*Re/D(s*s/3-He*He),He]};function Ui(){return v.geoProjection(Ps).scale(158.837)}function Ao(Re){function He(qe,at){if(T(T(at)-A)<l)return[0,at<0?-2:2];var bt=c(at),mt=g((1+bt)/(1-bt),Re/2),wt=.5*(mt+1/mt)+n(qe*=Re);return[2*c(qe)/wt,(mt-1/mt)/wt]}return He.invert=function(qe,at){var bt=T(at);if(T(bt-2)<l)return qe?null:[0,y(at)*A];if(bt>2)return null;qe/=2,at/=2;var mt=qe*qe,wt=at*at,or=2*at/(1+mt+wt);return or=g((1+or)/(1-or),1/Re),[a(2*qe,1-mt-wt)/Re,z((or-1)/(or+1))]},He}function vl(){var Re=.5,He=v.geoProjectionMutator(Ao),qe=He(Re);return qe.spacing=function(at){return arguments.length?He(Re=+at):Re},qe.scale(124.75)}var hs=s/x;function Di(Re,He){return[Re*(1+D(n(He)))/2,He/(n(He/2)*n(Re/6))]}Di.invert=function(Re,He){var qe=T(Re),at=T(He),bt=l,mt=A;at<hs?mt*=at/hs:bt+=6*I(hs/at);for(var wt=0;wt<25;wt++){var or=c(mt),hr=D(n(mt)),ar=c(mt/2),mr=n(mt/2),Cr=c(bt/6),Vr=n(bt/6),qr=.5*bt*(1+hr)-qe,xn=mt/(mr*Vr)-at,Dn=hr?-.25*bt*or/hr:0,Hn=.5*(1+hr),da=(1+.5*mt*ar/mr)/(mr*Vr),ma=mt/mr*(Cr/6)/(Vr*Vr),Za=Dn*ma-da*Hn,Ya=(qr*ma-xn*Hn)/Za,qa=(xn*Dn-qr*da)/Za;if(mt-=Ya,bt-=qa,T(Ya)<l&&T(qa)<l)break}return[Re<0?-bt:bt,He<0?-mt:mt]};function rl(){return v.geoProjection(Di).scale(97.2672)}function Ki(Re,He){var qe=Re*Re,at=He*He;return[Re*(.975534+at*(-.119161+qe*-.0143059+at*-.0547009)),He*(1.00384+qe*(.0802894+at*-.02855+qe*199025e-9)+at*(.0998909+at*-.0491032))]}Ki.invert=function(Re,He){var qe=y(Re)*s,at=He/2,bt=50;do{var mt=qe*qe,wt=at*at,or=qe*at,hr=qe*(.975534+wt*(-.119161+mt*-.0143059+wt*-.0547009))-Re,ar=at*(1.00384+mt*(.0802894+wt*-.02855+mt*199025e-9)+wt*(.0998909+wt*-.0491032))-He,mr=.975534-wt*(.119161+3*mt*.0143059+wt*.0547009),Cr=-or*(2*.119161+4*.0547009*wt+2*.0143059*mt),Vr=or*(2*.0802894+4*199025e-9*mt+2*-.02855*wt),qr=1.00384+mt*(.0802894+199025e-9*mt)+wt*(3*(.0998909-.02855*mt)-5*.0491032*wt),xn=Cr*Vr-qr*mr,Dn=(ar*Cr-hr*qr)/xn,Hn=(hr*Vr-ar*mr)/xn;qe-=Dn,at-=Hn}while((T(Dn)>l||T(Hn)>l)&&--bt>0);return bt&&[qe,at]};function Fi(){return v.geoProjection(Ki).scale(139.98)}function no(Re,He){return[c(Re)/n(He),b(He)*n(Re)]}no.invert=function(Re,He){var qe=Re*Re,at=He*He,bt=at+1,mt=qe+bt,wt=Re?h*D((mt-D(mt*mt-4*qe))/qe):1/D(bt);return[z(Re*wt),y(He)*I(wt)]};function Ji(){return v.geoProjection(no).scale(144.049).clipAngle(90-.001)}function es(Re){var He=n(Re),qe=b(m+Re/2);function at(bt,mt){var wt=mt-Re,or=T(wt)<l?bt*He:T(or=m+mt/2)<l||T(T(or)-A)<l?0:bt*wt/f(b(or)/qe);return[or,wt]}return at.invert=function(bt,mt){var wt,or=mt+Re;return[T(mt)<l?bt/He:T(wt=m+or/2)<l||T(T(wt)-A)<l?0:bt*f(b(wt)/qe)/mt,or]},at}function Hs(){return Qe(es).parallel(40).scale(158.837)}function nu(Re,He){return[Re,1.25*f(b(m+.4*He))]}nu.invert=function(Re,He){return[Re,2.5*e(r(.8*He))-.625*s]};function jo(){return v.geoProjection(nu).scale(108.318)}function au(Re){var He=Re.length-1;function qe(at,bt){for(var mt=n(bt),wt=2/(1+mt*n(at)),or=wt*mt*c(at),hr=wt*c(bt),ar=He,mr=Re[ar],Cr=mr[0],Vr=mr[1],qr;--ar>=0;)mr=Re[ar],Cr=mr[0]+or*(qr=Cr)-hr*Vr,Vr=mr[1]+or*Vr+hr*qr;return Cr=or*(qr=Cr)-hr*Vr,Vr=or*Vr+hr*qr,[Cr,Vr]}return qe.invert=function(at,bt){var mt=20,wt=at,or=bt;do{for(var hr=He,ar=Re[hr],mr=ar[0],Cr=ar[1],Vr=0,qr=0,xn;--hr>=0;)ar=Re[hr],Vr=mr+wt*(xn=Vr)-or*qr,qr=Cr+wt*qr+or*xn,mr=ar[0]+wt*(xn=mr)-or*Cr,Cr=ar[1]+wt*Cr+or*xn;Vr=mr+wt*(xn=Vr)-or*qr,qr=Cr+wt*qr+or*xn,mr=wt*(xn=mr)-or*Cr-at,Cr=wt*Cr+or*xn-bt;var Dn=Vr*Vr+qr*qr,Hn,da;wt-=Hn=(mr*Vr+Cr*qr)/Dn,or-=da=(Cr*Vr-mr*qr)/Dn}while(T(Hn)+T(da)>l*l&&--mt>0);if(mt){var ma=D(wt*wt+or*or),Za=2*e(ma*.5),Ya=c(Za);return[a(wt*Ya,ma*n(Za)),ma?z(or*Ya/ma):0]}},qe}var Ds=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],Mo=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],Au=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],Rs=[[.9245,0],[0,0],[.01943,0]],bs=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Cl(){return _s(Ds,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function Mu(){return _s(Mo,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function Su(){return _s(Au,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function Gs(){return _s(Rs,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function Ll(){return _s(bs,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function _s(Re,He){var qe=v.geoProjection(au(Re)).rotate(He).clipAngle(90),at=v.geoRotation(He),bt=qe.center;return delete qe.rotate,qe.center=function(mt){return arguments.length?bt(at(mt)):at.invert(bt())},qe}var Yl=D(6),nl=D(7);function Wl(Re,He){var qe=z(7*c(He)/(3*Yl));return[Yl*Re*(2*n(2*qe/3)-1)/nl,9*c(qe/3)/nl]}Wl.invert=function(Re,He){var qe=3*z(He*nl/9);return[Re*nl/(Yl*(2*n(2*qe/3)-1)),z(c(qe)*3*Yl/7)]};function iu(){return v.geoProjection(Wl).scale(164.859)}function Pl(Re,He){for(var qe=(1+h)*c(He),at=He,bt=0,mt;bt<25&&(at-=mt=(c(at/2)+c(at)-qe)/(.5*n(at/2)+n(at)),!(T(mt)<l));bt++);return[Re*(1+2*n(at)/n(at/2))/(3*x),2*D(3)*c(at/2)/D(2+x)]}Pl.invert=function(Re,He){var qe=He*D(2+x)/(2*D(3)),at=2*z(qe);return[3*x*Re/(1+2*n(at)/n(at/2)),z((qe+c(at))/(1+h))]};function ku(){return v.geoProjection(Pl).scale(188.209)}function Ys(Re,He){for(var qe=D(6/(4+s)),at=(1+s/4)*c(He),bt=He/2,mt=0,wt;mt<25&&(bt-=wt=(bt/2+c(bt)-at)/(.5+n(bt)),!(T(wt)<l));mt++);return[qe*(.5+n(bt))*Re/1.5,qe*bt]}Ys.invert=function(Re,He){var qe=D(6/(4+s)),at=He/qe;return T(T(at)-A)<l&&(at=at<0?-A:A),[1.5*Re/(qe*(.5+n(at))),z((at/2+c(at))/(1+s/4))]};function Xl(){return v.geoProjection(Ys).scale(166.518)}function Dl(Re,He){var qe=He*He,at=qe*qe,bt=qe*at;return[Re*(.84719-.13063*qe+bt*bt*(-.04515+.05494*qe-.02326*at+.00331*bt)),He*(1.01183+at*at*(-.02625+.01926*qe-.00396*at))]}Dl.invert=function(Re,He){var qe=He,at=25,bt,mt,wt,or;do mt=qe*qe,wt=mt*mt,qe-=bt=(qe*(1.01183+wt*wt*(-.02625+.01926*mt-.00396*wt))-He)/(1.01183+wt*wt*(9*-.02625+11*.01926*mt+13*-.00396*wt));while(T(bt)>_&&--at>0);return mt=qe*qe,wt=mt*mt,or=mt*wt,[Re/(.84719-.13063*mt+or*or*(-.04515+.05494*mt-.02326*wt+.00331*or)),qe]};function vs(){return v.geoProjection(Dl).scale(175.295)}function pl(Re,He){return[Re*(1+n(He))/2,2*(He-b(He/2))]}pl.invert=function(Re,He){for(var qe=He/2,at=0,bt=1/0;at<10&&T(bt)>l;++at){var mt=n(He/2);He-=bt=(He-b(He/2)-qe)/(1-.5/(mt*mt))}return[2*Re/(1+n(He)),He]};function Zl(){return v.geoProjection(pl).scale(152.63)}var ou=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function su(){return aa(te(1/0),ou).rotate([20,0]).scale(152.63)}function Rl(Re,He){var qe=c(He),at=n(He),bt=y(Re);if(Re===0||T(He)===A)return[0,He];if(He===0)return[Re,0];if(T(Re)===A)return[Re*at,A*qe];var mt=s/(2*Re)-2*Re/s,wt=2*He/s,or=(1-wt*wt)/(qe-wt),hr=mt*mt,ar=or*or,mr=1+hr/ar,Cr=1+ar/hr,Vr=(mt*qe/or-mt/2)/mr,qr=(ar*qe/hr+or/2)/Cr,xn=Vr*Vr+at*at/mr,Dn=qr*qr-(ar*qe*qe/hr+or*qe-1)/Cr;return[A*(Vr+D(xn)*bt),A*(qr+D(Dn<0?0:Dn)*y(-He*mt)*bt)]}Rl.invert=function(Re,He){Re/=A,He/=A;var qe=Re*Re,at=He*He,bt=qe+at,mt=s*s;return[Re?(bt-1+D((1-bt)*(1-bt)+4*qe))/(2*Re)*A:0,ge(function(wt){return bt*(s*c(wt)-2*wt)*s+4*wt*wt*(He-c(wt))+2*s*wt-mt*He},0)]};function Eu(){return v.geoProjection(Rl).scale(127.267)}var lu=1.0148,Ko=.23185,al=-.14499,il=.02406,jl=lu,ps=5*Ko,So=7*al,Il=9*il,ws=1.790857183;function Ts(Re,He){var qe=He*He;return[Re,He*(lu+qe*qe*(Ko+qe*(al+il*qe)))]}Ts.invert=function(Re,He){He>ws?He=ws:He<-ws&&(He=-ws);var qe=He,at;do{var bt=qe*qe;qe-=at=(qe*(lu+bt*bt*(Ko+bt*(al+il*bt)))-He)/(jl+bt*bt*(ps+bt*(So+Il*bt)))}while(T(at)>l);return[Re,qe]};function oo(){return v.geoProjection(Ts).scale(139.319)}function dl(Re,He){if(T(He)<l)return[Re,0];var qe=b(He),at=Re*c(He);return[c(at)/qe,He+(1-n(at))/qe]}dl.invert=function(Re,He){if(T(He)<l)return[Re,0];var qe=Re*Re+He*He,at=He*.5,bt=10,mt;do{var wt=b(at),or=1/n(at),hr=qe-2*He*at+at*at;at-=mt=(wt*hr+2*(at-He))/(2+hr*or*or+2*(at-He)*wt)}while(T(mt)>l&&--bt>0);return wt=b(at),[(T(He)<T(at+1/wt)?z(Re*wt):y(He)*y(Re)*(I(T(Re*wt))+A))/c(at),at]};function yl(){return v.geoProjection(dl).scale(103.74)}function Ws(Re,He){var qe=ol(Re[1],Re[0]),at=ol(He[1],He[0]),bt=xl(qe,at),mt=zl(qe)/zl(at);return ml([1,0,Re[0][0],0,1,Re[0][1]],ml([mt,0,0,0,mt,0],ml([n(bt),c(bt),0,-c(bt),n(bt),0],[1,0,-He[0][0],0,1,-He[0][1]])))}function ds(Re){var He=1/(Re[0]*Re[4]-Re[1]*Re[3]);return[He*Re[4],-He*Re[1],He*(Re[1]*Re[5]-Re[2]*Re[4]),-He*Re[3],He*Re[0],He*(Re[2]*Re[3]-Re[0]*Re[5])]}function ml(Re,He){return[Re[0]*He[0]+Re[1]*He[3],Re[0]*He[1]+Re[1]*He[4],Re[0]*He[2]+Re[1]*He[5]+Re[2],Re[3]*He[0]+Re[4]*He[3],Re[3]*He[1]+Re[4]*He[4],Re[3]*He[2]+Re[4]*He[5]+Re[5]]}function ol(Re,He){return[Re[0]-He[0],Re[1]-He[1]]}function zl(Re){return D(Re[0]*Re[0]+Re[1]*Re[1])}function xl(Re,He){return a(Re[0]*He[1]-Re[1]*He[0],Re[0]*He[0]+Re[1]*He[1])}function Xs(Re,He,qe){at(Re,{transform:null});function at(ar,mr){if(ar.edges=Kl(ar.face),mr.face){var Cr=ar.shared=Gu(ar.face,mr.face),Vr=Ws(Cr.map(mr.project),Cr.map(ar.project));ar.transform=mr.transform?ml(mr.transform,Vr):Vr;for(var qr=mr.edges,xn=0,Dn=qr.length;xn<Dn;++xn)ts(Cr[0],qr[xn][1])&&ts(Cr[1],qr[xn][0])&&(qr[xn]=ar),ts(Cr[0],qr[xn][0])&&ts(Cr[1],qr[xn][1])&&(qr[xn]=ar);for(qr=ar.edges,xn=0,Dn=qr.length;xn<Dn;++xn)ts(Cr[0],qr[xn][0])&&ts(Cr[1],qr[xn][1])&&(qr[xn]=mr),ts(Cr[0],qr[xn][1])&&ts(Cr[1],qr[xn][0])&&(qr[xn]=mr)}else ar.transform=mr.transform;return ar.children&&ar.children.forEach(function(Hn){at(Hn,ar)}),ar}function bt(ar,mr){var Cr=He(ar,mr),Vr=Cr.project([ar*S,mr*S]),qr;return(qr=Cr.transform)?[qr[0]*Vr[0]+qr[1]*Vr[1]+qr[2],-(qr[3]*Vr[0]+qr[4]*Vr[1]+qr[5])]:(Vr[1]=-Vr[1],Vr)}sl(Re)&&(bt.invert=function(ar,mr){var Cr=mt(Re,[ar,-mr]);return Cr&&(Cr[0]*=k,Cr[1]*=k,Cr)});function mt(ar,mr){var Cr=ar.project.invert,Vr=ar.transform,qr=mr;if(Vr&&(Vr=ds(Vr),qr=[Vr[0]*qr[0]+Vr[1]*qr[1]+Vr[2],Vr[3]*qr[0]+Vr[4]*qr[1]+Vr[5]]),Cr&&ar===wt(xn=Cr(qr)))return xn;for(var xn,Dn=ar.children,Hn=0,da=Dn&&Dn.length;Hn<da;++Hn)if(xn=mt(Dn[Hn],mr))return xn}function wt(ar){return He(ar[0]*k,ar[1]*k)}var or=v.geoProjection(bt),hr=or.stream;return or.stream=function(ar){var mr=or.rotate(),Cr=hr(ar),Vr=(or.rotate([0,0]),hr(ar));return or.rotate(mr),Cr.sphere=function(){Vr.polygonStart(),Vr.lineStart(),Cu(Vr,Re),Vr.lineEnd(),Vr.polygonEnd()},Cr},or.angle(qe==null?-30:qe*S)}function Cu(Re,He,qe){var at,bt=He.edges,mt=bt.length,wt,or={type:"MultiPoint",coordinates:He.face},hr=He.face.filter(function(Dn){return T(Dn[1])!==90}),ar=v.geoBounds({type:"MultiPoint",coordinates:hr}),mr=!1,Cr=-1,Vr=ar[1][0]-ar[0][0],qr=Vr===180||Vr===360?[(ar[0][0]+ar[1][0])/2,(ar[0][1]+ar[1][1])/2]:v.geoCentroid(or);if(qe)for(;++Cr<mt&&bt[Cr]!==qe;);++Cr;for(var xn=0;xn<mt;++xn)wt=bt[(xn+Cr)%mt],Array.isArray(wt)?(mr||(Re.point((at=v.geoInterpolate(wt[0],qr)(l))[0],at[1]),mr=!0),Re.point((at=v.geoInterpolate(wt[1],qr)(l))[0],at[1])):(mr=!1,wt!==qe&&Cu(Re,wt,He))}function ts(Re,He){return Re&&He&&Re[0]===He[0]&&Re[1]===He[1]}function Gu(Re,He){for(var qe,at,bt=Re.length,mt=null,wt=0;wt<bt;++wt){qe=Re[wt];for(var or=He.length;--or>=0;)if(at=He[or],qe[0]===at[0]&&qe[1]===at[1]){if(mt)return[mt,qe];mt=qe}}}function Kl(Re){for(var He=Re.length,qe=[],at=Re[He-1],bt=0;bt<He;++bt)qe.push([at,at=Re[bt]]);return qe}function sl(Re){return Re.project.invert||Re.children&&Re.children.some(sl)}var bl=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Zs=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(Re){return Re.map(function(He){return bl[He]})});function _l(Re){Re=Re||function(qe){var at=v.geoCentroid({type:"MultiPoint",coordinates:qe});return v.geoGnomonic().scale(1).translate([0,0]).rotate([-at[0],-at[1]])};var He=Zs.map(function(qe){return{face:qe,project:Re(qe)}});return[-1,0,0,1,0,1,4,5].forEach(function(qe,at){var bt=He[qe];bt&&(bt.children||(bt.children=[])).push(He[at])}),Xs(He[0],function(qe,at){return He[qe<-s/2?at<0?6:4:qe<0?at<0?2:0:qe<s/2?at<0?3:1:at<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var uu=2/D(3);function fu(Re,He){var qe=Ge(Re,He);return[qe[0]*uu,qe[1]]}fu.invert=function(Re,He){return Ge.invert(Re/uu,He)};function Yu(Re){Re=Re||function(qe){var at=v.geoCentroid({type:"MultiPoint",coordinates:qe});return v.geoProjection(fu).translate([0,0]).scale(1).rotate(at[1]>0?[-at[0],0]:[180-at[0],180])};var He=Zs.map(function(qe){return{face:qe,project:Re(qe)}});return[-1,0,0,1,0,1,4,5].forEach(function(qe,at){var bt=He[qe];bt&&(bt.children||(bt.children=[])).push(He[at])}),Xs(He[0],function(qe,at){return He[qe<-s/2?at<0?6:4:qe<0?at<0?2:0:qe<s/2?at<0?3:1:at<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function Ri(Re){Re=Re||function(wt){var or=wt.length===6?v.geoCentroid({type:"MultiPoint",coordinates:wt}):wt[0];return v.geoGnomonic().scale(1).translate([0,0]).rotate([-or[0],-or[1]])};var He=Zs.map(function(wt){for(var or=wt.map(rs),hr=or.length,ar=or[hr-1],mr,Cr=[],Vr=0;Vr<hr;++Vr)mr=or[Vr],Cr.push(Jo([ar[0]*.9486832980505138+mr[0]*.31622776601683794,ar[1]*.9486832980505138+mr[1]*.31622776601683794,ar[2]*.9486832980505138+mr[2]*.31622776601683794]),Jo([mr[0]*.9486832980505138+ar[0]*.31622776601683794,mr[1]*.9486832980505138+ar[1]*.31622776601683794,mr[2]*.9486832980505138+ar[2]*.31622776601683794])),ar=mr;return Cr}),qe=[],at=[-1,0,0,1,0,1,4,5];He.forEach(function(wt,or){for(var hr=Zs[or],ar=hr.length,mr=qe[or]=[],Cr=0;Cr<ar;++Cr)He.push([hr[Cr],wt[(Cr*2+2)%(2*ar)],wt[(Cr*2+1)%(2*ar)]]),at.push(or),mr.push(js(rs(wt[(Cr*2+2)%(2*ar)]),rs(wt[(Cr*2+1)%(2*ar)])))});var bt=He.map(function(wt){return{project:Re(wt),face:wt}});at.forEach(function(wt,or){var hr=bt[wt];hr&&(hr.children||(hr.children=[])).push(bt[or])});function mt(wt,or){var hr=n(or),ar=[hr*n(wt),hr*c(wt),c(or)],mr=wt<-s/2?or<0?6:4:wt<0?or<0?2:0:wt<s/2?or<0?3:1:or<0?7:5,Cr=qe[mr];return bt[ll(Cr[0],ar)<0?8+3*mr:ll(Cr[1],ar)<0?8+3*mr+1:ll(Cr[2],ar)<0?8+3*mr+2:mr]}return Xs(bt[0],mt).angle(-30).scale(110.625).center([0,45])}function ll(Re,He){for(var qe=0,at=Re.length,bt=0;qe<at;++qe)bt+=Re[qe]*He[qe];return bt}function js(Re,He){return[Re[1]*He[2]-Re[2]*He[1],Re[2]*He[0]-Re[0]*He[2],Re[0]*He[1]-Re[1]*He[0]]}function Jo(Re){return[a(Re[1],Re[0])*S,z(o(-1,i(1,Re[2])))*S]}function rs(Re){var He=Re[0]*k,qe=Re[1]*k,at=n(qe);return[at*n(He),at*c(He),c(qe)]}function wl(){}function so(Re){if((qe=Re.length)<4)return!1;for(var He=0,qe,at=Re[qe-1][1]*Re[0][0]-Re[qe-1][0]*Re[0][1];++He<qe;)at+=Re[He-1][1]*Re[He][0]-Re[He-1][0]*Re[He][1];return at<=0}function cu(Re,He){for(var qe=He[0],at=He[1],bt=!1,mt=0,wt=Re.length,or=wt-1;mt<wt;or=mt++){var hr=Re[mt],ar=hr[0],mr=hr[1],Cr=Re[or],Vr=Cr[0],qr=Cr[1];mr>at^qr>at&&qe<(Vr-ar)*(at-mr)/(qr-mr)+ar&&(bt=!bt)}return bt}function ns(Re,He){var qe=He.stream,at;if(!qe)throw new Error("invalid projection");switch(Re&&Re.type){case"Feature":at=zs;break;case"FeatureCollection":at=Is;break;default:at=as;break}return at(Re,qe)}function Is(Re,He){return{type:"FeatureCollection",features:Re.features.map(function(qe){return zs(qe,He)})}}function zs(Re,He){return{type:"Feature",id:Re.id,properties:Re.properties,geometry:as(Re.geometry,He)}}function As(Re,He){return{type:"GeometryCollection",geometries:Re.geometries.map(function(qe){return as(qe,He)})}}function as(Re,He){if(!Re)return null;if(Re.type==="GeometryCollection")return As(Re,He);var qe;switch(Re.type){case"Point":qe=is;break;case"MultiPoint":qe=is;break;case"LineString":qe=hu;break;case"MultiLineString":qe=hu;break;case"Polygon":qe=Fl;break;case"MultiPolygon":qe=Fl;break;case"Sphere":qe=Fl;break;default:return null}return v.geoStream(Re,He(qe)),qe.result()}var Vi=[],ko=[],is={point:function(Re,He){Vi.push([Re,He])},result:function(){var Re=Vi.length?Vi.length<2?{type:"Point",coordinates:Vi[0]}:{type:"MultiPoint",coordinates:Vi}:null;return Vi=[],Re}},hu={lineStart:wl,point:function(Re,He){Vi.push([Re,He])},lineEnd:function(){Vi.length&&(ko.push(Vi),Vi=[])},result:function(){var Re=ko.length?ko.length<2?{type:"LineString",coordinates:ko[0]}:{type:"MultiLineString",coordinates:ko}:null;return ko=[],Re}},Fl={polygonStart:wl,lineStart:wl,point:function(Re,He){Vi.push([Re,He])},lineEnd:function(){var Re=Vi.length;if(Re){do Vi.push(Vi[0].slice());while(++Re<4);ko.push(Vi),Vi=[]}},polygonEnd:wl,result:function(){if(!ko.length)return null;var Re=[],He=[];return ko.forEach(function(qe){so(qe)?Re.push([qe]):He.push(qe)}),He.forEach(function(qe){var at=qe[0];Re.some(function(bt){if(cu(bt[0],at))return bt.push(qe),!0})||Re.push([qe])}),ko=[],Re.length?Re.length>1?{type:"MultiPolygon",coordinates:Re}:{type:"Polygon",coordinates:Re[0]}:null}};function vu(Re){var He=Re(A,0)[0]-Re(-A,0)[0];function qe(at,bt){var mt=T(at)<A,wt=Re(mt?at:at>0?at-s:at+s,bt),or=(wt[0]-wt[1])*h,hr=(wt[0]+wt[1])*h;if(mt)return[or,hr];var ar=He*h,mr=or>0^hr>0?-1:1;return[mr*or-y(hr)*ar,mr*hr-y(or)*ar]}return Re.invert&&(qe.invert=function(at,bt){var mt=(at+bt)*h,wt=(bt-at)*h,or=T(mt)<.5*He&&T(wt)<.5*He;if(!or){var hr=He*h,ar=mt>0^wt>0?-1:1,mr=-ar*at+(wt>0?1:-1)*hr,Cr=-ar*bt+(mt>0?1:-1)*hr;mt=(-mr-Cr)*h,wt=(mr-Cr)*h}var Vr=Re.invert(mt,wt);return or||(Vr[0]+=mt>0?s:-s),Vr}),v.geoProjection(qe).rotate([-90,-90,45]).clipAngle(180-.001)}function yt(){return vu(wr).scale(176.423)}function It(){return vu(Aa).scale(111.48)}function lr(Re,He){if(!(0<=(He=+He)&&He<=20))throw new Error("invalid digits");function qe(ar){var mr=ar.length,Cr=2,Vr=new Array(mr);for(Vr[0]=+ar[0].toFixed(He),Vr[1]=+ar[1].toFixed(He);Cr<mr;)Vr[Cr]=ar[Cr],++Cr;return Vr}function at(ar){return ar.map(qe)}function bt(ar){for(var mr=qe(ar[0]),Cr=[mr],Vr=1;Vr<ar.length;Vr++){var qr=qe(ar[Vr]);(qr.length>2||qr[0]!=mr[0]||qr[1]!=mr[1])&&(Cr.push(qr),mr=qr)}return Cr.length===1&&ar.length>1&&Cr.push(qe(ar[ar.length-1])),Cr}function mt(ar){return ar.map(bt)}function wt(ar){if(ar==null)return ar;var mr;switch(ar.type){case"GeometryCollection":mr={type:"GeometryCollection",geometries:ar.geometries.map(wt)};break;case"Point":mr={type:"Point",coordinates:qe(ar.coordinates)};break;case"MultiPoint":mr={type:ar.type,coordinates:at(ar.coordinates)};break;case"LineString":mr={type:ar.type,coordinates:bt(ar.coordinates)};break;case"MultiLineString":case"Polygon":mr={type:ar.type,coordinates:mt(ar.coordinates)};break;case"MultiPolygon":mr={type:"MultiPolygon",coordinates:ar.coordinates.map(mt)};break;default:return ar}return ar.bbox!=null&&(mr.bbox=ar.bbox),mr}function or(ar){var mr={type:"Feature",properties:ar.properties,geometry:wt(ar.geometry)};return ar.id!=null&&(mr.id=ar.id),ar.bbox!=null&&(mr.bbox=ar.bbox),mr}if(Re!=null)switch(Re.type){case"Feature":return or(Re);case"FeatureCollection":{var hr={type:"FeatureCollection",features:Re.features.map(or)};return Re.bbox!=null&&(hr.bbox=Re.bbox),hr}default:return wt(Re)}return Re}function tr(Re){var He=c(Re);function qe(at,bt){var mt=He?b(at*He/2)/He:at/2;if(!bt)return[2*mt,-Re];var wt=2*e(mt*c(bt)),or=1/b(bt);return[c(wt)*or,bt+(1-n(wt))*or-Re]}return qe.invert=function(at,bt){if(T(bt+=Re)<l)return[He?2*e(He*at/2)/He:at,0];var mt=at*at+bt*bt,wt=0,or=10,hr;do{var ar=b(wt),mr=1/n(wt),Cr=mt-2*bt*wt+wt*wt;wt-=hr=(ar*Cr+2*(wt-bt))/(2+Cr*mr*mr+2*(wt-bt)*ar)}while(T(hr)>l&&--or>0);var Vr=at*(ar=b(wt)),qr=b(T(bt)<T(wt+1/ar)?z(Vr)*.5:I(Vr)*.5+s/4)/c(wt);return[He?2*e(He*qr)/He:2*qr,wt]},qe}function Lr(){return Qe(tr).scale(131.215)}var tn=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];tn.forEach(function(Re){Re[1]*=1.0144});function pn(Re,He){var qe=i(18,T(He)*36/s),at=t(qe),bt=qe-at,mt=(Cr=tn[at])[0],wt=Cr[1],or=(Cr=tn[++at])[0],hr=Cr[1],ar=(Cr=tn[i(19,++at)])[0],mr=Cr[1],Cr;return[Re*(or+bt*(ar-mt)/2+bt*bt*(ar-2*or+mt)/2),(He>0?A:-A)*(hr+bt*(mr-wt)/2+bt*bt*(mr-2*hr+wt)/2)]}pn.invert=function(Re,He){var qe=He/A,at=qe*90,bt=i(18,T(at/5)),mt=o(0,t(bt));do{var wt=tn[mt][1],or=tn[mt+1][1],hr=tn[i(19,mt+2)][1],ar=hr-wt,mr=hr-2*or+wt,Cr=2*(T(qe)-or)/ar,Vr=mr/ar,qr=Cr*(1-Vr*Cr*(1-2*Vr*Cr));if(qr>=0||mt===1){at=(He>=0?5:-5)*(qr+bt);var xn=50,Dn;do bt=i(18,T(at)/5),mt=t(bt),qr=bt-mt,wt=tn[mt][1],or=tn[mt+1][1],hr=tn[i(19,mt+2)][1],at-=(Dn=(He>=0?A:-A)*(or+qr*(hr-wt)/2+qr*qr*(hr-2*or+wt)/2)-He)*S;while(T(Dn)>_&&--xn>0);break}}while(--mt>=0);var Hn=tn[mt][0],da=tn[mt+1][0],ma=tn[i(19,mt+2)][0];return[Re/(da+qr*(ma-Hn)/2+qr*qr*(ma-2*da+Hn)/2),at*k]};function wn(){return v.geoProjection(pn).scale(152.63)}function Cn(Re){function He(qe,at){var bt=n(at),mt=(Re-1)/(Re-bt*n(qe));return[mt*bt*c(qe),mt*c(at)]}return He.invert=function(qe,at){var bt=qe*qe+at*at,mt=D(bt),wt=(Re-D(1-bt*(Re+1)/(Re-1)))/((Re-1)/mt+mt/(Re-1));return[a(qe*wt,mt*D(1-wt*wt)),mt?z(at*wt/mt):0]},He}function On(Re,He){var qe=Cn(Re);if(!He)return qe;var at=n(He),bt=c(He);function mt(wt,or){var hr=qe(wt,or),ar=hr[1],mr=ar*bt/(Re-1)+at;return[hr[0]*at/mr,ar/mr]}return mt.invert=function(wt,or){var hr=(Re-1)/(Re-1-or*bt);return qe.invert(hr*wt,hr*or*at)},mt}function gn(){var Re=2,He=0,qe=v.geoProjectionMutator(On),at=qe(Re,He);return at.distance=function(bt){return arguments.length?qe(Re=+bt,He):Re},at.tilt=function(bt){return arguments.length?qe(Re,He=bt*k):He*S},at.scale(432.147).clipAngle(I(1/Re)*S-1e-6)}var In=1e-4,Pn=1e4,Un=-180,$n=Un+In,Fa=180,Ca=Fa-In,Ba=-90,Oa=Ba+In,Jn=90,ha=Jn-In;function Ga(Re){return Re.length>0}function Ka(Re){return Math.floor(Re*Pn)/Pn}function di(Re){return Re===Ba||Re===Jn?[0,Re]:[Un,Ka(Re)]}function gi(Re){var He=Re[0],qe=Re[1],at=!1;return He<=$n?(He=Un,at=!0):He>=Ca&&(He=Fa,at=!0),qe<=Oa?(qe=Ba,at=!0):qe>=ha&&(qe=Jn,at=!0),at?[He,qe]:Re}function mi(Re){return Re.map(gi)}function Ai(Re,He,qe){for(var at=0,bt=Re.length;at<bt;++at){var mt=Re[at].slice();qe.push({index:-1,polygon:He,ring:mt});for(var wt=0,or=mt.length;wt<or;++wt){var hr=mt[wt],ar=hr[0],mr=hr[1];if(ar<=$n||ar>=Ca||mr<=Oa||mr>=ha){mt[wt]=gi(hr);for(var Cr=wt+1;Cr<or;++Cr){var Vr=mt[Cr],qr=Vr[0],xn=Vr[1];if(qr>$n&&qr<Ca&&xn>Oa&&xn<ha)break}if(Cr===wt+1)continue;if(wt){var Dn={index:-1,polygon:He,ring:mt.slice(0,wt+1)};Dn.ring[Dn.ring.length-1]=di(mr),qe[qe.length-1]=Dn}else qe.pop();if(Cr>=or)break;qe.push({index:-1,polygon:He,ring:mt=mt.slice(Cr-1)}),mt[0]=di(mt[0][1]),wt=-1,or=mt.length}}}}function li(Re){var He,qe=Re.length,at={},bt={},mt,wt,or,hr,ar;for(He=0;He<qe;++He){if(mt=Re[He],wt=mt.ring[0],hr=mt.ring[mt.ring.length-1],wt[0]===hr[0]&&wt[1]===hr[1]){mt.polygon.push(mt.ring),Re[He]=null;continue}mt.index=He,at[wt]=bt[hr]=mt}for(He=0;He<qe;++He)if(mt=Re[He],mt){if(wt=mt.ring[0],hr=mt.ring[mt.ring.length-1],or=bt[wt],ar=at[hr],delete at[wt],delete bt[hr],wt[0]===hr[0]&&wt[1]===hr[1]){mt.polygon.push(mt.ring);continue}or?(delete bt[wt],delete at[or.ring[0]],or.ring.pop(),Re[or.index]=null,mt={index:-1,polygon:or.polygon,ring:or.ring.concat(mt.ring)},or===ar?mt.polygon.push(mt.ring):(mt.index=qe++,Re.push(at[mt.ring[0]]=bt[mt.ring[mt.ring.length-1]]=mt))):ar?(delete at[hr],delete bt[ar.ring[ar.ring.length-1]],mt.ring.pop(),mt={index:qe++,polygon:ar.polygon,ring:mt.ring.concat(ar.ring)},Re[ar.index]=null,Re.push(at[mt.ring[0]]=bt[mt.ring[mt.ring.length-1]]=mt)):(mt.ring.push(mt.ring[0]),mt.polygon.push(mt.ring))}}function yo(Re){var He={type:"Feature",geometry:qi(Re.geometry)};return Re.id!=null&&(He.id=Re.id),Re.bbox!=null&&(He.bbox=Re.bbox),Re.properties!=null&&(He.properties=Re.properties),He}function qi(Re){if(Re==null)return Re;var He,qe,at,bt;switch(Re.type){case"GeometryCollection":He={type:"GeometryCollection",geometries:Re.geometries.map(qi)};break;case"Point":He={type:"Point",coordinates:gi(Re.coordinates)};break;case"MultiPoint":case"LineString":He={type:Re.type,coordinates:mi(Re.coordinates)};break;case"MultiLineString":He={type:"MultiLineString",coordinates:Re.coordinates.map(mi)};break;case"Polygon":{var mt=[];Ai(Re.coordinates,mt,qe=[]),li(qe),He={type:"Polygon",coordinates:mt};break}case"MultiPolygon":{qe=[],at=-1,bt=Re.coordinates.length;for(var wt=new Array(bt);++at<bt;)Ai(Re.coordinates[at],wt[at]=[],qe);li(qe),He={type:"MultiPolygon",coordinates:wt.filter(Ga)};break}default:return Re}return Re.bbox!=null&&(He.bbox=Re.bbox),He}function ja(Re){if(Re==null)return Re;switch(Re.type){case"Feature":return yo(Re);case"FeatureCollection":{var He={type:"FeatureCollection",features:Re.features.map(yo)};return Re.bbox!=null&&(He.bbox=Re.bbox),He}default:return qi(Re)}}function va(Re,He){var qe=b(He/2),at=c(m*qe);return[Re*(.74482-.34588*at*at),1.70711*qe]}va.invert=function(Re,He){var qe=He/1.70711,at=c(m*qe);return[Re/(.74482-.34588*at*at),2*e(qe)]};function xi(){return v.geoProjection(va).scale(146.153)}function lo(Re,He,qe){var at=v.geoInterpolate(He,qe),bt=at(.5),mt=v.geoRotation([-bt[0],-bt[1]])(He),wt=at.distance/2,or=-z(c(mt[1]*k)/c(wt)),hr=[-bt[0],-bt[1],-(mt[0]>0?s-or:or)*S],ar=v.geoProjection(Re(wt)).rotate(hr),mr=v.geoRotation(hr),Cr=ar.center;return delete ar.rotate,ar.center=function(Vr){return arguments.length?Cr(mr(Vr)):mr.invert(Cr())},ar.clipAngle(90)}function vo(Re){var He=n(Re);function qe(at,bt){var mt=v.geoGnomonicRaw(at,bt);return mt[0]*=He,mt}return qe.invert=function(at,bt){return v.geoGnomonicRaw.invert(at/He,bt)},qe}function os(){return Ms([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function Ms(Re,He){return lo(vo,Re,He)}function Io(Re){if(!(Re*=2))return v.geoAzimuthalEquidistantRaw;var He=-Re/2,qe=-He,at=Re*Re,bt=b(qe),mt=.5/c(qe);function wt(or,hr){var ar=I(n(hr)*n(or-He)),mr=I(n(hr)*n(or-qe)),Cr=hr<0?-1:1;return ar*=ar,mr*=mr,[(ar-mr)/(2*Re),Cr*D(4*at*mr-(at-ar+mr)*(at-ar+mr))/(2*Re)]}return wt.invert=function(or,hr){var ar=hr*hr,mr=n(D(ar+(Vr=or+He)*Vr)),Cr=n(D(ar+(Vr=or+qe)*Vr)),Vr,qr;return[a(qr=mr-Cr,Vr=(mr+Cr)*bt),(hr<0?-1:1)*I(D(Vr*Vr+qr*qr)*mt)]},wt}function Ks(){return gs([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function gs(Re,He){return lo(Io,Re,He)}function ss(Re,He){if(T(He)<l)return[Re,0];var qe=T(He/A),at=z(qe);if(T(Re)<l||T(T(He)-A)<l)return[0,y(He)*s*b(at/2)];var bt=n(at),mt=T(s/Re-Re/s)/2,wt=mt*mt,or=bt/(qe+bt-1),hr=or*(2/qe-1),ar=hr*hr,mr=ar+wt,Cr=or-ar,Vr=wt+or;return[y(Re)*s*(mt*Cr+D(wt*Cr*Cr-mr*(or*or-ar)))/mr,y(He)*s*(hr*Vr-mt*D((wt+1)*mr-Vr*Vr))/mr]}ss.invert=function(Re,He){if(T(He)<l)return[Re,0];if(T(Re)<l)return[0,A*c(2*e(He/s))];var qe=(Re/=s)*Re,at=(He/=s)*He,bt=qe+at,mt=bt*bt,wt=-T(He)*(1+bt),or=wt-2*at+qe,hr=-2*wt+1+2*at+mt,ar=at/hr+(2*or*or*or/(hr*hr*hr)-9*wt*or/(hr*hr))/27,mr=(wt-or*or/(3*hr))/hr,Cr=2*D(-mr/3),Vr=I(3*ar/(mr*Cr))/3;return[s*(bt-1+D(1+2*(qe-at)+mt))/(2*Re),y(He)*s*(-Cr*n(Vr+s/3)-or/(3*hr))]};function mo(){return v.geoProjection(ss).scale(79.4183)}function Bl(Re,He){if(T(He)<l)return[Re,0];var qe=T(He/A),at=z(qe);if(T(Re)<l||T(T(He)-A)<l)return[0,y(He)*s*b(at/2)];var bt=n(at),mt=T(s/Re-Re/s)/2,wt=mt*mt,or=bt*(D(1+wt)-mt*bt)/(1+wt*qe*qe);return[y(Re)*s*or,y(He)*s*D(1-or*(2*mt+or))]}Bl.invert=function(Re,He){if(!Re)return[0,A*c(2*e(He/s))];var qe=T(Re/s),at=(1-qe*qe-(He/=s)*He)/(2*qe),bt=at*at,mt=D(bt+1);return[y(Re)*s*(mt-at),y(He)*A*c(2*a(D((1-2*at*qe)*(at+mt)-qe),D(mt+at+qe)))]};function Jl(){return v.geoProjection(Bl).scale(79.4183)}function ls(Re,He){if(T(He)<l)return[Re,0];var qe=He/A,at=z(qe);if(T(Re)<l||T(T(He)-A)<l)return[0,s*b(at/2)];var bt=(s/Re-Re/s)/2,mt=qe/(1+n(at));return[s*(y(Re)*D(bt*bt+1-mt*mt)-bt),s*mt]}ls.invert=function(Re,He){if(!He)return[Re,0];var qe=He/s,at=(s*s*(1-qe*qe)-Re*Re)/(2*s*Re);return[Re?s*(y(Re)*D(at*at+1)-at):0,A*c(2*e(qe))]};function pu(){return v.geoProjection(ls).scale(79.4183)}function Ol(Re,He){if(!He)return[Re,0];var qe=T(He);if(!Re||qe===A)return[0,He];var at=qe/A,bt=at*at,mt=(8*at-bt*(bt+2)-5)/(2*bt*(at-1)),wt=mt*mt,or=at*mt,hr=bt+wt+2*or,ar=at+3*mt,mr=Re/A,Cr=mr+1/mr,Vr=y(T(Re)-A)*D(Cr*Cr-4),qr=Vr*Vr,xn=hr*(bt+wt*qr-1)+(1-bt)*(bt*(ar*ar+4*wt)+12*or*wt+4*wt*wt),Dn=(Vr*(hr+wt-1)+2*D(xn))/(4*hr+qr);return[y(Re)*A*Dn,y(He)*A*D(1+Vr*T(Dn)-Dn*Dn)]}Ol.invert=function(Re,He){var qe;if(!Re||!He)return[Re,He];He/=s;var at=y(Re)*Re/A,bt=(at*at-1+4*He*He)/T(at),mt=bt*bt,wt=2*He,or=50;do{var hr=wt*wt,ar=(8*wt-hr*(hr+2)-5)/(2*hr*(wt-1)),mr=(3*wt-hr*wt-10)/(2*hr*wt),Cr=ar*ar,Vr=wt*ar,qr=wt+ar,xn=qr*qr,Dn=wt+3*ar,Hn=xn*(hr+Cr*mt-1)+(1-hr)*(hr*(Dn*Dn+4*Cr)+Cr*(12*Vr+4*Cr)),da=-2*qr*(4*Vr*Cr+(1-4*hr+3*hr*hr)*(1+mr)+Cr*(-6+14*hr-mt+(-8+8*hr-2*mt)*mr)+Vr*(-8+12*hr+(-10+10*hr-mt)*mr)),ma=D(Hn),Za=bt*(xn+Cr-1)+2*ma-at*(4*xn+mt),Ya=bt*(2*ar*mr+2*qr*(1+mr))+da/ma-8*qr*(bt*(-1+Cr+xn)+2*ma)*(1+mr)/(mt+4*xn);wt-=qe=Za/Ya}while(qe>l&&--or>0);return[y(Re)*(D(bt*bt+4)+bt)*s/4,A*wt]};function hf(){return v.geoProjection(Ol).scale(127.16)}function Lu(Re,He,qe,at,bt){function mt(wt,or){var hr=qe*c(at*or),ar=D(1-hr*hr),mr=D(2/(1+ar*n(wt*=bt)));return[Re*ar*mr*c(wt),He*hr*mr]}return mt.invert=function(wt,or){var hr=wt/Re,ar=or/He,mr=D(hr*hr+ar*ar),Cr=2*z(mr/2);return[a(wt*b(Cr),Re*mr)/bt,mr&&z(or*c(Cr)/(He*qe*mr))/at]},mt}function du(Re,He,qe,at){var bt=s/3;Re=o(Re,l),He=o(He,l),Re=i(Re,A),He=i(He,s-l),qe=o(qe,0),qe=i(qe,100-l),at=o(at,l);var mt=qe/100+1,wt=at/100,or=I(mt*n(bt))/bt,hr=c(Re)/c(or*A),ar=He/s,mr=D(wt*c(Re/2)/c(He/2)),Cr=mr/D(ar*hr*or),Vr=1/(mr*D(ar*hr*or));return Lu(Cr,Vr,hr,or,ar)}function Pu(){var Re=65*k,He=60*k,qe=20,at=200,bt=v.geoProjectionMutator(du),mt=bt(Re,He,qe,at);return mt.poleline=function(wt){return arguments.length?bt(Re=+wt*k,He,qe,at):Re*S},mt.parallels=function(wt){return arguments.length?bt(Re,He=+wt*k,qe,at):He*S},mt.inflation=function(wt){return arguments.length?bt(Re,He,qe=+wt,at):qe},mt.ratio=function(wt){return arguments.length?bt(Re,He,qe,at=+wt):at},mt.scale(163.775)}function Ss(){return Pu().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}var Wu=4*s+3*D(3),Du=2*D(2*s*D(3)/Wu),Ru=_e(Du*D(3)/s,Du,Wu/6);function zo(){return v.geoProjection(Ru).scale(176.84)}function Iu(Re,He){return[Re*D(1-3*He*He/(s*s)),He]}Iu.invert=function(Re,He){return[Re/D(1-3*He*He/(s*s)),He]};function Qu(){return v.geoProjection(Iu).scale(152.63)}function ys(Re,He){var qe=n(He),at=n(Re)*qe,bt=1-at,mt=n(Re=a(c(Re)*qe,-c(He))),wt=c(Re);return qe=D(1-at*at),[wt*qe-mt*bt,-mt*qe-wt*bt]}ys.invert=function(Re,He){var qe=(Re*Re+He*He)/-2,at=D(-qe*(2+qe)),bt=He*qe+Re*at,mt=Re*qe-He*at,wt=D(mt*mt+bt*bt);return[a(at*bt,wt*(1+qe)),wt?-z(at*mt/wt):0]};function gu(){return v.geoProjection(ys).rotate([0,-90,45]).scale(124.75).clipAngle(180-.001)}function yu(Re,He){var qe=Y(Re,He);return[(qe[0]+Re/A)/2,(qe[1]+He)/2]}yu.invert=function(Re,He){var qe=Re,at=He,bt=25;do{var mt=n(at),wt=c(at),or=c(2*at),hr=wt*wt,ar=mt*mt,mr=c(qe),Cr=n(qe/2),Vr=c(qe/2),qr=Vr*Vr,xn=1-ar*Cr*Cr,Dn=xn?I(mt*Cr)*D(Hn=1/xn):Hn=0,Hn,da=.5*(2*Dn*mt*Vr+qe/A)-Re,ma=.5*(Dn*wt+at)-He,Za=.5*Hn*(ar*qr+Dn*mt*Cr*hr)+.5/A,Ya=Hn*(mr*or/4-Dn*wt*Vr),qa=.125*Hn*(or*Vr-Dn*wt*ar*mr),hi=.5*Hn*(hr*Cr+Dn*qr*mt)+.5,ao=Ya*qa-hi*Za,ri=(ma*Ya-da*hi)/ao,Hi=(da*qa-ma*Za)/ao;qe-=ri,at-=Hi}while((T(ri)>l||T(Hi)>l)&&--bt>0);return[qe,at]};function zu(){return v.geoProjection(yu).scale(158.837)}w.geoNaturalEarth=v.geoNaturalEarth1,w.geoNaturalEarthRaw=v.geoNaturalEarth1Raw,w.geoAiry=Z,w.geoAiryRaw=J,w.geoAitoff=j,w.geoAitoffRaw=Y,w.geoArmadillo=se,w.geoArmadilloRaw=re,w.geoAugust=N,w.geoAugustRaw=oe,w.geoBaker=W,w.geoBakerRaw=Q,w.geoBerghaus=ee,w.geoBerghausRaw=X,w.geoBertin1953=ye,w.geoBertin1953Raw=pe,w.geoBoggs=Ve,w.geoBoggsRaw=Pe,w.geoBonne=dt,w.geoBonneRaw=Ne,w.geoBottomley=Xt,w.geoBottomleyRaw=Dt,w.geoBromley=zt,w.geoBromleyRaw=At,w.geoChamberlin=ke,w.geoChamberlinRaw=rt,w.geoChamberlinAfrica=Ze,w.geoCollignon=Je,w.geoCollignonRaw=Ge,w.geoCraig=Pt,w.geoCraigRaw=ot,w.geoCraster=qt,w.geoCrasterRaw=Bt,w.geoCylindricalEqualArea=$t,w.geoCylindricalEqualAreaRaw=Ot,w.geoCylindricalStereographic=er,w.geoCylindricalStereographicRaw=rr,w.geoEckert1=Xr,w.geoEckert1Raw=pr,w.geoEckert2=Qr,w.geoEckert2Raw=hn,w.geoEckert3=Ht,w.geoEckert3Raw=nt,w.geoEckert4=Gt,w.geoEckert4Raw=Kt,w.geoEckert5=tt,w.geoEckert5Raw=br,w.geoEckert6=st,w.geoEckert6Raw=je,w.geoEisenlohr=Se,w.geoEisenlohrRaw=Me,w.geoFahey=it,w.geoFaheyRaw=Xe,w.geoFoucaut=vt,w.geoFoucautRaw=pt,w.geoFoucautSinusoidal=kt,w.geoFoucautSinusoidalRaw=St,w.geoGilbert=fr,w.geoGingery=en,w.geoGingeryRaw=Hr,w.geoGinzburg4=Ur,w.geoGinzburg4Raw=xr,w.geoGinzburg5=Ar,w.geoGinzburg5Raw=Yr,w.geoGinzburg6=Lt,w.geoGinzburg6Raw=et,w.geoGinzburg8=sr,w.geoGinzburg8Raw=Zt,w.geoGinzburg9=Zr,w.geoGinzburg9Raw=Ir,w.geoGringorten=_n,w.geoGringortenRaw=wr,w.geoGuyou=$a,w.geoGuyouRaw=Aa,w.geoHammer=le,w.geoHammerRaw=te,w.geoHammerRetroazimuthal=Mr,w.geoHammerRetroazimuthalRaw=Va,w.geoHealpix=wa,w.geoHealpixRaw=Gn,w.geoHill=Ft,w.geoHillRaw=si,w.geoHomolosine=mn,w.geoHomolosineRaw=kn,w.geoHufnagel=yr,w.geoHufnagelRaw=un,w.geoHyperelliptical=Bn,w.geoHyperellipticalRaw=dn,w.geoInterrupt=aa,w.geoInterruptedBoggs=ya,w.geoInterruptedHomolosine=Sa,w.geoInterruptedMollweide=Ro,w.geoInterruptedMollweideHemispheres=tl,w.geoInterruptedSinuMollweide=Gl,w.geoInterruptedSinusoidal=Vs,w.geoKavrayskiy7=Ui,w.geoKavrayskiy7Raw=Ps,w.geoLagrange=vl,w.geoLagrangeRaw=Ao,w.geoLarrivee=rl,w.geoLarriveeRaw=Di,w.geoLaskowski=Fi,w.geoLaskowskiRaw=Ki,w.geoLittrow=Ji,w.geoLittrowRaw=no,w.geoLoximuthal=Hs,w.geoLoximuthalRaw=es,w.geoMiller=jo,w.geoMillerRaw=nu,w.geoModifiedStereographic=_s,w.geoModifiedStereographicRaw=au,w.geoModifiedStereographicAlaska=Cl,w.geoModifiedStereographicGs48=Mu,w.geoModifiedStereographicGs50=Su,w.geoModifiedStereographicMiller=Gs,w.geoModifiedStereographicLee=Ll,w.geoMollweide=Be,w.geoMollweideRaw=De,w.geoMtFlatPolarParabolic=iu,w.geoMtFlatPolarParabolicRaw=Wl,w.geoMtFlatPolarQuartic=ku,w.geoMtFlatPolarQuarticRaw=Pl,w.geoMtFlatPolarSinusoidal=Xl,w.geoMtFlatPolarSinusoidalRaw=Ys,w.geoNaturalEarth2=vs,w.geoNaturalEarth2Raw=Dl,w.geoNellHammer=Zl,w.geoNellHammerRaw=pl,w.geoInterruptedQuarticAuthalic=su,w.geoNicolosi=Eu,w.geoNicolosiRaw=Rl,w.geoPatterson=oo,w.geoPattersonRaw=Ts,w.geoPolyconic=yl,w.geoPolyconicRaw=dl,w.geoPolyhedral=Xs,w.geoPolyhedralButterfly=_l,w.geoPolyhedralCollignon=Yu,w.geoPolyhedralWaterman=Ri,w.geoProject=ns,w.geoGringortenQuincuncial=yt,w.geoPeirceQuincuncial=It,w.geoPierceQuincuncial=It,w.geoQuantize=lr,w.geoQuincuncial=vu,w.geoRectangularPolyconic=Lr,w.geoRectangularPolyconicRaw=tr,w.geoRobinson=wn,w.geoRobinsonRaw=pn,w.geoSatellite=gn,w.geoSatelliteRaw=On,w.geoSinuMollweide=sn,w.geoSinuMollweideRaw=rn,w.geoSinusoidal=Le,w.geoSinusoidalRaw=Fe,w.geoStitch=ja,w.geoTimes=xi,w.geoTimesRaw=va,w.geoTwoPointAzimuthal=Ms,w.geoTwoPointAzimuthalRaw=vo,w.geoTwoPointAzimuthalUsa=os,w.geoTwoPointEquidistant=gs,w.geoTwoPointEquidistantRaw=Io,w.geoTwoPointEquidistantUsa=Ks,w.geoVanDerGrinten=mo,w.geoVanDerGrintenRaw=ss,w.geoVanDerGrinten2=Jl,w.geoVanDerGrinten2Raw=Bl,w.geoVanDerGrinten3=pu,w.geoVanDerGrinten3Raw=ls,w.geoVanDerGrinten4=hf,w.geoVanDerGrinten4Raw=Ol,w.geoWagner=Pu,w.geoWagner7=Ss,w.geoWagnerRaw=du,w.geoWagner4=zo,w.geoWagner4Raw=Ru,w.geoWagner6=Qu,w.geoWagner6Raw=Iu,w.geoWiechel=gu,w.geoWiechelRaw=ys,w.geoWinkel3=zu,w.geoWinkel3Raw=yu,Object.defineProperty(w,"__esModule",{value:!0})})},{"d3-array":107,"d3-geo":114}],114:[function(d,ne,ae){(function(w,v){typeof ae=="object"&&typeof ne<"u"?v(ae,d("d3-array")):(w=w||self,v(w.d3=w.d3||{},w.d3))})(this,function(w,v){function M(){return new T}function T(){this.reset()}T.prototype={constructor:T,reset:function(){this.s=this.t=0},add:function(yt){a(e,yt,this.t),a(this,e.s,this.s),this.s?this.t+=e.t:this.s=e.t},valueOf:function(){return this.s}};var e=new T;function a(yt,It,lr){var tr=yt.s=It+lr,Lr=tr-It,tn=tr-Lr;yt.t=It-tn+(lr-Lr)}var n=1e-6,r=1e-12,t=Math.PI,f=t/2,o=t/4,i=t*2,g=180/t,p=t/180,y=Math.abs,c=Math.atan,b=Math.atan2,l=Math.cos,_=Math.ceil,s=Math.exp,A=Math.log,m=Math.pow,h=Math.sin,x=Math.sign||function(yt){return yt>0?1:yt<0?-1:0},u=Math.sqrt,L=Math.tan;function S(yt){return yt>1?0:yt<-1?t:Math.acos(yt)}function k(yt){return yt>1?f:yt<-1?-f:Math.asin(yt)}function P(yt){return(yt=h(yt/2))*yt}function z(){}function I(yt,It){yt&&R.hasOwnProperty(yt.type)&&R[yt.type](yt,It)}var D={Feature:function(yt,It){I(yt.geometry,It)},FeatureCollection:function(yt,It){for(var lr=yt.features,tr=-1,Lr=lr.length;++tr<Lr;)I(lr[tr].geometry,It)}},R={Sphere:function(yt,It){It.sphere()},Point:function(yt,It){yt=yt.coordinates,It.point(yt[0],yt[1],yt[2])},MultiPoint:function(yt,It){for(var lr=yt.coordinates,tr=-1,Lr=lr.length;++tr<Lr;)yt=lr[tr],It.point(yt[0],yt[1],yt[2])},LineString:function(yt,It){O(yt.coordinates,It,0)},MultiLineString:function(yt,It){for(var lr=yt.coordinates,tr=-1,Lr=lr.length;++tr<Lr;)O(lr[tr],It,0)},Polygon:function(yt,It){F(yt.coordinates,It)},MultiPolygon:function(yt,It){for(var lr=yt.coordinates,tr=-1,Lr=lr.length;++tr<Lr;)F(lr[tr],It)},GeometryCollection:function(yt,It){for(var lr=yt.geometries,tr=-1,Lr=lr.length;++tr<Lr;)I(lr[tr],It)}};function O(yt,It,lr){var tr=-1,Lr=yt.length-lr,tn;for(It.lineStart();++tr<Lr;)tn=yt[tr],It.point(tn[0],tn[1],tn[2]);It.lineEnd()}function F(yt,It){var lr=-1,tr=yt.length;for(It.polygonStart();++lr<tr;)O(yt[lr],It,1);It.polygonEnd()}function V(yt,It){yt&&D.hasOwnProperty(yt.type)?D[yt.type](yt,It):I(yt,It)}var G=M(),J=M(),Z,Y,j,re,se,oe={point:z,lineStart:z,lineEnd:z,polygonStart:function(){G.reset(),oe.lineStart=N,oe.lineEnd=U},polygonEnd:function(){var yt=+G;J.add(yt<0?i+yt:yt),this.lineStart=this.lineEnd=this.point=z},sphere:function(){J.add(i)}};function N(){oe.point=q}function U(){Q(Z,Y)}function q(yt,It){oe.point=Q,Z=yt,Y=It,yt*=p,It*=p,j=yt,re=l(It=It/2+o),se=h(It)}function Q(yt,It){yt*=p,It*=p,It=It/2+o;var lr=yt-j,tr=lr>=0?1:-1,Lr=tr*lr,tn=l(It),pn=h(It),wn=se*pn,Cn=re*tn+wn*l(Lr),On=wn*tr*h(Lr);G.add(b(On,Cn)),j=yt,re=tn,se=pn}function W(yt){return J.reset(),V(yt,oe),J*2}function X(yt){return[b(yt[1],yt[0]),k(yt[2])]}function ee(yt){var It=yt[0],lr=yt[1],tr=l(lr);return[tr*l(It),tr*h(It),h(lr)]}function te(yt,It){return yt[0]*It[0]+yt[1]*It[1]+yt[2]*It[2]}function ie(yt,It){return[yt[1]*It[2]-yt[2]*It[1],yt[2]*It[0]-yt[0]*It[2],yt[0]*It[1]-yt[1]*It[0]]}function le(yt,It){yt[0]+=It[0],yt[1]+=It[1],yt[2]+=It[2]}function ge(yt,It){return[yt[0]*It,yt[1]*It,yt[2]*It]}function fe(yt){var It=u(yt[0]*yt[0]+yt[1]*yt[1]+yt[2]*yt[2]);yt[0]/=It,yt[1]/=It,yt[2]/=It}var pe,ye,Te,_e,De,Be,Ue,xe,Pe=M(),Ve,Qe,Fe={point:Le,lineStart:dt,lineEnd:Dt,polygonStart:function(){Fe.point=Xt,Fe.lineStart=At,Fe.lineEnd=zt,Pe.reset(),oe.polygonStart()},polygonEnd:function(){oe.polygonEnd(),Fe.point=Le,Fe.lineStart=dt,Fe.lineEnd=Dt,G<0?(pe=-(Te=180),ye=-(_e=90)):Pe>n?_e=90:Pe<-n&&(ye=-90),Qe[0]=pe,Qe[1]=Te},sphere:function(){pe=-(Te=180),ye=-(_e=90)}};function Le(yt,It){Ve.push(Qe=[pe=yt,Te=yt]),It<ye&&(ye=It),It>_e&&(_e=It)}function Ne(yt,It){var lr=ee([yt*p,It*p]);if(xe){var tr=ie(xe,lr),Lr=[tr[1],-tr[0],0],tn=ie(Lr,tr);fe(tn),tn=X(tn);var pn=yt-De,wn=pn>0?1:-1,Cn=tn[0]*g*wn,On,gn=y(pn)>180;gn^(wn*De<Cn&&Cn<wn*yt)?(On=tn[1]*g,On>_e&&(_e=On)):(Cn=(Cn+360)%360-180,gn^(wn*De<Cn&&Cn<wn*yt)?(On=-tn[1]*g,On<ye&&(ye=On)):(It<ye&&(ye=It),It>_e&&(_e=It))),gn?yt<De?Ut(pe,yt)>Ut(pe,Te)&&(Te=yt):Ut(yt,Te)>Ut(pe,Te)&&(pe=yt):Te>=pe?(yt<pe&&(pe=yt),yt>Te&&(Te=yt)):yt>De?Ut(pe,yt)>Ut(pe,Te)&&(Te=yt):Ut(yt,Te)>Ut(pe,Te)&&(pe=yt)}else Ve.push(Qe=[pe=yt,Te=yt]);It<ye&&(ye=It),It>_e&&(_e=It),xe=lr,De=yt}function dt(){Fe.point=Ne}function Dt(){Qe[0]=pe,Qe[1]=Te,Fe.point=Le,xe=null}function Xt(yt,It){if(xe){var lr=yt-De;Pe.add(y(lr)>180?lr+(lr>0?360:-360):lr)}else Be=yt,Ue=It;oe.point(yt,It),Ne(yt,It)}function At(){oe.lineStart()}function zt(){Xt(Be,Ue),oe.lineEnd(),y(Pe)>n&&(pe=-(Te=180)),Qe[0]=pe,Qe[1]=Te,xe=null}function Ut(yt,It){return(It-=yt)<0?It+360:It}function Ct(yt,It){return yt[0]-It[0]}function Mt(yt,It){return yt[0]<=yt[1]?yt[0]<=It&&It<=yt[1]:It<yt[0]||yt[1]<It}function rt(yt){var It,lr,tr,Lr,tn,pn,wn;if(_e=Te=-(pe=ye=1/0),Ve=[],V(yt,Fe),lr=Ve.length){for(Ve.sort(Ct),It=1,tr=Ve[0],tn=[tr];It<lr;++It)Lr=Ve[It],Mt(tr,Lr[0])||Mt(tr,Lr[1])?(Ut(tr[0],Lr[1])>Ut(tr[0],tr[1])&&(tr[1]=Lr[1]),Ut(Lr[0],tr[1])>Ut(tr[0],tr[1])&&(tr[0]=Lr[0])):tn.push(tr=Lr);for(pn=-1/0,lr=tn.length-1,It=0,tr=tn[lr];It<=lr;tr=Lr,++It)Lr=tn[It],(wn=Ut(tr[1],Lr[0]))>pn&&(pn=wn,pe=Lr[0],Te=tr[1])}return Ve=Qe=null,pe===1/0||ye===1/0?[[NaN,NaN],[NaN,NaN]]:[[pe,ye],[Te,_e]]}var ct,Ze,ke,Ge,Je,ot,Pt,_t,Bt,qt,Ot,$t,rr,er,pr,Xr,hn={sphere:z,point:Qr,lineStart:Ht,lineEnd:br,polygonStart:function(){hn.lineStart=tt,hn.lineEnd=je},polygonEnd:function(){hn.lineStart=Ht,hn.lineEnd=br}};function Qr(yt,It){yt*=p,It*=p;var lr=l(It);nt(lr*l(yt),lr*h(yt),h(It))}function nt(yt,It,lr){++ct,ke+=(yt-ke)/ct,Ge+=(It-Ge)/ct,Je+=(lr-Je)/ct}function Ht(){hn.point=Kt}function Kt(yt,It){yt*=p,It*=p;var lr=l(It);er=lr*l(yt),pr=lr*h(yt),Xr=h(It),hn.point=Gt,nt(er,pr,Xr)}function Gt(yt,It){yt*=p,It*=p;var lr=l(It),tr=lr*l(yt),Lr=lr*h(yt),tn=h(It),pn=b(u((pn=pr*tn-Xr*Lr)*pn+(pn=Xr*tr-er*tn)*pn+(pn=er*Lr-pr*tr)*pn),er*tr+pr*Lr+Xr*tn);Ze+=pn,ot+=pn*(er+(er=tr)),Pt+=pn*(pr+(pr=Lr)),_t+=pn*(Xr+(Xr=tn)),nt(er,pr,Xr)}function br(){hn.point=Qr}function tt(){hn.point=st}function je(){ft($t,rr),hn.point=Qr}function st(yt,It){$t=yt,rr=It,yt*=p,It*=p,hn.point=ft;var lr=l(It);er=lr*l(yt),pr=lr*h(yt),Xr=h(It),nt(er,pr,Xr)}function ft(yt,It){yt*=p,It*=p;var lr=l(It),tr=lr*l(yt),Lr=lr*h(yt),tn=h(It),pn=pr*tn-Xr*Lr,wn=Xr*tr-er*tn,Cn=er*Lr-pr*tr,On=u(pn*pn+wn*wn+Cn*Cn),gn=k(On),In=On&&-gn/On;Bt+=In*pn,qt+=In*wn,Ot+=In*Cn,Ze+=gn,ot+=gn*(er+(er=tr)),Pt+=gn*(pr+(pr=Lr)),_t+=gn*(Xr+(Xr=tn)),nt(er,pr,Xr)}function Me(yt){ct=Ze=ke=Ge=Je=ot=Pt=_t=Bt=qt=Ot=0,V(yt,hn);var It=Bt,lr=qt,tr=Ot,Lr=It*It+lr*lr+tr*tr;return Lr<r&&(It=ot,lr=Pt,tr=_t,Ze<n&&(It=ke,lr=Ge,tr=Je),Lr=It*It+lr*lr+tr*tr,Lr<r)?[NaN,NaN]:[b(lr,It)*g,k(tr/u(Lr))*g]}function Se(yt){return function(){return yt}}function Ke(yt,It){function lr(tr,Lr){return tr=yt(tr,Lr),It(tr[0],tr[1])}return yt.invert&&It.invert&&(lr.invert=function(tr,Lr){return tr=It.invert(tr,Lr),tr&&yt.invert(tr[0],tr[1])}),lr}function Xe(yt,It){return[y(yt)>t?yt+Math.round(-yt/i)*i:yt,It]}Xe.invert=Xe;function it(yt,It,lr){return(yt%=i)?It||lr?Ke(vt(yt),St(It,lr)):vt(yt):It||lr?St(It,lr):Xe}function pt(yt){return function(It,lr){return It+=yt,[It>t?It-i:It<-t?It+i:It,lr]}}function vt(yt){var It=pt(yt);return It.invert=pt(-yt),It}function St(yt,It){var lr=l(yt),tr=h(yt),Lr=l(It),tn=h(It);function pn(wn,Cn){var On=l(Cn),gn=l(wn)*On,In=h(wn)*On,Pn=h(Cn),Un=Pn*lr+gn*tr;return[b(In*Lr-Un*tn,gn*lr-Pn*tr),k(Un*Lr+In*tn)]}return pn.invert=function(wn,Cn){var On=l(Cn),gn=l(wn)*On,In=h(wn)*On,Pn=h(Cn),Un=Pn*Lr-In*tn;return[b(In*Lr+Pn*tn,gn*lr+Un*tr),k(Un*lr-gn*tr)]},pn}function kt(yt){yt=it(yt[0]*p,yt[1]*p,yt.length>2?yt[2]*p:0);function It(lr){return lr=yt(lr[0]*p,lr[1]*p),lr[0]*=g,lr[1]*=g,lr}return It.invert=function(lr){return lr=yt.invert(lr[0]*p,lr[1]*p),lr[0]*=g,lr[1]*=g,lr},It}function Nt(yt,It,lr,tr,Lr,tn){if(!!lr){var pn=l(It),wn=h(It),Cn=tr*lr;Lr==null?(Lr=It+tr*i,tn=It-Cn/2):(Lr=nr(pn,Lr),tn=nr(pn,tn),(tr>0?Lr<tn:Lr>tn)&&(Lr+=tr*i));for(var On,gn=Lr;tr>0?gn>tn:gn<tn;gn-=Cn)On=X([pn,-wn*l(gn),-wn*h(gn)]),yt.point(On[0],On[1])}}function nr(yt,It){It=ee(It),It[0]-=yt,fe(It);var lr=S(-It[1]);return((-It[2]<0?-lr:lr)+i-n)%i}function fr(){var yt=Se([0,0]),It=Se(90),lr=Se(6),tr,Lr,tn={point:pn};function pn(Cn,On){tr.push(Cn=Lr(Cn,On)),Cn[0]*=g,Cn[1]*=g}function wn(){var Cn=yt.apply(this,arguments),On=It.apply(this,arguments)*p,gn=lr.apply(this,arguments)*p;return tr=[],Lr=it(-Cn[0]*p,-Cn[1]*p,0).invert,Nt(tn,On,gn,1),Cn={type:"Polygon",coordinates:[tr]},tr=Lr=null,Cn}return wn.center=function(Cn){return arguments.length?(yt=typeof Cn=="function"?Cn:Se([+Cn[0],+Cn[1]]),wn):yt},wn.radius=function(Cn){return arguments.length?(It=typeof Cn=="function"?Cn:Se(+Cn),wn):It},wn.precision=function(Cn){return arguments.length?(lr=typeof Cn=="function"?Cn:Se(+Cn),wn):lr},wn}function Hr(){var yt=[],It;return{point:function(lr,tr,Lr){It.push([lr,tr,Lr])},lineStart:function(){yt.push(It=[])},lineEnd:z,rejoin:function(){yt.length>1&&yt.push(yt.pop().concat(yt.shift()))},result:function(){var lr=yt;return yt=[],It=null,lr}}}function Er(yt,It){return y(yt[0]-It[0])<n&&y(yt[1]-It[1])<n}function _r(yt,It,lr,tr){this.x=yt,this.z=It,this.o=lr,this.e=tr,this.v=!1,this.n=this.p=null}function en(yt,It,lr,tr,Lr){var tn=[],pn=[],wn,Cn;if(yt.forEach(function($n){if(!((Fa=$n.length-1)<=0)){var Fa,Ca=$n[0],Ba=$n[Fa],Oa;if(Er(Ca,Ba)){if(!Ca[2]&&!Ba[2]){for(Lr.lineStart(),wn=0;wn<Fa;++wn)Lr.point((Ca=$n[wn])[0],Ca[1]);Lr.lineEnd();return}Ba[0]+=2*n}tn.push(Oa=new _r(Ca,$n,null,!0)),pn.push(Oa.o=new _r(Ca,null,Oa,!1)),tn.push(Oa=new _r(Ba,$n,null,!1)),pn.push(Oa.o=new _r(Ba,null,Oa,!0))}}),!!tn.length){for(pn.sort(It),dr(tn),dr(pn),wn=0,Cn=pn.length;wn<Cn;++wn)pn[wn].e=lr=!lr;for(var On=tn[0],gn,In;;){for(var Pn=On,Un=!0;Pn.v;)if((Pn=Pn.n)===On)return;gn=Pn.z,Lr.lineStart();do{if(Pn.v=Pn.o.v=!0,Pn.e){if(Un)for(wn=0,Cn=gn.length;wn<Cn;++wn)Lr.point((In=gn[wn])[0],In[1]);else tr(Pn.x,Pn.n.x,1,Lr);Pn=Pn.n}else{if(Un)for(gn=Pn.p.z,wn=gn.length-1;wn>=0;--wn)Lr.point((In=gn[wn])[0],In[1]);else tr(Pn.x,Pn.p.x,-1,Lr);Pn=Pn.p}Pn=Pn.o,gn=Pn.z,Un=!Un}while(!Pn.v);Lr.lineEnd()}}}function dr(yt){if(!!(It=yt.length)){for(var It,lr=0,tr=yt[0],Lr;++lr<It;)tr.n=Lr=yt[lr],Lr.p=tr,tr=Lr;tr.n=Lr=yt[0],Lr.p=tr}}var xr=M();function Ur(yt){return y(yt[0])<=t?yt[0]:x(yt[0])*((y(yt[0])+t)%i-t)}function Yr(yt,It){var lr=Ur(It),tr=It[1],Lr=h(tr),tn=[h(lr),-l(lr),0],pn=0,wn=0;xr.reset(),Lr===1?tr=f+n:Lr===-1&&(tr=-f-n);for(var Cn=0,On=yt.length;Cn<On;++Cn)if(!!(In=(gn=yt[Cn]).length))for(var gn,In,Pn=gn[In-1],Un=Ur(Pn),$n=Pn[1]/2+o,Fa=h($n),Ca=l($n),Ba=0;Ba<In;++Ba,Un=Jn,Fa=Ga,Ca=Ka,Pn=Oa){var Oa=gn[Ba],Jn=Ur(Oa),ha=Oa[1]/2+o,Ga=h(ha),Ka=l(ha),di=Jn-Un,gi=di>=0?1:-1,mi=gi*di,Ai=mi>t,li=Fa*Ga;if(xr.add(b(li*gi*h(mi),Ca*Ka+li*l(mi))),pn+=Ai?di+gi*i:di,Ai^Un>=lr^Jn>=lr){var yo=ie(ee(Pn),ee(Oa));fe(yo);var qi=ie(tn,yo);fe(qi);var ja=(Ai^di>=0?-1:1)*k(qi[2]);(tr>ja||tr===ja&&(yo[0]||yo[1]))&&(wn+=Ai^di>=0?1:-1)}}return(pn<-n||pn<n&&xr<-n)^wn&1}function Ar(yt,It,lr,tr){return function(Lr){var tn=It(Lr),pn=Hr(),wn=It(pn),Cn=!1,On,gn,In,Pn={point:Un,lineStart:Fa,lineEnd:Ca,polygonStart:function(){Pn.point=Ba,Pn.lineStart=Oa,Pn.lineEnd=Jn,gn=[],On=[]},polygonEnd:function(){Pn.point=Un,Pn.lineStart=Fa,Pn.lineEnd=Ca,gn=v.merge(gn);var ha=Yr(On,tr);gn.length?(Cn||(Lr.polygonStart(),Cn=!0),en(gn,Lt,ha,lr,Lr)):ha&&(Cn||(Lr.polygonStart(),Cn=!0),Lr.lineStart(),lr(null,null,1,Lr),Lr.lineEnd()),Cn&&(Lr.polygonEnd(),Cn=!1),gn=On=null},sphere:function(){Lr.polygonStart(),Lr.lineStart(),lr(null,null,1,Lr),Lr.lineEnd(),Lr.polygonEnd()}};function Un(ha,Ga){yt(ha,Ga)&&Lr.point(ha,Ga)}function $n(ha,Ga){tn.point(ha,Ga)}function Fa(){Pn.point=$n,tn.lineStart()}function Ca(){Pn.point=Un,tn.lineEnd()}function Ba(ha,Ga){In.push([ha,Ga]),wn.point(ha,Ga)}function Oa(){wn.lineStart(),In=[]}function Jn(){Ba(In[0][0],In[0][1]),wn.lineEnd();var ha=wn.clean(),Ga=pn.result(),Ka,di=Ga.length,gi,mi,Ai;if(In.pop(),On.push(In),In=null,!!di){if(ha&1){if(mi=Ga[0],(gi=mi.length-1)>0){for(Cn||(Lr.polygonStart(),Cn=!0),Lr.lineStart(),Ka=0;Ka<gi;++Ka)Lr.point((Ai=mi[Ka])[0],Ai[1]);Lr.lineEnd()}return}di>1&&ha&2&&Ga.push(Ga.pop().concat(Ga.shift())),gn.push(Ga.filter(et))}}return Pn}}function et(yt){return yt.length>1}function Lt(yt,It){return((yt=yt.x)[0]<0?yt[1]-f-n:f-yt[1])-((It=It.x)[0]<0?It[1]-f-n:f-It[1])}var Zt=Ar(function(){return!0},sr,Zr,[-t,-f]);function sr(yt){var It=NaN,lr=NaN,tr=NaN,Lr;return{lineStart:function(){yt.lineStart(),Lr=1},point:function(tn,pn){var wn=tn>0?t:-t,Cn=y(tn-It);y(Cn-t)<n?(yt.point(It,lr=(lr+pn)/2>0?f:-f),yt.point(tr,lr),yt.lineEnd(),yt.lineStart(),yt.point(wn,lr),yt.point(tn,lr),Lr=0):tr!==wn&&Cn>=t&&(y(It-tr)<n&&(It-=tr*n),y(tn-wn)<n&&(tn-=wn*n),lr=Ir(It,lr,tn,pn),yt.point(tr,lr),yt.lineEnd(),yt.lineStart(),yt.point(wn,lr),Lr=0),yt.point(It=tn,lr=pn),tr=wn},lineEnd:function(){yt.lineEnd(),It=lr=NaN},clean:function(){return 2-Lr}}}function Ir(yt,It,lr,tr){var Lr,tn,pn=h(yt-lr);return y(pn)>n?c((h(It)*(tn=l(tr))*h(lr)-h(tr)*(Lr=l(It))*h(yt))/(Lr*tn*pn)):(It+tr)/2}function Zr(yt,It,lr,tr){var Lr;if(yt==null)Lr=lr*f,tr.point(-t,Lr),tr.point(0,Lr),tr.point(t,Lr),tr.point(t,0),tr.point(t,-Lr),tr.point(0,-Lr),tr.point(-t,-Lr),tr.point(-t,0),tr.point(-t,Lr);else if(y(yt[0]-It[0])>n){var tn=yt[0]<It[0]?t:-t;Lr=lr*tn/2,tr.point(-tn,Lr),tr.point(0,Lr),tr.point(tn,Lr)}else tr.point(It[0],It[1])}function Pr(yt){var It=l(yt),lr=6*p,tr=It>0,Lr=y(It)>n;function tn(gn,In,Pn,Un){Nt(Un,yt,lr,Pn,gn,In)}function pn(gn,In){return l(gn)*l(In)>It}function wn(gn){var In,Pn,Un,$n,Fa;return{lineStart:function(){$n=Un=!1,Fa=1},point:function(Ca,Ba){var Oa=[Ca,Ba],Jn,ha=pn(Ca,Ba),Ga=tr?ha?0:On(Ca,Ba):ha?On(Ca+(Ca<0?t:-t),Ba):0;if(!In&&($n=Un=ha)&&gn.lineStart(),ha!==Un&&(Jn=Cn(In,Oa),(!Jn||Er(In,Jn)||Er(Oa,Jn))&&(Oa[2]=1)),ha!==Un)Fa=0,ha?(gn.lineStart(),Jn=Cn(Oa,In),gn.point(Jn[0],Jn[1])):(Jn=Cn(In,Oa),gn.point(Jn[0],Jn[1],2),gn.lineEnd()),In=Jn;else if(Lr&&In&&tr^ha){var Ka;!(Ga&Pn)&&(Ka=Cn(Oa,In,!0))&&(Fa=0,tr?(gn.lineStart(),gn.point(Ka[0][0],Ka[0][1]),gn.point(Ka[1][0],Ka[1][1]),gn.lineEnd()):(gn.point(Ka[1][0],Ka[1][1]),gn.lineEnd(),gn.lineStart(),gn.point(Ka[0][0],Ka[0][1],3)))}ha&&(!In||!Er(In,Oa))&&gn.point(Oa[0],Oa[1]),In=Oa,Un=ha,Pn=Ga},lineEnd:function(){Un&&gn.lineEnd(),In=null},clean:function(){return Fa|($n&&Un)<<1}}}function Cn(gn,In,Pn){var Un=ee(gn),$n=ee(In),Fa=[1,0,0],Ca=ie(Un,$n),Ba=te(Ca,Ca),Oa=Ca[0],Jn=Ba-Oa*Oa;if(!Jn)return!Pn&&gn;var ha=It*Ba/Jn,Ga=-It*Oa/Jn,Ka=ie(Fa,Ca),di=ge(Fa,ha),gi=ge(Ca,Ga);le(di,gi);var mi=Ka,Ai=te(di,mi),li=te(mi,mi),yo=Ai*Ai-li*(te(di,di)-1);if(!(yo<0)){var qi=u(yo),ja=ge(mi,(-Ai-qi)/li);if(le(ja,di),ja=X(ja),!Pn)return ja;var va=gn[0],xi=In[0],lo=gn[1],vo=In[1],os;xi<va&&(os=va,va=xi,xi=os);var Ms=xi-va,Io=y(Ms-t)<n,Ks=Io||Ms<n;if(!Io&&vo<lo&&(os=lo,lo=vo,vo=os),Ks?Io?lo+vo>0^ja[1]<(y(ja[0]-va)<n?lo:vo):lo<=ja[1]&&ja[1]<=vo:Ms>t^(va<=ja[0]&&ja[0]<=xi)){var gs=ge(mi,(-Ai+qi)/li);return le(gs,di),[ja,X(gs)]}}}function On(gn,In){var Pn=tr?yt:t-yt,Un=0;return gn<-Pn?Un|=1:gn>Pn&&(Un|=2),In<-Pn?Un|=4:In>Pn&&(Un|=8),Un}return Ar(pn,wn,tn,tr?[0,-yt]:[-t,yt-t])}function wr(yt,It,lr,tr,Lr,tn){var pn=yt[0],wn=yt[1],Cn=It[0],On=It[1],gn=0,In=1,Pn=Cn-pn,Un=On-wn,$n;if($n=lr-pn,!(!Pn&&$n>0)){if($n/=Pn,Pn<0){if($n<gn)return;$n<In&&(In=$n)}else if(Pn>0){if($n>In)return;$n>gn&&(gn=$n)}if($n=Lr-pn,!(!Pn&&$n<0)){if($n/=Pn,Pn<0){if($n>In)return;$n>gn&&(gn=$n)}else if(Pn>0){if($n<gn)return;$n<In&&(In=$n)}if($n=tr-wn,!(!Un&&$n>0)){if($n/=Un,Un<0){if($n<gn)return;$n<In&&(In=$n)}else if(Un>0){if($n>In)return;$n>gn&&(gn=$n)}if($n=tn-wn,!(!Un&&$n<0)){if($n/=Un,Un<0){if($n>In)return;$n>gn&&(gn=$n)}else if(Un>0){if($n<gn)return;$n<In&&(In=$n)}return gn>0&&(yt[0]=pn+gn*Pn,yt[1]=wn+gn*Un),In<1&&(It[0]=pn+In*Pn,It[1]=wn+In*Un),!0}}}}}var Nr=1e9,Sn=-Nr;function _n(yt,It,lr,tr){function Lr(On,gn){return yt<=On&&On<=lr&&It<=gn&&gn<=tr}function tn(On,gn,In,Pn){var Un=0,$n=0;if(On==null||(Un=pn(On,In))!==($n=pn(gn,In))||Cn(On,gn)<0^In>0)do Pn.point(Un===0||Un===3?yt:lr,Un>1?tr:It);while((Un=(Un+In+4)%4)!==$n);else Pn.point(gn[0],gn[1])}function pn(On,gn){return y(On[0]-yt)<n?gn>0?0:3:y(On[0]-lr)<n?gn>0?2:1:y(On[1]-It)<n?gn>0?1:0:gn>0?3:2}function wn(On,gn){return Cn(On.x,gn.x)}function Cn(On,gn){var In=pn(On,1),Pn=pn(gn,1);return In!==Pn?In-Pn:In===0?gn[1]-On[1]:In===1?On[0]-gn[0]:In===2?On[1]-gn[1]:gn[0]-On[0]}return function(On){var gn=On,In=Hr(),Pn,Un,$n,Fa,Ca,Ba,Oa,Jn,ha,Ga,Ka,di={point:gi,lineStart:yo,lineEnd:qi,polygonStart:Ai,polygonEnd:li};function gi(va,xi){Lr(va,xi)&&gn.point(va,xi)}function mi(){for(var va=0,xi=0,lo=Un.length;xi<lo;++xi)for(var vo=Un[xi],os=1,Ms=vo.length,Io=vo[0],Ks,gs,ss=Io[0],mo=Io[1];os<Ms;++os)Ks=ss,gs=mo,Io=vo[os],ss=Io[0],mo=Io[1],gs<=tr?mo>tr&&(ss-Ks)*(tr-gs)>(mo-gs)*(yt-Ks)&&++va:mo<=tr&&(ss-Ks)*(tr-gs)<(mo-gs)*(yt-Ks)&&--va;return va}function Ai(){gn=In,Pn=[],Un=[],Ka=!0}function li(){var va=mi(),xi=Ka&&va,lo=(Pn=v.merge(Pn)).length;(xi||lo)&&(On.polygonStart(),xi&&(On.lineStart(),tn(null,null,1,On),On.lineEnd()),lo&&en(Pn,wn,va,tn,On),On.polygonEnd()),gn=On,Pn=Un=$n=null}function yo(){di.point=ja,Un&&Un.push($n=[]),Ga=!0,ha=!1,Oa=Jn=NaN}function qi(){Pn&&(ja(Fa,Ca),Ba&&ha&&In.rejoin(),Pn.push(In.result())),di.point=gi,ha&&gn.lineEnd()}function ja(va,xi){var lo=Lr(va,xi);if(Un&&$n.push([va,xi]),Ga)Fa=va,Ca=xi,Ba=lo,Ga=!1,lo&&(gn.lineStart(),gn.point(va,xi));else if(lo&&ha)gn.point(va,xi);else{var vo=[Oa=Math.max(Sn,Math.min(Nr,Oa)),Jn=Math.max(Sn,Math.min(Nr,Jn))],os=[va=Math.max(Sn,Math.min(Nr,va)),xi=Math.max(Sn,Math.min(Nr,xi))];wr(vo,os,yt,It,lr,tr)?(ha||(gn.lineStart(),gn.point(vo[0],vo[1])),gn.point(os[0],os[1]),lo||gn.lineEnd(),Ka=!1):lo&&(gn.lineStart(),gn.point(va,xi),Ka=!1)}Oa=va,Jn=xi,ha=lo}return di}}function Wn(){var yt=0,It=0,lr=960,tr=500,Lr,tn,pn;return pn={stream:function(wn){return Lr&&tn===wn?Lr:Lr=_n(yt,It,lr,tr)(tn=wn)},extent:function(wn){return arguments.length?(yt=+wn[0][0],It=+wn[0][1],lr=+wn[1][0],tr=+wn[1][1],Lr=tn=null,pn):[[yt,It],[lr,tr]]}}}var Ln=M(),Xn,Kn,Aa,Ta={sphere:z,point:z,lineStart:oi,lineEnd:z,polygonStart:z,polygonEnd:z};function oi(){Ta.point=Va,Ta.lineEnd=$a}function $a(){Ta.point=Ta.lineEnd=z}function Va(yt,It){yt*=p,It*=p,Xn=yt,Kn=h(It),Aa=l(It),Ta.point=ti}function ti(yt,It){yt*=p,It*=p;var lr=h(It),tr=l(It),Lr=y(yt-Xn),tn=l(Lr),pn=h(Lr),wn=tr*pn,Cn=Aa*lr-Kn*tr*tn,On=Kn*lr+Aa*tr*tn;Ln.add(b(u(wn*wn+Cn*Cn),On)),Xn=yt,Kn=lr,Aa=tr}function Mr(yt){return Ln.reset(),V(yt,Ta),+Ln}var vn=[null,null],fn={type:"LineString",coordinates:vn};function An(yt,It){return vn[0]=yt,vn[1]=It,Mr(fn)}var Gn={Feature:function(yt,It){return Yn(yt.geometry,It)},FeatureCollection:function(yt,It){for(var lr=yt.features,tr=-1,Lr=lr.length;++tr<Lr;)if(Yn(lr[tr].geometry,It))return!0;return!1}},ia={Sphere:function(){return!0},Point:function(yt,It){return zn(yt.coordinates,It)},MultiPoint:function(yt,It){for(var lr=yt.coordinates,tr=-1,Lr=lr.length;++tr<Lr;)if(zn(lr[tr],It))return!0;return!1},LineString:function(yt,It){return ea(yt.coordinates,It)},MultiLineString:function(yt,It){for(var lr=yt.coordinates,tr=-1,Lr=lr.length;++tr<Lr;)if(ea(lr[tr],It))return!0;return!1},Polygon:function(yt,It){return wa(yt.coordinates,It)},MultiPolygon:function(yt,It){for(var lr=yt.coordinates,tr=-1,Lr=lr.length;++tr<Lr;)if(wa(lr[tr],It))return!0;return!1},GeometryCollection:function(yt,It){for(var lr=yt.geometries,tr=-1,Lr=lr.length;++tr<Lr;)if(Yn(lr[tr],It))return!0;return!1}};function Yn(yt,It){return yt&&ia.hasOwnProperty(yt.type)?ia[yt.type](yt,It):!1}function zn(yt,It){return An(yt,It)===0}function ea(yt,It){for(var lr,tr,Lr,tn=0,pn=yt.length;tn<pn;tn++){if(tr=An(yt[tn],It),tr===0||tn>0&&(Lr=An(yt[tn],yt[tn-1]),Lr>0&&lr<=Lr&&tr<=Lr&&(lr+tr-Lr)*(1-Math.pow((lr-tr)/Lr,2))<r*Lr))return!0;lr=tr}return!1}function wa(yt,It){return!!Yr(yt.map(si),Ft(It))}function si(yt){return yt=yt.map(Ft),yt.pop(),yt}function Ft(yt){return[yt[0]*p,yt[1]*p]}function cr(yt,It){return(yt&&Gn.hasOwnProperty(yt.type)?Gn[yt.type]:Yn)(yt,It)}function $r(yt,It,lr){var tr=v.range(yt,It-n,lr).concat(It);return function(Lr){return tr.map(function(tn){return[Lr,tn]})}}function rn(yt,It,lr){var tr=v.range(yt,It-n,lr).concat(It);return function(Lr){return tr.map(function(tn){return[tn,Lr]})}}function sn(){var yt,It,lr,tr,Lr,tn,pn,wn,Cn=10,On=Cn,gn=90,In=360,Pn,Un,$n,Fa,Ca=2.5;function Ba(){return{type:"MultiLineString",coordinates:Oa()}}function Oa(){return v.range(_(tr/gn)*gn,lr,gn).map($n).concat(v.range(_(wn/In)*In,pn,In).map(Fa)).concat(v.range(_(It/Cn)*Cn,yt,Cn).filter(function(Jn){return y(Jn%gn)>n}).map(Pn)).concat(v.range(_(tn/On)*On,Lr,On).filter(function(Jn){return y(Jn%In)>n}).map(Un))}return Ba.lines=function(){return Oa().map(function(Jn){return{type:"LineString",coordinates:Jn}})},Ba.outline=function(){return{type:"Polygon",coordinates:[$n(tr).concat(Fa(pn).slice(1),$n(lr).reverse().slice(1),Fa(wn).reverse().slice(1))]}},Ba.extent=function(Jn){return arguments.length?Ba.extentMajor(Jn).extentMinor(Jn):Ba.extentMinor()},Ba.extentMajor=function(Jn){return arguments.length?(tr=+Jn[0][0],lr=+Jn[1][0],wn=+Jn[0][1],pn=+Jn[1][1],tr>lr&&(Jn=tr,tr=lr,lr=Jn),wn>pn&&(Jn=wn,wn=pn,pn=Jn),Ba.precision(Ca)):[[tr,wn],[lr,pn]]},Ba.extentMinor=function(Jn){return arguments.length?(It=+Jn[0][0],yt=+Jn[1][0],tn=+Jn[0][1],Lr=+Jn[1][1],It>yt&&(Jn=It,It=yt,yt=Jn),tn>Lr&&(Jn=tn,tn=Lr,Lr=Jn),Ba.precision(Ca)):[[It,tn],[yt,Lr]]},Ba.step=function(Jn){return arguments.length?Ba.stepMajor(Jn).stepMinor(Jn):Ba.stepMinor()},Ba.stepMajor=function(Jn){return arguments.length?(gn=+Jn[0],In=+Jn[1],Ba):[gn,In]},Ba.stepMinor=function(Jn){return arguments.length?(Cn=+Jn[0],On=+Jn[1],Ba):[Cn,On]},Ba.precision=function(Jn){return arguments.length?(Ca=+Jn,Pn=$r(tn,Lr,90),Un=rn(It,yt,Ca),$n=$r(wn,pn,90),Fa=rn(tr,lr,Ca),Ba):Ca},Ba.extentMajor([[-180,-90+n],[180,90-n]]).extentMinor([[-180,-80-n],[180,80+n]])}function kn(){return sn()()}function mn(yt,It){var lr=yt[0]*p,tr=yt[1]*p,Lr=It[0]*p,tn=It[1]*p,pn=l(tr),wn=h(tr),Cn=l(tn),On=h(tn),gn=pn*l(lr),In=pn*h(lr),Pn=Cn*l(Lr),Un=Cn*h(Lr),$n=2*k(u(P(tn-tr)+pn*Cn*P(Lr-lr))),Fa=h($n),Ca=$n?function(Ba){var Oa=h(Ba*=$n)/Fa,Jn=h($n-Ba)/Fa,ha=Jn*gn+Oa*Pn,Ga=Jn*In+Oa*Un,Ka=Jn*wn+Oa*On;return[b(Ga,ha)*g,b(Ka,u(ha*ha+Ga*Ga))*g]}:function(){return[lr*g,tr*g]};return Ca.distance=$n,Ca}function un(yt){return yt}var yr=M(),gr=M(),Dr,dn,Bn,ta,bn={point:z,lineStart:z,lineEnd:z,polygonStart:function(){bn.lineStart=Zn,bn.lineEnd=ya},polygonEnd:function(){bn.lineStart=bn.lineEnd=bn.point=z,yr.add(y(gr)),gr.reset()},result:function(){var yt=yr/2;return yr.reset(),yt}};function Zn(){bn.point=aa}function aa(yt,It){bn.point=pa,Dr=Bn=yt,dn=ta=It}function pa(yt,It){gr.add(ta*yt-Bn*It),Bn=yt,ta=It}function ya(){pa(Dr,dn)}var la=1/0,Sa=la,ho=-la,Ro=ho,Zo={point:tl,lineStart:z,lineEnd:z,polygonStart:z,polygonEnd:z,result:function(){var yt=[[la,Sa],[ho,Ro]];return ho=Ro=-(Sa=la=1/0),yt}};function tl(yt,It){yt<la&&(la=yt),yt>ho&&(ho=yt),It<Sa&&(Sa=It),It>Ro&&(Ro=It)}var hl=0,Gl=0,vi=0,Vs=0,Ps=0,Ui=0,Ao=0,vl=0,hs=0,Di,rl,Ki,Fi,no={point:Ji,lineStart:es,lineEnd:jo,polygonStart:function(){no.lineStart=au,no.lineEnd=Ds},polygonEnd:function(){no.point=Ji,no.lineStart=es,no.lineEnd=jo},result:function(){var yt=hs?[Ao/hs,vl/hs]:Ui?[Vs/Ui,Ps/Ui]:vi?[hl/vi,Gl/vi]:[NaN,NaN];return hl=Gl=vi=Vs=Ps=Ui=Ao=vl=hs=0,yt}};function Ji(yt,It){hl+=yt,Gl+=It,++vi}function es(){no.point=Hs}function Hs(yt,It){no.point=nu,Ji(Ki=yt,Fi=It)}function nu(yt,It){var lr=yt-Ki,tr=It-Fi,Lr=u(lr*lr+tr*tr);Vs+=Lr*(Ki+yt)/2,Ps+=Lr*(Fi+It)/2,Ui+=Lr,Ji(Ki=yt,Fi=It)}function jo(){no.point=Ji}function au(){no.point=Mo}function Ds(){Au(Di,rl)}function Mo(yt,It){no.point=Au,Ji(Di=Ki=yt,rl=Fi=It)}function Au(yt,It){var lr=yt-Ki,tr=It-Fi,Lr=u(lr*lr+tr*tr);Vs+=Lr*(Ki+yt)/2,Ps+=Lr*(Fi+It)/2,Ui+=Lr,Lr=Fi*yt-Ki*It,Ao+=Lr*(Ki+yt),vl+=Lr*(Fi+It),hs+=Lr*3,Ji(Ki=yt,Fi=It)}function Rs(yt){this._context=yt}Rs.prototype={_radius:4.5,pointRadius:function(yt){return this._radius=yt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(yt,It){switch(this._point){case 0:{this._context.moveTo(yt,It),this._point=1;break}case 1:{this._context.lineTo(yt,It);break}default:{this._context.moveTo(yt+this._radius,It),this._context.arc(yt,It,this._radius,0,i);break}}},result:z};var bs=M(),Cl,Mu,Su,Gs,Ll,_s={point:z,lineStart:function(){_s.point=Yl},lineEnd:function(){Cl&&nl(Mu,Su),_s.point=z},polygonStart:function(){Cl=!0},polygonEnd:function(){Cl=null},result:function(){var yt=+bs;return bs.reset(),yt}};function Yl(yt,It){_s.point=nl,Mu=Gs=yt,Su=Ll=It}function nl(yt,It){Gs-=yt,Ll-=It,bs.add(u(Gs*Gs+Ll*Ll)),Gs=yt,Ll=It}function Wl(){this._string=[]}Wl.prototype={_radius:4.5,_circle:iu(4.5),pointRadius:function(yt){return(yt=+yt)!==this._radius&&(this._radius=yt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(yt,It){switch(this._point){case 0:{this._string.push("M",yt,",",It),this._point=1;break}case 1:{this._string.push("L",yt,",",It);break}default:{this._circle==null&&(this._circle=iu(this._radius)),this._string.push("M",yt,",",It,this._circle);break}}},result:function(){if(this._string.length){var yt=this._string.join("");return this._string=[],yt}else return null}};function iu(yt){return"m0,"+yt+"a"+yt+","+yt+" 0 1,1 0,"+-2*yt+"a"+yt+","+yt+" 0 1,1 0,"+2*yt+"z"}function Pl(yt,It){var lr=4.5,tr,Lr;function tn(pn){return pn&&(typeof lr=="function"&&Lr.pointRadius(+lr.apply(this,arguments)),V(pn,tr(Lr))),Lr.result()}return tn.area=function(pn){return V(pn,tr(bn)),bn.result()},tn.measure=function(pn){return V(pn,tr(_s)),_s.result()},tn.bounds=function(pn){return V(pn,tr(Zo)),Zo.result()},tn.centroid=function(pn){return V(pn,tr(no)),no.result()},tn.projection=function(pn){return arguments.length?(tr=pn==null?(yt=null,un):(yt=pn).stream,tn):yt},tn.context=function(pn){return arguments.length?(Lr=pn==null?(It=null,new Wl):new Rs(It=pn),typeof lr!="function"&&Lr.pointRadius(lr),tn):It},tn.pointRadius=function(pn){return arguments.length?(lr=typeof pn=="function"?pn:(Lr.pointRadius(+pn),+pn),tn):lr},tn.projection(yt).context(It)}function ku(yt){return{stream:Ys(yt)}}function Ys(yt){return function(It){var lr=new Xl;for(var tr in yt)lr[tr]=yt[tr];return lr.stream=It,lr}}function Xl(){}Xl.prototype={constructor:Xl,point:function(yt,It){this.stream.point(yt,It)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Dl(yt,It,lr){var tr=yt.clipExtent&&yt.clipExtent();return yt.scale(150).translate([0,0]),tr!=null&&yt.clipExtent(null),V(lr,yt.stream(Zo)),It(Zo.result()),tr!=null&&yt.clipExtent(tr),yt}function vs(yt,It,lr){return Dl(yt,function(tr){var Lr=It[1][0]-It[0][0],tn=It[1][1]-It[0][1],pn=Math.min(Lr/(tr[1][0]-tr[0][0]),tn/(tr[1][1]-tr[0][1])),wn=+It[0][0]+(Lr-pn*(tr[1][0]+tr[0][0]))/2,Cn=+It[0][1]+(tn-pn*(tr[1][1]+tr[0][1]))/2;yt.scale(150*pn).translate([wn,Cn])},lr)}function pl(yt,It,lr){return vs(yt,[[0,0],It],lr)}function Zl(yt,It,lr){return Dl(yt,function(tr){var Lr=+It,tn=Lr/(tr[1][0]-tr[0][0]),pn=(Lr-tn*(tr[1][0]+tr[0][0]))/2,wn=-tn*tr[0][1];yt.scale(150*tn).translate([pn,wn])},lr)}function ou(yt,It,lr){return Dl(yt,function(tr){var Lr=+It,tn=Lr/(tr[1][1]-tr[0][1]),pn=-tn*tr[0][0],wn=(Lr-tn*(tr[1][1]+tr[0][1]))/2;yt.scale(150*tn).translate([pn,wn])},lr)}var su=16,Rl=l(30*p);function Eu(yt,It){return+It?Ko(yt,It):lu(yt)}function lu(yt){return Ys({point:function(It,lr){It=yt(It,lr),this.stream.point(It[0],It[1])}})}function Ko(yt,It){function lr(tr,Lr,tn,pn,wn,Cn,On,gn,In,Pn,Un,$n,Fa,Ca){var Ba=On-tr,Oa=gn-Lr,Jn=Ba*Ba+Oa*Oa;if(Jn>4*It&&Fa--){var ha=pn+Pn,Ga=wn+Un,Ka=Cn+$n,di=u(ha*ha+Ga*Ga+Ka*Ka),gi=k(Ka/=di),mi=y(y(Ka)-1)<n||y(tn-In)<n?(tn+In)/2:b(Ga,ha),Ai=yt(mi,gi),li=Ai[0],yo=Ai[1],qi=li-tr,ja=yo-Lr,va=Oa*qi-Ba*ja;(va*va/Jn>It||y((Ba*qi+Oa*ja)/Jn-.5)>.3||pn*Pn+wn*Un+Cn*$n<Rl)&&(lr(tr,Lr,tn,pn,wn,Cn,li,yo,mi,ha/=di,Ga/=di,Ka,Fa,Ca),Ca.point(li,yo),lr(li,yo,mi,ha,Ga,Ka,On,gn,In,Pn,Un,$n,Fa,Ca))}}return function(tr){var Lr,tn,pn,wn,Cn,On,gn,In,Pn,Un,$n,Fa,Ca={point:Ba,lineStart:Oa,lineEnd:ha,polygonStart:function(){tr.polygonStart(),Ca.lineStart=Ga},polygonEnd:function(){tr.polygonEnd(),Ca.lineStart=Oa}};function Ba(gi,mi){gi=yt(gi,mi),tr.point(gi[0],gi[1])}function Oa(){In=NaN,Ca.point=Jn,tr.lineStart()}function Jn(gi,mi){var Ai=ee([gi,mi]),li=yt(gi,mi);lr(In,Pn,gn,Un,$n,Fa,In=li[0],Pn=li[1],gn=gi,Un=Ai[0],$n=Ai[1],Fa=Ai[2],su,tr),tr.point(In,Pn)}function ha(){Ca.point=Ba,tr.lineEnd()}function Ga(){Oa(),Ca.point=Ka,Ca.lineEnd=di}function Ka(gi,mi){Jn(Lr=gi,mi),tn=In,pn=Pn,wn=Un,Cn=$n,On=Fa,Ca.point=Jn}function di(){lr(In,Pn,gn,Un,$n,Fa,tn,pn,Lr,wn,Cn,On,su,tr),Ca.lineEnd=ha,ha()}return Ca}}var al=Ys({point:function(yt,It){this.stream.point(yt*p,It*p)}});function il(yt){return Ys({point:function(It,lr){var tr=yt(It,lr);return this.stream.point(tr[0],tr[1])}})}function jl(yt,It,lr,tr,Lr){function tn(pn,wn){return pn*=tr,wn*=Lr,[It+yt*pn,lr-yt*wn]}return tn.invert=function(pn,wn){return[(pn-It)/yt*tr,(lr-wn)/yt*Lr]},tn}function ps(yt,It,lr,tr,Lr,tn){var pn=l(tn),wn=h(tn),Cn=pn*yt,On=wn*yt,gn=pn/yt,In=wn/yt,Pn=(wn*lr-pn*It)/yt,Un=(wn*It+pn*lr)/yt;function $n(Fa,Ca){return Fa*=tr,Ca*=Lr,[Cn*Fa-On*Ca+It,lr-On*Fa-Cn*Ca]}return $n.invert=function(Fa,Ca){return[tr*(gn*Fa-In*Ca+Pn),Lr*(Un-In*Fa-gn*Ca)]},$n}function So(yt){return Il(function(){return yt})()}function Il(yt){var It,lr=150,tr=480,Lr=250,tn=0,pn=0,wn=0,Cn=0,On=0,gn,In=0,Pn=1,Un=1,$n=null,Fa=Zt,Ca=null,Ba,Oa,Jn,ha=un,Ga=.5,Ka,di,gi,mi,Ai;function li(va){return gi(va[0]*p,va[1]*p)}function yo(va){return va=gi.invert(va[0],va[1]),va&&[va[0]*g,va[1]*g]}li.stream=function(va){return mi&&Ai===va?mi:mi=al(il(gn)(Fa(Ka(ha(Ai=va)))))},li.preclip=function(va){return arguments.length?(Fa=va,$n=void 0,ja()):Fa},li.postclip=function(va){return arguments.length?(ha=va,Ca=Ba=Oa=Jn=null,ja()):ha},li.clipAngle=function(va){return arguments.length?(Fa=+va?Pr($n=va*p):($n=null,Zt),ja()):$n*g},li.clipExtent=function(va){return arguments.length?(ha=va==null?(Ca=Ba=Oa=Jn=null,un):_n(Ca=+va[0][0],Ba=+va[0][1],Oa=+va[1][0],Jn=+va[1][1]),ja()):Ca==null?null:[[Ca,Ba],[Oa,Jn]]},li.scale=function(va){return arguments.length?(lr=+va,qi()):lr},li.translate=function(va){return arguments.length?(tr=+va[0],Lr=+va[1],qi()):[tr,Lr]},li.center=function(va){return arguments.length?(tn=va[0]%360*p,pn=va[1]%360*p,qi()):[tn*g,pn*g]},li.rotate=function(va){return arguments.length?(wn=va[0]%360*p,Cn=va[1]%360*p,On=va.length>2?va[2]%360*p:0,qi()):[wn*g,Cn*g,On*g]},li.angle=function(va){return arguments.length?(In=va%360*p,qi()):In*g},li.reflectX=function(va){return arguments.length?(Pn=va?-1:1,qi()):Pn<0},li.reflectY=function(va){return arguments.length?(Un=va?-1:1,qi()):Un<0},li.precision=function(va){return arguments.length?(Ka=Eu(di,Ga=va*va),ja()):u(Ga)},li.fitExtent=function(va,xi){return vs(li,va,xi)},li.fitSize=function(va,xi){return pl(li,va,xi)},li.fitWidth=function(va,xi){return Zl(li,va,xi)},li.fitHeight=function(va,xi){return ou(li,va,xi)};function qi(){var va=ps(lr,0,0,Pn,Un,In).apply(null,It(tn,pn)),xi=(In?ps:jl)(lr,tr-va[0],Lr-va[1],Pn,Un,In);return gn=it(wn,Cn,On),di=Ke(It,xi),gi=Ke(gn,di),Ka=Eu(di,Ga),ja()}function ja(){return mi=Ai=null,li}return function(){return It=yt.apply(this,arguments),li.invert=It.invert&&yo,qi()}}function ws(yt){var It=0,lr=t/3,tr=Il(yt),Lr=tr(It,lr);return Lr.parallels=function(tn){return arguments.length?tr(It=tn[0]*p,lr=tn[1]*p):[It*g,lr*g]},Lr}function Ts(yt){var It=l(yt);function lr(tr,Lr){return[tr*It,h(Lr)/It]}return lr.invert=function(tr,Lr){return[tr/It,k(Lr*It)]},lr}function oo(yt,It){var lr=h(yt),tr=(lr+h(It))/2;if(y(tr)<n)return Ts(yt);var Lr=1+lr*(2*tr-lr),tn=u(Lr)/tr;function pn(wn,Cn){var On=u(Lr-2*tr*h(Cn))/tr;return[On*h(wn*=tr),tn-On*l(wn)]}return pn.invert=function(wn,Cn){var On=tn-Cn,gn=b(wn,y(On))*x(On);return On*tr<0&&(gn-=t*x(wn)*x(On)),[gn/tr,k((Lr-(wn*wn+On*On)*tr*tr)/(2*tr))]},pn}function dl(){return ws(oo).scale(155.424).center([0,33.6442])}function yl(){return dl().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Ws(yt){var It=yt.length;return{point:function(lr,tr){for(var Lr=-1;++Lr<It;)yt[Lr].point(lr,tr)},sphere:function(){for(var lr=-1;++lr<It;)yt[lr].sphere()},lineStart:function(){for(var lr=-1;++lr<It;)yt[lr].lineStart()},lineEnd:function(){for(var lr=-1;++lr<It;)yt[lr].lineEnd()},polygonStart:function(){for(var lr=-1;++lr<It;)yt[lr].polygonStart()},polygonEnd:function(){for(var lr=-1;++lr<It;)yt[lr].polygonEnd()}}}function ds(){var yt,It,lr=yl(),tr,Lr=dl().rotate([154,0]).center([-2,58.5]).parallels([55,65]),tn,pn=dl().rotate([157,0]).center([-3,19.9]).parallels([8,18]),wn,Cn,On={point:function(Pn,Un){Cn=[Pn,Un]}};function gn(Pn){var Un=Pn[0],$n=Pn[1];return Cn=null,tr.point(Un,$n),Cn||(tn.point(Un,$n),Cn)||(wn.point(Un,$n),Cn)}gn.invert=function(Pn){var Un=lr.scale(),$n=lr.translate(),Fa=(Pn[0]-$n[0])/Un,Ca=(Pn[1]-$n[1])/Un;return(Ca>=.12&&Ca<.234&&Fa>=-.425&&Fa<-.214?Lr:Ca>=.166&&Ca<.234&&Fa>=-.214&&Fa<-.115?pn:lr).invert(Pn)},gn.stream=function(Pn){return yt&&It===Pn?yt:yt=Ws([lr.stream(It=Pn),Lr.stream(Pn),pn.stream(Pn)])},gn.precision=function(Pn){return arguments.length?(lr.precision(Pn),Lr.precision(Pn),pn.precision(Pn),In()):lr.precision()},gn.scale=function(Pn){return arguments.length?(lr.scale(Pn),Lr.scale(Pn*.35),pn.scale(Pn),gn.translate(lr.translate())):lr.scale()},gn.translate=function(Pn){if(!arguments.length)return lr.translate();var Un=lr.scale(),$n=+Pn[0],Fa=+Pn[1];return tr=lr.translate(Pn).clipExtent([[$n-.455*Un,Fa-.238*Un],[$n+.455*Un,Fa+.238*Un]]).stream(On),tn=Lr.translate([$n-.307*Un,Fa+.201*Un]).clipExtent([[$n-.425*Un+n,Fa+.12*Un+n],[$n-.214*Un-n,Fa+.234*Un-n]]).stream(On),wn=pn.translate([$n-.205*Un,Fa+.212*Un]).clipExtent([[$n-.214*Un+n,Fa+.166*Un+n],[$n-.115*Un-n,Fa+.234*Un-n]]).stream(On),In()},gn.fitExtent=function(Pn,Un){return vs(gn,Pn,Un)},gn.fitSize=function(Pn,Un){return pl(gn,Pn,Un)},gn.fitWidth=function(Pn,Un){return Zl(gn,Pn,Un)},gn.fitHeight=function(Pn,Un){return ou(gn,Pn,Un)};function In(){return yt=It=null,gn}return gn.scale(1070)}function ml(yt){return function(It,lr){var tr=l(It),Lr=l(lr),tn=yt(tr*Lr);return[tn*Lr*h(It),tn*h(lr)]}}function ol(yt){return function(It,lr){var tr=u(It*It+lr*lr),Lr=yt(tr),tn=h(Lr),pn=l(Lr);return[b(It*tn,tr*pn),k(tr&&lr*tn/tr)]}}var zl=ml(function(yt){return u(2/(1+yt))});zl.invert=ol(function(yt){return 2*k(yt/2)});function xl(){return So(zl).scale(124.75).clipAngle(180-.001)}var Xs=ml(function(yt){return(yt=S(yt))&&yt/h(yt)});Xs.invert=ol(function(yt){return yt});function Cu(){return So(Xs).scale(79.4188).clipAngle(180-.001)}function ts(yt,It){return[yt,A(L((f+It)/2))]}ts.invert=function(yt,It){return[yt,2*c(s(It))-f]};function Gu(){return Kl(ts).scale(961/i)}function Kl(yt){var It=So(yt),lr=It.center,tr=It.scale,Lr=It.translate,tn=It.clipExtent,pn=null,wn,Cn,On;It.scale=function(In){return arguments.length?(tr(In),gn()):tr()},It.translate=function(In){return arguments.length?(Lr(In),gn()):Lr()},It.center=function(In){return arguments.length?(lr(In),gn()):lr()},It.clipExtent=function(In){return arguments.length?(In==null?pn=wn=Cn=On=null:(pn=+In[0][0],wn=+In[0][1],Cn=+In[1][0],On=+In[1][1]),gn()):pn==null?null:[[pn,wn],[Cn,On]]};function gn(){var In=t*tr(),Pn=It(kt(It.rotate()).invert([0,0]));return tn(pn==null?[[Pn[0]-In,Pn[1]-In],[Pn[0]+In,Pn[1]+In]]:yt===ts?[[Math.max(Pn[0]-In,pn),wn],[Math.min(Pn[0]+In,Cn),On]]:[[pn,Math.max(Pn[1]-In,wn)],[Cn,Math.min(Pn[1]+In,On)]])}return gn()}function sl(yt){return L((f+yt)/2)}function bl(yt,It){var lr=l(yt),tr=yt===It?h(yt):A(lr/l(It))/A(sl(It)/sl(yt)),Lr=lr*m(sl(yt),tr)/tr;if(!tr)return ts;function tn(pn,wn){Lr>0?wn<-f+n&&(wn=-f+n):wn>f-n&&(wn=f-n);var Cn=Lr/m(sl(wn),tr);return[Cn*h(tr*pn),Lr-Cn*l(tr*pn)]}return tn.invert=function(pn,wn){var Cn=Lr-wn,On=x(tr)*u(pn*pn+Cn*Cn),gn=b(pn,y(Cn))*x(Cn);return Cn*tr<0&&(gn-=t*x(pn)*x(Cn)),[gn/tr,2*c(m(Lr/On,1/tr))-f]},tn}function Zs(){return ws(bl).scale(109.5).parallels([30,30])}function _l(yt,It){return[yt,It]}_l.invert=_l;function uu(){return So(_l).scale(152.63)}function fu(yt,It){var lr=l(yt),tr=yt===It?h(yt):(lr-l(It))/(It-yt),Lr=lr/tr+yt;if(y(tr)<n)return _l;function tn(pn,wn){var Cn=Lr-wn,On=tr*pn;return[Cn*h(On),Lr-Cn*l(On)]}return tn.invert=function(pn,wn){var Cn=Lr-wn,On=b(pn,y(Cn))*x(Cn);return Cn*tr<0&&(On-=t*x(pn)*x(Cn)),[On/tr,Lr-x(tr)*u(pn*pn+Cn*Cn)]},tn}function Yu(){return ws(fu).scale(131.154).center([0,13.9389])}var Ri=1.340264,ll=-.081106,js=893e-6,Jo=.003796,rs=u(3)/2,wl=12;function so(yt,It){var lr=k(rs*h(It)),tr=lr*lr,Lr=tr*tr*tr;return[yt*l(lr)/(rs*(Ri+3*ll*tr+Lr*(7*js+9*Jo*tr))),lr*(Ri+ll*tr+Lr*(js+Jo*tr))]}so.invert=function(yt,It){for(var lr=It,tr=lr*lr,Lr=tr*tr*tr,tn=0,pn,wn,Cn;tn<wl&&(wn=lr*(Ri+ll*tr+Lr*(js+Jo*tr))-It,Cn=Ri+3*ll*tr+Lr*(7*js+9*Jo*tr),lr-=pn=wn/Cn,tr=lr*lr,Lr=tr*tr*tr,!(y(pn)<r));++tn);return[rs*yt*(Ri+3*ll*tr+Lr*(7*js+9*Jo*tr))/l(lr),k(h(lr)/rs)]};function cu(){return So(so).scale(177.158)}function ns(yt,It){var lr=l(It),tr=l(yt)*lr;return[lr*h(yt)/tr,h(It)/tr]}ns.invert=ol(c);function Is(){return So(ns).scale(144.049).clipAngle(60)}function zs(){var yt=1,It=0,lr=0,tr=1,Lr=1,tn=0,pn,wn,Cn=null,On,gn,In,Pn=1,Un=1,$n=Ys({point:function(ha,Ga){var Ka=Jn([ha,Ga]);this.stream.point(Ka[0],Ka[1])}}),Fa=un,Ca,Ba;function Oa(){return Pn=yt*tr,Un=yt*Lr,Ca=Ba=null,Jn}function Jn(ha){var Ga=ha[0]*Pn,Ka=ha[1]*Un;if(tn){var di=Ka*pn-Ga*wn;Ga=Ga*pn+Ka*wn,Ka=di}return[Ga+It,Ka+lr]}return Jn.invert=function(ha){var Ga=ha[0]-It,Ka=ha[1]-lr;if(tn){var di=Ka*pn+Ga*wn;Ga=Ga*pn-Ka*wn,Ka=di}return[Ga/Pn,Ka/Un]},Jn.stream=function(ha){return Ca&&Ba===ha?Ca:Ca=$n(Fa(Ba=ha))},Jn.postclip=function(ha){return arguments.length?(Fa=ha,Cn=On=gn=In=null,Oa()):Fa},Jn.clipExtent=function(ha){return arguments.length?(Fa=ha==null?(Cn=On=gn=In=null,un):_n(Cn=+ha[0][0],On=+ha[0][1],gn=+ha[1][0],In=+ha[1][1]),Oa()):Cn==null?null:[[Cn,On],[gn,In]]},Jn.scale=function(ha){return arguments.length?(yt=+ha,Oa()):yt},Jn.translate=function(ha){return arguments.length?(It=+ha[0],lr=+ha[1],Oa()):[It,lr]},Jn.angle=function(ha){return arguments.length?(tn=ha%360*p,wn=h(tn),pn=l(tn),Oa()):tn*g},Jn.reflectX=function(ha){return arguments.length?(tr=ha?-1:1,Oa()):tr<0},Jn.reflectY=function(ha){return arguments.length?(Lr=ha?-1:1,Oa()):Lr<0},Jn.fitExtent=function(ha,Ga){return vs(Jn,ha,Ga)},Jn.fitSize=function(ha,Ga){return pl(Jn,ha,Ga)},Jn.fitWidth=function(ha,Ga){return Zl(Jn,ha,Ga)},Jn.fitHeight=function(ha,Ga){return ou(Jn,ha,Ga)},Jn}function As(yt,It){var lr=It*It,tr=lr*lr;return[yt*(.8707-.131979*lr+tr*(-.013791+tr*(.003971*lr-.001529*tr))),It*(1.007226+lr*(.015085+tr*(-.044475+.028874*lr-.005916*tr)))]}As.invert=function(yt,It){var lr=It,tr=25,Lr;do{var tn=lr*lr,pn=tn*tn;lr-=Lr=(lr*(1.007226+tn*(.015085+pn*(-.044475+.028874*tn-.005916*pn)))-It)/(1.007226+tn*(.015085*3+pn*(-.044475*7+.028874*9*tn-.005916*11*pn)))}while(y(Lr)>n&&--tr>0);return[yt/(.8707+(tn=lr*lr)*(-.131979+tn*(-.013791+tn*tn*tn*(.003971-.001529*tn)))),lr]};function as(){return So(As).scale(175.295)}function Vi(yt,It){return[l(It)*h(yt),h(It)]}Vi.invert=ol(k);function ko(){return So(Vi).scale(249.5).clipAngle(90+n)}function is(yt,It){var lr=l(It),tr=1+l(yt)*lr;return[lr*h(yt)/tr,h(It)/tr]}is.invert=ol(function(yt){return 2*c(yt)});function hu(){return So(is).scale(250).clipAngle(142)}function Fl(yt,It){return[A(L((f+It)/2)),-yt]}Fl.invert=function(yt,It){return[-It,2*c(s(yt))-f]};function vu(){var yt=Kl(Fl),It=yt.center,lr=yt.rotate;return yt.center=function(tr){return arguments.length?It([-tr[1],tr[0]]):(tr=It(),[tr[1],-tr[0]])},yt.rotate=function(tr){return arguments.length?lr([tr[0],tr[1],tr.length>2?tr[2]+90:90]):(tr=lr(),[tr[0],tr[1],tr[2]-90])},lr([0,0,90]).scale(159.155)}w.geoAlbers=yl,w.geoAlbersUsa=ds,w.geoArea=W,w.geoAzimuthalEqualArea=xl,w.geoAzimuthalEqualAreaRaw=zl,w.geoAzimuthalEquidistant=Cu,w.geoAzimuthalEquidistantRaw=Xs,w.geoBounds=rt,w.geoCentroid=Me,w.geoCircle=fr,w.geoClipAntimeridian=Zt,w.geoClipCircle=Pr,w.geoClipExtent=Wn,w.geoClipRectangle=_n,w.geoConicConformal=Zs,w.geoConicConformalRaw=bl,w.geoConicEqualArea=dl,w.geoConicEqualAreaRaw=oo,w.geoConicEquidistant=Yu,w.geoConicEquidistantRaw=fu,w.geoContains=cr,w.geoDistance=An,w.geoEqualEarth=cu,w.geoEqualEarthRaw=so,w.geoEquirectangular=uu,w.geoEquirectangularRaw=_l,w.geoGnomonic=Is,w.geoGnomonicRaw=ns,w.geoGraticule=sn,w.geoGraticule10=kn,w.geoIdentity=zs,w.geoInterpolate=mn,w.geoLength=Mr,w.geoMercator=Gu,w.geoMercatorRaw=ts,w.geoNaturalEarth1=as,w.geoNaturalEarth1Raw=As,w.geoOrthographic=ko,w.geoOrthographicRaw=Vi,w.geoPath=Pl,w.geoProjection=So,w.geoProjectionMutator=Il,w.geoRotation=kt,w.geoStereographic=hu,w.geoStereographicRaw=is,w.geoStream=V,w.geoTransform=ku,w.geoTransverseMercator=vu,w.geoTransverseMercatorRaw=Fl,Object.defineProperty(w,"__esModule",{value:!0})})},{"d3-array":107}],115:[function(d,ne,ae){(function(w,v){typeof ae=="object"&&typeof ne<"u"?v(ae):(w=w||self,v(w.d3=w.d3||{}))})(this,function(w){function v(Ze,ke){return Ze.parent===ke.parent?1:2}function M(Ze){return Ze.reduce(T,0)/Ze.length}function T(Ze,ke){return Ze+ke.x}function e(Ze){return 1+Ze.reduce(a,0)}function a(Ze,ke){return Math.max(Ze,ke.y)}function n(Ze){for(var ke;ke=Ze.children;)Ze=ke[0];return Ze}function r(Ze){for(var ke;ke=Ze.children;)Ze=ke[ke.length-1];return Ze}function t(){var Ze=v,ke=1,Ge=1,Je=!1;function ot(Pt){var _t,Bt=0;Pt.eachAfter(function(er){var pr=er.children;pr?(er.x=M(pr),er.y=e(pr)):(er.x=_t?Bt+=Ze(er,_t):0,er.y=0,_t=er)});var qt=n(Pt),Ot=r(Pt),$t=qt.x-Ze(qt,Ot)/2,rr=Ot.x+Ze(Ot,qt)/2;return Pt.eachAfter(Je?function(er){er.x=(er.x-Pt.x)*ke,er.y=(Pt.y-er.y)*Ge}:function(er){er.x=(er.x-$t)/(rr-$t)*ke,er.y=(1-(Pt.y?er.y/Pt.y:1))*Ge})}return ot.separation=function(Pt){return arguments.length?(Ze=Pt,ot):Ze},ot.size=function(Pt){return arguments.length?(Je=!1,ke=+Pt[0],Ge=+Pt[1],ot):Je?null:[ke,Ge]},ot.nodeSize=function(Pt){return arguments.length?(Je=!0,ke=+Pt[0],Ge=+Pt[1],ot):Je?[ke,Ge]:null},ot}function f(Ze){var ke=0,Ge=Ze.children,Je=Ge&&Ge.length;if(!Je)ke=1;else for(;--Je>=0;)ke+=Ge[Je].value;Ze.value=ke}function o(){return this.eachAfter(f)}function i(Ze){var ke=this,Ge,Je=[ke],ot,Pt,_t;do for(Ge=Je.reverse(),Je=[];ke=Ge.pop();)if(Ze(ke),ot=ke.children,ot)for(Pt=0,_t=ot.length;Pt<_t;++Pt)Je.push(ot[Pt]);while(Je.length);return this}function g(Ze){for(var ke=this,Ge=[ke],Je,ot;ke=Ge.pop();)if(Ze(ke),Je=ke.children,Je)for(ot=Je.length-1;ot>=0;--ot)Ge.push(Je[ot]);return this}function p(Ze){for(var ke=this,Ge=[ke],Je=[],ot,Pt,_t;ke=Ge.pop();)if(Je.push(ke),ot=ke.children,ot)for(Pt=0,_t=ot.length;Pt<_t;++Pt)Ge.push(ot[Pt]);for(;ke=Je.pop();)Ze(ke);return this}function y(Ze){return this.eachAfter(function(ke){for(var Ge=+Ze(ke.data)||0,Je=ke.children,ot=Je&&Je.length;--ot>=0;)Ge+=Je[ot].value;ke.value=Ge})}function c(Ze){return this.eachBefore(function(ke){ke.children&&ke.children.sort(Ze)})}function b(Ze){for(var ke=this,Ge=l(ke,Ze),Je=[ke];ke!==Ge;)ke=ke.parent,Je.push(ke);for(var ot=Je.length;Ze!==Ge;)Je.splice(ot,0,Ze),Ze=Ze.parent;return Je}function l(Ze,ke){if(Ze===ke)return Ze;var Ge=Ze.ancestors(),Je=ke.ancestors(),ot=null;for(Ze=Ge.pop(),ke=Je.pop();Ze===ke;)ot=Ze,Ze=Ge.pop(),ke=Je.pop();return ot}function _(){for(var Ze=this,ke=[Ze];Ze=Ze.parent;)ke.push(Ze);return ke}function s(){var Ze=[];return this.each(function(ke){Ze.push(ke)}),Ze}function A(){var Ze=[];return this.eachBefore(function(ke){ke.children||Ze.push(ke)}),Ze}function m(){var Ze=this,ke=[];return Ze.each(function(Ge){Ge!==Ze&&ke.push({source:Ge.parent,target:Ge})}),ke}function h(Ze,ke){var Ge=new k(Ze),Je=+Ze.value&&(Ge.value=Ze.value),ot,Pt=[Ge],_t,Bt,qt,Ot;for(ke==null&&(ke=u);ot=Pt.pop();)if(Je&&(ot.value=+ot.data.value),(Bt=ke(ot.data))&&(Ot=Bt.length))for(ot.children=new Array(Ot),qt=Ot-1;qt>=0;--qt)Pt.push(_t=ot.children[qt]=new k(Bt[qt])),_t.parent=ot,_t.depth=ot.depth+1;return Ge.eachBefore(S)}function x(){return h(this).eachBefore(L)}function u(Ze){return Ze.children}function L(Ze){Ze.data=Ze.data.data}function S(Ze){var ke=0;do Ze.height=ke;while((Ze=Ze.parent)&&Ze.height<++ke)}function k(Ze){this.data=Ze,this.depth=this.height=0,this.parent=null}k.prototype=h.prototype={constructor:k,count:o,each:i,eachAfter:p,eachBefore:g,sum:y,sort:c,path:b,ancestors:_,descendants:s,leaves:A,links:m,copy:x};var P=Array.prototype.slice;function z(Ze){for(var ke=Ze.length,Ge,Je;ke;)Je=Math.random()*ke--|0,Ge=Ze[ke],Ze[ke]=Ze[Je],Ze[Je]=Ge;return Ze}function I(Ze){for(var ke=0,Ge=(Ze=z(P.call(Ze))).length,Je=[],ot,Pt;ke<Ge;)ot=Ze[ke],Pt&&O(Pt,ot)?++ke:(Pt=V(Je=D(Je,ot)),ke=0);return Pt}function D(Ze,ke){var Ge,Je;if(F(ke,Ze))return[ke];for(Ge=0;Ge<Ze.length;++Ge)if(R(ke,Ze[Ge])&&F(J(Ze[Ge],ke),Ze))return[Ze[Ge],ke];for(Ge=0;Ge<Ze.length-1;++Ge)for(Je=Ge+1;Je<Ze.length;++Je)if(R(J(Ze[Ge],Ze[Je]),ke)&&R(J(Ze[Ge],ke),Ze[Je])&&R(J(Ze[Je],ke),Ze[Ge])&&F(Z(Ze[Ge],Ze[Je],ke),Ze))return[Ze[Ge],Ze[Je],ke];throw new Error}function R(Ze,ke){var Ge=Ze.r-ke.r,Je=ke.x-Ze.x,ot=ke.y-Ze.y;return Ge<0||Ge*Ge<Je*Je+ot*ot}function O(Ze,ke){var Ge=Ze.r-ke.r+1e-6,Je=ke.x-Ze.x,ot=ke.y-Ze.y;return Ge>0&&Ge*Ge>Je*Je+ot*ot}function F(Ze,ke){for(var Ge=0;Ge<ke.length;++Ge)if(!O(Ze,ke[Ge]))return!1;return!0}function V(Ze){switch(Ze.length){case 1:return G(Ze[0]);case 2:return J(Ze[0],Ze[1]);case 3:return Z(Ze[0],Ze[1],Ze[2])}}function G(Ze){return{x:Ze.x,y:Ze.y,r:Ze.r}}function J(Ze,ke){var Ge=Ze.x,Je=Ze.y,ot=Ze.r,Pt=ke.x,_t=ke.y,Bt=ke.r,qt=Pt-Ge,Ot=_t-Je,$t=Bt-ot,rr=Math.sqrt(qt*qt+Ot*Ot);return{x:(Ge+Pt+qt/rr*$t)/2,y:(Je+_t+Ot/rr*$t)/2,r:(rr+ot+Bt)/2}}function Z(Ze,ke,Ge){var Je=Ze.x,ot=Ze.y,Pt=Ze.r,_t=ke.x,Bt=ke.y,qt=ke.r,Ot=Ge.x,$t=Ge.y,rr=Ge.r,er=Je-_t,pr=Je-Ot,Xr=ot-Bt,hn=ot-$t,Qr=qt-Pt,nt=rr-Pt,Ht=Je*Je+ot*ot-Pt*Pt,Kt=Ht-_t*_t-Bt*Bt+qt*qt,Gt=Ht-Ot*Ot-$t*$t+rr*rr,br=pr*Xr-er*hn,tt=(Xr*Gt-hn*Kt)/(br*2)-Je,je=(hn*Qr-Xr*nt)/br,st=(pr*Kt-er*Gt)/(br*2)-ot,ft=(er*nt-pr*Qr)/br,Me=je*je+ft*ft-1,Se=2*(Pt+tt*je+st*ft),Ke=tt*tt+st*st-Pt*Pt,Xe=-(Me?(Se+Math.sqrt(Se*Se-4*Me*Ke))/(2*Me):Ke/Se);return{x:Je+tt+je*Xe,y:ot+st+ft*Xe,r:Xe}}function Y(Ze,ke,Ge){var Je=Ze.x-ke.x,ot,Pt,_t=Ze.y-ke.y,Bt,qt,Ot=Je*Je+_t*_t;Ot?(Pt=ke.r+Ge.r,Pt*=Pt,qt=Ze.r+Ge.r,qt*=qt,Pt>qt?(ot=(Ot+qt-Pt)/(2*Ot),Bt=Math.sqrt(Math.max(0,qt/Ot-ot*ot)),Ge.x=Ze.x-ot*Je-Bt*_t,Ge.y=Ze.y-ot*_t+Bt*Je):(ot=(Ot+Pt-qt)/(2*Ot),Bt=Math.sqrt(Math.max(0,Pt/Ot-ot*ot)),Ge.x=ke.x+ot*Je-Bt*_t,Ge.y=ke.y+ot*_t+Bt*Je)):(Ge.x=ke.x+Ge.r,Ge.y=ke.y)}function j(Ze,ke){var Ge=Ze.r+ke.r-1e-6,Je=ke.x-Ze.x,ot=ke.y-Ze.y;return Ge>0&&Ge*Ge>Je*Je+ot*ot}function re(Ze){var ke=Ze._,Ge=Ze.next._,Je=ke.r+Ge.r,ot=(ke.x*Ge.r+Ge.x*ke.r)/Je,Pt=(ke.y*Ge.r+Ge.y*ke.r)/Je;return ot*ot+Pt*Pt}function se(Ze){this._=Ze,this.next=null,this.previous=null}function oe(Ze){if(!(ot=Ze.length))return 0;var ke,Ge,Je,ot,Pt,_t,Bt,qt,Ot,$t,rr;if(ke=Ze[0],ke.x=0,ke.y=0,!(ot>1))return ke.r;if(Ge=Ze[1],ke.x=-Ge.r,Ge.x=ke.r,Ge.y=0,!(ot>2))return ke.r+Ge.r;Y(Ge,ke,Je=Ze[2]),ke=new se(ke),Ge=new se(Ge),Je=new se(Je),ke.next=Je.previous=Ge,Ge.next=ke.previous=Je,Je.next=Ge.previous=ke;e:for(Bt=3;Bt<ot;++Bt){Y(ke._,Ge._,Je=Ze[Bt]),Je=new se(Je),qt=Ge.next,Ot=ke.previous,$t=Ge._.r,rr=ke._.r;do if($t<=rr){if(j(qt._,Je._)){Ge=qt,ke.next=Ge,Ge.previous=ke,--Bt;continue e}$t+=qt._.r,qt=qt.next}else{if(j(Ot._,Je._)){ke=Ot,ke.next=Ge,Ge.previous=ke,--Bt;continue e}rr+=Ot._.r,Ot=Ot.previous}while(qt!==Ot.next);for(Je.previous=ke,Je.next=Ge,ke.next=Ge.previous=Ge=Je,Pt=re(ke);(Je=Je.next)!==Ge;)(_t=re(Je))<Pt&&(ke=Je,Pt=_t);Ge=ke.next}for(ke=[Ge._],Je=Ge;(Je=Je.next)!==Ge;)ke.push(Je._);for(Je=I(ke),Bt=0;Bt<ot;++Bt)ke=Ze[Bt],ke.x-=Je.x,ke.y-=Je.y;return Je.r}function N(Ze){return oe(Ze),Ze}function U(Ze){return Ze==null?null:q(Ze)}function q(Ze){if(typeof Ze!="function")throw new Error;return Ze}function Q(){return 0}function W(Ze){return function(){return Ze}}function X(Ze){return Math.sqrt(Ze.value)}function ee(){var Ze=null,ke=1,Ge=1,Je=Q;function ot(Pt){return Pt.x=ke/2,Pt.y=Ge/2,Ze?Pt.eachBefore(te(Ze)).eachAfter(ie(Je,.5)).eachBefore(le(1)):Pt.eachBefore(te(X)).eachAfter(ie(Q,1)).eachAfter(ie(Je,Pt.r/Math.min(ke,Ge))).eachBefore(le(Math.min(ke,Ge)/(2*Pt.r))),Pt}return ot.radius=function(Pt){return arguments.length?(Ze=U(Pt),ot):Ze},ot.size=function(Pt){return arguments.length?(ke=+Pt[0],Ge=+Pt[1],ot):[ke,Ge]},ot.padding=function(Pt){return arguments.length?(Je=typeof Pt=="function"?Pt:W(+Pt),ot):Je},ot}function te(Ze){return function(ke){ke.children||(ke.r=Math.max(0,+Ze(ke)||0))}}function ie(Ze,ke){return function(Ge){if(Je=Ge.children){var Je,ot,Pt=Je.length,_t=Ze(Ge)*ke||0,Bt;if(_t)for(ot=0;ot<Pt;++ot)Je[ot].r+=_t;if(Bt=oe(Je),_t)for(ot=0;ot<Pt;++ot)Je[ot].r-=_t;Ge.r=Bt+_t}}}function le(Ze){return function(ke){var Ge=ke.parent;ke.r*=Ze,Ge&&(ke.x=Ge.x+Ze*ke.x,ke.y=Ge.y+Ze*ke.y)}}function ge(Ze){Ze.x0=Math.round(Ze.x0),Ze.y0=Math.round(Ze.y0),Ze.x1=Math.round(Ze.x1),Ze.y1=Math.round(Ze.y1)}function fe(Ze,ke,Ge,Je,ot){for(var Pt=Ze.children,_t,Bt=-1,qt=Pt.length,Ot=Ze.value&&(Je-ke)/Ze.value;++Bt<qt;)_t=Pt[Bt],_t.y0=Ge,_t.y1=ot,_t.x0=ke,_t.x1=ke+=_t.value*Ot}function pe(){var Ze=1,ke=1,Ge=0,Je=!1;function ot(_t){var Bt=_t.height+1;return _t.x0=_t.y0=Ge,_t.x1=Ze,_t.y1=ke/Bt,_t.eachBefore(Pt(ke,Bt)),Je&&_t.eachBefore(ge),_t}function Pt(_t,Bt){return function(qt){qt.children&&fe(qt,qt.x0,_t*(qt.depth+1)/Bt,qt.x1,_t*(qt.depth+2)/Bt);var Ot=qt.x0,$t=qt.y0,rr=qt.x1-Ge,er=qt.y1-Ge;rr<Ot&&(Ot=rr=(Ot+rr)/2),er<$t&&($t=er=($t+er)/2),qt.x0=Ot,qt.y0=$t,qt.x1=rr,qt.y1=er}}return ot.round=function(_t){return arguments.length?(Je=!!_t,ot):Je},ot.size=function(_t){return arguments.length?(Ze=+_t[0],ke=+_t[1],ot):[Ze,ke]},ot.padding=function(_t){return arguments.length?(Ge=+_t,ot):Ge},ot}var ye="$",Te={depth:-1},_e={};function De(Ze){return Ze.id}function Be(Ze){return Ze.parentId}function Ue(){var Ze=De,ke=Be;function Ge(Je){var ot,Pt,_t=Je.length,Bt,qt,Ot,$t=new Array(_t),rr,er,pr={};for(Pt=0;Pt<_t;++Pt)ot=Je[Pt],Ot=$t[Pt]=new k(ot),(rr=Ze(ot,Pt,Je))!=null&&(rr+="")&&(er=ye+(Ot.id=rr),pr[er]=er in pr?_e:Ot);for(Pt=0;Pt<_t;++Pt)if(Ot=$t[Pt],rr=ke(Je[Pt],Pt,Je),rr==null||!(rr+="")){if(Bt)throw new Error("multiple roots");Bt=Ot}else{if(qt=pr[ye+rr],!qt)throw new Error("missing: "+rr);if(qt===_e)throw new Error("ambiguous: "+rr);qt.children?qt.children.push(Ot):qt.children=[Ot],Ot.parent=qt}if(!Bt)throw new Error("no root");if(Bt.parent=Te,Bt.eachBefore(function(Xr){Xr.depth=Xr.parent.depth+1,--_t}).eachBefore(S),Bt.parent=null,_t>0)throw new Error("cycle");return Bt}return Ge.id=function(Je){return arguments.length?(Ze=q(Je),Ge):Ze},Ge.parentId=function(Je){return arguments.length?(ke=q(Je),Ge):ke},Ge}function xe(Ze,ke){return Ze.parent===ke.parent?1:2}function Pe(Ze){var ke=Ze.children;return ke?ke[0]:Ze.t}function Ve(Ze){var ke=Ze.children;return ke?ke[ke.length-1]:Ze.t}function Qe(Ze,ke,Ge){var Je=Ge/(ke.i-Ze.i);ke.c-=Je,ke.s+=Ge,Ze.c+=Je,ke.z+=Ge,ke.m+=Ge}function Fe(Ze){for(var ke=0,Ge=0,Je=Ze.children,ot=Je.length,Pt;--ot>=0;)Pt=Je[ot],Pt.z+=ke,Pt.m+=ke,ke+=Pt.s+(Ge+=Pt.c)}function Le(Ze,ke,Ge){return Ze.a.parent===ke.parent?Ze.a:Ge}function Ne(Ze,ke){this._=Ze,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=ke}Ne.prototype=Object.create(k.prototype);function dt(Ze){for(var ke=new Ne(Ze,0),Ge,Je=[ke],ot,Pt,_t,Bt;Ge=Je.pop();)if(Pt=Ge._.children)for(Ge.children=new Array(Bt=Pt.length),_t=Bt-1;_t>=0;--_t)Je.push(ot=Ge.children[_t]=new Ne(Pt[_t],_t)),ot.parent=Ge;return(ke.parent=new Ne(null,0)).children=[ke],ke}function Dt(){var Ze=xe,ke=1,Ge=1,Je=null;function ot(Ot){var $t=dt(Ot);if($t.eachAfter(Pt),$t.parent.m=-$t.z,$t.eachBefore(_t),Je)Ot.eachBefore(qt);else{var rr=Ot,er=Ot,pr=Ot;Ot.eachBefore(function(Ht){Ht.x<rr.x&&(rr=Ht),Ht.x>er.x&&(er=Ht),Ht.depth>pr.depth&&(pr=Ht)});var Xr=rr===er?1:Ze(rr,er)/2,hn=Xr-rr.x,Qr=ke/(er.x+Xr+hn),nt=Ge/(pr.depth||1);Ot.eachBefore(function(Ht){Ht.x=(Ht.x+hn)*Qr,Ht.y=Ht.depth*nt})}return Ot}function Pt(Ot){var $t=Ot.children,rr=Ot.parent.children,er=Ot.i?rr[Ot.i-1]:null;if($t){Fe(Ot);var pr=($t[0].z+$t[$t.length-1].z)/2;er?(Ot.z=er.z+Ze(Ot._,er._),Ot.m=Ot.z-pr):Ot.z=pr}else er&&(Ot.z=er.z+Ze(Ot._,er._));Ot.parent.A=Bt(Ot,er,Ot.parent.A||rr[0])}function _t(Ot){Ot._.x=Ot.z+Ot.parent.m,Ot.m+=Ot.parent.m}function Bt(Ot,$t,rr){if($t){for(var er=Ot,pr=Ot,Xr=$t,hn=er.parent.children[0],Qr=er.m,nt=pr.m,Ht=Xr.m,Kt=hn.m,Gt;Xr=Ve(Xr),er=Pe(er),Xr&&er;)hn=Pe(hn),pr=Ve(pr),pr.a=Ot,Gt=Xr.z+Ht-er.z-Qr+Ze(Xr._,er._),Gt>0&&(Qe(Le(Xr,Ot,rr),Ot,Gt),Qr+=Gt,nt+=Gt),Ht+=Xr.m,Qr+=er.m,Kt+=hn.m,nt+=pr.m;Xr&&!Ve(pr)&&(pr.t=Xr,pr.m+=Ht-nt),er&&!Pe(hn)&&(hn.t=er,hn.m+=Qr-Kt,rr=Ot)}return rr}function qt(Ot){Ot.x*=ke,Ot.y=Ot.depth*Ge}return ot.separation=function(Ot){return arguments.length?(Ze=Ot,ot):Ze},ot.size=function(Ot){return arguments.length?(Je=!1,ke=+Ot[0],Ge=+Ot[1],ot):Je?null:[ke,Ge]},ot.nodeSize=function(Ot){return arguments.length?(Je=!0,ke=+Ot[0],Ge=+Ot[1],ot):Je?[ke,Ge]:null},ot}function Xt(Ze,ke,Ge,Je,ot){for(var Pt=Ze.children,_t,Bt=-1,qt=Pt.length,Ot=Ze.value&&(ot-Ge)/Ze.value;++Bt<qt;)_t=Pt[Bt],_t.x0=ke,_t.x1=Je,_t.y0=Ge,_t.y1=Ge+=_t.value*Ot}var At=(1+Math.sqrt(5))/2;function zt(Ze,ke,Ge,Je,ot,Pt){for(var _t=[],Bt=ke.children,qt,Ot,$t=0,rr=0,er=Bt.length,pr,Xr,hn=ke.value,Qr,nt,Ht,Kt,Gt,br,tt;$t<er;){pr=ot-Ge,Xr=Pt-Je;do Qr=Bt[rr++].value;while(!Qr&&rr<er);for(nt=Ht=Qr,br=Math.max(Xr/pr,pr/Xr)/(hn*Ze),tt=Qr*Qr*br,Gt=Math.max(Ht/tt,tt/nt);rr<er;++rr){if(Qr+=Ot=Bt[rr].value,Ot<nt&&(nt=Ot),Ot>Ht&&(Ht=Ot),tt=Qr*Qr*br,Kt=Math.max(Ht/tt,tt/nt),Kt>Gt){Qr-=Ot;break}Gt=Kt}_t.push(qt={value:Qr,dice:pr<Xr,children:Bt.slice($t,rr)}),qt.dice?fe(qt,Ge,Je,ot,hn?Je+=Xr*Qr/hn:Pt):Xt(qt,Ge,Je,hn?Ge+=pr*Qr/hn:ot,Pt),hn-=Qr,$t=rr}return _t}var Ut=function Ze(ke){function Ge(Je,ot,Pt,_t,Bt){zt(ke,Je,ot,Pt,_t,Bt)}return Ge.ratio=function(Je){return Ze((Je=+Je)>1?Je:1)},Ge}(At);function Ct(){var Ze=Ut,ke=!1,Ge=1,Je=1,ot=[0],Pt=Q,_t=Q,Bt=Q,qt=Q,Ot=Q;function $t(er){return er.x0=er.y0=0,er.x1=Ge,er.y1=Je,er.eachBefore(rr),ot=[0],ke&&er.eachBefore(ge),er}function rr(er){var pr=ot[er.depth],Xr=er.x0+pr,hn=er.y0+pr,Qr=er.x1-pr,nt=er.y1-pr;Qr<Xr&&(Xr=Qr=(Xr+Qr)/2),nt<hn&&(hn=nt=(hn+nt)/2),er.x0=Xr,er.y0=hn,er.x1=Qr,er.y1=nt,er.children&&(pr=ot[er.depth+1]=Pt(er)/2,Xr+=Ot(er)-pr,hn+=_t(er)-pr,Qr-=Bt(er)-pr,nt-=qt(er)-pr,Qr<Xr&&(Xr=Qr=(Xr+Qr)/2),nt<hn&&(hn=nt=(hn+nt)/2),Ze(er,Xr,hn,Qr,nt))}return $t.round=function(er){return arguments.length?(ke=!!er,$t):ke},$t.size=function(er){return arguments.length?(Ge=+er[0],Je=+er[1],$t):[Ge,Je]},$t.tile=function(er){return arguments.length?(Ze=q(er),$t):Ze},$t.padding=function(er){return arguments.length?$t.paddingInner(er).paddingOuter(er):$t.paddingInner()},$t.paddingInner=function(er){return arguments.length?(Pt=typeof er=="function"?er:W(+er),$t):Pt},$t.paddingOuter=function(er){return arguments.length?$t.paddingTop(er).paddingRight(er).paddingBottom(er).paddingLeft(er):$t.paddingTop()},$t.paddingTop=function(er){return arguments.length?(_t=typeof er=="function"?er:W(+er),$t):_t},$t.paddingRight=function(er){return arguments.length?(Bt=typeof er=="function"?er:W(+er),$t):Bt},$t.paddingBottom=function(er){return arguments.length?(qt=typeof er=="function"?er:W(+er),$t):qt},$t.paddingLeft=function(er){return arguments.length?(Ot=typeof er=="function"?er:W(+er),$t):Ot},$t}function Mt(Ze,ke,Ge,Je,ot){var Pt=Ze.children,_t,Bt=Pt.length,qt,Ot=new Array(Bt+1);for(Ot[0]=qt=_t=0;_t<Bt;++_t)Ot[_t+1]=qt+=Pt[_t].value;$t(0,Bt,Ze.value,ke,Ge,Je,ot);function $t(rr,er,pr,Xr,hn,Qr,nt){if(rr>=er-1){var Ht=Pt[rr];Ht.x0=Xr,Ht.y0=hn,Ht.x1=Qr,Ht.y1=nt;return}for(var Kt=Ot[rr],Gt=pr/2+Kt,br=rr+1,tt=er-1;br<tt;){var je=br+tt>>>1;Ot[je]<Gt?br=je+1:tt=je}Gt-Ot[br-1]<Ot[br]-Gt&&rr+1<br&&--br;var st=Ot[br]-Kt,ft=pr-st;if(Qr-Xr>nt-hn){var Me=(Xr*ft+Qr*st)/pr;$t(rr,br,st,Xr,hn,Me,nt),$t(br,er,ft,Me,hn,Qr,nt)}else{var Se=(hn*ft+nt*st)/pr;$t(rr,br,st,Xr,hn,Qr,Se),$t(br,er,ft,Xr,Se,Qr,nt)}}}function rt(Ze,ke,Ge,Je,ot){(Ze.depth&1?Xt:fe)(Ze,ke,Ge,Je,ot)}var ct=function Ze(ke){function Ge(Je,ot,Pt,_t,Bt){if((qt=Je._squarify)&&qt.ratio===ke)for(var qt,Ot,$t,rr,er=-1,pr,Xr=qt.length,hn=Je.value;++er<Xr;){for(Ot=qt[er],$t=Ot.children,rr=Ot.value=0,pr=$t.length;rr<pr;++rr)Ot.value+=$t[rr].value;Ot.dice?fe(Ot,ot,Pt,_t,Pt+=(Bt-Pt)*Ot.value/hn):Xt(Ot,ot,Pt,ot+=(_t-ot)*Ot.value/hn,Bt),hn-=Ot.value}else Je._squarify=qt=zt(ke,Je,ot,Pt,_t,Bt),qt.ratio=ke}return Ge.ratio=function(Je){return Ze((Je=+Je)>1?Je:1)},Ge}(At);w.cluster=t,w.hierarchy=h,w.pack=ee,w.packEnclose=I,w.packSiblings=N,w.partition=pe,w.stratify=Ue,w.tree=Dt,w.treemap=Ct,w.treemapBinary=Mt,w.treemapDice=fe,w.treemapResquarify=ct,w.treemapSlice=Xt,w.treemapSliceDice=rt,w.treemapSquarify=Ut,Object.defineProperty(w,"__esModule",{value:!0})})},{}],116:[function(d,ne,ae){(function(w,v){typeof ae=="object"&&typeof ne<"u"?v(ae,d("d3-color")):(w=w||self,v(w.d3=w.d3||{},w.d3))})(this,function(w,v){function M(xe,Pe,Ve,Qe,Fe){var Le=xe*xe,Ne=Le*xe;return((1-3*xe+3*Le-Ne)*Pe+(4-6*Le+3*Ne)*Ve+(1+3*xe+3*Le-3*Ne)*Qe+Ne*Fe)/6}function T(xe){var Pe=xe.length-1;return function(Ve){var Qe=Ve<=0?Ve=0:Ve>=1?(Ve=1,Pe-1):Math.floor(Ve*Pe),Fe=xe[Qe],Le=xe[Qe+1],Ne=Qe>0?xe[Qe-1]:2*Fe-Le,dt=Qe<Pe-1?xe[Qe+2]:2*Le-Fe;return M((Ve-Qe/Pe)*Pe,Ne,Fe,Le,dt)}}function e(xe){var Pe=xe.length;return function(Ve){var Qe=Math.floor(((Ve%=1)<0?++Ve:Ve)*Pe),Fe=xe[(Qe+Pe-1)%Pe],Le=xe[Qe%Pe],Ne=xe[(Qe+1)%Pe],dt=xe[(Qe+2)%Pe];return M((Ve-Qe/Pe)*Pe,Fe,Le,Ne,dt)}}function a(xe){return function(){return xe}}function n(xe,Pe){return function(Ve){return xe+Ve*Pe}}function r(xe,Pe,Ve){return xe=Math.pow(xe,Ve),Pe=Math.pow(Pe,Ve)-xe,Ve=1/Ve,function(Qe){return Math.pow(xe+Qe*Pe,Ve)}}function t(xe,Pe){var Ve=Pe-xe;return Ve?n(xe,Ve>180||Ve<-180?Ve-360*Math.round(Ve/360):Ve):a(isNaN(xe)?Pe:xe)}function f(xe){return(xe=+xe)==1?o:function(Pe,Ve){return Ve-Pe?r(Pe,Ve,xe):a(isNaN(Pe)?Ve:Pe)}}function o(xe,Pe){var Ve=Pe-xe;return Ve?n(xe,Ve):a(isNaN(xe)?Pe:xe)}var i=function xe(Pe){var Ve=f(Pe);function Qe(Fe,Le){var Ne=Ve((Fe=v.rgb(Fe)).r,(Le=v.rgb(Le)).r),dt=Ve(Fe.g,Le.g),Dt=Ve(Fe.b,Le.b),Xt=o(Fe.opacity,Le.opacity);return function(At){return Fe.r=Ne(At),Fe.g=dt(At),Fe.b=Dt(At),Fe.opacity=Xt(At),Fe+""}}return Qe.gamma=xe,Qe}(1);function g(xe){return function(Pe){var Ve=Pe.length,Qe=new Array(Ve),Fe=new Array(Ve),Le=new Array(Ve),Ne,dt;for(Ne=0;Ne<Ve;++Ne)dt=v.rgb(Pe[Ne]),Qe[Ne]=dt.r||0,Fe[Ne]=dt.g||0,Le[Ne]=dt.b||0;return Qe=xe(Qe),Fe=xe(Fe),Le=xe(Le),dt.opacity=1,function(Dt){return dt.r=Qe(Dt),dt.g=Fe(Dt),dt.b=Le(Dt),dt+""}}}var p=g(T),y=g(e);function c(xe,Pe){Pe||(Pe=[]);var Ve=xe?Math.min(Pe.length,xe.length):0,Qe=Pe.slice(),Fe;return function(Le){for(Fe=0;Fe<Ve;++Fe)Qe[Fe]=xe[Fe]*(1-Le)+Pe[Fe]*Le;return Qe}}function b(xe){return ArrayBuffer.isView(xe)&&!(xe instanceof DataView)}function l(xe,Pe){return(b(Pe)?c:_)(xe,Pe)}function _(xe,Pe){var Ve=Pe?Pe.length:0,Qe=xe?Math.min(Ve,xe.length):0,Fe=new Array(Qe),Le=new Array(Ve),Ne;for(Ne=0;Ne<Qe;++Ne)Fe[Ne]=k(xe[Ne],Pe[Ne]);for(;Ne<Ve;++Ne)Le[Ne]=Pe[Ne];return function(dt){for(Ne=0;Ne<Qe;++Ne)Le[Ne]=Fe[Ne](dt);return Le}}function s(xe,Pe){var Ve=new Date;return xe=+xe,Pe=+Pe,function(Qe){return Ve.setTime(xe*(1-Qe)+Pe*Qe),Ve}}function A(xe,Pe){return xe=+xe,Pe=+Pe,function(Ve){return xe*(1-Ve)+Pe*Ve}}function m(xe,Pe){var Ve={},Qe={},Fe;(xe===null||typeof xe!="object")&&(xe={}),(Pe===null||typeof Pe!="object")&&(Pe={});for(Fe in Pe)Fe in xe?Ve[Fe]=k(xe[Fe],Pe[Fe]):Qe[Fe]=Pe[Fe];return function(Le){for(Fe in Ve)Qe[Fe]=Ve[Fe](Le);return Qe}}var h=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,x=new RegExp(h.source,"g");function u(xe){return function(){return xe}}function L(xe){return function(Pe){return xe(Pe)+""}}function S(xe,Pe){var Ve=h.lastIndex=x.lastIndex=0,Qe,Fe,Le,Ne=-1,dt=[],Dt=[];for(xe=xe+"",Pe=Pe+"";(Qe=h.exec(xe))&&(Fe=x.exec(Pe));)(Le=Fe.index)>Ve&&(Le=Pe.slice(Ve,Le),dt[Ne]?dt[Ne]+=Le:dt[++Ne]=Le),(Qe=Qe[0])===(Fe=Fe[0])?dt[Ne]?dt[Ne]+=Fe:dt[++Ne]=Fe:(dt[++Ne]=null,Dt.push({i:Ne,x:A(Qe,Fe)})),Ve=x.lastIndex;return Ve<Pe.length&&(Le=Pe.slice(Ve),dt[Ne]?dt[Ne]+=Le:dt[++Ne]=Le),dt.length<2?Dt[0]?L(Dt[0].x):u(Pe):(Pe=Dt.length,function(Xt){for(var At=0,zt;At<Pe;++At)dt[(zt=Dt[At]).i]=zt.x(Xt);return dt.join("")})}function k(xe,Pe){var Ve=typeof Pe,Qe;return Pe==null||Ve==="boolean"?a(Pe):(Ve==="number"?A:Ve==="string"?(Qe=v.color(Pe))?(Pe=Qe,i):S:Pe instanceof v.color?i:Pe instanceof Date?s:b(Pe)?c:Array.isArray(Pe)?_:typeof Pe.valueOf!="function"&&typeof Pe.toString!="function"||isNaN(Pe)?m:A)(xe,Pe)}function P(xe){var Pe=xe.length;return function(Ve){return xe[Math.max(0,Math.min(Pe-1,Math.floor(Ve*Pe)))]}}function z(xe,Pe){var Ve=t(+xe,+Pe);return function(Qe){var Fe=Ve(Qe);return Fe-360*Math.floor(Fe/360)}}function I(xe,Pe){return xe=+xe,Pe=+Pe,function(Ve){return Math.round(xe*(1-Ve)+Pe*Ve)}}var D=180/Math.PI,R={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function O(xe,Pe,Ve,Qe,Fe,Le){var Ne,dt,Dt;return(Ne=Math.sqrt(xe*xe+Pe*Pe))&&(xe/=Ne,Pe/=Ne),(Dt=xe*Ve+Pe*Qe)&&(Ve-=xe*Dt,Qe-=Pe*Dt),(dt=Math.sqrt(Ve*Ve+Qe*Qe))&&(Ve/=dt,Qe/=dt,Dt/=dt),xe*Qe<Pe*Ve&&(xe=-xe,Pe=-Pe,Dt=-Dt,Ne=-Ne),{translateX:Fe,translateY:Le,rotate:Math.atan2(Pe,xe)*D,skewX:Math.atan(Dt)*D,scaleX:Ne,scaleY:dt}}var F,V,G,J;function Z(xe){return xe==="none"?R:(F||(F=document.createElement("DIV"),V=document.documentElement,G=document.defaultView),F.style.transform=xe,xe=G.getComputedStyle(V.appendChild(F),null).getPropertyValue("transform"),V.removeChild(F),xe=xe.slice(7,-1).split(","),O(+xe[0],+xe[1],+xe[2],+xe[3],+xe[4],+xe[5]))}function Y(xe){return xe==null||(J||(J=document.createElementNS("http://www.w3.org/2000/svg","g")),J.setAttribute("transform",xe),!(xe=J.transform.baseVal.consolidate()))?R:(xe=xe.matrix,O(xe.a,xe.b,xe.c,xe.d,xe.e,xe.f))}function j(xe,Pe,Ve,Qe){function Fe(Xt){return Xt.length?Xt.pop()+" ":""}function Le(Xt,At,zt,Ut,Ct,Mt){if(Xt!==zt||At!==Ut){var rt=Ct.push("translate(",null,Pe,null,Ve);Mt.push({i:rt-4,x:A(Xt,zt)},{i:rt-2,x:A(At,Ut)})}else(zt||Ut)&&Ct.push("translate("+zt+Pe+Ut+Ve)}function Ne(Xt,At,zt,Ut){Xt!==At?(Xt-At>180?At+=360:At-Xt>180&&(Xt+=360),Ut.push({i:zt.push(Fe(zt)+"rotate(",null,Qe)-2,x:A(Xt,At)})):At&&zt.push(Fe(zt)+"rotate("+At+Qe)}function dt(Xt,At,zt,Ut){Xt!==At?Ut.push({i:zt.push(Fe(zt)+"skewX(",null,Qe)-2,x:A(Xt,At)}):At&&zt.push(Fe(zt)+"skewX("+At+Qe)}function Dt(Xt,At,zt,Ut,Ct,Mt){if(Xt!==zt||At!==Ut){var rt=Ct.push(Fe(Ct)+"scale(",null,",",null,")");Mt.push({i:rt-4,x:A(Xt,zt)},{i:rt-2,x:A(At,Ut)})}else(zt!==1||Ut!==1)&&Ct.push(Fe(Ct)+"scale("+zt+","+Ut+")")}return function(Xt,At){var zt=[],Ut=[];return Xt=xe(Xt),At=xe(At),Le(Xt.translateX,Xt.translateY,At.translateX,At.translateY,zt,Ut),Ne(Xt.rotate,At.rotate,zt,Ut),dt(Xt.skewX,At.skewX,zt,Ut),Dt(Xt.scaleX,Xt.scaleY,At.scaleX,At.scaleY,zt,Ut),Xt=At=null,function(Ct){for(var Mt=-1,rt=Ut.length,ct;++Mt<rt;)zt[(ct=Ut[Mt]).i]=ct.x(Ct);return zt.join("")}}}var re=j(Z,"px, ","px)","deg)"),se=j(Y,", ",")",")"),oe=Math.SQRT2,N=2,U=4,q=1e-12;function Q(xe){return((xe=Math.exp(xe))+1/xe)/2}function W(xe){return((xe=Math.exp(xe))-1/xe)/2}function X(xe){return((xe=Math.exp(2*xe))-1)/(xe+1)}function ee(xe,Pe){var Ve=xe[0],Qe=xe[1],Fe=xe[2],Le=Pe[0],Ne=Pe[1],dt=Pe[2],Dt=Le-Ve,Xt=Ne-Qe,At=Dt*Dt+Xt*Xt,zt,Ut;if(At<q)Ut=Math.log(dt/Fe)/oe,zt=function(ke){return[Ve+ke*Dt,Qe+ke*Xt,Fe*Math.exp(oe*ke*Ut)]};else{var Ct=Math.sqrt(At),Mt=(dt*dt-Fe*Fe+U*At)/(2*Fe*N*Ct),rt=(dt*dt-Fe*Fe-U*At)/(2*dt*N*Ct),ct=Math.log(Math.sqrt(Mt*Mt+1)-Mt),Ze=Math.log(Math.sqrt(rt*rt+1)-rt);Ut=(Ze-ct)/oe,zt=function(ke){var Ge=ke*Ut,Je=Q(ct),ot=Fe/(N*Ct)*(Je*X(oe*Ge+ct)-W(ct));return[Ve+ot*Dt,Qe+ot*Xt,Fe*Je/Q(oe*Ge+ct)]}}return zt.duration=Ut*1e3,zt}function te(xe){return function(Pe,Ve){var Qe=xe((Pe=v.hsl(Pe)).h,(Ve=v.hsl(Ve)).h),Fe=o(Pe.s,Ve.s),Le=o(Pe.l,Ve.l),Ne=o(Pe.opacity,Ve.opacity);return function(dt){return Pe.h=Qe(dt),Pe.s=Fe(dt),Pe.l=Le(dt),Pe.opacity=Ne(dt),Pe+""}}}var ie=te(t),le=te(o);function ge(xe,Pe){var Ve=o((xe=v.lab(xe)).l,(Pe=v.lab(Pe)).l),Qe=o(xe.a,Pe.a),Fe=o(xe.b,Pe.b),Le=o(xe.opacity,Pe.opacity);return function(Ne){return xe.l=Ve(Ne),xe.a=Qe(Ne),xe.b=Fe(Ne),xe.opacity=Le(Ne),xe+""}}function fe(xe){return function(Pe,Ve){var Qe=xe((Pe=v.hcl(Pe)).h,(Ve=v.hcl(Ve)).h),Fe=o(Pe.c,Ve.c),Le=o(Pe.l,Ve.l),Ne=o(Pe.opacity,Ve.opacity);return function(dt){return Pe.h=Qe(dt),Pe.c=Fe(dt),Pe.l=Le(dt),Pe.opacity=Ne(dt),Pe+""}}}var pe=fe(t),ye=fe(o);function Te(xe){return function Pe(Ve){Ve=+Ve;function Qe(Fe,Le){var Ne=xe((Fe=v.cubehelix(Fe)).h,(Le=v.cubehelix(Le)).h),dt=o(Fe.s,Le.s),Dt=o(Fe.l,Le.l),Xt=o(Fe.opacity,Le.opacity);return function(At){return Fe.h=Ne(At),Fe.s=dt(At),Fe.l=Dt(Math.pow(At,Ve)),Fe.opacity=Xt(At),Fe+""}}return Qe.gamma=Pe,Qe}(1)}var _e=Te(t),De=Te(o);function Be(xe,Pe){for(var Ve=0,Qe=Pe.length-1,Fe=Pe[0],Le=new Array(Qe<0?0:Qe);Ve<Qe;)Le[Ve]=xe(Fe,Fe=Pe[++Ve]);return function(Ne){var dt=Math.max(0,Math.min(Qe-1,Math.floor(Ne*=Qe)));return Le[dt](Ne-dt)}}function Ue(xe,Pe){for(var Ve=new Array(Pe),Qe=0;Qe<Pe;++Qe)Ve[Qe]=xe(Qe/(Pe-1));return Ve}w.interpolate=k,w.interpolateArray=l,w.interpolateBasis=T,w.interpolateBasisClosed=e,w.interpolateCubehelix=_e,w.interpolateCubehelixLong=De,w.interpolateDate=s,w.interpolateDiscrete=P,w.interpolateHcl=pe,w.interpolateHclLong=ye,w.interpolateHsl=ie,w.interpolateHslLong=le,w.interpolateHue=z,w.interpolateLab=ge,w.interpolateNumber=A,w.interpolateNumberArray=c,w.interpolateObject=m,w.interpolateRgb=i,w.interpolateRgbBasis=p,w.interpolateRgbBasisClosed=y,w.interpolateRound=I,w.interpolateString=S,w.interpolateTransformCss=re,w.interpolateTransformSvg=se,w.interpolateZoom=ee,w.piecewise=Be,w.quantize=Ue,Object.defineProperty(w,"__esModule",{value:!0})})},{"d3-color":109}],117:[function(d,ne,ae){(function(w,v){typeof ae=="object"&&typeof ne<"u"?v(ae):(w=w||self,v(w.d3=w.d3||{}))})(this,function(w){var v=Math.PI,M=2*v,T=1e-6,e=M-T;function a(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function n(){return new a}a.prototype=n.prototype={constructor:a,moveTo:function(r,t){this._+="M"+(this._x0=this._x1=+r)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(r,t){this._+="L"+(this._x1=+r)+","+(this._y1=+t)},quadraticCurveTo:function(r,t,f,o){this._+="Q"+ +r+","+ +t+","+(this._x1=+f)+","+(this._y1=+o)},bezierCurveTo:function(r,t,f,o,i,g){this._+="C"+ +r+","+ +t+","+ +f+","+ +o+","+(this._x1=+i)+","+(this._y1=+g)},arcTo:function(r,t,f,o,i){r=+r,t=+t,f=+f,o=+o,i=+i;var g=this._x1,p=this._y1,y=f-r,c=o-t,b=g-r,l=p-t,_=b*b+l*l;if(i<0)throw new Error("negative radius: "+i);if(this._x1===null)this._+="M"+(this._x1=r)+","+(this._y1=t);else if(_>T)if(!(Math.abs(l*y-c*b)>T)||!i)this._+="L"+(this._x1=r)+","+(this._y1=t);else{var s=f-g,A=o-p,m=y*y+c*c,h=s*s+A*A,x=Math.sqrt(m),u=Math.sqrt(_),L=i*Math.tan((v-Math.acos((m+_-h)/(2*x*u)))/2),S=L/u,k=L/x;Math.abs(S-1)>T&&(this._+="L"+(r+S*b)+","+(t+S*l)),this._+="A"+i+","+i+",0,0,"+ +(l*s>b*A)+","+(this._x1=r+k*y)+","+(this._y1=t+k*c)}},arc:function(r,t,f,o,i,g){r=+r,t=+t,f=+f,g=!!g;var p=f*Math.cos(o),y=f*Math.sin(o),c=r+p,b=t+y,l=1^g,_=g?o-i:i-o;if(f<0)throw new Error("negative radius: "+f);this._x1===null?this._+="M"+c+","+b:(Math.abs(this._x1-c)>T||Math.abs(this._y1-b)>T)&&(this._+="L"+c+","+b),f&&(_<0&&(_=_%M+M),_>e?this._+="A"+f+","+f+",0,1,"+l+","+(r-p)+","+(t-y)+"A"+f+","+f+",0,1,"+l+","+(this._x1=c)+","+(this._y1=b):_>T&&(this._+="A"+f+","+f+",0,"+ +(_>=v)+","+l+","+(this._x1=r+f*Math.cos(i))+","+(this._y1=t+f*Math.sin(i))))},rect:function(r,t,f,o){this._+="M"+(this._x0=this._x1=+r)+","+(this._y0=this._y1=+t)+"h"+ +f+"v"+ +o+"h"+-f+"Z"},toString:function(){return this._}},w.path=n,Object.defineProperty(w,"__esModule",{value:!0})})},{}],118:[function(d,ne,ae){(function(w,v){typeof ae=="object"&&typeof ne<"u"?v(ae):(w=w||self,v(w.d3=w.d3||{}))})(this,function(w){function v(x){var u=+this._x.call(null,x),L=+this._y.call(null,x);return M(this.cover(u,L),u,L,x)}function M(x,u,L,S){if(isNaN(u)||isNaN(L))return x;var k,P=x._root,z={data:S},I=x._x0,D=x._y0,R=x._x1,O=x._y1,F,V,G,J,Z,Y,j,re;if(!P)return x._root=z,x;for(;P.length;)if((Z=u>=(F=(I+R)/2))?I=F:R=F,(Y=L>=(V=(D+O)/2))?D=V:O=V,k=P,!(P=P[j=Y<<1|Z]))return k[j]=z,x;if(G=+x._x.call(null,P.data),J=+x._y.call(null,P.data),u===G&&L===J)return z.next=P,k?k[j]=z:x._root=z,x;do k=k?k[j]=new Array(4):x._root=new Array(4),(Z=u>=(F=(I+R)/2))?I=F:R=F,(Y=L>=(V=(D+O)/2))?D=V:O=V;while((j=Y<<1|Z)===(re=(J>=V)<<1|G>=F));return k[re]=P,k[j]=z,x}function T(x){var u,L,S=x.length,k,P,z=new Array(S),I=new Array(S),D=1/0,R=1/0,O=-1/0,F=-1/0;for(L=0;L<S;++L)isNaN(k=+this._x.call(null,u=x[L]))||isNaN(P=+this._y.call(null,u))||(z[L]=k,I[L]=P,k<D&&(D=k),k>O&&(O=k),P<R&&(R=P),P>F&&(F=P));if(D>O||R>F)return this;for(this.cover(D,R).cover(O,F),L=0;L<S;++L)M(this,z[L],I[L],x[L]);return this}function e(x,u){if(isNaN(x=+x)||isNaN(u=+u))return this;var L=this._x0,S=this._y0,k=this._x1,P=this._y1;if(isNaN(L))k=(L=Math.floor(x))+1,P=(S=Math.floor(u))+1;else{for(var z=k-L,I=this._root,D,R;L>x||x>=k||S>u||u>=P;)switch(R=(u<S)<<1|x<L,D=new Array(4),D[R]=I,I=D,z*=2,R){case 0:k=L+z,P=S+z;break;case 1:L=k-z,P=S+z;break;case 2:k=L+z,S=P-z;break;case 3:L=k-z,S=P-z;break}this._root&&this._root.length&&(this._root=I)}return this._x0=L,this._y0=S,this._x1=k,this._y1=P,this}function a(){var x=[];return this.visit(function(u){if(!u.length)do x.push(u.data);while(u=u.next)}),x}function n(x){return arguments.length?this.cover(+x[0][0],+x[0][1]).cover(+x[1][0],+x[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function r(x,u,L,S,k){this.node=x,this.x0=u,this.y0=L,this.x1=S,this.y1=k}function t(x,u,L){var S,k=this._x0,P=this._y0,z,I,D,R,O=this._x1,F=this._y1,V=[],G=this._root,J,Z;for(G&&V.push(new r(G,k,P,O,F)),L==null?L=1/0:(k=x-L,P=u-L,O=x+L,F=u+L,L*=L);J=V.pop();)if(!(!(G=J.node)||(z=J.x0)>O||(I=J.y0)>F||(D=J.x1)<k||(R=J.y1)<P))if(G.length){var Y=(z+D)/2,j=(I+R)/2;V.push(new r(G[3],Y,j,D,R),new r(G[2],z,j,Y,R),new r(G[1],Y,I,D,j),new r(G[0],z,I,Y,j)),(Z=(u>=j)<<1|x>=Y)&&(J=V[V.length-1],V[V.length-1]=V[V.length-1-Z],V[V.length-1-Z]=J)}else{var re=x-+this._x.call(null,G.data),se=u-+this._y.call(null,G.data),oe=re*re+se*se;if(oe<L){var N=Math.sqrt(L=oe);k=x-N,P=u-N,O=x+N,F=u+N,S=G.data}}return S}function f(x){if(isNaN(O=+this._x.call(null,x))||isNaN(F=+this._y.call(null,x)))return this;var u,L=this._root,S,k,P,z=this._x0,I=this._y0,D=this._x1,R=this._y1,O,F,V,G,J,Z,Y,j;if(!L)return this;if(L.length)for(;;){if((J=O>=(V=(z+D)/2))?z=V:D=V,(Z=F>=(G=(I+R)/2))?I=G:R=G,u=L,!(L=L[Y=Z<<1|J]))return this;if(!L.length)break;(u[Y+1&3]||u[Y+2&3]||u[Y+3&3])&&(S=u,j=Y)}for(;L.data!==x;)if(k=L,!(L=L.next))return this;return(P=L.next)&&delete L.next,k?(P?k.next=P:delete k.next,this):u?(P?u[Y]=P:delete u[Y],(L=u[0]||u[1]||u[2]||u[3])&&L===(u[3]||u[2]||u[1]||u[0])&&!L.length&&(S?S[j]=L:this._root=L),this):(this._root=P,this)}function o(x){for(var u=0,L=x.length;u<L;++u)this.remove(x[u]);return this}function i(){return this._root}function g(){var x=0;return this.visit(function(u){if(!u.length)do++x;while(u=u.next)}),x}function p(x){var u=[],L,S=this._root,k,P,z,I,D;for(S&&u.push(new r(S,this._x0,this._y0,this._x1,this._y1));L=u.pop();)if(!x(S=L.node,P=L.x0,z=L.y0,I=L.x1,D=L.y1)&&S.length){var R=(P+I)/2,O=(z+D)/2;(k=S[3])&&u.push(new r(k,R,O,I,D)),(k=S[2])&&u.push(new r(k,P,O,R,D)),(k=S[1])&&u.push(new r(k,R,z,I,O)),(k=S[0])&&u.push(new r(k,P,z,R,O))}return this}function y(x){var u=[],L=[],S;for(this._root&&u.push(new r(this._root,this._x0,this._y0,this._x1,this._y1));S=u.pop();){var k=S.node;if(k.length){var P,z=S.x0,I=S.y0,D=S.x1,R=S.y1,O=(z+D)/2,F=(I+R)/2;(P=k[0])&&u.push(new r(P,z,I,O,F)),(P=k[1])&&u.push(new r(P,O,I,D,F)),(P=k[2])&&u.push(new r(P,z,F,O,R)),(P=k[3])&&u.push(new r(P,O,F,D,R))}L.push(S)}for(;S=L.pop();)x(S.node,S.x0,S.y0,S.x1,S.y1);return this}function c(x){return x[0]}function b(x){return arguments.length?(this._x=x,this):this._x}function l(x){return x[1]}function _(x){return arguments.length?(this._y=x,this):this._y}function s(x,u,L){var S=new A(u??c,L??l,NaN,NaN,NaN,NaN);return x==null?S:S.addAll(x)}function A(x,u,L,S,k,P){this._x=x,this._y=u,this._x0=L,this._y0=S,this._x1=k,this._y1=P,this._root=void 0}function m(x){for(var u={data:x.data},L=u;x=x.next;)L=L.next={data:x.data};return u}var h=s.prototype=A.prototype;h.copy=function(){var x=new A(this._x,this._y,this._x0,this._y0,this._x1,this._y1),u=this._root,L,S;if(!u)return x;if(!u.length)return x._root=m(u),x;for(L=[{source:u,target:x._root=new Array(4)}];u=L.pop();)for(var k=0;k<4;++k)(S=u.source[k])&&(S.length?L.push({source:S,target:u.target[k]=new Array(4)}):u.target[k]=m(S));return x},h.add=v,h.addAll=T,h.cover=e,h.data=a,h.extent=n,h.find=t,h.remove=f,h.removeAll=o,h.root=i,h.size=g,h.visit=p,h.visitAfter=y,h.x=b,h.y=_,w.quadtree=s,Object.defineProperty(w,"__esModule",{value:!0})})},{}],119:[function(d,ne,ae){(function(w,v){typeof ae=="object"&&typeof ne<"u"?v(ae,d("d3-path")):(w=w||self,v(w.d3=w.d3||{},w.d3))})(this,function(w,v){function M(et){return function(){return et}}var T=Math.abs,e=Math.atan2,a=Math.cos,n=Math.max,r=Math.min,t=Math.sin,f=Math.sqrt,o=1e-12,i=Math.PI,g=i/2,p=2*i;function y(et){return et>1?0:et<-1?i:Math.acos(et)}function c(et){return et>=1?g:et<=-1?-g:Math.asin(et)}function b(et){return et.innerRadius}function l(et){return et.outerRadius}function _(et){return et.startAngle}function s(et){return et.endAngle}function A(et){return et&&et.padAngle}function m(et,Lt,Zt,sr,Ir,Zr,Pr,wr){var Nr=Zt-et,Sn=sr-Lt,_n=Pr-Ir,Wn=wr-Zr,Ln=Wn*Nr-_n*Sn;if(!(Ln*Ln<o))return Ln=(_n*(Lt-Zr)-Wn*(et-Ir))/Ln,[et+Ln*Nr,Lt+Ln*Sn]}function h(et,Lt,Zt,sr,Ir,Zr,Pr){var wr=et-Zt,Nr=Lt-sr,Sn=(Pr?Zr:-Zr)/f(wr*wr+Nr*Nr),_n=Sn*Nr,Wn=-Sn*wr,Ln=et+_n,Xn=Lt+Wn,Kn=Zt+_n,Aa=sr+Wn,Ta=(Ln+Kn)/2,oi=(Xn+Aa)/2,$a=Kn-Ln,Va=Aa-Xn,ti=$a*$a+Va*Va,Mr=Ir-Zr,vn=Ln*Aa-Kn*Xn,fn=(Va<0?-1:1)*f(n(0,Mr*Mr*ti-vn*vn)),An=(vn*Va-$a*fn)/ti,Gn=(-vn*$a-Va*fn)/ti,ia=(vn*Va+$a*fn)/ti,Yn=(-vn*$a+Va*fn)/ti,zn=An-Ta,ea=Gn-oi,wa=ia-Ta,si=Yn-oi;return zn*zn+ea*ea>wa*wa+si*si&&(An=ia,Gn=Yn),{cx:An,cy:Gn,x01:-_n,y01:-Wn,x11:An*(Ir/Mr-1),y11:Gn*(Ir/Mr-1)}}function x(){var et=b,Lt=l,Zt=M(0),sr=null,Ir=_,Zr=s,Pr=A,wr=null;function Nr(){var Sn,_n,Wn=+et.apply(this,arguments),Ln=+Lt.apply(this,arguments),Xn=Ir.apply(this,arguments)-g,Kn=Zr.apply(this,arguments)-g,Aa=T(Kn-Xn),Ta=Kn>Xn;if(wr||(wr=Sn=v.path()),Ln<Wn&&(_n=Ln,Ln=Wn,Wn=_n),!(Ln>o))wr.moveTo(0,0);else if(Aa>p-o)wr.moveTo(Ln*a(Xn),Ln*t(Xn)),wr.arc(0,0,Ln,Xn,Kn,!Ta),Wn>o&&(wr.moveTo(Wn*a(Kn),Wn*t(Kn)),wr.arc(0,0,Wn,Kn,Xn,Ta));else{var oi=Xn,$a=Kn,Va=Xn,ti=Kn,Mr=Aa,vn=Aa,fn=Pr.apply(this,arguments)/2,An=fn>o&&(sr?+sr.apply(this,arguments):f(Wn*Wn+Ln*Ln)),Gn=r(T(Ln-Wn)/2,+Zt.apply(this,arguments)),ia=Gn,Yn=Gn,zn,ea;if(An>o){var wa=c(An/Wn*t(fn)),si=c(An/Ln*t(fn));(Mr-=wa*2)>o?(wa*=Ta?1:-1,Va+=wa,ti-=wa):(Mr=0,Va=ti=(Xn+Kn)/2),(vn-=si*2)>o?(si*=Ta?1:-1,oi+=si,$a-=si):(vn=0,oi=$a=(Xn+Kn)/2)}var Ft=Ln*a(oi),cr=Ln*t(oi),$r=Wn*a(ti),rn=Wn*t(ti);if(Gn>o){var sn=Ln*a($a),kn=Ln*t($a),mn=Wn*a(Va),un=Wn*t(Va),yr;if(Aa<i&&(yr=m(Ft,cr,mn,un,sn,kn,$r,rn))){var gr=Ft-yr[0],Dr=cr-yr[1],dn=sn-yr[0],Bn=kn-yr[1],ta=1/t(y((gr*dn+Dr*Bn)/(f(gr*gr+Dr*Dr)*f(dn*dn+Bn*Bn)))/2),bn=f(yr[0]*yr[0]+yr[1]*yr[1]);ia=r(Gn,(Wn-bn)/(ta-1)),Yn=r(Gn,(Ln-bn)/(ta+1))}}vn>o?Yn>o?(zn=h(mn,un,Ft,cr,Ln,Yn,Ta),ea=h(sn,kn,$r,rn,Ln,Yn,Ta),wr.moveTo(zn.cx+zn.x01,zn.cy+zn.y01),Yn<Gn?wr.arc(zn.cx,zn.cy,Yn,e(zn.y01,zn.x01),e(ea.y01,ea.x01),!Ta):(wr.arc(zn.cx,zn.cy,Yn,e(zn.y01,zn.x01),e(zn.y11,zn.x11),!Ta),wr.arc(0,0,Ln,e(zn.cy+zn.y11,zn.cx+zn.x11),e(ea.cy+ea.y11,ea.cx+ea.x11),!Ta),wr.arc(ea.cx,ea.cy,Yn,e(ea.y11,ea.x11),e(ea.y01,ea.x01),!Ta))):(wr.moveTo(Ft,cr),wr.arc(0,0,Ln,oi,$a,!Ta)):wr.moveTo(Ft,cr),!(Wn>o)||!(Mr>o)?wr.lineTo($r,rn):ia>o?(zn=h($r,rn,sn,kn,Wn,-ia,Ta),ea=h(Ft,cr,mn,un,Wn,-ia,Ta),wr.lineTo(zn.cx+zn.x01,zn.cy+zn.y01),ia<Gn?wr.arc(zn.cx,zn.cy,ia,e(zn.y01,zn.x01),e(ea.y01,ea.x01),!Ta):(wr.arc(zn.cx,zn.cy,ia,e(zn.y01,zn.x01),e(zn.y11,zn.x11),!Ta),wr.arc(0,0,Wn,e(zn.cy+zn.y11,zn.cx+zn.x11),e(ea.cy+ea.y11,ea.cx+ea.x11),Ta),wr.arc(ea.cx,ea.cy,ia,e(ea.y11,ea.x11),e(ea.y01,ea.x01),!Ta))):wr.arc(0,0,Wn,ti,Va,Ta)}if(wr.closePath(),Sn)return wr=null,Sn+""||null}return Nr.centroid=function(){var Sn=(+et.apply(this,arguments)+ +Lt.apply(this,arguments))/2,_n=(+Ir.apply(this,arguments)+ +Zr.apply(this,arguments))/2-i/2;return[a(_n)*Sn,t(_n)*Sn]},Nr.innerRadius=function(Sn){return arguments.length?(et=typeof Sn=="function"?Sn:M(+Sn),Nr):et},Nr.outerRadius=function(Sn){return arguments.length?(Lt=typeof Sn=="function"?Sn:M(+Sn),Nr):Lt},Nr.cornerRadius=function(Sn){return arguments.length?(Zt=typeof Sn=="function"?Sn:M(+Sn),Nr):Zt},Nr.padRadius=function(Sn){return arguments.length?(sr=Sn==null?null:typeof Sn=="function"?Sn:M(+Sn),Nr):sr},Nr.startAngle=function(Sn){return arguments.length?(Ir=typeof Sn=="function"?Sn:M(+Sn),Nr):Ir},Nr.endAngle=function(Sn){return arguments.length?(Zr=typeof Sn=="function"?Sn:M(+Sn),Nr):Zr},Nr.padAngle=function(Sn){return arguments.length?(Pr=typeof Sn=="function"?Sn:M(+Sn),Nr):Pr},Nr.context=function(Sn){return arguments.length?(wr=Sn??null,Nr):wr},Nr}function u(et){this._context=et}u.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(et,Lt){switch(et=+et,Lt=+Lt,this._point){case 0:this._point=1,this._line?this._context.lineTo(et,Lt):this._context.moveTo(et,Lt);break;case 1:this._point=2;default:this._context.lineTo(et,Lt);break}}};function L(et){return new u(et)}function S(et){return et[0]}function k(et){return et[1]}function P(){var et=S,Lt=k,Zt=M(!0),sr=null,Ir=L,Zr=null;function Pr(wr){var Nr,Sn=wr.length,_n,Wn=!1,Ln;for(sr==null&&(Zr=Ir(Ln=v.path())),Nr=0;Nr<=Sn;++Nr)!(Nr<Sn&&Zt(_n=wr[Nr],Nr,wr))===Wn&&((Wn=!Wn)?Zr.lineStart():Zr.lineEnd()),Wn&&Zr.point(+et(_n,Nr,wr),+Lt(_n,Nr,wr));if(Ln)return Zr=null,Ln+""||null}return Pr.x=function(wr){return arguments.length?(et=typeof wr=="function"?wr:M(+wr),Pr):et},Pr.y=function(wr){return arguments.length?(Lt=typeof wr=="function"?wr:M(+wr),Pr):Lt},Pr.defined=function(wr){return arguments.length?(Zt=typeof wr=="function"?wr:M(!!wr),Pr):Zt},Pr.curve=function(wr){return arguments.length?(Ir=wr,sr!=null&&(Zr=Ir(sr)),Pr):Ir},Pr.context=function(wr){return arguments.length?(wr==null?sr=Zr=null:Zr=Ir(sr=wr),Pr):sr},Pr}function z(){var et=S,Lt=null,Zt=M(0),sr=k,Ir=M(!0),Zr=null,Pr=L,wr=null;function Nr(_n){var Wn,Ln,Xn,Kn=_n.length,Aa,Ta=!1,oi,$a=new Array(Kn),Va=new Array(Kn);for(Zr==null&&(wr=Pr(oi=v.path())),Wn=0;Wn<=Kn;++Wn){if(!(Wn<Kn&&Ir(Aa=_n[Wn],Wn,_n))===Ta)if(Ta=!Ta)Ln=Wn,wr.areaStart(),wr.lineStart();else{for(wr.lineEnd(),wr.lineStart(),Xn=Wn-1;Xn>=Ln;--Xn)wr.point($a[Xn],Va[Xn]);wr.lineEnd(),wr.areaEnd()}Ta&&($a[Wn]=+et(Aa,Wn,_n),Va[Wn]=+Zt(Aa,Wn,_n),wr.point(Lt?+Lt(Aa,Wn,_n):$a[Wn],sr?+sr(Aa,Wn,_n):Va[Wn]))}if(oi)return wr=null,oi+""||null}function Sn(){return P().defined(Ir).curve(Pr).context(Zr)}return Nr.x=function(_n){return arguments.length?(et=typeof _n=="function"?_n:M(+_n),Lt=null,Nr):et},Nr.x0=function(_n){return arguments.length?(et=typeof _n=="function"?_n:M(+_n),Nr):et},Nr.x1=function(_n){return arguments.length?(Lt=_n==null?null:typeof _n=="function"?_n:M(+_n),Nr):Lt},Nr.y=function(_n){return arguments.length?(Zt=typeof _n=="function"?_n:M(+_n),sr=null,Nr):Zt},Nr.y0=function(_n){return arguments.length?(Zt=typeof _n=="function"?_n:M(+_n),Nr):Zt},Nr.y1=function(_n){return arguments.length?(sr=_n==null?null:typeof _n=="function"?_n:M(+_n),Nr):sr},Nr.lineX0=Nr.lineY0=function(){return Sn().x(et).y(Zt)},Nr.lineY1=function(){return Sn().x(et).y(sr)},Nr.lineX1=function(){return Sn().x(Lt).y(Zt)},Nr.defined=function(_n){return arguments.length?(Ir=typeof _n=="function"?_n:M(!!_n),Nr):Ir},Nr.curve=function(_n){return arguments.length?(Pr=_n,Zr!=null&&(wr=Pr(Zr)),Nr):Pr},Nr.context=function(_n){return arguments.length?(_n==null?Zr=wr=null:wr=Pr(Zr=_n),Nr):Zr},Nr}function I(et,Lt){return Lt<et?-1:Lt>et?1:Lt>=et?0:NaN}function D(et){return et}function R(){var et=D,Lt=I,Zt=null,sr=M(0),Ir=M(p),Zr=M(0);function Pr(wr){var Nr,Sn=wr.length,_n,Wn,Ln=0,Xn=new Array(Sn),Kn=new Array(Sn),Aa=+sr.apply(this,arguments),Ta=Math.min(p,Math.max(-p,Ir.apply(this,arguments)-Aa)),oi,$a=Math.min(Math.abs(Ta)/Sn,Zr.apply(this,arguments)),Va=$a*(Ta<0?-1:1),ti;for(Nr=0;Nr<Sn;++Nr)(ti=Kn[Xn[Nr]=Nr]=+et(wr[Nr],Nr,wr))>0&&(Ln+=ti);for(Lt!=null?Xn.sort(function(Mr,vn){return Lt(Kn[Mr],Kn[vn])}):Zt!=null&&Xn.sort(function(Mr,vn){return Zt(wr[Mr],wr[vn])}),Nr=0,Wn=Ln?(Ta-Sn*Va)/Ln:0;Nr<Sn;++Nr,Aa=oi)_n=Xn[Nr],ti=Kn[_n],oi=Aa+(ti>0?ti*Wn:0)+Va,Kn[_n]={data:wr[_n],index:Nr,value:ti,startAngle:Aa,endAngle:oi,padAngle:$a};return Kn}return Pr.value=function(wr){return arguments.length?(et=typeof wr=="function"?wr:M(+wr),Pr):et},Pr.sortValues=function(wr){return arguments.length?(Lt=wr,Zt=null,Pr):Lt},Pr.sort=function(wr){return arguments.length?(Zt=wr,Lt=null,Pr):Zt},Pr.startAngle=function(wr){return arguments.length?(sr=typeof wr=="function"?wr:M(+wr),Pr):sr},Pr.endAngle=function(wr){return arguments.length?(Ir=typeof wr=="function"?wr:M(+wr),Pr):Ir},Pr.padAngle=function(wr){return arguments.length?(Zr=typeof wr=="function"?wr:M(+wr),Pr):Zr},Pr}var O=V(L);function F(et){this._curve=et}F.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(et,Lt){this._curve.point(Lt*Math.sin(et),Lt*-Math.cos(et))}};function V(et){function Lt(Zt){return new F(et(Zt))}return Lt._curve=et,Lt}function G(et){var Lt=et.curve;return et.angle=et.x,delete et.x,et.radius=et.y,delete et.y,et.curve=function(Zt){return arguments.length?Lt(V(Zt)):Lt()._curve},et}function J(){return G(P().curve(O))}function Z(){var et=z().curve(O),Lt=et.curve,Zt=et.lineX0,sr=et.lineX1,Ir=et.lineY0,Zr=et.lineY1;return et.angle=et.x,delete et.x,et.startAngle=et.x0,delete et.x0,et.endAngle=et.x1,delete et.x1,et.radius=et.y,delete et.y,et.innerRadius=et.y0,delete et.y0,et.outerRadius=et.y1,delete et.y1,et.lineStartAngle=function(){return G(Zt())},delete et.lineX0,et.lineEndAngle=function(){return G(sr())},delete et.lineX1,et.lineInnerRadius=function(){return G(Ir())},delete et.lineY0,et.lineOuterRadius=function(){return G(Zr())},delete et.lineY1,et.curve=function(Pr){return arguments.length?Lt(V(Pr)):Lt()._curve},et}function Y(et,Lt){return[(Lt=+Lt)*Math.cos(et-=Math.PI/2),Lt*Math.sin(et)]}var j=Array.prototype.slice;function re(et){return et.source}function se(et){return et.target}function oe(et){var Lt=re,Zt=se,sr=S,Ir=k,Zr=null;function Pr(){var wr,Nr=j.call(arguments),Sn=Lt.apply(this,Nr),_n=Zt.apply(this,Nr);if(Zr||(Zr=wr=v.path()),et(Zr,+sr.apply(this,(Nr[0]=Sn,Nr)),+Ir.apply(this,Nr),+sr.apply(this,(Nr[0]=_n,Nr)),+Ir.apply(this,Nr)),wr)return Zr=null,wr+""||null}return Pr.source=function(wr){return arguments.length?(Lt=wr,Pr):Lt},Pr.target=function(wr){return arguments.length?(Zt=wr,Pr):Zt},Pr.x=function(wr){return arguments.length?(sr=typeof wr=="function"?wr:M(+wr),Pr):sr},Pr.y=function(wr){return arguments.length?(Ir=typeof wr=="function"?wr:M(+wr),Pr):Ir},Pr.context=function(wr){return arguments.length?(Zr=wr??null,Pr):Zr},Pr}function N(et,Lt,Zt,sr,Ir){et.moveTo(Lt,Zt),et.bezierCurveTo(Lt=(Lt+sr)/2,Zt,Lt,Ir,sr,Ir)}function U(et,Lt,Zt,sr,Ir){et.moveTo(Lt,Zt),et.bezierCurveTo(Lt,Zt=(Zt+Ir)/2,sr,Zt,sr,Ir)}function q(et,Lt,Zt,sr,Ir){var Zr=Y(Lt,Zt),Pr=Y(Lt,Zt=(Zt+Ir)/2),wr=Y(sr,Zt),Nr=Y(sr,Ir);et.moveTo(Zr[0],Zr[1]),et.bezierCurveTo(Pr[0],Pr[1],wr[0],wr[1],Nr[0],Nr[1])}function Q(){return oe(N)}function W(){return oe(U)}function X(){var et=oe(q);return et.angle=et.x,delete et.x,et.radius=et.y,delete et.y,et}var ee={draw:function(et,Lt){var Zt=Math.sqrt(Lt/i);et.moveTo(Zt,0),et.arc(0,0,Zt,0,p)}},te={draw:function(et,Lt){var Zt=Math.sqrt(Lt/5)/2;et.moveTo(-3*Zt,-Zt),et.lineTo(-Zt,-Zt),et.lineTo(-Zt,-3*Zt),et.lineTo(Zt,-3*Zt),et.lineTo(Zt,-Zt),et.lineTo(3*Zt,-Zt),et.lineTo(3*Zt,Zt),et.lineTo(Zt,Zt),et.lineTo(Zt,3*Zt),et.lineTo(-Zt,3*Zt),et.lineTo(-Zt,Zt),et.lineTo(-3*Zt,Zt),et.closePath()}},ie=Math.sqrt(1/3),le=ie*2,ge={draw:function(et,Lt){var Zt=Math.sqrt(Lt/le),sr=Zt*ie;et.moveTo(0,-Zt),et.lineTo(sr,0),et.lineTo(0,Zt),et.lineTo(-sr,0),et.closePath()}},fe=.8908130915292852,pe=Math.sin(i/10)/Math.sin(7*i/10),ye=Math.sin(p/10)*pe,Te=-Math.cos(p/10)*pe,_e={draw:function(et,Lt){var Zt=Math.sqrt(Lt*fe),sr=ye*Zt,Ir=Te*Zt;et.moveTo(0,-Zt),et.lineTo(sr,Ir);for(var Zr=1;Zr<5;++Zr){var Pr=p*Zr/5,wr=Math.cos(Pr),Nr=Math.sin(Pr);et.lineTo(Nr*Zt,-wr*Zt),et.lineTo(wr*sr-Nr*Ir,Nr*sr+wr*Ir)}et.closePath()}},De={draw:function(et,Lt){var Zt=Math.sqrt(Lt),sr=-Zt/2;et.rect(sr,sr,Zt,Zt)}},Be=Math.sqrt(3),Ue={draw:function(et,Lt){var Zt=-Math.sqrt(Lt/(Be*3));et.moveTo(0,Zt*2),et.lineTo(-Be*Zt,-Zt),et.lineTo(Be*Zt,-Zt),et.closePath()}},xe=-.5,Pe=Math.sqrt(3)/2,Ve=1/Math.sqrt(12),Qe=(Ve/2+1)*3,Fe={draw:function(et,Lt){var Zt=Math.sqrt(Lt/Qe),sr=Zt/2,Ir=Zt*Ve,Zr=sr,Pr=Zt*Ve+Zt,wr=-Zr,Nr=Pr;et.moveTo(sr,Ir),et.lineTo(Zr,Pr),et.lineTo(wr,Nr),et.lineTo(xe*sr-Pe*Ir,Pe*sr+xe*Ir),et.lineTo(xe*Zr-Pe*Pr,Pe*Zr+xe*Pr),et.lineTo(xe*wr-Pe*Nr,Pe*wr+xe*Nr),et.lineTo(xe*sr+Pe*Ir,xe*Ir-Pe*sr),et.lineTo(xe*Zr+Pe*Pr,xe*Pr-Pe*Zr),et.lineTo(xe*wr+Pe*Nr,xe*Nr-Pe*wr),et.closePath()}},Le=[ee,te,ge,De,_e,Ue,Fe];function Ne(){var et=M(ee),Lt=M(64),Zt=null;function sr(){var Ir;if(Zt||(Zt=Ir=v.path()),et.apply(this,arguments).draw(Zt,+Lt.apply(this,arguments)),Ir)return Zt=null,Ir+""||null}return sr.type=function(Ir){return arguments.length?(et=typeof Ir=="function"?Ir:M(Ir),sr):et},sr.size=function(Ir){return arguments.length?(Lt=typeof Ir=="function"?Ir:M(+Ir),sr):Lt},sr.context=function(Ir){return arguments.length?(Zt=Ir??null,sr):Zt},sr}function dt(){}function Dt(et,Lt,Zt){et._context.bezierCurveTo((2*et._x0+et._x1)/3,(2*et._y0+et._y1)/3,(et._x0+2*et._x1)/3,(et._y0+2*et._y1)/3,(et._x0+4*et._x1+Lt)/6,(et._y0+4*et._y1+Zt)/6)}function Xt(et){this._context=et}Xt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Dt(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(et,Lt){switch(et=+et,Lt=+Lt,this._point){case 0:this._point=1,this._line?this._context.lineTo(et,Lt):this._context.moveTo(et,Lt);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Dt(this,et,Lt);break}this._x0=this._x1,this._x1=et,this._y0=this._y1,this._y1=Lt}};function At(et){return new Xt(et)}function zt(et){this._context=et}zt.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(et,Lt){switch(et=+et,Lt=+Lt,this._point){case 0:this._point=1,this._x2=et,this._y2=Lt;break;case 1:this._point=2,this._x3=et,this._y3=Lt;break;case 2:this._point=3,this._x4=et,this._y4=Lt,this._context.moveTo((this._x0+4*this._x1+et)/6,(this._y0+4*this._y1+Lt)/6);break;default:Dt(this,et,Lt);break}this._x0=this._x1,this._x1=et,this._y0=this._y1,this._y1=Lt}};function Ut(et){return new zt(et)}function Ct(et){this._context=et}Ct.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(et,Lt){switch(et=+et,Lt=+Lt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var Zt=(this._x0+4*this._x1+et)/6,sr=(this._y0+4*this._y1+Lt)/6;this._line?this._context.lineTo(Zt,sr):this._context.moveTo(Zt,sr);break;case 3:this._point=4;default:Dt(this,et,Lt);break}this._x0=this._x1,this._x1=et,this._y0=this._y1,this._y1=Lt}};function Mt(et){return new Ct(et)}function rt(et,Lt){this._basis=new Xt(et),this._beta=Lt}rt.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var et=this._x,Lt=this._y,Zt=et.length-1;if(Zt>0)for(var sr=et[0],Ir=Lt[0],Zr=et[Zt]-sr,Pr=Lt[Zt]-Ir,wr=-1,Nr;++wr<=Zt;)Nr=wr/Zt,this._basis.point(this._beta*et[wr]+(1-this._beta)*(sr+Nr*Zr),this._beta*Lt[wr]+(1-this._beta)*(Ir+Nr*Pr));this._x=this._y=null,this._basis.lineEnd()},point:function(et,Lt){this._x.push(+et),this._y.push(+Lt)}};var ct=function et(Lt){function Zt(sr){return Lt===1?new Xt(sr):new rt(sr,Lt)}return Zt.beta=function(sr){return et(+sr)},Zt}(.85);function Ze(et,Lt,Zt){et._context.bezierCurveTo(et._x1+et._k*(et._x2-et._x0),et._y1+et._k*(et._y2-et._y0),et._x2+et._k*(et._x1-Lt),et._y2+et._k*(et._y1-Zt),et._x2,et._y2)}function ke(et,Lt){this._context=et,this._k=(1-Lt)/6}ke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ze(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(et,Lt){switch(et=+et,Lt=+Lt,this._point){case 0:this._point=1,this._line?this._context.lineTo(et,Lt):this._context.moveTo(et,Lt);break;case 1:this._point=2,this._x1=et,this._y1=Lt;break;case 2:this._point=3;default:Ze(this,et,Lt);break}this._x0=this._x1,this._x1=this._x2,this._x2=et,this._y0=this._y1,this._y1=this._y2,this._y2=Lt}};var Ge=function et(Lt){function Zt(sr){return new ke(sr,Lt)}return Zt.tension=function(sr){return et(+sr)},Zt}(0);function Je(et,Lt){this._context=et,this._k=(1-Lt)/6}Je.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(et,Lt){switch(et=+et,Lt=+Lt,this._point){case 0:this._point=1,this._x3=et,this._y3=Lt;break;case 1:this._point=2,this._context.moveTo(this._x4=et,this._y4=Lt);break;case 2:this._point=3,this._x5=et,this._y5=Lt;break;default:Ze(this,et,Lt);break}this._x0=this._x1,this._x1=this._x2,this._x2=et,this._y0=this._y1,this._y1=this._y2,this._y2=Lt}};var ot=function et(Lt){function Zt(sr){return new Je(sr,Lt)}return Zt.tension=function(sr){return et(+sr)},Zt}(0);function Pt(et,Lt){this._context=et,this._k=(1-Lt)/6}Pt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(et,Lt){switch(et=+et,Lt=+Lt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ze(this,et,Lt);break}this._x0=this._x1,this._x1=this._x2,this._x2=et,this._y0=this._y1,this._y1=this._y2,this._y2=Lt}};var _t=function et(Lt){function Zt(sr){return new Pt(sr,Lt)}return Zt.tension=function(sr){return et(+sr)},Zt}(0);function Bt(et,Lt,Zt){var sr=et._x1,Ir=et._y1,Zr=et._x2,Pr=et._y2;if(et._l01_a>o){var wr=2*et._l01_2a+3*et._l01_a*et._l12_a+et._l12_2a,Nr=3*et._l01_a*(et._l01_a+et._l12_a);sr=(sr*wr-et._x0*et._l12_2a+et._x2*et._l01_2a)/Nr,Ir=(Ir*wr-et._y0*et._l12_2a+et._y2*et._l01_2a)/Nr}if(et._l23_a>o){var Sn=2*et._l23_2a+3*et._l23_a*et._l12_a+et._l12_2a,_n=3*et._l23_a*(et._l23_a+et._l12_a);Zr=(Zr*Sn+et._x1*et._l23_2a-Lt*et._l12_2a)/_n,Pr=(Pr*Sn+et._y1*et._l23_2a-Zt*et._l12_2a)/_n}et._context.bezierCurveTo(sr,Ir,Zr,Pr,et._x2,et._y2)}function qt(et,Lt){this._context=et,this._alpha=Lt}qt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(et,Lt){if(et=+et,Lt=+Lt,this._point){var Zt=this._x2-et,sr=this._y2-Lt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Zt*Zt+sr*sr,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(et,Lt):this._context.moveTo(et,Lt);break;case 1:this._point=2;break;case 2:this._point=3;default:Bt(this,et,Lt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=et,this._y0=this._y1,this._y1=this._y2,this._y2=Lt}};var Ot=function et(Lt){function Zt(sr){return Lt?new qt(sr,Lt):new ke(sr,0)}return Zt.alpha=function(sr){return et(+sr)},Zt}(.5);function $t(et,Lt){this._context=et,this._alpha=Lt}$t.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(et,Lt){if(et=+et,Lt=+Lt,this._point){var Zt=this._x2-et,sr=this._y2-Lt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Zt*Zt+sr*sr,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=et,this._y3=Lt;break;case 1:this._point=2,this._context.moveTo(this._x4=et,this._y4=Lt);break;case 2:this._point=3,this._x5=et,this._y5=Lt;break;default:Bt(this,et,Lt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=et,this._y0=this._y1,this._y1=this._y2,this._y2=Lt}};var rr=function et(Lt){function Zt(sr){return Lt?new $t(sr,Lt):new Je(sr,0)}return Zt.alpha=function(sr){return et(+sr)},Zt}(.5);function er(et,Lt){this._context=et,this._alpha=Lt}er.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(et,Lt){if(et=+et,Lt=+Lt,this._point){var Zt=this._x2-et,sr=this._y2-Lt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Zt*Zt+sr*sr,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Bt(this,et,Lt);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=et,this._y0=this._y1,this._y1=this._y2,this._y2=Lt}};var pr=function et(Lt){function Zt(sr){return Lt?new er(sr,Lt):new Pt(sr,0)}return Zt.alpha=function(sr){return et(+sr)},Zt}(.5);function Xr(et){this._context=et}Xr.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(et,Lt){et=+et,Lt=+Lt,this._point?this._context.lineTo(et,Lt):(this._point=1,this._context.moveTo(et,Lt))}};function hn(et){return new Xr(et)}function Qr(et){return et<0?-1:1}function nt(et,Lt,Zt){var sr=et._x1-et._x0,Ir=Lt-et._x1,Zr=(et._y1-et._y0)/(sr||Ir<0&&-0),Pr=(Zt-et._y1)/(Ir||sr<0&&-0),wr=(Zr*Ir+Pr*sr)/(sr+Ir);return(Qr(Zr)+Qr(Pr))*Math.min(Math.abs(Zr),Math.abs(Pr),.5*Math.abs(wr))||0}function Ht(et,Lt){var Zt=et._x1-et._x0;return Zt?(3*(et._y1-et._y0)/Zt-Lt)/2:Lt}function Kt(et,Lt,Zt){var sr=et._x0,Ir=et._y0,Zr=et._x1,Pr=et._y1,wr=(Zr-sr)/3;et._context.bezierCurveTo(sr+wr,Ir+wr*Lt,Zr-wr,Pr-wr*Zt,Zr,Pr)}function Gt(et){this._context=et}Gt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Kt(this,this._t0,Ht(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(et,Lt){var Zt=NaN;if(et=+et,Lt=+Lt,!(et===this._x1&&Lt===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(et,Lt):this._context.moveTo(et,Lt);break;case 1:this._point=2;break;case 2:this._point=3,Kt(this,Ht(this,Zt=nt(this,et,Lt)),Zt);break;default:Kt(this,this._t0,Zt=nt(this,et,Lt));break}this._x0=this._x1,this._x1=et,this._y0=this._y1,this._y1=Lt,this._t0=Zt}}};function br(et){this._context=new tt(et)}(br.prototype=Object.create(Gt.prototype)).point=function(et,Lt){Gt.prototype.point.call(this,Lt,et)};function tt(et){this._context=et}tt.prototype={moveTo:function(et,Lt){this._context.moveTo(Lt,et)},closePath:function(){this._context.closePath()},lineTo:function(et,Lt){this._context.lineTo(Lt,et)},bezierCurveTo:function(et,Lt,Zt,sr,Ir,Zr){this._context.bezierCurveTo(Lt,et,sr,Zt,Zr,Ir)}};function je(et){return new Gt(et)}function st(et){return new br(et)}function ft(et){this._context=et}ft.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var et=this._x,Lt=this._y,Zt=et.length;if(Zt)if(this._line?this._context.lineTo(et[0],Lt[0]):this._context.moveTo(et[0],Lt[0]),Zt===2)this._context.lineTo(et[1],Lt[1]);else for(var sr=Me(et),Ir=Me(Lt),Zr=0,Pr=1;Pr<Zt;++Zr,++Pr)this._context.bezierCurveTo(sr[0][Zr],Ir[0][Zr],sr[1][Zr],Ir[1][Zr],et[Pr],Lt[Pr]);(this._line||this._line!==0&&Zt===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(et,Lt){this._x.push(+et),this._y.push(+Lt)}};function Me(et){var Lt,Zt=et.length-1,sr,Ir=new Array(Zt),Zr=new Array(Zt),Pr=new Array(Zt);for(Ir[0]=0,Zr[0]=2,Pr[0]=et[0]+2*et[1],Lt=1;Lt<Zt-1;++Lt)Ir[Lt]=1,Zr[Lt]=4,Pr[Lt]=4*et[Lt]+2*et[Lt+1];for(Ir[Zt-1]=2,Zr[Zt-1]=7,Pr[Zt-1]=8*et[Zt-1]+et[Zt],Lt=1;Lt<Zt;++Lt)sr=Ir[Lt]/Zr[Lt-1],Zr[Lt]-=sr,Pr[Lt]-=sr*Pr[Lt-1];for(Ir[Zt-1]=Pr[Zt-1]/Zr[Zt-1],Lt=Zt-2;Lt>=0;--Lt)Ir[Lt]=(Pr[Lt]-Ir[Lt+1])/Zr[Lt];for(Zr[Zt-1]=(et[Zt]+Ir[Zt-1])/2,Lt=0;Lt<Zt-1;++Lt)Zr[Lt]=2*et[Lt+1]-Ir[Lt+1];return[Ir,Zr]}function Se(et){return new ft(et)}function Ke(et,Lt){this._context=et,this._t=Lt}Ke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(et,Lt){switch(et=+et,Lt=+Lt,this._point){case 0:this._point=1,this._line?this._context.lineTo(et,Lt):this._context.moveTo(et,Lt);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,Lt),this._context.lineTo(et,Lt);else{var Zt=this._x*(1-this._t)+et*this._t;this._context.lineTo(Zt,this._y),this._context.lineTo(Zt,Lt)}break}}this._x=et,this._y=Lt}};function Xe(et){return new Ke(et,.5)}function it(et){return new Ke(et,0)}function pt(et){return new Ke(et,1)}function vt(et,Lt){if((Pr=et.length)>1)for(var Zt=1,sr,Ir,Zr=et[Lt[0]],Pr,wr=Zr.length;Zt<Pr;++Zt)for(Ir=Zr,Zr=et[Lt[Zt]],sr=0;sr<wr;++sr)Zr[sr][1]+=Zr[sr][0]=isNaN(Ir[sr][1])?Ir[sr][0]:Ir[sr][1]}function St(et){for(var Lt=et.length,Zt=new Array(Lt);--Lt>=0;)Zt[Lt]=Lt;return Zt}function kt(et,Lt){return et[Lt]}function Nt(){var et=M([]),Lt=St,Zt=vt,sr=kt;function Ir(Zr){var Pr=et.apply(this,arguments),wr,Nr=Zr.length,Sn=Pr.length,_n=new Array(Sn),Wn;for(wr=0;wr<Sn;++wr){for(var Ln=Pr[wr],Xn=_n[wr]=new Array(Nr),Kn=0,Aa;Kn<Nr;++Kn)Xn[Kn]=Aa=[0,+sr(Zr[Kn],Ln,Kn,Zr)],Aa.data=Zr[Kn];Xn.key=Ln}for(wr=0,Wn=Lt(_n);wr<Sn;++wr)_n[Wn[wr]].index=wr;return Zt(_n,Wn),_n}return Ir.keys=function(Zr){return arguments.length?(et=typeof Zr=="function"?Zr:M(j.call(Zr)),Ir):et},Ir.value=function(Zr){return arguments.length?(sr=typeof Zr=="function"?Zr:M(+Zr),Ir):sr},Ir.order=function(Zr){return arguments.length?(Lt=Zr==null?St:typeof Zr=="function"?Zr:M(j.call(Zr)),Ir):Lt},Ir.offset=function(Zr){return arguments.length?(Zt=Zr??vt,Ir):Zt},Ir}function nr(et,Lt){if((sr=et.length)>0){for(var Zt,sr,Ir=0,Zr=et[0].length,Pr;Ir<Zr;++Ir){for(Pr=Zt=0;Zt<sr;++Zt)Pr+=et[Zt][Ir][1]||0;if(Pr)for(Zt=0;Zt<sr;++Zt)et[Zt][Ir][1]/=Pr}vt(et,Lt)}}function fr(et,Lt){if((Nr=et.length)>0)for(var Zt,sr=0,Ir,Zr,Pr,wr,Nr,Sn=et[Lt[0]].length;sr<Sn;++sr)for(Pr=wr=0,Zt=0;Zt<Nr;++Zt)(Zr=(Ir=et[Lt[Zt]][sr])[1]-Ir[0])>0?(Ir[0]=Pr,Ir[1]=Pr+=Zr):Zr<0?(Ir[1]=wr,Ir[0]=wr+=Zr):(Ir[0]=0,Ir[1]=Zr)}function Hr(et,Lt){if((Ir=et.length)>0){for(var Zt=0,sr=et[Lt[0]],Ir,Zr=sr.length;Zt<Zr;++Zt){for(var Pr=0,wr=0;Pr<Ir;++Pr)wr+=et[Pr][Zt][1]||0;sr[Zt][1]+=sr[Zt][0]=-wr/2}vt(et,Lt)}}function Er(et,Lt){if(!(!((Pr=et.length)>0)||!((Zr=(Ir=et[Lt[0]]).length)>0))){for(var Zt=0,sr=1,Ir,Zr,Pr;sr<Zr;++sr){for(var wr=0,Nr=0,Sn=0;wr<Pr;++wr){for(var _n=et[Lt[wr]],Wn=_n[sr][1]||0,Ln=_n[sr-1][1]||0,Xn=(Wn-Ln)/2,Kn=0;Kn<wr;++Kn){var Aa=et[Lt[Kn]],Ta=Aa[sr][1]||0,oi=Aa[sr-1][1]||0;Xn+=Ta-oi}Nr+=Wn,Sn+=Xn*Wn}Ir[sr-1][1]+=Ir[sr-1][0]=Zt,Nr&&(Zt-=Sn/Nr)}Ir[sr-1][1]+=Ir[sr-1][0]=Zt,vt(et,Lt)}}function _r(et){var Lt=et.map(en);return St(et).sort(function(Zt,sr){return Lt[Zt]-Lt[sr]})}function en(et){for(var Lt=-1,Zt=0,sr=et.length,Ir,Zr=-1/0;++Lt<sr;)(Ir=+et[Lt][1])>Zr&&(Zr=Ir,Zt=Lt);return Zt}function dr(et){var Lt=et.map(xr);return St(et).sort(function(Zt,sr){return Lt[Zt]-Lt[sr]})}function xr(et){for(var Lt=0,Zt=-1,sr=et.length,Ir;++Zt<sr;)(Ir=+et[Zt][1])&&(Lt+=Ir);return Lt}function Ur(et){return dr(et).reverse()}function Yr(et){var Lt=et.length,Zt,sr,Ir=et.map(xr),Zr=_r(et),Pr=0,wr=0,Nr=[],Sn=[];for(Zt=0;Zt<Lt;++Zt)sr=Zr[Zt],Pr<wr?(Pr+=Ir[sr],Nr.push(sr)):(wr+=Ir[sr],Sn.push(sr));return Sn.reverse().concat(Nr)}function Ar(et){return St(et).reverse()}w.arc=x,w.area=z,w.areaRadial=Z,w.curveBasis=At,w.curveBasisClosed=Ut,w.curveBasisOpen=Mt,w.curveBundle=ct,w.curveCardinal=Ge,w.curveCardinalClosed=ot,w.curveCardinalOpen=_t,w.curveCatmullRom=Ot,w.curveCatmullRomClosed=rr,w.curveCatmullRomOpen=pr,w.curveLinear=L,w.curveLinearClosed=hn,w.curveMonotoneX=je,w.curveMonotoneY=st,w.curveNatural=Se,w.curveStep=Xe,w.curveStepAfter=pt,w.curveStepBefore=it,w.line=P,w.lineRadial=J,w.linkHorizontal=Q,w.linkRadial=X,w.linkVertical=W,w.pie=R,w.pointRadial=Y,w.radialArea=Z,w.radialLine=J,w.stack=Nt,w.stackOffsetDiverging=fr,w.stackOffsetExpand=nr,w.stackOffsetNone=vt,w.stackOffsetSilhouette=Hr,w.stackOffsetWiggle=Er,w.stackOrderAppearance=_r,w.stackOrderAscending=dr,w.stackOrderDescending=Ur,w.stackOrderInsideOut=Yr,w.stackOrderNone=St,w.stackOrderReverse=Ar,w.symbol=Ne,w.symbolCircle=ee,w.symbolCross=te,w.symbolDiamond=ge,w.symbolSquare=De,w.symbolStar=_e,w.symbolTriangle=Ue,w.symbolWye=Fe,w.symbols=Le,Object.defineProperty(w,"__esModule",{value:!0})})},{"d3-path":117}],120:[function(d,ne,ae){(function(w,v){typeof ae=="object"&&typeof ne<"u"?v(ae,d("d3-time")):(w=w||self,v(w.d3=w.d3||{},w.d3))})(this,function(w,v){function M(rt){if(0<=rt.y&&rt.y<100){var ct=new Date(-1,rt.m,rt.d,rt.H,rt.M,rt.S,rt.L);return ct.setFullYear(rt.y),ct}return new Date(rt.y,rt.m,rt.d,rt.H,rt.M,rt.S,rt.L)}function T(rt){if(0<=rt.y&&rt.y<100){var ct=new Date(Date.UTC(-1,rt.m,rt.d,rt.H,rt.M,rt.S,rt.L));return ct.setUTCFullYear(rt.y),ct}return new Date(Date.UTC(rt.y,rt.m,rt.d,rt.H,rt.M,rt.S,rt.L))}function e(rt,ct,Ze){return{y:rt,m:ct,d:Ze,H:0,M:0,S:0,L:0}}function a(rt){var ct=rt.dateTime,Ze=rt.date,ke=rt.time,Ge=rt.periods,Je=rt.days,ot=rt.shortDays,Pt=rt.months,_t=rt.shortMonths,Bt=g(Ge),qt=p(Ge),Ot=g(Je),$t=p(Je),rr=g(ot),er=p(ot),pr=g(Pt),Xr=p(Pt),hn=g(_t),Qr=p(_t),nt={a:pt,A:vt,b:St,B:kt,c:null,d:F,e:F,f:Y,H:V,I:G,j:J,L:Z,m:j,M:re,p:Nt,q:nr,Q:Ne,s:dt,S:se,u:oe,U:N,V:U,w:q,W:Q,x:null,X:null,y:W,Y:X,Z:ee,"%":Le},Ht={a:fr,A:Hr,b:Er,B:_r,c:null,d:te,e:te,f:pe,H:ie,I:le,j:ge,L:fe,m:ye,M:Te,p:en,q:dr,Q:Ne,s:dt,S:_e,u:De,U:Be,V:Ue,w:xe,W:Pe,x:null,X:null,y:Ve,Y:Qe,Z:Fe,"%":Le},Kt={a:st,A:ft,b:Me,B:Se,c:Ke,d:u,e:u,f:I,H:S,I:S,j:L,L:z,m:x,M:k,p:je,q:h,Q:R,s:O,S:P,u:c,U:b,V:l,w:y,W:_,x:Xe,X:it,y:A,Y:s,Z:m,"%":D};nt.x=Gt(Ze,nt),nt.X=Gt(ke,nt),nt.c=Gt(ct,nt),Ht.x=Gt(Ze,Ht),Ht.X=Gt(ke,Ht),Ht.c=Gt(ct,Ht);function Gt(xr,Ur){return function(Yr){var Ar=[],et=-1,Lt=0,Zt=xr.length,sr,Ir,Zr;for(Yr instanceof Date||(Yr=new Date(+Yr));++et<Zt;)xr.charCodeAt(et)===37&&(Ar.push(xr.slice(Lt,et)),(Ir=n[sr=xr.charAt(++et)])!=null?sr=xr.charAt(++et):Ir=sr==="e"?" ":"0",(Zr=Ur[sr])&&(sr=Zr(Yr,Ir)),Ar.push(sr),Lt=et+1);return Ar.push(xr.slice(Lt,et)),Ar.join("")}}function br(xr,Ur){return function(Yr){var Ar=e(1900,void 0,1),et=tt(Ar,xr,Yr+="",0),Lt,Zt;if(et!=Yr.length)return null;if("Q"in Ar)return new Date(Ar.Q);if("s"in Ar)return new Date(Ar.s*1e3+("L"in Ar?Ar.L:0));if(Ur&&!("Z"in Ar)&&(Ar.Z=0),"p"in Ar&&(Ar.H=Ar.H%12+Ar.p*12),Ar.m===void 0&&(Ar.m="q"in Ar?Ar.q:0),"V"in Ar){if(Ar.V<1||Ar.V>53)return null;"w"in Ar||(Ar.w=1),"Z"in Ar?(Lt=T(e(Ar.y,0,1)),Zt=Lt.getUTCDay(),Lt=Zt>4||Zt===0?v.utcMonday.ceil(Lt):v.utcMonday(Lt),Lt=v.utcDay.offset(Lt,(Ar.V-1)*7),Ar.y=Lt.getUTCFullYear(),Ar.m=Lt.getUTCMonth(),Ar.d=Lt.getUTCDate()+(Ar.w+6)%7):(Lt=M(e(Ar.y,0,1)),Zt=Lt.getDay(),Lt=Zt>4||Zt===0?v.timeMonday.ceil(Lt):v.timeMonday(Lt),Lt=v.timeDay.offset(Lt,(Ar.V-1)*7),Ar.y=Lt.getFullYear(),Ar.m=Lt.getMonth(),Ar.d=Lt.getDate()+(Ar.w+6)%7)}else("W"in Ar||"U"in Ar)&&("w"in Ar||(Ar.w="u"in Ar?Ar.u%7:"W"in Ar?1:0),Zt="Z"in Ar?T(e(Ar.y,0,1)).getUTCDay():M(e(Ar.y,0,1)).getDay(),Ar.m=0,Ar.d="W"in Ar?(Ar.w+6)%7+Ar.W*7-(Zt+5)%7:Ar.w+Ar.U*7-(Zt+6)%7);return"Z"in Ar?(Ar.H+=Ar.Z/100|0,Ar.M+=Ar.Z%100,T(Ar)):M(Ar)}}function tt(xr,Ur,Yr,Ar){for(var et=0,Lt=Ur.length,Zt=Yr.length,sr,Ir;et<Lt;){if(Ar>=Zt)return-1;if(sr=Ur.charCodeAt(et++),sr===37){if(sr=Ur.charAt(et++),Ir=Kt[sr in n?Ur.charAt(et++):sr],!Ir||(Ar=Ir(xr,Yr,Ar))<0)return-1}else if(sr!=Yr.charCodeAt(Ar++))return-1}return Ar}function je(xr,Ur,Yr){var Ar=Bt.exec(Ur.slice(Yr));return Ar?(xr.p=qt[Ar[0].toLowerCase()],Yr+Ar[0].length):-1}function st(xr,Ur,Yr){var Ar=rr.exec(Ur.slice(Yr));return Ar?(xr.w=er[Ar[0].toLowerCase()],Yr+Ar[0].length):-1}function ft(xr,Ur,Yr){var Ar=Ot.exec(Ur.slice(Yr));return Ar?(xr.w=$t[Ar[0].toLowerCase()],Yr+Ar[0].length):-1}function Me(xr,Ur,Yr){var Ar=hn.exec(Ur.slice(Yr));return Ar?(xr.m=Qr[Ar[0].toLowerCase()],Yr+Ar[0].length):-1}function Se(xr,Ur,Yr){var Ar=pr.exec(Ur.slice(Yr));return Ar?(xr.m=Xr[Ar[0].toLowerCase()],Yr+Ar[0].length):-1}function Ke(xr,Ur,Yr){return tt(xr,ct,Ur,Yr)}function Xe(xr,Ur,Yr){return tt(xr,Ze,Ur,Yr)}function it(xr,Ur,Yr){return tt(xr,ke,Ur,Yr)}function pt(xr){return ot[xr.getDay()]}function vt(xr){return Je[xr.getDay()]}function St(xr){return _t[xr.getMonth()]}function kt(xr){return Pt[xr.getMonth()]}function Nt(xr){return Ge[+(xr.getHours()>=12)]}function nr(xr){return 1+~~(xr.getMonth()/3)}function fr(xr){return ot[xr.getUTCDay()]}function Hr(xr){return Je[xr.getUTCDay()]}function Er(xr){return _t[xr.getUTCMonth()]}function _r(xr){return Pt[xr.getUTCMonth()]}function en(xr){return Ge[+(xr.getUTCHours()>=12)]}function dr(xr){return 1+~~(xr.getUTCMonth()/3)}return{format:function(xr){var Ur=Gt(xr+="",nt);return Ur.toString=function(){return xr},Ur},parse:function(xr){var Ur=br(xr+="",!1);return Ur.toString=function(){return xr},Ur},utcFormat:function(xr){var Ur=Gt(xr+="",Ht);return Ur.toString=function(){return xr},Ur},utcParse:function(xr){var Ur=br(xr+="",!0);return Ur.toString=function(){return xr},Ur}}}var n={"-":"",_:" ","0":"0"},r=/^\s*\d+/,t=/^%/,f=/[\\^$*+?|[\]().{}]/g;function o(rt,ct,Ze){var ke=rt<0?"-":"",Ge=(ke?-rt:rt)+"",Je=Ge.length;return ke+(Je<Ze?new Array(Ze-Je+1).join(ct)+Ge:Ge)}function i(rt){return rt.replace(f,"\\$&")}function g(rt){return new RegExp("^(?:"+rt.map(i).join("|")+")","i")}function p(rt){for(var ct={},Ze=-1,ke=rt.length;++Ze<ke;)ct[rt[Ze].toLowerCase()]=Ze;return ct}function y(rt,ct,Ze){var ke=r.exec(ct.slice(Ze,Ze+1));return ke?(rt.w=+ke[0],Ze+ke[0].length):-1}function c(rt,ct,Ze){var ke=r.exec(ct.slice(Ze,Ze+1));return ke?(rt.u=+ke[0],Ze+ke[0].length):-1}function b(rt,ct,Ze){var ke=r.exec(ct.slice(Ze,Ze+2));return ke?(rt.U=+ke[0],Ze+ke[0].length):-1}function l(rt,ct,Ze){var ke=r.exec(ct.slice(Ze,Ze+2));return ke?(rt.V=+ke[0],Ze+ke[0].length):-1}function _(rt,ct,Ze){var ke=r.exec(ct.slice(Ze,Ze+2));return ke?(rt.W=+ke[0],Ze+ke[0].length):-1}function s(rt,ct,Ze){var ke=r.exec(ct.slice(Ze,Ze+4));return ke?(rt.y=+ke[0],Ze+ke[0].length):-1}function A(rt,ct,Ze){var ke=r.exec(ct.slice(Ze,Ze+2));return ke?(rt.y=+ke[0]+(+ke[0]>68?1900:2e3),Ze+ke[0].length):-1}function m(rt,ct,Ze){var ke=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(ct.slice(Ze,Ze+6));return ke?(rt.Z=ke[1]?0:-(ke[2]+(ke[3]||"00")),Ze+ke[0].length):-1}function h(rt,ct,Ze){var ke=r.exec(ct.slice(Ze,Ze+1));return ke?(rt.q=ke[0]*3-3,Ze+ke[0].length):-1}function x(rt,ct,Ze){var ke=r.exec(ct.slice(Ze,Ze+2));return ke?(rt.m=ke[0]-1,Ze+ke[0].length):-1}function u(rt,ct,Ze){var ke=r.exec(ct.slice(Ze,Ze+2));return ke?(rt.d=+ke[0],Ze+ke[0].length):-1}function L(rt,ct,Ze){var ke=r.exec(ct.slice(Ze,Ze+3));return ke?(rt.m=0,rt.d=+ke[0],Ze+ke[0].length):-1}function S(rt,ct,Ze){var ke=r.exec(ct.slice(Ze,Ze+2));return ke?(rt.H=+ke[0],Ze+ke[0].length):-1}function k(rt,ct,Ze){var ke=r.exec(ct.slice(Ze,Ze+2));return ke?(rt.M=+ke[0],Ze+ke[0].length):-1}function P(rt,ct,Ze){var ke=r.exec(ct.slice(Ze,Ze+2));return ke?(rt.S=+ke[0],Ze+ke[0].length):-1}function z(rt,ct,Ze){var ke=r.exec(ct.slice(Ze,Ze+3));return ke?(rt.L=+ke[0],Ze+ke[0].length):-1}function I(rt,ct,Ze){var ke=r.exec(ct.slice(Ze,Ze+6));return ke?(rt.L=Math.floor(ke[0]/1e3),Ze+ke[0].length):-1}function D(rt,ct,Ze){var ke=t.exec(ct.slice(Ze,Ze+1));return ke?Ze+ke[0].length:-1}function R(rt,ct,Ze){var ke=r.exec(ct.slice(Ze));return ke?(rt.Q=+ke[0],Ze+ke[0].length):-1}function O(rt,ct,Ze){var ke=r.exec(ct.slice(Ze));return ke?(rt.s=+ke[0],Ze+ke[0].length):-1}function F(rt,ct){return o(rt.getDate(),ct,2)}function V(rt,ct){return o(rt.getHours(),ct,2)}function G(rt,ct){return o(rt.getHours()%12||12,ct,2)}function J(rt,ct){return o(1+v.timeDay.count(v.timeYear(rt),rt),ct,3)}function Z(rt,ct){return o(rt.getMilliseconds(),ct,3)}function Y(rt,ct){return Z(rt,ct)+"000"}function j(rt,ct){return o(rt.getMonth()+1,ct,2)}function re(rt,ct){return o(rt.getMinutes(),ct,2)}function se(rt,ct){return o(rt.getSeconds(),ct,2)}function oe(rt){var ct=rt.getDay();return ct===0?7:ct}function N(rt,ct){return o(v.timeSunday.count(v.timeYear(rt)-1,rt),ct,2)}function U(rt,ct){var Ze=rt.getDay();return rt=Ze>=4||Ze===0?v.timeThursday(rt):v.timeThursday.ceil(rt),o(v.timeThursday.count(v.timeYear(rt),rt)+(v.timeYear(rt).getDay()===4),ct,2)}function q(rt){return rt.getDay()}function Q(rt,ct){return o(v.timeMonday.count(v.timeYear(rt)-1,rt),ct,2)}function W(rt,ct){return o(rt.getFullYear()%100,ct,2)}function X(rt,ct){return o(rt.getFullYear()%1e4,ct,4)}function ee(rt){var ct=rt.getTimezoneOffset();return(ct>0?"-":(ct*=-1,"+"))+o(ct/60|0,"0",2)+o(ct%60,"0",2)}function te(rt,ct){return o(rt.getUTCDate(),ct,2)}function ie(rt,ct){return o(rt.getUTCHours(),ct,2)}function le(rt,ct){return o(rt.getUTCHours()%12||12,ct,2)}function ge(rt,ct){return o(1+v.utcDay.count(v.utcYear(rt),rt),ct,3)}function fe(rt,ct){return o(rt.getUTCMilliseconds(),ct,3)}function pe(rt,ct){return fe(rt,ct)+"000"}function ye(rt,ct){return o(rt.getUTCMonth()+1,ct,2)}function Te(rt,ct){return o(rt.getUTCMinutes(),ct,2)}function _e(rt,ct){return o(rt.getUTCSeconds(),ct,2)}function De(rt){var ct=rt.getUTCDay();return ct===0?7:ct}function Be(rt,ct){return o(v.utcSunday.count(v.utcYear(rt)-1,rt),ct,2)}function Ue(rt,ct){var Ze=rt.getUTCDay();return rt=Ze>=4||Ze===0?v.utcThursday(rt):v.utcThursday.ceil(rt),o(v.utcThursday.count(v.utcYear(rt),rt)+(v.utcYear(rt).getUTCDay()===4),ct,2)}function xe(rt){return rt.getUTCDay()}function Pe(rt,ct){return o(v.utcMonday.count(v.utcYear(rt)-1,rt),ct,2)}function Ve(rt,ct){return o(rt.getUTCFullYear()%100,ct,2)}function Qe(rt,ct){return o(rt.getUTCFullYear()%1e4,ct,4)}function Fe(){return"+0000"}function Le(){return"%"}function Ne(rt){return+rt}function dt(rt){return Math.floor(+rt/1e3)}var Dt;Xt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Xt(rt){return Dt=a(rt),w.timeFormat=Dt.format,w.timeParse=Dt.parse,w.utcFormat=Dt.utcFormat,w.utcParse=Dt.utcParse,Dt}var At="%Y-%m-%dT%H:%M:%S.%LZ";function zt(rt){return rt.toISOString()}var Ut=Date.prototype.toISOString?zt:w.utcFormat(At);function Ct(rt){var ct=new Date(rt);return isNaN(ct)?null:ct}var Mt=+new Date("2000-01-01T00:00:00.000Z")?Ct:w.utcParse(At);w.isoFormat=Ut,w.isoParse=Mt,w.timeFormatDefaultLocale=Xt,w.timeFormatLocale=a,Object.defineProperty(w,"__esModule",{value:!0})})},{"d3-time":121}],121:[function(d,ne,ae){(function(w,v){typeof ae=="object"&&typeof ne<"u"?v(ae):(w=w||self,v(w.d3=w.d3||{}))})(this,function(w){var v=new Date,M=new Date;function T(xe,Pe,Ve,Qe){function Fe(Le){return xe(Le=arguments.length===0?new Date:new Date(+Le)),Le}return Fe.floor=function(Le){return xe(Le=new Date(+Le)),Le},Fe.ceil=function(Le){return xe(Le=new Date(Le-1)),Pe(Le,1),xe(Le),Le},Fe.round=function(Le){var Ne=Fe(Le),dt=Fe.ceil(Le);return Le-Ne<dt-Le?Ne:dt},Fe.offset=function(Le,Ne){return Pe(Le=new Date(+Le),Ne==null?1:Math.floor(Ne)),Le},Fe.range=function(Le,Ne,dt){var Dt=[],Xt;if(Le=Fe.ceil(Le),dt=dt==null?1:Math.floor(dt),!(Le<Ne)||!(dt>0))return Dt;do Dt.push(Xt=new Date(+Le)),Pe(Le,dt),xe(Le);while(Xt<Le&&Le<Ne);return Dt},Fe.filter=function(Le){return T(function(Ne){if(Ne>=Ne)for(;xe(Ne),!Le(Ne);)Ne.setTime(Ne-1)},function(Ne,dt){if(Ne>=Ne)if(dt<0)for(;++dt<=0;)for(;Pe(Ne,-1),!Le(Ne););else for(;--dt>=0;)for(;Pe(Ne,1),!Le(Ne););})},Ve&&(Fe.count=function(Le,Ne){return v.setTime(+Le),M.setTime(+Ne),xe(v),xe(M),Math.floor(Ve(v,M))},Fe.every=function(Le){return Le=Math.floor(Le),!isFinite(Le)||!(Le>0)?null:Le>1?Fe.filter(Qe?function(Ne){return Qe(Ne)%Le===0}:function(Ne){return Fe.count(0,Ne)%Le===0}):Fe}),Fe}var e=T(function(){},function(xe,Pe){xe.setTime(+xe+Pe)},function(xe,Pe){return Pe-xe});e.every=function(xe){return xe=Math.floor(xe),!isFinite(xe)||!(xe>0)?null:xe>1?T(function(Pe){Pe.setTime(Math.floor(Pe/xe)*xe)},function(Pe,Ve){Pe.setTime(+Pe+Ve*xe)},function(Pe,Ve){return(Ve-Pe)/xe}):e};var a=e.range,n=1e3,r=6e4,t=36e5,f=864e5,o=6048e5,i=T(function(xe){xe.setTime(xe-xe.getMilliseconds())},function(xe,Pe){xe.setTime(+xe+Pe*n)},function(xe,Pe){return(Pe-xe)/n},function(xe){return xe.getUTCSeconds()}),g=i.range,p=T(function(xe){xe.setTime(xe-xe.getMilliseconds()-xe.getSeconds()*n)},function(xe,Pe){xe.setTime(+xe+Pe*r)},function(xe,Pe){return(Pe-xe)/r},function(xe){return xe.getMinutes()}),y=p.range,c=T(function(xe){xe.setTime(xe-xe.getMilliseconds()-xe.getSeconds()*n-xe.getMinutes()*r)},function(xe,Pe){xe.setTime(+xe+Pe*t)},function(xe,Pe){return(Pe-xe)/t},function(xe){return xe.getHours()}),b=c.range,l=T(function(xe){xe.setHours(0,0,0,0)},function(xe,Pe){xe.setDate(xe.getDate()+Pe)},function(xe,Pe){return(Pe-xe-(Pe.getTimezoneOffset()-xe.getTimezoneOffset())*r)/f},function(xe){return xe.getDate()-1}),_=l.range;function s(xe){return T(function(Pe){Pe.setDate(Pe.getDate()-(Pe.getDay()+7-xe)%7),Pe.setHours(0,0,0,0)},function(Pe,Ve){Pe.setDate(Pe.getDate()+Ve*7)},function(Pe,Ve){return(Ve-Pe-(Ve.getTimezoneOffset()-Pe.getTimezoneOffset())*r)/o})}var A=s(0),m=s(1),h=s(2),x=s(3),u=s(4),L=s(5),S=s(6),k=A.range,P=m.range,z=h.range,I=x.range,D=u.range,R=L.range,O=S.range,F=T(function(xe){xe.setDate(1),xe.setHours(0,0,0,0)},function(xe,Pe){xe.setMonth(xe.getMonth()+Pe)},function(xe,Pe){return Pe.getMonth()-xe.getMonth()+(Pe.getFullYear()-xe.getFullYear())*12},function(xe){return xe.getMonth()}),V=F.range,G=T(function(xe){xe.setMonth(0,1),xe.setHours(0,0,0,0)},function(xe,Pe){xe.setFullYear(xe.getFullYear()+Pe)},function(xe,Pe){return Pe.getFullYear()-xe.getFullYear()},function(xe){return xe.getFullYear()});G.every=function(xe){return!isFinite(xe=Math.floor(xe))||!(xe>0)?null:T(function(Pe){Pe.setFullYear(Math.floor(Pe.getFullYear()/xe)*xe),Pe.setMonth(0,1),Pe.setHours(0,0,0,0)},function(Pe,Ve){Pe.setFullYear(Pe.getFullYear()+Ve*xe)})};var J=G.range,Z=T(function(xe){xe.setUTCSeconds(0,0)},function(xe,Pe){xe.setTime(+xe+Pe*r)},function(xe,Pe){return(Pe-xe)/r},function(xe){return xe.getUTCMinutes()}),Y=Z.range,j=T(function(xe){xe.setUTCMinutes(0,0,0)},function(xe,Pe){xe.setTime(+xe+Pe*t)},function(xe,Pe){return(Pe-xe)/t},function(xe){return xe.getUTCHours()}),re=j.range,se=T(function(xe){xe.setUTCHours(0,0,0,0)},function(xe,Pe){xe.setUTCDate(xe.getUTCDate()+Pe)},function(xe,Pe){return(Pe-xe)/f},function(xe){return xe.getUTCDate()-1}),oe=se.range;function N(xe){return T(function(Pe){Pe.setUTCDate(Pe.getUTCDate()-(Pe.getUTCDay()+7-xe)%7),Pe.setUTCHours(0,0,0,0)},function(Pe,Ve){Pe.setUTCDate(Pe.getUTCDate()+Ve*7)},function(Pe,Ve){return(Ve-Pe)/o})}var U=N(0),q=N(1),Q=N(2),W=N(3),X=N(4),ee=N(5),te=N(6),ie=U.range,le=q.range,ge=Q.range,fe=W.range,pe=X.range,ye=ee.range,Te=te.range,_e=T(function(xe){xe.setUTCDate(1),xe.setUTCHours(0,0,0,0)},function(xe,Pe){xe.setUTCMonth(xe.getUTCMonth()+Pe)},function(xe,Pe){return Pe.getUTCMonth()-xe.getUTCMonth()+(Pe.getUTCFullYear()-xe.getUTCFullYear())*12},function(xe){return xe.getUTCMonth()}),De=_e.range,Be=T(function(xe){xe.setUTCMonth(0,1),xe.setUTCHours(0,0,0,0)},function(xe,Pe){xe.setUTCFullYear(xe.getUTCFullYear()+Pe)},function(xe,Pe){return Pe.getUTCFullYear()-xe.getUTCFullYear()},function(xe){return xe.getUTCFullYear()});Be.every=function(xe){return!isFinite(xe=Math.floor(xe))||!(xe>0)?null:T(function(Pe){Pe.setUTCFullYear(Math.floor(Pe.getUTCFullYear()/xe)*xe),Pe.setUTCMonth(0,1),Pe.setUTCHours(0,0,0,0)},function(Pe,Ve){Pe.setUTCFullYear(Pe.getUTCFullYear()+Ve*xe)})};var Ue=Be.range;w.timeDay=l,w.timeDays=_,w.timeFriday=L,w.timeFridays=R,w.timeHour=c,w.timeHours=b,w.timeInterval=T,w.timeMillisecond=e,w.timeMilliseconds=a,w.timeMinute=p,w.timeMinutes=y,w.timeMonday=m,w.timeMondays=P,w.timeMonth=F,w.timeMonths=V,w.timeSaturday=S,w.timeSaturdays=O,w.timeSecond=i,w.timeSeconds=g,w.timeSunday=A,w.timeSundays=k,w.timeThursday=u,w.timeThursdays=D,w.timeTuesday=h,w.timeTuesdays=z,w.timeWednesday=x,w.timeWednesdays=I,w.timeWeek=A,w.timeWeeks=k,w.timeYear=G,w.timeYears=J,w.utcDay=se,w.utcDays=oe,w.utcFriday=ee,w.utcFridays=ye,w.utcHour=j,w.utcHours=re,w.utcMillisecond=e,w.utcMilliseconds=a,w.utcMinute=Z,w.utcMinutes=Y,w.utcMonday=q,w.utcMondays=le,w.utcMonth=_e,w.utcMonths=De,w.utcSaturday=te,w.utcSaturdays=Te,w.utcSecond=i,w.utcSeconds=g,w.utcSunday=U,w.utcSundays=ie,w.utcThursday=X,w.utcThursdays=pe,w.utcTuesday=Q,w.utcTuesdays=ge,w.utcWednesday=W,w.utcWednesdays=fe,w.utcWeek=U,w.utcWeeks=ie,w.utcYear=Be,w.utcYears=Ue,Object.defineProperty(w,"__esModule",{value:!0})})},{}],122:[function(d,ne,ae){arguments[4][121][0].apply(ae,arguments)},{dup:121}],123:[function(d,ne,ae){(function(w,v){typeof ae=="object"&&typeof ne<"u"?v(ae):(w=w||self,v(w.d3=w.d3||{}))})(this,function(w){var v=0,M=0,T=0,e=1e3,a,n,r=0,t=0,f=0,o=typeof performance=="object"&&performance.now?performance:Date,i=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(x){setTimeout(x,17)};function g(){return t||(i(p),t=o.now()+f)}function p(){t=0}function y(){this._call=this._time=this._next=null}y.prototype=c.prototype={constructor:y,restart:function(x,u,L){if(typeof x!="function")throw new TypeError("callback is not a function");L=(L==null?g():+L)+(u==null?0:+u),!this._next&&n!==this&&(n?n._next=this:a=this,n=this),this._call=x,this._time=L,A()},stop:function(){this._call&&(this._call=null,this._time=1/0,A())}};function c(x,u,L){var S=new y;return S.restart(x,u,L),S}function b(){g(),++v;for(var x=a,u;x;)(u=t-x._time)>=0&&x._call.call(null,u),x=x._next;--v}function l(){t=(r=o.now())+f,v=M=0;try{b()}finally{v=0,s(),t=0}}function _(){var x=o.now(),u=x-r;u>e&&(f-=u,r=x)}function s(){for(var x,u=a,L,S=1/0;u;)u._call?(S>u._time&&(S=u._time),x=u,u=u._next):(L=u._next,u._next=null,u=x?x._next=L:a=L);n=x,A(S)}function A(x){if(!v){M&&(M=clearTimeout(M));var u=x-t;u>24?(x<1/0&&(M=setTimeout(l,x-o.now()-f)),T&&(T=clearInterval(T))):(T||(r=o.now(),T=setInterval(_,e)),v=1,i(l))}}function m(x,u,L){var S=new y;return u=u==null?0:+u,S.restart(function(k){S.stop(),x(k+u)},u,L),S}function h(x,u,L){var S=new y,k=u;return u==null?(S.restart(x,u,L),S):(u=+u,L=L==null?g():+L,S.restart(function P(z){z+=k,S.restart(P,k+=u,L),x(z)},u,L),S)}w.interval=h,w.now=g,w.timeout=m,w.timer=c,w.timerFlush=b,Object.defineProperty(w,"__esModule",{value:!0})})},{}],124:[function(d,ne,ae){ne.exports=function(){for(var w=0;w<arguments.length;w++)if(arguments[w]!==void 0)return arguments[w]}},{}],125:[function(d,ne,ae){ne.exports=T;var w=T.canvas=document.createElement("canvas"),v=w.getContext("2d"),M=e([32,126]);T.createPairs=e,T.ascii=M;function T(a,n){Array.isArray(a)&&(a=a.join(", "));var r={},t,f=16,o=.05;n&&(n.length===2&&typeof n[0]=="number"?t=e(n):Array.isArray(n)?t=n:(n.o?t=e(n.o):n.pairs&&(t=n.pairs),n.fontSize&&(f=n.fontSize),n.threshold!=null&&(o=n.threshold))),t||(t=M),v.font=f+"px "+a;for(var i=0;i<t.length;i++){var g=t[i],p=v.measureText(g[0]).width+v.measureText(g[1]).width,y=v.measureText(g).width;if(Math.abs(p-y)>f*o){var c=(y-p)/f;r[g]=c*1e3}}return r}function e(a){for(var n=[],r=a[0];r<=a[1];r++)for(var t=String.fromCharCode(r),f=a[0];f<a[1];f++){var o=String.fromCharCode(f),i=t+o;n.push(i)}return n}},{}],126:[function(d,ne,ae){var w=d("abs-svg-path"),v=d("normalize-svg-path"),M={M:"moveTo",C:"bezierCurveTo"};ne.exports=function(T,e){T.beginPath(),v(w(e)).forEach(function(a){var n=a[0],r=a.slice(1);T[M[n]].apply(T,r)}),T.closePath()}},{"abs-svg-path":70,"normalize-svg-path":246}],127:[function(d,ne,ae){ne.exports=function(w){switch(w){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],128:[function(d,ne,ae){function w(T,e,a){var n=T[a]|0;if(n<=0)return[];var r=new Array(n),t;if(a===T.length-1)for(t=0;t<n;++t)r[t]=e;else for(t=0;t<n;++t)r[t]=w(T,e,a+1);return r}function v(T,e){var a,n;for(a=new Array(T),n=0;n<T;++n)a[n]=e;return a}function M(T,e){switch(typeof e>"u"&&(e=0),typeof T){case"number":if(T>0)return v(T|0,e);break;case"object":if(typeof T.length=="number")return w(T,e,0);break}return[]}ne.exports=M},{}],129:[function(d,ne,ae){ne.exports=w,ne.exports.default=w;function w(R,O,F){F=F||2;var V=O&&O.length,G=V?O[0]*F:R.length,J=v(R,0,G,F,!0),Z=[];if(!J||J.next===J.prev)return Z;var Y,j,re,se,oe,N,U;if(V&&(J=t(R,O,J,F)),R.length>80*F){Y=re=R[0],j=se=R[1];for(var q=F;q<G;q+=F)oe=R[q],N=R[q+1],oe<Y&&(Y=oe),N<j&&(j=N),oe>re&&(re=oe),N>se&&(se=N);U=Math.max(re-Y,se-j),U=U!==0?1/U:0}return T(J,Z,F,Y,j,U),Z}function v(R,O,F,V,G){var J,Z;if(G===D(R,O,F,V)>0)for(J=O;J<F;J+=V)Z=P(J,R[J],R[J+1],Z);else for(J=F-V;J>=O;J-=V)Z=P(J,R[J],R[J+1],Z);return Z&&A(Z,Z.next)&&(z(Z),Z=Z.next),Z}function M(R,O){if(!R)return R;O||(O=R);var F=R,V;do if(V=!1,!F.steiner&&(A(F,F.next)||s(F.prev,F,F.next)===0)){if(z(F),F=O=F.prev,F===F.next)break;V=!0}else F=F.next;while(V||F!==O);return O}function T(R,O,F,V,G,J,Z){if(!!R){!Z&&J&&p(R,V,G,J);for(var Y=R,j,re;R.prev!==R.next;){if(j=R.prev,re=R.next,J?a(R,V,G,J):e(R)){O.push(j.i/F),O.push(R.i/F),O.push(re.i/F),z(R),R=re.next,Y=re.next;continue}if(R=re,R===Y){Z?Z===1?(R=n(M(R),O,F),T(R,O,F,V,G,J,2)):Z===2&&r(R,O,F,V,G,J):T(M(R),O,F,V,G,J,1);break}}}}function e(R){var O=R.prev,F=R,V=R.next;if(s(O,F,V)>=0)return!1;for(var G=R.next.next;G!==R.prev;){if(l(O.x,O.y,F.x,F.y,V.x,V.y,G.x,G.y)&&s(G.prev,G,G.next)>=0)return!1;G=G.next}return!0}function a(R,O,F,V){var G=R.prev,J=R,Z=R.next;if(s(G,J,Z)>=0)return!1;for(var Y=G.x<J.x?G.x<Z.x?G.x:Z.x:J.x<Z.x?J.x:Z.x,j=G.y<J.y?G.y<Z.y?G.y:Z.y:J.y<Z.y?J.y:Z.y,re=G.x>J.x?G.x>Z.x?G.x:Z.x:J.x>Z.x?J.x:Z.x,se=G.y>J.y?G.y>Z.y?G.y:Z.y:J.y>Z.y?J.y:Z.y,oe=c(Y,j,O,F,V),N=c(re,se,O,F,V),U=R.prevZ,q=R.nextZ;U&&U.z>=oe&&q&&q.z<=N;){if(U!==R.prev&&U!==R.next&&l(G.x,G.y,J.x,J.y,Z.x,Z.y,U.x,U.y)&&s(U.prev,U,U.next)>=0||(U=U.prevZ,q!==R.prev&&q!==R.next&&l(G.x,G.y,J.x,J.y,Z.x,Z.y,q.x,q.y)&&s(q.prev,q,q.next)>=0))return!1;q=q.nextZ}for(;U&&U.z>=oe;){if(U!==R.prev&&U!==R.next&&l(G.x,G.y,J.x,J.y,Z.x,Z.y,U.x,U.y)&&s(U.prev,U,U.next)>=0)return!1;U=U.prevZ}for(;q&&q.z<=N;){if(q!==R.prev&&q!==R.next&&l(G.x,G.y,J.x,J.y,Z.x,Z.y,q.x,q.y)&&s(q.prev,q,q.next)>=0)return!1;q=q.nextZ}return!0}function n(R,O,F){var V=R;do{var G=V.prev,J=V.next.next;!A(G,J)&&m(G,V,V.next,J)&&L(G,J)&&L(J,G)&&(O.push(G.i/F),O.push(V.i/F),O.push(J.i/F),z(V),z(V.next),V=R=J),V=V.next}while(V!==R);return M(V)}function r(R,O,F,V,G,J){var Z=R;do{for(var Y=Z.next.next;Y!==Z.prev;){if(Z.i!==Y.i&&_(Z,Y)){var j=k(Z,Y);Z=M(Z,Z.next),j=M(j,j.next),T(Z,O,F,V,G,J),T(j,O,F,V,G,J);return}Y=Y.next}Z=Z.next}while(Z!==R)}function t(R,O,F,V){var G=[],J,Z,Y,j,re;for(J=0,Z=O.length;J<Z;J++)Y=O[J]*V,j=J<Z-1?O[J+1]*V:R.length,re=v(R,Y,j,V,!1),re===re.next&&(re.steiner=!0),G.push(b(re));for(G.sort(f),J=0;J<G.length;J++)o(G[J],F),F=M(F,F.next);return F}function f(R,O){return R.x-O.x}function o(R,O){if(O=i(R,O),O){var F=k(O,R);M(O,O.next),M(F,F.next)}}function i(R,O){var F=O,V=R.x,G=R.y,J=-1/0,Z;do{if(G<=F.y&&G>=F.next.y&&F.next.y!==F.y){var Y=F.x+(G-F.y)*(F.next.x-F.x)/(F.next.y-F.y);if(Y<=V&&Y>J){if(J=Y,Y===V){if(G===F.y)return F;if(G===F.next.y)return F.next}Z=F.x<F.next.x?F:F.next}}F=F.next}while(F!==O);if(!Z)return null;if(V===J)return Z;var j=Z,re=Z.x,se=Z.y,oe=1/0,N;F=Z;do V>=F.x&&F.x>=re&&V!==F.x&&l(G<se?V:J,G,re,se,G<se?J:V,G,F.x,F.y)&&(N=Math.abs(G-F.y)/(V-F.x),L(F,R)&&(N<oe||N===oe&&(F.x>Z.x||F.x===Z.x&&g(Z,F)))&&(Z=F,oe=N)),F=F.next;while(F!==j);return Z}function g(R,O){return s(R.prev,R,O.prev)<0&&s(O.next,R,R.next)<0}function p(R,O,F,V){var G=R;do G.z===null&&(G.z=c(G.x,G.y,O,F,V)),G.prevZ=G.prev,G.nextZ=G.next,G=G.next;while(G!==R);G.prevZ.nextZ=null,G.prevZ=null,y(G)}function y(R){var O,F,V,G,J,Z,Y,j,re=1;do{for(F=R,R=null,J=null,Z=0;F;){for(Z++,V=F,Y=0,O=0;O<re&&(Y++,V=V.nextZ,!!V);O++);for(j=re;Y>0||j>0&&V;)Y!==0&&(j===0||!V||F.z<=V.z)?(G=F,F=F.nextZ,Y--):(G=V,V=V.nextZ,j--),J?J.nextZ=G:R=G,G.prevZ=J,J=G;F=V}J.nextZ=null,re*=2}while(Z>1);return R}function c(R,O,F,V,G){return R=32767*(R-F)*G,O=32767*(O-V)*G,R=(R|R<<8)&16711935,R=(R|R<<4)&252645135,R=(R|R<<2)&858993459,R=(R|R<<1)&1431655765,O=(O|O<<8)&16711935,O=(O|O<<4)&252645135,O=(O|O<<2)&858993459,O=(O|O<<1)&1431655765,R|O<<1}function b(R){var O=R,F=R;do(O.x<F.x||O.x===F.x&&O.y<F.y)&&(F=O),O=O.next;while(O!==R);return F}function l(R,O,F,V,G,J,Z,Y){return(G-Z)*(O-Y)-(R-Z)*(J-Y)>=0&&(R-Z)*(V-Y)-(F-Z)*(O-Y)>=0&&(F-Z)*(J-Y)-(G-Z)*(V-Y)>=0}function _(R,O){return R.next.i!==O.i&&R.prev.i!==O.i&&!u(R,O)&&(L(R,O)&&L(O,R)&&S(R,O)&&(s(R.prev,R,O.prev)||s(R,O.prev,O))||A(R,O)&&s(R.prev,R,R.next)>0&&s(O.prev,O,O.next)>0)}function s(R,O,F){return(O.y-R.y)*(F.x-O.x)-(O.x-R.x)*(F.y-O.y)}function A(R,O){return R.x===O.x&&R.y===O.y}function m(R,O,F,V){var G=x(s(R,O,F)),J=x(s(R,O,V)),Z=x(s(F,V,R)),Y=x(s(F,V,O));return!!(G!==J&&Z!==Y||G===0&&h(R,F,O)||J===0&&h(R,V,O)||Z===0&&h(F,R,V)||Y===0&&h(F,O,V))}function h(R,O,F){return O.x<=Math.max(R.x,F.x)&&O.x>=Math.min(R.x,F.x)&&O.y<=Math.max(R.y,F.y)&&O.y>=Math.min(R.y,F.y)}function x(R){return R>0?1:R<0?-1:0}function u(R,O){var F=R;do{if(F.i!==R.i&&F.next.i!==R.i&&F.i!==O.i&&F.next.i!==O.i&&m(F,F.next,R,O))return!0;F=F.next}while(F!==R);return!1}function L(R,O){return s(R.prev,R,R.next)<0?s(R,O,R.next)>=0&&s(R,R.prev,O)>=0:s(R,O,R.prev)<0||s(R,R.next,O)<0}function S(R,O){var F=R,V=!1,G=(R.x+O.x)/2,J=(R.y+O.y)/2;do F.y>J!=F.next.y>J&&F.next.y!==F.y&&G<(F.next.x-F.x)*(J-F.y)/(F.next.y-F.y)+F.x&&(V=!V),F=F.next;while(F!==R);return V}function k(R,O){var F=new I(R.i,R.x,R.y),V=new I(O.i,O.x,O.y),G=R.next,J=O.prev;return R.next=O,O.prev=R,F.next=G,G.prev=F,V.next=F,F.prev=V,J.next=V,V.prev=J,V}function P(R,O,F,V){var G=new I(R,O,F);return V?(G.next=V.next,G.prev=V,V.next.prev=G,V.next=G):(G.prev=G,G.next=G),G}function z(R){R.next.prev=R.prev,R.prev.next=R.next,R.prevZ&&(R.prevZ.nextZ=R.nextZ),R.nextZ&&(R.nextZ.prevZ=R.prevZ)}function I(R,O,F){this.i=R,this.x=O,this.y=F,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}w.deviation=function(R,O,F,V){var G=O&&O.length,J=G?O[0]*F:R.length,Z=Math.abs(D(R,0,J,F));if(G)for(var Y=0,j=O.length;Y<j;Y++){var re=O[Y]*F,se=Y<j-1?O[Y+1]*F:R.length;Z-=Math.abs(D(R,re,se,F))}var oe=0;for(Y=0;Y<V.length;Y+=3){var N=V[Y]*F,U=V[Y+1]*F,q=V[Y+2]*F;oe+=Math.abs((R[N]-R[q])*(R[U+1]-R[N+1])-(R[N]-R[U])*(R[q+1]-R[N+1]))}return Z===0&&oe===0?0:Math.abs((oe-Z)/Z)};function D(R,O,F,V){for(var G=0,J=O,Z=F-V;J<F;J+=V)G+=(R[Z]-R[J])*(R[J+1]+R[Z+1]),Z=J;return G}w.flatten=function(R){for(var O=R[0][0].length,F={vertices:[],holes:[],dimensions:O},V=0,G=0;G<R.length;G++){for(var J=0;J<R[G].length;J++)for(var Z=0;Z<O;Z++)F.vertices.push(R[G][J][Z]);G>0&&(V+=R[G-1].length,F.holes.push(V))}return F}},{}],130:[function(d,ne,ae){var w=d("strongly-connected-components");ne.exports=function(M,T){var e=[],a=[],n=[],r={},t=[],f;function o(A){n[A]=!1,r.hasOwnProperty(A)&&Object.keys(r[A]).forEach(function(m){delete r[A][m],n[m]&&o(m)})}function i(A){var m=!1;a.push(A),n[A]=!0;var h,x;for(h=0;h<t[A].length;h++)x=t[A][h],x===f?(g(f,a),m=!0):n[x]||(m=i(x));if(m)o(A);else for(h=0;h<t[A].length;h++){x=t[A][h];var u=r[x];u||(u={},r[x]=u),u[x]=!0}return a.pop(),m}function g(A,m){var h=[].concat(m).concat(A);T?T(i):e.push(h)}function p(A){for(var m=0;m<M.length;m++)m<A&&(M[m]=[]),M[m]=M[m].filter(function(h){return h>=A})}function y(A){p(A);for(var m=M,h=w(m),x=h.components.filter(function(I){return I.length>1}),u=1/0,L,S=0;S<x.length;S++)for(var k=0;k<x[S].length;k++)x[S][k]<u&&(u=x[S][k],L=S);var P=x[L];if(!P)return!1;var z=M.map(function(I,D){return P.indexOf(D)===-1?[]:I.filter(function(R){return P.indexOf(R)!==-1})});return{leastVertex:u,adjList:z}}f=0;for(var c=M.length;f<c;){var b=y(f);if(f=b.leastVertex,t=b.adjList,t){for(var l=0;l<t.length;l++)for(var _=0;_<t[l].length;_++){var s=t[l][_];n[+s]=!1,r[s]={}}i(f),f=f+1}else f=c}if(!T)return e}},{"strongly-connected-components":306}],131:[function(d,ne,ae){var w=d("../../object/valid-value");ne.exports=function(){return w(this).length=0,this}},{"../../object/valid-value":162}],132:[function(d,ne,ae){ne.exports=d("./is-implemented")()?Array.from:d("./shim")},{"./is-implemented":133,"./shim":134}],133:[function(d,ne,ae){ne.exports=function(){var w=Array.from,v,M;return typeof w!="function"?!1:(v=["raz","dwa"],M=w(v),Boolean(M&&M!==v&&M[1]==="dwa"))}},{}],134:[function(d,ne,ae){var w=d("es6-symbol").iterator,v=d("../../function/is-arguments"),M=d("../../function/is-function"),T=d("../../number/to-pos-integer"),e=d("../../object/valid-callable"),a=d("../../object/valid-value"),n=d("../../object/is-value"),r=d("../../string/is-string"),t=Array.isArray,f=Function.prototype.call,o={configurable:!0,enumerable:!0,writable:!0,value:null},i=Object.defineProperty;ne.exports=function(g){var p=arguments[1],y=arguments[2],c,b,l,_,s,A,m,h,x,u;if(g=Object(a(g)),n(p)&&e(p),!this||this===Array||!M(this)){if(!p){if(v(g))return s=g.length,s!==1?Array.apply(null,g):(_=new Array(1),_[0]=g[0],_);if(t(g)){for(_=new Array(s=g.length),b=0;b<s;++b)_[b]=g[b];return _}}_=[]}else c=this;if(!t(g)){if((x=g[w])!==void 0){for(m=e(x).call(g),c&&(_=new c),h=m.next(),b=0;!h.done;)u=p?f.call(p,y,h.value,b):h.value,c?(o.value=u,i(_,b,o)):_[b]=u,h=m.next(),++b;s=b}else if(r(g)){for(s=g.length,c&&(_=new c),b=0,l=0;b<s;++b)u=g[b],b+1<s&&(A=u.charCodeAt(0),A>=55296&&A<=56319&&(u+=g[++b])),u=p?f.call(p,y,u,l):u,c?(o.value=u,i(_,l,o)):_[l]=u,++l;s=l}}if(s===void 0)for(s=T(g.length),c&&(_=new c(s)),b=0;b<s;++b)u=p?f.call(p,y,g[b],b):g[b],c?(o.value=u,i(_,b,o)):_[b]=u;return c&&(o.value=null,_.length=s),_}},{"../../function/is-arguments":135,"../../function/is-function":136,"../../number/to-pos-integer":142,"../../object/is-value":151,"../../object/valid-callable":160,"../../object/valid-value":162,"../../string/is-string":166,"es6-symbol":175}],135:[function(d,ne,ae){var w=Object.prototype.toString,v=w.call(function(){return arguments}());ne.exports=function(M){return w.call(M)===v}},{}],136:[function(d,ne,ae){var w=Object.prototype.toString,v=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);ne.exports=function(M){return typeof M=="function"&&v(w.call(M))}},{}],137:[function(d,ne,ae){ne.exports=function(){}},{}],138:[function(d,ne,ae){ne.exports=d("./is-implemented")()?Math.sign:d("./shim")},{"./is-implemented":139,"./shim":140}],139:[function(d,ne,ae){ne.exports=function(){var w=Math.sign;return typeof w!="function"?!1:w(10)===1&&w(-20)===-1}},{}],140:[function(d,ne,ae){ne.exports=function(w){return w=Number(w),isNaN(w)||w===0?w:w>0?1:-1}},{}],141:[function(d,ne,ae){var w=d("../math/sign"),v=Math.abs,M=Math.floor;ne.exports=function(T){return isNaN(T)?0:(T=Number(T),T===0||!isFinite(T)?T:w(T)*M(v(T)))}},{"../math/sign":138}],142:[function(d,ne,ae){var w=d("./to-integer"),v=Math.max;ne.exports=function(M){return v(0,w(M))}},{"./to-integer":141}],143:[function(d,ne,ae){var w=d("./valid-callable"),v=d("./valid-value"),M=Function.prototype.bind,T=Function.prototype.call,e=Object.keys,a=Object.prototype.propertyIsEnumerable;ne.exports=function(n,r){return function(t,f){var o,i=arguments[2],g=arguments[3];return t=Object(v(t)),w(f),o=e(t),g&&o.sort(typeof g=="function"?M.call(g,t):void 0),typeof n!="function"&&(n=o[n]),T.call(n,o,function(p,y){return a.call(t,p)?T.call(f,i,t[p],p,t,y):r})}}},{"./valid-callable":160,"./valid-value":162}],144:[function(d,ne,ae){ne.exports=d("./is-implemented")()?Object.assign:d("./shim")},{"./is-implemented":145,"./shim":146}],145:[function(d,ne,ae){ne.exports=function(){var w=Object.assign,v;return typeof w!="function"?!1:(v={foo:"raz"},w(v,{bar:"dwa"},{trzy:"trzy"}),v.foo+v.bar+v.trzy==="razdwatrzy")}},{}],146:[function(d,ne,ae){var w=d("../keys"),v=d("../valid-value"),M=Math.max;ne.exports=function(T,e){var a,n,r=M(arguments.length,2),t;for(T=Object(v(T)),t=function(f){try{T[f]=e[f]}catch(o){a||(a=o)}},n=1;n<r;++n)e=arguments[n],w(e).forEach(t);if(a!==void 0)throw a;return T}},{"../keys":152,"../valid-value":162}],147:[function(d,ne,ae){var w=d("../array/from"),v=d("./assign"),M=d("./valid-value");ne.exports=function(T){var e=Object(M(T)),a=arguments[1],n=Object(arguments[2]);if(e!==T&&!a)return e;var r={};return a?w(a,function(t){(n.ensure||t in T)&&(r[t]=T[t])}):v(r,T),r}},{"../array/from":132,"./assign":144,"./valid-value":162}],148:[function(d,ne,ae){var w=Object.create,v;d("./set-prototype-of/is-implemented")()||(v=d("./set-prototype-of/shim")),ne.exports=function(){var M,T,e;return!v||v.level!==1?w:(M={},T={},e={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(a){if(a==="__proto__"){T[a]={configurable:!0,enumerable:!1,writable:!0,value:void 0};return}T[a]=e}),Object.defineProperties(M,T),Object.defineProperty(v,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:M}),function(a,n){return w(a===null?M:a,n)})}()},{"./set-prototype-of/is-implemented":158,"./set-prototype-of/shim":159}],149:[function(d,ne,ae){ne.exports=d("./_iterate")("forEach")},{"./_iterate":143}],150:[function(d,ne,ae){var w=d("./is-value"),v={function:!0,object:!0};ne.exports=function(M){return w(M)&&v[typeof M]||!1}},{"./is-value":151}],151:[function(d,ne,ae){var w=d("../function/noop")();ne.exports=function(v){return v!==w&&v!==null}},{"../function/noop":137}],152:[function(d,ne,ae){ne.exports=d("./is-implemented")()?Object.keys:d("./shim")},{"./is-implemented":153,"./shim":154}],153:[function(d,ne,ae){ne.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},{}],154:[function(d,ne,ae){var w=d("../is-value"),v=Object.keys;ne.exports=function(M){return v(w(M)?Object(M):M)}},{"../is-value":151}],155:[function(d,ne,ae){var w=d("./valid-callable"),v=d("./for-each"),M=Function.prototype.call;ne.exports=function(T,e){var a={},n=arguments[2];return w(e),v(T,function(r,t,f,o){a[t]=M.call(e,n,r,t,f,o)}),a}},{"./for-each":149,"./valid-callable":160}],156:[function(d,ne,ae){var w=d("./is-value"),v=Array.prototype.forEach,M=Object.create,T=function(e,a){var n;for(n in e)a[n]=e[n]};ne.exports=function(e){var a=M(null);return v.call(arguments,function(n){!w(n)||T(Object(n),a)}),a}},{"./is-value":151}],157:[function(d,ne,ae){ne.exports=d("./is-implemented")()?Object.setPrototypeOf:d("./shim")},{"./is-implemented":158,"./shim":159}],158:[function(d,ne,ae){var w=Object.create,v=Object.getPrototypeOf,M={};ne.exports=function(){var T=Object.setPrototypeOf,e=arguments[0]||w;return typeof T!="function"?!1:v(T(e(null),M))===M}},{}],159:[function(d,ne,ae){var w=d("../is-object"),v=d("../valid-value"),M=Object.prototype.isPrototypeOf,T=Object.defineProperty,e={configurable:!0,enumerable:!1,writable:!0,value:void 0},a;a=function(n,r){if(v(n),r===null||w(r))return n;throw new TypeError("Prototype must be null or an object")},ne.exports=function(n){var r,t;return n?(n.level===2?n.set?(t=n.set,r=function(f,o){return t.call(a(f,o),o),f}):r=function(f,o){return a(f,o).__proto__=o,f}:r=function f(o,i){var g;return a(o,i),g=M.call(f.nullPolyfill,o),g&&delete f.nullPolyfill.__proto__,i===null&&(i=f.nullPolyfill),o.__proto__=i,g&&T(f.nullPolyfill,"__proto__",e),o},Object.defineProperty(r,"level",{configurable:!1,enumerable:!1,writable:!1,value:n.level})):null}(function(){var n=Object.create(null),r={},t,f=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(f){try{t=f.set,t.call(n,r)}catch{}if(Object.getPrototypeOf(n)===r)return{set:t,level:2}}return n.__proto__=r,Object.getPrototypeOf(n)===r?{level:2}:(n={},n.__proto__=r,Object.getPrototypeOf(n)===r?{level:1}:!1)}()),d("../create")},{"../create":148,"../is-object":150,"../valid-value":162}],160:[function(d,ne,ae){ne.exports=function(w){if(typeof w!="function")throw new TypeError(w+" is not a function");return w}},{}],161:[function(d,ne,ae){var w=d("./is-object");ne.exports=function(v){if(!w(v))throw new TypeError(v+" is not an Object");return v}},{"./is-object":150}],162:[function(d,ne,ae){var w=d("./is-value");ne.exports=function(v){if(!w(v))throw new TypeError("Cannot use null or undefined");return v}},{"./is-value":151}],163:[function(d,ne,ae){ne.exports=d("./is-implemented")()?String.prototype.contains:d("./shim")},{"./is-implemented":164,"./shim":165}],164:[function(d,ne,ae){var w="razdwatrzy";ne.exports=function(){return typeof w.contains!="function"?!1:w.contains("dwa")===!0&&w.contains("foo")===!1}},{}],165:[function(d,ne,ae){var w=String.prototype.indexOf;ne.exports=function(v){return w.call(this,v,arguments[1])>-1}},{}],166:[function(d,ne,ae){var w=Object.prototype.toString,v=w.call("");ne.exports=function(M){return typeof M=="string"||M&&typeof M=="object"&&(M instanceof String||w.call(M)===v)||!1}},{}],167:[function(d,ne,ae){var w=Object.create(null),v=Math.random;ne.exports=function(){var M;do M=v().toString(36).slice(2);while(w[M]);return M}},{}],168:[function(d,ne,ae){var w=d("es5-ext/object/set-prototype-of"),v=d("es5-ext/string/#/contains"),M=d("d"),T=d("es6-symbol"),e=d("./"),a=Object.defineProperty,n;n=ne.exports=function(r,t){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");e.call(this,r),t?v.call(t,"key+value")?t="key+value":v.call(t,"key")?t="key":t="value":t="value",a(this,"__kind__",M("",t))},w&&w(n,e),delete n.prototype.constructor,n.prototype=Object.create(e.prototype,{_resolve:M(function(r){return this.__kind__==="value"?this.__list__[r]:this.__kind__==="key+value"?[r,this.__list__[r]]:r})}),a(n.prototype,T.toStringTag,M("c","Array Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es5-ext/string/#/contains":163,"es6-symbol":175}],169:[function(d,ne,ae){var w=d("es5-ext/function/is-arguments"),v=d("es5-ext/object/valid-callable"),M=d("es5-ext/string/is-string"),T=d("./get"),e=Array.isArray,a=Function.prototype.call,n=Array.prototype.some;ne.exports=function(r,t){var f,o=arguments[2],i,g,p,y,c,b,l;if(e(r)||w(r)?f="array":M(r)?f="string":r=T(r),v(t),g=function(){p=!0},f==="array"){n.call(r,function(_){return a.call(t,o,_,g),p});return}if(f==="string"){for(c=r.length,y=0;y<c&&(b=r[y],y+1<c&&(l=b.charCodeAt(0),l>=55296&&l<=56319&&(b+=r[++y])),a.call(t,o,b,g),!p);++y);return}for(i=r.next();!i.done;){if(a.call(t,o,i.value,g),p)return;i=r.next()}}},{"./get":170,"es5-ext/function/is-arguments":135,"es5-ext/object/valid-callable":160,"es5-ext/string/is-string":166}],170:[function(d,ne,ae){var w=d("es5-ext/function/is-arguments"),v=d("es5-ext/string/is-string"),M=d("./array"),T=d("./string"),e=d("./valid-iterable"),a=d("es6-symbol").iterator;ne.exports=function(n){return typeof e(n)[a]=="function"?n[a]():w(n)?new M(n):v(n)?new T(n):new M(n)}},{"./array":168,"./string":173,"./valid-iterable":174,"es5-ext/function/is-arguments":135,"es5-ext/string/is-string":166,"es6-symbol":175}],171:[function(d,ne,ae){var w=d("es5-ext/array/#/clear"),v=d("es5-ext/object/assign"),M=d("es5-ext/object/valid-callable"),T=d("es5-ext/object/valid-value"),e=d("d"),a=d("d/auto-bind"),n=d("es6-symbol"),r=Object.defineProperty,t=Object.defineProperties,f;ne.exports=f=function(o,i){if(!(this instanceof f))throw new TypeError("Constructor requires 'new'");t(this,{__list__:e("w",T(o)),__context__:e("w",i),__nextIndex__:e("w",0)}),i&&(M(i.on),i.on("_add",this._onAdd),i.on("_delete",this._onDelete),i.on("_clear",this._onClear))},delete f.prototype.constructor,t(f.prototype,v({_next:e(function(){var o;if(!!this.__list__){if(this.__redo__&&(o=this.__redo__.shift(),o!==void 0))return o;if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:e(function(){return this._createResult(this._next())}),_createResult:e(function(o){return o===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(o)}}),_resolve:e(function(o){return this.__list__[o]}),_unBind:e(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:e(function(){return"[object "+(this[n.toStringTag]||"Object")+"]"})},a({_onAdd:e(function(o){if(!(o>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__){r(this,"__redo__",e("c",[o]));return}this.__redo__.forEach(function(i,g){i>=o&&(this.__redo__[g]=++i)},this),this.__redo__.push(o)}}),_onDelete:e(function(o){var i;o>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(i=this.__redo__.indexOf(o),i!==-1&&this.__redo__.splice(i,1),this.__redo__.forEach(function(g,p){g>o&&(this.__redo__[p]=--g)},this)))}),_onClear:e(function(){this.__redo__&&w.call(this.__redo__),this.__nextIndex__=0})}))),r(f.prototype,n.iterator,e(function(){return this}))},{d:106,"d/auto-bind":105,"es5-ext/array/#/clear":131,"es5-ext/object/assign":144,"es5-ext/object/valid-callable":160,"es5-ext/object/valid-value":162,"es6-symbol":175}],172:[function(d,ne,ae){var w=d("es5-ext/function/is-arguments"),v=d("es5-ext/object/is-value"),M=d("es5-ext/string/is-string"),T=d("es6-symbol").iterator,e=Array.isArray;ne.exports=function(a){return v(a)?e(a)||M(a)||w(a)?!0:typeof a[T]=="function":!1}},{"es5-ext/function/is-arguments":135,"es5-ext/object/is-value":151,"es5-ext/string/is-string":166,"es6-symbol":175}],173:[function(d,ne,ae){var w=d("es5-ext/object/set-prototype-of"),v=d("d"),M=d("es6-symbol"),T=d("./"),e=Object.defineProperty,a;a=ne.exports=function(n){if(!(this instanceof a))throw new TypeError("Constructor requires 'new'");n=String(n),T.call(this,n),e(this,"__length__",v("",n.length))},w&&w(a,T),delete a.prototype.constructor,a.prototype=Object.create(T.prototype,{_next:v(function(){if(!!this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:v(function(n){var r=this.__list__[n],t;return this.__nextIndex__===this.__length__?r:(t=r.charCodeAt(0),t>=55296&&t<=56319?r+this.__list__[this.__nextIndex__++]:r)})}),e(a.prototype,M.toStringTag,v("c","String Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es6-symbol":175}],174:[function(d,ne,ae){var w=d("./is-iterable");ne.exports=function(v){if(!w(v))throw new TypeError(v+" is not iterable");return v}},{"./is-iterable":172}],175:[function(d,ne,ae){ne.exports=d("./is-implemented")()?d("ext/global-this").Symbol:d("./polyfill")},{"./is-implemented":176,"./polyfill":181,"ext/global-this":188}],176:[function(d,ne,ae){var w=d("ext/global-this"),v={object:!0,symbol:!0};ne.exports=function(){var M=w.Symbol,T;if(typeof M!="function")return!1;T=M("test symbol");try{String(T)}catch{return!1}return!(!v[typeof M.iterator]||!v[typeof M.toPrimitive]||!v[typeof M.toStringTag])}},{"ext/global-this":188}],177:[function(d,ne,ae){ne.exports=function(w){return w?typeof w=="symbol"?!0:!w.constructor||w.constructor.name!=="Symbol"?!1:w[w.constructor.toStringTag]==="Symbol":!1}},{}],178:[function(d,ne,ae){var w=d("d"),v=Object.create,M=Object.defineProperty,T=Object.prototype,e=v(null);ne.exports=function(a){for(var n=0,r,t;e[a+(n||"")];)++n;return a+=n||"",e[a]=!0,r="@@"+a,M(T,r,w.gs(null,function(f){t||(t=!0,M(this,r,w(f)),t=!1)})),r}},{d:106}],179:[function(d,ne,ae){var w=d("d"),v=d("ext/global-this").Symbol;ne.exports=function(M){return Object.defineProperties(M,{hasInstance:w("",v&&v.hasInstance||M("hasInstance")),isConcatSpreadable:w("",v&&v.isConcatSpreadable||M("isConcatSpreadable")),iterator:w("",v&&v.iterator||M("iterator")),match:w("",v&&v.match||M("match")),replace:w("",v&&v.replace||M("replace")),search:w("",v&&v.search||M("search")),species:w("",v&&v.species||M("species")),split:w("",v&&v.split||M("split")),toPrimitive:w("",v&&v.toPrimitive||M("toPrimitive")),toStringTag:w("",v&&v.toStringTag||M("toStringTag")),unscopables:w("",v&&v.unscopables||M("unscopables"))})}},{d:106,"ext/global-this":188}],180:[function(d,ne,ae){var w=d("d"),v=d("../../../validate-symbol"),M=Object.create(null);ne.exports=function(T){return Object.defineProperties(T,{for:w(function(e){return M[e]?M[e]:M[e]=T(String(e))}),keyFor:w(function(e){var a;v(e);for(a in M)if(M[a]===e)return a})})}},{"../../../validate-symbol":182,d:106}],181:[function(d,ne,ae){var w=d("d"),v=d("./validate-symbol"),M=d("ext/global-this").Symbol,T=d("./lib/private/generate-name"),e=d("./lib/private/setup/standard-symbols"),a=d("./lib/private/setup/symbol-registry"),n=Object.create,r=Object.defineProperties,t=Object.defineProperty,f,o,i;if(typeof M=="function")try{String(M()),i=!0}catch{}else M=null;o=function(p){if(this instanceof o)throw new TypeError("Symbol is not a constructor");return f(p)},ne.exports=f=function g(p){var y;if(this instanceof g)throw new TypeError("Symbol is not a constructor");return i?M(p):(y=n(o.prototype),p=p===void 0?"":String(p),r(y,{__description__:w("",p),__name__:w("",T(p))}))},e(f),a(f),r(o.prototype,{constructor:w(f),toString:w("",function(){return this.__name__})}),r(f.prototype,{toString:w(function(){return"Symbol ("+v(this).__description__+")"}),valueOf:w(function(){return v(this)})}),t(f.prototype,f.toPrimitive,w("",function(){var g=v(this);return typeof g=="symbol"?g:g.toString()})),t(f.prototype,f.toStringTag,w("c","Symbol")),t(o.prototype,f.toStringTag,w("c",f.prototype[f.toStringTag])),t(o.prototype,f.toPrimitive,w("c",f.prototype[f.toPrimitive]))},{"./lib/private/generate-name":178,"./lib/private/setup/standard-symbols":179,"./lib/private/setup/symbol-registry":180,"./validate-symbol":182,d:106,"ext/global-this":188}],182:[function(d,ne,ae){var w=d("./is-symbol");ne.exports=function(v){if(!w(v))throw new TypeError(v+" is not a symbol");return v}},{"./is-symbol":177}],183:[function(d,ne,ae){ne.exports=d("./is-implemented")()?WeakMap:d("./polyfill")},{"./is-implemented":184,"./polyfill":186}],184:[function(d,ne,ae){ne.exports=function(){var w,v;if(typeof WeakMap!="function")return!1;try{w=new WeakMap([[v={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return!(String(w)!=="[object WeakMap]"||typeof w.set!="function"||w.set({},1)!==w||typeof w.delete!="function"||typeof w.has!="function"||w.get(v)!=="one")}},{}],185:[function(d,ne,ae){ne.exports=function(){return typeof WeakMap!="function"?!1:Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"}()},{}],186:[function(d,ne,ae){var w=d("es5-ext/object/is-value"),v=d("es5-ext/object/set-prototype-of"),M=d("es5-ext/object/valid-object"),T=d("es5-ext/object/valid-value"),e=d("es5-ext/string/random-uniq"),a=d("d"),n=d("es6-iterator/get"),r=d("es6-iterator/for-of"),t=d("es6-symbol").toStringTag,f=d("./is-native-implemented"),o=Array.isArray,i=Object.defineProperty,g=Object.prototype.hasOwnProperty,p=Object.getPrototypeOf,y;ne.exports=y=function(){var c=arguments[0],b;if(!(this instanceof y))throw new TypeError("Constructor requires 'new'");return b=f&&v&&WeakMap!==y?v(new WeakMap,p(this)):this,w(c)&&(o(c)||(c=n(c))),i(b,"__weakMapData__",a("c","$weakMap$"+e())),c&&r(c,function(l){T(l),b.set(l[0],l[1])}),b},f&&(v&&v(y,WeakMap),y.prototype=Object.create(WeakMap.prototype,{constructor:a(y)})),Object.defineProperties(y.prototype,{delete:a(function(c){return g.call(M(c),this.__weakMapData__)?(delete c[this.__weakMapData__],!0):!1}),get:a(function(c){if(!!g.call(M(c),this.__weakMapData__))return c[this.__weakMapData__]}),has:a(function(c){return g.call(M(c),this.__weakMapData__)}),set:a(function(c,b){return i(M(c),this.__weakMapData__,a("c",b)),this}),toString:a(function(){return"[object WeakMap]"})}),i(y.prototype,t,a("c","WeakMap"))},{"./is-native-implemented":185,d:106,"es5-ext/object/is-value":151,"es5-ext/object/set-prototype-of":157,"es5-ext/object/valid-object":161,"es5-ext/object/valid-value":162,"es5-ext/string/random-uniq":167,"es6-iterator/for-of":169,"es6-iterator/get":170,"es6-symbol":175}],187:[function(d,ne,ae){var w=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};ne.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return w()}try{return __global__||w()}finally{delete Object.prototype.__global__}}()},{}],188:[function(d,ne,ae){ne.exports=d("./is-implemented")()?globalThis:d("./implementation")},{"./implementation":187,"./is-implemented":189}],189:[function(d,ne,ae){ne.exports=function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array}},{}],190:[function(d,ne,ae){var w=d("is-string-blank");ne.exports=function(v){var M=typeof v;if(M==="string"){var T=v;if(v=+v,v===0&&w(T))return!1}else if(M!=="number")return!1;return v-v<1}},{"is-string-blank":237}],191:[function(d,ne,ae){var w=d("dtype");ne.exports=v;function v(M,T,e){if(!M)throw new TypeError("must specify data as first parameter");if(e=+(e||0)|0,Array.isArray(M)&&M[0]&&typeof M[0][0]=="number"){var a=M[0].length,n=M.length*a,r,t,f,o;(!T||typeof T=="string")&&(T=new(w(T||"float32"))(n+e));var i=T.length-e;if(n!==i)throw new Error("source length "+n+" ("+a+"x"+M.length+") does not match destination length "+i);for(r=0,f=e;r<M.length;r++)for(t=0;t<a;t++)T[f++]=M[r][t]===null?NaN:M[r][t]}else if(!T||typeof T=="string"){var g=w(T||"float32");if(Array.isArray(M)||T==="array")for(T=new g(M.length+e),r=0,f=e,o=T.length;f<o;f++,r++)T[f]=M[r]===null?NaN:M[r];else e===0?T=new g(M):(T=new g(M.length+e),T.set(M,e))}else T.set(M,e);return T}},{dtype:127}],192:[function(d,ne,ae){var w=d("css-font/stringify"),v=[32,126];ne.exports=M;function M(T){T=T||{};var e=T.shape?T.shape:T.canvas?[T.canvas.width,T.canvas.height]:[512,512],a=T.canvas||document.createElement("canvas"),n=T.font,r=typeof T.step=="number"?[T.step,T.step]:T.step||[32,32],t=T.chars||v;if(n&&typeof n!="string"&&(n=w(n)),!Array.isArray(t))t=String(t).split("");else if(t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number"){for(var f=[],o=t[0],i=0;o<=t[1];o++)f[i++]=String.fromCharCode(o);t=f}e=e.slice(),a.width=e[0],a.height=e[1];var g=a.getContext("2d");g.fillStyle="#000",g.fillRect(0,0,a.width,a.height),g.font=n,g.textAlign="center",g.textBaseline="middle",g.fillStyle="#fff";for(var p=r[0]/2,y=r[1]/2,o=0;o<t.length;o++)g.fillText(t[o],p,y),(p+=r[0])>e[0]-r[0]/2&&(p=r[0]/2,y+=r[1]);return a}},{"css-font/stringify":102}],193:[function(d,ne,ae){ne.exports=w,w.canvas=document.createElement("canvas"),w.cache={};function w(o,a){a||(a={}),(typeof o=="string"||Array.isArray(o))&&(a.family=o);var n=Array.isArray(a.family)?a.family.join(", "):a.family;if(!n)throw Error("`family` must be defined");var r=a.size||a.fontSize||a.em||48,t=a.weight||a.fontWeight||"",f=a.style||a.fontStyle||"",o=[f,t,r].join(" ")+"px "+n,i=a.origin||"top";if(w.cache[n]&&r<=w.cache[n].em)return v(w.cache[n],i);var g=a.canvas||w.canvas,p=g.getContext("2d"),y={upper:a.upper!==void 0?a.upper:"H",lower:a.lower!==void 0?a.lower:"x",descent:a.descent!==void 0?a.descent:"p",ascent:a.ascent!==void 0?a.ascent:"h",tittle:a.tittle!==void 0?a.tittle:"i",overshoot:a.overshoot!==void 0?a.overshoot:"O"},c=Math.ceil(r*1.5);g.height=c,g.width=c*.5,p.font=o;var b="H",l={top:0};p.clearRect(0,0,c,c),p.textBaseline="top",p.fillStyle="black",p.fillText(b,0,0);var _=M(p.getImageData(0,0,c,c));p.clearRect(0,0,c,c),p.textBaseline="bottom",p.fillText(b,0,c);var s=M(p.getImageData(0,0,c,c));l.lineHeight=l.bottom=c-s+_,p.clearRect(0,0,c,c),p.textBaseline="alphabetic",p.fillText(b,0,c);var A=M(p.getImageData(0,0,c,c)),m=c-A-1+_;l.baseline=l.alphabetic=m,p.clearRect(0,0,c,c),p.textBaseline="middle",p.fillText(b,0,c*.5);var h=M(p.getImageData(0,0,c,c));l.median=l.middle=c-h-1+_-c*.5,p.clearRect(0,0,c,c),p.textBaseline="hanging",p.fillText(b,0,c*.5);var x=M(p.getImageData(0,0,c,c));l.hanging=c-x-1+_-c*.5,p.clearRect(0,0,c,c),p.textBaseline="ideographic",p.fillText(b,0,c);var u=M(p.getImageData(0,0,c,c));if(l.ideographic=c-u-1+_,y.upper&&(p.clearRect(0,0,c,c),p.textBaseline="top",p.fillText(y.upper,0,0),l.upper=M(p.getImageData(0,0,c,c)),l.capHeight=l.baseline-l.upper),y.lower&&(p.clearRect(0,0,c,c),p.textBaseline="top",p.fillText(y.lower,0,0),l.lower=M(p.getImageData(0,0,c,c)),l.xHeight=l.baseline-l.lower),y.tittle&&(p.clearRect(0,0,c,c),p.textBaseline="top",p.fillText(y.tittle,0,0),l.tittle=M(p.getImageData(0,0,c,c))),y.ascent&&(p.clearRect(0,0,c,c),p.textBaseline="top",p.fillText(y.ascent,0,0),l.ascent=M(p.getImageData(0,0,c,c))),y.descent&&(p.clearRect(0,0,c,c),p.textBaseline="top",p.fillText(y.descent,0,0),l.descent=T(p.getImageData(0,0,c,c))),y.overshoot){p.clearRect(0,0,c,c),p.textBaseline="top",p.fillText(y.overshoot,0,0);var L=T(p.getImageData(0,0,c,c));l.overshoot=L-m}for(var S in l)l[S]/=r;return l.em=r,w.cache[n]=l,v(l,i)}function v(e,a){var n={};typeof a=="string"&&(a=e[a]);for(var r in e)r!=="em"&&(n[r]=e[r]-a);return n}function M(e){for(var a=e.height,n=e.data,r=3;r<n.length;r+=4)if(n[r]!==0)return Math.floor((r-3)*.25/a)}function T(e){for(var a=e.height,n=e.data,r=n.length-1;r>0;r-=4)if(n[r]!==0)return Math.floor((r-3)*.25/a)}},{}],194:[function(d,ne,ae){ne.exports=w;function w(v,M){if(typeof v!="string")throw new TypeError("must specify type string");if(M=M||{},typeof document>"u"&&!M.canvas)return null;var T=M.canvas||document.createElement("canvas");typeof M.width=="number"&&(T.width=M.width),typeof M.height=="number"&&(T.height=M.height);var e=M,a;try{var n=[v];v.indexOf("webgl")===0&&n.push("experimental-"+v);for(var r=0;r<n.length;r++)if(a=T.getContext(n[r],e),a)return a}catch{a=null}return a||null}},{}],195:[function(d,ne,ae){ne.exports=w;function w(v,M){var T=M[0],e=M[1],a=M[2],n=M[3],r=M[4],t=M[5],f=M[6],o=M[7],i=M[8],g=M[9],p=M[10],y=M[11],c=M[12],b=M[13],l=M[14],_=M[15];return v[0]=t*(p*_-y*l)-g*(f*_-o*l)+b*(f*y-o*p),v[1]=-(e*(p*_-y*l)-g*(a*_-n*l)+b*(a*y-n*p)),v[2]=e*(f*_-o*l)-t*(a*_-n*l)+b*(a*o-n*f),v[3]=-(e*(f*y-o*p)-t*(a*y-n*p)+g*(a*o-n*f)),v[4]=-(r*(p*_-y*l)-i*(f*_-o*l)+c*(f*y-o*p)),v[5]=T*(p*_-y*l)-i*(a*_-n*l)+c*(a*y-n*p),v[6]=-(T*(f*_-o*l)-r*(a*_-n*l)+c*(a*o-n*f)),v[7]=T*(f*y-o*p)-r*(a*y-n*p)+i*(a*o-n*f),v[8]=r*(g*_-y*b)-i*(t*_-o*b)+c*(t*y-o*g),v[9]=-(T*(g*_-y*b)-i*(e*_-n*b)+c*(e*y-n*g)),v[10]=T*(t*_-o*b)-r*(e*_-n*b)+c*(e*o-n*t),v[11]=-(T*(t*y-o*g)-r*(e*y-n*g)+i*(e*o-n*t)),v[12]=-(r*(g*l-p*b)-i*(t*l-f*b)+c*(t*p-f*g)),v[13]=T*(g*l-p*b)-i*(e*l-a*b)+c*(e*p-a*g),v[14]=-(T*(t*l-f*b)-r*(e*l-a*b)+c*(e*f-a*t)),v[15]=T*(t*p-f*g)-r*(e*p-a*g)+i*(e*f-a*t),v}},{}],196:[function(d,ne,ae){ne.exports=w;function w(v){var M=new Float32Array(16);return M[0]=v[0],M[1]=v[1],M[2]=v[2],M[3]=v[3],M[4]=v[4],M[5]=v[5],M[6]=v[6],M[7]=v[7],M[8]=v[8],M[9]=v[9],M[10]=v[10],M[11]=v[11],M[12]=v[12],M[13]=v[13],M[14]=v[14],M[15]=v[15],M}},{}],197:[function(d,ne,ae){ne.exports=w;function w(v,M){return v[0]=M[0],v[1]=M[1],v[2]=M[2],v[3]=M[3],v[4]=M[4],v[5]=M[5],v[6]=M[6],v[7]=M[7],v[8]=M[8],v[9]=M[9],v[10]=M[10],v[11]=M[11],v[12]=M[12],v[13]=M[13],v[14]=M[14],v[15]=M[15],v}},{}],198:[function(d,ne,ae){ne.exports=w;function w(){var v=new Float32Array(16);return v[0]=1,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=1,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=1,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v}},{}],199:[function(d,ne,ae){ne.exports=w;function w(v){var M=v[0],T=v[1],e=v[2],a=v[3],n=v[4],r=v[5],t=v[6],f=v[7],o=v[8],i=v[9],g=v[10],p=v[11],y=v[12],c=v[13],b=v[14],l=v[15],_=M*r-T*n,s=M*t-e*n,A=M*f-a*n,m=T*t-e*r,h=T*f-a*r,x=e*f-a*t,u=o*c-i*y,L=o*b-g*y,S=o*l-p*y,k=i*b-g*c,P=i*l-p*c,z=g*l-p*b;return _*z-s*P+A*k+m*S-h*L+x*u}},{}],200:[function(d,ne,ae){ne.exports=w;function w(v,M){var T=M[0],e=M[1],a=M[2],n=M[3],r=T+T,t=e+e,f=a+a,o=T*r,i=e*r,g=e*t,p=a*r,y=a*t,c=a*f,b=n*r,l=n*t,_=n*f;return v[0]=1-g-c,v[1]=i+_,v[2]=p-l,v[3]=0,v[4]=i-_,v[5]=1-o-c,v[6]=y+b,v[7]=0,v[8]=p+l,v[9]=y-b,v[10]=1-o-g,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v}},{}],201:[function(d,ne,ae){ne.exports=w;function w(v,M,T){var e,a,n,r=T[0],t=T[1],f=T[2],o=Math.sqrt(r*r+t*t+f*f);return Math.abs(o)<1e-6?null:(o=1/o,r*=o,t*=o,f*=o,e=Math.sin(M),a=Math.cos(M),n=1-a,v[0]=r*r*n+a,v[1]=t*r*n+f*e,v[2]=f*r*n-t*e,v[3]=0,v[4]=r*t*n-f*e,v[5]=t*t*n+a,v[6]=f*t*n+r*e,v[7]=0,v[8]=r*f*n+t*e,v[9]=t*f*n-r*e,v[10]=f*f*n+a,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v)}},{}],202:[function(d,ne,ae){ne.exports=w;function w(v,M,T){var e=M[0],a=M[1],n=M[2],r=M[3],t=e+e,f=a+a,o=n+n,i=e*t,g=e*f,p=e*o,y=a*f,c=a*o,b=n*o,l=r*t,_=r*f,s=r*o;return v[0]=1-(y+b),v[1]=g+s,v[2]=p-_,v[3]=0,v[4]=g-s,v[5]=1-(i+b),v[6]=c+l,v[7]=0,v[8]=p+_,v[9]=c-l,v[10]=1-(i+y),v[11]=0,v[12]=T[0],v[13]=T[1],v[14]=T[2],v[15]=1,v}},{}],203:[function(d,ne,ae){ne.exports=w;function w(v,M){return v[0]=M[0],v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=M[1],v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=M[2],v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v}},{}],204:[function(d,ne,ae){ne.exports=w;function w(v,M){return v[0]=1,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=1,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=1,v[11]=0,v[12]=M[0],v[13]=M[1],v[14]=M[2],v[15]=1,v}},{}],205:[function(d,ne,ae){ne.exports=w;function w(v,M){var T=Math.sin(M),e=Math.cos(M);return v[0]=1,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=e,v[6]=T,v[7]=0,v[8]=0,v[9]=-T,v[10]=e,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v}},{}],206:[function(d,ne,ae){ne.exports=w;function w(v,M){var T=Math.sin(M),e=Math.cos(M);return v[0]=e,v[1]=0,v[2]=-T,v[3]=0,v[4]=0,v[5]=1,v[6]=0,v[7]=0,v[8]=T,v[9]=0,v[10]=e,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v}},{}],207:[function(d,ne,ae){ne.exports=w;function w(v,M){var T=Math.sin(M),e=Math.cos(M);return v[0]=e,v[1]=T,v[2]=0,v[3]=0,v[4]=-T,v[5]=e,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=1,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v}},{}],208:[function(d,ne,ae){ne.exports=w;function w(v,M,T,e,a,n,r){var t=1/(T-M),f=1/(a-e),o=1/(n-r);return v[0]=n*2*t,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=n*2*f,v[6]=0,v[7]=0,v[8]=(T+M)*t,v[9]=(a+e)*f,v[10]=(r+n)*o,v[11]=-1,v[12]=0,v[13]=0,v[14]=r*n*2*o,v[15]=0,v}},{}],209:[function(d,ne,ae){ne.exports=w;function w(v){return v[0]=1,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=1,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=1,v[11]=0,v[12]=0,v[13]=0,v[14]=0,v[15]=1,v}},{}],210:[function(d,ne,ae){ne.exports={create:d("./create"),clone:d("./clone"),copy:d("./copy"),identity:d("./identity"),transpose:d("./transpose"),invert:d("./invert"),adjoint:d("./adjoint"),determinant:d("./determinant"),multiply:d("./multiply"),translate:d("./translate"),scale:d("./scale"),rotate:d("./rotate"),rotateX:d("./rotateX"),rotateY:d("./rotateY"),rotateZ:d("./rotateZ"),fromRotation:d("./fromRotation"),fromRotationTranslation:d("./fromRotationTranslation"),fromScaling:d("./fromScaling"),fromTranslation:d("./fromTranslation"),fromXRotation:d("./fromXRotation"),fromYRotation:d("./fromYRotation"),fromZRotation:d("./fromZRotation"),fromQuat:d("./fromQuat"),frustum:d("./frustum"),perspective:d("./perspective"),perspectiveFromFieldOfView:d("./perspectiveFromFieldOfView"),ortho:d("./ortho"),lookAt:d("./lookAt"),str:d("./str")}},{"./adjoint":195,"./clone":196,"./copy":197,"./create":198,"./determinant":199,"./fromQuat":200,"./fromRotation":201,"./fromRotationTranslation":202,"./fromScaling":203,"./fromTranslation":204,"./fromXRotation":205,"./fromYRotation":206,"./fromZRotation":207,"./frustum":208,"./identity":209,"./invert":211,"./lookAt":212,"./multiply":213,"./ortho":214,"./perspective":215,"./perspectiveFromFieldOfView":216,"./rotate":217,"./rotateX":218,"./rotateY":219,"./rotateZ":220,"./scale":221,"./str":222,"./translate":223,"./transpose":224}],211:[function(d,ne,ae){ne.exports=w;function w(v,M){var T=M[0],e=M[1],a=M[2],n=M[3],r=M[4],t=M[5],f=M[6],o=M[7],i=M[8],g=M[9],p=M[10],y=M[11],c=M[12],b=M[13],l=M[14],_=M[15],s=T*t-e*r,A=T*f-a*r,m=T*o-n*r,h=e*f-a*t,x=e*o-n*t,u=a*o-n*f,L=i*b-g*c,S=i*l-p*c,k=i*_-y*c,P=g*l-p*b,z=g*_-y*b,I=p*_-y*l,D=s*I-A*z+m*P+h*k-x*S+u*L;return D?(D=1/D,v[0]=(t*I-f*z+o*P)*D,v[1]=(a*z-e*I-n*P)*D,v[2]=(b*u-l*x+_*h)*D,v[3]=(p*x-g*u-y*h)*D,v[4]=(f*k-r*I-o*S)*D,v[5]=(T*I-a*k+n*S)*D,v[6]=(l*m-c*u-_*A)*D,v[7]=(i*u-p*m+y*A)*D,v[8]=(r*z-t*k+o*L)*D,v[9]=(e*k-T*z-n*L)*D,v[10]=(c*x-b*m+_*s)*D,v[11]=(g*m-i*x-y*s)*D,v[12]=(t*S-r*P-f*L)*D,v[13]=(T*P-e*S+a*L)*D,v[14]=(b*A-c*h-l*s)*D,v[15]=(i*h-g*A+p*s)*D,v):null}},{}],212:[function(d,ne,ae){var w=d("./identity");ne.exports=v;function v(M,T,e,a){var n,r,t,f,o,i,g,p,y,c,b=T[0],l=T[1],_=T[2],s=a[0],A=a[1],m=a[2],h=e[0],x=e[1],u=e[2];return Math.abs(b-h)<1e-6&&Math.abs(l-x)<1e-6&&Math.abs(_-u)<1e-6?w(M):(g=b-h,p=l-x,y=_-u,c=1/Math.sqrt(g*g+p*p+y*y),g*=c,p*=c,y*=c,n=A*y-m*p,r=m*g-s*y,t=s*p-A*g,c=Math.sqrt(n*n+r*r+t*t),c?(c=1/c,n*=c,r*=c,t*=c):(n=0,r=0,t=0),f=p*t-y*r,o=y*n-g*t,i=g*r-p*n,c=Math.sqrt(f*f+o*o+i*i),c?(c=1/c,f*=c,o*=c,i*=c):(f=0,o=0,i=0),M[0]=n,M[1]=f,M[2]=g,M[3]=0,M[4]=r,M[5]=o,M[6]=p,M[7]=0,M[8]=t,M[9]=i,M[10]=y,M[11]=0,M[12]=-(n*b+r*l+t*_),M[13]=-(f*b+o*l+i*_),M[14]=-(g*b+p*l+y*_),M[15]=1,M)}},{"./identity":209}],213:[function(d,ne,ae){ne.exports=w;function w(v,M,T){var e=M[0],a=M[1],n=M[2],r=M[3],t=M[4],f=M[5],o=M[6],i=M[7],g=M[8],p=M[9],y=M[10],c=M[11],b=M[12],l=M[13],_=M[14],s=M[15],A=T[0],m=T[1],h=T[2],x=T[3];return v[0]=A*e+m*t+h*g+x*b,v[1]=A*a+m*f+h*p+x*l,v[2]=A*n+m*o+h*y+x*_,v[3]=A*r+m*i+h*c+x*s,A=T[4],m=T[5],h=T[6],x=T[7],v[4]=A*e+m*t+h*g+x*b,v[5]=A*a+m*f+h*p+x*l,v[6]=A*n+m*o+h*y+x*_,v[7]=A*r+m*i+h*c+x*s,A=T[8],m=T[9],h=T[10],x=T[11],v[8]=A*e+m*t+h*g+x*b,v[9]=A*a+m*f+h*p+x*l,v[10]=A*n+m*o+h*y+x*_,v[11]=A*r+m*i+h*c+x*s,A=T[12],m=T[13],h=T[14],x=T[15],v[12]=A*e+m*t+h*g+x*b,v[13]=A*a+m*f+h*p+x*l,v[14]=A*n+m*o+h*y+x*_,v[15]=A*r+m*i+h*c+x*s,v}},{}],214:[function(d,ne,ae){ne.exports=w;function w(v,M,T,e,a,n,r){var t=1/(M-T),f=1/(e-a),o=1/(n-r);return v[0]=-2*t,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=-2*f,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=2*o,v[11]=0,v[12]=(M+T)*t,v[13]=(a+e)*f,v[14]=(r+n)*o,v[15]=1,v}},{}],215:[function(d,ne,ae){ne.exports=w;function w(v,M,T,e,a){var n=1/Math.tan(M/2),r=1/(e-a);return v[0]=n/T,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=n,v[6]=0,v[7]=0,v[8]=0,v[9]=0,v[10]=(a+e)*r,v[11]=-1,v[12]=0,v[13]=0,v[14]=2*a*e*r,v[15]=0,v}},{}],216:[function(d,ne,ae){ne.exports=w;function w(v,M,T,e){var a=Math.tan(M.upDegrees*Math.PI/180),n=Math.tan(M.downDegrees*Math.PI/180),r=Math.tan(M.leftDegrees*Math.PI/180),t=Math.tan(M.rightDegrees*Math.PI/180),f=2/(r+t),o=2/(a+n);return v[0]=f,v[1]=0,v[2]=0,v[3]=0,v[4]=0,v[5]=o,v[6]=0,v[7]=0,v[8]=-((r-t)*f*.5),v[9]=(a-n)*o*.5,v[10]=e/(T-e),v[11]=-1,v[12]=0,v[13]=0,v[14]=e*T/(T-e),v[15]=0,v}},{}],217:[function(d,ne,ae){ne.exports=w;function w(v,M,T,e){var a=e[0],n=e[1],r=e[2],t=Math.sqrt(a*a+n*n+r*r),f,o,i,g,p,y,c,b,l,_,s,A,m,h,x,u,L,S,k,P,z,I,D,R;return Math.abs(t)<1e-6?null:(t=1/t,a*=t,n*=t,r*=t,f=Math.sin(T),o=Math.cos(T),i=1-o,g=M[0],p=M[1],y=M[2],c=M[3],b=M[4],l=M[5],_=M[6],s=M[7],A=M[8],m=M[9],h=M[10],x=M[11],u=a*a*i+o,L=n*a*i+r*f,S=r*a*i-n*f,k=a*n*i-r*f,P=n*n*i+o,z=r*n*i+a*f,I=a*r*i+n*f,D=n*r*i-a*f,R=r*r*i+o,v[0]=g*u+b*L+A*S,v[1]=p*u+l*L+m*S,v[2]=y*u+_*L+h*S,v[3]=c*u+s*L+x*S,v[4]=g*k+b*P+A*z,v[5]=p*k+l*P+m*z,v[6]=y*k+_*P+h*z,v[7]=c*k+s*P+x*z,v[8]=g*I+b*D+A*R,v[9]=p*I+l*D+m*R,v[10]=y*I+_*D+h*R,v[11]=c*I+s*D+x*R,M!==v&&(v[12]=M[12],v[13]=M[13],v[14]=M[14],v[15]=M[15]),v)}},{}],218:[function(d,ne,ae){ne.exports=w;function w(v,M,T){var e=Math.sin(T),a=Math.cos(T),n=M[4],r=M[5],t=M[6],f=M[7],o=M[8],i=M[9],g=M[10],p=M[11];return M!==v&&(v[0]=M[0],v[1]=M[1],v[2]=M[2],v[3]=M[3],v[12]=M[12],v[13]=M[13],v[14]=M[14],v[15]=M[15]),v[4]=n*a+o*e,v[5]=r*a+i*e,v[6]=t*a+g*e,v[7]=f*a+p*e,v[8]=o*a-n*e,v[9]=i*a-r*e,v[10]=g*a-t*e,v[11]=p*a-f*e,v}},{}],219:[function(d,ne,ae){ne.exports=w;function w(v,M,T){var e=Math.sin(T),a=Math.cos(T),n=M[0],r=M[1],t=M[2],f=M[3],o=M[8],i=M[9],g=M[10],p=M[11];return M!==v&&(v[4]=M[4],v[5]=M[5],v[6]=M[6],v[7]=M[7],v[12]=M[12],v[13]=M[13],v[14]=M[14],v[15]=M[15]),v[0]=n*a-o*e,v[1]=r*a-i*e,v[2]=t*a-g*e,v[3]=f*a-p*e,v[8]=n*e+o*a,v[9]=r*e+i*a,v[10]=t*e+g*a,v[11]=f*e+p*a,v}},{}],220:[function(d,ne,ae){ne.exports=w;function w(v,M,T){var e=Math.sin(T),a=Math.cos(T),n=M[0],r=M[1],t=M[2],f=M[3],o=M[4],i=M[5],g=M[6],p=M[7];return M!==v&&(v[8]=M[8],v[9]=M[9],v[10]=M[10],v[11]=M[11],v[12]=M[12],v[13]=M[13],v[14]=M[14],v[15]=M[15]),v[0]=n*a+o*e,v[1]=r*a+i*e,v[2]=t*a+g*e,v[3]=f*a+p*e,v[4]=o*a-n*e,v[5]=i*a-r*e,v[6]=g*a-t*e,v[7]=p*a-f*e,v}},{}],221:[function(d,ne,ae){ne.exports=w;function w(v,M,T){var e=T[0],a=T[1],n=T[2];return v[0]=M[0]*e,v[1]=M[1]*e,v[2]=M[2]*e,v[3]=M[3]*e,v[4]=M[4]*a,v[5]=M[5]*a,v[6]=M[6]*a,v[7]=M[7]*a,v[8]=M[8]*n,v[9]=M[9]*n,v[10]=M[10]*n,v[11]=M[11]*n,v[12]=M[12],v[13]=M[13],v[14]=M[14],v[15]=M[15],v}},{}],222:[function(d,ne,ae){ne.exports=w;function w(v){return"mat4("+v[0]+", "+v[1]+", "+v[2]+", "+v[3]+", "+v[4]+", "+v[5]+", "+v[6]+", "+v[7]+", "+v[8]+", "+v[9]+", "+v[10]+", "+v[11]+", "+v[12]+", "+v[13]+", "+v[14]+", "+v[15]+")"}},{}],223:[function(d,ne,ae){ne.exports=w;function w(v,M,T){var e=T[0],a=T[1],n=T[2],r,t,f,o,i,g,p,y,c,b,l,_;return M===v?(v[12]=M[0]*e+M[4]*a+M[8]*n+M[12],v[13]=M[1]*e+M[5]*a+M[9]*n+M[13],v[14]=M[2]*e+M[6]*a+M[10]*n+M[14],v[15]=M[3]*e+M[7]*a+M[11]*n+M[15]):(r=M[0],t=M[1],f=M[2],o=M[3],i=M[4],g=M[5],p=M[6],y=M[7],c=M[8],b=M[9],l=M[10],_=M[11],v[0]=r,v[1]=t,v[2]=f,v[3]=o,v[4]=i,v[5]=g,v[6]=p,v[7]=y,v[8]=c,v[9]=b,v[10]=l,v[11]=_,v[12]=r*e+i*a+c*n+M[12],v[13]=t*e+g*a+b*n+M[13],v[14]=f*e+p*a+l*n+M[14],v[15]=o*e+y*a+_*n+M[15]),v}},{}],224:[function(d,ne,ae){ne.exports=w;function w(v,M){if(v===M){var T=M[1],e=M[2],a=M[3],n=M[6],r=M[7],t=M[11];v[1]=M[4],v[2]=M[8],v[3]=M[12],v[4]=T,v[6]=M[9],v[7]=M[13],v[8]=e,v[9]=n,v[11]=M[14],v[12]=a,v[13]=r,v[14]=t}else v[0]=M[0],v[1]=M[4],v[2]=M[8],v[3]=M[12],v[4]=M[1],v[5]=M[5],v[6]=M[9],v[7]=M[13],v[8]=M[2],v[9]=M[6],v[10]=M[10],v[11]=M[14],v[12]=M[3],v[13]=M[7],v[14]=M[11],v[15]=M[15];return v}},{}],225:[function(d,ne,ae){var w=d("css-font"),v=d("pick-by-alias"),M=d("regl"),T=d("gl-util/context"),e=d("es6-weak-map"),a=d("color-normalize"),n=d("font-atlas"),r=d("typedarray-pool"),t=d("parse-rect"),f=d("is-plain-obj"),o=d("parse-unit"),i=d("to-px"),g=d("detect-kerning"),p=d("object-assign"),y=d("font-measure"),c=d("flatten-vertex-data"),b=d("bit-twiddle"),l=b.nextPow2,_=new e,s=!1;if(document.body){var A=document.body.appendChild(document.createElement("div"));A.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(A).fontStretch&&(s=!0),document.body.removeChild(A)}var m=function(u){h(u)?(u={regl:u},this.gl=u.regl._gl):this.gl=T(u),this.shader=_.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=u.regl||M({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),_.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(f(u)?u:{})};m.prototype.createShader=function(){var u=this.regl,L=u({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:u.prop("count"),offset:u.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:u.this("sizeBuffer")},width:{offset:0,stride:8,buffer:u.this("sizeBuffer")},char:u.this("charBuffer"),position:u.this("position")},uniforms:{atlasSize:function(k,P){return[P.atlas.width,P.atlas.height]},atlasDim:function(k,P){return[P.atlas.cols,P.atlas.rows]},atlas:function(k,P){return P.atlas.texture},charStep:function(k,P){return P.atlas.step},em:function(k,P){return P.atlas.em},color:u.prop("color"),opacity:u.prop("opacity"),viewport:u.this("viewportArray"),scale:u.this("scale"),align:u.prop("align"),baseline:u.prop("baseline"),translate:u.this("translate"),positionOffset:u.prop("positionOffset")},primitive:"points",viewport:u.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`}),S={};return{regl:u,draw:L,atlas:S}},m.prototype.update=function(u){var L=this;if(typeof u=="string")u={text:u};else if(!u)return;u=v(u,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0),u.opacity!=null&&(Array.isArray(u.opacity)?this.opacity=u.opacity.map(function(xe){return parseFloat(xe)}):this.opacity=parseFloat(u.opacity)),u.viewport!=null&&(this.viewport=t(u.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),u.kerning!=null&&(this.kerning=u.kerning),u.offset!=null&&(typeof u.offset=="number"&&(u.offset=[u.offset,0]),this.positionOffset=c(u.offset)),u.direction&&(this.direction=u.direction),u.range&&(this.range=u.range,this.scale=[1/(u.range[2]-u.range[0]),1/(u.range[3]-u.range[1])],this.translate=[-u.range[0],-u.range[1]]),u.scale&&(this.scale=u.scale),u.translate&&(this.translate=u.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),!this.font.length&&!u.font&&(u.font=m.baseFontSize+"px sans-serif");var S=!1,k=!1;if(u.font&&(Array.isArray(u.font)?u.font:[u.font]).forEach(function(xe,Pe){if(typeof xe=="string")try{xe=w.parse(xe)}catch{xe=w.parse(m.baseFontSize+"px "+xe)}else xe=w.parse(w.stringify(xe));var Ve=w.stringify({size:m.baseFontSize,family:xe.family,stretch:s?xe.stretch:void 0,variant:xe.variant,weight:xe.weight,style:xe.style}),Qe=o(xe.size),Fe=Math.round(Qe[0]*i(Qe[1]));if(Fe!==L.fontSize[Pe]&&(k=!0,L.fontSize[Pe]=Fe),(!L.font[Pe]||Ve!=L.font[Pe].baseString)&&(S=!0,L.font[Pe]=m.fonts[Ve],!L.font[Pe])){var Le=xe.family.join(", "),Ne=[xe.style];xe.style!=xe.variant&&Ne.push(xe.variant),xe.variant!=xe.weight&&Ne.push(xe.weight),s&&xe.weight!=xe.stretch&&Ne.push(xe.stretch),L.font[Pe]={baseString:Ve,family:Le,weight:xe.weight,stretch:xe.stretch,style:xe.style,variant:xe.variant,width:{},kerning:{},metrics:y(Le,{origin:"top",fontSize:m.baseFontSize,fontStyle:Ne.join(" ")})},m.fonts[Ve]=L.font[Pe]}}),(S||k)&&this.font.forEach(function(xe,Pe){var Ve=w.stringify({size:L.fontSize[Pe],family:xe.family,stretch:s?xe.stretch:void 0,variant:xe.variant,weight:xe.weight,style:xe.style});if(L.fontAtlas[Pe]=L.shader.atlas[Ve],!L.fontAtlas[Pe]){var Qe=xe.metrics;L.shader.atlas[Ve]=L.fontAtlas[Pe]={fontString:Ve,step:Math.ceil(L.fontSize[Pe]*Qe.bottom*.5)*2,em:L.fontSize[Pe],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:L.regl.texture()}}u.text==null&&(u.text=L.text)}),typeof u.text=="string"&&u.position&&u.position.length>2){for(var P=Array(u.position.length*.5),z=0;z<P.length;z++)P[z]=u.text;u.text=P}var I;if(u.text!=null||S){if(this.textOffsets=[0],Array.isArray(u.text)){this.count=u.text[0].length,this.counts=[this.count];for(var D=1;D<u.text.length;D++)this.textOffsets[D]=this.textOffsets[D-1]+u.text[D-1].length,this.count+=u.text[D].length,this.counts.push(u.text[D].length);this.text=u.text.join("")}else this.text=u.text,this.count=this.text.length,this.counts=[this.count];I=[],this.font.forEach(function(xe,Pe){m.atlasContext.font=xe.baseString;for(var Ve=L.fontAtlas[Pe],Qe=0;Qe<L.text.length;Qe++){var Fe=L.text.charAt(Qe);if(Ve.ids[Fe]==null&&(Ve.ids[Fe]=Ve.chars.length,Ve.chars.push(Fe),I.push(Fe)),xe.width[Fe]==null&&(xe.width[Fe]=m.atlasContext.measureText(Fe).width/m.baseFontSize,L.kerning)){var Le=[];for(var Ne in xe.width)Le.push(Ne+Fe,Fe+Ne);p(xe.kerning,g(xe.family,{pairs:Le}))}}})}if(u.position)if(u.position.length>2){for(var R=!u.position[0].length,O=r.mallocFloat(this.count*2),F=0,V=0;F<this.counts.length;F++){var G=this.counts[F];if(R)for(var J=0;J<G;J++)O[V++]=u.position[F*2],O[V++]=u.position[F*2+1];else for(var Z=0;Z<G;Z++)O[V++]=u.position[F][0],O[V++]=u.position[F][1]}this.position.call?this.position({type:"float",data:O}):this.position=this.regl.buffer({type:"float",data:O}),r.freeFloat(O)}else this.position.destroy&&this.position.destroy(),this.position={constant:u.position};if(u.text||S){var Y=r.mallocUint8(this.count),j=r.mallocFloat(this.count*2);this.textWidth=[];for(var re=0,se=0;re<this.counts.length;re++){for(var oe=this.counts[re],N=this.font[re]||this.font[0],U=this.fontAtlas[re]||this.fontAtlas[0],q=0;q<oe;q++){var Q=this.text.charAt(se),W=this.text.charAt(se-1);if(Y[se]=U.ids[Q],j[se*2]=N.width[Q],q){var X=j[se*2-2],ee=j[se*2],te=j[se*2-1],ie=te+X*.5+ee*.5;if(this.kerning){var le=N.kerning[W+Q];le&&(ie+=le*.001)}j[se*2+1]=ie}else j[se*2+1]=j[se*2]*.5;se++}this.textWidth.push(j.length?j[se*2-2]*.5+j[se*2-1]:0)}u.align||(u.align=this.align),this.charBuffer({data:Y,type:"uint8",usage:"stream"}),this.sizeBuffer({data:j,type:"float",usage:"stream"}),r.freeUint8(Y),r.freeFloat(j),I.length&&this.font.forEach(function(xe,Pe){var Ve=L.fontAtlas[Pe],Qe=Ve.step,Fe=Math.floor(m.maxAtlasSize/Qe),Le=Math.min(Fe,Ve.chars.length),Ne=Math.ceil(Ve.chars.length/Le),dt=l(Le*Qe),Dt=l(Ne*Qe);Ve.width=dt,Ve.height=Dt,Ve.rows=Ne,Ve.cols=Le,Ve.em&&Ve.texture({data:n({canvas:m.atlasCanvas,font:Ve.fontString,chars:Ve.chars,shape:[dt,Dt],step:[Qe,Qe]})})})}if(u.align&&(this.align=u.align,this.alignOffset=this.textWidth.map(function(xe,Pe){var Ve=Array.isArray(L.align)?L.align.length>1?L.align[Pe]:L.align[0]:L.align;if(typeof Ve=="number")return Ve;switch(Ve){case"right":case"end":return-xe;case"center":case"centre":case"middle":return-xe*.5}return 0})),this.baseline==null&&u.baseline==null&&(u.baseline=0),u.baseline!=null&&(this.baseline=u.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(xe,Pe){var Ve=(L.font[Pe]||L.font[0]).metrics,Qe=0;return Qe+=Ve.bottom*.5,typeof xe=="number"?Qe+=xe-Ve.baseline:Qe+=-Ve[xe],Qe*=-1,Qe})),u.color!=null)if(u.color||(u.color="transparent"),typeof u.color=="string"||!isNaN(u.color))this.color=a(u.color,"uint8");else{var ge;if(typeof u.color[0]=="number"&&u.color.length>this.counts.length){var fe=u.color.length;ge=r.mallocUint8(fe);for(var pe=(u.color.subarray||u.color.slice).bind(u.color),ye=0;ye<fe;ye+=4)ge.set(a(pe(ye,ye+4),"uint8"),ye)}else{var Te=u.color.length;ge=r.mallocUint8(Te*4);for(var _e=0;_e<Te;_e++)ge.set(a(u.color[_e]||0,"uint8"),_e*4)}this.color=ge}if(u.position||u.text||u.color||u.baseline||u.align||u.font||u.offset||u.opacity){var De=this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2;if(De){var Be=Math.max(this.position.length*.5||0,this.color.length*.25||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,this.positionOffset.length*.5||0);this.batch=Array(Be);for(var Ue=0;Ue<this.batch.length;Ue++)this.batch[Ue]={count:this.counts.length>1?this.counts[Ue]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[Ue]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(Ue*4,Ue*4+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[Ue]:this.opacity,baseline:this.baselineOffset[Ue]!=null?this.baselineOffset[Ue]:this.baselineOffset[0],align:this.align?this.alignOffset[Ue]!=null?this.alignOffset[Ue]:this.alignOffset[0]:0,atlas:this.fontAtlas[Ue]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(Ue*2,Ue*2+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]}},m.prototype.destroy=function(){},m.prototype.kerning=!0,m.prototype.position={constant:new Float32Array(2)},m.prototype.translate=null,m.prototype.scale=null,m.prototype.font=null,m.prototype.text="",m.prototype.positionOffset=[0,0],m.prototype.opacity=1,m.prototype.color=new Uint8Array([0,0,0,255]),m.prototype.alignOffset=[0,0],m.maxAtlasSize=1024,m.atlasCanvas=document.createElement("canvas"),m.atlasContext=m.atlasCanvas.getContext("2d",{alpha:!1}),m.baseFontSize=64,m.fonts={};function h(x){return typeof x=="function"&&x._gl&&x.prop&&x.texture&&x.buffer}ne.exports=m},{"bit-twiddle":81,"color-normalize":89,"css-font":99,"detect-kerning":125,"es6-weak-map":183,"flatten-vertex-data":191,"font-atlas":192,"font-measure":193,"gl-util/context":226,"is-plain-obj":236,"object-assign":247,"parse-rect":249,"parse-unit":251,"pick-by-alias":253,regl:283,"to-px":314,"typedarray-pool":327}],226:[function(d,ne,ae){(function(w){(function(){var v=d("pick-by-alias");ne.exports=function(t){if(t?typeof t=="string"&&(t={container:t}):t={},T(t)?t={container:t}:e(t)?t={container:t}:a(t)?t={gl:t}:t=v(t,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0),t.pixelRatio||(t.pixelRatio=w.pixelRatio||1),t.gl)return t.gl;if(t.canvas&&(t.container=t.canvas.parentNode),t.container){if(typeof t.container=="string"){var f=document.querySelector(t.container);if(!f)throw Error("Element "+t.container+" is not found");t.container=f}T(t.container)?(t.canvas=t.container,t.container=t.canvas.parentNode):t.canvas||(t.canvas=n(),t.container.appendChild(t.canvas),M(t))}else if(!t.canvas)if(typeof document<"u")t.container=document.body||document.documentElement,t.canvas=n(),t.container.appendChild(t.canvas),M(t);else throw Error("Not DOM environment. Use headless-gl.");return t.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(o){try{t.gl=t.canvas.getContext(o,t.attrs)}catch{}return t.gl}),t.gl};function M(r){if(r.container)if(r.container==document.body)document.body.style.width||(r.canvas.width=r.width||r.pixelRatio*w.innerWidth),document.body.style.height||(r.canvas.height=r.height||r.pixelRatio*w.innerHeight);else{var t=r.container.getBoundingClientRect();r.canvas.width=r.width||t.right-t.left,r.canvas.height=r.height||t.bottom-t.top}}function T(r){return typeof r.getContext=="function"&&"width"in r&&"height"in r}function e(r){return typeof r.nodeName=="string"&&typeof r.appendChild=="function"&&typeof r.getBoundingClientRect=="function"}function a(r){return typeof r.drawArrays=="function"||typeof r.drawElements=="function"}function n(){var r=document.createElement("canvas");return r.style.position="absolute",r.style.top=0,r.style.left=0,r}}).call(this)}).call(this,typeof To<"u"?To:typeof self<"u"?self:typeof window<"u"?window:{})},{"pick-by-alias":253}],227:[function(d,ne,ae){ne.exports=function(w){typeof w=="string"&&(w=[w]);for(var v=[].slice.call(arguments,1),M=[],T=0;T<w.length-1;T++)M.push(w[T],v[T]||"");return M.push(w[T]),M.join("")}},{}],228:[function(d,ne,ae){(function(w){(function(){var v=d("is-browser"),M;typeof w.matchMedia=="function"?M=!w.matchMedia("(hover: none)").matches:M=v,ne.exports=M}).call(this)}).call(this,typeof To<"u"?To:typeof self<"u"?self:typeof window<"u"?window:{})},{"is-browser":232}],229:[function(d,ne,ae){var w=d("is-browser");function v(){var M=!1;try{var T=Object.defineProperty({},"passive",{get:function(){M=!0}});window.addEventListener("test",null,T),window.removeEventListener("test",null,T)}catch{M=!1}return M}ne.exports=w&&v()},{"is-browser":232}],230:[function(d,ne,ae){ae.read=function(w,v,M,T,e){var a,n,r=e*8-T-1,t=(1<<r)-1,f=t>>1,o=-7,i=M?e-1:0,g=M?-1:1,p=w[v+i];for(i+=g,a=p&(1<<-o)-1,p>>=-o,o+=r;o>0;a=a*256+w[v+i],i+=g,o-=8);for(n=a&(1<<-o)-1,a>>=-o,o+=T;o>0;n=n*256+w[v+i],i+=g,o-=8);if(a===0)a=1-f;else{if(a===t)return n?NaN:(p?-1:1)*(1/0);n=n+Math.pow(2,T),a=a-f}return(p?-1:1)*n*Math.pow(2,a-T)},ae.write=function(w,v,M,T,e,a){var n,r,t,f=a*8-e-1,o=(1<<f)-1,i=o>>1,g=e===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=T?0:a-1,y=T?1:-1,c=v<0||v===0&&1/v<0?1:0;for(v=Math.abs(v),isNaN(v)||v===1/0?(r=isNaN(v)?1:0,n=o):(n=Math.floor(Math.log(v)/Math.LN2),v*(t=Math.pow(2,-n))<1&&(n--,t*=2),n+i>=1?v+=g/t:v+=g*Math.pow(2,1-i),v*t>=2&&(n++,t/=2),n+i>=o?(r=0,n=o):n+i>=1?(r=(v*t-1)*Math.pow(2,e),n=n+i):(r=v*Math.pow(2,i-1)*Math.pow(2,e),n=0));e>=8;w[M+p]=r&255,p+=y,r/=256,e-=8);for(n=n<<e|r,f+=e;f>0;w[M+p]=n&255,p+=y,n/=256,f-=8);w[M+p-y]|=c*128}},{}],231:[function(d,ne,ae){typeof Object.create=="function"?ne.exports=function(v,M){M&&(v.super_=M,v.prototype=Object.create(M.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}))}:ne.exports=function(v,M){if(M){v.super_=M;var T=function(){};T.prototype=M.prototype,v.prototype=new T,v.prototype.constructor=v}}},{}],232:[function(d,ne,ae){ne.exports=!0},{}],233:[function(d,ne,ae){ne.exports=typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],234:[function(d,ne,ae){ne.exports=M,ne.exports.isMobile=M,ne.exports.default=M;var w=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,v=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function M(T){T||(T={});var e=T.ua;if(!e&&typeof navigator<"u"&&(e=navigator.userAgent),e&&e.headers&&typeof e.headers["user-agent"]=="string"&&(e=e.headers["user-agent"]),typeof e!="string")return!1;var a=T.tablet?v.test(e):w.test(e);return!a&&T.tablet&&T.featureDetect&&navigator&&navigator.maxTouchPoints>1&&e.indexOf("Macintosh")!==-1&&e.indexOf("Safari")!==-1&&(a=!0),a}},{}],235:[function(d,ne,ae){ne.exports=function(w){var v=typeof w;return w!==null&&(v==="object"||v==="function")}},{}],236:[function(d,ne,ae){var w=Object.prototype.toString;ne.exports=function(v){var M;return w.call(v)==="[object Object]"&&(M=Object.getPrototypeOf(v),M===null||M===Object.getPrototypeOf({}))}},{}],237:[function(d,ne,ae){ne.exports=function(w){for(var v=w.length,M,T=0;T<v;T++)if(M=w.charCodeAt(T),(M<9||M>13)&&M!==32&&M!==133&&M!==160&&M!==5760&&M!==6158&&(M<8192||M>8205)&&M!==8232&&M!==8233&&M!==8239&&M!==8287&&M!==8288&&M!==12288&&M!==65279)return!1;return!0}},{}],238:[function(d,ne,ae){ne.exports=function(v){return typeof v!="string"?!1:(v=v.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(v)&&/[\dz]$/i.test(v)&&v.length>4))}},{}],239:[function(d,ne,ae){(function(w,v){typeof ae=="object"&&typeof ne<"u"?ne.exports=v():(w=w||self,w.mapboxgl=v())})(this,function(){var w,v,M;function T(e,a){if(!w)w=a;else if(!v)v=a;else{var n="var sharedChunk = {}; ("+w+")(sharedChunk); ("+v+")(sharedChunk);",r={};w(r),M=a(r),M.workerUrl=window.URL.createObjectURL(new Blob([n],{type:"text/javascript"}))}}return T(["exports"],function(e){function a(E,C){return C={exports:{}},E(C,C.exports),C.exports}var n="1.10.1",r=t;function t(E,C,B,$){this.cx=3*E,this.bx=3*(B-E)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*C,this.by=3*($-C)-this.cy,this.ay=1-this.cy-this.by,this.p1x=E,this.p1y=$,this.p2x=B,this.p2y=$}t.prototype.sampleCurveX=function(E){return((this.ax*E+this.bx)*E+this.cx)*E},t.prototype.sampleCurveY=function(E){return((this.ay*E+this.by)*E+this.cy)*E},t.prototype.sampleCurveDerivativeX=function(E){return(3*this.ax*E+2*this.bx)*E+this.cx},t.prototype.solveCurveX=function(E,C){typeof C>"u"&&(C=1e-6);var B,$,he,me,we;for(he=E,we=0;we<8;we++){if(me=this.sampleCurveX(he)-E,Math.abs(me)<C)return he;var Ie=this.sampleCurveDerivativeX(he);if(Math.abs(Ie)<1e-6)break;he=he-me/Ie}if(B=0,$=1,he=E,he<B)return B;if(he>$)return $;for(;B<$;){if(me=this.sampleCurveX(he),Math.abs(me-E)<C)return he;E>me?B=he:$=he,he=($-B)*.5+B}return he},t.prototype.solve=function(E,C){return this.sampleCurveY(this.solveCurveX(E,C))};var f=o;function o(E,C){this.x=E,this.y=C}o.prototype={clone:function(){return new o(this.x,this.y)},add:function(E){return this.clone()._add(E)},sub:function(E){return this.clone()._sub(E)},multByPoint:function(E){return this.clone()._multByPoint(E)},divByPoint:function(E){return this.clone()._divByPoint(E)},mult:function(E){return this.clone()._mult(E)},div:function(E){return this.clone()._div(E)},rotate:function(E){return this.clone()._rotate(E)},rotateAround:function(E,C){return this.clone()._rotateAround(E,C)},matMult:function(E){return this.clone()._matMult(E)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(E){return this.x===E.x&&this.y===E.y},dist:function(E){return Math.sqrt(this.distSqr(E))},distSqr:function(E){var C=E.x-this.x,B=E.y-this.y;return C*C+B*B},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(E){return Math.atan2(this.y-E.y,this.x-E.x)},angleWith:function(E){return this.angleWithSep(E.x,E.y)},angleWithSep:function(E,C){return Math.atan2(this.x*C-this.y*E,this.x*E+this.y*C)},_matMult:function(E){var C=E[0]*this.x+E[1]*this.y,B=E[2]*this.x+E[3]*this.y;return this.x=C,this.y=B,this},_add:function(E){return this.x+=E.x,this.y+=E.y,this},_sub:function(E){return this.x-=E.x,this.y-=E.y,this},_mult:function(E){return this.x*=E,this.y*=E,this},_div:function(E){return this.x/=E,this.y/=E,this},_multByPoint:function(E){return this.x*=E.x,this.y*=E.y,this},_divByPoint:function(E){return this.x/=E.x,this.y/=E.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var E=this.y;return this.y=this.x,this.x=-E,this},_rotate:function(E){var C=Math.cos(E),B=Math.sin(E),$=C*this.x-B*this.y,he=B*this.x+C*this.y;return this.x=$,this.y=he,this},_rotateAround:function(E,C){var B=Math.cos(E),$=Math.sin(E),he=C.x+B*(this.x-C.x)-$*(this.y-C.y),me=C.y+$*(this.x-C.x)+B*(this.y-C.y);return this.x=he,this.y=me,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.convert=function(E){return E instanceof o?E:Array.isArray(E)?new o(E[0],E[1]):E};function i(E,C){if(Array.isArray(E)){if(!Array.isArray(C)||E.length!==C.length)return!1;for(var B=0;B<E.length;B++)if(!i(E[B],C[B]))return!1;return!0}if(typeof E=="object"&&E!==null&&C!==null){if(typeof C!="object")return!1;var $=Object.keys(E);if($.length!==Object.keys(C).length)return!1;for(var he in E)if(!i(E[he],C[he]))return!1;return!0}return E===C}function g(E){if(E<=0)return 0;if(E>=1)return 1;var C=E*E,B=C*E;return 4*(E<.5?B:3*(E-C)+B-.75)}function p(E,C,B,$){var he=new r(E,C,B,$);return function(me){return he.solve(me)}}var y=p(.25,.1,.25,1);function c(E,C,B){return Math.min(B,Math.max(C,E))}function b(E,C,B){var $=B-C,he=((E-C)%$+$)%$+C;return he===C?B:he}function l(E,C,B){if(!E.length)return B(null,[]);var $=E.length,he=new Array(E.length),me=null;E.forEach(function(we,Ie){C(we,function($e,ut){$e&&(me=$e),he[Ie]=ut,--$===0&&B(me,he)})})}function _(E){var C=[];for(var B in E)C.push(E[B]);return C}function s(E,C){var B=[];for(var $ in E)$ in C||B.push($);return B}function A(E){for(var C=[],B=arguments.length-1;B-- >0;)C[B]=arguments[B+1];for(var $=0,he=C;$<he.length;$+=1){var me=he[$];for(var we in me)E[we]=me[we]}return E}function m(E,C){for(var B={},$=0;$<C.length;$++){var he=C[$];he in E&&(B[he]=E[he])}return B}var h=1;function x(){return h++}function u(){function E(C){return C?(C^Math.random()*16>>C/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,E)}return E()}function L(E){return E?/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(E):!1}function S(E,C){E.forEach(function(B){!C[B]||(C[B]=C[B].bind(C))})}function k(E,C){return E.indexOf(C,E.length-C.length)!==-1}function P(E,C,B){var $={};for(var he in E)$[he]=C.call(B||this,E[he],he,E);return $}function z(E,C,B){var $={};for(var he in E)C.call(B||this,E[he],he,E)&&($[he]=E[he]);return $}function I(E){return Array.isArray(E)?E.map(I):typeof E=="object"&&E?P(E,I):E}function D(E,C){for(var B=0;B<E.length;B++)if(C.indexOf(E[B])>=0)return!0;return!1}var R={};function O(E){R[E]||(typeof console<"u"&&console.warn(E),R[E]=!0)}function F(E,C,B){return(B.y-E.y)*(C.x-E.x)>(C.y-E.y)*(B.x-E.x)}function V(E){for(var C=0,B=0,$=E.length,he=$-1,me=void 0,we=void 0;B<$;he=B++)me=E[B],we=E[he],C+=(we.x-me.x)*(me.y+we.y);return C}function G(E){var C=E[0],B=E[1],$=E[2];return B+=90,B*=Math.PI/180,$*=Math.PI/180,{x:C*Math.cos(B)*Math.sin($),y:C*Math.sin(B)*Math.sin($),z:C*Math.cos($)}}function J(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Z(E){var C=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,B={};if(E.replace(C,function(he,me,we,Ie){var $e=we||Ie;return B[me]=$e?$e.toLowerCase():!0,""}),B["max-age"]){var $=parseInt(B["max-age"],10);isNaN($)?delete B["max-age"]:B["max-age"]=$}return B}var Y=null;function j(E){if(Y==null){var C=E.navigator?E.navigator.userAgent:null;Y=!!E.safari||!!(C&&(/\b(iPad|iPhone|iPod)\b/.test(C)||!!C.match("Safari")&&!C.match("Chrome")))}return Y}function re(E){try{var C=self[E];return C.setItem("_mapbox_test_",1),C.removeItem("_mapbox_test_"),!0}catch{return!1}}function se(E){return self.btoa(encodeURIComponent(E).replace(/%([0-9A-F]{2})/g,function(C,B){return String.fromCharCode(Number("0x"+B))}))}function oe(E){return decodeURIComponent(self.atob(E).split("").map(function(C){return"%"+("00"+C.charCodeAt(0).toString(16)).slice(-2)}).join(""))}var N=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),U=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,q=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,Q,W,X={now:N,frame:function(C){var B=U(C);return{cancel:function(){return q(B)}}},getImageData:function(C,B){B===void 0&&(B=0);var $=self.document.createElement("canvas"),he=$.getContext("2d");if(!he)throw new Error("failed to create canvas 2d context");return $.width=C.width,$.height=C.height,he.drawImage(C,0,0,C.width,C.height),he.getImageData(-B,-B,C.width+2*B,C.height+2*B)},resolveURL:function(C){return Q||(Q=self.document.createElement("a")),Q.href=C,Q.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return self.matchMedia?(W==null&&(W=self.matchMedia("(prefers-reduced-motion: reduce)")),W.matches):!1}},ee={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},te={supported:!1,testSupport:pe},ie,le=!1,ge,fe=!1;self.document&&(ge=self.document.createElement("img"),ge.onload=function(){ie&&ye(ie),ie=null,fe=!0},ge.onerror=function(){le=!0,ie=null},ge.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");function pe(E){le||!ge||(fe?ye(E):ie=E)}function ye(E){var C=E.createTexture();E.bindTexture(E.TEXTURE_2D,C);try{if(E.texImage2D(E.TEXTURE_2D,0,E.RGBA,E.RGBA,E.UNSIGNED_BYTE,ge),E.isContextLost())return;te.supported=!0}catch{}E.deleteTexture(C),le=!0}var Te="01";function _e(){for(var E="1",C="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",B="",$=0;$<10;$++)B+=C[Math.floor(Math.random()*62)];var he=12*60*60*1e3,me=[E,Te,B].join(""),we=Date.now()+he;return{token:me,tokenExpiresAt:we}}var De=function(C,B){this._transformRequestFn=C,this._customAccessToken=B,this._createSkuToken()};De.prototype._createSkuToken=function(){var C=_e();this._skuToken=C.token,this._skuTokenExpiresAt=C.tokenExpiresAt},De.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},De.prototype.transformRequest=function(C,B){return this._transformRequestFn?this._transformRequestFn(C,B)||{url:C}:{url:C}},De.prototype.normalizeStyleURL=function(C,B){if(!Be(C))return C;var $=Fe(C);return $.path="/styles/v1"+$.path,this._makeAPIURL($,this._customAccessToken||B)},De.prototype.normalizeGlyphsURL=function(C,B){if(!Be(C))return C;var $=Fe(C);return $.path="/fonts/v1"+$.path,this._makeAPIURL($,this._customAccessToken||B)},De.prototype.normalizeSourceURL=function(C,B){if(!Be(C))return C;var $=Fe(C);return $.path="/v4/"+$.authority+".json",$.params.push("secure"),this._makeAPIURL($,this._customAccessToken||B)},De.prototype.normalizeSpriteURL=function(C,B,$,he){var me=Fe(C);return Be(C)?(me.path="/styles/v1"+me.path+"/sprite"+B+$,this._makeAPIURL(me,this._customAccessToken||he)):(me.path+=""+B+$,Le(me))},De.prototype.normalizeTileURL=function(C,B){if(this._isSkuTokenExpired()&&this._createSkuToken(),C&&!Be(C))return C;var $=Fe(C),he=/(\.(png|jpg)\d*)(?=$)/,me=/^.+\/v4\//,we=X.devicePixelRatio>=2||B===512?"@2x":"",Ie=te.supported?".webp":"$1";$.path=$.path.replace(he,""+we+Ie),$.path=$.path.replace(me,"/"),$.path="/v4"+$.path;var $e=this._customAccessToken||Ve($.params)||ee.ACCESS_TOKEN;return ee.REQUIRE_ACCESS_TOKEN&&$e&&this._skuToken&&$.params.push("sku="+this._skuToken),this._makeAPIURL($,$e)},De.prototype.canonicalizeTileURL=function(C,B){var $="/v4/",he=/\.[\w]+$/,me=Fe(C);if(!me.path.match(/(^\/v4\/)/)||!me.path.match(he))return C;var we="mapbox://tiles/";we+=me.path.replace($,"");var Ie=me.params;return B&&(Ie=Ie.filter(function($e){return!$e.match(/^access_token=/)})),Ie.length&&(we+="?"+Ie.join("&")),we},De.prototype.canonicalizeTileset=function(C,B){for(var $=B?Be(B):!1,he=[],me=0,we=C.tiles||[];me<we.length;me+=1){var Ie=we[me];xe(Ie)?he.push(this.canonicalizeTileURL(Ie,$)):he.push(Ie)}return he},De.prototype._makeAPIURL=function(C,B){var $="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",he=Fe(ee.API_URL);if(C.protocol=he.protocol,C.authority=he.authority,he.path!=="/"&&(C.path=""+he.path+C.path),!ee.REQUIRE_ACCESS_TOKEN)return Le(C);if(B=B||ee.ACCESS_TOKEN,!B)throw new Error("An API access token is required to use Mapbox GL. "+$);if(B[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+$);return C.params=C.params.filter(function(me){return me.indexOf("access_token")===-1}),C.params.push("access_token="+B),Le(C)};function Be(E){return E.indexOf("mapbox:")===0}var Ue=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function xe(E){return Ue.test(E)}function Pe(E){return E.indexOf("sku=")>0&&xe(E)}function Ve(E){for(var C=0,B=E;C<B.length;C+=1){var $=B[C],he=$.match(/^access_token=(.*)$/);if(he)return he[1]}return null}var Qe=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Fe(E){var C=E.match(Qe);if(!C)throw new Error("Unable to parse URL object");return{protocol:C[1],authority:C[2],path:C[3]||"/",params:C[4]?C[4].split("&"):[]}}function Le(E){var C=E.params.length?"?"+E.params.join("&"):"";return E.protocol+"://"+E.authority+E.path+C}var Ne="mapbox.eventData";function dt(E){if(!E)return null;var C=E.split(".");if(!C||C.length!==3)return null;try{var B=JSON.parse(oe(C[1]));return B}catch{return null}}var Dt=function(C){this.type=C,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Dt.prototype.getStorageKey=function(C){var B=dt(ee.ACCESS_TOKEN),$="";return B&&B.u?$=se(B.u):$=ee.ACCESS_TOKEN||"",C?Ne+"."+C+":"+$:Ne+":"+$},Dt.prototype.fetchEventData=function(){var C=re("localStorage"),B=this.getStorageKey(),$=this.getStorageKey("uuid");if(C)try{var he=self.localStorage.getItem(B);he&&(this.eventData=JSON.parse(he));var me=self.localStorage.getItem($);me&&(this.anonId=me)}catch{O("Unable to read from LocalStorage")}},Dt.prototype.saveEventData=function(){var C=re("localStorage"),B=this.getStorageKey(),$=this.getStorageKey("uuid");if(C)try{self.localStorage.setItem($,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(B,JSON.stringify(this.eventData))}catch{O("Unable to write to LocalStorage")}},Dt.prototype.processRequests=function(C){},Dt.prototype.postEvent=function(C,B,$,he){var me=this;if(!!ee.EVENTS_URL){var we=Fe(ee.EVENTS_URL);we.params.push("access_token="+(he||ee.ACCESS_TOKEN||""));var Ie={event:this.type,created:new Date(C).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:n,skuId:Te,userId:this.anonId},$e=B?A(Ie,B):Ie,ut={url:Le(we),headers:{"Content-Type":"text/plain"},body:JSON.stringify([$e])};this.pendingRequest=Me(ut,function(gt){me.pendingRequest=null,$(gt),me.saveEventData(),me.processRequests(he)})}},Dt.prototype.queueRequest=function(C,B){this.queue.push(C),this.processRequests(B)};var Xt=function(E){function C(){E.call(this,"map.load"),this.success={},this.skuToken=""}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.postMapLoadEvent=function($,he,me,we){this.skuToken=me,(ee.EVENTS_URL&&we||ee.ACCESS_TOKEN&&Array.isArray($)&&$.some(function(Ie){return Be(Ie)||xe(Ie)}))&&this.queueRequest({id:he,timestamp:Date.now()},we)},C.prototype.processRequests=function($){var he=this;if(!(this.pendingRequest||this.queue.length===0)){var me=this.queue.shift(),we=me.id,Ie=me.timestamp;we&&this.success[we]||(this.anonId||this.fetchEventData(),L(this.anonId)||(this.anonId=u()),this.postEvent(Ie,{skuToken:this.skuToken},function($e){$e||we&&(he.success[we]=!0)},$))}},C}(Dt),At=function(E){function C(B){E.call(this,"appUserTurnstile"),this._customAccessToken=B}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.postTurnstileEvent=function($,he){ee.EVENTS_URL&&ee.ACCESS_TOKEN&&Array.isArray($)&&$.some(function(me){return Be(me)||xe(me)})&&this.queueRequest(Date.now(),he)},C.prototype.processRequests=function($){var he=this;if(!(this.pendingRequest||this.queue.length===0)){(!this.anonId||!this.eventData.lastSuccess||!this.eventData.tokenU)&&this.fetchEventData();var me=dt(ee.ACCESS_TOKEN),we=me?me.u:ee.ACCESS_TOKEN,Ie=we!==this.eventData.tokenU;L(this.anonId)||(this.anonId=u(),Ie=!0);var $e=this.queue.shift();if(this.eventData.lastSuccess){var ut=new Date(this.eventData.lastSuccess),gt=new Date($e),Rt=($e-this.eventData.lastSuccess)/(24*60*60*1e3);Ie=Ie||Rt>=1||Rt<-1||ut.getDate()!==gt.getDate()}else Ie=!0;if(!Ie)return this.processRequests();this.postEvent($e,{"enabled.telemetry":!1},function(Qt){Qt||(he.eventData.lastSuccess=$e,he.eventData.tokenU=we)},$)}},C}(Dt),zt=new At,Ut=zt.postTurnstileEvent.bind(zt),Ct=new Xt,Mt=Ct.postMapLoadEvent.bind(Ct),rt="mapbox-tiles",ct=500,Ze=50,ke=1e3*60*7,Ge;function Je(){self.caches&&!Ge&&(Ge=self.caches.open(rt))}var ot;function Pt(E,C){if(ot===void 0)try{new Response(new ReadableStream),ot=!0}catch{ot=!1}ot?C(E.body):E.blob().then(C)}function _t(E,C,B){if(Je(),!!Ge){var $={status:C.status,statusText:C.statusText,headers:new self.Headers};C.headers.forEach(function(we,Ie){return $.headers.set(Ie,we)});var he=Z(C.headers.get("Cache-Control")||"");if(!he["no-store"]){he["max-age"]&&$.headers.set("Expires",new Date(B+he["max-age"]*1e3).toUTCString());var me=new Date($.headers.get("Expires")).getTime()-B;me<ke||Pt(C,function(we){var Ie=new self.Response(we,$);Je(),Ge&&Ge.then(function($e){return $e.put(Bt(E.url),Ie)}).catch(function($e){return O($e.message)})})}}}function Bt(E){var C=E.indexOf("?");return C<0?E:E.slice(0,C)}function qt(E,C){if(Je(),!Ge)return C(null);var B=Bt(E.url);Ge.then(function($){$.match(B).then(function(he){var me=Ot(he);$.delete(B),me&&$.put(B,he.clone()),C(null,he,me)}).catch(C)}).catch(C)}function Ot(E){if(!E)return!1;var C=new Date(E.headers.get("Expires")||0),B=Z(E.headers.get("Cache-Control")||"");return C>Date.now()&&!B["no-cache"]}var $t=1/0;function rr(E){$t++,$t>Ze&&(E.getActor().send("enforceCacheSizeLimit",ct),$t=0)}function er(E){Je(),Ge&&Ge.then(function(C){C.keys().then(function(B){for(var $=0;$<B.length-E;$++)C.delete(B[$])})})}function pr(E){var C=self.caches.delete(rt);E&&C.catch(E).then(function(){return E()})}function Xr(E,C){ct=E,Ze=C}var hn;function Qr(){return hn==null&&(hn=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),hn}var nt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(nt);var Ht=function(E){function C(B,$,he){$===401&&xe(he)&&(B+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),E.call(this,B),this.status=$,this.url=he,this.name=this.constructor.name,this.message=B}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},C}(Error),Kt=J()?function(){return self.worker&&self.worker.referrer}:function(){return(self.location.protocol==="blob:"?self.parent:self).location.href},Gt=function(E){return/^file:/.test(E)||/^file:/.test(Kt())&&!/^\w+:/.test(E)};function br(E,C){var B=new self.AbortController,$=new self.Request(E.url,{method:E.method||"GET",body:E.body,credentials:E.credentials,headers:E.headers,referrer:Kt(),signal:B.signal}),he=!1,me=!1,we=Pe($.url);E.type==="json"&&$.headers.set("Accept","application/json");var Ie=function(ut,gt,Rt){if(!me){if(ut&&ut.message!=="SecurityError"&&O(ut),gt&&Rt)return $e(gt);var Qt=Date.now();self.fetch($).then(function(Wt){if(Wt.ok){var vr=we?Wt.clone():null;return $e(Wt,vr,Qt)}else return C(new Ht(Wt.statusText,Wt.status,E.url))}).catch(function(Wt){Wt.code!==20&&C(new Error(Wt.message))})}},$e=function(ut,gt,Rt){(E.type==="arrayBuffer"?ut.arrayBuffer():E.type==="json"?ut.json():ut.text()).then(function(Qt){me||(gt&&Rt&&_t($,gt,Rt),he=!0,C(null,Qt,ut.headers.get("Cache-Control"),ut.headers.get("Expires")))}).catch(function(Qt){me||C(new Error(Qt.message))})};return we?qt($,Ie):Ie(null,null),{cancel:function(){me=!0,he||B.abort()}}}function tt(E,C){var B=new self.XMLHttpRequest;B.open(E.method||"GET",E.url,!0),E.type==="arrayBuffer"&&(B.responseType="arraybuffer");for(var $ in E.headers)B.setRequestHeader($,E.headers[$]);return E.type==="json"&&(B.responseType="text",B.setRequestHeader("Accept","application/json")),B.withCredentials=E.credentials==="include",B.onerror=function(){C(new Error(B.statusText))},B.onload=function(){if((B.status>=200&&B.status<300||B.status===0)&&B.response!==null){var he=B.response;if(E.type==="json")try{he=JSON.parse(B.response)}catch(me){return C(me)}C(null,he,B.getResponseHeader("Cache-Control"),B.getResponseHeader("Expires"))}else C(new Ht(B.statusText,B.status,E.url))},B.send(E.body),{cancel:function(){return B.abort()}}}var je=function(E,C){if(!Gt(E.url)){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return br(E,C);if(J()&&self.worker&&self.worker.actor){var B=!0;return self.worker.actor.send("getResource",E,C,void 0,B)}}return tt(E,C)},st=function(E,C){return je(A(E,{type:"json"}),C)},ft=function(E,C){return je(A(E,{type:"arrayBuffer"}),C)},Me=function(E,C){return je(A(E,{method:"POST"}),C)};function Se(E){var C=self.document.createElement("a");return C.href=E,C.protocol===self.document.location.protocol&&C.host===self.document.location.host}var Ke="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Xe(E,C,B,$){var he=new self.Image,me=self.URL;he.onload=function(){C(null,he),me.revokeObjectURL(he.src)},he.onerror=function(){return C(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var we=new self.Blob([new Uint8Array(E)],{type:"image/png"});he.cacheControl=B,he.expires=$,he.src=E.byteLength?me.createObjectURL(we):Ke}function it(E,C){var B=new self.Blob([new Uint8Array(E)],{type:"image/png"});self.createImageBitmap(B).then(function($){C(null,$)}).catch(function($){C(new Error("Could not load image because of "+$.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}var pt,vt,St=function(){pt=[],vt=0};St();var kt=function(E,C){if(te.supported&&(E.headers||(E.headers={}),E.headers.accept="image/webp,*/*"),vt>=ee.MAX_PARALLEL_IMAGE_REQUESTS){var B={requestParameters:E,callback:C,cancelled:!1,cancel:function(){this.cancelled=!0}};return pt.push(B),B}vt++;var $=!1,he=function(){if(!$)for($=!0,vt--;pt.length&&vt<ee.MAX_PARALLEL_IMAGE_REQUESTS;){var we=pt.shift(),Ie=we.requestParameters,$e=we.callback,ut=we.cancelled;ut||(we.cancel=kt(Ie,$e).cancel)}},me=ft(E,function(we,Ie,$e,ut){he(),we?C(we):Ie&&(Qr()?it(Ie,C):Xe(Ie,C,$e,ut))});return{cancel:function(){me.cancel(),he()}}},Nt=function(E,C){var B=self.document.createElement("video");B.muted=!0,B.onloadstart=function(){C(null,B)};for(var $=0;$<E.length;$++){var he=self.document.createElement("source");Se(E[$])||(B.crossOrigin="Anonymous"),he.src=E[$],B.appendChild(he)}return{cancel:function(){}}};function nr(E,C,B){var $=B[E]&&B[E].indexOf(C)!==-1;$||(B[E]=B[E]||[],B[E].push(C))}function fr(E,C,B){if(B&&B[E]){var $=B[E].indexOf(C);$!==-1&&B[E].splice($,1)}}var Hr=function(C,B){B===void 0&&(B={}),A(this,B),this.type=C},Er=function(E){function C(B,$){$===void 0&&($={}),E.call(this,"error",A({error:B},$))}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C}(Hr),_r=function(){};_r.prototype.on=function(C,B){return this._listeners=this._listeners||{},nr(C,B,this._listeners),this},_r.prototype.off=function(C,B){return fr(C,B,this._listeners),fr(C,B,this._oneTimeListeners),this},_r.prototype.once=function(C,B){return this._oneTimeListeners=this._oneTimeListeners||{},nr(C,B,this._oneTimeListeners),this},_r.prototype.fire=function(C,B){typeof C=="string"&&(C=new Hr(C,B||{}));var $=C.type;if(this.listens($)){C.target=this;for(var he=this._listeners&&this._listeners[$]?this._listeners[$].slice():[],me=0,we=he;me<we.length;me+=1){var Ie=we[me];Ie.call(this,C)}for(var $e=this._oneTimeListeners&&this._oneTimeListeners[$]?this._oneTimeListeners[$].slice():[],ut=0,gt=$e;ut<gt.length;ut+=1){var Rt=gt[ut];fr($,Rt,this._oneTimeListeners),Rt.call(this,C)}var Qt=this._eventedParent;Qt&&(A(C,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),Qt.fire(C))}else C instanceof Er&&console.error(C.error);return this},_r.prototype.listens=function(C){return this._listeners&&this._listeners[C]&&this._listeners[C].length>0||this._oneTimeListeners&&this._oneTimeListeners[C]&&this._oneTimeListeners[C].length>0||this._eventedParent&&this._eventedParent.listens(C)},_r.prototype.setEventedParent=function(C,B){return this._eventedParent=C,this._eventedParentData=B,this};var en=8,dr={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},xr={"*":{type:"source"}},Ur=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],Yr={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},Ar={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},et={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},Lt={type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},Zt={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},sr={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Ir={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},Zr=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],Pr={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},wr={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Nr={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Sn={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},_n={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Wn={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Ln={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Xn={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Kn={type:"array",value:"*"},Aa={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},Ta={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},oi={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},$a={type:"array",value:"*",minimum:1},Va={type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},ti={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},Mr=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],vn={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},fn={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},An={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},Gn={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},ia={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},Yn={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},zn={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},ea={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},wa={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},si={"*":{type:"string"}},Ft={$version:en,$root:dr,sources:xr,source:Ur,source_vector:Yr,source_raster:Ar,source_raster_dem:et,source_geojson:Lt,source_video:Zt,source_image:sr,layer:Ir,layout:Zr,layout_background:Pr,layout_fill:wr,layout_circle:Nr,layout_heatmap:Sn,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:_n,layout_symbol:Wn,layout_raster:Ln,layout_hillshade:Xn,filter:Kn,filter_operator:Aa,geometry_type:Ta,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:oi,expression:$a,expression_name:Va,light:ti,paint:Mr,paint_fill:vn,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:fn,paint_circle:An,paint_heatmap:Gn,paint_symbol:ia,paint_raster:Yn,paint_hillshade:zn,paint_background:ea,transition:wa,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:si},cr=function(C,B,$,he){this.message=(C?C+": ":"")+$,he&&(this.identifier=he),B!=null&&B.__line__&&(this.line=B.__line__)};function $r(E){var C=E.key,B=E.value;return B?[new cr(C,B,"constants have been deprecated as of v8")]:[]}function rn(E){for(var C=[],B=arguments.length-1;B-- >0;)C[B]=arguments[B+1];for(var $=0,he=C;$<he.length;$+=1){var me=he[$];for(var we in me)E[we]=me[we]}return E}function sn(E){return E instanceof Number||E instanceof String||E instanceof Boolean?E.valueOf():E}function kn(E){if(Array.isArray(E))return E.map(kn);if(E instanceof Object&&!(E instanceof Number||E instanceof String||E instanceof Boolean)){var C={};for(var B in E)C[B]=kn(E[B]);return C}return sn(E)}var mn=function(E){function C(B,$){E.call(this,$),this.message=$,this.key=B}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C}(Error),un=function(C,B){B===void 0&&(B=[]),this.parent=C,this.bindings={};for(var $=0,he=B;$<he.length;$+=1){var me=he[$],we=me[0],Ie=me[1];this.bindings[we]=Ie}};un.prototype.concat=function(C){return new un(this,C)},un.prototype.get=function(C){if(this.bindings[C])return this.bindings[C];if(this.parent)return this.parent.get(C);throw new Error(C+" not found in scope.")},un.prototype.has=function(C){return this.bindings[C]?!0:this.parent?this.parent.has(C):!1};var yr={kind:"null"},gr={kind:"number"},Dr={kind:"string"},dn={kind:"boolean"},Bn={kind:"color"},ta={kind:"object"},bn={kind:"value"},Zn={kind:"error"},aa={kind:"collator"},pa={kind:"formatted"},ya={kind:"resolvedImage"};function la(E,C){return{kind:"array",itemType:E,N:C}}function Sa(E){if(E.kind==="array"){var C=Sa(E.itemType);return typeof E.N=="number"?"array<"+C+", "+E.N+">":E.itemType.kind==="value"?"array":"array<"+C+">"}else return E.kind}var ho=[yr,gr,Dr,dn,Bn,pa,ta,la(bn),ya];function Ro(E,C){if(C.kind==="error")return null;if(E.kind==="array"){if(C.kind==="array"&&(C.N===0&&C.itemType.kind==="value"||!Ro(E.itemType,C.itemType))&&(typeof E.N!="number"||E.N===C.N))return null}else{if(E.kind===C.kind)return null;if(E.kind==="value")for(var B=0,$=ho;B<$.length;B+=1){var he=$[B];if(!Ro(he,C))return null}}return"Expected "+Sa(E)+" but found "+Sa(C)+" instead."}function Zo(E,C){return C.some(function(B){return B.kind===E.kind})}function tl(E,C){return C.some(function(B){return B==="null"?E===null:B==="array"?Array.isArray(E):B==="object"?E&&!Array.isArray(E)&&typeof E=="object":B===typeof E})}var hl=a(function(E,C){var B={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function $(ut){return ut=Math.round(ut),ut<0?0:ut>255?255:ut}function he(ut){return ut<0?0:ut>1?1:ut}function me(ut){return ut[ut.length-1]==="%"?$(parseFloat(ut)/100*255):$(parseInt(ut))}function we(ut){return ut[ut.length-1]==="%"?he(parseFloat(ut)/100):he(parseFloat(ut))}function Ie(ut,gt,Rt){return Rt<0?Rt+=1:Rt>1&&(Rt-=1),Rt*6<1?ut+(gt-ut)*Rt*6:Rt*2<1?gt:Rt*3<2?ut+(gt-ut)*(2/3-Rt)*6:ut}function $e(ut){var gt=ut.replace(/ /g,"").toLowerCase();if(gt in B)return B[gt].slice();if(gt[0]==="#"){if(gt.length===4){var Rt=parseInt(gt.substr(1),16);return Rt>=0&&Rt<=4095?[(Rt&3840)>>4|(Rt&3840)>>8,Rt&240|(Rt&240)>>4,Rt&15|(Rt&15)<<4,1]:null}else if(gt.length===7){var Rt=parseInt(gt.substr(1),16);return Rt>=0&&Rt<=16777215?[(Rt&16711680)>>16,(Rt&65280)>>8,Rt&255,1]:null}return null}var Qt=gt.indexOf("("),Wt=gt.indexOf(")");if(Qt!==-1&&Wt+1===gt.length){var vr=gt.substr(0,Qt),Rr=gt.substr(Qt+1,Wt-(Qt+1)).split(","),an=1;switch(vr){case"rgba":if(Rr.length!==4)return null;an=we(Rr.pop());case"rgb":return Rr.length!==3?null:[me(Rr[0]),me(Rr[1]),me(Rr[2]),an];case"hsla":if(Rr.length!==4)return null;an=we(Rr.pop());case"hsl":if(Rr.length!==3)return null;var Jr=(parseFloat(Rr[0])%360+360)%360/360,Mn=we(Rr[1]),yn=we(Rr[2]),Tn=yn<=.5?yn*(Mn+1):yn+Mn-yn*Mn,Rn=yn*2-Tn;return[$(Ie(Rn,Tn,Jr+1/3)*255),$(Ie(Rn,Tn,Jr)*255),$(Ie(Rn,Tn,Jr-1/3)*255),an];default:return null}}return null}try{C.parseCSSColor=$e}catch{}}),Gl=hl.parseCSSColor,vi=function(C,B,$,he){he===void 0&&(he=1),this.r=C,this.g=B,this.b=$,this.a=he};vi.parse=function(C){if(!!C){if(C instanceof vi)return C;if(typeof C=="string"){var B=Gl(C);if(!!B)return new vi(B[0]/255*B[3],B[1]/255*B[3],B[2]/255*B[3],B[3])}}},vi.prototype.toString=function(){var C=this.toArray(),B=C[0],$=C[1],he=C[2],me=C[3];return"rgba("+Math.round(B)+","+Math.round($)+","+Math.round(he)+","+me+")"},vi.prototype.toArray=function(){var C=this,B=C.r,$=C.g,he=C.b,me=C.a;return me===0?[0,0,0,0]:[B*255/me,$*255/me,he*255/me,me]},vi.black=new vi(0,0,0,1),vi.white=new vi(1,1,1,1),vi.transparent=new vi(0,0,0,0),vi.red=new vi(1,0,0,1);var Vs=function(C,B,$){C?this.sensitivity=B?"variant":"case":this.sensitivity=B?"accent":"base",this.locale=$,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Vs.prototype.compare=function(C,B){return this.collator.compare(C,B)},Vs.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Ps=function(C,B,$,he,me){this.text=C,this.image=B,this.scale=$,this.fontStack=he,this.textColor=me},Ui=function(C){this.sections=C};Ui.fromString=function(C){return new Ui([new Ps(C,null,null,null,null)])},Ui.prototype.isEmpty=function(){return this.sections.length===0?!0:!this.sections.some(function(C){return C.text.length!==0||C.image&&C.image.name.length!==0})},Ui.factory=function(C){return C instanceof Ui?C:Ui.fromString(C)},Ui.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(C){return C.text}).join("")},Ui.prototype.serialize=function(){for(var C=["format"],B=0,$=this.sections;B<$.length;B+=1){var he=$[B];if(he.image){C.push(["image",he.image.name]);continue}C.push(he.text);var me={};he.fontStack&&(me["text-font"]=["literal",he.fontStack.split(",")]),he.scale&&(me["font-scale"]=he.scale),he.textColor&&(me["text-color"]=["rgba"].concat(he.textColor.toArray())),C.push(me)}return C};var Ao=function(C){this.name=C.name,this.available=C.available};Ao.prototype.toString=function(){return this.name},Ao.fromString=function(C){return C?new Ao({name:C,available:!1}):null},Ao.prototype.serialize=function(){return["image",this.name]};function vl(E,C,B,$){if(!(typeof E=="number"&&E>=0&&E<=255&&typeof C=="number"&&C>=0&&C<=255&&typeof B=="number"&&B>=0&&B<=255)){var he=typeof $=="number"?[E,C,B,$]:[E,C,B];return"Invalid rgba value ["+he.join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}return typeof $>"u"||typeof $=="number"&&$>=0&&$<=1?null:"Invalid rgba value ["+[E,C,B,$].join(", ")+"]: 'a' must be between 0 and 1."}function hs(E){if(E===null)return!0;if(typeof E=="string")return!0;if(typeof E=="boolean")return!0;if(typeof E=="number")return!0;if(E instanceof vi)return!0;if(E instanceof Vs)return!0;if(E instanceof Ui)return!0;if(E instanceof Ao)return!0;if(Array.isArray(E)){for(var C=0,B=E;C<B.length;C+=1){var $=B[C];if(!hs($))return!1}return!0}else if(typeof E=="object"){for(var he in E)if(!hs(E[he]))return!1;return!0}else return!1}function Di(E){if(E===null)return yr;if(typeof E=="string")return Dr;if(typeof E=="boolean")return dn;if(typeof E=="number")return gr;if(E instanceof vi)return Bn;if(E instanceof Vs)return aa;if(E instanceof Ui)return pa;if(E instanceof Ao)return ya;if(Array.isArray(E)){for(var C=E.length,B,$=0,he=E;$<he.length;$+=1){var me=he[$],we=Di(me);if(!B)B=we;else{if(B===we)continue;B=bn;break}}return la(B||bn,C)}else return ta}function rl(E){var C=typeof E;return E===null?"":C==="string"||C==="number"||C==="boolean"?String(E):E instanceof vi||E instanceof Ui||E instanceof Ao?E.toString():JSON.stringify(E)}var Ki=function(C,B){this.type=C,this.value=B};Ki.parse=function(C,B){if(C.length!==2)return B.error("'literal' expression requires exactly one argument, but found "+(C.length-1)+" instead.");if(!hs(C[1]))return B.error("invalid value");var $=C[1],he=Di($),me=B.expectedType;return he.kind==="array"&&he.N===0&&me&&me.kind==="array"&&(typeof me.N!="number"||me.N===0)&&(he=me),new Ki(he,$)},Ki.prototype.evaluate=function(){return this.value},Ki.prototype.eachChild=function(){},Ki.prototype.outputDefined=function(){return!0},Ki.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof vi?["rgba"].concat(this.value.toArray()):this.value instanceof Ui?this.value.serialize():this.value};var Fi=function(C){this.name="ExpressionEvaluationError",this.message=C};Fi.prototype.toJSON=function(){return this.message};var no={string:Dr,number:gr,boolean:dn,object:ta},Ji=function(C,B){this.type=C,this.args=B};Ji.parse=function(C,B){if(C.length<2)return B.error("Expected at least one argument.");var $=1,he,me=C[0];if(me==="array"){var we;if(C.length>2){var Ie=C[1];if(typeof Ie!="string"||!(Ie in no)||Ie==="object")return B.error('The item type argument of "array" must be one of string, number, boolean',1);we=no[Ie],$++}else we=bn;var $e;if(C.length>3){if(C[2]!==null&&(typeof C[2]!="number"||C[2]<0||C[2]!==Math.floor(C[2])))return B.error('The length argument to "array" must be a positive integer literal',2);$e=C[2],$++}he=la(we,$e)}else he=no[me];for(var ut=[];$<C.length;$++){var gt=B.parse(C[$],$,bn);if(!gt)return null;ut.push(gt)}return new Ji(he,ut)},Ji.prototype.evaluate=function(C){for(var B=0;B<this.args.length;B++){var $=this.args[B].evaluate(C),he=Ro(this.type,Di($));if(he){if(B===this.args.length-1)throw new Fi("Expected value to be of type "+Sa(this.type)+", but found "+Sa(Di($))+" instead.")}else return $}return null},Ji.prototype.eachChild=function(C){this.args.forEach(C)},Ji.prototype.outputDefined=function(){return this.args.every(function(C){return C.outputDefined()})},Ji.prototype.serialize=function(){var C=this.type,B=[C.kind];if(C.kind==="array"){var $=C.itemType;if($.kind==="string"||$.kind==="number"||$.kind==="boolean"){B.push($.kind);var he=C.N;(typeof he=="number"||this.args.length>1)&&B.push(he)}}return B.concat(this.args.map(function(me){return me.serialize()}))};var es=function(C){this.type=pa,this.sections=C};es.parse=function(C,B){if(C.length<2)return B.error("Expected at least one argument.");var $=C[1];if(!Array.isArray($)&&typeof $=="object")return B.error("First argument must be an image or text section.");for(var he=[],me=!1,we=1;we<=C.length-1;++we){var Ie=C[we];if(me&&typeof Ie=="object"&&!Array.isArray(Ie)){me=!1;var $e=null;if(Ie["font-scale"]&&($e=B.parse(Ie["font-scale"],1,gr),!$e))return null;var ut=null;if(Ie["text-font"]&&(ut=B.parse(Ie["text-font"],1,la(Dr)),!ut))return null;var gt=null;if(Ie["text-color"]&&(gt=B.parse(Ie["text-color"],1,Bn),!gt))return null;var Rt=he[he.length-1];Rt.scale=$e,Rt.font=ut,Rt.textColor=gt}else{var Qt=B.parse(C[we],1,bn);if(!Qt)return null;var Wt=Qt.type.kind;if(Wt!=="string"&&Wt!=="value"&&Wt!=="null"&&Wt!=="resolvedImage")return B.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");me=!0,he.push({content:Qt,scale:null,font:null,textColor:null})}}return new es(he)},es.prototype.evaluate=function(C){var B=function($){var he=$.content.evaluate(C);return Di(he)===ya?new Ps("",he,null,null,null):new Ps(rl(he),null,$.scale?$.scale.evaluate(C):null,$.font?$.font.evaluate(C).join(","):null,$.textColor?$.textColor.evaluate(C):null)};return new Ui(this.sections.map(B))},es.prototype.eachChild=function(C){for(var B=0,$=this.sections;B<$.length;B+=1){var he=$[B];C(he.content),he.scale&&C(he.scale),he.font&&C(he.font),he.textColor&&C(he.textColor)}},es.prototype.outputDefined=function(){return!1},es.prototype.serialize=function(){for(var C=["format"],B=0,$=this.sections;B<$.length;B+=1){var he=$[B];C.push(he.content.serialize());var me={};he.scale&&(me["font-scale"]=he.scale.serialize()),he.font&&(me["text-font"]=he.font.serialize()),he.textColor&&(me["text-color"]=he.textColor.serialize()),C.push(me)}return C};var Hs=function(C){this.type=ya,this.input=C};Hs.parse=function(C,B){if(C.length!==2)return B.error("Expected two arguments.");var $=B.parse(C[1],1,Dr);return $?new Hs($):B.error("No image name provided.")},Hs.prototype.evaluate=function(C){var B=this.input.evaluate(C),$=Ao.fromString(B);return $&&C.availableImages&&($.available=C.availableImages.indexOf(B)>-1),$},Hs.prototype.eachChild=function(C){C(this.input)},Hs.prototype.outputDefined=function(){return!1},Hs.prototype.serialize=function(){return["image",this.input.serialize()]};var nu={"to-boolean":dn,"to-color":Bn,"to-number":gr,"to-string":Dr},jo=function(C,B){this.type=C,this.args=B};jo.parse=function(C,B){if(C.length<2)return B.error("Expected at least one argument.");var $=C[0];if(($==="to-boolean"||$==="to-string")&&C.length!==2)return B.error("Expected one argument.");for(var he=nu[$],me=[],we=1;we<C.length;we++){var Ie=B.parse(C[we],we,bn);if(!Ie)return null;me.push(Ie)}return new jo(he,me)},jo.prototype.evaluate=function(C){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(C));if(this.type.kind==="color"){for(var B,$,he=0,me=this.args;he<me.length;he+=1){var we=me[he];if(B=we.evaluate(C),$=null,B instanceof vi)return B;if(typeof B=="string"){var Ie=C.parseColor(B);if(Ie)return Ie}else if(Array.isArray(B)&&(B.length<3||B.length>4?$="Invalid rbga value "+JSON.stringify(B)+": expected an array containing either three or four numeric values.":$=vl(B[0],B[1],B[2],B[3]),!$))return new vi(B[0]/255,B[1]/255,B[2]/255,B[3])}throw new Fi($||"Could not parse color from value '"+(typeof B=="string"?B:String(JSON.stringify(B)))+"'")}else if(this.type.kind==="number"){for(var $e=null,ut=0,gt=this.args;ut<gt.length;ut+=1){var Rt=gt[ut];if($e=Rt.evaluate(C),$e===null)return 0;var Qt=Number($e);if(!isNaN(Qt))return Qt}throw new Fi("Could not convert "+JSON.stringify($e)+" to number.")}else return this.type.kind==="formatted"?Ui.fromString(rl(this.args[0].evaluate(C))):this.type.kind==="resolvedImage"?Ao.fromString(rl(this.args[0].evaluate(C))):rl(this.args[0].evaluate(C))},jo.prototype.eachChild=function(C){this.args.forEach(C)},jo.prototype.outputDefined=function(){return this.args.every(function(C){return C.outputDefined()})},jo.prototype.serialize=function(){if(this.type.kind==="formatted")return new es([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Hs(this.args[0]).serialize();var C=["to-"+this.type.kind];return this.eachChild(function(B){C.push(B.serialize())}),C};var au=["Unknown","Point","LineString","Polygon"],Ds=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Ds.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Ds.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?au[this.feature.type]:this.feature.type:null},Ds.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Ds.prototype.canonicalID=function(){return this.canonical},Ds.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Ds.prototype.parseColor=function(C){var B=this._parseColorCache[C];return B||(B=this._parseColorCache[C]=vi.parse(C)),B};var Mo=function(C,B,$,he){this.name=C,this.type=B,this._evaluate=$,this.args=he};Mo.prototype.evaluate=function(C){return this._evaluate(C,this.args)},Mo.prototype.eachChild=function(C){this.args.forEach(C)},Mo.prototype.outputDefined=function(){return!1},Mo.prototype.serialize=function(){return[this.name].concat(this.args.map(function(C){return C.serialize()}))},Mo.parse=function(C,B){var $,he=C[0],me=Mo.definitions[he];if(!me)return B.error('Unknown expression "'+he+'". If you wanted a literal array, use ["literal", [...]].',0);for(var we=Array.isArray(me)?me[0]:me.type,Ie=Array.isArray(me)?[[me[1],me[2]]]:me.overloads,$e=Ie.filter(function(Pa){var Ra=Pa[0];return!Array.isArray(Ra)||Ra.length===C.length-1}),ut=null,gt=0,Rt=$e;gt<Rt.length;gt+=1){var Qt=Rt[gt],Wt=Qt[0],vr=Qt[1];ut=new So(B.registry,B.path,null,B.scope);for(var Rr=[],an=!1,Jr=1;Jr<C.length;Jr++){var Mn=C[Jr],yn=Array.isArray(Wt)?Wt[Jr-1]:Wt.type,Tn=ut.parse(Mn,1+Rr.length,yn);if(!Tn){an=!0;break}Rr.push(Tn)}if(!an){if(Array.isArray(Wt)&&Wt.length!==Rr.length){ut.error("Expected "+Wt.length+" arguments, but found "+Rr.length+" instead.");continue}for(var Rn=0;Rn<Rr.length;Rn++){var Vn=Array.isArray(Wt)?Wt[Rn]:Wt.type,sa=Rr[Rn];ut.concat(Rn+1).checkSubtype(Vn,sa.type)}if(ut.errors.length===0)return new Mo(he,we,vr,Rr)}}if($e.length===1)($=B.errors).push.apply($,ut.errors);else{for(var na=$e.length?$e:Ie,Ia=na.map(function(Pa){var Ra=Pa[0];return Au(Ra)}).join(" | "),_a=[],ka=1;ka<C.length;ka++){var ei=B.parse(C[ka],1+_a.length);if(!ei)return null;_a.push(Sa(ei.type))}B.error("Expected arguments of type "+Ia+", but found ("+_a.join(", ")+") instead.")}return null},Mo.register=function(C,B){Mo.definitions=B;for(var $ in B)C[$]=Mo};function Au(E){return Array.isArray(E)?"("+E.map(Sa).join(", ")+")":"("+Sa(E.type)+"...)"}var Rs=function(C,B,$){this.type=aa,this.locale=$,this.caseSensitive=C,this.diacriticSensitive=B};Rs.parse=function(C,B){if(C.length!==2)return B.error("Expected one argument.");var $=C[1];if(typeof $!="object"||Array.isArray($))return B.error("Collator options argument must be an object.");var he=B.parse($["case-sensitive"]===void 0?!1:$["case-sensitive"],1,dn);if(!he)return null;var me=B.parse($["diacritic-sensitive"]===void 0?!1:$["diacritic-sensitive"],1,dn);if(!me)return null;var we=null;return $.locale&&(we=B.parse($.locale,1,Dr),!we)?null:new Rs(he,me,we)},Rs.prototype.evaluate=function(C){return new Vs(this.caseSensitive.evaluate(C),this.diacriticSensitive.evaluate(C),this.locale?this.locale.evaluate(C):null)},Rs.prototype.eachChild=function(C){C(this.caseSensitive),C(this.diacriticSensitive),this.locale&&C(this.locale)},Rs.prototype.outputDefined=function(){return!1},Rs.prototype.serialize=function(){var C={};return C["case-sensitive"]=this.caseSensitive.serialize(),C["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(C.locale=this.locale.serialize()),["collator",C]};var bs=8192;function Cl(E,C){E[0]=Math.min(E[0],C[0]),E[1]=Math.min(E[1],C[1]),E[2]=Math.max(E[2],C[0]),E[3]=Math.max(E[3],C[1])}function Mu(E){return(180+E)/360}function Su(E){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+E*Math.PI/360)))/360}function Gs(E,C){return!(E[0]<=C[0]||E[2]>=C[2]||E[1]<=C[1]||E[3]>=C[3])}function Ll(E,C){var B=Mu(E[0]),$=Su(E[1]),he=Math.pow(2,C.z);return[Math.round(B*he*bs),Math.round($*he*bs)]}function _s(E,C,B){var $=E[0]-C[0],he=E[1]-C[1],me=E[0]-B[0],we=E[1]-B[1];return $*we-me*he===0&&$*me<=0&&he*we<=0}function Yl(E,C,B){return C[1]>E[1]!=B[1]>E[1]&&E[0]<(B[0]-C[0])*(E[1]-C[1])/(B[1]-C[1])+C[0]}function nl(E,C){for(var B=!1,$=0,he=C.length;$<he;$++)for(var me=C[$],we=0,Ie=me.length;we<Ie-1;we++){if(_s(E,me[we],me[we+1]))return!1;Yl(E,me[we],me[we+1])&&(B=!B)}return B}function Wl(E,C){for(var B=0;B<C.length;B++)if(nl(E,C[B]))return!0;return!1}function iu(E,C){return E[0]*C[1]-E[1]*C[0]}function Pl(E,C,B,$){var he=E[0]-B[0],me=E[1]-B[1],we=C[0]-B[0],Ie=C[1]-B[1],$e=$[0]-B[0],ut=$[1]-B[1],gt=he*ut-$e*me,Rt=we*ut-$e*Ie;return gt>0&&Rt<0||gt<0&&Rt>0}function ku(E,C,B,$){var he=[C[0]-E[0],C[1]-E[1]],me=[$[0]-B[0],$[1]-B[1]];return iu(me,he)===0?!1:!!(Pl(E,C,B,$)&&Pl(B,$,E,C))}function Ys(E,C,B){for(var $=0,he=B;$<he.length;$+=1)for(var me=he[$],we=0;we<me.length-1;++we)if(ku(E,C,me[we],me[we+1]))return!0;return!1}function Xl(E,C){for(var B=0;B<E.length;++B)if(!nl(E[B],C))return!1;for(var $=0;$<E.length-1;++$)if(Ys(E[$],E[$+1],C))return!1;return!0}function Dl(E,C){for(var B=0;B<C.length;B++)if(Xl(E,C[B]))return!0;return!1}function vs(E,C,B){for(var $=[],he=0;he<E.length;he++){for(var me=[],we=0;we<E[he].length;we++){var Ie=Ll(E[he][we],B);Cl(C,Ie),me.push(Ie)}$.push(me)}return $}function pl(E,C,B){for(var $=[],he=0;he<E.length;he++){var me=vs(E[he],C,B);$.push(me)}return $}function Zl(E,C,B,$){if(E[0]<B[0]||E[0]>B[2]){var he=$*.5,me=E[0]-B[0]>he?-$:B[0]-E[0]>he?$:0;me===0&&(me=E[0]-B[2]>he?-$:B[2]-E[0]>he?$:0),E[0]+=me}Cl(C,E)}function ou(E){E[0]=E[1]=1/0,E[2]=E[3]=-1/0}function su(E,C,B,$){for(var he=Math.pow(2,$.z)*bs,me=[$.x*bs,$.y*bs],we=[],Ie=0,$e=E;Ie<$e.length;Ie+=1)for(var ut=$e[Ie],gt=0,Rt=ut;gt<Rt.length;gt+=1){var Qt=Rt[gt],Wt=[Qt.x+me[0],Qt.y+me[1]];Zl(Wt,C,B,he),we.push(Wt)}return we}function Rl(E,C,B,$){for(var he=Math.pow(2,$.z)*bs,me=[$.x*bs,$.y*bs],we=[],Ie=0,$e=E;Ie<$e.length;Ie+=1){for(var ut=$e[Ie],gt=[],Rt=0,Qt=ut;Rt<Qt.length;Rt+=1){var Wt=Qt[Rt],vr=[Wt.x+me[0],Wt.y+me[1]];Cl(C,vr),gt.push(vr)}we.push(gt)}if(C[2]-C[0]<=he/2){ou(C);for(var Rr=0,an=we;Rr<an.length;Rr+=1)for(var Jr=an[Rr],Mn=0,yn=Jr;Mn<yn.length;Mn+=1){var Tn=yn[Mn];Zl(Tn,C,B,he)}}return we}function Eu(E,C){var B=[1/0,1/0,-1/0,-1/0],$=[1/0,1/0,-1/0,-1/0],he=E.canonicalID();if(C.type==="Polygon"){var me=vs(C.coordinates,$,he),we=su(E.geometry(),B,$,he);if(!Gs(B,$))return!1;for(var Ie=0,$e=we;Ie<$e.length;Ie+=1){var ut=$e[Ie];if(!nl(ut,me))return!1}}if(C.type==="MultiPolygon"){var gt=pl(C.coordinates,$,he),Rt=su(E.geometry(),B,$,he);if(!Gs(B,$))return!1;for(var Qt=0,Wt=Rt;Qt<Wt.length;Qt+=1){var vr=Wt[Qt];if(!Wl(vr,gt))return!1}}return!0}function lu(E,C){var B=[1/0,1/0,-1/0,-1/0],$=[1/0,1/0,-1/0,-1/0],he=E.canonicalID();if(C.type==="Polygon"){var me=vs(C.coordinates,$,he),we=Rl(E.geometry(),B,$,he);if(!Gs(B,$))return!1;for(var Ie=0,$e=we;Ie<$e.length;Ie+=1){var ut=$e[Ie];if(!Xl(ut,me))return!1}}if(C.type==="MultiPolygon"){var gt=pl(C.coordinates,$,he),Rt=Rl(E.geometry(),B,$,he);if(!Gs(B,$))return!1;for(var Qt=0,Wt=Rt;Qt<Wt.length;Qt+=1){var vr=Wt[Qt];if(!Dl(vr,gt))return!1}}return!0}var Ko=function(C,B){this.type=dn,this.geojson=C,this.geometries=B};Ko.parse=function(C,B){if(C.length!==2)return B.error("'within' expression requires exactly one argument, but found "+(C.length-1)+" instead.");if(hs(C[1])){var $=C[1];if($.type==="FeatureCollection")for(var he=0;he<$.features.length;++he){var me=$.features[he].geometry.type;if(me==="Polygon"||me==="MultiPolygon")return new Ko($,$.features[he].geometry)}else if($.type==="Feature"){var we=$.geometry.type;if(we==="Polygon"||we==="MultiPolygon")return new Ko($,$.geometry)}else if($.type==="Polygon"||$.type==="MultiPolygon")return new Ko($,$)}return B.error("'within' expression requires valid geojson object that contains polygon geometry type.")},Ko.prototype.evaluate=function(C){if(C.geometry()!=null&&C.canonicalID()!=null){if(C.geometryType()==="Point")return Eu(C,this.geometries);if(C.geometryType()==="LineString")return lu(C,this.geometries)}return!1},Ko.prototype.eachChild=function(){},Ko.prototype.outputDefined=function(){return!0},Ko.prototype.serialize=function(){return["within",this.geojson]};function al(E){if(E instanceof Mo){if(E.name==="get"&&E.args.length===1)return!1;if(E.name==="feature-state")return!1;if(E.name==="has"&&E.args.length===1)return!1;if(E.name==="properties"||E.name==="geometry-type"||E.name==="id")return!1;if(/^filter-/.test(E.name))return!1}if(E instanceof Ko)return!1;var C=!0;return E.eachChild(function(B){C&&!al(B)&&(C=!1)}),C}function il(E){if(E instanceof Mo&&E.name==="feature-state")return!1;var C=!0;return E.eachChild(function(B){C&&!il(B)&&(C=!1)}),C}function jl(E,C){if(E instanceof Mo&&C.indexOf(E.name)>=0)return!1;var B=!0;return E.eachChild(function($){B&&!jl($,C)&&(B=!1)}),B}var ps=function(C,B){this.type=B.type,this.name=C,this.boundExpression=B};ps.parse=function(C,B){if(C.length!==2||typeof C[1]!="string")return B.error("'var' expression requires exactly one string literal argument.");var $=C[1];return B.scope.has($)?new ps($,B.scope.get($)):B.error('Unknown variable "'+$+'". Make sure "'+$+'" has been bound in an enclosing "let" expression before using it.',1)},ps.prototype.evaluate=function(C){return this.boundExpression.evaluate(C)},ps.prototype.eachChild=function(){},ps.prototype.outputDefined=function(){return!1},ps.prototype.serialize=function(){return["var",this.name]};var So=function(C,B,$,he,me){B===void 0&&(B=[]),he===void 0&&(he=new un),me===void 0&&(me=[]),this.registry=C,this.path=B,this.key=B.map(function(we){return"["+we+"]"}).join(""),this.scope=he,this.errors=me,this.expectedType=$};So.prototype.parse=function(C,B,$,he,me){return me===void 0&&(me={}),B?this.concat(B,$,he)._parse(C,me):this._parse(C,me)},So.prototype._parse=function(C,B){(C===null||typeof C=="string"||typeof C=="boolean"||typeof C=="number")&&(C=["literal",C]);function $(gt,Rt,Qt){return Qt==="assert"?new Ji(Rt,[gt]):Qt==="coerce"?new jo(Rt,[gt]):gt}if(Array.isArray(C)){if(C.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var he=C[0];if(typeof he!="string")return this.error("Expression name must be a string, but found "+typeof he+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var me=this.registry[he];if(me){var we=me.parse(C,this);if(!we)return null;if(this.expectedType){var Ie=this.expectedType,$e=we.type;if((Ie.kind==="string"||Ie.kind==="number"||Ie.kind==="boolean"||Ie.kind==="object"||Ie.kind==="array")&&$e.kind==="value")we=$(we,Ie,B.typeAnnotation||"assert");else if((Ie.kind==="color"||Ie.kind==="formatted"||Ie.kind==="resolvedImage")&&($e.kind==="value"||$e.kind==="string"))we=$(we,Ie,B.typeAnnotation||"coerce");else if(this.checkSubtype(Ie,$e))return null}if(!(we instanceof Ki)&&we.type.kind!=="resolvedImage"&&Il(we)){var ut=new Ds;try{we=new Ki(we.type,we.evaluate(ut))}catch(gt){return this.error(gt.message),null}}return we}return this.error('Unknown expression "'+he+'". If you wanted a literal array, use ["literal", [...]].',0)}else return typeof C>"u"?this.error("'undefined' value invalid. Use null instead."):typeof C=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof C+" instead.")},So.prototype.concat=function(C,B,$){var he=typeof C=="number"?this.path.concat(C):this.path,me=$?this.scope.concat($):this.scope;return new So(this.registry,he,B||null,me,this.errors)},So.prototype.error=function(C){for(var B=[],$=arguments.length-1;$-- >0;)B[$]=arguments[$+1];var he=""+this.key+B.map(function(me){return"["+me+"]"}).join("");this.errors.push(new mn(he,C))},So.prototype.checkSubtype=function(C,B){var $=Ro(C,B);return $&&this.error($),$};function Il(E){if(E instanceof ps)return Il(E.boundExpression);if(E instanceof Mo&&E.name==="error")return!1;if(E instanceof Rs)return!1;if(E instanceof Ko)return!1;var C=E instanceof jo||E instanceof Ji,B=!0;return E.eachChild(function($){C?B=B&&Il($):B=B&&$ instanceof Ki}),B?al(E)&&jl(E,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function ws(E,C){for(var B=E.length-1,$=0,he=B,me=0,we,Ie;$<=he;)if(me=Math.floor(($+he)/2),we=E[me],Ie=E[me+1],we<=C){if(me===B||C<Ie)return me;$=me+1}else if(we>C)he=me-1;else throw new Fi("Input is not a number.");return 0}var Ts=function(C,B,$){this.type=C,this.input=B,this.labels=[],this.outputs=[];for(var he=0,me=$;he<me.length;he+=1){var we=me[he],Ie=we[0],$e=we[1];this.labels.push(Ie),this.outputs.push($e)}};Ts.parse=function(C,B){if(C.length-1<4)return B.error("Expected at least 4 arguments, but found only "+(C.length-1)+".");if((C.length-1)%2!==0)return B.error("Expected an even number of arguments.");var $=B.parse(C[1],1,gr);if(!$)return null;var he=[],me=null;B.expectedType&&B.expectedType.kind!=="value"&&(me=B.expectedType);for(var we=1;we<C.length;we+=2){var Ie=we===1?-1/0:C[we],$e=C[we+1],ut=we,gt=we+1;if(typeof Ie!="number")return B.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ut);if(he.length&&he[he.length-1][0]>=Ie)return B.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ut);var Rt=B.parse($e,gt,me);if(!Rt)return null;me=me||Rt.type,he.push([Ie,Rt])}return new Ts(me,$,he)},Ts.prototype.evaluate=function(C){var B=this.labels,$=this.outputs;if(B.length===1)return $[0].evaluate(C);var he=this.input.evaluate(C);if(he<=B[0])return $[0].evaluate(C);var me=B.length;if(he>=B[me-1])return $[me-1].evaluate(C);var we=ws(B,he);return $[we].evaluate(C)},Ts.prototype.eachChild=function(C){C(this.input);for(var B=0,$=this.outputs;B<$.length;B+=1){var he=$[B];C(he)}},Ts.prototype.outputDefined=function(){return this.outputs.every(function(C){return C.outputDefined()})},Ts.prototype.serialize=function(){for(var C=["step",this.input.serialize()],B=0;B<this.labels.length;B++)B>0&&C.push(this.labels[B]),C.push(this.outputs[B].serialize());return C};function oo(E,C,B){return E*(1-B)+C*B}function dl(E,C,B){return new vi(oo(E.r,C.r,B),oo(E.g,C.g,B),oo(E.b,C.b,B),oo(E.a,C.a,B))}function yl(E,C,B){return E.map(function($,he){return oo($,C[he],B)})}var Ws=Object.freeze({__proto__:null,number:oo,color:dl,array:yl}),ds=.95047,ml=1,ol=1.08883,zl=4/29,xl=6/29,Xs=3*xl*xl,Cu=xl*xl*xl,ts=Math.PI/180,Gu=180/Math.PI;function Kl(E){return E>Cu?Math.pow(E,1/3):E/Xs+zl}function sl(E){return E>xl?E*E*E:Xs*(E-zl)}function bl(E){return 255*(E<=.0031308?12.92*E:1.055*Math.pow(E,1/2.4)-.055)}function Zs(E){return E/=255,E<=.04045?E/12.92:Math.pow((E+.055)/1.055,2.4)}function _l(E){var C=Zs(E.r),B=Zs(E.g),$=Zs(E.b),he=Kl((.4124564*C+.3575761*B+.1804375*$)/ds),me=Kl((.2126729*C+.7151522*B+.072175*$)/ml),we=Kl((.0193339*C+.119192*B+.9503041*$)/ol);return{l:116*me-16,a:500*(he-me),b:200*(me-we),alpha:E.a}}function uu(E){var C=(E.l+16)/116,B=isNaN(E.a)?C:C+E.a/500,$=isNaN(E.b)?C:C-E.b/200;return C=ml*sl(C),B=ds*sl(B),$=ol*sl($),new vi(bl(3.2404542*B-1.5371385*C-.4985314*$),bl(-.969266*B+1.8760108*C+.041556*$),bl(.0556434*B-.2040259*C+1.0572252*$),E.alpha)}function fu(E,C,B){return{l:oo(E.l,C.l,B),a:oo(E.a,C.a,B),b:oo(E.b,C.b,B),alpha:oo(E.alpha,C.alpha,B)}}function Yu(E){var C=_l(E),B=C.l,$=C.a,he=C.b,me=Math.atan2(he,$)*Gu;return{h:me<0?me+360:me,c:Math.sqrt($*$+he*he),l:B,alpha:E.a}}function Ri(E){var C=E.h*ts,B=E.c,$=E.l;return uu({l:$,a:Math.cos(C)*B,b:Math.sin(C)*B,alpha:E.alpha})}function ll(E,C,B){var $=C-E;return E+B*($>180||$<-180?$-360*Math.round($/360):$)}function js(E,C,B){return{h:ll(E.h,C.h,B),c:oo(E.c,C.c,B),l:oo(E.l,C.l,B),alpha:oo(E.alpha,C.alpha,B)}}var Jo={forward:_l,reverse:uu,interpolate:fu},rs={forward:Yu,reverse:Ri,interpolate:js},wl=Object.freeze({__proto__:null,lab:Jo,hcl:rs}),so=function(C,B,$,he,me){this.type=C,this.operator=B,this.interpolation=$,this.input=he,this.labels=[],this.outputs=[];for(var we=0,Ie=me;we<Ie.length;we+=1){var $e=Ie[we],ut=$e[0],gt=$e[1];this.labels.push(ut),this.outputs.push(gt)}};so.interpolationFactor=function(C,B,$,he){var me=0;if(C.name==="exponential")me=cu(B,C.base,$,he);else if(C.name==="linear")me=cu(B,1,$,he);else if(C.name==="cubic-bezier"){var we=C.controlPoints,Ie=new r(we[0],we[1],we[2],we[3]);me=Ie.solve(cu(B,1,$,he))}return me},so.parse=function(C,B){var $=C[0],he=C[1],me=C[2],we=C.slice(3);if(!Array.isArray(he)||he.length===0)return B.error("Expected an interpolation type expression.",1);if(he[0]==="linear")he={name:"linear"};else if(he[0]==="exponential"){var Ie=he[1];if(typeof Ie!="number")return B.error("Exponential interpolation requires a numeric base.",1,1);he={name:"exponential",base:Ie}}else if(he[0]==="cubic-bezier"){var $e=he.slice(1);if($e.length!==4||$e.some(function(Jr){return typeof Jr!="number"||Jr<0||Jr>1}))return B.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);he={name:"cubic-bezier",controlPoints:$e}}else return B.error("Unknown interpolation type "+String(he[0]),1,0);if(C.length-1<4)return B.error("Expected at least 4 arguments, but found only "+(C.length-1)+".");if((C.length-1)%2!==0)return B.error("Expected an even number of arguments.");if(me=B.parse(me,2,gr),!me)return null;var ut=[],gt=null;$==="interpolate-hcl"||$==="interpolate-lab"?gt=Bn:B.expectedType&&B.expectedType.kind!=="value"&&(gt=B.expectedType);for(var Rt=0;Rt<we.length;Rt+=2){var Qt=we[Rt],Wt=we[Rt+1],vr=Rt+3,Rr=Rt+4;if(typeof Qt!="number")return B.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',vr);if(ut.length&&ut[ut.length-1][0]>=Qt)return B.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',vr);var an=B.parse(Wt,Rr,gt);if(!an)return null;gt=gt||an.type,ut.push([Qt,an])}return gt.kind!=="number"&&gt.kind!=="color"&&!(gt.kind==="array"&&gt.itemType.kind==="number"&&typeof gt.N=="number")?B.error("Type "+Sa(gt)+" is not interpolatable."):new so(gt,$,he,me,ut)},so.prototype.evaluate=function(C){var B=this.labels,$=this.outputs;if(B.length===1)return $[0].evaluate(C);var he=this.input.evaluate(C);if(he<=B[0])return $[0].evaluate(C);var me=B.length;if(he>=B[me-1])return $[me-1].evaluate(C);var we=ws(B,he),Ie=B[we],$e=B[we+1],ut=so.interpolationFactor(this.interpolation,he,Ie,$e),gt=$[we].evaluate(C),Rt=$[we+1].evaluate(C);return this.operator==="interpolate"?Ws[this.type.kind.toLowerCase()](gt,Rt,ut):this.operator==="interpolate-hcl"?rs.reverse(rs.interpolate(rs.forward(gt),rs.forward(Rt),ut)):Jo.reverse(Jo.interpolate(Jo.forward(gt),Jo.forward(Rt),ut))},so.prototype.eachChild=function(C){C(this.input);for(var B=0,$=this.outputs;B<$.length;B+=1){var he=$[B];C(he)}},so.prototype.outputDefined=function(){return this.outputs.every(function(C){return C.outputDefined()})},so.prototype.serialize=function(){var C;this.interpolation.name==="linear"?C=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?C=["linear"]:C=["exponential",this.interpolation.base]:C=["cubic-bezier"].concat(this.interpolation.controlPoints);for(var B=[this.operator,C,this.input.serialize()],$=0;$<this.labels.length;$++)B.push(this.labels[$],this.outputs[$].serialize());return B};function cu(E,C,B,$){var he=$-B,me=E-B;return he===0?0:C===1?me/he:(Math.pow(C,me)-1)/(Math.pow(C,he)-1)}var ns=function(C,B){this.type=C,this.args=B};ns.parse=function(C,B){if(C.length<2)return B.error("Expectected at least one argument.");var $=null,he=B.expectedType;he&&he.kind!=="value"&&($=he);for(var me=[],we=0,Ie=C.slice(1);we<Ie.length;we+=1){var $e=Ie[we],ut=B.parse($e,1+me.length,$,void 0,{typeAnnotation:"omit"});if(!ut)return null;$=$||ut.type,me.push(ut)}var gt=he&&me.some(function(Rt){return Ro(he,Rt.type)});return gt?new ns(bn,me):new ns($,me)},ns.prototype.evaluate=function(C){for(var B=null,$=0,he,me=0,we=this.args;me<we.length;me+=1){var Ie=we[me];if($++,B=Ie.evaluate(C),B&&B instanceof Ao&&!B.available&&(he||(he=B.name),B=null,$===this.args.length&&(B=he)),B!==null)break}return B},ns.prototype.eachChild=function(C){this.args.forEach(C)},ns.prototype.outputDefined=function(){return this.args.every(function(C){return C.outputDefined()})},ns.prototype.serialize=function(){var C=["coalesce"];return this.eachChild(function(B){C.push(B.serialize())}),C};var Is=function(C,B){this.type=B.type,this.bindings=[].concat(C),this.result=B};Is.prototype.evaluate=function(C){return this.result.evaluate(C)},Is.prototype.eachChild=function(C){for(var B=0,$=this.bindings;B<$.length;B+=1){var he=$[B];C(he[1])}C(this.result)},Is.parse=function(C,B){if(C.length<4)return B.error("Expected at least 3 arguments, but found "+(C.length-1)+" instead.");for(var $=[],he=1;he<C.length-1;he+=2){var me=C[he];if(typeof me!="string")return B.error("Expected string, but found "+typeof me+" instead.",he);if(/[^a-zA-Z0-9_]/.test(me))return B.error("Variable names must contain only alphanumeric characters or '_'.",he);var we=B.parse(C[he+1],he+1);if(!we)return null;$.push([me,we])}var Ie=B.parse(C[C.length-1],C.length-1,B.expectedType,$);return Ie?new Is($,Ie):null},Is.prototype.outputDefined=function(){return this.result.outputDefined()},Is.prototype.serialize=function(){for(var C=["let"],B=0,$=this.bindings;B<$.length;B+=1){var he=$[B],me=he[0],we=he[1];C.push(me,we.serialize())}return C.push(this.result.serialize()),C};var zs=function(C,B,$){this.type=C,this.index=B,this.input=$};zs.parse=function(C,B){if(C.length!==3)return B.error("Expected 2 arguments, but found "+(C.length-1)+" instead.");var $=B.parse(C[1],1,gr),he=B.parse(C[2],2,la(B.expectedType||bn));if(!$||!he)return null;var me=he.type;return new zs(me.itemType,$,he)},zs.prototype.evaluate=function(C){var B=this.index.evaluate(C),$=this.input.evaluate(C);if(B<0)throw new Fi("Array index out of bounds: "+B+" < 0.");if(B>=$.length)throw new Fi("Array index out of bounds: "+B+" > "+($.length-1)+".");if(B!==Math.floor(B))throw new Fi("Array index must be an integer, but found "+B+" instead.");return $[B]},zs.prototype.eachChild=function(C){C(this.index),C(this.input)},zs.prototype.outputDefined=function(){return!1},zs.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var As=function(C,B){this.type=dn,this.needle=C,this.haystack=B};As.parse=function(C,B){if(C.length!==3)return B.error("Expected 2 arguments, but found "+(C.length-1)+" instead.");var $=B.parse(C[1],1,bn),he=B.parse(C[2],2,bn);return!$||!he?null:Zo($.type,[dn,Dr,gr,yr,bn])?new As($,he):B.error("Expected first argument to be of type boolean, string, number or null, but found "+Sa($.type)+" instead")},As.prototype.evaluate=function(C){var B=this.needle.evaluate(C),$=this.haystack.evaluate(C);if(!$)return!1;if(!tl(B,["boolean","string","number","null"]))throw new Fi("Expected first argument to be of type boolean, string, number or null, but found "+Sa(Di(B))+" instead.");if(!tl($,["string","array"]))throw new Fi("Expected second argument to be of type array or string, but found "+Sa(Di($))+" instead.");return $.indexOf(B)>=0},As.prototype.eachChild=function(C){C(this.needle),C(this.haystack)},As.prototype.outputDefined=function(){return!0},As.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var as=function(C,B,$){this.type=gr,this.needle=C,this.haystack=B,this.fromIndex=$};as.parse=function(C,B){if(C.length<=2||C.length>=5)return B.error("Expected 3 or 4 arguments, but found "+(C.length-1)+" instead.");var $=B.parse(C[1],1,bn),he=B.parse(C[2],2,bn);if(!$||!he)return null;if(!Zo($.type,[dn,Dr,gr,yr,bn]))return B.error("Expected first argument to be of type boolean, string, number or null, but found "+Sa($.type)+" instead");if(C.length===4){var me=B.parse(C[3],3,gr);return me?new as($,he,me):null}else return new as($,he)},as.prototype.evaluate=function(C){var B=this.needle.evaluate(C),$=this.haystack.evaluate(C);if(!tl(B,["boolean","string","number","null"]))throw new Fi("Expected first argument to be of type boolean, string, number or null, but found "+Sa(Di(B))+" instead.");if(!tl($,["string","array"]))throw new Fi("Expected second argument to be of type array or string, but found "+Sa(Di($))+" instead.");if(this.fromIndex){var he=this.fromIndex.evaluate(C);return $.indexOf(B,he)}return $.indexOf(B)},as.prototype.eachChild=function(C){C(this.needle),C(this.haystack),this.fromIndex&&C(this.fromIndex)},as.prototype.outputDefined=function(){return!1},as.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var C=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),C]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Vi=function(C,B,$,he,me,we){this.inputType=C,this.type=B,this.input=$,this.cases=he,this.outputs=me,this.otherwise=we};Vi.parse=function(C,B){if(C.length<5)return B.error("Expected at least 4 arguments, but found only "+(C.length-1)+".");if(C.length%2!==1)return B.error("Expected an even number of arguments.");var $,he;B.expectedType&&B.expectedType.kind!=="value"&&(he=B.expectedType);for(var me={},we=[],Ie=2;Ie<C.length-1;Ie+=2){var $e=C[Ie],ut=C[Ie+1];Array.isArray($e)||($e=[$e]);var gt=B.concat(Ie);if($e.length===0)return gt.error("Expected at least one branch label.");for(var Rt=0,Qt=$e;Rt<Qt.length;Rt+=1){var Wt=Qt[Rt];if(typeof Wt!="number"&&typeof Wt!="string")return gt.error("Branch labels must be numbers or strings.");if(typeof Wt=="number"&&Math.abs(Wt)>Number.MAX_SAFE_INTEGER)return gt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Wt=="number"&&Math.floor(Wt)!==Wt)return gt.error("Numeric branch labels must be integer values.");if(!$)$=Di(Wt);else if(gt.checkSubtype($,Di(Wt)))return null;if(typeof me[String(Wt)]<"u")return gt.error("Branch labels must be unique.");me[String(Wt)]=we.length}var vr=B.parse(ut,Ie,he);if(!vr)return null;he=he||vr.type,we.push(vr)}var Rr=B.parse(C[1],1,bn);if(!Rr)return null;var an=B.parse(C[C.length-1],C.length-1,he);return!an||Rr.type.kind!=="value"&&B.concat(1).checkSubtype($,Rr.type)?null:new Vi($,he,Rr,me,we,an)},Vi.prototype.evaluate=function(C){var B=this.input.evaluate(C),$=Di(B)===this.inputType&&this.outputs[this.cases[B]]||this.otherwise;return $.evaluate(C)},Vi.prototype.eachChild=function(C){C(this.input),this.outputs.forEach(C),C(this.otherwise)},Vi.prototype.outputDefined=function(){return this.outputs.every(function(C){return C.outputDefined()})&&this.otherwise.outputDefined()},Vi.prototype.serialize=function(){for(var C=this,B=["match",this.input.serialize()],$=Object.keys(this.cases).sort(),he=[],me={},we=0,Ie=$;we<Ie.length;we+=1){var $e=Ie[we],ut=me[this.cases[$e]];ut===void 0?(me[this.cases[$e]]=he.length,he.push([this.cases[$e],[$e]])):he[ut][1].push($e)}for(var gt=function(Rr){return C.inputType.kind==="number"?Number(Rr):Rr},Rt=0,Qt=he;Rt<Qt.length;Rt+=1){var Wt=Qt[Rt],ut=Wt[0],vr=Wt[1];vr.length===1?B.push(gt(vr[0])):B.push(vr.map(gt)),B.push(this.outputs[outputIndex$1].serialize())}return B.push(this.otherwise.serialize()),B};var ko=function(C,B,$){this.type=C,this.branches=B,this.otherwise=$};ko.parse=function(C,B){if(C.length<4)return B.error("Expected at least 3 arguments, but found only "+(C.length-1)+".");if(C.length%2!==0)return B.error("Expected an odd number of arguments.");var $;B.expectedType&&B.expectedType.kind!=="value"&&($=B.expectedType);for(var he=[],me=1;me<C.length-1;me+=2){var we=B.parse(C[me],me,dn);if(!we)return null;var Ie=B.parse(C[me+1],me+1,$);if(!Ie)return null;he.push([we,Ie]),$=$||Ie.type}var $e=B.parse(C[C.length-1],C.length-1,$);return $e?new ko($,he,$e):null},ko.prototype.evaluate=function(C){for(var B=0,$=this.branches;B<$.length;B+=1){var he=$[B],me=he[0],we=he[1];if(me.evaluate(C))return we.evaluate(C)}return this.otherwise.evaluate(C)},ko.prototype.eachChild=function(C){for(var B=0,$=this.branches;B<$.length;B+=1){var he=$[B],me=he[0],we=he[1];C(me),C(we)}C(this.otherwise)},ko.prototype.outputDefined=function(){return this.branches.every(function(C){C[0];var B=C[1];return B.outputDefined()})&&this.otherwise.outputDefined()},ko.prototype.serialize=function(){var C=["case"];return this.eachChild(function(B){C.push(B.serialize())}),C};var is=function(C,B,$,he){this.type=C,this.input=B,this.beginIndex=$,this.endIndex=he};is.parse=function(C,B){if(C.length<=2||C.length>=5)return B.error("Expected 3 or 4 arguments, but found "+(C.length-1)+" instead.");var $=B.parse(C[1],1,bn),he=B.parse(C[2],2,gr);if(!$||!he)return null;if(!Zo($.type,[la(bn),Dr,bn]))return B.error("Expected first argument to be of type array or string, but found "+Sa($.type)+" instead");if(C.length===4){var me=B.parse(C[3],3,gr);return me?new is($.type,$,he,me):null}else return new is($.type,$,he)},is.prototype.evaluate=function(C){var B=this.input.evaluate(C),$=this.beginIndex.evaluate(C);if(!tl(B,["string","array"]))throw new Fi("Expected first argument to be of type array or string, but found "+Sa(Di(B))+" instead.");if(this.endIndex){var he=this.endIndex.evaluate(C);return B.slice($,he)}return B.slice($)},is.prototype.eachChild=function(C){C(this.input),C(this.beginIndex),this.endIndex&&C(this.endIndex)},is.prototype.outputDefined=function(){return!1},is.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var C=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),C]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};function hu(E,C){return E==="=="||E==="!="?C.kind==="boolean"||C.kind==="string"||C.kind==="number"||C.kind==="null"||C.kind==="value":C.kind==="string"||C.kind==="number"||C.kind==="value"}function Fl(E,C,B){return C===B}function vu(E,C,B){return C!==B}function yt(E,C,B){return C<B}function It(E,C,B){return C>B}function lr(E,C,B){return C<=B}function tr(E,C,B){return C>=B}function Lr(E,C,B,$){return $.compare(C,B)===0}function tn(E,C,B,$){return!Lr(E,C,B,$)}function pn(E,C,B,$){return $.compare(C,B)<0}function wn(E,C,B,$){return $.compare(C,B)>0}function Cn(E,C,B,$){return $.compare(C,B)<=0}function On(E,C,B,$){return $.compare(C,B)>=0}function gn(E,C,B){var $=E!=="=="&&E!=="!=";return function(){function he(me,we,Ie){this.type=dn,this.lhs=me,this.rhs=we,this.collator=Ie,this.hasUntypedArgument=me.type.kind==="value"||we.type.kind==="value"}return he.parse=function(we,Ie){if(we.length!==3&&we.length!==4)return Ie.error("Expected two or three arguments.");var $e=we[0],ut=Ie.parse(we[1],1,bn);if(!ut)return null;if(!hu($e,ut.type))return Ie.concat(1).error('"'+$e+`" comparisons are not supported for type '`+Sa(ut.type)+"'.");var gt=Ie.parse(we[2],2,bn);if(!gt)return null;if(!hu($e,gt.type))return Ie.concat(2).error('"'+$e+`" comparisons are not supported for type '`+Sa(gt.type)+"'.");if(ut.type.kind!==gt.type.kind&&ut.type.kind!=="value"&&gt.type.kind!=="value")return Ie.error("Cannot compare types '"+Sa(ut.type)+"' and '"+Sa(gt.type)+"'.");$&&(ut.type.kind==="value"&&gt.type.kind!=="value"?ut=new Ji(gt.type,[ut]):ut.type.kind!=="value"&&gt.type.kind==="value"&&(gt=new Ji(ut.type,[gt])));var Rt=null;if(we.length===4){if(ut.type.kind!=="string"&&gt.type.kind!=="string"&&ut.type.kind!=="value"&&gt.type.kind!=="value")return Ie.error("Cannot use collator to compare non-string types.");if(Rt=Ie.parse(we[3],3,aa),!Rt)return null}return new he(ut,gt,Rt)},he.prototype.evaluate=function(we){var Ie=this.lhs.evaluate(we),$e=this.rhs.evaluate(we);if($&&this.hasUntypedArgument){var ut=Di(Ie),gt=Di($e);if(ut.kind!==gt.kind||!(ut.kind==="string"||ut.kind==="number"))throw new Fi('Expected arguments for "'+E+'" to be (string, string) or (number, number), but found ('+ut.kind+", "+gt.kind+") instead.")}if(this.collator&&!$&&this.hasUntypedArgument){var Rt=Di(Ie),Qt=Di($e);if(Rt.kind!=="string"||Qt.kind!=="string")return C(we,Ie,$e)}return this.collator?B(we,Ie,$e,this.collator.evaluate(we)):C(we,Ie,$e)},he.prototype.eachChild=function(we){we(this.lhs),we(this.rhs),this.collator&&we(this.collator)},he.prototype.outputDefined=function(){return!0},he.prototype.serialize=function(){var we=[E];return this.eachChild(function(Ie){we.push(Ie.serialize())}),we},he}()}var In=gn("==",Fl,Lr),Pn=gn("!=",vu,tn),Un=gn("<",yt,pn),$n=gn(">",It,wn),Fa=gn("<=",lr,Cn),Ca=gn(">=",tr,On),Ba=function(C,B,$,he,me){this.type=Dr,this.number=C,this.locale=B,this.currency=$,this.minFractionDigits=he,this.maxFractionDigits=me};Ba.parse=function(C,B){if(C.length!==3)return B.error("Expected two arguments.");var $=B.parse(C[1],1,gr);if(!$)return null;var he=C[2];if(typeof he!="object"||Array.isArray(he))return B.error("NumberFormat options argument must be an object.");var me=null;if(he.locale&&(me=B.parse(he.locale,1,Dr),!me))return null;var we=null;if(he.currency&&(we=B.parse(he.currency,1,Dr),!we))return null;var Ie=null;if(he["min-fraction-digits"]&&(Ie=B.parse(he["min-fraction-digits"],1,gr),!Ie))return null;var $e=null;return he["max-fraction-digits"]&&($e=B.parse(he["max-fraction-digits"],1,gr),!$e)?null:new Ba($,me,we,Ie,$e)},Ba.prototype.evaluate=function(C){return new Intl.NumberFormat(this.locale?this.locale.evaluate(C):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(C):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(C):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(C):void 0}).format(this.number.evaluate(C))},Ba.prototype.eachChild=function(C){C(this.number),this.locale&&C(this.locale),this.currency&&C(this.currency),this.minFractionDigits&&C(this.minFractionDigits),this.maxFractionDigits&&C(this.maxFractionDigits)},Ba.prototype.outputDefined=function(){return!1},Ba.prototype.serialize=function(){var C={};return this.locale&&(C.locale=this.locale.serialize()),this.currency&&(C.currency=this.currency.serialize()),this.minFractionDigits&&(C["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(C["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),C]};var Oa=function(C){this.type=gr,this.input=C};Oa.parse=function(C,B){if(C.length!==2)return B.error("Expected 1 argument, but found "+(C.length-1)+" instead.");var $=B.parse(C[1],1);return $?$.type.kind!=="array"&&$.type.kind!=="string"&&$.type.kind!=="value"?B.error("Expected argument of type string or array, but found "+Sa($.type)+" instead."):new Oa($):null},Oa.prototype.evaluate=function(C){var B=this.input.evaluate(C);if(typeof B=="string")return B.length;if(Array.isArray(B))return B.length;throw new Fi("Expected value to be of type string or array, but found "+Sa(Di(B))+" instead.")},Oa.prototype.eachChild=function(C){C(this.input)},Oa.prototype.outputDefined=function(){return!1},Oa.prototype.serialize=function(){var C=["length"];return this.eachChild(function(B){C.push(B.serialize())}),C};var Jn={"==":In,"!=":Pn,">":$n,"<":Un,">=":Ca,"<=":Fa,array:Ji,at:zs,boolean:Ji,case:ko,coalesce:ns,collator:Rs,format:es,image:Hs,in:As,"index-of":as,interpolate:so,"interpolate-hcl":so,"interpolate-lab":so,length:Oa,let:Is,literal:Ki,match:Vi,number:Ji,"number-format":Ba,object:Ji,slice:is,step:Ts,string:Ji,"to-boolean":jo,"to-color":jo,"to-number":jo,"to-string":jo,var:ps,within:Ko};function ha(E,C){var B=C[0],$=C[1],he=C[2],me=C[3];B=B.evaluate(E),$=$.evaluate(E),he=he.evaluate(E);var we=me?me.evaluate(E):1,Ie=vl(B,$,he,we);if(Ie)throw new Fi(Ie);return new vi(B/255*we,$/255*we,he/255*we,we)}function Ga(E,C){return E in C}function Ka(E,C){var B=C[E];return typeof B>"u"?null:B}function di(E,C,B,$){for(;B<=$;){var he=B+$>>1;if(C[he]===E)return!0;C[he]>E?$=he-1:B=he+1}return!1}function gi(E){return{type:E}}Mo.register(Jn,{error:[Zn,[Dr],function(E,C){var B=C[0];throw new Fi(B.evaluate(E))}],typeof:[Dr,[bn],function(E,C){var B=C[0];return Sa(Di(B.evaluate(E)))}],"to-rgba":[la(gr,4),[Bn],function(E,C){var B=C[0];return B.evaluate(E).toArray()}],rgb:[Bn,[gr,gr,gr],ha],rgba:[Bn,[gr,gr,gr,gr],ha],has:{type:dn,overloads:[[[Dr],function(E,C){var B=C[0];return Ga(B.evaluate(E),E.properties())}],[[Dr,ta],function(E,C){var B=C[0],$=C[1];return Ga(B.evaluate(E),$.evaluate(E))}]]},get:{type:bn,overloads:[[[Dr],function(E,C){var B=C[0];return Ka(B.evaluate(E),E.properties())}],[[Dr,ta],function(E,C){var B=C[0],$=C[1];return Ka(B.evaluate(E),$.evaluate(E))}]]},"feature-state":[bn,[Dr],function(E,C){var B=C[0];return Ka(B.evaluate(E),E.featureState||{})}],properties:[ta,[],function(E){return E.properties()}],"geometry-type":[Dr,[],function(E){return E.geometryType()}],id:[bn,[],function(E){return E.id()}],zoom:[gr,[],function(E){return E.globals.zoom}],"heatmap-density":[gr,[],function(E){return E.globals.heatmapDensity||0}],"line-progress":[gr,[],function(E){return E.globals.lineProgress||0}],accumulated:[bn,[],function(E){return E.globals.accumulated===void 0?null:E.globals.accumulated}],"+":[gr,gi(gr),function(E,C){for(var B=0,$=0,he=C;$<he.length;$+=1){var me=he[$];B+=me.evaluate(E)}return B}],"*":[gr,gi(gr),function(E,C){for(var B=1,$=0,he=C;$<he.length;$+=1){var me=he[$];B*=me.evaluate(E)}return B}],"-":{type:gr,overloads:[[[gr,gr],function(E,C){var B=C[0],$=C[1];return B.evaluate(E)-$.evaluate(E)}],[[gr],function(E,C){var B=C[0];return-B.evaluate(E)}]]},"/":[gr,[gr,gr],function(E,C){var B=C[0],$=C[1];return B.evaluate(E)/$.evaluate(E)}],"%":[gr,[gr,gr],function(E,C){var B=C[0],$=C[1];return B.evaluate(E)%$.evaluate(E)}],ln2:[gr,[],function(){return Math.LN2}],pi:[gr,[],function(){return Math.PI}],e:[gr,[],function(){return Math.E}],"^":[gr,[gr,gr],function(E,C){var B=C[0],$=C[1];return Math.pow(B.evaluate(E),$.evaluate(E))}],sqrt:[gr,[gr],function(E,C){var B=C[0];return Math.sqrt(B.evaluate(E))}],log10:[gr,[gr],function(E,C){var B=C[0];return Math.log(B.evaluate(E))/Math.LN10}],ln:[gr,[gr],function(E,C){var B=C[0];return Math.log(B.evaluate(E))}],log2:[gr,[gr],function(E,C){var B=C[0];return Math.log(B.evaluate(E))/Math.LN2}],sin:[gr,[gr],function(E,C){var B=C[0];return Math.sin(B.evaluate(E))}],cos:[gr,[gr],function(E,C){var B=C[0];return Math.cos(B.evaluate(E))}],tan:[gr,[gr],function(E,C){var B=C[0];return Math.tan(B.evaluate(E))}],asin:[gr,[gr],function(E,C){var B=C[0];return Math.asin(B.evaluate(E))}],acos:[gr,[gr],function(E,C){var B=C[0];return Math.acos(B.evaluate(E))}],atan:[gr,[gr],function(E,C){var B=C[0];return Math.atan(B.evaluate(E))}],min:[gr,gi(gr),function(E,C){return Math.min.apply(Math,C.map(function(B){return B.evaluate(E)}))}],max:[gr,gi(gr),function(E,C){return Math.max.apply(Math,C.map(function(B){return B.evaluate(E)}))}],abs:[gr,[gr],function(E,C){var B=C[0];return Math.abs(B.evaluate(E))}],round:[gr,[gr],function(E,C){var B=C[0],$=B.evaluate(E);return $<0?-Math.round(-$):Math.round($)}],floor:[gr,[gr],function(E,C){var B=C[0];return Math.floor(B.evaluate(E))}],ceil:[gr,[gr],function(E,C){var B=C[0];return Math.ceil(B.evaluate(E))}],"filter-==":[dn,[Dr,bn],function(E,C){var B=C[0],$=C[1];return E.properties()[B.value]===$.value}],"filter-id-==":[dn,[bn],function(E,C){var B=C[0];return E.id()===B.value}],"filter-type-==":[dn,[Dr],function(E,C){var B=C[0];return E.geometryType()===B.value}],"filter-<":[dn,[Dr,bn],function(E,C){var B=C[0],$=C[1],he=E.properties()[B.value],me=$.value;return typeof he==typeof me&&he<me}],"filter-id-<":[dn,[bn],function(E,C){var B=C[0],$=E.id(),he=B.value;return typeof $==typeof he&&$<he}],"filter->":[dn,[Dr,bn],function(E,C){var B=C[0],$=C[1],he=E.properties()[B.value],me=$.value;return typeof he==typeof me&&he>me}],"filter-id->":[dn,[bn],function(E,C){var B=C[0],$=E.id(),he=B.value;return typeof $==typeof he&&$>he}],"filter-<=":[dn,[Dr,bn],function(E,C){var B=C[0],$=C[1],he=E.properties()[B.value],me=$.value;return typeof he==typeof me&&he<=me}],"filter-id-<=":[dn,[bn],function(E,C){var B=C[0],$=E.id(),he=B.value;return typeof $==typeof he&&$<=he}],"filter->=":[dn,[Dr,bn],function(E,C){var B=C[0],$=C[1],he=E.properties()[B.value],me=$.value;return typeof he==typeof me&&he>=me}],"filter-id->=":[dn,[bn],function(E,C){var B=C[0],$=E.id(),he=B.value;return typeof $==typeof he&&$>=he}],"filter-has":[dn,[bn],function(E,C){var B=C[0];return B.value in E.properties()}],"filter-has-id":[dn,[],function(E){return E.id()!==null&&E.id()!==void 0}],"filter-type-in":[dn,[la(Dr)],function(E,C){var B=C[0];return B.value.indexOf(E.geometryType())>=0}],"filter-id-in":[dn,[la(bn)],function(E,C){var B=C[0];return B.value.indexOf(E.id())>=0}],"filter-in-small":[dn,[Dr,la(bn)],function(E,C){var B=C[0],$=C[1];return $.value.indexOf(E.properties()[B.value])>=0}],"filter-in-large":[dn,[Dr,la(bn)],function(E,C){var B=C[0],$=C[1];return di(E.properties()[B.value],$.value,0,$.value.length-1)}],all:{type:dn,overloads:[[[dn,dn],function(E,C){var B=C[0],$=C[1];return B.evaluate(E)&&$.evaluate(E)}],[gi(dn),function(E,C){for(var B=0,$=C;B<$.length;B+=1){var he=$[B];if(!he.evaluate(E))return!1}return!0}]]},any:{type:dn,overloads:[[[dn,dn],function(E,C){var B=C[0],$=C[1];return B.evaluate(E)||$.evaluate(E)}],[gi(dn),function(E,C){for(var B=0,$=C;B<$.length;B+=1){var he=$[B];if(he.evaluate(E))return!0}return!1}]]},"!":[dn,[dn],function(E,C){var B=C[0];return!B.evaluate(E)}],"is-supported-script":[dn,[Dr],function(E,C){var B=C[0],$=E.globals&&E.globals.isSupportedScript;return $?$(B.evaluate(E)):!0}],upcase:[Dr,[Dr],function(E,C){var B=C[0];return B.evaluate(E).toUpperCase()}],downcase:[Dr,[Dr],function(E,C){var B=C[0];return B.evaluate(E).toLowerCase()}],concat:[Dr,gi(bn),function(E,C){return C.map(function(B){return rl(B.evaluate(E))}).join("")}],"resolved-locale":[Dr,[aa],function(E,C){var B=C[0];return B.evaluate(E).resolvedLocale()}]});function mi(E){return{result:"success",value:E}}function Ai(E){return{result:"error",value:E}}function li(E){return E["property-type"]==="data-driven"||E["property-type"]==="cross-faded-data-driven"}function yo(E){return!!E.expression&&E.expression.parameters.indexOf("zoom")>-1}function qi(E){return!!E.expression&&E.expression.interpolated}function ja(E){return E instanceof Number?"number":E instanceof String?"string":E instanceof Boolean?"boolean":Array.isArray(E)?"array":E===null?"null":typeof E}function va(E){return typeof E=="object"&&E!==null&&!Array.isArray(E)}function xi(E){return E}function lo(E,C){var B=C.type==="color",$=E.stops&&typeof E.stops[0][0]=="object",he=$||E.property!==void 0,me=$||!he,we=E.type||(qi(C)?"exponential":"interval");if(B&&(E=rn({},E),E.stops&&(E.stops=E.stops.map(function(na){return[na[0],vi.parse(na[1])]})),E.default?E.default=vi.parse(E.default):E.default=vi.parse(C.default)),E.colorSpace&&E.colorSpace!=="rgb"&&!wl[E.colorSpace])throw new Error("Unknown color space: "+E.colorSpace);var Ie,$e,ut;if(we==="exponential")Ie=Io;else if(we==="interval")Ie=Ms;else if(we==="categorical"){Ie=os,$e=Object.create(null);for(var gt=0,Rt=E.stops;gt<Rt.length;gt+=1){var Qt=Rt[gt];$e[Qt[0]]=Qt[1]}ut=typeof E.stops[0][0]}else if(we==="identity")Ie=Ks;else throw new Error('Unknown function type "'+we+'"');if($){for(var Wt={},vr=[],Rr=0;Rr<E.stops.length;Rr++){var an=E.stops[Rr],Jr=an[0].zoom;Wt[Jr]===void 0&&(Wt[Jr]={zoom:Jr,type:E.type,property:E.property,default:E.default,stops:[]},vr.push(Jr)),Wt[Jr].stops.push([an[0].value,an[1]])}for(var Mn=[],yn=0,Tn=vr;yn<Tn.length;yn+=1){var Rn=Tn[yn];Mn.push([Wt[Rn].zoom,lo(Wt[Rn],C)])}var Vn={name:"linear"};return{kind:"composite",interpolationType:Vn,interpolationFactor:so.interpolationFactor.bind(void 0,Vn),zoomStops:Mn.map(function(na){return na[0]}),evaluate:function(Ia,_a){var ka=Ia.zoom;return Io({stops:Mn,base:E.base},C,ka).evaluate(ka,_a)}}}else if(me){var sa=we==="exponential"?{name:"exponential",base:E.base!==void 0?E.base:1}:null;return{kind:"camera",interpolationType:sa,interpolationFactor:so.interpolationFactor.bind(void 0,sa),zoomStops:E.stops.map(function(na){return na[0]}),evaluate:function(na){var Ia=na.zoom;return Ie(E,C,Ia,$e,ut)}}}else return{kind:"source",evaluate:function(Ia,_a){var ka=_a&&_a.properties?_a.properties[E.property]:void 0;return ka===void 0?vo(E.default,C.default):Ie(E,C,ka,$e,ut)}}}function vo(E,C,B){if(E!==void 0)return E;if(C!==void 0)return C;if(B!==void 0)return B}function os(E,C,B,$,he){var me=typeof B===he?$[B]:void 0;return vo(me,E.default,C.default)}function Ms(E,C,B){if(ja(B)!=="number")return vo(E.default,C.default);var $=E.stops.length;if($===1||B<=E.stops[0][0])return E.stops[0][1];if(B>=E.stops[$-1][0])return E.stops[$-1][1];var he=ws(E.stops.map(function(me){return me[0]}),B);return E.stops[he][1]}function Io(E,C,B){var $=E.base!==void 0?E.base:1;if(ja(B)!=="number")return vo(E.default,C.default);var he=E.stops.length;if(he===1||B<=E.stops[0][0])return E.stops[0][1];if(B>=E.stops[he-1][0])return E.stops[he-1][1];var me=ws(E.stops.map(function(Rt){return Rt[0]}),B),we=gs(B,$,E.stops[me][0],E.stops[me+1][0]),Ie=E.stops[me][1],$e=E.stops[me+1][1],ut=Ws[C.type]||xi;if(E.colorSpace&&E.colorSpace!=="rgb"){var gt=wl[E.colorSpace];ut=function(Rt,Qt){return gt.reverse(gt.interpolate(gt.forward(Rt),gt.forward(Qt),we))}}return typeof Ie.evaluate=="function"?{evaluate:function(){for(var Qt=[],Wt=arguments.length;Wt--;)Qt[Wt]=arguments[Wt];var vr=Ie.evaluate.apply(void 0,Qt),Rr=$e.evaluate.apply(void 0,Qt);if(!(vr===void 0||Rr===void 0))return ut(vr,Rr,we)}}:ut(Ie,$e,we)}function Ks(E,C,B){return C.type==="color"?B=vi.parse(B):C.type==="formatted"?B=Ui.fromString(B.toString()):C.type==="resolvedImage"?B=Ao.fromString(B.toString()):ja(B)!==C.type&&(C.type!=="enum"||!C.values[B])&&(B=void 0),vo(B,E.default,C.default)}function gs(E,C,B,$){var he=$-B,me=E-B;return he===0?0:C===1?me/he:(Math.pow(C,me)-1)/(Math.pow(C,he)-1)}var ss=function(C,B){this.expression=C,this._warningHistory={},this._evaluator=new Ds,this._defaultValue=B?Pu(B):null,this._enumValues=B&&B.type==="enum"?B.values:null};ss.prototype.evaluateWithoutErrorHandling=function(C,B,$,he,me,we){return this._evaluator.globals=C,this._evaluator.feature=B,this._evaluator.featureState=$,this._evaluator.canonical=he,this._evaluator.availableImages=me||null,this._evaluator.formattedSection=we,this.expression.evaluate(this._evaluator)},ss.prototype.evaluate=function(C,B,$,he,me,we){this._evaluator.globals=C,this._evaluator.feature=B||null,this._evaluator.featureState=$||null,this._evaluator.canonical=he,this._evaluator.availableImages=me||null,this._evaluator.formattedSection=we||null;try{var Ie=this.expression.evaluate(this._evaluator);if(Ie==null||typeof Ie=="number"&&Ie!==Ie)return this._defaultValue;if(this._enumValues&&!(Ie in this._enumValues))throw new Fi("Expected value to be one of "+Object.keys(this._enumValues).map(function($e){return JSON.stringify($e)}).join(", ")+", but found "+JSON.stringify(Ie)+" instead.");return Ie}catch($e){return this._warningHistory[$e.message]||(this._warningHistory[$e.message]=!0,typeof console<"u"&&console.warn($e.message)),this._defaultValue}};function mo(E){return Array.isArray(E)&&E.length>0&&typeof E[0]=="string"&&E[0]in Jn}function Bl(E,C){var B=new So(Jn,[],C?du(C):void 0),$=B.parse(E,void 0,void 0,void 0,C&&C.type==="string"?{typeAnnotation:"coerce"}:void 0);return $?mi(new ss($,C)):Ai(B.errors)}var Jl=function(C,B){this.kind=C,this._styleExpression=B,this.isStateDependent=C!=="constant"&&!il(B.expression)};Jl.prototype.evaluateWithoutErrorHandling=function(C,B,$,he,me,we){return this._styleExpression.evaluateWithoutErrorHandling(C,B,$,he,me,we)},Jl.prototype.evaluate=function(C,B,$,he,me,we){return this._styleExpression.evaluate(C,B,$,he,me,we)};var ls=function(C,B,$,he){this.kind=C,this.zoomStops=$,this._styleExpression=B,this.isStateDependent=C!=="camera"&&!il(B.expression),this.interpolationType=he};ls.prototype.evaluateWithoutErrorHandling=function(C,B,$,he,me,we){return this._styleExpression.evaluateWithoutErrorHandling(C,B,$,he,me,we)},ls.prototype.evaluate=function(C,B,$,he,me,we){return this._styleExpression.evaluate(C,B,$,he,me,we)},ls.prototype.interpolationFactor=function(C,B,$){return this.interpolationType?so.interpolationFactor(this.interpolationType,C,B,$):0};function pu(E,C){if(E=Bl(E,C),E.result==="error")return E;var B=E.value.expression,$=al(B);if(!$&&!li(C))return Ai([new mn("","data expressions not supported")]);var he=jl(B,["zoom"]);if(!he&&!yo(C))return Ai([new mn("","zoom expressions not supported")]);var me=Lu(B);if(!me&&!he)return Ai([new mn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(me instanceof mn)return Ai([me]);if(me instanceof so&&!qi(C))return Ai([new mn("",'"interpolate" expressions cannot be used with this property')]);if(!me)return mi($?new Jl("constant",E.value):new Jl("source",E.value));var we=me instanceof so?me.interpolation:void 0;return mi($?new ls("camera",E.value,me.labels,we):new ls("composite",E.value,me.labels,we))}var Ol=function(C,B){this._parameters=C,this._specification=B,rn(this,lo(this._parameters,this._specification))};Ol.deserialize=function(C){return new Ol(C._parameters,C._specification)},Ol.serialize=function(C){return{_parameters:C._parameters,_specification:C._specification}};function hf(E,C){if(va(E))return new Ol(E,C);if(mo(E)){var B=pu(E,C);if(B.result==="error")throw new Error(B.value.map(function(he){return he.key+": "+he.message}).join(", "));return B.value}else{var $=E;return typeof E=="string"&&C.type==="color"&&($=vi.parse(E)),{kind:"constant",evaluate:function(){return $}}}}function Lu(E){var C=null;if(E instanceof Is)C=Lu(E.result);else if(E instanceof ns)for(var B=0,$=E.args;B<$.length;B+=1){var he=$[B];if(C=Lu(he),C)break}else(E instanceof Ts||E instanceof so)&&E.input instanceof Mo&&E.input.name==="zoom"&&(C=E);return C instanceof mn||E.eachChild(function(me){var we=Lu(me);we instanceof mn?C=we:!C&&we?C=new mn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):C&&we&&C!==we&&(C=new mn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),C}function du(E){var C={color:Bn,string:Dr,number:gr,enum:Dr,boolean:dn,formatted:pa,resolvedImage:ya};return E.type==="array"?la(C[E.value]||bn,E.length):C[E.type]}function Pu(E){return E.type==="color"&&va(E.default)?new vi(0,0,0,0):E.type==="color"?vi.parse(E.default)||null:E.default===void 0?null:E.default}function Ss(E){var C=E.key,B=E.value,$=E.valueSpec||{},he=E.objectElementValidators||{},me=E.style,we=E.styleSpec,Ie=[],$e=ja(B);if($e!=="object")return[new cr(C,B,"object expected, "+$e+" found")];for(var ut in B){var gt=ut.split(".")[0],Rt=$[gt]||$["*"],Qt=void 0;if(he[gt])Qt=he[gt];else if($[gt])Qt=hi;else if(he["*"])Qt=he["*"];else if($["*"])Qt=hi;else{Ie.push(new cr(C,B[ut],'unknown property "'+ut+'"'));continue}Ie=Ie.concat(Qt({key:(C&&C+".")+ut,value:B[ut],valueSpec:Rt,style:me,styleSpec:we,object:B,objectKey:ut},B))}for(var Wt in $)he[Wt]||$[Wt].required&&$[Wt].default===void 0&&B[Wt]===void 0&&Ie.push(new cr(C,B,'missing required property "'+Wt+'"'));return Ie}function Wu(E){var C=E.value,B=E.valueSpec,$=E.style,he=E.styleSpec,me=E.key,we=E.arrayElementValidator||hi;if(ja(C)!=="array")return[new cr(me,C,"array expected, "+ja(C)+" found")];if(B.length&&C.length!==B.length)return[new cr(me,C,"array length "+B.length+" expected, length "+C.length+" found")];if(B["min-length"]&&C.length<B["min-length"])return[new cr(me,C,"array length at least "+B["min-length"]+" expected, length "+C.length+" found")];var Ie={type:B.value,values:B.values};he.$version<7&&(Ie.function=B.function),ja(B.value)==="object"&&(Ie=B.value);for(var $e=[],ut=0;ut<C.length;ut++)$e=$e.concat(we({array:C,arrayIndex:ut,value:C[ut],valueSpec:Ie,style:$,styleSpec:he,key:me+"["+ut+"]"}));return $e}function Du(E){var C=E.key,B=E.value,$=E.valueSpec,he=ja(B);return he==="number"&&B!==B&&(he="NaN"),he!=="number"?[new cr(C,B,"number expected, "+he+" found")]:"minimum"in $&&B<$.minimum?[new cr(C,B,B+" is less than the minimum value "+$.minimum)]:"maximum"in $&&B>$.maximum?[new cr(C,B,B+" is greater than the maximum value "+$.maximum)]:[]}function Ru(E){var C=E.valueSpec,B=sn(E.value.type),$,he={},me,we,Ie=B!=="categorical"&&E.value.property===void 0,$e=!Ie,ut=ja(E.value.stops)==="array"&&ja(E.value.stops[0])==="array"&&ja(E.value.stops[0][0])==="object",gt=Ss({key:E.key,value:E.value,valueSpec:E.styleSpec.function,style:E.style,styleSpec:E.styleSpec,objectElementValidators:{stops:Rt,default:vr}});return B==="identity"&&Ie&&gt.push(new cr(E.key,E.value,'missing required property "property"')),B!=="identity"&&!E.value.stops&&gt.push(new cr(E.key,E.value,'missing required property "stops"')),B==="exponential"&&E.valueSpec.expression&&!qi(E.valueSpec)&&gt.push(new cr(E.key,E.value,"exponential functions not supported")),E.styleSpec.$version>=8&&($e&&!li(E.valueSpec)?gt.push(new cr(E.key,E.value,"property functions not supported")):Ie&&!yo(E.valueSpec)&&gt.push(new cr(E.key,E.value,"zoom functions not supported"))),(B==="categorical"||ut)&&E.value.property===void 0&&gt.push(new cr(E.key,E.value,'"property" property is required')),gt;function Rt(Rr){if(B==="identity")return[new cr(Rr.key,Rr.value,'identity function may not have a "stops" property')];var an=[],Jr=Rr.value;return an=an.concat(Wu({key:Rr.key,value:Jr,valueSpec:Rr.valueSpec,style:Rr.style,styleSpec:Rr.styleSpec,arrayElementValidator:Qt})),ja(Jr)==="array"&&Jr.length===0&&an.push(new cr(Rr.key,Jr,"array must have at least one stop")),an}function Qt(Rr){var an=[],Jr=Rr.value,Mn=Rr.key;if(ja(Jr)!=="array")return[new cr(Mn,Jr,"array expected, "+ja(Jr)+" found")];if(Jr.length!==2)return[new cr(Mn,Jr,"array length 2 expected, length "+Jr.length+" found")];if(ut){if(ja(Jr[0])!=="object")return[new cr(Mn,Jr,"object expected, "+ja(Jr[0])+" found")];if(Jr[0].zoom===void 0)return[new cr(Mn,Jr,"object stop key must have zoom")];if(Jr[0].value===void 0)return[new cr(Mn,Jr,"object stop key must have value")];if(we&&we>sn(Jr[0].zoom))return[new cr(Mn,Jr[0].zoom,"stop zoom values must appear in ascending order")];sn(Jr[0].zoom)!==we&&(we=sn(Jr[0].zoom),me=void 0,he={}),an=an.concat(Ss({key:Mn+"[0]",value:Jr[0],valueSpec:{zoom:{}},style:Rr.style,styleSpec:Rr.styleSpec,objectElementValidators:{zoom:Du,value:Wt}}))}else an=an.concat(Wt({key:Mn+"[0]",value:Jr[0],valueSpec:{},style:Rr.style,styleSpec:Rr.styleSpec},Jr));return mo(kn(Jr[1]))?an.concat([new cr(Mn+"[1]",Jr[1],"expressions are not allowed in function stops.")]):an.concat(hi({key:Mn+"[1]",value:Jr[1],valueSpec:C,style:Rr.style,styleSpec:Rr.styleSpec}))}function Wt(Rr,an){var Jr=ja(Rr.value),Mn=sn(Rr.value),yn=Rr.value!==null?Rr.value:an;if(!$)$=Jr;else if(Jr!==$)return[new cr(Rr.key,yn,Jr+" stop domain type must match previous stop domain type "+$)];if(Jr!=="number"&&Jr!=="string"&&Jr!=="boolean")return[new cr(Rr.key,yn,"stop domain value must be a number, string, or boolean")];if(Jr!=="number"&&B!=="categorical"){var Tn="number expected, "+Jr+" found";return li(C)&&B===void 0&&(Tn+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new cr(Rr.key,yn,Tn)]}return B==="categorical"&&Jr==="number"&&(!isFinite(Mn)||Math.floor(Mn)!==Mn)?[new cr(Rr.key,yn,"integer expected, found "+Mn)]:B!=="categorical"&&Jr==="number"&&me!==void 0&&Mn<me?[new cr(Rr.key,yn,"stop domain values must appear in ascending order")]:(me=Mn,B==="categorical"&&Mn in he?[new cr(Rr.key,yn,"stop domain values must be unique")]:(he[Mn]=!0,[]))}function vr(Rr){return hi({key:Rr.key,value:Rr.value,valueSpec:C,style:Rr.style,styleSpec:Rr.styleSpec})}}function zo(E){var C=(E.expressionContext==="property"?pu:Bl)(kn(E.value),E.valueSpec);if(C.result==="error")return C.value.map(function($){return new cr(""+E.key+$.key,E.value,$.message)});var B=C.value.expression||C.value._styleExpression.expression;if(E.expressionContext==="property"&&E.propertyKey==="text-font"&&!B.outputDefined())return[new cr(E.key,E.value,'Invalid data expression for "'+E.propertyKey+'". Output values must be contained as literals within the expression.')];if(E.expressionContext==="property"&&E.propertyType==="layout"&&!il(B))return[new cr(E.key,E.value,'"feature-state" data expressions are not supported with layout properties.')];if(E.expressionContext==="filter"&&!il(B))return[new cr(E.key,E.value,'"feature-state" data expressions are not supported with filters.')];if(E.expressionContext&&E.expressionContext.indexOf("cluster")===0){if(!jl(B,["zoom","feature-state"]))return[new cr(E.key,E.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(E.expressionContext==="cluster-initial"&&!al(B))return[new cr(E.key,E.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Iu(E){var C=E.value,B=E.key,$=ja(C);return $!=="boolean"?[new cr(B,C,"boolean expected, "+$+" found")]:[]}function Qu(E){var C=E.key,B=E.value,$=ja(B);return $!=="string"?[new cr(C,B,"color expected, "+$+" found")]:Gl(B)===null?[new cr(C,B,'color expected, "'+B+'" found')]:[]}function ys(E){var C=E.key,B=E.value,$=E.valueSpec,he=[];return Array.isArray($.values)?$.values.indexOf(sn(B))===-1&&he.push(new cr(C,B,"expected one of ["+$.values.join(", ")+"], "+JSON.stringify(B)+" found")):Object.keys($.values).indexOf(sn(B))===-1&&he.push(new cr(C,B,"expected one of ["+Object.keys($.values).join(", ")+"], "+JSON.stringify(B)+" found")),he}function gu(E){if(E===!0||E===!1)return!0;if(!Array.isArray(E)||E.length===0)return!1;switch(E[0]){case"has":return E.length>=2&&E[1]!=="$id"&&E[1]!=="$type";case"in":return E.length>=3&&(typeof E[1]!="string"||Array.isArray(E[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return E.length!==3||Array.isArray(E[1])||Array.isArray(E[2]);case"any":case"all":for(var C=0,B=E.slice(1);C<B.length;C+=1){var $=B[C];if(!gu($)&&typeof $!="boolean")return!1}return!0;default:return!0}}var yu={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function zu(E){if(E==null)return{filter:function(){return!0},needGeometry:!1};gu(E)||(E=qe(E));var C=Bl(E,yu);if(C.result==="error")throw new Error(C.value.map(function($){return $.key+": "+$.message}).join(", "));var B=He(E);return{filter:function($,he,me){return C.value.evaluate($,he,{},me)},needGeometry:B}}function Re(E,C){return E<C?-1:E>C?1:0}function He(E){if(!Array.isArray(E))return!1;if(E[0]==="within")return!0;for(var C=1;C<E.length;C++)if(He(E[C]))return!0;return!1}function qe(E){if(!E)return!0;var C=E[0];if(E.length<=1)return C!=="any";var B=C==="=="?at(E[1],E[2],"=="):C==="!="?or(at(E[1],E[2],"==")):C==="<"||C===">"||C==="<="||C===">="?at(E[1],E[2],C):C==="any"?bt(E.slice(1)):C==="all"?["all"].concat(E.slice(1).map(qe)):C==="none"?["all"].concat(E.slice(1).map(qe).map(or)):C==="in"?mt(E[1],E.slice(2)):C==="!in"?or(mt(E[1],E.slice(2))):C==="has"?wt(E[1]):C==="!has"?or(wt(E[1])):C==="within"?E:!0;return B}function at(E,C,B){switch(E){case"$type":return["filter-type-"+B,C];case"$id":return["filter-id-"+B,C];default:return["filter-"+B,E,C]}}function bt(E){return["any"].concat(E.map(qe))}function mt(E,C){if(C.length===0)return!1;switch(E){case"$type":return["filter-type-in",["literal",C]];case"$id":return["filter-id-in",["literal",C]];default:return C.length>200&&!C.some(function(B){return typeof B!=typeof C[0]})?["filter-in-large",E,["literal",C.sort(Re)]]:["filter-in-small",E,["literal",C]]}}function wt(E){switch(E){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",E]}}function or(E){return["!",E]}function hr(E){return gu(kn(E.value))?zo(rn({},E,{expressionContext:"filter",valueSpec:{value:"boolean"}})):ar(E)}function ar(E){var C=E.value,B=E.key;if(ja(C)!=="array")return[new cr(B,C,"array expected, "+ja(C)+" found")];var $=E.styleSpec,he,me=[];if(C.length<1)return[new cr(B,C,"filter array must have at least 1 element")];switch(me=me.concat(ys({key:B+"[0]",value:C[0],valueSpec:$.filter_operator,style:E.style,styleSpec:E.styleSpec})),sn(C[0])){case"<":case"<=":case">":case">=":C.length>=2&&sn(C[1])==="$type"&&me.push(new cr(B,C,'"$type" cannot be use with operator "'+C[0]+'"'));case"==":case"!=":C.length!==3&&me.push(new cr(B,C,'filter array for operator "'+C[0]+'" must have 3 elements'));case"in":case"!in":C.length>=2&&(he=ja(C[1]),he!=="string"&&me.push(new cr(B+"[1]",C[1],"string expected, "+he+" found")));for(var we=2;we<C.length;we++)he=ja(C[we]),sn(C[1])==="$type"?me=me.concat(ys({key:B+"["+we+"]",value:C[we],valueSpec:$.geometry_type,style:E.style,styleSpec:E.styleSpec})):he!=="string"&&he!=="number"&&he!=="boolean"&&me.push(new cr(B+"["+we+"]",C[we],"string, number, or boolean expected, "+he+" found"));break;case"any":case"all":case"none":for(var Ie=1;Ie<C.length;Ie++)me=me.concat(ar({key:B+"["+Ie+"]",value:C[Ie],style:E.style,styleSpec:E.styleSpec}));break;case"has":case"!has":he=ja(C[1]),C.length!==2?me.push(new cr(B,C,'filter array for "'+C[0]+'" operator must have 2 elements')):he!=="string"&&me.push(new cr(B+"[1]",C[1],"string expected, "+he+" found"));break;case"within":he=ja(C[1]),C.length!==2?me.push(new cr(B,C,'filter array for "'+C[0]+'" operator must have 2 elements')):he!=="object"&&me.push(new cr(B+"[1]",C[1],"object expected, "+he+" found"));break}return me}function mr(E,C){var B=E.key,$=E.style,he=E.styleSpec,me=E.value,we=E.objectKey,Ie=he[C+"_"+E.layerType];if(!Ie)return[];var $e=we.match(/^(.*)-transition$/);if(C==="paint"&&$e&&Ie[$e[1]]&&Ie[$e[1]].transition)return hi({key:B,value:me,valueSpec:he.transition,style:$,styleSpec:he});var ut=E.valueSpec||Ie[we];if(!ut)return[new cr(B,me,'unknown property "'+we+'"')];var gt;if(ja(me)==="string"&&li(ut)&&!ut.tokens&&(gt=/^{([^}]+)}$/.exec(me)))return[new cr(B,me,'"'+we+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(gt[1])+" }`.")];var Rt=[];return E.layerType==="symbol"&&(we==="text-field"&&$&&!$.glyphs&&Rt.push(new cr(B,me,'use of "text-field" requires a style "glyphs" property')),we==="text-font"&&va(kn(me))&&sn(me.type)==="identity"&&Rt.push(new cr(B,me,'"text-font" does not support identity functions'))),Rt.concat(hi({key:E.key,value:me,valueSpec:ut,style:$,styleSpec:he,expressionContext:"property",propertyType:C,propertyKey:we}))}function Cr(E){return mr(E,"paint")}function Vr(E){return mr(E,"layout")}function qr(E){var C=[],B=E.value,$=E.key,he=E.style,me=E.styleSpec;!B.type&&!B.ref&&C.push(new cr($,B,'either "type" or "ref" is required'));var we=sn(B.type),Ie=sn(B.ref);if(B.id)for(var $e=sn(B.id),ut=0;ut<E.arrayIndex;ut++){var gt=he.layers[ut];sn(gt.id)===$e&&C.push(new cr($,B.id,'duplicate layer id "'+B.id+'", previously used at line '+gt.id.__line__))}if("ref"in B){["type","source","source-layer","filter","layout"].forEach(function(vr){vr in B&&C.push(new cr($,B[vr],'"'+vr+'" is prohibited for ref layers'))});var Rt;he.layers.forEach(function(vr){sn(vr.id)===Ie&&(Rt=vr)}),Rt?Rt.ref?C.push(new cr($,B.ref,"ref cannot reference another ref layer")):we=sn(Rt.type):C.push(new cr($,B.ref,'ref layer "'+Ie+'" not found'))}else if(we!=="background")if(!B.source)C.push(new cr($,B,'missing required property "source"'));else{var Qt=he.sources&&he.sources[B.source],Wt=Qt&&sn(Qt.type);Qt?Wt==="vector"&&we==="raster"?C.push(new cr($,B.source,'layer "'+B.id+'" requires a raster source')):Wt==="raster"&&we!=="raster"?C.push(new cr($,B.source,'layer "'+B.id+'" requires a vector source')):Wt==="vector"&&!B["source-layer"]?C.push(new cr($,B,'layer "'+B.id+'" must specify a "source-layer"')):Wt==="raster-dem"&&we!=="hillshade"?C.push(new cr($,B.source,"raster-dem source can only be used with layer type 'hillshade'.")):we==="line"&&B.paint&&B.paint["line-gradient"]&&(Wt!=="geojson"||!Qt.lineMetrics)&&C.push(new cr($,B,'layer "'+B.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):C.push(new cr($,B.source,'source "'+B.source+'" not found'))}return C=C.concat(Ss({key:$,value:B,valueSpec:me.layer,style:E.style,styleSpec:E.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return hi({key:$+".type",value:B.type,valueSpec:me.layer.type,style:E.style,styleSpec:E.styleSpec,object:B,objectKey:"type"})},filter:hr,layout:function(Rr){return Ss({layer:B,key:Rr.key,value:Rr.value,style:Rr.style,styleSpec:Rr.styleSpec,objectElementValidators:{"*":function(Jr){return Vr(rn({layerType:we},Jr))}}})},paint:function(Rr){return Ss({layer:B,key:Rr.key,value:Rr.value,style:Rr.style,styleSpec:Rr.styleSpec,objectElementValidators:{"*":function(Jr){return Cr(rn({layerType:we},Jr))}}})}}})),C}function xn(E){var C=E.value,B=E.key,$=ja(C);return $!=="string"?[new cr(B,C,"string expected, "+$+" found")]:[]}var Dn={promoteId:da};function Hn(E){var C=E.value,B=E.key,$=E.styleSpec,he=E.style;if(!C.type)return[new cr(B,C,'"type" is required')];var me=sn(C.type),we;switch(me){case"vector":case"raster":case"raster-dem":return we=Ss({key:B,value:C,valueSpec:$["source_"+me.replace("-","_")],style:E.style,styleSpec:$,objectElementValidators:Dn}),we;case"geojson":if(we=Ss({key:B,value:C,valueSpec:$.source_geojson,style:he,styleSpec:$,objectElementValidators:Dn}),C.cluster)for(var Ie in C.clusterProperties){var $e=C.clusterProperties[Ie],ut=$e[0],gt=$e[1],Rt=typeof ut=="string"?[ut,["accumulated"],["get",Ie]]:ut;we.push.apply(we,zo({key:B+"."+Ie+".map",value:gt,expressionContext:"cluster-map"})),we.push.apply(we,zo({key:B+"."+Ie+".reduce",value:Rt,expressionContext:"cluster-reduce"}))}return we;case"video":return Ss({key:B,value:C,valueSpec:$.source_video,style:he,styleSpec:$});case"image":return Ss({key:B,value:C,valueSpec:$.source_image,style:he,styleSpec:$});case"canvas":return[new cr(B,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ys({key:B+".type",value:C.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:he,styleSpec:$})}}function da(E){var C=E.key,B=E.value;if(ja(B)==="string")return xn({key:C,value:B});var $=[];for(var he in B)$.push.apply($,xn({key:C+"."+he,value:B[he]}));return $}function ma(E){var C=E.value,B=E.styleSpec,$=B.light,he=E.style,me=[],we=ja(C);if(C===void 0)return me;if(we!=="object")return me=me.concat([new cr("light",C,"object expected, "+we+" found")]),me;for(var Ie in C){var $e=Ie.match(/^(.*)-transition$/);$e&&$[$e[1]]&&$[$e[1]].transition?me=me.concat(hi({key:Ie,value:C[Ie],valueSpec:B.transition,style:he,styleSpec:B})):$[Ie]?me=me.concat(hi({key:Ie,value:C[Ie],valueSpec:$[Ie],style:he,styleSpec:B})):me=me.concat([new cr(Ie,C[Ie],'unknown property "'+Ie+'"')])}return me}function Za(E){return xn(E).length===0?[]:zo(E)}function Ya(E){return xn(E).length===0?[]:zo(E)}var qa={"*":function(){return[]},array:Wu,boolean:Iu,number:Du,color:Qu,constants:$r,enum:ys,filter:hr,function:Ru,layer:qr,object:Ss,source:Hn,light:ma,string:xn,formatted:Za,resolvedImage:Ya};function hi(E){var C=E.value,B=E.valueSpec,$=E.styleSpec;if(B.expression&&va(sn(C)))return Ru(E);if(B.expression&&mo(kn(C)))return zo(E);if(B.type&&qa[B.type])return qa[B.type](E);var he=Ss(rn({},E,{valueSpec:B.type?$[B.type]:B}));return he}function ao(E){var C=E.value,B=E.key,$=xn(E);return $.length||(C.indexOf("{fontstack}")===-1&&$.push(new cr(B,C,'"glyphs" url must include a "{fontstack}" token')),C.indexOf("{range}")===-1&&$.push(new cr(B,C,'"glyphs" url must include a "{range}" token'))),$}function ri(E,C){C===void 0&&(C=Ft);var B=[];return B=B.concat(hi({key:"",value:E,valueSpec:C.$root,styleSpec:C,style:E,objectElementValidators:{glyphs:ao,"*":function(){return[]}}})),E.constants&&(B=B.concat($r({key:"constants",value:E.constants,style:E,styleSpec:C}))),Hi(B)}ri.source=uo(Hn),ri.light=uo(ma),ri.layer=uo(qr),ri.filter=uo(hr),ri.paintProperty=uo(Cr),ri.layoutProperty=uo(Vr);function Hi(E){return[].concat(E).sort(function(C,B){return C.line-B.line})}function uo(E){return function(){for(var C=[],B=arguments.length;B--;)C[B]=arguments[B];return Hi(E.apply(this,C))}}var bo=ri,bi=bo.light,Mi=bo.paintProperty,us=bo.layoutProperty;function po(E,C){var B=!1;if(C&&C.length)for(var $=0,he=C;$<he.length;$+=1){var me=he[$];E.fire(new Er(new Error(me.message))),B=!0}return B}var Lo=ue,Ho=3;function ue(E,C,B){var $=this.cells=[];if(E instanceof ArrayBuffer){this.arrayBuffer=E;var he=new Int32Array(this.arrayBuffer);E=he[0],C=he[1],B=he[2],this.d=C+2*B;for(var me=0;me<this.d*this.d;me++){var we=he[Ho+me],Ie=he[Ho+me+1];$.push(we===Ie?null:he.subarray(we,Ie))}var $e=he[Ho+$.length],ut=he[Ho+$.length+1];this.keys=he.subarray($e,ut),this.bboxes=he.subarray(ut),this.insert=this._insertReadonly}else{this.d=C+2*B;for(var gt=0;gt<this.d*this.d;gt++)$.push([]);this.keys=[],this.bboxes=[]}this.n=C,this.extent=E,this.padding=B,this.scale=C/E,this.uid=0;var Rt=B/C*E;this.min=-Rt,this.max=E+Rt}ue.prototype.insert=function(E,C,B,$,he){this._forEachCell(C,B,$,he,this._insertCell,this.uid++),this.keys.push(E),this.bboxes.push(C),this.bboxes.push(B),this.bboxes.push($),this.bboxes.push(he)},ue.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ue.prototype._insertCell=function(E,C,B,$,he,me){this.cells[he].push(me)},ue.prototype.query=function(E,C,B,$,he){var me=this.min,we=this.max;if(E<=me&&C<=me&&we<=B&&we<=$&&!he)return Array.prototype.slice.call(this.keys);var Ie=[],$e={};return this._forEachCell(E,C,B,$,this._queryCell,Ie,$e,he),Ie},ue.prototype._queryCell=function(E,C,B,$,he,me,we,Ie){var $e=this.cells[he];if($e!==null)for(var ut=this.keys,gt=this.bboxes,Rt=0;Rt<$e.length;Rt++){var Qt=$e[Rt];if(we[Qt]===void 0){var Wt=Qt*4;(Ie?Ie(gt[Wt+0],gt[Wt+1],gt[Wt+2],gt[Wt+3]):E<=gt[Wt+2]&&C<=gt[Wt+3]&&B>=gt[Wt+0]&&$>=gt[Wt+1])?(we[Qt]=!0,me.push(ut[Qt])):we[Qt]=!1}}},ue.prototype._forEachCell=function(E,C,B,$,he,me,we,Ie){for(var $e=this._convertToCellCoord(E),ut=this._convertToCellCoord(C),gt=this._convertToCellCoord(B),Rt=this._convertToCellCoord($),Qt=$e;Qt<=gt;Qt++)for(var Wt=ut;Wt<=Rt;Wt++){var vr=this.d*Wt+Qt;if(!(Ie&&!Ie(this._convertFromCellCoord(Qt),this._convertFromCellCoord(Wt),this._convertFromCellCoord(Qt+1),this._convertFromCellCoord(Wt+1)))&&he.call(this,E,C,B,$,vr,me,we,Ie))return}},ue.prototype._convertFromCellCoord=function(E){return(E-this.padding)/this.scale},ue.prototype._convertToCellCoord=function(E){return Math.max(0,Math.min(this.d-1,Math.floor(E*this.scale)+this.padding))},ue.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var E=this.cells,C=Ho+this.cells.length+1+1,B=0,$=0;$<this.cells.length;$++)B+=this.cells[$].length;var he=new Int32Array(C+B+this.keys.length+this.bboxes.length);he[0]=this.extent,he[1]=this.n,he[2]=this.padding;for(var me=C,we=0;we<E.length;we++){var Ie=E[we];he[Ho+we]=me,he.set(Ie,me),me+=Ie.length}return he[Ho+E.length]=me,he.set(this.keys,me),me+=this.keys.length,he[Ho+E.length+1]=me,he.set(this.bboxes,me),me+=this.bboxes.length,he.buffer};var be=self.ImageData,Ee=self.ImageBitmap,Oe={};function ze(E,C,B){B===void 0&&(B={}),Object.defineProperty(C,"_classRegistryKey",{value:E,writeable:!1}),Oe[E]={klass:C,omit:B.omit||[],shallow:B.shallow||[]}}ze("Object",Object),Lo.serialize=function(C,B){var $=C.toArrayBuffer();return B&&B.push($),{buffer:$}},Lo.deserialize=function(C){return new Lo(C.buffer)},ze("Grid",Lo),ze("Color",vi),ze("Error",Error),ze("ResolvedImage",Ao),ze("StylePropertyFunction",Ol),ze("StyleExpression",ss,{omit:["_evaluator"]}),ze("ZoomDependentExpression",ls),ze("ZoomConstantExpression",Jl),ze("CompoundExpression",Mo,{omit:["_evaluate"]});for(var We in Jn)Jn[We]._classRegistryKey||ze("Expression_"+We,Jn[We]);function xt(E){return E&&typeof ArrayBuffer<"u"&&(E instanceof ArrayBuffer||E.constructor&&E.constructor.name==="ArrayBuffer")}function ht(E){return Ee&&E instanceof Ee}function Et(E,C){if(E==null||typeof E=="boolean"||typeof E=="number"||typeof E=="string"||E instanceof Boolean||E instanceof Number||E instanceof String||E instanceof Date||E instanceof RegExp)return E;if(xt(E)||ht(E))return C&&C.push(E),E;if(ArrayBuffer.isView(E)){var B=E;return C&&C.push(B.buffer),B}if(E instanceof be)return C&&C.push(E.data.buffer),E;if(Array.isArray(E)){for(var $=[],he=0,me=E;he<me.length;he+=1){var we=me[he];$.push(Et(we,C))}return $}if(typeof E=="object"){var Ie=E.constructor,$e=Ie._classRegistryKey;if(!$e)throw new Error("can't serialize object of unregistered class");var ut=Ie.serialize?Ie.serialize(E,C):{};if(!Ie.serialize){for(var gt in E)if(!!E.hasOwnProperty(gt)&&!(Oe[$e].omit.indexOf(gt)>=0)){var Rt=E[gt];ut[gt]=Oe[$e].shallow.indexOf(gt)>=0?Rt:Et(Rt,C)}E instanceof Error&&(ut.message=E.message)}if(ut.$name)throw new Error("$name property is reserved for worker serialization logic.");return $e!=="Object"&&(ut.$name=$e),ut}throw new Error("can't serialize object of type "+typeof E)}function Vt(E){if(E==null||typeof E=="boolean"||typeof E=="number"||typeof E=="string"||E instanceof Boolean||E instanceof Number||E instanceof String||E instanceof Date||E instanceof RegExp||xt(E)||ht(E)||ArrayBuffer.isView(E)||E instanceof be)return E;if(Array.isArray(E))return E.map(Vt);if(typeof E=="object"){var C=E.$name||"Object",B=Oe[C],$=B.klass;if(!$)throw new Error("can't deserialize unregistered class "+C);if($.deserialize)return $.deserialize(E);for(var he=Object.create($.prototype),me=0,we=Object.keys(E);me<we.length;me+=1){var Ie=we[me];if(Ie!=="$name"){var $e=E[Ie];he[Ie]=Oe[C].shallow.indexOf(Ie)>=0?$e:Vt($e)}}return he}throw new Error("can't deserialize object of type "+typeof E)}var jt=function(){this.first=!0};jt.prototype.update=function(C,B){var $=Math.floor(C);return this.first?(this.first=!1,this.lastIntegerZoom=$,this.lastIntegerZoomTime=0,this.lastZoom=C,this.lastFloorZoom=$,!0):(this.lastFloorZoom>$?(this.lastIntegerZoom=$+1,this.lastIntegerZoomTime=B):this.lastFloorZoom<$&&(this.lastIntegerZoom=$,this.lastIntegerZoomTime=B),C!==this.lastZoom?(this.lastZoom=C,this.lastFloorZoom=$,!0):!1)};var Jt={"Latin-1 Supplement":function(E){return E>=128&&E<=255},Arabic:function(E){return E>=1536&&E<=1791},"Arabic Supplement":function(E){return E>=1872&&E<=1919},"Arabic Extended-A":function(E){return E>=2208&&E<=2303},"Hangul Jamo":function(E){return E>=4352&&E<=4607},"Unified Canadian Aboriginal Syllabics":function(E){return E>=5120&&E<=5759},Khmer:function(E){return E>=6016&&E<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(E){return E>=6320&&E<=6399},"General Punctuation":function(E){return E>=8192&&E<=8303},"Letterlike Symbols":function(E){return E>=8448&&E<=8527},"Number Forms":function(E){return E>=8528&&E<=8591},"Miscellaneous Technical":function(E){return E>=8960&&E<=9215},"Control Pictures":function(E){return E>=9216&&E<=9279},"Optical Character Recognition":function(E){return E>=9280&&E<=9311},"Enclosed Alphanumerics":function(E){return E>=9312&&E<=9471},"Geometric Shapes":function(E){return E>=9632&&E<=9727},"Miscellaneous Symbols":function(E){return E>=9728&&E<=9983},"Miscellaneous Symbols and Arrows":function(E){return E>=11008&&E<=11263},"CJK Radicals Supplement":function(E){return E>=11904&&E<=12031},"Kangxi Radicals":function(E){return E>=12032&&E<=12255},"Ideographic Description Characters":function(E){return E>=12272&&E<=12287},"CJK Symbols and Punctuation":function(E){return E>=12288&&E<=12351},Hiragana:function(E){return E>=12352&&E<=12447},Katakana:function(E){return E>=12448&&E<=12543},Bopomofo:function(E){return E>=12544&&E<=12591},"Hangul Compatibility Jamo":function(E){return E>=12592&&E<=12687},Kanbun:function(E){return E>=12688&&E<=12703},"Bopomofo Extended":function(E){return E>=12704&&E<=12735},"CJK Strokes":function(E){return E>=12736&&E<=12783},"Katakana Phonetic Extensions":function(E){return E>=12784&&E<=12799},"Enclosed CJK Letters and Months":function(E){return E>=12800&&E<=13055},"CJK Compatibility":function(E){return E>=13056&&E<=13311},"CJK Unified Ideographs Extension A":function(E){return E>=13312&&E<=19903},"Yijing Hexagram Symbols":function(E){return E>=19904&&E<=19967},"CJK Unified Ideographs":function(E){return E>=19968&&E<=40959},"Yi Syllables":function(E){return E>=40960&&E<=42127},"Yi Radicals":function(E){return E>=42128&&E<=42191},"Hangul Jamo Extended-A":function(E){return E>=43360&&E<=43391},"Hangul Syllables":function(E){return E>=44032&&E<=55215},"Hangul Jamo Extended-B":function(E){return E>=55216&&E<=55295},"Private Use Area":function(E){return E>=57344&&E<=63743},"CJK Compatibility Ideographs":function(E){return E>=63744&&E<=64255},"Arabic Presentation Forms-A":function(E){return E>=64336&&E<=65023},"Vertical Forms":function(E){return E>=65040&&E<=65055},"CJK Compatibility Forms":function(E){return E>=65072&&E<=65103},"Small Form Variants":function(E){return E>=65104&&E<=65135},"Arabic Presentation Forms-B":function(E){return E>=65136&&E<=65279},"Halfwidth and Fullwidth Forms":function(E){return E>=65280&&E<=65519}};function Tr(E){for(var C=0,B=E;C<B.length;C+=1){var $=B[C];if(zr($.charCodeAt(0)))return!0}return!1}function Kr(E){for(var C=0,B=E;C<B.length;C+=1){var $=B[C];if(!ln($.charCodeAt(0)))return!1}return!0}function ln(E){return!(Jt.Arabic(E)||Jt["Arabic Supplement"](E)||Jt["Arabic Extended-A"](E)||Jt["Arabic Presentation Forms-A"](E)||Jt["Arabic Presentation Forms-B"](E))}function kr(E){return E<11904?!1:!!(Jt["Bopomofo Extended"](E)||Jt.Bopomofo(E)||Jt["CJK Compatibility Forms"](E)||Jt["CJK Compatibility Ideographs"](E)||Jt["CJK Compatibility"](E)||Jt["CJK Radicals Supplement"](E)||Jt["CJK Strokes"](E)||Jt["CJK Symbols and Punctuation"](E)||Jt["CJK Unified Ideographs Extension A"](E)||Jt["CJK Unified Ideographs"](E)||Jt["Enclosed CJK Letters and Months"](E)||Jt["Halfwidth and Fullwidth Forms"](E)||Jt.Hiragana(E)||Jt["Ideographic Description Characters"](E)||Jt["Kangxi Radicals"](E)||Jt["Katakana Phonetic Extensions"](E)||Jt.Katakana(E)||Jt["Vertical Forms"](E)||Jt["Yi Radicals"](E)||Jt["Yi Syllables"](E))}function zr(E){return E===746||E===747?!0:E<4352?!1:!!(Jt["Bopomofo Extended"](E)||Jt.Bopomofo(E)||Jt["CJK Compatibility Forms"](E)&&!(E>=65097&&E<=65103)||Jt["CJK Compatibility Ideographs"](E)||Jt["CJK Compatibility"](E)||Jt["CJK Radicals Supplement"](E)||Jt["CJK Strokes"](E)||Jt["CJK Symbols and Punctuation"](E)&&!(E>=12296&&E<=12305)&&!(E>=12308&&E<=12319)&&E!==12336||Jt["CJK Unified Ideographs Extension A"](E)||Jt["CJK Unified Ideographs"](E)||Jt["Enclosed CJK Letters and Months"](E)||Jt["Hangul Compatibility Jamo"](E)||Jt["Hangul Jamo Extended-A"](E)||Jt["Hangul Jamo Extended-B"](E)||Jt["Hangul Jamo"](E)||Jt["Hangul Syllables"](E)||Jt.Hiragana(E)||Jt["Ideographic Description Characters"](E)||Jt.Kanbun(E)||Jt["Kangxi Radicals"](E)||Jt["Katakana Phonetic Extensions"](E)||Jt.Katakana(E)&&E!==12540||Jt["Halfwidth and Fullwidth Forms"](E)&&E!==65288&&E!==65289&&E!==65293&&!(E>=65306&&E<=65310)&&E!==65339&&E!==65341&&E!==65343&&!(E>=65371&&E<=65503)&&E!==65507&&!(E>=65512&&E<=65519)||Jt["Small Form Variants"](E)&&!(E>=65112&&E<=65118)&&!(E>=65123&&E<=65126)||Jt["Unified Canadian Aboriginal Syllabics"](E)||Jt["Unified Canadian Aboriginal Syllabics Extended"](E)||Jt["Vertical Forms"](E)||Jt["Yijing Hexagram Symbols"](E)||Jt["Yi Syllables"](E)||Jt["Yi Radicals"](E))}function Gr(E){return!!(Jt["Latin-1 Supplement"](E)&&(E===167||E===169||E===174||E===177||E===188||E===189||E===190||E===215||E===247)||Jt["General Punctuation"](E)&&(E===8214||E===8224||E===8225||E===8240||E===8241||E===8251||E===8252||E===8258||E===8263||E===8264||E===8265||E===8273)||Jt["Letterlike Symbols"](E)||Jt["Number Forms"](E)||Jt["Miscellaneous Technical"](E)&&(E>=8960&&E<=8967||E>=8972&&E<=8991||E>=8996&&E<=9e3||E===9003||E>=9085&&E<=9114||E>=9150&&E<=9165||E===9167||E>=9169&&E<=9179||E>=9186&&E<=9215)||Jt["Control Pictures"](E)&&E!==9251||Jt["Optical Character Recognition"](E)||Jt["Enclosed Alphanumerics"](E)||Jt["Geometric Shapes"](E)||Jt["Miscellaneous Symbols"](E)&&!(E>=9754&&E<=9759)||Jt["Miscellaneous Symbols and Arrows"](E)&&(E>=11026&&E<=11055||E>=11088&&E<=11097||E>=11192&&E<=11243)||Jt["CJK Symbols and Punctuation"](E)||Jt.Katakana(E)||Jt["Private Use Area"](E)||Jt["CJK Compatibility Forms"](E)||Jt["Small Form Variants"](E)||Jt["Halfwidth and Fullwidth Forms"](E)||E===8734||E===8756||E===8757||E>=9984&&E<=10087||E>=10102&&E<=10131||E===65532||E===65533)}function nn(E){return!(zr(E)||Gr(E))}function on(E){return Jt.Arabic(E)||Jt["Arabic Supplement"](E)||Jt["Arabic Extended-A"](E)||Jt["Arabic Presentation Forms-A"](E)||Jt["Arabic Presentation Forms-B"](E)}function Wr(E){return E>=1424&&E<=2303||Jt["Arabic Presentation Forms-A"](E)||Jt["Arabic Presentation Forms-B"](E)}function Nn(E,C){return!(!C&&Wr(E)||E>=2304&&E<=3583||E>=3840&&E<=4255||Jt.Khmer(E))}function ra(E){for(var C=0,B=E;C<B.length;C+=1){var $=B[C];if(Wr($.charCodeAt(0)))return!0}return!1}function ba(E,C){for(var B=0,$=E;B<$.length;B+=1){var he=$[B];if(!Nn(he.charCodeAt(0),C))return!1}return!0}var oa={unavailable:"unavailable",deferred:"deferred",loading:"loading",loaded:"loaded",error:"error"},Ea=null,ua=oa.unavailable,Ua=null,Da=function(E){E&&typeof E=="string"&&E.indexOf("NetworkError")>-1&&(ua=oa.error),Ea&&Ea(E)};function Ja(){yi.fire(new Hr("pluginStateChange",{pluginStatus:ua,pluginURL:Ua}))}var yi=new _r,fo=function(){return ua},Ii=function(E){return E({pluginStatus:ua,pluginURL:Ua}),yi.on("pluginStateChange",E),E},fa=function(E,C,B){if(B===void 0&&(B=!1),ua===oa.deferred||ua===oa.loading||ua===oa.loaded)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ua=X.resolveURL(E),ua=oa.deferred,Ea=C,Ja(),B||ai()},ai=function(){if(ua!==oa.deferred||!Ua)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ua=oa.loading,Ja(),Ua&&ft({url:Ua},function(E){E?Da(E):(ua=oa.loaded,Ja())})},Wa={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return ua===oa.loaded||Wa.applyArabicShaping!=null},isLoading:function(){return ua===oa.loading},setState:function(C){ua=C.pluginStatus,Ua=C.pluginURL},isParsed:function(){return Wa.applyArabicShaping!=null&&Wa.processBidirectionalText!=null&&Wa.processStyledBidirectionalText!=null},getPluginURL:function(){return Ua}},Si=function(){!Wa.isLoading()&&!Wa.isLoaded()&&fo()==="deferred"&&ai()},ui=function(C,B){this.zoom=C,B?(this.now=B.now,this.fadeDuration=B.fadeDuration,this.zoomHistory=B.zoomHistory,this.transition=B.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new jt,this.transition={})};ui.prototype.isSupportedScript=function(C){return ba(C,Wa.isLoaded())},ui.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},ui.prototype.getCrossfadeParameters=function(){var C=this.zoom,B=C-Math.floor(C),$=this.crossFadingFactor();return C>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:B+(1-B)*$}:{fromScale:.5,toScale:1,t:1-(1-$)*B}};var io=function(C,B){this.property=C,this.value=B,this.expression=hf(B===void 0?C.specification.default:B,C.specification)};io.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},io.prototype.possiblyEvaluate=function(C,B,$){return this.property.possiblyEvaluate(this,C,B,$)};var Qi=function(C){this.property=C,this.value=new io(C,void 0)};Qi.prototype.transitioned=function(C,B){return new Go(this.property,this.value,B,A({},C.transition,this.transition),C.now)},Qi.prototype.untransitioned=function(){return new Go(this.property,this.value,null,{},0)};var go=function(C){this._properties=C,this._values=Object.create(C.defaultTransitionablePropertyValues)};go.prototype.getValue=function(C){return I(this._values[C].value.value)},go.prototype.setValue=function(C,B){this._values.hasOwnProperty(C)||(this._values[C]=new Qi(this._values[C].property)),this._values[C].value=new io(this._values[C].property,B===null?void 0:I(B))},go.prototype.getTransition=function(C){return I(this._values[C].transition)},go.prototype.setTransition=function(C,B){this._values.hasOwnProperty(C)||(this._values[C]=new Qi(this._values[C].property)),this._values[C].transition=I(B)||void 0},go.prototype.serialize=function(){for(var C={},B=0,$=Object.keys(this._values);B<$.length;B+=1){var he=$[B],me=this.getValue(he);me!==void 0&&(C[he]=me);var we=this.getTransition(he);we!==void 0&&(C[he+"-transition"]=we)}return C},go.prototype.transitioned=function(C,B){for(var $=new Fo(this._properties),he=0,me=Object.keys(this._values);he<me.length;he+=1){var we=me[he];$._values[we]=this._values[we].transitioned(C,B._values[we])}return $},go.prototype.untransitioned=function(){for(var C=new Fo(this._properties),B=0,$=Object.keys(this._values);B<$.length;B+=1){var he=$[B];C._values[he]=this._values[he].untransitioned()}return C};var Go=function(C,B,$,he,me){this.property=C,this.value=B,this.begin=me+he.delay||0,this.end=this.begin+he.duration||0,C.specification.transition&&(he.delay||he.duration)&&(this.prior=$)};Go.prototype.possiblyEvaluate=function(C,B,$){var he=C.now||0,me=this.value.possiblyEvaluate(C,B,$),we=this.prior;if(we){if(he>this.end)return this.prior=null,me;if(this.value.isDataDriven())return this.prior=null,me;if(he<this.begin)return we.possiblyEvaluate(C,B,$);var Ie=(he-this.begin)/(this.end-this.begin);return this.property.interpolate(we.possiblyEvaluate(C,B,$),me,g(Ie))}else return me};var Fo=function(C){this._properties=C,this._values=Object.create(C.defaultTransitioningPropertyValues)};Fo.prototype.possiblyEvaluate=function(C,B,$){for(var he=new Oi(this._properties),me=0,we=Object.keys(this._values);me<we.length;me+=1){var Ie=we[me];he._values[Ie]=this._values[Ie].possiblyEvaluate(C,B,$)}return he},Fo.prototype.hasTransition=function(){for(var C=0,B=Object.keys(this._values);C<B.length;C+=1){var $=B[C];if(this._values[$].prior)return!0}return!1};var Yo=function(C){this._properties=C,this._values=Object.create(C.defaultPropertyValues)};Yo.prototype.getValue=function(C){return I(this._values[C].value)},Yo.prototype.setValue=function(C,B){this._values[C]=new io(this._values[C].property,B===null?void 0:I(B))},Yo.prototype.serialize=function(){for(var C={},B=0,$=Object.keys(this._values);B<$.length;B+=1){var he=$[B],me=this.getValue(he);me!==void 0&&(C[he]=me)}return C},Yo.prototype.possiblyEvaluate=function(C,B,$){for(var he=new Oi(this._properties),me=0,we=Object.keys(this._values);me<we.length;me+=1){var Ie=we[me];he._values[Ie]=this._values[Ie].possiblyEvaluate(C,B,$)}return he};var Gi=function(C,B,$){this.property=C,this.value=B,this.parameters=$};Gi.prototype.isConstant=function(){return this.value.kind==="constant"},Gi.prototype.constantOr=function(C){return this.value.kind==="constant"?this.value.value:C},Gi.prototype.evaluate=function(C,B,$,he){return this.property.evaluate(this.value,this.parameters,C,B,$,he)};var Oi=function(C){this._properties=C,this._values=Object.create(C.defaultPossiblyEvaluatedValues)};Oi.prototype.get=function(C){return this._values[C]};var za=function(C){this.specification=C};za.prototype.possiblyEvaluate=function(C,B){return C.expression.evaluate(B)},za.prototype.interpolate=function(C,B,$){var he=Ws[this.specification.type];return he?he(C,B,$):C};var Xa=function(C,B){this.specification=C,this.overrides=B};Xa.prototype.possiblyEvaluate=function(C,B,$,he){return C.expression.kind==="constant"||C.expression.kind==="camera"?new Gi(this,{kind:"constant",value:C.expression.evaluate(B,null,{},$,he)},B):new Gi(this,C.expression,B)},Xa.prototype.interpolate=function(C,B,$){if(C.value.kind!=="constant"||B.value.kind!=="constant")return C;if(C.value.value===void 0||B.value.value===void 0)return new Gi(this,{kind:"constant",value:void 0},C.parameters);var he=Ws[this.specification.type];return he?new Gi(this,{kind:"constant",value:he(C.value.value,B.value.value,$)},C.parameters):C},Xa.prototype.evaluate=function(C,B,$,he,me,we){return C.kind==="constant"?C.value:C.evaluate(B,$,he,me,we)};var xo=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.possiblyEvaluate=function($,he,me,we){if($.value===void 0)return new Gi(this,{kind:"constant",value:void 0},he);if($.expression.kind==="constant"){var Ie=$.expression.evaluate(he,null,{},me,we),$e=$.property.specification.type==="resolvedImage",ut=$e&&typeof Ie!="string"?Ie.name:Ie,gt=this._calculate(ut,ut,ut,he);return new Gi(this,{kind:"constant",value:gt},he)}else if($.expression.kind==="camera"){var Rt=this._calculate($.expression.evaluate({zoom:he.zoom-1}),$.expression.evaluate({zoom:he.zoom}),$.expression.evaluate({zoom:he.zoom+1}),he);return new Gi(this,{kind:"constant",value:Rt},he)}else return new Gi(this,$.expression,he)},C.prototype.evaluate=function($,he,me,we,Ie,$e){if($.kind==="source"){var ut=$.evaluate(he,me,we,Ie,$e);return this._calculate(ut,ut,ut,he)}else return $.kind==="composite"?this._calculate($.evaluate({zoom:Math.floor(he.zoom)-1},me,we),$.evaluate({zoom:Math.floor(he.zoom)},me,we),$.evaluate({zoom:Math.floor(he.zoom)+1},me,we),he):$.value},C.prototype._calculate=function($,he,me,we){var Ie=we.zoom;return Ie>we.zoomHistory.lastIntegerZoom?{from:$,to:he}:{from:me,to:he}},C.prototype.interpolate=function($){return $},C}(Xa),eo=function(C){this.specification=C};eo.prototype.possiblyEvaluate=function(C,B,$,he){if(C.value!==void 0)if(C.expression.kind==="constant"){var me=C.expression.evaluate(B,null,{},$,he);return this._calculate(me,me,me,B)}else return this._calculate(C.expression.evaluate(new ui(Math.floor(B.zoom-1),B)),C.expression.evaluate(new ui(Math.floor(B.zoom),B)),C.expression.evaluate(new ui(Math.floor(B.zoom+1),B)),B)},eo.prototype._calculate=function(C,B,$,he){var me=he.zoom;return me>he.zoomHistory.lastIntegerZoom?{from:C,to:B}:{from:$,to:B}},eo.prototype.interpolate=function(C){return C};var Po=function(C){this.specification=C};Po.prototype.possiblyEvaluate=function(C,B,$,he){return!!C.expression.evaluate(B,null,{},$,he)},Po.prototype.interpolate=function(){return!1};var Xi=function(C){this.properties=C,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(var B in C){var $=C[B];$.specification.overridable&&this.overridableProperties.push(B);var he=this.defaultPropertyValues[B]=new io($,void 0),me=this.defaultTransitionablePropertyValues[B]=new Qi($);this.defaultTransitioningPropertyValues[B]=me.untransitioned(),this.defaultPossiblyEvaluatedValues[B]=he.possiblyEvaluate({})}};ze("DataDrivenProperty",Xa),ze("DataConstantProperty",za),ze("CrossFadedDataDrivenProperty",xo),ze("CrossFadedProperty",eo),ze("ColorRampProperty",Po);var Wo="-transition",ms=function(E){function C(B,$){if(E.call(this),this.id=B.id,this.type=B.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},B.type!=="custom"&&(B=B,this.metadata=B.metadata,this.minzoom=B.minzoom,this.maxzoom=B.maxzoom,B.type!=="background"&&(this.source=B.source,this.sourceLayer=B["source-layer"],this.filter=B.filter),$.layout&&(this._unevaluatedLayout=new Yo($.layout)),$.paint)){this._transitionablePaint=new go($.paint);for(var he in B.paint)this.setPaintProperty(he,B.paint[he],{validate:!1});for(var me in B.layout)this.setLayoutProperty(me,B.layout[me],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Oi($.paint)}}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},C.prototype.getLayoutProperty=function($){return $==="visibility"?this.visibility:this._unevaluatedLayout.getValue($)},C.prototype.setLayoutProperty=function($,he,me){if(me===void 0&&(me={}),he!=null){var we="layers."+this.id+".layout."+$;if(this._validate(us,we,$,he,me))return}if($==="visibility"){this.visibility=he;return}this._unevaluatedLayout.setValue($,he)},C.prototype.getPaintProperty=function($){return k($,Wo)?this._transitionablePaint.getTransition($.slice(0,-Wo.length)):this._transitionablePaint.getValue($)},C.prototype.setPaintProperty=function($,he,me){if(me===void 0&&(me={}),he!=null){var we="layers."+this.id+".paint."+$;if(this._validate(Mi,we,$,he,me))return!1}if(k($,Wo))return this._transitionablePaint.setTransition($.slice(0,-Wo.length),he||void 0),!1;var Ie=this._transitionablePaint._values[$],$e=Ie.property.specification["property-type"]==="cross-faded-data-driven",ut=Ie.value.isDataDriven(),gt=Ie.value;this._transitionablePaint.setValue($,he),this._handleSpecialPaintPropertyUpdate($);var Rt=this._transitionablePaint._values[$].value,Qt=Rt.isDataDriven();return Qt||ut||$e||this._handleOverridablePaintPropertyUpdate($,gt,Rt)},C.prototype._handleSpecialPaintPropertyUpdate=function($){},C.prototype._handleOverridablePaintPropertyUpdate=function($,he,me){return!1},C.prototype.isHidden=function($){return this.minzoom&&$<this.minzoom||this.maxzoom&&$>=this.maxzoom?!0:this.visibility==="none"},C.prototype.updateTransitions=function($){this._transitioningPaint=this._transitionablePaint.transitioned($,this._transitioningPaint)},C.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},C.prototype.recalculate=function($,he){$.getCrossfadeParameters&&(this._crossfadeParameters=$.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate($,void 0,he)),this.paint=this._transitioningPaint.possiblyEvaluate($,void 0,he)},C.prototype.serialize=function(){var $={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&($.layout=$.layout||{},$.layout.visibility=this.visibility),z($,function(he,me){return he!==void 0&&!(me==="layout"&&!Object.keys(he).length)&&!(me==="paint"&&!Object.keys(he).length)})},C.prototype._validate=function($,he,me,we,Ie){return Ie===void 0&&(Ie={}),Ie&&Ie.validate===!1?!1:po(this,$.call(bo,{key:he,layerType:this.type,objectKey:me,value:we,styleSpec:Ft,style:{glyphs:!0,sprite:!0}}))},C.prototype.is3D=function(){return!1},C.prototype.isTileClipped=function(){return!1},C.prototype.hasOffscreenPass=function(){return!1},C.prototype.resize=function(){},C.prototype.isStateDependent=function(){for(var $ in this.paint._values){var he=this.paint.get($);if(!(!(he instanceof Gi)||!li(he.property.specification))&&(he.value.kind==="source"||he.value.kind==="composite")&&he.value.isStateDependent)return!0}return!1},C}(_r),Nl={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},Zi=function(C,B){this._structArray=C,this._pos1=B*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},$u=128,Tl=5,Bi=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};Bi.serialize=function(C,B){return C._trim(),B&&(C.isTransferred=!0,B.push(C.arrayBuffer)),{length:C.length,arrayBuffer:C.arrayBuffer}},Bi.deserialize=function(C){var B=Object.create(this.prototype);return B.arrayBuffer=C.arrayBuffer,B.length=C.length,B.capacity=C.arrayBuffer.byteLength/B.bytesPerElement,B._refreshViews(),B},Bi.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Bi.prototype.clear=function(){this.length=0},Bi.prototype.resize=function(C){this.reserve(C),this.length=C},Bi.prototype.reserve=function(C){if(C>this.capacity){this.capacity=Math.max(C,Math.floor(this.capacity*Tl),$u),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var B=this.uint8;this._refreshViews(),B&&this.uint8.set(B)}},Bi.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};function Do(E,C){C===void 0&&(C=1);var B=0,$=0,he=E.map(function(we){var Ie=jc(we.type),$e=B=Af(B,Math.max(C,Ie)),ut=we.components||1;return $=Math.max($,Ie),B+=Ie*ut,{name:we.name,type:we.type,components:ut,offset:$e}}),me=Af(B,Math.max($,C));return{members:he,size:me,alignment:C}}function jc(E){return Nl[E].BYTES_PER_ELEMENT}function Af(E,C){return Math.ceil(E/C)*C}var vf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function($,he){var me=this.length;return this.resize(me+1),this.emplace(me,$,he)},C.prototype.emplace=function($,he,me){var we=$*2;return this.int16[we+0]=he,this.int16[we+1]=me,$},C}(Bi);vf.prototype.bytesPerElement=4,ze("StructArrayLayout2i4",vf);var Fu=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function($,he,me,we){var Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,$,he,me,we)},C.prototype.emplace=function($,he,me,we,Ie){var $e=$*4;return this.int16[$e+0]=he,this.int16[$e+1]=me,this.int16[$e+2]=we,this.int16[$e+3]=Ie,$},C}(Bi);Fu.prototype.bytesPerElement=8,ze("StructArrayLayout4i8",Fu);var qu=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function($,he,me,we,Ie,$e){var ut=this.length;return this.resize(ut+1),this.emplace(ut,$,he,me,we,Ie,$e)},C.prototype.emplace=function($,he,me,we,Ie,$e,ut){var gt=$*6;return this.int16[gt+0]=he,this.int16[gt+1]=me,this.int16[gt+2]=we,this.int16[gt+3]=Ie,this.int16[gt+4]=$e,this.int16[gt+5]=ut,$},C}(Bi);qu.prototype.bytesPerElement=12,ze("StructArrayLayout2i4i12",qu);var Mf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function($,he,me,we,Ie,$e){var ut=this.length;return this.resize(ut+1),this.emplace(ut,$,he,me,we,Ie,$e)},C.prototype.emplace=function($,he,me,we,Ie,$e,ut){var gt=$*4,Rt=$*8;return this.int16[gt+0]=he,this.int16[gt+1]=me,this.uint8[Rt+4]=we,this.uint8[Rt+5]=Ie,this.uint8[Rt+6]=$e,this.uint8[Rt+7]=ut,$},C}(Bi);Mf.prototype.bytesPerElement=8,ze("StructArrayLayout2i4ub8",Mf);var Fs=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function($,he,me,we,Ie,$e,ut,gt,Rt,Qt){var Wt=this.length;return this.resize(Wt+1),this.emplace(Wt,$,he,me,we,Ie,$e,ut,gt,Rt,Qt)},C.prototype.emplace=function($,he,me,we,Ie,$e,ut,gt,Rt,Qt,Wt){var vr=$*9,Rr=$*18;return this.uint16[vr+0]=he,this.uint16[vr+1]=me,this.uint16[vr+2]=we,this.uint16[vr+3]=Ie,this.uint16[vr+4]=$e,this.uint16[vr+5]=ut,this.uint16[vr+6]=gt,this.uint16[vr+7]=Rt,this.uint8[Rr+16]=Qt,this.uint8[Rr+17]=Wt,$},C}(Bi);Fs.prototype.bytesPerElement=18,ze("StructArrayLayout8ui2ub18",Fs);var Bu=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function($,he,me,we,Ie,$e,ut,gt,Rt,Qt,Wt,vr){var Rr=this.length;return this.resize(Rr+1),this.emplace(Rr,$,he,me,we,Ie,$e,ut,gt,Rt,Qt,Wt,vr)},C.prototype.emplace=function($,he,me,we,Ie,$e,ut,gt,Rt,Qt,Wt,vr,Rr){var an=$*12;return this.int16[an+0]=he,this.int16[an+1]=me,this.int16[an+2]=we,this.int16[an+3]=Ie,this.uint16[an+4]=$e,this.uint16[an+5]=ut,this.uint16[an+6]=gt,this.uint16[an+7]=Rt,this.int16[an+8]=Qt,this.int16[an+9]=Wt,this.int16[an+10]=vr,this.int16[an+11]=Rr,$},C}(Bi);Bu.prototype.bytesPerElement=24,ze("StructArrayLayout4i4ui4i24",Bu);var Qf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function($,he,me){var we=this.length;return this.resize(we+1),this.emplace(we,$,he,me)},C.prototype.emplace=function($,he,me,we){var Ie=$*3;return this.float32[Ie+0]=he,this.float32[Ie+1]=me,this.float32[Ie+2]=we,$},C}(Bi);Qf.prototype.bytesPerElement=12,ze("StructArrayLayout3f12",Qf);var $f=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},C.prototype.emplaceBack=function($){var he=this.length;return this.resize(he+1),this.emplace(he,$)},C.prototype.emplace=function($,he){var me=$*1;return this.uint32[me+0]=he,$},C}(Bi);$f.prototype.bytesPerElement=4,ze("StructArrayLayout1ul4",$f);var pf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function($,he,me,we,Ie,$e,ut,gt,Rt){var Qt=this.length;return this.resize(Qt+1),this.emplace(Qt,$,he,me,we,Ie,$e,ut,gt,Rt)},C.prototype.emplace=function($,he,me,we,Ie,$e,ut,gt,Rt,Qt){var Wt=$*10,vr=$*5;return this.int16[Wt+0]=he,this.int16[Wt+1]=me,this.int16[Wt+2]=we,this.int16[Wt+3]=Ie,this.int16[Wt+4]=$e,this.int16[Wt+5]=ut,this.uint32[vr+3]=gt,this.uint16[Wt+8]=Rt,this.uint16[Wt+9]=Qt,$},C}(Bi);pf.prototype.bytesPerElement=20,ze("StructArrayLayout6i1ul2ui20",pf);var Sf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function($,he,me,we,Ie,$e){var ut=this.length;return this.resize(ut+1),this.emplace(ut,$,he,me,we,Ie,$e)},C.prototype.emplace=function($,he,me,we,Ie,$e,ut){var gt=$*6;return this.int16[gt+0]=he,this.int16[gt+1]=me,this.int16[gt+2]=we,this.int16[gt+3]=Ie,this.int16[gt+4]=$e,this.int16[gt+5]=ut,$},C}(Bi);Sf.prototype.bytesPerElement=12,ze("StructArrayLayout2i2i2i12",Sf);var mu=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function($,he,me,we,Ie){var $e=this.length;return this.resize($e+1),this.emplace($e,$,he,me,we,Ie)},C.prototype.emplace=function($,he,me,we,Ie,$e){var ut=$*4,gt=$*8;return this.float32[ut+0]=he,this.float32[ut+1]=me,this.float32[ut+2]=we,this.int16[gt+6]=Ie,this.int16[gt+7]=$e,$},C}(Bi);mu.prototype.bytesPerElement=16,ze("StructArrayLayout2f1f2i16",mu);var Js=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function($,he,me,we){var Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,$,he,me,we)},C.prototype.emplace=function($,he,me,we,Ie){var $e=$*12,ut=$*3;return this.uint8[$e+0]=he,this.uint8[$e+1]=me,this.float32[ut+1]=we,this.float32[ut+2]=Ie,$},C}(Bi);Js.prototype.bytesPerElement=12,ze("StructArrayLayout2ub2f12",Js);var xu=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function($,he,me){var we=this.length;return this.resize(we+1),this.emplace(we,$,he,me)},C.prototype.emplace=function($,he,me,we){var Ie=$*3;return this.uint16[Ie+0]=he,this.uint16[Ie+1]=me,this.uint16[Ie+2]=we,$},C}(Bi);xu.prototype.bytesPerElement=6,ze("StructArrayLayout3ui6",xu);var df=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function($,he,me,we,Ie,$e,ut,gt,Rt,Qt,Wt,vr,Rr,an,Jr,Mn,yn){var Tn=this.length;return this.resize(Tn+1),this.emplace(Tn,$,he,me,we,Ie,$e,ut,gt,Rt,Qt,Wt,vr,Rr,an,Jr,Mn,yn)},C.prototype.emplace=function($,he,me,we,Ie,$e,ut,gt,Rt,Qt,Wt,vr,Rr,an,Jr,Mn,yn,Tn){var Rn=$*24,Vn=$*12,sa=$*48;return this.int16[Rn+0]=he,this.int16[Rn+1]=me,this.uint16[Rn+2]=we,this.uint16[Rn+3]=Ie,this.uint32[Vn+2]=$e,this.uint32[Vn+3]=ut,this.uint32[Vn+4]=gt,this.uint16[Rn+10]=Rt,this.uint16[Rn+11]=Qt,this.uint16[Rn+12]=Wt,this.float32[Vn+7]=vr,this.float32[Vn+8]=Rr,this.uint8[sa+36]=an,this.uint8[sa+37]=Jr,this.uint8[sa+38]=Mn,this.uint32[Vn+10]=yn,this.int16[Rn+22]=Tn,$},C}(Bi);df.prototype.bytesPerElement=48,ze("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",df);var kf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function($,he,me,we,Ie,$e,ut,gt,Rt,Qt,Wt,vr,Rr,an,Jr,Mn,yn,Tn,Rn,Vn,sa,na,Ia,_a,ka,ei,Pa,Ra){var ci=this.length;return this.resize(ci+1),this.emplace(ci,$,he,me,we,Ie,$e,ut,gt,Rt,Qt,Wt,vr,Rr,an,Jr,Mn,yn,Tn,Rn,Vn,sa,na,Ia,_a,ka,ei,Pa,Ra)},C.prototype.emplace=function($,he,me,we,Ie,$e,ut,gt,Rt,Qt,Wt,vr,Rr,an,Jr,Mn,yn,Tn,Rn,Vn,sa,na,Ia,_a,ka,ei,Pa,Ra,ci){var Qa=$*34,ki=$*17;return this.int16[Qa+0]=he,this.int16[Qa+1]=me,this.int16[Qa+2]=we,this.int16[Qa+3]=Ie,this.int16[Qa+4]=$e,this.int16[Qa+5]=ut,this.int16[Qa+6]=gt,this.int16[Qa+7]=Rt,this.uint16[Qa+8]=Qt,this.uint16[Qa+9]=Wt,this.uint16[Qa+10]=vr,this.uint16[Qa+11]=Rr,this.uint16[Qa+12]=an,this.uint16[Qa+13]=Jr,this.uint16[Qa+14]=Mn,this.uint16[Qa+15]=yn,this.uint16[Qa+16]=Tn,this.uint16[Qa+17]=Rn,this.uint16[Qa+18]=Vn,this.uint16[Qa+19]=sa,this.uint16[Qa+20]=na,this.uint16[Qa+21]=Ia,this.uint16[Qa+22]=_a,this.uint32[ki+12]=ka,this.float32[ki+13]=ei,this.float32[ki+14]=Pa,this.float32[ki+15]=Ra,this.float32[ki+16]=ci,$},C}(Bi);kf.prototype.bytesPerElement=68,ze("StructArrayLayout8i15ui1ul4f68",kf);var ef=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function($){var he=this.length;return this.resize(he+1),this.emplace(he,$)},C.prototype.emplace=function($,he){var me=$*1;return this.float32[me+0]=he,$},C}(Bi);ef.prototype.bytesPerElement=4,ze("StructArrayLayout1f4",ef);var qf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function($,he,me){var we=this.length;return this.resize(we+1),this.emplace(we,$,he,me)},C.prototype.emplace=function($,he,me,we){var Ie=$*3;return this.int16[Ie+0]=he,this.int16[Ie+1]=me,this.int16[Ie+2]=we,$},C}(Bi);qf.prototype.bytesPerElement=6,ze("StructArrayLayout3i6",qf);var Ou=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function($,he,me){var we=this.length;return this.resize(we+1),this.emplace(we,$,he,me)},C.prototype.emplace=function($,he,me,we){var Ie=$*2,$e=$*4;return this.uint32[Ie+0]=he,this.uint16[$e+2]=me,this.uint16[$e+3]=we,$},C}(Bi);Ou.prototype.bytesPerElement=8,ze("StructArrayLayout1ul2ui8",Ou);var gf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function($,he){var me=this.length;return this.resize(me+1),this.emplace(me,$,he)},C.prototype.emplace=function($,he,me){var we=$*2;return this.uint16[we+0]=he,this.uint16[we+1]=me,$},C}(Bi);gf.prototype.bytesPerElement=4,ze("StructArrayLayout2ui4",gf);var tf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function($){var he=this.length;return this.resize(he+1),this.emplace(he,$)},C.prototype.emplace=function($,he){var me=$*1;return this.uint16[me+0]=he,$},C}(Bi);tf.prototype.bytesPerElement=2,ze("StructArrayLayout1ui2",tf);var Nu=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function($,he){var me=this.length;return this.resize(me+1),this.emplace(me,$,he)},C.prototype.emplace=function($,he,me){var we=$*2;return this.float32[we+0]=he,this.float32[we+1]=me,$},C}(Bi);Nu.prototype.bytesPerElement=8,ze("StructArrayLayout2f8",Nu);var ec=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function($,he,me,we){var Ie=this.length;return this.resize(Ie+1),this.emplace(Ie,$,he,me,we)},C.prototype.emplace=function($,he,me,we,Ie){var $e=$*4;return this.float32[$e+0]=he,this.float32[$e+1]=me,this.float32[$e+2]=we,this.float32[$e+3]=Ie,$},C}(Bi);ec.prototype.bytesPerElement=16,ze("StructArrayLayout4f16",ec);var xc=function(E){function C(){E.apply(this,arguments)}E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C;var B={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return B.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},B.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},B.x1.get=function(){return this._structArray.int16[this._pos2+2]},B.y1.get=function(){return this._structArray.int16[this._pos2+3]},B.x2.get=function(){return this._structArray.int16[this._pos2+4]},B.y2.get=function(){return this._structArray.int16[this._pos2+5]},B.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},B.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},B.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},B.anchorPoint.get=function(){return new f(this.anchorPointX,this.anchorPointY)},Object.defineProperties(C.prototype,B),C}(Zi);xc.prototype.size=20;var Uu=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.get=function($){return new xc(this,$)},C}(pf);ze("CollisionBoxArray",Uu);var tc=function(E){function C(){E.apply(this,arguments)}E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C;var B={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return B.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},B.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},B.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},B.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},B.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},B.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},B.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},B.segment.get=function(){return this._structArray.uint16[this._pos2+10]},B.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},B.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},B.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},B.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},B.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},B.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},B.placedOrientation.set=function($){this._structArray.uint8[this._pos1+37]=$},B.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},B.hidden.set=function($){this._structArray.uint8[this._pos1+38]=$},B.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},B.crossTileID.set=function($){this._structArray.uint32[this._pos4+10]=$},B.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(C.prototype,B),C}(Zi);tc.prototype.size=48;var rf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.get=function($){return new tc(this,$)},C}(df);ze("PlacedSymbolArray",rf);var bc=function(E){function C(){E.apply(this,arguments)}E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C;var B={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return B.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},B.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},B.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},B.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},B.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},B.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},B.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},B.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},B.key.get=function(){return this._structArray.uint16[this._pos2+8]},B.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},B.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},B.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},B.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},B.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},B.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},B.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},B.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},B.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},B.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},B.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},B.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},B.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},B.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},B.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},B.crossTileID.set=function($){this._structArray.uint32[this._pos4+12]=$},B.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},B.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},B.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},B.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(C.prototype,B),C}(Zi);bc.prototype.size=68;var _c=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.get=function($){return new bc(this,$)},C}(kf);ze("SymbolInstanceArray",_c);var Ul=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.getoffsetX=function($){return this.float32[$*1+0]},C}(ef);ze("GlyphOffsetArray",Ul);var wc=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.getx=function($){return this.int16[$*3+0]},C.prototype.gety=function($){return this.int16[$*3+1]},C.prototype.gettileUnitDistanceFromAnchor=function($){return this.int16[$*3+2]},C}(qf);ze("SymbolLineVertexArray",wc);var Tc=function(E){function C(){E.apply(this,arguments)}E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C;var B={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return B.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},B.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},B.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(C.prototype,B),C}(Zi);Tc.prototype.size=8;var rc=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.get=function($){return new Tc(this,$)},C}(Ou);ze("FeatureIndexArray",rc);var Ac=Do([{name:"a_pos",components:2,type:"Int16"}],4),ce=Ac.members,H=function(C){C===void 0&&(C=[]),this.segments=C};H.prototype.prepareSegment=function(C,B,$,he){var me=this.segments[this.segments.length-1];return C>H.MAX_VERTEX_ARRAY_LENGTH&&O("Max vertices per segment is "+H.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+C),(!me||me.vertexLength+C>H.MAX_VERTEX_ARRAY_LENGTH||me.sortKey!==he)&&(me={vertexOffset:B.length,primitiveOffset:$.length,vertexLength:0,primitiveLength:0},he!==void 0&&(me.sortKey=he),this.segments.push(me)),me},H.prototype.get=function(){return this.segments},H.prototype.destroy=function(){for(var C=0,B=this.segments;C<B.length;C+=1){var $=B[C];for(var he in $.vaos)$.vaos[he].destroy()}},H.simpleSegment=function(C,B,$,he){return new H([{vertexOffset:C,primitiveOffset:B,vertexLength:$,primitiveLength:he,vaos:{},sortKey:0}])},H.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ze("SegmentVector",H);function ve(E,C){return E=c(Math.floor(E),0,255),C=c(Math.floor(C),0,255),256*E+C}var K=Do([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),de=a(function(E){function C(B,$){var he,me,we,Ie,$e,ut,gt,Rt;for(he=B.length&3,me=B.length-he,we=$,$e=3432918353,ut=461845907,Rt=0;Rt<me;)gt=B.charCodeAt(Rt)&255|(B.charCodeAt(++Rt)&255)<<8|(B.charCodeAt(++Rt)&255)<<16|(B.charCodeAt(++Rt)&255)<<24,++Rt,gt=(gt&65535)*$e+(((gt>>>16)*$e&65535)<<16)&4294967295,gt=gt<<15|gt>>>17,gt=(gt&65535)*ut+(((gt>>>16)*ut&65535)<<16)&4294967295,we^=gt,we=we<<13|we>>>19,Ie=(we&65535)*5+(((we>>>16)*5&65535)<<16)&4294967295,we=(Ie&65535)+27492+(((Ie>>>16)+58964&65535)<<16);switch(gt=0,he){case 3:gt^=(B.charCodeAt(Rt+2)&255)<<16;case 2:gt^=(B.charCodeAt(Rt+1)&255)<<8;case 1:gt^=B.charCodeAt(Rt)&255,gt=(gt&65535)*$e+(((gt>>>16)*$e&65535)<<16)&4294967295,gt=gt<<15|gt>>>17,gt=(gt&65535)*ut+(((gt>>>16)*ut&65535)<<16)&4294967295,we^=gt}return we^=B.length,we^=we>>>16,we=(we&65535)*2246822507+(((we>>>16)*2246822507&65535)<<16)&4294967295,we^=we>>>13,we=(we&65535)*3266489909+(((we>>>16)*3266489909&65535)<<16)&4294967295,we^=we>>>16,we>>>0}E.exports=C}),Ae=a(function(E){function C(B,$){for(var he=B.length,me=$^he,we=0,Ie;he>=4;)Ie=B.charCodeAt(we)&255|(B.charCodeAt(++we)&255)<<8|(B.charCodeAt(++we)&255)<<16|(B.charCodeAt(++we)&255)<<24,Ie=(Ie&65535)*1540483477+(((Ie>>>16)*1540483477&65535)<<16),Ie^=Ie>>>24,Ie=(Ie&65535)*1540483477+(((Ie>>>16)*1540483477&65535)<<16),me=(me&65535)*1540483477+(((me>>>16)*1540483477&65535)<<16)^Ie,he-=4,++we;switch(he){case 3:me^=(B.charCodeAt(we+2)&255)<<16;case 2:me^=(B.charCodeAt(we+1)&255)<<8;case 1:me^=B.charCodeAt(we)&255,me=(me&65535)*1540483477+(((me>>>16)*1540483477&65535)<<16)}return me^=me>>>13,me=(me&65535)*1540483477+(((me>>>16)*1540483477&65535)<<16),me^=me>>>15,me>>>0}E.exports=C}),Ce=de,Ye=de,lt=Ae;Ce.murmur3=Ye,Ce.murmur2=lt;var Tt=function(){this.ids=[],this.positions=[],this.indexed=!1};Tt.prototype.add=function(C,B,$,he){this.ids.push(ir(C)),this.positions.push(B,$,he)},Tt.prototype.getPositions=function(C){for(var B=ir(C),$=0,he=this.ids.length-1;$<he;){var me=$+he>>1;this.ids[me]>=B?he=me:$=me+1}for(var we=[];this.ids[$]===B;){var Ie=this.positions[3*$],$e=this.positions[3*$+1],ut=this.positions[3*$+2];we.push({index:Ie,start:$e,end:ut}),$++}return we},Tt.serialize=function(C,B){var $=new Float64Array(C.ids),he=new Uint32Array(C.positions);return ur($,he,0,$.length-1),B&&B.push($.buffer,he.buffer),{ids:$,positions:he}},Tt.deserialize=function(C){var B=new Tt;return B.ids=C.ids,B.positions=C.positions,B.indexed=!0,B};var Yt=Math.pow(2,53)-1;function ir(E){var C=+E;return!isNaN(C)&&C<=Yt?C:Ce(String(E))}function ur(E,C,B,$){for(;B<$;){for(var he=E[B+$>>1],me=B-1,we=$+1;;){do me++;while(E[me]<he);do we--;while(E[we]>he);if(me>=we)break;Sr(E,me,we),Sr(C,3*me,3*we),Sr(C,3*me+1,3*we+1),Sr(C,3*me+2,3*we+2)}we-B<$-we?(ur(E,C,B,we),B=we+1):(ur(E,C,we+1,$),$=we)}}function Sr(E,C,B){var $=E[C];E[C]=E[B],E[B]=$}ze("FeaturePositionMap",Tt);var Br=function(C,B){this.gl=C.gl,this.location=B},Or=function(E){function C(B,$){E.call(this,B,$),this.current=0}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function($){this.current!==$&&(this.current=$,this.gl.uniform1i(this.location,$))},C}(Br),Fr=function(E){function C(B,$){E.call(this,B,$),this.current=0}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function($){this.current!==$&&(this.current=$,this.gl.uniform1f(this.location,$))},C}(Br),jr=function(E){function C(B,$){E.call(this,B,$),this.current=[0,0]}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function($){($[0]!==this.current[0]||$[1]!==this.current[1])&&(this.current=$,this.gl.uniform2f(this.location,$[0],$[1]))},C}(Br),cn=function(E){function C(B,$){E.call(this,B,$),this.current=[0,0,0]}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function($){($[0]!==this.current[0]||$[1]!==this.current[1]||$[2]!==this.current[2])&&(this.current=$,this.gl.uniform3f(this.location,$[0],$[1],$[2]))},C}(Br),En=function(E){function C(B,$){E.call(this,B,$),this.current=[0,0,0,0]}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function($){($[0]!==this.current[0]||$[1]!==this.current[1]||$[2]!==this.current[2]||$[3]!==this.current[3])&&(this.current=$,this.gl.uniform4f(this.location,$[0],$[1],$[2],$[3]))},C}(Br),Fn=function(E){function C(B,$){E.call(this,B,$),this.current=vi.transparent}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function($){($.r!==this.current.r||$.g!==this.current.g||$.b!==this.current.b||$.a!==this.current.a)&&(this.current=$,this.gl.uniform4f(this.location,$.r,$.g,$.b,$.a))},C}(Br),jn=new Float32Array(16),qn=function(E){function C(B,$){E.call(this,B,$),this.current=jn}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function($){if($[12]!==this.current[12]||$[0]!==this.current[0]){this.current=$,this.gl.uniformMatrix4fv(this.location,!1,$);return}for(var he=1;he<16;he++)if($[he]!==this.current[he]){this.current=$,this.gl.uniformMatrix4fv(this.location,!1,$);break}},C}(Br);function Qn(E){return[ve(255*E.r,255*E.g),ve(255*E.b,255*E.a)]}var ca=function(C,B,$){this.value=C,this.uniformNames=B.map(function(he){return"u_"+he}),this.type=$};ca.prototype.setUniform=function(C,B,$){C.set($.constantOr(this.value))},ca.prototype.getBinding=function(C,B,$){return this.type==="color"?new Fn(C,B):new Fr(C,B)};var xa=function(C,B){this.uniformNames=B.map(function($){return"u_"+$}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};xa.prototype.setConstantPatternPositions=function(C,B){this.pixelRatioFrom=B.pixelRatio,this.pixelRatioTo=C.pixelRatio,this.patternFrom=B.tlbr,this.patternTo=C.tlbr},xa.prototype.setUniform=function(C,B,$,he){var me=he==="u_pattern_to"?this.patternTo:he==="u_pattern_from"?this.patternFrom:he==="u_pixel_ratio_to"?this.pixelRatioTo:he==="u_pixel_ratio_from"?this.pixelRatioFrom:null;me&&C.set(me)},xa.prototype.getBinding=function(C,B,$){return $.substr(0,9)==="u_pattern"?new En(C,B):new Fr(C,B)};var ga=function(C,B,$,he){this.expression=C,this.type=$,this.maxValue=0,this.paintVertexAttributes=B.map(function(me){return{name:"a_"+me,type:"Float32",components:$==="color"?2:1,offset:0}}),this.paintVertexArray=new he};ga.prototype.populatePaintArray=function(C,B,$,he,me){var we=this.paintVertexArray.length,Ie=this.expression.evaluate(new ui(0),B,{},he,[],me);this.paintVertexArray.resize(C),this._setPaintValue(we,C,Ie)},ga.prototype.updatePaintArray=function(C,B,$,he){var me=this.expression.evaluate({zoom:0},$,he);this._setPaintValue(C,B,me)},ga.prototype._setPaintValue=function(C,B,$){if(this.type==="color")for(var he=Qn($),me=C;me<B;me++)this.paintVertexArray.emplace(me,he[0],he[1]);else{for(var we=C;we<B;we++)this.paintVertexArray.emplace(we,$);this.maxValue=Math.max(this.maxValue,Math.abs($))}},ga.prototype.upload=function(C){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=C.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ga.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Ma=function(C,B,$,he,me,we){this.expression=C,this.uniformNames=B.map(function(Ie){return"u_"+Ie+"_t"}),this.type=$,this.useIntegerZoom=he,this.zoom=me,this.maxValue=0,this.paintVertexAttributes=B.map(function(Ie){return{name:"a_"+Ie,type:"Float32",components:$==="color"?4:2,offset:0}}),this.paintVertexArray=new we};Ma.prototype.populatePaintArray=function(C,B,$,he,me){var we=this.expression.evaluate(new ui(this.zoom),B,{},he,[],me),Ie=this.expression.evaluate(new ui(this.zoom+1),B,{},he,[],me),$e=this.paintVertexArray.length;this.paintVertexArray.resize(C),this._setPaintValue($e,C,we,Ie)},Ma.prototype.updatePaintArray=function(C,B,$,he){var me=this.expression.evaluate({zoom:this.zoom},$,he),we=this.expression.evaluate({zoom:this.zoom+1},$,he);this._setPaintValue(C,B,me,we)},Ma.prototype._setPaintValue=function(C,B,$,he){if(this.type==="color")for(var me=Qn($),we=Qn(he),Ie=C;Ie<B;Ie++)this.paintVertexArray.emplace(Ie,me[0],me[1],we[0],we[1]);else{for(var $e=C;$e<B;$e++)this.paintVertexArray.emplace($e,$,he);this.maxValue=Math.max(this.maxValue,Math.abs($),Math.abs(he))}},Ma.prototype.upload=function(C){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=C.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ma.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ma.prototype.setUniform=function(C,B){var $=this.useIntegerZoom?Math.floor(B.zoom):B.zoom,he=c(this.expression.interpolationFactor($,this.zoom,this.zoom+1),0,1);C.set(he)},Ma.prototype.getBinding=function(C,B,$){return new Fr(C,B)};var La=function(C,B,$,he,me,we){this.expression=C,this.type=B,this.useIntegerZoom=$,this.zoom=he,this.layerId=we,this.zoomInPaintVertexArray=new me,this.zoomOutPaintVertexArray=new me};La.prototype.populatePaintArray=function(C,B,$){var he=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(C),this.zoomOutPaintVertexArray.resize(C),this._setPaintValues(he,C,B.patterns&&B.patterns[this.layerId],$)},La.prototype.updatePaintArray=function(C,B,$,he,me){this._setPaintValues(C,B,$.patterns&&$.patterns[this.layerId],me)},La.prototype._setPaintValues=function(C,B,$,he){if(!(!he||!$)){var me=$.min,we=$.mid,Ie=$.max,$e=he[me],ut=he[we],gt=he[Ie];if(!(!$e||!ut||!gt))for(var Rt=C;Rt<B;Rt++)this.zoomInPaintVertexArray.emplace(Rt,ut.tl[0],ut.tl[1],ut.br[0],ut.br[1],$e.tl[0],$e.tl[1],$e.br[0],$e.br[1],ut.pixelRatio,$e.pixelRatio),this.zoomOutPaintVertexArray.emplace(Rt,ut.tl[0],ut.tl[1],ut.br[0],ut.br[1],gt.tl[0],gt.tl[1],gt.br[0],gt.br[1],ut.pixelRatio,gt.pixelRatio)}},La.prototype.upload=function(C){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=C.createVertexBuffer(this.zoomInPaintVertexArray,K.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=C.createVertexBuffer(this.zoomOutPaintVertexArray,K.members,this.expression.isStateDependent))},La.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ha=function(C,B,$,he){this.binders={},this.layoutAttributes=he,this._buffers=[];var me=[];for(var we in C.paint._values)if(!!$(we)){var Ie=C.paint.get(we);if(!(!(Ie instanceof Gi)||!li(Ie.property.specification))){var $e=Li(we,C.type),ut=Ie.value,gt=Ie.property.specification.type,Rt=Ie.property.useIntegerZoom,Qt=Ie.property.specification["property-type"],Wt=Qt==="cross-faded"||Qt==="cross-faded-data-driven";if(ut.kind==="constant")this.binders[we]=Wt?new xa(ut.value,$e):new ca(ut.value,$e,gt),me.push("/u_"+we);else if(ut.kind==="source"||Wt){var vr=pi(we,gt,"source");this.binders[we]=Wt?new La(ut,gt,Rt,B,vr,C.id):new ga(ut,$e,gt,vr),me.push("/a_"+we)}else{var Rr=pi(we,gt,"composite");this.binders[we]=new Ma(ut,$e,gt,Rt,B,Rr),me.push("/z_"+we)}}}this.cacheKey=me.sort().join("")};Ha.prototype.getMaxValue=function(C){var B=this.binders[C];return B instanceof ga||B instanceof Ma?B.maxValue:0},Ha.prototype.populatePaintArrays=function(C,B,$,he,me){for(var we in this.binders){var Ie=this.binders[we];(Ie instanceof ga||Ie instanceof Ma||Ie instanceof La)&&Ie.populatePaintArray(C,B,$,he,me)}},Ha.prototype.setConstantPatternPositions=function(C,B){for(var $ in this.binders){var he=this.binders[$];he instanceof xa&&he.setConstantPatternPositions(C,B)}},Ha.prototype.updatePaintArrays=function(C,B,$,he,me){var we=!1;for(var Ie in C)for(var $e=B.getPositions(Ie),ut=0,gt=$e;ut<gt.length;ut+=1){var Rt=gt[ut],Qt=$.feature(Rt.index);for(var Wt in this.binders){var vr=this.binders[Wt];if((vr instanceof ga||vr instanceof Ma||vr instanceof La)&&vr.expression.isStateDependent===!0){var Rr=he.paint.get(Wt);vr.expression=Rr.value,vr.updatePaintArray(Rt.start,Rt.end,Qt,C[Ie],me),we=!0}}}return we},Ha.prototype.defines=function(){var C=[];for(var B in this.binders){var $=this.binders[B];($ instanceof ca||$ instanceof xa)&&C.push.apply(C,$.uniformNames.map(function(he){return"#define HAS_UNIFORM_"+he}))}return C},Ha.prototype.getPaintVertexBuffers=function(){return this._buffers},Ha.prototype.getUniforms=function(C,B){var $=[];for(var he in this.binders){var me=this.binders[he];if(me instanceof ca||me instanceof xa||me instanceof Ma)for(var we=0,Ie=me.uniformNames;we<Ie.length;we+=1){var $e=Ie[we];if(B[$e]){var ut=me.getBinding(C,B[$e],$e);$.push({name:$e,property:he,binding:ut})}}}return $},Ha.prototype.setUniforms=function(C,B,$,he){for(var me=0,we=B;me<we.length;me+=1){var Ie=we[me],$e=Ie.name,ut=Ie.property,gt=Ie.binding;this.binders[ut].setUniform(gt,he,$.get(ut),$e)}},Ha.prototype.updatePaintBuffers=function(C){this._buffers=[];for(var B in this.binders){var $=this.binders[B];if(C&&$ instanceof La){var he=C.fromScale===2?$.zoomInPaintVertexBuffer:$.zoomOutPaintVertexBuffer;he&&this._buffers.push(he)}else($ instanceof ga||$ instanceof Ma)&&$.paintVertexBuffer&&this._buffers.push($.paintVertexBuffer)}},Ha.prototype.upload=function(C){for(var B in this.binders){var $=this.binders[B];($ instanceof ga||$ instanceof Ma||$ instanceof La)&&$.upload(C)}this.updatePaintBuffers()},Ha.prototype.destroy=function(){for(var C in this.binders){var B=this.binders[C];(B instanceof ga||B instanceof Ma||B instanceof La)&&B.destroy()}};var ni=function(C,B,$,he){he===void 0&&(he=function(){return!0}),this.programConfigurations={};for(var me=0,we=B;me<we.length;me+=1){var Ie=we[me];this.programConfigurations[Ie.id]=new Ha(Ie,$,he,C)}this.needsUpload=!1,this._featureMap=new Tt,this._bufferOffset=0};ni.prototype.populatePaintArrays=function(C,B,$,he,me,we){for(var Ie in this.programConfigurations)this.programConfigurations[Ie].populatePaintArrays(C,B,he,me,we);B.id!==void 0&&this._featureMap.add(B.id,$,this._bufferOffset,C),this._bufferOffset=C,this.needsUpload=!0},ni.prototype.updatePaintArrays=function(C,B,$,he){for(var me=0,we=$;me<we.length;me+=1){var Ie=we[me];this.needsUpload=this.programConfigurations[Ie.id].updatePaintArrays(C,this._featureMap,B,Ie,he)||this.needsUpload}},ni.prototype.get=function(C){return this.programConfigurations[C]},ni.prototype.upload=function(C){if(!!this.needsUpload){for(var B in this.programConfigurations)this.programConfigurations[B].upload(C);this.needsUpload=!1}},ni.prototype.destroy=function(){for(var C in this.programConfigurations)this.programConfigurations[C].destroy()};function Li(E,C){var B={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]};return B[E]||[E.replace(C+"-","").replace(/-/g,"_")]}function fi(E){var C={"line-pattern":{source:Fs,composite:Fs},"fill-pattern":{source:Fs,composite:Fs},"fill-extrusion-pattern":{source:Fs,composite:Fs}};return C[E]}function pi(E,C,B){var $={color:{source:Nu,composite:ec},number:{source:ef,composite:Nu}},he=fi(E);return he&&he[B]||$[C][B]}ze("ConstantBinder",ca),ze("CrossFadedConstantBinder",xa),ze("SourceExpressionBinder",ga),ze("CrossFadedCompositeBinder",La),ze("CompositeExpressionBinder",Ma),ze("ProgramConfiguration",Ha,{omit:["_buffers"]}),ze("ProgramConfigurationSet",ni);var Na=8192;function Pi(E){return{min:-1*Math.pow(2,E-1),max:Math.pow(2,E-1)-1}}var zi=Pi(15);function Ni(E){for(var C=Na/E.extent,B=E.loadGeometry(),$=0;$<B.length;$++)for(var he=B[$],me=0;me<he.length;me++){var we=he[me];we.x=Math.round(we.x*C),we.y=Math.round(we.y*C),(we.x<zi.min||we.x>zi.max||we.y<zi.min||we.y>zi.max)&&(O("Geometry exceeds allowed extent, reduce your vector tile buffer size"),we.x=c(we.x,zi.min,zi.max),we.y=c(we.y,zi.min,zi.max))}return B}function _i(E,C,B,$,he){E.emplaceBack(C*2+($+1)/2,B*2+(he+1)/2)}var ji=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(B){return B.id}),this.index=C.index,this.hasPattern=!1,this.layoutVertexArray=new vf,this.indexArray=new xu,this.segments=new H,this.programConfigurations=new ni(ce,C.layers,C.zoom),this.stateDependentLayerIds=this.layers.filter(function(B){return B.isStateDependent()}).map(function(B){return B.id})};ji.prototype.populate=function(C,B,$){var he=this.layers[0],me=[],we=null;he.type==="circle"&&(we=he.layout.get("circle-sort-key"));for(var Ie=0,$e=C;Ie<$e.length;Ie+=1){var ut=$e[Ie],gt=ut.feature,Rt=ut.id,Qt=ut.index,Wt=ut.sourceLayerIndex,vr=this.layers[0]._featureFilter.needGeometry,Rr={type:gt.type,id:Rt,properties:gt.properties,geometry:vr?Ni(gt):[]};if(!!this.layers[0]._featureFilter.filter(new ui(this.zoom),Rr,$)){vr||(Rr.geometry=Ni(gt));var an=we?we.evaluate(Rr,{},$):void 0,Jr={id:Rt,properties:gt.properties,type:gt.type,sourceLayerIndex:Wt,index:Qt,geometry:Rr.geometry,patterns:{},sortKey:an};me.push(Jr)}}we&&me.sort(function(_a,ka){return _a.sortKey-ka.sortKey});for(var Mn=0,yn=me;Mn<yn.length;Mn+=1){var Tn=yn[Mn],Rn=Tn,Vn=Rn.geometry,sa=Rn.index,na=Rn.sourceLayerIndex,Ia=C[sa].feature;this.addFeature(Tn,Vn,sa,$),B.featureIndex.insert(Ia,Vn,sa,na,this.index)}},ji.prototype.update=function(C,B,$){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,B,this.stateDependentLayers,$)},ji.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},ji.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},ji.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,ce),this.indexBuffer=C.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(C),this.uploaded=!0},ji.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},ji.prototype.addFeature=function(C,B,$,he){for(var me=0,we=B;me<we.length;me+=1)for(var Ie=we[me],$e=0,ut=Ie;$e<ut.length;$e+=1){var gt=ut[$e],Rt=gt.x,Qt=gt.y;if(!(Rt<0||Rt>=Na||Qt<0||Qt>=Na)){var Wt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,C.sortKey),vr=Wt.vertexLength;_i(this.layoutVertexArray,Rt,Qt,-1,-1),_i(this.layoutVertexArray,Rt,Qt,1,-1),_i(this.layoutVertexArray,Rt,Qt,1,1),_i(this.layoutVertexArray,Rt,Qt,-1,1),this.indexArray.emplaceBack(vr,vr+1,vr+2),this.indexArray.emplaceBack(vr,vr+3,vr+2),Wt.vertexLength+=4,Wt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,$,{},he)},ze("CircleBucket",ji,{omit:["layers"]});function ii(E,C){for(var B=0;B<E.length;B++)if(Bs(C,E[B]))return!0;for(var $=0;$<C.length;$++)if(Bs(E,C[$]))return!0;return!!Ml(E,C)}function wi(E,C,B){return!!(Bs(E,C)||$l(C,E,B))}function _o(E,C){if(E.length===1)return ql(C,E[0]);for(var B=0;B<C.length;B++)for(var $=C[B],he=0;he<$.length;he++)if(Bs(E,$[he]))return!0;for(var me=0;me<E.length;me++)if(ql(C,E[me]))return!0;for(var we=0;we<C.length;we++)if(Ml(E,C[we]))return!0;return!1}function Bo(E,C,B){for(var $=0;$<C.length;$++){var he=C[$];if(E.length>=3){for(var me=0;me<he.length;me++)if(Bs(E,he[me]))return!0}if(Al(E,he,B))return!0}return!1}function Al(E,C,B){if(E.length>1){if(Ml(E,C))return!0;for(var $=0;$<C.length;$++)if($l(C[$],E,B))return!0}for(var he=0;he<E.length;he++)if($l(E[he],C,B))return!0;return!1}function Ml(E,C){if(E.length===0||C.length===0)return!1;for(var B=0;B<E.length-1;B++)for(var $=E[B],he=E[B+1],me=0;me<C.length-1;me++){var we=C[me],Ie=C[me+1];if(Ql($,he,we,Ie))return!0}return!1}function Ql(E,C,B,$){return F(E,B,$)!==F(C,B,$)&&F(E,C,B)!==F(E,C,$)}function $l(E,C,B){var $=B*B;if(C.length===1)return E.distSqr(C[0])<$;for(var he=1;he<C.length;he++){var me=C[he-1],we=C[he];if(bu(E,me,we)<$)return!0}return!1}function bu(E,C,B){var $=C.distSqr(B);if($===0)return E.distSqr(C);var he=((E.x-C.x)*(B.x-C.x)+(E.y-C.y)*(B.y-C.y))/$;return he<0?E.distSqr(C):he>1?E.distSqr(B):E.distSqr(B.sub(C)._mult(he)._add(C))}function ql(E,C){for(var B=!1,$,he,me,we=0;we<E.length;we++){$=E[we];for(var Ie=0,$e=$.length-1;Ie<$.length;$e=Ie++)he=$[Ie],me=$[$e],he.y>C.y!=me.y>C.y&&C.x<(me.x-he.x)*(C.y-he.y)/(me.y-he.y)+he.x&&(B=!B)}return B}function Bs(E,C){for(var B=!1,$=0,he=E.length-1;$<E.length;he=$++){var me=E[$],we=E[he];me.y>C.y!=we.y>C.y&&C.x<(we.x-me.x)*(C.y-me.y)/(we.y-me.y)+me.x&&(B=!B)}return B}function Vu(E,C,B,$,he){for(var me=0,we=E;me<we.length;me+=1){var Ie=we[me];if(C<=Ie.x&&B<=Ie.y&&$>=Ie.x&&he>=Ie.y)return!0}var $e=[new f(C,B),new f(C,he),new f($,he),new f($,B)];if(E.length>2)for(var ut=0,gt=$e;ut<gt.length;ut+=1){var Rt=gt[ut];if(Bs(E,Rt))return!0}for(var Qt=0;Qt<E.length-1;Qt++){var Wt=E[Qt],vr=E[Qt+1];if(xs(Wt,vr,$e))return!0}return!1}function xs(E,C,B){var $=B[0],he=B[2];if(E.x<$.x&&C.x<$.x||E.x>he.x&&C.x>he.x||E.y<$.y&&C.y<$.y||E.y>he.y&&C.y>he.y)return!1;var me=F(E,C,B[0]);return me!==F(E,C,B[1])||me!==F(E,C,B[2])||me!==F(E,C,B[3])}function ul(E,C,B){var $=C.paint.get(E).value;return $.kind==="constant"?$.value:B.programConfigurations.get(C.id).getMaxValue(E)}function eu(E){return Math.sqrt(E[0]*E[0]+E[1]*E[1])}function Vl(E,C,B,$,he){if(!C[0]&&!C[1])return E;var me=f.convert(C)._mult(he);B==="viewport"&&me._rotate(-$);for(var we=[],Ie=0;Ie<E.length;Ie++){var $e=E[Ie];we.push($e.sub(me))}return we}var tu=new Xi({"circle-sort-key":new Xa(Ft.layout_circle["circle-sort-key"])}),Ef=new Xi({"circle-radius":new Xa(Ft.paint_circle["circle-radius"]),"circle-color":new Xa(Ft.paint_circle["circle-color"]),"circle-blur":new Xa(Ft.paint_circle["circle-blur"]),"circle-opacity":new Xa(Ft.paint_circle["circle-opacity"]),"circle-translate":new za(Ft.paint_circle["circle-translate"]),"circle-translate-anchor":new za(Ft.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new za(Ft.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new za(Ft.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Xa(Ft.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Xa(Ft.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Xa(Ft.paint_circle["circle-stroke-opacity"])}),Xu={paint:Ef,layout:tu},fs=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var E=arguments,C=0,B=arguments.length;B--;)C+=E[B]*E[B];return Math.sqrt(C)});function yf(){var E=new fs(4);return fs!=Float32Array&&(E[1]=0,E[2]=0),E[0]=1,E[3]=1,E}function ks(E,C,B){var $=C[0],he=C[1],me=C[2],we=C[3],Ie=Math.sin(B),$e=Math.cos(B);return E[0]=$*$e+me*Ie,E[1]=he*$e+we*Ie,E[2]=$*-Ie+me*$e,E[3]=he*-Ie+we*$e,E}function mf(){var E=new fs(9);return fs!=Float32Array&&(E[1]=0,E[2]=0,E[3]=0,E[5]=0,E[6]=0,E[7]=0),E[0]=1,E[4]=1,E[8]=1,E}function Cf(E,C){var B=Math.sin(C),$=Math.cos(C);return E[0]=$,E[1]=B,E[2]=0,E[3]=-B,E[4]=$,E[5]=0,E[6]=0,E[7]=0,E[8]=1,E}function Lf(){var E=new fs(16);return fs!=Float32Array&&(E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[11]=0,E[12]=0,E[13]=0,E[14]=0),E[0]=1,E[5]=1,E[10]=1,E[15]=1,E}function Mc(E){var C=new fs(16);return C[0]=E[0],C[1]=E[1],C[2]=E[2],C[3]=E[3],C[4]=E[4],C[5]=E[5],C[6]=E[6],C[7]=E[7],C[8]=E[8],C[9]=E[9],C[10]=E[10],C[11]=E[11],C[12]=E[12],C[13]=E[13],C[14]=E[14],C[15]=E[15],C}function Pf(E){return E[0]=1,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=1,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[10]=1,E[11]=0,E[12]=0,E[13]=0,E[14]=0,E[15]=1,E}function nf(E,C){var B=C[0],$=C[1],he=C[2],me=C[3],we=C[4],Ie=C[5],$e=C[6],ut=C[7],gt=C[8],Rt=C[9],Qt=C[10],Wt=C[11],vr=C[12],Rr=C[13],an=C[14],Jr=C[15],Mn=B*Ie-$*we,yn=B*$e-he*we,Tn=B*ut-me*we,Rn=$*$e-he*Ie,Vn=$*ut-me*Ie,sa=he*ut-me*$e,na=gt*Rr-Rt*vr,Ia=gt*an-Qt*vr,_a=gt*Jr-Wt*vr,ka=Rt*an-Qt*Rr,ei=Rt*Jr-Wt*Rr,Pa=Qt*Jr-Wt*an,Ra=Mn*Pa-yn*ei+Tn*ka+Rn*_a-Vn*Ia+sa*na;return Ra?(Ra=1/Ra,E[0]=(Ie*Pa-$e*ei+ut*ka)*Ra,E[1]=(he*ei-$*Pa-me*ka)*Ra,E[2]=(Rr*sa-an*Vn+Jr*Rn)*Ra,E[3]=(Qt*Vn-Rt*sa-Wt*Rn)*Ra,E[4]=($e*_a-we*Pa-ut*Ia)*Ra,E[5]=(B*Pa-he*_a+me*Ia)*Ra,E[6]=(an*Tn-vr*sa-Jr*yn)*Ra,E[7]=(gt*sa-Qt*Tn+Wt*yn)*Ra,E[8]=(we*ei-Ie*_a+ut*na)*Ra,E[9]=($*_a-B*ei-me*na)*Ra,E[10]=(vr*Vn-Rr*Tn+Jr*Mn)*Ra,E[11]=(Rt*Tn-gt*Vn-Wt*Mn)*Ra,E[12]=(Ie*Ia-we*ka-$e*na)*Ra,E[13]=(B*ka-$*Ia+he*na)*Ra,E[14]=(Rr*yn-vr*Rn-an*Mn)*Ra,E[15]=(gt*Rn-Rt*yn+Qt*Mn)*Ra,E):null}function af(E,C,B){var $=C[0],he=C[1],me=C[2],we=C[3],Ie=C[4],$e=C[5],ut=C[6],gt=C[7],Rt=C[8],Qt=C[9],Wt=C[10],vr=C[11],Rr=C[12],an=C[13],Jr=C[14],Mn=C[15],yn=B[0],Tn=B[1],Rn=B[2],Vn=B[3];return E[0]=yn*$+Tn*Ie+Rn*Rt+Vn*Rr,E[1]=yn*he+Tn*$e+Rn*Qt+Vn*an,E[2]=yn*me+Tn*ut+Rn*Wt+Vn*Jr,E[3]=yn*we+Tn*gt+Rn*vr+Vn*Mn,yn=B[4],Tn=B[5],Rn=B[6],Vn=B[7],E[4]=yn*$+Tn*Ie+Rn*Rt+Vn*Rr,E[5]=yn*he+Tn*$e+Rn*Qt+Vn*an,E[6]=yn*me+Tn*ut+Rn*Wt+Vn*Jr,E[7]=yn*we+Tn*gt+Rn*vr+Vn*Mn,yn=B[8],Tn=B[9],Rn=B[10],Vn=B[11],E[8]=yn*$+Tn*Ie+Rn*Rt+Vn*Rr,E[9]=yn*he+Tn*$e+Rn*Qt+Vn*an,E[10]=yn*me+Tn*ut+Rn*Wt+Vn*Jr,E[11]=yn*we+Tn*gt+Rn*vr+Vn*Mn,yn=B[12],Tn=B[13],Rn=B[14],Vn=B[15],E[12]=yn*$+Tn*Ie+Rn*Rt+Vn*Rr,E[13]=yn*he+Tn*$e+Rn*Qt+Vn*an,E[14]=yn*me+Tn*ut+Rn*Wt+Vn*Jr,E[15]=yn*we+Tn*gt+Rn*vr+Vn*Mn,E}function Eo(E,C,B){var $=B[0],he=B[1],me=B[2],we,Ie,$e,ut,gt,Rt,Qt,Wt,vr,Rr,an,Jr;return C===E?(E[12]=C[0]*$+C[4]*he+C[8]*me+C[12],E[13]=C[1]*$+C[5]*he+C[9]*me+C[13],E[14]=C[2]*$+C[6]*he+C[10]*me+C[14],E[15]=C[3]*$+C[7]*he+C[11]*me+C[15]):(we=C[0],Ie=C[1],$e=C[2],ut=C[3],gt=C[4],Rt=C[5],Qt=C[6],Wt=C[7],vr=C[8],Rr=C[9],an=C[10],Jr=C[11],E[0]=we,E[1]=Ie,E[2]=$e,E[3]=ut,E[4]=gt,E[5]=Rt,E[6]=Qt,E[7]=Wt,E[8]=vr,E[9]=Rr,E[10]=an,E[11]=Jr,E[12]=we*$+gt*he+vr*me+C[12],E[13]=Ie*$+Rt*he+Rr*me+C[13],E[14]=$e*$+Qt*he+an*me+C[14],E[15]=ut*$+Wt*he+Jr*me+C[15]),E}function Qs(E,C,B){var $=B[0],he=B[1],me=B[2];return E[0]=C[0]*$,E[1]=C[1]*$,E[2]=C[2]*$,E[3]=C[3]*$,E[4]=C[4]*he,E[5]=C[5]*he,E[6]=C[6]*he,E[7]=C[7]*he,E[8]=C[8]*me,E[9]=C[9]*me,E[10]=C[10]*me,E[11]=C[11]*me,E[12]=C[12],E[13]=C[13],E[14]=C[14],E[15]=C[15],E}function $s(E,C,B){var $=Math.sin(B),he=Math.cos(B),me=C[4],we=C[5],Ie=C[6],$e=C[7],ut=C[8],gt=C[9],Rt=C[10],Qt=C[11];return C!==E&&(E[0]=C[0],E[1]=C[1],E[2]=C[2],E[3]=C[3],E[12]=C[12],E[13]=C[13],E[14]=C[14],E[15]=C[15]),E[4]=me*he+ut*$,E[5]=we*he+gt*$,E[6]=Ie*he+Rt*$,E[7]=$e*he+Qt*$,E[8]=ut*he-me*$,E[9]=gt*he-we*$,E[10]=Rt*he-Ie*$,E[11]=Qt*he-$e*$,E}function Df(E,C,B){var $=Math.sin(B),he=Math.cos(B),me=C[0],we=C[1],Ie=C[2],$e=C[3],ut=C[4],gt=C[5],Rt=C[6],Qt=C[7];return C!==E&&(E[8]=C[8],E[9]=C[9],E[10]=C[10],E[11]=C[11],E[12]=C[12],E[13]=C[13],E[14]=C[14],E[15]=C[15]),E[0]=me*he+ut*$,E[1]=we*he+gt*$,E[2]=Ie*he+Rt*$,E[3]=$e*he+Qt*$,E[4]=ut*he-me*$,E[5]=gt*he-we*$,E[6]=Rt*he-Ie*$,E[7]=Qt*he-$e*$,E}function nc(E,C,B,$,he){var me=1/Math.tan(C/2),we;return E[0]=me/B,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=me,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[11]=-1,E[12]=0,E[13]=0,E[15]=0,he!=null&&he!==1/0?(we=1/($-he),E[10]=(he+$)*we,E[14]=2*he*$*we):(E[10]=-1,E[14]=-2*$),E}function Kc(E,C,B,$,he,me,we){var Ie=1/(C-B),$e=1/($-he),ut=1/(me-we);return E[0]=-2*Ie,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=-2*$e,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[10]=2*ut,E[11]=0,E[12]=(C+B)*Ie,E[13]=(he+$)*$e,E[14]=(we+me)*ut,E[15]=1,E}var Jc=af;function xf(){var E=new fs(3);return fs!=Float32Array&&(E[0]=0,E[1]=0,E[2]=0),E}function Qc(E){var C=new fs(3);return C[0]=E[0],C[1]=E[1],C[2]=E[2],C}function Rf(E,C,B){return E[0]=C[0]+B[0],E[1]=C[1]+B[1],E[2]=C[2]+B[2],E}function $c(E,C,B){return E[0]=C[0]-B[0],E[1]=C[1]-B[1],E[2]=C[2]-B[2],E}function qc(E,C,B){return E[0]=C[0]*B,E[1]=C[1]*B,E[2]=C[2]*B,E}function ac(E,C){var B=C[0],$=C[1],he=C[2],me=B*B+$*$+he*he;return me>0&&(me=1/Math.sqrt(me)),E[0]=C[0]*me,E[1]=C[1]*me,E[2]=C[2]*me,E}function Ov(E,C){return E[0]*C[0]+E[1]*C[1]+E[2]*C[2]}function Nv(E,C,B){var $=C[0],he=C[1],me=C[2],we=B[0],Ie=B[1],$e=B[2];return E[0]=he*$e-me*Ie,E[1]=me*we-$*$e,E[2]=$*Ie-he*we,E}function Uv(E,C,B){var $=C[0],he=C[1],me=C[2];return E[0]=$*B[0]+he*B[3]+me*B[6],E[1]=$*B[1]+he*B[4]+me*B[7],E[2]=$*B[2]+he*B[5]+me*B[8],E}var Vv=$c;(function(){var E=xf();return function(C,B,$,he,me,we){var Ie,$e;for(B||(B=3),$||($=0),he?$e=Math.min(he*B+$,C.length):$e=C.length,Ie=$;Ie<$e;Ie+=B)E[0]=C[Ie],E[1]=C[Ie+1],E[2]=C[Ie+2],me(E,E,we),C[Ie]=E[0],C[Ie+1]=E[1],C[Ie+2]=E[2];return C}})();function Hv(){var E=new fs(4);return fs!=Float32Array&&(E[0]=0,E[1]=0,E[2]=0,E[3]=0),E}function Gv(E,C,B){return E[0]=C[0]*B,E[1]=C[1]*B,E[2]=C[2]*B,E[3]=C[3]*B,E}function Yv(E,C){return E[0]*C[0]+E[1]*C[1]+E[2]*C[2]+E[3]*C[3]}function Sc(E,C,B){var $=C[0],he=C[1],me=C[2],we=C[3];return E[0]=B[0]*$+B[4]*he+B[8]*me+B[12]*we,E[1]=B[1]*$+B[5]*he+B[9]*me+B[13]*we,E[2]=B[2]*$+B[6]*he+B[10]*me+B[14]*we,E[3]=B[3]*$+B[7]*he+B[11]*me+B[15]*we,E}(function(){var E=Hv();return function(C,B,$,he,me,we){var Ie,$e;for(B||(B=4),$||($=0),he?$e=Math.min(he*B+$,C.length):$e=C.length,Ie=$;Ie<$e;Ie+=B)E[0]=C[Ie],E[1]=C[Ie+1],E[2]=C[Ie+2],E[3]=C[Ie+3],me(E,E,we),C[Ie]=E[0],C[Ie+1]=E[1],C[Ie+2]=E[2],C[Ie+3]=E[3];return C}})();function Wv(){var E=new fs(2);return fs!=Float32Array&&(E[0]=0,E[1]=0),E}function Xv(E){var C=E[0],B=E[1];return C*C+B*B}var Zv=Xv;(function(){var E=Wv();return function(C,B,$,he,me,we){var Ie,$e;for(B||(B=2),$||($=0),he?$e=Math.min(he*B+$,C.length):$e=C.length,Ie=$;Ie<$e;Ie+=B)E[0]=C[Ie],E[1]=C[Ie+1],me(E,E,we),C[Ie]=E[0],C[Ie+1]=E[1];return C}})();var jv=function(E){function C(B){E.call(this,B,Xu)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.createBucket=function($){return new ji($)},C.prototype.queryRadius=function($){var he=$;return ul("circle-radius",this,he)+ul("circle-stroke-width",this,he)+eu(this.paint.get("circle-translate"))},C.prototype.queryIntersectsFeature=function($,he,me,we,Ie,$e,ut,gt){for(var Rt=Vl($,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),$e.angle,ut),Qt=this.paint.get("circle-radius").evaluate(he,me),Wt=this.paint.get("circle-stroke-width").evaluate(he,me),vr=Qt+Wt,Rr=this.paint.get("circle-pitch-alignment")==="map",an=Rr?Rt:Kv(Rt,gt),Jr=Rr?vr*ut:vr,Mn=0,yn=we;Mn<yn.length;Mn+=1)for(var Tn=yn[Mn],Rn=0,Vn=Tn;Rn<Vn.length;Rn+=1){var sa=Vn[Rn],na=Rr?sa:kh(sa,gt),Ia=Jr,_a=Sc([],[sa.x,sa.y,0,1],gt);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ia*=_a[3]/$e.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ia*=$e.cameraToCenterDistance/_a[3]),wi(an,na,Ia))return!0}return!1},C}(ms);function kh(E,C){var B=Sc([],[E.x,E.y,0,1],C);return new f(B[0]/B[3],B[1]/B[3])}function Kv(E,C){return E.map(function(B){return kh(B,C)})}var Eh=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C}(ji);ze("HeatmapBucket",Eh,{omit:["layers"]});function eh(E,C,B,$){var he=C.width,me=C.height;if(!$)$=new Uint8Array(he*me*B);else if($ instanceof Uint8ClampedArray)$=new Uint8Array($.buffer);else if($.length!==he*me*B)throw new RangeError("mismatched image size");return E.width=he,E.height=me,E.data=$,E}function Ch(E,C,B){var $=C.width,he=C.height;if(!($===E.width&&he===E.height)){var me=eh({},{width:$,height:he},B);th(E,me,{x:0,y:0},{x:0,y:0},{width:Math.min(E.width,$),height:Math.min(E.height,he)},B),E.width=$,E.height=he,E.data=me.data}}function th(E,C,B,$,he,me){if(he.width===0||he.height===0)return C;if(he.width>E.width||he.height>E.height||B.x>E.width-he.width||B.y>E.height-he.height)throw new RangeError("out of range source coordinates for image copy");if(he.width>C.width||he.height>C.height||$.x>C.width-he.width||$.y>C.height-he.height)throw new RangeError("out of range destination coordinates for image copy");for(var we=E.data,Ie=C.data,$e=0;$e<he.height;$e++)for(var ut=((B.y+$e)*E.width+B.x)*me,gt=(($.y+$e)*C.width+$.x)*me,Rt=0;Rt<he.width*me;Rt++)Ie[gt+Rt]=we[ut+Rt];return C}var bf=function(C,B){eh(this,C,1,B)};bf.prototype.resize=function(C){Ch(this,C,1)},bf.prototype.clone=function(){return new bf({width:this.width,height:this.height},new Uint8Array(this.data))},bf.copy=function(C,B,$,he,me){th(C,B,$,he,me,1)};var qs=function(C,B){eh(this,C,4,B)};qs.prototype.resize=function(C){Ch(this,C,4)},qs.prototype.replace=function(C,B){B?this.data.set(C):C instanceof Uint8ClampedArray?this.data=new Uint8Array(C.buffer):this.data=C},qs.prototype.clone=function(){return new qs({width:this.width,height:this.height},new Uint8Array(this.data))},qs.copy=function(C,B,$,he,me){th(C,B,$,he,me,4)},ze("AlphaImage",bf),ze("RGBAImage",qs);var Jv=new Xi({"heatmap-radius":new Xa(Ft.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Xa(Ft.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new za(Ft.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Po(Ft.paint_heatmap["heatmap-color"]),"heatmap-opacity":new za(Ft.paint_heatmap["heatmap-opacity"])}),Qv={paint:Jv};function Lh(E,C){for(var B=new Uint8Array(1024),$={},he=0,me=0;he<256;he++,me+=4){$[C]=he/255;var we=E.evaluate($);B[me+0]=Math.floor(we.r*255/we.a),B[me+1]=Math.floor(we.g*255/we.a),B[me+2]=Math.floor(we.b*255/we.a),B[me+3]=Math.floor(we.a*255)}return new qs({width:256,height:1},B)}var $v=function(E){function C(B){E.call(this,B,Qv),this._updateColorRamp()}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.createBucket=function($){return new Eh($)},C.prototype._handleSpecialPaintPropertyUpdate=function($){$==="heatmap-color"&&this._updateColorRamp()},C.prototype._updateColorRamp=function(){var $=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=Lh($,"heatmapDensity"),this.colorRampTexture=null},C.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},C.prototype.queryRadius=function(){return 0},C.prototype.queryIntersectsFeature=function(){return!1},C.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},C}(ms),qv=new Xi({"hillshade-illumination-direction":new za(Ft.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new za(Ft.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new za(Ft.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new za(Ft.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new za(Ft.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new za(Ft.paint_hillshade["hillshade-accent-color"])}),ep={paint:qv},tp=function(E){function C(B){E.call(this,B,ep)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},C}(ms),rp=Do([{name:"a_pos",components:2,type:"Int16"}],4),Ph=rp.members,rh=kc,np=kc;function kc(E,C,B){B=B||2;var $=C&&C.length,he=$?C[0]*B:E.length,me=Dh(E,0,he,B,!0),we=[];if(!me||me.next===me.prev)return we;var Ie,$e,ut,gt,Rt,Qt,Wt;if($&&(me=lp(E,C,me,B)),E.length>80*B){Ie=ut=E[0],$e=gt=E[1];for(var vr=B;vr<he;vr+=B)Rt=E[vr],Qt=E[vr+1],Rt<Ie&&(Ie=Rt),Qt<$e&&($e=Qt),Rt>ut&&(ut=Rt),Qt>gt&&(gt=Qt);Wt=Math.max(ut-Ie,gt-$e),Wt=Wt!==0?1/Wt:0}return ic(me,we,B,Ie,$e,Wt),we}function Dh(E,C,B,$,he){var me,we;if(he===ih(E,C,B,$)>0)for(me=C;me<B;me+=$)we=zh(me,E[me],E[me+1],we);else for(me=B-$;me>=C;me-=$)we=zh(me,E[me],E[me+1],we);return we&&Ec(we,we.next)&&(sc(we),we=we.next),we}function of(E,C){if(!E)return E;C||(C=E);var B=E,$;do if($=!1,!B.steiner&&(Ec(B,B.next)||Oo(B.prev,B,B.next)===0)){if(sc(B),B=C=B.prev,B===B.next)break;$=!0}else B=B.next;while($||B!==C);return C}function ic(E,C,B,$,he,me,we){if(!!E){!we&&me&&vp(E,$,he,me);for(var Ie=E,$e,ut;E.prev!==E.next;){if($e=E.prev,ut=E.next,me?ip(E,$,he,me):ap(E)){C.push($e.i/B),C.push(E.i/B),C.push(ut.i/B),sc(E),E=ut.next,Ie=ut.next;continue}if(E=ut,E===Ie){we?we===1?(E=op(of(E),C,B),ic(E,C,B,$,he,me,2)):we===2&&sp(E,C,B,$,he,me):ic(of(E),C,B,$,he,me,1);break}}}}function ap(E){var C=E.prev,B=E,$=E.next;if(Oo(C,B,$)>=0)return!1;for(var he=E.next.next;he!==E.prev;){if(If(C.x,C.y,B.x,B.y,$.x,$.y,he.x,he.y)&&Oo(he.prev,he,he.next)>=0)return!1;he=he.next}return!0}function ip(E,C,B,$){var he=E.prev,me=E,we=E.next;if(Oo(he,me,we)>=0)return!1;for(var Ie=he.x<me.x?he.x<we.x?he.x:we.x:me.x<we.x?me.x:we.x,$e=he.y<me.y?he.y<we.y?he.y:we.y:me.y<we.y?me.y:we.y,ut=he.x>me.x?he.x>we.x?he.x:we.x:me.x>we.x?me.x:we.x,gt=he.y>me.y?he.y>we.y?he.y:we.y:me.y>we.y?me.y:we.y,Rt=nh(Ie,$e,C,B,$),Qt=nh(ut,gt,C,B,$),Wt=E.prevZ,vr=E.nextZ;Wt&&Wt.z>=Rt&&vr&&vr.z<=Qt;){if(Wt!==E.prev&&Wt!==E.next&&If(he.x,he.y,me.x,me.y,we.x,we.y,Wt.x,Wt.y)&&Oo(Wt.prev,Wt,Wt.next)>=0||(Wt=Wt.prevZ,vr!==E.prev&&vr!==E.next&&If(he.x,he.y,me.x,me.y,we.x,we.y,vr.x,vr.y)&&Oo(vr.prev,vr,vr.next)>=0))return!1;vr=vr.nextZ}for(;Wt&&Wt.z>=Rt;){if(Wt!==E.prev&&Wt!==E.next&&If(he.x,he.y,me.x,me.y,we.x,we.y,Wt.x,Wt.y)&&Oo(Wt.prev,Wt,Wt.next)>=0)return!1;Wt=Wt.prevZ}for(;vr&&vr.z<=Qt;){if(vr!==E.prev&&vr!==E.next&&If(he.x,he.y,me.x,me.y,we.x,we.y,vr.x,vr.y)&&Oo(vr.prev,vr,vr.next)>=0)return!1;vr=vr.nextZ}return!0}function op(E,C,B){var $=E;do{var he=$.prev,me=$.next.next;!Ec(he,me)&&Rh(he,$,$.next,me)&&oc(he,me)&&oc(me,he)&&(C.push(he.i/B),C.push($.i/B),C.push(me.i/B),sc($),sc($.next),$=E=me),$=$.next}while($!==E);return of($)}function sp(E,C,B,$,he,me){var we=E;do{for(var Ie=we.next.next;Ie!==we.prev;){if(we.i!==Ie.i&&gp(we,Ie)){var $e=Ih(we,Ie);we=of(we,we.next),$e=of($e,$e.next),ic(we,C,B,$,he,me),ic($e,C,B,$,he,me);return}Ie=Ie.next}we=we.next}while(we!==E)}function lp(E,C,B,$){var he=[],me,we,Ie,$e,ut;for(me=0,we=C.length;me<we;me++)Ie=C[me]*$,$e=me<we-1?C[me+1]*$:E.length,ut=Dh(E,Ie,$e,$,!1),ut===ut.next&&(ut.steiner=!0),he.push(dp(ut));for(he.sort(up),me=0;me<he.length;me++)fp(he[me],B),B=of(B,B.next);return B}function up(E,C){return E.x-C.x}function fp(E,C){if(C=cp(E,C),C){var B=Ih(C,E);of(C,C.next),of(B,B.next)}}function cp(E,C){var B=C,$=E.x,he=E.y,me=-1/0,we;do{if(he<=B.y&&he>=B.next.y&&B.next.y!==B.y){var Ie=B.x+(he-B.y)*(B.next.x-B.x)/(B.next.y-B.y);if(Ie<=$&&Ie>me){if(me=Ie,Ie===$){if(he===B.y)return B;if(he===B.next.y)return B.next}we=B.x<B.next.x?B:B.next}}B=B.next}while(B!==C);if(!we)return null;if($===me)return we;var $e=we,ut=we.x,gt=we.y,Rt=1/0,Qt;B=we;do $>=B.x&&B.x>=ut&&$!==B.x&&If(he<gt?$:me,he,ut,gt,he<gt?me:$,he,B.x,B.y)&&(Qt=Math.abs(he-B.y)/($-B.x),oc(B,E)&&(Qt<Rt||Qt===Rt&&(B.x>we.x||B.x===we.x&&hp(we,B)))&&(we=B,Rt=Qt)),B=B.next;while(B!==$e);return we}function hp(E,C){return Oo(E.prev,E,C.prev)<0&&Oo(C.next,E,E.next)<0}function vp(E,C,B,$){var he=E;do he.z===null&&(he.z=nh(he.x,he.y,C,B,$)),he.prevZ=he.prev,he.nextZ=he.next,he=he.next;while(he!==E);he.prevZ.nextZ=null,he.prevZ=null,pp(he)}function pp(E){var C,B,$,he,me,we,Ie,$e,ut=1;do{for(B=E,E=null,me=null,we=0;B;){for(we++,$=B,Ie=0,C=0;C<ut&&(Ie++,$=$.nextZ,!!$);C++);for($e=ut;Ie>0||$e>0&&$;)Ie!==0&&($e===0||!$||B.z<=$.z)?(he=B,B=B.nextZ,Ie--):(he=$,$=$.nextZ,$e--),me?me.nextZ=he:E=he,he.prevZ=me,me=he;B=$}me.nextZ=null,ut*=2}while(we>1);return E}function nh(E,C,B,$,he){return E=32767*(E-B)*he,C=32767*(C-$)*he,E=(E|E<<8)&16711935,E=(E|E<<4)&252645135,E=(E|E<<2)&858993459,E=(E|E<<1)&1431655765,C=(C|C<<8)&16711935,C=(C|C<<4)&252645135,C=(C|C<<2)&858993459,C=(C|C<<1)&1431655765,E|C<<1}function dp(E){var C=E,B=E;do(C.x<B.x||C.x===B.x&&C.y<B.y)&&(B=C),C=C.next;while(C!==E);return B}function If(E,C,B,$,he,me,we,Ie){return(he-we)*(C-Ie)-(E-we)*(me-Ie)>=0&&(E-we)*($-Ie)-(B-we)*(C-Ie)>=0&&(B-we)*(me-Ie)-(he-we)*($-Ie)>=0}function gp(E,C){return E.next.i!==C.i&&E.prev.i!==C.i&&!yp(E,C)&&(oc(E,C)&&oc(C,E)&&mp(E,C)&&(Oo(E.prev,E,C.prev)||Oo(E,C.prev,C))||Ec(E,C)&&Oo(E.prev,E,E.next)>0&&Oo(C.prev,C,C.next)>0)}function Oo(E,C,B){return(C.y-E.y)*(B.x-C.x)-(C.x-E.x)*(B.y-C.y)}function Ec(E,C){return E.x===C.x&&E.y===C.y}function Rh(E,C,B,$){var he=Lc(Oo(E,C,B)),me=Lc(Oo(E,C,$)),we=Lc(Oo(B,$,E)),Ie=Lc(Oo(B,$,C));return!!(he!==me&&we!==Ie||he===0&&Cc(E,B,C)||me===0&&Cc(E,$,C)||we===0&&Cc(B,E,$)||Ie===0&&Cc(B,C,$))}function Cc(E,C,B){return C.x<=Math.max(E.x,B.x)&&C.x>=Math.min(E.x,B.x)&&C.y<=Math.max(E.y,B.y)&&C.y>=Math.min(E.y,B.y)}function Lc(E){return E>0?1:E<0?-1:0}function yp(E,C){var B=E;do{if(B.i!==E.i&&B.next.i!==E.i&&B.i!==C.i&&B.next.i!==C.i&&Rh(B,B.next,E,C))return!0;B=B.next}while(B!==E);return!1}function oc(E,C){return Oo(E.prev,E,E.next)<0?Oo(E,C,E.next)>=0&&Oo(E,E.prev,C)>=0:Oo(E,C,E.prev)<0||Oo(E,E.next,C)<0}function mp(E,C){var B=E,$=!1,he=(E.x+C.x)/2,me=(E.y+C.y)/2;do B.y>me!=B.next.y>me&&B.next.y!==B.y&&he<(B.next.x-B.x)*(me-B.y)/(B.next.y-B.y)+B.x&&($=!$),B=B.next;while(B!==E);return $}function Ih(E,C){var B=new ah(E.i,E.x,E.y),$=new ah(C.i,C.x,C.y),he=E.next,me=C.prev;return E.next=C,C.prev=E,B.next=he,he.prev=B,$.next=B,B.prev=$,me.next=$,$.prev=me,$}function zh(E,C,B,$){var he=new ah(E,C,B);return $?(he.next=$.next,he.prev=$,$.next.prev=he,$.next=he):(he.prev=he,he.next=he),he}function sc(E){E.next.prev=E.prev,E.prev.next=E.next,E.prevZ&&(E.prevZ.nextZ=E.nextZ),E.nextZ&&(E.nextZ.prevZ=E.prevZ)}function ah(E,C,B){this.i=E,this.x=C,this.y=B,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}kc.deviation=function(E,C,B,$){var he=C&&C.length,me=he?C[0]*B:E.length,we=Math.abs(ih(E,0,me,B));if(he)for(var Ie=0,$e=C.length;Ie<$e;Ie++){var ut=C[Ie]*B,gt=Ie<$e-1?C[Ie+1]*B:E.length;we-=Math.abs(ih(E,ut,gt,B))}var Rt=0;for(Ie=0;Ie<$.length;Ie+=3){var Qt=$[Ie]*B,Wt=$[Ie+1]*B,vr=$[Ie+2]*B;Rt+=Math.abs((E[Qt]-E[vr])*(E[Wt+1]-E[Qt+1])-(E[Qt]-E[Wt])*(E[vr+1]-E[Qt+1]))}return we===0&&Rt===0?0:Math.abs((Rt-we)/we)};function ih(E,C,B,$){for(var he=0,me=C,we=B-$;me<B;me+=$)he+=(E[we]-E[me])*(E[me+1]+E[we+1]),we=me;return he}kc.flatten=function(E){for(var C=E[0][0].length,B={vertices:[],holes:[],dimensions:C},$=0,he=0;he<E.length;he++){for(var me=0;me<E[he].length;me++)for(var we=0;we<C;we++)B.vertices.push(E[he][me][we]);he>0&&($+=E[he-1].length,B.holes.push($))}return B},rh.default=np;function xp(E,C,B,$,he){Fh(E,C,B||0,$||E.length-1,he||bp)}function Fh(E,C,B,$,he){for(;$>B;){if($-B>600){var me=$-B+1,we=C-B+1,Ie=Math.log(me),$e=.5*Math.exp(2*Ie/3),ut=.5*Math.sqrt(Ie*$e*(me-$e)/me)*(we-me/2<0?-1:1),gt=Math.max(B,Math.floor(C-we*$e/me+ut)),Rt=Math.min($,Math.floor(C+(me-we)*$e/me+ut));Fh(E,C,gt,Rt,he)}var Qt=E[C],Wt=B,vr=$;for(lc(E,B,C),he(E[$],Qt)>0&&lc(E,B,$);Wt<vr;){for(lc(E,Wt,vr),Wt++,vr--;he(E[Wt],Qt)<0;)Wt++;for(;he(E[vr],Qt)>0;)vr--}he(E[B],Qt)===0?lc(E,B,vr):(vr++,lc(E,vr,$)),vr<=C&&(B=vr+1),C<=vr&&($=vr-1)}}function lc(E,C,B){var $=E[C];E[C]=E[B],E[B]=$}function bp(E,C){return E<C?-1:E>C?1:0}function oh(E,C){var B=E.length;if(B<=1)return[E];for(var $=[],he,me,we=0;we<B;we++){var Ie=V(E[we]);Ie!==0&&(E[we].area=Math.abs(Ie),me===void 0&&(me=Ie<0),me===Ie<0?(he&&$.push(he),he=[E[we]]):he.push(E[we]))}if(he&&$.push(he),C>1)for(var $e=0;$e<$.length;$e++)$[$e].length<=C||(xp($[$e],C,1,$[$e].length-1,_p),$[$e]=$[$e].slice(0,C));return $}function _p(E,C){return C.area-E.area}function sh(E,C,B){for(var $=B.patternDependencies,he=!1,me=0,we=C;me<we.length;me+=1){var Ie=we[me],$e=Ie.paint.get(E+"-pattern");$e.isConstant()||(he=!0);var ut=$e.constantOr(null);ut&&(he=!0,$[ut.to]=!0,$[ut.from]=!0)}return he}function lh(E,C,B,$,he){for(var me=he.patternDependencies,we=0,Ie=C;we<Ie.length;we+=1){var $e=Ie[we],ut=$e.paint.get(E+"-pattern"),gt=ut.value;if(gt.kind!=="constant"){var Rt=gt.evaluate({zoom:$-1},B,{},he.availableImages),Qt=gt.evaluate({zoom:$},B,{},he.availableImages),Wt=gt.evaluate({zoom:$+1},B,{},he.availableImages);Rt=Rt&&Rt.name?Rt.name:Rt,Qt=Qt&&Qt.name?Qt.name:Qt,Wt=Wt&&Wt.name?Wt.name:Wt,me[Rt]=!0,me[Qt]=!0,me[Wt]=!0,B.patterns[$e.id]={min:Rt,mid:Qt,max:Wt}}}return B}var wp=500,_u=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(B){return B.id}),this.index=C.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new vf,this.indexArray=new xu,this.indexArray2=new gf,this.programConfigurations=new ni(Ph,C.layers,C.zoom),this.segments=new H,this.segments2=new H,this.stateDependentLayerIds=this.layers.filter(function(B){return B.isStateDependent()}).map(function(B){return B.id})};_u.prototype.populate=function(C,B,$){this.hasPattern=sh("fill",this.layers,B);for(var he=this.layers[0].layout.get("fill-sort-key"),me=[],we=0,Ie=C;we<Ie.length;we+=1){var $e=Ie[we],ut=$e.feature,gt=$e.id,Rt=$e.index,Qt=$e.sourceLayerIndex,Wt=this.layers[0]._featureFilter.needGeometry,vr={type:ut.type,id:gt,properties:ut.properties,geometry:Wt?Ni(ut):[]};if(!!this.layers[0]._featureFilter.filter(new ui(this.zoom),vr,$)){Wt||(vr.geometry=Ni(ut));var Rr=he?he.evaluate(vr,{},$,B.availableImages):void 0,an={id:gt,properties:ut.properties,type:ut.type,sourceLayerIndex:Qt,index:Rt,geometry:vr.geometry,patterns:{},sortKey:Rr};me.push(an)}}he&&me.sort(function(_a,ka){return _a.sortKey-ka.sortKey});for(var Jr=0,Mn=me;Jr<Mn.length;Jr+=1){var yn=Mn[Jr],Tn=yn,Rn=Tn.geometry,Vn=Tn.index,sa=Tn.sourceLayerIndex;if(this.hasPattern){var na=lh("fill",this.layers,yn,this.zoom,B);this.patternFeatures.push(na)}else this.addFeature(yn,Rn,Vn,$,{});var Ia=C[Vn].feature;B.featureIndex.insert(Ia,Rn,Vn,sa,this.index)}},_u.prototype.update=function(C,B,$){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,B,this.stateDependentLayers,$)},_u.prototype.addFeatures=function(C,B,$){for(var he=0,me=this.patternFeatures;he<me.length;he+=1){var we=me[he];this.addFeature(we,we.geometry,we.index,B,$)}},_u.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},_u.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},_u.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,Ph),this.indexBuffer=C.createIndexBuffer(this.indexArray),this.indexBuffer2=C.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(C),this.uploaded=!0},_u.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},_u.prototype.addFeature=function(C,B,$,he,me){for(var we=0,Ie=oh(B,wp);we<Ie.length;we+=1){for(var $e=Ie[we],ut=0,gt=0,Rt=$e;gt<Rt.length;gt+=1){var Qt=Rt[gt];ut+=Qt.length}for(var Wt=this.segments.prepareSegment(ut,this.layoutVertexArray,this.indexArray),vr=Wt.vertexLength,Rr=[],an=[],Jr=0,Mn=$e;Jr<Mn.length;Jr+=1){var yn=Mn[Jr];if(yn.length!==0){yn!==$e[0]&&an.push(Rr.length/2);var Tn=this.segments2.prepareSegment(yn.length,this.layoutVertexArray,this.indexArray2),Rn=Tn.vertexLength;this.layoutVertexArray.emplaceBack(yn[0].x,yn[0].y),this.indexArray2.emplaceBack(Rn+yn.length-1,Rn),Rr.push(yn[0].x),Rr.push(yn[0].y);for(var Vn=1;Vn<yn.length;Vn++)this.layoutVertexArray.emplaceBack(yn[Vn].x,yn[Vn].y),this.indexArray2.emplaceBack(Rn+Vn-1,Rn+Vn),Rr.push(yn[Vn].x),Rr.push(yn[Vn].y);Tn.vertexLength+=yn.length,Tn.primitiveLength+=yn.length}}for(var sa=rh(Rr,an),na=0;na<sa.length;na+=3)this.indexArray.emplaceBack(vr+sa[na],vr+sa[na+1],vr+sa[na+2]);Wt.vertexLength+=ut,Wt.primitiveLength+=sa.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,$,me,he)},ze("FillBucket",_u,{omit:["layers","patternFeatures"]});var Tp=new Xi({"fill-sort-key":new Xa(Ft.layout_fill["fill-sort-key"])}),Ap=new Xi({"fill-antialias":new za(Ft.paint_fill["fill-antialias"]),"fill-opacity":new Xa(Ft.paint_fill["fill-opacity"]),"fill-color":new Xa(Ft.paint_fill["fill-color"]),"fill-outline-color":new Xa(Ft.paint_fill["fill-outline-color"]),"fill-translate":new za(Ft.paint_fill["fill-translate"]),"fill-translate-anchor":new za(Ft.paint_fill["fill-translate-anchor"]),"fill-pattern":new xo(Ft.paint_fill["fill-pattern"])}),Mp={paint:Ap,layout:Tp},Sp=function(E){function C(B){E.call(this,B,Mp)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.recalculate=function($,he){E.prototype.recalculate.call(this,$,he);var me=this.paint._values["fill-outline-color"];me.value.kind==="constant"&&me.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},C.prototype.createBucket=function($){return new _u($)},C.prototype.queryRadius=function(){return eu(this.paint.get("fill-translate"))},C.prototype.queryIntersectsFeature=function($,he,me,we,Ie,$e,ut){var gt=Vl($,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),$e.angle,ut);return _o(gt,we)},C.prototype.isTileClipped=function(){return!0},C}(ms),kp=Do([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Bh=kp.members,Oh=zf;function zf(E,C,B,$,he){this.properties={},this.extent=B,this.type=0,this._pbf=E,this._geometry=-1,this._keys=$,this._values=he,E.readFields(Ep,this,C)}function Ep(E,C,B){E==1?C.id=B.readVarint():E==2?Cp(B,C):E==3?C.type=B.readVarint():E==4&&(C._geometry=B.pos)}function Cp(E,C){for(var B=E.readVarint()+E.pos;E.pos<B;){var $=C._keys[E.readVarint()],he=C._values[E.readVarint()];C.properties[$]=he}}zf.types=["Unknown","Point","LineString","Polygon"],zf.prototype.loadGeometry=function(){var E=this._pbf;E.pos=this._geometry;for(var C=E.readVarint()+E.pos,B=1,$=0,he=0,me=0,we=[],Ie;E.pos<C;){if($<=0){var $e=E.readVarint();B=$e&7,$=$e>>3}if($--,B===1||B===2)he+=E.readSVarint(),me+=E.readSVarint(),B===1&&(Ie&&we.push(Ie),Ie=[]),Ie.push(new f(he,me));else if(B===7)Ie&&Ie.push(Ie[0].clone());else throw new Error("unknown command "+B)}return Ie&&we.push(Ie),we},zf.prototype.bbox=function(){var E=this._pbf;E.pos=this._geometry;for(var C=E.readVarint()+E.pos,B=1,$=0,he=0,me=0,we=1/0,Ie=-1/0,$e=1/0,ut=-1/0;E.pos<C;){if($<=0){var gt=E.readVarint();B=gt&7,$=gt>>3}if($--,B===1||B===2)he+=E.readSVarint(),me+=E.readSVarint(),he<we&&(we=he),he>Ie&&(Ie=he),me<$e&&($e=me),me>ut&&(ut=me);else if(B!==7)throw new Error("unknown command "+B)}return[we,$e,Ie,ut]},zf.prototype.toGeoJSON=function(E,C,B){var $=this.extent*Math.pow(2,B),he=this.extent*E,me=this.extent*C,we=this.loadGeometry(),Ie=zf.types[this.type],$e,ut;function gt(Wt){for(var vr=0;vr<Wt.length;vr++){var Rr=Wt[vr],an=180-(Rr.y+me)*360/$;Wt[vr]=[(Rr.x+he)*360/$-180,360/Math.PI*Math.atan(Math.exp(an*Math.PI/180))-90]}}switch(this.type){case 1:var Rt=[];for($e=0;$e<we.length;$e++)Rt[$e]=we[$e][0];we=Rt,gt(we);break;case 2:for($e=0;$e<we.length;$e++)gt(we[$e]);break;case 3:for(we=Lp(we),$e=0;$e<we.length;$e++)for(ut=0;ut<we[$e].length;ut++)gt(we[$e][ut]);break}we.length===1?we=we[0]:Ie="Multi"+Ie;var Qt={type:"Feature",geometry:{type:Ie,coordinates:we},properties:this.properties};return"id"in this&&(Qt.id=this.id),Qt};function Lp(E){var C=E.length;if(C<=1)return[E];for(var B=[],$,he,me=0;me<C;me++){var we=Pp(E[me]);we!==0&&(he===void 0&&(he=we<0),he===we<0?($&&B.push($),$=[E[me]]):$.push(E[me]))}return $&&B.push($),B}function Pp(E){for(var C=0,B=0,$=E.length,he=$-1,me,we;B<$;he=B++)me=E[B],we=E[he],C+=(we.x-me.x)*(me.y+we.y);return C}var Nh=Uh;function Uh(E,C){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=E,this._keys=[],this._values=[],this._features=[],E.readFields(Dp,this,C),this.length=this._features.length}function Dp(E,C,B){E===15?C.version=B.readVarint():E===1?C.name=B.readString():E===5?C.extent=B.readVarint():E===2?C._features.push(B.pos):E===3?C._keys.push(B.readString()):E===4&&C._values.push(Rp(B))}function Rp(E){for(var C=null,B=E.readVarint()+E.pos;E.pos<B;){var $=E.readVarint()>>3;C=$===1?E.readString():$===2?E.readFloat():$===3?E.readDouble():$===4?E.readVarint64():$===5?E.readVarint():$===6?E.readSVarint():$===7?E.readBoolean():null}return C}Uh.prototype.feature=function(E){if(E<0||E>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[E];var C=this._pbf.readVarint()+this._pbf.pos;return new Oh(this._pbf,C,this.extent,this._keys,this._values)};var Ip=zp;function zp(E,C){this.layers=E.readFields(Fp,{},C)}function Fp(E,C,B){if(E===3){var $=new Nh(B,B.readVarint()+B.pos);$.length&&(C[$.name]=$)}}var Bp=Ip,Op=Oh,Np=Nh,Ff={VectorTile:Bp,VectorTileFeature:Op,VectorTileLayer:Np},Up=Ff.VectorTileFeature.types,Vp=500,uh=Math.pow(2,13);function uc(E,C,B,$,he,me,we,Ie){E.emplaceBack(C,B,Math.floor($*uh)*2+we,he*uh*2,me*uh*2,Math.round(Ie))}var wu=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(B){return B.id}),this.index=C.index,this.hasPattern=!1,this.layoutVertexArray=new qu,this.indexArray=new xu,this.programConfigurations=new ni(Bh,C.layers,C.zoom),this.segments=new H,this.stateDependentLayerIds=this.layers.filter(function(B){return B.isStateDependent()}).map(function(B){return B.id})};wu.prototype.populate=function(C,B,$){this.features=[],this.hasPattern=sh("fill-extrusion",this.layers,B);for(var he=0,me=C;he<me.length;he+=1){var we=me[he],Ie=we.feature,$e=we.id,ut=we.index,gt=we.sourceLayerIndex,Rt=this.layers[0]._featureFilter.needGeometry,Qt={type:Ie.type,id:$e,properties:Ie.properties,geometry:Rt?Ni(Ie):[]};if(!!this.layers[0]._featureFilter.filter(new ui(this.zoom),Qt,$)){var Wt={id:$e,sourceLayerIndex:gt,index:ut,geometry:Rt?Qt.geometry:Ni(Ie),properties:Ie.properties,type:Ie.type,patterns:{}};typeof Ie.id<"u"&&(Wt.id=Ie.id),this.hasPattern?this.features.push(lh("fill-extrusion",this.layers,Wt,this.zoom,B)):this.addFeature(Wt,Wt.geometry,ut,$,{}),B.featureIndex.insert(Ie,Wt.geometry,ut,gt,this.index,!0)}}},wu.prototype.addFeatures=function(C,B,$){for(var he=0,me=this.features;he<me.length;he+=1){var we=me[he],Ie=we.geometry;this.addFeature(we,Ie,we.index,B,$)}},wu.prototype.update=function(C,B,$){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,B,this.stateDependentLayers,$)},wu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},wu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},wu.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,Bh),this.indexBuffer=C.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(C),this.uploaded=!0},wu.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},wu.prototype.addFeature=function(C,B,$,he,me){for(var we=0,Ie=oh(B,Vp);we<Ie.length;we+=1){for(var $e=Ie[we],ut=0,gt=0,Rt=$e;gt<Rt.length;gt+=1){var Qt=Rt[gt];ut+=Qt.length}for(var Wt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),vr=0,Rr=$e;vr<Rr.length;vr+=1){var an=Rr[vr];if(an.length!==0&&!Gp(an))for(var Jr=0,Mn=0;Mn<an.length;Mn++){var yn=an[Mn];if(Mn>=1){var Tn=an[Mn-1];if(!Hp(yn,Tn)){Wt.vertexLength+4>H.MAX_VERTEX_ARRAY_LENGTH&&(Wt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Rn=yn.sub(Tn)._perp()._unit(),Vn=Tn.dist(yn);Jr+Vn>32768&&(Jr=0),uc(this.layoutVertexArray,yn.x,yn.y,Rn.x,Rn.y,0,0,Jr),uc(this.layoutVertexArray,yn.x,yn.y,Rn.x,Rn.y,0,1,Jr),Jr+=Vn,uc(this.layoutVertexArray,Tn.x,Tn.y,Rn.x,Rn.y,0,0,Jr),uc(this.layoutVertexArray,Tn.x,Tn.y,Rn.x,Rn.y,0,1,Jr);var sa=Wt.vertexLength;this.indexArray.emplaceBack(sa,sa+2,sa+1),this.indexArray.emplaceBack(sa+1,sa+2,sa+3),Wt.vertexLength+=4,Wt.primitiveLength+=2}}}}if(Wt.vertexLength+ut>H.MAX_VERTEX_ARRAY_LENGTH&&(Wt=this.segments.prepareSegment(ut,this.layoutVertexArray,this.indexArray)),Up[C.type]==="Polygon"){for(var na=[],Ia=[],_a=Wt.vertexLength,ka=0,ei=$e;ka<ei.length;ka+=1){var Pa=ei[ka];if(Pa.length!==0){Pa!==$e[0]&&Ia.push(na.length/2);for(var Ra=0;Ra<Pa.length;Ra++){var ci=Pa[Ra];uc(this.layoutVertexArray,ci.x,ci.y,0,0,1,1,0),na.push(ci.x),na.push(ci.y)}}}for(var Qa=rh(na,Ia),ki=0;ki<Qa.length;ki+=3)this.indexArray.emplaceBack(_a+Qa[ki],_a+Qa[ki+2],_a+Qa[ki+1]);Wt.primitiveLength+=Qa.length/3,Wt.vertexLength+=ut}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,$,me,he)},ze("FillExtrusionBucket",wu,{omit:["layers","features"]});function Hp(E,C){return E.x===C.x&&(E.x<0||E.x>Na)||E.y===C.y&&(E.y<0||E.y>Na)}function Gp(E){return E.every(function(C){return C.x<0})||E.every(function(C){return C.x>Na})||E.every(function(C){return C.y<0})||E.every(function(C){return C.y>Na})}var Yp=new Xi({"fill-extrusion-opacity":new za(Ft["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Xa(Ft["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new za(Ft["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new za(Ft["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new xo(Ft["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Xa(Ft["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Xa(Ft["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new za(Ft["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])}),Wp={paint:Yp},Xp=function(E){function C(B){E.call(this,B,Wp)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.createBucket=function($){return new wu($)},C.prototype.queryRadius=function(){return eu(this.paint.get("fill-extrusion-translate"))},C.prototype.is3D=function(){return!0},C.prototype.queryIntersectsFeature=function($,he,me,we,Ie,$e,ut,gt){var Rt=Vl($,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),$e.angle,ut),Qt=this.paint.get("fill-extrusion-height").evaluate(he,me),Wt=this.paint.get("fill-extrusion-base").evaluate(he,me),vr=Kp(Rt,gt,$e,0),Rr=jp(we,Wt,Qt,gt),an=Rr[0],Jr=Rr[1];return Zp(an,Jr,vr)},C}(ms);function fc(E,C){return E.x*C.x+E.y*C.y}function Vh(E,C){if(E.length===1){for(var B=0,$=C[B++],he;!he||$.equals(he);)if(he=C[B++],!he)return 1/0;for(;B<C.length;B++){var me=C[B],we=E[0],Ie=he.sub($),$e=me.sub($),ut=we.sub($),gt=fc(Ie,Ie),Rt=fc(Ie,$e),Qt=fc($e,$e),Wt=fc(ut,Ie),vr=fc(ut,$e),Rr=gt*Qt-Rt*Rt,an=(Qt*Wt-Rt*vr)/Rr,Jr=(gt*vr-Rt*Wt)/Rr,Mn=1-an-Jr,yn=$.z*Mn+he.z*an+me.z*Jr;if(isFinite(yn))return yn}return 1/0}else{for(var Tn=1/0,Rn=0,Vn=C;Rn<Vn.length;Rn+=1){var sa=Vn[Rn];Tn=Math.min(Tn,sa.z)}return Tn}}function Zp(E,C,B){var $=1/0;_o(B,C)&&($=Vh(B,C[0]));for(var he=0;he<C.length;he++)for(var me=C[he],we=E[he],Ie=0;Ie<me.length-1;Ie++){var $e=me[Ie],ut=me[Ie+1],gt=we[Ie],Rt=we[Ie+1],Qt=[$e,ut,Rt,gt,$e];ii(B,Qt)&&($=Math.min($,Vh(B,Qt)))}return $===1/0?!1:$}function jp(E,C,B,$){for(var he=[],me=[],we=$[8]*C,Ie=$[9]*C,$e=$[10]*C,ut=$[11]*C,gt=$[8]*B,Rt=$[9]*B,Qt=$[10]*B,Wt=$[11]*B,vr=0,Rr=E;vr<Rr.length;vr+=1){for(var an=Rr[vr],Jr=[],Mn=[],yn=0,Tn=an;yn<Tn.length;yn+=1){var Rn=Tn[yn],Vn=Rn.x,sa=Rn.y,na=$[0]*Vn+$[4]*sa+$[12],Ia=$[1]*Vn+$[5]*sa+$[13],_a=$[2]*Vn+$[6]*sa+$[14],ka=$[3]*Vn+$[7]*sa+$[15],ei=na+we,Pa=Ia+Ie,Ra=_a+$e,ci=ka+ut,Qa=na+gt,ki=Ia+Rt,Wi=_a+Qt,Ei=ka+Wt,Ci=new f(ei/ci,Pa/ci);Ci.z=Ra/ci,Jr.push(Ci);var Ti=new f(Qa/Ei,ki/Ei);Ti.z=Wi/Ei,Mn.push(Ti)}he.push(Jr),me.push(Mn)}return[he,me]}function Kp(E,C,B,$){for(var he=[],me=0,we=E;me<we.length;me+=1){var Ie=we[me],$e=[Ie.x,Ie.y,$,1];Sc($e,$e,C),he.push(new f($e[0]/$e[3],$e[1]/$e[3]))}return he}var Jp=Do([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),Hh=Jp.members,Qp=Ff.VectorTileFeature.types,Gh=63,$p=Math.cos(75/2*(Math.PI/180)),qp=15,ed=20,td=15,Yh=1/2,Wh=Math.pow(2,td-1)/Yh,el=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(B){return B.id}),this.index=C.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Mf,this.indexArray=new xu,this.programConfigurations=new ni(Hh,C.layers,C.zoom),this.segments=new H,this.stateDependentLayerIds=this.layers.filter(function(B){return B.isStateDependent()}).map(function(B){return B.id})};el.prototype.populate=function(C,B,$){this.hasPattern=sh("line",this.layers,B);for(var he=this.layers[0].layout.get("line-sort-key"),me=[],we=0,Ie=C;we<Ie.length;we+=1){var $e=Ie[we],ut=$e.feature,gt=$e.id,Rt=$e.index,Qt=$e.sourceLayerIndex,Wt=this.layers[0]._featureFilter.needGeometry,vr={type:ut.type,id:gt,properties:ut.properties,geometry:Wt?Ni(ut):[]};if(!!this.layers[0]._featureFilter.filter(new ui(this.zoom),vr,$)){Wt||(vr.geometry=Ni(ut));var Rr=he?he.evaluate(vr,{},$):void 0,an={id:gt,properties:ut.properties,type:ut.type,sourceLayerIndex:Qt,index:Rt,geometry:vr.geometry,patterns:{},sortKey:Rr};me.push(an)}}he&&me.sort(function(_a,ka){return _a.sortKey-ka.sortKey});for(var Jr=0,Mn=me;Jr<Mn.length;Jr+=1){var yn=Mn[Jr],Tn=yn,Rn=Tn.geometry,Vn=Tn.index,sa=Tn.sourceLayerIndex;if(this.hasPattern){var na=lh("line",this.layers,yn,this.zoom,B);this.patternFeatures.push(na)}else this.addFeature(yn,Rn,Vn,$,{});var Ia=C[Vn].feature;B.featureIndex.insert(Ia,Rn,Vn,sa,this.index)}},el.prototype.update=function(C,B,$){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,B,this.stateDependentLayers,$)},el.prototype.addFeatures=function(C,B,$){for(var he=0,me=this.patternFeatures;he<me.length;he+=1){var we=me[he];this.addFeature(we,we.geometry,we.index,B,$)}},el.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},el.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},el.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,Hh),this.indexBuffer=C.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(C),this.uploaded=!0},el.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},el.prototype.addFeature=function(C,B,$,he,me){for(var we=this.layers[0].layout,Ie=we.get("line-join").evaluate(C,{}),$e=we.get("line-cap"),ut=we.get("line-miter-limit"),gt=we.get("line-round-limit"),Rt=0,Qt=B;Rt<Qt.length;Rt+=1){var Wt=Qt[Rt];this.addLine(Wt,C,Ie,$e,ut,gt)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,$,me,he)},el.prototype.addLine=function(C,B,$,he,me,we){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,!!B.properties&&B.properties.hasOwnProperty("mapbox_clip_start")&&B.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+B.properties.mapbox_clip_start,this.clipEnd=+B.properties.mapbox_clip_end;for(var Ie=0;Ie<C.length-1;Ie++)this.totalDistance+=C[Ie].dist(C[Ie+1]);this.updateScaledDistance()}for(var $e=Qp[B.type]==="Polygon",ut=C.length;ut>=2&&C[ut-1].equals(C[ut-2]);)ut--;for(var gt=0;gt<ut-1&&C[gt].equals(C[gt+1]);)gt++;if(!(ut<($e?3:2))){$==="bevel"&&(me=1.05);var Rt=this.overscaling<=16?qp*Na/(512*this.overscaling):0,Qt=this.segments.prepareSegment(ut*10,this.layoutVertexArray,this.indexArray),Wt,vr=void 0,Rr=void 0,an=void 0,Jr=void 0;this.e1=this.e2=-1,$e&&(Wt=C[ut-2],Jr=C[gt].sub(Wt)._unit()._perp());for(var Mn=gt;Mn<ut;Mn++)if(Rr=Mn===ut-1?$e?C[gt+1]:void 0:C[Mn+1],!(Rr&&C[Mn].equals(Rr))){Jr&&(an=Jr),Wt&&(vr=Wt),Wt=C[Mn],Jr=Rr?Rr.sub(Wt)._unit()._perp():an,an=an||Jr;var yn=an.add(Jr);(yn.x!==0||yn.y!==0)&&yn._unit();var Tn=an.x*Jr.x+an.y*Jr.y,Rn=yn.x*Jr.x+yn.y*Jr.y,Vn=Rn!==0?1/Rn:1/0,sa=2*Math.sqrt(2-2*Rn),na=Rn<$p&&vr&&Rr,Ia=an.x*Jr.y-an.y*Jr.x>0;if(na&&Mn>gt){var _a=Wt.dist(vr);if(_a>2*Rt){var ka=Wt.sub(Wt.sub(vr)._mult(Rt/_a)._round());this.updateDistance(vr,ka),this.addCurrentVertex(ka,an,0,0,Qt),vr=ka}}var ei=vr&&Rr,Pa=ei?$:$e?"butt":he;if(ei&&Pa==="round"&&(Vn<we?Pa="miter":Vn<=2&&(Pa="fakeround")),Pa==="miter"&&Vn>me&&(Pa="bevel"),Pa==="bevel"&&(Vn>2&&(Pa="flipbevel"),Vn<me&&(Pa="miter")),vr&&this.updateDistance(vr,Wt),Pa==="miter")yn._mult(Vn),this.addCurrentVertex(Wt,yn,0,0,Qt);else if(Pa==="flipbevel"){if(Vn>100)yn=Jr.mult(-1);else{var Ra=Vn*an.add(Jr).mag()/an.sub(Jr).mag();yn._perp()._mult(Ra*(Ia?-1:1))}this.addCurrentVertex(Wt,yn,0,0,Qt),this.addCurrentVertex(Wt,yn.mult(-1),0,0,Qt)}else if(Pa==="bevel"||Pa==="fakeround"){var ci=-Math.sqrt(Vn*Vn-1),Qa=Ia?ci:0,ki=Ia?0:ci;if(vr&&this.addCurrentVertex(Wt,an,Qa,ki,Qt),Pa==="fakeround")for(var Wi=Math.round(sa*180/Math.PI/ed),Ei=1;Ei<Wi;Ei++){var Ci=Ei/Wi;if(Ci!==.5){var Ti=Ci-.5,$i=1.0904+Tn*(-3.2452+Tn*(3.55645-Tn*1.43519)),ro=.848013+Tn*(-1.06021+Tn*.215638);Ci=Ci+Ci*Ti*(Ci-1)*($i*Ti*Ti+ro)}var wo=Jr.sub(an)._mult(Ci)._add(an)._unit()._mult(Ia?-1:1);this.addHalfVertex(Wt,wo.x,wo.y,!1,Ia,0,Qt)}Rr&&this.addCurrentVertex(Wt,Jr,-Qa,-ki,Qt)}else if(Pa==="butt")this.addCurrentVertex(Wt,yn,0,0,Qt);else if(Pa==="square"){var Co=vr?1:-1;this.addCurrentVertex(Wt,yn,Co,Co,Qt)}else Pa==="round"&&(vr&&(this.addCurrentVertex(Wt,an,0,0,Qt),this.addCurrentVertex(Wt,an,1,1,Qt,!0)),Rr&&(this.addCurrentVertex(Wt,Jr,-1,-1,Qt,!0),this.addCurrentVertex(Wt,Jr,0,0,Qt)));if(na&&Mn<ut-1){var $o=Wt.dist(Rr);if($o>2*Rt){var Vo=Wt.add(Rr.sub(Wt)._mult(Rt/$o)._round());this.updateDistance(Wt,Vo),this.addCurrentVertex(Vo,Jr,0,0,Qt),Wt=Vo}}}}},el.prototype.addCurrentVertex=function(C,B,$,he,me,we){we===void 0&&(we=!1);var Ie=B.x+B.y*$,$e=B.y-B.x*$,ut=-B.x+B.y*he,gt=-B.y-B.x*he;this.addHalfVertex(C,Ie,$e,we,!1,$,me),this.addHalfVertex(C,ut,gt,we,!0,-he,me),this.distance>Wh/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(C,B,$,he,me,we))},el.prototype.addHalfVertex=function(C,B,$,he,me,we,Ie){var $e=C.x,ut=C.y,gt=this.scaledDistance*Yh;this.layoutVertexArray.emplaceBack(($e<<1)+(he?1:0),(ut<<1)+(me?1:0),Math.round(Gh*B)+128,Math.round(Gh*$)+128,(we===0?0:we<0?-1:1)+1|(gt&63)<<2,gt>>6);var Rt=Ie.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Rt),Ie.primitiveLength++),me?this.e2=Rt:this.e1=Rt},el.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(Wh-1):this.distance},el.prototype.updateDistance=function(C,B){this.distance+=C.dist(B),this.updateScaledDistance()},ze("LineBucket",el,{omit:["layers","patternFeatures"]});var rd=new Xi({"line-cap":new za(Ft.layout_line["line-cap"]),"line-join":new Xa(Ft.layout_line["line-join"]),"line-miter-limit":new za(Ft.layout_line["line-miter-limit"]),"line-round-limit":new za(Ft.layout_line["line-round-limit"]),"line-sort-key":new Xa(Ft.layout_line["line-sort-key"])}),nd=new Xi({"line-opacity":new Xa(Ft.paint_line["line-opacity"]),"line-color":new Xa(Ft.paint_line["line-color"]),"line-translate":new za(Ft.paint_line["line-translate"]),"line-translate-anchor":new za(Ft.paint_line["line-translate-anchor"]),"line-width":new Xa(Ft.paint_line["line-width"]),"line-gap-width":new Xa(Ft.paint_line["line-gap-width"]),"line-offset":new Xa(Ft.paint_line["line-offset"]),"line-blur":new Xa(Ft.paint_line["line-blur"]),"line-dasharray":new eo(Ft.paint_line["line-dasharray"]),"line-pattern":new xo(Ft.paint_line["line-pattern"]),"line-gradient":new Po(Ft.paint_line["line-gradient"])}),Xh={paint:nd,layout:rd},ad=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.possiblyEvaluate=function($,he){return he=new ui(Math.floor(he.zoom),{now:he.now,fadeDuration:he.fadeDuration,zoomHistory:he.zoomHistory,transition:he.transition}),E.prototype.possiblyEvaluate.call(this,$,he)},C.prototype.evaluate=function($,he,me,we){return he=A({},he,{zoom:Math.floor(he.zoom)}),E.prototype.evaluate.call(this,$,he,me,we)},C}(Xa),Zh=new ad(Xh.paint.properties["line-width"].specification);Zh.useIntegerZoom=!0;var id=function(E){function C(B){E.call(this,B,Xh)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._handleSpecialPaintPropertyUpdate=function($){$==="line-gradient"&&this._updateGradient()},C.prototype._updateGradient=function(){var $=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=Lh($,"lineProgress"),this.gradientTexture=null},C.prototype.recalculate=function($,he){E.prototype.recalculate.call(this,$,he),this.paint._values["line-floorwidth"]=Zh.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,$)},C.prototype.createBucket=function($){return new el($)},C.prototype.queryRadius=function($){var he=$,me=jh(ul("line-width",this,he),ul("line-gap-width",this,he)),we=ul("line-offset",this,he);return me/2+Math.abs(we)+eu(this.paint.get("line-translate"))},C.prototype.queryIntersectsFeature=function($,he,me,we,Ie,$e,ut){var gt=Vl($,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),$e.angle,ut),Rt=ut/2*jh(this.paint.get("line-width").evaluate(he,me),this.paint.get("line-gap-width").evaluate(he,me)),Qt=this.paint.get("line-offset").evaluate(he,me);return Qt&&(we=od(we,Qt*ut)),Bo(gt,we,Rt)},C.prototype.isTileClipped=function(){return!0},C}(ms);function jh(E,C){return C>0?C+2*E:E}function od(E,C){for(var B=[],$=new f(0,0),he=0;he<E.length;he++){for(var me=E[he],we=[],Ie=0;Ie<me.length;Ie++){var $e=me[Ie-1],ut=me[Ie],gt=me[Ie+1],Rt=Ie===0?$:ut.sub($e)._unit()._perp(),Qt=Ie===me.length-1?$:gt.sub(ut)._unit()._perp(),Wt=Rt._add(Qt)._unit(),vr=Wt.x*Qt.x+Wt.y*Qt.y;Wt._mult(1/vr),we.push(Wt._mult(C)._add(ut))}B.push(we)}return B}var fh=Do([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),sd=Do([{name:"a_projected_pos",components:3,type:"Float32"}],4);Do([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var ld=Do([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Do([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);var Kh=Do([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),ud=Do([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Do([{name:"triangle",components:3,type:"Uint16"}]),Do([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Do([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Do([{type:"Float32",name:"offsetX"}]),Do([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);function fd(E,C,B){var $=C.layout.get("text-transform").evaluate(B,{});return $==="uppercase"?E=E.toLocaleUpperCase():$==="lowercase"&&(E=E.toLocaleLowerCase()),Wa.applyArabicShaping&&(E=Wa.applyArabicShaping(E)),E}function cd(E,C,B){return E.sections.forEach(function($){$.text=fd($.text,C,B)}),E}function hd(E){var C={},B={},$=[],he=0;function me(Jr){$.push(E[Jr]),he++}function we(Jr,Mn,yn){var Tn=B[Jr];return delete B[Jr],B[Mn]=Tn,$[Tn].geometry[0].pop(),$[Tn].geometry[0]=$[Tn].geometry[0].concat(yn[0]),Tn}function Ie(Jr,Mn,yn){var Tn=C[Mn];return delete C[Mn],C[Jr]=Tn,$[Tn].geometry[0].shift(),$[Tn].geometry[0]=yn[0].concat($[Tn].geometry[0]),Tn}function $e(Jr,Mn,yn){var Tn=yn?Mn[0][Mn[0].length-1]:Mn[0][0];return Jr+":"+Tn.x+":"+Tn.y}for(var ut=0;ut<E.length;ut++){var gt=E[ut],Rt=gt.geometry,Qt=gt.text?gt.text.toString():null;if(!Qt){me(ut);continue}var Wt=$e(Qt,Rt),vr=$e(Qt,Rt,!0);if(Wt in B&&vr in C&&B[Wt]!==C[vr]){var Rr=Ie(Wt,vr,Rt),an=we(Wt,vr,$[Rr].geometry);delete C[Wt],delete B[vr],B[$e(Qt,$[an].geometry,!0)]=an,$[Rr].geometry=null}else Wt in B?we(Wt,vr,Rt):vr in C?Ie(Wt,vr,Rt):(me(ut),C[Wt]=he-1,B[vr]=he-1)}return $.filter(function(Jr){return Jr.geometry})}var cc={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};function vd(E){for(var C="",B=0;B<E.length;B++){var $=E.charCodeAt(B+1)||null,he=E.charCodeAt(B-1)||null,me=(!$||!nn($)||cc[E[B+1]])&&(!he||!nn(he)||cc[E[B-1]]);me&&cc[E[B]]?C+=cc[E[B]]:C+=E[B]}return C}var cs=24,pd=function(E,C,B,$,he){var me,we,Ie=he*8-$-1,$e=(1<<Ie)-1,ut=$e>>1,gt=-7,Rt=B?he-1:0,Qt=B?-1:1,Wt=E[C+Rt];for(Rt+=Qt,me=Wt&(1<<-gt)-1,Wt>>=-gt,gt+=Ie;gt>0;me=me*256+E[C+Rt],Rt+=Qt,gt-=8);for(we=me&(1<<-gt)-1,me>>=-gt,gt+=$;gt>0;we=we*256+E[C+Rt],Rt+=Qt,gt-=8);if(me===0)me=1-ut;else{if(me===$e)return we?NaN:(Wt?-1:1)*(1/0);we=we+Math.pow(2,$),me=me-ut}return(Wt?-1:1)*we*Math.pow(2,me-$)},dd=function(E,C,B,$,he,me){var we,Ie,$e,ut=me*8-he-1,gt=(1<<ut)-1,Rt=gt>>1,Qt=he===23?Math.pow(2,-24)-Math.pow(2,-77):0,Wt=$?0:me-1,vr=$?1:-1,Rr=C<0||C===0&&1/C<0?1:0;for(C=Math.abs(C),isNaN(C)||C===1/0?(Ie=isNaN(C)?1:0,we=gt):(we=Math.floor(Math.log(C)/Math.LN2),C*($e=Math.pow(2,-we))<1&&(we--,$e*=2),we+Rt>=1?C+=Qt/$e:C+=Qt*Math.pow(2,1-Rt),C*$e>=2&&(we++,$e/=2),we+Rt>=gt?(Ie=0,we=gt):we+Rt>=1?(Ie=(C*$e-1)*Math.pow(2,he),we=we+Rt):(Ie=C*Math.pow(2,Rt-1)*Math.pow(2,he),we=0));he>=8;E[B+Wt]=Ie&255,Wt+=vr,Ie/=256,he-=8);for(we=we<<he|Ie,ut+=he;ut>0;E[B+Wt]=we&255,Wt+=vr,we/=256,ut-=8);E[B+Wt-vr]|=Rr*128},Pc={read:pd,write:dd},Dc=to;function to(E){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(E)?E:new Uint8Array(E||0),this.pos=0,this.type=0,this.length=this.buf.length}to.Varint=0,to.Fixed64=1,to.Bytes=2,to.Fixed32=5;var ch=(1<<16)*(1<<16),Jh=1/ch,gd=12,Qh=typeof TextDecoder>"u"?null:new TextDecoder("utf8");to.prototype={destroy:function(){this.buf=null},readFields:function(E,C,B){for(B=B||this.length;this.pos<B;){var $=this.readVarint(),he=$>>3,me=this.pos;this.type=$&7,E(he,C,this),this.pos===me&&this.skip($)}return C},readMessage:function(E,C){return this.readFields(E,C,this.readVarint()+this.pos)},readFixed32:function(){var E=Rc(this.buf,this.pos);return this.pos+=4,E},readSFixed32:function(){var E=qh(this.buf,this.pos);return this.pos+=4,E},readFixed64:function(){var E=Rc(this.buf,this.pos)+Rc(this.buf,this.pos+4)*ch;return this.pos+=8,E},readSFixed64:function(){var E=Rc(this.buf,this.pos)+qh(this.buf,this.pos+4)*ch;return this.pos+=8,E},readFloat:function(){var E=Pc.read(this.buf,this.pos,!0,23,4);return this.pos+=4,E},readDouble:function(){var E=Pc.read(this.buf,this.pos,!0,52,8);return this.pos+=8,E},readVarint:function(E){var C=this.buf,B,$;return $=C[this.pos++],B=$&127,$<128||($=C[this.pos++],B|=($&127)<<7,$<128)||($=C[this.pos++],B|=($&127)<<14,$<128)||($=C[this.pos++],B|=($&127)<<21,$<128)?B:($=C[this.pos],B|=($&15)<<28,yd(B,E,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var E=this.readVarint();return E%2===1?(E+1)/-2:E/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var E=this.readVarint()+this.pos,C=this.pos;return this.pos=E,E-C>=gd&&Qh?Pd(this.buf,C,E):Ld(this.buf,C,E)},readBytes:function(){var E=this.readVarint()+this.pos,C=this.buf.subarray(this.pos,E);return this.pos=E,C},readPackedVarint:function(E,C){if(this.type!==to.Bytes)return E.push(this.readVarint(C));var B=Zu(this);for(E=E||[];this.pos<B;)E.push(this.readVarint(C));return E},readPackedSVarint:function(E){if(this.type!==to.Bytes)return E.push(this.readSVarint());var C=Zu(this);for(E=E||[];this.pos<C;)E.push(this.readSVarint());return E},readPackedBoolean:function(E){if(this.type!==to.Bytes)return E.push(this.readBoolean());var C=Zu(this);for(E=E||[];this.pos<C;)E.push(this.readBoolean());return E},readPackedFloat:function(E){if(this.type!==to.Bytes)return E.push(this.readFloat());var C=Zu(this);for(E=E||[];this.pos<C;)E.push(this.readFloat());return E},readPackedDouble:function(E){if(this.type!==to.Bytes)return E.push(this.readDouble());var C=Zu(this);for(E=E||[];this.pos<C;)E.push(this.readDouble());return E},readPackedFixed32:function(E){if(this.type!==to.Bytes)return E.push(this.readFixed32());var C=Zu(this);for(E=E||[];this.pos<C;)E.push(this.readFixed32());return E},readPackedSFixed32:function(E){if(this.type!==to.Bytes)return E.push(this.readSFixed32());var C=Zu(this);for(E=E||[];this.pos<C;)E.push(this.readSFixed32());return E},readPackedFixed64:function(E){if(this.type!==to.Bytes)return E.push(this.readFixed64());var C=Zu(this);for(E=E||[];this.pos<C;)E.push(this.readFixed64());return E},readPackedSFixed64:function(E){if(this.type!==to.Bytes)return E.push(this.readSFixed64());var C=Zu(this);for(E=E||[];this.pos<C;)E.push(this.readSFixed64());return E},skip:function(E){var C=E&7;if(C===to.Varint)for(;this.buf[this.pos++]>127;);else if(C===to.Bytes)this.pos=this.readVarint()+this.pos;else if(C===to.Fixed32)this.pos+=4;else if(C===to.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+C)},writeTag:function(E,C){this.writeVarint(E<<3|C)},realloc:function(E){for(var C=this.length||16;C<this.pos+E;)C*=2;if(C!==this.length){var B=new Uint8Array(C);B.set(this.buf),this.buf=B,this.length=C}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(E){this.realloc(4),Of(this.buf,E,this.pos),this.pos+=4},writeSFixed32:function(E){this.realloc(4),Of(this.buf,E,this.pos),this.pos+=4},writeFixed64:function(E){this.realloc(8),Of(this.buf,E&-1,this.pos),Of(this.buf,Math.floor(E*Jh),this.pos+4),this.pos+=8},writeSFixed64:function(E){this.realloc(8),Of(this.buf,E&-1,this.pos),Of(this.buf,Math.floor(E*Jh),this.pos+4),this.pos+=8},writeVarint:function(E){if(E=+E||0,E>268435455||E<0){md(E,this);return}this.realloc(4),this.buf[this.pos++]=E&127|(E>127?128:0),!(E<=127)&&(this.buf[this.pos++]=(E>>>=7)&127|(E>127?128:0),!(E<=127)&&(this.buf[this.pos++]=(E>>>=7)&127|(E>127?128:0),!(E<=127)&&(this.buf[this.pos++]=E>>>7&127)))},writeSVarint:function(E){this.writeVarint(E<0?-E*2-1:E*2)},writeBoolean:function(E){this.writeVarint(Boolean(E))},writeString:function(E){E=String(E),this.realloc(E.length*4),this.pos++;var C=this.pos;this.pos=Dd(this.buf,E,this.pos);var B=this.pos-C;B>=128&&$h(C,B,this),this.pos=C-1,this.writeVarint(B),this.pos+=B},writeFloat:function(E){this.realloc(4),Pc.write(this.buf,E,this.pos,!0,23,4),this.pos+=4},writeDouble:function(E){this.realloc(8),Pc.write(this.buf,E,this.pos,!0,52,8),this.pos+=8},writeBytes:function(E){var C=E.length;this.writeVarint(C),this.realloc(C);for(var B=0;B<C;B++)this.buf[this.pos++]=E[B]},writeRawMessage:function(E,C){this.pos++;var B=this.pos;E(C,this);var $=this.pos-B;$>=128&&$h(B,$,this),this.pos=B-1,this.writeVarint($),this.pos+=$},writeMessage:function(E,C,B){this.writeTag(E,to.Bytes),this.writeRawMessage(C,B)},writePackedVarint:function(E,C){C.length&&this.writeMessage(E,_d,C)},writePackedSVarint:function(E,C){C.length&&this.writeMessage(E,wd,C)},writePackedBoolean:function(E,C){C.length&&this.writeMessage(E,Md,C)},writePackedFloat:function(E,C){C.length&&this.writeMessage(E,Td,C)},writePackedDouble:function(E,C){C.length&&this.writeMessage(E,Ad,C)},writePackedFixed32:function(E,C){C.length&&this.writeMessage(E,Sd,C)},writePackedSFixed32:function(E,C){C.length&&this.writeMessage(E,kd,C)},writePackedFixed64:function(E,C){C.length&&this.writeMessage(E,Ed,C)},writePackedSFixed64:function(E,C){C.length&&this.writeMessage(E,Cd,C)},writeBytesField:function(E,C){this.writeTag(E,to.Bytes),this.writeBytes(C)},writeFixed32Field:function(E,C){this.writeTag(E,to.Fixed32),this.writeFixed32(C)},writeSFixed32Field:function(E,C){this.writeTag(E,to.Fixed32),this.writeSFixed32(C)},writeFixed64Field:function(E,C){this.writeTag(E,to.Fixed64),this.writeFixed64(C)},writeSFixed64Field:function(E,C){this.writeTag(E,to.Fixed64),this.writeSFixed64(C)},writeVarintField:function(E,C){this.writeTag(E,to.Varint),this.writeVarint(C)},writeSVarintField:function(E,C){this.writeTag(E,to.Varint),this.writeSVarint(C)},writeStringField:function(E,C){this.writeTag(E,to.Bytes),this.writeString(C)},writeFloatField:function(E,C){this.writeTag(E,to.Fixed32),this.writeFloat(C)},writeDoubleField:function(E,C){this.writeTag(E,to.Fixed64),this.writeDouble(C)},writeBooleanField:function(E,C){this.writeVarintField(E,Boolean(C))}};function yd(E,C,B){var $=B.buf,he,me;if(me=$[B.pos++],he=(me&112)>>4,me<128||(me=$[B.pos++],he|=(me&127)<<3,me<128)||(me=$[B.pos++],he|=(me&127)<<10,me<128)||(me=$[B.pos++],he|=(me&127)<<17,me<128)||(me=$[B.pos++],he|=(me&127)<<24,me<128)||(me=$[B.pos++],he|=(me&1)<<31,me<128))return Bf(E,he,C);throw new Error("Expected varint not more than 10 bytes")}function Zu(E){return E.type===to.Bytes?E.readVarint()+E.pos:E.pos+1}function Bf(E,C,B){return B?C*4294967296+(E>>>0):(C>>>0)*4294967296+(E>>>0)}function md(E,C){var B,$;if(E>=0?(B=E%4294967296|0,$=E/4294967296|0):(B=~(-E%4294967296),$=~(-E/4294967296),B^4294967295?B=B+1|0:(B=0,$=$+1|0)),E>=18446744073709552e3||E<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");C.realloc(10),xd(B,$,C),bd($,C)}function xd(E,C,B){B.buf[B.pos++]=E&127|128,E>>>=7,B.buf[B.pos++]=E&127|128,E>>>=7,B.buf[B.pos++]=E&127|128,E>>>=7,B.buf[B.pos++]=E&127|128,E>>>=7,B.buf[B.pos]=E&127}function bd(E,C){var B=(E&7)<<4;C.buf[C.pos++]|=B|((E>>>=3)?128:0),E&&(C.buf[C.pos++]=E&127|((E>>>=7)?128:0),E&&(C.buf[C.pos++]=E&127|((E>>>=7)?128:0),E&&(C.buf[C.pos++]=E&127|((E>>>=7)?128:0),E&&(C.buf[C.pos++]=E&127|((E>>>=7)?128:0),E&&(C.buf[C.pos++]=E&127)))))}function $h(E,C,B){var $=C<=16383?1:C<=2097151?2:C<=268435455?3:Math.floor(Math.log(C)/(Math.LN2*7));B.realloc($);for(var he=B.pos-1;he>=E;he--)B.buf[he+$]=B.buf[he]}function _d(E,C){for(var B=0;B<E.length;B++)C.writeVarint(E[B])}function wd(E,C){for(var B=0;B<E.length;B++)C.writeSVarint(E[B])}function Td(E,C){for(var B=0;B<E.length;B++)C.writeFloat(E[B])}function Ad(E,C){for(var B=0;B<E.length;B++)C.writeDouble(E[B])}function Md(E,C){for(var B=0;B<E.length;B++)C.writeBoolean(E[B])}function Sd(E,C){for(var B=0;B<E.length;B++)C.writeFixed32(E[B])}function kd(E,C){for(var B=0;B<E.length;B++)C.writeSFixed32(E[B])}function Ed(E,C){for(var B=0;B<E.length;B++)C.writeFixed64(E[B])}function Cd(E,C){for(var B=0;B<E.length;B++)C.writeSFixed64(E[B])}function Rc(E,C){return(E[C]|E[C+1]<<8|E[C+2]<<16)+E[C+3]*16777216}function Of(E,C,B){E[B]=C,E[B+1]=C>>>8,E[B+2]=C>>>16,E[B+3]=C>>>24}function qh(E,C){return(E[C]|E[C+1]<<8|E[C+2]<<16)+(E[C+3]<<24)}function Ld(E,C,B){for(var $="",he=C;he<B;){var me=E[he],we=null,Ie=me>239?4:me>223?3:me>191?2:1;if(he+Ie>B)break;var $e,ut,gt;Ie===1?me<128&&(we=me):Ie===2?($e=E[he+1],($e&192)===128&&(we=(me&31)<<6|$e&63,we<=127&&(we=null))):Ie===3?($e=E[he+1],ut=E[he+2],($e&192)===128&&(ut&192)===128&&(we=(me&15)<<12|($e&63)<<6|ut&63,(we<=2047||we>=55296&&we<=57343)&&(we=null))):Ie===4&&($e=E[he+1],ut=E[he+2],gt=E[he+3],($e&192)===128&&(ut&192)===128&&(gt&192)===128&&(we=(me&15)<<18|($e&63)<<12|(ut&63)<<6|gt&63,(we<=65535||we>=1114112)&&(we=null))),we===null?(we=65533,Ie=1):we>65535&&(we-=65536,$+=String.fromCharCode(we>>>10&1023|55296),we=56320|we&1023),$+=String.fromCharCode(we),he+=Ie}return $}function Pd(E,C,B){return Qh.decode(E.subarray(C,B))}function Dd(E,C,B){for(var $=0,he,me;$<C.length;$++){if(he=C.charCodeAt($),he>55295&&he<57344)if(me)if(he<56320){E[B++]=239,E[B++]=191,E[B++]=189,me=he;continue}else he=me-55296<<10|he-56320|65536,me=null;else{he>56319||$+1===C.length?(E[B++]=239,E[B++]=191,E[B++]=189):me=he;continue}else me&&(E[B++]=239,E[B++]=191,E[B++]=189,me=null);he<128?E[B++]=he:(he<2048?E[B++]=he>>6|192:(he<65536?E[B++]=he>>12|224:(E[B++]=he>>18|240,E[B++]=he>>12&63|128),E[B++]=he>>6&63|128),E[B++]=he&63|128)}return B}var hh=3;function Rd(E,C,B){E===1&&B.readMessage(Id,C)}function Id(E,C,B){if(E===3){var $=B.readMessage(zd,{}),he=$.id,me=$.bitmap,we=$.width,Ie=$.height,$e=$.left,ut=$.top,gt=$.advance;C.push({id:he,bitmap:new bf({width:we+2*hh,height:Ie+2*hh},me),metrics:{width:we,height:Ie,left:$e,top:ut,advance:gt}})}}function zd(E,C,B){E===1?C.id=B.readVarint():E===2?C.bitmap=B.readBytes():E===3?C.width=B.readVarint():E===4?C.height=B.readVarint():E===5?C.left=B.readSVarint():E===6?C.top=B.readSVarint():E===7&&(C.advance=B.readVarint())}function Fd(E){return new Dc(E).readFields(Rd,[])}var ev=hh;function tv(E){for(var C=0,B=0,$=0,he=E;$<he.length;$+=1){var me=he[$];C+=me.w*me.h,B=Math.max(B,me.w)}E.sort(function(an,Jr){return Jr.h-an.h});for(var we=Math.max(Math.ceil(Math.sqrt(C/.95)),B),Ie=[{x:0,y:0,w:we,h:1/0}],$e=0,ut=0,gt=0,Rt=E;gt<Rt.length;gt+=1)for(var Qt=Rt[gt],Wt=Ie.length-1;Wt>=0;Wt--){var vr=Ie[Wt];if(!(Qt.w>vr.w||Qt.h>vr.h)){if(Qt.x=vr.x,Qt.y=vr.y,ut=Math.max(ut,Qt.y+Qt.h),$e=Math.max($e,Qt.x+Qt.w),Qt.w===vr.w&&Qt.h===vr.h){var Rr=Ie.pop();Wt<Ie.length&&(Ie[Wt]=Rr)}else Qt.h===vr.h?(vr.x+=Qt.w,vr.w-=Qt.w):Qt.w===vr.w?(vr.y+=Qt.h,vr.h-=Qt.h):(Ie.push({x:vr.x+Qt.w,y:vr.y,w:vr.w-Qt.w,h:Qt.h}),vr.y+=Qt.h,vr.h-=Qt.h);break}}return{w:$e,h:ut,fill:C/($e*ut)||0}}var fl=1,Ic=function(C,B){var $=B.pixelRatio,he=B.version,me=B.stretchX,we=B.stretchY,Ie=B.content;this.paddedRect=C,this.pixelRatio=$,this.stretchX=me,this.stretchY=we,this.content=Ie,this.version=he},hc={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};hc.tl.get=function(){return[this.paddedRect.x+fl,this.paddedRect.y+fl]},hc.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-fl,this.paddedRect.y+this.paddedRect.h-fl]},hc.tlbr.get=function(){return this.tl.concat(this.br)},hc.displaySize.get=function(){return[(this.paddedRect.w-fl*2)/this.pixelRatio,(this.paddedRect.h-fl*2)/this.pixelRatio]},Object.defineProperties(Ic.prototype,hc);var vc=function(C,B){var $={},he={};this.haveRenderCallbacks=[];var me=[];this.addImages(C,$,me),this.addImages(B,he,me);var we=tv(me),Ie=we.w,$e=we.h,ut=new qs({width:Ie||1,height:$e||1});for(var gt in C){var Rt=C[gt],Qt=$[gt].paddedRect;qs.copy(Rt.data,ut,{x:0,y:0},{x:Qt.x+fl,y:Qt.y+fl},Rt.data)}for(var Wt in B){var vr=B[Wt],Rr=he[Wt].paddedRect,an=Rr.x+fl,Jr=Rr.y+fl,Mn=vr.data.width,yn=vr.data.height;qs.copy(vr.data,ut,{x:0,y:0},{x:an,y:Jr},vr.data),qs.copy(vr.data,ut,{x:0,y:yn-1},{x:an,y:Jr-1},{width:Mn,height:1}),qs.copy(vr.data,ut,{x:0,y:0},{x:an,y:Jr+yn},{width:Mn,height:1}),qs.copy(vr.data,ut,{x:Mn-1,y:0},{x:an-1,y:Jr},{width:1,height:yn}),qs.copy(vr.data,ut,{x:0,y:0},{x:an+Mn,y:Jr},{width:1,height:yn})}this.image=ut,this.iconPositions=$,this.patternPositions=he};vc.prototype.addImages=function(C,B,$){for(var he in C){var me=C[he],we={x:0,y:0,w:me.data.width+2*fl,h:me.data.height+2*fl};$.push(we),B[he]=new Ic(we,me),me.hasRenderCallback&&this.haveRenderCallbacks.push(he)}},vc.prototype.patchUpdatedImages=function(C,B){C.dispatchRenderCallbacks(this.haveRenderCallbacks);for(var $ in C.updatedImages)this.patchUpdatedImage(this.iconPositions[$],C.getImage($),B),this.patchUpdatedImage(this.patternPositions[$],C.getImage($),B)},vc.prototype.patchUpdatedImage=function(C,B,$){if(!(!C||!B)&&C.version!==B.version){C.version=B.version;var he=C.tl,me=he[0],we=he[1];$.update(B.data,void 0,{x:me,y:we})}},ze("ImagePosition",Ic),ze("ImageAtlas",vc);var Sl={horizontal:1,vertical:2,horizontalOnly:3},pc=-17;function Bd(E){for(var C=0,B=E;C<B.length;C+=1){var $=B[C];if($.positionedGlyphs.length!==0)return!1}return!0}var rv=57344,nv=63743,Nf=function(){this.scale=1,this.fontStack="",this.imageName=null};Nf.forText=function(C,B){var $=new Nf;return $.scale=C||1,$.fontStack=B,$},Nf.forImage=function(C){var B=new Nf;return B.imageName=C,B};var Es=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};Es.fromFeature=function(C,B){for(var $=new Es,he=0;he<C.sections.length;he++){var me=C.sections[he];me.image?$.addImageSection(me):$.addTextSection(me,B)}return $},Es.prototype.length=function(){return this.text.length},Es.prototype.getSection=function(C){return this.sections[this.sectionIndex[C]]},Es.prototype.getSectionIndex=function(C){return this.sectionIndex[C]},Es.prototype.getCharCode=function(C){return this.text.charCodeAt(C)},Es.prototype.verticalizePunctuation=function(){this.text=vd(this.text)},Es.prototype.trim=function(){for(var C=0,B=0;B<this.text.length&&Hu[this.text.charCodeAt(B)];B++)C++;for(var $=this.text.length,he=this.text.length-1;he>=0&&he>=C&&Hu[this.text.charCodeAt(he)];he--)$--;this.text=this.text.substring(C,$),this.sectionIndex=this.sectionIndex.slice(C,$)},Es.prototype.substring=function(C,B){var $=new Es;return $.text=this.text.substring(C,B),$.sectionIndex=this.sectionIndex.slice(C,B),$.sections=this.sections,$},Es.prototype.toString=function(){return this.text},Es.prototype.getMaxScale=function(){var C=this;return this.sectionIndex.reduce(function(B,$){return Math.max(B,C.sections[$].scale)},0)},Es.prototype.addTextSection=function(C,B){this.text+=C.text,this.sections.push(Nf.forText(C.scale,C.fontStack||B));for(var $=this.sections.length-1,he=0;he<C.text.length;++he)this.sectionIndex.push($)},Es.prototype.addImageSection=function(C){var B=C.image?C.image.name:"";if(B.length===0){O("Can't add FormattedSection with an empty image.");return}var $=this.getNextImageSectionCharCode();if(!$){O("Reached maximum number of images "+(nv-rv+2));return}this.text+=String.fromCharCode($),this.sections.push(Nf.forImage(B)),this.sectionIndex.push(this.sections.length-1)},Es.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=nv?null:++this.imageSectionID:(this.imageSectionID=rv,this.imageSectionID)};function Od(E,C){for(var B=[],$=E.text,he=0,me=0,we=C;me<we.length;me+=1){var Ie=we[me];B.push(E.substring(he,Ie)),he=Ie}return he<$.length&&B.push(E.substring(he,$.length)),B}function zc(E,C,B,$,he,me,we,Ie,$e,ut,gt,Rt,Qt,Wt,vr,Rr){var an=Es.fromFeature(E,he);Rt===Sl.vertical&&an.verticalizePunctuation();var Jr,Mn=Wa.processBidirectionalText,yn=Wa.processStyledBidirectionalText;if(Mn&&an.sections.length===1){Jr=[];for(var Tn=Mn(an.toString(),vh(an,ut,me,C,$,Wt,vr)),Rn=0,Vn=Tn;Rn<Vn.length;Rn+=1){var sa=Vn[Rn],na=new Es;na.text=sa,na.sections=an.sections;for(var Ia=0;Ia<sa.length;Ia++)na.sectionIndex.push(0);Jr.push(na)}}else if(yn){Jr=[];for(var _a=yn(an.text,an.sectionIndex,vh(an,ut,me,C,$,Wt,vr)),ka=0,ei=_a;ka<ei.length;ka+=1){var Pa=ei[ka],Ra=new Es;Ra.text=Pa[0],Ra.sectionIndex=Pa[1],Ra.sections=an.sections,Jr.push(Ra)}}else Jr=Od(an,vh(an,ut,me,C,$,Wt,vr));var ci=[],Qa={positionedLines:ci,text:an.toString(),top:gt[1],bottom:gt[1],left:gt[0],right:gt[0],writingMode:Rt,iconsInText:!1,verticalizable:!1};return Vd(Qa,C,B,$,Jr,we,Ie,$e,Rt,ut,Qt,Rr),Bd(ci)?!1:Qa}var Hu={};Hu[9]=!0,Hu[10]=!0,Hu[11]=!0,Hu[12]=!0,Hu[13]=!0,Hu[32]=!0;var cl={};cl[10]=!0,cl[32]=!0,cl[38]=!0,cl[40]=!0,cl[41]=!0,cl[43]=!0,cl[45]=!0,cl[47]=!0,cl[173]=!0,cl[183]=!0,cl[8203]=!0,cl[8208]=!0,cl[8211]=!0,cl[8231]=!0;function av(E,C,B,$,he,me){if(C.imageName){var $e=$[C.imageName];return $e?$e.displaySize[0]*C.scale*cs/me+he:0}else{var we=B[C.fontStack],Ie=we&&we[E];return Ie?Ie.metrics.advance*C.scale+he:0}}function Nd(E,C,B,$,he,me){for(var we=0,Ie=0;Ie<E.length();Ie++){var $e=E.getSection(Ie);we+=av(E.getCharCode(Ie),$e,$,he,C,me)}var ut=Math.max(1,Math.ceil(we/B));return we/ut}function iv(E,C,B,$){var he=Math.pow(E-C,2);return $?E<C?he/2:he*2:he+Math.abs(B)*B}function Ud(E,C,B){var $=0;return E===10&&($-=1e4),B&&($+=150),(E===40||E===65288)&&($+=50),(C===41||C===65289)&&($+=50),$}function ov(E,C,B,$,he,me){for(var we=null,Ie=iv(C,B,he,me),$e=0,ut=$;$e<ut.length;$e+=1){var gt=ut[$e],Rt=C-gt.x,Qt=iv(Rt,B,he,me)+gt.badness;Qt<=Ie&&(we=gt,Ie=Qt)}return{index:E,x:C,priorBreak:we,badness:Ie}}function sv(E){return E?sv(E.priorBreak).concat(E.index):[]}function vh(E,C,B,$,he,me,we){if(me!=="point")return[];if(!E)return[];for(var Ie=[],$e=Nd(E,C,B,$,he,we),ut=E.text.indexOf("\u200B")>=0,gt=0,Rt=0;Rt<E.length();Rt++){var Qt=E.getSection(Rt),Wt=E.getCharCode(Rt);if(Hu[Wt]||(gt+=av(Wt,Qt,$,he,C,we)),Rt<E.length()-1){var vr=kr(Wt);(cl[Wt]||vr||Qt.imageName)&&Ie.push(ov(Rt+1,gt,$e,Ie,Ud(Wt,E.getCharCode(Rt+1),vr&&ut),!1))}}return sv(ov(E.length(),gt,$e,Ie,0,!0))}function ph(E){var C=.5,B=.5;switch(E){case"right":case"top-right":case"bottom-right":C=1;break;case"left":case"top-left":case"bottom-left":C=0;break}switch(E){case"bottom":case"bottom-right":case"bottom-left":B=1;break;case"top":case"top-right":case"top-left":B=0;break}return{horizontalAlign:C,verticalAlign:B}}function Vd(E,C,B,$,he,me,we,Ie,$e,ut,gt,Rt){for(var Qt=0,Wt=pc,vr=0,Rr=0,an=Ie==="right"?1:Ie==="left"?0:.5,Jr=0,Mn=0,yn=he;Mn<yn.length;Mn+=1){var Tn=yn[Mn];Tn.trim();var Rn=Tn.getMaxScale(),Vn=(Rn-1)*cs,sa={positionedGlyphs:[],lineOffset:0};E.positionedLines[Jr]=sa;var na=sa.positionedGlyphs,Ia=0;if(!Tn.length()){Wt+=me,++Jr;continue}for(var _a=0;_a<Tn.length();_a++){var ka=Tn.getSection(_a),ei=Tn.getSectionIndex(_a),Pa=Tn.getCharCode(_a),Ra=0,ci=null,Qa=null,ki=null,Wi=cs,Ei=!($e===Sl.horizontal||!gt&&!zr(Pa)||gt&&(Hu[Pa]||on(Pa)));if(ka.imageName){var wo=$[ka.imageName];if(!wo)continue;ki=ka.imageName,E.iconsInText=E.iconsInText||!0,Qa=wo.paddedRect;var Co=wo.displaySize;ka.scale=ka.scale*cs/Rt,ci={width:Co[0],height:Co[1],left:fl,top:-ev,advance:Ei?Co[1]:Co[0]};var $o=cs-Co[1]*ka.scale;Ra=Vn+$o,Wi=ci.advance;var Vo=Ei?Co[0]*ka.scale-cs*Rn:Co[1]*ka.scale-cs*Rn;Vo>0&&Vo>Ia&&(Ia=Vo)}else{var Ci=B[ka.fontStack],Ti=Ci&&Ci[Pa];if(Ti&&Ti.rect)Qa=Ti.rect,ci=Ti.metrics;else{var $i=C[ka.fontStack],ro=$i&&$i[Pa];if(!ro)continue;ci=ro.metrics}Ra=(Rn-ka.scale)*cs}Ei?(E.verticalizable=!0,na.push({glyph:Pa,imageName:ki,x:Qt,y:Wt+Ra,vertical:Ei,scale:ka.scale,fontStack:ka.fontStack,sectionIndex:ei,metrics:ci,rect:Qa}),Qt+=Wi*ka.scale+ut):(na.push({glyph:Pa,imageName:ki,x:Qt,y:Wt+Ra,vertical:Ei,scale:ka.scale,fontStack:ka.fontStack,sectionIndex:ei,metrics:ci,rect:Qa}),Qt+=ci.advance*ka.scale+ut)}if(na.length!==0){var Cs=Qt-ut;vr=Math.max(Cs,vr),Hd(na,0,na.length-1,an,Ia)}Qt=0;var Ls=me*Rn+Ia;sa.lineOffset=Math.max(Ia,Vn),Wt+=Ls,Rr=Math.max(Ls,Rr),++Jr}var qo=Wt-pc,Os=ph(we),Ns=Os.horizontalAlign,Xo=Os.verticalAlign;Gd(E.positionedLines,an,Ns,Xo,vr,Rr,me,qo,he.length),E.top+=-Xo*qo,E.bottom=E.top+qo,E.left+=-Ns*vr,E.right=E.left+vr}function Hd(E,C,B,$,he){if(!(!$&&!he))for(var me=E[B],we=me.metrics.advance*me.scale,Ie=(E[B].x+we)*$,$e=C;$e<=B;$e++)E[$e].x-=Ie,E[$e].y+=he}function Gd(E,C,B,$,he,me,we,Ie,$e){var ut=(C-B)*he,gt=0;me!==we?gt=-Ie*$-pc:gt=(-$*$e+.5)*we;for(var Rt=0,Qt=E;Rt<Qt.length;Rt+=1)for(var Wt=Qt[Rt],vr=0,Rr=Wt.positionedGlyphs;vr<Rr.length;vr+=1){var an=Rr[vr];an.x+=ut,an.y+=gt}}function Yd(E,C,B){var $=ph(B),he=$.horizontalAlign,me=$.verticalAlign,we=C[0],Ie=C[1],$e=we-E.displaySize[0]*he,ut=$e+E.displaySize[0],gt=Ie-E.displaySize[1]*me,Rt=gt+E.displaySize[1];return{image:E,top:gt,bottom:Rt,left:$e,right:ut}}function lv(E,C,B,$,he,me){var we=E.image,Ie;if(we.content){var $e=we.content,ut=we.pixelRatio||1;Ie=[$e[0]/ut,$e[1]/ut,we.displaySize[0]-$e[2]/ut,we.displaySize[1]-$e[3]/ut]}var gt=C.left*me,Rt=C.right*me,Qt,Wt,vr,Rr;B==="width"||B==="both"?(Rr=he[0]+gt-$[3],Wt=he[0]+Rt+$[1]):(Rr=he[0]+(gt+Rt-we.displaySize[0])/2,Wt=Rr+we.displaySize[0]);var an=C.top*me,Jr=C.bottom*me;return B==="height"||B==="both"?(Qt=he[1]+an-$[0],vr=he[1]+Jr+$[2]):(Qt=he[1]+(an+Jr-we.displaySize[1])/2,vr=Qt+we.displaySize[1]),{image:we,top:Qt,right:Wt,bottom:vr,left:Rr,collisionPadding:Ie}}var Uf=function(E){function C(B,$,he,me){E.call(this,B,$),this.angle=he,me!==void 0&&(this.segment=me)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.clone=function(){return new C(this.x,this.y,this.angle,this.segment)},C}(f);ze("Anchor",Uf);var Tu=128;function dh(E,C){var B=C.expression;if(B.kind==="constant"){var $=B.evaluate(new ui(E+1));return{kind:"constant",layoutSize:$}}else{if(B.kind==="source")return{kind:"source"};for(var he=B.zoomStops,me=B.interpolationType,we=0;we<he.length&&he[we]<=E;)we++;we=Math.max(0,we-1);for(var Ie=we;Ie<he.length&&he[Ie]<E+1;)Ie++;Ie=Math.min(he.length-1,Ie);var $e=he[we],ut=he[Ie];if(B.kind==="composite")return{kind:"composite",minZoom:$e,maxZoom:ut,interpolationType:me};var gt=B.evaluate(new ui($e)),Rt=B.evaluate(new ui(ut));return{kind:"camera",minZoom:$e,maxZoom:ut,minSize:gt,maxSize:Rt,interpolationType:me}}}function uv(E,C,B){var $=C.uSize,he=C.uSizeT,me=B.lowerSize,we=B.upperSize;return E.kind==="source"?me/Tu:E.kind==="composite"?oo(me/Tu,we/Tu,he):$}function fv(E,C){var B=0,$=0;if(E.kind==="constant")$=E.layoutSize;else if(E.kind!=="source"){var he=E.interpolationType,me=E.minZoom,we=E.maxZoom,Ie=he?c(so.interpolationFactor(he,C,me,we),0,1):0;E.kind==="camera"?$=oo(E.minSize,E.maxSize,Ie):B=Ie}return{uSizeT:B,uSize:$}}var Wd=Object.freeze({__proto__:null,getSizeData:dh,evaluateSizeForFeature:uv,evaluateSizeForZoom:fv,SIZE_PACK_FACTOR:Tu});function cv(E,C,B,$,he){if(C.segment===void 0)return!0;for(var me=C,we=C.segment+1,Ie=0;Ie>-B/2;){if(we--,we<0)return!1;Ie-=E[we].dist(me),me=E[we]}Ie+=E[we].dist(E[we+1]),we++;for(var $e=[],ut=0;Ie<B/2;){var gt=E[we-1],Rt=E[we],Qt=E[we+1];if(!Qt)return!1;var Wt=gt.angleTo(Rt)-Rt.angleTo(Qt);for(Wt=Math.abs((Wt+3*Math.PI)%(Math.PI*2)-Math.PI),$e.push({distance:Ie,angleDelta:Wt}),ut+=Wt;Ie-$e[0].distance>$;)ut-=$e.shift().angleDelta;if(ut>he)return!1;we++,Ie+=Rt.dist(Qt)}return!0}function hv(E){for(var C=0,B=0;B<E.length-1;B++)C+=E[B].dist(E[B+1]);return C}function vv(E,C,B){return E?3/5*C*B:0}function pv(E,C){return Math.max(E?E.right-E.left:0,C?C.right-C.left:0)}function Xd(E,C,B,$,he,me){for(var we=vv(B,he,me),Ie=pv(B,$)*me,$e=0,ut=hv(E)/2,gt=0;gt<E.length-1;gt++){var Rt=E[gt],Qt=E[gt+1],Wt=Rt.dist(Qt);if($e+Wt>ut){var vr=(ut-$e)/Wt,Rr=oo(Rt.x,Qt.x,vr),an=oo(Rt.y,Qt.y,vr),Jr=new Uf(Rr,an,Qt.angleTo(Rt),gt);return Jr._round(),!we||cv(E,Jr,Ie,we,C)?Jr:void 0}$e+=Wt}}function Zd(E,C,B,$,he,me,we,Ie,$e){var ut=vv($,me,we),gt=pv($,he),Rt=gt*we,Qt=E[0].x===0||E[0].x===$e||E[0].y===0||E[0].y===$e;C-Rt<C/4&&(C=Rt+C/4);var Wt=me*2,vr=Qt?C/2*Ie%C:(gt/2+Wt)*we*Ie%C;return dv(E,vr,C,ut,B,Rt,Qt,!1,$e)}function dv(E,C,B,$,he,me,we,Ie,$e){for(var ut=me/2,gt=hv(E),Rt=0,Qt=C-B,Wt=[],vr=0;vr<E.length-1;vr++){for(var Rr=E[vr],an=E[vr+1],Jr=Rr.dist(an),Mn=an.angleTo(Rr);Qt+B<Rt+Jr;){Qt+=B;var yn=(Qt-Rt)/Jr,Tn=oo(Rr.x,an.x,yn),Rn=oo(Rr.y,an.y,yn);if(Tn>=0&&Tn<$e&&Rn>=0&&Rn<$e&&Qt-ut>=0&&Qt+ut<=gt){var Vn=new Uf(Tn,Rn,Mn,vr);Vn._round(),(!$||cv(E,Vn,me,$,he))&&Wt.push(Vn)}}Rt+=Jr}return!Ie&&!Wt.length&&!we&&(Wt=dv(E,Rt/2,B,$,he,me,we,!0,$e)),Wt}function gv(E,C,B,$,he){for(var me=[],we=0;we<E.length;we++)for(var Ie=E[we],$e=void 0,ut=0;ut<Ie.length-1;ut++){var gt=Ie[ut],Rt=Ie[ut+1];gt.x<C&&Rt.x<C||(gt.x<C?gt=new f(C,gt.y+(Rt.y-gt.y)*((C-gt.x)/(Rt.x-gt.x)))._round():Rt.x<C&&(Rt=new f(C,gt.y+(Rt.y-gt.y)*((C-gt.x)/(Rt.x-gt.x)))._round()),!(gt.y<B&&Rt.y<B)&&(gt.y<B?gt=new f(gt.x+(Rt.x-gt.x)*((B-gt.y)/(Rt.y-gt.y)),B)._round():Rt.y<B&&(Rt=new f(gt.x+(Rt.x-gt.x)*((B-gt.y)/(Rt.y-gt.y)),B)._round()),!(gt.x>=$&&Rt.x>=$)&&(gt.x>=$?gt=new f($,gt.y+(Rt.y-gt.y)*(($-gt.x)/(Rt.x-gt.x)))._round():Rt.x>=$&&(Rt=new f($,gt.y+(Rt.y-gt.y)*(($-gt.x)/(Rt.x-gt.x)))._round()),!(gt.y>=he&&Rt.y>=he)&&(gt.y>=he?gt=new f(gt.x+(Rt.x-gt.x)*((he-gt.y)/(Rt.y-gt.y)),he)._round():Rt.y>=he&&(Rt=new f(gt.x+(Rt.x-gt.x)*((he-gt.y)/(Rt.y-gt.y)),he)._round()),(!$e||!gt.equals($e[$e.length-1]))&&($e=[gt],me.push($e)),$e.push(Rt)))))}return me}var Vf=fl;function yv(E,C,B,$){var he=[],me=E.image,we=me.pixelRatio,Ie=me.paddedRect.w-2*Vf,$e=me.paddedRect.h-2*Vf,ut=E.right-E.left,gt=E.bottom-E.top,Rt=me.stretchX||[[0,Ie]],Qt=me.stretchY||[[0,$e]],Wt=function(Ci,Ti){return Ci+Ti[1]-Ti[0]},vr=Rt.reduce(Wt,0),Rr=Qt.reduce(Wt,0),an=Ie-vr,Jr=$e-Rr,Mn=0,yn=vr,Tn=0,Rn=Rr,Vn=0,sa=an,na=0,Ia=Jr;if(me.content&&$){var _a=me.content;Mn=Fc(Rt,0,_a[0]),Tn=Fc(Qt,0,_a[1]),yn=Fc(Rt,_a[0],_a[2]),Rn=Fc(Qt,_a[1],_a[3]),Vn=_a[0]-Mn,na=_a[1]-Tn,sa=_a[2]-_a[0]-yn,Ia=_a[3]-_a[1]-Rn}var ka=function(Ci,Ti,$i,ro){var wo=Bc(Ci.stretch-Mn,yn,ut,E.left),Co=Oc(Ci.fixed-Vn,sa,Ci.stretch,vr),$o=Bc(Ti.stretch-Tn,Rn,gt,E.top),Vo=Oc(Ti.fixed-na,Ia,Ti.stretch,Rr),Cs=Bc($i.stretch-Mn,yn,ut,E.left),Ls=Oc($i.fixed-Vn,sa,$i.stretch,vr),qo=Bc(ro.stretch-Tn,Rn,gt,E.top),Os=Oc(ro.fixed-na,Ia,ro.stretch,Rr),Ns=new f(wo,$o),Xo=new f(Cs,$o),Us=new f(Cs,qo),kl=new f(wo,qo),Ju=new f(Co/we,Vo/we),uf=new f(Ls/we,Os/we),ff=C*Math.PI/180;if(ff){var cf=Math.sin(ff),Kf=Math.cos(ff),ru=[Kf,-cf,cf,Kf];Ns._matMult(ru),Xo._matMult(ru),kl._matMult(ru),Us._matMult(ru)}var Yc=Ci.stretch+Ci.fixed,Th=$i.stretch+$i.fixed,Wc=Ti.stretch+Ti.fixed,Ah=ro.stretch+ro.fixed,Hl={x:me.paddedRect.x+Vf+Yc,y:me.paddedRect.y+Vf+Wc,w:Th-Yc,h:Ah-Wc},Jf=sa/we/ut,Xc=Ia/we/gt;return{tl:Ns,tr:Xo,bl:kl,br:Us,tex:Hl,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ju,pixelOffsetBR:uf,minFontScaleX:Jf,minFontScaleY:Xc,isSDF:B}};if(!$||!me.stretchX&&!me.stretchY)he.push(ka({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Ie+1},{fixed:0,stretch:$e+1}));else for(var ei=mv(Rt,an,vr),Pa=mv(Qt,Jr,Rr),Ra=0;Ra<ei.length-1;Ra++)for(var ci=ei[Ra],Qa=ei[Ra+1],ki=0;ki<Pa.length-1;ki++){var Wi=Pa[ki],Ei=Pa[ki+1];he.push(ka(ci,Wi,Qa,Ei))}return he}function Fc(E,C,B){for(var $=0,he=0,me=E;he<me.length;he+=1){var we=me[he];$+=Math.max(C,Math.min(B,we[1]))-Math.max(C,Math.min(B,we[0]))}return $}function mv(E,C,B){for(var $=[{fixed:-Vf,stretch:0}],he=0,me=E;he<me.length;he+=1){var we=me[he],Ie=we[0],$e=we[1],ut=$[$.length-1];$.push({fixed:Ie-ut.stretch,stretch:ut.stretch}),$.push({fixed:Ie-ut.stretch,stretch:ut.stretch+($e-Ie)})}return $.push({fixed:C+Vf,stretch:B}),$}function Bc(E,C,B,$){return E/C*B+$}function Oc(E,C,B,$){return E-C*B/$}function jd(E,C,B,$,he,me,we,Ie){for(var $e=$.layout.get("text-rotate").evaluate(me,{})*Math.PI/180,ut=[],gt=0,Rt=C.positionedLines;gt<Rt.length;gt+=1)for(var Qt=Rt[gt],Wt=0,vr=Qt.positionedGlyphs;Wt<vr.length;Wt+=1){var Rr=vr[Wt];if(!!Rr.rect){var an=Rr.rect||{},Jr=1,Mn=ev+Jr,yn=!0,Tn=1,Rn=0,Vn=(he||Ie)&&Rr.vertical,sa=Rr.metrics.advance*Rr.scale/2;if(Ie&&C.verticalizable){var na=(Rr.scale-1)*cs,Ia=(cs-Rr.metrics.width*Rr.scale)/2;Rn=Qt.lineOffset/2-(Rr.imageName?-Ia:na)}if(Rr.imageName){var _a=we[Rr.imageName];yn=_a.sdf,Tn=_a.pixelRatio,Mn=fl/Tn}var ka=he?[Rr.x+sa,Rr.y]:[0,0],ei=he?[0,0]:[Rr.x+sa+B[0],Rr.y+B[1]-Rn],Pa=[0,0];Vn&&(Pa=ei,ei=[0,0]);var Ra=(Rr.metrics.left-Mn)*Rr.scale-sa+ei[0],ci=(-Rr.metrics.top-Mn)*Rr.scale+ei[1],Qa=Ra+an.w*Rr.scale/Tn,ki=ci+an.h*Rr.scale/Tn,Wi=new f(Ra,ci),Ei=new f(Qa,ci),Ci=new f(Ra,ki),Ti=new f(Qa,ki);if(Vn){var $i=new f(-sa,sa-pc),ro=-Math.PI/2,wo=cs/2-sa,Co=Rr.imageName?wo:0,$o=new f(5-pc-wo,-Co),Vo=new(Function.prototype.bind.apply(f,[null].concat(Pa)));Wi._rotateAround(ro,$i)._add($o)._add(Vo),Ei._rotateAround(ro,$i)._add($o)._add(Vo),Ci._rotateAround(ro,$i)._add($o)._add(Vo),Ti._rotateAround(ro,$i)._add($o)._add(Vo)}if($e){var Cs=Math.sin($e),Ls=Math.cos($e),qo=[Ls,-Cs,Cs,Ls];Wi._matMult(qo),Ei._matMult(qo),Ci._matMult(qo),Ti._matMult(qo)}var Os=new f(0,0),Ns=new f(0,0),Xo=0,Us=0;ut.push({tl:Wi,tr:Ei,bl:Ci,br:Ti,tex:an,writingMode:C.writingMode,glyphOffset:ka,sectionIndex:Rr.sectionIndex,isSDF:yn,pixelOffsetTL:Os,pixelOffsetBR:Ns,minFontScaleX:Xo,minFontScaleY:Us})}}return ut}var Nc=function(C,B,$,he,me,we,Ie,$e,ut,gt){if(this.boxStartIndex=C.length,ut){var Rt=we.top,Qt=we.bottom,Wt=we.collisionPadding;Wt&&(Rt-=Wt[1],Qt+=Wt[3]);var vr=Qt-Rt;vr>0&&(vr=Math.max(10,vr),this.circleDiameter=vr)}else{var Rr=we.top*Ie-$e,an=we.bottom*Ie+$e,Jr=we.left*Ie-$e,Mn=we.right*Ie+$e,yn=we.collisionPadding;if(yn&&(Jr-=yn[0]*Ie,Rr-=yn[1]*Ie,Mn+=yn[2]*Ie,an+=yn[3]*Ie),gt){var Tn=new f(Jr,Rr),Rn=new f(Mn,Rr),Vn=new f(Jr,an),sa=new f(Mn,an),na=gt*Math.PI/180;Tn._rotate(na),Rn._rotate(na),Vn._rotate(na),sa._rotate(na),Jr=Math.min(Tn.x,Rn.x,Vn.x,sa.x),Mn=Math.max(Tn.x,Rn.x,Vn.x,sa.x),Rr=Math.min(Tn.y,Rn.y,Vn.y,sa.y),an=Math.max(Tn.y,Rn.y,Vn.y,sa.y)}C.emplaceBack(B.x,B.y,Jr,Rr,Mn,an,$,he,me)}this.boxEndIndex=C.length},Hf=function(C,B){if(C===void 0&&(C=[]),B===void 0&&(B=Kd),this.data=C,this.length=this.data.length,this.compare=B,this.length>0)for(var $=(this.length>>1)-1;$>=0;$--)this._down($)};Hf.prototype.push=function(C){this.data.push(C),this.length++,this._up(this.length-1)},Hf.prototype.pop=function(){if(this.length!==0){var C=this.data[0],B=this.data.pop();return this.length--,this.length>0&&(this.data[0]=B,this._down(0)),C}},Hf.prototype.peek=function(){return this.data[0]},Hf.prototype._up=function(C){for(var B=this,$=B.data,he=B.compare,me=$[C];C>0;){var we=C-1>>1,Ie=$[we];if(he(me,Ie)>=0)break;$[C]=Ie,C=we}$[C]=me},Hf.prototype._down=function(C){for(var B=this,$=B.data,he=B.compare,me=this.length>>1,we=$[C];C<me;){var Ie=(C<<1)+1,$e=$[Ie],ut=Ie+1;if(ut<this.length&&he($[ut],$e)<0&&(Ie=ut,$e=$[ut]),he($e,we)>=0)break;$[C]=$e,C=Ie}$[C]=we};function Kd(E,C){return E<C?-1:E>C?1:0}function Jd(E,C,B){C===void 0&&(C=1),B===void 0&&(B=!1);for(var $=1/0,he=1/0,me=-1/0,we=-1/0,Ie=E[0],$e=0;$e<Ie.length;$e++){var ut=Ie[$e];(!$e||ut.x<$)&&($=ut.x),(!$e||ut.y<he)&&(he=ut.y),(!$e||ut.x>me)&&(me=ut.x),(!$e||ut.y>we)&&(we=ut.y)}var gt=me-$,Rt=we-he,Qt=Math.min(gt,Rt),Wt=Qt/2,vr=new Hf([],Qd);if(Qt===0)return new f($,he);for(var Rr=$;Rr<me;Rr+=Qt)for(var an=he;an<we;an+=Qt)vr.push(new Gf(Rr+Wt,an+Wt,Wt,E));for(var Jr=qd(E),Mn=vr.length;vr.length;){var yn=vr.pop();(yn.d>Jr.d||!Jr.d)&&(Jr=yn,B&&console.log("found best %d after %d probes",Math.round(1e4*yn.d)/1e4,Mn)),!(yn.max-Jr.d<=C)&&(Wt=yn.h/2,vr.push(new Gf(yn.p.x-Wt,yn.p.y-Wt,Wt,E)),vr.push(new Gf(yn.p.x+Wt,yn.p.y-Wt,Wt,E)),vr.push(new Gf(yn.p.x-Wt,yn.p.y+Wt,Wt,E)),vr.push(new Gf(yn.p.x+Wt,yn.p.y+Wt,Wt,E)),Mn+=4)}return B&&(console.log("num probes: "+Mn),console.log("best distance: "+Jr.d)),Jr.p}function Qd(E,C){return C.max-E.max}function Gf(E,C,B,$){this.p=new f(E,C),this.h=B,this.d=$d(this.p,$),this.max=this.d+this.h*Math.SQRT2}function $d(E,C){for(var B=!1,$=1/0,he=0;he<C.length;he++)for(var me=C[he],we=0,Ie=me.length,$e=Ie-1;we<Ie;$e=we++){var ut=me[we],gt=me[$e];ut.y>E.y!=gt.y>E.y&&E.x<(gt.x-ut.x)*(E.y-ut.y)/(gt.y-ut.y)+ut.x&&(B=!B),$=Math.min($,bu(E,ut,gt))}return(B?1:-1)*Math.sqrt($)}function qd(E){for(var C=0,B=0,$=0,he=E[0],me=0,we=he.length,Ie=we-1;me<we;Ie=me++){var $e=he[me],ut=he[Ie],gt=$e.x*ut.y-ut.x*$e.y;B+=($e.x+ut.x)*gt,$+=($e.y+ut.y)*gt,C+=gt*3}return new Gf(B/C,$/C,0,E)}var Yf=7,gh=Number.POSITIVE_INFINITY;function xv(E,C){function B(he,me){var we=0,Ie=0;me<0&&(me=0);var $e=me/Math.sqrt(2);switch(he){case"top-right":case"top-left":Ie=$e-Yf;break;case"bottom-right":case"bottom-left":Ie=-$e+Yf;break;case"bottom":Ie=-me+Yf;break;case"top":Ie=me-Yf;break}switch(he){case"top-right":case"bottom-right":we=-$e;break;case"top-left":case"bottom-left":we=$e;break;case"left":we=me;break;case"right":we=-me;break}return[we,Ie]}function $(he,me,we){var Ie=0,$e=0;switch(me=Math.abs(me),we=Math.abs(we),he){case"top-right":case"top-left":case"top":$e=we-Yf;break;case"bottom-right":case"bottom-left":case"bottom":$e=-we+Yf;break}switch(he){case"top-right":case"bottom-right":case"right":Ie=-me;break;case"top-left":case"bottom-left":case"left":Ie=me;break}return[Ie,$e]}return C[1]!==gh?$(E,C[0],C[1]):B(E,C[0])}function e0(E,C,B,$,he,me,we){E.createArrays();var Ie=512*E.overscaling;E.tilePixelRatio=Na/Ie,E.compareText={},E.iconsNeedLinear=!1;var $e=E.layers[0].layout,ut=E.layers[0]._unevaluatedLayout._values,gt={};if(E.textSizeData.kind==="composite"){var Rt=E.textSizeData,Qt=Rt.minZoom,Wt=Rt.maxZoom;gt.compositeTextSizes=[ut["text-size"].possiblyEvaluate(new ui(Qt),we),ut["text-size"].possiblyEvaluate(new ui(Wt),we)]}if(E.iconSizeData.kind==="composite"){var vr=E.iconSizeData,Rr=vr.minZoom,an=vr.maxZoom;gt.compositeIconSizes=[ut["icon-size"].possiblyEvaluate(new ui(Rr),we),ut["icon-size"].possiblyEvaluate(new ui(an),we)]}gt.layoutTextSize=ut["text-size"].possiblyEvaluate(new ui(E.zoom+1),we),gt.layoutIconSize=ut["icon-size"].possiblyEvaluate(new ui(E.zoom+1),we),gt.textMaxSize=ut["text-size"].possiblyEvaluate(new ui(18));for(var Jr=$e.get("text-line-height")*cs,Mn=$e.get("text-rotation-alignment")==="map"&&$e.get("symbol-placement")!=="point",yn=$e.get("text-keep-upright"),Tn=$e.get("text-size"),Rn=function(){var na=sa[Vn],Ia=$e.get("text-font").evaluate(na,{},we).join(","),_a=Tn.evaluate(na,{},we),ka=gt.layoutTextSize.evaluate(na,{},we),ei=gt.layoutIconSize.evaluate(na,{},we),Pa={horizontal:{},vertical:void 0},Ra=na.text,ci=[0,0];if(Ra){var Qa=Ra.toString(),ki=$e.get("text-letter-spacing").evaluate(na,{},we)*cs,Wi=Kr(Qa)?ki:0,Ei=$e.get("text-anchor").evaluate(na,{},we),Ci=$e.get("text-variable-anchor");if(!Ci){var Ti=$e.get("text-radial-offset").evaluate(na,{},we);Ti?ci=xv(Ei,[Ti*cs,gh]):ci=$e.get("text-offset").evaluate(na,{},we).map(function(Ju){return Ju*cs})}var $i=Mn?"center":$e.get("text-justify").evaluate(na,{},we),ro=$e.get("symbol-placement"),wo=ro==="point"?$e.get("text-max-width").evaluate(na,{},we)*cs:0,Co=function(){E.allowVerticalPlacement&&Tr(Qa)&&(Pa.vertical=zc(Ra,C,B,he,Ia,wo,Jr,Ei,"left",Wi,ci,Sl.vertical,!0,ro,ka,_a))};if(!Mn&&Ci){for(var $o=$i==="auto"?Ci.map(function(Ju){return yh(Ju)}):[$i],Vo=!1,Cs=0;Cs<$o.length;Cs++){var Ls=$o[Cs];if(!Pa.horizontal[Ls])if(Vo)Pa.horizontal[Ls]=Pa.horizontal[0];else{var qo=zc(Ra,C,B,he,Ia,wo,Jr,"center",Ls,Wi,ci,Sl.horizontal,!1,ro,ka,_a);qo&&(Pa.horizontal[Ls]=qo,Vo=qo.positionedLines.length===1)}}Co()}else{$i==="auto"&&($i=yh(Ei));var Os=zc(Ra,C,B,he,Ia,wo,Jr,Ei,$i,Wi,ci,Sl.horizontal,!1,ro,ka,_a);Os&&(Pa.horizontal[$i]=Os),Co(),Tr(Qa)&&Mn&&yn&&(Pa.vertical=zc(Ra,C,B,he,Ia,wo,Jr,Ei,$i,Wi,ci,Sl.vertical,!1,ro,ka,_a))}}var Ns=void 0,Xo=!1;if(na.icon&&na.icon.name){var Us=$[na.icon.name];Us&&(Ns=Yd(he[na.icon.name],$e.get("icon-offset").evaluate(na,{},we),$e.get("icon-anchor").evaluate(na,{},we)),Xo=Us.sdf,E.sdfIcons===void 0?E.sdfIcons=Us.sdf:E.sdfIcons!==Us.sdf&&O("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Us.pixelRatio!==E.pixelRatio||$e.get("icon-rotate").constantOr(1)!==0)&&(E.iconsNeedLinear=!0))}var kl=_v(Pa.horizontal)||Pa.vertical;E.iconsInText=kl?kl.iconsInText:!1,(kl||Ns)&&t0(E,na,Pa,Ns,$,gt,ka,ei,ci,Xo,we)},Vn=0,sa=E.features;Vn<sa.length;Vn+=1)Rn();me&&E.generateCollisionDebugBuffers()}function yh(E){switch(E){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function t0(E,C,B,$,he,me,we,Ie,$e,ut,gt){var Rt=me.textMaxSize.evaluate(C,{});Rt===void 0&&(Rt=we);var Qt=E.layers[0].layout,Wt=Qt.get("icon-offset").evaluate(C,{},gt),vr=_v(B.horizontal),Rr=24,an=we/Rr,Jr=E.tilePixelRatio*an,Mn=E.tilePixelRatio*Rt/Rr,yn=E.tilePixelRatio*Ie,Tn=E.tilePixelRatio*Qt.get("symbol-spacing"),Rn=Qt.get("text-padding")*E.tilePixelRatio,Vn=Qt.get("icon-padding")*E.tilePixelRatio,sa=Qt.get("text-max-angle")/180*Math.PI,na=Qt.get("text-rotation-alignment")==="map"&&Qt.get("symbol-placement")!=="point",Ia=Qt.get("icon-rotation-alignment")==="map"&&Qt.get("symbol-placement")!=="point",_a=Qt.get("symbol-placement"),ka=Tn/2,ei=Qt.get("icon-text-fit"),Pa;$&&ei!=="none"&&(E.allowVerticalPlacement&&B.vertical&&(Pa=lv($,B.vertical,ei,Qt.get("icon-text-fit-padding"),Wt,an)),vr&&($=lv($,vr,ei,Qt.get("icon-text-fit-padding"),Wt,an)));var Ra=function(Kf,ru){ru.x<0||ru.x>=Na||ru.y<0||ru.y>=Na||r0(E,ru,Kf,B,$,he,Pa,E.layers[0],E.collisionBoxArray,C.index,C.sourceLayerIndex,E.index,Jr,Rn,na,$e,yn,Vn,Ia,Wt,C,me,ut,gt,we)};if(_a==="line")for(var ci=0,Qa=gv(C.geometry,0,0,Na,Na);ci<Qa.length;ci+=1)for(var ki=Qa[ci],Wi=Zd(ki,Tn,sa,B.vertical||vr,$,Rr,Mn,E.overscaling,Na),Ei=0,Ci=Wi;Ei<Ci.length;Ei+=1){var Ti=Ci[Ei],$i=vr;(!$i||!n0(E,$i.text,ka,Ti))&&Ra(ki,Ti)}else if(_a==="line-center")for(var ro=0,wo=C.geometry;ro<wo.length;ro+=1){var Co=wo[ro];if(Co.length>1){var $o=Xd(Co,sa,B.vertical||vr,$,Rr,Mn);$o&&Ra(Co,$o)}}else if(C.type==="Polygon")for(var Vo=0,Cs=oh(C.geometry,0);Vo<Cs.length;Vo+=1){var Ls=Cs[Vo],qo=Jd(Ls,16);Ra(Ls[0],new Uf(qo.x,qo.y,0))}else if(C.type==="LineString")for(var Os=0,Ns=C.geometry;Os<Ns.length;Os+=1){var Xo=Ns[Os];Ra(Xo,new Uf(Xo[0].x,Xo[0].y,0))}else if(C.type==="Point")for(var Us=0,kl=C.geometry;Us<kl.length;Us+=1)for(var Ju=kl[Us],uf=0,ff=Ju;uf<ff.length;uf+=1){var cf=ff[uf];Ra([cf],new Uf(cf.x,cf.y,0))}}var dc=255,sf=dc*Tu;function bv(E,C,B,$,he,me,we,Ie,$e,ut,gt,Rt,Qt,Wt,vr){var Rr=jd(C,B,Ie,he,me,we,$,E.allowVerticalPlacement),an=E.textSizeData,Jr=null;an.kind==="source"?(Jr=[Tu*he.layout.get("text-size").evaluate(we,{})],Jr[0]>sf&&O(E.layerIds[0]+': Value for "text-size" is >= '+dc+'. Reduce your "text-size".')):an.kind==="composite"&&(Jr=[Tu*Wt.compositeTextSizes[0].evaluate(we,{},vr),Tu*Wt.compositeTextSizes[1].evaluate(we,{},vr)],(Jr[0]>sf||Jr[1]>sf)&&O(E.layerIds[0]+': Value for "text-size" is >= '+dc+'. Reduce your "text-size".')),E.addSymbols(E.text,Rr,Jr,Ie,me,we,ut,C,$e.lineStartIndex,$e.lineLength,Qt,vr);for(var Mn=0,yn=gt;Mn<yn.length;Mn+=1){var Tn=yn[Mn];Rt[Tn]=E.text.placedSymbolArray.length-1}return Rr.length*4}function _v(E){for(var C in E)return E[C];return null}function r0(E,C,B,$,he,me,we,Ie,$e,ut,gt,Rt,Qt,Wt,vr,Rr,an,Jr,Mn,yn,Tn,Rn,Vn,sa,na){var Ia,_a=E.addToLineVertexArray(C,B),ka,ei,Pa,Ra,ci=0,Qa=0,ki=0,Wi=0,Ei=-1,Ci=-1,Ti={},$i=Ce(""),ro=0,wo=0;if(Ie._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Ia=Ie.layout.get("text-offset").evaluate(Tn,{},sa).map(function(mc){return mc*cs}),ro=Ia[0],wo=Ia[1]):(ro=Ie.layout.get("text-radial-offset").evaluate(Tn,{},sa)*cs,wo=gh),E.allowVerticalPlacement&&$.vertical){var Co=Ie.layout.get("text-rotate").evaluate(Tn,{},sa),$o=Co+90,Vo=$.vertical;Pa=new Nc($e,C,ut,gt,Rt,Vo,Qt,Wt,vr,$o),we&&(Ra=new Nc($e,C,ut,gt,Rt,we,an,Jr,vr,$o))}if(he){var Cs=Ie.layout.get("icon-rotate").evaluate(Tn,{}),Ls=Ie.layout.get("icon-text-fit")!=="none",qo=yv(he,Cs,Vn,Ls),Os=we?yv(we,Cs,Vn,Ls):void 0;ei=new Nc($e,C,ut,gt,Rt,he,an,Jr,!1,Cs),ci=qo.length*4;var Ns=E.iconSizeData,Xo=null;Ns.kind==="source"?(Xo=[Tu*Ie.layout.get("icon-size").evaluate(Tn,{})],Xo[0]>sf&&O(E.layerIds[0]+': Value for "icon-size" is >= '+dc+'. Reduce your "icon-size".')):Ns.kind==="composite"&&(Xo=[Tu*Rn.compositeIconSizes[0].evaluate(Tn,{},sa),Tu*Rn.compositeIconSizes[1].evaluate(Tn,{},sa)],(Xo[0]>sf||Xo[1]>sf)&&O(E.layerIds[0]+': Value for "icon-size" is >= '+dc+'. Reduce your "icon-size".')),E.addSymbols(E.icon,qo,Xo,yn,Mn,Tn,!1,C,_a.lineStartIndex,_a.lineLength,-1,sa),Ei=E.icon.placedSymbolArray.length-1,Os&&(Qa=Os.length*4,E.addSymbols(E.icon,Os,Xo,yn,Mn,Tn,Sl.vertical,C,_a.lineStartIndex,_a.lineLength,-1,sa),Ci=E.icon.placedSymbolArray.length-1)}for(var Us in $.horizontal){var kl=$.horizontal[Us];if(!ka){$i=Ce(kl.text);var Ju=Ie.layout.get("text-rotate").evaluate(Tn,{},sa);ka=new Nc($e,C,ut,gt,Rt,kl,Qt,Wt,vr,Ju)}var uf=kl.positionedLines.length===1;if(ki+=bv(E,C,kl,me,Ie,vr,Tn,Rr,_a,$.vertical?Sl.horizontal:Sl.horizontalOnly,uf?Object.keys($.horizontal):[Us],Ti,Ei,Rn,sa),uf)break}$.vertical&&(Wi+=bv(E,C,$.vertical,me,Ie,vr,Tn,Rr,_a,Sl.vertical,["vertical"],Ti,Ci,Rn,sa));var ff=ka?ka.boxStartIndex:E.collisionBoxArray.length,cf=ka?ka.boxEndIndex:E.collisionBoxArray.length,Kf=Pa?Pa.boxStartIndex:E.collisionBoxArray.length,ru=Pa?Pa.boxEndIndex:E.collisionBoxArray.length,Yc=ei?ei.boxStartIndex:E.collisionBoxArray.length,Th=ei?ei.boxEndIndex:E.collisionBoxArray.length,Wc=Ra?Ra.boxStartIndex:E.collisionBoxArray.length,Ah=Ra?Ra.boxEndIndex:E.collisionBoxArray.length,Hl=-1,Jf=function(mc,Bv){return mc&&mc.circleDiameter?Math.max(mc.circleDiameter,Bv):Bv};Hl=Jf(ka,Hl),Hl=Jf(Pa,Hl),Hl=Jf(ei,Hl),Hl=Jf(Ra,Hl);var Xc=Hl>-1?1:0;Xc&&(Hl*=na/cs),E.glyphOffsetArray.length>=Yi.MAX_GLYPHS&&O("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Tn.sortKey!==void 0&&E.addToSortKeyRanges(E.symbolInstances.length,Tn.sortKey),E.symbolInstances.emplaceBack(C.x,C.y,Ti.right>=0?Ti.right:-1,Ti.center>=0?Ti.center:-1,Ti.left>=0?Ti.left:-1,Ti.vertical||-1,Ei,Ci,$i,ff,cf,Kf,ru,Yc,Th,Wc,Ah,ut,ki,Wi,ci,Qa,Xc,0,Qt,ro,wo,Hl)}function n0(E,C,B,$){var he=E.compareText;if(!(C in he))he[C]=[];else for(var me=he[C],we=me.length-1;we>=0;we--)if($.dist(me[we])<B)return!0;return he[C].push($),!1}var a0=Ff.VectorTileFeature.types,i0=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Uc(E,C,B,$,he,me,we,Ie,$e,ut,gt,Rt,Qt){var Wt=Ie?Math.min(sf,Math.round(Ie[0])):0,vr=Ie?Math.min(sf,Math.round(Ie[1])):0;E.emplaceBack(C,B,Math.round($*32),Math.round(he*32),me,we,(Wt<<1)+($e?1:0),vr,ut*16,gt*16,Rt*256,Qt*256)}function mh(E,C,B){E.emplaceBack(C.x,C.y,B),E.emplaceBack(C.x,C.y,B),E.emplaceBack(C.x,C.y,B),E.emplaceBack(C.x,C.y,B)}function o0(E){for(var C=0,B=E.sections;C<B.length;C+=1){var $=B[C];if(ra($.text))return!0}return!1}var Wf=function(C){this.layoutVertexArray=new Bu,this.indexArray=new xu,this.programConfigurations=C,this.segments=new H,this.dynamicLayoutVertexArray=new Qf,this.opacityVertexArray=new $f,this.placedSymbolArray=new rf};Wf.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Wf.prototype.upload=function(C,B,$,he){this.isEmpty()||($&&(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,fh.members),this.indexBuffer=C.createIndexBuffer(this.indexArray,B),this.dynamicLayoutVertexBuffer=C.createVertexBuffer(this.dynamicLayoutVertexArray,sd.members,!0),this.opacityVertexBuffer=C.createVertexBuffer(this.opacityVertexArray,i0,!0),this.opacityVertexBuffer.itemSize=1),($||he)&&this.programConfigurations.upload(C))},Wf.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},ze("SymbolBuffers",Wf);var gc=function(C,B,$){this.layoutVertexArray=new C,this.layoutAttributes=B,this.indexArray=new $,this.segments=new H,this.collisionVertexArray=new Js};gc.prototype.upload=function(C){this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=C.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=C.createVertexBuffer(this.collisionVertexArray,ld.members,!0)},gc.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},ze("CollisionBuffers",gc);var Yi=function(C){this.collisionBoxArray=C.collisionBoxArray,this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function($e){return $e.id}),this.index=C.index,this.pixelRatio=C.pixelRatio,this.sourceLayerIndex=C.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Pf([]),this.placementViewportMatrix=Pf([]);var B=this.layers[0],$=B._unevaluatedLayout._values;this.textSizeData=dh(this.zoom,$["text-size"]),this.iconSizeData=dh(this.zoom,$["icon-size"]);var he=this.layers[0].layout,me=he.get("symbol-sort-key"),we=he.get("symbol-z-order");this.sortFeaturesByKey=we!=="viewport-y"&&me.constantOr(1)!==void 0;var Ie=we==="viewport-y"||we==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=Ie&&(he.get("text-allow-overlap")||he.get("icon-allow-overlap")||he.get("text-ignore-placement")||he.get("icon-ignore-placement")),he.get("symbol-placement")==="point"&&(this.writingModes=he.get("text-writing-mode").map(function($e){return Sl[$e]})),this.stateDependentLayerIds=this.layers.filter(function($e){return $e.isStateDependent()}).map(function($e){return $e.id}),this.sourceID=C.sourceID};Yi.prototype.createArrays=function(){this.text=new Wf(new ni(fh.members,this.layers,this.zoom,function(C){return/^text/.test(C)})),this.icon=new Wf(new ni(fh.members,this.layers,this.zoom,function(C){return/^icon/.test(C)})),this.glyphOffsetArray=new Ul,this.lineVertexArray=new wc,this.symbolInstances=new _c},Yi.prototype.calculateGlyphDependencies=function(C,B,$,he,me){for(var we=0;we<C.length;we++)if(B[C.charCodeAt(we)]=!0,($||he)&&me){var Ie=cc[C.charAt(we)];Ie&&(B[Ie.charCodeAt(0)]=!0)}},Yi.prototype.populate=function(C,B,$){var he=this.layers[0],me=he.layout,we=me.get("text-font"),Ie=me.get("text-field"),$e=me.get("icon-image"),ut=(Ie.value.kind!=="constant"||Ie.value.value instanceof Ui&&!Ie.value.value.isEmpty()||Ie.value.value.toString().length>0)&&(we.value.kind!=="constant"||we.value.value.length>0),gt=$e.value.kind!=="constant"||!!$e.value.value||Object.keys($e.parameters).length>0,Rt=me.get("symbol-sort-key");if(this.features=[],!(!ut&&!gt)){for(var Qt=B.iconDependencies,Wt=B.glyphDependencies,vr=B.availableImages,Rr=new ui(this.zoom),an=0,Jr=C;an<Jr.length;an+=1){var Mn=Jr[an],yn=Mn.feature,Tn=Mn.id,Rn=Mn.index,Vn=Mn.sourceLayerIndex,sa=he._featureFilter.needGeometry,na={type:yn.type,id:Tn,properties:yn.properties,geometry:sa?Ni(yn):[]};if(!!he._featureFilter.filter(Rr,na,$)){sa||(na.geometry=Ni(yn));var Ia=void 0;if(ut){var _a=he.getValueAndResolveTokens("text-field",na,$,vr),ka=Ui.factory(_a);o0(ka)&&(this.hasRTLText=!0),(!this.hasRTLText||fo()==="unavailable"||this.hasRTLText&&Wa.isParsed())&&(Ia=cd(ka,he,na))}var ei=void 0;if(gt){var Pa=he.getValueAndResolveTokens("icon-image",na,$,vr);Pa instanceof Ao?ei=Pa:ei=Ao.fromString(Pa)}if(!(!Ia&&!ei)){var Ra=this.sortFeaturesByKey?Rt.evaluate(na,{},$):void 0,ci={id:Tn,text:Ia,icon:ei,index:Rn,sourceLayerIndex:Vn,geometry:Ni(yn),properties:yn.properties,type:a0[yn.type],sortKey:Ra};if(this.features.push(ci),ei&&(Qt[ei.name]=!0),Ia){var Qa=we.evaluate(na,{},$).join(","),ki=me.get("text-rotation-alignment")==="map"&&me.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Sl.vertical)>=0;for(var Wi=0,Ei=Ia.sections;Wi<Ei.length;Wi+=1){var Ci=Ei[Wi];if(Ci.image)Qt[Ci.image.name]=!0;else{var Ti=Tr(Ia.toString()),$i=Ci.fontStack||Qa,ro=Wt[$i]=Wt[$i]||{};this.calculateGlyphDependencies(Ci.text,ro,ki,this.allowVerticalPlacement,Ti)}}}}}}me.get("symbol-placement")==="line"&&(this.features=hd(this.features)),this.sortFeaturesByKey&&this.features.sort(function(wo,Co){return wo.sortKey-Co.sortKey})}},Yi.prototype.update=function(C,B,$){!this.stateDependentLayers.length||(this.text.programConfigurations.updatePaintArrays(C,B,this.layers,$),this.icon.programConfigurations.updatePaintArrays(C,B,this.layers,$))},Yi.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Yi.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Yi.prototype.upload=function(C){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(C),this.iconCollisionBox.upload(C)),this.text.upload(C,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(C,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Yi.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Yi.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Yi.prototype.addToLineVertexArray=function(C,B){var $=this.lineVertexArray.length;if(C.segment!==void 0){for(var he=C.dist(B[C.segment+1]),me=C.dist(B[C.segment]),we={},Ie=C.segment+1;Ie<B.length;Ie++)we[Ie]={x:B[Ie].x,y:B[Ie].y,tileUnitDistanceFromAnchor:he},Ie<B.length-1&&(he+=B[Ie+1].dist(B[Ie]));for(var $e=C.segment||0;$e>=0;$e--)we[$e]={x:B[$e].x,y:B[$e].y,tileUnitDistanceFromAnchor:me},$e>0&&(me+=B[$e-1].dist(B[$e]));for(var ut=0;ut<B.length;ut++){var gt=we[ut];this.lineVertexArray.emplaceBack(gt.x,gt.y,gt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:$,lineLength:this.lineVertexArray.length-$}},Yi.prototype.addSymbols=function(C,B,$,he,me,we,Ie,$e,ut,gt,Rt,Qt){for(var Wt=C.indexArray,vr=C.layoutVertexArray,Rr=C.segments.prepareSegment(4*B.length,vr,Wt,we.sortKey),an=this.glyphOffsetArray.length,Jr=Rr.vertexLength,Mn=this.allowVerticalPlacement&&Ie===Sl.vertical?Math.PI/2:0,yn=we.text&&we.text.sections,Tn=0;Tn<B.length;Tn++){var Rn=B[Tn],Vn=Rn.tl,sa=Rn.tr,na=Rn.bl,Ia=Rn.br,_a=Rn.tex,ka=Rn.pixelOffsetTL,ei=Rn.pixelOffsetBR,Pa=Rn.minFontScaleX,Ra=Rn.minFontScaleY,ci=Rn.glyphOffset,Qa=Rn.isSDF,ki=Rn.sectionIndex,Wi=Rr.vertexLength,Ei=ci[1];Uc(vr,$e.x,$e.y,Vn.x,Ei+Vn.y,_a.x,_a.y,$,Qa,ka.x,ka.y,Pa,Ra),Uc(vr,$e.x,$e.y,sa.x,Ei+sa.y,_a.x+_a.w,_a.y,$,Qa,ei.x,ka.y,Pa,Ra),Uc(vr,$e.x,$e.y,na.x,Ei+na.y,_a.x,_a.y+_a.h,$,Qa,ka.x,ei.y,Pa,Ra),Uc(vr,$e.x,$e.y,Ia.x,Ei+Ia.y,_a.x+_a.w,_a.y+_a.h,$,Qa,ei.x,ei.y,Pa,Ra),mh(C.dynamicLayoutVertexArray,$e,Mn),Wt.emplaceBack(Wi,Wi+1,Wi+2),Wt.emplaceBack(Wi+1,Wi+2,Wi+3),Rr.vertexLength+=4,Rr.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ci[0]),(Tn===B.length-1||ki!==B[Tn+1].sectionIndex)&&C.programConfigurations.populatePaintArrays(vr.length,we,we.index,{},Qt,yn&&yn[ki])}C.placedSymbolArray.emplaceBack($e.x,$e.y,an,this.glyphOffsetArray.length-an,Jr,ut,gt,$e.segment,$?$[0]:0,$?$[1]:0,he[0],he[1],Ie,0,!1,0,Rt)},Yi.prototype._addCollisionDebugVertex=function(C,B,$,he,me,we){return B.emplaceBack(0,0),C.emplaceBack($.x,$.y,he,me,Math.round(we.x),Math.round(we.y))},Yi.prototype.addCollisionDebugVertices=function(C,B,$,he,me,we,Ie){var $e=me.segments.prepareSegment(4,me.layoutVertexArray,me.indexArray),ut=$e.vertexLength,gt=me.layoutVertexArray,Rt=me.collisionVertexArray,Qt=Ie.anchorX,Wt=Ie.anchorY;this._addCollisionDebugVertex(gt,Rt,we,Qt,Wt,new f(C,B)),this._addCollisionDebugVertex(gt,Rt,we,Qt,Wt,new f($,B)),this._addCollisionDebugVertex(gt,Rt,we,Qt,Wt,new f($,he)),this._addCollisionDebugVertex(gt,Rt,we,Qt,Wt,new f(C,he)),$e.vertexLength+=4;var vr=me.indexArray;vr.emplaceBack(ut,ut+1),vr.emplaceBack(ut+1,ut+2),vr.emplaceBack(ut+2,ut+3),vr.emplaceBack(ut+3,ut),$e.primitiveLength+=4},Yi.prototype.addDebugCollisionBoxes=function(C,B,$,he){for(var me=C;me<B;me++){var we=this.collisionBoxArray.get(me),Ie=we.x1,$e=we.y1,ut=we.x2,gt=we.y2;this.addCollisionDebugVertices(Ie,$e,ut,gt,he?this.textCollisionBox:this.iconCollisionBox,we.anchorPoint,$)}},Yi.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new gc(Sf,Kh.members,gf),this.iconCollisionBox=new gc(Sf,Kh.members,gf);for(var C=0;C<this.symbolInstances.length;C++){var B=this.symbolInstances.get(C);this.addDebugCollisionBoxes(B.textBoxStartIndex,B.textBoxEndIndex,B,!0),this.addDebugCollisionBoxes(B.verticalTextBoxStartIndex,B.verticalTextBoxEndIndex,B,!0),this.addDebugCollisionBoxes(B.iconBoxStartIndex,B.iconBoxEndIndex,B,!1),this.addDebugCollisionBoxes(B.verticalIconBoxStartIndex,B.verticalIconBoxEndIndex,B,!1)}},Yi.prototype._deserializeCollisionBoxesForSymbol=function(C,B,$,he,me,we,Ie,$e,ut){for(var gt={},Rt=B;Rt<$;Rt++){var Qt=C.get(Rt);gt.textBox={x1:Qt.x1,y1:Qt.y1,x2:Qt.x2,y2:Qt.y2,anchorPointX:Qt.anchorPointX,anchorPointY:Qt.anchorPointY},gt.textFeatureIndex=Qt.featureIndex;break}for(var Wt=he;Wt<me;Wt++){var vr=C.get(Wt);gt.verticalTextBox={x1:vr.x1,y1:vr.y1,x2:vr.x2,y2:vr.y2,anchorPointX:vr.anchorPointX,anchorPointY:vr.anchorPointY},gt.verticalTextFeatureIndex=vr.featureIndex;break}for(var Rr=we;Rr<Ie;Rr++){var an=C.get(Rr);gt.iconBox={x1:an.x1,y1:an.y1,x2:an.x2,y2:an.y2,anchorPointX:an.anchorPointX,anchorPointY:an.anchorPointY},gt.iconFeatureIndex=an.featureIndex;break}for(var Jr=$e;Jr<ut;Jr++){var Mn=C.get(Jr);gt.verticalIconBox={x1:Mn.x1,y1:Mn.y1,x2:Mn.x2,y2:Mn.y2,anchorPointX:Mn.anchorPointX,anchorPointY:Mn.anchorPointY},gt.verticalIconFeatureIndex=Mn.featureIndex;break}return gt},Yi.prototype.deserializeCollisionBoxes=function(C){this.collisionArrays=[];for(var B=0;B<this.symbolInstances.length;B++){var $=this.symbolInstances.get(B);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(C,$.textBoxStartIndex,$.textBoxEndIndex,$.verticalTextBoxStartIndex,$.verticalTextBoxEndIndex,$.iconBoxStartIndex,$.iconBoxEndIndex,$.verticalIconBoxStartIndex,$.verticalIconBoxEndIndex))}},Yi.prototype.hasTextData=function(){return this.text.segments.get().length>0},Yi.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Yi.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Yi.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Yi.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Yi.prototype.addIndicesForPlacedSymbol=function(C,B){for(var $=C.placedSymbolArray.get(B),he=$.vertexStartIndex+$.numGlyphs*4,me=$.vertexStartIndex;me<he;me+=4)C.indexArray.emplaceBack(me,me+1,me+2),C.indexArray.emplaceBack(me+1,me+2,me+3)},Yi.prototype.getSortedSymbolIndexes=function(C){if(this.sortedAngle===C&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var B=Math.sin(C),$=Math.cos(C),he=[],me=[],we=[],Ie=0;Ie<this.symbolInstances.length;++Ie){we.push(Ie);var $e=this.symbolInstances.get(Ie);he.push(Math.round(B*$e.anchorX+$*$e.anchorY)|0),me.push($e.featureIndex)}return we.sort(function(ut,gt){return he[ut]-he[gt]||me[gt]-me[ut]}),we},Yi.prototype.addToSortKeyRanges=function(C,B){var $=this.sortKeyRanges[this.sortKeyRanges.length-1];$&&$.sortKey===B?$.symbolInstanceEnd=C+1:this.sortKeyRanges.push({sortKey:B,symbolInstanceStart:C,symbolInstanceEnd:C+1})},Yi.prototype.sortFeatures=function(C){var B=this;if(!!this.sortFeaturesByY&&this.sortedAngle!==C&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(C),this.sortedAngle=C,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var $=0,he=this.symbolInstanceIndexes;$<he.length;$+=1){var me=he[$],we=this.symbolInstances.get(me);this.featureSortOrder.push(we.featureIndex),[we.rightJustifiedTextSymbolIndex,we.centerJustifiedTextSymbolIndex,we.leftJustifiedTextSymbolIndex].forEach(function(Ie,$e,ut){Ie>=0&&ut.indexOf(Ie)===$e&&B.addIndicesForPlacedSymbol(B.text,Ie)}),we.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,we.verticalPlacedTextSymbolIndex),we.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,we.placedIconSymbolIndex),we.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,we.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},ze("SymbolBucket",Yi,{omit:["layers","collisionBoxArray","features","compareText"]}),Yi.MAX_GLYPHS=65535,Yi.addDynamicAttributes=mh;function s0(E,C){return C.replace(/{([^{}]+)}/g,function(B,$){return $ in E?String(E[$]):""})}var l0=new Xi({"symbol-placement":new za(Ft.layout_symbol["symbol-placement"]),"symbol-spacing":new za(Ft.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new za(Ft.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Xa(Ft.layout_symbol["symbol-sort-key"]),"symbol-z-order":new za(Ft.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new za(Ft.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new za(Ft.layout_symbol["icon-ignore-placement"]),"icon-optional":new za(Ft.layout_symbol["icon-optional"]),"icon-rotation-alignment":new za(Ft.layout_symbol["icon-rotation-alignment"]),"icon-size":new Xa(Ft.layout_symbol["icon-size"]),"icon-text-fit":new za(Ft.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new za(Ft.layout_symbol["icon-text-fit-padding"]),"icon-image":new Xa(Ft.layout_symbol["icon-image"]),"icon-rotate":new Xa(Ft.layout_symbol["icon-rotate"]),"icon-padding":new za(Ft.layout_symbol["icon-padding"]),"icon-keep-upright":new za(Ft.layout_symbol["icon-keep-upright"]),"icon-offset":new Xa(Ft.layout_symbol["icon-offset"]),"icon-anchor":new Xa(Ft.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new za(Ft.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new za(Ft.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new za(Ft.layout_symbol["text-rotation-alignment"]),"text-field":new Xa(Ft.layout_symbol["text-field"]),"text-font":new Xa(Ft.layout_symbol["text-font"]),"text-size":new Xa(Ft.layout_symbol["text-size"]),"text-max-width":new Xa(Ft.layout_symbol["text-max-width"]),"text-line-height":new za(Ft.layout_symbol["text-line-height"]),"text-letter-spacing":new Xa(Ft.layout_symbol["text-letter-spacing"]),"text-justify":new Xa(Ft.layout_symbol["text-justify"]),"text-radial-offset":new Xa(Ft.layout_symbol["text-radial-offset"]),"text-variable-anchor":new za(Ft.layout_symbol["text-variable-anchor"]),"text-anchor":new Xa(Ft.layout_symbol["text-anchor"]),"text-max-angle":new za(Ft.layout_symbol["text-max-angle"]),"text-writing-mode":new za(Ft.layout_symbol["text-writing-mode"]),"text-rotate":new Xa(Ft.layout_symbol["text-rotate"]),"text-padding":new za(Ft.layout_symbol["text-padding"]),"text-keep-upright":new za(Ft.layout_symbol["text-keep-upright"]),"text-transform":new Xa(Ft.layout_symbol["text-transform"]),"text-offset":new Xa(Ft.layout_symbol["text-offset"]),"text-allow-overlap":new za(Ft.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new za(Ft.layout_symbol["text-ignore-placement"]),"text-optional":new za(Ft.layout_symbol["text-optional"])}),u0=new Xi({"icon-opacity":new Xa(Ft.paint_symbol["icon-opacity"]),"icon-color":new Xa(Ft.paint_symbol["icon-color"]),"icon-halo-color":new Xa(Ft.paint_symbol["icon-halo-color"]),"icon-halo-width":new Xa(Ft.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Xa(Ft.paint_symbol["icon-halo-blur"]),"icon-translate":new za(Ft.paint_symbol["icon-translate"]),"icon-translate-anchor":new za(Ft.paint_symbol["icon-translate-anchor"]),"text-opacity":new Xa(Ft.paint_symbol["text-opacity"]),"text-color":new Xa(Ft.paint_symbol["text-color"],{runtimeType:Bn,getOverride:function(E){return E.textColor},hasOverride:function(E){return!!E.textColor}}),"text-halo-color":new Xa(Ft.paint_symbol["text-halo-color"]),"text-halo-width":new Xa(Ft.paint_symbol["text-halo-width"]),"text-halo-blur":new Xa(Ft.paint_symbol["text-halo-blur"]),"text-translate":new za(Ft.paint_symbol["text-translate"]),"text-translate-anchor":new za(Ft.paint_symbol["text-translate-anchor"])}),xh={paint:u0,layout:l0},Xf=function(C){this.type=C.property.overrides?C.property.overrides.runtimeType:yr,this.defaultValue=C};Xf.prototype.evaluate=function(C){if(C.formattedSection){var B=this.defaultValue.property.overrides;if(B&&B.hasOverride(C.formattedSection))return B.getOverride(C.formattedSection)}return C.feature&&C.featureState?this.defaultValue.evaluate(C.feature,C.featureState):this.defaultValue.property.specification.default},Xf.prototype.eachChild=function(C){if(!this.defaultValue.isConstant()){var B=this.defaultValue.value;C(B._styleExpression.expression)}},Xf.prototype.outputDefined=function(){return!1},Xf.prototype.serialize=function(){return null},ze("FormatSectionOverride",Xf,{omit:["defaultValue"]});var f0=function(E){function C(B){E.call(this,B,xh)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.recalculate=function($,he){if(E.prototype.recalculate.call(this,$,he),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var me=this.layout.get("text-writing-mode");if(me){for(var we=[],Ie=0,$e=me;Ie<$e.length;Ie+=1){var ut=$e[Ie];we.indexOf(ut)<0&&we.push(ut)}this.layout._values["text-writing-mode"]=we}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},C.prototype.getValueAndResolveTokens=function($,he,me,we){var Ie=this.layout.get($).evaluate(he,{},me,we),$e=this._unevaluatedLayout._values[$];return!$e.isDataDriven()&&!mo($e.value)&&Ie?s0(he.properties,Ie):Ie},C.prototype.createBucket=function($){return new Yi($)},C.prototype.queryRadius=function(){return 0},C.prototype.queryIntersectsFeature=function(){return!1},C.prototype._setPaintOverrides=function(){for(var $=0,he=xh.paint.overridableProperties;$<he.length;$+=1){var me=he[$];if(!!C.hasPaintOverride(this.layout,me)){var we=this.paint.get(me),Ie=new Xf(we),$e=new ss(Ie,we.property.specification),ut=null;we.value.kind==="constant"||we.value.kind==="source"?ut=new Jl("source",$e):ut=new ls("composite",$e,we.value.zoomStops,we.value._interpolationType),this.paint._values[me]=new Gi(we.property,ut,we.parameters)}}},C.prototype._handleOverridablePaintPropertyUpdate=function($,he,me){return!this.layout||he.isDataDriven()||me.isDataDriven()?!1:C.hasPaintOverride(this.layout,$)},C.hasPaintOverride=function($,he){var me=$.get("text-field"),we=xh.paint.properties[he],Ie=!1,$e=function(Rt){for(var Qt=0,Wt=Rt;Qt<Wt.length;Qt+=1){var vr=Wt[Qt];if(we.overrides&&we.overrides.hasOverride(vr)){Ie=!0;return}}};if(me.value.kind==="constant"&&me.value.value instanceof Ui)$e(me.value.value.sections);else if(me.value.kind==="source"){var ut=function(Rt){if(!Ie)if(Rt instanceof Ki&&Di(Rt.value)===pa){var Qt=Rt.value;$e(Qt.sections)}else Rt instanceof es?$e(Rt.sections):Rt.eachChild(ut)},gt=me.value;gt._styleExpression&&ut(gt._styleExpression.expression)}return Ie},C}(ms),c0=new Xi({"background-color":new za(Ft.paint_background["background-color"]),"background-pattern":new eo(Ft.paint_background["background-pattern"]),"background-opacity":new za(Ft.paint_background["background-opacity"])}),h0={paint:c0},v0=function(E){function C(B){E.call(this,B,h0)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C}(ms),p0=new Xi({"raster-opacity":new za(Ft.paint_raster["raster-opacity"]),"raster-hue-rotate":new za(Ft.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new za(Ft.paint_raster["raster-brightness-min"]),"raster-brightness-max":new za(Ft.paint_raster["raster-brightness-max"]),"raster-saturation":new za(Ft.paint_raster["raster-saturation"]),"raster-contrast":new za(Ft.paint_raster["raster-contrast"]),"raster-resampling":new za(Ft.paint_raster["raster-resampling"]),"raster-fade-duration":new za(Ft.paint_raster["raster-fade-duration"])}),d0={paint:p0},g0=function(E){function C(B){E.call(this,B,d0)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C}(ms);function y0(E){var C=[],B=E.id;return B===void 0&&C.push({message:"layers."+B+': missing required property "id"'}),E.render===void 0&&C.push({message:"layers."+B+': missing required method "render"'}),E.renderingMode&&E.renderingMode!=="2d"&&E.renderingMode!=="3d"&&C.push({message:"layers."+B+': property "renderingMode" must be either "2d" or "3d"'}),C}var m0=function(E){function C(B){E.call(this,B,{}),this.implementation=B}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},C.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},C.prototype.recalculate=function(){},C.prototype.updateTransitions=function(){},C.prototype.hasTransition=function(){},C.prototype.serialize=function(){},C.prototype.onAdd=function($){this.implementation.onAdd&&this.implementation.onAdd($,$.painter.context.gl)},C.prototype.onRemove=function($){this.implementation.onRemove&&this.implementation.onRemove($,$.painter.context.gl)},C}(ms),x0={circle:jv,heatmap:$v,hillshade:tp,fill:Sp,"fill-extrusion":Xp,line:id,symbol:f0,background:v0,raster:g0};function b0(E){return E.type==="custom"?new m0(E):new x0[E.type](E)}var wv=self.HTMLImageElement,Tv=self.HTMLCanvasElement,Av=self.HTMLVideoElement,Mv=self.ImageData,Vc=self.ImageBitmap,_f=function(C,B,$,he){this.context=C,this.format=$,this.texture=C.gl.createTexture(),this.update(B,he)};_f.prototype.update=function(C,B,$){var he=C.width,me=C.height,we=(!this.size||this.size[0]!==he||this.size[1]!==me)&&!$,Ie=this,$e=Ie.context,ut=$e.gl;if(this.useMipmap=Boolean(B&&B.useMipmap),ut.bindTexture(ut.TEXTURE_2D,this.texture),$e.pixelStoreUnpackFlipY.set(!1),$e.pixelStoreUnpack.set(1),$e.pixelStoreUnpackPremultiplyAlpha.set(this.format===ut.RGBA&&(!B||B.premultiply!==!1)),we)this.size=[he,me],C instanceof wv||C instanceof Tv||C instanceof Av||C instanceof Mv||Vc&&C instanceof Vc?ut.texImage2D(ut.TEXTURE_2D,0,this.format,this.format,ut.UNSIGNED_BYTE,C):ut.texImage2D(ut.TEXTURE_2D,0,this.format,he,me,0,this.format,ut.UNSIGNED_BYTE,C.data);else{var gt=$||{x:0,y:0},Rt=gt.x,Qt=gt.y;C instanceof wv||C instanceof Tv||C instanceof Av||C instanceof Mv||Vc&&C instanceof Vc?ut.texSubImage2D(ut.TEXTURE_2D,0,Rt,Qt,ut.RGBA,ut.UNSIGNED_BYTE,C):ut.texSubImage2D(ut.TEXTURE_2D,0,Rt,Qt,he,me,ut.RGBA,ut.UNSIGNED_BYTE,C.data)}this.useMipmap&&this.isSizePowerOfTwo()&&ut.generateMipmap(ut.TEXTURE_2D)},_f.prototype.bind=function(C,B,$){var he=this,me=he.context,we=me.gl;we.bindTexture(we.TEXTURE_2D,this.texture),$===we.LINEAR_MIPMAP_NEAREST&&!this.isSizePowerOfTwo()&&($=we.LINEAR),C!==this.filter&&(we.texParameteri(we.TEXTURE_2D,we.TEXTURE_MAG_FILTER,C),we.texParameteri(we.TEXTURE_2D,we.TEXTURE_MIN_FILTER,$||C),this.filter=C),B!==this.wrap&&(we.texParameteri(we.TEXTURE_2D,we.TEXTURE_WRAP_S,B),we.texParameteri(we.TEXTURE_2D,we.TEXTURE_WRAP_T,B),this.wrap=B)},_f.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1===0},_f.prototype.destroy=function(){var C=this.context,B=C.gl;B.deleteTexture(this.texture),this.texture=null};var bh=function(C){var B=this;this._callback=C,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){B._triggered=!1,B._callback()})};bh.prototype.trigger=function(){var C=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){C._triggered=!1,C._callback()},0))},bh.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Zf=function(C,B,$){this.target=C,this.parent=B,this.mapId=$,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},S(["receive","process"],this),this.invoker=new bh(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=J()?C:self};Zf.prototype.send=function(C,B,$,he,me){var we=this;me===void 0&&(me=!1);var Ie=Math.round(Math.random()*1e18).toString(36).substring(0,10);$&&(this.callbacks[Ie]=$);var $e=j(this.globalScope)?void 0:[];return this.target.postMessage({id:Ie,type:C,hasCallback:!!$,targetMapId:he,mustQueue:me,sourceMapId:this.mapId,data:Et(B,$e)},$e),{cancel:function(){$&&delete we.callbacks[Ie],we.target.postMessage({id:Ie,type:"<cancel>",targetMapId:he,sourceMapId:we.mapId})}}},Zf.prototype.receive=function(C){var B=C.data,$=B.id;if(!!$&&!(B.targetMapId&&this.mapId!==B.targetMapId))if(B.type==="<cancel>"){delete this.tasks[$];var he=this.cancelCallbacks[$];delete this.cancelCallbacks[$],he&&he()}else J()||B.mustQueue?(this.tasks[$]=B,this.taskQueue.push($),this.invoker.trigger()):this.processTask($,B)},Zf.prototype.process=function(){if(!!this.taskQueue.length){var C=this.taskQueue.shift(),B=this.tasks[C];delete this.tasks[C],this.taskQueue.length&&this.invoker.trigger(),B&&this.processTask(C,B)}},Zf.prototype.processTask=function(C,B){var $=this;if(B.type==="<response>"){var he=this.callbacks[C];delete this.callbacks[C],he&&(B.error?he(Vt(B.error)):he(null,Vt(B.data)))}else{var me=!1,we=j(this.globalScope)?void 0:[],Ie=B.hasCallback?function(Qt,Wt){me=!0,delete $.cancelCallbacks[C],$.target.postMessage({id:C,type:"<response>",sourceMapId:$.mapId,error:Qt?Et(Qt):null,data:Et(Wt,we)},we)}:function(Qt){me=!0},$e=null,ut=Vt(B.data);if(this.parent[B.type])$e=this.parent[B.type](B.sourceMapId,ut,Ie);else if(this.parent.getWorkerSource){var gt=B.type.split("."),Rt=this.parent.getWorkerSource(B.sourceMapId,gt[0],ut.source);$e=Rt[gt[1]](ut,Ie)}else Ie(new Error("Could not find function "+B.type));!me&&$e&&$e.cancel&&(this.cancelCallbacks[C]=$e.cancel)}},Zf.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};function _0(E,C,B){C=Math.pow(2,B)-C-1;var $=Sv(E*256,C*256,B),he=Sv((E+1)*256,(C+1)*256,B);return $[0]+","+$[1]+","+he[0]+","+he[1]}function Sv(E,C,B){var $=2*Math.PI*6378137/256/Math.pow(2,B),he=E*$-2*Math.PI*6378137/2,me=C*$-2*Math.PI*6378137/2;return[he,me]}var No=function(C,B){C&&(B?this.setSouthWest(C).setNorthEast(B):C.length===4?this.setSouthWest([C[0],C[1]]).setNorthEast([C[2],C[3]]):this.setSouthWest(C[0]).setNorthEast(C[1]))};No.prototype.setNorthEast=function(C){return this._ne=C instanceof co?new co(C.lng,C.lat):co.convert(C),this},No.prototype.setSouthWest=function(C){return this._sw=C instanceof co?new co(C.lng,C.lat):co.convert(C),this},No.prototype.extend=function(C){var B=this._sw,$=this._ne,he,me;if(C instanceof co)he=C,me=C;else if(C instanceof No){if(he=C._sw,me=C._ne,!he||!me)return this}else{if(Array.isArray(C))if(C.length===4||C.every(Array.isArray)){var we=C;return this.extend(No.convert(we))}else{var Ie=C;return this.extend(co.convert(Ie))}return this}return!B&&!$?(this._sw=new co(he.lng,he.lat),this._ne=new co(me.lng,me.lat)):(B.lng=Math.min(he.lng,B.lng),B.lat=Math.min(he.lat,B.lat),$.lng=Math.max(me.lng,$.lng),$.lat=Math.max(me.lat,$.lat)),this},No.prototype.getCenter=function(){return new co((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},No.prototype.getSouthWest=function(){return this._sw},No.prototype.getNorthEast=function(){return this._ne},No.prototype.getNorthWest=function(){return new co(this.getWest(),this.getNorth())},No.prototype.getSouthEast=function(){return new co(this.getEast(),this.getSouth())},No.prototype.getWest=function(){return this._sw.lng},No.prototype.getSouth=function(){return this._sw.lat},No.prototype.getEast=function(){return this._ne.lng},No.prototype.getNorth=function(){return this._ne.lat},No.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},No.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},No.prototype.isEmpty=function(){return!(this._sw&&this._ne)},No.prototype.contains=function(C){var B=co.convert(C),$=B.lng,he=B.lat,me=this._sw.lat<=he&&he<=this._ne.lat,we=this._sw.lng<=$&&$<=this._ne.lng;return this._sw.lng>this._ne.lng&&(we=this._sw.lng>=$&&$>=this._ne.lng),me&&we},No.convert=function(C){return!C||C instanceof No?C:new No(C)};var kv=63710088e-1,co=function(C,B){if(isNaN(C)||isNaN(B))throw new Error("Invalid LngLat object: ("+C+", "+B+")");if(this.lng=+C,this.lat=+B,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};co.prototype.wrap=function(){return new co(b(this.lng,-180,180),this.lat)},co.prototype.toArray=function(){return[this.lng,this.lat]},co.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},co.prototype.distanceTo=function(C){var B=Math.PI/180,$=this.lat*B,he=C.lat*B,me=Math.sin($)*Math.sin(he)+Math.cos($)*Math.cos(he)*Math.cos((C.lng-this.lng)*B),we=kv*Math.acos(Math.min(me,1));return we},co.prototype.toBounds=function(C){C===void 0&&(C=0);var B=40075017,$=360*C/B,he=$/Math.cos(Math.PI/180*this.lat);return new No(new co(this.lng-he,this.lat-$),new co(this.lng+he,this.lat+$))},co.convert=function(C){if(C instanceof co)return C;if(Array.isArray(C)&&(C.length===2||C.length===3))return new co(Number(C[0]),Number(C[1]));if(!Array.isArray(C)&&typeof C=="object"&&C!==null)return new co(Number("lng"in C?C.lng:C.lon),Number(C.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var Ev=2*Math.PI*kv;function Cv(E){return Ev*Math.cos(E*Math.PI/180)}function Lv(E){return(180+E)/360}function Pv(E){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+E*Math.PI/360)))/360}function Dv(E,C){return E/Cv(C)}function w0(E){return E*360-180}function _h(E){var C=180-E*360;return 360/Math.PI*Math.atan(Math.exp(C*Math.PI/180))-90}function T0(E,C){return E*Cv(_h(C))}function A0(E){return 1/Math.cos(E*Math.PI/180)}var wf=function(C,B,$){$===void 0&&($=0),this.x=+C,this.y=+B,this.z=+$};wf.fromLngLat=function(C,B){B===void 0&&(B=0);var $=co.convert(C);return new wf(Lv($.lng),Pv($.lat),Dv(B,$.lat))},wf.prototype.toLngLat=function(){return new co(w0(this.x),_h(this.y))},wf.prototype.toAltitude=function(){return T0(this.z,this.y)},wf.prototype.meterInMercatorCoordinateUnits=function(){return 1/Ev*A0(_h(this.y))};var Tf=function(C,B,$){this.z=C,this.x=B,this.y=$,this.key=yc(0,C,C,B,$)};Tf.prototype.equals=function(C){return this.z===C.z&&this.x===C.x&&this.y===C.y},Tf.prototype.url=function(C,B){var $=_0(this.x,this.y,this.z),he=M0(this.z,this.x,this.y);return C[(this.x+this.y)%C.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(B==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",he).replace("{bbox-epsg-3857}",$)},Tf.prototype.getTilePoint=function(C){var B=Math.pow(2,this.z);return new f((C.x*B-this.x)*Na,(C.y*B-this.y)*Na)},Tf.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Rv=function(C,B){this.wrap=C,this.canonical=B,this.key=yc(C,B.z,B.z,B.x,B.y)},Uo=function(C,B,$,he,me){this.overscaledZ=C,this.wrap=B,this.canonical=new Tf($,+he,+me),this.key=yc(B,C,$,he,me)};Uo.prototype.equals=function(C){return this.overscaledZ===C.overscaledZ&&this.wrap===C.wrap&&this.canonical.equals(C.canonical)},Uo.prototype.scaledTo=function(C){var B=this.canonical.z-C;return C>this.canonical.z?new Uo(C,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Uo(C,this.wrap,C,this.canonical.x>>B,this.canonical.y>>B)},Uo.prototype.calculateScaledKey=function(C,B){var $=this.canonical.z-C;return C>this.canonical.z?yc(this.wrap*+B,C,this.canonical.z,this.canonical.x,this.canonical.y):yc(this.wrap*+B,C,C,this.canonical.x>>$,this.canonical.y>>$)},Uo.prototype.isChildOf=function(C){if(C.wrap!==this.wrap)return!1;var B=this.canonical.z-C.canonical.z;return C.overscaledZ===0||C.overscaledZ<this.overscaledZ&&C.canonical.x===this.canonical.x>>B&&C.canonical.y===this.canonical.y>>B},Uo.prototype.children=function(C){if(this.overscaledZ>=C)return[new Uo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var B=this.canonical.z+1,$=this.canonical.x*2,he=this.canonical.y*2;return[new Uo(B,this.wrap,B,$,he),new Uo(B,this.wrap,B,$+1,he),new Uo(B,this.wrap,B,$,he+1),new Uo(B,this.wrap,B,$+1,he+1)]},Uo.prototype.isLessThan=function(C){return this.wrap<C.wrap?!0:this.wrap>C.wrap?!1:this.overscaledZ<C.overscaledZ?!0:this.overscaledZ>C.overscaledZ?!1:this.canonical.x<C.canonical.x?!0:this.canonical.x>C.canonical.x?!1:this.canonical.y<C.canonical.y},Uo.prototype.wrapped=function(){return new Uo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},Uo.prototype.unwrapTo=function(C){return new Uo(this.overscaledZ,C,this.canonical.z,this.canonical.x,this.canonical.y)},Uo.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},Uo.prototype.toUnwrapped=function(){return new Rv(this.wrap,this.canonical)},Uo.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},Uo.prototype.getTilePoint=function(C){return this.canonical.getTilePoint(new wf(C.x-this.wrap,C.y))};function yc(E,C,B,$,he){E*=2,E<0&&(E=E*-1-1);var me=1<<B;return(me*me*E+me*he+$).toString(36)+B.toString(36)+C.toString(36)}function M0(E,C,B){for(var $="",he,me=E;me>0;me--)he=1<<me-1,$+=(C&he?1:0)+(B&he?2:0);return $}ze("CanonicalTileID",Tf),ze("OverscaledTileID",Uo,{omit:["posMatrix"]});var ju=function(C,B,$){if(this.uid=C,B.height!==B.width)throw new RangeError("DEM tiles must be square");if($&&$!=="mapbox"&&$!=="terrarium")return O('"'+$+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=B.height;var he=this.dim=B.height-2;this.data=new Uint32Array(B.data.buffer),this.encoding=$||"mapbox";for(var me=0;me<he;me++)this.data[this._idx(-1,me)]=this.data[this._idx(0,me)],this.data[this._idx(he,me)]=this.data[this._idx(he-1,me)],this.data[this._idx(me,-1)]=this.data[this._idx(me,0)],this.data[this._idx(me,he)]=this.data[this._idx(me,he-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(he,-1)]=this.data[this._idx(he-1,0)],this.data[this._idx(-1,he)]=this.data[this._idx(0,he-1)],this.data[this._idx(he,he)]=this.data[this._idx(he-1,he-1)]};ju.prototype.get=function(C,B){var $=new Uint8Array(this.data.buffer),he=this._idx(C,B)*4,me=this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox;return me($[he],$[he+1],$[he+2])},ju.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},ju.prototype._idx=function(C,B){if(C<-1||C>=this.dim+1||B<-1||B>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(B+1)*this.stride+(C+1)},ju.prototype._unpackMapbox=function(C,B,$){return(C*256*256+B*256+$)/10-1e4},ju.prototype._unpackTerrarium=function(C,B,$){return C*256+B+$/256-32768},ju.prototype.getPixels=function(){return new qs({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},ju.prototype.backfillBorder=function(C,B,$){if(this.dim!==C.dim)throw new Error("dem dimension mismatch");var he=B*this.dim,me=B*this.dim+this.dim,we=$*this.dim,Ie=$*this.dim+this.dim;switch(B){case-1:he=me-1;break;case 1:me=he+1;break}switch($){case-1:we=Ie-1;break;case 1:Ie=we+1;break}for(var $e=-B*this.dim,ut=-$*this.dim,gt=we;gt<Ie;gt++)for(var Rt=he;Rt<me;Rt++)this.data[this._idx(Rt,gt)]=C.data[this._idx(Rt+$e,gt+ut)]},ze("DEMData",ju);function S0(E,C){var B={};if(!C)return B;for(var $=function(){var we=me[he],Ie=we.layerIds.map(function(Rt){return C.getLayer(Rt)}).filter(Boolean);if(Ie.length!==0){we.layers=Ie,we.stateDependentLayerIds&&(we.stateDependentLayers=we.stateDependentLayerIds.map(function(Rt){return Ie.filter(function(Qt){return Qt.id===Rt})[0]}));for(var $e=0,ut=Ie;$e<ut.length;$e+=1){var gt=ut[$e];B[gt.id]=we}}},he=0,me=E;he<me.length;he+=1)$();return B}var Hc=function(C){this._stringToNumber={},this._numberToString=[];for(var B=0;B<C.length;B++){var $=C[B];this._stringToNumber[$]=B,this._numberToString[B]=$}};Hc.prototype.encode=function(C){return this._stringToNumber[C]},Hc.prototype.decode=function(C){return this._numberToString[C]};var Gc=function(C,B,$,he,me){this.type="Feature",this._vectorTileFeature=C,C._z=B,C._x=$,C._y=he,this.properties=C.properties,this.id=me},wh={geometry:{configurable:!0}};wh.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},wh.geometry.set=function(E){this._geometry=E},Gc.prototype.toJSON=function(){var C={geometry:this.geometry};for(var B in this)B==="_geometry"||B==="_vectorTileFeature"||(C[B]=this[B]);return C},Object.defineProperties(Gc.prototype,wh);var jf=function(){this.state={},this.stateChanges={},this.deletedStates={}};jf.prototype.updateState=function(C,B,$){var he=String(B);if(this.stateChanges[C]=this.stateChanges[C]||{},this.stateChanges[C][he]=this.stateChanges[C][he]||{},A(this.stateChanges[C][he],$),this.deletedStates[C]===null){this.deletedStates[C]={};for(var me in this.state[C])me!==he&&(this.deletedStates[C][me]=null)}else{var we=this.deletedStates[C]&&this.deletedStates[C][he]===null;if(we){this.deletedStates[C][he]={};for(var Ie in this.state[C][he])$[Ie]||(this.deletedStates[C][he][Ie]=null)}else for(var $e in $){var ut=this.deletedStates[C]&&this.deletedStates[C][he]&&this.deletedStates[C][he][$e]===null;ut&&delete this.deletedStates[C][he][$e]}}},jf.prototype.removeFeatureState=function(C,B,$){var he=this.deletedStates[C]===null;if(!he){var me=String(B);if(this.deletedStates[C]=this.deletedStates[C]||{},$&&B!==void 0)this.deletedStates[C][me]!==null&&(this.deletedStates[C][me]=this.deletedStates[C][me]||{},this.deletedStates[C][me][$]=null);else if(B!==void 0){var we=this.stateChanges[C]&&this.stateChanges[C][me];if(we){this.deletedStates[C][me]={};for($ in this.stateChanges[C][me])this.deletedStates[C][me][$]=null}else this.deletedStates[C][me]=null}else this.deletedStates[C]=null}},jf.prototype.getState=function(C,B){var $=String(B),he=this.state[C]||{},me=this.stateChanges[C]||{},we=A({},he[$],me[$]);if(this.deletedStates[C]===null)return{};if(this.deletedStates[C]){var Ie=this.deletedStates[C][B];if(Ie===null)return{};for(var $e in Ie)delete we[$e]}return we},jf.prototype.initializeTileState=function(C,B){C.setFeatureState(this.state,B)},jf.prototype.coalesceChanges=function(C,B){var $={};for(var he in this.stateChanges){this.state[he]=this.state[he]||{};var me={};for(var we in this.stateChanges[he])this.state[he][we]||(this.state[he][we]={}),A(this.state[he][we],this.stateChanges[he][we]),me[we]=this.state[he][we];$[he]=me}for(var Ie in this.deletedStates){this.state[Ie]=this.state[Ie]||{};var $e={};if(this.deletedStates[Ie]===null)for(var ut in this.state[Ie])$e[ut]={},this.state[Ie][ut]={};else for(var gt in this.deletedStates[Ie]){var Rt=this.deletedStates[Ie][gt]===null;if(Rt)this.state[Ie][gt]={};else for(var Qt=0,Wt=Object.keys(this.deletedStates[Ie][gt]);Qt<Wt.length;Qt+=1){var vr=Wt[Qt];delete this.state[Ie][gt][vr]}$e[gt]=this.state[Ie][gt]}$[Ie]=$[Ie]||{},A($[Ie],$e)}if(this.stateChanges={},this.deletedStates={},Object.keys($).length!==0)for(var Rr in C){var an=C[Rr];an.setFeatureState($,B)}};var Ku=function(C,B){this.tileID=C,this.x=C.canonical.x,this.y=C.canonical.y,this.z=C.canonical.z,this.grid=new Lo(Na,16,0),this.grid3D=new Lo(Na,16,0),this.featureIndexArray=new rc,this.promoteId=B};Ku.prototype.insert=function(C,B,$,he,me,we){var Ie=this.featureIndexArray.length;this.featureIndexArray.emplaceBack($,he,me);for(var $e=we?this.grid3D:this.grid,ut=0;ut<B.length;ut++){for(var gt=B[ut],Rt=[1/0,1/0,-1/0,-1/0],Qt=0;Qt<gt.length;Qt++){var Wt=gt[Qt];Rt[0]=Math.min(Rt[0],Wt.x),Rt[1]=Math.min(Rt[1],Wt.y),Rt[2]=Math.max(Rt[2],Wt.x),Rt[3]=Math.max(Rt[3],Wt.y)}Rt[0]<Na&&Rt[1]<Na&&Rt[2]>=0&&Rt[3]>=0&&$e.insert(Ie,Rt[0],Rt[1],Rt[2],Rt[3])}},Ku.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Ff.VectorTile(new Dc(this.rawTileData)).layers,this.sourceLayerCoder=new Hc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Ku.prototype.query=function(C,B,$,he){var me=this;this.loadVTLayers();for(var we=C.params||{},Ie=Na/C.tileSize/C.scale,$e=zu(we.filter),ut=C.queryGeometry,gt=C.queryPadding*Ie,Rt=zv(ut),Qt=this.grid.query(Rt.minX-gt,Rt.minY-gt,Rt.maxX+gt,Rt.maxY+gt),Wt=zv(C.cameraQueryGeometry),vr=this.grid3D.query(Wt.minX-gt,Wt.minY-gt,Wt.maxX+gt,Wt.maxY+gt,function(Vn,sa,na,Ia){return Vu(C.cameraQueryGeometry,Vn-gt,sa-gt,na+gt,Ia+gt)}),Rr=0,an=vr;Rr<an.length;Rr+=1){var Jr=an[Rr];Qt.push(Jr)}Qt.sort(k0);for(var Mn={},yn,Tn=function(Vn){var sa=Qt[Vn];if(sa!==yn){yn=sa;var na=me.featureIndexArray.get(sa),Ia=null;me.loadMatchingFeature(Mn,na.bucketIndex,na.sourceLayerIndex,na.featureIndex,$e,we.layers,we.availableImages,B,$,he,function(_a,ka,ei){return Ia||(Ia=Ni(_a)),ka.queryIntersectsFeature(ut,_a,ei,Ia,me.z,C.transform,Ie,C.pixelPosMatrix)})}},Rn=0;Rn<Qt.length;Rn++)Tn(Rn);return Mn},Ku.prototype.loadMatchingFeature=function(C,B,$,he,me,we,Ie,$e,ut,gt,Rt){var Qt=this.bucketLayerIDs[B];if(!(we&&!D(we,Qt))){var Wt=this.sourceLayerCoder.decode($),vr=this.vtLayers[Wt],Rr=vr.feature(he);if(!!me.filter(new ui(this.tileID.overscaledZ),Rr))for(var an=this.getId(Rr,Wt),Jr=0;Jr<Qt.length;Jr++){var Mn=Qt[Jr];if(!(we&&we.indexOf(Mn)<0)){var yn=$e[Mn];if(!!yn){var Tn={};an!==void 0&&gt&&(Tn=gt.getState(yn.sourceLayer||"_geojsonTileLayer",an));var Rn=ut[Mn];Rn.paint=Iv(Rn.paint,yn.paint,Rr,Tn,Ie),Rn.layout=Iv(Rn.layout,yn.layout,Rr,Tn,Ie);var Vn=!Rt||Rt(Rr,yn,Tn);if(!!Vn){var sa=new Gc(Rr,this.z,this.x,this.y,an);sa.layer=Rn;var na=C[Mn];na===void 0&&(na=C[Mn]=[]),na.push({featureIndex:he,feature:sa,intersectionZ:Vn})}}}}}},Ku.prototype.lookupSymbolFeatures=function(C,B,$,he,me,we,Ie,$e){var ut={};this.loadVTLayers();for(var gt=zu(me),Rt=0,Qt=C;Rt<Qt.length;Rt+=1){var Wt=Qt[Rt];this.loadMatchingFeature(ut,$,he,Wt,gt,we,Ie,$e,B)}return ut},Ku.prototype.hasLayer=function(C){for(var B=0,$=this.bucketLayerIDs;B<$.length;B+=1)for(var he=$[B],me=0,we=he;me<we.length;me+=1){var Ie=we[me];if(C===Ie)return!0}return!1},Ku.prototype.getId=function(C,B){var $=C.id;if(this.promoteId){var he=typeof this.promoteId=="string"?this.promoteId:this.promoteId[B];$=C.properties[he],typeof $=="boolean"&&($=Number($))}return $},ze("FeatureIndex",Ku,{omit:["rawTileData","sourceLayerCoder"]});function Iv(E,C,B,$,he){return P(E,function(me,we){var Ie=C instanceof Oi?C.get(we):null;return Ie&&Ie.evaluate?Ie.evaluate(B,$,he):Ie})}function zv(E){for(var C=1/0,B=1/0,$=-1/0,he=-1/0,me=0,we=E;me<we.length;me+=1){var Ie=we[me];C=Math.min(C,Ie.x),B=Math.min(B,Ie.y),$=Math.max($,Ie.x),he=Math.max(he,Ie.y)}return{minX:C,minY:B,maxX:$,maxY:he}}function k0(E,C){return C-E}var E0=3e4,Qo=function(C,B){this.tileID=C,this.uid=x(),this.uses=0,this.tileSize=B,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Qo.prototype.registerFadeDuration=function(C){var B=C+this.timeAdded;B<X.now()||this.fadeEndTime&&B<this.fadeEndTime||(this.fadeEndTime=B)},Qo.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Qo.prototype.loadVectorData=function(C,B,$){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",!C){this.collisionBoxArray=new Uu;return}C.featureIndex&&(this.latestFeatureIndex=C.featureIndex,C.rawTileData?(this.latestRawTileData=C.rawTileData,this.latestFeatureIndex.rawTileData=C.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=C.collisionBoxArray,this.buckets=S0(C.buckets,B.style),this.hasSymbolBuckets=!1;for(var he in this.buckets){var me=this.buckets[he];if(me instanceof Yi)if(this.hasSymbolBuckets=!0,$)me.justReloaded=!0;else break}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var we in this.buckets){var Ie=this.buckets[we];if(Ie instanceof Yi&&Ie.hasRTLText){this.hasRTLText=!0,Si();break}}this.queryPadding=0;for(var $e in this.buckets){var ut=this.buckets[$e];this.queryPadding=Math.max(this.queryPadding,B.style.getLayer($e).queryRadius(ut))}C.imageAtlas&&(this.imageAtlas=C.imageAtlas),C.glyphAtlasImage&&(this.glyphAtlasImage=C.glyphAtlasImage)},Qo.prototype.unloadVectorData=function(){for(var C in this.buckets)this.buckets[C].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Qo.prototype.getBucket=function(C){return this.buckets[C.id]},Qo.prototype.upload=function(C){for(var B in this.buckets){var $=this.buckets[B];$.uploadPending()&&$.upload(C)}var he=C.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new _f(C,this.imageAtlas.image,he.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new _f(C,this.glyphAtlasImage,he.ALPHA),this.glyphAtlasImage=null)},Qo.prototype.prepare=function(C){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(C,this.imageAtlasTexture)},Qo.prototype.queryRenderedFeatures=function(C,B,$,he,me,we,Ie,$e,ut,gt){return!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData?{}:this.latestFeatureIndex.query({queryGeometry:he,cameraQueryGeometry:me,scale:we,tileSize:this.tileSize,pixelPosMatrix:gt,transform:$e,params:Ie,queryPadding:this.queryPadding*ut},C,B,$)},Qo.prototype.querySourceFeatures=function(C,B){var $=this.latestFeatureIndex;if(!(!$||!$.rawTileData)){var he=$.loadVTLayers(),me=B?B.sourceLayer:"",we=he._geojsonTileLayer||he[me];if(!!we)for(var Ie=zu(B&&B.filter),$e=this.tileID.canonical,ut=$e.z,gt=$e.x,Rt=$e.y,Qt={z:ut,x:gt,y:Rt},Wt=0;Wt<we.length;Wt++){var vr=we.feature(Wt);if(Ie.filter(new ui(this.tileID.overscaledZ),vr)){var Rr=$.getId(vr,me),an=new Gc(vr,ut,gt,Rt,Rr);an.tile=Qt,C.push(an)}}}},Qo.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Qo.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Qo.prototype.setExpiryData=function(C){var B=this.expirationTime;if(C.cacheControl){var $=Z(C.cacheControl);$["max-age"]&&(this.expirationTime=Date.now()+$["max-age"]*1e3)}else C.expires&&(this.expirationTime=new Date(C.expires).getTime());if(this.expirationTime){var he=Date.now(),me=!1;if(this.expirationTime>he)me=!1;else if(!B)me=!0;else if(this.expirationTime<B)me=!0;else{var we=this.expirationTime-B;we?this.expirationTime=he+Math.max(we,E0):me=!0}me?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Qo.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Qo.prototype.setFeatureState=function(C,B){if(!(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(C).length===0)){var $=this.latestFeatureIndex.loadVTLayers();for(var he in this.buckets)if(!!B.style.hasLayer(he)){var me=this.buckets[he],we=me.layers[0].sourceLayer||"_geojsonTileLayer",Ie=$[we],$e=C[we];if(!(!Ie||!$e||Object.keys($e).length===0)){me.update($e,Ie,this.imageAtlas&&this.imageAtlas.patternPositions||{});var ut=B&&B.style&&B.style.getLayer(he);ut&&(this.queryPadding=Math.max(this.queryPadding,ut.queryRadius(me)))}}}},Qo.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Qo.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<X.now()},Qo.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Qo.prototype.setHoldDuration=function(C){this.symbolFadeHoldUntil=X.now()+C},Qo.prototype.setDependencies=function(C,B){for(var $={},he=0,me=B;he<me.length;he+=1){var we=me[he];$[we]=!0}this.dependencies[C]=$},Qo.prototype.hasDependency=function(C,B){for(var $=0,he=C;$<he.length;$+=1){var me=he[$],we=this.dependencies[me];if(we)for(var Ie=0,$e=B;Ie<$e.length;Ie+=1){var ut=$e[Ie];if(we[ut])return!0}}return!1};var C0=["type","source","source-layer","minzoom","maxzoom","filter","layout"],lf=self.performance,Fv=function(C){this._marks={start:[C.url,"start"].join("#"),end:[C.url,"end"].join("#"),measure:C.url.toString()},lf.mark(this._marks.start)};Fv.prototype.finish=function(){lf.mark(this._marks.end);var C=lf.getEntriesByName(this._marks.measure);return C.length===0&&(lf.measure(this._marks.measure,this._marks.start,this._marks.end),C=lf.getEntriesByName(this._marks.measure),lf.clearMarks(this._marks.start),lf.clearMarks(this._marks.end),lf.clearMeasures(this._marks.measure)),C},e.Actor=Zf,e.AlphaImage=bf,e.CanonicalTileID=Tf,e.CollisionBoxArray=Uu,e.Color=vi,e.DEMData=ju,e.DataConstantProperty=za,e.DictionaryCoder=Hc,e.EXTENT=Na,e.ErrorEvent=Er,e.EvaluationParameters=ui,e.Event=Hr,e.Evented=_r,e.FeatureIndex=Ku,e.FillBucket=_u,e.FillExtrusionBucket=wu,e.ImageAtlas=vc,e.ImagePosition=Ic,e.LineBucket=el,e.LngLat=co,e.LngLatBounds=No,e.MercatorCoordinate=wf,e.ONE_EM=cs,e.OverscaledTileID=Uo,e.Point=f,e.Point$1=f,e.Properties=Xi,e.Protobuf=Dc,e.RGBAImage=qs,e.RequestManager=De,e.RequestPerformance=Fv,e.ResourceType=nt,e.SegmentVector=H,e.SourceFeatureState=jf,e.StructArrayLayout1ui2=tf,e.StructArrayLayout2f1f2i16=mu,e.StructArrayLayout2i4=vf,e.StructArrayLayout3ui6=xu,e.StructArrayLayout4i8=Fu,e.SymbolBucket=Yi,e.Texture=_f,e.Tile=Qo,e.Transitionable=go,e.Uniform1f=Fr,e.Uniform1i=Or,e.Uniform2f=jr,e.Uniform3f=cn,e.Uniform4f=En,e.UniformColor=Fn,e.UniformMatrix4f=qn,e.UnwrappedTileID=Rv,e.ValidationError=cr,e.WritingMode=Sl,e.ZoomHistory=jt,e.add=Rf,e.addDynamicAttributes=mh,e.asyncAll=l,e.bezier=p,e.bindAll=S,e.browser=X,e.cacheEntryPossiblyAdded=rr,e.clamp=c,e.clearTileCache=pr,e.clipLine=gv,e.clone=Mc,e.clone$1=I,e.clone$2=Qc,e.collisionCircleLayout=ud,e.config=ee,e.create=Lf,e.create$1=mf,e.create$2=yf,e.createCommonjsModule=a,e.createExpression=Bl,e.createLayout=Do,e.createStyleLayer=b0,e.cross=Nv,e.deepEqual=i,e.dot=Ov,e.dot$1=Yv,e.ease=y,e.emitValidationErrors=po,e.endsWith=k,e.enforceCacheSizeLimit=er,e.evaluateSizeForFeature=uv,e.evaluateSizeForZoom=fv,e.evaluateVariableOffset=xv,e.evented=yi,e.extend=A,e.featureFilter=zu,e.filterObject=z,e.fromRotation=Cf,e.getAnchorAlignment=ph,e.getAnchorJustification=yh,e.getArrayBuffer=ft,e.getImage=kt,e.getJSON=st,e.getRTLTextPluginStatus=fo,e.getReferrer=Kt,e.getVideo=Nt,e.identity=Pf,e.invert=nf,e.isChar=Jt,e.isMapboxURL=Be,e.keysDifference=s,e.makeRequest=je,e.mapObject=P,e.mercatorXfromLng=Lv,e.mercatorYfromLat=Pv,e.mercatorZfromAltitude=Dv,e.mul=Jc,e.multiply=af,e.mvt=Ff,e.normalize=ac,e.number=oo,e.offscreenCanvasSupported=Qr,e.ortho=Kc,e.parseGlyphPBF=Fd,e.pbf=Dc,e.performSymbolLayout=e0,e.perspective=nc,e.pick=m,e.plugin=Wa,e.polygonIntersectsPolygon=ii,e.postMapLoadEvent=Mt,e.postTurnstileEvent=Ut,e.potpack=tv,e.refProperties=C0,e.register=ze,e.registerForPluginStateChange=Ii,e.rotate=ks,e.rotateX=$s,e.rotateZ=Df,e.scale=Qs,e.scale$1=Gv,e.scale$2=qc,e.setCacheLimits=Xr,e.setRTLTextPlugin=fa,e.sphericalToCartesian=G,e.sqrLen=Zv,e.styleSpec=Ft,e.sub=Vv,e.symbolSize=Wd,e.transformMat3=Uv,e.transformMat4=Sc,e.translate=Eo,e.triggerPluginCompletionEvent=Da,e.uniqueId=x,e.validateCustomStyleLayer=y0,e.validateLight=bi,e.validateStyle=bo,e.values=_,e.vectorTile=Ff,e.version=n,e.warnOnce=O,e.webpSupported=te,e.window=self,e.wrap=b}),T(["./shared"],function(e){function a(tt){var je=typeof tt;if(je==="number"||je==="boolean"||je==="string"||tt===void 0||tt===null)return JSON.stringify(tt);if(Array.isArray(tt)){for(var st="[",ft=0,Me=tt;ft<Me.length;ft+=1){var Se=Me[ft];st+=a(Se)+","}return st+"]"}for(var Ke=Object.keys(tt).sort(),Xe="{",it=0;it<Ke.length;it++)Xe+=JSON.stringify(Ke[it])+":"+a(tt[Ke[it]])+",";return Xe+"}"}function n(tt){for(var je="",st=0,ft=e.refProperties;st<ft.length;st+=1){var Me=ft[st];je+="/"+a(tt[Me])}return je}function r(tt,je){for(var st={},ft=0;ft<tt.length;ft++){var Me=je&&je[tt[ft].id]||n(tt[ft]);je&&(je[tt[ft].id]=Me);var Se=st[Me];Se||(Se=st[Me]=[]),Se.push(tt[ft])}var Ke=[];for(var Xe in st)Ke.push(st[Xe]);return Ke}var t=function(je){this.keyCache={},je&&this.replace(je)};t.prototype.replace=function(je){this._layerConfigs={},this._layers={},this.update(je,[])},t.prototype.update=function(je,st){for(var ft=this,Me=0,Se=je;Me<Se.length;Me+=1){var Ke=Se[Me];this._layerConfigs[Ke.id]=Ke;var Xe=this._layers[Ke.id]=e.createStyleLayer(Ke);Xe._featureFilter=e.featureFilter(Xe.filter),this.keyCache[Ke.id]&&delete this.keyCache[Ke.id]}for(var it=0,pt=st;it<pt.length;it+=1){var vt=pt[it];delete this.keyCache[vt],delete this._layerConfigs[vt],delete this._layers[vt]}this.familiesBySource={};for(var St=r(e.values(this._layerConfigs),this.keyCache),kt=0,Nt=St;kt<Nt.length;kt+=1){var nr=Nt[kt],fr=nr.map(function(xr){return ft._layers[xr.id]}),Hr=fr[0];if(Hr.visibility!=="none"){var Er=Hr.source||"",_r=this.familiesBySource[Er];_r||(_r=this.familiesBySource[Er]={});var en=Hr.sourceLayer||"_geojsonTileLayer",dr=_r[en];dr||(dr=_r[en]=[]),dr.push(fr)}}};var f=1,o=function(je){var st={},ft=[];for(var Me in je){var Se=je[Me],Ke=st[Me]={};for(var Xe in Se){var it=Se[+Xe];if(!(!it||it.bitmap.width===0||it.bitmap.height===0)){var pt={x:0,y:0,w:it.bitmap.width+2*f,h:it.bitmap.height+2*f};ft.push(pt),Ke[Xe]={rect:pt,metrics:it.metrics}}}}var vt=e.potpack(ft),St=vt.w,kt=vt.h,Nt=new e.AlphaImage({width:St||1,height:kt||1});for(var nr in je){var fr=je[nr];for(var Hr in fr){var Er=fr[+Hr];if(!(!Er||Er.bitmap.width===0||Er.bitmap.height===0)){var _r=st[nr][Hr].rect;e.AlphaImage.copy(Er.bitmap,Nt,{x:0,y:0},{x:_r.x+f,y:_r.y+f},Er.bitmap)}}}this.image=Nt,this.positions=st};e.register("GlyphAtlas",o);var i=function(je){this.tileID=new e.OverscaledTileID(je.tileID.overscaledZ,je.tileID.wrap,je.tileID.canonical.z,je.tileID.canonical.x,je.tileID.canonical.y),this.uid=je.uid,this.zoom=je.zoom,this.pixelRatio=je.pixelRatio,this.tileSize=je.tileSize,this.source=je.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=je.showCollisionBoxes,this.collectResourceTiming=!!je.collectResourceTiming,this.returnDependencies=!!je.returnDependencies,this.promoteId=je.promoteId};i.prototype.parse=function(je,st,ft,Me,Se){var Ke=this;this.status="parsing",this.data=je,this.collisionBoxArray=new e.CollisionBoxArray;var Xe=new e.DictionaryCoder(Object.keys(je.layers).sort()),it=new e.FeatureIndex(this.tileID,this.promoteId);it.bucketLayerIDs=[];var pt={},vt={featureIndex:it,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ft},St=st.familiesBySource[this.source];for(var kt in St){var Nt=je.layers[kt];if(!!Nt){Nt.version===1&&e.warnOnce('Vector tile source "'+this.source+'" layer "'+kt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var nr=Xe.encode(kt),fr=[],Hr=0;Hr<Nt.length;Hr++){var Er=Nt.feature(Hr),_r=it.getId(Er,kt);fr.push({feature:Er,id:_r,index:Hr,sourceLayerIndex:nr})}for(var en=0,dr=St[kt];en<dr.length;en+=1){var xr=dr[en],Ur=xr[0];if(!(Ur.minzoom&&this.zoom<Math.floor(Ur.minzoom))&&!(Ur.maxzoom&&this.zoom>=Ur.maxzoom)&&Ur.visibility!=="none"){g(xr,this.zoom,ft);var Yr=pt[Ur.id]=Ur.createBucket({index:it.bucketLayerIDs.length,layers:xr,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:nr,sourceID:this.source});Yr.populate(fr,vt,this.tileID.canonical),it.bucketLayerIDs.push(xr.map(function(wr){return wr.id}))}}}}var Ar,et,Lt,Zt,sr=e.mapObject(vt.glyphDependencies,function(wr){return Object.keys(wr).map(Number)});Object.keys(sr).length?Me.send("getGlyphs",{uid:this.uid,stacks:sr},function(wr,Nr){Ar||(Ar=wr,et=Nr,Pr.call(Ke))}):et={};var Ir=Object.keys(vt.iconDependencies);Ir.length?Me.send("getImages",{icons:Ir,source:this.source,tileID:this.tileID,type:"icons"},function(wr,Nr){Ar||(Ar=wr,Lt=Nr,Pr.call(Ke))}):Lt={};var Zr=Object.keys(vt.patternDependencies);Zr.length?Me.send("getImages",{icons:Zr,source:this.source,tileID:this.tileID,type:"patterns"},function(wr,Nr){Ar||(Ar=wr,Zt=Nr,Pr.call(Ke))}):Zt={},Pr.call(this);function Pr(){if(Ar)return Se(Ar);if(et&&Lt&&Zt){var wr=new o(et),Nr=new e.ImageAtlas(Lt,Zt);for(var Sn in pt){var _n=pt[Sn];_n instanceof e.SymbolBucket?(g(_n.layers,this.zoom,ft),e.performSymbolLayout(_n,et,wr.positions,Lt,Nr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):_n.hasPattern&&(_n instanceof e.LineBucket||_n instanceof e.FillBucket||_n instanceof e.FillExtrusionBucket)&&(g(_n.layers,this.zoom,ft),_n.addFeatures(vt,this.tileID.canonical,Nr.patternPositions))}this.status="done",Se(null,{buckets:e.values(pt).filter(function(Wn){return!Wn.isEmpty()}),featureIndex:it,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:wr.image,imageAtlas:Nr,glyphMap:this.returnDependencies?et:null,iconMap:this.returnDependencies?Lt:null,glyphPositions:this.returnDependencies?wr.positions:null})}}};function g(tt,je,st){for(var ft=new e.EvaluationParameters(je),Me=0,Se=tt;Me<Se.length;Me+=1){var Ke=Se[Me];Ke.recalculate(ft,st)}}function p(tt,je){var st=e.getArrayBuffer(tt.request,function(ft,Me,Se,Ke){ft?je(ft):Me&&je(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf(Me)),rawData:Me,cacheControl:Se,expires:Ke})});return function(){st.cancel(),je()}}var y=function(je,st,ft,Me){this.actor=je,this.layerIndex=st,this.availableImages=ft,this.loadVectorData=Me||p,this.loading={},this.loaded={}};y.prototype.loadTile=function(je,st){var ft=this,Me=je.uid;this.loading||(this.loading={});var Se=je&&je.request&&je.request.collectResourceTiming?new e.RequestPerformance(je.request):!1,Ke=this.loading[Me]=new i(je);Ke.abort=this.loadVectorData(je,function(Xe,it){if(delete ft.loading[Me],Xe||!it)return Ke.status="done",ft.loaded[Me]=Ke,st(Xe);var pt=it.rawData,vt={};it.expires&&(vt.expires=it.expires),it.cacheControl&&(vt.cacheControl=it.cacheControl);var St={};if(Se){var kt=Se.finish();kt&&(St.resourceTiming=JSON.parse(JSON.stringify(kt)))}Ke.vectorTile=it.vectorTile,Ke.parse(it.vectorTile,ft.layerIndex,ft.availableImages,ft.actor,function(Nt,nr){if(Nt||!nr)return st(Nt);st(null,e.extend({rawTileData:pt.slice(0)},nr,vt,St))}),ft.loaded=ft.loaded||{},ft.loaded[Me]=Ke})},y.prototype.reloadTile=function(je,st){var ft=this,Me=this.loaded,Se=je.uid,Ke=this;if(Me&&Me[Se]){var Xe=Me[Se];Xe.showCollisionBoxes=je.showCollisionBoxes;var it=function(pt,vt){var St=Xe.reloadCallback;St&&(delete Xe.reloadCallback,Xe.parse(Xe.vectorTile,Ke.layerIndex,ft.availableImages,Ke.actor,St)),st(pt,vt)};Xe.status==="parsing"?Xe.reloadCallback=it:Xe.status==="done"&&(Xe.vectorTile?Xe.parse(Xe.vectorTile,this.layerIndex,this.availableImages,this.actor,it):it())}},y.prototype.abortTile=function(je,st){var ft=this.loading,Me=je.uid;ft&&ft[Me]&&ft[Me].abort&&(ft[Me].abort(),delete ft[Me]),st()},y.prototype.removeTile=function(je,st){var ft=this.loaded,Me=je.uid;ft&&ft[Me]&&delete ft[Me],st()};var c=e.window.ImageBitmap,b=function(){this.loaded={}};b.prototype.loadTile=function(je,st){var ft=je.uid,Me=je.encoding,Se=je.rawImageData,Ke=c&&Se instanceof c?this.getImageData(Se):Se,Xe=new e.DEMData(ft,Ke,Me);this.loaded=this.loaded||{},this.loaded[ft]=Xe,st(null,Xe)},b.prototype.getImageData=function(je){(!this.offscreenCanvas||!this.offscreenCanvasContext)&&(this.offscreenCanvas=new OffscreenCanvas(je.width,je.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=je.width,this.offscreenCanvas.height=je.height,this.offscreenCanvasContext.drawImage(je,0,0,je.width,je.height);var st=this.offscreenCanvasContext.getImageData(-1,-1,je.width+2,je.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:st.width,height:st.height},st.data)},b.prototype.removeTile=function(je){var st=this.loaded,ft=je.uid;st&&st[ft]&&delete st[ft]};var l=_;function _(tt,je){var st=tt&&tt.type,ft;if(st==="FeatureCollection")for(ft=0;ft<tt.features.length;ft++)_(tt.features[ft],je);else if(st==="GeometryCollection")for(ft=0;ft<tt.geometries.length;ft++)_(tt.geometries[ft],je);else if(st==="Feature")_(tt.geometry,je);else if(st==="Polygon")s(tt.coordinates,je);else if(st==="MultiPolygon")for(ft=0;ft<tt.coordinates.length;ft++)s(tt.coordinates[ft],je);return tt}function s(tt,je){if(tt.length!==0){A(tt[0],je);for(var st=1;st<tt.length;st++)A(tt[st],!je)}}function A(tt,je){for(var st=0,ft=0,Me=tt.length,Se=Me-1;ft<Me;Se=ft++)st+=(tt[ft][0]-tt[Se][0])*(tt[Se][1]+tt[ft][1]);st>=0!=!!je&&tt.reverse()}var m=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,h=function(je){this._feature=je,this.extent=e.EXTENT,this.type=je.type,this.properties=je.tags,"id"in je&&!isNaN(je.id)&&(this.id=parseInt(je.id,10))};h.prototype.loadGeometry=function(){if(this._feature.type===1){for(var je=[],st=0,ft=this._feature.geometry;st<ft.length;st+=1){var Me=ft[st];je.push([new e.Point$1(Me[0],Me[1])])}return je}else{for(var Se=[],Ke=0,Xe=this._feature.geometry;Ke<Xe.length;Ke+=1){for(var it=Xe[Ke],pt=[],vt=0,St=it;vt<St.length;vt+=1){var kt=St[vt];pt.push(new e.Point$1(kt[0],kt[1]))}Se.push(pt)}return Se}},h.prototype.toGeoJSON=function(je,st,ft){return m.call(this,je,st,ft)};var x=function(je){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=je.length,this._features=je};x.prototype.feature=function(je){return new h(this._features[je])};var u=e.vectorTile.VectorTileFeature,L=S;function S(tt,je){this.options=je||{},this.features=tt,this.length=tt.length}S.prototype.feature=function(tt){return new k(this.features[tt],this.options.extent)};function k(tt,je){this.id=typeof tt.id=="number"?tt.id:void 0,this.type=tt.type,this.rawGeometry=tt.type===1?[tt.geometry]:tt.geometry,this.properties=tt.tags,this.extent=je||4096}k.prototype.loadGeometry=function(){var tt=this.rawGeometry;this.geometry=[];for(var je=0;je<tt.length;je++){for(var st=tt[je],ft=[],Me=0;Me<st.length;Me++)ft.push(new e.Point$1(st[Me][0],st[Me][1]));this.geometry.push(ft)}return this.geometry},k.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var tt=this.geometry,je=1/0,st=-1/0,ft=1/0,Me=-1/0,Se=0;Se<tt.length;Se++)for(var Ke=tt[Se],Xe=0;Xe<Ke.length;Xe++){var it=Ke[Xe];je=Math.min(je,it.x),st=Math.max(st,it.x),ft=Math.min(ft,it.y),Me=Math.max(Me,it.y)}return[je,ft,st,Me]},k.prototype.toGeoJSON=u.prototype.toGeoJSON;var P=R,z=R,I=O,D=L;function R(tt){var je=new e.pbf;return F(tt,je),je.finish()}function O(tt,je){je=je||{};var st={};for(var ft in tt)st[ft]=new L(tt[ft].features,je),st[ft].name=ft,st[ft].version=je.version,st[ft].extent=je.extent;return R({layers:st})}function F(tt,je){for(var st in tt.layers)je.writeMessage(3,V,tt.layers[st])}function V(tt,je){je.writeVarintField(15,tt.version||1),je.writeStringField(1,tt.name||""),je.writeVarintField(5,tt.extent||4096);var st,ft={keys:[],values:[],keycache:{},valuecache:{}};for(st=0;st<tt.length;st++)ft.feature=tt.feature(st),je.writeMessage(2,G,ft);var Me=ft.keys;for(st=0;st<Me.length;st++)je.writeStringField(3,Me[st]);var Se=ft.values;for(st=0;st<Se.length;st++)je.writeMessage(4,re,Se[st])}function G(tt,je){var st=tt.feature;st.id!==void 0&&je.writeVarintField(1,st.id),je.writeMessage(2,J,tt),je.writeVarintField(3,st.type),je.writeMessage(4,j,st)}function J(tt,je){var st=tt.feature,ft=tt.keys,Me=tt.values,Se=tt.keycache,Ke=tt.valuecache;for(var Xe in st.properties){var it=Se[Xe];typeof it>"u"&&(ft.push(Xe),it=ft.length-1,Se[Xe]=it),je.writeVarint(it);var pt=st.properties[Xe],vt=typeof pt;vt!=="string"&&vt!=="boolean"&&vt!=="number"&&(pt=JSON.stringify(pt));var St=vt+":"+pt,kt=Ke[St];typeof kt>"u"&&(Me.push(pt),kt=Me.length-1,Ke[St]=kt),je.writeVarint(kt)}}function Z(tt,je){return(je<<3)+(tt&7)}function Y(tt){return tt<<1^tt>>31}function j(tt,je){for(var st=tt.loadGeometry(),ft=tt.type,Me=0,Se=0,Ke=st.length,Xe=0;Xe<Ke;Xe++){var it=st[Xe],pt=1;ft===1&&(pt=it.length),je.writeVarint(Z(1,pt));for(var vt=ft===3?it.length-1:it.length,St=0;St<vt;St++){St===1&&ft!==1&&je.writeVarint(Z(2,vt-1));var kt=it[St].x-Me,Nt=it[St].y-Se;je.writeVarint(Y(kt)),je.writeVarint(Y(Nt)),Me+=kt,Se+=Nt}ft===3&&je.writeVarint(Z(7,1))}}function re(tt,je){var st=typeof tt;st==="string"?je.writeStringField(1,tt):st==="boolean"?je.writeBooleanField(7,tt):st==="number"&&(tt%1!==0?je.writeDoubleField(3,tt):tt<0?je.writeSVarintField(6,tt):je.writeVarintField(5,tt))}P.fromVectorTileJs=z,P.fromGeojsonVt=I,P.GeoJSONWrapper=D;function se(tt,je,st,ft,Me,Se){if(!(Me-ft<=st)){var Ke=ft+Me>>1;oe(tt,je,Ke,ft,Me,Se%2),se(tt,je,st,ft,Ke-1,Se+1),se(tt,je,st,Ke+1,Me,Se+1)}}function oe(tt,je,st,ft,Me,Se){for(;Me>ft;){if(Me-ft>600){var Ke=Me-ft+1,Xe=st-ft+1,it=Math.log(Ke),pt=.5*Math.exp(2*it/3),vt=.5*Math.sqrt(it*pt*(Ke-pt)/Ke)*(Xe-Ke/2<0?-1:1),St=Math.max(ft,Math.floor(st-Xe*pt/Ke+vt)),kt=Math.min(Me,Math.floor(st+(Ke-Xe)*pt/Ke+vt));oe(tt,je,st,St,kt,Se)}var Nt=je[2*st+Se],nr=ft,fr=Me;for(N(tt,je,ft,st),je[2*Me+Se]>Nt&&N(tt,je,ft,Me);nr<fr;){for(N(tt,je,nr,fr),nr++,fr--;je[2*nr+Se]<Nt;)nr++;for(;je[2*fr+Se]>Nt;)fr--}je[2*ft+Se]===Nt?N(tt,je,ft,fr):(fr++,N(tt,je,fr,Me)),fr<=st&&(ft=fr+1),st<=fr&&(Me=fr-1)}}function N(tt,je,st,ft){U(tt,st,ft),U(je,2*st,2*ft),U(je,2*st+1,2*ft+1)}function U(tt,je,st){var ft=tt[je];tt[je]=tt[st],tt[st]=ft}function q(tt,je,st,ft,Me,Se,Ke){for(var Xe=[0,tt.length-1,0],it=[],pt,vt;Xe.length;){var St=Xe.pop(),kt=Xe.pop(),Nt=Xe.pop();if(kt-Nt<=Ke){for(var nr=Nt;nr<=kt;nr++)pt=je[2*nr],vt=je[2*nr+1],pt>=st&&pt<=Me&&vt>=ft&&vt<=Se&&it.push(tt[nr]);continue}var fr=Math.floor((Nt+kt)/2);pt=je[2*fr],vt=je[2*fr+1],pt>=st&&pt<=Me&&vt>=ft&&vt<=Se&&it.push(tt[fr]);var Hr=(St+1)%2;(St===0?st<=pt:ft<=vt)&&(Xe.push(Nt),Xe.push(fr-1),Xe.push(Hr)),(St===0?Me>=pt:Se>=vt)&&(Xe.push(fr+1),Xe.push(kt),Xe.push(Hr))}return it}function Q(tt,je,st,ft,Me,Se){for(var Ke=[0,tt.length-1,0],Xe=[],it=Me*Me;Ke.length;){var pt=Ke.pop(),vt=Ke.pop(),St=Ke.pop();if(vt-St<=Se){for(var kt=St;kt<=vt;kt++)W(je[2*kt],je[2*kt+1],st,ft)<=it&&Xe.push(tt[kt]);continue}var Nt=Math.floor((St+vt)/2),nr=je[2*Nt],fr=je[2*Nt+1];W(nr,fr,st,ft)<=it&&Xe.push(tt[Nt]);var Hr=(pt+1)%2;(pt===0?st-Me<=nr:ft-Me<=fr)&&(Ke.push(St),Ke.push(Nt-1),Ke.push(Hr)),(pt===0?st+Me>=nr:ft+Me>=fr)&&(Ke.push(Nt+1),Ke.push(vt),Ke.push(Hr))}return Xe}function W(tt,je,st,ft){var Me=tt-st,Se=je-ft;return Me*Me+Se*Se}var X=function(tt){return tt[0]},ee=function(tt){return tt[1]},te=function(je,st,ft,Me,Se){st===void 0&&(st=X),ft===void 0&&(ft=ee),Me===void 0&&(Me=64),Se===void 0&&(Se=Float64Array),this.nodeSize=Me,this.points=je;for(var Ke=je.length<65536?Uint16Array:Uint32Array,Xe=this.ids=new Ke(je.length),it=this.coords=new Se(je.length*2),pt=0;pt<je.length;pt++)Xe[pt]=pt,it[2*pt]=st(je[pt]),it[2*pt+1]=ft(je[pt]);se(Xe,it,Me,0,Xe.length-1,0)};te.prototype.range=function(je,st,ft,Me){return q(this.ids,this.coords,je,st,ft,Me,this.nodeSize)},te.prototype.within=function(je,st,ft){return Q(this.ids,this.coords,je,st,ft,this.nodeSize)};var ie={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(tt){return tt}},le=function(je){this.options=Ue(Object.create(ie),je),this.trees=new Array(this.options.maxZoom+1)};le.prototype.load=function(je){var st=this.options,ft=st.log,Me=st.minZoom,Se=st.maxZoom,Ke=st.nodeSize;ft&&console.time("total time");var Xe="prepare "+je.length+" points";ft&&console.time(Xe),this.points=je;for(var it=[],pt=0;pt<je.length;pt++)!je[pt].geometry||it.push(fe(je[pt],pt));this.trees[Se+1]=new te(it,xe,Pe,Ke,Float32Array),ft&&console.timeEnd(Xe);for(var vt=Se;vt>=Me;vt--){var St=+Date.now();it=this._cluster(it,vt),this.trees[vt]=new te(it,xe,Pe,Ke,Float32Array),ft&&console.log("z%d: %d clusters in %dms",vt,it.length,+Date.now()-St)}return ft&&console.timeEnd("total time"),this},le.prototype.getClusters=function(je,st){var ft=((je[0]+180)%360+360)%360-180,Me=Math.max(-90,Math.min(90,je[1])),Se=je[2]===180?180:((je[2]+180)%360+360)%360-180,Ke=Math.max(-90,Math.min(90,je[3]));if(je[2]-je[0]>=360)ft=-180,Se=180;else if(ft>Se){var Xe=this.getClusters([ft,Me,180,Ke],st),it=this.getClusters([-180,Me,Se,Ke],st);return Xe.concat(it)}for(var pt=this.trees[this._limitZoom(st)],vt=pt.range(Te(ft),_e(Ke),Te(Se),_e(Me)),St=[],kt=0,Nt=vt;kt<Nt.length;kt+=1){var nr=Nt[kt],fr=pt.points[nr];St.push(fr.numPoints?pe(fr):this.points[fr.index])}return St},le.prototype.getChildren=function(je){var st=this._getOriginId(je),ft=this._getOriginZoom(je),Me="No cluster with the specified id.",Se=this.trees[ft];if(!Se)throw new Error(Me);var Ke=Se.points[st];if(!Ke)throw new Error(Me);for(var Xe=this.options.radius/(this.options.extent*Math.pow(2,ft-1)),it=Se.within(Ke.x,Ke.y,Xe),pt=[],vt=0,St=it;vt<St.length;vt+=1){var kt=St[vt],Nt=Se.points[kt];Nt.parentId===je&&pt.push(Nt.numPoints?pe(Nt):this.points[Nt.index])}if(pt.length===0)throw new Error(Me);return pt},le.prototype.getLeaves=function(je,st,ft){st=st||10,ft=ft||0;var Me=[];return this._appendLeaves(Me,je,st,ft,0),Me},le.prototype.getTile=function(je,st,ft){var Me=this.trees[this._limitZoom(je)],Se=Math.pow(2,je),Ke=this.options,Xe=Ke.extent,it=Ke.radius,pt=it/Xe,vt=(ft-pt)/Se,St=(ft+1+pt)/Se,kt={features:[]};return this._addTileFeatures(Me.range((st-pt)/Se,vt,(st+1+pt)/Se,St),Me.points,st,ft,Se,kt),st===0&&this._addTileFeatures(Me.range(1-pt/Se,vt,1,St),Me.points,Se,ft,Se,kt),st===Se-1&&this._addTileFeatures(Me.range(0,vt,pt/Se,St),Me.points,-1,ft,Se,kt),kt.features.length?kt:null},le.prototype.getClusterExpansionZoom=function(je){for(var st=this._getOriginZoom(je)-1;st<=this.options.maxZoom;){var ft=this.getChildren(je);if(st++,ft.length!==1)break;je=ft[0].properties.cluster_id}return st},le.prototype._appendLeaves=function(je,st,ft,Me,Se){for(var Ke=this.getChildren(st),Xe=0,it=Ke;Xe<it.length;Xe+=1){var pt=it[Xe],vt=pt.properties;if(vt&&vt.cluster?Se+vt.point_count<=Me?Se+=vt.point_count:Se=this._appendLeaves(je,vt.cluster_id,ft,Me,Se):Se<Me?Se++:je.push(pt),je.length===ft)break}return Se},le.prototype._addTileFeatures=function(je,st,ft,Me,Se,Ke){for(var Xe=0,it=je;Xe<it.length;Xe+=1){var pt=it[Xe],vt=st[pt],St=vt.numPoints,kt={type:1,geometry:[[Math.round(this.options.extent*(vt.x*Se-ft)),Math.round(this.options.extent*(vt.y*Se-Me))]],tags:St?ye(vt):this.points[vt.index].properties},Nt=void 0;St?Nt=vt.id:this.options.generateId?Nt=vt.index:this.points[vt.index].id&&(Nt=this.points[vt.index].id),Nt!==void 0&&(kt.id=Nt),Ke.features.push(kt)}},le.prototype._limitZoom=function(je){return Math.max(this.options.minZoom,Math.min(je,this.options.maxZoom+1))},le.prototype._cluster=function(je,st){for(var ft=[],Me=this.options,Se=Me.radius,Ke=Me.extent,Xe=Me.reduce,it=Se/(Ke*Math.pow(2,st)),pt=0;pt<je.length;pt++){var vt=je[pt];if(!(vt.zoom<=st)){vt.zoom=st;for(var St=this.trees[st+1],kt=St.within(vt.x,vt.y,it),Nt=vt.numPoints||1,nr=vt.x*Nt,fr=vt.y*Nt,Hr=Xe&&Nt>1?this._map(vt,!0):null,Er=(pt<<5)+(st+1)+this.points.length,_r=0,en=kt;_r<en.length;_r+=1){var dr=en[_r],xr=St.points[dr];if(!(xr.zoom<=st)){xr.zoom=st;var Ur=xr.numPoints||1;nr+=xr.x*Ur,fr+=xr.y*Ur,Nt+=Ur,xr.parentId=Er,Xe&&(Hr||(Hr=this._map(vt,!0)),Xe(Hr,this._map(xr)))}}Nt===1?ft.push(vt):(vt.parentId=Er,ft.push(ge(nr/Nt,fr/Nt,Er,Nt,Hr)))}}return ft},le.prototype._getOriginId=function(je){return je-this.points.length>>5},le.prototype._getOriginZoom=function(je){return(je-this.points.length)%32},le.prototype._map=function(je,st){if(je.numPoints)return st?Ue({},je.properties):je.properties;var ft=this.points[je.index].properties,Me=this.options.map(ft);return st&&Me===ft?Ue({},Me):Me};function ge(tt,je,st,ft,Me){return{x:tt,y:je,zoom:1/0,id:st,parentId:-1,numPoints:ft,properties:Me}}function fe(tt,je){var st=tt.geometry.coordinates,ft=st[0],Me=st[1];return{x:Te(ft),y:_e(Me),zoom:1/0,index:je,parentId:-1}}function pe(tt){return{type:"Feature",id:tt.id,properties:ye(tt),geometry:{type:"Point",coordinates:[De(tt.x),Be(tt.y)]}}}function ye(tt){var je=tt.numPoints,st=je>=1e4?Math.round(je/1e3)+"k":je>=1e3?Math.round(je/100)/10+"k":je;return Ue(Ue({},tt.properties),{cluster:!0,cluster_id:tt.id,point_count:je,point_count_abbreviated:st})}function Te(tt){return tt/360+.5}function _e(tt){var je=Math.sin(tt*Math.PI/180),st=.5-.25*Math.log((1+je)/(1-je))/Math.PI;return st<0?0:st>1?1:st}function De(tt){return(tt-.5)*360}function Be(tt){var je=(180-tt*360)*Math.PI/180;return 360*Math.atan(Math.exp(je))/Math.PI-90}function Ue(tt,je){for(var st in je)tt[st]=je[st];return tt}function xe(tt){return tt.x}function Pe(tt){return tt.y}function Ve(tt,je,st,ft){for(var Me=ft,Se=st-je>>1,Ke=st-je,Xe,it=tt[je],pt=tt[je+1],vt=tt[st],St=tt[st+1],kt=je+3;kt<st;kt+=3){var Nt=Qe(tt[kt],tt[kt+1],it,pt,vt,St);if(Nt>Me)Xe=kt,Me=Nt;else if(Nt===Me){var nr=Math.abs(kt-Se);nr<Ke&&(Xe=kt,Ke=nr)}}Me>ft&&(Xe-je>3&&Ve(tt,je,Xe,ft),tt[Xe+2]=Me,st-Xe>3&&Ve(tt,Xe,st,ft))}function Qe(tt,je,st,ft,Me,Se){var Ke=Me-st,Xe=Se-ft;if(Ke!==0||Xe!==0){var it=((tt-st)*Ke+(je-ft)*Xe)/(Ke*Ke+Xe*Xe);it>1?(st=Me,ft=Se):it>0&&(st+=Ke*it,ft+=Xe*it)}return Ke=tt-st,Xe=je-ft,Ke*Ke+Xe*Xe}function Fe(tt,je,st,ft){var Me={id:typeof tt>"u"?null:tt,type:je,geometry:st,tags:ft,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return Le(Me),Me}function Le(tt){var je=tt.geometry,st=tt.type;if(st==="Point"||st==="MultiPoint"||st==="LineString")Ne(tt,je);else if(st==="Polygon"||st==="MultiLineString")for(var ft=0;ft<je.length;ft++)Ne(tt,je[ft]);else if(st==="MultiPolygon")for(ft=0;ft<je.length;ft++)for(var Me=0;Me<je[ft].length;Me++)Ne(tt,je[ft][Me])}function Ne(tt,je){for(var st=0;st<je.length;st+=3)tt.minX=Math.min(tt.minX,je[st]),tt.minY=Math.min(tt.minY,je[st+1]),tt.maxX=Math.max(tt.maxX,je[st]),tt.maxY=Math.max(tt.maxY,je[st+1])}function dt(tt,je){var st=[];if(tt.type==="FeatureCollection")for(var ft=0;ft<tt.features.length;ft++)Dt(st,tt.features[ft],je,ft);else tt.type==="Feature"?Dt(st,tt,je):Dt(st,{geometry:tt},je);return st}function Dt(tt,je,st,ft){if(!!je.geometry){var Me=je.geometry.coordinates,Se=je.geometry.type,Ke=Math.pow(st.tolerance/((1<<st.maxZoom)*st.extent),2),Xe=[],it=je.id;if(st.promoteId?it=je.properties[st.promoteId]:st.generateId&&(it=ft||0),Se==="Point")Xt(Me,Xe);else if(Se==="MultiPoint")for(var pt=0;pt<Me.length;pt++)Xt(Me[pt],Xe);else if(Se==="LineString")At(Me,Xe,Ke,!1);else if(Se==="MultiLineString")if(st.lineMetrics){for(pt=0;pt<Me.length;pt++)Xe=[],At(Me[pt],Xe,Ke,!1),tt.push(Fe(it,"LineString",Xe,je.properties));return}else zt(Me,Xe,Ke,!1);else if(Se==="Polygon")zt(Me,Xe,Ke,!0);else if(Se==="MultiPolygon")for(pt=0;pt<Me.length;pt++){var vt=[];zt(Me[pt],vt,Ke,!0),Xe.push(vt)}else if(Se==="GeometryCollection"){for(pt=0;pt<je.geometry.geometries.length;pt++)Dt(tt,{id:it,geometry:je.geometry.geometries[pt],properties:je.properties},st,ft);return}else throw new Error("Input data is not a valid GeoJSON object.");tt.push(Fe(it,Se,Xe,je.properties))}}function Xt(tt,je){je.push(Ut(tt[0])),je.push(Ct(tt[1])),je.push(0)}function At(tt,je,st,ft){for(var Me,Se,Ke=0,Xe=0;Xe<tt.length;Xe++){var it=Ut(tt[Xe][0]),pt=Ct(tt[Xe][1]);je.push(it),je.push(pt),je.push(0),Xe>0&&(ft?Ke+=(Me*pt-it*Se)/2:Ke+=Math.sqrt(Math.pow(it-Me,2)+Math.pow(pt-Se,2))),Me=it,Se=pt}var vt=je.length-3;je[2]=1,Ve(je,0,vt,st),je[vt+2]=1,je.size=Math.abs(Ke),je.start=0,je.end=je.size}function zt(tt,je,st,ft){for(var Me=0;Me<tt.length;Me++){var Se=[];At(tt[Me],Se,st,ft),je.push(Se)}}function Ut(tt){return tt/360+.5}function Ct(tt){var je=Math.sin(tt*Math.PI/180),st=.5-.25*Math.log((1+je)/(1-je))/Math.PI;return st<0?0:st>1?1:st}function Mt(tt,je,st,ft,Me,Se,Ke,Xe){if(st/=je,ft/=je,Se>=st&&Ke<ft)return tt;if(Ke<st||Se>=ft)return null;for(var it=[],pt=0;pt<tt.length;pt++){var vt=tt[pt],St=vt.geometry,kt=vt.type,Nt=Me===0?vt.minX:vt.minY,nr=Me===0?vt.maxX:vt.maxY;if(Nt>=st&&nr<ft){it.push(vt);continue}else if(nr<st||Nt>=ft)continue;var fr=[];if(kt==="Point"||kt==="MultiPoint")rt(St,fr,st,ft,Me);else if(kt==="LineString")ct(St,fr,st,ft,Me,!1,Xe.lineMetrics);else if(kt==="MultiLineString")ke(St,fr,st,ft,Me,!1);else if(kt==="Polygon")ke(St,fr,st,ft,Me,!0);else if(kt==="MultiPolygon")for(var Hr=0;Hr<St.length;Hr++){var Er=[];ke(St[Hr],Er,st,ft,Me,!0),Er.length&&fr.push(Er)}if(fr.length){if(Xe.lineMetrics&&kt==="LineString"){for(Hr=0;Hr<fr.length;Hr++)it.push(Fe(vt.id,kt,fr[Hr],vt.tags));continue}(kt==="LineString"||kt==="MultiLineString")&&(fr.length===1?(kt="LineString",fr=fr[0]):kt="MultiLineString"),(kt==="Point"||kt==="MultiPoint")&&(kt=fr.length===3?"Point":"MultiPoint"),it.push(Fe(vt.id,kt,fr,vt.tags))}}return it.length?it:null}function rt(tt,je,st,ft,Me){for(var Se=0;Se<tt.length;Se+=3){var Ke=tt[Se+Me];Ke>=st&&Ke<=ft&&(je.push(tt[Se]),je.push(tt[Se+1]),je.push(tt[Se+2]))}}function ct(tt,je,st,ft,Me,Se,Ke){for(var Xe=Ze(tt),it=Me===0?Je:ot,pt=tt.start,vt,St,kt=0;kt<tt.length-3;kt+=3){var Nt=tt[kt],nr=tt[kt+1],fr=tt[kt+2],Hr=tt[kt+3],Er=tt[kt+4],_r=Me===0?Nt:nr,en=Me===0?Hr:Er,dr=!1;Ke&&(vt=Math.sqrt(Math.pow(Nt-Hr,2)+Math.pow(nr-Er,2))),_r<st?en>st&&(St=it(Xe,Nt,nr,Hr,Er,st),Ke&&(Xe.start=pt+vt*St)):_r>ft?en<ft&&(St=it(Xe,Nt,nr,Hr,Er,ft),Ke&&(Xe.start=pt+vt*St)):Ge(Xe,Nt,nr,fr),en<st&&_r>=st&&(St=it(Xe,Nt,nr,Hr,Er,st),dr=!0),en>ft&&_r<=ft&&(St=it(Xe,Nt,nr,Hr,Er,ft),dr=!0),!Se&&dr&&(Ke&&(Xe.end=pt+vt*St),je.push(Xe),Xe=Ze(tt)),Ke&&(pt+=vt)}var xr=tt.length-3;Nt=tt[xr],nr=tt[xr+1],fr=tt[xr+2],_r=Me===0?Nt:nr,_r>=st&&_r<=ft&&Ge(Xe,Nt,nr,fr),xr=Xe.length-3,Se&&xr>=3&&(Xe[xr]!==Xe[0]||Xe[xr+1]!==Xe[1])&&Ge(Xe,Xe[0],Xe[1],Xe[2]),Xe.length&&je.push(Xe)}function Ze(tt){var je=[];return je.size=tt.size,je.start=tt.start,je.end=tt.end,je}function ke(tt,je,st,ft,Me,Se){for(var Ke=0;Ke<tt.length;Ke++)ct(tt[Ke],je,st,ft,Me,Se,!1)}function Ge(tt,je,st,ft){tt.push(je),tt.push(st),tt.push(ft)}function Je(tt,je,st,ft,Me,Se){var Ke=(Se-je)/(ft-je);return tt.push(Se),tt.push(st+(Me-st)*Ke),tt.push(1),Ke}function ot(tt,je,st,ft,Me,Se){var Ke=(Se-st)/(Me-st);return tt.push(je+(ft-je)*Ke),tt.push(Se),tt.push(1),Ke}function Pt(tt,je){var st=je.buffer/je.extent,ft=tt,Me=Mt(tt,1,-1-st,st,0,-1,2,je),Se=Mt(tt,1,1-st,2+st,0,-1,2,je);return(Me||Se)&&(ft=Mt(tt,1,-st,1+st,0,-1,2,je)||[],Me&&(ft=_t(Me,1).concat(ft)),Se&&(ft=ft.concat(_t(Se,-1)))),ft}function _t(tt,je){for(var st=[],ft=0;ft<tt.length;ft++){var Me=tt[ft],Se=Me.type,Ke;if(Se==="Point"||Se==="MultiPoint"||Se==="LineString")Ke=Bt(Me.geometry,je);else if(Se==="MultiLineString"||Se==="Polygon"){Ke=[];for(var Xe=0;Xe<Me.geometry.length;Xe++)Ke.push(Bt(Me.geometry[Xe],je))}else if(Se==="MultiPolygon")for(Ke=[],Xe=0;Xe<Me.geometry.length;Xe++){for(var it=[],pt=0;pt<Me.geometry[Xe].length;pt++)it.push(Bt(Me.geometry[Xe][pt],je));Ke.push(it)}st.push(Fe(Me.id,Se,Ke,Me.tags))}return st}function Bt(tt,je){var st=[];st.size=tt.size,tt.start!==void 0&&(st.start=tt.start,st.end=tt.end);for(var ft=0;ft<tt.length;ft+=3)st.push(tt[ft]+je,tt[ft+1],tt[ft+2]);return st}function qt(tt,je){if(tt.transformed)return tt;var st=1<<tt.z,ft=tt.x,Me=tt.y,Se,Ke,Xe;for(Se=0;Se<tt.features.length;Se++){var it=tt.features[Se],pt=it.geometry,vt=it.type;if(it.geometry=[],vt===1)for(Ke=0;Ke<pt.length;Ke+=2)it.geometry.push(Ot(pt[Ke],pt[Ke+1],je,st,ft,Me));else for(Ke=0;Ke<pt.length;Ke++){var St=[];for(Xe=0;Xe<pt[Ke].length;Xe+=2)St.push(Ot(pt[Ke][Xe],pt[Ke][Xe+1],je,st,ft,Me));it.geometry.push(St)}}return tt.transformed=!0,tt}function Ot(tt,je,st,ft,Me,Se){return[Math.round(st*(tt*ft-Me)),Math.round(st*(je*ft-Se))]}function $t(tt,je,st,ft,Me){for(var Se=je===Me.maxZoom?0:Me.tolerance/((1<<je)*Me.extent),Ke={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:st,y:ft,z:je,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Xe=0;Xe<tt.length;Xe++){Ke.numFeatures++,rr(Ke,tt[Xe],Se,Me);var it=tt[Xe].minX,pt=tt[Xe].minY,vt=tt[Xe].maxX,St=tt[Xe].maxY;it<Ke.minX&&(Ke.minX=it),pt<Ke.minY&&(Ke.minY=pt),vt>Ke.maxX&&(Ke.maxX=vt),St>Ke.maxY&&(Ke.maxY=St)}return Ke}function rr(tt,je,st,ft){var Me=je.geometry,Se=je.type,Ke=[];if(Se==="Point"||Se==="MultiPoint")for(var Xe=0;Xe<Me.length;Xe+=3)Ke.push(Me[Xe]),Ke.push(Me[Xe+1]),tt.numPoints++,tt.numSimplified++;else if(Se==="LineString")er(Ke,Me,tt,st,!1,!1);else if(Se==="MultiLineString"||Se==="Polygon")for(Xe=0;Xe<Me.length;Xe++)er(Ke,Me[Xe],tt,st,Se==="Polygon",Xe===0);else if(Se==="MultiPolygon")for(var it=0;it<Me.length;it++){var pt=Me[it];for(Xe=0;Xe<pt.length;Xe++)er(Ke,pt[Xe],tt,st,!0,Xe===0)}if(Ke.length){var vt=je.tags||null;if(Se==="LineString"&&ft.lineMetrics){vt={};for(var St in je.tags)vt[St]=je.tags[St];vt.mapbox_clip_start=Me.start/Me.size,vt.mapbox_clip_end=Me.end/Me.size}var kt={geometry:Ke,type:Se==="Polygon"||Se==="MultiPolygon"?3:Se==="LineString"||Se==="MultiLineString"?2:1,tags:vt};je.id!==null&&(kt.id=je.id),tt.features.push(kt)}}function er(tt,je,st,ft,Me,Se){var Ke=ft*ft;if(ft>0&&je.size<(Me?Ke:ft)){st.numPoints+=je.length/3;return}for(var Xe=[],it=0;it<je.length;it+=3)(ft===0||je[it+2]>Ke)&&(st.numSimplified++,Xe.push(je[it]),Xe.push(je[it+1])),st.numPoints++;Me&&pr(Xe,Se),tt.push(Xe)}function pr(tt,je){for(var st=0,ft=0,Me=tt.length,Se=Me-2;ft<Me;Se=ft,ft+=2)st+=(tt[ft]-tt[Se])*(tt[ft+1]+tt[Se+1]);if(st>0===je)for(ft=0,Me=tt.length;ft<Me/2;ft+=2){var Ke=tt[ft],Xe=tt[ft+1];tt[ft]=tt[Me-2-ft],tt[ft+1]=tt[Me-1-ft],tt[Me-2-ft]=Ke,tt[Me-1-ft]=Xe}}function Xr(tt,je){return new hn(tt,je)}function hn(tt,je){je=this.options=nt(Object.create(this.options),je);var st=je.debug;if(st&&console.time("preprocess data"),je.maxZoom<0||je.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(je.promoteId&&je.generateId)throw new Error("promoteId and generateId cannot be used together.");var ft=dt(tt,je);this.tiles={},this.tileCoords=[],st&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",je.indexMaxZoom,je.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ft=Pt(ft,je),ft.length&&this.splitTile(ft,0,0,0),st&&(ft.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}hn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},hn.prototype.splitTile=function(tt,je,st,ft,Me,Se,Ke){for(var Xe=[tt,je,st,ft],it=this.options,pt=it.debug;Xe.length;){ft=Xe.pop(),st=Xe.pop(),je=Xe.pop(),tt=Xe.pop();var vt=1<<je,St=Qr(je,st,ft),kt=this.tiles[St];if(!kt&&(pt>1&&console.time("creation"),kt=this.tiles[St]=$t(tt,je,st,ft,it),this.tileCoords.push({z:je,x:st,y:ft}),pt)){pt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",je,st,ft,kt.numFeatures,kt.numPoints,kt.numSimplified),console.timeEnd("creation"));var Nt="z"+je;this.stats[Nt]=(this.stats[Nt]||0)+1,this.total++}if(kt.source=tt,Me){if(je===it.maxZoom||je===Me)continue;var nr=1<<Me-je;if(st!==Math.floor(Se/nr)||ft!==Math.floor(Ke/nr))continue}else if(je===it.indexMaxZoom||kt.numPoints<=it.indexMaxPoints)continue;if(kt.source=null,tt.length!==0){pt>1&&console.time("clipping");var fr=.5*it.buffer/it.extent,Hr=.5-fr,Er=.5+fr,_r=1+fr,en,dr,xr,Ur,Yr,Ar;en=dr=xr=Ur=null,Yr=Mt(tt,vt,st-fr,st+Er,0,kt.minX,kt.maxX,it),Ar=Mt(tt,vt,st+Hr,st+_r,0,kt.minX,kt.maxX,it),tt=null,Yr&&(en=Mt(Yr,vt,ft-fr,ft+Er,1,kt.minY,kt.maxY,it),dr=Mt(Yr,vt,ft+Hr,ft+_r,1,kt.minY,kt.maxY,it),Yr=null),Ar&&(xr=Mt(Ar,vt,ft-fr,ft+Er,1,kt.minY,kt.maxY,it),Ur=Mt(Ar,vt,ft+Hr,ft+_r,1,kt.minY,kt.maxY,it),Ar=null),pt>1&&console.timeEnd("clipping"),Xe.push(en||[],je+1,st*2,ft*2),Xe.push(dr||[],je+1,st*2,ft*2+1),Xe.push(xr||[],je+1,st*2+1,ft*2),Xe.push(Ur||[],je+1,st*2+1,ft*2+1)}}},hn.prototype.getTile=function(tt,je,st){var ft=this.options,Me=ft.extent,Se=ft.debug;if(tt<0||tt>24)return null;var Ke=1<<tt;je=(je%Ke+Ke)%Ke;var Xe=Qr(tt,je,st);if(this.tiles[Xe])return qt(this.tiles[Xe],Me);Se>1&&console.log("drilling down to z%d-%d-%d",tt,je,st);for(var it=tt,pt=je,vt=st,St;!St&&it>0;)it--,pt=Math.floor(pt/2),vt=Math.floor(vt/2),St=this.tiles[Qr(it,pt,vt)];return!St||!St.source?null:(Se>1&&console.log("found parent tile z%d-%d-%d",it,pt,vt),Se>1&&console.time("drilling down"),this.splitTile(St.source,it,pt,vt,tt,je,st),Se>1&&console.timeEnd("drilling down"),this.tiles[Xe]?qt(this.tiles[Xe],Me):null)};function Qr(tt,je,st){return((1<<tt)*st+je)*32+tt}function nt(tt,je){for(var st in je)tt[st]=je[st];return tt}function Ht(tt,je){var st=tt.tileID.canonical;if(!this._geoJSONIndex)return je(null,null);var ft=this._geoJSONIndex.getTile(st.z,st.x,st.y);if(!ft)return je(null,null);var Me=new x(ft.features),Se=P(Me);(Se.byteOffset!==0||Se.byteLength!==Se.buffer.byteLength)&&(Se=new Uint8Array(Se)),je(null,{vectorTile:Me,rawData:Se.buffer})}var Kt=function(tt){function je(st,ft,Me,Se){tt.call(this,st,ft,Me,Ht),Se&&(this.loadGeoJSON=Se)}return tt&&(je.__proto__=tt),je.prototype=Object.create(tt&&tt.prototype),je.prototype.constructor=je,je.prototype.loadData=function(ft,Me){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Me,this._pendingLoadDataParams=ft,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},je.prototype._loadData=function(){var ft=this;if(!(!this._pendingCallback||!this._pendingLoadDataParams)){var Me=this._pendingCallback,Se=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Ke=Se&&Se.request&&Se.request.collectResourceTiming?new e.RequestPerformance(Se.request):!1;this.loadGeoJSON(Se,function(Xe,it){if(Xe||!it)return Me(Xe);if(typeof it!="object")return Me(new Error("Input data given to '"+Se.source+"' is not a valid GeoJSON object."));l(it,!0);try{ft._geoJSONIndex=Se.cluster?new le(Gt(Se)).load(it.features):Xr(it,Se.geojsonVtOptions)}catch(St){return Me(St)}ft.loaded={};var pt={};if(Ke){var vt=Ke.finish();vt&&(pt.resourceTiming={},pt.resourceTiming[Se.source]=JSON.parse(JSON.stringify(vt)))}Me(null,pt)})}},je.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},je.prototype.reloadTile=function(ft,Me){var Se=this.loaded,Ke=ft.uid;return Se&&Se[Ke]?tt.prototype.reloadTile.call(this,ft,Me):this.loadTile(ft,Me)},je.prototype.loadGeoJSON=function(ft,Me){if(ft.request)e.getJSON(ft.request,Me);else if(typeof ft.data=="string")try{return Me(null,JSON.parse(ft.data))}catch{return Me(new Error("Input data given to '"+ft.source+"' is not a valid GeoJSON object."))}else return Me(new Error("Input data given to '"+ft.source+"' is not a valid GeoJSON object."))},je.prototype.removeSource=function(ft,Me){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Me()},je.prototype.getClusterExpansionZoom=function(ft,Me){try{Me(null,this._geoJSONIndex.getClusterExpansionZoom(ft.clusterId))}catch(Se){Me(Se)}},je.prototype.getClusterChildren=function(ft,Me){try{Me(null,this._geoJSONIndex.getChildren(ft.clusterId))}catch(Se){Me(Se)}},je.prototype.getClusterLeaves=function(ft,Me){try{Me(null,this._geoJSONIndex.getLeaves(ft.clusterId,ft.limit,ft.offset))}catch(Se){Me(Se)}},je}(y);function Gt(tt){var je=tt.superclusterOptions,st=tt.clusterProperties;if(!st||!je)return je;for(var ft={},Me={},Se={accumulated:null,zoom:0},Ke={properties:null},Xe=Object.keys(st),it=0,pt=Xe;it<pt.length;it+=1){var vt=pt[it],St=st[vt],kt=St[0],Nt=St[1],nr=e.createExpression(Nt),fr=e.createExpression(typeof kt=="string"?[kt,["accumulated"],["get",vt]]:kt);ft[vt]=nr.value,Me[vt]=fr.value}return je.map=function(Hr){Ke.properties=Hr;for(var Er={},_r=0,en=Xe;_r<en.length;_r+=1){var dr=en[_r];Er[dr]=ft[dr].evaluate(Se,Ke)}return Er},je.reduce=function(Hr,Er){Ke.properties=Er;for(var _r=0,en=Xe;_r<en.length;_r+=1){var dr=en[_r];Se.accumulated=Hr[dr],Hr[dr]=Me[dr].evaluate(Se,Ke)}},je}var br=function(je){var st=this;this.self=je,this.actor=new e.Actor(je,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:y,geojson:Kt},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(ft,Me){if(st.workerSourceTypes[ft])throw new Error('Worker source with name "'+ft+'" already registered.');st.workerSourceTypes[ft]=Me},this.self.registerRTLTextPlugin=function(ft){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=ft.applyArabicShaping,e.plugin.processBidirectionalText=ft.processBidirectionalText,e.plugin.processStyledBidirectionalText=ft.processStyledBidirectionalText}};return br.prototype.setReferrer=function(je,st){this.referrer=st},br.prototype.setImages=function(je,st,ft){this.availableImages[je]=st;for(var Me in this.workerSources[je]){var Se=this.workerSources[je][Me];for(var Ke in Se)Se[Ke].availableImages=st}ft()},br.prototype.setLayers=function(je,st,ft){this.getLayerIndex(je).replace(st),ft()},br.prototype.updateLayers=function(je,st,ft){this.getLayerIndex(je).update(st.layers,st.removedIds),ft()},br.prototype.loadTile=function(je,st,ft){this.getWorkerSource(je,st.type,st.source).loadTile(st,ft)},br.prototype.loadDEMTile=function(je,st,ft){this.getDEMWorkerSource(je,st.source).loadTile(st,ft)},br.prototype.reloadTile=function(je,st,ft){this.getWorkerSource(je,st.type,st.source).reloadTile(st,ft)},br.prototype.abortTile=function(je,st,ft){this.getWorkerSource(je,st.type,st.source).abortTile(st,ft)},br.prototype.removeTile=function(je,st,ft){this.getWorkerSource(je,st.type,st.source).removeTile(st,ft)},br.prototype.removeDEMTile=function(je,st){this.getDEMWorkerSource(je,st.source).removeTile(st)},br.prototype.removeSource=function(je,st,ft){if(!(!this.workerSources[je]||!this.workerSources[je][st.type]||!this.workerSources[je][st.type][st.source])){var Me=this.workerSources[je][st.type][st.source];delete this.workerSources[je][st.type][st.source],Me.removeSource!==void 0?Me.removeSource(st,ft):ft()}},br.prototype.loadWorkerSource=function(je,st,ft){try{this.self.importScripts(st.url),ft()}catch(Me){ft(Me.toString())}},br.prototype.syncRTLPluginState=function(je,st,ft){try{e.plugin.setState(st);var Me=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&Me!=null){this.self.importScripts(Me);var Se=e.plugin.isParsed(),Ke=Se?void 0:new Error("RTL Text Plugin failed to import scripts from "+Me);ft(Ke,Se)}}catch(Xe){ft(Xe.toString())}},br.prototype.getAvailableImages=function(je){var st=this.availableImages[je];return st||(st=[]),st},br.prototype.getLayerIndex=function(je){var st=this.layerIndexes[je];return st||(st=this.layerIndexes[je]=new t),st},br.prototype.getWorkerSource=function(je,st,ft){var Me=this;if(this.workerSources[je]||(this.workerSources[je]={}),this.workerSources[je][st]||(this.workerSources[je][st]={}),!this.workerSources[je][st][ft]){var Se={send:function(Ke,Xe,it){Me.actor.send(Ke,Xe,it,je)}};this.workerSources[je][st][ft]=new this.workerSourceTypes[st](Se,this.getLayerIndex(je),this.getAvailableImages(je))}return this.workerSources[je][st][ft]},br.prototype.getDEMWorkerSource=function(je,st){return this.demWorkerSources[je]||(this.demWorkerSources[je]={}),this.demWorkerSources[je][st]||(this.demWorkerSources[je][st]=new b),this.demWorkerSources[je][st]},br.prototype.enforceCacheSizeLimit=function(je,st){e.enforceCacheSizeLimit(st)},typeof WorkerGlobalScope<"u"&&typeof e.window<"u"&&e.window instanceof WorkerGlobalScope&&(e.window.worker=new br(e.window)),br}),T(["./shared"],function(e){var a=e.createCommonjsModule(function(ce){ce.exports?ce.exports=H:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=H,window.mapboxgl.notSupportedReason=ve);function H(Fr){return!ve(Fr)}function ve(Fr){if(!K())return"not a browser";if(!de())return"insufficent Array support";if(!Ae())return"insufficient Function support";if(!Ce())return"insufficient Object support";if(!Ye())return"insufficient JSON support";if(!lt())return"insufficient worker support";if(!Tt())return"insufficient Uint8ClampedArray support";if(!Yt())return"insufficient ArrayBuffer support";if(!ir())return"insufficient Canvas/getImageData support";if(!Sr(Fr&&Fr.failIfMajorPerformanceCaveat))return"insufficient WebGL support"}function K(){return typeof window<"u"&&typeof document<"u"}function de(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function Ae(){return Function.prototype&&Function.prototype.bind}function Ce(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function Ye(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function lt(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Fr=new Blob([""],{type:"text/javascript"}),jr=URL.createObjectURL(Fr),cn,En;try{En=new Worker(jr),cn=!0}catch{cn=!1}return En&&En.terminate(),URL.revokeObjectURL(jr),cn}function Tt(){return"Uint8ClampedArray"in window}function Yt(){return ArrayBuffer.isView}function ir(){var Fr=document.createElement("canvas");Fr.width=Fr.height=1;var jr=Fr.getContext("2d");if(!jr)return!1;var cn=jr.getImageData(0,0,1,1);return cn&&cn.width===Fr.width}var ur={};function Sr(Fr){return ur[Fr]===void 0&&(ur[Fr]=Or(Fr)),ur[Fr]}H.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};function Br(Fr){var jr=document.createElement("canvas"),cn=Object.create(H.webGLContextAttributes);return cn.failIfMajorPerformanceCaveat=Fr,jr.probablySupportsContext?jr.probablySupportsContext("webgl",cn)||jr.probablySupportsContext("experimental-webgl",cn):jr.supportsContext?jr.supportsContext("webgl",cn)||jr.supportsContext("experimental-webgl",cn):jr.getContext("webgl",cn)||jr.getContext("experimental-webgl",cn)}function Or(Fr){var jr=Br(Fr);if(!jr)return!1;var cn=jr.createShader(jr.VERTEX_SHADER);return!cn||jr.isContextLost()?!1:(jr.shaderSource(cn,"void main() {}"),jr.compileShader(cn),jr.getShaderParameter(cn,jr.COMPILE_STATUS)===!0)}}),n={};n.create=function(ce,H,ve){var K=e.window.document.createElement(ce);return H!==void 0&&(K.className=H),ve&&ve.appendChild(K),K},n.createNS=function(ce,H){var ve=e.window.document.createElementNS(ce,H);return ve};var r=e.window.document.documentElement.style;function t(ce){if(!r)return ce[0];for(var H=0;H<ce.length;H++)if(ce[H]in r)return ce[H];return ce[0]}var f=t(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),o;n.disableDrag=function(){r&&f&&(o=r[f],r[f]="none")},n.enableDrag=function(){r&&f&&(r[f]=o)};var i=t(["transform","WebkitTransform"]);n.setTransform=function(ce,H){ce.style[i]=H};var g=!1;try{var p=Object.defineProperty({},"passive",{get:function(){g=!0}});e.window.addEventListener("test",p,p),e.window.removeEventListener("test",p,p)}catch{g=!1}n.addEventListener=function(ce,H,ve,K){K===void 0&&(K={}),"passive"in K&&g?ce.addEventListener(H,ve,K):ce.addEventListener(H,ve,K.capture)},n.removeEventListener=function(ce,H,ve,K){K===void 0&&(K={}),"passive"in K&&g?ce.removeEventListener(H,ve,K):ce.removeEventListener(H,ve,K.capture)};var y=function(ce){ce.preventDefault(),ce.stopPropagation(),e.window.removeEventListener("click",y,!0)};n.suppressClick=function(){e.window.addEventListener("click",y,!0),e.window.setTimeout(function(){e.window.removeEventListener("click",y,!0)},0)},n.mousePos=function(ce,H){var ve=ce.getBoundingClientRect();return new e.Point(H.clientX-ve.left-ce.clientLeft,H.clientY-ve.top-ce.clientTop)},n.touchPos=function(ce,H){for(var ve=ce.getBoundingClientRect(),K=[],de=0;de<H.length;de++)K.push(new e.Point(H[de].clientX-ve.left-ce.clientLeft,H[de].clientY-ve.top-ce.clientTop));return K},n.mouseButton=function(ce){return typeof e.window.InstallTrigger<"u"&&ce.button===2&&ce.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:ce.button},n.remove=function(ce){ce.parentNode&&ce.parentNode.removeChild(ce)};function c(ce,H,ve){var K,de,Ae,Ce=e.browser.devicePixelRatio>1?"@2x":"",Ye=e.getJSON(H.transformRequest(H.normalizeSpriteURL(ce,Ce,".json"),e.ResourceType.SpriteJSON),function(Yt,ir){Ye=null,Ae||(Ae=Yt,K=ir,Tt())}),lt=e.getImage(H.transformRequest(H.normalizeSpriteURL(ce,Ce,".png"),e.ResourceType.SpriteImage),function(Yt,ir){lt=null,Ae||(Ae=Yt,de=ir,Tt())});function Tt(){if(Ae)ve(Ae);else if(K&&de){var Yt=e.browser.getImageData(de),ir={};for(var ur in K){var Sr=K[ur],Br=Sr.width,Or=Sr.height,Fr=Sr.x,jr=Sr.y,cn=Sr.sdf,En=Sr.pixelRatio,Fn=Sr.stretchX,jn=Sr.stretchY,qn=Sr.content,Qn=new e.RGBAImage({width:Br,height:Or});e.RGBAImage.copy(Yt,Qn,{x:Fr,y:jr},{x:0,y:0},{width:Br,height:Or}),ir[ur]={data:Qn,pixelRatio:En,sdf:cn,stretchX:Fn,stretchY:jn,content:qn}}ve(null,ir)}}return{cancel:function(){Ye&&(Ye.cancel(),Ye=null),lt&&(lt.cancel(),lt=null)}}}function b(ce){var H=ce.userImage;if(H&&H.render){var ve=H.render();if(ve)return ce.data.replace(new Uint8Array(H.data.buffer)),!0}return!1}var l=1,_=function(ce){function H(){ce.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.isLoaded=function(){return this.loaded},H.prototype.setLoaded=function(K){if(this.loaded!==K&&(this.loaded=K,K)){for(var de=0,Ae=this.requestors;de<Ae.length;de+=1){var Ce=Ae[de],Ye=Ce.ids,lt=Ce.callback;this._notify(Ye,lt)}this.requestors=[]}},H.prototype.getImage=function(K){return this.images[K]},H.prototype.addImage=function(K,de){this._validate(K,de)&&(this.images[K]=de)},H.prototype._validate=function(K,de){var Ae=!0;return this._validateStretch(de.stretchX,de.data&&de.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'+K+'" has invalid "stretchX" value'))),Ae=!1),this._validateStretch(de.stretchY,de.data&&de.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'+K+'" has invalid "stretchY" value'))),Ae=!1),this._validateContent(de.content,de)||(this.fire(new e.ErrorEvent(new Error('Image "'+K+'" has invalid "content" value'))),Ae=!1),Ae},H.prototype._validateStretch=function(K,de){if(!K)return!0;for(var Ae=0,Ce=0,Ye=K;Ce<Ye.length;Ce+=1){var lt=Ye[Ce];if(lt[0]<Ae||lt[1]<lt[0]||de<lt[1])return!1;Ae=lt[1]}return!0},H.prototype._validateContent=function(K,de){return K?!(K.length!==4||K[0]<0||de.data.width<K[0]||K[1]<0||de.data.height<K[1]||K[2]<0||de.data.width<K[2]||K[3]<0||de.data.height<K[3]||K[2]<K[0]||K[3]<K[1]):!0},H.prototype.updateImage=function(K,de){var Ae=this.images[K];de.version=Ae.version+1,this.images[K]=de,this.updatedImages[K]=!0},H.prototype.removeImage=function(K){var de=this.images[K];delete this.images[K],delete this.patterns[K],de.userImage&&de.userImage.onRemove&&de.userImage.onRemove()},H.prototype.listImages=function(){return Object.keys(this.images)},H.prototype.getImages=function(K,de){var Ae=!0;if(!this.isLoaded())for(var Ce=0,Ye=K;Ce<Ye.length;Ce+=1){var lt=Ye[Ce];this.images[lt]||(Ae=!1)}this.isLoaded()||Ae?this._notify(K,de):this.requestors.push({ids:K,callback:de})},H.prototype._notify=function(K,de){for(var Ae={},Ce=0,Ye=K;Ce<Ye.length;Ce+=1){var lt=Ye[Ce];this.images[lt]||this.fire(new e.Event("styleimagemissing",{id:lt}));var Tt=this.images[lt];Tt?Ae[lt]={data:Tt.data.clone(),pixelRatio:Tt.pixelRatio,sdf:Tt.sdf,version:Tt.version,stretchX:Tt.stretchX,stretchY:Tt.stretchY,content:Tt.content,hasRenderCallback:Boolean(Tt.userImage&&Tt.userImage.render)}:e.warnOnce('Image "'+lt+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}de(null,Ae)},H.prototype.getPixelSize=function(){var K=this.atlasImage,de=K.width,Ae=K.height;return{width:de,height:Ae}},H.prototype.getPattern=function(K){var de=this.patterns[K],Ae=this.getImage(K);if(!Ae)return null;if(de&&de.position.version===Ae.version)return de.position;if(de)de.position.version=Ae.version;else{var Ce=Ae.data.width+l*2,Ye=Ae.data.height+l*2,lt={w:Ce,h:Ye,x:0,y:0},Tt=new e.ImagePosition(lt,Ae);this.patterns[K]={bin:lt,position:Tt}}return this._updatePatternAtlas(),this.patterns[K].position},H.prototype.bind=function(K){var de=K.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(K,this.atlasImage,de.RGBA),this.atlasTexture.bind(de.LINEAR,de.CLAMP_TO_EDGE)},H.prototype._updatePatternAtlas=function(){var K=[];for(var de in this.patterns)K.push(this.patterns[de].bin);var Ae=e.potpack(K),Ce=Ae.w,Ye=Ae.h,lt=this.atlasImage;lt.resize({width:Ce||1,height:Ye||1});for(var Tt in this.patterns){var Yt=this.patterns[Tt],ir=Yt.bin,ur=ir.x+l,Sr=ir.y+l,Br=this.images[Tt].data,Or=Br.width,Fr=Br.height;e.RGBAImage.copy(Br,lt,{x:0,y:0},{x:ur,y:Sr},{width:Or,height:Fr}),e.RGBAImage.copy(Br,lt,{x:0,y:Fr-1},{x:ur,y:Sr-1},{width:Or,height:1}),e.RGBAImage.copy(Br,lt,{x:0,y:0},{x:ur,y:Sr+Fr},{width:Or,height:1}),e.RGBAImage.copy(Br,lt,{x:Or-1,y:0},{x:ur-1,y:Sr},{width:1,height:Fr}),e.RGBAImage.copy(Br,lt,{x:0,y:0},{x:ur+Or,y:Sr},{width:1,height:Fr})}this.dirty=!0},H.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},H.prototype.dispatchRenderCallbacks=function(K){for(var de=0,Ae=K;de<Ae.length;de+=1){var Ce=Ae[de];if(!this.callbackDispatchedThisFrame[Ce]){this.callbackDispatchedThisFrame[Ce]=!0;var Ye=this.images[Ce],lt=b(Ye);lt&&this.updateImage(Ce,Ye)}}},H}(e.Evented);function s(ce,H,ve,K,de){var Ae=H*256,Ce=Ae+255,Ye=K.transformRequest(K.normalizeGlyphsURL(ve).replace("{fontstack}",ce).replace("{range}",Ae+"-"+Ce),e.ResourceType.Glyphs);e.getArrayBuffer(Ye,function(lt,Tt){if(lt)de(lt);else if(Tt){for(var Yt={},ir=0,ur=e.parseGlyphPBF(Tt);ir<ur.length;ir+=1){var Sr=ur[ir];Yt[Sr.id]=Sr}de(null,Yt)}})}var A=x,m=x,h=1e20;function x(ce,H,ve,K,de,Ae){this.fontSize=ce||24,this.buffer=H===void 0?3:H,this.cutoff=K||.25,this.fontFamily=de||"sans-serif",this.fontWeight=Ae||"normal",this.radius=ve||8;var Ce=this.size=this.fontSize+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=Ce,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Ce*Ce),this.gridInner=new Float64Array(Ce*Ce),this.f=new Float64Array(Ce),this.d=new Float64Array(Ce),this.z=new Float64Array(Ce+1),this.v=new Int16Array(Ce),this.middle=Math.round(Ce/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}x.prototype.draw=function(ce){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(ce,this.buffer,this.middle);for(var H=this.ctx.getImageData(0,0,this.size,this.size),ve=new Uint8ClampedArray(this.size*this.size),K=0;K<this.size*this.size;K++){var de=H.data[K*4+3]/255;this.gridOuter[K]=de===1?0:de===0?h:Math.pow(Math.max(0,.5-de),2),this.gridInner[K]=de===1?h:de===0?0:Math.pow(Math.max(0,de-.5),2)}for(u(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),u(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),K=0;K<this.size*this.size;K++){var Ae=this.gridOuter[K]-this.gridInner[K];ve[K]=Math.max(0,Math.min(255,Math.round(255-255*(Ae/this.radius+this.cutoff))))}return ve};function u(ce,H,ve,K,de,Ae,Ce){for(var Ye=0;Ye<H;Ye++){for(var lt=0;lt<ve;lt++)K[lt]=ce[lt*H+Ye];for(L(K,de,Ae,Ce,ve),lt=0;lt<ve;lt++)ce[lt*H+Ye]=de[lt]}for(lt=0;lt<ve;lt++){for(Ye=0;Ye<H;Ye++)K[Ye]=ce[lt*H+Ye];for(L(K,de,Ae,Ce,H),Ye=0;Ye<H;Ye++)ce[lt*H+Ye]=Math.sqrt(de[Ye])}}function L(ce,H,ve,K,de){ve[0]=0,K[0]=-h,K[1]=+h;for(var Ae=1,Ce=0;Ae<de;Ae++){for(var Ye=(ce[Ae]+Ae*Ae-(ce[ve[Ce]]+ve[Ce]*ve[Ce]))/(2*Ae-2*ve[Ce]);Ye<=K[Ce];)Ce--,Ye=(ce[Ae]+Ae*Ae-(ce[ve[Ce]]+ve[Ce]*ve[Ce]))/(2*Ae-2*ve[Ce]);Ce++,ve[Ce]=Ae,K[Ce]=Ye,K[Ce+1]=+h}for(Ae=0,Ce=0;Ae<de;Ae++){for(;K[Ce+1]<Ae;)Ce++;H[Ae]=(Ae-ve[Ce])*(Ae-ve[Ce])+ce[ve[Ce]]}}A.default=m;var S=function(H,ve){this.requestManager=H,this.localIdeographFontFamily=ve,this.entries={}};S.prototype.setURL=function(H){this.url=H},S.prototype.getGlyphs=function(H,ve){var K=this,de=[];for(var Ae in H)for(var Ce=0,Ye=H[Ae];Ce<Ye.length;Ce+=1){var lt=Ye[Ce];de.push({stack:Ae,id:lt})}e.asyncAll(de,function(Tt,Yt){var ir=Tt.stack,ur=Tt.id,Sr=K.entries[ir];Sr||(Sr=K.entries[ir]={glyphs:{},requests:{},ranges:{}});var Br=Sr.glyphs[ur];if(Br!==void 0){Yt(null,{stack:ir,id:ur,glyph:Br});return}if(Br=K._tinySDF(Sr,ir,ur),Br){Sr.glyphs[ur]=Br,Yt(null,{stack:ir,id:ur,glyph:Br});return}var Or=Math.floor(ur/256);if(Or*256>65535){Yt(new Error("glyphs > 65535 not supported"));return}if(Sr.ranges[Or]){Yt(null,{stack:ir,id:ur,glyph:Br});return}var Fr=Sr.requests[Or];Fr||(Fr=Sr.requests[Or]=[],S.loadGlyphRange(ir,Or,K.url,K.requestManager,function(jr,cn){if(cn){for(var En in cn)K._doesCharSupportLocalGlyph(+En)||(Sr.glyphs[+En]=cn[+En]);Sr.ranges[Or]=!0}for(var Fn=0,jn=Fr;Fn<jn.length;Fn+=1){var qn=jn[Fn];qn(jr,cn)}delete Sr.requests[Or]})),Fr.push(function(jr,cn){jr?Yt(jr):cn&&Yt(null,{stack:ir,id:ur,glyph:cn[ur]||null})})},function(Tt,Yt){if(Tt)ve(Tt);else if(Yt){for(var ir={},ur=0,Sr=Yt;ur<Sr.length;ur+=1){var Br=Sr[ur],Or=Br.stack,Fr=Br.id,jr=Br.glyph;(ir[Or]||(ir[Or]={}))[Fr]=jr&&{id:jr.id,bitmap:jr.bitmap.clone(),metrics:jr.metrics}}ve(null,ir)}})},S.prototype._doesCharSupportLocalGlyph=function(H){return!!this.localIdeographFontFamily&&(e.isChar["CJK Unified Ideographs"](H)||e.isChar["Hangul Syllables"](H)||e.isChar.Hiragana(H)||e.isChar.Katakana(H))},S.prototype._tinySDF=function(H,ve,K){var de=this.localIdeographFontFamily;if(!!de&&!!this._doesCharSupportLocalGlyph(K)){var Ae=H.tinySDF;if(!Ae){var Ce="400";/bold/i.test(ve)?Ce="900":/medium/i.test(ve)?Ce="500":/light/i.test(ve)&&(Ce="200"),Ae=H.tinySDF=new S.TinySDF(24,3,8,.25,de,Ce)}return{id:K,bitmap:new e.AlphaImage({width:30,height:30},Ae.draw(String.fromCharCode(K))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},S.loadGlyphRange=s,S.TinySDF=A;var k=function(){this.specification=e.styleSpec.light.position};k.prototype.possiblyEvaluate=function(H,ve){return e.sphericalToCartesian(H.expression.evaluate(ve))},k.prototype.interpolate=function(H,ve,K){return{x:e.number(H.x,ve.x,K),y:e.number(H.y,ve.y,K),z:e.number(H.z,ve.z,K)}};var P=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new k,color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)}),z="-transition",I=function(ce){function H(ve){ce.call(this),this._transitionable=new e.Transitionable(P),this.setLight(ve),this._transitioning=this._transitionable.untransitioned()}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getLight=function(){return this._transitionable.serialize()},H.prototype.setLight=function(K,de){if(de===void 0&&(de={}),!this._validate(e.validateLight,K,de))for(var Ae in K){var Ce=K[Ae];e.endsWith(Ae,z)?this._transitionable.setTransition(Ae.slice(0,-z.length),Ce):this._transitionable.setValue(Ae,Ce)}},H.prototype.updateTransitions=function(K){this._transitioning=this._transitionable.transitioned(K,this._transitioning)},H.prototype.hasTransition=function(){return this._transitioning.hasTransition()},H.prototype.recalculate=function(K){this.properties=this._transitioning.possiblyEvaluate(K)},H.prototype._validate=function(K,de,Ae){return Ae&&Ae.validate===!1?!1:e.emitValidationErrors(this,K.call(e.validateStyle,e.extend({value:de,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))},H}(e.Evented),D=function(H,ve){this.width=H,this.height=ve,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};D.prototype.getDash=function(H,ve){var K=H.join(",")+String(ve);return this.dashEntry[K]||(this.dashEntry[K]=this.addDash(H,ve)),this.dashEntry[K]},D.prototype.getDashRanges=function(H,ve,K){var de=H.length%2===1,Ae=[],Ce=de?-H[H.length-1]*K:0,Ye=H[0]*K,lt=!0;Ae.push({left:Ce,right:Ye,isDash:lt,zeroLength:H[0]===0});for(var Tt=H[0],Yt=1;Yt<H.length;Yt++){lt=!lt;var ir=H[Yt];Ce=Tt*K,Tt+=ir,Ye=Tt*K,Ae.push({left:Ce,right:Ye,isDash:lt,zeroLength:ir===0})}return Ae},D.prototype.addRoundDash=function(H,ve,K){for(var de=ve/2,Ae=-K;Ae<=K;Ae++)for(var Ce=this.nextRow+K+Ae,Ye=this.width*Ce,lt=0,Tt=H[lt],Yt=0;Yt<this.width;Yt++){Yt/Tt.right>1&&(Tt=H[++lt]);var ir=Math.abs(Yt-Tt.left),ur=Math.abs(Yt-Tt.right),Sr=Math.min(ir,ur),Br=void 0,Or=Ae/K*(de+1);if(Tt.isDash){var Fr=de-Math.abs(Or);Br=Math.sqrt(Sr*Sr+Fr*Fr)}else Br=de-Math.sqrt(Sr*Sr+Or*Or);this.data[Ye+Yt]=Math.max(0,Math.min(255,Br+128))}},D.prototype.addRegularDash=function(H){for(var ve=H.length-1;ve>=0;--ve){var K=H[ve],de=H[ve+1];K.zeroLength?H.splice(ve,1):de&&de.isDash===K.isDash&&(de.left=K.left,H.splice(ve,1))}var Ae=H[0],Ce=H[H.length-1];Ae.isDash===Ce.isDash&&(Ae.left=Ce.left-this.width,Ce.right=Ae.right+this.width);for(var Ye=this.width*this.nextRow,lt=0,Tt=H[lt],Yt=0;Yt<this.width;Yt++){Yt/Tt.right>1&&(Tt=H[++lt]);var ir=Math.abs(Yt-Tt.left),ur=Math.abs(Yt-Tt.right),Sr=Math.min(ir,ur),Br=Tt.isDash?Sr:-Sr;this.data[Ye+Yt]=Math.max(0,Math.min(255,Br+128))}},D.prototype.addDash=function(H,ve){var K=ve?7:0,de=2*K+1;if(this.nextRow+de>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var Ae=0,Ce=0;Ce<H.length;Ce++)Ae+=H[Ce];if(Ae!==0){var Ye=this.width/Ae,lt=this.getDashRanges(H,this.width,Ye);ve?this.addRoundDash(lt,Ye,K):this.addRegularDash(lt)}var Tt={y:(this.nextRow+K+.5)/this.height,height:2*K/this.height,width:Ae};return this.nextRow+=de,this.dirty=!0,Tt},D.prototype.bind=function(H){var ve=H.gl;this.texture?(ve.bindTexture(ve.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,ve.texSubImage2D(ve.TEXTURE_2D,0,0,0,this.width,this.height,ve.ALPHA,ve.UNSIGNED_BYTE,this.data))):(this.texture=ve.createTexture(),ve.bindTexture(ve.TEXTURE_2D,this.texture),ve.texParameteri(ve.TEXTURE_2D,ve.TEXTURE_WRAP_S,ve.REPEAT),ve.texParameteri(ve.TEXTURE_2D,ve.TEXTURE_WRAP_T,ve.REPEAT),ve.texParameteri(ve.TEXTURE_2D,ve.TEXTURE_MIN_FILTER,ve.LINEAR),ve.texParameteri(ve.TEXTURE_2D,ve.TEXTURE_MAG_FILTER,ve.LINEAR),ve.texImage2D(ve.TEXTURE_2D,0,ve.ALPHA,this.width,this.height,0,ve.ALPHA,ve.UNSIGNED_BYTE,this.data))};var R=function ce(H,ve){this.workerPool=H,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var K=this.workerPool.acquire(this.id),de=0;de<K.length;de++){var Ae=K[de],Ce=new ce.Actor(Ae,ve,this.id);Ce.name="Worker "+de,this.actors.push(Ce)}};R.prototype.broadcast=function(H,ve,K){K=K||function(){},e.asyncAll(this.actors,function(de,Ae){de.send(H,ve,Ae)},K)},R.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},R.prototype.remove=function(){this.actors.forEach(function(H){H.remove()}),this.actors=[],this.workerPool.release(this.id)},R.Actor=e.Actor;function O(ce,H,ve){var K=function(de,Ae){if(de)return ve(de);if(Ae){var Ce=e.pick(e.extend(Ae,ce),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Ae.vector_layers&&(Ce.vectorLayers=Ae.vector_layers,Ce.vectorLayerIds=Ce.vectorLayers.map(function(Ye){return Ye.id})),Ce.tiles=H.canonicalizeTileset(Ce,ce.url),ve(null,Ce)}};return ce.url?e.getJSON(H.transformRequest(H.normalizeSourceURL(ce.url),e.ResourceType.Source),K):e.browser.frame(function(){return K(null,ce)})}var F=function(H,ve,K){this.bounds=e.LngLatBounds.convert(this.validateBounds(H)),this.minzoom=ve||0,this.maxzoom=K||24};F.prototype.validateBounds=function(H){return!Array.isArray(H)||H.length!==4?[-180,-90,180,90]:[Math.max(-180,H[0]),Math.max(-90,H[1]),Math.min(180,H[2]),Math.min(90,H[3])]},F.prototype.contains=function(H){var ve=Math.pow(2,H.z),K={minX:Math.floor(e.mercatorXfromLng(this.bounds.getWest())*ve),minY:Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*ve),maxX:Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*ve),maxY:Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*ve)},de=H.x>=K.minX&&H.x<K.maxX&&H.y>=K.minY&&H.y<K.maxY;return de};var V=function(ce){function H(ve,K,de,Ae){if(ce.call(this),this.id=ve,this.dispatcher=de,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(K,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},K),this._collectResourceTiming=K.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Ae)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.load=function(){var K=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=O(this._options,this.map._requestManager,function(de,Ae){K._tileJSONRequest=null,K._loaded=!0,de?K.fire(new e.ErrorEvent(de)):Ae&&(e.extend(K,Ae),Ae.bounds&&(K.tileBounds=new F(Ae.bounds,K.minzoom,K.maxzoom)),e.postTurnstileEvent(Ae.tiles,K.map._requestManager._customAccessToken),e.postMapLoadEvent(Ae.tiles,K.map._getMapId(),K.map._requestManager._skuToken,K.map._requestManager._customAccessToken),K.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),K.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},H.prototype.loaded=function(){return this._loaded},H.prototype.hasTile=function(K){return!this.tileBounds||this.tileBounds.contains(K.canonical)},H.prototype.onAdd=function(K){this.map=K,this.load()},H.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},H.prototype.serialize=function(){return e.extend({},this._options)},H.prototype.loadTile=function(K,de){var Ae=this.map._requestManager.normalizeTileURL(K.tileID.canonical.url(this.tiles,this.scheme)),Ce={request:this.map._requestManager.transformRequest(Ae,e.ResourceType.Tile),uid:K.uid,tileID:K.tileID,zoom:K.tileID.overscaledZ,tileSize:this.tileSize*K.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};Ce.request.collectResourceTiming=this._collectResourceTiming,!K.actor||K.state==="expired"?(K.actor=this.dispatcher.getActor(),K.request=K.actor.send("loadTile",Ce,Ye.bind(this))):K.state==="loading"?K.reloadCallback=de:K.request=K.actor.send("reloadTile",Ce,Ye.bind(this));function Ye(lt,Tt){if(delete K.request,K.aborted)return de(null);if(lt&&lt.status!==404)return de(lt);Tt&&Tt.resourceTiming&&(K.resourceTiming=Tt.resourceTiming),this.map._refreshExpiredTiles&&Tt&&K.setExpiryData(Tt),K.loadVectorData(Tt,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),de(null),K.reloadCallback&&(this.loadTile(K,K.reloadCallback),K.reloadCallback=null)}},H.prototype.abortTile=function(K){K.request&&(K.request.cancel(),delete K.request),K.actor&&K.actor.send("abortTile",{uid:K.uid,type:this.type,source:this.id},void 0)},H.prototype.unloadTile=function(K){K.unloadVectorData(),K.actor&&K.actor.send("removeTile",{uid:K.uid,type:this.type,source:this.id},void 0)},H.prototype.hasTransition=function(){return!1},H}(e.Evented),G=function(ce){function H(ve,K,de,Ae){ce.call(this),this.id=ve,this.dispatcher=de,this.setEventedParent(Ae),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},K),e.extend(this,e.pick(K,["url","scheme","tileSize"]))}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.load=function(){var K=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=O(this._options,this.map._requestManager,function(de,Ae){K._tileJSONRequest=null,K._loaded=!0,de?K.fire(new e.ErrorEvent(de)):Ae&&(e.extend(K,Ae),Ae.bounds&&(K.tileBounds=new F(Ae.bounds,K.minzoom,K.maxzoom)),e.postTurnstileEvent(Ae.tiles),e.postMapLoadEvent(Ae.tiles,K.map._getMapId(),K.map._requestManager._skuToken),K.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),K.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},H.prototype.loaded=function(){return this._loaded},H.prototype.onAdd=function(K){this.map=K,this.load()},H.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},H.prototype.serialize=function(){return e.extend({},this._options)},H.prototype.hasTile=function(K){return!this.tileBounds||this.tileBounds.contains(K.canonical)},H.prototype.loadTile=function(K,de){var Ae=this,Ce=this.map._requestManager.normalizeTileURL(K.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);K.request=e.getImage(this.map._requestManager.transformRequest(Ce,e.ResourceType.Tile),function(Ye,lt){if(delete K.request,K.aborted)K.state="unloaded",de(null);else if(Ye)K.state="errored",de(Ye);else if(lt){Ae.map._refreshExpiredTiles&&K.setExpiryData(lt),delete lt.cacheControl,delete lt.expires;var Tt=Ae.map.painter.context,Yt=Tt.gl;K.texture=Ae.map.painter.getTileTexture(lt.width),K.texture?K.texture.update(lt,{useMipmap:!0}):(K.texture=new e.Texture(Tt,lt,Yt.RGBA,{useMipmap:!0}),K.texture.bind(Yt.LINEAR,Yt.CLAMP_TO_EDGE,Yt.LINEAR_MIPMAP_NEAREST),Tt.extTextureFilterAnisotropic&&Yt.texParameterf(Yt.TEXTURE_2D,Tt.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Tt.extTextureFilterAnisotropicMax)),K.state="loaded",e.cacheEntryPossiblyAdded(Ae.dispatcher),de(null)}})},H.prototype.abortTile=function(K,de){K.request&&(K.request.cancel(),delete K.request),de()},H.prototype.unloadTile=function(K,de){K.texture&&this.map.painter.saveTileTexture(K.texture),de()},H.prototype.hasTransition=function(){return!1},H}(e.Evented),J=function(ce){function H(ve,K,de,Ae){ce.call(this,ve,K,de,Ae),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},K),this.encoding=K.encoding||"mapbox"}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},H.prototype.loadTile=function(K,de){var Ae=this.map._requestManager.normalizeTileURL(K.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);K.request=e.getImage(this.map._requestManager.transformRequest(Ae,e.ResourceType.Tile),Ce.bind(this)),K.neighboringTiles=this._getNeighboringTiles(K.tileID);function Ce(lt,Tt){if(delete K.request,K.aborted)K.state="unloaded",de(null);else if(lt)K.state="errored",de(lt);else if(Tt){this.map._refreshExpiredTiles&&K.setExpiryData(Tt),delete Tt.cacheControl,delete Tt.expires;var Yt=e.window.ImageBitmap&&Tt instanceof e.window.ImageBitmap&&e.offscreenCanvasSupported(),ir=Yt?Tt:e.browser.getImageData(Tt,1),ur={uid:K.uid,coord:K.tileID,source:this.id,rawImageData:ir,encoding:this.encoding};(!K.actor||K.state==="expired")&&(K.actor=this.dispatcher.getActor(),K.actor.send("loadDEMTile",ur,Ye.bind(this)))}}function Ye(lt,Tt){lt&&(K.state="errored",de(lt)),Tt&&(K.dem=Tt,K.needsHillshadePrepare=!0,K.state="loaded",de(null))}},H.prototype._getNeighboringTiles=function(K){var de=K.canonical,Ae=Math.pow(2,de.z),Ce=(de.x-1+Ae)%Ae,Ye=de.x===0?K.wrap-1:K.wrap,lt=(de.x+1+Ae)%Ae,Tt=de.x+1===Ae?K.wrap+1:K.wrap,Yt={};return Yt[new e.OverscaledTileID(K.overscaledZ,Ye,de.z,Ce,de.y).key]={backfilled:!1},Yt[new e.OverscaledTileID(K.overscaledZ,Tt,de.z,lt,de.y).key]={backfilled:!1},de.y>0&&(Yt[new e.OverscaledTileID(K.overscaledZ,Ye,de.z,Ce,de.y-1).key]={backfilled:!1},Yt[new e.OverscaledTileID(K.overscaledZ,K.wrap,de.z,de.x,de.y-1).key]={backfilled:!1},Yt[new e.OverscaledTileID(K.overscaledZ,Tt,de.z,lt,de.y-1).key]={backfilled:!1}),de.y+1<Ae&&(Yt[new e.OverscaledTileID(K.overscaledZ,Ye,de.z,Ce,de.y+1).key]={backfilled:!1},Yt[new e.OverscaledTileID(K.overscaledZ,K.wrap,de.z,de.x,de.y+1).key]={backfilled:!1},Yt[new e.OverscaledTileID(K.overscaledZ,Tt,de.z,lt,de.y+1).key]={backfilled:!1}),Yt},H.prototype.unloadTile=function(K){K.demTexture&&this.map.painter.saveTileTexture(K.demTexture),K.fbo&&(K.fbo.destroy(),delete K.fbo),K.dem&&delete K.dem,delete K.neighboringTiles,K.state="unloaded",K.actor&&K.actor.send("removeDEMTile",{uid:K.uid,source:this.id})},H}(G),Z=function(ce){function H(ve,K,de,Ae){ce.call(this),this.id=ve,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=de.getActor(),this.setEventedParent(Ae),this._data=K.data,this._options=e.extend({},K),this._collectResourceTiming=K.collectResourceTiming,this._resourceTiming=[],K.maxzoom!==void 0&&(this.maxzoom=K.maxzoom),K.type&&(this.type=K.type),K.attribution&&(this.attribution=K.attribution),this.promoteId=K.promoteId;var Ce=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:K.cluster||!1,geojsonVtOptions:{buffer:(K.buffer!==void 0?K.buffer:128)*Ce,tolerance:(K.tolerance!==void 0?K.tolerance:.375)*Ce,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:K.lineMetrics||!1,generateId:K.generateId||!1},superclusterOptions:{maxZoom:K.clusterMaxZoom!==void 0?Math.min(K.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:e.EXTENT,radius:(K.clusterRadius||50)*Ce,log:!1,generateId:K.generateId||!1},clusterProperties:K.clusterProperties},K.workerOptions)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.load=function(){var K=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(de){if(de){K.fire(new e.ErrorEvent(de));return}var Ae={dataType:"source",sourceDataType:"metadata"};K._collectResourceTiming&&K._resourceTiming&&K._resourceTiming.length>0&&(Ae.resourceTiming=K._resourceTiming,K._resourceTiming=[]),K.fire(new e.Event("data",Ae))})},H.prototype.onAdd=function(K){this.map=K,this.load()},H.prototype.setData=function(K){var de=this;return this._data=K,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(Ae){if(Ae){de.fire(new e.ErrorEvent(Ae));return}var Ce={dataType:"source",sourceDataType:"content"};de._collectResourceTiming&&de._resourceTiming&&de._resourceTiming.length>0&&(Ce.resourceTiming=de._resourceTiming,de._resourceTiming=[]),de.fire(new e.Event("data",Ce))}),this},H.prototype.getClusterExpansionZoom=function(K,de){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:K,source:this.id},de),this},H.prototype.getClusterChildren=function(K,de){return this.actor.send("geojson.getClusterChildren",{clusterId:K,source:this.id},de),this},H.prototype.getClusterLeaves=function(K,de,Ae,Ce){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:K,limit:de,offset:Ae},Ce),this},H.prototype._updateWorkerData=function(K){var de=this;this._loaded=!1;var Ae=e.extend({},this.workerOptions),Ce=this._data;typeof Ce=="string"?(Ae.request=this.map._requestManager.transformRequest(e.browser.resolveURL(Ce),e.ResourceType.Source),Ae.request.collectResourceTiming=this._collectResourceTiming):Ae.data=JSON.stringify(Ce),this.actor.send(this.type+".loadData",Ae,function(Ye,lt){de._removed||lt&&lt.abandoned||(de._loaded=!0,lt&&lt.resourceTiming&&lt.resourceTiming[de.id]&&(de._resourceTiming=lt.resourceTiming[de.id].slice(0)),de.actor.send(de.type+".coalesce",{source:Ae.source},null),K(Ye))})},H.prototype.loaded=function(){return this._loaded},H.prototype.loadTile=function(K,de){var Ae=this,Ce=K.actor?"reloadTile":"loadTile";K.actor=this.actor;var Ye={type:this.type,uid:K.uid,tileID:K.tileID,zoom:K.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};K.request=this.actor.send(Ce,Ye,function(lt,Tt){return delete K.request,K.unloadVectorData(),K.aborted?de(null):lt?de(lt):(K.loadVectorData(Tt,Ae.map.painter,Ce==="reloadTile"),de(null))})},H.prototype.abortTile=function(K){K.request&&(K.request.cancel(),delete K.request),K.aborted=!0},H.prototype.unloadTile=function(K){K.unloadVectorData(),this.actor.send("removeTile",{uid:K.uid,type:this.type,source:this.id})},H.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},H.prototype.serialize=function(){return e.extend({},this._options,{type:this.type,data:this._data})},H.prototype.hasTransition=function(){return!1},H}(e.Evented),Y=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),j=function(ce){function H(ve,K,de,Ae){ce.call(this),this.id=ve,this.dispatcher=de,this.coordinates=K.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Ae),this.options=K}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.load=function(K,de){var Ae=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),function(Ce,Ye){Ae._loaded=!0,Ce?Ae.fire(new e.ErrorEvent(Ce)):Ye&&(Ae.image=Ye,K&&(Ae.coordinates=K),de&&de(),Ae._finishLoading())})},H.prototype.loaded=function(){return this._loaded},H.prototype.updateImage=function(K){var de=this;return!this.image||!K.url?this:(this.options.url=K.url,this.load(K.coordinates,function(){de.texture=null}),this)},H.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))},H.prototype.onAdd=function(K){this.map=K,this.load()},H.prototype.setCoordinates=function(K){var de=this;this.coordinates=K;var Ae=K.map(e.MercatorCoordinate.fromLngLat);this.tileID=re(Ae),this.minzoom=this.maxzoom=this.tileID.z;var Ce=Ae.map(function(Ye){return de.tileID.getTilePoint(Ye)._round()});return this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(Ce[0].x,Ce[0].y,0,0),this._boundsArray.emplaceBack(Ce[1].x,Ce[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(Ce[3].x,Ce[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(Ce[2].x,Ce[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this},H.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||!this.image)){var K=this.map.painter.context,de=K.gl;this.boundsBuffer||(this.boundsBuffer=K.createVertexBuffer(this._boundsArray,Y.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(K,this.image,de.RGBA),this.texture.bind(de.LINEAR,de.CLAMP_TO_EDGE));for(var Ae in this.tiles){var Ce=this.tiles[Ae];Ce.state!=="loaded"&&(Ce.state="loaded",Ce.texture=this.texture)}}},H.prototype.loadTile=function(K,de){this.tileID&&this.tileID.equals(K.tileID.canonical)?(this.tiles[String(K.tileID.wrap)]=K,K.buckets={},de(null)):(K.state="errored",de(null))},H.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},H.prototype.hasTransition=function(){return!1},H}(e.Evented);function re(ce){for(var H=1/0,ve=1/0,K=-1/0,de=-1/0,Ae=0,Ce=ce;Ae<Ce.length;Ae+=1){var Ye=Ce[Ae];H=Math.min(H,Ye.x),ve=Math.min(ve,Ye.y),K=Math.max(K,Ye.x),de=Math.max(de,Ye.y)}var lt=K-H,Tt=de-ve,Yt=Math.max(lt,Tt),ir=Math.max(0,Math.floor(-Math.log(Yt)/Math.LN2)),ur=Math.pow(2,ir);return new e.CanonicalTileID(ir,Math.floor((H+K)/2*ur),Math.floor((ve+de)/2*ur))}var se=function(ce){function H(ve,K,de,Ae){ce.call(this,ve,K,de,Ae),this.roundZoom=!0,this.type="video",this.options=K}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.load=function(){var K=this;this._loaded=!1;var de=this.options;this.urls=[];for(var Ae=0,Ce=de.urls;Ae<Ce.length;Ae+=1){var Ye=Ce[Ae];this.urls.push(this.map._requestManager.transformRequest(Ye,e.ResourceType.Source).url)}e.getVideo(this.urls,function(lt,Tt){K._loaded=!0,lt?K.fire(new e.ErrorEvent(lt)):Tt&&(K.video=Tt,K.video.loop=!0,K.video.addEventListener("playing",function(){K.map.triggerRepaint()}),K.map&&K.video.play(),K._finishLoading())})},H.prototype.pause=function(){this.video&&this.video.pause()},H.prototype.play=function(){this.video&&this.video.play()},H.prototype.seek=function(K){if(this.video){var de=this.video.seekable;K<de.start(0)||K>de.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+de.start(0)+" and "+de.end(0)+"-second mark."))):this.video.currentTime=K}},H.prototype.getVideo=function(){return this.video},H.prototype.onAdd=function(K){this.map||(this.map=K,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},H.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var K=this.map.painter.context,de=K.gl;this.boundsBuffer||(this.boundsBuffer=K.createVertexBuffer(this._boundsArray,Y.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(de.LINEAR,de.CLAMP_TO_EDGE),de.texSubImage2D(de.TEXTURE_2D,0,0,0,de.RGBA,de.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(K,this.video,de.RGBA),this.texture.bind(de.LINEAR,de.CLAMP_TO_EDGE));for(var Ae in this.tiles){var Ce=this.tiles[Ae];Ce.state!=="loaded"&&(Ce.state="loaded",Ce.texture=this.texture)}}},H.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},H.prototype.hasTransition=function(){return this.video&&!this.video.paused},H}(j),oe=function(ce){function H(ve,K,de,Ae){ce.call(this,ve,K,de,Ae),K.coordinates?(!Array.isArray(K.coordinates)||K.coordinates.length!==4||K.coordinates.some(function(Ce){return!Array.isArray(Ce)||Ce.length!==2||Ce.some(function(Ye){return typeof Ye!="number"})}))&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+ve,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+ve,null,'missing required property "coordinates"'))),K.animate&&typeof K.animate!="boolean"&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+ve,null,'optional "animate" property must be a boolean value'))),K.canvas?typeof K.canvas!="string"&&!(K.canvas instanceof e.window.HTMLCanvasElement)&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+ve,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+ve,null,'missing required property "canvas"'))),this.options=K,this.animate=K.animate!==void 0?K.animate:!0}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.load=function(){if(this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()){this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero.")));return}this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading()},H.prototype.getCanvas=function(){return this.canvas},H.prototype.onAdd=function(K){this.map=K,this.load(),this.canvas&&this.animate&&this.play()},H.prototype.onRemove=function(){this.pause()},H.prototype.prepare=function(){var K=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,K=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,K=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var de=this.map.painter.context,Ae=de.gl;this.boundsBuffer||(this.boundsBuffer=de.createVertexBuffer(this._boundsArray,Y.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(K||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(de,this.canvas,Ae.RGBA,{premultiply:!0});for(var Ce in this.tiles){var Ye=this.tiles[Ce];Ye.state!=="loaded"&&(Ye.state="loaded",Ye.texture=this.texture)}}},H.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},H.prototype.hasTransition=function(){return this._playing},H.prototype._hasInvalidDimensions=function(){for(var K=0,de=[this.canvas.width,this.canvas.height];K<de.length;K+=1){var Ae=de[K];if(isNaN(Ae)||Ae<=0)return!0}return!1},H}(j),N={vector:V,raster:G,"raster-dem":J,geojson:Z,video:se,image:j,canvas:oe},U=function(ce,H,ve,K){var de=new N[H.type](ce,H,ve,K);if(de.id!==ce)throw new Error("Expected Source id to be "+ce+" instead of "+de.id);return e.bindAll(["load","abort","unload","serialize","prepare"],de),de},q=function(ce){return N[ce]},Q=function(ce,H){N[ce]=H};function W(ce,H){var ve=e.identity([]);return e.translate(ve,ve,[1,1,0]),e.scale(ve,ve,[ce.width*.5,ce.height*.5,1]),e.multiply(ve,ve,ce.calculatePosMatrix(H.toUnwrapped()))}function X(ce,H,ve){if(ce)for(var K=0,de=ce;K<de.length;K+=1){var Ae=de[K],Ce=H[Ae];if(Ce&&Ce.source===ve&&Ce.type==="fill-extrusion")return!0}else for(var Ye in H){var lt=H[Ye];if(lt.source===ve&&lt.type==="fill-extrusion")return!0}return!1}function ee(ce,H,ve,K,de,Ae){var Ce=X(de&&de.layers,H,ce.id),Ye=Ae.maxPitchScaleFactor(),lt=ce.tilesIn(K,Ye,Ce);lt.sort(le);for(var Tt=[],Yt=0,ir=lt;Yt<ir.length;Yt+=1){var ur=ir[Yt];Tt.push({wrappedTileID:ur.tileID.wrapped().key,queryResults:ur.tile.queryRenderedFeatures(H,ve,ce._state,ur.queryGeometry,ur.cameraQueryGeometry,ur.scale,de,Ae,Ye,W(ce.transform,ur.tileID))})}var Sr=ge(Tt);for(var Br in Sr)Sr[Br].forEach(function(Or){var Fr=Or.feature,jr=ce.getFeatureState(Fr.layer["source-layer"],Fr.id);Fr.source=Fr.layer.source,Fr.layer["source-layer"]&&(Fr.sourceLayer=Fr.layer["source-layer"]),Fr.state=jr});return Sr}function te(ce,H,ve,K,de,Ae,Ce){for(var Ye={},lt=Ae.queryRenderedSymbols(K),Tt=[],Yt=0,ir=Object.keys(lt).map(Number);Yt<ir.length;Yt+=1){var ur=ir[Yt];Tt.push(Ce[ur])}Tt.sort(le);for(var Sr=function(){var cn=Or[Br],En=cn.featureIndex.lookupSymbolFeatures(lt[cn.bucketInstanceId],H,cn.bucketIndex,cn.sourceLayerIndex,de.filter,de.layers,de.availableImages,ce);for(var Fn in En){var jn=Ye[Fn]=Ye[Fn]||[],qn=En[Fn];qn.sort(function(ga,Ma){var La=cn.featureSortOrder;if(La){var Ha=La.indexOf(ga.featureIndex),ni=La.indexOf(Ma.featureIndex);return ni-Ha}else return Ma.featureIndex-ga.featureIndex});for(var Qn=0,ca=qn;Qn<ca.length;Qn+=1){var xa=ca[Qn];jn.push(xa)}}},Br=0,Or=Tt;Br<Or.length;Br+=1)Sr();var Fr=function(cn){Ye[cn].forEach(function(En){var Fn=En.feature,jn=ce[cn],qn=ve[jn.source],Qn=qn.getFeatureState(Fn.layer["source-layer"],Fn.id);Fn.source=Fn.layer.source,Fn.layer["source-layer"]&&(Fn.sourceLayer=Fn.layer["source-layer"]),Fn.state=Qn})};for(var jr in Ye)Fr(jr);return Ye}function ie(ce,H){for(var ve=ce.getRenderableIds().map(function(lt){return ce.getTileByID(lt)}),K=[],de={},Ae=0;Ae<ve.length;Ae++){var Ce=ve[Ae],Ye=Ce.tileID.canonical.key;de[Ye]||(de[Ye]=!0,Ce.querySourceFeatures(K,H))}return K}function le(ce,H){var ve=ce.tileID,K=H.tileID;return ve.overscaledZ-K.overscaledZ||ve.canonical.y-K.canonical.y||ve.wrap-K.wrap||ve.canonical.x-K.canonical.x}function ge(ce){for(var H={},ve={},K=0,de=ce;K<de.length;K+=1){var Ae=de[K],Ce=Ae.queryResults,Ye=Ae.wrappedTileID,lt=ve[Ye]=ve[Ye]||{};for(var Tt in Ce)for(var Yt=Ce[Tt],ir=lt[Tt]=lt[Tt]||{},ur=H[Tt]=H[Tt]||[],Sr=0,Br=Yt;Sr<Br.length;Sr+=1){var Or=Br[Sr];ir[Or.featureIndex]||(ir[Or.featureIndex]=!0,ur.push(Or))}}return H}var fe=function(H,ve){this.max=H,this.onRemove=ve,this.reset()};fe.prototype.reset=function(){for(var H in this.data)for(var ve=0,K=this.data[H];ve<K.length;ve+=1){var de=K[ve];de.timeout&&clearTimeout(de.timeout),this.onRemove(de.value)}return this.data={},this.order=[],this},fe.prototype.add=function(H,ve,K){var de=this,Ae=H.wrapped().key;this.data[Ae]===void 0&&(this.data[Ae]=[]);var Ce={value:ve,timeout:void 0};if(K!==void 0&&(Ce.timeout=setTimeout(function(){de.remove(H,Ce)},K)),this.data[Ae].push(Ce),this.order.push(Ae),this.order.length>this.max){var Ye=this._getAndRemoveByKey(this.order[0]);Ye&&this.onRemove(Ye)}return this},fe.prototype.has=function(H){return H.wrapped().key in this.data},fe.prototype.getAndRemove=function(H){return this.has(H)?this._getAndRemoveByKey(H.wrapped().key):null},fe.prototype._getAndRemoveByKey=function(H){var ve=this.data[H].shift();return ve.timeout&&clearTimeout(ve.timeout),this.data[H].length===0&&delete this.data[H],this.order.splice(this.order.indexOf(H),1),ve.value},fe.prototype.getByKey=function(H){var ve=this.data[H];return ve?ve[0].value:null},fe.prototype.get=function(H){if(!this.has(H))return null;var ve=this.data[H.wrapped().key][0];return ve.value},fe.prototype.remove=function(H,ve){if(!this.has(H))return this;var K=H.wrapped().key,de=ve===void 0?0:this.data[K].indexOf(ve),Ae=this.data[K][de];return this.data[K].splice(de,1),Ae.timeout&&clearTimeout(Ae.timeout),this.data[K].length===0&&delete this.data[K],this.onRemove(Ae.value),this.order.splice(this.order.indexOf(K),1),this},fe.prototype.setMaxSize=function(H){for(this.max=H;this.order.length>this.max;){var ve=this._getAndRemoveByKey(this.order[0]);ve&&this.onRemove(ve)}return this},fe.prototype.filter=function(H){var ve=[];for(var K in this.data)for(var de=0,Ae=this.data[K];de<Ae.length;de+=1){var Ce=Ae[de];H(Ce.value)||ve.push(Ce)}for(var Ye=0,lt=ve;Ye<lt.length;Ye+=1){var Tt=lt[Ye];this.remove(Tt.value.tileID,Tt)}};var pe=function(H,ve,K){this.context=H;var de=H.gl;this.buffer=de.createBuffer(),this.dynamicDraw=Boolean(K),this.context.unbindVAO(),H.bindElementBuffer.set(this.buffer),de.bufferData(de.ELEMENT_ARRAY_BUFFER,ve.arrayBuffer,this.dynamicDraw?de.DYNAMIC_DRAW:de.STATIC_DRAW),this.dynamicDraw||delete ve.arrayBuffer};pe.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},pe.prototype.updateData=function(H){var ve=this.context.gl;this.context.unbindVAO(),this.bind(),ve.bufferSubData(ve.ELEMENT_ARRAY_BUFFER,0,H.arrayBuffer)},pe.prototype.destroy=function(){var H=this.context.gl;this.buffer&&(H.deleteBuffer(this.buffer),delete this.buffer)};var ye={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},Te=function(H,ve,K,de){this.length=ve.length,this.attributes=K,this.itemSize=ve.bytesPerElement,this.dynamicDraw=de,this.context=H;var Ae=H.gl;this.buffer=Ae.createBuffer(),H.bindVertexBuffer.set(this.buffer),Ae.bufferData(Ae.ARRAY_BUFFER,ve.arrayBuffer,this.dynamicDraw?Ae.DYNAMIC_DRAW:Ae.STATIC_DRAW),this.dynamicDraw||delete ve.arrayBuffer};Te.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},Te.prototype.updateData=function(H){var ve=this.context.gl;this.bind(),ve.bufferSubData(ve.ARRAY_BUFFER,0,H.arrayBuffer)},Te.prototype.enableAttributes=function(H,ve){for(var K=0;K<this.attributes.length;K++){var de=this.attributes[K],Ae=ve.attributes[de.name];Ae!==void 0&&H.enableVertexAttribArray(Ae)}},Te.prototype.setVertexAttribPointers=function(H,ve,K){for(var de=0;de<this.attributes.length;de++){var Ae=this.attributes[de],Ce=ve.attributes[Ae.name];Ce!==void 0&&H.vertexAttribPointer(Ce,Ae.components,H[ye[Ae.type]],!1,this.itemSize,Ae.offset+this.itemSize*(K||0))}},Te.prototype.destroy=function(){var H=this.context.gl;this.buffer&&(H.deleteBuffer(this.buffer),delete this.buffer)};var _e=function(H){this.gl=H.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};_e.prototype.get=function(){return this.current},_e.prototype.set=function(H){},_e.prototype.getDefault=function(){return this.default},_e.prototype.setDefault=function(){this.set(this.default)};var De=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return e.Color.transparent},H.prototype.set=function(K){var de=this.current;K.r===de.r&&K.g===de.g&&K.b===de.b&&K.a===de.a&&!this.dirty||(this.gl.clearColor(K.r,K.g,K.b,K.a),this.current=K,this.dirty=!1)},H}(_e),Be=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return 1},H.prototype.set=function(K){K===this.current&&!this.dirty||(this.gl.clearDepth(K),this.current=K,this.dirty=!1)},H}(_e),Ue=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return 0},H.prototype.set=function(K){K===this.current&&!this.dirty||(this.gl.clearStencil(K),this.current=K,this.dirty=!1)},H}(_e),xe=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return[!0,!0,!0,!0]},H.prototype.set=function(K){var de=this.current;K[0]===de[0]&&K[1]===de[1]&&K[2]===de[2]&&K[3]===de[3]&&!this.dirty||(this.gl.colorMask(K[0],K[1],K[2],K[3]),this.current=K,this.dirty=!1)},H}(_e),Pe=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return!0},H.prototype.set=function(K){K===this.current&&!this.dirty||(this.gl.depthMask(K),this.current=K,this.dirty=!1)},H}(_e),Ve=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return 255},H.prototype.set=function(K){K===this.current&&!this.dirty||(this.gl.stencilMask(K),this.current=K,this.dirty=!1)},H}(_e),Qe=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},H.prototype.set=function(K){var de=this.current;K.func===de.func&&K.ref===de.ref&&K.mask===de.mask&&!this.dirty||(this.gl.stencilFunc(K.func,K.ref,K.mask),this.current=K,this.dirty=!1)},H}(_e),Fe=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){var K=this.gl;return[K.KEEP,K.KEEP,K.KEEP]},H.prototype.set=function(K){var de=this.current;K[0]===de[0]&&K[1]===de[1]&&K[2]===de[2]&&!this.dirty||(this.gl.stencilOp(K[0],K[1],K[2]),this.current=K,this.dirty=!1)},H}(_e),Le=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return!1},H.prototype.set=function(K){if(!(K===this.current&&!this.dirty)){var de=this.gl;K?de.enable(de.STENCIL_TEST):de.disable(de.STENCIL_TEST),this.current=K,this.dirty=!1}},H}(_e),Ne=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return[0,1]},H.prototype.set=function(K){var de=this.current;K[0]===de[0]&&K[1]===de[1]&&!this.dirty||(this.gl.depthRange(K[0],K[1]),this.current=K,this.dirty=!1)},H}(_e),dt=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return!1},H.prototype.set=function(K){if(!(K===this.current&&!this.dirty)){var de=this.gl;K?de.enable(de.DEPTH_TEST):de.disable(de.DEPTH_TEST),this.current=K,this.dirty=!1}},H}(_e),Dt=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return this.gl.LESS},H.prototype.set=function(K){K===this.current&&!this.dirty||(this.gl.depthFunc(K),this.current=K,this.dirty=!1)},H}(_e),Xt=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return!1},H.prototype.set=function(K){if(!(K===this.current&&!this.dirty)){var de=this.gl;K?de.enable(de.BLEND):de.disable(de.BLEND),this.current=K,this.dirty=!1}},H}(_e),At=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){var K=this.gl;return[K.ONE,K.ZERO]},H.prototype.set=function(K){var de=this.current;K[0]===de[0]&&K[1]===de[1]&&!this.dirty||(this.gl.blendFunc(K[0],K[1]),this.current=K,this.dirty=!1)},H}(_e),zt=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return e.Color.transparent},H.prototype.set=function(K){var de=this.current;K.r===de.r&&K.g===de.g&&K.b===de.b&&K.a===de.a&&!this.dirty||(this.gl.blendColor(K.r,K.g,K.b,K.a),this.current=K,this.dirty=!1)},H}(_e),Ut=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return this.gl.FUNC_ADD},H.prototype.set=function(K){K===this.current&&!this.dirty||(this.gl.blendEquation(K),this.current=K,this.dirty=!1)},H}(_e),Ct=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return!1},H.prototype.set=function(K){if(!(K===this.current&&!this.dirty)){var de=this.gl;K?de.enable(de.CULL_FACE):de.disable(de.CULL_FACE),this.current=K,this.dirty=!1}},H}(_e),Mt=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return this.gl.BACK},H.prototype.set=function(K){K===this.current&&!this.dirty||(this.gl.cullFace(K),this.current=K,this.dirty=!1)},H}(_e),rt=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return this.gl.CCW},H.prototype.set=function(K){K===this.current&&!this.dirty||(this.gl.frontFace(K),this.current=K,this.dirty=!1)},H}(_e),ct=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return null},H.prototype.set=function(K){K===this.current&&!this.dirty||(this.gl.useProgram(K),this.current=K,this.dirty=!1)},H}(_e),Ze=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return this.gl.TEXTURE0},H.prototype.set=function(K){K===this.current&&!this.dirty||(this.gl.activeTexture(K),this.current=K,this.dirty=!1)},H}(_e),ke=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){var K=this.gl;return[0,0,K.drawingBufferWidth,K.drawingBufferHeight]},H.prototype.set=function(K){var de=this.current;K[0]===de[0]&&K[1]===de[1]&&K[2]===de[2]&&K[3]===de[3]&&!this.dirty||(this.gl.viewport(K[0],K[1],K[2],K[3]),this.current=K,this.dirty=!1)},H}(_e),Ge=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return null},H.prototype.set=function(K){if(!(K===this.current&&!this.dirty)){var de=this.gl;de.bindFramebuffer(de.FRAMEBUFFER,K),this.current=K,this.dirty=!1}},H}(_e),Je=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return null},H.prototype.set=function(K){if(!(K===this.current&&!this.dirty)){var de=this.gl;de.bindRenderbuffer(de.RENDERBUFFER,K),this.current=K,this.dirty=!1}},H}(_e),ot=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return null},H.prototype.set=function(K){if(!(K===this.current&&!this.dirty)){var de=this.gl;de.bindTexture(de.TEXTURE_2D,K),this.current=K,this.dirty=!1}},H}(_e),Pt=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return null},H.prototype.set=function(K){if(!(K===this.current&&!this.dirty)){var de=this.gl;de.bindBuffer(de.ARRAY_BUFFER,K),this.current=K,this.dirty=!1}},H}(_e),_t=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return null},H.prototype.set=function(K){var de=this.gl;de.bindBuffer(de.ELEMENT_ARRAY_BUFFER,K),this.current=K,this.dirty=!1},H}(_e),Bt=function(ce){function H(ve){ce.call(this,ve),this.vao=ve.extVertexArrayObject}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return null},H.prototype.set=function(K){!this.vao||K===this.current&&!this.dirty||(this.vao.bindVertexArrayOES(K),this.current=K,this.dirty=!1)},H}(_e),qt=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return 4},H.prototype.set=function(K){if(!(K===this.current&&!this.dirty)){var de=this.gl;de.pixelStorei(de.UNPACK_ALIGNMENT,K),this.current=K,this.dirty=!1}},H}(_e),Ot=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return!1},H.prototype.set=function(K){if(!(K===this.current&&!this.dirty)){var de=this.gl;de.pixelStorei(de.UNPACK_PREMULTIPLY_ALPHA_WEBGL,K),this.current=K,this.dirty=!1}},H}(_e),$t=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return!1},H.prototype.set=function(K){if(!(K===this.current&&!this.dirty)){var de=this.gl;de.pixelStorei(de.UNPACK_FLIP_Y_WEBGL,K),this.current=K,this.dirty=!1}},H}(_e),rr=function(ce){function H(ve,K){ce.call(this,ve),this.context=ve,this.parent=K}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getDefault=function(){return null},H}(_e),er=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.setDirty=function(){this.dirty=!0},H.prototype.set=function(K){if(!(K===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var de=this.gl;de.framebufferTexture2D(de.FRAMEBUFFER,de.COLOR_ATTACHMENT0,de.TEXTURE_2D,K,0),this.current=K,this.dirty=!1}},H}(rr),pr=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.set=function(K){if(!(K===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var de=this.gl;de.framebufferRenderbuffer(de.FRAMEBUFFER,de.DEPTH_ATTACHMENT,de.RENDERBUFFER,K),this.current=K,this.dirty=!1}},H}(rr),Xr=function(H,ve,K,de){this.context=H,this.width=ve,this.height=K;var Ae=H.gl,Ce=this.framebuffer=Ae.createFramebuffer();this.colorAttachment=new er(H,Ce),de&&(this.depthAttachment=new pr(H,Ce))};Xr.prototype.destroy=function(){var H=this.context.gl,ve=this.colorAttachment.get();if(ve&&H.deleteTexture(ve),this.depthAttachment){var K=this.depthAttachment.get();K&&H.deleteRenderbuffer(K)}H.deleteFramebuffer(this.framebuffer)};var hn=519,Qr=function(H,ve,K){this.func=H,this.mask=ve,this.range=K};Qr.ReadOnly=!1,Qr.ReadWrite=!0,Qr.disabled=new Qr(hn,Qr.ReadOnly,[0,1]);var nt=519,Ht=7680,Kt=function(H,ve,K,de,Ae,Ce){this.test=H,this.ref=ve,this.mask=K,this.fail=de,this.depthFail=Ae,this.pass=Ce};Kt.disabled=new Kt({func:nt,mask:0},0,0,Ht,Ht,Ht);var Gt=0,br=1,tt=771,je=function(H,ve,K){this.blendFunction=H,this.blendColor=ve,this.mask=K};je.Replace=[br,Gt],je.disabled=new je(je.Replace,e.Color.transparent,[!1,!1,!1,!1]),je.unblended=new je(je.Replace,e.Color.transparent,[!0,!0,!0,!0]),je.alphaBlended=new je([br,tt],e.Color.transparent,[!0,!0,!0,!0]);var st=1029,ft=2305,Me=function(H,ve,K){this.enable=H,this.mode=ve,this.frontFace=K};Me.disabled=new Me(!1,st,ft),Me.backCCW=new Me(!0,st,ft);var Se=function(H){this.gl=H,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new De(this),this.clearDepth=new Be(this),this.clearStencil=new Ue(this),this.colorMask=new xe(this),this.depthMask=new Pe(this),this.stencilMask=new Ve(this),this.stencilFunc=new Qe(this),this.stencilOp=new Fe(this),this.stencilTest=new Le(this),this.depthRange=new Ne(this),this.depthTest=new dt(this),this.depthFunc=new Dt(this),this.blend=new Xt(this),this.blendFunc=new At(this),this.blendColor=new zt(this),this.blendEquation=new Ut(this),this.cullFace=new Ct(this),this.cullFaceSide=new Mt(this),this.frontFace=new rt(this),this.program=new ct(this),this.activeTexture=new Ze(this),this.viewport=new ke(this),this.bindFramebuffer=new Ge(this),this.bindRenderbuffer=new Je(this),this.bindTexture=new ot(this),this.bindVertexBuffer=new Pt(this),this.bindElementBuffer=new _t(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Bt(this),this.pixelStoreUnpack=new qt(this),this.pixelStoreUnpackPremultiplyAlpha=new Ot(this),this.pixelStoreUnpackFlipY=new $t(this),this.extTextureFilterAnisotropic=H.getExtension("EXT_texture_filter_anisotropic")||H.getExtension("MOZ_EXT_texture_filter_anisotropic")||H.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=H.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=H.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(H.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=H.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=H.getExtension("EXT_disjoint_timer_query")};Se.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Se.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Se.prototype.createIndexBuffer=function(H,ve){return new pe(this,H,ve)},Se.prototype.createVertexBuffer=function(H,ve,K){return new Te(this,H,ve,K)},Se.prototype.createRenderbuffer=function(H,ve,K){var de=this.gl,Ae=de.createRenderbuffer();return this.bindRenderbuffer.set(Ae),de.renderbufferStorage(de.RENDERBUFFER,H,ve,K),this.bindRenderbuffer.set(null),Ae},Se.prototype.createFramebuffer=function(H,ve,K){return new Xr(this,H,ve,K)},Se.prototype.clear=function(H){var ve=H.color,K=H.depth,de=this.gl,Ae=0;ve&&(Ae|=de.COLOR_BUFFER_BIT,this.clearColor.set(ve),this.colorMask.set([!0,!0,!0,!0])),typeof K<"u"&&(Ae|=de.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(K),this.depthMask.set(!0)),de.clear(Ae)},Se.prototype.setCullFace=function(H){H.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(H.mode),this.frontFace.set(H.frontFace))},Se.prototype.setDepthMode=function(H){H.func===this.gl.ALWAYS&&!H.mask?this.depthTest.set(!1):(this.depthTest.set(!0),this.depthFunc.set(H.func),this.depthMask.set(H.mask),this.depthRange.set(H.range))},Se.prototype.setStencilMode=function(H){H.test.func===this.gl.ALWAYS&&!H.mask?this.stencilTest.set(!1):(this.stencilTest.set(!0),this.stencilMask.set(H.mask),this.stencilOp.set([H.fail,H.depthFail,H.pass]),this.stencilFunc.set({func:H.test.func,ref:H.ref,mask:H.test.mask}))},Se.prototype.setColorMode=function(H){e.deepEqual(H.blendFunction,je.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(H.blendFunction),this.blendColor.set(H.blendColor)),this.colorMask.set(H.mask)},Se.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Ke=function(ce){function H(ve,K,de){var Ae=this;ce.call(this),this.id=ve,this.dispatcher=de,this.on("data",function(Ce){Ce.dataType==="source"&&Ce.sourceDataType==="metadata"&&(Ae._sourceLoaded=!0),Ae._sourceLoaded&&!Ae._paused&&Ce.dataType==="source"&&Ce.sourceDataType==="content"&&(Ae.reload(),Ae.transform&&Ae.update(Ae.transform))}),this.on("error",function(){Ae._sourceErrored=!0}),this._source=U(ve,K,de,this),this._tiles={},this._cache=new fe(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new e.SourceFeatureState}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.onAdd=function(K){this.map=K,this._maxTileCacheSize=K?K._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(K)},H.prototype.onRemove=function(K){this._source&&this._source.onRemove&&this._source.onRemove(K)},H.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var K in this._tiles){var de=this._tiles[K];if(de.state!=="loaded"&&de.state!=="errored")return!1}return!0},H.prototype.getSource=function(){return this._source},H.prototype.pause=function(){this._paused=!0},H.prototype.resume=function(){if(!!this._paused){var K=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,K&&this.reload(),this.transform&&this.update(this.transform)}},H.prototype._loadTile=function(K,de){return this._source.loadTile(K,de)},H.prototype._unloadTile=function(K){if(this._source.unloadTile)return this._source.unloadTile(K,function(){})},H.prototype._abortTile=function(K){if(this._source.abortTile)return this._source.abortTile(K,function(){})},H.prototype.serialize=function(){return this._source.serialize()},H.prototype.prepare=function(K){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(var de in this._tiles){var Ae=this._tiles[de];Ae.upload(K),Ae.prepare(this.map.style.imageManager)}},H.prototype.getIds=function(){return e.values(this._tiles).map(function(K){return K.tileID}).sort(Xe).map(function(K){return K.key})},H.prototype.getRenderableIds=function(K){var de=this,Ae=[];for(var Ce in this._tiles)this._isIdRenderable(Ce,K)&&Ae.push(this._tiles[Ce]);return K?Ae.sort(function(Ye,lt){var Tt=Ye.tileID,Yt=lt.tileID,ir=new e.Point(Tt.canonical.x,Tt.canonical.y)._rotate(de.transform.angle),ur=new e.Point(Yt.canonical.x,Yt.canonical.y)._rotate(de.transform.angle);return Tt.overscaledZ-Yt.overscaledZ||ur.y-ir.y||ur.x-ir.x}).map(function(Ye){return Ye.tileID.key}):Ae.map(function(Ye){return Ye.tileID}).sort(Xe).map(function(Ye){return Ye.key})},H.prototype.hasRenderableParent=function(K){var de=this.findLoadedParent(K,0);return de?this._isIdRenderable(de.tileID.key):!1},H.prototype._isIdRenderable=function(K,de){return this._tiles[K]&&this._tiles[K].hasData()&&!this._coveredTiles[K]&&(de||!this._tiles[K].holdingForFade())},H.prototype.reload=function(){if(this._paused){this._shouldReloadOnResume=!0;return}this._cache.reset();for(var K in this._tiles)this._tiles[K].state!=="errored"&&this._reloadTile(K,"reloading")},H.prototype._reloadTile=function(K,de){var Ae=this._tiles[K];!Ae||(Ae.state!=="loading"&&(Ae.state=de),this._loadTile(Ae,this._tileLoaded.bind(this,Ae,K,de)))},H.prototype._tileLoaded=function(K,de,Ae,Ce){if(Ce){K.state="errored",Ce.status!==404?this._source.fire(new e.ErrorEvent(Ce,{tile:K})):this.update(this.transform);return}K.timeAdded=e.browser.now(),Ae==="expired"&&(K.refreshedUponExpiration=!0),this._setTileReloadTimer(de,K),this.getSource().type==="raster-dem"&&K.dem&&this._backfillDEM(K),this._state.initializeTileState(K,this.map?this.map.painter:null),this._source.fire(new e.Event("data",{dataType:"source",tile:K,coord:K.tileID}))},H.prototype._backfillDEM=function(K){for(var de=this.getRenderableIds(),Ae=0;Ae<de.length;Ae++){var Ce=de[Ae];if(K.neighboringTiles&&K.neighboringTiles[Ce]){var Ye=this.getTileByID(Ce);lt(K,Ye),lt(Ye,K)}}function lt(Tt,Yt){Tt.needsHillshadePrepare=!0;var ir=Yt.tileID.canonical.x-Tt.tileID.canonical.x,ur=Yt.tileID.canonical.y-Tt.tileID.canonical.y,Sr=Math.pow(2,Tt.tileID.canonical.z),Br=Yt.tileID.key;ir===0&&ur===0||Math.abs(ur)>1||(Math.abs(ir)>1&&(Math.abs(ir+Sr)===1?ir+=Sr:Math.abs(ir-Sr)===1&&(ir-=Sr)),!(!Yt.dem||!Tt.dem)&&(Tt.dem.backfillBorder(Yt.dem,ir,ur),Tt.neighboringTiles&&Tt.neighboringTiles[Br]&&(Tt.neighboringTiles[Br].backfilled=!0)))}},H.prototype.getTile=function(K){return this.getTileByID(K.key)},H.prototype.getTileByID=function(K){return this._tiles[K]},H.prototype._retainLoadedChildren=function(K,de,Ae,Ce){for(var Ye in this._tiles){var lt=this._tiles[Ye];if(!(Ce[Ye]||!lt.hasData()||lt.tileID.overscaledZ<=de||lt.tileID.overscaledZ>Ae)){for(var Tt=lt.tileID;lt&&lt.tileID.overscaledZ>de+1;){var Yt=lt.tileID.scaledTo(lt.tileID.overscaledZ-1);lt=this._tiles[Yt.key],lt&&lt.hasData()&&(Tt=Yt)}for(var ir=Tt;ir.overscaledZ>de;)if(ir=ir.scaledTo(ir.overscaledZ-1),K[ir.key]){Ce[Tt.key]=Tt;break}}}},H.prototype.findLoadedParent=function(K,de){if(K.key in this._loadedParentTiles){var Ae=this._loadedParentTiles[K.key];return Ae&&Ae.tileID.overscaledZ>=de?Ae:null}for(var Ce=K.overscaledZ-1;Ce>=de;Ce--){var Ye=K.scaledTo(Ce),lt=this._getLoadedTile(Ye);if(lt)return lt}},H.prototype._getLoadedTile=function(K){var de=this._tiles[K.key];if(de&&de.hasData())return de;var Ae=this._cache.getByKey(K.wrapped().key);return Ae},H.prototype.updateCacheSize=function(K){var de=Math.ceil(K.width/this._source.tileSize)+1,Ae=Math.ceil(K.height/this._source.tileSize)+1,Ce=de*Ae,Ye=5,lt=Math.floor(Ce*Ye),Tt=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,lt):lt;this._cache.setMaxSize(Tt)},H.prototype.handleWrapJump=function(K){var de=this._prevLng===void 0?K:this._prevLng,Ae=K-de,Ce=Ae/360,Ye=Math.round(Ce);if(this._prevLng=K,Ye){var lt={};for(var Tt in this._tiles){var Yt=this._tiles[Tt];Yt.tileID=Yt.tileID.unwrapTo(Yt.tileID.wrap+Ye),lt[Yt.tileID.key]=Yt}this._tiles=lt;for(var ir in this._timers)clearTimeout(this._timers[ir]),delete this._timers[ir];for(var ur in this._tiles){var Sr=this._tiles[ur];this._setTileReloadTimer(ur,Sr)}}},H.prototype.update=function(K){var de=this;if(this.transform=K,!(!this._sourceLoaded||this._paused)){this.updateCacheSize(K),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={};var Ae;this.used?this._source.tileID?Ae=K.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(ga){return new e.OverscaledTileID(ga.canonical.z,ga.wrap,ga.canonical.z,ga.canonical.x,ga.canonical.y)}):(Ae=K.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(Ae=Ae.filter(function(ga){return de._source.hasTile(ga)}))):Ae=[];var Ce=K.coveringZoomLevel(this._source),Ye=Math.max(Ce-H.maxOverzooming,this._source.minzoom),lt=Math.max(Ce+H.maxUnderzooming,this._source.minzoom),Tt=this._updateRetainedTiles(Ae,Ce);if(it(this._source.type)){for(var Yt={},ir={},ur=Object.keys(Tt),Sr=0,Br=ur;Sr<Br.length;Sr+=1){var Or=Br[Sr],Fr=Tt[Or],jr=this._tiles[Or];if(!(!jr||jr.fadeEndTime&&jr.fadeEndTime<=e.browser.now())){var cn=this.findLoadedParent(Fr,Ye);cn&&(this._addTile(cn.tileID),Yt[cn.tileID.key]=cn.tileID),ir[Or]=Fr}}this._retainLoadedChildren(ir,Ce,lt,Tt);for(var En in Yt)Tt[En]||(this._coveredTiles[En]=!0,Tt[En]=Yt[En])}for(var Fn in Tt)this._tiles[Fn].clearFadeHold();for(var jn=e.keysDifference(this._tiles,Tt),qn=0,Qn=jn;qn<Qn.length;qn+=1){var ca=Qn[qn],xa=this._tiles[ca];xa.hasSymbolBuckets&&!xa.holdingForFade()?xa.setHoldDuration(this.map._fadeDuration):(!xa.hasSymbolBuckets||xa.symbolFadeFinished())&&this._removeTile(ca)}this._updateLoadedParentTileCache()}},H.prototype.releaseSymbolFadeTiles=function(){for(var K in this._tiles)this._tiles[K].holdingForFade()&&this._removeTile(K)},H.prototype._updateRetainedTiles=function(K,de){for(var Ae={},Ce={},Ye=Math.max(de-H.maxOverzooming,this._source.minzoom),lt=Math.max(de+H.maxUnderzooming,this._source.minzoom),Tt={},Yt=0,ir=K;Yt<ir.length;Yt+=1){var ur=ir[Yt],Sr=this._addTile(ur);Ae[ur.key]=ur,!Sr.hasData()&&de<this._source.maxzoom&&(Tt[ur.key]=ur)}this._retainLoadedChildren(Tt,de,lt,Ae);for(var Br=0,Or=K;Br<Or.length;Br+=1){var Fr=Or[Br],jr=this._tiles[Fr.key];if(!jr.hasData()){if(de+1>this._source.maxzoom){var cn=Fr.children(this._source.maxzoom)[0],En=this.getTile(cn);if(!!En&&En.hasData()){Ae[cn.key]=cn;continue}}else{var Fn=Fr.children(this._source.maxzoom);if(Ae[Fn[0].key]&&Ae[Fn[1].key]&&Ae[Fn[2].key]&&Ae[Fn[3].key])continue}for(var jn=jr.wasRequested(),qn=Fr.overscaledZ-1;qn>=Ye;--qn){var Qn=Fr.scaledTo(qn);if(Ce[Qn.key]||(Ce[Qn.key]=!0,jr=this.getTile(Qn),!jr&&jn&&(jr=this._addTile(Qn)),jr&&(Ae[Qn.key]=Qn,jn=jr.wasRequested(),jr.hasData())))break}}}return Ae},H.prototype._updateLoadedParentTileCache=function(){this._loadedParentTiles={};for(var K in this._tiles){for(var de=[],Ae=void 0,Ce=this._tiles[K].tileID;Ce.overscaledZ>0;){if(Ce.key in this._loadedParentTiles){Ae=this._loadedParentTiles[Ce.key];break}de.push(Ce.key);var Ye=Ce.scaledTo(Ce.overscaledZ-1);if(Ae=this._getLoadedTile(Ye),Ae)break;Ce=Ye}for(var lt=0,Tt=de;lt<Tt.length;lt+=1){var Yt=Tt[lt];this._loadedParentTiles[Yt]=Ae}}},H.prototype._addTile=function(K){var de=this._tiles[K.key];if(de)return de;de=this._cache.getAndRemove(K),de&&(this._setTileReloadTimer(K.key,de),de.tileID=K,this._state.initializeTileState(de,this.map?this.map.painter:null),this._cacheTimers[K.key]&&(clearTimeout(this._cacheTimers[K.key]),delete this._cacheTimers[K.key],this._setTileReloadTimer(K.key,de)));var Ae=Boolean(de);return Ae||(de=new e.Tile(K,this._source.tileSize*K.overscaleFactor()),this._loadTile(de,this._tileLoaded.bind(this,de,K.key,de.state))),de?(de.uses++,this._tiles[K.key]=de,Ae||this._source.fire(new e.Event("dataloading",{tile:de,coord:de.tileID,dataType:"source"})),de):null},H.prototype._setTileReloadTimer=function(K,de){var Ae=this;K in this._timers&&(clearTimeout(this._timers[K]),delete this._timers[K]);var Ce=de.getExpiryTimeout();Ce&&(this._timers[K]=setTimeout(function(){Ae._reloadTile(K,"expired"),delete Ae._timers[K]},Ce))},H.prototype._removeTile=function(K){var de=this._tiles[K];!de||(de.uses--,delete this._tiles[K],this._timers[K]&&(clearTimeout(this._timers[K]),delete this._timers[K]),!(de.uses>0)&&(de.hasData()&&de.state!=="reloading"?this._cache.add(de.tileID,de,de.getExpiryTimeout()):(de.aborted=!0,this._abortTile(de),this._unloadTile(de))))},H.prototype.clearTiles=function(){this._shouldReloadOnResume=!1,this._paused=!1;for(var K in this._tiles)this._removeTile(K);this._cache.reset()},H.prototype.tilesIn=function(K,de,Ae){var Ce=this,Ye=[],lt=this.transform;if(!lt)return Ye;for(var Tt=Ae?lt.getCameraQueryGeometry(K):K,Yt=K.map(function(qn){return lt.pointCoordinate(qn)}),ir=Tt.map(function(qn){return lt.pointCoordinate(qn)}),ur=this.getIds(),Sr=1/0,Br=1/0,Or=-1/0,Fr=-1/0,jr=0,cn=ir;jr<cn.length;jr+=1){var En=cn[jr];Sr=Math.min(Sr,En.x),Br=Math.min(Br,En.y),Or=Math.max(Or,En.x),Fr=Math.max(Fr,En.y)}for(var Fn=function(qn){var Qn=Ce._tiles[ur[qn]];if(!Qn.holdingForFade()){var ca=Qn.tileID,xa=Math.pow(2,lt.zoom-Qn.tileID.overscaledZ),ga=de*Qn.queryPadding*e.EXTENT/Qn.tileSize/xa,Ma=[ca.getTilePoint(new e.MercatorCoordinate(Sr,Br)),ca.getTilePoint(new e.MercatorCoordinate(Or,Fr))];if(Ma[0].x-ga<e.EXTENT&&Ma[0].y-ga<e.EXTENT&&Ma[1].x+ga>=0&&Ma[1].y+ga>=0){var La=Yt.map(function(ni){return ca.getTilePoint(ni)}),Ha=ir.map(function(ni){return ca.getTilePoint(ni)});Ye.push({tile:Qn,tileID:ca,queryGeometry:La,cameraQueryGeometry:Ha,scale:xa})}}},jn=0;jn<ur.length;jn++)Fn(jn);return Ye},H.prototype.getVisibleCoordinates=function(K){for(var de=this,Ae=this.getRenderableIds(K).map(function(Tt){return de._tiles[Tt].tileID}),Ce=0,Ye=Ae;Ce<Ye.length;Ce+=1){var lt=Ye[Ce];lt.posMatrix=this.transform.calculatePosMatrix(lt.toUnwrapped())}return Ae},H.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(it(this._source.type))for(var K in this._tiles){var de=this._tiles[K];if(de.fadeEndTime!==void 0&&de.fadeEndTime>=e.browser.now())return!0}return!1},H.prototype.setFeatureState=function(K,de,Ae){K=K||"_geojsonTileLayer",this._state.updateState(K,de,Ae)},H.prototype.removeFeatureState=function(K,de,Ae){K=K||"_geojsonTileLayer",this._state.removeFeatureState(K,de,Ae)},H.prototype.getFeatureState=function(K,de){return K=K||"_geojsonTileLayer",this._state.getState(K,de)},H.prototype.setDependencies=function(K,de,Ae){var Ce=this._tiles[K];Ce&&Ce.setDependencies(de,Ae)},H.prototype.reloadTilesForDependencies=function(K,de){for(var Ae in this._tiles){var Ce=this._tiles[Ae];Ce.hasDependency(K,de)&&this._reloadTile(Ae,"reloading")}this._cache.filter(function(Ye){return!Ye.hasDependency(K,de)})},H}(e.Evented);Ke.maxOverzooming=10,Ke.maxUnderzooming=3;function Xe(ce,H){var ve=Math.abs(ce.wrap*2)-+(ce.wrap<0),K=Math.abs(H.wrap*2)-+(H.wrap<0);return ce.overscaledZ-H.overscaledZ||K-ve||H.canonical.y-ce.canonical.y||H.canonical.x-ce.canonical.x}function it(ce){return ce==="raster"||ce==="image"||ce==="video"}function pt(){return new e.window.Worker(Ac.workerUrl)}var vt="mapboxgl_preloaded_worker_pool",St=function(){this.active={}};St.prototype.acquire=function(H){if(!this.workers)for(this.workers=[];this.workers.length<St.workerCount;)this.workers.push(new pt);return this.active[H]=!0,this.workers.slice()},St.prototype.release=function(H){delete this.active[H],this.numActive()===0&&(this.workers.forEach(function(ve){ve.terminate()}),this.workers=null)},St.prototype.isPreloaded=function(){return!!this.active[vt]},St.prototype.numActive=function(){return Object.keys(this.active).length};var kt=Math.floor(e.browser.hardwareConcurrency/2);St.workerCount=Math.max(Math.min(kt,6),1);var Nt;function nr(){return Nt||(Nt=new St),Nt}function fr(){var ce=nr();ce.acquire(vt)}function Hr(){var ce=Nt;ce&&(ce.isPreloaded()&&ce.numActive()===1?(ce.release(vt),Nt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))}function Er(ce,H){var ve={};for(var K in ce)K!=="ref"&&(ve[K]=ce[K]);return e.refProperties.forEach(function(de){de in H&&(ve[de]=H[de])}),ve}function _r(ce){ce=ce.slice();for(var H=Object.create(null),ve=0;ve<ce.length;ve++)H[ce[ve].id]=ce[ve];for(var K=0;K<ce.length;K++)"ref"in ce[K]&&(ce[K]=Er(ce[K],H[ce[K].ref]));return ce}function en(){var ce={},H=e.styleSpec.$version;for(var ve in e.styleSpec.$root){var K=e.styleSpec.$root[ve];if(K.required){var de=null;ve==="version"?de=H:K.type==="array"?de=[]:de={},de!=null&&(ce[ve]=de)}}return ce}var dr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function xr(ce,H,ve){ve.push({command:dr.addSource,args:[ce,H[ce]]})}function Ur(ce,H,ve){H.push({command:dr.removeSource,args:[ce]}),ve[ce]=!0}function Yr(ce,H,ve,K){Ur(ce,ve,K),xr(ce,H,ve)}function Ar(ce,H,ve){var K;for(K in ce[ve])if(!!ce[ve].hasOwnProperty(K)&&K!=="data"&&!e.deepEqual(ce[ve][K],H[ve][K]))return!1;for(K in H[ve])if(!!H[ve].hasOwnProperty(K)&&K!=="data"&&!e.deepEqual(ce[ve][K],H[ve][K]))return!1;return!0}function et(ce,H,ve,K){ce=ce||{},H=H||{};var de;for(de in ce)!ce.hasOwnProperty(de)||H.hasOwnProperty(de)||Ur(de,ve,K);for(de in H)!H.hasOwnProperty(de)||(ce.hasOwnProperty(de)?e.deepEqual(ce[de],H[de])||(ce[de].type==="geojson"&&H[de].type==="geojson"&&Ar(ce,H,de)?ve.push({command:dr.setGeoJSONSourceData,args:[de,H[de].data]}):Yr(de,H,ve,K)):xr(de,H,ve))}function Lt(ce,H,ve,K,de,Ae){ce=ce||{},H=H||{};var Ce;for(Ce in ce)!ce.hasOwnProperty(Ce)||e.deepEqual(ce[Ce],H[Ce])||ve.push({command:Ae,args:[K,Ce,H[Ce],de]});for(Ce in H)!H.hasOwnProperty(Ce)||ce.hasOwnProperty(Ce)||e.deepEqual(ce[Ce],H[Ce])||ve.push({command:Ae,args:[K,Ce,H[Ce],de]})}function Zt(ce){return ce.id}function sr(ce,H){return ce[H.id]=H,ce}function Ir(ce,H,ve){ce=ce||[],H=H||[];var K=ce.map(Zt),de=H.map(Zt),Ae=ce.reduce(sr,{}),Ce=H.reduce(sr,{}),Ye=K.slice(),lt=Object.create(null),Tt,Yt,ir,ur,Sr,Br,Or;for(Tt=0,Yt=0;Tt<K.length;Tt++)ir=K[Tt],Ce.hasOwnProperty(ir)?Yt++:(ve.push({command:dr.removeLayer,args:[ir]}),Ye.splice(Ye.indexOf(ir,Yt),1));for(Tt=0,Yt=0;Tt<de.length;Tt++)ir=de[de.length-1-Tt],Ye[Ye.length-1-Tt]!==ir&&(Ae.hasOwnProperty(ir)?(ve.push({command:dr.removeLayer,args:[ir]}),Ye.splice(Ye.lastIndexOf(ir,Ye.length-Yt),1)):Yt++,Br=Ye[Ye.length-Tt],ve.push({command:dr.addLayer,args:[Ce[ir],Br]}),Ye.splice(Ye.length-Tt,0,ir),lt[ir]=!0);for(Tt=0;Tt<de.length;Tt++)if(ir=de[Tt],ur=Ae[ir],Sr=Ce[ir],!(lt[ir]||e.deepEqual(ur,Sr))){if(!e.deepEqual(ur.source,Sr.source)||!e.deepEqual(ur["source-layer"],Sr["source-layer"])||!e.deepEqual(ur.type,Sr.type)){ve.push({command:dr.removeLayer,args:[ir]}),Br=Ye[Ye.lastIndexOf(ir)+1],ve.push({command:dr.addLayer,args:[Sr,Br]});continue}Lt(ur.layout,Sr.layout,ve,ir,null,dr.setLayoutProperty),Lt(ur.paint,Sr.paint,ve,ir,null,dr.setPaintProperty),e.deepEqual(ur.filter,Sr.filter)||ve.push({command:dr.setFilter,args:[ir,Sr.filter]}),(!e.deepEqual(ur.minzoom,Sr.minzoom)||!e.deepEqual(ur.maxzoom,Sr.maxzoom))&&ve.push({command:dr.setLayerZoomRange,args:[ir,Sr.minzoom,Sr.maxzoom]});for(Or in ur)!ur.hasOwnProperty(Or)||Or==="layout"||Or==="paint"||Or==="filter"||Or==="metadata"||Or==="minzoom"||Or==="maxzoom"||(Or.indexOf("paint.")===0?Lt(ur[Or],Sr[Or],ve,ir,Or.slice(6),dr.setPaintProperty):e.deepEqual(ur[Or],Sr[Or])||ve.push({command:dr.setLayerProperty,args:[ir,Or,Sr[Or]]}));for(Or in Sr)!Sr.hasOwnProperty(Or)||ur.hasOwnProperty(Or)||Or==="layout"||Or==="paint"||Or==="filter"||Or==="metadata"||Or==="minzoom"||Or==="maxzoom"||(Or.indexOf("paint.")===0?Lt(ur[Or],Sr[Or],ve,ir,Or.slice(6),dr.setPaintProperty):e.deepEqual(ur[Or],Sr[Or])||ve.push({command:dr.setLayerProperty,args:[ir,Or,Sr[Or]]}))}}function Zr(ce,H){if(!ce)return[{command:dr.setStyle,args:[H]}];var ve=[];try{if(!e.deepEqual(ce.version,H.version))return[{command:dr.setStyle,args:[H]}];e.deepEqual(ce.center,H.center)||ve.push({command:dr.setCenter,args:[H.center]}),e.deepEqual(ce.zoom,H.zoom)||ve.push({command:dr.setZoom,args:[H.zoom]}),e.deepEqual(ce.bearing,H.bearing)||ve.push({command:dr.setBearing,args:[H.bearing]}),e.deepEqual(ce.pitch,H.pitch)||ve.push({command:dr.setPitch,args:[H.pitch]}),e.deepEqual(ce.sprite,H.sprite)||ve.push({command:dr.setSprite,args:[H.sprite]}),e.deepEqual(ce.glyphs,H.glyphs)||ve.push({command:dr.setGlyphs,args:[H.glyphs]}),e.deepEqual(ce.transition,H.transition)||ve.push({command:dr.setTransition,args:[H.transition]}),e.deepEqual(ce.light,H.light)||ve.push({command:dr.setLight,args:[H.light]});var K={},de=[];et(ce.sources,H.sources,de,K);var Ae=[];ce.layers&&ce.layers.forEach(function(Ce){K[Ce.source]?ve.push({command:dr.removeLayer,args:[Ce.id]}):Ae.push(Ce)}),ve=ve.concat(de),Ir(Ae,H.layers,ve)}catch(Ce){console.warn("Unable to compute style diff:",Ce),ve=[{command:dr.setStyle,args:[H]}]}return ve}var Pr=function(H,ve){this.reset(H,ve)};Pr.prototype.reset=function(H,ve){this.points=H||[],this._distances=[0];for(var K=1;K<this.points.length;K++)this._distances[K]=this._distances[K-1]+this.points[K].dist(this.points[K-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(ve||0,this.length*.5),this.paddedLength=this.length-this.padding*2},Pr.prototype.lerp=function(H){if(this.points.length===1)return this.points[0];H=e.clamp(H,0,1);for(var ve=1,K=this._distances[ve],de=H*this.paddedLength+this.padding;K<de&&ve<this._distances.length;)K=this._distances[++ve];var Ae=ve-1,Ce=this._distances[Ae],Ye=K-Ce,lt=Ye>0?(de-Ce)/Ye:0;return this.points[Ae].mult(1-lt).add(this.points[ve].mult(lt))};var wr=function(H,ve,K){var de=this.boxCells=[],Ae=this.circleCells=[];this.xCellCount=Math.ceil(H/K),this.yCellCount=Math.ceil(ve/K);for(var Ce=0;Ce<this.xCellCount*this.yCellCount;Ce++)de.push([]),Ae.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=H,this.height=ve,this.xScale=this.xCellCount/H,this.yScale=this.yCellCount/ve,this.boxUid=0,this.circleUid=0};wr.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},wr.prototype.insert=function(H,ve,K,de,Ae){this._forEachCell(ve,K,de,Ae,this._insertBoxCell,this.boxUid++),this.boxKeys.push(H),this.bboxes.push(ve),this.bboxes.push(K),this.bboxes.push(de),this.bboxes.push(Ae)},wr.prototype.insertCircle=function(H,ve,K,de){this._forEachCell(ve-de,K-de,ve+de,K+de,this._insertCircleCell,this.circleUid++),this.circleKeys.push(H),this.circles.push(ve),this.circles.push(K),this.circles.push(de)},wr.prototype._insertBoxCell=function(H,ve,K,de,Ae,Ce){this.boxCells[Ae].push(Ce)},wr.prototype._insertCircleCell=function(H,ve,K,de,Ae,Ce){this.circleCells[Ae].push(Ce)},wr.prototype._query=function(H,ve,K,de,Ae,Ce){if(K<0||H>this.width||de<0||ve>this.height)return Ae?!1:[];var Ye=[];if(H<=0&&ve<=0&&this.width<=K&&this.height<=de){if(Ae)return!0;for(var lt=0;lt<this.boxKeys.length;lt++)Ye.push({key:this.boxKeys[lt],x1:this.bboxes[lt*4],y1:this.bboxes[lt*4+1],x2:this.bboxes[lt*4+2],y2:this.bboxes[lt*4+3]});for(var Tt=0;Tt<this.circleKeys.length;Tt++){var Yt=this.circles[Tt*3],ir=this.circles[Tt*3+1],ur=this.circles[Tt*3+2];Ye.push({key:this.circleKeys[Tt],x1:Yt-ur,y1:ir-ur,x2:Yt+ur,y2:ir+ur})}return Ce?Ye.filter(Ce):Ye}else{var Sr={hitTest:Ae,seenUids:{box:{},circle:{}}};return this._forEachCell(H,ve,K,de,this._queryCell,Ye,Sr,Ce),Ae?Ye.length>0:Ye}},wr.prototype._queryCircle=function(H,ve,K,de,Ae){var Ce=H-K,Ye=H+K,lt=ve-K,Tt=ve+K;if(Ye<0||Ce>this.width||Tt<0||lt>this.height)return de?!1:[];var Yt=[],ir={hitTest:de,circle:{x:H,y:ve,radius:K},seenUids:{box:{},circle:{}}};return this._forEachCell(Ce,lt,Ye,Tt,this._queryCellCircle,Yt,ir,Ae),de?Yt.length>0:Yt},wr.prototype.query=function(H,ve,K,de,Ae){return this._query(H,ve,K,de,!1,Ae)},wr.prototype.hitTest=function(H,ve,K,de,Ae){return this._query(H,ve,K,de,!0,Ae)},wr.prototype.hitTestCircle=function(H,ve,K,de){return this._queryCircle(H,ve,K,!0,de)},wr.prototype._queryCell=function(H,ve,K,de,Ae,Ce,Ye,lt){var Tt=Ye.seenUids,Yt=this.boxCells[Ae];if(Yt!==null)for(var ir=this.bboxes,ur=0,Sr=Yt;ur<Sr.length;ur+=1){var Br=Sr[ur];if(!Tt.box[Br]){Tt.box[Br]=!0;var Or=Br*4;if(H<=ir[Or+2]&&ve<=ir[Or+3]&&K>=ir[Or+0]&&de>=ir[Or+1]&&(!lt||lt(this.boxKeys[Br]))){if(Ye.hitTest)return Ce.push(!0),!0;Ce.push({key:this.boxKeys[Br],x1:ir[Or],y1:ir[Or+1],x2:ir[Or+2],y2:ir[Or+3]})}}}var Fr=this.circleCells[Ae];if(Fr!==null)for(var jr=this.circles,cn=0,En=Fr;cn<En.length;cn+=1){var Fn=En[cn];if(!Tt.circle[Fn]){Tt.circle[Fn]=!0;var jn=Fn*3;if(this._circleAndRectCollide(jr[jn],jr[jn+1],jr[jn+2],H,ve,K,de)&&(!lt||lt(this.circleKeys[Fn]))){if(Ye.hitTest)return Ce.push(!0),!0;var qn=jr[jn],Qn=jr[jn+1],ca=jr[jn+2];Ce.push({key:this.circleKeys[Fn],x1:qn-ca,y1:Qn-ca,x2:qn+ca,y2:Qn+ca})}}}},wr.prototype._queryCellCircle=function(H,ve,K,de,Ae,Ce,Ye,lt){var Tt=Ye.circle,Yt=Ye.seenUids,ir=this.boxCells[Ae];if(ir!==null)for(var ur=this.bboxes,Sr=0,Br=ir;Sr<Br.length;Sr+=1){var Or=Br[Sr];if(!Yt.box[Or]){Yt.box[Or]=!0;var Fr=Or*4;if(this._circleAndRectCollide(Tt.x,Tt.y,Tt.radius,ur[Fr+0],ur[Fr+1],ur[Fr+2],ur[Fr+3])&&(!lt||lt(this.boxKeys[Or])))return Ce.push(!0),!0}}var jr=this.circleCells[Ae];if(jr!==null)for(var cn=this.circles,En=0,Fn=jr;En<Fn.length;En+=1){var jn=Fn[En];if(!Yt.circle[jn]){Yt.circle[jn]=!0;var qn=jn*3;if(this._circlesCollide(cn[qn],cn[qn+1],cn[qn+2],Tt.x,Tt.y,Tt.radius)&&(!lt||lt(this.circleKeys[jn])))return Ce.push(!0),!0}}},wr.prototype._forEachCell=function(H,ve,K,de,Ae,Ce,Ye,lt){for(var Tt=this._convertToXCellCoord(H),Yt=this._convertToYCellCoord(ve),ir=this._convertToXCellCoord(K),ur=this._convertToYCellCoord(de),Sr=Tt;Sr<=ir;Sr++)for(var Br=Yt;Br<=ur;Br++){var Or=this.xCellCount*Br+Sr;if(Ae.call(this,H,ve,K,de,Or,Ce,Ye,lt))return}},wr.prototype._convertToXCellCoord=function(H){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(H*this.xScale)))},wr.prototype._convertToYCellCoord=function(H){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(H*this.yScale)))},wr.prototype._circlesCollide=function(H,ve,K,de,Ae,Ce){var Ye=de-H,lt=Ae-ve,Tt=K+Ce;return Tt*Tt>Ye*Ye+lt*lt},wr.prototype._circleAndRectCollide=function(H,ve,K,de,Ae,Ce,Ye){var lt=(Ce-de)/2,Tt=Math.abs(H-(de+lt));if(Tt>lt+K)return!1;var Yt=(Ye-Ae)/2,ir=Math.abs(ve-(Ae+Yt));if(ir>Yt+K)return!1;if(Tt<=lt||ir<=Yt)return!0;var ur=Tt-lt,Sr=ir-Yt;return ur*ur+Sr*Sr<=K*K};function Nr(ce,H,ve,K,de){var Ae=e.create();return H?(e.scale(Ae,Ae,[1/de,1/de,1]),ve||e.rotateZ(Ae,Ae,K.angle)):e.multiply(Ae,K.labelPlaneMatrix,ce),Ae}function Sn(ce,H,ve,K,de){if(H){var Ae=e.clone(ce);return e.scale(Ae,Ae,[de,de,1]),ve||e.rotateZ(Ae,Ae,-K.angle),Ae}else return K.glCoordMatrix}function _n(ce,H){var ve=[ce.x,ce.y,0,1];Mr(ve,ve,H);var K=ve[3];return{point:new e.Point(ve[0]/K,ve[1]/K),signedDistanceFromCamera:K}}function Wn(ce,H){return .5+.5*(ce/H)}function Ln(ce,H){var ve=ce[0]/ce[3],K=ce[1]/ce[3],de=ve>=-H[0]&&ve<=H[0]&&K>=-H[1]&&K<=H[1];return de}function Xn(ce,H,ve,K,de,Ae,Ce,Ye){var lt=K?ce.textSizeData:ce.iconSizeData,Tt=e.evaluateSizeForZoom(lt,ve.transform.zoom),Yt=[256/ve.width*2+1,256/ve.height*2+1],ir=K?ce.text.dynamicLayoutVertexArray:ce.icon.dynamicLayoutVertexArray;ir.clear();for(var ur=ce.lineVertexArray,Sr=K?ce.text.placedSymbolArray:ce.icon.placedSymbolArray,Br=ve.transform.width/ve.transform.height,Or=!1,Fr=0;Fr<Sr.length;Fr++){var jr=Sr.get(Fr);if(jr.hidden||jr.writingMode===e.WritingMode.vertical&&!Or){ti(jr.numGlyphs,ir);continue}Or=!1;var cn=[jr.anchorX,jr.anchorY,0,1];if(e.transformMat4(cn,cn,H),!Ln(cn,Yt)){ti(jr.numGlyphs,ir);continue}var En=cn[3],Fn=Wn(ve.transform.cameraToCenterDistance,En),jn=e.evaluateSizeForFeature(lt,Tt,jr),qn=Ce?jn/Fn:jn*Fn,Qn=new e.Point(jr.anchorX,jr.anchorY),ca=_n(Qn,de).point,xa={},ga=Ta(jr,qn,!1,Ye,H,de,Ae,ce.glyphOffsetArray,ur,ir,ca,Qn,xa,Br);Or=ga.useVertical,(ga.notEnoughRoom||Or||ga.needsFlipping&&Ta(jr,qn,!0,Ye,H,de,Ae,ce.glyphOffsetArray,ur,ir,ca,Qn,xa,Br).notEnoughRoom)&&ti(jr.numGlyphs,ir)}K?ce.text.dynamicLayoutVertexBuffer.updateData(ir):ce.icon.dynamicLayoutVertexBuffer.updateData(ir)}function Kn(ce,H,ve,K,de,Ae,Ce,Ye,lt,Tt,Yt){var ir=Ye.glyphStartIndex+Ye.numGlyphs,ur=Ye.lineStartIndex,Sr=Ye.lineStartIndex+Ye.lineLength,Br=H.getoffsetX(Ye.glyphStartIndex),Or=H.getoffsetX(ir-1),Fr=$a(ce*Br,ve,K,de,Ae,Ce,Ye.segment,ur,Sr,lt,Tt,Yt);if(!Fr)return null;var jr=$a(ce*Or,ve,K,de,Ae,Ce,Ye.segment,ur,Sr,lt,Tt,Yt);return jr?{first:Fr,last:jr}:null}function Aa(ce,H,ve,K){if(ce===e.WritingMode.horizontal){var de=Math.abs(ve.y-H.y),Ae=Math.abs(ve.x-H.x)*K;if(de>Ae)return{useVertical:!0}}return(ce===e.WritingMode.vertical?H.y<ve.y:H.x>ve.x)?{needsFlipping:!0}:null}function Ta(ce,H,ve,K,de,Ae,Ce,Ye,lt,Tt,Yt,ir,ur,Sr){var Br=H/24,Or=ce.lineOffsetX*Br,Fr=ce.lineOffsetY*Br,jr;if(ce.numGlyphs>1){var cn=ce.glyphStartIndex+ce.numGlyphs,En=ce.lineStartIndex,Fn=ce.lineStartIndex+ce.lineLength,jn=Kn(Br,Ye,Or,Fr,ve,Yt,ir,ce,lt,Ae,ur);if(!jn)return{notEnoughRoom:!0};var qn=_n(jn.first.point,Ce).point,Qn=_n(jn.last.point,Ce).point;if(K&&!ve){var ca=Aa(ce.writingMode,qn,Qn,Sr);if(ca)return ca}jr=[jn.first];for(var xa=ce.glyphStartIndex+1;xa<cn-1;xa++)jr.push($a(Br*Ye.getoffsetX(xa),Or,Fr,ve,Yt,ir,ce.segment,En,Fn,lt,Ae,ur));jr.push(jn.last)}else{if(K&&!ve){var ga=_n(ir,de).point,Ma=ce.lineStartIndex+ce.segment+1,La=new e.Point(lt.getx(Ma),lt.gety(Ma)),Ha=_n(La,de),ni=Ha.signedDistanceFromCamera>0?Ha.point:oi(ir,La,ga,1,de),Li=Aa(ce.writingMode,ga,ni,Sr);if(Li)return Li}var fi=$a(Br*Ye.getoffsetX(ce.glyphStartIndex),Or,Fr,ve,Yt,ir,ce.segment,ce.lineStartIndex,ce.lineStartIndex+ce.lineLength,lt,Ae,ur);if(!fi)return{notEnoughRoom:!0};jr=[fi]}for(var pi=0,Na=jr;pi<Na.length;pi+=1){var Pi=Na[pi];e.addDynamicAttributes(Tt,Pi.point,Pi.angle)}return{}}function oi(ce,H,ve,K,de){var Ae=_n(ce.add(ce.sub(H)._unit()),de).point,Ce=ve.sub(Ae);return ve.add(Ce._mult(K/Ce.mag()))}function $a(ce,H,ve,K,de,Ae,Ce,Ye,lt,Tt,Yt,ir){var ur=K?ce-H:ce+H,Sr=ur>0?1:-1,Br=0;K&&(Sr*=-1,Br=Math.PI),Sr<0&&(Br+=Math.PI);for(var Or=Sr>0?Ye+Ce:Ye+Ce+1,Fr=de,jr=de,cn=0,En=0,Fn=Math.abs(ur),jn=[];cn+En<=Fn;){if(Or+=Sr,Or<Ye||Or>=lt)return null;if(jr=Fr,jn.push(Fr),Fr=ir[Or],Fr===void 0){var qn=new e.Point(Tt.getx(Or),Tt.gety(Or)),Qn=_n(qn,Yt);if(Qn.signedDistanceFromCamera>0)Fr=ir[Or]=Qn.point;else{var ca=Or-Sr,xa=cn===0?Ae:new e.Point(Tt.getx(ca),Tt.gety(ca));Fr=oi(xa,qn,jr,Fn-cn+1,Yt)}}cn+=En,En=jr.dist(Fr)}var ga=(Fn-cn)/En,Ma=Fr.sub(jr),La=Ma.mult(ga)._add(jr);La._add(Ma._unit()._perp()._mult(ve*Sr));var Ha=Br+Math.atan2(Fr.y-jr.y,Fr.x-jr.x);return jn.push(La),{point:La,angle:Ha,path:jn}}var Va=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ti(ce,H){for(var ve=0;ve<ce;ve++){var K=H.length;H.resize(K+4),H.float32.set(Va,K*3)}}function Mr(ce,H,ve){var K=H[0],de=H[1];return ce[0]=ve[0]*K+ve[4]*de+ve[12],ce[1]=ve[1]*K+ve[5]*de+ve[13],ce[3]=ve[3]*K+ve[7]*de+ve[15],ce}var vn=100,fn=function(H,ve,K){ve===void 0&&(ve=new wr(H.width+2*vn,H.height+2*vn,25)),K===void 0&&(K=new wr(H.width+2*vn,H.height+2*vn,25)),this.transform=H,this.grid=ve,this.ignoredGrid=K,this.pitchfactor=Math.cos(H._pitch)*H.cameraToCenterDistance,this.screenRightBoundary=H.width+vn,this.screenBottomBoundary=H.height+vn,this.gridRightBoundary=H.width+2*vn,this.gridBottomBoundary=H.height+2*vn};fn.prototype.placeCollisionBox=function(H,ve,K,de,Ae){var Ce=this.projectAndGetPerspectiveRatio(de,H.anchorPointX,H.anchorPointY),Ye=K*Ce.perspectiveRatio,lt=H.x1*Ye+Ce.point.x,Tt=H.y1*Ye+Ce.point.y,Yt=H.x2*Ye+Ce.point.x,ir=H.y2*Ye+Ce.point.y;return!this.isInsideGrid(lt,Tt,Yt,ir)||!ve&&this.grid.hitTest(lt,Tt,Yt,ir,Ae)?{box:[],offscreen:!1}:{box:[lt,Tt,Yt,ir],offscreen:this.isOffscreen(lt,Tt,Yt,ir)}},fn.prototype.placeCollisionCircles=function(H,ve,K,de,Ae,Ce,Ye,lt,Tt,Yt,ir,ur,Sr){var Br=[],Or=new e.Point(ve.anchorX,ve.anchorY),Fr=_n(Or,Ce),jr=Wn(this.transform.cameraToCenterDistance,Fr.signedDistanceFromCamera),cn=Yt?Ae/jr:Ae*jr,En=cn/e.ONE_EM,Fn=_n(Or,Ye).point,jn={},qn=ve.lineOffsetX*En,Qn=ve.lineOffsetY*En,ca=Kn(En,de,qn,Qn,!1,Fn,Or,ve,K,Ye,jn),xa=!1,ga=!1,Ma=!0;if(ca){for(var La=ur*.5*jr+Sr,Ha=new e.Point(-vn,-vn),ni=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),Li=new Pr,fi=ca.first,pi=ca.last,Na=[],Pi=fi.path.length-1;Pi>=1;Pi--)Na.push(fi.path[Pi]);for(var zi=1;zi<pi.path.length;zi++)Na.push(pi.path[zi]);var Ni=La*2.5;if(lt){var _i=Na.map(function(tu){return _n(tu,lt)});_i.some(function(tu){return tu.signedDistanceFromCamera<=0})?Na=[]:Na=_i.map(function(tu){return tu.point})}var ji=[];if(Na.length>0){for(var ii=Na[0].clone(),wi=Na[0].clone(),_o=1;_o<Na.length;_o++)ii.x=Math.min(ii.x,Na[_o].x),ii.y=Math.min(ii.y,Na[_o].y),wi.x=Math.max(wi.x,Na[_o].x),wi.y=Math.max(wi.y,Na[_o].y);ii.x>=Ha.x&&wi.x<=ni.x&&ii.y>=Ha.y&&wi.y<=ni.y?ji=[Na]:wi.x<Ha.x||ii.x>ni.x||wi.y<Ha.y||ii.y>ni.y?ji=[]:ji=e.clipLine([Na],Ha.x,Ha.y,ni.x,ni.y)}for(var Bo=0,Al=ji;Bo<Al.length;Bo+=1){var Ml=Al[Bo];Li.reset(Ml,La*.25);var Ql=0;Li.length<=.5*La?Ql=1:Ql=Math.ceil(Li.paddedLength/Ni)+1;for(var $l=0;$l<Ql;$l++){var bu=$l/Math.max(Ql-1,1),ql=Li.lerp(bu),Bs=ql.x+vn,Vu=ql.y+vn;Br.push(Bs,Vu,La,0);var xs=Bs-La,ul=Vu-La,eu=Bs+La,Vl=Vu+La;if(Ma=Ma&&this.isOffscreen(xs,ul,eu,Vl),ga=ga||this.isInsideGrid(xs,ul,eu,Vl),!H&&this.grid.hitTestCircle(Bs,Vu,La,ir)&&(xa=!0,!Tt))return{circles:[],offscreen:!1,collisionDetected:xa}}}}return{circles:!Tt&&xa||!ga?[]:Br,offscreen:Ma,collisionDetected:xa}},fn.prototype.queryRenderedSymbols=function(H){if(H.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var ve=[],K=1/0,de=1/0,Ae=-1/0,Ce=-1/0,Ye=0,lt=H;Ye<lt.length;Ye+=1){var Tt=lt[Ye],Yt=new e.Point(Tt.x+vn,Tt.y+vn);K=Math.min(K,Yt.x),de=Math.min(de,Yt.y),Ae=Math.max(Ae,Yt.x),Ce=Math.max(Ce,Yt.y),ve.push(Yt)}for(var ir=this.grid.query(K,de,Ae,Ce).concat(this.ignoredGrid.query(K,de,Ae,Ce)),ur={},Sr={},Br=0,Or=ir;Br<Or.length;Br+=1){var Fr=Or[Br],jr=Fr.key;if(ur[jr.bucketInstanceId]===void 0&&(ur[jr.bucketInstanceId]={}),!ur[jr.bucketInstanceId][jr.featureIndex]){var cn=[new e.Point(Fr.x1,Fr.y1),new e.Point(Fr.x2,Fr.y1),new e.Point(Fr.x2,Fr.y2),new e.Point(Fr.x1,Fr.y2)];!e.polygonIntersectsPolygon(ve,cn)||(ur[jr.bucketInstanceId][jr.featureIndex]=!0,Sr[jr.bucketInstanceId]===void 0&&(Sr[jr.bucketInstanceId]=[]),Sr[jr.bucketInstanceId].push(jr.featureIndex))}}return Sr},fn.prototype.insertCollisionBox=function(H,ve,K,de,Ae){var Ce=ve?this.ignoredGrid:this.grid,Ye={bucketInstanceId:K,featureIndex:de,collisionGroupID:Ae};Ce.insert(Ye,H[0],H[1],H[2],H[3])},fn.prototype.insertCollisionCircles=function(H,ve,K,de,Ae){for(var Ce=ve?this.ignoredGrid:this.grid,Ye={bucketInstanceId:K,featureIndex:de,collisionGroupID:Ae},lt=0;lt<H.length;lt+=4)Ce.insertCircle(Ye,H[lt],H[lt+1],H[lt+2])},fn.prototype.projectAndGetPerspectiveRatio=function(H,ve,K){var de=[ve,K,0,1];Mr(de,de,H);var Ae=new e.Point((de[0]/de[3]+1)/2*this.transform.width+vn,(-de[1]/de[3]+1)/2*this.transform.height+vn);return{point:Ae,perspectiveRatio:.5+.5*(this.transform.cameraToCenterDistance/de[3])}},fn.prototype.isOffscreen=function(H,ve,K,de){return K<vn||H>=this.screenRightBoundary||de<vn||ve>this.screenBottomBoundary},fn.prototype.isInsideGrid=function(H,ve,K,de){return K>=0&&H<this.gridRightBoundary&&de>=0&&ve<this.gridBottomBoundary},fn.prototype.getViewportMatrix=function(){var H=e.identity([]);return e.translate(H,H,[-vn,-vn,0]),H};function An(ce,H,ve){return H*(e.EXTENT/(ce.tileSize*Math.pow(2,ve-ce.tileID.overscaledZ)))}var Gn=function(H,ve,K,de){H?this.opacity=Math.max(0,Math.min(1,H.opacity+(H.placed?ve:-ve))):this.opacity=de&&K?1:0,this.placed=K};Gn.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var ia=function(H,ve,K,de,Ae){this.text=new Gn(H?H.text:null,ve,K,Ae),this.icon=new Gn(H?H.icon:null,ve,de,Ae)};ia.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Yn=function(H,ve,K){this.text=H,this.icon=ve,this.skipFade=K},zn=function(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]},ea=function(H,ve,K,de,Ae){this.bucketInstanceId=H,this.featureIndex=ve,this.sourceLayerIndex=K,this.bucketIndex=de,this.tileID=Ae},wa=function(H){this.crossSourceCollisions=H,this.maxGroupID=0,this.collisionGroups={}};wa.prototype.get=function(H){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[H]){var ve=++this.maxGroupID;this.collisionGroups[H]={ID:ve,predicate:function(K){return K.collisionGroupID===ve}}}return this.collisionGroups[H]};function si(ce,H,ve,K,de){var Ae=e.getAnchorAlignment(ce),Ce=Ae.horizontalAlign,Ye=Ae.verticalAlign,lt=-(Ce-.5)*H,Tt=-(Ye-.5)*ve,Yt=e.evaluateVariableOffset(ce,K);return new e.Point(lt+Yt[0]*de,Tt+Yt[1]*de)}function Ft(ce,H,ve,K,de,Ae){var Ce=ce.x1,Ye=ce.x2,lt=ce.y1,Tt=ce.y2,Yt=ce.anchorPointX,ir=ce.anchorPointY,ur=new e.Point(H,ve);return K&&ur._rotate(de?Ae:-Ae),{x1:Ce+ur.x,y1:lt+ur.y,x2:Ye+ur.x,y2:Tt+ur.y,anchorPointX:Yt,anchorPointY:ir}}var cr=function(H,ve,K,de){this.transform=H.clone(),this.collisionIndex=new fn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=ve,this.retainedQueryData={},this.collisionGroups=new wa(K),this.collisionCircleArrays={},this.prevPlacement=de,de&&(de.prevPlacement=void 0),this.placedOrientations={}};cr.prototype.getBucketParts=function(H,ve,K,de){var Ae=K.getBucket(ve),Ce=K.latestFeatureIndex;if(!(!Ae||!Ce||ve.id!==Ae.layerIds[0])){var Ye=K.collisionBoxArray,lt=Ae.layers[0].layout,Tt=Math.pow(2,this.transform.zoom-K.tileID.overscaledZ),Yt=K.tileSize/e.EXTENT,ir=this.transform.calculatePosMatrix(K.tileID.toUnwrapped()),ur=lt.get("text-pitch-alignment")==="map",Sr=lt.get("text-rotation-alignment")==="map",Br=An(K,1,this.transform.zoom),Or=Nr(ir,ur,Sr,this.transform,Br),Fr=null;if(ur){var jr=Sn(ir,ur,Sr,this.transform,Br);Fr=e.multiply([],this.transform.labelPlaneMatrix,jr)}this.retainedQueryData[Ae.bucketInstanceId]=new ea(Ae.bucketInstanceId,Ce,Ae.sourceLayerIndex,Ae.index,K.tileID);var cn={bucket:Ae,layout:lt,posMatrix:ir,textLabelPlaneMatrix:Or,labelToScreenMatrix:Fr,scale:Tt,textPixelRatio:Yt,holdingForFade:K.holdingForFade(),collisionBoxArray:Ye,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(Ae.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(Ae.sourceID)};if(de)for(var En=0,Fn=Ae.sortKeyRanges;En<Fn.length;En+=1){var jn=Fn[En],qn=jn.sortKey,Qn=jn.symbolInstanceStart,ca=jn.symbolInstanceEnd;H.push({sortKey:qn,symbolInstanceStart:Qn,symbolInstanceEnd:ca,parameters:cn})}else H.push({symbolInstanceStart:0,symbolInstanceEnd:Ae.symbolInstances.length,parameters:cn})}},cr.prototype.attemptAnchorPlacement=function(H,ve,K,de,Ae,Ce,Ye,lt,Tt,Yt,ir,ur,Sr,Br,Or){var Fr=[ur.textOffset0,ur.textOffset1],jr=si(H,K,de,Fr,Ae),cn=this.collisionIndex.placeCollisionBox(Ft(ve,jr.x,jr.y,Ce,Ye,this.transform.angle),ir,lt,Tt,Yt.predicate);if(Or){var En=this.collisionIndex.placeCollisionBox(Ft(Or,jr.x,jr.y,Ce,Ye,this.transform.angle),ir,lt,Tt,Yt.predicate);if(En.box.length===0)return}if(cn.box.length>0){var Fn;return this.prevPlacement&&this.prevPlacement.variableOffsets[ur.crossTileID]&&this.prevPlacement.placements[ur.crossTileID]&&this.prevPlacement.placements[ur.crossTileID].text&&(Fn=this.prevPlacement.variableOffsets[ur.crossTileID].anchor),this.variableOffsets[ur.crossTileID]={textOffset:Fr,width:K,height:de,anchor:H,textBoxScale:Ae,prevAnchor:Fn},this.markUsedJustification(Sr,H,ur,Br),Sr.allowVerticalPlacement&&(this.markUsedOrientation(Sr,Br,ur),this.placedOrientations[ur.crossTileID]=Br),{shift:jr,placedGlyphBoxes:cn}}},cr.prototype.placeLayerBucketPart=function(H,ve,K){var de=this,Ae=H.parameters,Ce=Ae.bucket,Ye=Ae.layout,lt=Ae.posMatrix,Tt=Ae.textLabelPlaneMatrix,Yt=Ae.labelToScreenMatrix,ir=Ae.textPixelRatio,ur=Ae.holdingForFade,Sr=Ae.collisionBoxArray,Br=Ae.partiallyEvaluatedTextSize,Or=Ae.collisionGroup,Fr=Ye.get("text-optional"),jr=Ye.get("icon-optional"),cn=Ye.get("text-allow-overlap"),En=Ye.get("icon-allow-overlap"),Fn=Ye.get("text-rotation-alignment")==="map",jn=Ye.get("text-pitch-alignment")==="map",qn=Ye.get("icon-text-fit")!=="none",Qn=Ye.get("symbol-z-order")==="viewport-y",ca=cn&&(En||!Ce.hasIconData()||jr),xa=En&&(cn||!Ce.hasTextData()||Fr);!Ce.collisionArrays&&Sr&&Ce.deserializeCollisionBoxes(Sr);var ga=function(fi,pi){if(!ve[fi.crossTileID]){if(ur){de.placements[fi.crossTileID]=new Yn(!1,!1,!1);return}var Na=!1,Pi=!1,zi=!0,Ni=null,_i={box:null,offscreen:null},ji={box:null,offscreen:null},ii=null,wi=null,_o=null,Bo=0,Al=0,Ml=0;pi.textFeatureIndex?Bo=pi.textFeatureIndex:fi.useRuntimeCollisionCircles&&(Bo=fi.featureIndex),pi.verticalTextFeatureIndex&&(Al=pi.verticalTextFeatureIndex);var Ql=pi.textBox;if(Ql){var $l=function(Eo){var Qs=e.WritingMode.horizontal;if(Ce.allowVerticalPlacement&&!Eo&&de.prevPlacement){var $s=de.prevPlacement.placedOrientations[fi.crossTileID];$s&&(de.placedOrientations[fi.crossTileID]=$s,Qs=$s,de.markUsedOrientation(Ce,Qs,fi))}return Qs},bu=function(Eo,Qs){if(Ce.allowVerticalPlacement&&fi.numVerticalGlyphVertices>0&&pi.verticalTextBox)for(var $s=0,Df=Ce.writingModes;$s<Df.length;$s+=1){var nc=Df[$s];if(nc===e.WritingMode.vertical?(_i=Qs(),ji=_i):_i=Eo(),_i&&_i.box&&_i.box.length)break}else _i=Eo()};if(Ye.get("text-variable-anchor")){var xs=Ye.get("text-variable-anchor");if(de.prevPlacement&&de.prevPlacement.variableOffsets[fi.crossTileID]){var ul=de.prevPlacement.variableOffsets[fi.crossTileID];xs.indexOf(ul.anchor)>0&&(xs=xs.filter(function(Eo){return Eo!==ul.anchor}),xs.unshift(ul.anchor))}var eu=function(Eo,Qs,$s){for(var Df=Eo.x2-Eo.x1,nc=Eo.y2-Eo.y1,Kc=fi.textBoxScale,Jc=qn&&!En?Qs:null,xf={box:[],offscreen:!1},Qc=cn?xs.length*2:xs.length,Rf=0;Rf<Qc;++Rf){var $c=xs[Rf%xs.length],qc=Rf>=xs.length,ac=de.attemptAnchorPlacement($c,Eo,Df,nc,Kc,Fn,jn,ir,lt,Or,qc,fi,Ce,$s,Jc);if(ac&&(xf=ac.placedGlyphBoxes,xf&&xf.box&&xf.box.length)){Na=!0,Ni=ac.shift;break}}return xf},Vl=function(){return eu(Ql,pi.iconBox,e.WritingMode.horizontal)},tu=function(){var Eo=pi.verticalTextBox,Qs=_i&&_i.box&&_i.box.length;return Ce.allowVerticalPlacement&&!Qs&&fi.numVerticalGlyphVertices>0&&Eo?eu(Eo,pi.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}};bu(Vl,tu),_i&&(Na=_i.box,zi=_i.offscreen);var Ef=$l(_i&&_i.box);if(!Na&&de.prevPlacement){var Xu=de.prevPlacement.variableOffsets[fi.crossTileID];Xu&&(de.variableOffsets[fi.crossTileID]=Xu,de.markUsedJustification(Ce,Xu.anchor,fi,Ef))}}else{var ql=function(Eo,Qs){var $s=de.collisionIndex.placeCollisionBox(Eo,cn,ir,lt,Or.predicate);return $s&&$s.box&&$s.box.length&&(de.markUsedOrientation(Ce,Qs,fi),de.placedOrientations[fi.crossTileID]=Qs),$s},Bs=function(){return ql(Ql,e.WritingMode.horizontal)},Vu=function(){var Eo=pi.verticalTextBox;return Ce.allowVerticalPlacement&&fi.numVerticalGlyphVertices>0&&Eo?ql(Eo,e.WritingMode.vertical):{box:null,offscreen:null}};bu(Bs,Vu),$l(_i&&_i.box&&_i.box.length)}}if(ii=_i,Na=ii&&ii.box&&ii.box.length>0,zi=ii&&ii.offscreen,fi.useRuntimeCollisionCircles){var fs=Ce.text.placedSymbolArray.get(fi.centerJustifiedTextSymbolIndex),yf=e.evaluateSizeForFeature(Ce.textSizeData,Br,fs),ks=Ye.get("text-padding"),mf=fi.collisionCircleDiameter;wi=de.collisionIndex.placeCollisionCircles(cn,fs,Ce.lineVertexArray,Ce.glyphOffsetArray,yf,lt,Tt,Yt,K,jn,Or.predicate,mf,ks),Na=cn||wi.circles.length>0&&!wi.collisionDetected,zi=zi&&wi.offscreen}if(pi.iconFeatureIndex&&(Ml=pi.iconFeatureIndex),pi.iconBox){var Cf=function(Eo){var Qs=qn&&Ni?Ft(Eo,Ni.x,Ni.y,Fn,jn,de.transform.angle):Eo;return de.collisionIndex.placeCollisionBox(Qs,En,ir,lt,Or.predicate)};ji&&ji.box&&ji.box.length&&pi.verticalIconBox?(_o=Cf(pi.verticalIconBox),Pi=_o.box.length>0):(_o=Cf(pi.iconBox),Pi=_o.box.length>0),zi=zi&&_o.offscreen}var Lf=Fr||fi.numHorizontalGlyphVertices===0&&fi.numVerticalGlyphVertices===0,Mc=jr||fi.numIconVertices===0;if(!Lf&&!Mc?Pi=Na=Pi&&Na:Mc?Lf||(Pi=Pi&&Na):Na=Pi&&Na,Na&&ii&&ii.box&&(ji&&ji.box&&Al?de.collisionIndex.insertCollisionBox(ii.box,Ye.get("text-ignore-placement"),Ce.bucketInstanceId,Al,Or.ID):de.collisionIndex.insertCollisionBox(ii.box,Ye.get("text-ignore-placement"),Ce.bucketInstanceId,Bo,Or.ID)),Pi&&_o&&de.collisionIndex.insertCollisionBox(_o.box,Ye.get("icon-ignore-placement"),Ce.bucketInstanceId,Ml,Or.ID),wi&&(Na&&de.collisionIndex.insertCollisionCircles(wi.circles,Ye.get("text-ignore-placement"),Ce.bucketInstanceId,Bo,Or.ID),K)){var Pf=Ce.bucketInstanceId,nf=de.collisionCircleArrays[Pf];nf===void 0&&(nf=de.collisionCircleArrays[Pf]=new zn);for(var af=0;af<wi.circles.length;af+=4)nf.circles.push(wi.circles[af+0]),nf.circles.push(wi.circles[af+1]),nf.circles.push(wi.circles[af+2]),nf.circles.push(wi.collisionDetected?1:0)}de.placements[fi.crossTileID]=new Yn(Na||ca,Pi||xa,zi||Ce.justReloaded),ve[fi.crossTileID]=!0}};if(Qn)for(var Ma=Ce.getSortedSymbolIndexes(this.transform.angle),La=Ma.length-1;La>=0;--La){var Ha=Ma[La];ga(Ce.symbolInstances.get(Ha),Ce.collisionArrays[Ha])}else for(var ni=H.symbolInstanceStart;ni<H.symbolInstanceEnd;ni++)ga(Ce.symbolInstances.get(ni),Ce.collisionArrays[ni]);if(K&&Ce.bucketInstanceId in this.collisionCircleArrays){var Li=this.collisionCircleArrays[Ce.bucketInstanceId];e.invert(Li.invProjMatrix,lt),Li.viewportMatrix=this.collisionIndex.getViewportMatrix()}Ce.justReloaded=!1},cr.prototype.markUsedJustification=function(H,ve,K,de){var Ae={left:K.leftJustifiedTextSymbolIndex,center:K.centerJustifiedTextSymbolIndex,right:K.rightJustifiedTextSymbolIndex},Ce;de===e.WritingMode.vertical?Ce=K.verticalPlacedTextSymbolIndex:Ce=Ae[e.getAnchorJustification(ve)];for(var Ye=[K.leftJustifiedTextSymbolIndex,K.centerJustifiedTextSymbolIndex,K.rightJustifiedTextSymbolIndex,K.verticalPlacedTextSymbolIndex],lt=0,Tt=Ye;lt<Tt.length;lt+=1){var Yt=Tt[lt];Yt>=0&&(Ce>=0&&Yt!==Ce?H.text.placedSymbolArray.get(Yt).crossTileID=0:H.text.placedSymbolArray.get(Yt).crossTileID=K.crossTileID)}},cr.prototype.markUsedOrientation=function(H,ve,K){for(var de=ve===e.WritingMode.horizontal||ve===e.WritingMode.horizontalOnly?ve:0,Ae=ve===e.WritingMode.vertical?ve:0,Ce=[K.leftJustifiedTextSymbolIndex,K.centerJustifiedTextSymbolIndex,K.rightJustifiedTextSymbolIndex],Ye=0,lt=Ce;Ye<lt.length;Ye+=1){var Tt=lt[Ye];H.text.placedSymbolArray.get(Tt).placedOrientation=de}K.verticalPlacedTextSymbolIndex&&(H.text.placedSymbolArray.get(K.verticalPlacedTextSymbolIndex).placedOrientation=Ae)},cr.prototype.commit=function(H){this.commitTime=H,this.zoomAtLastRecencyCheck=this.transform.zoom;var ve=this.prevPlacement,K=!1;this.prevZoomAdjustment=ve?ve.zoomAdjustment(this.transform.zoom):0;var de=ve?ve.symbolFadeChange(H):1,Ae=ve?ve.opacities:{},Ce=ve?ve.variableOffsets:{},Ye=ve?ve.placedOrientations:{};for(var lt in this.placements){var Tt=this.placements[lt],Yt=Ae[lt];Yt?(this.opacities[lt]=new ia(Yt,de,Tt.text,Tt.icon),K=K||Tt.text!==Yt.text.placed||Tt.icon!==Yt.icon.placed):(this.opacities[lt]=new ia(null,de,Tt.text,Tt.icon,Tt.skipFade),K=K||Tt.text||Tt.icon)}for(var ir in Ae){var ur=Ae[ir];if(!this.opacities[ir]){var Sr=new ia(ur,de,!1,!1);Sr.isHidden()||(this.opacities[ir]=Sr,K=K||ur.text.placed||ur.icon.placed)}}for(var Br in Ce)!this.variableOffsets[Br]&&this.opacities[Br]&&!this.opacities[Br].isHidden()&&(this.variableOffsets[Br]=Ce[Br]);for(var Or in Ye)!this.placedOrientations[Or]&&this.opacities[Or]&&!this.opacities[Or].isHidden()&&(this.placedOrientations[Or]=Ye[Or]);K?this.lastPlacementChangeTime=H:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=ve?ve.lastPlacementChangeTime:H)},cr.prototype.updateLayerOpacities=function(H,ve){for(var K={},de=0,Ae=ve;de<Ae.length;de+=1){var Ce=Ae[de],Ye=Ce.getBucket(H);Ye&&Ce.latestFeatureIndex&&H.id===Ye.layerIds[0]&&this.updateBucketOpacities(Ye,K,Ce.collisionBoxArray)}},cr.prototype.updateBucketOpacities=function(H,ve,K){var de=this;H.hasTextData()&&H.text.opacityVertexArray.clear(),H.hasIconData()&&H.icon.opacityVertexArray.clear(),H.hasIconCollisionBoxData()&&H.iconCollisionBox.collisionVertexArray.clear(),H.hasTextCollisionBoxData()&&H.textCollisionBox.collisionVertexArray.clear();var Ae=H.layers[0].layout,Ce=new ia(null,0,!1,!1,!0),Ye=Ae.get("text-allow-overlap"),lt=Ae.get("icon-allow-overlap"),Tt=Ae.get("text-variable-anchor"),Yt=Ae.get("text-rotation-alignment")==="map",ir=Ae.get("text-pitch-alignment")==="map",ur=Ae.get("icon-text-fit")!=="none",Sr=new ia(null,0,Ye&&(lt||!H.hasIconData()||Ae.get("icon-optional")),lt&&(Ye||!H.hasTextData()||Ae.get("text-optional")),!0);!H.collisionArrays&&K&&(H.hasIconCollisionBoxData()||H.hasTextCollisionBoxData())&&H.deserializeCollisionBoxes(K);for(var Br=function(cn,En,Fn){for(var jn=0;jn<En/4;jn++)cn.opacityVertexArray.emplaceBack(Fn)},Or=function(cn){var En=H.symbolInstances.get(cn),Fn=En.numHorizontalGlyphVertices,jn=En.numVerticalGlyphVertices,qn=En.crossTileID,Qn=ve[qn],ca=de.opacities[qn];Qn?ca=Ce:ca||(ca=Sr,de.opacities[qn]=ca),ve[qn]=!0;var xa=Fn>0||jn>0,ga=En.numIconVertices>0,Ma=de.placedOrientations[En.crossTileID],La=Ma===e.WritingMode.vertical,Ha=Ma===e.WritingMode.horizontal||Ma===e.WritingMode.horizontalOnly;if(xa){var ni=Dr(ca.text),Li=La?dn:ni;Br(H.text,Fn,Li);var fi=Ha?dn:ni;Br(H.text,jn,fi);var pi=ca.text.isHidden();[En.rightJustifiedTextSymbolIndex,En.centerJustifiedTextSymbolIndex,En.leftJustifiedTextSymbolIndex].forEach(function(Ml){Ml>=0&&(H.text.placedSymbolArray.get(Ml).hidden=pi||La?1:0)}),En.verticalPlacedTextSymbolIndex>=0&&(H.text.placedSymbolArray.get(En.verticalPlacedTextSymbolIndex).hidden=pi||Ha?1:0);var Na=de.variableOffsets[En.crossTileID];Na&&de.markUsedJustification(H,Na.anchor,En,Ma);var Pi=de.placedOrientations[En.crossTileID];Pi&&(de.markUsedJustification(H,"left",En,Pi),de.markUsedOrientation(H,Pi,En))}if(ga){var zi=Dr(ca.icon),Ni=!(ur&&En.verticalPlacedIconSymbolIndex&&La);if(En.placedIconSymbolIndex>=0){var _i=Ni?zi:dn;Br(H.icon,En.numIconVertices,_i),H.icon.placedSymbolArray.get(En.placedIconSymbolIndex).hidden=ca.icon.isHidden()}if(En.verticalPlacedIconSymbolIndex>=0){var ji=Ni?dn:zi;Br(H.icon,En.numVerticalIconVertices,ji),H.icon.placedSymbolArray.get(En.verticalPlacedIconSymbolIndex).hidden=ca.icon.isHidden()}}if(H.hasIconCollisionBoxData()||H.hasTextCollisionBoxData()){var ii=H.collisionArrays[cn];if(ii){var wi=new e.Point(0,0);if(ii.textBox||ii.verticalTextBox){var _o=!0;if(Tt){var Bo=de.variableOffsets[qn];Bo?(wi=si(Bo.anchor,Bo.width,Bo.height,Bo.textOffset,Bo.textBoxScale),Yt&&wi._rotate(ir?de.transform.angle:-de.transform.angle)):_o=!1}ii.textBox&&$r(H.textCollisionBox.collisionVertexArray,ca.text.placed,!_o||La,wi.x,wi.y),ii.verticalTextBox&&$r(H.textCollisionBox.collisionVertexArray,ca.text.placed,!_o||Ha,wi.x,wi.y)}var Al=Boolean(!Ha&&ii.verticalIconBox);ii.iconBox&&$r(H.iconCollisionBox.collisionVertexArray,ca.icon.placed,Al,ur?wi.x:0,ur?wi.y:0),ii.verticalIconBox&&$r(H.iconCollisionBox.collisionVertexArray,ca.icon.placed,!Al,ur?wi.x:0,ur?wi.y:0)}}},Fr=0;Fr<H.symbolInstances.length;Fr++)Or(Fr);if(H.sortFeatures(this.transform.angle),this.retainedQueryData[H.bucketInstanceId]&&(this.retainedQueryData[H.bucketInstanceId].featureSortOrder=H.featureSortOrder),H.hasTextData()&&H.text.opacityVertexBuffer&&H.text.opacityVertexBuffer.updateData(H.text.opacityVertexArray),H.hasIconData()&&H.icon.opacityVertexBuffer&&H.icon.opacityVertexBuffer.updateData(H.icon.opacityVertexArray),H.hasIconCollisionBoxData()&&H.iconCollisionBox.collisionVertexBuffer&&H.iconCollisionBox.collisionVertexBuffer.updateData(H.iconCollisionBox.collisionVertexArray),H.hasTextCollisionBoxData()&&H.textCollisionBox.collisionVertexBuffer&&H.textCollisionBox.collisionVertexBuffer.updateData(H.textCollisionBox.collisionVertexArray),H.bucketInstanceId in this.collisionCircleArrays){var jr=this.collisionCircleArrays[H.bucketInstanceId];H.placementInvProjMatrix=jr.invProjMatrix,H.placementViewportMatrix=jr.viewportMatrix,H.collisionCircleArray=jr.circles,delete this.collisionCircleArrays[H.bucketInstanceId]}},cr.prototype.symbolFadeChange=function(H){return this.fadeDuration===0?1:(H-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},cr.prototype.zoomAdjustment=function(H){return Math.max(0,(this.transform.zoom-H)/1.5)},cr.prototype.hasTransitions=function(H){return this.stale||H-this.lastPlacementChangeTime<this.fadeDuration},cr.prototype.stillRecent=function(H,ve){var K=this.zoomAtLastRecencyCheck===ve?1-this.zoomAdjustment(ve):1;return this.zoomAtLastRecencyCheck=ve,this.commitTime+this.fadeDuration*K>H},cr.prototype.setStale=function(){this.stale=!0};function $r(ce,H,ve,K,de){ce.emplaceBack(H?1:0,ve?1:0,K||0,de||0),ce.emplaceBack(H?1:0,ve?1:0,K||0,de||0),ce.emplaceBack(H?1:0,ve?1:0,K||0,de||0),ce.emplaceBack(H?1:0,ve?1:0,K||0,de||0)}var rn=Math.pow(2,25),sn=Math.pow(2,24),kn=Math.pow(2,17),mn=Math.pow(2,16),un=Math.pow(2,9),yr=Math.pow(2,8),gr=Math.pow(2,1);function Dr(ce){if(ce.opacity===0&&!ce.placed)return 0;if(ce.opacity===1&&ce.placed)return 4294967295;var H=ce.placed?1:0,ve=Math.floor(ce.opacity*127);return ve*rn+H*sn+ve*kn+H*mn+ve*un+H*yr+ve*gr+H}var dn=0,Bn=function(H){this._sortAcrossTiles=H.layout.get("symbol-z-order")!=="viewport-y"&&H.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Bn.prototype.continuePlacement=function(H,ve,K,de,Ae){for(var Ce=this._bucketParts;this._currentTileIndex<H.length;){var Ye=H[this._currentTileIndex];if(ve.getBucketParts(Ce,de,Ye,this._sortAcrossTiles),this._currentTileIndex++,Ae())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Ce.sort(function(Tt,Yt){return Tt.sortKey-Yt.sortKey}));this._currentPartIndex<Ce.length;){var lt=Ce[this._currentPartIndex];if(ve.placeLayerBucketPart(lt,this._seenCrossTileIDs,K),this._currentPartIndex++,Ae())return!0}return!1};var ta=function(H,ve,K,de,Ae,Ce,Ye){this.placement=new cr(H,Ae,Ce,Ye),this._currentPlacementIndex=ve.length-1,this._forceFullPlacement=K,this._showCollisionBoxes=de,this._done=!1};ta.prototype.isDone=function(){return this._done},ta.prototype.continuePlacement=function(H,ve,K){for(var de=this,Ae=e.browser.now(),Ce=function(){var ir=e.browser.now()-Ae;return de._forceFullPlacement?!1:ir>2};this._currentPlacementIndex>=0;){var Ye=H[this._currentPlacementIndex],lt=ve[Ye],Tt=this.placement.collisionIndex.transform.zoom;if(lt.type==="symbol"&&(!lt.minzoom||lt.minzoom<=Tt)&&(!lt.maxzoom||lt.maxzoom>Tt)){this._inProgressLayer||(this._inProgressLayer=new Bn(lt));var Yt=this._inProgressLayer.continuePlacement(K[lt.source],this.placement,this._showCollisionBoxes,lt,Ce);if(Yt)return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},ta.prototype.commit=function(H){return this.placement.commit(H),this.placement};var bn=512/e.EXTENT/2,Zn=function(H,ve,K){this.tileID=H,this.indexedSymbolInstances={},this.bucketInstanceId=K;for(var de=0;de<ve.length;de++){var Ae=ve.get(de),Ce=Ae.key;this.indexedSymbolInstances[Ce]||(this.indexedSymbolInstances[Ce]=[]),this.indexedSymbolInstances[Ce].push({crossTileID:Ae.crossTileID,coord:this.getScaledCoordinates(Ae,H)})}};Zn.prototype.getScaledCoordinates=function(H,ve){var K=ve.canonical.z-this.tileID.canonical.z,de=bn/Math.pow(2,K);return{x:Math.floor((ve.canonical.x*e.EXTENT+H.anchorX)*de),y:Math.floor((ve.canonical.y*e.EXTENT+H.anchorY)*de)}},Zn.prototype.findMatches=function(H,ve,K){for(var de=this.tileID.canonical.z<ve.canonical.z?1:Math.pow(2,this.tileID.canonical.z-ve.canonical.z),Ae=0;Ae<H.length;Ae++){var Ce=H.get(Ae);if(!Ce.crossTileID){var Ye=this.indexedSymbolInstances[Ce.key];if(!!Ye)for(var lt=this.getScaledCoordinates(Ce,ve),Tt=0,Yt=Ye;Tt<Yt.length;Tt+=1){var ir=Yt[Tt];if(Math.abs(ir.coord.x-lt.x)<=de&&Math.abs(ir.coord.y-lt.y)<=de&&!K[ir.crossTileID]){K[ir.crossTileID]=!0,Ce.crossTileID=ir.crossTileID;break}}}}};var aa=function(){this.maxCrossTileID=0};aa.prototype.generate=function(){return++this.maxCrossTileID};var pa=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};pa.prototype.handleWrapJump=function(H){var ve=Math.round((H-this.lng)/360);if(ve!==0)for(var K in this.indexes){var de=this.indexes[K],Ae={};for(var Ce in de){var Ye=de[Ce];Ye.tileID=Ye.tileID.unwrapTo(Ye.tileID.wrap+ve),Ae[Ye.tileID.key]=Ye}this.indexes[K]=Ae}this.lng=H},pa.prototype.addBucket=function(H,ve,K){if(this.indexes[H.overscaledZ]&&this.indexes[H.overscaledZ][H.key]){if(this.indexes[H.overscaledZ][H.key].bucketInstanceId===ve.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(H.overscaledZ,this.indexes[H.overscaledZ][H.key])}for(var de=0;de<ve.symbolInstances.length;de++){var Ae=ve.symbolInstances.get(de);Ae.crossTileID=0}this.usedCrossTileIDs[H.overscaledZ]||(this.usedCrossTileIDs[H.overscaledZ]={});var Ce=this.usedCrossTileIDs[H.overscaledZ];for(var Ye in this.indexes){var lt=this.indexes[Ye];if(Number(Ye)>H.overscaledZ)for(var Tt in lt){var Yt=lt[Tt];Yt.tileID.isChildOf(H)&&Yt.findMatches(ve.symbolInstances,H,Ce)}else{var ir=H.scaledTo(Number(Ye)),ur=lt[ir.key];ur&&ur.findMatches(ve.symbolInstances,H,Ce)}}for(var Sr=0;Sr<ve.symbolInstances.length;Sr++){var Br=ve.symbolInstances.get(Sr);Br.crossTileID||(Br.crossTileID=K.generate(),Ce[Br.crossTileID]=!0)}return this.indexes[H.overscaledZ]===void 0&&(this.indexes[H.overscaledZ]={}),this.indexes[H.overscaledZ][H.key]=new Zn(H,ve.symbolInstances,ve.bucketInstanceId),!0},pa.prototype.removeBucketCrossTileIDs=function(H,ve){for(var K in ve.indexedSymbolInstances)for(var de=0,Ae=ve.indexedSymbolInstances[K];de<Ae.length;de+=1){var Ce=Ae[de];delete this.usedCrossTileIDs[H][Ce.crossTileID]}},pa.prototype.removeStaleBuckets=function(H){var ve=!1;for(var K in this.indexes){var de=this.indexes[K];for(var Ae in de)H[de[Ae].bucketInstanceId]||(this.removeBucketCrossTileIDs(K,de[Ae]),delete de[Ae],ve=!0)}return ve};var ya=function(){this.layerIndexes={},this.crossTileIDs=new aa,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};ya.prototype.addLayer=function(H,ve,K){var de=this.layerIndexes[H.id];de===void 0&&(de=this.layerIndexes[H.id]=new pa);var Ae=!1,Ce={};de.handleWrapJump(K);for(var Ye=0,lt=ve;Ye<lt.length;Ye+=1){var Tt=lt[Ye],Yt=Tt.getBucket(H);!Yt||H.id!==Yt.layerIds[0]||(Yt.bucketInstanceId||(Yt.bucketInstanceId=++this.maxBucketInstanceId),de.addBucket(Tt.tileID,Yt,this.crossTileIDs)&&(Ae=!0),Ce[Yt.bucketInstanceId]=!0)}return de.removeStaleBuckets(Ce)&&(Ae=!0),Ae},ya.prototype.pruneUnusedLayers=function(H){var ve={};H.forEach(function(de){ve[de]=!0});for(var K in this.layerIndexes)ve[K]||delete this.layerIndexes[K]};var la=function(ce,H){return e.emitValidationErrors(ce,H&&H.filter(function(ve){return ve.identifier!=="source.canvas"}))},Sa=e.pick(dr,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),ho=e.pick(dr,["setCenter","setZoom","setBearing","setPitch"]),Ro=en(),Zo=function(ce){function H(ve,K){var de=this;K===void 0&&(K={}),ce.call(this),this.map=ve,this.dispatcher=new R(nr(),this),this.imageManager=new _,this.imageManager.setEventedParent(this),this.glyphManager=new S(ve._requestManager,K.localIdeographFontFamily),this.lineAtlas=new D(256,512),this.crossTileSymbolIndex=new ya,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());var Ae=this;this._rtlTextPluginCallback=H.registerForPluginStateChange(function(Ce){var Ye={pluginStatus:Ce.pluginStatus,pluginURL:Ce.pluginURL};Ae.dispatcher.broadcast("syncRTLPluginState",Ye,function(lt,Tt){if(e.triggerPluginCompletionEvent(lt),Tt){var Yt=Tt.every(function(ur){return ur});if(Yt)for(var ir in Ae.sourceCaches)Ae.sourceCaches[ir].reload()}})}),this.on("data",function(Ce){if(!(Ce.dataType!=="source"||Ce.sourceDataType!=="metadata")){var Ye=de.sourceCaches[Ce.sourceId];if(!!Ye){var lt=Ye.getSource();if(!(!lt||!lt.vectorLayerIds))for(var Tt in de._layers){var Yt=de._layers[Tt];Yt.source===lt.id&&de._validateLayer(Yt)}}}})}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.loadURL=function(K,de){var Ae=this;de===void 0&&(de={}),this.fire(new e.Event("dataloading",{dataType:"style"}));var Ce=typeof de.validate=="boolean"?de.validate:!e.isMapboxURL(K);K=this.map._requestManager.normalizeStyleURL(K,de.accessToken);var Ye=this.map._requestManager.transformRequest(K,e.ResourceType.Style);this._request=e.getJSON(Ye,function(lt,Tt){Ae._request=null,lt?Ae.fire(new e.ErrorEvent(lt)):Tt&&Ae._load(Tt,Ce)})},H.prototype.loadJSON=function(K,de){var Ae=this;de===void 0&&(de={}),this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame(function(){Ae._request=null,Ae._load(K,de.validate!==!1)})},H.prototype.loadEmpty=function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Ro,!1)},H.prototype._load=function(K,de){if(!(de&&la(this,e.validateStyle(K)))){this._loaded=!0,this.stylesheet=K;for(var Ae in K.sources)this.addSource(Ae,K.sources[Ae],{validate:!1});K.sprite?this._loadSprite(K.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(K.glyphs);var Ce=_r(this.stylesheet.layers);this._order=Ce.map(function(Yt){return Yt.id}),this._layers={},this._serializedLayers={};for(var Ye=0,lt=Ce;Ye<lt.length;Ye+=1){var Tt=lt[Ye];Tt=e.createStyleLayer(Tt),Tt.setEventedParent(this,{layer:{id:Tt.id}}),this._layers[Tt.id]=Tt,this._serializedLayers[Tt.id]=Tt.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new I(this.stylesheet.light),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}},H.prototype._loadSprite=function(K){var de=this;this._spriteRequest=c(K,this.map._requestManager,function(Ae,Ce){if(de._spriteRequest=null,Ae)de.fire(new e.ErrorEvent(Ae));else if(Ce)for(var Ye in Ce)de.imageManager.addImage(Ye,Ce[Ye]);de.imageManager.setLoaded(!0),de._availableImages=de.imageManager.listImages(),de.dispatcher.broadcast("setImages",de._availableImages),de.fire(new e.Event("data",{dataType:"style"}))})},H.prototype._validateLayer=function(K){var de=this.sourceCaches[K.source];if(!!de){var Ae=K.sourceLayer;if(!!Ae){var Ce=de.getSource();(Ce.type==="geojson"||Ce.vectorLayerIds&&Ce.vectorLayerIds.indexOf(Ae)===-1)&&this.fire(new e.ErrorEvent(new Error('Source layer "'+Ae+'" does not exist on source "'+Ce.id+'" as specified by style layer "'+K.id+'"')))}}},H.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var K in this.sourceCaches)if(!this.sourceCaches[K].loaded())return!1;return!!this.imageManager.isLoaded()},H.prototype._serializeLayers=function(K){for(var de=[],Ae=0,Ce=K;Ae<Ce.length;Ae+=1){var Ye=Ce[Ae],lt=this._layers[Ye];lt.type!=="custom"&&de.push(lt.serialize())}return de},H.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var K in this.sourceCaches)if(this.sourceCaches[K].hasTransition())return!0;for(var de in this._layers)if(this._layers[de].hasTransition())return!0;return!1},H.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},H.prototype.update=function(K){if(!!this._loaded){var de=this._changed;if(this._changed){var Ae=Object.keys(this._updatedLayers),Ce=Object.keys(this._removedLayers);(Ae.length||Ce.length)&&this._updateWorkerLayers(Ae,Ce);for(var Ye in this._updatedSources){var lt=this._updatedSources[Ye];lt==="reload"?this._reloadSource(Ye):lt==="clear"&&this._clearSource(Ye)}this._updateTilesForChangedImages();for(var Tt in this._updatedPaintProps)this._layers[Tt].updateTransitions(K);this.light.updateTransitions(K),this._resetUpdates()}for(var Yt in this.sourceCaches)this.sourceCaches[Yt].used=!1;for(var ir=0,ur=this._order;ir<ur.length;ir+=1){var Sr=ur[ir],Br=this._layers[Sr];Br.recalculate(K,this._availableImages),!Br.isHidden(K.zoom)&&Br.source&&(this.sourceCaches[Br.source].used=!0)}this.light.recalculate(K),this.z=K.zoom,de&&this.fire(new e.Event("data",{dataType:"style"}))}},H.prototype._updateTilesForChangedImages=function(){var K=Object.keys(this._changedImages);if(K.length){for(var de in this.sourceCaches)this.sourceCaches[de].reloadTilesForDependencies(["icons","patterns"],K);this._changedImages={}}},H.prototype._updateWorkerLayers=function(K,de){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(K),removedIds:de})},H.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},H.prototype.setState=function(K){var de=this;if(this._checkLoaded(),la(this,e.validateStyle(K)))return!1;K=e.clone$1(K),K.layers=_r(K.layers);var Ae=Zr(this.serialize(),K).filter(function(Ye){return!(Ye.command in ho)});if(Ae.length===0)return!1;var Ce=Ae.filter(function(Ye){return!(Ye.command in Sa)});if(Ce.length>0)throw new Error("Unimplemented: "+Ce.map(function(Ye){return Ye.command}).join(", ")+".");return Ae.forEach(function(Ye){Ye.command!=="setTransition"&&de[Ye.command].apply(de,Ye.args)}),this.stylesheet=K,!0},H.prototype.addImage=function(K,de){if(this.getImage(K))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(K,de),this._availableImages=this.imageManager.listImages(),this._changedImages[K]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},H.prototype.updateImage=function(K,de){this.imageManager.updateImage(K,de)},H.prototype.getImage=function(K){return this.imageManager.getImage(K)},H.prototype.removeImage=function(K){if(!this.getImage(K))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(K),this._availableImages=this.imageManager.listImages(),this._changedImages[K]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},H.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},H.prototype.addSource=function(K,de,Ae){var Ce=this;if(Ae===void 0&&(Ae={}),this._checkLoaded(),this.sourceCaches[K]!==void 0)throw new Error("There is already a source with this ID");if(!de.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(de).join(", ")+".");var Ye=["vector","raster","geojson","video","image"],lt=Ye.indexOf(de.type)>=0;if(!(lt&&this._validate(e.validateStyle.source,"sources."+K,de,null,Ae))){this.map&&this.map._collectResourceTiming&&(de.collectResourceTiming=!0);var Tt=this.sourceCaches[K]=new Ke(K,de,this.dispatcher);Tt.style=this,Tt.setEventedParent(this,function(){return{isSourceLoaded:Ce.loaded(),source:Tt.serialize(),sourceId:K}}),Tt.onAdd(this.map),this._changed=!0}},H.prototype.removeSource=function(K){if(this._checkLoaded(),this.sourceCaches[K]===void 0)throw new Error("There is no source with this ID");for(var de in this._layers)if(this._layers[de].source===K)return this.fire(new e.ErrorEvent(new Error('Source "'+K+'" cannot be removed while layer "'+de+'" is using it.')));var Ae=this.sourceCaches[K];delete this.sourceCaches[K],delete this._updatedSources[K],Ae.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:K})),Ae.setEventedParent(null),Ae.clearTiles(),Ae.onRemove&&Ae.onRemove(this.map),this._changed=!0},H.prototype.setGeoJSONSourceData=function(K,de){this._checkLoaded();var Ae=this.sourceCaches[K].getSource();Ae.setData(de),this._changed=!0},H.prototype.getSource=function(K){return this.sourceCaches[K]&&this.sourceCaches[K].getSource()},H.prototype.addLayer=function(K,de,Ae){Ae===void 0&&(Ae={}),this._checkLoaded();var Ce=K.id;if(this.getLayer(Ce)){this.fire(new e.ErrorEvent(new Error('Layer with id "'+Ce+'" already exists on this map')));return}var Ye;if(K.type==="custom"){if(la(this,e.validateCustomStyleLayer(K)))return;Ye=e.createStyleLayer(K)}else{if(typeof K.source=="object"&&(this.addSource(Ce,K.source),K=e.clone$1(K),K=e.extend(K,{source:Ce})),this._validate(e.validateStyle.layer,"layers."+Ce,K,{arrayIndex:-1},Ae))return;Ye=e.createStyleLayer(K),this._validateLayer(Ye),Ye.setEventedParent(this,{layer:{id:Ce}}),this._serializedLayers[Ye.id]=Ye.serialize()}var lt=de?this._order.indexOf(de):this._order.length;if(de&&lt===-1){this.fire(new e.ErrorEvent(new Error('Layer with id "'+de+'" does not exist on this map.')));return}if(this._order.splice(lt,0,Ce),this._layerOrderChanged=!0,this._layers[Ce]=Ye,this._removedLayers[Ce]&&Ye.source&&Ye.type!=="custom"){var Tt=this._removedLayers[Ce];delete this._removedLayers[Ce],Tt.type!==Ye.type?this._updatedSources[Ye.source]="clear":(this._updatedSources[Ye.source]="reload",this.sourceCaches[Ye.source].pause())}this._updateLayer(Ye),Ye.onAdd&&Ye.onAdd(this.map)},H.prototype.moveLayer=function(K,de){this._checkLoaded(),this._changed=!0;var Ae=this._layers[K];if(!Ae){this.fire(new e.ErrorEvent(new Error("The layer '"+K+"' does not exist in the map's style and cannot be moved.")));return}if(K!==de){var Ce=this._order.indexOf(K);this._order.splice(Ce,1);var Ye=de?this._order.indexOf(de):this._order.length;if(de&&Ye===-1){this.fire(new e.ErrorEvent(new Error('Layer with id "'+de+'" does not exist on this map.')));return}this._order.splice(Ye,0,K),this._layerOrderChanged=!0}},H.prototype.removeLayer=function(K){this._checkLoaded();var de=this._layers[K];if(!de){this.fire(new e.ErrorEvent(new Error("The layer '"+K+"' does not exist in the map's style and cannot be removed.")));return}de.setEventedParent(null);var Ae=this._order.indexOf(K);this._order.splice(Ae,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[K]=de,delete this._layers[K],delete this._serializedLayers[K],delete this._updatedLayers[K],delete this._updatedPaintProps[K],de.onRemove&&de.onRemove(this.map)},H.prototype.getLayer=function(K){return this._layers[K]},H.prototype.hasLayer=function(K){return K in this._layers},H.prototype.setLayerZoomRange=function(K,de,Ae){this._checkLoaded();var Ce=this.getLayer(K);if(!Ce){this.fire(new e.ErrorEvent(new Error("The layer '"+K+"' does not exist in the map's style and cannot have zoom extent.")));return}Ce.minzoom===de&&Ce.maxzoom===Ae||(de!=null&&(Ce.minzoom=de),Ae!=null&&(Ce.maxzoom=Ae),this._updateLayer(Ce))},H.prototype.setFilter=function(K,de,Ae){Ae===void 0&&(Ae={}),this._checkLoaded();var Ce=this.getLayer(K);if(!Ce){this.fire(new e.ErrorEvent(new Error("The layer '"+K+"' does not exist in the map's style and cannot be filtered.")));return}if(!e.deepEqual(Ce.filter,de)){if(de==null){Ce.filter=void 0,this._updateLayer(Ce);return}this._validate(e.validateStyle.filter,"layers."+Ce.id+".filter",de,null,Ae)||(Ce.filter=e.clone$1(de),this._updateLayer(Ce))}},H.prototype.getFilter=function(K){return e.clone$1(this.getLayer(K).filter)},H.prototype.setLayoutProperty=function(K,de,Ae,Ce){Ce===void 0&&(Ce={}),this._checkLoaded();var Ye=this.getLayer(K);if(!Ye){this.fire(new e.ErrorEvent(new Error("The layer '"+K+"' does not exist in the map's style and cannot be styled.")));return}e.deepEqual(Ye.getLayoutProperty(de),Ae)||(Ye.setLayoutProperty(de,Ae,Ce),this._updateLayer(Ye))},H.prototype.getLayoutProperty=function(K,de){var Ae=this.getLayer(K);if(!Ae){this.fire(new e.ErrorEvent(new Error("The layer '"+K+"' does not exist in the map's style.")));return}return Ae.getLayoutProperty(de)},H.prototype.setPaintProperty=function(K,de,Ae,Ce){Ce===void 0&&(Ce={}),this._checkLoaded();var Ye=this.getLayer(K);if(!Ye){this.fire(new e.ErrorEvent(new Error("The layer '"+K+"' does not exist in the map's style and cannot be styled.")));return}if(!e.deepEqual(Ye.getPaintProperty(de),Ae)){var lt=Ye.setPaintProperty(de,Ae,Ce);lt&&this._updateLayer(Ye),this._changed=!0,this._updatedPaintProps[K]=!0}},H.prototype.getPaintProperty=function(K,de){return this.getLayer(K).getPaintProperty(de)},H.prototype.setFeatureState=function(K,de){this._checkLoaded();var Ae=K.source,Ce=K.sourceLayer,Ye=this.sourceCaches[Ae];if(Ye===void 0){this.fire(new e.ErrorEvent(new Error("The source '"+Ae+"' does not exist in the map's style.")));return}var lt=Ye.getSource().type;if(lt==="geojson"&&Ce){this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));return}if(lt==="vector"&&!Ce){this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}K.id===void 0&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),Ye.setFeatureState(Ce,K.id,de)},H.prototype.removeFeatureState=function(K,de){this._checkLoaded();var Ae=K.source,Ce=this.sourceCaches[Ae];if(Ce===void 0){this.fire(new e.ErrorEvent(new Error("The source '"+Ae+"' does not exist in the map's style.")));return}var Ye=Ce.getSource().type,lt=Ye==="vector"?K.sourceLayer:void 0;if(Ye==="vector"&&!lt){this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}if(de&&typeof K.id!="string"&&typeof K.id!="number"){this.fire(new e.ErrorEvent(new Error("A feature id is requred to remove its specific state property.")));return}Ce.removeFeatureState(lt,K.id,de)},H.prototype.getFeatureState=function(K){this._checkLoaded();var de=K.source,Ae=K.sourceLayer,Ce=this.sourceCaches[de];if(Ce===void 0){this.fire(new e.ErrorEvent(new Error("The source '"+de+"' does not exist in the map's style.")));return}var Ye=Ce.getSource().type;if(Ye==="vector"&&!Ae){this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}return K.id===void 0&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),Ce.getFeatureState(Ae,K.id)},H.prototype.getTransition=function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},H.prototype.serialize=function(){return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,function(K){return K.serialize()}),layers:this._serializeLayers(this._order)},function(K){return K!==void 0})},H.prototype._updateLayer=function(K){this._updatedLayers[K.id]=!0,K.source&&!this._updatedSources[K.source]&&this.sourceCaches[K.source].getSource().type!=="raster"&&(this._updatedSources[K.source]="reload",this.sourceCaches[K.source].pause()),this._changed=!0},H.prototype._flattenAndSortRenderedFeatures=function(K){for(var de=this,Ae=function(Ha){return de._layers[Ha].type==="fill-extrusion"},Ce={},Ye=[],lt=this._order.length-1;lt>=0;lt--){var Tt=this._order[lt];if(Ae(Tt)){Ce[Tt]=lt;for(var Yt=0,ir=K;Yt<ir.length;Yt+=1){var ur=ir[Yt],Sr=ur[Tt];if(Sr)for(var Br=0,Or=Sr;Br<Or.length;Br+=1){var Fr=Or[Br];Ye.push(Fr)}}}}Ye.sort(function(Ha,ni){return ni.intersectionZ-Ha.intersectionZ});for(var jr=[],cn=this._order.length-1;cn>=0;cn--){var En=this._order[cn];if(Ae(En))for(var Fn=Ye.length-1;Fn>=0;Fn--){var jn=Ye[Fn].feature;if(Ce[jn.layer.id]<cn)break;jr.push(jn),Ye.pop()}else for(var qn=0,Qn=K;qn<Qn.length;qn+=1){var ca=Qn[qn],xa=ca[En];if(xa)for(var ga=0,Ma=xa;ga<Ma.length;ga+=1){var La=Ma[ga];jr.push(La.feature)}}}return jr},H.prototype.queryRenderedFeatures=function(K,de,Ae){de&&de.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",de.filter,null,de);var Ce={};if(de&&de.layers){if(!Array.isArray(de.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var Ye=0,lt=de.layers;Ye<lt.length;Ye+=1){var Tt=lt[Ye],Yt=this._layers[Tt];if(!Yt)return this.fire(new e.ErrorEvent(new Error("The layer '"+Tt+"' does not exist in the map's style and cannot be queried for features."))),[];Ce[Yt.source]=!0}}var ir=[];de.availableImages=this._availableImages;for(var ur in this.sourceCaches)de.layers&&!Ce[ur]||ir.push(ee(this.sourceCaches[ur],this._layers,this._serializedLayers,K,de,Ae));return this.placement&&ir.push(te(this._layers,this._serializedLayers,this.sourceCaches,K,de,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(ir)},H.prototype.querySourceFeatures=function(K,de){de&&de.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",de.filter,null,de);var Ae=this.sourceCaches[K];return Ae?ie(Ae,de):[]},H.prototype.addSourceType=function(K,de,Ae){if(H.getSourceType(K))return Ae(new Error('A source type called "'+K+'" already exists.'));if(H.setSourceType(K,de),!de.workerSourceURL)return Ae(null,null);this.dispatcher.broadcast("loadWorkerSource",{name:K,url:de.workerSourceURL},Ae)},H.prototype.getLight=function(){return this.light.getLight()},H.prototype.setLight=function(K,de){de===void 0&&(de={}),this._checkLoaded();var Ae=this.light.getLight(),Ce=!1;for(var Ye in K)if(!e.deepEqual(K[Ye],Ae[Ye])){Ce=!0;break}if(!!Ce){var lt={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(K,de),this.light.updateTransitions(lt)}},H.prototype._validate=function(K,de,Ae,Ce,Ye){return Ye===void 0&&(Ye={}),Ye&&Ye.validate===!1?!1:la(this,K.call(e.validateStyle,e.extend({key:de,style:this.serialize(),value:Ae,styleSpec:e.styleSpec},Ce)))},H.prototype._remove=function(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(var K in this._layers){var de=this._layers[K];de.setEventedParent(null)}for(var Ae in this.sourceCaches)this.sourceCaches[Ae].clearTiles(),this.sourceCaches[Ae].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},H.prototype._clearSource=function(K){this.sourceCaches[K].clearTiles()},H.prototype._reloadSource=function(K){this.sourceCaches[K].resume(),this.sourceCaches[K].reload()},H.prototype._updateSources=function(K){for(var de in this.sourceCaches)this.sourceCaches[de].update(K)},H.prototype._generateCollisionBoxes=function(){for(var K in this.sourceCaches)this._reloadSource(K)},H.prototype._updatePlacement=function(K,de,Ae,Ce,Ye){Ye===void 0&&(Ye=!1);for(var lt=!1,Tt=!1,Yt={},ir=0,ur=this._order;ir<ur.length;ir+=1){var Sr=ur[ir],Br=this._layers[Sr];if(Br.type==="symbol"){if(!Yt[Br.source]){var Or=this.sourceCaches[Br.source];Yt[Br.source]=Or.getRenderableIds(!0).map(function(qn){return Or.getTileByID(qn)}).sort(function(qn,Qn){return Qn.tileID.overscaledZ-qn.tileID.overscaledZ||(qn.tileID.isLessThan(Qn.tileID)?-1:1)})}var Fr=this.crossTileSymbolIndex.addLayer(Br,Yt[Br.source],K.center.lng);lt=lt||Fr}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),Ye=Ye||this._layerOrderChanged||Ae===0,(Ye||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now(),K.zoom))&&(this.pauseablePlacement=new ta(K,this._order,Ye,de,Ae,Ce,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Yt),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.browser.now()),Tt=!0),lt&&this.pauseablePlacement.placement.setStale()),Tt||lt)for(var jr=0,cn=this._order;jr<cn.length;jr+=1){var En=cn[jr],Fn=this._layers[En];Fn.type==="symbol"&&this.placement.updateLayerOpacities(Fn,Yt[Fn.source])}var jn=!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now());return jn},H.prototype._releaseSymbolFadeTiles=function(){for(var K in this.sourceCaches)this.sourceCaches[K].releaseSymbolFadeTiles()},H.prototype.getImages=function(K,de,Ae){this.imageManager.getImages(de.icons,Ae),this._updateTilesForChangedImages();var Ce=this.sourceCaches[de.source];Ce&&Ce.setDependencies(de.tileID.key,de.type,de.icons)},H.prototype.getGlyphs=function(K,de,Ae){this.glyphManager.getGlyphs(de.stacks,Ae)},H.prototype.getResource=function(K,de,Ae){return e.makeRequest(de,Ae)},H}(e.Evented);Zo.getSourceType=q,Zo.setSourceType=Q,Zo.registerForPluginStateChange=e.registerForPluginStateChange;var tl=e.createLayout([{name:"a_pos",type:"Int16",components:2}]),hl=`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,Gl=`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`,vi=`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Vs="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",Ps=`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ui="uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}",Ao=`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,vl=`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`,hs="void main() {gl_FragColor=vec4(1.0);}",Di="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",rl=`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ki=`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`,Fi=`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,no="uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}",Ji="varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}",es="attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}",Hs="varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",nu="attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}",jo="uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",au="attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}",Ds=`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Mo=`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`,Au=`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Rs=`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,bs=`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Cl=`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,Mu=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Su=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`,Gs=`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ll=`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`,_s=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Yl=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`,nl=`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Wl="uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}",iu=`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Pl="uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}",ku=`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ys=`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,Xl=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Dl=`
#define MAX_LINE_DISTANCE 32767.0
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,vs=`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,pl=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`,Zl=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ou=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`,su=`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Rl="uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}",Eu=`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,lu=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`,Ko=`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,al=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`,il=`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,jl=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`,ps=Ri(hl,Gl),So=Ri(vi,Vs),Il=Ri(Ps,Ui),ws=Ri(Ao,vl),Ts=Ri(hs,Di),oo=Ri(rl,Ki),dl=Ri(Fi,no),yl=Ri(Ji,es),Ws=Ri(Hs,nu),ds=Ri(jo,au),ml=Ri(Ds,Mo),ol=Ri(Au,Rs),zl=Ri(bs,Cl),xl=Ri(Mu,Su),Xs=Ri(Gs,Ll),Cu=Ri(_s,Yl),ts=Ri(nl,Wl),Gu=Ri(iu,Pl),Kl=Ri(ku,Ys),sl=Ri(Xl,Dl),bl=Ri(vs,pl),Zs=Ri(Zl,ou),_l=Ri(su,Rl),uu=Ri(Eu,lu),fu=Ri(Ko,al),Yu=Ri(il,jl);function Ri(ce,H){var ve=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,K={};return ce=ce.replace(ve,function(de,Ae,Ce,Ye,lt){return K[lt]=!0,Ae==="define"?`
#ifndef HAS_UNIFORM_u_`+lt+`
varying `+Ce+" "+Ye+" "+lt+`;
#else
uniform `+Ce+" "+Ye+" u_"+lt+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+lt+`
    `+Ce+" "+Ye+" "+lt+" = u_"+lt+`;
#endif
`}),H=H.replace(ve,function(de,Ae,Ce,Ye,lt){var Tt=Ye==="float"?"vec2":"vec4",Yt=lt.match(/color/)?"color":Tt;return K[lt]?Ae==="define"?`
#ifndef HAS_UNIFORM_u_`+lt+`
uniform lowp float u_`+lt+`_t;
attribute `+Ce+" "+Tt+" a_"+lt+`;
varying `+Ce+" "+Ye+" "+lt+`;
#else
uniform `+Ce+" "+Ye+" u_"+lt+`;
#endif
`:Yt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+lt+`
    `+lt+" = a_"+lt+`;
#else
    `+Ce+" "+Ye+" "+lt+" = u_"+lt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+lt+`
    `+lt+" = unpack_mix_"+Yt+"(a_"+lt+", u_"+lt+`_t);
#else
    `+Ce+" "+Ye+" "+lt+" = u_"+lt+`;
#endif
`:Ae==="define"?`
#ifndef HAS_UNIFORM_u_`+lt+`
uniform lowp float u_`+lt+`_t;
attribute `+Ce+" "+Tt+" a_"+lt+`;
#else
uniform `+Ce+" "+Ye+" u_"+lt+`;
#endif
`:Yt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+lt+`
    `+Ce+" "+Ye+" "+lt+" = a_"+lt+`;
#else
    `+Ce+" "+Ye+" "+lt+" = u_"+lt+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+lt+`
    `+Ce+" "+Ye+" "+lt+" = unpack_mix_"+Yt+"(a_"+lt+", u_"+lt+`_t);
#else
    `+Ce+" "+Ye+" "+lt+" = u_"+lt+`;
#endif
`}),{fragmentSource:ce,vertexSource:H}}var ll=Object.freeze({__proto__:null,prelude:ps,background:So,backgroundPattern:Il,circle:ws,clippingMask:Ts,heatmap:oo,heatmapTexture:dl,collisionBox:yl,collisionCircle:Ws,debug:ds,fill:ml,fillOutline:ol,fillOutlinePattern:zl,fillPattern:xl,fillExtrusion:Xs,fillExtrusionPattern:Cu,hillshadePrepare:ts,hillshade:Gu,line:Kl,lineGradient:sl,linePattern:bl,lineSDF:Zs,raster:_l,symbolIcon:uu,symbolSDF:fu,symbolTextAndIcon:Yu}),js=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};js.prototype.bind=function(H,ve,K,de,Ae,Ce,Ye,lt){this.context=H;for(var Tt=this.boundPaintVertexBuffers.length!==de.length,Yt=0;!Tt&&Yt<de.length;Yt++)this.boundPaintVertexBuffers[Yt]!==de[Yt]&&(Tt=!0);var ir=!this.vao||this.boundProgram!==ve||this.boundLayoutVertexBuffer!==K||Tt||this.boundIndexBuffer!==Ae||this.boundVertexOffset!==Ce||this.boundDynamicVertexBuffer!==Ye||this.boundDynamicVertexBuffer2!==lt;!H.extVertexArrayObject||ir?this.freshBind(ve,K,de,Ae,Ce,Ye,lt):(H.bindVertexArrayOES.set(this.vao),Ye&&Ye.bind(),Ae&&Ae.dynamicDraw&&Ae.bind(),lt&&lt.bind())},js.prototype.freshBind=function(H,ve,K,de,Ae,Ce,Ye){var lt,Tt=H.numAttributes,Yt=this.context,ir=Yt.gl;if(Yt.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Yt.extVertexArrayObject.createVertexArrayOES(),Yt.bindVertexArrayOES.set(this.vao),lt=0,this.boundProgram=H,this.boundLayoutVertexBuffer=ve,this.boundPaintVertexBuffers=K,this.boundIndexBuffer=de,this.boundVertexOffset=Ae,this.boundDynamicVertexBuffer=Ce,this.boundDynamicVertexBuffer2=Ye;else{lt=Yt.currentNumAttributes||0;for(var ur=Tt;ur<lt;ur++)ir.disableVertexAttribArray(ur)}ve.enableAttributes(ir,H);for(var Sr=0,Br=K;Sr<Br.length;Sr+=1){var Or=Br[Sr];Or.enableAttributes(ir,H)}Ce&&Ce.enableAttributes(ir,H),Ye&&Ye.enableAttributes(ir,H),ve.bind(),ve.setVertexAttribPointers(ir,H,Ae);for(var Fr=0,jr=K;Fr<jr.length;Fr+=1){var cn=jr[Fr];cn.bind(),cn.setVertexAttribPointers(ir,H,Ae)}Ce&&(Ce.bind(),Ce.setVertexAttribPointers(ir,H,Ae)),de&&de.bind(),Ye&&(Ye.bind(),Ye.setVertexAttribPointers(ir,H,Ae)),Yt.currentNumAttributes=Tt},js.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Jo=function(H,ve,K,de,Ae){var Ce=H.gl;this.program=Ce.createProgram();var Ye=K?K.defines():[];Ae&&Ye.push("#define OVERDRAW_INSPECTOR;");var lt=Ye.concat(ps.fragmentSource,ve.fragmentSource).join(`
`),Tt=Ye.concat(ps.vertexSource,ve.vertexSource).join(`
`),Yt=Ce.createShader(Ce.FRAGMENT_SHADER);if(Ce.isContextLost()){this.failedToCreate=!0;return}Ce.shaderSource(Yt,lt),Ce.compileShader(Yt),Ce.attachShader(this.program,Yt);var ir=Ce.createShader(Ce.VERTEX_SHADER);if(Ce.isContextLost()){this.failedToCreate=!0;return}Ce.shaderSource(ir,Tt),Ce.compileShader(ir),Ce.attachShader(this.program,ir);for(var ur=K?K.layoutAttributes:[],Sr=0;Sr<ur.length;Sr++)Ce.bindAttribLocation(this.program,Sr,ur[Sr].name);Ce.linkProgram(this.program),Ce.deleteShader(ir),Ce.deleteShader(Yt),this.numAttributes=Ce.getProgramParameter(this.program,Ce.ACTIVE_ATTRIBUTES),this.attributes={};for(var Br={},Or=0;Or<this.numAttributes;Or++){var Fr=Ce.getActiveAttrib(this.program,Or);Fr&&(this.attributes[Fr.name]=Ce.getAttribLocation(this.program,Fr.name))}for(var jr=Ce.getProgramParameter(this.program,Ce.ACTIVE_UNIFORMS),cn=0;cn<jr;cn++){var En=Ce.getActiveUniform(this.program,cn);En&&(Br[En.name]=Ce.getUniformLocation(this.program,En.name))}this.fixedUniforms=de(H,Br),this.binderUniforms=K?K.getUniforms(H,Br):[]};Jo.prototype.draw=function(H,ve,K,de,Ae,Ce,Ye,lt,Tt,Yt,ir,ur,Sr,Br,Or,Fr){var jr,cn=H.gl;if(!this.failedToCreate){H.program.set(this.program),H.setDepthMode(K),H.setStencilMode(de),H.setColorMode(Ae),H.setCullFace(Ce);for(var En in this.fixedUniforms)this.fixedUniforms[En].set(Ye[En]);Br&&Br.setUniforms(H,this.binderUniforms,ur,{zoom:Sr});for(var Fn=(jr={},jr[cn.LINES]=2,jr[cn.TRIANGLES]=3,jr[cn.LINE_STRIP]=1,jr)[ve],jn=0,qn=ir.get();jn<qn.length;jn+=1){var Qn=qn[jn],ca=Qn.vaos||(Qn.vaos={}),xa=ca[lt]||(ca[lt]=new js);xa.bind(H,this,Tt,Br?Br.getPaintVertexBuffers():[],Yt,Qn.vertexOffset,Or,Fr),cn.drawElements(ve,Qn.primitiveLength*Fn,cn.UNSIGNED_SHORT,Qn.primitiveOffset*Fn*2)}}};function rs(ce,H,ve){var K=1/An(ve,1,H.transform.tileZoom),de=Math.pow(2,ve.tileID.overscaledZ),Ae=ve.tileSize*Math.pow(2,H.transform.tileZoom)/de,Ce=Ae*(ve.tileID.canonical.x+ve.tileID.wrap*de),Ye=Ae*ve.tileID.canonical.y;return{u_image:0,u_texsize:ve.imageAtlasTexture.size,u_scale:[K,ce.fromScale,ce.toScale],u_fade:ce.t,u_pixel_coord_upper:[Ce>>16,Ye>>16],u_pixel_coord_lower:[Ce&65535,Ye&65535]}}function wl(ce,H,ve,K){var de=ve.imageManager.getPattern(ce.from.toString()),Ae=ve.imageManager.getPattern(ce.to.toString()),Ce=ve.imageManager.getPixelSize(),Ye=Ce.width,lt=Ce.height,Tt=Math.pow(2,K.tileID.overscaledZ),Yt=K.tileSize*Math.pow(2,ve.transform.tileZoom)/Tt,ir=Yt*(K.tileID.canonical.x+K.tileID.wrap*Tt),ur=Yt*K.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:de.tl,u_pattern_br_a:de.br,u_pattern_tl_b:Ae.tl,u_pattern_br_b:Ae.br,u_texsize:[Ye,lt],u_mix:H.t,u_pattern_size_a:de.displaySize,u_pattern_size_b:Ae.displaySize,u_scale_a:H.fromScale,u_scale_b:H.toScale,u_tile_units_to_pixels:1/An(K,1,ve.transform.tileZoom),u_pixel_coord_upper:[ir>>16,ur>>16],u_pixel_coord_lower:[ir&65535,ur&65535]}}var so=function(ce,H){return{u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_lightpos:new e.Uniform3f(ce,H.u_lightpos),u_lightintensity:new e.Uniform1f(ce,H.u_lightintensity),u_lightcolor:new e.Uniform3f(ce,H.u_lightcolor),u_vertical_gradient:new e.Uniform1f(ce,H.u_vertical_gradient),u_opacity:new e.Uniform1f(ce,H.u_opacity)}},cu=function(ce,H){return{u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_lightpos:new e.Uniform3f(ce,H.u_lightpos),u_lightintensity:new e.Uniform1f(ce,H.u_lightintensity),u_lightcolor:new e.Uniform3f(ce,H.u_lightcolor),u_vertical_gradient:new e.Uniform1f(ce,H.u_vertical_gradient),u_height_factor:new e.Uniform1f(ce,H.u_height_factor),u_image:new e.Uniform1i(ce,H.u_image),u_texsize:new e.Uniform2f(ce,H.u_texsize),u_pixel_coord_upper:new e.Uniform2f(ce,H.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(ce,H.u_pixel_coord_lower),u_scale:new e.Uniform3f(ce,H.u_scale),u_fade:new e.Uniform1f(ce,H.u_fade),u_opacity:new e.Uniform1f(ce,H.u_opacity)}},ns=function(ce,H,ve,K){var de=H.style.light,Ae=de.properties.get("position"),Ce=[Ae.x,Ae.y,Ae.z],Ye=e.create$1();de.properties.get("anchor")==="viewport"&&e.fromRotation(Ye,-H.transform.angle),e.transformMat3(Ce,Ce,Ye);var lt=de.properties.get("color");return{u_matrix:ce,u_lightpos:Ce,u_lightintensity:de.properties.get("intensity"),u_lightcolor:[lt.r,lt.g,lt.b],u_vertical_gradient:+ve,u_opacity:K}},Is=function(ce,H,ve,K,de,Ae,Ce){return e.extend(ns(ce,H,ve,K),rs(Ae,H,Ce),{u_height_factor:-Math.pow(2,de.overscaledZ)/Ce.tileSize/8})},zs=function(ce,H){return{u_matrix:new e.UniformMatrix4f(ce,H.u_matrix)}},As=function(ce,H){return{u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_image:new e.Uniform1i(ce,H.u_image),u_texsize:new e.Uniform2f(ce,H.u_texsize),u_pixel_coord_upper:new e.Uniform2f(ce,H.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(ce,H.u_pixel_coord_lower),u_scale:new e.Uniform3f(ce,H.u_scale),u_fade:new e.Uniform1f(ce,H.u_fade)}},as=function(ce,H){return{u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_world:new e.Uniform2f(ce,H.u_world)}},Vi=function(ce,H){return{u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_world:new e.Uniform2f(ce,H.u_world),u_image:new e.Uniform1i(ce,H.u_image),u_texsize:new e.Uniform2f(ce,H.u_texsize),u_pixel_coord_upper:new e.Uniform2f(ce,H.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(ce,H.u_pixel_coord_lower),u_scale:new e.Uniform3f(ce,H.u_scale),u_fade:new e.Uniform1f(ce,H.u_fade)}},ko=function(ce){return{u_matrix:ce}},is=function(ce,H,ve,K){return e.extend(ko(ce),rs(ve,H,K))},hu=function(ce,H){return{u_matrix:ce,u_world:H}},Fl=function(ce,H,ve,K,de){return e.extend(is(ce,H,ve,K),{u_world:de})},vu=function(ce,H){return{u_camera_to_center_distance:new e.Uniform1f(ce,H.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(ce,H.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(ce,H.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(ce,H.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(ce,H.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(ce,H.u_matrix)}},yt=function(ce,H,ve,K){var de=ce.transform,Ae,Ce;if(K.paint.get("circle-pitch-alignment")==="map"){var Ye=An(ve,1,de.zoom);Ae=!0,Ce=[Ye,Ye]}else Ae=!1,Ce=de.pixelsToGLUnits;return{u_camera_to_center_distance:de.cameraToCenterDistance,u_scale_with_map:+(K.paint.get("circle-pitch-scale")==="map"),u_matrix:ce.translatePosMatrix(H.posMatrix,ve,K.paint.get("circle-translate"),K.paint.get("circle-translate-anchor")),u_pitch_with_map:+Ae,u_device_pixel_ratio:e.browser.devicePixelRatio,u_extrude_scale:Ce}},It=function(ce,H){return{u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_camera_to_center_distance:new e.Uniform1f(ce,H.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(ce,H.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(ce,H.u_extrude_scale),u_overscale_factor:new e.Uniform1f(ce,H.u_overscale_factor)}},lr=function(ce,H){return{u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_inv_matrix:new e.UniformMatrix4f(ce,H.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(ce,H.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(ce,H.u_viewport_size)}},tr=function(ce,H,ve){var K=An(ve,1,H.zoom),de=Math.pow(2,H.zoom-ve.tileID.overscaledZ),Ae=ve.tileID.overscaleFactor();return{u_matrix:ce,u_camera_to_center_distance:H.cameraToCenterDistance,u_pixels_to_tile_units:K,u_extrude_scale:[H.pixelsToGLUnits[0]/(K*de),H.pixelsToGLUnits[1]/(K*de)],u_overscale_factor:Ae}},Lr=function(ce,H,ve){return{u_matrix:ce,u_inv_matrix:H,u_camera_to_center_distance:ve.cameraToCenterDistance,u_viewport_size:[ve.width,ve.height]}},tn=function(ce,H){return{u_color:new e.UniformColor(ce,H.u_color),u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_overlay:new e.Uniform1i(ce,H.u_overlay),u_overlay_scale:new e.Uniform1f(ce,H.u_overlay_scale)}},pn=function(ce,H,ve){return ve===void 0&&(ve=1),{u_matrix:ce,u_color:H,u_overlay:0,u_overlay_scale:ve}},wn=function(ce,H){return{u_matrix:new e.UniformMatrix4f(ce,H.u_matrix)}},Cn=function(ce){return{u_matrix:ce}},On=function(ce,H){return{u_extrude_scale:new e.Uniform1f(ce,H.u_extrude_scale),u_intensity:new e.Uniform1f(ce,H.u_intensity),u_matrix:new e.UniformMatrix4f(ce,H.u_matrix)}},gn=function(ce,H){return{u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_world:new e.Uniform2f(ce,H.u_world),u_image:new e.Uniform1i(ce,H.u_image),u_color_ramp:new e.Uniform1i(ce,H.u_color_ramp),u_opacity:new e.Uniform1f(ce,H.u_opacity)}},In=function(ce,H,ve,K){return{u_matrix:ce,u_extrude_scale:An(H,1,ve),u_intensity:K}},Pn=function(ce,H,ve,K){var de=e.create();e.ortho(de,0,ce.width,ce.height,0,0,1);var Ae=ce.context.gl;return{u_matrix:de,u_world:[Ae.drawingBufferWidth,Ae.drawingBufferHeight],u_image:ve,u_color_ramp:K,u_opacity:H.paint.get("heatmap-opacity")}},Un=function(ce,H){return{u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_image:new e.Uniform1i(ce,H.u_image),u_latrange:new e.Uniform2f(ce,H.u_latrange),u_light:new e.Uniform2f(ce,H.u_light),u_shadow:new e.UniformColor(ce,H.u_shadow),u_highlight:new e.UniformColor(ce,H.u_highlight),u_accent:new e.UniformColor(ce,H.u_accent)}},$n=function(ce,H){return{u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_image:new e.Uniform1i(ce,H.u_image),u_dimension:new e.Uniform2f(ce,H.u_dimension),u_zoom:new e.Uniform1f(ce,H.u_zoom),u_maxzoom:new e.Uniform1f(ce,H.u_maxzoom),u_unpack:new e.Uniform4f(ce,H.u_unpack)}},Fa=function(ce,H,ve){var K=ve.paint.get("hillshade-shadow-color"),de=ve.paint.get("hillshade-highlight-color"),Ae=ve.paint.get("hillshade-accent-color"),Ce=ve.paint.get("hillshade-illumination-direction")*(Math.PI/180);ve.paint.get("hillshade-illumination-anchor")==="viewport"&&(Ce-=ce.transform.angle);var Ye=!ce.options.moving;return{u_matrix:ce.transform.calculatePosMatrix(H.tileID.toUnwrapped(),Ye),u_image:0,u_latrange:Ba(ce,H.tileID),u_light:[ve.paint.get("hillshade-exaggeration"),Ce],u_shadow:K,u_highlight:de,u_accent:Ae}},Ca=function(ce,H,ve){var K=H.stride,de=e.create();return e.ortho(de,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(de,de,[0,-e.EXTENT,0]),{u_matrix:de,u_image:1,u_dimension:[K,K],u_zoom:ce.overscaledZ,u_maxzoom:ve,u_unpack:H.getUnpackVector()}};function Ba(ce,H){var ve=Math.pow(2,H.canonical.z),K=H.canonical.y;return[new e.MercatorCoordinate(0,K/ve).toLngLat().lat,new e.MercatorCoordinate(0,(K+1)/ve).toLngLat().lat]}var Oa=function(ce,H){return{u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_ratio:new e.Uniform1f(ce,H.u_ratio),u_device_pixel_ratio:new e.Uniform1f(ce,H.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(ce,H.u_units_to_pixels)}},Jn=function(ce,H){return{u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_ratio:new e.Uniform1f(ce,H.u_ratio),u_device_pixel_ratio:new e.Uniform1f(ce,H.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(ce,H.u_units_to_pixels),u_image:new e.Uniform1i(ce,H.u_image)}},ha=function(ce,H){return{u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_texsize:new e.Uniform2f(ce,H.u_texsize),u_ratio:new e.Uniform1f(ce,H.u_ratio),u_device_pixel_ratio:new e.Uniform1f(ce,H.u_device_pixel_ratio),u_image:new e.Uniform1i(ce,H.u_image),u_units_to_pixels:new e.Uniform2f(ce,H.u_units_to_pixels),u_scale:new e.Uniform3f(ce,H.u_scale),u_fade:new e.Uniform1f(ce,H.u_fade)}},Ga=function(ce,H){return{u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_ratio:new e.Uniform1f(ce,H.u_ratio),u_device_pixel_ratio:new e.Uniform1f(ce,H.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(ce,H.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(ce,H.u_patternscale_a),u_patternscale_b:new e.Uniform2f(ce,H.u_patternscale_b),u_sdfgamma:new e.Uniform1f(ce,H.u_sdfgamma),u_image:new e.Uniform1i(ce,H.u_image),u_tex_y_a:new e.Uniform1f(ce,H.u_tex_y_a),u_tex_y_b:new e.Uniform1f(ce,H.u_tex_y_b),u_mix:new e.Uniform1f(ce,H.u_mix)}},Ka=function(ce,H,ve){var K=ce.transform;return{u_matrix:li(ce,H,ve),u_ratio:1/An(H,1,K.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_units_to_pixels:[1/K.pixelsToGLUnits[0],1/K.pixelsToGLUnits[1]]}},di=function(ce,H,ve){return e.extend(Ka(ce,H,ve),{u_image:0})},gi=function(ce,H,ve,K){var de=ce.transform,Ae=Ai(H,de);return{u_matrix:li(ce,H,ve),u_texsize:H.imageAtlasTexture.size,u_ratio:1/An(H,1,de.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_image:0,u_scale:[Ae,K.fromScale,K.toScale],u_fade:K.t,u_units_to_pixels:[1/de.pixelsToGLUnits[0],1/de.pixelsToGLUnits[1]]}},mi=function(ce,H,ve,K,de){var Ae=ce.transform,Ce=ce.lineAtlas,Ye=Ai(H,Ae),lt=ve.layout.get("line-cap")==="round",Tt=Ce.getDash(K.from,lt),Yt=Ce.getDash(K.to,lt),ir=Tt.width*de.fromScale,ur=Yt.width*de.toScale;return e.extend(Ka(ce,H,ve),{u_patternscale_a:[Ye/ir,-Tt.height/2],u_patternscale_b:[Ye/ur,-Yt.height/2],u_sdfgamma:Ce.width/(Math.min(ir,ur)*256*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Tt.y,u_tex_y_b:Yt.y,u_mix:de.t})};function Ai(ce,H){return 1/An(ce,1,H.tileZoom)}function li(ce,H,ve){return ce.translatePosMatrix(H.tileID.posMatrix,H,ve.paint.get("line-translate"),ve.paint.get("line-translate-anchor"))}var yo=function(ce,H){return{u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_tl_parent:new e.Uniform2f(ce,H.u_tl_parent),u_scale_parent:new e.Uniform1f(ce,H.u_scale_parent),u_buffer_scale:new e.Uniform1f(ce,H.u_buffer_scale),u_fade_t:new e.Uniform1f(ce,H.u_fade_t),u_opacity:new e.Uniform1f(ce,H.u_opacity),u_image0:new e.Uniform1i(ce,H.u_image0),u_image1:new e.Uniform1i(ce,H.u_image1),u_brightness_low:new e.Uniform1f(ce,H.u_brightness_low),u_brightness_high:new e.Uniform1f(ce,H.u_brightness_high),u_saturation_factor:new e.Uniform1f(ce,H.u_saturation_factor),u_contrast_factor:new e.Uniform1f(ce,H.u_contrast_factor),u_spin_weights:new e.Uniform3f(ce,H.u_spin_weights)}},qi=function(ce,H,ve,K,de){return{u_matrix:ce,u_tl_parent:H,u_scale_parent:ve,u_buffer_scale:1,u_fade_t:K.mix,u_opacity:K.opacity*de.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:de.paint.get("raster-brightness-min"),u_brightness_high:de.paint.get("raster-brightness-max"),u_saturation_factor:xi(de.paint.get("raster-saturation")),u_contrast_factor:va(de.paint.get("raster-contrast")),u_spin_weights:ja(de.paint.get("raster-hue-rotate"))}};function ja(ce){ce*=Math.PI/180;var H=Math.sin(ce),ve=Math.cos(ce);return[(2*ve+1)/3,(-Math.sqrt(3)*H-ve+1)/3,(Math.sqrt(3)*H-ve+1)/3]}function va(ce){return ce>0?1/(1-ce):1+ce}function xi(ce){return ce>0?1-1/(1.001-ce):-ce}var lo=function(ce,H){return{u_is_size_zoom_constant:new e.Uniform1i(ce,H.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(ce,H.u_is_size_feature_constant),u_size_t:new e.Uniform1f(ce,H.u_size_t),u_size:new e.Uniform1f(ce,H.u_size),u_camera_to_center_distance:new e.Uniform1f(ce,H.u_camera_to_center_distance),u_pitch:new e.Uniform1f(ce,H.u_pitch),u_rotate_symbol:new e.Uniform1i(ce,H.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(ce,H.u_aspect_ratio),u_fade_change:new e.Uniform1f(ce,H.u_fade_change),u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(ce,H.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(ce,H.u_coord_matrix),u_is_text:new e.Uniform1i(ce,H.u_is_text),u_pitch_with_map:new e.Uniform1i(ce,H.u_pitch_with_map),u_texsize:new e.Uniform2f(ce,H.u_texsize),u_texture:new e.Uniform1i(ce,H.u_texture)}},vo=function(ce,H){return{u_is_size_zoom_constant:new e.Uniform1i(ce,H.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(ce,H.u_is_size_feature_constant),u_size_t:new e.Uniform1f(ce,H.u_size_t),u_size:new e.Uniform1f(ce,H.u_size),u_camera_to_center_distance:new e.Uniform1f(ce,H.u_camera_to_center_distance),u_pitch:new e.Uniform1f(ce,H.u_pitch),u_rotate_symbol:new e.Uniform1i(ce,H.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(ce,H.u_aspect_ratio),u_fade_change:new e.Uniform1f(ce,H.u_fade_change),u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(ce,H.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(ce,H.u_coord_matrix),u_is_text:new e.Uniform1i(ce,H.u_is_text),u_pitch_with_map:new e.Uniform1i(ce,H.u_pitch_with_map),u_texsize:new e.Uniform2f(ce,H.u_texsize),u_texture:new e.Uniform1i(ce,H.u_texture),u_gamma_scale:new e.Uniform1f(ce,H.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(ce,H.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(ce,H.u_is_halo)}},os=function(ce,H){return{u_is_size_zoom_constant:new e.Uniform1i(ce,H.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(ce,H.u_is_size_feature_constant),u_size_t:new e.Uniform1f(ce,H.u_size_t),u_size:new e.Uniform1f(ce,H.u_size),u_camera_to_center_distance:new e.Uniform1f(ce,H.u_camera_to_center_distance),u_pitch:new e.Uniform1f(ce,H.u_pitch),u_rotate_symbol:new e.Uniform1i(ce,H.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(ce,H.u_aspect_ratio),u_fade_change:new e.Uniform1f(ce,H.u_fade_change),u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(ce,H.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(ce,H.u_coord_matrix),u_is_text:new e.Uniform1i(ce,H.u_is_text),u_pitch_with_map:new e.Uniform1i(ce,H.u_pitch_with_map),u_texsize:new e.Uniform2f(ce,H.u_texsize),u_texsize_icon:new e.Uniform2f(ce,H.u_texsize_icon),u_texture:new e.Uniform1i(ce,H.u_texture),u_texture_icon:new e.Uniform1i(ce,H.u_texture_icon),u_gamma_scale:new e.Uniform1f(ce,H.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(ce,H.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(ce,H.u_is_halo)}},Ms=function(ce,H,ve,K,de,Ae,Ce,Ye,lt,Tt){var Yt=de.transform;return{u_is_size_zoom_constant:+(ce==="constant"||ce==="source"),u_is_size_feature_constant:+(ce==="constant"||ce==="camera"),u_size_t:H?H.uSizeT:0,u_size:H?H.uSize:0,u_camera_to_center_distance:Yt.cameraToCenterDistance,u_pitch:Yt.pitch/360*2*Math.PI,u_rotate_symbol:+ve,u_aspect_ratio:Yt.width/Yt.height,u_fade_change:de.options.fadeDuration?de.symbolFadeChange:1,u_matrix:Ae,u_label_plane_matrix:Ce,u_coord_matrix:Ye,u_is_text:+lt,u_pitch_with_map:+K,u_texsize:Tt,u_texture:0}},Io=function(ce,H,ve,K,de,Ae,Ce,Ye,lt,Tt,Yt){var ir=de.transform;return e.extend(Ms(ce,H,ve,K,de,Ae,Ce,Ye,lt,Tt),{u_gamma_scale:K?Math.cos(ir._pitch)*ir.cameraToCenterDistance:1,u_device_pixel_ratio:e.browser.devicePixelRatio,u_is_halo:+Yt})},Ks=function(ce,H,ve,K,de,Ae,Ce,Ye,lt,Tt){return e.extend(Io(ce,H,ve,K,de,Ae,Ce,Ye,!0,lt,!0),{u_texsize_icon:Tt,u_texture_icon:1})},gs=function(ce,H){return{u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_opacity:new e.Uniform1f(ce,H.u_opacity),u_color:new e.UniformColor(ce,H.u_color)}},ss=function(ce,H){return{u_matrix:new e.UniformMatrix4f(ce,H.u_matrix),u_opacity:new e.Uniform1f(ce,H.u_opacity),u_image:new e.Uniform1i(ce,H.u_image),u_pattern_tl_a:new e.Uniform2f(ce,H.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(ce,H.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(ce,H.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(ce,H.u_pattern_br_b),u_texsize:new e.Uniform2f(ce,H.u_texsize),u_mix:new e.Uniform1f(ce,H.u_mix),u_pattern_size_a:new e.Uniform2f(ce,H.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(ce,H.u_pattern_size_b),u_scale_a:new e.Uniform1f(ce,H.u_scale_a),u_scale_b:new e.Uniform1f(ce,H.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(ce,H.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(ce,H.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(ce,H.u_tile_units_to_pixels)}},mo=function(ce,H,ve){return{u_matrix:ce,u_opacity:H,u_color:ve}},Bl=function(ce,H,ve,K,de,Ae){return e.extend(wl(K,Ae,ve,de),{u_matrix:ce,u_opacity:H})},Jl={fillExtrusion:so,fillExtrusionPattern:cu,fill:zs,fillPattern:As,fillOutline:as,fillOutlinePattern:Vi,circle:vu,collisionBox:It,collisionCircle:lr,debug:tn,clippingMask:wn,heatmap:On,heatmapTexture:gn,hillshade:Un,hillshadePrepare:$n,line:Oa,lineGradient:Jn,linePattern:ha,lineSDF:Ga,raster:yo,symbolIcon:lo,symbolSDF:vo,symbolTextAndIcon:os,background:gs,backgroundPattern:ss},ls;function pu(ce,H,ve,K,de,Ae,Ce){for(var Ye=ce.context,lt=Ye.gl,Tt=ce.useProgram("collisionBox"),Yt=[],ir=0,ur=0,Sr=0;Sr<K.length;Sr++){var Br=K[Sr],Or=H.getTile(Br),Fr=Or.getBucket(ve);if(!!Fr){var jr=Br.posMatrix;(de[0]!==0||de[1]!==0)&&(jr=ce.translatePosMatrix(Br.posMatrix,Or,de,Ae));var cn=Ce?Fr.textCollisionBox:Fr.iconCollisionBox,En=Fr.collisionCircleArray;if(En.length>0){var Fn=e.create(),jn=jr;e.mul(Fn,Fr.placementInvProjMatrix,ce.transform.glCoordMatrix),e.mul(Fn,Fn,Fr.placementViewportMatrix),Yt.push({circleArray:En,circleOffset:ur,transform:jn,invTransform:Fn}),ir+=En.length/4,ur=ir}!cn||Tt.draw(Ye,lt.LINES,Qr.disabled,Kt.disabled,ce.colorModeForRenderPass(),Me.disabled,tr(jr,ce.transform,Or),ve.id,cn.layoutVertexBuffer,cn.indexBuffer,cn.segments,null,ce.transform.zoom,null,null,cn.collisionVertexBuffer)}}if(!(!Ce||!Yt.length)){var qn=ce.useProgram("collisionCircle"),Qn=new e.StructArrayLayout2f1f2i16;Qn.resize(ir*4),Qn._trim();for(var ca=0,xa=0,ga=Yt;xa<ga.length;xa+=1)for(var Ma=ga[xa],La=0;La<Ma.circleArray.length/4;La++){var Ha=La*4,ni=Ma.circleArray[Ha+0],Li=Ma.circleArray[Ha+1],fi=Ma.circleArray[Ha+2],pi=Ma.circleArray[Ha+3];Qn.emplace(ca++,ni,Li,fi,pi,0),Qn.emplace(ca++,ni,Li,fi,pi,1),Qn.emplace(ca++,ni,Li,fi,pi,2),Qn.emplace(ca++,ni,Li,fi,pi,3)}(!ls||ls.length<ir*2)&&(ls=Ol(ir));for(var Na=Ye.createIndexBuffer(ls,!0),Pi=Ye.createVertexBuffer(Qn,e.collisionCircleLayout.members,!0),zi=0,Ni=Yt;zi<Ni.length;zi+=1){var _i=Ni[zi],ji=Lr(_i.transform,_i.invTransform,ce.transform);qn.draw(Ye,lt.TRIANGLES,Qr.disabled,Kt.disabled,ce.colorModeForRenderPass(),Me.disabled,ji,ve.id,Pi,Na,e.SegmentVector.simpleSegment(0,_i.circleOffset*2,_i.circleArray.length,_i.circleArray.length/2),null,ce.transform.zoom,null,null,null)}Pi.destroy(),Na.destroy()}}function Ol(ce){var H=ce*2,ve=new e.StructArrayLayout3ui6;ve.resize(H),ve._trim();for(var K=0;K<H;K++){var de=K*6;ve.uint16[de+0]=K*4+0,ve.uint16[de+1]=K*4+1,ve.uint16[de+2]=K*4+2,ve.uint16[de+3]=K*4+2,ve.uint16[de+4]=K*4+3,ve.uint16[de+5]=K*4+0}return ve}var hf=e.identity(new Float32Array(16));function Lu(ce,H,ve,K,de){if(ce.renderPass==="translucent"){var Ae=Kt.disabled,Ce=ce.colorModeForRenderPass(),Ye=ve.layout.get("text-variable-anchor");Ye&&Pu(K,ce,ve,H,ve.layout.get("text-rotation-alignment"),ve.layout.get("text-pitch-alignment"),de),ve.paint.get("icon-opacity").constantOr(1)!==0&&Du(ce,H,ve,K,!1,ve.paint.get("icon-translate"),ve.paint.get("icon-translate-anchor"),ve.layout.get("icon-rotation-alignment"),ve.layout.get("icon-pitch-alignment"),ve.layout.get("icon-keep-upright"),Ae,Ce),ve.paint.get("text-opacity").constantOr(1)!==0&&Du(ce,H,ve,K,!0,ve.paint.get("text-translate"),ve.paint.get("text-translate-anchor"),ve.layout.get("text-rotation-alignment"),ve.layout.get("text-pitch-alignment"),ve.layout.get("text-keep-upright"),Ae,Ce),H.map.showCollisionBoxes&&(pu(ce,H,ve,K,ve.paint.get("text-translate"),ve.paint.get("text-translate-anchor"),!0),pu(ce,H,ve,K,ve.paint.get("icon-translate"),ve.paint.get("icon-translate-anchor"),!1))}}function du(ce,H,ve,K,de,Ae){var Ce=e.getAnchorAlignment(ce),Ye=Ce.horizontalAlign,lt=Ce.verticalAlign,Tt=-(Ye-.5)*H,Yt=-(lt-.5)*ve,ir=e.evaluateVariableOffset(ce,K);return new e.Point((Tt/de+ir[0])*Ae,(Yt/de+ir[1])*Ae)}function Pu(ce,H,ve,K,de,Ae,Ce){for(var Ye=H.transform,lt=de==="map",Tt=Ae==="map",Yt=0,ir=ce;Yt<ir.length;Yt+=1){var ur=ir[Yt],Sr=K.getTile(ur),Br=Sr.getBucket(ve);if(!(!Br||!Br.text||!Br.text.segments.get().length)){var Or=Br.textSizeData,Fr=e.evaluateSizeForZoom(Or,Ye.zoom),jr=An(Sr,1,H.transform.zoom),cn=Nr(ur.posMatrix,Tt,lt,H.transform,jr),En=ve.layout.get("icon-text-fit")!=="none"&&Br.hasIconData();if(Fr){var Fn=Math.pow(2,Ye.zoom-Sr.tileID.overscaledZ);Ss(Br,lt,Tt,Ce,e.symbolSize,Ye,cn,ur.posMatrix,Fn,Fr,En)}}}}function Ss(ce,H,ve,K,de,Ae,Ce,Ye,lt,Tt,Yt){var ir=ce.text.placedSymbolArray,ur=ce.text.dynamicLayoutVertexArray,Sr=ce.icon.dynamicLayoutVertexArray,Br={};ur.clear();for(var Or=0;Or<ir.length;Or++){var Fr=ir.get(Or),jr=ce.allowVerticalPlacement&&!Fr.placedOrientation,cn=!Fr.hidden&&Fr.crossTileID&&!jr?K[Fr.crossTileID]:null;if(!cn)ti(Fr.numGlyphs,ur);else{var En=new e.Point(Fr.anchorX,Fr.anchorY),Fn=_n(En,ve?Ye:Ce),jn=Wn(Ae.cameraToCenterDistance,Fn.signedDistanceFromCamera),qn=de.evaluateSizeForFeature(ce.textSizeData,Tt,Fr)*jn/e.ONE_EM;ve&&(qn*=ce.tilePixelRatio/lt);for(var Qn=cn.width,ca=cn.height,xa=cn.anchor,ga=cn.textOffset,Ma=cn.textBoxScale,La=du(xa,Qn,ca,ga,Ma,qn),Ha=ve?_n(En.add(La),Ce).point:Fn.point.add(H?La.rotate(-Ae.angle):La),ni=ce.allowVerticalPlacement&&Fr.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,Li=0;Li<Fr.numGlyphs;Li++)e.addDynamicAttributes(ur,Ha,ni);Yt&&Fr.associatedIconIndex>=0&&(Br[Fr.associatedIconIndex]={shiftedAnchor:Ha,angle:ni})}}if(Yt){Sr.clear();for(var fi=ce.icon.placedSymbolArray,pi=0;pi<fi.length;pi++){var Na=fi.get(pi);if(Na.hidden)ti(Na.numGlyphs,Sr);else{var Pi=Br[pi];if(!Pi)ti(Na.numGlyphs,Sr);else for(var zi=0;zi<Na.numGlyphs;zi++)e.addDynamicAttributes(Sr,Pi.shiftedAnchor,Pi.angle)}}ce.icon.dynamicLayoutVertexBuffer.updateData(Sr)}ce.text.dynamicLayoutVertexBuffer.updateData(ur)}function Wu(ce,H,ve){return ve.iconsInText&&H?"symbolTextAndIcon":ce?"symbolSDF":"symbolIcon"}function Du(ce,H,ve,K,de,Ae,Ce,Ye,lt,Tt,Yt,ir){for(var ur=ce.context,Sr=ur.gl,Br=ce.transform,Or=Ye==="map",Fr=lt==="map",jr=Or&&ve.layout.get("symbol-placement")!=="point",cn=Or&&!Fr&&!jr,En=ve.layout.get("symbol-sort-key").constantOr(1)!==void 0,Fn=ce.depthModeForSublayer(0,Qr.ReadOnly),jn=ve.layout.get("text-variable-anchor"),qn=[],Qn=0,ca=K;Qn<ca.length;Qn+=1){var xa=ca[Qn],ga=H.getTile(xa),Ma=ga.getBucket(ve);if(!!Ma){var La=de?Ma.text:Ma.icon;if(!(!La||!La.segments.get().length)){var Ha=La.programConfigurations.get(ve.id),ni=de||Ma.sdfIcons,Li=de?Ma.textSizeData:Ma.iconSizeData,fi=Fr||Br.pitch!==0,pi=ce.useProgram(Wu(ni,de,Ma),Ha),Na=e.evaluateSizeForZoom(Li,Br.zoom),Pi=void 0,zi=[0,0],Ni=void 0,_i=void 0,ji=null,ii=void 0;if(de){if(Ni=ga.glyphAtlasTexture,_i=Sr.LINEAR,Pi=ga.glyphAtlasTexture.size,Ma.iconsInText){zi=ga.imageAtlasTexture.size,ji=ga.imageAtlasTexture;var wi=Li.kind==="composite"||Li.kind==="camera";ii=fi||ce.options.rotating||ce.options.zooming||wi?Sr.LINEAR:Sr.NEAREST}}else{var _o=ve.layout.get("icon-size").constantOr(0)!==1||Ma.iconsNeedLinear;Ni=ga.imageAtlasTexture,_i=ni||ce.options.rotating||ce.options.zooming||_o||fi?Sr.LINEAR:Sr.NEAREST,Pi=ga.imageAtlasTexture.size}var Bo=An(ga,1,ce.transform.zoom),Al=Nr(xa.posMatrix,Fr,Or,ce.transform,Bo),Ml=Sn(xa.posMatrix,Fr,Or,ce.transform,Bo),Ql=jn&&Ma.hasTextData(),$l=ve.layout.get("icon-text-fit")!=="none"&&Ql&&Ma.hasIconData();jr&&Xn(Ma,xa.posMatrix,ce,de,Al,Ml,Fr,Tt);var bu=ce.translatePosMatrix(xa.posMatrix,ga,Ae,Ce),ql=jr||de&&jn||$l?hf:Al,Bs=ce.translatePosMatrix(Ml,ga,Ae,Ce,!0),Vu=ni&&ve.paint.get(de?"text-halo-width":"icon-halo-width").constantOr(1)!==0,xs=void 0;ni?Ma.iconsInText?xs=Ks(Li.kind,Na,cn,Fr,ce,bu,ql,Bs,Pi,zi):xs=Io(Li.kind,Na,cn,Fr,ce,bu,ql,Bs,de,Pi,!0):xs=Ms(Li.kind,Na,cn,Fr,ce,bu,ql,Bs,de,Pi);var ul={program:pi,buffers:La,uniformValues:xs,atlasTexture:Ni,atlasTextureIcon:ji,atlasInterpolation:_i,atlasInterpolationIcon:ii,isSDF:ni,hasHalo:Vu};if(En)for(var eu=La.segments.get(),Vl=0,tu=eu;Vl<tu.length;Vl+=1){var Ef=tu[Vl];qn.push({segments:new e.SegmentVector([Ef]),sortKey:Ef.sortKey,state:ul})}else qn.push({segments:La.segments,sortKey:0,state:ul})}}}En&&qn.sort(function(Cf,Lf){return Cf.sortKey-Lf.sortKey});for(var Xu=0,fs=qn;Xu<fs.length;Xu+=1){var yf=fs[Xu],ks=yf.state;if(ur.activeTexture.set(Sr.TEXTURE0),ks.atlasTexture.bind(ks.atlasInterpolation,Sr.CLAMP_TO_EDGE),ks.atlasTextureIcon&&(ur.activeTexture.set(Sr.TEXTURE1),ks.atlasTextureIcon&&ks.atlasTextureIcon.bind(ks.atlasInterpolationIcon,Sr.CLAMP_TO_EDGE)),ks.isSDF){var mf=ks.uniformValues;ks.hasHalo&&(mf.u_is_halo=1,Ru(ks.buffers,yf.segments,ve,ce,ks.program,Fn,Yt,ir,mf)),mf.u_is_halo=0}Ru(ks.buffers,yf.segments,ve,ce,ks.program,Fn,Yt,ir,ks.uniformValues)}}function Ru(ce,H,ve,K,de,Ae,Ce,Ye,lt){var Tt=K.context,Yt=Tt.gl;de.draw(Tt,Yt.TRIANGLES,Ae,Ce,Ye,Me.disabled,lt,ve.id,ce.layoutVertexBuffer,ce.indexBuffer,H,ve.paint,K.transform.zoom,ce.programConfigurations.get(ve.id),ce.dynamicLayoutVertexBuffer,ce.opacityVertexBuffer)}function zo(ce,H,ve,K){if(ce.renderPass==="translucent"){var de=ve.paint.get("circle-opacity"),Ae=ve.paint.get("circle-stroke-width"),Ce=ve.paint.get("circle-stroke-opacity"),Ye=ve.layout.get("circle-sort-key").constantOr(1)!==void 0;if(!(de.constantOr(1)===0&&(Ae.constantOr(1)===0||Ce.constantOr(1)===0))){for(var lt=ce.context,Tt=lt.gl,Yt=ce.depthModeForSublayer(0,Qr.ReadOnly),ir=Kt.disabled,ur=ce.colorModeForRenderPass(),Sr=[],Br=0;Br<K.length;Br++){var Or=K[Br],Fr=H.getTile(Or),jr=Fr.getBucket(ve);if(!!jr){var cn=jr.programConfigurations.get(ve.id),En=ce.useProgram("circle",cn),Fn=jr.layoutVertexBuffer,jn=jr.indexBuffer,qn=yt(ce,Or,Fr,ve),Qn={programConfiguration:cn,program:En,layoutVertexBuffer:Fn,indexBuffer:jn,uniformValues:qn};if(Ye)for(var ca=jr.segments.get(),xa=0,ga=ca;xa<ga.length;xa+=1){var Ma=ga[xa];Sr.push({segments:new e.SegmentVector([Ma]),sortKey:Ma.sortKey,state:Qn})}else Sr.push({segments:jr.segments,sortKey:0,state:Qn})}}Ye&&Sr.sort(function(_i,ji){return _i.sortKey-ji.sortKey});for(var La=0,Ha=Sr;La<Ha.length;La+=1){var ni=Ha[La],Li=ni.state,fi=Li.programConfiguration,pi=Li.program,Na=Li.layoutVertexBuffer,Pi=Li.indexBuffer,zi=Li.uniformValues,Ni=ni.segments;pi.draw(lt,Tt.TRIANGLES,Yt,ir,ur,Me.disabled,zi,ve.id,Na,Pi,Ni,ve.paint,ce.transform.zoom,fi)}}}}function Iu(ce,H,ve,K){if(ve.paint.get("heatmap-opacity")!==0)if(ce.renderPass==="offscreen"){var de=ce.context,Ae=de.gl,Ce=Kt.disabled,Ye=new je([Ae.ONE,Ae.ONE],e.Color.transparent,[!0,!0,!0,!0]);Qu(de,ce,ve),de.clear({color:e.Color.transparent});for(var lt=0;lt<K.length;lt++){var Tt=K[lt];if(!H.hasRenderableParent(Tt)){var Yt=H.getTile(Tt),ir=Yt.getBucket(ve);if(!!ir){var ur=ir.programConfigurations.get(ve.id),Sr=ce.useProgram("heatmap",ur),Br=ce.transform,Or=Br.zoom;Sr.draw(de,Ae.TRIANGLES,Qr.disabled,Ce,Ye,Me.disabled,In(Tt.posMatrix,Yt,Or,ve.paint.get("heatmap-intensity")),ve.id,ir.layoutVertexBuffer,ir.indexBuffer,ir.segments,ve.paint,ce.transform.zoom,ur)}}}de.viewport.set([0,0,ce.width,ce.height])}else ce.renderPass==="translucent"&&(ce.context.setColorMode(ce.colorModeForRenderPass()),gu(ce,ve))}function Qu(ce,H,ve){var K=ce.gl;ce.activeTexture.set(K.TEXTURE1),ce.viewport.set([0,0,H.width/4,H.height/4]);var de=ve.heatmapFbo;if(de)K.bindTexture(K.TEXTURE_2D,de.colorAttachment.get()),ce.bindFramebuffer.set(de.framebuffer);else{var Ae=K.createTexture();K.bindTexture(K.TEXTURE_2D,Ae),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_WRAP_S,K.CLAMP_TO_EDGE),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_WRAP_T,K.CLAMP_TO_EDGE),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_MIN_FILTER,K.LINEAR),K.texParameteri(K.TEXTURE_2D,K.TEXTURE_MAG_FILTER,K.LINEAR),de=ve.heatmapFbo=ce.createFramebuffer(H.width/4,H.height/4,!1),ys(ce,H,Ae,de)}}function ys(ce,H,ve,K){var de=ce.gl,Ae=ce.extRenderToTextureHalfFloat?ce.extTextureHalfFloat.HALF_FLOAT_OES:de.UNSIGNED_BYTE;de.texImage2D(de.TEXTURE_2D,0,de.RGBA,H.width/4,H.height/4,0,de.RGBA,Ae,null),K.colorAttachment.set(ve)}function gu(ce,H){var ve=ce.context,K=ve.gl,de=H.heatmapFbo;if(!!de){ve.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,de.colorAttachment.get()),ve.activeTexture.set(K.TEXTURE1);var Ae=H.colorRampTexture;Ae||(Ae=H.colorRampTexture=new e.Texture(ve,H.colorRamp,K.RGBA)),Ae.bind(K.LINEAR,K.CLAMP_TO_EDGE),ce.useProgram("heatmapTexture").draw(ve,K.TRIANGLES,Qr.disabled,Kt.disabled,ce.colorModeForRenderPass(),Me.disabled,Pn(ce,H,0,1),H.id,ce.viewportBuffer,ce.quadTriangleIndexBuffer,ce.viewportSegments,H.paint,ce.transform.zoom)}}function yu(ce,H,ve,K){if(ce.renderPass==="translucent"){var de=ve.paint.get("line-opacity"),Ae=ve.paint.get("line-width");if(!(de.constantOr(1)===0||Ae.constantOr(1)===0)){var Ce=ce.depthModeForSublayer(0,Qr.ReadOnly),Ye=ce.colorModeForRenderPass(),lt=ve.paint.get("line-dasharray"),Tt=ve.paint.get("line-pattern"),Yt=Tt.constantOr(1),ir=ve.paint.get("line-gradient"),ur=ve.getCrossfadeParameters(),Sr=Yt?"linePattern":lt?"lineSDF":ir?"lineGradient":"line",Br=ce.context,Or=Br.gl,Fr=!0;if(ir){Br.activeTexture.set(Or.TEXTURE0);var jr=ve.gradientTexture;if(!ve.gradient)return;jr||(jr=ve.gradientTexture=new e.Texture(Br,ve.gradient,Or.RGBA)),jr.bind(Or.LINEAR,Or.CLAMP_TO_EDGE)}for(var cn=0,En=K;cn<En.length;cn+=1){var Fn=En[cn],jn=H.getTile(Fn);if(!(Yt&&!jn.patternsLoaded())){var qn=jn.getBucket(ve);if(!!qn){var Qn=qn.programConfigurations.get(ve.id),ca=ce.context.program.get(),xa=ce.useProgram(Sr,Qn),ga=Fr||xa.program!==ca,Ma=Tt.constantOr(null);if(Ma&&jn.imageAtlas){var La=jn.imageAtlas,Ha=La.patternPositions[Ma.to.toString()],ni=La.patternPositions[Ma.from.toString()];Ha&&ni&&Qn.setConstantPatternPositions(Ha,ni)}var Li=Yt?gi(ce,jn,ve,ur):lt?mi(ce,jn,ve,lt,ur):ir?di(ce,jn,ve):Ka(ce,jn,ve);Yt?(Br.activeTexture.set(Or.TEXTURE0),jn.imageAtlasTexture.bind(Or.LINEAR,Or.CLAMP_TO_EDGE),Qn.updatePaintBuffers(ur)):lt&&(ga||ce.lineAtlas.dirty)&&(Br.activeTexture.set(Or.TEXTURE0),ce.lineAtlas.bind(Br)),xa.draw(Br,Or.TRIANGLES,Ce,ce.stencilModeForClipping(Fn),Ye,Me.disabled,Li,ve.id,qn.layoutVertexBuffer,qn.indexBuffer,qn.segments,ve.paint,ce.transform.zoom,Qn),Fr=!1}}}}}}function zu(ce,H,ve,K){var de=ve.paint.get("fill-color"),Ae=ve.paint.get("fill-opacity");if(Ae.constantOr(1)!==0){var Ce=ce.colorModeForRenderPass(),Ye=ve.paint.get("fill-pattern"),lt=ce.opaquePassEnabledForLayer()&&!Ye.constantOr(1)&&de.constantOr(e.Color.transparent).a===1&&Ae.constantOr(0)===1?"opaque":"translucent";if(ce.renderPass===lt){var Tt=ce.depthModeForSublayer(1,ce.renderPass==="opaque"?Qr.ReadWrite:Qr.ReadOnly);Re(ce,H,ve,K,Tt,Ce,!1)}if(ce.renderPass==="translucent"&&ve.paint.get("fill-antialias")){var Yt=ce.depthModeForSublayer(ve.getPaintProperty("fill-outline-color")?2:0,Qr.ReadOnly);Re(ce,H,ve,K,Yt,Ce,!0)}}}function Re(ce,H,ve,K,de,Ae,Ce){var Ye=ce.context.gl,lt=ve.paint.get("fill-pattern"),Tt=lt&&lt.constantOr(1),Yt=ve.getCrossfadeParameters(),ir,ur,Sr,Br,Or;Ce?(ur=Tt&&!ve.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ir=Ye.LINES):(ur=Tt?"fillPattern":"fill",ir=Ye.TRIANGLES);for(var Fr=0,jr=K;Fr<jr.length;Fr+=1){var cn=jr[Fr],En=H.getTile(cn);if(!(Tt&&!En.patternsLoaded())){var Fn=En.getBucket(ve);if(!!Fn){var jn=Fn.programConfigurations.get(ve.id),qn=ce.useProgram(ur,jn);Tt&&(ce.context.activeTexture.set(Ye.TEXTURE0),En.imageAtlasTexture.bind(Ye.LINEAR,Ye.CLAMP_TO_EDGE),jn.updatePaintBuffers(Yt));var Qn=lt.constantOr(null);if(Qn&&En.imageAtlas){var ca=En.imageAtlas,xa=ca.patternPositions[Qn.to.toString()],ga=ca.patternPositions[Qn.from.toString()];xa&&ga&&jn.setConstantPatternPositions(xa,ga)}var Ma=ce.translatePosMatrix(cn.posMatrix,En,ve.paint.get("fill-translate"),ve.paint.get("fill-translate-anchor"));if(!Ce)Br=Fn.indexBuffer,Or=Fn.segments,Sr=Tt?is(Ma,ce,Yt,En):ko(Ma);else{Br=Fn.indexBuffer2,Or=Fn.segments2;var La=[Ye.drawingBufferWidth,Ye.drawingBufferHeight];Sr=ur==="fillOutlinePattern"&&Tt?Fl(Ma,ce,Yt,En,La):hu(Ma,La)}qn.draw(ce.context,ir,de,ce.stencilModeForClipping(cn),Ae,Me.disabled,Sr,ve.id,Fn.layoutVertexBuffer,Br,Or,ve.paint,ce.transform.zoom,jn)}}}}function He(ce,H,ve,K){var de=ve.paint.get("fill-extrusion-opacity");if(de!==0&&ce.renderPass==="translucent"){var Ae=new Qr(ce.context.gl.LEQUAL,Qr.ReadWrite,ce.depthRangeFor3D);if(de===1&&!ve.paint.get("fill-extrusion-pattern").constantOr(1)){var Ce=ce.colorModeForRenderPass();qe(ce,H,ve,K,Ae,Kt.disabled,Ce)}else qe(ce,H,ve,K,Ae,Kt.disabled,je.disabled),qe(ce,H,ve,K,Ae,ce.stencilModeFor3D(),ce.colorModeForRenderPass())}}function qe(ce,H,ve,K,de,Ae,Ce){for(var Ye=ce.context,lt=Ye.gl,Tt=ve.paint.get("fill-extrusion-pattern"),Yt=Tt.constantOr(1),ir=ve.getCrossfadeParameters(),ur=ve.paint.get("fill-extrusion-opacity"),Sr=0,Br=K;Sr<Br.length;Sr+=1){var Or=Br[Sr],Fr=H.getTile(Or),jr=Fr.getBucket(ve);if(!!jr){var cn=jr.programConfigurations.get(ve.id),En=ce.useProgram(Yt?"fillExtrusionPattern":"fillExtrusion",cn);Yt&&(ce.context.activeTexture.set(lt.TEXTURE0),Fr.imageAtlasTexture.bind(lt.LINEAR,lt.CLAMP_TO_EDGE),cn.updatePaintBuffers(ir));var Fn=Tt.constantOr(null);if(Fn&&Fr.imageAtlas){var jn=Fr.imageAtlas,qn=jn.patternPositions[Fn.to.toString()],Qn=jn.patternPositions[Fn.from.toString()];qn&&Qn&&cn.setConstantPatternPositions(qn,Qn)}var ca=ce.translatePosMatrix(Or.posMatrix,Fr,ve.paint.get("fill-extrusion-translate"),ve.paint.get("fill-extrusion-translate-anchor")),xa=ve.paint.get("fill-extrusion-vertical-gradient"),ga=Yt?Is(ca,ce,xa,ur,Or,ir,Fr):ns(ca,ce,xa,ur);En.draw(Ye,Ye.gl.TRIANGLES,de,Ae,Ce,Me.backCCW,ga,ve.id,jr.layoutVertexBuffer,jr.indexBuffer,jr.segments,ve.paint,ce.transform.zoom,cn)}}}function at(ce,H,ve,K){if(!(ce.renderPass!=="offscreen"&&ce.renderPass!=="translucent")){for(var de=ce.context,Ae=H.getSource().maxzoom,Ce=ce.depthModeForSublayer(0,Qr.ReadOnly),Ye=ce.colorModeForRenderPass(),lt=ce.renderPass==="translucent"?ce.stencilConfigForOverlap(K):[{},K],Tt=lt[0],Yt=lt[1],ir=0,ur=Yt;ir<ur.length;ir+=1){var Sr=ur[ir],Br=H.getTile(Sr);Br.needsHillshadePrepare&&ce.renderPass==="offscreen"?mt(ce,Br,ve,Ae,Ce,Kt.disabled,Ye):ce.renderPass==="translucent"&&bt(ce,Br,ve,Ce,Tt[Sr.overscaledZ],Ye)}de.viewport.set([0,0,ce.width,ce.height])}}function bt(ce,H,ve,K,de,Ae){var Ce=ce.context,Ye=Ce.gl,lt=H.fbo;if(!!lt){var Tt=ce.useProgram("hillshade");Ce.activeTexture.set(Ye.TEXTURE0),Ye.bindTexture(Ye.TEXTURE_2D,lt.colorAttachment.get());var Yt=Fa(ce,H,ve);Tt.draw(Ce,Ye.TRIANGLES,K,de,Ae,Me.disabled,Yt,ve.id,ce.rasterBoundsBuffer,ce.quadTriangleIndexBuffer,ce.rasterBoundsSegments)}}function mt(ce,H,ve,K,de,Ae,Ce){var Ye=ce.context,lt=Ye.gl,Tt=H.dem;if(Tt&&Tt.data){var Yt=Tt.dim,ir=Tt.stride,ur=Tt.getPixels();if(Ye.activeTexture.set(lt.TEXTURE1),Ye.pixelStoreUnpackPremultiplyAlpha.set(!1),H.demTexture=H.demTexture||ce.getTileTexture(ir),H.demTexture){var Sr=H.demTexture;Sr.update(ur,{premultiply:!1}),Sr.bind(lt.NEAREST,lt.CLAMP_TO_EDGE)}else H.demTexture=new e.Texture(Ye,ur,lt.RGBA,{premultiply:!1}),H.demTexture.bind(lt.NEAREST,lt.CLAMP_TO_EDGE);Ye.activeTexture.set(lt.TEXTURE0);var Br=H.fbo;if(!Br){var Or=new e.Texture(Ye,{width:Yt,height:Yt,data:null},lt.RGBA);Or.bind(lt.LINEAR,lt.CLAMP_TO_EDGE),Br=H.fbo=Ye.createFramebuffer(Yt,Yt,!0),Br.colorAttachment.set(Or.texture)}Ye.bindFramebuffer.set(Br.framebuffer),Ye.viewport.set([0,0,Yt,Yt]),ce.useProgram("hillshadePrepare").draw(Ye,lt.TRIANGLES,de,Ae,Ce,Me.disabled,Ca(H.tileID,Tt,K),ve.id,ce.rasterBoundsBuffer,ce.quadTriangleIndexBuffer,ce.rasterBoundsSegments),H.needsHillshadePrepare=!1}}function wt(ce,H,ve,K){if(ce.renderPass==="translucent"&&ve.paint.get("raster-opacity")!==0&&!!K.length)for(var de=ce.context,Ae=de.gl,Ce=H.getSource(),Ye=ce.useProgram("raster"),lt=ce.colorModeForRenderPass(),Tt=Ce instanceof j?[{},K]:ce.stencilConfigForOverlap(K),Yt=Tt[0],ir=Tt[1],ur=ir[ir.length-1].overscaledZ,Sr=!ce.options.moving,Br=0,Or=ir;Br<Or.length;Br+=1){var Fr=Or[Br],jr=ce.depthModeForSublayer(Fr.overscaledZ-ur,ve.paint.get("raster-opacity")===1?Qr.ReadWrite:Qr.ReadOnly,Ae.LESS),cn=H.getTile(Fr),En=ce.transform.calculatePosMatrix(Fr.toUnwrapped(),Sr);cn.registerFadeDuration(ve.paint.get("raster-fade-duration"));var Fn=H.findLoadedParent(Fr,0),jn=or(cn,Fn,H,ve,ce.transform),qn=void 0,Qn=void 0,ca=ve.paint.get("raster-resampling")==="nearest"?Ae.NEAREST:Ae.LINEAR;de.activeTexture.set(Ae.TEXTURE0),cn.texture.bind(ca,Ae.CLAMP_TO_EDGE,Ae.LINEAR_MIPMAP_NEAREST),de.activeTexture.set(Ae.TEXTURE1),Fn?(Fn.texture.bind(ca,Ae.CLAMP_TO_EDGE,Ae.LINEAR_MIPMAP_NEAREST),qn=Math.pow(2,Fn.tileID.overscaledZ-cn.tileID.overscaledZ),Qn=[cn.tileID.canonical.x*qn%1,cn.tileID.canonical.y*qn%1]):cn.texture.bind(ca,Ae.CLAMP_TO_EDGE,Ae.LINEAR_MIPMAP_NEAREST);var xa=qi(En,Qn||[0,0],qn||1,jn,ve);Ce instanceof j?Ye.draw(de,Ae.TRIANGLES,jr,Kt.disabled,lt,Me.disabled,xa,ve.id,Ce.boundsBuffer,ce.quadTriangleIndexBuffer,Ce.boundsSegments):Ye.draw(de,Ae.TRIANGLES,jr,Yt[Fr.overscaledZ],lt,Me.disabled,xa,ve.id,ce.rasterBoundsBuffer,ce.quadTriangleIndexBuffer,ce.rasterBoundsSegments)}}function or(ce,H,ve,K,de){var Ae=K.paint.get("raster-fade-duration");if(Ae>0){var Ce=e.browser.now(),Ye=(Ce-ce.timeAdded)/Ae,lt=H?(Ce-H.timeAdded)/Ae:-1,Tt=ve.getSource(),Yt=de.coveringZoomLevel({tileSize:Tt.tileSize,roundZoom:Tt.roundZoom}),ir=!H||Math.abs(H.tileID.overscaledZ-Yt)>Math.abs(ce.tileID.overscaledZ-Yt),ur=ir&&ce.refreshedUponExpiration?1:e.clamp(ir?Ye:1-lt,0,1);return ce.refreshedUponExpiration&&Ye>=1&&(ce.refreshedUponExpiration=!1),H?{opacity:1,mix:1-ur}:{opacity:ur,mix:0}}else return{opacity:1,mix:0}}function hr(ce,H,ve){var K=ve.paint.get("background-color"),de=ve.paint.get("background-opacity");if(de!==0){var Ae=ce.context,Ce=Ae.gl,Ye=ce.transform,lt=Ye.tileSize,Tt=ve.paint.get("background-pattern");if(!ce.isPatternMissing(Tt)){var Yt=!Tt&&K.a===1&&de===1&&ce.opaquePassEnabledForLayer()?"opaque":"translucent";if(ce.renderPass===Yt){var ir=Kt.disabled,ur=ce.depthModeForSublayer(0,Yt==="opaque"?Qr.ReadWrite:Qr.ReadOnly),Sr=ce.colorModeForRenderPass(),Br=ce.useProgram(Tt?"backgroundPattern":"background"),Or=Ye.coveringTiles({tileSize:lt});Tt&&(Ae.activeTexture.set(Ce.TEXTURE0),ce.imageManager.bind(ce.context));for(var Fr=ve.getCrossfadeParameters(),jr=0,cn=Or;jr<cn.length;jr+=1){var En=cn[jr],Fn=ce.transform.calculatePosMatrix(En.toUnwrapped()),jn=Tt?Bl(Fn,de,ce,Tt,{tileID:En,tileSize:lt},Fr):mo(Fn,de,K);Br.draw(Ae,Ce.TRIANGLES,ur,ir,Sr,Me.disabled,jn,ve.id,ce.tileExtentBuffer,ce.quadTriangleIndexBuffer,ce.tileExtentSegments)}}}}}var ar=new e.Color(1,0,0,1),mr=new e.Color(0,1,0,1),Cr=new e.Color(0,0,1,1),Vr=new e.Color(1,0,1,1),qr=new e.Color(0,1,1,1);function xn(ce){var H=ce.transform.padding,ve=3;Hn(ce,ce.transform.height-(H.top||0),ve,ar),Hn(ce,H.bottom||0,ve,mr),da(ce,H.left||0,ve,Cr),da(ce,ce.transform.width-(H.right||0),ve,Vr);var K=ce.transform.centerPoint;Dn(ce,K.x,ce.transform.height-K.y,qr)}function Dn(ce,H,ve,K){var de=20,Ae=2;ma(ce,H-Ae/2,ve-de/2,Ae,de,K),ma(ce,H-de/2,ve-Ae/2,de,Ae,K)}function Hn(ce,H,ve,K){ma(ce,0,H+ve/2,ce.transform.width,ve,K)}function da(ce,H,ve,K){ma(ce,H-ve/2,0,ve,ce.transform.height,K)}function ma(ce,H,ve,K,de,Ae){var Ce=ce.context,Ye=Ce.gl;Ye.enable(Ye.SCISSOR_TEST),Ye.scissor(H*e.browser.devicePixelRatio,ve*e.browser.devicePixelRatio,K*e.browser.devicePixelRatio,de*e.browser.devicePixelRatio),Ce.clear({color:Ae}),Ye.disable(Ye.SCISSOR_TEST)}function Za(ce,H,ve){for(var K=0;K<ve.length;K++)Ya(ce,H,ve[K])}function Ya(ce,H,ve){var K=ce.context,de=K.gl,Ae=ve.posMatrix,Ce=ce.useProgram("debug"),Ye=Qr.disabled,lt=Kt.disabled,Tt=ce.colorModeForRenderPass(),Yt="$debug";K.activeTexture.set(de.TEXTURE0),ce.emptyTexture.bind(de.LINEAR,de.CLAMP_TO_EDGE),Ce.draw(K,de.LINE_STRIP,Ye,lt,Tt,Me.disabled,pn(Ae,e.Color.red),Yt,ce.debugBuffer,ce.tileBorderIndexBuffer,ce.debugSegments);var ir=H.getTileByID(ve.key).latestRawTileData,ur=ir&&ir.byteLength||0,Sr=Math.floor(ur/1024),Br=H.getTile(ve).tileSize,Or=512/Math.min(Br,512)*(ve.overscaledZ/ce.transform.zoom)*.5,Fr=ve.canonical.toString();ve.overscaledZ!==ve.canonical.z&&(Fr+=" => "+ve.overscaledZ);var jr=Fr+" "+Sr+"kb";qa(ce,jr),Ce.draw(K,de.TRIANGLES,Ye,lt,je.alphaBlended,Me.disabled,pn(Ae,e.Color.transparent,Or),Yt,ce.debugBuffer,ce.quadTriangleIndexBuffer,ce.debugSegments)}function qa(ce,H){ce.initDebugOverlayCanvas();var ve=ce.debugOverlayCanvas,K=ce.context.gl,de=ce.debugOverlayCanvas.getContext("2d");de.clearRect(0,0,ve.width,ve.height),de.shadowColor="white",de.shadowBlur=2,de.lineWidth=1.5,de.strokeStyle="white",de.textBaseline="top",de.font="bold "+36+"px Open Sans, sans-serif",de.fillText(H,5,5),de.strokeText(H,5,5),ce.debugOverlayTexture.update(ve),ce.debugOverlayTexture.bind(K.LINEAR,K.CLAMP_TO_EDGE)}function hi(ce,H,ve){var K=ce.context,de=ve.implementation;if(ce.renderPass==="offscreen"){var Ae=de.prerender;Ae&&(ce.setCustomLayerDefaults(),K.setColorMode(ce.colorModeForRenderPass()),Ae.call(de,K.gl,ce.transform.customLayerMatrix()),K.setDirty(),ce.setBaseState())}else if(ce.renderPass==="translucent"){ce.setCustomLayerDefaults(),K.setColorMode(ce.colorModeForRenderPass()),K.setStencilMode(Kt.disabled);var Ce=de.renderingMode==="3d"?new Qr(ce.context.gl.LEQUAL,Qr.ReadWrite,ce.depthRangeFor3D):ce.depthModeForSublayer(0,Qr.ReadOnly);K.setDepthMode(Ce),de.render(K.gl,ce.transform.customLayerMatrix()),K.setDirty(),ce.setBaseState(),K.bindFramebuffer.set(null)}}var ao={symbol:Lu,circle:zo,heatmap:Iu,line:yu,fill:zu,"fill-extrusion":He,hillshade:at,raster:wt,background:hr,debug:Za,custom:hi},ri=function(H,ve){this.context=new Se(H),this.transform=ve,this._tileTextures={},this.setup(),this.numSublayers=Ke.maxUnderzooming+Ke.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ya,this.gpuTimers={}};ri.prototype.resize=function(H,ve){if(this.width=H*e.browser.devicePixelRatio,this.height=ve*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var K=0,de=this.style._order;K<de.length;K+=1){var Ae=de[K];this.style._layers[Ae].resize()}},ri.prototype.setup=function(){var H=this.context,ve=new e.StructArrayLayout2i4;ve.emplaceBack(0,0),ve.emplaceBack(e.EXTENT,0),ve.emplaceBack(0,e.EXTENT),ve.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=H.createVertexBuffer(ve,tl.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var K=new e.StructArrayLayout2i4;K.emplaceBack(0,0),K.emplaceBack(e.EXTENT,0),K.emplaceBack(0,e.EXTENT),K.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=H.createVertexBuffer(K,tl.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var de=new e.StructArrayLayout4i8;de.emplaceBack(0,0,0,0),de.emplaceBack(e.EXTENT,0,e.EXTENT,0),de.emplaceBack(0,e.EXTENT,0,e.EXTENT),de.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=H.createVertexBuffer(de,Y.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var Ae=new e.StructArrayLayout2i4;Ae.emplaceBack(0,0),Ae.emplaceBack(1,0),Ae.emplaceBack(0,1),Ae.emplaceBack(1,1),this.viewportBuffer=H.createVertexBuffer(Ae,tl.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var Ce=new e.StructArrayLayout1ui2;Ce.emplaceBack(0),Ce.emplaceBack(1),Ce.emplaceBack(3),Ce.emplaceBack(2),Ce.emplaceBack(0),this.tileBorderIndexBuffer=H.createIndexBuffer(Ce);var Ye=new e.StructArrayLayout3ui6;Ye.emplaceBack(0,1,2),Ye.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=H.createIndexBuffer(Ye),this.emptyTexture=new e.Texture(H,{width:1,height:1,data:new Uint8Array([0,0,0,0])},H.gl.RGBA);var lt=this.context.gl;this.stencilClearMode=new Kt({func:lt.ALWAYS,mask:0},0,255,lt.ZERO,lt.ZERO,lt.ZERO)},ri.prototype.clearStencil=function(){var H=this.context,ve=H.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var K=e.create();e.ortho(K,0,this.width,this.height,0,0,1),e.scale(K,K,[ve.drawingBufferWidth,ve.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(H,ve.TRIANGLES,Qr.disabled,this.stencilClearMode,je.disabled,Me.disabled,Cn(K),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},ri.prototype._renderTileClippingMasks=function(H,ve){if(!(this.currentStencilSource===H.source||!H.isTileClipped()||!ve||!ve.length)){this.currentStencilSource=H.source;var K=this.context,de=K.gl;this.nextStencilID+ve.length>256&&this.clearStencil(),K.setColorMode(je.disabled),K.setDepthMode(Qr.disabled);var Ae=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Ce=0,Ye=ve;Ce<Ye.length;Ce+=1){var lt=Ye[Ce],Tt=this._tileClippingMaskIDs[lt.key]=this.nextStencilID++;Ae.draw(K,de.TRIANGLES,Qr.disabled,new Kt({func:de.ALWAYS,mask:0},Tt,255,de.KEEP,de.KEEP,de.REPLACE),je.disabled,Me.disabled,Cn(lt.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},ri.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var H=this.nextStencilID++,ve=this.context.gl;return new Kt({func:ve.NOTEQUAL,mask:255},H,255,ve.KEEP,ve.KEEP,ve.REPLACE)},ri.prototype.stencilModeForClipping=function(H){var ve=this.context.gl;return new Kt({func:ve.EQUAL,mask:255},this._tileClippingMaskIDs[H.key],0,ve.KEEP,ve.KEEP,ve.REPLACE)},ri.prototype.stencilConfigForOverlap=function(H){var ve,K=this.context.gl,de=H.sort(function(Tt,Yt){return Yt.overscaledZ-Tt.overscaledZ}),Ae=de[de.length-1].overscaledZ,Ce=de[0].overscaledZ-Ae+1;if(Ce>1){this.currentStencilSource=void 0,this.nextStencilID+Ce>256&&this.clearStencil();for(var Ye={},lt=0;lt<Ce;lt++)Ye[lt+Ae]=new Kt({func:K.GEQUAL,mask:255},lt+this.nextStencilID,255,K.KEEP,K.KEEP,K.REPLACE);return this.nextStencilID+=Ce,[Ye,de]}return[(ve={},ve[Ae]=Kt.disabled,ve),de]},ri.prototype.colorModeForRenderPass=function(){var H=this.context.gl;if(this._showOverdrawInspector){var ve=8,K=1/ve;return new je([H.CONSTANT_COLOR,H.ONE],new e.Color(K,K,K,0),[!0,!0,!0,!0])}else return this.renderPass==="opaque"?je.unblended:je.alphaBlended},ri.prototype.depthModeForSublayer=function(H,ve,K){if(!this.opaquePassEnabledForLayer())return Qr.disabled;var de=1-((1+this.currentLayer)*this.numSublayers+H)*this.depthEpsilon;return new Qr(K||this.context.gl.LEQUAL,ve,[de,de])},ri.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},ri.prototype.render=function(H,ve){var K=this;this.style=H,this.options=ve,this.lineAtlas=H.lineAtlas,this.imageManager=H.imageManager,this.glyphManager=H.glyphManager,this.symbolFadeChange=H.placement.symbolFadeChange(e.browser.now()),this.imageManager.beginFrame();var de=this.style._order,Ae=this.style.sourceCaches;for(var Ce in Ae){var Ye=Ae[Ce];Ye.used&&Ye.prepare(this.context)}var lt={},Tt={},Yt={};for(var ir in Ae){var ur=Ae[ir];lt[ir]=ur.getVisibleCoordinates(),Tt[ir]=lt[ir].slice().reverse(),Yt[ir]=ur.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Sr=0;Sr<de.length;Sr++){var Br=de[Sr];if(this.style._layers[Br].is3D()){this.opaquePassCutoff=Sr;break}}this.renderPass="offscreen";for(var Or=0,Fr=de;Or<Fr.length;Or+=1){var jr=Fr[Or],cn=this.style._layers[jr];if(!(!cn.hasOffscreenPass()||cn.isHidden(this.transform.zoom))){var En=Tt[cn.source];cn.type!=="custom"&&!En.length||this.renderLayer(this,Ae[cn.source],cn,En)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:ve.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=ve.showOverdrawInspector,this.depthRangeFor3D=[0,1-(H._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=de.length-1;this.currentLayer>=0;this.currentLayer--){var Fn=this.style._layers[de[this.currentLayer]],jn=Ae[Fn.source],qn=lt[Fn.source];this._renderTileClippingMasks(Fn,qn),this.renderLayer(this,jn,Fn,qn)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<de.length;this.currentLayer++){var Qn=this.style._layers[de[this.currentLayer]],ca=Ae[Qn.source],xa=(Qn.type==="symbol"?Yt:Tt)[Qn.source];this._renderTileClippingMasks(Qn,lt[Qn.source]),this.renderLayer(this,ca,Qn,xa)}if(this.options.showTileBoundaries){var ga,Ma,La=e.values(this.style._layers);La.forEach(function(Ha){Ha.source&&!Ha.isHidden(K.transform.zoom)&&(Ha.source!==(Ma&&Ma.id)&&(Ma=K.style.sourceCaches[Ha.source]),(!ga||ga.getSource().maxzoom<Ma.getSource().maxzoom)&&(ga=Ma))}),ga&&ao.debug(this,ga,ga.getVisibleCoordinates())}this.options.showPadding&&xn(this),this.context.setDefault()},ri.prototype.renderLayer=function(H,ve,K,de){K.isHidden(this.transform.zoom)||K.type!=="background"&&K.type!=="custom"&&!de.length||(this.id=K.id,this.gpuTimingStart(K),ao[K.type](H,ve,K,de,this.style.placement.variableOffsets),this.gpuTimingEnd())},ri.prototype.gpuTimingStart=function(H){if(!!this.options.gpuTiming){var ve=this.context.extTimerQuery,K=this.gpuTimers[H.id];K||(K=this.gpuTimers[H.id]={calls:0,cpuTime:0,query:ve.createQueryEXT()}),K.calls++,ve.beginQueryEXT(ve.TIME_ELAPSED_EXT,K.query)}},ri.prototype.gpuTimingEnd=function(){if(!!this.options.gpuTiming){var H=this.context.extTimerQuery;H.endQueryEXT(H.TIME_ELAPSED_EXT)}},ri.prototype.collectGpuTimers=function(){var H=this.gpuTimers;return this.gpuTimers={},H},ri.prototype.queryGpuTimers=function(H){var ve={};for(var K in H){var de=H[K],Ae=this.context.extTimerQuery,Ce=Ae.getQueryObjectEXT(de.query,Ae.QUERY_RESULT_EXT)/(1e3*1e3);Ae.deleteQueryEXT(de.query),ve[K]=Ce}return ve},ri.prototype.translatePosMatrix=function(H,ve,K,de,Ae){if(!K[0]&&!K[1])return H;var Ce=Ae?de==="map"?this.transform.angle:0:de==="viewport"?-this.transform.angle:0;if(Ce){var Ye=Math.sin(Ce),lt=Math.cos(Ce);K=[K[0]*lt-K[1]*Ye,K[0]*Ye+K[1]*lt]}var Tt=[Ae?K[0]:An(ve,K[0],this.transform.zoom),Ae?K[1]:An(ve,K[1],this.transform.zoom),0],Yt=new Float32Array(16);return e.translate(Yt,H,Tt),Yt},ri.prototype.saveTileTexture=function(H){var ve=this._tileTextures[H.size[0]];ve?ve.push(H):this._tileTextures[H.size[0]]=[H]},ri.prototype.getTileTexture=function(H){var ve=this._tileTextures[H];return ve&&ve.length>0?ve.pop():null},ri.prototype.isPatternMissing=function(H){if(!H)return!1;if(!H.from||!H.to)return!0;var ve=this.imageManager.getPattern(H.from.toString()),K=this.imageManager.getPattern(H.to.toString());return!ve||!K},ri.prototype.useProgram=function(H,ve){this.cache=this.cache||{};var K=""+H+(ve?ve.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[K]||(this.cache[K]=new Jo(this.context,ll[H],ve,Jl[H],this._showOverdrawInspector)),this.cache[K]},ri.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},ri.prototype.setBaseState=function(){var H=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(H.FUNC_ADD)},ri.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var H=this.context.gl;this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,H.RGBA)}},ri.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Hi=function(H,ve){this.points=H,this.planes=ve};Hi.fromInvProjectionMatrix=function(H,ve,K){var de=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]],Ae=Math.pow(2,K),Ce=de.map(function(Tt){return e.transformMat4([],Tt,H)}).map(function(Tt){return e.scale$1([],Tt,1/Tt[3]/ve*Ae)}),Ye=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],lt=Ye.map(function(Tt){var Yt=e.sub([],Ce[Tt[0]],Ce[Tt[1]]),ir=e.sub([],Ce[Tt[2]],Ce[Tt[1]]),ur=e.normalize([],e.cross([],Yt,ir)),Sr=-e.dot(ur,Ce[Tt[1]]);return ur.concat(Sr)});return new Hi(Ce,lt)};var uo=function(H,ve){this.min=H,this.max=ve,this.center=e.scale$2([],e.add([],this.min,this.max),.5)};uo.prototype.quadrant=function(H){for(var ve=[H%2===0,H<2],K=e.clone$2(this.min),de=e.clone$2(this.max),Ae=0;Ae<ve.length;Ae++)K[Ae]=ve[Ae]?this.min[Ae]:this.center[Ae],de[Ae]=ve[Ae]?this.center[Ae]:this.max[Ae];return de[2]=this.max[2],new uo(K,de)},uo.prototype.distanceX=function(H){var ve=Math.max(Math.min(this.max[0],H[0]),this.min[0]);return ve-H[0]},uo.prototype.distanceY=function(H){var ve=Math.max(Math.min(this.max[1],H[1]),this.min[1]);return ve-H[1]},uo.prototype.intersects=function(H){for(var ve=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],K=!0,de=0;de<H.planes.length;de++){for(var Ae=H.planes[de],Ce=0,Ye=0;Ye<ve.length;Ye++)Ce+=e.dot$1(Ae,ve[Ye])>=0;if(Ce===0)return 0;Ce!==ve.length&&(K=!1)}if(K)return 2;for(var lt=0;lt<3;lt++){for(var Tt=Number.MAX_VALUE,Yt=-Number.MAX_VALUE,ir=0;ir<H.points.length;ir++){var ur=H.points[ir][lt]-this.min[lt];Tt=Math.min(Tt,ur),Yt=Math.max(Yt,ur)}if(Yt<0||Tt>this.max[lt]-this.min[lt])return 0}return 1};var bo=function(H,ve,K,de){if(H===void 0&&(H=0),ve===void 0&&(ve=0),K===void 0&&(K=0),de===void 0&&(de=0),isNaN(H)||H<0||isNaN(ve)||ve<0||isNaN(K)||K<0||isNaN(de)||de<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=H,this.bottom=ve,this.left=K,this.right=de};bo.prototype.interpolate=function(H,ve,K){return ve.top!=null&&H.top!=null&&(this.top=e.number(H.top,ve.top,K)),ve.bottom!=null&&H.bottom!=null&&(this.bottom=e.number(H.bottom,ve.bottom,K)),ve.left!=null&&H.left!=null&&(this.left=e.number(H.left,ve.left,K)),ve.right!=null&&H.right!=null&&(this.right=e.number(H.right,ve.right,K)),this},bo.prototype.getCenter=function(H,ve){var K=e.clamp((this.left+H-this.right)/2,0,H),de=e.clamp((this.top+ve-this.bottom)/2,0,ve);return new e.Point(K,de)},bo.prototype.equals=function(H){return this.top===H.top&&this.bottom===H.bottom&&this.left===H.left&&this.right===H.right},bo.prototype.clone=function(){return new bo(this.top,this.bottom,this.left,this.right)},bo.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var bi=function(H,ve,K,de,Ae){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=Ae===void 0?!0:Ae,this._minZoom=H||0,this._maxZoom=ve||22,this._minPitch=K??0,this._maxPitch=de??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new bo,this._posMatrixCache={},this._alignedPosMatrixCache={}},Mi={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};bi.prototype.clone=function(){var H=new bi(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return H.tileSize=this.tileSize,H.latRange=this.latRange,H.width=this.width,H.height=this.height,H._center=this._center,H.zoom=this.zoom,H.angle=this.angle,H._fov=this._fov,H._pitch=this._pitch,H._unmodified=this._unmodified,H._edgeInsets=this._edgeInsets.clone(),H._calcMatrices(),H},Mi.minZoom.get=function(){return this._minZoom},Mi.minZoom.set=function(ce){this._minZoom!==ce&&(this._minZoom=ce,this.zoom=Math.max(this.zoom,ce))},Mi.maxZoom.get=function(){return this._maxZoom},Mi.maxZoom.set=function(ce){this._maxZoom!==ce&&(this._maxZoom=ce,this.zoom=Math.min(this.zoom,ce))},Mi.minPitch.get=function(){return this._minPitch},Mi.minPitch.set=function(ce){this._minPitch!==ce&&(this._minPitch=ce,this.pitch=Math.max(this.pitch,ce))},Mi.maxPitch.get=function(){return this._maxPitch},Mi.maxPitch.set=function(ce){this._maxPitch!==ce&&(this._maxPitch=ce,this.pitch=Math.min(this.pitch,ce))},Mi.renderWorldCopies.get=function(){return this._renderWorldCopies},Mi.renderWorldCopies.set=function(ce){ce===void 0?ce=!0:ce===null&&(ce=!1),this._renderWorldCopies=ce},Mi.worldSize.get=function(){return this.tileSize*this.scale},Mi.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Mi.size.get=function(){return new e.Point(this.width,this.height)},Mi.bearing.get=function(){return-this.angle/Math.PI*180},Mi.bearing.set=function(ce){var H=-e.wrap(ce,-180,180)*Math.PI/180;this.angle!==H&&(this._unmodified=!1,this.angle=H,this._calcMatrices(),this.rotationMatrix=e.create$2(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Mi.pitch.get=function(){return this._pitch/Math.PI*180},Mi.pitch.set=function(ce){var H=e.clamp(ce,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==H&&(this._unmodified=!1,this._pitch=H,this._calcMatrices())},Mi.fov.get=function(){return this._fov/Math.PI*180},Mi.fov.set=function(ce){ce=Math.max(.01,Math.min(60,ce)),this._fov!==ce&&(this._unmodified=!1,this._fov=ce/180*Math.PI,this._calcMatrices())},Mi.zoom.get=function(){return this._zoom},Mi.zoom.set=function(ce){var H=Math.min(Math.max(ce,this.minZoom),this.maxZoom);this._zoom!==H&&(this._unmodified=!1,this._zoom=H,this.scale=this.zoomScale(H),this.tileZoom=Math.floor(H),this.zoomFraction=H-this.tileZoom,this._constrain(),this._calcMatrices())},Mi.center.get=function(){return this._center},Mi.center.set=function(ce){ce.lat===this._center.lat&&ce.lng===this._center.lng||(this._unmodified=!1,this._center=ce,this._constrain(),this._calcMatrices())},Mi.padding.get=function(){return this._edgeInsets.toJSON()},Mi.padding.set=function(ce){this._edgeInsets.equals(ce)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,ce,1),this._calcMatrices())},Mi.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},bi.prototype.isPaddingEqual=function(H){return this._edgeInsets.equals(H)},bi.prototype.interpolatePadding=function(H,ve,K){this._unmodified=!1,this._edgeInsets.interpolate(H,ve,K),this._constrain(),this._calcMatrices()},bi.prototype.coveringZoomLevel=function(H){var ve=(H.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/H.tileSize));return Math.max(0,ve)},bi.prototype.getVisibleUnwrappedCoordinates=function(H){var ve=[new e.UnwrappedTileID(0,H)];if(this._renderWorldCopies)for(var K=this.pointCoordinate(new e.Point(0,0)),de=this.pointCoordinate(new e.Point(this.width,0)),Ae=this.pointCoordinate(new e.Point(this.width,this.height)),Ce=this.pointCoordinate(new e.Point(0,this.height)),Ye=Math.floor(Math.min(K.x,de.x,Ae.x,Ce.x)),lt=Math.floor(Math.max(K.x,de.x,Ae.x,Ce.x)),Tt=1,Yt=Ye-Tt;Yt<=lt+Tt;Yt++)Yt!==0&&ve.push(new e.UnwrappedTileID(Yt,H));return ve},bi.prototype.coveringTiles=function(H){var ve=this.coveringZoomLevel(H),K=ve;if(H.minzoom!==void 0&&ve<H.minzoom)return[];H.maxzoom!==void 0&&ve>H.maxzoom&&(ve=H.maxzoom);var de=e.MercatorCoordinate.fromLngLat(this.center),Ae=Math.pow(2,ve),Ce=[Ae*de.x,Ae*de.y,0],Ye=Hi.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,ve),lt=H.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(lt=ve);var Tt=3,Yt=function(La){return{aabb:new uo([La*Ae,0,0],[(La+1)*Ae,Ae,0]),zoom:0,x:0,y:0,wrap:La,fullyVisible:!1}},ir=[],ur=[],Sr=ve,Br=H.reparseOverscaled?K:ve;if(this._renderWorldCopies)for(var Or=1;Or<=3;Or++)ir.push(Yt(-Or)),ir.push(Yt(Or));for(ir.push(Yt(0));ir.length>0;){var Fr=ir.pop(),jr=Fr.x,cn=Fr.y,En=Fr.fullyVisible;if(!En){var Fn=Fr.aabb.intersects(Ye);if(Fn===0)continue;En=Fn===2}var jn=Fr.aabb.distanceX(Ce),qn=Fr.aabb.distanceY(Ce),Qn=Math.max(Math.abs(jn),Math.abs(qn)),ca=Tt+(1<<Sr-Fr.zoom)-2;if(Fr.zoom===Sr||Qn>ca&&Fr.zoom>=lt){ur.push({tileID:new e.OverscaledTileID(Fr.zoom===Sr?Br:Fr.zoom,Fr.wrap,Fr.zoom,jr,cn),distanceSq:e.sqrLen([Ce[0]-.5-jr,Ce[1]-.5-cn])});continue}for(var xa=0;xa<4;xa++){var ga=(jr<<1)+xa%2,Ma=(cn<<1)+(xa>>1);ir.push({aabb:Fr.aabb.quadrant(xa),zoom:Fr.zoom+1,x:ga,y:Ma,wrap:Fr.wrap,fullyVisible:En})}}return ur.sort(function(La,Ha){return La.distanceSq-Ha.distanceSq}).map(function(La){return La.tileID})},bi.prototype.resize=function(H,ve){this.width=H,this.height=ve,this.pixelsToGLUnits=[2/H,-2/ve],this._constrain(),this._calcMatrices()},Mi.unmodified.get=function(){return this._unmodified},bi.prototype.zoomScale=function(H){return Math.pow(2,H)},bi.prototype.scaleZoom=function(H){return Math.log(H)/Math.LN2},bi.prototype.project=function(H){var ve=e.clamp(H.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(H.lng)*this.worldSize,e.mercatorYfromLat(ve)*this.worldSize)},bi.prototype.unproject=function(H){return new e.MercatorCoordinate(H.x/this.worldSize,H.y/this.worldSize).toLngLat()},Mi.point.get=function(){return this.project(this.center)},bi.prototype.setLocationAtPoint=function(H,ve){var K=this.pointCoordinate(ve),de=this.pointCoordinate(this.centerPoint),Ae=this.locationCoordinate(H),Ce=new e.MercatorCoordinate(Ae.x-(K.x-de.x),Ae.y-(K.y-de.y));this.center=this.coordinateLocation(Ce),this._renderWorldCopies&&(this.center=this.center.wrap())},bi.prototype.locationPoint=function(H){return this.coordinatePoint(this.locationCoordinate(H))},bi.prototype.pointLocation=function(H){return this.coordinateLocation(this.pointCoordinate(H))},bi.prototype.locationCoordinate=function(H){return e.MercatorCoordinate.fromLngLat(H)},bi.prototype.coordinateLocation=function(H){return H.toLngLat()},bi.prototype.pointCoordinate=function(H){var ve=0,K=[H.x,H.y,0,1],de=[H.x,H.y,1,1];e.transformMat4(K,K,this.pixelMatrixInverse),e.transformMat4(de,de,this.pixelMatrixInverse);var Ae=K[3],Ce=de[3],Ye=K[0]/Ae,lt=de[0]/Ce,Tt=K[1]/Ae,Yt=de[1]/Ce,ir=K[2]/Ae,ur=de[2]/Ce,Sr=ir===ur?0:(ve-ir)/(ur-ir);return new e.MercatorCoordinate(e.number(Ye,lt,Sr)/this.worldSize,e.number(Tt,Yt,Sr)/this.worldSize)},bi.prototype.coordinatePoint=function(H){var ve=[H.x*this.worldSize,H.y*this.worldSize,0,1];return e.transformMat4(ve,ve,this.pixelMatrix),new e.Point(ve[0]/ve[3],ve[1]/ve[3])},bi.prototype.getBounds=function(){return new e.LngLatBounds().extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))},bi.prototype.getMaxBounds=function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])},bi.prototype.setMaxBounds=function(H){H?(this.lngRange=[H.getWest(),H.getEast()],this.latRange=[H.getSouth(),H.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},bi.prototype.calculatePosMatrix=function(H,ve){ve===void 0&&(ve=!1);var K=H.key,de=ve?this._alignedPosMatrixCache:this._posMatrixCache;if(de[K])return de[K];var Ae=H.canonical,Ce=this.worldSize/this.zoomScale(Ae.z),Ye=Ae.x+Math.pow(2,Ae.z)*H.wrap,lt=e.identity(new Float64Array(16));return e.translate(lt,lt,[Ye*Ce,Ae.y*Ce,0]),e.scale(lt,lt,[Ce/e.EXTENT,Ce/e.EXTENT,1]),e.multiply(lt,ve?this.alignedProjMatrix:this.projMatrix,lt),de[K]=new Float32Array(lt),de[K]},bi.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},bi.prototype._constrain=function(){if(!(!this.center||!this.width||!this.height||this._constraining)){this._constraining=!0;var H=-90,ve=90,K=-180,de=180,Ae,Ce,Ye,lt,Tt=this.size,Yt=this._unmodified;if(this.latRange){var ir=this.latRange;H=e.mercatorYfromLat(ir[1])*this.worldSize,ve=e.mercatorYfromLat(ir[0])*this.worldSize,Ae=ve-H<Tt.y?Tt.y/(ve-H):0}if(this.lngRange){var ur=this.lngRange;K=e.mercatorXfromLng(ur[0])*this.worldSize,de=e.mercatorXfromLng(ur[1])*this.worldSize,Ce=de-K<Tt.x?Tt.x/(de-K):0}var Sr=this.point,Br=Math.max(Ce||0,Ae||0);if(Br){this.center=this.unproject(new e.Point(Ce?(de+K)/2:Sr.x,Ae?(ve+H)/2:Sr.y)),this.zoom+=this.scaleZoom(Br),this._unmodified=Yt,this._constraining=!1;return}if(this.latRange){var Or=Sr.y,Fr=Tt.y/2;Or-Fr<H&&(lt=H+Fr),Or+Fr>ve&&(lt=ve-Fr)}if(this.lngRange){var jr=Sr.x,cn=Tt.x/2;jr-cn<K&&(Ye=K+cn),jr+cn>de&&(Ye=de-cn)}(Ye!==void 0||lt!==void 0)&&(this.center=this.unproject(new e.Point(Ye!==void 0?Ye:Sr.x,lt!==void 0?lt:Sr.y))),this._unmodified=Yt,this._constraining=!1}},bi.prototype._calcMatrices=function(){if(!!this.height){var H=this._fov/2,ve=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(H)*this.height;var K=Math.PI/2+this._pitch,de=this._fov*(.5+ve.y/this.height),Ae=Math.sin(de)*this.cameraToCenterDistance/Math.sin(e.clamp(Math.PI-K-de,.01,Math.PI-.01)),Ce=this.point,Ye=Ce.x,lt=Ce.y,Tt=Math.cos(Math.PI/2-this._pitch)*Ae+this.cameraToCenterDistance,Yt=Tt*1.01,ir=this.height/50,ur=new Float64Array(16);e.perspective(ur,this._fov,this.width/this.height,ir,Yt),ur[8]=-ve.x*2/this.width,ur[9]=ve.y*2/this.height,e.scale(ur,ur,[1,-1,1]),e.translate(ur,ur,[0,0,-this.cameraToCenterDistance]),e.rotateX(ur,ur,this._pitch),e.rotateZ(ur,ur,this.angle),e.translate(ur,ur,[-Ye,-lt,0]),this.mercatorMatrix=e.scale([],ur,[this.worldSize,this.worldSize,this.worldSize]),e.scale(ur,ur,[1,1,e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=ur,this.invProjMatrix=e.invert([],this.projMatrix);var Sr=this.width%2/2,Br=this.height%2/2,Or=Math.cos(this.angle),Fr=Math.sin(this.angle),jr=Ye-Math.round(Ye)+Or*Sr+Fr*Br,cn=lt-Math.round(lt)+Or*Br+Fr*Sr,En=new Float64Array(ur);if(e.translate(En,En,[jr>.5?jr-1:jr,cn>.5?cn-1:cn,0]),this.alignedProjMatrix=En,ur=e.create(),e.scale(ur,ur,[this.width/2,-this.height/2,1]),e.translate(ur,ur,[1,-1,0]),this.labelPlaneMatrix=ur,ur=e.create(),e.scale(ur,ur,[1,-1,1]),e.translate(ur,ur,[-1,-1,0]),e.scale(ur,ur,[2/this.width,2/this.height,1]),this.glCoordMatrix=ur,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),ur=e.invert(new Float64Array(16),this.pixelMatrix),!ur)throw new Error("failed to invert matrix");this.pixelMatrixInverse=ur,this._posMatrixCache={},this._alignedPosMatrixCache={}}},bi.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var H=this.pointCoordinate(new e.Point(0,0)),ve=[H.x*this.worldSize,H.y*this.worldSize,0,1],K=e.transformMat4(ve,ve,this.pixelMatrix);return K[3]/this.cameraToCenterDistance},bi.prototype.getCameraPoint=function(){var H=this._pitch,ve=Math.tan(H)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,ve))},bi.prototype.getCameraQueryGeometry=function(H){var ve=this.getCameraPoint();if(H.length===1)return[H[0],ve];for(var K=ve.x,de=ve.y,Ae=ve.x,Ce=ve.y,Ye=0,lt=H;Ye<lt.length;Ye+=1){var Tt=lt[Ye];K=Math.min(K,Tt.x),de=Math.min(de,Tt.y),Ae=Math.max(Ae,Tt.x),Ce=Math.max(Ce,Tt.y)}return[new e.Point(K,de),new e.Point(Ae,de),new e.Point(Ae,Ce),new e.Point(K,Ce),new e.Point(K,de)]},Object.defineProperties(bi.prototype,Mi);function us(ce,H){var ve=!1,K=null,de=function(){K=null,ve&&(ce(),K=setTimeout(de,H),ve=!1)};return function(){return ve=!0,K||de(),K}}var po=function(H){this._hashName=H&&encodeURIComponent(H),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=us(this._updateHashUnthrottled.bind(this),30*1e3/100)};po.prototype.addTo=function(H){return this._map=H,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},po.prototype.remove=function(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},po.prototype.getHashString=function(H){var ve=this._map.getCenter(),K=Math.round(this._map.getZoom()*100)/100,de=Math.ceil((K*Math.LN2+Math.log(512/360/.5))/Math.LN10),Ae=Math.pow(10,de),Ce=Math.round(ve.lng*Ae)/Ae,Ye=Math.round(ve.lat*Ae)/Ae,lt=this._map.getBearing(),Tt=this._map.getPitch(),Yt="";if(H?Yt+="/"+Ce+"/"+Ye+"/"+K:Yt+=K+"/"+Ye+"/"+Ce,(lt||Tt)&&(Yt+="/"+Math.round(lt*10)/10),Tt&&(Yt+="/"+Math.round(Tt)),this._hashName){var ir=this._hashName,ur=!1,Sr=e.window.location.hash.slice(1).split("&").map(function(Br){var Or=Br.split("=")[0];return Or===ir?(ur=!0,Or+"="+Yt):Br}).filter(function(Br){return Br});return ur||Sr.push(ir+"="+Yt),"#"+Sr.join("&")}return"#"+Yt},po.prototype._getCurrentHash=function(){var H=this,ve=e.window.location.hash.replace("#","");if(this._hashName){var K;return ve.split("&").map(function(de){return de.split("=")}).forEach(function(de){de[0]===H._hashName&&(K=de)}),(K&&K[1]||"").split("/")}return ve.split("/")},po.prototype._onHashChange=function(){var H=this._getCurrentHash();if(H.length>=3&&!H.some(function(K){return isNaN(K)})){var ve=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(H[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+H[2],+H[1]],zoom:+H[0],bearing:ve,pitch:+(H[4]||0)}),!0}return!1},po.prototype._updateHashUnthrottled=function(){var H=this.getHashString();try{e.window.history.replaceState(e.window.history.state,"",H)}catch{}};var Lo={linearity:.3,easing:e.bezier(0,0,.3,1)},Ho=e.extend({deceleration:2500,maxSpeed:1400},Lo),ue=e.extend({deceleration:20,maxSpeed:1400},Lo),be=e.extend({deceleration:1e3,maxSpeed:360},Lo),Ee=e.extend({deceleration:1e3,maxSpeed:90},Lo),Oe=function(H){this._map=H,this.clear()};Oe.prototype.clear=function(){this._inertiaBuffer=[]},Oe.prototype.record=function(H){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.browser.now(),settings:H})},Oe.prototype._drainInertiaBuffer=function(){for(var H=this._inertiaBuffer,ve=e.browser.now(),K=160;H.length>0&&ve-H[0].time>K;)H.shift()},Oe.prototype._onMoveEnd=function(H){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var ve={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0},K=0,de=this._inertiaBuffer;K<de.length;K+=1){var Ae=de[K],Ce=Ae.settings;ve.zoom+=Ce.zoomDelta||0,ve.bearing+=Ce.bearingDelta||0,ve.pitch+=Ce.pitchDelta||0,Ce.panDelta&&ve.pan._add(Ce.panDelta),Ce.around&&(ve.around=Ce.around),Ce.pinchAround&&(ve.pinchAround=Ce.pinchAround)}var Ye=this._inertiaBuffer[this._inertiaBuffer.length-1],lt=Ye.time-this._inertiaBuffer[0].time,Tt={};if(ve.pan.mag()){var Yt=We(ve.pan.mag(),lt,e.extend({},Ho,H||{}));Tt.offset=ve.pan.mult(Yt.amount/ve.pan.mag()),Tt.center=this._map.transform.center,ze(Tt,Yt)}if(ve.zoom){var ir=We(ve.zoom,lt,ue);Tt.zoom=this._map.transform.zoom+ir.amount,ze(Tt,ir)}if(ve.bearing){var ur=We(ve.bearing,lt,be);Tt.bearing=this._map.transform.bearing+e.clamp(ur.amount,-179,179),ze(Tt,ur)}if(ve.pitch){var Sr=We(ve.pitch,lt,Ee);Tt.pitch=this._map.transform.pitch+Sr.amount,ze(Tt,Sr)}if(Tt.zoom||Tt.bearing){var Br=ve.pinchAround===void 0?ve.around:ve.pinchAround;Tt.around=Br?this._map.unproject(Br):this._map.getCenter()}return this.clear(),e.extend(Tt,{noMoveStart:!0})}};function ze(ce,H){(!ce.duration||ce.duration<H.duration)&&(ce.duration=H.duration,ce.easing=H.easing)}function We(ce,H,ve){var K=ve.maxSpeed,de=ve.linearity,Ae=ve.deceleration,Ce=e.clamp(ce*de/(H/1e3),-K,K),Ye=Math.abs(Ce)/(Ae*de);return{easing:ve.easing,duration:Ye*1e3,amount:Ce*(Ye/2)}}var xt=function(ce){function H(K,de,Ae,Ce){Ce===void 0&&(Ce={});var Ye=n.mousePos(de.getCanvasContainer(),Ae),lt=de.unproject(Ye);ce.call(this,K,e.extend({point:Ye,lngLat:lt,originalEvent:Ae},Ce)),this._defaultPrevented=!1,this.target=de}ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H;var ve={defaultPrevented:{configurable:!0}};return H.prototype.preventDefault=function(){this._defaultPrevented=!0},ve.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(H.prototype,ve),H}(e.Event),ht=function(ce){function H(K,de,Ae){var Ce=K==="touchend"?Ae.changedTouches:Ae.touches,Ye=n.touchPos(de.getCanvasContainer(),Ce),lt=Ye.map(function(ir){return de.unproject(ir)}),Tt=Ye.reduce(function(ir,ur,Sr,Br){return ir.add(ur.div(Br.length))},new e.Point(0,0)),Yt=de.unproject(Tt);ce.call(this,K,{points:Ye,point:Tt,lngLats:lt,lngLat:Yt,originalEvent:Ae}),this._defaultPrevented=!1}ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H;var ve={defaultPrevented:{configurable:!0}};return H.prototype.preventDefault=function(){this._defaultPrevented=!0},ve.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(H.prototype,ve),H}(e.Event),Et=function(ce){function H(K,de,Ae){ce.call(this,K,{originalEvent:Ae}),this._defaultPrevented=!1}ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H;var ve={defaultPrevented:{configurable:!0}};return H.prototype.preventDefault=function(){this._defaultPrevented=!0},ve.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(H.prototype,ve),H}(e.Event),Vt=function(H,ve){this._map=H,this._clickTolerance=ve.clickTolerance};Vt.prototype.reset=function(){delete this._mousedownPos},Vt.prototype.wheel=function(H){return this._firePreventable(new Et(H.type,this._map,H))},Vt.prototype.mousedown=function(H,ve){return this._mousedownPos=ve,this._firePreventable(new xt(H.type,this._map,H))},Vt.prototype.mouseup=function(H){this._map.fire(new xt(H.type,this._map,H))},Vt.prototype.click=function(H,ve){this._mousedownPos&&this._mousedownPos.dist(ve)>=this._clickTolerance||this._map.fire(new xt(H.type,this._map,H))},Vt.prototype.dblclick=function(H){return this._firePreventable(new xt(H.type,this._map,H))},Vt.prototype.mouseover=function(H){this._map.fire(new xt(H.type,this._map,H))},Vt.prototype.mouseout=function(H){this._map.fire(new xt(H.type,this._map,H))},Vt.prototype.touchstart=function(H){return this._firePreventable(new ht(H.type,this._map,H))},Vt.prototype.touchmove=function(H){this._map.fire(new ht(H.type,this._map,H))},Vt.prototype.touchend=function(H){this._map.fire(new ht(H.type,this._map,H))},Vt.prototype.touchcancel=function(H){this._map.fire(new ht(H.type,this._map,H))},Vt.prototype._firePreventable=function(H){if(this._map.fire(H),H.defaultPrevented)return{}},Vt.prototype.isEnabled=function(){return!0},Vt.prototype.isActive=function(){return!1},Vt.prototype.enable=function(){},Vt.prototype.disable=function(){};var jt=function(H){this._map=H};jt.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},jt.prototype.mousemove=function(H){this._map.fire(new xt(H.type,this._map,H))},jt.prototype.mousedown=function(){this._delayContextMenu=!0},jt.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new xt("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},jt.prototype.contextmenu=function(H){this._delayContextMenu?this._contextMenuEvent=H:this._map.fire(new xt(H.type,this._map,H)),this._map.listens("contextmenu")&&H.preventDefault()},jt.prototype.isEnabled=function(){return!0},jt.prototype.isActive=function(){return!1},jt.prototype.enable=function(){},jt.prototype.disable=function(){};var Jt=function(H,ve){this._map=H,this._el=H.getCanvasContainer(),this._container=H.getContainer(),this._clickTolerance=ve.clickTolerance||1};Jt.prototype.isEnabled=function(){return!!this._enabled},Jt.prototype.isActive=function(){return!!this._active},Jt.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Jt.prototype.disable=function(){!this.isEnabled()||(this._enabled=!1)},Jt.prototype.mousedown=function(H,ve){!this.isEnabled()||!(H.shiftKey&&H.button===0)||(n.disableDrag(),this._startPos=this._lastPos=ve,this._active=!0)},Jt.prototype.mousemoveWindow=function(H,ve){if(!!this._active){var K=ve;if(!(this._lastPos.equals(K)||!this._box&&K.dist(this._startPos)<this._clickTolerance)){var de=this._startPos;this._lastPos=K,this._box||(this._box=n.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",H));var Ae=Math.min(de.x,K.x),Ce=Math.max(de.x,K.x),Ye=Math.min(de.y,K.y),lt=Math.max(de.y,K.y);n.setTransform(this._box,"translate("+Ae+"px,"+Ye+"px)"),this._box.style.width=Ce-Ae+"px",this._box.style.height=lt-Ye+"px"}}},Jt.prototype.mouseupWindow=function(H,ve){var K=this;if(!!this._active&&H.button===0){var de=this._startPos,Ae=ve;if(this.reset(),n.suppressClick(),de.x===Ae.x&&de.y===Ae.y)this._fireEvent("boxzoomcancel",H);else return this._map.fire(new e.Event("boxzoomend",{originalEvent:H})),{cameraAnimation:function(Ce){return Ce.fitScreenCoordinates(de,Ae,K._map.getBearing(),{linear:!0})}}}},Jt.prototype.keydown=function(H){!this._active||H.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",H))},Jt.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(n.remove(this._box),this._box=null),n.enableDrag(),delete this._startPos,delete this._lastPos},Jt.prototype._fireEvent=function(H,ve){return this._map.fire(new e.Event(H,{originalEvent:ve}))};function Tr(ce,H){for(var ve={},K=0;K<ce.length;K++)ve[ce[K].identifier]=H[K];return ve}function Kr(ce){for(var H=new e.Point(0,0),ve=0,K=ce;ve<K.length;ve+=1){var de=K[ve];H._add(de)}return H.div(ce.length)}var ln=500,kr=500,zr=30,Gr=function(H){this.reset(),this.numTouches=H.numTouches};Gr.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Gr.prototype.touchstart=function(H,ve,K){(this.centroid||K.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=H.timeStamp),K.length===this.numTouches&&(this.centroid=Kr(ve),this.touches=Tr(K,ve)))},Gr.prototype.touchmove=function(H,ve,K){if(!(this.aborted||!this.centroid)){var de=Tr(K,ve);for(var Ae in this.touches){var Ce=this.touches[Ae],Ye=de[Ae];(!Ye||Ye.dist(Ce)>zr)&&(this.aborted=!0)}}},Gr.prototype.touchend=function(H,ve,K){if((!this.centroid||H.timeStamp-this.startTime>kr)&&(this.aborted=!0),K.length===0){var de=!this.aborted&&this.centroid;if(this.reset(),de)return de}};var nn=function(H){this.singleTap=new Gr(H),this.numTaps=H.numTaps,this.reset()};nn.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},nn.prototype.touchstart=function(H,ve,K){this.singleTap.touchstart(H,ve,K)},nn.prototype.touchmove=function(H,ve,K){this.singleTap.touchmove(H,ve,K)},nn.prototype.touchend=function(H,ve,K){var de=this.singleTap.touchend(H,ve,K);if(de){var Ae=H.timeStamp-this.lastTime<ln,Ce=!this.lastTap||this.lastTap.dist(de)<zr;if((!Ae||!Ce)&&this.reset(),this.count++,this.lastTime=H.timeStamp,this.lastTap=de,this.count===this.numTaps)return this.reset(),de}};var on=function(){this._zoomIn=new nn({numTouches:1,numTaps:2}),this._zoomOut=new nn({numTouches:2,numTaps:1}),this.reset()};on.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},on.prototype.touchstart=function(H,ve,K){this._zoomIn.touchstart(H,ve,K),this._zoomOut.touchstart(H,ve,K)},on.prototype.touchmove=function(H,ve,K){this._zoomIn.touchmove(H,ve,K),this._zoomOut.touchmove(H,ve,K)},on.prototype.touchend=function(H,ve,K){var de=this,Ae=this._zoomIn.touchend(H,ve,K),Ce=this._zoomOut.touchend(H,ve,K);if(Ae)return this._active=!0,H.preventDefault(),setTimeout(function(){return de.reset()},0),{cameraAnimation:function(Ye){return Ye.easeTo({duration:300,zoom:Ye.getZoom()+1,around:Ye.unproject(Ae)},{originalEvent:H})}};if(Ce)return this._active=!0,H.preventDefault(),setTimeout(function(){return de.reset()},0),{cameraAnimation:function(Ye){return Ye.easeTo({duration:300,zoom:Ye.getZoom()-1,around:Ye.unproject(Ce)},{originalEvent:H})}}},on.prototype.touchcancel=function(){this.reset()},on.prototype.enable=function(){this._enabled=!0},on.prototype.disable=function(){this._enabled=!1,this.reset()},on.prototype.isEnabled=function(){return this._enabled},on.prototype.isActive=function(){return this._active};var Wr=0,Nn=2,ra=function(H){this.reset(),this._clickTolerance=H.clickTolerance||1};ra.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},ra.prototype._correctButton=function(H,ve){return!1},ra.prototype._move=function(H,ve){return{}},ra.prototype.mousedown=function(H,ve){if(!this._lastPoint){var K=n.mouseButton(H);!this._correctButton(H,K)||(this._lastPoint=ve,this._eventButton=K)}},ra.prototype.mousemoveWindow=function(H,ve){var K=this._lastPoint;if(!!K&&(H.preventDefault(),!(!this._moved&&ve.dist(K)<this._clickTolerance)))return this._moved=!0,this._lastPoint=ve,this._move(K,ve)},ra.prototype.mouseupWindow=function(H){var ve=n.mouseButton(H);ve===this._eventButton&&(this._moved&&n.suppressClick(),this.reset())},ra.prototype.enable=function(){this._enabled=!0},ra.prototype.disable=function(){this._enabled=!1,this.reset()},ra.prototype.isEnabled=function(){return this._enabled},ra.prototype.isActive=function(){return this._active};var ba=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.mousedown=function(K,de){ce.prototype.mousedown.call(this,K,de),this._lastPoint&&(this._active=!0)},H.prototype._correctButton=function(K,de){return de===Wr&&!K.ctrlKey},H.prototype._move=function(K,de){return{around:de,panDelta:de.sub(K)}},H}(ra),oa=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype._correctButton=function(K,de){return de===Wr&&K.ctrlKey||de===Nn},H.prototype._move=function(K,de){var Ae=.8,Ce=(de.x-K.x)*Ae;if(Ce)return this._active=!0,{bearingDelta:Ce}},H.prototype.contextmenu=function(K){K.preventDefault()},H}(ra),Ea=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype._correctButton=function(K,de){return de===Wr&&K.ctrlKey||de===Nn},H.prototype._move=function(K,de){var Ae=-.5,Ce=(de.y-K.y)*Ae;if(Ce)return this._active=!0,{pitchDelta:Ce}},H.prototype.contextmenu=function(K){K.preventDefault()},H}(ra),ua=function(H){this._minTouches=1,this._clickTolerance=H.clickTolerance||1,this.reset()};ua.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)},ua.prototype.touchstart=function(H,ve,K){return this._calculateTransform(H,ve,K)},ua.prototype.touchmove=function(H,ve,K){if(!!this._active)return H.preventDefault(),this._calculateTransform(H,ve,K)},ua.prototype.touchend=function(H,ve,K){this._calculateTransform(H,ve,K),this._active&&K.length<this._minTouches&&this.reset()},ua.prototype.touchcancel=function(){this.reset()},ua.prototype._calculateTransform=function(H,ve,K){K.length>0&&(this._active=!0);var de=Tr(K,ve),Ae=new e.Point(0,0),Ce=new e.Point(0,0),Ye=0;for(var lt in de){var Tt=de[lt],Yt=this._touches[lt];Yt&&(Ae._add(Tt),Ce._add(Tt.sub(Yt)),Ye++,de[lt]=Tt)}if(this._touches=de,!(Ye<this._minTouches||!Ce.mag())){var ir=Ce.div(Ye);if(this._sum._add(ir),!(this._sum.mag()<this._clickTolerance)){var ur=Ae.div(Ye);return{around:ur,panDelta:ir}}}},ua.prototype.enable=function(){this._enabled=!0},ua.prototype.disable=function(){this._enabled=!1,this.reset()},ua.prototype.isEnabled=function(){return this._enabled},ua.prototype.isActive=function(){return this._active};var Ua=function(){this.reset()};Ua.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Ua.prototype._start=function(H){},Ua.prototype._move=function(H,ve,K){return{}},Ua.prototype.touchstart=function(H,ve,K){this._firstTwoTouches||K.length<2||(this._firstTwoTouches=[K[0].identifier,K[1].identifier],this._start([ve[0],ve[1]]))},Ua.prototype.touchmove=function(H,ve,K){if(!!this._firstTwoTouches){H.preventDefault();var de=this._firstTwoTouches,Ae=de[0],Ce=de[1],Ye=Da(K,ve,Ae),lt=Da(K,ve,Ce);if(!(!Ye||!lt)){var Tt=this._aroundCenter?null:Ye.add(lt).div(2);return this._move([Ye,lt],Tt,H)}}},Ua.prototype.touchend=function(H,ve,K){if(!!this._firstTwoTouches){var de=this._firstTwoTouches,Ae=de[0],Ce=de[1],Ye=Da(K,ve,Ae),lt=Da(K,ve,Ce);Ye&&lt||(this._active&&n.suppressClick(),this.reset())}},Ua.prototype.touchcancel=function(){this.reset()},Ua.prototype.enable=function(H){this._enabled=!0,this._aroundCenter=!!H&&H.around==="center"},Ua.prototype.disable=function(){this._enabled=!1,this.reset()},Ua.prototype.isEnabled=function(){return this._enabled},Ua.prototype.isActive=function(){return this._active};function Da(ce,H,ve){for(var K=0;K<ce.length;K++)if(ce[K].identifier===ve)return H[K]}var Ja=.1;function yi(ce,H){return Math.log(ce/H)/Math.LN2}var fo=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.reset=function(){ce.prototype.reset.call(this),delete this._distance,delete this._startDistance},H.prototype._start=function(K){this._startDistance=this._distance=K[0].dist(K[1])},H.prototype._move=function(K,de){var Ae=this._distance;if(this._distance=K[0].dist(K[1]),!(!this._active&&Math.abs(yi(this._distance,this._startDistance))<Ja))return this._active=!0,{zoomDelta:yi(this._distance,Ae),pinchAround:de}},H}(Ua),Ii=25;function fa(ce,H){return ce.angleWith(H)*180/Math.PI}var ai=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.reset=function(){ce.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},H.prototype._start=function(K){this._startVector=this._vector=K[0].sub(K[1]),this._minDiameter=K[0].dist(K[1])},H.prototype._move=function(K,de){var Ae=this._vector;if(this._vector=K[0].sub(K[1]),!(!this._active&&this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:fa(this._vector,Ae),pinchAround:de}},H.prototype._isBelowThreshold=function(K){this._minDiameter=Math.min(this._minDiameter,K.mag());var de=Math.PI*this._minDiameter,Ae=Ii/de*360,Ce=fa(K,this._startVector);return Math.abs(Ce)<Ae},H}(Ua);function Wa(ce){return Math.abs(ce.y)>Math.abs(ce.x)}var Si=100,ui=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.reset=function(){ce.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},H.prototype._start=function(K){this._lastPoints=K,Wa(K[0].sub(K[1]))&&(this._valid=!1)},H.prototype._move=function(K,de,Ae){var Ce=K[0].sub(this._lastPoints[0]),Ye=K[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Ce,Ye,Ae.timeStamp),!!this._valid){this._lastPoints=K,this._active=!0;var lt=(Ce.y+Ye.y)/2,Tt=-.5;return{pitchDelta:lt*Tt}}},H.prototype.gestureBeginsVertically=function(K,de,Ae){if(this._valid!==void 0)return this._valid;var Ce=2,Ye=K.mag()>=Ce,lt=de.mag()>=Ce;if(!(!Ye&&!lt)){if(!Ye||!lt)return this._firstMove===void 0&&(this._firstMove=Ae),Ae-this._firstMove<Si?void 0:!1;var Tt=K.y>0==de.y>0;return Wa(K)&&Wa(de)&&Tt}},H}(Ua),io={panStep:100,bearingStep:15,pitchStep:10},Qi=function(){var H=io;this._panStep=H.panStep,this._bearingStep=H.bearingStep,this._pitchStep=H.pitchStep};Qi.prototype.reset=function(){this._active=!1},Qi.prototype.keydown=function(H){var ve=this;if(!(H.altKey||H.ctrlKey||H.metaKey)){var K=0,de=0,Ae=0,Ce=0,Ye=0;switch(H.keyCode){case 61:case 107:case 171:case 187:K=1;break;case 189:case 109:case 173:K=-1;break;case 37:H.shiftKey?de=-1:(H.preventDefault(),Ce=-1);break;case 39:H.shiftKey?de=1:(H.preventDefault(),Ce=1);break;case 38:H.shiftKey?Ae=1:(H.preventDefault(),Ye=-1);break;case 40:H.shiftKey?Ae=-1:(H.preventDefault(),Ye=1);break;default:return}return{cameraAnimation:function(lt){var Tt=lt.getZoom();lt.easeTo({duration:300,easeId:"keyboardHandler",easing:go,zoom:K?Math.round(Tt)+K*(H.shiftKey?2:1):Tt,bearing:lt.getBearing()+de*ve._bearingStep,pitch:lt.getPitch()+Ae*ve._pitchStep,offset:[-Ce*ve._panStep,-Ye*ve._panStep],center:lt.getCenter()},{originalEvent:H})}}}},Qi.prototype.enable=function(){this._enabled=!0},Qi.prototype.disable=function(){this._enabled=!1,this.reset()},Qi.prototype.isEnabled=function(){return this._enabled},Qi.prototype.isActive=function(){return this._active};function go(ce){return ce*(2-ce)}var Go=4.000244140625,Fo=1/100,Yo=1/450,Gi=2,Oi=function(H,ve){this._map=H,this._el=H.getCanvasContainer(),this._handler=ve,this._delta=0,this._defaultZoomRate=Fo,this._wheelZoomRate=Yo,e.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Oi.prototype.setZoomRate=function(H){this._defaultZoomRate=H},Oi.prototype.setWheelZoomRate=function(H){this._wheelZoomRate=H},Oi.prototype.isEnabled=function(){return!!this._enabled},Oi.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Oi.prototype.isZooming=function(){return!!this._zooming},Oi.prototype.enable=function(H){this.isEnabled()||(this._enabled=!0,this._aroundCenter=H&&H.around==="center")},Oi.prototype.disable=function(){!this.isEnabled()||(this._enabled=!1)},Oi.prototype.wheel=function(H){if(!!this.isEnabled()){var ve=H.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?H.deltaY*40:H.deltaY,K=e.browser.now(),de=K-(this._lastWheelEventTime||0);this._lastWheelEventTime=K,ve!==0&&ve%Go===0?this._type="wheel":ve!==0&&Math.abs(ve)<4?this._type="trackpad":de>400?(this._type=null,this._lastValue=ve,this._timeout=setTimeout(this._onTimeout,40,H)):this._type||(this._type=Math.abs(de*ve)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,ve+=this._lastValue)),H.shiftKey&&ve&&(ve=ve/4),this._type&&(this._lastWheelEvent=H,this._delta-=ve,this._active||this._start(H)),H.preventDefault()}},Oi.prototype._onTimeout=function(H){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(H)},Oi.prototype._start=function(H){if(!!this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var ve=n.mousePos(this._el,H);this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(ve)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Oi.prototype.renderFrame=function(){return this._onScrollFrame()},Oi.prototype._onScrollFrame=function(){var H=this;if(!!this._frameId&&(this._frameId=null,!!this.isActive())){var ve=this._map.transform;if(this._delta!==0){var K=this._type==="wheel"&&Math.abs(this._delta)>Go?this._wheelZoomRate:this._defaultZoomRate,de=Gi/(1+Math.exp(-Math.abs(this._delta*K)));this._delta<0&&de!==0&&(de=1/de);var Ae=typeof this._targetZoom=="number"?ve.zoomScale(this._targetZoom):ve.scale;this._targetZoom=Math.min(ve.maxZoom,Math.max(ve.minZoom,ve.scaleZoom(Ae*de))),this._type==="wheel"&&(this._startZoom=ve.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Ce=typeof this._targetZoom=="number"?this._targetZoom:ve.zoom,Ye=this._startZoom,lt=this._easing,Tt=!1,Yt;if(this._type==="wheel"&&Ye&&lt){var ir=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1),ur=lt(ir);Yt=e.number(Ye,Ce,ur),ir<1?this._frameId||(this._frameId=!0):Tt=!0}else Yt=Ce,Tt=!0;return this._active=!0,Tt&&(this._active=!1,this._finishTimeout=setTimeout(function(){H._zooming=!1,H._handler._triggerRenderFrame(),delete H._targetZoom,delete H._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Tt,zoomDelta:Yt-ve.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Oi.prototype._smoothOutEasing=function(H){var ve=e.ease;if(this._prevEase){var K=this._prevEase,de=(e.browser.now()-K.start)/K.duration,Ae=K.easing(de+.01)-K.easing(de),Ce=.27/Math.sqrt(Ae*Ae+1e-4)*.01,Ye=Math.sqrt(.27*.27-Ce*Ce);ve=e.bezier(Ce,Ye,.25,1)}return this._prevEase={start:e.browser.now(),duration:H,easing:ve},ve},Oi.prototype.reset=function(){this._active=!1};var za=function(H,ve){this._clickZoom=H,this._tapZoom=ve};za.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},za.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},za.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},za.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Xa=function(){this.reset()};Xa.prototype.reset=function(){this._active=!1},Xa.prototype.dblclick=function(H,ve){return H.preventDefault(),{cameraAnimation:function(K){K.easeTo({duration:300,zoom:K.getZoom()+(H.shiftKey?-1:1),around:K.unproject(ve)},{originalEvent:H})}}},Xa.prototype.enable=function(){this._enabled=!0},Xa.prototype.disable=function(){this._enabled=!1,this.reset()},Xa.prototype.isEnabled=function(){return this._enabled},Xa.prototype.isActive=function(){return this._active};var xo=function(){this._tap=new nn({numTouches:1,numTaps:1}),this.reset()};xo.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},xo.prototype.touchstart=function(H,ve,K){this._swipePoint||(this._tapTime&&H.timeStamp-this._tapTime>ln&&this.reset(),this._tapTime?K.length>0&&(this._swipePoint=ve[0],this._swipeTouch=K[0].identifier):this._tap.touchstart(H,ve,K))},xo.prototype.touchmove=function(H,ve,K){if(!this._tapTime)this._tap.touchmove(H,ve,K);else if(this._swipePoint){if(K[0].identifier!==this._swipeTouch)return;var de=ve[0],Ae=de.y-this._swipePoint.y;return this._swipePoint=de,H.preventDefault(),this._active=!0,{zoomDelta:Ae/128}}},xo.prototype.touchend=function(H,ve,K){if(this._tapTime)this._swipePoint&&K.length===0&&this.reset();else{var de=this._tap.touchend(H,ve,K);de&&(this._tapTime=H.timeStamp)}},xo.prototype.touchcancel=function(){this.reset()},xo.prototype.enable=function(){this._enabled=!0},xo.prototype.disable=function(){this._enabled=!1,this.reset()},xo.prototype.isEnabled=function(){return this._enabled},xo.prototype.isActive=function(){return this._active};var eo=function(H,ve,K){this._el=H,this._mousePan=ve,this._touchPan=K};eo.prototype.enable=function(H){this._inertiaOptions=H||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},eo.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},eo.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},eo.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Po=function(H,ve,K){this._pitchWithRotate=H.pitchWithRotate,this._mouseRotate=ve,this._mousePitch=K};Po.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Po.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Po.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Po.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Xi=function(H,ve,K,de){this._el=H,this._touchZoom=ve,this._touchRotate=K,this._tapDragZoom=de,this._rotationDisabled=!1,this._enabled=!0};Xi.prototype.enable=function(H){this._touchZoom.enable(H),this._rotationDisabled||this._touchRotate.enable(H),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Xi.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Xi.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Xi.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Xi.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Xi.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Wo=function(ce){return ce.zoom||ce.drag||ce.pitch||ce.rotate},ms=function(ce){function H(){ce.apply(this,arguments)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H}(e.Event);function Nl(ce){return ce.panDelta&&ce.panDelta.mag()||ce.zoomDelta||ce.bearingDelta||ce.pitchDelta}var Zi=function(H,ve){this._map=H,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Oe(H),this._bearingSnap=ve.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(ve),e.bindAll(["handleEvent","handleWindowEvent"],this);var K=this._el;this._listeners=[[K,"touchstart",{passive:!1}],[K,"touchmove",{passive:!1}],[K,"touchend",void 0],[K,"touchcancel",void 0],[K,"mousedown",void 0],[K,"mousemove",void 0],[K,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[K,"mouseover",void 0],[K,"mouseout",void 0],[K,"dblclick",void 0],[K,"click",void 0],[K,"keydown",{capture:!1}],[K,"keyup",void 0],[K,"wheel",{passive:!1}],[K,"contextmenu",void 0],[e.window,"blur",void 0]];for(var de=0,Ae=this._listeners;de<Ae.length;de+=1){var Ce=Ae[de],Ye=Ce[0],lt=Ce[1],Tt=Ce[2];n.addEventListener(Ye,lt,Ye===e.window.document?this.handleWindowEvent:this.handleEvent,Tt)}};Zi.prototype.destroy=function(){for(var H=0,ve=this._listeners;H<ve.length;H+=1){var K=ve[H],de=K[0],Ae=K[1],Ce=K[2];n.removeEventListener(de,Ae,de===e.window.document?this.handleWindowEvent:this.handleEvent,Ce)}},Zi.prototype._addDefaultHandlers=function(H){var ve=this._map,K=ve.getCanvasContainer();this._add("mapEvent",new Vt(ve,H));var de=ve.boxZoom=new Jt(ve,H);this._add("boxZoom",de);var Ae=new on,Ce=new Xa;ve.doubleClickZoom=new za(Ce,Ae),this._add("tapZoom",Ae),this._add("clickZoom",Ce);var Ye=new xo;this._add("tapDragZoom",Ye);var lt=ve.touchPitch=new ui;this._add("touchPitch",lt);var Tt=new oa(H),Yt=new Ea(H);ve.dragRotate=new Po(H,Tt,Yt),this._add("mouseRotate",Tt,["mousePitch"]),this._add("mousePitch",Yt,["mouseRotate"]);var ir=new ba(H),ur=new ua(H);ve.dragPan=new eo(K,ir,ur),this._add("mousePan",ir),this._add("touchPan",ur,["touchZoom","touchRotate"]);var Sr=new ai,Br=new fo;ve.touchZoomRotate=new Xi(K,Br,Sr,Ye),this._add("touchRotate",Sr,["touchPan","touchZoom"]),this._add("touchZoom",Br,["touchPan","touchRotate"]);var Or=ve.scrollZoom=new Oi(ve,this);this._add("scrollZoom",Or,["mousePan"]);var Fr=ve.keyboard=new Qi;this._add("keyboard",Fr),this._add("blockableMapEvent",new jt(ve));for(var jr=0,cn=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];jr<cn.length;jr+=1){var En=cn[jr];H.interactive&&H[En]&&ve[En].enable(H[En])}},Zi.prototype._add=function(H,ve,K){this._handlers.push({handlerName:H,handler:ve,allowed:K}),this._handlersById[H]=ve},Zi.prototype.stop=function(){if(!this._updatingCamera){for(var H=0,ve=this._handlers;H<ve.length;H+=1){var K=ve[H],de=K.handler;de.reset()}this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},Zi.prototype.isActive=function(){for(var H=0,ve=this._handlers;H<ve.length;H+=1){var K=ve[H],de=K.handler;if(de.isActive())return!0}return!1},Zi.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Zi.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Zi.prototype.isMoving=function(){return Boolean(Wo(this._eventsInProgress))||this.isZooming()},Zi.prototype._blockedByActive=function(H,ve,K){for(var de in H)if(de!==K&&(!ve||ve.indexOf(de)<0))return!0;return!1},Zi.prototype.handleWindowEvent=function(H){this.handleEvent(H,H.type+"Window")},Zi.prototype._getMapTouches=function(H){for(var ve=[],K=0,de=H;K<de.length;K+=1){var Ae=de[K],Ce=Ae.target;this._el.contains(Ce)&&ve.push(Ae)}return ve},Zi.prototype.handleEvent=function(H,ve){if(H.type==="blur"){this.stop();return}this._updatingCamera=!0;for(var K=H.type==="renderFrame"?void 0:H,de={needsRenderFrame:!1},Ae={},Ce={},Ye=H.touches?this._getMapTouches(H.touches):void 0,lt=Ye?n.touchPos(this._el,Ye):n.mousePos(this._el,H),Tt=0,Yt=this._handlers;Tt<Yt.length;Tt+=1){var ir=Yt[Tt],ur=ir.handlerName,Sr=ir.handler,Br=ir.allowed;if(!!Sr.isEnabled()){var Or=void 0;this._blockedByActive(Ce,Br,ur)?Sr.reset():Sr[ve||H.type]&&(Or=Sr[ve||H.type](H,lt,Ye),this.mergeHandlerResult(de,Ae,Or,ur,K),Or&&Or.needsRenderFrame&&this._triggerRenderFrame()),(Or||Sr.isActive())&&(Ce[ur]=Sr)}}var Fr={};for(var jr in this._previousActiveHandlers)Ce[jr]||(Fr[jr]=K);this._previousActiveHandlers=Ce,(Object.keys(Fr).length||Nl(de))&&(this._changes.push([de,Ae,Fr]),this._triggerRenderFrame()),(Object.keys(Ce).length||Nl(de))&&this._map._stop(!0),this._updatingCamera=!1;var cn=de.cameraAnimation;cn&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],cn(this._map))},Zi.prototype.mergeHandlerResult=function(H,ve,K,de,Ae){if(!!K){e.extend(H,K);var Ce={handlerName:de,originalEvent:K.originalEvent||Ae};K.zoomDelta!==void 0&&(ve.zoom=Ce),K.panDelta!==void 0&&(ve.drag=Ce),K.pitchDelta!==void 0&&(ve.pitch=Ce),K.bearingDelta!==void 0&&(ve.rotate=Ce)}},Zi.prototype._applyChanges=function(){for(var H={},ve={},K={},de=0,Ae=this._changes;de<Ae.length;de+=1){var Ce=Ae[de],Ye=Ce[0],lt=Ce[1],Tt=Ce[2];Ye.panDelta&&(H.panDelta=(H.panDelta||new e.Point(0,0))._add(Ye.panDelta)),Ye.zoomDelta&&(H.zoomDelta=(H.zoomDelta||0)+Ye.zoomDelta),Ye.bearingDelta&&(H.bearingDelta=(H.bearingDelta||0)+Ye.bearingDelta),Ye.pitchDelta&&(H.pitchDelta=(H.pitchDelta||0)+Ye.pitchDelta),Ye.around!==void 0&&(H.around=Ye.around),Ye.pinchAround!==void 0&&(H.pinchAround=Ye.pinchAround),Ye.noInertia&&(H.noInertia=Ye.noInertia),e.extend(ve,lt),e.extend(K,Tt)}this._updateMapTransform(H,ve,K),this._changes=[]},Zi.prototype._updateMapTransform=function(H,ve,K){var de=this._map,Ae=de.transform;if(!Nl(H))return this._fireEvents(ve,K);var Ce=H.panDelta,Ye=H.zoomDelta,lt=H.bearingDelta,Tt=H.pitchDelta,Yt=H.around,ir=H.pinchAround;ir!==void 0&&(Yt=ir),de._stop(!0),Yt=Yt||de.transform.centerPoint;var ur=Ae.pointLocation(Ce?Yt.sub(Ce):Yt);lt&&(Ae.bearing+=lt),Tt&&(Ae.pitch+=Tt),Ye&&(Ae.zoom+=Ye),Ae.setLocationAtPoint(ur,Yt),this._map._update(),H.noInertia||this._inertia.record(H),this._fireEvents(ve,K)},Zi.prototype._fireEvents=function(H,ve){var K=this,de=Wo(this._eventsInProgress),Ae=Wo(H),Ce={};for(var Ye in H){var lt=H[Ye],Tt=lt.originalEvent;this._eventsInProgress[Ye]||(Ce[Ye+"start"]=Tt),this._eventsInProgress[Ye]=H[Ye]}!de&&Ae&&this._fireEvent("movestart",Ae.originalEvent);for(var Yt in Ce)this._fireEvent(Yt,Ce[Yt]);H.rotate&&(this._bearingChanged=!0),Ae&&this._fireEvent("move",Ae.originalEvent);for(var ir in H){var ur=H[ir],Sr=ur.originalEvent;this._fireEvent(ir,Sr)}var Br={},Or;for(var Fr in this._eventsInProgress){var jr=this._eventsInProgress[Fr],cn=jr.handlerName,En=jr.originalEvent;this._handlersById[cn].isActive()||(delete this._eventsInProgress[Fr],Or=ve[cn]||En,Br[Fr+"end"]=Or)}for(var Fn in Br)this._fireEvent(Fn,Br[Fn]);var jn=Wo(this._eventsInProgress);if((de||Ae)&&!jn){this._updatingCamera=!0;var qn=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Qn=function(ca){return ca!==0&&-K._bearingSnap<ca&&ca<K._bearingSnap};qn?(Qn(qn.bearing||this._map.getBearing())&&(qn.bearing=0),this._map.easeTo(qn,{originalEvent:Or})):(this._map.fire(new e.Event("moveend",{originalEvent:Or})),Qn(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},Zi.prototype._fireEvent=function(H,ve){this._map.fire(new e.Event(H,ve?{originalEvent:ve}:{}))},Zi.prototype._triggerRenderFrame=function(){var H=this;this._frameId===void 0&&(this._frameId=this._map._requestRenderFrame(function(ve){delete H._frameId,H.handleEvent(new ms("renderFrame",{timeStamp:ve})),H._applyChanges()}))};var $u=function(ce){function H(ve,K){ce.call(this),this._moving=!1,this._zooming=!1,this.transform=ve,this._bearingSnap=K.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.getCenter=function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)},H.prototype.setCenter=function(K,de){return this.jumpTo({center:K},de)},H.prototype.panBy=function(K,de,Ae){return K=e.Point.convert(K).mult(-1),this.panTo(this.transform.center,e.extend({offset:K},de),Ae)},H.prototype.panTo=function(K,de,Ae){return this.easeTo(e.extend({center:K},de),Ae)},H.prototype.getZoom=function(){return this.transform.zoom},H.prototype.setZoom=function(K,de){return this.jumpTo({zoom:K},de),this},H.prototype.zoomTo=function(K,de,Ae){return this.easeTo(e.extend({zoom:K},de),Ae)},H.prototype.zoomIn=function(K,de){return this.zoomTo(this.getZoom()+1,K,de),this},H.prototype.zoomOut=function(K,de){return this.zoomTo(this.getZoom()-1,K,de),this},H.prototype.getBearing=function(){return this.transform.bearing},H.prototype.setBearing=function(K,de){return this.jumpTo({bearing:K},de),this},H.prototype.getPadding=function(){return this.transform.padding},H.prototype.setPadding=function(K,de){return this.jumpTo({padding:K},de),this},H.prototype.rotateTo=function(K,de,Ae){return this.easeTo(e.extend({bearing:K},de),Ae)},H.prototype.resetNorth=function(K,de){return this.rotateTo(0,e.extend({duration:1e3},K),de),this},H.prototype.resetNorthPitch=function(K,de){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},K),de),this},H.prototype.snapToNorth=function(K,de){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(K,de):this},H.prototype.getPitch=function(){return this.transform.pitch},H.prototype.setPitch=function(K,de){return this.jumpTo({pitch:K},de),this},H.prototype.cameraForBounds=function(K,de){return K=e.LngLatBounds.convert(K),this._cameraForBoxAndBearing(K.getNorthWest(),K.getSouthEast(),0,de)},H.prototype._cameraForBoxAndBearing=function(K,de,Ae,Ce){var Ye={top:0,bottom:0,right:0,left:0};if(Ce=e.extend({padding:Ye,offset:[0,0],maxZoom:this.transform.maxZoom},Ce),typeof Ce.padding=="number"){var lt=Ce.padding;Ce.padding={top:lt,bottom:lt,right:lt,left:lt}}Ce.padding=e.extend(Ye,Ce.padding);var Tt=this.transform,Yt=Tt.padding,ir=Tt.project(e.LngLat.convert(K)),ur=Tt.project(e.LngLat.convert(de)),Sr=ir.rotate(-Ae*Math.PI/180),Br=ur.rotate(-Ae*Math.PI/180),Or=new e.Point(Math.max(Sr.x,Br.x),Math.max(Sr.y,Br.y)),Fr=new e.Point(Math.min(Sr.x,Br.x),Math.min(Sr.y,Br.y)),jr=Or.sub(Fr),cn=(Tt.width-(Yt.left+Yt.right+Ce.padding.left+Ce.padding.right))/jr.x,En=(Tt.height-(Yt.top+Yt.bottom+Ce.padding.top+Ce.padding.bottom))/jr.y;if(En<0||cn<0){e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");return}var Fn=Math.min(Tt.scaleZoom(Tt.scale*Math.min(cn,En)),Ce.maxZoom),jn=e.Point.convert(Ce.offset),qn=(Ce.padding.left-Ce.padding.right)/2,Qn=(Ce.padding.top-Ce.padding.bottom)/2,ca=new e.Point(jn.x+qn,jn.y+Qn),xa=ca.mult(Tt.scale/Tt.zoomScale(Fn)),ga=Tt.unproject(ir.add(ur).div(2).sub(xa));return{center:ga,zoom:Fn,bearing:Ae}},H.prototype.fitBounds=function(K,de,Ae){return this._fitInternal(this.cameraForBounds(K,de),de,Ae)},H.prototype.fitScreenCoordinates=function(K,de,Ae,Ce,Ye){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert(K)),this.transform.pointLocation(e.Point.convert(de)),Ae,Ce),Ce,Ye)},H.prototype._fitInternal=function(K,de,Ae){return K?(de=e.extend(K,de),delete de.padding,de.linear?this.easeTo(de,Ae):this.flyTo(de,Ae)):this},H.prototype.jumpTo=function(K,de){this.stop();var Ae=this.transform,Ce=!1,Ye=!1,lt=!1;return"zoom"in K&&Ae.zoom!==+K.zoom&&(Ce=!0,Ae.zoom=+K.zoom),K.center!==void 0&&(Ae.center=e.LngLat.convert(K.center)),"bearing"in K&&Ae.bearing!==+K.bearing&&(Ye=!0,Ae.bearing=+K.bearing),"pitch"in K&&Ae.pitch!==+K.pitch&&(lt=!0,Ae.pitch=+K.pitch),K.padding!=null&&!Ae.isPaddingEqual(K.padding)&&(Ae.padding=K.padding),this.fire(new e.Event("movestart",de)).fire(new e.Event("move",de)),Ce&&this.fire(new e.Event("zoomstart",de)).fire(new e.Event("zoom",de)).fire(new e.Event("zoomend",de)),Ye&&this.fire(new e.Event("rotatestart",de)).fire(new e.Event("rotate",de)).fire(new e.Event("rotateend",de)),lt&&this.fire(new e.Event("pitchstart",de)).fire(new e.Event("pitch",de)).fire(new e.Event("pitchend",de)),this.fire(new e.Event("moveend",de))},H.prototype.easeTo=function(K,de){var Ae=this;this._stop(!1,K.easeId),K=e.extend({offset:[0,0],duration:500,easing:e.ease},K),(K.animate===!1||!K.essential&&e.browser.prefersReducedMotion)&&(K.duration=0);var Ce=this.transform,Ye=this.getZoom(),lt=this.getBearing(),Tt=this.getPitch(),Yt=this.getPadding(),ir="zoom"in K?+K.zoom:Ye,ur="bearing"in K?this._normalizeBearing(K.bearing,lt):lt,Sr="pitch"in K?+K.pitch:Tt,Br="padding"in K?K.padding:Ce.padding,Or=e.Point.convert(K.offset),Fr=Ce.centerPoint.add(Or),jr=Ce.pointLocation(Fr),cn=e.LngLat.convert(K.center||jr);this._normalizeCenter(cn);var En=Ce.project(jr),Fn=Ce.project(cn).sub(En),jn=Ce.zoomScale(ir-Ye),qn,Qn;K.around&&(qn=e.LngLat.convert(K.around),Qn=Ce.locationPoint(qn));var ca={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ir!==Ye,this._rotating=this._rotating||lt!==ur,this._pitching=this._pitching||Sr!==Tt,this._padding=!Ce.isPaddingEqual(Br),this._easeId=K.easeId,this._prepareEase(de,K.noMoveStart,ca),clearTimeout(this._easeEndTimeoutID),this._ease(function(xa){if(Ae._zooming&&(Ce.zoom=e.number(Ye,ir,xa)),Ae._rotating&&(Ce.bearing=e.number(lt,ur,xa)),Ae._pitching&&(Ce.pitch=e.number(Tt,Sr,xa)),Ae._padding&&(Ce.interpolatePadding(Yt,Br,xa),Fr=Ce.centerPoint.add(Or)),qn)Ce.setLocationAtPoint(qn,Qn);else{var ga=Ce.zoomScale(Ce.zoom-Ye),Ma=ir>Ye?Math.min(2,jn):Math.max(.5,jn),La=Math.pow(Ma,1-xa),Ha=Ce.unproject(En.add(Fn.mult(xa*La)).mult(ga));Ce.setLocationAtPoint(Ce.renderWorldCopies?Ha.wrap():Ha,Fr)}Ae._fireMoveEvents(de)},function(xa){Ae._afterEase(de,xa)},K),this},H.prototype._prepareEase=function(K,de,Ae){Ae===void 0&&(Ae={}),this._moving=!0,!de&&!Ae.moving&&this.fire(new e.Event("movestart",K)),this._zooming&&!Ae.zooming&&this.fire(new e.Event("zoomstart",K)),this._rotating&&!Ae.rotating&&this.fire(new e.Event("rotatestart",K)),this._pitching&&!Ae.pitching&&this.fire(new e.Event("pitchstart",K))},H.prototype._fireMoveEvents=function(K){this.fire(new e.Event("move",K)),this._zooming&&this.fire(new e.Event("zoom",K)),this._rotating&&this.fire(new e.Event("rotate",K)),this._pitching&&this.fire(new e.Event("pitch",K))},H.prototype._afterEase=function(K,de){if(!(this._easeId&&de&&this._easeId===de)){delete this._easeId;var Ae=this._zooming,Ce=this._rotating,Ye=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,Ae&&this.fire(new e.Event("zoomend",K)),Ce&&this.fire(new e.Event("rotateend",K)),Ye&&this.fire(new e.Event("pitchend",K)),this.fire(new e.Event("moveend",K))}},H.prototype.flyTo=function(K,de){var Ae=this;if(!K.essential&&e.browser.prefersReducedMotion){var Ce=e.pick(K,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ce,de)}this.stop(),K=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},K);var Ye=this.transform,lt=this.getZoom(),Tt=this.getBearing(),Yt=this.getPitch(),ir=this.getPadding(),ur="zoom"in K?e.clamp(+K.zoom,Ye.minZoom,Ye.maxZoom):lt,Sr="bearing"in K?this._normalizeBearing(K.bearing,Tt):Tt,Br="pitch"in K?+K.pitch:Yt,Or="padding"in K?K.padding:Ye.padding,Fr=Ye.zoomScale(ur-lt),jr=e.Point.convert(K.offset),cn=Ye.centerPoint.add(jr),En=Ye.pointLocation(cn),Fn=e.LngLat.convert(K.center||En);this._normalizeCenter(Fn);var jn=Ye.project(En),qn=Ye.project(Fn).sub(jn),Qn=K.curve,ca=Math.max(Ye.width,Ye.height),xa=ca/Fr,ga=qn.mag();if("minZoom"in K){var Ma=e.clamp(Math.min(K.minZoom,lt,ur),Ye.minZoom,Ye.maxZoom),La=ca/Ye.zoomScale(Ma-lt);Qn=Math.sqrt(La/ga*2)}var Ha=Qn*Qn;function ni(ii){var wi=(xa*xa-ca*ca+(ii?-1:1)*Ha*Ha*ga*ga)/(2*(ii?xa:ca)*Ha*ga);return Math.log(Math.sqrt(wi*wi+1)-wi)}function Li(ii){return(Math.exp(ii)-Math.exp(-ii))/2}function fi(ii){return(Math.exp(ii)+Math.exp(-ii))/2}function pi(ii){return Li(ii)/fi(ii)}var Na=ni(0),Pi=function(ii){return fi(Na)/fi(Na+Qn*ii)},zi=function(ii){return ca*((fi(Na)*pi(Na+Qn*ii)-Li(Na))/Ha)/ga},Ni=(ni(1)-Na)/Qn;if(Math.abs(ga)<1e-6||!isFinite(Ni)){if(Math.abs(ca-xa)<1e-6)return this.easeTo(K,de);var _i=xa<ca?-1:1;Ni=Math.abs(Math.log(xa/ca))/Qn,zi=function(){return 0},Pi=function(ii){return Math.exp(_i*Qn*ii)}}if("duration"in K)K.duration=+K.duration;else{var ji="screenSpeed"in K?+K.screenSpeed/Qn:+K.speed;K.duration=1e3*Ni/ji}return K.maxDuration&&K.duration>K.maxDuration&&(K.duration=0),this._zooming=!0,this._rotating=Tt!==Sr,this._pitching=Br!==Yt,this._padding=!Ye.isPaddingEqual(Or),this._prepareEase(de,!1),this._ease(function(ii){var wi=ii*Ni,_o=1/Pi(wi);Ye.zoom=ii===1?ur:lt+Ye.scaleZoom(_o),Ae._rotating&&(Ye.bearing=e.number(Tt,Sr,ii)),Ae._pitching&&(Ye.pitch=e.number(Yt,Br,ii)),Ae._padding&&(Ye.interpolatePadding(ir,Or,ii),cn=Ye.centerPoint.add(jr));var Bo=ii===1?Fn:Ye.unproject(jn.add(qn.mult(zi(wi))).mult(_o));Ye.setLocationAtPoint(Ye.renderWorldCopies?Bo.wrap():Bo,cn),Ae._fireMoveEvents(de)},function(){return Ae._afterEase(de)},K),this},H.prototype.isEasing=function(){return!!this._easeFrameId},H.prototype.stop=function(){return this._stop()},H.prototype._stop=function(K,de){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var Ae=this._onEaseEnd;delete this._onEaseEnd,Ae.call(this,de)}if(!K){var Ce=this.handlers;Ce&&Ce.stop()}return this},H.prototype._ease=function(K,de,Ae){Ae.animate===!1||Ae.duration===0?(K(1),de()):(this._easeStart=e.browser.now(),this._easeOptions=Ae,this._onEaseFrame=K,this._onEaseEnd=de,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},H.prototype._renderFrameCallback=function(){var K=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(K)),K<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},H.prototype._normalizeBearing=function(K,de){K=e.wrap(K,-180,180);var Ae=Math.abs(K-de);return Math.abs(K-360-de)<Ae&&(K-=360),Math.abs(K+360-de)<Ae&&(K+=360),K},H.prototype._normalizeCenter=function(K){var de=this.transform;if(!(!de.renderWorldCopies||de.lngRange)){var Ae=K.lng-de.center.lng;K.lng+=Ae>180?-360:Ae<-180?360:0}},H}(e.Evented),Tl=function(H){H===void 0&&(H={}),this.options=H,e.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Tl.prototype.getDefaultPosition=function(){return"bottom-right"},Tl.prototype.onAdd=function(H){var ve=this.options&&this.options.compact;return this._map=H,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=n.create("div","mapboxgl-ctrl-attrib-inner",this._container),ve&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),ve===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Tl.prototype.onRemove=function(){n.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Tl.prototype._updateEditLink=function(){var H=this._editLink;H||(H=this._editLink=this._container.querySelector(".mapbox-improve-map"));var ve=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(H){var K=ve.reduce(function(de,Ae,Ce){return Ae.value&&(de+=Ae.key+"="+Ae.value+(Ce<ve.length-1?"&":"")),de},"?");H.href=e.config.FEEDBACK_URL+"/"+K+(this._map._hash?this._map._hash.getHashString(!0):""),H.rel="noopener nofollow"}},Tl.prototype._updateData=function(H){H&&(H.sourceDataType==="metadata"||H.dataType==="style")&&(this._updateAttributions(),this._updateEditLink())},Tl.prototype._updateAttributions=function(){if(!!this._map.style){var H=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?H=H.concat(this.options.customAttribution.map(function(lt){return typeof lt!="string"?"":lt})):typeof this.options.customAttribution=="string"&&H.push(this.options.customAttribution)),this._map.style.stylesheet){var ve=this._map.style.stylesheet;this.styleOwner=ve.owner,this.styleId=ve.id}var K=this._map.style.sourceCaches;for(var de in K){var Ae=K[de];if(Ae.used){var Ce=Ae.getSource();Ce.attribution&&H.indexOf(Ce.attribution)<0&&H.push(Ce.attribution)}}H.sort(function(lt,Tt){return lt.length-Tt.length}),H=H.filter(function(lt,Tt){for(var Yt=Tt+1;Yt<H.length;Yt++)if(H[Yt].indexOf(lt)>=0)return!1;return!0});var Ye=H.join(" | ");Ye!==this._attribHTML&&(this._attribHTML=Ye,H.length?(this._innerContainer.innerHTML=Ye,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Tl.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Bi=function(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)};Bi.prototype.onAdd=function(H){this._map=H,this._container=n.create("div","mapboxgl-ctrl");var ve=n.create("a","mapboxgl-ctrl-logo");return ve.target="_blank",ve.rel="noopener nofollow",ve.href="https://www.mapbox.com/",ve.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),ve.setAttribute("rel","noopener nofollow"),this._container.appendChild(ve),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Bi.prototype.onRemove=function(){n.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Bi.prototype.getDefaultPosition=function(){return"bottom-left"},Bi.prototype._updateLogo=function(H){(!H||H.sourceDataType==="metadata")&&(this._container.style.display=this._logoRequired()?"block":"none")},Bi.prototype._logoRequired=function(){if(!!this._map.style){var H=this._map.style.sourceCaches;for(var ve in H){var K=H[ve].getSource();if(K.mapbox_logo)return!0}return!1}},Bi.prototype._updateCompact=function(){var H=this._container.children;if(H.length){var ve=H[0];this._map.getCanvasContainer().offsetWidth<250?ve.classList.add("mapboxgl-compact"):ve.classList.remove("mapboxgl-compact")}};var Do=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Do.prototype.add=function(H){var ve=++this._id,K=this._queue;return K.push({callback:H,id:ve,cancelled:!1}),ve},Do.prototype.remove=function(H){for(var ve=this._currentlyRunning,K=ve?this._queue.concat(ve):this._queue,de=0,Ae=K;de<Ae.length;de+=1){var Ce=Ae[de];if(Ce.id===H){Ce.cancelled=!0;return}}},Do.prototype.run=function(H){H===void 0&&(H=0);var ve=this._currentlyRunning=this._queue;this._queue=[];for(var K=0,de=ve;K<de.length;K+=1){var Ae=de[K];if(!Ae.cancelled&&(Ae.callback(H),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Do.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var jc={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Af=e.window.HTMLImageElement,vf=e.window.HTMLElement,Fu=e.window.ImageBitmap,qu=-2,Mf=22,Fs=0,Bu=60,Qf={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:qu,maxZoom:Mf,minPitch:Fs,maxPitch:Bu,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},$f=function(ce){function H(K){var de=this;if(K=e.extend({},Qf,K),K.minZoom!=null&&K.maxZoom!=null&&K.minZoom>K.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(K.minPitch!=null&&K.maxPitch!=null&&K.minPitch>K.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(K.minPitch!=null&&K.minPitch<Fs)throw new Error("minPitch must be greater than or equal to "+Fs);if(K.maxPitch!=null&&K.maxPitch>Bu)throw new Error("maxPitch must be less than or equal to "+Bu);var Ae=new bi(K.minZoom,K.maxZoom,K.minPitch,K.maxPitch,K.renderWorldCopies);if(ce.call(this,Ae,K),this._interactive=K.interactive,this._maxTileCacheSize=K.maxTileCacheSize,this._failIfMajorPerformanceCaveat=K.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=K.preserveDrawingBuffer,this._antialias=K.antialias,this._trackResize=K.trackResize,this._bearingSnap=K.bearingSnap,this._refreshExpiredTiles=K.refreshExpiredTiles,this._fadeDuration=K.fadeDuration,this._crossSourceCollisions=K.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=K.collectResourceTiming,this._renderTaskQueue=new Do,this._controls=[],this._mapId=e.uniqueId(),this._locale=e.extend({},jc,K.locale),this._requestManager=new e.RequestManager(K.transformRequest,K.accessToken),typeof K.container=="string"){if(this._container=e.window.document.getElementById(K.container),!this._container)throw new Error("Container '"+K.container+"' not found.")}else if(K.container instanceof vf)this._container=K.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");if(K.maxBounds&&this.setMaxBounds(K.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return de._update(!1)}),this.on("moveend",function(){return de._update(!1)}),this.on("zoom",function(){return de._update(!0)}),typeof e.window<"u"&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new Zi(this,K);var Ce=typeof K.hash=="string"&&K.hash||void 0;this._hash=K.hash&&new po(Ce).addTo(this),(!this._hash||!this._hash._onHashChange())&&(this.jumpTo({center:K.center,zoom:K.zoom,bearing:K.bearing,pitch:K.pitch}),K.bounds&&(this.resize(),this.fitBounds(K.bounds,e.extend({},K.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=K.localIdeographFontFamily,K.style&&this.setStyle(K.style,{localIdeographFontFamily:K.localIdeographFontFamily}),K.attributionControl&&this.addControl(new Tl({customAttribution:K.customAttribution})),this.addControl(new Bi,K.logoPosition),this.on("style.load",function(){de.transform.unmodified&&de.jumpTo(de.style.stylesheet)}),this.on("data",function(Ye){de._update(Ye.dataType==="style"),de.fire(new e.Event(Ye.dataType+"data",Ye))}),this.on("dataloading",function(Ye){de.fire(new e.Event(Ye.dataType+"dataloading",Ye))})}ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H;var ve={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return H.prototype._getMapId=function(){return this._mapId},H.prototype.addControl=function(de,Ae){if(Ae===void 0&&de.getDefaultPosition&&(Ae=de.getDefaultPosition()),Ae===void 0&&(Ae="top-right"),!de||!de.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Ce=de.onAdd(this);this._controls.push(de);var Ye=this._controlPositions[Ae];return Ae.indexOf("bottom")!==-1?Ye.insertBefore(Ce,Ye.firstChild):Ye.appendChild(Ce),this},H.prototype.removeControl=function(de){if(!de||!de.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var Ae=this._controls.indexOf(de);return Ae>-1&&this._controls.splice(Ae,1),de.onRemove(this),this},H.prototype.resize=function(de){var Ae=this._containerDimensions(),Ce=Ae[0],Ye=Ae[1];this._resizeCanvas(Ce,Ye),this.transform.resize(Ce,Ye),this.painter.resize(Ce,Ye);var lt=!this._moving;return lt&&(this.stop(),this.fire(new e.Event("movestart",de)).fire(new e.Event("move",de))),this.fire(new e.Event("resize",de)),lt&&this.fire(new e.Event("moveend",de)),this},H.prototype.getBounds=function(){return this.transform.getBounds()},H.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},H.prototype.setMaxBounds=function(de){return this.transform.setMaxBounds(e.LngLatBounds.convert(de)),this._update()},H.prototype.setMinZoom=function(de){if(de=de??qu,de>=qu&&de<=this.transform.maxZoom)return this.transform.minZoom=de,this._update(),this.getZoom()<de&&this.setZoom(de),this;throw new Error("minZoom must be between "+qu+" and the current maxZoom, inclusive")},H.prototype.getMinZoom=function(){return this.transform.minZoom},H.prototype.setMaxZoom=function(de){if(de=de??Mf,de>=this.transform.minZoom)return this.transform.maxZoom=de,this._update(),this.getZoom()>de&&this.setZoom(de),this;throw new Error("maxZoom must be greater than the current minZoom")},H.prototype.getMaxZoom=function(){return this.transform.maxZoom},H.prototype.setMinPitch=function(de){if(de=de??Fs,de<Fs)throw new Error("minPitch must be greater than or equal to "+Fs);if(de>=Fs&&de<=this.transform.maxPitch)return this.transform.minPitch=de,this._update(),this.getPitch()<de&&this.setPitch(de),this;throw new Error("minPitch must be between "+Fs+" and the current maxPitch, inclusive")},H.prototype.getMinPitch=function(){return this.transform.minPitch},H.prototype.setMaxPitch=function(de){if(de=de??Bu,de>Bu)throw new Error("maxPitch must be less than or equal to "+Bu);if(de>=this.transform.minPitch)return this.transform.maxPitch=de,this._update(),this.getPitch()>de&&this.setPitch(de),this;throw new Error("maxPitch must be greater than the current minPitch")},H.prototype.getMaxPitch=function(){return this.transform.maxPitch},H.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},H.prototype.setRenderWorldCopies=function(de){return this.transform.renderWorldCopies=de,this._update()},H.prototype.project=function(de){return this.transform.locationPoint(e.LngLat.convert(de))},H.prototype.unproject=function(de){return this.transform.pointLocation(e.Point.convert(de))},H.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},H.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},H.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},H.prototype._createDelegatedListener=function(de,Ae,Ce){var Ye=this,lt;if(de==="mouseenter"||de==="mouseover"){var Tt=!1,Yt=function(Fr){var jr=Ye.getLayer(Ae)?Ye.queryRenderedFeatures(Fr.point,{layers:[Ae]}):[];jr.length?Tt||(Tt=!0,Ce.call(Ye,new xt(de,Ye,Fr.originalEvent,{features:jr}))):Tt=!1},ir=function(){Tt=!1};return{layer:Ae,listener:Ce,delegates:{mousemove:Yt,mouseout:ir}}}else if(de==="mouseleave"||de==="mouseout"){var ur=!1,Sr=function(Fr){var jr=Ye.getLayer(Ae)?Ye.queryRenderedFeatures(Fr.point,{layers:[Ae]}):[];jr.length?ur=!0:ur&&(ur=!1,Ce.call(Ye,new xt(de,Ye,Fr.originalEvent)))},Br=function(Fr){ur&&(ur=!1,Ce.call(Ye,new xt(de,Ye,Fr.originalEvent)))};return{layer:Ae,listener:Ce,delegates:{mousemove:Sr,mouseout:Br}}}else{var Or=function(Fr){var jr=Ye.getLayer(Ae)?Ye.queryRenderedFeatures(Fr.point,{layers:[Ae]}):[];jr.length&&(Fr.features=jr,Ce.call(Ye,Fr),delete Fr.features)};return{layer:Ae,listener:Ce,delegates:(lt={},lt[de]=Or,lt)}}},H.prototype.on=function(de,Ae,Ce){if(Ce===void 0)return ce.prototype.on.call(this,de,Ae);var Ye=this._createDelegatedListener(de,Ae,Ce);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[de]=this._delegatedListeners[de]||[],this._delegatedListeners[de].push(Ye);for(var lt in Ye.delegates)this.on(lt,Ye.delegates[lt]);return this},H.prototype.once=function(de,Ae,Ce){if(Ce===void 0)return ce.prototype.once.call(this,de,Ae);var Ye=this._createDelegatedListener(de,Ae,Ce);for(var lt in Ye.delegates)this.once(lt,Ye.delegates[lt]);return this},H.prototype.off=function(de,Ae,Ce){var Ye=this;if(Ce===void 0)return ce.prototype.off.call(this,de,Ae);var lt=function(Tt){for(var Yt=Tt[de],ir=0;ir<Yt.length;ir++){var ur=Yt[ir];if(ur.layer===Ae&&ur.listener===Ce){for(var Sr in ur.delegates)Ye.off(Sr,ur.delegates[Sr]);return Yt.splice(ir,1),Ye}}};return this._delegatedListeners&&this._delegatedListeners[de]&&lt(this._delegatedListeners),this},H.prototype.queryRenderedFeatures=function(de,Ae){if(!this.style)return[];Ae===void 0&&de!==void 0&&!(de instanceof e.Point)&&!Array.isArray(de)&&(Ae=de,de=void 0),Ae=Ae||{},de=de||[[0,0],[this.transform.width,this.transform.height]];var Ce;if(de instanceof e.Point||typeof de[0]=="number")Ce=[e.Point.convert(de)];else{var Ye=e.Point.convert(de[0]),lt=e.Point.convert(de[1]);Ce=[Ye,new e.Point(lt.x,Ye.y),lt,new e.Point(Ye.x,lt.y),Ye]}return this.style.queryRenderedFeatures(Ce,Ae,this.transform)},H.prototype.querySourceFeatures=function(de,Ae){return this.style.querySourceFeatures(de,Ae)},H.prototype.setStyle=function(de,Ae){return Ae=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},Ae),Ae.diff!==!1&&Ae.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&de?(this._diffStyle(de,Ae),this):(this._localIdeographFontFamily=Ae.localIdeographFontFamily,this._updateStyle(de,Ae))},H.prototype._getUIString=function(de){var Ae=this._locale[de];if(Ae==null)throw new Error("Missing UI string '"+de+"'");return Ae},H.prototype._updateStyle=function(de,Ae){if(this.style&&(this.style.setEventedParent(null),this.style._remove()),de)this.style=new Zo(this,Ae||{});else return delete this.style,this;return this.style.setEventedParent(this,{style:this.style}),typeof de=="string"?this.style.loadURL(de):this.style.loadJSON(de),this},H.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Zo(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},H.prototype._diffStyle=function(de,Ae){var Ce=this;if(typeof de=="string"){var Ye=this._requestManager.normalizeStyleURL(de),lt=this._requestManager.transformRequest(Ye,e.ResourceType.Style);e.getJSON(lt,function(Tt,Yt){Tt?Ce.fire(new e.ErrorEvent(Tt)):Yt&&Ce._updateDiff(Yt,Ae)})}else typeof de=="object"&&this._updateDiff(de,Ae)},H.prototype._updateDiff=function(de,Ae){try{this.style.setState(de)&&this._update(!0)}catch(Ce){e.warnOnce("Unable to perform style diff: "+(Ce.message||Ce.error||Ce)+".  Rebuilding the style from scratch."),this._updateStyle(de,Ae)}},H.prototype.getStyle=function(){if(this.style)return this.style.serialize()},H.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")},H.prototype.addSource=function(de,Ae){return this._lazyInitEmptyStyle(),this.style.addSource(de,Ae),this._update(!0)},H.prototype.isSourceLoaded=function(de){var Ae=this.style&&this.style.sourceCaches[de];if(Ae===void 0){this.fire(new e.ErrorEvent(new Error("There is no source with ID '"+de+"'")));return}return Ae.loaded()},H.prototype.areTilesLoaded=function(){var de=this.style&&this.style.sourceCaches;for(var Ae in de){var Ce=de[Ae],Ye=Ce._tiles;for(var lt in Ye){var Tt=Ye[lt];if(!(Tt.state==="loaded"||Tt.state==="errored"))return!1}}return!0},H.prototype.addSourceType=function(de,Ae,Ce){return this._lazyInitEmptyStyle(),this.style.addSourceType(de,Ae,Ce)},H.prototype.removeSource=function(de){return this.style.removeSource(de),this._update(!0)},H.prototype.getSource=function(de){return this.style.getSource(de)},H.prototype.addImage=function(de,Ae,Ce){Ce===void 0&&(Ce={});var Ye=Ce.pixelRatio;Ye===void 0&&(Ye=1);var lt=Ce.sdf;lt===void 0&&(lt=!1);var Tt=Ce.stretchX,Yt=Ce.stretchY,ir=Ce.content;this._lazyInitEmptyStyle();var ur=0;if(Ae instanceof Af||Fu&&Ae instanceof Fu){var Sr=e.browser.getImageData(Ae),Br=Sr.width,Or=Sr.height,Fr=Sr.data;this.style.addImage(de,{data:new e.RGBAImage({width:Br,height:Or},Fr),pixelRatio:Ye,stretchX:Tt,stretchY:Yt,content:ir,sdf:lt,version:ur})}else{if(Ae.width===void 0||Ae.height===void 0)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var jr=Ae.width,cn=Ae.height,En=Ae.data,Fn=Ae;this.style.addImage(de,{data:new e.RGBAImage({width:jr,height:cn},new Uint8Array(En)),pixelRatio:Ye,stretchX:Tt,stretchY:Yt,content:ir,sdf:lt,version:ur,userImage:Fn}),Fn.onAdd&&Fn.onAdd(this,de)}},H.prototype.updateImage=function(de,Ae){var Ce=this.style.getImage(de);if(!Ce)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var Ye=Ae instanceof Af||Fu&&Ae instanceof Fu?e.browser.getImageData(Ae):Ae,lt=Ye.width,Tt=Ye.height,Yt=Ye.data;if(lt===void 0||Tt===void 0)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(lt!==Ce.data.width||Tt!==Ce.data.height)return this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var ir=!(Ae instanceof Af||Fu&&Ae instanceof Fu);Ce.data.replace(Yt,ir),this.style.updateImage(de,Ce)},H.prototype.hasImage=function(de){return de?!!this.style.getImage(de):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)},H.prototype.removeImage=function(de){this.style.removeImage(de)},H.prototype.loadImage=function(de,Ae){e.getImage(this._requestManager.transformRequest(de,e.ResourceType.Image),Ae)},H.prototype.listImages=function(){return this.style.listImages()},H.prototype.addLayer=function(de,Ae){return this._lazyInitEmptyStyle(),this.style.addLayer(de,Ae),this._update(!0)},H.prototype.moveLayer=function(de,Ae){return this.style.moveLayer(de,Ae),this._update(!0)},H.prototype.removeLayer=function(de){return this.style.removeLayer(de),this._update(!0)},H.prototype.getLayer=function(de){return this.style.getLayer(de)},H.prototype.setLayerZoomRange=function(de,Ae,Ce){return this.style.setLayerZoomRange(de,Ae,Ce),this._update(!0)},H.prototype.setFilter=function(de,Ae,Ce){return Ce===void 0&&(Ce={}),this.style.setFilter(de,Ae,Ce),this._update(!0)},H.prototype.getFilter=function(de){return this.style.getFilter(de)},H.prototype.setPaintProperty=function(de,Ae,Ce,Ye){return Ye===void 0&&(Ye={}),this.style.setPaintProperty(de,Ae,Ce,Ye),this._update(!0)},H.prototype.getPaintProperty=function(de,Ae){return this.style.getPaintProperty(de,Ae)},H.prototype.setLayoutProperty=function(de,Ae,Ce,Ye){return Ye===void 0&&(Ye={}),this.style.setLayoutProperty(de,Ae,Ce,Ye),this._update(!0)},H.prototype.getLayoutProperty=function(de,Ae){return this.style.getLayoutProperty(de,Ae)},H.prototype.setLight=function(de,Ae){return Ae===void 0&&(Ae={}),this._lazyInitEmptyStyle(),this.style.setLight(de,Ae),this._update(!0)},H.prototype.getLight=function(){return this.style.getLight()},H.prototype.setFeatureState=function(de,Ae){return this.style.setFeatureState(de,Ae),this._update()},H.prototype.removeFeatureState=function(de,Ae){return this.style.removeFeatureState(de,Ae),this._update()},H.prototype.getFeatureState=function(de){return this.style.getFeatureState(de)},H.prototype.getContainer=function(){return this._container},H.prototype.getCanvasContainer=function(){return this._canvasContainer},H.prototype.getCanvas=function(){return this._canvas},H.prototype._containerDimensions=function(){var de=0,Ae=0;return this._container&&(de=this._container.clientWidth||400,Ae=this._container.clientHeight||300),[de,Ae]},H.prototype._detectMissingCSS=function(){var de=e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color");de!=="rgb(250, 128, 114)"&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},H.prototype._setupContainer=function(){var de=this._container;de.classList.add("mapboxgl-map");var Ae=this._missingCSSCanary=n.create("div","mapboxgl-canary",de);Ae.style.visibility="hidden",this._detectMissingCSS();var Ce=this._canvasContainer=n.create("div","mapboxgl-canvas-container",de);this._interactive&&Ce.classList.add("mapboxgl-interactive"),this._canvas=n.create("canvas","mapboxgl-canvas",Ce),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var Ye=this._containerDimensions();this._resizeCanvas(Ye[0],Ye[1]);var lt=this._controlContainer=n.create("div","mapboxgl-control-container",de),Tt=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Yt){Tt[Yt]=n.create("div","mapboxgl-ctrl-"+Yt,lt)})},H.prototype._resizeCanvas=function(de,Ae){var Ce=e.browser.devicePixelRatio||1;this._canvas.width=Ce*de,this._canvas.height=Ce*Ae,this._canvas.style.width=de+"px",this._canvas.style.height=Ae+"px"},H.prototype._setupPainter=function(){var de=e.extend({},a.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),Ae=this._canvas.getContext("webgl",de)||this._canvas.getContext("experimental-webgl",de);if(!Ae){this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")));return}this.painter=new ri(Ae,this.transform),e.webpSupported.testSupport(Ae)},H.prototype._contextLost=function(de){de.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:de}))},H.prototype._contextRestored=function(de){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:de}))},H.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},H.prototype._update=function(de){return this.style?(this._styleDirty=this._styleDirty||de,this._sourcesDirty=!0,this.triggerRepaint(),this):this},H.prototype._requestRenderFrame=function(de){return this._update(),this._renderTaskQueue.add(de)},H.prototype._cancelRenderFrame=function(de){this._renderTaskQueue.remove(de)},H.prototype._render=function(de){var Ae=this,Ce,Ye=0,lt=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(Ce=lt.createQueryEXT(),lt.beginQueryEXT(lt.TIME_ELAPSED_EXT,Ce),Ye=e.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(de),!this._removed){var Tt=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Yt=this.transform.zoom,ir=e.browser.now();this.style.zoomHistory.update(Yt,ir);var ur=new e.EvaluationParameters(Yt,{now:ir,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Sr=ur.crossFadingFactor();(Sr!==1||Sr!==this._crossFadingFactor)&&(Tt=!0,this._crossFadingFactor=Sr),this.style.update(ur)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||Tt)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Br=e.browser.now()-Ye;lt.endQueryEXT(lt.TIME_ELAPSED_EXT,Ce),setTimeout(function(){var jr=lt.getQueryObjectEXT(Ce,lt.QUERY_RESULT_EXT)/1e6;lt.deleteQueryEXT(Ce),Ae.fire(new e.Event("gpu-timing-frame",{cpuTime:Br,gpuTime:jr}))},50)}if(this.listens("gpu-timing-layer")){var Or=this.painter.collectGpuTimers();setTimeout(function(){var jr=Ae.painter.queryGpuTimers(Or);Ae.fire(new e.Event("gpu-timing-layer",{layerTimes:jr}))},50)}var Fr=this._sourcesDirty||this._styleDirty||this._placementDirty;return Fr||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new e.Event("idle"))),this}},H.prototype.remove=function(){this._hash&&this._hash.remove();for(var de=0,Ae=this._controls;de<Ae.length;de+=1){var Ce=Ae[de];Ce.onRemove(this)}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof e.window<"u"&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var Ye=this.painter.context.gl.getExtension("WEBGL_lose_context");Ye&&Ye.loseContext(),pf(this._canvasContainer),pf(this._controlContainer),pf(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new e.Event("remove"))},H.prototype.triggerRepaint=function(){var de=this;this.style&&!this._frame&&(this._frame=e.browser.frame(function(Ae){de._frame=null,de._render(Ae)}))},H.prototype._onWindowOnline=function(){this._update()},H.prototype._onWindowResize=function(de){this._trackResize&&this.resize({originalEvent:de})._update()},ve.showTileBoundaries.get=function(){return!!this._showTileBoundaries},ve.showTileBoundaries.set=function(K){this._showTileBoundaries!==K&&(this._showTileBoundaries=K,this._update())},ve.showPadding.get=function(){return!!this._showPadding},ve.showPadding.set=function(K){this._showPadding!==K&&(this._showPadding=K,this._update())},ve.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},ve.showCollisionBoxes.set=function(K){this._showCollisionBoxes!==K&&(this._showCollisionBoxes=K,K?this.style._generateCollisionBoxes():this._update())},ve.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},ve.showOverdrawInspector.set=function(K){this._showOverdrawInspector!==K&&(this._showOverdrawInspector=K,this._update())},ve.repaint.get=function(){return!!this._repaint},ve.repaint.set=function(K){this._repaint!==K&&(this._repaint=K,this.triggerRepaint())},ve.vertices.get=function(){return!!this._vertices},ve.vertices.set=function(K){this._vertices=K,this._update()},H.prototype._setCacheLimits=function(de,Ae){e.setCacheLimits(de,Ae)},ve.version.get=function(){return e.version},Object.defineProperties(H.prototype,ve),H}($u);function pf(ce){ce.parentNode&&ce.parentNode.removeChild(ce)}var Sf={showCompass:!0,showZoom:!0,visualizePitch:!1},mu=function(H){var ve=this;this.options=e.extend({},Sf,H),this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(K){return K.preventDefault()}),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(K){return ve._map.zoomIn({},{originalEvent:K})}),n.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(K){return ve._map.zoomOut({},{originalEvent:K})}),n.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(K){ve.options.visualizePitch?ve._map.resetNorthPitch({},{originalEvent:K}):ve._map.resetNorth({},{originalEvent:K})}),this._compassIcon=n.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};mu.prototype._updateZoomButtons=function(){var H=this._map.getZoom();this._zoomInButton.disabled=H===this._map.getMaxZoom(),this._zoomOutButton.disabled=H===this._map.getMinZoom()},mu.prototype._rotateCompassArrow=function(){var H=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=H},mu.prototype.onAdd=function(H){return this._map=H,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Js(this._map,this._compass,this.options.visualizePitch)),this._container},mu.prototype.onRemove=function(){n.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},mu.prototype._createButton=function(H,ve){var K=n.create("button",H,this._container);return K.type="button",K.addEventListener("click",ve),K},mu.prototype._setButtonTitle=function(H,ve){var K=this._map._getUIString("NavigationControl."+ve);H.title=K,H.setAttribute("aria-label",K)};var Js=function(H,ve,K){K===void 0&&(K=!1),this._clickTolerance=10,this.element=ve,this.mouseRotate=new oa({clickTolerance:H.dragRotate._mouseRotate._clickTolerance}),this.map=H,K&&(this.mousePitch=new Ea({clickTolerance:H.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),n.addEventListener(ve,"mousedown",this.mousedown),n.addEventListener(ve,"touchstart",this.touchstart,{passive:!1}),n.addEventListener(ve,"touchmove",this.touchmove),n.addEventListener(ve,"touchend",this.touchend),n.addEventListener(ve,"touchcancel",this.reset)};Js.prototype.down=function(H,ve){this.mouseRotate.mousedown(H,ve),this.mousePitch&&this.mousePitch.mousedown(H,ve),n.disableDrag()},Js.prototype.move=function(H,ve){var K=this.map,de=this.mouseRotate.mousemoveWindow(H,ve);if(de&&de.bearingDelta&&K.setBearing(K.getBearing()+de.bearingDelta),this.mousePitch){var Ae=this.mousePitch.mousemoveWindow(H,ve);Ae&&Ae.pitchDelta&&K.setPitch(K.getPitch()+Ae.pitchDelta)}},Js.prototype.off=function(){var H=this.element;n.removeEventListener(H,"mousedown",this.mousedown),n.removeEventListener(H,"touchstart",this.touchstart,{passive:!1}),n.removeEventListener(H,"touchmove",this.touchmove),n.removeEventListener(H,"touchend",this.touchend),n.removeEventListener(H,"touchcancel",this.reset),this.offTemp()},Js.prototype.offTemp=function(){n.enableDrag(),n.removeEventListener(e.window,"mousemove",this.mousemove),n.removeEventListener(e.window,"mouseup",this.mouseup)},Js.prototype.mousedown=function(H){this.down(e.extend({},H,{ctrlKey:!0,preventDefault:function(){return H.preventDefault()}}),n.mousePos(this.element,H)),n.addEventListener(e.window,"mousemove",this.mousemove),n.addEventListener(e.window,"mouseup",this.mouseup)},Js.prototype.mousemove=function(H){this.move(H,n.mousePos(this.element,H))},Js.prototype.mouseup=function(H){this.mouseRotate.mouseupWindow(H),this.mousePitch&&this.mousePitch.mouseupWindow(H),this.offTemp()},Js.prototype.touchstart=function(H){H.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=n.touchPos(this.element,H.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return H.preventDefault()}},this._startPos))},Js.prototype.touchmove=function(H){H.targetTouches.length!==1?this.reset():(this._lastPos=n.touchPos(this.element,H.targetTouches)[0],this.move({preventDefault:function(){return H.preventDefault()}},this._lastPos))},Js.prototype.touchend=function(H){H.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Js.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};function xu(ce,H,ve){if(ce=new e.LngLat(ce.lng,ce.lat),H){var K=new e.LngLat(ce.lng-360,ce.lat),de=new e.LngLat(ce.lng+360,ce.lat),Ae=ve.locationPoint(ce).distSqr(H);ve.locationPoint(K).distSqr(H)<Ae?ce=K:ve.locationPoint(de).distSqr(H)<Ae&&(ce=de)}for(;Math.abs(ce.lng-ve.center.lng)>180;){var Ce=ve.locationPoint(ce);if(Ce.x>=0&&Ce.y>=0&&Ce.x<=ve.width&&Ce.y<=ve.height)break;ce.lng>ve.center.lng?ce.lng-=360:ce.lng+=360}return ce}var df={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function kf(ce,H,ve){var K=ce.classList;for(var de in df)K.remove("mapboxgl-"+ve+"-anchor-"+de);K.add("mapboxgl-"+ve+"-anchor-"+H)}var ef=function(ce){function H(ve,K){var de=this;if(ce.call(this),(ve instanceof e.window.HTMLElement||K)&&(ve=e.extend({element:ve},K)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=ve&&ve.anchor||"center",this._color=ve&&ve.color||"#3FB1CE",this._draggable=ve&&ve.draggable||!1,this._state="inactive",this._rotation=ve&&ve.rotation||0,this._rotationAlignment=ve&&ve.rotationAlignment||"auto",this._pitchAlignment=ve&&ve.pitchAlignment&&ve.pitchAlignment!=="auto"?ve.pitchAlignment:this._rotationAlignment,!ve||!ve.element){this._defaultMarker=!0,this._element=n.create("div"),this._element.setAttribute("aria-label","Map marker");var Ae=n.createNS("http://www.w3.org/2000/svg","svg");Ae.setAttributeNS(null,"display","block"),Ae.setAttributeNS(null,"height","41px"),Ae.setAttributeNS(null,"width","27px"),Ae.setAttributeNS(null,"viewBox","0 0 27 41");var Ce=n.createNS("http://www.w3.org/2000/svg","g");Ce.setAttributeNS(null,"stroke","none"),Ce.setAttributeNS(null,"stroke-width","1"),Ce.setAttributeNS(null,"fill","none"),Ce.setAttributeNS(null,"fill-rule","evenodd");var Ye=n.createNS("http://www.w3.org/2000/svg","g");Ye.setAttributeNS(null,"fill-rule","nonzero");var lt=n.createNS("http://www.w3.org/2000/svg","g");lt.setAttributeNS(null,"transform","translate(3.0, 29.0)"),lt.setAttributeNS(null,"fill","#000000");for(var Tt=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}],Yt=0,ir=Tt;Yt<ir.length;Yt+=1){var ur=ir[Yt],Sr=n.createNS("http://www.w3.org/2000/svg","ellipse");Sr.setAttributeNS(null,"opacity","0.04"),Sr.setAttributeNS(null,"cx","10.5"),Sr.setAttributeNS(null,"cy","5.80029008"),Sr.setAttributeNS(null,"rx",ur.rx),Sr.setAttributeNS(null,"ry",ur.ry),lt.appendChild(Sr)}var Br=n.createNS("http://www.w3.org/2000/svg","g");Br.setAttributeNS(null,"fill",this._color);var Or=n.createNS("http://www.w3.org/2000/svg","path");Or.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Br.appendChild(Or);var Fr=n.createNS("http://www.w3.org/2000/svg","g");Fr.setAttributeNS(null,"opacity","0.25"),Fr.setAttributeNS(null,"fill","#000000");var jr=n.createNS("http://www.w3.org/2000/svg","path");jr.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Fr.appendChild(jr);var cn=n.createNS("http://www.w3.org/2000/svg","g");cn.setAttributeNS(null,"transform","translate(6.0, 7.0)"),cn.setAttributeNS(null,"fill","#FFFFFF");var En=n.createNS("http://www.w3.org/2000/svg","g");En.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Fn=n.createNS("http://www.w3.org/2000/svg","circle");Fn.setAttributeNS(null,"fill","#000000"),Fn.setAttributeNS(null,"opacity","0.25"),Fn.setAttributeNS(null,"cx","5.5"),Fn.setAttributeNS(null,"cy","5.5"),Fn.setAttributeNS(null,"r","5.4999962");var jn=n.createNS("http://www.w3.org/2000/svg","circle");jn.setAttributeNS(null,"fill","#FFFFFF"),jn.setAttributeNS(null,"cx","5.5"),jn.setAttributeNS(null,"cy","5.5"),jn.setAttributeNS(null,"r","5.4999962"),En.appendChild(Fn),En.appendChild(jn),Ye.appendChild(lt),Ye.appendChild(Br),Ye.appendChild(Fr),Ye.appendChild(cn),Ye.appendChild(En),Ae.appendChild(Ye),this._element.appendChild(Ae),this._offset=e.Point.convert(ve&&ve.offset||[0,-14])}else this._element=ve.element,this._offset=e.Point.convert(ve&&ve.offset||[0,0]);this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(qn){qn.preventDefault()}),this._element.addEventListener("mousedown",function(qn){qn.preventDefault()}),this._element.addEventListener("focus",function(){var qn=de._map.getContainer();qn.scrollTop=0,qn.scrollLeft=0}),kf(this._element,this._anchor,"marker"),this._popup=null}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.addTo=function(K){return this.remove(),this._map=K,K.getCanvasContainer().appendChild(this._element),K.on("move",this._update),K.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},H.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),n.remove(this._element),this._popup&&this._popup.remove(),this},H.prototype.getLngLat=function(){return this._lngLat},H.prototype.setLngLat=function(K){return this._lngLat=e.LngLat.convert(K),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},H.prototype.getElement=function(){return this._element},H.prototype.setPopup=function(K){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),K){if(!("offset"in K.options)){var de=38.1,Ae=13.5,Ce=Math.sqrt(Math.pow(Ae,2)/2);K.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-de],"bottom-left":[Ce,(de-Ae+Ce)*-1],"bottom-right":[-Ce,(de-Ae+Ce)*-1],left:[Ae,(de-Ae)*-1],right:[-Ae,(de-Ae)*-1]}:this._offset}this._popup=K,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},H.prototype._onKeyPress=function(K){var de=K.code,Ae=K.charCode||K.keyCode;(de==="Space"||de==="Enter"||Ae===32||Ae===13)&&this.togglePopup()},H.prototype._onMapClick=function(K){var de=K.originalEvent.target,Ae=this._element;this._popup&&(de===Ae||Ae.contains(de))&&this.togglePopup()},H.prototype.getPopup=function(){return this._popup},H.prototype.togglePopup=function(){var K=this._popup;if(K)K.isOpen()?K.remove():K.addTo(this._map);else return this;return this},H.prototype._update=function(K){if(!!this._map){this._map.transform.renderWorldCopies&&(this._lngLat=xu(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var de="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?de="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(de="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var Ae="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?Ae="rotateX(0deg)":this._pitchAlignment==="map"&&(Ae="rotateX("+this._map.getPitch()+"deg)"),(!K||K.type==="moveend")&&(this._pos=this._pos.round()),n.setTransform(this._element,df[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+Ae+" "+de)}},H.prototype.getOffset=function(){return this._offset},H.prototype.setOffset=function(K){return this._offset=e.Point.convert(K),this._update(),this},H.prototype._onMove=function(K){this._pos=K.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))},H.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new e.Event("dragend")),this._state="inactive"},H.prototype._addDragHandler=function(K){this._element.contains(K.originalEvent.target)&&(K.preventDefault(),this._positionDelta=K.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},H.prototype.setDraggable=function(K){return this._draggable=!!K,this._map&&(K?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},H.prototype.isDraggable=function(){return this._draggable},H.prototype.setRotation=function(K){return this._rotation=K||0,this._update(),this},H.prototype.getRotation=function(){return this._rotation},H.prototype.setRotationAlignment=function(K){return this._rotationAlignment=K||"auto",this._update(),this},H.prototype.getRotationAlignment=function(){return this._rotationAlignment},H.prototype.setPitchAlignment=function(K){return this._pitchAlignment=K&&K!=="auto"?K:this._rotationAlignment,this._update(),this},H.prototype.getPitchAlignment=function(){return this._pitchAlignment},H}(e.Evented),qf={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Ou;function gf(ce){Ou!==void 0?ce(Ou):e.window.navigator.permissions!==void 0?e.window.navigator.permissions.query({name:"geolocation"}).then(function(H){Ou=H.state!=="denied",ce(Ou)}):(Ou=!!e.window.navigator.geolocation,ce(Ou))}var tf=0,Nu=!1,ec=function(ce){function H(ve){ce.call(this),this.options=e.extend({},qf,ve),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.onAdd=function(K){return this._map=K,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),gf(this._setupUI),this._container},H.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),n.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,tf=0,Nu=!1},H.prototype._isOutOfMapMaxBounds=function(K){var de=this._map.getMaxBounds(),Ae=K.coords;return de&&(Ae.longitude<de.getWest()||Ae.longitude>de.getEast()||Ae.latitude<de.getSouth()||Ae.latitude>de.getNorth())},H.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break}},H.prototype._onSuccess=function(K){if(!!this._map){if(this._isOutOfMapMaxBounds(K)){this._setErrorState(),this.fire(new e.Event("outofmaxbounds",K)),this._updateMarker(),this._finish();return}if(this.options.trackUserLocation)switch(this._lastKnownPosition=K,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(K),(!this.options.trackUserLocation||this._watchState==="ACTIVE_LOCK")&&this._updateCamera(K),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",K)),this._finish()}},H.prototype._updateCamera=function(K){var de=new e.LngLat(K.coords.longitude,K.coords.latitude),Ae=K.coords.accuracy,Ce=this._map.getBearing(),Ye=e.extend({bearing:Ce},this.options.fitBoundsOptions);this._map.fitBounds(de.toBounds(Ae),Ye,{geolocateSource:!0})},H.prototype._updateMarker=function(K){if(K){var de=new e.LngLat(K.coords.longitude,K.coords.latitude);this._accuracyCircleMarker.setLngLat(de).addTo(this._map),this._userLocationDotMarker.setLngLat(de).addTo(this._map),this._accuracy=K.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},H.prototype._updateCircleRadius=function(){var K=this._map._container.clientHeight/2,de=this._map.unproject([0,K]),Ae=this._map.unproject([1,K]),Ce=de.distanceTo(Ae),Ye=Math.ceil(2*this._accuracy/Ce);this._circleElement.style.width=Ye+"px",this._circleElement.style.height=Ye+"px"},H.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},H.prototype._onError=function(K){if(!!this._map){if(this.options.trackUserLocation)if(K.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var de=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=de,this._geolocateButton.setAttribute("aria-label",de),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(K.code===3&&Nu)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",K)),this._finish()}},H.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},H.prototype._setupUI=function(K){var de=this;if(this._container.addEventListener("contextmenu",function(Ye){return Ye.preventDefault()}),this._geolocateButton=n.create("button","mapboxgl-ctrl-geolocate",this._container),n.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",K===!1){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var Ae=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=Ae,this._geolocateButton.setAttribute("aria-label",Ae)}else{var Ce=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Ce,this._geolocateButton.setAttribute("aria-label",Ce)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=n.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new ef(this._dotElement),this._circleElement=n.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new ef({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(Ye){var lt=Ye.originalEvent&&Ye.originalEvent.type==="resize";!Ye.geolocateSource&&de._watchState==="ACTIVE_LOCK"&&!lt&&(de._watchState="BACKGROUND",de._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),de._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),de.fire(new e.Event("trackuserlocationend")))})},H.prototype.trigger=function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":tf--,Nu=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"));break}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error");break}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),tf++;var K;tf>1?(K={maximumAge:6e5,timeout:0},Nu=!0):(K=this.options.positionOptions,Nu=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,K)}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},H.prototype._clearWatch=function(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},H}(e.Evented),xc={maxWidth:100,unit:"metric"},Uu=function(H){this.options=e.extend({},xc,H),e.bindAll(["_onMove","setUnit"],this)};Uu.prototype.getDefaultPosition=function(){return"bottom-left"},Uu.prototype._onMove=function(){tc(this._map,this._container,this.options)},Uu.prototype.onAdd=function(H){return this._map=H,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",H.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Uu.prototype.onRemove=function(){n.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Uu.prototype.setUnit=function(H){this.options.unit=H,tc(this._map,this._container,this.options)};function tc(ce,H,ve){var K=ve&&ve.maxWidth||100,de=ce._container.clientHeight/2,Ae=ce.unproject([0,de]),Ce=ce.unproject([K,de]),Ye=Ae.distanceTo(Ce);if(ve&&ve.unit==="imperial"){var lt=3.2808*Ye;if(lt>5280){var Tt=lt/5280;rf(H,K,Tt,ce._getUIString("ScaleControl.Miles"))}else rf(H,K,lt,ce._getUIString("ScaleControl.Feet"))}else if(ve&&ve.unit==="nautical"){var Yt=Ye/1852;rf(H,K,Yt,ce._getUIString("ScaleControl.NauticalMiles"))}else Ye>=1e3?rf(H,K,Ye/1e3,ce._getUIString("ScaleControl.Kilometers")):rf(H,K,Ye,ce._getUIString("ScaleControl.Meters"))}function rf(ce,H,ve,K){var de=_c(ve),Ae=de/ve;ce.style.width=H*Ae+"px",ce.innerHTML=de+"&nbsp;"+K}function bc(ce){var H=Math.pow(10,Math.ceil(-Math.log(ce)/Math.LN10));return Math.round(ce*H)/H}function _c(ce){var H=Math.pow(10,(""+Math.floor(ce)).length-1),ve=ce/H;return ve=ve>=10?10:ve>=5?5:ve>=3?3:ve>=2?2:ve>=1?1:bc(ve),H*ve}var Ul=function(H){this._fullscreen=!1,H&&H.container&&(H.container instanceof e.window.HTMLElement?this._container=H.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.window.document&&(this._fullscreenchange="MSFullscreenChange")};Ul.prototype.onAdd=function(H){return this._map=H,this._container||(this._container=this._map.getContainer()),this._controlContainer=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Ul.prototype.onRemove=function(){n.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Ul.prototype._checkFullscreenSupport=function(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)},Ul.prototype._setupUI=function(){var H=this._fullscreenButton=n.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);n.create("span","mapboxgl-ctrl-icon",H).setAttribute("aria-hidden",!0),H.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Ul.prototype._updateTitle=function(){var H=this._getTitle();this._fullscreenButton.setAttribute("aria-label",H),this._fullscreenButton.title=H},Ul.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Ul.prototype._isFullscreen=function(){return this._fullscreen},Ul.prototype._changeIcon=function(){var H=e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement;H===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Ul.prototype._onClickFullscreen=function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.mozCancelFullScreen?e.window.document.mozCancelFullScreen():e.window.document.msExitFullscreen?e.window.document.msExitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var wc={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Tc=function(ce){function H(ve){ce.call(this),this.options=e.extend(Object.create(wc),ve),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return ce&&(H.__proto__=ce),H.prototype=Object.create(ce&&ce.prototype),H.prototype.constructor=H,H.prototype.addTo=function(K){return this._map&&this.remove(),this._map=K,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this},H.prototype.isOpen=function(){return!!this._map},H.prototype.remove=function(){return this._content&&n.remove(this._content),this._container&&(n.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this},H.prototype.getLngLat=function(){return this._lngLat},H.prototype.setLngLat=function(K){return this._lngLat=e.LngLat.convert(K),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},H.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},H.prototype.getElement=function(){return this._container},H.prototype.setText=function(K){return this.setDOMContent(e.window.document.createTextNode(K))},H.prototype.setHTML=function(K){var de=e.window.document.createDocumentFragment(),Ae=e.window.document.createElement("body"),Ce;for(Ae.innerHTML=K;Ce=Ae.firstChild,!!Ce;)de.appendChild(Ce);return this.setDOMContent(de)},H.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},H.prototype.setMaxWidth=function(K){return this.options.maxWidth=K,this._update(),this},H.prototype.setDOMContent=function(K){return this._createContent(),this._content.appendChild(K),this._update(),this},H.prototype.addClassName=function(K){this._container&&this._container.classList.add(K)},H.prototype.removeClassName=function(K){this._container&&this._container.classList.remove(K)},H.prototype.toggleClassName=function(K){if(this._container)return this._container.classList.toggle(K)},H.prototype._createContent=function(){this._content&&n.remove(this._content),this._content=n.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=n.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},H.prototype._onMouseUp=function(K){this._update(K.point)},H.prototype._onMouseMove=function(K){this._update(K.point)},H.prototype._onDrag=function(K){this._update(K.point)},H.prototype._update=function(K){var de=this,Ae=this._lngLat||this._trackPointer;if(!(!this._map||!Ae||!this._content)&&(this._container||(this._container=n.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=n.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Sr){return de._container.classList.add(Sr)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=xu(this._lngLat,this._pos,this._map.transform)),!(this._trackPointer&&!K))){var Ce=this._pos=this._trackPointer&&K?K:this._map.project(this._lngLat),Ye=this.options.anchor,lt=rc(this.options.offset);if(!Ye){var Tt=this._container.offsetWidth,Yt=this._container.offsetHeight,ir;Ce.y+lt.bottom.y<Yt?ir=["top"]:Ce.y>this._map.transform.height-Yt?ir=["bottom"]:ir=[],Ce.x<Tt/2?ir.push("left"):Ce.x>this._map.transform.width-Tt/2&&ir.push("right"),ir.length===0?Ye="bottom":Ye=ir.join("-")}var ur=Ce.add(lt[Ye]).round();n.setTransform(this._container,df[Ye]+" translate("+ur.x+"px,"+ur.y+"px)"),kf(this._container,Ye,"popup")}},H.prototype._onClose=function(){this.remove()},H}(e.Evented);function rc(ce){if(ce)if(typeof ce=="number"){var H=Math.round(Math.sqrt(.5*Math.pow(ce,2)));return{center:new e.Point(0,0),top:new e.Point(0,ce),"top-left":new e.Point(H,H),"top-right":new e.Point(-H,H),bottom:new e.Point(0,-ce),"bottom-left":new e.Point(H,-H),"bottom-right":new e.Point(-H,-H),left:new e.Point(ce,0),right:new e.Point(-ce,0)}}else if(ce instanceof e.Point||Array.isArray(ce)){var ve=e.Point.convert(ce);return{center:ve,top:ve,"top-left":ve,"top-right":ve,bottom:ve,"bottom-left":ve,"bottom-right":ve,left:ve,right:ve}}else return{center:e.Point.convert(ce.center||[0,0]),top:e.Point.convert(ce.top||[0,0]),"top-left":e.Point.convert(ce["top-left"]||[0,0]),"top-right":e.Point.convert(ce["top-right"]||[0,0]),bottom:e.Point.convert(ce.bottom||[0,0]),"bottom-left":e.Point.convert(ce["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(ce["bottom-right"]||[0,0]),left:e.Point.convert(ce.left||[0,0]),right:e.Point.convert(ce.right||[0,0])};else return rc(new e.Point(0,0))}var Ac={version:e.version,supported:a,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:$f,NavigationControl:mu,GeolocateControl:ec,AttributionControl:Tl,ScaleControl:Uu,FullscreenControl:Ul,Popup:Tc,Marker:ef,Style:Zo,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,config:e.config,prewarm:fr,clearPrewarmedResources:Hr,get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(ce){e.config.ACCESS_TOKEN=ce},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(ce){e.config.API_URL=ce},get workerCount(){return St.workerCount},set workerCount(ce){St.workerCount=ce},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(ce){e.config.MAX_PARALLEL_IMAGE_REQUESTS=ce},clearStorage:function(H){e.clearTileCache(H)},workerUrl:""};return Ac}),M})},{}],240:[function(d,ne,ae){ne.exports=Math.log2||function(w){return Math.log(w)*Math.LOG2E}},{}],241:[function(d,ne,ae){ne.exports=v;var w=d("mouse-event");function v(M,T){T||(T=M,M=window);var e=0,a=0,n=0,r={shift:!1,alt:!1,control:!1,meta:!1},t=!1;function f(A){var m=!1;return"altKey"in A&&(m=m||A.altKey!==r.alt,r.alt=!!A.altKey),"shiftKey"in A&&(m=m||A.shiftKey!==r.shift,r.shift=!!A.shiftKey),"ctrlKey"in A&&(m=m||A.ctrlKey!==r.control,r.control=!!A.ctrlKey),"metaKey"in A&&(m=m||A.metaKey!==r.meta,r.meta=!!A.metaKey),m}function o(A,m){var h=w.x(m),x=w.y(m);"buttons"in m&&(A=m.buttons|0),(A!==e||h!==a||x!==n||f(m))&&(e=A|0,a=h||0,n=x||0,T&&T(e,a,n,r))}function i(A){o(0,A)}function g(){(e||a||n||r.shift||r.alt||r.meta||r.control)&&(a=n=0,e=0,r.shift=r.alt=r.control=r.meta=!1,T&&T(0,0,0,r))}function p(A){f(A)&&T&&T(e,a,n,r)}function y(A){w.buttons(A)===0?o(0,A):o(e,A)}function c(A){o(e|w.buttons(A),A)}function b(A){o(e&~w.buttons(A),A)}function l(){t||(t=!0,M.addEventListener("mousemove",y),M.addEventListener("mousedown",c),M.addEventListener("mouseup",b),M.addEventListener("mouseleave",i),M.addEventListener("mouseenter",i),M.addEventListener("mouseout",i),M.addEventListener("mouseover",i),M.addEventListener("blur",g),M.addEventListener("keyup",p),M.addEventListener("keydown",p),M.addEventListener("keypress",p),M!==window&&(window.addEventListener("blur",g),window.addEventListener("keyup",p),window.addEventListener("keydown",p),window.addEventListener("keypress",p)))}function _(){!t||(t=!1,M.removeEventListener("mousemove",y),M.removeEventListener("mousedown",c),M.removeEventListener("mouseup",b),M.removeEventListener("mouseleave",i),M.removeEventListener("mouseenter",i),M.removeEventListener("mouseout",i),M.removeEventListener("mouseover",i),M.removeEventListener("blur",g),M.removeEventListener("keyup",p),M.removeEventListener("keydown",p),M.removeEventListener("keypress",p),M!==window&&(window.removeEventListener("blur",g),window.removeEventListener("keyup",p),window.removeEventListener("keydown",p),window.removeEventListener("keypress",p)))}l();var s={element:M};return Object.defineProperties(s,{enabled:{get:function(){return t},set:function(A){A?l():_()},enumerable:!0},buttons:{get:function(){return e},enumerable:!0},x:{get:function(){return a},enumerable:!0},y:{get:function(){return n},enumerable:!0},mods:{get:function(){return r},enumerable:!0}}),s}},{"mouse-event":243}],242:[function(d,ne,ae){var w={left:0,top:0};ne.exports=v;function v(T,e,a){e=e||T.currentTarget||T.srcElement,Array.isArray(a)||(a=[0,0]);var n=T.clientX||0,r=T.clientY||0,t=M(e);return a[0]=n-t.left,a[1]=r-t.top,a}function M(T){return T===window||T===document||T===document.body?w:T.getBoundingClientRect()}},{}],243:[function(d,ne,ae){function w(e){if(typeof e=="object"){if("buttons"in e)return e.buttons;if("which"in e){var a=e.which;if(a===2)return 4;if(a===3)return 2;if(a>0)return 1<<a-1}else if("button"in e){var a=e.button;if(a===1)return 4;if(a===2)return 2;if(a>=0)return 1<<a}}return 0}ae.buttons=w;function v(e){return e.target||e.srcElement||window}ae.element=v;function M(e){if(typeof e=="object"){if("offsetX"in e)return e.offsetX;var a=v(e),n=a.getBoundingClientRect();return e.clientX-n.left}return 0}ae.x=M;function T(e){if(typeof e=="object"){if("offsetY"in e)return e.offsetY;var a=v(e),n=a.getBoundingClientRect();return e.clientY-n.top}return 0}ae.y=T},{}],244:[function(d,ne,ae){var w=d("to-px");ne.exports=v;function v(M,T,e){typeof M=="function"&&(e=!!T,T=M,M=window);var a=w("ex",M),n=function(r){e&&r.preventDefault();var t=r.deltaX||0,f=r.deltaY||0,o=r.deltaZ||0,i=r.deltaMode,g=1;switch(i){case 1:g=a;break;case 2:g=window.innerHeight;break}if(t*=g,f*=g,o*=g,t||f||o)return T(t,f,o,r)};return M.addEventListener("wheel",n),n}},{"to-px":314}],245:[function(d,ne,ae){(function(w,v){(function(){/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/(function(T,e,a){e[T]=e[T]||a(),typeof ne<"u"&&ne.exports&&(ne.exports=e[T])})("Promise",typeof w<"u"?w:this,function(){var T,e,a,n=Object.prototype.toString,r=typeof v<"u"?function(A){return v(A)}:setTimeout;try{Object.defineProperty({},"x",{}),T=function(A,m,h,x){return Object.defineProperty(A,m,{value:h,writable:!0,configurable:x!==!1})}}catch{T=function(m,h,x){return m[h]=x,m}}a=function(){var A,m,h;function x(u,L){this.fn=u,this.self=L,this.next=void 0}return{add:function(L,S){h=new x(L,S),m?m.next=h:A=h,m=h,h=void 0},drain:function(){var L=A;for(A=m=e=void 0;L;)L.fn.call(L.self),L=L.next}}}();function t(s,A){a.add(s,A),e||(e=r(a.drain))}function f(s){var A,m=typeof s;return s!=null&&(m=="object"||m=="function")&&(A=s.then),typeof A=="function"?A:!1}function o(){for(var s=0;s<this.chain.length;s++)i(this,this.state===1?this.chain[s].success:this.chain[s].failure,this.chain[s]);this.chain.length=0}function i(s,A,m){var h,x;try{A===!1?m.reject(s.msg):(A===!0?h=s.msg:h=A.call(void 0,s.msg),h===m.promise?m.reject(TypeError("Promise-chain cycle")):(x=f(h))?x.call(h,m.resolve,m.reject):m.resolve(h))}catch(u){m.reject(u)}}function g(s){var A,m=this;if(!m.triggered){m.triggered=!0,m.def&&(m=m.def);try{(A=f(s))?t(function(){var h=new c(m);try{A.call(s,function(){g.apply(h,arguments)},function(){p.apply(h,arguments)})}catch(x){p.call(h,x)}}):(m.msg=s,m.state=1,m.chain.length>0&&t(o,m))}catch(h){p.call(new c(m),h)}}}function p(s){var A=this;A.triggered||(A.triggered=!0,A.def&&(A=A.def),A.msg=s,A.state=2,A.chain.length>0&&t(o,A))}function y(s,A,m,h){for(var x=0;x<A.length;x++)(function(L){s.resolve(A[L]).then(function(k){m(L,k)},h)})(x)}function c(s){this.def=s,this.triggered=!1}function b(s){this.promise=s,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function l(s){if(typeof s!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var A=new b(this);this.then=function(h,x){var u={success:typeof h=="function"?h:!0,failure:typeof x=="function"?x:!1};return u.promise=new this.constructor(function(S,k){if(typeof S!="function"||typeof k!="function")throw TypeError("Not a function");u.resolve=S,u.reject=k}),A.chain.push(u),A.state!==0&&t(o,A),u.promise},this.catch=function(h){return this.then(void 0,h)};try{s.call(void 0,function(h){g.call(A,h)},function(h){p.call(A,h)})}catch(m){p.call(A,m)}}var _=T({},"constructor",l,!1);return l.prototype=_,T(_,"__NPO__",0,!1),T(l,"resolve",function(A){var m=this;return A&&typeof A=="object"&&A.__NPO__===1?A:new m(function(x,u){if(typeof x!="function"||typeof u!="function")throw TypeError("Not a function");x(A)})}),T(l,"reject",function(A){return new this(function(h,x){if(typeof h!="function"||typeof x!="function")throw TypeError("Not a function");x(A)})}),T(l,"all",function(A){var m=this;return n.call(A)!="[object Array]"?m.reject(TypeError("Not an array")):A.length===0?m.resolve([]):new m(function(x,u){if(typeof x!="function"||typeof u!="function")throw TypeError("Not a function");var L=A.length,S=Array(L),k=0;y(m,A,function(z,I){S[z]=I,++k===L&&x(S)},u)})}),T(l,"race",function(A){var m=this;return n.call(A)!="[object Array]"?m.reject(TypeError("Not an array")):new m(function(x,u){if(typeof x!="function"||typeof u!="function")throw TypeError("Not a function");y(m,A,function(S,k){x(k)},u)})}),l})}).call(this)}).call(this,typeof To<"u"?To:typeof self<"u"?self:typeof window<"u"?window:{},d("timers").setImmediate)},{timers:311}],246:[function(d,ne,ae){var w=Math.PI,v=r(120);ne.exports=M;function M(t){for(var f,o=[],i=0,g=0,p=0,y=0,c=null,b=null,l=0,_=0,s=0,A=t.length;s<A;s++){var m=t[s],h=m[0];switch(h){case"M":p=m[1],y=m[2];break;case"A":m=a(l,_,m[1],m[2],r(m[3]),m[4],m[5],m[6],m[7]),m.unshift("C"),m.length>7&&(o.push(m.splice(0,7)),m.unshift("C"));break;case"S":var x=l,u=_;(f=="C"||f=="S")&&(x+=x-i,u+=u-g),m=["C",x,u,m[1],m[2],m[3],m[4]];break;case"T":f=="Q"||f=="T"?(c=l*2-c,b=_*2-b):(c=l,b=_),m=e(l,_,c,b,m[1],m[2]);break;case"Q":c=m[1],b=m[2],m=e(l,_,m[1],m[2],m[3],m[4]);break;case"L":m=T(l,_,m[1],m[2]);break;case"H":m=T(l,_,m[1],_);break;case"V":m=T(l,_,l,m[1]);break;case"Z":m=T(l,_,p,y);break}f=h,l=m[m.length-2],_=m[m.length-1],m.length>4?(i=m[m.length-4],g=m[m.length-3]):(i=l,g=_),o.push(m)}return o}function T(t,f,o,i){return["C",t,f,o,i,o,i]}function e(t,f,o,i,g,p){return["C",t/3+2/3*o,f/3+2/3*i,g/3+2/3*o,p/3+2/3*i,g,p]}function a(t,f,o,i,g,p,y,c,b,l){if(l)k=l[0],P=l[1],L=l[2],S=l[3];else{var _=n(t,f,-g);t=_.x,f=_.y,_=n(c,b,-g),c=_.x,b=_.y;var s=(t-c)/2,A=(f-b)/2,m=s*s/(o*o)+A*A/(i*i);m>1&&(m=Math.sqrt(m),o=m*o,i=m*i);var h=o*o,x=i*i,u=(p==y?-1:1)*Math.sqrt(Math.abs((h*x-h*A*A-x*s*s)/(h*A*A+x*s*s)));u==1/0&&(u=1);var L=u*o*A/i+(t+c)/2,S=u*-i*s/o+(f+b)/2,k=Math.asin(((f-S)/i).toFixed(9)),P=Math.asin(((b-S)/i).toFixed(9));k=t<L?w-k:k,P=c<L?w-P:P,k<0&&(k=w*2+k),P<0&&(P=w*2+P),y&&k>P&&(k=k-w*2),!y&&P>k&&(P=P-w*2)}if(Math.abs(P-k)>v){var z=P,I=c,D=b;P=k+v*(y&&P>k?1:-1),c=L+o*Math.cos(P),b=S+i*Math.sin(P);var R=a(c,b,o,i,g,0,y,I,D,[P,z,L,S])}var O=Math.tan((P-k)/4),F=4/3*o*O,V=4/3*i*O,G=[2*t-(t+F*Math.sin(k)),2*f-(f-V*Math.cos(k)),c+F*Math.sin(P),b-V*Math.cos(P),c,b];if(l)return G;R&&(G=G.concat(R));for(var J=0;J<G.length;){var Z=n(G[J],G[J+1],g);G[J++]=Z.x,G[J++]=Z.y}return G}function n(t,f,o){return{x:t*Math.cos(o)-f*Math.sin(o),y:t*Math.sin(o)+f*Math.cos(o)}}function r(t){return t*(w/180)}},{}],247:[function(d,ne,ae){var w=Object.getOwnPropertySymbols,v=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;function T(a){if(a==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}function e(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de",Object.getOwnPropertyNames(a)[0]==="5")return!1;for(var n={},r=0;r<10;r++)n["_"+String.fromCharCode(r)]=r;var t=Object.getOwnPropertyNames(n).map(function(o){return n[o]});if(t.join("")!=="0123456789")return!1;var f={};return"abcdefghijklmnopqrst".split("").forEach(function(o){f[o]=o}),Object.keys(Object.assign({},f)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}ne.exports=e()?Object.assign:function(a,n){for(var r,t=T(a),f,o=1;o<arguments.length;o++){r=Object(arguments[o]);for(var i in r)v.call(r,i)&&(t[i]=r[i]);if(w){f=w(r);for(var g=0;g<f.length;g++)M.call(r,f[g])&&(t[f[g]]=r[f[g]])}}return t}},{}],248:[function(d,ne,ae){function w(T,e){if(typeof T!="string")return[T];var a=[T];typeof e=="string"||Array.isArray(e)?e={brackets:e}:e||(e={});var n=e.brackets?Array.isArray(e.brackets)?e.brackets:[e.brackets]:["{}","[]","()"],r=e.escape||"___",t=!!e.flat;n.forEach(function(i){var g=new RegExp(["\\",i[0],"[^\\",i[0],"\\",i[1],"]*\\",i[1]].join("")),p=[];function y(c,b,l){var _=a.push(c.slice(i[0].length,-i[1].length))-1;return p.push(_),r+_+r}a.forEach(function(c,b){for(var l,_=0;c!=l;)if(l=c,c=c.replace(g,y),_++>1e4)throw Error("References have circular dependency. Please, check them.");a[b]=c}),p=p.reverse(),a=a.map(function(c){return p.forEach(function(b){c=c.replace(new RegExp("(\\"+r+b+"\\"+r+")","g"),i[0]+"$1"+i[1])}),c})});var f=new RegExp("\\"+r+"([0-9]+)\\"+r);function o(i,g,p){for(var y=[],c,b=0;c=f.exec(i);){if(b++>1e4)throw Error("Circular references in parenthesis");y.push(i.slice(0,c.index)),y.push(o(g[c[1]],g)),i=i.slice(c.index+c[0].length)}return y.push(i),y}return t?a:o(a[0],a)}function v(T,e){if(e&&e.flat){var a=e&&e.escape||"___",n=T[0],r;if(!n)return"";for(var t=new RegExp("\\"+a+"([0-9]+)\\"+a),f=0;n!=r;){if(f++>1e4)throw Error("Circular references in "+T);r=n,n=n.replace(t,o)}return n}return T.reduce(function i(g,p){return Array.isArray(p)&&(p=p.reduce(i,"")),g+p},"");function o(i,g){if(T[g]==null)throw Error("Reference "+g+"is undefined");return T[g]}}function M(T,e){return Array.isArray(T)?v(T,e):w(T,e)}M.parse=w,M.stringify=v,ne.exports=M},{}],249:[function(d,ne,ae){var w=d("pick-by-alias");ne.exports=v;function v(M){var T;return arguments.length>1&&(M=arguments),typeof M=="string"?M=M.split(/\s/).map(parseFloat):typeof M=="number"&&(M=[M]),M.length&&typeof M[0]=="number"?M.length===1?T={width:M[0],height:M[0],x:0,y:0}:M.length===2?T={width:M[0],height:M[1],x:0,y:0}:T={x:M[0],y:M[1],width:M[2]-M[0]||0,height:M[3]-M[1]||0}:M&&(M=w(M,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),T={x:M.left||0,y:M.top||0},M.width==null?M.right?T.width=M.right-T.x:T.width=0:T.width=M.width,M.height==null?M.bottom?T.height=M.bottom-T.y:T.height=0:T.height=M.height),T}},{"pick-by-alias":253}],250:[function(d,ne,ae){ne.exports=M;var w={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},v=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function M(a){var n=[];return a.replace(v,function(r,t,f){var o=t.toLowerCase();for(f=e(f),o=="m"&&f.length>2&&(n.push([t].concat(f.splice(0,2))),o="l",t=t=="m"?"l":"L");;){if(f.length==w[o])return f.unshift(t),n.push(f);if(f.length<w[o])throw new Error("malformed path data");n.push([t].concat(f.splice(0,w[o])))}}),n}var T=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function e(a){var n=a.match(T);return n?n.map(Number):[]}},{}],251:[function(d,ne,ae){ne.exports=function(v,M){M||(M=[0,""]),v=String(v);var T=parseFloat(v,10);return M[0]=T,M[1]=v.match(/[\d.\-\+]*\s*(.*)/)[1]||"",M}},{}],252:[function(d,ne,ae){(function(w){(function(){(function(){var v,M,T,e,a,n;typeof performance<"u"&&performance!==null&&performance.now?ne.exports=function(){return performance.now()}:typeof w<"u"&&w!==null&&w.hrtime?(ne.exports=function(){return(v()-a)/1e6},M=w.hrtime,v=function(){var r;return r=M(),r[0]*1e9+r[1]},e=v(),n=w.uptime()*1e9,a=e-n):Date.now?(ne.exports=function(){return Date.now()-T},T=Date.now()):(ne.exports=function(){return new Date().getTime()-T},T=new Date().getTime())}).call(this)}).call(this)}).call(this,d("_process"))},{_process:277}],253:[function(d,ne,ae){ne.exports=function(T,e,a){var n={},r,t;if(typeof e=="string"&&(e=v(e)),Array.isArray(e)){var f={};for(t=0;t<e.length;t++)f[e[t]]=!0;e=f}for(r in e)e[r]=v(e[r]);var o={};for(r in e){var i=e[r];if(Array.isArray(i))for(t=0;t<i.length;t++){var g=i[t];if(a&&(o[g]=!0),g in T){if(n[r]=T[g],a)for(var p=t;p<i.length;p++)o[i[p]]=!0;break}}else r in T&&(e[r]&&(n[r]=T[r]),a&&(o[r]=!0))}if(a)for(r in T)o[r]||(n[r]=T[r]);return n};var w={};function v(M){return w[M]?w[M]:(typeof M=="string"&&(M=w[M]=M.split(/\s*,\s*|\s+/)),M)}},{}],254:[function(d,ne,ae){/*
 * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
 * @license MIT
 * @preserve Project Home: https://github.com/voidqk/polybooljs
 */var w=d("./lib/build-log"),v=d("./lib/epsilon"),M=d("./lib/intersecter"),T=d("./lib/segment-chainer"),e=d("./lib/segment-selector"),a=d("./lib/geojson"),n=!1,r=v(),t;t={buildLog:function(o){return o===!0?n=w():o===!1&&(n=!1),n===!1?!1:n.list},epsilon:function(o){return r.epsilon(o)},segments:function(o){var i=M(!0,r,n);return o.regions.forEach(i.addRegion),{segments:i.calculate(o.inverted),inverted:o.inverted}},combine:function(o,i){var g=M(!1,r,n);return{combined:g.calculate(o.segments,o.inverted,i.segments,i.inverted),inverted1:o.inverted,inverted2:i.inverted}},selectUnion:function(o){return{segments:e.union(o.combined,n),inverted:o.inverted1||o.inverted2}},selectIntersect:function(o){return{segments:e.intersect(o.combined,n),inverted:o.inverted1&&o.inverted2}},selectDifference:function(o){return{segments:e.difference(o.combined,n),inverted:o.inverted1&&!o.inverted2}},selectDifferenceRev:function(o){return{segments:e.differenceRev(o.combined,n),inverted:!o.inverted1&&o.inverted2}},selectXor:function(o){return{segments:e.xor(o.combined,n),inverted:o.inverted1!==o.inverted2}},polygon:function(o){return{regions:T(o.segments,r,n),inverted:o.inverted}},polygonFromGeoJSON:function(o){return a.toPolygon(t,o)},polygonToGeoJSON:function(o){return a.fromPolygon(t,r,o)},union:function(o,i){return f(o,i,t.selectUnion)},intersect:function(o,i){return f(o,i,t.selectIntersect)},difference:function(o,i){return f(o,i,t.selectDifference)},differenceRev:function(o,i){return f(o,i,t.selectDifferenceRev)},xor:function(o,i){return f(o,i,t.selectXor)}};function f(o,i,g){var p=t.segments(o),y=t.segments(i),c=t.combine(p,y),b=g(c);return t.polygon(b)}typeof window=="object"&&(window.PolyBool=t),ne.exports=t},{"./lib/build-log":255,"./lib/epsilon":256,"./lib/geojson":257,"./lib/intersecter":258,"./lib/segment-chainer":260,"./lib/segment-selector":261}],255:[function(d,ne,ae){function w(){var v,M=0,T=!1;function e(a,n){return v.list.push({type:a,data:n?JSON.parse(JSON.stringify(n)):void 0}),v}return v={list:[],segmentId:function(){return M++},checkIntersection:function(a,n){return e("check",{seg1:a,seg2:n})},segmentChop:function(a,n){return e("div_seg",{seg:a,pt:n}),e("chop",{seg:a,pt:n})},statusRemove:function(a){return e("pop_seg",{seg:a})},segmentUpdate:function(a){return e("seg_update",{seg:a})},segmentNew:function(a,n){return e("new_seg",{seg:a,primary:n})},segmentRemove:function(a){return e("rem_seg",{seg:a})},tempStatus:function(a,n,r){return e("temp_status",{seg:a,above:n,below:r})},rewind:function(a){return e("rewind",{seg:a})},status:function(a,n,r){return e("status",{seg:a,above:n,below:r})},vert:function(a){return a===T?v:(T=a,e("vert",{x:a}))},log:function(a){return typeof a!="string"&&(a=JSON.stringify(a,!1,"  ")),e("log",{txt:a})},reset:function(){return e("reset")},selected:function(a){return e("selected",{segs:a})},chainStart:function(a){return e("chain_start",{seg:a})},chainRemoveHead:function(a,n){return e("chain_rem_head",{index:a,pt:n})},chainRemoveTail:function(a,n){return e("chain_rem_tail",{index:a,pt:n})},chainNew:function(a,n){return e("chain_new",{pt1:a,pt2:n})},chainMatch:function(a){return e("chain_match",{index:a})},chainClose:function(a){return e("chain_close",{index:a})},chainAddHead:function(a,n){return e("chain_add_head",{index:a,pt:n})},chainAddTail:function(a,n){return e("chain_add_tail",{index:a,pt:n})},chainConnect:function(a,n){return e("chain_con",{index1:a,index2:n})},chainReverse:function(a){return e("chain_rev",{index:a})},chainJoin:function(a,n){return e("chain_join",{index1:a,index2:n})},done:function(){return e("done")}},v}ne.exports=w},{}],256:[function(d,ne,ae){function w(v){typeof v!="number"&&(v=1e-10);var M={epsilon:function(T){return typeof T=="number"&&(v=T),v},pointAboveOrOnLine:function(T,e,a){var n=e[0],r=e[1],t=a[0],f=a[1],o=T[0],i=T[1];return(t-n)*(i-r)-(f-r)*(o-n)>=-v},pointBetween:function(T,e,a){var n=T[1]-e[1],r=a[0]-e[0],t=T[0]-e[0],f=a[1]-e[1],o=t*r+n*f;if(o<v)return!1;var i=r*r+f*f;return!(o-i>-v)},pointsSameX:function(T,e){return Math.abs(T[0]-e[0])<v},pointsSameY:function(T,e){return Math.abs(T[1]-e[1])<v},pointsSame:function(T,e){return M.pointsSameX(T,e)&&M.pointsSameY(T,e)},pointsCompare:function(T,e){return M.pointsSameX(T,e)?M.pointsSameY(T,e)?0:T[1]<e[1]?-1:1:T[0]<e[0]?-1:1},pointsCollinear:function(T,e,a){var n=T[0]-e[0],r=T[1]-e[1],t=e[0]-a[0],f=e[1]-a[1];return Math.abs(n*f-t*r)<v},linesIntersect:function(T,e,a,n){var r=e[0]-T[0],t=e[1]-T[1],f=n[0]-a[0],o=n[1]-a[1],i=r*o-t*f;if(Math.abs(i)<v)return!1;var g=T[0]-a[0],p=T[1]-a[1],y=(f*p-o*g)/i,c=(r*p-t*g)/i,b={alongA:0,alongB:0,pt:[T[0]+y*r,T[1]+y*t]};return y<=-v?b.alongA=-2:y<v?b.alongA=-1:y-1<=-v?b.alongA=0:y-1<v?b.alongA=1:b.alongA=2,c<=-v?b.alongB=-2:c<v?b.alongB=-1:c-1<=-v?b.alongB=0:c-1<v?b.alongB=1:b.alongB=2,b},pointInsideRegion:function(T,e){for(var a=T[0],n=T[1],r=e[e.length-1][0],t=e[e.length-1][1],f=!1,o=0;o<e.length;o++){var i=e[o][0],g=e[o][1];g-n>v!=t-n>v&&(r-i)*(n-g)/(t-g)+i-a>v&&(f=!f),r=i,t=g}return f}};return M}ne.exports=w},{}],257:[function(d,ne,ae){var w={toPolygon:function(v,M){function T(n){if(n.length<=0)return v.segments({inverted:!1,regions:[]});function r(o){var i=o.slice(0,o.length-1);return v.segments({inverted:!1,regions:[i]})}for(var t=r(n[0]),f=1;f<n.length;f++)t=v.selectDifference(v.combine(t,r(n[f])));return t}if(M.type==="Polygon")return v.polygon(T(M.coordinates));if(M.type==="MultiPolygon"){for(var e=v.segments({inverted:!1,regions:[]}),a=0;a<M.coordinates.length;a++)e=v.selectUnion(v.combine(e,T(M.coordinates[a])));return v.polygon(e)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(v,M,T){T=v.polygon(v.segments(T));function e(y,c){return M.pointInsideRegion([(y[0][0]+y[1][0])*.5,(y[0][1]+y[1][1])*.5],c)}function a(y){return{region:y,children:[]}}var n=a(null);function r(y,c){for(var b=0;b<y.children.length;b++){var l=y.children[b];if(e(c,l.region)){r(l,c);return}}for(var _=a(c),b=0;b<y.children.length;b++){var l=y.children[b];e(l.region,c)&&(_.children.push(l),y.children.splice(b,1),b--)}y.children.push(_)}for(var t=0;t<T.regions.length;t++){var f=T.regions[t];f.length<3||r(n,f)}function o(y,c){for(var b=0,l=y[y.length-1][0],_=y[y.length-1][1],s=[],A=0;A<y.length;A++){var m=y[A][0],h=y[A][1];s.push([m,h]),b+=h*l-m*_,l=m,_=h}var x=b<0;return x!==c&&s.reverse(),s.push([s[0][0],s[0][1]]),s}var i=[];function g(y){var c=[o(y.region,!1)];i.push(c);for(var b=0;b<y.children.length;b++)c.push(p(y.children[b]))}function p(y){for(var c=0;c<y.children.length;c++)g(y.children[c]);return o(y.region,!0)}for(var t=0;t<n.children.length;t++)g(n.children[t]);return i.length<=0?{type:"Polygon",coordinates:[]}:i.length==1?{type:"Polygon",coordinates:i[0]}:{type:"MultiPolygon",coordinates:i}}};ne.exports=w},{}],258:[function(d,ne,ae){var w=d("./linked-list");function v(M,T,e){function a(b,l){return{id:e?e.segmentId():-1,start:b,end:l,myFill:{above:null,below:null},otherFill:null}}function n(b,l,_){return{id:e?e.segmentId():-1,start:b,end:l,myFill:{above:_.myFill.above,below:_.myFill.below},otherFill:null}}var r=w.create();function t(b,l,_,s,A,m){var h=T.pointsCompare(l,A);return h!==0?h:T.pointsSame(_,m)?0:b!==s?b?1:-1:T.pointAboveOrOnLine(_,s?A:m,s?m:A)?1:-1}function f(b,l){r.insertBefore(b,function(_){var s=t(b.isStart,b.pt,l,_.isStart,_.pt,_.other.pt);return s<0})}function o(b,l){var _=w.node({isStart:!0,pt:b.start,seg:b,primary:l,other:null,status:null});return f(_,b.end),_}function i(b,l,_){var s=w.node({isStart:!1,pt:l.end,seg:l,primary:_,other:b,status:null});b.other=s,f(s,b.pt)}function g(b,l){var _=o(b,l);return i(_,b,l),_}function p(b,l){e&&e.segmentChop(b.seg,l),b.other.remove(),b.seg.end=l,b.other.pt=l,f(b.other,b.pt)}function y(b,l){var _=n(l,b.seg.end,b.seg);return p(b,l),g(_,b.primary)}function c(b,l){var _=w.create();function s(R,O){var F=R.seg.start,V=R.seg.end,G=O.seg.start,J=O.seg.end;return T.pointsCollinear(F,G,J)?T.pointsCollinear(V,G,J)||T.pointAboveOrOnLine(V,G,J)?1:-1:T.pointAboveOrOnLine(F,G,J)?1:-1}function A(R){return _.findTransition(function(O){var F=s(R,O.ev);return F>0})}function m(R,O){var F=R.seg,V=O.seg,G=F.start,J=F.end,Z=V.start,Y=V.end;e&&e.checkIntersection(F,V);var j=T.linesIntersect(G,J,Z,Y);if(j===!1){if(!T.pointsCollinear(G,J,Z)||T.pointsSame(G,Y)||T.pointsSame(J,Z))return!1;var re=T.pointsSame(G,Z),se=T.pointsSame(J,Y);if(re&&se)return O;var oe=!re&&T.pointBetween(G,Z,Y),N=!se&&T.pointBetween(J,Z,Y);if(re)return N?y(O,J):y(R,Y),O;oe&&(se||(N?y(O,J):y(R,Y)),y(O,G))}else j.alongA===0&&(j.alongB===-1?y(R,Z):j.alongB===0?y(R,j.pt):j.alongB===1&&y(R,Y)),j.alongB===0&&(j.alongA===-1?y(O,G):j.alongA===0?y(O,j.pt):j.alongA===1&&y(O,J));return!1}for(var h=[];!r.isEmpty();){var x=r.getHead();if(e&&e.vert(x.pt[0]),x.isStart){let R=function(){if(L){var O=m(x,L);if(O)return O}return S?m(x,S):!1};e&&e.segmentNew(x.seg,x.primary);var u=A(x),L=u.before?u.before.ev:null,S=u.after?u.after.ev:null;e&&e.tempStatus(x.seg,L?L.seg:!1,S?S.seg:!1);var k=R();if(k){if(M){var P;x.seg.myFill.below===null?P=!0:P=x.seg.myFill.above!==x.seg.myFill.below,P&&(k.seg.myFill.above=!k.seg.myFill.above)}else k.seg.otherFill=x.seg.myFill;e&&e.segmentUpdate(k.seg),x.other.remove(),x.remove()}if(r.getHead()!==x){e&&e.rewind(x.seg);continue}if(M){var P;x.seg.myFill.below===null?P=!0:P=x.seg.myFill.above!==x.seg.myFill.below,S?x.seg.myFill.below=S.seg.myFill.above:x.seg.myFill.below=b,P?x.seg.myFill.above=!x.seg.myFill.below:x.seg.myFill.above=x.seg.myFill.below}else if(x.seg.otherFill===null){var z;S?x.primary===S.primary?z=S.seg.otherFill.above:z=S.seg.myFill.above:z=x.primary?l:b,x.seg.otherFill={above:z,below:z}}e&&e.status(x.seg,L?L.seg:!1,S?S.seg:!1),x.other.status=u.insert(w.node({ev:x}))}else{var I=x.status;if(I===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(_.exists(I.prev)&&_.exists(I.next)&&m(I.prev.ev,I.next.ev),e&&e.statusRemove(I.ev.seg),I.remove(),!x.primary){var D=x.seg.myFill;x.seg.myFill=x.seg.otherFill,x.seg.otherFill=D}h.push(x.seg)}r.getHead().remove()}return e&&e.done(),h}return M?{addRegion:function(b){for(var l,_=b[b.length-1],s=0;s<b.length;s++){l=_,_=b[s];var A=T.pointsCompare(l,_);A!==0&&g(a(A<0?l:_,A<0?_:l),!0)}},calculate:function(b){return c(b,!1)}}:{calculate:function(b,l,_,s){return b.forEach(function(A){g(n(A.start,A.end,A),!0)}),_.forEach(function(A){g(n(A.start,A.end,A),!1)}),c(l,s)}}}ne.exports=v},{"./linked-list":259}],259:[function(d,ne,ae){var w={create:function(){var v={root:{root:!0,next:null},exists:function(M){return!(M===null||M===v.root)},isEmpty:function(){return v.root.next===null},getHead:function(){return v.root.next},insertBefore:function(M,T){for(var e=v.root,a=v.root.next;a!==null;){if(T(a)){M.prev=a.prev,M.next=a,a.prev.next=M,a.prev=M;return}e=a,a=a.next}e.next=M,M.prev=e,M.next=null},findTransition:function(M){for(var T=v.root,e=v.root.next;e!==null&&!M(e);)T=e,e=e.next;return{before:T===v.root?null:T,after:e,insert:function(a){return a.prev=T,a.next=e,T.next=a,e!==null&&(e.prev=a),a}}}};return v},node:function(v){return v.prev=null,v.next=null,v.remove=function(){v.prev.next=v.next,v.next&&(v.next.prev=v.prev),v.prev=null,v.next=null},v}};ne.exports=w},{}],260:[function(d,ne,ae){function w(v,M,T){var e=[],a=[];return v.forEach(function(n){var r=n.start,t=n.end;if(M.pointsSame(r,t)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}T&&T.chainStart(n);var f={index:0,matches_head:!1,matches_pt1:!1},o={index:0,matches_head:!1,matches_pt1:!1},i=f;function g(z,I,D){return i.index=z,i.matches_head=I,i.matches_pt1=D,i===f?(i=o,!1):(i=null,!0)}for(var p=0;p<e.length;p++){var y=e[p],c=y[0];y[1];var b=y[y.length-1];if(y[y.length-2],M.pointsSame(c,r)){if(g(p,!0,!0))break}else if(M.pointsSame(c,t)){if(g(p,!0,!1))break}else if(M.pointsSame(b,r)){if(g(p,!1,!0))break}else if(M.pointsSame(b,t)&&g(p,!1,!1))break}if(i===f){e.push([r,t]),T&&T.chainNew(r,t);return}if(i===o){T&&T.chainMatch(f.index);var l=f.index,_=f.matches_pt1?t:r,s=f.matches_head,y=e[l],A=s?y[0]:y[y.length-1],m=s?y[1]:y[y.length-2],h=s?y[y.length-1]:y[0],x=s?y[y.length-2]:y[1];if(M.pointsCollinear(m,A,_)&&(s?(T&&T.chainRemoveHead(f.index,_),y.shift()):(T&&T.chainRemoveTail(f.index,_),y.pop()),A=m),M.pointsSame(h,_)){e.splice(l,1),M.pointsCollinear(x,h,A)&&(s?(T&&T.chainRemoveTail(f.index,A),y.pop()):(T&&T.chainRemoveHead(f.index,A),y.shift())),T&&T.chainClose(f.index),a.push(y);return}s?(T&&T.chainAddHead(f.index,_),y.unshift(_)):(T&&T.chainAddTail(f.index,_),y.push(_));return}function u(z){T&&T.chainReverse(z),e[z].reverse()}function L(z,I){var D=e[z],R=e[I],O=D[D.length-1],F=D[D.length-2],V=R[0],G=R[1];M.pointsCollinear(F,O,V)&&(T&&T.chainRemoveTail(z,O),D.pop(),O=F),M.pointsCollinear(O,V,G)&&(T&&T.chainRemoveHead(I,V),R.shift()),T&&T.chainJoin(z,I),e[z]=D.concat(R),e.splice(I,1)}var S=f.index,k=o.index;T&&T.chainConnect(S,k);var P=e[S].length<e[k].length;f.matches_head?o.matches_head?P?(u(S),L(S,k)):(u(k),L(k,S)):L(k,S):o.matches_head?L(S,k):P?(u(S),L(k,S)):(u(k),L(S,k))}),a}ne.exports=w},{}],261:[function(d,ne,ae){function w(M,T,e){var a=[];return M.forEach(function(n){var r=(n.myFill.above?8:0)+(n.myFill.below?4:0)+(n.otherFill&&n.otherFill.above?2:0)+(n.otherFill&&n.otherFill.below?1:0);T[r]!==0&&a.push({id:e?e.segmentId():-1,start:n.start,end:n.end,myFill:{above:T[r]===1,below:T[r]===2},otherFill:null})}),e&&e.selected(a),a}var v={union:function(M,T){return w(M,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],T)},intersect:function(M,T){return w(M,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],T)},difference:function(M,T){return w(M,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],T)},differenceRev:function(M,T){return w(M,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],T)},xor:function(M,T){return w(M,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],T)}};ne.exports=v},{}],262:[function(d,ne,ae){var w=d("stream").Transform,v=d("stream-parser");function M(){w.call(this,{readableObjectMode:!0})}M.prototype=Object.create(w.prototype),M.prototype.constructor=M,v(M.prototype),ae.ParserStream=M,ae.sliceEq=function(e,a,n){for(var r=a,t=0;t<n.length;)if(e[r++]!==n[t++])return!1;return!0},ae.str2arr=function(e,a){var n=[],r=0;if(a&&a==="hex")for(;r<e.length;)n.push(parseInt(e.slice(r,r+2),16)),r+=2;else for(;r<e.length;r++)n.push(e.charCodeAt(r)&255);return n},ae.readUInt16LE=function(e,a){return e[a]|e[a+1]<<8},ae.readUInt16BE=function(e,a){return e[a+1]|e[a]<<8},ae.readUInt32LE=function(e,a){return e[a]|e[a+1]<<8|e[a+2]<<16|e[a+3]*16777216},ae.readUInt32BE=function(e,a){return e[a+3]|e[a+2]<<8|e[a+1]<<16|e[a]*16777216};function T(e,a,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||"",this.name=this.constructor.name,this.message=e,a&&(this.code=a),n&&(this.statusCode=n)}T.prototype=Object.create(Error.prototype),T.prototype.constructor=T,ae.ProbeError=T},{stream:285,"stream-parser":301}],263:[function(d,ne,ae){function w(T,e){var a=new Error(T);return a.code=e,a}function v(T){try{return decodeURIComponent(escape(T))}catch{return T}}function M(T,e,a){this.input=T.subarray(e,a),this.start=e;var n=String.fromCharCode.apply(null,this.input.subarray(0,4));if(n!=="II*\0"&&n!=="MM\0*")throw w("invalid TIFF signature","EBADDATA");this.big_endian=n[0]==="M"}M.prototype.each=function(T){this.aborted=!1;var e=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:e}];this.ifds_to_read.length>0&&!this.aborted;){var a=this.ifds_to_read.shift();!a.offset||this.scan_ifd(a.id,a.offset,T)}},M.prototype.read_uint16=function(T){var e=this.input;if(T+2>e.length)throw w("unexpected EOF","EBADDATA");return this.big_endian?e[T]*256+e[T+1]:e[T]+e[T+1]*256},M.prototype.read_uint32=function(T){var e=this.input;if(T+4>e.length)throw w("unexpected EOF","EBADDATA");return this.big_endian?e[T]*16777216+e[T+1]*65536+e[T+2]*256+e[T+3]:e[T]+e[T+1]*256+e[T+2]*65536+e[T+3]*16777216},M.prototype.is_subifd_link=function(T,e){return T===0&&e===34665||T===0&&e===34853||T===34665&&e===40965},M.prototype.exif_format_length=function(T){switch(T){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},M.prototype.exif_format_read=function(T,e){var a;switch(T){case 1:case 2:return a=this.input[e],a;case 6:return a=this.input[e],a|(a&128)*33554430;case 3:return a=this.read_uint16(e),a;case 8:return a=this.read_uint16(e),a|(a&32768)*131070;case 4:return a=this.read_uint32(e),a;case 9:return a=this.read_uint32(e),a|0;case 5:case 10:case 11:case 12:return null;case 7:return null;default:return null}},M.prototype.scan_ifd=function(T,e,a){var n=this.read_uint16(e);e+=2;for(var r=0;r<n;r++){var t=this.read_uint16(e),f=this.read_uint16(e+2),o=this.read_uint32(e+4),i=this.exif_format_length(f),g=o*i,p=g<=4?e+8:this.read_uint32(e+8),y=!1;if(p+g>this.input.length)throw w("unexpected EOF","EBADDATA");for(var c=[],b=p,l=0;l<o;l++,b+=i){var _=this.exif_format_read(f,b);if(_===null){c=null;break}c.push(_)}Array.isArray(c)&&f===2&&(c=v(String.fromCharCode.apply(null,c)),c&&c[c.length-1]==="\0"&&(c=c.slice(0,-1))),this.is_subifd_link(T,t)&&Array.isArray(c)&&Number.isInteger(c[0])&&c[0]>0&&(this.ifds_to_read.push({id:t,offset:c[0]}),y=!0);var s={is_big_endian:this.big_endian,ifd:T,tag:t,format:f,count:o,entry_offset:e+this.start,data_length:g,data_offset:p+this.start,value:c,is_subifd_link:y};if(a(s)===!1){this.aborted=!0;return}e+=12}T===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(e)})},ne.exports.ExifParser=M,ne.exports.get_orientation=function(T){var e=0;try{return new M(T,0,T.length).each(function(a){if(a.ifd===0&&a.tag===274&&Array.isArray(a.value))return e=a.value[0],!1}),e}catch{return-1}}},{}],264:[function(d,ne,ae){var w=d("./common").readUInt16BE,v=d("./common").readUInt32BE;function M(o,i){if(o.length<4+i)return null;var g=v(o,i);return o.length<g+i||g<8?null:{boxtype:String.fromCharCode.apply(null,o.slice(i+4,i+8)),data:o.slice(i+8,i+g),end:i+g}}ne.exports.unbox=M;function T(o,i){for(var g=0;;){var p=M(o,g);if(!p)break;switch(p.boxtype){case"ispe":i.sizes.push({width:v(p.data,4),height:v(p.data,8)});break;case"irot":i.transforms.push({type:"irot",value:p.data[0]&3});break;case"imir":i.transforms.push({type:"imir",value:p.data[0]&1});break}g=p.end}}function e(o,i,g){for(var p=0,y=0;y<g;y++)p=p*256+(o[i+y]||0);return p}function a(o,i){for(var g=o[4]>>4&15,p=o[4]&15,y=o[5]>>4&15,c=w(o,6),b=8,l=0;l<c;l++){var _=w(o,b);b+=2;var s=w(o,b);b+=2;var A=e(o,b,y);b+=y;var m=w(o,b);if(b+=2,s===0&&m===1){var h=e(o,b,g),x=e(o,b+g,p);i.item_loc[_]={length:x,offset:h+A}}b+=m*(g+p)}}function n(o,i){for(var g=w(o,4),p=6,y=0;y<g;y++){var c=M(o,p);if(!c)break;if(c.boxtype==="infe"){for(var b=w(c.data,4),l="",_=8;_<c.data.length&&c.data[_];_++)l+=String.fromCharCode(c.data[_]);i.item_inf[l]=b}p=c.end}}function r(o,i){for(var g=0;;){var p=M(o,g);if(!p)break;p.boxtype==="ipco"&&T(p.data,i),g=p.end}}function t(o,i){for(var g=4;;){var p=M(o,g);if(!p)break;p.boxtype==="iprp"&&r(p.data,i),p.boxtype==="iloc"&&a(p.data,i),p.boxtype==="iinf"&&n(p.data,i),g=p.end}}function f(o){var i=o.reduce(function(y,c){return y.width>c.width||y.width===c.width&&y.height>c.height?y:c}),g=o.reduce(function(y,c){return y.height>c.height||y.height===c.height&&y.width>c.width?y:c}),p;return i.width>g.height||i.width===g.height&&i.height>g.width?p=i:p=g,p}ne.exports.readSizeFromMeta=function(o){var i={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(t(o,i),!!i.sizes.length){var g=f(i.sizes),p=1;i.transforms.forEach(function(c){var b={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},l={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(c.type==="imir"&&(c.value===0?p=l[p]:(p=l[p],p=b[p],p=b[p])),c.type==="irot")for(var _=0;_<c.value;_++)p=b[p]});var y=null;return i.item_inf.Exif&&(y=i.item_loc[i.item_inf.Exif]),{width:g.width,height:g.height,orientation:i.transforms.length?p:null,variants:i.sizes,exif_location:y}}},ne.exports.getMimeType=function(o){var i=String.fromCharCode.apply(null,o.slice(0,4)),g={};g[i]=!0;for(var p=8;p<o.length;p+=4)g[String.fromCharCode.apply(null,o.slice(p,p+4))]=!0;if(!(!g.mif1&&!g.msf1&&!g.miaf))return i==="avif"||i==="avis"||i==="avio"?{type:"avif",mime:"image/avif"}:i==="heic"||i==="heix"?{type:"heic",mime:"image/heic"}:i==="hevc"||i==="hevx"?{type:"heic",mime:"image/heic-sequence"}:g.avif||g.avis?{type:"avif",mime:"image/avif"}:g.heic||g.heix||g.hevc||g.hevx||g.heis?g.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},{"./common":262}],265:[function(d,ne,ae){var w=d("../common").str2arr,v=d("../common").sliceEq,M=d("../common").readUInt32BE,T=d("../miaf_utils"),e=d("../exif_utils"),a=w("ftyp");ne.exports=function(n){if(!!v(n,4,a)){var r=T.unbox(n,0);if(!!r){var t=T.getMimeType(r.data);if(!!t){for(var f,o=r.end;;){var i=T.unbox(n,o);if(!i)break;if(o=i.end,i.boxtype==="mdat")return;if(i.boxtype==="meta"){f=i.data;break}}if(!!f){var g=T.readSizeFromMeta(f);if(!!g){var p={width:g.width,height:g.height,type:t.type,mime:t.mime,wUnits:"px",hUnits:"px"};if(g.variants.length>1&&(p.variants=g.variants),g.orientation&&(p.orientation=g.orientation),g.exif_location&&g.exif_location.offset+g.exif_location.length<=n.length){var y=M(n,g.exif_location.offset),c=n.slice(g.exif_location.offset+y+4,g.exif_location.offset+g.exif_location.length),b=e.get_orientation(c);b>0&&(p.orientation=b)}return p}}}}}}},{"../common":262,"../exif_utils":263,"../miaf_utils":264}],266:[function(d,ne,ae){var w=d("../common").str2arr,v=d("../common").sliceEq,M=d("../common").readUInt16LE,T=w("BM");ne.exports=function(e){if(!(e.length<26)&&!!v(e,0,T))return{width:M(e,18),height:M(e,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":262}],267:[function(d,ne,ae){var w=d("../common").str2arr,v=d("../common").sliceEq,M=d("../common").readUInt16LE,T=w("GIF87a"),e=w("GIF89a");ne.exports=function(a){if(!(a.length<10)&&!(!v(a,0,T)&&!v(a,0,e)))return{width:M(a,6),height:M(a,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":262}],268:[function(d,ne,ae){var w=d("../common").readUInt16LE,v=0,M=1,T=16;ne.exports=function(e){var a=w(e,0),n=w(e,2),r=w(e,4);if(!(a!==v||n!==M||!r)){for(var t=[],f={width:0,height:0},o=0;o<r;o++){var i=e[6+T*o]||256,g=e[6+T*o+1]||256,p={width:i,height:g};t.push(p),(i>f.width||g>f.height)&&(f=p)}return{width:f.width,height:f.height,variants:t,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},{"../common":262}],269:[function(d,ne,ae){var w=d("../common").readUInt16BE,v=d("../common").str2arr,M=d("../common").sliceEq,T=d("../exif_utils"),e=v("Exif\0\0");ne.exports=function(a){if(!(a.length<2)&&!(a[0]!==255||a[1]!==216||a[2]!==255))for(var n=2;;){for(;;){if(a.length-n<2)return;if(a[n++]===255)break}for(var r=a[n++],t;r===255;)r=a[n++];if(208<=r&&r<=217||r===1)t=0;else if(192<=r&&r<=254){if(a.length-n<2)return;t=w(a,n)-2,n+=2}else return;if(r===217||r===218)return;var f;if(r===225&&t>=10&&M(a,n,e)&&(f=T.get_orientation(a.slice(n+6,n+t))),t>=5&&192<=r&&r<=207&&r!==196&&r!==200&&r!==204){if(a.length-n<t)return;var o={width:w(a,n+3),height:w(a,n+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return f>0&&(o.orientation=f),o}n+=t}}},{"../common":262,"../exif_utils":263}],270:[function(d,ne,ae){var w=d("../common").str2arr,v=d("../common").sliceEq,M=d("../common").readUInt32BE,T=w(`\x89PNG\r

`),e=w("IHDR");ne.exports=function(a){if(!(a.length<24)&&!!v(a,0,T)&&!!v(a,12,e))return{width:M(a,16),height:M(a,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":262}],271:[function(d,ne,ae){var w=d("../common").str2arr,v=d("../common").sliceEq,M=d("../common").readUInt32BE,T=w("8BPS\0");ne.exports=function(e){if(!(e.length<6+16)&&!!v(e,0,T))return{width:M(e,6+12),height:M(e,6+8),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":262}],272:[function(d,ne,ae){function w(i){return i===32||i===9||i===13||i===10}function v(i){return typeof i=="number"&&isFinite(i)&&i>0}function M(i){var g=0,p=i.length;for(i[0]===239&&i[1]===187&&i[2]===191&&(g=3);g<p&&w(i[g]);)g++;return g===p?!1:i[g]===60}var T=/<[-_.:a-zA-Z0-9][^>]*>/,e=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,a=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,n=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,r=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,t=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function f(i){var g=i.match(a),p=i.match(n),y=i.match(r);return{width:g&&(g[1]||g[2]),height:p&&(p[1]||p[2]),viewbox:y&&(y[1]||y[2])}}function o(i){return t.test(i)?i.match(t)[0]:"px"}ne.exports=function(i){if(!!M(i)){for(var g="",p=0;p<i.length;p++)g+=String.fromCharCode(i[p]);var y=(g.match(T)||[""])[0];if(!!e.test(y)){var c=f(y),b=parseFloat(c.width),l=parseFloat(c.height);if(c.width&&c.height)return!v(b)||!v(l)?void 0:{width:b,height:l,type:"svg",mime:"image/svg+xml",wUnits:o(c.width),hUnits:o(c.height)};var _=(c.viewbox||"").split(" "),s={width:_[2],height:_[3]},A=parseFloat(s.width),m=parseFloat(s.height);if(!(!v(A)||!v(m))&&o(s.width)===o(s.height)){var h=A/m;return c.width?v(b)?{width:b,height:b/h,type:"svg",mime:"image/svg+xml",wUnits:o(c.width),hUnits:o(c.width)}:void 0:c.height?v(l)?{width:l*h,height:l,type:"svg",mime:"image/svg+xml",wUnits:o(c.height),hUnits:o(c.height)}:void 0:{width:A,height:m,type:"svg",mime:"image/svg+xml",wUnits:o(s.width),hUnits:o(s.height)}}}}}},{}],273:[function(d,ne,ae){var w=d("../common").str2arr,v=d("../common").sliceEq,M=d("../common").readUInt16LE,T=d("../common").readUInt16BE,e=d("../common").readUInt32LE,a=d("../common").readUInt32BE,n=w("II*\0"),r=w("MM\0*");function t(i,g,p){return p?T(i,g):M(i,g)}function f(i,g,p){return p?a(i,g):e(i,g)}function o(i,g,p){var y=t(i,g+2,p),c=f(i,g+4,p);return c!==1||y!==3&&y!==4?null:y===3?t(i,g+8,p):f(i,g+8,p)}ne.exports=function(i){if(!(i.length<8)&&!(!v(i,0,n)&&!v(i,0,r))){var g=i[0]===77,p=f(i,4,g)-8;if(!(p<0)){var y=p+8;if(!(i.length-y<2)){var c=t(i,y+0,g)*12;if(!(c<=0)&&(y+=2,!(i.length-y<c))){var b,l,_,s;for(b=0;b<c;b+=12)s=t(i,y+b,g),s===256?l=o(i,y+b,g):s===257&&(_=o(i,y+b,g));if(l&&_)return{width:l,height:_,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}}}}}}},{"../common":262}],274:[function(d,ne,ae){var w=d("../common").str2arr,v=d("../common").sliceEq,M=d("../common").readUInt16LE,T=d("../common").readUInt32LE,e=d("../exif_utils"),a=w("RIFF"),n=w("WEBP");function r(o,i){if(!(o[i+3]!==157||o[i+4]!==1||o[i+5]!==42))return{width:M(o,i+6)&16383,height:M(o,i+8)&16383,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function t(o,i){if(o[i]===47){var g=T(o,i+1);return{width:(g&16383)+1,height:(g>>14&16383)+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function f(o,i){return{width:(o[i+6]<<16|o[i+5]<<8|o[i+4])+1,height:(o[i+9]<<i|o[i+8]<<8|o[i+7])+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}ne.exports=function(o){if(!(o.length<16)&&!(!v(o,0,a)&&!v(o,8,n))){var i=12,g=null,p=0,y=T(o,4)+8;if(!(y>o.length)){for(;i+8<y;){if(o[i]===0){i++;continue}var c=String.fromCharCode.apply(null,o.slice(i,i+4)),b=T(o,i+4);c==="VP8 "&&b>=10?g=g||r(o,i+8):c==="VP8L"&&b>=9?g=g||t(o,i+8):c==="VP8X"&&b>=10?g=g||f(o,i+8):c==="EXIF"&&(p=e.get_orientation(o.slice(i+8,i+8+b)),i=1/0),i+=8+b}if(!!g)return p>0&&(g.orientation=p),g}}}},{"../common":262,"../exif_utils":263}],275:[function(d,ne,ae){ne.exports={avif:d("./parse_sync/avif"),bmp:d("./parse_sync/bmp"),gif:d("./parse_sync/gif"),ico:d("./parse_sync/ico"),jpeg:d("./parse_sync/jpeg"),png:d("./parse_sync/png"),psd:d("./parse_sync/psd"),svg:d("./parse_sync/svg"),tiff:d("./parse_sync/tiff"),webp:d("./parse_sync/webp")}},{"./parse_sync/avif":265,"./parse_sync/bmp":266,"./parse_sync/gif":267,"./parse_sync/ico":268,"./parse_sync/jpeg":269,"./parse_sync/png":270,"./parse_sync/psd":271,"./parse_sync/svg":272,"./parse_sync/tiff":273,"./parse_sync/webp":274}],276:[function(d,ne,ae){var w=d("./lib/parsers_sync");function v(M){for(var T=Object.keys(w),e=0;e<T.length;e++){var a=w[T[e]](M);if(a)return a}return null}ne.exports=function(T){return v(T)},ne.exports.parsers=w},{"./lib/parsers_sync":275}],277:[function(d,ne,ae){var w=ne.exports={},v,M;function T(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?v=setTimeout:v=T}catch{v=T}try{typeof clearTimeout=="function"?M=clearTimeout:M=e}catch{M=e}})();function a(c){if(v===setTimeout)return setTimeout(c,0);if((v===T||!v)&&setTimeout)return v=setTimeout,setTimeout(c,0);try{return v(c,0)}catch{try{return v.call(null,c,0)}catch{return v.call(this,c,0)}}}function n(c){if(M===clearTimeout)return clearTimeout(c);if((M===e||!M)&&clearTimeout)return M=clearTimeout,clearTimeout(c);try{return M(c)}catch{try{return M.call(null,c)}catch{return M.call(this,c)}}}var r=[],t=!1,f,o=-1;function i(){!t||!f||(t=!1,f.length?r=f.concat(r):o=-1,r.length&&g())}function g(){if(!t){var c=a(i);t=!0;for(var b=r.length;b;){for(f=r,r=[];++o<b;)f&&f[o].run();o=-1,b=r.length}f=null,t=!1,n(c)}}w.nextTick=function(c){var b=new Array(arguments.length-1);if(arguments.length>1)for(var l=1;l<arguments.length;l++)b[l-1]=arguments[l];r.push(new p(c,b)),r.length===1&&!t&&a(g)};function p(c,b){this.fun=c,this.array=b}p.prototype.run=function(){this.fun.apply(null,this.array)},w.title="browser",w.browser=!0,w.env={},w.argv=[],w.version="",w.versions={};function y(){}w.on=y,w.addListener=y,w.once=y,w.off=y,w.removeListener=y,w.removeAllListeners=y,w.emit=y,w.prependListener=y,w.prependOnceListener=y,w.listeners=function(c){return[]},w.binding=function(c){throw new Error("process.binding is not supported")},w.cwd=function(){return"/"},w.chdir=function(c){throw new Error("process.chdir is not supported")},w.umask=function(){return 0}},{}],278:[function(d,ne,ae){(function(w){(function(){for(var v=d("performance-now"),M=typeof window>"u"?w:window,T=["moz","webkit"],e="AnimationFrame",a=M["request"+e],n=M["cancel"+e]||M["cancelRequest"+e],r=0;!a&&r<T.length;r++)a=M[T[r]+"Request"+e],n=M[T[r]+"Cancel"+e]||M[T[r]+"CancelRequest"+e];if(!a||!n){var t=0,f=0,o=[],i=1e3/60;a=function(g){if(o.length===0){var p=v(),y=Math.max(0,i-(p-t));t=y+p,setTimeout(function(){var c=o.slice(0);o.length=0;for(var b=0;b<c.length;b++)if(!c[b].cancelled)try{c[b].callback(t)}catch(l){setTimeout(function(){throw l},0)}},Math.round(y))}return o.push({handle:++f,callback:g,cancelled:!1}),f},n=function(g){for(var p=0;p<o.length;p++)o[p].handle===g&&(o[p].cancelled=!0)}}ne.exports=function(g){return a.call(M,g)},ne.exports.cancel=function(){n.apply(M,arguments)},ne.exports.polyfill=function(g){g||(g=M),g.requestAnimationFrame=a,g.cancelAnimationFrame=n}}).call(this)}).call(this,typeof To<"u"?To:typeof self<"u"?self:typeof window<"u"?window:{})},{"performance-now":252}],279:[function(d,ne,ae){var w=d("array-bounds"),v=d("color-normalize"),M=d("update-diff"),T=d("pick-by-alias"),e=d("object-assign"),a=d("flatten-vertex-data"),n=d("to-float32"),r=n.float32,t=n.fract32;ne.exports=o;var f=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]];function o(i,g){if(typeof i=="function"?(g||(g={}),g.regl=i):g=i,g.length&&(g.positions=g),i=g.regl,!i.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var p=i._gl,y,c,b,l,_,s,A={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},m=[];return l=i.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),c=i.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),b=i.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),_=i.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),s=i.buffer({usage:"static",type:"float",data:f}),L(g),y=i({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:i.prop("range"),lineWidth:i.prop("lineWidth"),capSize:i.prop("capSize"),opacity:i.prop("opacity"),scale:i.prop("scale"),translate:i.prop("translate"),scaleFract:i.prop("scaleFract"),translateFract:i.prop("translateFract"),viewport:function(k,P){return[P.viewport.x,P.viewport.y,k.viewportWidth,k.viewportHeight]}},attributes:{color:{buffer:l,offset:function(k,P){return P.offset*4},divisor:1},position:{buffer:c,offset:function(k,P){return P.offset*8},divisor:1},positionFract:{buffer:b,offset:function(k,P){return P.offset*8},divisor:1},error:{buffer:_,offset:function(k,P){return P.offset*16},divisor:1},direction:{buffer:s,stride:24,offset:0},lineOffset:{buffer:s,stride:24,offset:8},capOffset:{buffer:s,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:i.prop("viewport")},viewport:i.prop("viewport"),stencil:!1,instances:i.prop("count"),count:f.length}),e(h,{update:L,draw:x,destroy:S,regl:i,gl:p,canvas:p.canvas,groups:m}),h;function h(k){k?L(k):k===null&&S(),x()}function x(k){if(typeof k=="number")return u(k);k&&!Array.isArray(k)&&(k=[k]),i._refresh(),m.forEach(function(P,z){if(!!P){if(k&&(k[z]?P.draw=!0:P.draw=!1),!P.draw){P.draw=!0;return}u(z)}})}function u(k){typeof k=="number"&&(k=m[k]),k!=null&&(!(k&&k.count&&k.color&&k.opacity&&k.positions&&k.positions.length>1)||(k.scaleRatio=[k.scale[0]*k.viewport.width,k.scale[1]*k.viewport.height],y(k),k.after&&k.after(k)))}function L(k){if(!!k){k.length!=null?typeof k[0]=="number"&&(k=[{positions:k}]):Array.isArray(k)||(k=[k]);var P=0,z=0;if(h.groups=m=k.map(function(G,J){var Z=m[J];if(G)typeof G=="function"?G={after:G}:typeof G[0]=="number"&&(G={positions:G});else return Z;return G=T(G,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),Z||(m[J]=Z={id:J,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},G=e({},A,G)),M(Z,G,[{lineWidth:function(Y){return+Y*.5},capSize:function(Y){return+Y*.5},opacity:parseFloat,errors:function(Y){return Y=a(Y),z+=Y.length,Y},positions:function(Y,j){return Y=a(Y,"float64"),j.count=Math.floor(Y.length/2),j.bounds=w(Y,2),j.offset=P,P+=j.count,Y}},{color:function(Y,j){var re=j.count;if(Y||(Y="transparent"),!Array.isArray(Y)||typeof Y[0]=="number"){var se=Y;Y=Array(re);for(var oe=0;oe<re;oe++)Y[oe]=se}if(Y.length<re)throw Error("Not enough colors");for(var N=new Uint8Array(re*4),U=0;U<re;U++){var q=v(Y[U],"uint8");N.set(q,U*4)}return N},range:function(Y,j,re){var se=j.bounds;return Y||(Y=se),j.scale=[1/(Y[2]-Y[0]),1/(Y[3]-Y[1])],j.translate=[-Y[0],-Y[1]],j.scaleFract=t(j.scale),j.translateFract=t(j.translate),Y},viewport:function(Y){var j;return Array.isArray(Y)?j={x:Y[0],y:Y[1],width:Y[2]-Y[0],height:Y[3]-Y[1]}:Y?(j={x:Y.x||Y.left||0,y:Y.y||Y.top||0},Y.right?j.width=Y.right-j.x:j.width=Y.w||Y.width||0,Y.bottom?j.height=Y.bottom-j.y:j.height=Y.h||Y.height||0):j={x:0,y:0,width:p.drawingBufferWidth,height:p.drawingBufferHeight},j}}]),Z}),P||z){var I=m.reduce(function(G,J,Z){return G+(J?J.count:0)},0),D=new Float64Array(I*2),R=new Uint8Array(I*4),O=new Float32Array(I*4);m.forEach(function(G,J){if(!!G){var Z=G.positions,Y=G.count,j=G.offset,re=G.color,se=G.errors;!Y||(R.set(re,j*4),O.set(se,j*4),D.set(Z,j*2))}});var F=r(D);c(F);var V=t(D,F);b(V),l(R),_(O)}}}function S(){c.destroy(),b.destroy(),l.destroy(),_.destroy(),s.destroy()}}},{"array-bounds":71,"color-normalize":89,"flatten-vertex-data":191,"object-assign":247,"pick-by-alias":253,"to-float32":313,"update-diff":329}],280:[function(d,ne,ae){var w=d("color-normalize"),v=d("array-bounds"),M=d("object-assign"),T=d("glslify"),e=d("pick-by-alias"),a=d("flatten-vertex-data"),n=d("earcut"),r=d("array-normalize"),t=d("to-float32"),f=t.float32,o=t.fract32,i=d("es6-weak-map"),g=d("parse-rect"),p=d("array-find-index");ne.exports=y;function y(c,b){if(!(this instanceof y))return new y(c,b);if(typeof c=="function"?(b||(b={}),b.regl=c):b=c,b.length&&(b.positions=b),c=b.regl,!c.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=c._gl,this.regl=c,this.passes=[],this.shaders=y.shaders.has(c)?y.shaders.get(c):y.shaders.set(c,y.createShaders(c)).get(c),this.update(b)}y.dashMult=2,y.maxPatternLength=256,y.precisionThreshold=3e6,y.maxPoints=1e4,y.maxLines=2048,y.shaders=new i,y.createShaders=function(c){var b=c.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),l={primitive:"triangle strip",instances:c.prop("count"),count:4,offset:0,uniforms:{miterMode:function(m,h){return h.join==="round"?2:1},miterLimit:c.prop("miterLimit"),scale:c.prop("scale"),scaleFract:c.prop("scaleFract"),translateFract:c.prop("translateFract"),translate:c.prop("translate"),thickness:c.prop("thickness"),dashTexture:c.prop("dashTexture"),opacity:c.prop("opacity"),pixelRatio:c.context("pixelRatio"),id:c.prop("id"),dashLength:c.prop("dashLength"),viewport:function(m,h){return[h.viewport.x,h.viewport.y,m.viewportWidth,m.viewportHeight]},depth:c.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(m,h){return!h.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:c.prop("viewport")},viewport:c.prop("viewport")},_=c(M({vert:T([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`]),frag:T([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:b,divisor:0,stride:8,offset:0},lineTop:{buffer:b,divisor:0,stride:8,offset:4},aCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:c.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:c.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:c.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},l)),s;try{s=c(M({cull:{enable:!0,face:"back"},vert:T([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);

	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`]),frag:T([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:b,divisor:0,stride:8,offset:0},lineTop:{buffer:b,divisor:0,stride:8,offset:4},aColor:{buffer:c.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:c.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:c.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},l))}catch{s=_}var A=c({primitive:"triangle",elements:function(m,h){return h.triangles},offset:0,vert:T([`precision highp float;
#define GLSLIFY 1

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`]),frag:T([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`]),uniforms:{scale:c.prop("scale"),color:c.prop("fill"),scaleFract:c.prop("scaleFract"),translateFract:c.prop("translateFract"),translate:c.prop("translate"),opacity:c.prop("opacity"),pixelRatio:c.context("pixelRatio"),id:c.prop("id"),viewport:function(m,h){return[h.viewport.x,h.viewport.y,m.viewportWidth,m.viewportHeight]}},attributes:{position:{buffer:c.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:c.prop("positionFractBuffer"),stride:8,offset:8}},blend:l.blend,depth:{enable:!1},scissor:l.scissor,stencil:l.stencil,viewport:l.viewport});return{fill:A,rect:_,miter:s}},y.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},y.prototype.render=function(){for(var c,b=[],l=arguments.length;l--;)b[l]=arguments[l];b.length&&(c=this).update.apply(c,b),this.draw()},y.prototype.draw=function(){for(var c=this,b=[],l=arguments.length;l--;)b[l]=arguments[l];return(b.length?b:this.passes).forEach(function(_,s){var A;if(_&&Array.isArray(_))return(A=c).draw.apply(A,_);typeof _=="number"&&(_=c.passes[_]),_&&_.count>1&&_.opacity&&(c.regl._refresh(),_.fill&&_.triangles&&_.triangles.length>2&&c.shaders.fill(_),_.thickness&&(_.scale[0]*_.viewport.width>y.precisionThreshold||_.scale[1]*_.viewport.height>y.precisionThreshold||_.join==="rect"||!_.join&&(_.thickness<=2||_.count>=y.maxPoints)?c.shaders.rect(_):c.shaders.miter(_)))}),this},y.prototype.update=function(c){var b=this;if(!!c){c.length!=null?typeof c[0]=="number"&&(c=[{positions:c}]):Array.isArray(c)||(c=[c]);var l=this,_=l.regl,s=l.gl;if(c.forEach(function(u,L){var S=b.passes[L];if(u!==void 0){if(u===null){b.passes[L]=null;return}if(typeof u[0]=="number"&&(u={positions:u}),u=e(u,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),S||(b.passes[L]=S={id:L,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:_.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:_.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:_.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:_.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},u=M({},y.defaults,u)),u.thickness!=null&&(S.thickness=parseFloat(u.thickness)),u.opacity!=null&&(S.opacity=parseFloat(u.opacity)),u.miterLimit!=null&&(S.miterLimit=parseFloat(u.miterLimit)),u.overlay!=null&&(S.overlay=!!u.overlay,L<y.maxLines&&(S.depth=2*(y.maxLines-1-L%y.maxLines)/y.maxLines-1)),u.join!=null&&(S.join=u.join),u.hole!=null&&(S.hole=u.hole),u.fill!=null&&(S.fill=u.fill?w(u.fill,"uint8"):null),u.viewport!=null&&(S.viewport=g(u.viewport)),S.viewport||(S.viewport=g([s.drawingBufferWidth,s.drawingBufferHeight])),u.close!=null&&(S.close=u.close),u.positions===null&&(u.positions=[]),u.positions){var k,P;if(u.positions.x&&u.positions.y){var z=u.positions.x,I=u.positions.y;P=S.count=Math.max(z.length,I.length),k=new Float64Array(P*2);for(var D=0;D<P;D++)k[D*2]=z[D],k[D*2+1]=I[D]}else k=a(u.positions,"float64"),P=S.count=Math.floor(k.length/2);var R=S.bounds=v(k,2);if(S.fill){for(var O=[],F={},V=0,G=0,J=0,Z=S.count;G<Z;G++){var Y=k[G*2],j=k[G*2+1];isNaN(Y)||isNaN(j)||Y==null||j==null?(Y=k[V*2],j=k[V*2+1],F[G]=V):V=G,O[J++]=Y,O[J++]=j}if(u.splitNull){S.count-1 in F||(F[S.count]=S.count-1);var re=Object.keys(F).map(Number).sort(function(rt,ct){return rt-ct}),se=[],oe=0,N=S.hole!=null?S.hole[0]:null;if(N!=null){var U=p(re,function(rt){return rt>=N});re=re.slice(0,U),re.push(N)}for(var q=function(rt){var ct=O.slice(oe*2,re[rt]*2).concat(N?O.slice(N*2):[]),Ze=(S.hole||[]).map(function(Ge){return Ge-N+(re[rt]-oe)}),ke=n(ct,Ze);ke=ke.map(function(Ge){return Ge+oe+(Ge+oe<re[rt]?0:N-re[rt])}),se.push.apply(se,ke),oe=re[rt]+1},Q=0;Q<re.length;Q++)q(Q);for(var W=0,X=se.length;W<X;W++)F[se[W]]!=null&&(se[W]=F[se[W]]);S.triangles=se}else{for(var ee=n(O,S.hole||[]),te=0,ie=ee.length;te<ie;te++)F[ee[te]]!=null&&(ee[te]=F[ee[te]]);S.triangles=ee}}var le=new Float64Array(k);r(le,2,R);var ge=new Float64Array(P*2+6);S.close?k[0]===k[P*2-2]&&k[1]===k[P*2-1]?(ge[0]=le[P*2-4],ge[1]=le[P*2-3]):(ge[0]=le[P*2-2],ge[1]=le[P*2-1]):(ge[0]=le[0],ge[1]=le[1]),ge.set(le,2),S.close?k[0]===k[P*2-2]&&k[1]===k[P*2-1]?(ge[P*2+2]=le[2],ge[P*2+3]=le[3],S.count-=1):(ge[P*2+2]=le[0],ge[P*2+3]=le[1],ge[P*2+4]=le[2],ge[P*2+5]=le[3]):(ge[P*2+2]=le[P*2-2],ge[P*2+3]=le[P*2-1],ge[P*2+4]=le[P*2-2],ge[P*2+5]=le[P*2-1]);var fe=f(ge);S.positionBuffer(fe);var pe=o(ge,fe);S.positionFractBuffer(pe)}if(u.range?S.range=u.range:S.range||(S.range=S.bounds),(u.range||u.positions)&&S.count){var ye=S.bounds,Te=ye[2]-ye[0],_e=ye[3]-ye[1],De=S.range[2]-S.range[0],Be=S.range[3]-S.range[1];S.scale=[Te/De,_e/Be],S.translate=[-S.range[0]/De+ye[0]/De||0,-S.range[1]/Be+ye[1]/Be||0],S.scaleFract=o(S.scale),S.translateFract=o(S.translate)}if(u.dashes){var Ue=0,xe;if(!u.dashes||u.dashes.length<2)Ue=1,xe=new Uint8Array([255,255,255,255,255,255,255,255]);else{Ue=0;for(var Pe=0;Pe<u.dashes.length;++Pe)Ue+=u.dashes[Pe];xe=new Uint8Array(Ue*y.dashMult);for(var Ve=0,Qe=255,Fe=0;Fe<2;Fe++)for(var Le=0;Le<u.dashes.length;++Le){for(var Ne=0,dt=u.dashes[Le]*y.dashMult*.5;Ne<dt;++Ne)xe[Ve++]=Qe;Qe^=255}}S.dashLength=Ue,S.dashTexture({channels:1,data:xe,width:xe.length,height:1,mag:"linear",min:"linear"},0,0)}if(u.color){var Dt=S.count,Xt=u.color;Xt||(Xt="transparent");var At=new Uint8Array(Dt*4+4);if(!Array.isArray(Xt)||typeof Xt[0]=="number")for(var zt=w(Xt,"uint8"),Ut=0;Ut<Dt+1;Ut++)At.set(zt,Ut*4);else{for(var Ct=0;Ct<Dt;Ct++){var Mt=w(Xt[Ct],"uint8");At.set(Mt,Ct*4)}At.set(w(Xt[0],"uint8"),Dt*4)}S.colorBuffer({usage:"dynamic",type:"uint8",data:At})}}}),c.length<this.passes.length){for(var A=c.length;A<this.passes.length;A++){var m=this.passes[A];!m||(m.colorBuffer.destroy(),m.positionBuffer.destroy(),m.dashTexture.destroy())}this.passes.length=c.length}for(var h=[],x=0;x<this.passes.length;x++)this.passes[x]!==null&&h.push(this.passes[x]);return this.passes=h,this}},y.prototype.destroy=function(){return this.passes.forEach(function(c){c.colorBuffer.destroy(),c.positionBuffer.destroy(),c.dashTexture.destroy()}),this.passes.length=0,this}},{"array-bounds":71,"array-find-index":72,"array-normalize":73,"color-normalize":89,earcut:129,"es6-weak-map":183,"flatten-vertex-data":191,glslify:227,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":313}],281:[function(d,ne,ae){function w(S,k){return T(S)||a(S,k)||n(S,k)||f()}function v(S){return M(S)||e(S)||n(S)||t()}function M(S){if(Array.isArray(S))return r(S)}function T(S){if(Array.isArray(S))return S}function e(S){if(typeof Symbol<"u"&&S[Symbol.iterator]!=null||S["@@iterator"]!=null)return Array.from(S)}function a(S,k){var P=S==null?null:typeof Symbol<"u"&&S[Symbol.iterator]||S["@@iterator"];if(P!=null){var z=[],I=!0,D=!1,R,O;try{for(P=P.call(S);!(I=(R=P.next()).done)&&(z.push(R.value),!(k&&z.length===k));I=!0);}catch(F){D=!0,O=F}finally{try{!I&&P.return!=null&&P.return()}finally{if(D)throw O}}return z}}function n(S,k){if(!!S){if(typeof S=="string")return r(S,k);var P=Object.prototype.toString.call(S).slice(8,-1);if(P==="Object"&&S.constructor&&(P=S.constructor.name),P==="Map"||P==="Set")return Array.from(S);if(P==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(P))return r(S,k)}}function r(S,k){(k==null||k>S.length)&&(k=S.length);for(var P=0,z=new Array(k);P<k;P++)z[P]=S[P];return z}function t(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var o=d("color-normalize"),i=d("array-bounds"),g=d("color-id"),p=d("@plotly/point-cluster"),y=d("object-assign"),c=d("glslify"),b=d("pick-by-alias"),l=d("update-diff"),_=d("flatten-vertex-data"),s=d("is-iexplorer"),A=d("to-float32"),m=d("parse-rect"),h=x;function x(S,k){var P=this;if(!(this instanceof x))return new x(S,k);typeof S=="function"?(k||(k={}),k.regl=S):(k=S,S=null),k&&k.length&&(k.positions=k),S=k.regl;var z=S._gl,I,D=[],R={},O=[],F=[null],V=[null],G=255,J=100;this.tooManyColors=s,I=S.texture({data:new Uint8Array(G*4),width:G,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),y(this,{regl:S,gl:z,groups:O,markerCache:V,markerTextures:F,palette:D,paletteIds:R,paletteTexture:I,maxColors:G,maxSize:J,canvas:z.canvas}),this.update(k);var Z={uniforms:{constPointSize:!!k.constPointSize,opacity:S.prop("opacity"),paletteSize:function(se,oe){return[P.tooManyColors?0:G,I.height]},pixelRatio:S.context("pixelRatio"),scale:S.prop("scale"),scaleFract:S.prop("scaleFract"),translate:S.prop("translate"),translateFract:S.prop("translateFract"),markerTexture:S.prop("markerTexture"),paletteTexture:I},attributes:{x:function(se,oe){return oe.xAttr||{buffer:oe.positionBuffer,stride:8,offset:0}},y:function(se,oe){return oe.yAttr||{buffer:oe.positionBuffer,stride:8,offset:4}},xFract:function(se,oe){return oe.xAttr?{constant:[0,0]}:{buffer:oe.positionFractBuffer,stride:8,offset:0}},yFract:function(se,oe){return oe.yAttr?{constant:[0,0]}:{buffer:oe.positionFractBuffer,stride:8,offset:4}},size:function(se,oe){return oe.size.length?{buffer:oe.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(oe.size*255/P.maxSize)]}},borderSize:function(se,oe){return oe.borderSize.length?{buffer:oe.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(oe.borderSize*255/P.maxSize)]}},colorId:function(se,oe){return oe.color.length?{buffer:oe.colorBuffer,stride:P.tooManyColors?8:4,offset:0}:{constant:P.tooManyColors?D.slice(oe.color*4,oe.color*4+4):[oe.color]}},borderColorId:function(se,oe){return oe.borderColor.length?{buffer:oe.colorBuffer,stride:P.tooManyColors?8:4,offset:P.tooManyColors?4:2}:{constant:P.tooManyColors?D.slice(oe.borderColor*4,oe.borderColor*4+4):[oe.borderColor]}},isActive:function(se,oe){return oe.activation===!0?{constant:[1]}:oe.activation?oe.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:S.prop("viewport")},viewport:S.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:S.prop("elements"),count:S.prop("count"),offset:S.prop("offset"),primitive:"points"},Y=y({},Z);Y.frag=c([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),Y.vert=c([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}`]),this.drawMarker=S(Y);var j=y({},Z);j.frag=c([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),j.vert=c([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),s&&(j.frag=j.frag.replace("smoothstep","smoothStep"),Y.frag=Y.frag.replace("smoothstep","smoothStep")),this.drawCircle=S(j)}x.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},x.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},x.prototype.draw=function(){for(var S=this,k=arguments.length,P=new Array(k),z=0;z<k;z++)P[z]=arguments[z];var I=this.groups;if(P.length===1&&Array.isArray(P[0])&&(P[0][0]===null||Array.isArray(P[0][0]))&&(P=P[0]),this.regl._refresh(),P.length)for(var D=0;D<P.length;D++)this.drawItem(D,P[D]);else I.forEach(function(R,O){S.drawItem(O)});return this},x.prototype.drawItem=function(S,k){var P=this.groups,z=P[S];if(typeof k=="number"&&(S=k,z=P[k],k=null),!!(z&&z.count&&z.opacity)){z.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,z,k));for(var I=[],D=1;D<z.activation.length;D++)!z.activation[D]||z.activation[D]!==!0&&!z.activation[D].data.length||I.push.apply(I,v(this.getMarkerDrawOptions(D,z,k)));I.length&&this.drawMarker(I)}},x.prototype.getMarkerDrawOptions=function(S,k,P){var z=k.range,I=k.tree,D=k.viewport,R=k.activation,O=k.selectionBuffer,F=k.count;if(this.regl,!I)return P?[y({},k,{markerTexture:this.markerTextures[S],activation:R[S],count:P.length,elements:P,offset:0})]:[y({},k,{markerTexture:this.markerTextures[S],activation:R[S],offset:0})];var V=[],G=I.range(z,{lod:!0,px:[(z[2]-z[0])/D.width,(z[3]-z[1])/D.height]});if(P){for(var J=R[S],Z=J.data,Y=new Uint8Array(F),j=0;j<P.length;j++){var re=P[j];Y[re]=Z?Z[re]:1}O.subdata(Y)}for(var se=G.length;se--;){var oe=w(G[se],2),N=oe[0],U=oe[1];V.push(y({},k,{markerTexture:this.markerTextures[S],activation:P?O:R[S],offset:N,count:U-N}))}return V},x.prototype.update=function(){for(var S=this,k=arguments.length,P=new Array(k),z=0;z<k;z++)P[z]=arguments[z];if(!!P.length){P.length===1&&Array.isArray(P[0])&&(P=P[0]);var I=this.groups,D=this.gl,R=this.regl,O=this.maxSize,F=this.maxColors,V=this.palette;this.groups=I=P.map(function(G,J){var Z=I[J];if(G===void 0)return Z;G===null?G={positions:null}:typeof G=="function"?G={ondraw:G}:typeof G[0]=="number"&&(G={positions:G}),G=b(G,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"}),G.positions===null&&(G.positions=[]),G.tooManyColors!=null&&(S.tooManyColors=G.tooManyColors),Z||(I[J]=Z={id:J,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:R.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:R.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},G=y({},x.defaults,G)),G.positions&&!("marker"in G)&&(G.marker=Z.marker,delete Z.marker),G.marker&&!("positions"in G)&&(G.positions=Z.positions,delete Z.positions);var Y=0,j=0;if(l(Z,G,[{snap:!0,size:function(_e,De){return _e==null&&(_e=x.defaults.size),Y+=_e&&_e.length?1:0,_e},borderSize:function(_e,De){return _e==null&&(_e=x.defaults.borderSize),Y+=_e&&_e.length?1:0,_e},opacity:parseFloat,color:function(_e,De){return _e==null&&(_e=x.defaults.color),_e=S.updateColor(_e),j++,_e},borderColor:function(_e,De){return _e==null&&(_e=x.defaults.borderColor),_e=S.updateColor(_e),j++,_e},bounds:function(_e,De,Be){return"range"in Be||(Be.range=null),_e},positions:function(_e,De,Be){var Ue=De.snap,xe=De.positionBuffer,Pe=De.positionFractBuffer,Ve=De.selectionBuffer;if(_e.x||_e.y)return _e.x.length?De.xAttr={buffer:R.buffer(_e.x),offset:0,stride:4,count:_e.x.length}:De.xAttr={buffer:_e.x.buffer,offset:_e.x.offset*4||0,stride:(_e.x.stride||1)*4,count:_e.x.count},_e.y.length?De.yAttr={buffer:R.buffer(_e.y),offset:0,stride:4,count:_e.y.length}:De.yAttr={buffer:_e.y.buffer,offset:_e.y.offset*4||0,stride:(_e.y.stride||1)*4,count:_e.y.count},De.count=Math.max(De.xAttr.count,De.yAttr.count),_e;_e=_(_e,"float64");var Qe=De.count=Math.floor(_e.length/2),Fe=De.bounds=Qe?i(_e,2):null;if(!Be.range&&!De.range&&(delete De.range,Be.range=Fe),!Be.marker&&!De.marker&&(delete De.marker,Be.marker=null),Ue&&(Ue===!0||Qe>Ue)?De.tree=p(_e,{bounds:Fe}):Ue&&Ue.length&&(De.tree=Ue),De.tree){var Le={primitive:"points",usage:"static",data:De.tree,type:"uint32"};De.elements?De.elements(Le):De.elements=R.elements(Le)}var Ne=A.float32(_e);xe({data:Ne,usage:"dynamic"});var dt=A.fract32(_e,Ne);return Pe({data:dt,usage:"dynamic"}),Ve({data:new Uint8Array(Qe),type:"uint8",usage:"stream"}),_e}},{marker:function(_e,De,Be){var Ue=De.activation;if(Ue.forEach(function(dt){return dt&&dt.destroy&&dt.destroy()}),Ue.length=0,!_e||typeof _e[0]=="number"){var xe=S.addMarker(_e);Ue[xe]=!0}else{for(var Pe=[],Ve=0,Qe=Math.min(_e.length,De.count);Ve<Qe;Ve++){var Fe=S.addMarker(_e[Ve]);Pe[Fe]||(Pe[Fe]=new Uint8Array(De.count)),Pe[Fe][Ve]=1}for(var Le=0;Le<Pe.length;Le++)if(!!Pe[Le]){var Ne={data:Pe[Le],type:"uint8",usage:"static"};Ue[Le]?Ue[Le](Ne):Ue[Le]=R.buffer(Ne),Ue[Le].data=Pe[Le]}}return _e},range:function(_e,De,Be){var Ue=De.bounds;if(!!Ue)return _e||(_e=Ue),De.scale=[1/(_e[2]-_e[0]),1/(_e[3]-_e[1])],De.translate=[-_e[0],-_e[1]],De.scaleFract=A.fract(De.scale),De.translateFract=A.fract(De.translate),_e},viewport:function(_e){var De=m(_e||[D.drawingBufferWidth,D.drawingBufferHeight]);return De}}]),Y){var re=Z,se=re.count,oe=re.size,N=re.borderSize,U=re.sizeBuffer,q=new Uint8Array(se*2);if(oe.length||N.length)for(var Q=0;Q<se;Q++)q[Q*2]=Math.round((oe[Q]==null?oe:oe[Q])*255/O),q[Q*2+1]=Math.round((N[Q]==null?N:N[Q])*255/O);U({data:q,usage:"dynamic"})}if(j){var W=Z,X=W.count,ee=W.color,te=W.borderColor,ie=W.colorBuffer,le;if(S.tooManyColors){if(ee.length||te.length){le=new Uint8Array(X*8);for(var ge=0;ge<X;ge++){var fe=ee[ge];le[ge*8]=V[fe*4],le[ge*8+1]=V[fe*4+1],le[ge*8+2]=V[fe*4+2],le[ge*8+3]=V[fe*4+3];var pe=te[ge];le[ge*8+4]=V[pe*4],le[ge*8+5]=V[pe*4+1],le[ge*8+6]=V[pe*4+2],le[ge*8+7]=V[pe*4+3]}}}else if(ee.length||te.length){le=new Uint8Array(X*4+2);for(var ye=0;ye<X;ye++)ee[ye]!=null&&(le[ye*4]=ee[ye]%F,le[ye*4+1]=Math.floor(ee[ye]/F)),te[ye]!=null&&(le[ye*4+2]=te[ye]%F,le[ye*4+3]=Math.floor(te[ye]/F))}ie({data:le||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return Z})}},x.prototype.addMarker=function(S){var k=this.markerTextures,P=this.regl,z=this.markerCache,I=S==null?0:z.indexOf(S);if(I>=0)return I;var D;if(S instanceof Uint8Array||S instanceof Uint8ClampedArray)D=S;else{D=new Uint8Array(S.length);for(var R=0,O=S.length;R<O;R++)D[R]=S[R]*255}var F=Math.floor(Math.sqrt(D.length));return I=k.length,z.push(S),k.push(P.texture({channels:1,data:D,radius:F,mag:"linear",min:"linear"})),I},x.prototype.updateColor=function(S){var k=this.paletteIds,P=this.palette,z=this.maxColors;Array.isArray(S)||(S=[S]);var I=[];if(typeof S[0]=="number"){var D=[];if(Array.isArray(S))for(var R=0;R<S.length;R+=4)D.push(S.slice(R,R+4));else for(var O=0;O<S.length;O+=4)D.push(S.subarray(O,O+4));S=D}for(var F=0;F<S.length;F++){var V=S[F];V=o(V,"uint8");var G=g(V,!1);if(k[G]==null){var J=P.length;k[G]=Math.floor(J/4),P[J]=V[0],P[J+1]=V[1],P[J+2]=V[2],P[J+3]=V[3]}I[F]=k[G]}return!this.tooManyColors&&P.length>z*4&&(this.tooManyColors=!0),this.updatePalette(P),I.length===1?I[0]:I},x.prototype.updatePalette=function(S){if(!this.tooManyColors){var k=this.maxColors,P=this.paletteTexture,z=Math.ceil(S.length*.25/k);if(z>1){S=S.slice();for(var I=S.length*.25%k;I<z*k;I++)S.push(0,0,0,0)}P.height<z&&P.resize(k,z),P.subimage({width:Math.min(S.length*.25,k),height:z,data:S},0,0)}},x.prototype.destroy=function(){return this.groups.forEach(function(S){S.sizeBuffer.destroy(),S.positionBuffer.destroy(),S.positionFractBuffer.destroy(),S.colorBuffer.destroy(),S.activation.forEach(function(k){return k&&k.destroy&&k.destroy()}),S.selectionBuffer.destroy(),S.elements&&S.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(S){return S&&S.destroy&&S.destroy()}),this};var u=d("object-assign"),L=function(k,P){var z=new h(k,P),I=z.render.bind(z);return u(I,{render:I,update:z.update.bind(z),draw:z.draw.bind(z),destroy:z.destroy.bind(z),regl:z.regl,gl:z.gl,canvas:z.gl.canvas,groups:z.groups,markers:z.markerCache,palette:z.palette}),I};ne.exports=L},{"@plotly/point-cluster":59,"array-bounds":71,"color-id":87,"color-normalize":89,"flatten-vertex-data":191,glslify:227,"is-iexplorer":233,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":313,"update-diff":329}],282:[function(d,ne,ae){var w=d("regl-scatter2d"),v=d("pick-by-alias"),M=d("array-bounds"),T=d("raf"),e=d("array-range"),a=d("parse-rect"),n=d("flatten-vertex-data");ne.exports=r;function r(i,g){if(!(this instanceof r))return new r(i,g);this.traces=[],this.passes={},this.regl=i,this.scatter=w(i),this.canvas=this.scatter.canvas}r.prototype.render=function(){for(var i=this,g,p=[],y=arguments.length;y--;)p[y]=arguments[y];return p.length&&(g=this).update.apply(g,p),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=T(function(){i.draw(),i.dirty=!0,i.planned=null})):(this.draw(),this.dirty=!0,T(function(){i.dirty=!1})),this)},r.prototype.update=function(){for(var i,g=[],p=arguments.length;p--;)g[p]=arguments[p];if(!!g.length){for(var y=0;y<g.length;y++)this.updateItem(y,g[y]);this.traces=this.traces.filter(Boolean);for(var c=[],b=0,l=0;l<this.traces.length;l++){for(var _=this.traces[l],s=this.traces[l].passes,A=0;A<s.length;A++)c.push(this.passes[s[A]]);_.passOffset=b,b+=_.passes.length}return(i=this.scatter).update.apply(i,c),this}},r.prototype.updateItem=function(i,g){var p=this,y=p.regl;if(g===null)return this.traces[i]=null,this;if(!g)return this;var c=v(g,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),b=this.traces[i]||(this.traces[i]={id:i,buffer:y.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:a([y._gl.drawingBufferWidth,y._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(c.color!=null&&(b.color=c.color),c.size!=null&&(b.size=c.size),c.marker!=null&&(b.marker=c.marker),c.borderColor!=null&&(b.borderColor=c.borderColor),c.borderSize!=null&&(b.borderSize=c.borderSize),c.opacity!=null&&(b.opacity=c.opacity),c.viewport&&(b.viewport=a(c.viewport)),c.diagonal!=null&&(b.diagonal=c.diagonal),c.upper!=null&&(b.upper=c.upper),c.lower!=null&&(b.lower=c.lower),c.data){b.buffer(n(c.data)),b.columns=c.data.length,b.count=c.data[0].length,b.bounds=[];for(var l=0;l<b.columns;l++)b.bounds[l]=M(c.data[l],1)}var _;c.range&&(b.range=c.range,_=b.range&&typeof b.range[0]!="number"),c.domain&&(b.domain=c.domain);var s=!1;c.padding!=null&&(Array.isArray(c.padding)&&c.padding.length===b.columns&&typeof c.padding[c.padding.length-1]=="number"?(b.padding=c.padding.map(o),s=!0):b.padding=o(c.padding));var A=b.columns,m=b.count,h=b.viewport.width,x=b.viewport.height,u=b.viewport.x,L=b.viewport.y,S=h/A,k=x/A;b.passes=[];for(var P=0;P<A;P++)for(var z=0;z<A;z++)if(!(!b.diagonal&&z===P)&&!(!b.upper&&P>z)&&!(!b.lower&&P<z)){var I=t(b.id,P,z),D=this.passes[I]||(this.passes[I]={});if(c.data&&(c.transpose?D.positions={x:{buffer:b.buffer,offset:z,count:m,stride:A},y:{buffer:b.buffer,offset:P,count:m,stride:A}}:D.positions={x:{buffer:b.buffer,offset:z*m,count:m},y:{buffer:b.buffer,offset:P*m,count:m}},D.bounds=f(b.bounds,P,z)),c.domain||c.viewport||c.data){var R=s?f(b.padding,P,z):b.padding;if(b.domain){var O=f(b.domain,P,z),F=O[0],V=O[1],G=O[2],J=O[3];D.viewport=[u+F*h+R[0],L+V*x+R[1],u+G*h-R[2],L+J*x-R[3]]}else D.viewport=[u+z*S+S*R[0],L+P*k+k*R[1],u+(z+1)*S-S*R[2],L+(P+1)*k-k*R[3]]}c.color&&(D.color=b.color),c.size&&(D.size=b.size),c.marker&&(D.marker=b.marker),c.borderSize&&(D.borderSize=b.borderSize),c.borderColor&&(D.borderColor=b.borderColor),c.opacity&&(D.opacity=b.opacity),c.range&&(D.range=_?f(b.range,P,z):b.range||D.bounds),b.passes.push(I)}return this},r.prototype.draw=function(){for(var i,g=[],p=arguments.length;p--;)g[p]=arguments[p];if(!g.length)this.scatter.draw();else{for(var y=[],c=0;c<g.length;c++)if(typeof g[c]=="number"){var b=this.traces[g[c]],l=b.passes,_=b.passOffset;y.push.apply(y,e(_,_+l.length))}else if(g[c].length){var s=g[c],A=this.traces[c],m=A.passes,h=A.passOffset;m=m.map(function(x,u){y[h+u]=s})}(i=this.scatter).draw.apply(i,y)}return this},r.prototype.destroy=function(){return this.traces.forEach(function(i){i.buffer&&i.buffer.destroy&&i.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this};function t(i,g,p){var y=i.id!=null?i.id:i,c=g,b=p,l=y<<16|(c&255)<<8|b&255;return l}function f(i,g,p){var y,c,b,l,_=i[g],s=i[p];return _.length>2?(y=_[1],c=_[3]):_.length?(y=_[0],c=_[1]):(y=_.y,_.x+_.width,c=_.y+_.height),s.length>2?(b=s[0],l=s[2]):s.length?(b=s[0],l=s[1]):(b=s.x,l=s.x+s.width,s.y+s.height),[b,y,l,c]}function o(i){if(typeof i=="number")return[i,i,i,i];if(i.length===2)return[i[0],i[1],i[0],i[1]];var g=a(i);return[g.x,g.y,g.x+g.width,g.y+g.height]}},{"array-bounds":71,"array-range":74,"flatten-vertex-data":191,"parse-rect":249,"pick-by-alias":253,raf:278,"regl-scatter2d":281}],283:[function(d,ne,ae){(function(w,v){typeof ae=="object"&&typeof ne<"u"?ne.exports=v():w.createREGL=v()})(this,function(){function w(nt,Ht){this.id=ge++,this.type=nt,this.data=Ht}function v(nt){if(nt.length===0)return[];var Ht=nt.charAt(0),Kt=nt.charAt(nt.length-1);if(1<nt.length&&Ht===Kt&&(Ht==='"'||Ht==="'"))return['"'+nt.substr(1,nt.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(Ht=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(nt))return v(nt.substr(0,Ht.index)).concat(v(Ht[1])).concat(v(nt.substr(Ht.index+Ht[0].length)));if(Ht=nt.split("."),Ht.length===1)return['"'+nt.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(nt=[],Kt=0;Kt<Ht.length;++Kt)nt=nt.concat(v(Ht[Kt]));return nt}function M(nt){return"["+v(nt).join("][")+"]"}function T(nt,Ht){if(typeof nt=="function")return new w(0,nt);if(typeof nt=="number"||typeof nt=="boolean")return new w(5,nt);if(Array.isArray(nt))return new w(6,nt.map(function(Kt,Gt){return T(Kt)}));if(nt instanceof w)return nt}function e(){var nt={"":0},Ht=[""];return{id:function(Kt){var Gt=nt[Kt];return Gt||(Gt=nt[Kt]=Ht.length,Ht.push(Kt),Gt)},str:function(Kt){return Ht[Kt]}}}function a(nt,Ht,Kt){function Gt(){var je=window.innerWidth,st=window.innerHeight;nt!==document.body&&(st=br.getBoundingClientRect(),je=st.right-st.left,st=st.bottom-st.top),br.width=Kt*je,br.height=Kt*st}var br=document.createElement("canvas");le(br.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),nt.appendChild(br),nt===document.body&&(br.style.position="absolute",le(nt.style,{margin:0,padding:0}));var tt;return nt!==document.body&&typeof ResizeObserver=="function"?(tt=new ResizeObserver(function(){setTimeout(Gt)}),tt.observe(nt)):window.addEventListener("resize",Gt,!1),Gt(),{canvas:br,onDestroy:function(){tt?tt.disconnect():window.removeEventListener("resize",Gt),nt.removeChild(br)}}}function n(nt,Ht){function Kt(Gt){try{return nt.getContext(Gt,Ht)}catch{return null}}return Kt("webgl")||Kt("experimental-webgl")||Kt("webgl-experimental")}function r(nt){return typeof nt=="string"?nt.split():nt}function t(nt){return typeof nt=="string"?document.querySelector(nt):nt}function f(nt){var Ht=nt||{},Kt,Gt,br,tt;nt={};var je=[],st=[],ft=typeof window>"u"?1:window.devicePixelRatio,Me=!1,Se={},Ke=function(it){},Xe=function(){};if(typeof Ht=="string"?Kt=document.querySelector(Ht):typeof Ht=="object"&&(typeof Ht.nodeName=="string"&&typeof Ht.appendChild=="function"&&typeof Ht.getBoundingClientRect=="function"?Kt=Ht:typeof Ht.drawArrays=="function"||typeof Ht.drawElements=="function"?(tt=Ht,br=tt.canvas):("gl"in Ht?tt=Ht.gl:"canvas"in Ht?br=t(Ht.canvas):"container"in Ht&&(Gt=t(Ht.container)),"attributes"in Ht&&(nt=Ht.attributes),"extensions"in Ht&&(je=r(Ht.extensions)),"optionalExtensions"in Ht&&(st=r(Ht.optionalExtensions)),"onDone"in Ht&&(Ke=Ht.onDone),"profile"in Ht&&(Me=!!Ht.profile),"pixelRatio"in Ht&&(ft=+Ht.pixelRatio),"cachedCode"in Ht&&(Se=Ht.cachedCode))),Kt&&(Kt.nodeName.toLowerCase()==="canvas"?br=Kt:Gt=Kt),!tt){if(!br){if(Kt=a(Gt||document.body,Ke,ft),!Kt)return null;br=Kt.canvas,Xe=Kt.onDestroy}nt.premultipliedAlpha===void 0&&(nt.premultipliedAlpha=!0),tt=n(br,nt)}return tt?{gl:tt,canvas:br,container:Gt,extensions:je,optionalExtensions:st,pixelRatio:ft,profile:Me,cachedCode:Se,onDone:Ke,onDestroy:Xe}:(Xe(),Ke("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function o(nt,Ht){function Kt(je){je=je.toLowerCase();var st;try{st=Gt[je]=nt.getExtension(je)}catch{}return!!st}for(var Gt={},br=0;br<Ht.extensions.length;++br){var tt=Ht.extensions[br];if(!Kt(tt))return Ht.onDestroy(),Ht.onDone('"'+tt+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Ht.optionalExtensions.forEach(Kt),{extensions:Gt,restore:function(){Object.keys(Gt).forEach(function(je){if(Gt[je]&&!Kt(je))throw Error("(regl): error restoring extension "+je)})}}}function i(nt,Ht){for(var Kt=Array(nt),Gt=0;Gt<nt;++Gt)Kt[Gt]=Ht(Gt);return Kt}function g(nt){var Ht,Kt;return Ht=(65535<nt)<<4,nt>>>=Ht,Kt=(255<nt)<<3,nt>>>=Kt,Ht|=Kt,Kt=(15<nt)<<2,nt>>>=Kt,Ht|=Kt,Kt=(3<nt)<<1,Ht|Kt|nt>>>Kt>>1}function p(){function nt(Gt){e:{for(var br=16;268435456>=br;br*=16)if(Gt<=br){Gt=br;break e}Gt=0}return br=Kt[g(Gt)>>2],0<br.length?br.pop():new ArrayBuffer(Gt)}function Ht(Gt){Kt[g(Gt.byteLength)>>2].push(Gt)}var Kt=i(8,function(){return[]});return{alloc:nt,free:Ht,allocType:function(Gt,br){var tt=null;switch(Gt){case 5120:tt=new Int8Array(nt(br),0,br);break;case 5121:tt=new Uint8Array(nt(br),0,br);break;case 5122:tt=new Int16Array(nt(2*br),0,br);break;case 5123:tt=new Uint16Array(nt(2*br),0,br);break;case 5124:tt=new Int32Array(nt(4*br),0,br);break;case 5125:tt=new Uint32Array(nt(4*br),0,br);break;case 5126:tt=new Float32Array(nt(4*br),0,br);break;default:return null}return tt.length!==br?tt.subarray(0,br):tt},freeType:function(Gt){Ht(Gt.buffer)}}}function y(nt){return!!nt&&typeof nt=="object"&&Array.isArray(nt.shape)&&Array.isArray(nt.stride)&&typeof nt.offset=="number"&&nt.shape.length===nt.stride.length&&(Array.isArray(nt.data)||De(nt.data))}function c(nt,Ht,Kt,Gt,br,tt){for(var je=0;je<Ht;++je)for(var st=nt[je],ft=0;ft<Kt;++ft)for(var Me=st[ft],Se=0;Se<Gt;++Se)br[tt++]=Me[Se]}function b(nt,Ht,Kt,Gt,br){for(var tt=1,je=Kt+1;je<Ht.length;++je)tt*=Ht[je];var st=Ht[Kt];if(Ht.length-Kt===4){var ft=Ht[Kt+1],Me=Ht[Kt+2];for(Ht=Ht[Kt+3],je=0;je<st;++je)c(nt[je],ft,Me,Ht,Gt,br),br+=tt}else for(je=0;je<st;++je)b(nt[je],Ht,Kt+1,Gt,br),br+=tt}function l(nt){return xe[Object.prototype.toString.call(nt)]|0}function _(nt,Ht){for(var Kt=0;Kt<Ht.length;++Kt)nt[Kt]=Ht[Kt]}function s(nt,Ht,Kt,Gt,br,tt,je){for(var st=0,ft=0;ft<Kt;++ft)for(var Me=0;Me<Gt;++Me)nt[st++]=Ht[br*ft+tt*Me+je]}function A(nt,Ht,Kt,Gt){function br(Ke){this.id=ft++,this.buffer=nt.createBuffer(),this.type=Ke,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,Kt.profile&&(this.stats={size:0})}function tt(Ke,Xe,it){Ke.byteLength=Xe.byteLength,nt.bufferData(Ke.type,Xe,it)}function je(Ke,Xe,it,pt,vt,St){if(Ke.usage=it,Array.isArray(Xe)){if(Ke.dtype=pt||5126,0<Xe.length)if(Array.isArray(Xe[0])){vt=Fe(Xe);for(var kt=pt=1;kt<vt.length;++kt)pt*=vt[kt];Ke.dimension=pt,Xe=Qe(Xe,vt,Ke.dtype),tt(Ke,Xe,it),St?Ke.persistentData=Xe:Te.freeType(Xe)}else typeof Xe[0]=="number"?(Ke.dimension=vt,vt=Te.allocType(Ke.dtype,Xe.length),_(vt,Xe),tt(Ke,vt,it),St?Ke.persistentData=vt:Te.freeType(vt)):De(Xe[0])&&(Ke.dimension=Xe[0].length,Ke.dtype=pt||l(Xe[0])||5126,Xe=Qe(Xe,[Xe.length,Xe[0].length],Ke.dtype),tt(Ke,Xe,it),St?Ke.persistentData=Xe:Te.freeType(Xe))}else if(De(Xe))Ke.dtype=pt||l(Xe),Ke.dimension=vt,tt(Ke,Xe,it),St&&(Ke.persistentData=new Uint8Array(new Uint8Array(Xe.buffer)));else if(y(Xe)){vt=Xe.shape;var Nt=Xe.stride,kt=Xe.offset,nr=0,fr=0,Hr=0,Er=0;vt.length===1?(nr=vt[0],fr=1,Hr=Nt[0],Er=0):vt.length===2&&(nr=vt[0],fr=vt[1],Hr=Nt[0],Er=Nt[1]),Ke.dtype=pt||l(Xe.data)||5126,Ke.dimension=fr,vt=Te.allocType(Ke.dtype,nr*fr),s(vt,Xe.data,nr,fr,Hr,Er,kt),tt(Ke,vt,it),St?Ke.persistentData=vt:Te.freeType(vt)}else Xe instanceof ArrayBuffer&&(Ke.dtype=5121,Ke.dimension=vt,tt(Ke,Xe,it),St&&(Ke.persistentData=new Uint8Array(new Uint8Array(Xe))))}function st(Ke){Ht.bufferCount--,Gt(Ke),nt.deleteBuffer(Ke.buffer),Ke.buffer=null,delete Me[Ke.id]}var ft=0,Me={};br.prototype.bind=function(){nt.bindBuffer(this.type,this.buffer)},br.prototype.destroy=function(){st(this)};var Se=[];return Kt.profile&&(Ht.getTotalBufferSize=function(){var Ke=0;return Object.keys(Me).forEach(function(Xe){Ke+=Me[Xe].stats.size}),Ke}),{create:function(Ke,Xe,it,pt){function vt(kt){var Nt=35044,nr=null,fr=0,Hr=0,Er=1;return Array.isArray(kt)||De(kt)||y(kt)||kt instanceof ArrayBuffer?nr=kt:typeof kt=="number"?fr=kt|0:kt&&("data"in kt&&(nr=kt.data),"usage"in kt&&(Nt=Ve[kt.usage]),"type"in kt&&(Hr=Pe[kt.type]),"dimension"in kt&&(Er=kt.dimension|0),"length"in kt&&(fr=kt.length|0)),St.bind(),nr?je(St,nr,Nt,Hr,Er,pt):(fr&&nt.bufferData(St.type,fr,Nt),St.dtype=Hr||5121,St.usage=Nt,St.dimension=Er,St.byteLength=fr),Kt.profile&&(St.stats.size=St.byteLength*Le[St.dtype]),vt}Ht.bufferCount++;var St=new br(Xe);return Me[St.id]=St,it||vt(Ke),vt._reglType="buffer",vt._buffer=St,vt.subdata=function(kt,Nt){var nr=(Nt||0)|0,fr;if(St.bind(),De(kt)||kt instanceof ArrayBuffer)nt.bufferSubData(St.type,nr,kt);else if(Array.isArray(kt)){if(0<kt.length)if(typeof kt[0]=="number"){var Hr=Te.allocType(St.dtype,kt.length);_(Hr,kt),nt.bufferSubData(St.type,nr,Hr),Te.freeType(Hr)}else(Array.isArray(kt[0])||De(kt[0]))&&(fr=Fe(kt),Hr=Qe(kt,fr,St.dtype),nt.bufferSubData(St.type,nr,Hr),Te.freeType(Hr))}else if(y(kt)){fr=kt.shape;var Er=kt.stride,_r=Hr=0,en=0,dr=0;fr.length===1?(Hr=fr[0],_r=1,en=Er[0],dr=0):fr.length===2&&(Hr=fr[0],_r=fr[1],en=Er[0],dr=Er[1]),fr=Array.isArray(kt.data)?St.dtype:l(kt.data),fr=Te.allocType(fr,Hr*_r),s(fr,kt.data,Hr,_r,en,dr,kt.offset),nt.bufferSubData(St.type,nr,fr),Te.freeType(fr)}return vt},Kt.profile&&(vt.stats=St.stats),vt.destroy=function(){st(St)},vt},createStream:function(Ke,Xe){var it=Se.pop();return it||(it=new br(Ke)),it.bind(),je(it,Xe,35040,0,1,!1),it},destroyStream:function(Ke){Se.push(Ke)},clear:function(){Be(Me).forEach(st),Se.forEach(st)},getBuffer:function(Ke){return Ke&&Ke._buffer instanceof br?Ke._buffer:null},restore:function(){Be(Me).forEach(function(Ke){Ke.buffer=nt.createBuffer(),nt.bindBuffer(Ke.type,Ke.buffer),nt.bufferData(Ke.type,Ke.persistentData||Ke.byteLength,Ke.usage)})},_initBuffer:je}}function m(nt,Ht,Kt,Gt){function br(Ke){this.id=ft++,st[this.id]=this,this.buffer=Ke,this.primType=4,this.type=this.vertCount=0}function tt(Ke,Xe,it,pt,vt,St,kt){Ke.buffer.bind();var Nt;if(Xe?((Nt=kt)||De(Xe)&&(!y(Xe)||De(Xe.data))||(Nt=Ht.oes_element_index_uint?5125:5123),Kt._initBuffer(Ke.buffer,Xe,it,Nt,3)):(nt.bufferData(34963,St,it),Ke.buffer.dtype=Nt||5121,Ke.buffer.usage=it,Ke.buffer.dimension=3,Ke.buffer.byteLength=St),Nt=kt,!kt){switch(Ke.buffer.dtype){case 5121:case 5120:Nt=5121;break;case 5123:case 5122:Nt=5123;break;case 5125:case 5124:Nt=5125}Ke.buffer.dtype=Nt}Ke.type=Nt,Xe=vt,0>Xe&&(Xe=Ke.buffer.byteLength,Nt===5123?Xe>>=1:Nt===5125&&(Xe>>=2)),Ke.vertCount=Xe,Xe=pt,0>pt&&(Xe=4,pt=Ke.buffer.dimension,pt===1&&(Xe=0),pt===2&&(Xe=1),pt===3&&(Xe=4)),Ke.primType=Xe}function je(Ke){Gt.elementsCount--,delete st[Ke.id],Ke.buffer.destroy(),Ke.buffer=null}var st={},ft=0,Me={uint8:5121,uint16:5123};Ht.oes_element_index_uint&&(Me.uint32=5125),br.prototype.bind=function(){this.buffer.bind()};var Se=[];return{create:function(Ke,Xe){function it(St){if(St)if(typeof St=="number")pt(St),vt.primType=4,vt.vertCount=St|0,vt.type=5121;else{var kt=null,Nt=35044,nr=-1,fr=-1,Hr=0,Er=0;Array.isArray(St)||De(St)||y(St)?kt=St:("data"in St&&(kt=St.data),"usage"in St&&(Nt=Ve[St.usage]),"primitive"in St&&(nr=Ne[St.primitive]),"count"in St&&(fr=St.count|0),"type"in St&&(Er=Me[St.type]),"length"in St?Hr=St.length|0:(Hr=fr,Er===5123||Er===5122?Hr*=2:(Er===5125||Er===5124)&&(Hr*=4))),tt(vt,kt,Nt,nr,fr,Hr,Er)}else pt(),vt.primType=4,vt.vertCount=0,vt.type=5121;return it}var pt=Kt.create(null,34963,!0),vt=new br(pt._buffer);return Gt.elementsCount++,it(Ke),it._reglType="elements",it._elements=vt,it.subdata=function(St,kt){return pt.subdata(St,kt),it},it.destroy=function(){je(vt)},it},createStream:function(Ke){var Xe=Se.pop();return Xe||(Xe=new br(Kt.create(null,34963,!0,!1)._buffer)),tt(Xe,Ke,35040,-1,-1,0,0),Xe},destroyStream:function(Ke){Se.push(Ke)},getElements:function(Ke){return typeof Ke=="function"&&Ke._elements instanceof br?Ke._elements:null},clear:function(){Be(st).forEach(je)}}}function h(nt){for(var Ht=Te.allocType(5123,nt.length),Kt=0;Kt<nt.length;++Kt)if(isNaN(nt[Kt]))Ht[Kt]=65535;else if(nt[Kt]===1/0)Ht[Kt]=31744;else if(nt[Kt]===-1/0)Ht[Kt]=64512;else{dt[0]=nt[Kt];var tt=Dt[0],Gt=tt>>>31<<15,br=(tt<<1>>>24)-127,tt=tt>>13&1023;Ht[Kt]=-24>br?Gt:-14>br?Gt+(tt+1024>>-14-br):15<br?Gt+31744:Gt+(br+15<<10)+tt}return Ht}function x(nt){return Array.isArray(nt)||De(nt)}function u(nt){return"[object "+nt+"]"}function L(nt){return Array.isArray(nt)&&(nt.length===0||typeof nt[0]=="number")}function S(nt){return!!(Array.isArray(nt)&&nt.length!==0&&x(nt[0]))}function k(nt){return Object.prototype.toString.call(nt)}function P(nt){if(!nt)return!1;var Ht=k(nt);return 0<=ke.indexOf(Ht)?!0:L(nt)||S(nt)||y(nt)}function z(nt,Ht){nt.type===36193?(nt.data=h(Ht),Te.freeType(Ht)):nt.data=Ht}function I(nt,Ht,Kt,Gt,br,tt){if(nt=typeof Je[nt]<"u"?Je[nt]:zt[nt]*Ge[Ht],tt&&(nt*=6),br){for(Gt=0;1<=Kt;)Gt+=nt*Kt*Kt,Kt/=2;return Gt}return nt*Kt*Gt}function D(nt,Ht,Kt,Gt,br,tt,je){function st(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function ft(Mr,vn){Mr.internalformat=vn.internalformat,Mr.format=vn.format,Mr.type=vn.type,Mr.compressed=vn.compressed,Mr.premultiplyAlpha=vn.premultiplyAlpha,Mr.flipY=vn.flipY,Mr.unpackAlignment=vn.unpackAlignment,Mr.colorSpace=vn.colorSpace,Mr.width=vn.width,Mr.height=vn.height,Mr.channels=vn.channels}function Me(Mr,vn){if(typeof vn=="object"&&vn){"premultiplyAlpha"in vn&&(Mr.premultiplyAlpha=vn.premultiplyAlpha),"flipY"in vn&&(Mr.flipY=vn.flipY),"alignment"in vn&&(Mr.unpackAlignment=vn.alignment),"colorSpace"in vn&&(Mr.colorSpace=sr[vn.colorSpace]),"type"in vn&&(Mr.type=Ir[vn.type]);var fn=Mr.width,An=Mr.height,Gn=Mr.channels,ia=!1;"shape"in vn?(fn=vn.shape[0],An=vn.shape[1],vn.shape.length===3&&(Gn=vn.shape[2],ia=!0)):("radius"in vn&&(fn=An=vn.radius),"width"in vn&&(fn=vn.width),"height"in vn&&(An=vn.height),"channels"in vn&&(Gn=vn.channels,ia=!0)),Mr.width=fn|0,Mr.height=An|0,Mr.channels=Gn|0,fn=!1,"format"in vn&&(fn=vn.format,An=Mr.internalformat=Zr[fn],Mr.format=Kn[An],fn in Ir&&!("type"in vn)&&(Mr.type=Ir[fn]),fn in Pr&&(Mr.compressed=!0),fn=!0),!ia&&fn?Mr.channels=zt[Mr.format]:ia&&!fn&&Mr.channels!==At[Mr.format]&&(Mr.format=Mr.internalformat=At[Mr.channels])}}function Se(Mr){nt.pixelStorei(37440,Mr.flipY),nt.pixelStorei(37441,Mr.premultiplyAlpha),nt.pixelStorei(37443,Mr.colorSpace),nt.pixelStorei(3317,Mr.unpackAlignment)}function Ke(){st.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Xe(Mr,vn){var fn=null;if(P(vn)?fn=vn:vn&&(Me(Mr,vn),"x"in vn&&(Mr.xOffset=vn.x|0),"y"in vn&&(Mr.yOffset=vn.y|0),P(vn.data)&&(fn=vn.data)),vn.copy){var An=br.viewportWidth,Gn=br.viewportHeight;Mr.width=Mr.width||An-Mr.xOffset,Mr.height=Mr.height||Gn-Mr.yOffset,Mr.needsCopy=!0}else if(!fn)Mr.width=Mr.width||1,Mr.height=Mr.height||1,Mr.channels=Mr.channels||4;else if(De(fn))Mr.channels=Mr.channels||4,Mr.data=fn,"type"in vn||Mr.type!==5121||(Mr.type=xe[Object.prototype.toString.call(fn)]|0);else if(L(fn)){switch(Mr.channels=Mr.channels||4,An=fn,Gn=An.length,Mr.type){case 5121:case 5123:case 5125:case 5126:Gn=Te.allocType(Mr.type,Gn),Gn.set(An),Mr.data=Gn;break;case 36193:Mr.data=h(An)}Mr.alignment=1,Mr.needsFree=!0}else if(y(fn)){An=fn.data,Array.isArray(An)||Mr.type!==5121||(Mr.type=xe[Object.prototype.toString.call(An)]|0);var Gn=fn.shape,ia=fn.stride,Yn,zn,ea,wa;Gn.length===3?(ea=Gn[2],wa=ia[2]):wa=ea=1,Yn=Gn[0],zn=Gn[1],Gn=ia[0],ia=ia[1],Mr.alignment=1,Mr.width=Yn,Mr.height=zn,Mr.channels=ea,Mr.format=Mr.internalformat=At[ea],Mr.needsFree=!0,Yn=wa,fn=fn.offset,ea=Mr.width,wa=Mr.height,zn=Mr.channels;for(var si=Te.allocType(Mr.type===36193?5126:Mr.type,ea*wa*zn),Ft=0,cr=0;cr<wa;++cr)for(var $r=0;$r<ea;++$r)for(var rn=0;rn<zn;++rn)si[Ft++]=An[Gn*$r+ia*cr+Yn*rn+fn];z(Mr,si)}else if(k(fn)===Ut||k(fn)===Ct||k(fn)===Mt)k(fn)===Ut||k(fn)===Ct?Mr.element=fn:Mr.element=fn.canvas,Mr.width=Mr.element.width,Mr.height=Mr.element.height,Mr.channels=4;else if(k(fn)===rt)Mr.element=fn,Mr.width=fn.width,Mr.height=fn.height,Mr.channels=4;else if(k(fn)===ct)Mr.element=fn,Mr.width=fn.naturalWidth,Mr.height=fn.naturalHeight,Mr.channels=4;else if(k(fn)===Ze)Mr.element=fn,Mr.width=fn.videoWidth,Mr.height=fn.videoHeight,Mr.channels=4;else if(S(fn)){for(An=Mr.width||fn[0].length,Gn=Mr.height||fn.length,ia=Mr.channels,ia=x(fn[0][0])?ia||fn[0][0].length:ia||1,Yn=Ue.shape(fn),ea=1,wa=0;wa<Yn.length;++wa)ea*=Yn[wa];ea=Te.allocType(Mr.type===36193?5126:Mr.type,ea),Ue.flatten(fn,Yn,"",ea),z(Mr,ea),Mr.alignment=1,Mr.width=An,Mr.height=Gn,Mr.channels=ia,Mr.format=Mr.internalformat=At[ia],Mr.needsFree=!0}}function it(Mr,vn,fn,An,Gn){var ia=Mr.element,Yn=Mr.data,zn=Mr.internalformat,ea=Mr.format,wa=Mr.type,si=Mr.width,Ft=Mr.height;Se(Mr),ia?nt.texSubImage2D(vn,Gn,fn,An,ea,wa,ia):Mr.compressed?nt.compressedTexSubImage2D(vn,Gn,fn,An,zn,si,Ft,Yn):Mr.needsCopy?(Gt(),nt.copyTexSubImage2D(vn,Gn,fn,An,Mr.xOffset,Mr.yOffset,si,Ft)):nt.texSubImage2D(vn,Gn,fn,An,si,Ft,ea,wa,Yn)}function pt(){return Aa.pop()||new Ke}function vt(Mr){Mr.needsFree&&Te.freeType(Mr.data),Ke.call(Mr),Aa.push(Mr)}function St(){st.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function kt(Mr,vn,fn){var An=Mr.images[0]=pt();Mr.mipmask=1,An.width=Mr.width=vn,An.height=Mr.height=fn,An.channels=Mr.channels=4}function Nt(Mr,vn){var fn=null;if(P(vn))fn=Mr.images[0]=pt(),ft(fn,Mr),Xe(fn,vn),Mr.mipmask=1;else if(Me(Mr,vn),Array.isArray(vn.mipmap))for(var An=vn.mipmap,Gn=0;Gn<An.length;++Gn)fn=Mr.images[Gn]=pt(),ft(fn,Mr),fn.width>>=Gn,fn.height>>=Gn,Xe(fn,An[Gn]),Mr.mipmask|=1<<Gn;else fn=Mr.images[0]=pt(),ft(fn,Mr),Xe(fn,vn),Mr.mipmask=1;ft(Mr,Mr.images[0])}function nr(Mr,vn){for(var fn=Mr.images,An=0;An<fn.length&&fn[An];++An){var Gn=fn[An],ia=vn,Yn=An,zn=Gn.element,ea=Gn.data,wa=Gn.internalformat,si=Gn.format,Ft=Gn.type,cr=Gn.width,$r=Gn.height;Se(Gn),zn?nt.texImage2D(ia,Yn,si,si,Ft,zn):Gn.compressed?nt.compressedTexImage2D(ia,Yn,wa,cr,$r,0,ea):Gn.needsCopy?(Gt(),nt.copyTexImage2D(ia,Yn,si,Gn.xOffset,Gn.yOffset,cr,$r,0)):nt.texImage2D(ia,Yn,si,cr,$r,0,si,Ft,ea||null)}}function fr(){var Mr=Ta.pop()||new St;st.call(Mr);for(var vn=Mr.mipmask=0;16>vn;++vn)Mr.images[vn]=null;return Mr}function Hr(Mr){for(var vn=Mr.images,fn=0;fn<vn.length;++fn)vn[fn]&&vt(vn[fn]),vn[fn]=null;Ta.push(Mr)}function Er(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function _r(Mr,vn){"min"in vn&&(Mr.minFilter=Zt[vn.min],0<=Xt.indexOf(Mr.minFilter)&&!("faces"in vn)&&(Mr.genMipmaps=!0)),"mag"in vn&&(Mr.magFilter=Lt[vn.mag]);var fn=Mr.wrapS,An=Mr.wrapT;if("wrap"in vn){var Gn=vn.wrap;typeof Gn=="string"?fn=An=et[Gn]:Array.isArray(Gn)&&(fn=et[Gn[0]],An=et[Gn[1]])}else"wrapS"in vn&&(fn=et[vn.wrapS]),"wrapT"in vn&&(An=et[vn.wrapT]);if(Mr.wrapS=fn,Mr.wrapT=An,"anisotropic"in vn&&(Mr.anisotropic=vn.anisotropic),"mipmap"in vn){switch(fn=!1,typeof vn.mipmap){case"string":Mr.mipmapHint=Ar[vn.mipmap],fn=Mr.genMipmaps=!0;break;case"boolean":fn=Mr.genMipmaps=vn.mipmap;break;case"object":Mr.genMipmaps=!1,fn=!0}!fn||"min"in vn||(Mr.minFilter=9984)}}function en(Mr,vn){nt.texParameteri(vn,10241,Mr.minFilter),nt.texParameteri(vn,10240,Mr.magFilter),nt.texParameteri(vn,10242,Mr.wrapS),nt.texParameteri(vn,10243,Mr.wrapT),Ht.ext_texture_filter_anisotropic&&nt.texParameteri(vn,34046,Mr.anisotropic),Mr.genMipmaps&&(nt.hint(33170,Mr.mipmapHint),nt.generateMipmap(vn))}function dr(Mr){st.call(this),this.mipmask=0,this.internalformat=6408,this.id=oi++,this.refCount=1,this.target=Mr,this.texture=nt.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Er,je.profile&&(this.stats={size:0})}function xr(Mr){nt.activeTexture(33984),nt.bindTexture(Mr.target,Mr.texture)}function Ur(){var Mr=ti[0];Mr?nt.bindTexture(Mr.target,Mr.texture):nt.bindTexture(3553,null)}function Yr(Mr){var vn=Mr.texture,fn=Mr.unit,An=Mr.target;0<=fn&&(nt.activeTexture(33984+fn),nt.bindTexture(An,null),ti[fn]=null),nt.deleteTexture(vn),Mr.texture=null,Mr.params=null,Mr.pixels=null,Mr.refCount=0,delete $a[Mr.id],tt.textureCount--}var Ar={"don't care":4352,"dont care":4352,nice:4354,fast:4353},et={repeat:10497,clamp:33071,mirror:33648},Lt={nearest:9728,linear:9729},Zt=le({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Lt),sr={none:0,browser:37444},Ir={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Zr={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},Pr={};Ht.ext_srgb&&(Zr.srgb=35904,Zr.srgba=35906),Ht.oes_texture_float&&(Ir.float32=Ir.float=5126),Ht.oes_texture_half_float&&(Ir.float16=Ir["half float"]=36193),Ht.webgl_depth_texture&&(le(Zr,{depth:6402,"depth stencil":34041}),le(Ir,{uint16:5123,uint32:5125,"depth stencil":34042})),Ht.webgl_compressed_texture_s3tc&&le(Pr,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),Ht.webgl_compressed_texture_atc&&le(Pr,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),Ht.webgl_compressed_texture_pvrtc&&le(Pr,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),Ht.webgl_compressed_texture_etc1&&(Pr["rgb etc1"]=36196);var wr=Array.prototype.slice.call(nt.getParameter(34467));Object.keys(Pr).forEach(function(Mr){var vn=Pr[Mr];0<=wr.indexOf(vn)&&(Zr[Mr]=vn)});var Nr=Object.keys(Zr);Kt.textureFormats=Nr;var Sn=[];Object.keys(Zr).forEach(function(Mr){Sn[Zr[Mr]]=Mr});var _n=[];Object.keys(Ir).forEach(function(Mr){_n[Ir[Mr]]=Mr});var Wn=[];Object.keys(Lt).forEach(function(Mr){Wn[Lt[Mr]]=Mr});var Ln=[];Object.keys(Zt).forEach(function(Mr){Ln[Zt[Mr]]=Mr});var Xn=[];Object.keys(et).forEach(function(Mr){Xn[et[Mr]]=Mr});var Kn=Nr.reduce(function(Mr,vn){var fn=Zr[vn];return fn===6409||fn===6406||fn===6409||fn===6410||fn===6402||fn===34041||Ht.ext_srgb&&(fn===35904||fn===35906)?Mr[fn]=fn:fn===32855||0<=vn.indexOf("rgba")?Mr[fn]=6408:Mr[fn]=6407,Mr},{}),Aa=[],Ta=[],oi=0,$a={},Va=Kt.maxTextureUnits,ti=Array(Va).map(function(){return null});return le(dr.prototype,{bind:function(){this.bindCount+=1;var Mr=this.unit;if(0>Mr){for(var vn=0;vn<Va;++vn){var fn=ti[vn];if(fn){if(0<fn.bindCount)continue;fn.unit=-1}ti[vn]=this,Mr=vn;break}je.profile&&tt.maxTextureUnits<Mr+1&&(tt.maxTextureUnits=Mr+1),this.unit=Mr,nt.activeTexture(33984+Mr),nt.bindTexture(this.target,this.texture)}return Mr},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&Yr(this)}}),je.profile&&(tt.getTotalTextureSize=function(){var Mr=0;return Object.keys($a).forEach(function(vn){Mr+=$a[vn].stats.size}),Mr}),{create2D:function(Mr,vn){function fn(Gn,ia){var Yn=An.texInfo;Er.call(Yn);var zn=fr();return typeof Gn=="number"?typeof ia=="number"?kt(zn,Gn|0,ia|0):kt(zn,Gn|0,Gn|0):Gn?(_r(Yn,Gn),Nt(zn,Gn)):kt(zn,1,1),Yn.genMipmaps&&(zn.mipmask=(zn.width<<1)-1),An.mipmask=zn.mipmask,ft(An,zn),An.internalformat=zn.internalformat,fn.width=zn.width,fn.height=zn.height,xr(An),nr(zn,3553),en(Yn,3553),Ur(),Hr(zn),je.profile&&(An.stats.size=I(An.internalformat,An.type,zn.width,zn.height,Yn.genMipmaps,!1)),fn.format=Sn[An.internalformat],fn.type=_n[An.type],fn.mag=Wn[Yn.magFilter],fn.min=Ln[Yn.minFilter],fn.wrapS=Xn[Yn.wrapS],fn.wrapT=Xn[Yn.wrapT],fn}var An=new dr(3553);return $a[An.id]=An,tt.textureCount++,fn(Mr,vn),fn.subimage=function(Gn,ia,Yn,zn){ia|=0,Yn|=0,zn|=0;var ea=pt();return ft(ea,An),ea.width=0,ea.height=0,Xe(ea,Gn),ea.width=ea.width||(An.width>>zn)-ia,ea.height=ea.height||(An.height>>zn)-Yn,xr(An),it(ea,3553,ia,Yn,zn),Ur(),vt(ea),fn},fn.resize=function(Gn,ia){var Yn=Gn|0,zn=ia|0||Yn;if(Yn===An.width&&zn===An.height)return fn;fn.width=An.width=Yn,fn.height=An.height=zn,xr(An);for(var ea=0;An.mipmask>>ea;++ea){var wa=Yn>>ea,si=zn>>ea;if(!wa||!si)break;nt.texImage2D(3553,ea,An.format,wa,si,0,An.format,An.type,null)}return Ur(),je.profile&&(An.stats.size=I(An.internalformat,An.type,Yn,zn,!1,!1)),fn},fn._reglType="texture2d",fn._texture=An,je.profile&&(fn.stats=An.stats),fn.destroy=function(){An.decRef()},fn},createCube:function(Mr,vn,fn,An,Gn,ia){function Yn(wa,si,Ft,cr,$r,rn){var sn,kn=zn.texInfo;for(Er.call(kn),sn=0;6>sn;++sn)ea[sn]=fr();if(typeof wa=="number"||!wa)for(wa=wa|0||1,sn=0;6>sn;++sn)kt(ea[sn],wa,wa);else if(typeof wa=="object")if(si)Nt(ea[0],wa),Nt(ea[1],si),Nt(ea[2],Ft),Nt(ea[3],cr),Nt(ea[4],$r),Nt(ea[5],rn);else if(_r(kn,wa),Me(zn,wa),"faces"in wa)for(wa=wa.faces,sn=0;6>sn;++sn)ft(ea[sn],zn),Nt(ea[sn],wa[sn]);else for(sn=0;6>sn;++sn)Nt(ea[sn],wa);for(ft(zn,ea[0]),zn.mipmask=kn.genMipmaps?(ea[0].width<<1)-1:ea[0].mipmask,zn.internalformat=ea[0].internalformat,Yn.width=ea[0].width,Yn.height=ea[0].height,xr(zn),sn=0;6>sn;++sn)nr(ea[sn],34069+sn);for(en(kn,34067),Ur(),je.profile&&(zn.stats.size=I(zn.internalformat,zn.type,Yn.width,Yn.height,kn.genMipmaps,!0)),Yn.format=Sn[zn.internalformat],Yn.type=_n[zn.type],Yn.mag=Wn[kn.magFilter],Yn.min=Ln[kn.minFilter],Yn.wrapS=Xn[kn.wrapS],Yn.wrapT=Xn[kn.wrapT],sn=0;6>sn;++sn)Hr(ea[sn]);return Yn}var zn=new dr(34067);$a[zn.id]=zn,tt.cubeCount++;var ea=Array(6);return Yn(Mr,vn,fn,An,Gn,ia),Yn.subimage=function(wa,si,Ft,cr,$r){Ft|=0,cr|=0,$r|=0;var rn=pt();return ft(rn,zn),rn.width=0,rn.height=0,Xe(rn,si),rn.width=rn.width||(zn.width>>$r)-Ft,rn.height=rn.height||(zn.height>>$r)-cr,xr(zn),it(rn,34069+wa,Ft,cr,$r),Ur(),vt(rn),Yn},Yn.resize=function(wa){if(wa|=0,wa!==zn.width){Yn.width=zn.width=wa,Yn.height=zn.height=wa,xr(zn);for(var si=0;6>si;++si)for(var Ft=0;zn.mipmask>>Ft;++Ft)nt.texImage2D(34069+si,Ft,zn.format,wa>>Ft,wa>>Ft,0,zn.format,zn.type,null);return Ur(),je.profile&&(zn.stats.size=I(zn.internalformat,zn.type,Yn.width,Yn.height,!1,!0)),Yn}},Yn._reglType="textureCube",Yn._texture=zn,je.profile&&(Yn.stats=zn.stats),Yn.destroy=function(){zn.decRef()},Yn},clear:function(){for(var Mr=0;Mr<Va;++Mr)nt.activeTexture(33984+Mr),nt.bindTexture(3553,null),ti[Mr]=null;Be($a).forEach(Yr),tt.cubeCount=0,tt.textureCount=0},getTexture:function(Mr){return null},restore:function(){for(var Mr=0;Mr<Va;++Mr){var vn=ti[Mr];vn&&(vn.bindCount=0,vn.unit=-1,ti[Mr]=null)}Be($a).forEach(function(fn){fn.texture=nt.createTexture(),nt.bindTexture(fn.target,fn.texture);for(var An=0;32>An;++An)if((fn.mipmask&1<<An)!==0)if(fn.target===3553)nt.texImage2D(3553,An,fn.internalformat,fn.width>>An,fn.height>>An,0,fn.internalformat,fn.type,null);else for(var Gn=0;6>Gn;++Gn)nt.texImage2D(34069+Gn,An,fn.internalformat,fn.width>>An,fn.height>>An,0,fn.internalformat,fn.type,null);en(fn.texInfo,fn.target)})},refresh:function(){for(var Mr=0;Mr<Va;++Mr){var vn=ti[Mr];vn&&(vn.bindCount=0,vn.unit=-1,ti[Mr]=null),nt.activeTexture(33984+Mr),nt.bindTexture(3553,null),nt.bindTexture(34067,null)}}}}function R(nt,Ht,Kt,Gt,br,tt){function je(dr,xr,Ur){this.target=dr,this.texture=xr,this.renderbuffer=Ur;var Yr=dr=0;xr?(dr=xr.width,Yr=xr.height):Ur&&(dr=Ur.width,Yr=Ur.height),this.width=dr,this.height=Yr}function st(dr){dr&&(dr.texture&&dr.texture._texture.decRef(),dr.renderbuffer&&dr.renderbuffer._renderbuffer.decRef())}function ft(dr,xr,Ur){dr&&(dr.texture?dr.texture._texture.refCount+=1:dr.renderbuffer._renderbuffer.refCount+=1)}function Me(dr,xr){xr&&(xr.texture?nt.framebufferTexture2D(36160,dr,xr.target,xr.texture._texture.texture,0):nt.framebufferRenderbuffer(36160,dr,36161,xr.renderbuffer._renderbuffer.renderbuffer))}function Se(dr){var xr=3553,Ur=null,Yr=null,Ar=dr;return typeof dr=="object"&&(Ar=dr.data,"target"in dr&&(xr=dr.target|0)),dr=Ar._reglType,dr==="texture2d"||dr==="textureCube"?Ur=Ar:dr==="renderbuffer"&&(Yr=Ar,xr=36161),new je(xr,Ur,Yr)}function Ke(dr,xr,Ur,Yr,Ar){return Ur?(dr=Gt.create2D({width:dr,height:xr,format:Yr,type:Ar}),dr._texture.refCount=0,new je(3553,dr,null)):(dr=br.create({width:dr,height:xr,format:Yr}),dr._renderbuffer.refCount=0,new je(36161,null,dr))}function Xe(dr){return dr&&(dr.texture||dr.renderbuffer)}function it(dr,xr,Ur){dr&&(dr.texture?dr.texture.resize(xr,Ur):dr.renderbuffer&&dr.renderbuffer.resize(xr,Ur),dr.width=xr,dr.height=Ur)}function pt(){this.id=_r++,en[this.id]=this,this.framebuffer=nt.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function vt(dr){dr.colorAttachments.forEach(st),st(dr.depthAttachment),st(dr.stencilAttachment),st(dr.depthStencilAttachment)}function St(dr){nt.deleteFramebuffer(dr.framebuffer),dr.framebuffer=null,tt.framebufferCount--,delete en[dr.id]}function kt(dr){var xr;nt.bindFramebuffer(36160,dr.framebuffer);var Ur=dr.colorAttachments;for(xr=0;xr<Ur.length;++xr)Me(36064+xr,Ur[xr]);for(xr=Ur.length;xr<Kt.maxColorAttachments;++xr)nt.framebufferTexture2D(36160,36064+xr,3553,null,0);nt.framebufferTexture2D(36160,33306,3553,null,0),nt.framebufferTexture2D(36160,36096,3553,null,0),nt.framebufferTexture2D(36160,36128,3553,null,0),Me(36096,dr.depthAttachment),Me(36128,dr.stencilAttachment),Me(33306,dr.depthStencilAttachment),nt.checkFramebufferStatus(36160),nt.isContextLost(),nt.bindFramebuffer(36160,nr.next?nr.next.framebuffer:null),nr.cur=nr.next,nt.getError()}function Nt(dr,xr){function Ur(Ar,et){var Lt,Zt=0,sr=0,Ir=!0,Zr=!0;Lt=null;var Pr=!0,wr="rgba",Nr="uint8",Sn=1,_n=null,Wn=null,Ln=null,Xn=!1;typeof Ar=="number"?(Zt=Ar|0,sr=et|0||Zt):Ar?("shape"in Ar?(sr=Ar.shape,Zt=sr[0],sr=sr[1]):("radius"in Ar&&(Zt=sr=Ar.radius),"width"in Ar&&(Zt=Ar.width),"height"in Ar&&(sr=Ar.height)),("color"in Ar||"colors"in Ar)&&(Lt=Ar.color||Ar.colors),Lt||("colorCount"in Ar&&(Sn=Ar.colorCount|0),"colorTexture"in Ar&&(Pr=!!Ar.colorTexture,wr="rgba4"),"colorType"in Ar&&(Nr=Ar.colorType,!Pr)&&(Nr==="half float"||Nr==="float16"?wr="rgba16f":(Nr==="float"||Nr==="float32")&&(wr="rgba32f")),"colorFormat"in Ar&&(wr=Ar.colorFormat,0<=fr.indexOf(wr)?Pr=!0:0<=Hr.indexOf(wr)&&(Pr=!1))),("depthTexture"in Ar||"depthStencilTexture"in Ar)&&(Xn=!(!Ar.depthTexture&&!Ar.depthStencilTexture)),"depth"in Ar&&(typeof Ar.depth=="boolean"?Ir=Ar.depth:(_n=Ar.depth,Zr=!1)),"stencil"in Ar&&(typeof Ar.stencil=="boolean"?Zr=Ar.stencil:(Wn=Ar.stencil,Ir=!1)),"depthStencil"in Ar&&(typeof Ar.depthStencil=="boolean"?Ir=Zr=Ar.depthStencil:(Ln=Ar.depthStencil,Zr=Ir=!1))):Zt=sr=1;var Kn=null,Aa=null,Ta=null,oi=null;if(Array.isArray(Lt))Kn=Lt.map(Se);else if(Lt)Kn=[Se(Lt)];else for(Kn=Array(Sn),Lt=0;Lt<Sn;++Lt)Kn[Lt]=Ke(Zt,sr,Pr,wr,Nr);for(Zt=Zt||Kn[0].width,sr=sr||Kn[0].height,_n?Aa=Se(_n):Ir&&!Zr&&(Aa=Ke(Zt,sr,Xn,"depth","uint32")),Wn?Ta=Se(Wn):Zr&&!Ir&&(Ta=Ke(Zt,sr,!1,"stencil","uint8")),Ln?oi=Se(Ln):!_n&&!Wn&&Zr&&Ir&&(oi=Ke(Zt,sr,Xn,"depth stencil","depth stencil")),Ir=null,Lt=0;Lt<Kn.length;++Lt)ft(Kn[Lt]),Kn[Lt]&&Kn[Lt].texture&&(Zr=_t[Kn[Lt].texture._texture.format]*Bt[Kn[Lt].texture._texture.type],Ir===null&&(Ir=Zr));return ft(Aa),ft(Ta),ft(oi),vt(Yr),Yr.width=Zt,Yr.height=sr,Yr.colorAttachments=Kn,Yr.depthAttachment=Aa,Yr.stencilAttachment=Ta,Yr.depthStencilAttachment=oi,Ur.color=Kn.map(Xe),Ur.depth=Xe(Aa),Ur.stencil=Xe(Ta),Ur.depthStencil=Xe(oi),Ur.width=Yr.width,Ur.height=Yr.height,kt(Yr),Ur}var Yr=new pt;return tt.framebufferCount++,Ur(dr,xr),le(Ur,{resize:function(Ar,et){var Lt=Math.max(Ar|0,1),Zt=Math.max(et|0||Lt,1);if(Lt===Yr.width&&Zt===Yr.height)return Ur;for(var sr=Yr.colorAttachments,Ir=0;Ir<sr.length;++Ir)it(sr[Ir],Lt,Zt);return it(Yr.depthAttachment,Lt,Zt),it(Yr.stencilAttachment,Lt,Zt),it(Yr.depthStencilAttachment,Lt,Zt),Yr.width=Ur.width=Lt,Yr.height=Ur.height=Zt,kt(Yr),Ur},_reglType:"framebuffer",_framebuffer:Yr,destroy:function(){St(Yr),vt(Yr)},use:function(Ar){nr.setFBO({framebuffer:Ur},Ar)}})}var nr={cur:null,next:null,dirty:!1,setFBO:null},fr=["rgba"],Hr=["rgba4","rgb565","rgb5 a1"];Ht.ext_srgb&&Hr.push("srgba"),Ht.ext_color_buffer_half_float&&Hr.push("rgba16f","rgb16f"),Ht.webgl_color_buffer_float&&Hr.push("rgba32f");var Er=["uint8"];Ht.oes_texture_half_float&&Er.push("half float","float16"),Ht.oes_texture_float&&Er.push("float","float32");var _r=0,en={};return le(nr,{getFramebuffer:function(dr){return typeof dr=="function"&&dr._reglType==="framebuffer"&&(dr=dr._framebuffer,dr instanceof pt)?dr:null},create:Nt,createCube:function(dr){function xr(Yr){var Ar,et={color:null},Lt=0,Zt=null;Ar="rgba";var sr="uint8",Ir=1;if(typeof Yr=="number"?Lt=Yr|0:Yr?("shape"in Yr?Lt=Yr.shape[0]:("radius"in Yr&&(Lt=Yr.radius|0),"width"in Yr?Lt=Yr.width|0:"height"in Yr&&(Lt=Yr.height|0)),("color"in Yr||"colors"in Yr)&&(Zt=Yr.color||Yr.colors),Zt||("colorCount"in Yr&&(Ir=Yr.colorCount|0),"colorType"in Yr&&(sr=Yr.colorType),"colorFormat"in Yr&&(Ar=Yr.colorFormat)),"depth"in Yr&&(et.depth=Yr.depth),"stencil"in Yr&&(et.stencil=Yr.stencil),"depthStencil"in Yr&&(et.depthStencil=Yr.depthStencil)):Lt=1,Zt)if(Array.isArray(Zt))for(Yr=[],Ar=0;Ar<Zt.length;++Ar)Yr[Ar]=Zt[Ar];else Yr=[Zt];else for(Yr=Array(Ir),Zt={radius:Lt,format:Ar,type:sr},Ar=0;Ar<Ir;++Ar)Yr[Ar]=Gt.createCube(Zt);for(et.color=Array(Yr.length),Ar=0;Ar<Yr.length;++Ar)Ir=Yr[Ar],Lt=Lt||Ir.width,et.color[Ar]={target:34069,data:Yr[Ar]};for(Ar=0;6>Ar;++Ar){for(Ir=0;Ir<Yr.length;++Ir)et.color[Ir].target=34069+Ar;0<Ar&&(et.depth=Ur[0].depth,et.stencil=Ur[0].stencil,et.depthStencil=Ur[0].depthStencil),Ur[Ar]?Ur[Ar](et):Ur[Ar]=Nt(et)}return le(xr,{width:Lt,height:Lt,color:Yr})}var Ur=Array(6);return xr(dr),le(xr,{faces:Ur,resize:function(Yr){var Ar=Yr|0;if(Ar===xr.width)return xr;var et=xr.color;for(Yr=0;Yr<et.length;++Yr)et[Yr].resize(Ar);for(Yr=0;6>Yr;++Yr)Ur[Yr].resize(Ar);return xr.width=xr.height=Ar,xr},_reglType:"framebufferCube",destroy:function(){Ur.forEach(function(Yr){Yr.destroy()})}})},clear:function(){Be(en).forEach(St)},restore:function(){nr.cur=null,nr.next=null,nr.dirty=!0,Be(en).forEach(function(dr){dr.framebuffer=nt.createFramebuffer(),kt(dr)})}})}function O(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function F(nt,Ht,Kt,Gt,br,tt,je){function st(kt){if(kt!==St.currentVAO){var Nt=Ht.oes_vertex_array_object;kt?Nt.bindVertexArrayOES(kt.vao):Nt.bindVertexArrayOES(null),St.currentVAO=kt}}function ft(kt){if(kt!==St.currentVAO){if(kt)kt.bindAttrs();else{for(var Nt=Ht.angle_instanced_arrays,nr=0;nr<it.length;++nr){var fr=it[nr];fr.buffer?(nt.enableVertexAttribArray(nr),fr.buffer.bind(),nt.vertexAttribPointer(nr,fr.size,fr.type,fr.normalized,fr.stride,fr.offfset),Nt&&fr.divisor&&Nt.vertexAttribDivisorANGLE(nr,fr.divisor)):(nt.disableVertexAttribArray(nr),nt.vertexAttrib4f(nr,fr.x,fr.y,fr.z,fr.w))}je.elements?nt.bindBuffer(34963,je.elements.buffer.buffer):nt.bindBuffer(34963,null)}St.currentVAO=kt}}function Me(){Be(vt).forEach(function(kt){kt.destroy()})}function Se(){this.id=++pt,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var kt=Ht.oes_vertex_array_object;this.vao=kt?kt.createVertexArrayOES():null,vt[this.id]=this,this.buffers=[]}function Ke(){Ht.oes_vertex_array_object&&Be(vt).forEach(function(kt){kt.refresh()})}var Xe=Kt.maxAttributes,it=Array(Xe);for(Kt=0;Kt<Xe;++Kt)it[Kt]=new O;var pt=0,vt={},St={Record:O,scope:{},state:it,currentVAO:null,targetVAO:null,restore:Ht.oes_vertex_array_object?Ke:function(){},createVAO:function(kt){function Nt(fr){var Hr;Array.isArray(fr)?(Hr=fr,nr.elements&&nr.ownsElements&&nr.elements.destroy(),nr.elements=null,nr.ownsElements=!1,nr.offset=0,nr.count=0,nr.instances=-1,nr.primitive=4):(fr.elements?(Hr=fr.elements,nr.ownsElements?(typeof Hr=="function"&&Hr._reglType==="elements"?nr.elements.destroy():nr.elements(Hr),nr.ownsElements=!1):tt.getElements(fr.elements)?(nr.elements=fr.elements,nr.ownsElements=!1):(nr.elements=tt.create(fr.elements),nr.ownsElements=!0)):(nr.elements=null,nr.ownsElements=!1),Hr=fr.attributes,nr.offset=0,nr.count=-1,nr.instances=-1,nr.primitive=4,nr.elements&&(nr.count=nr.elements._elements.vertCount,nr.primitive=nr.elements._elements.primType),"offset"in fr&&(nr.offset=fr.offset|0),"count"in fr&&(nr.count=fr.count|0),"instances"in fr&&(nr.instances=fr.instances|0),"primitive"in fr&&(nr.primitive=Ne[fr.primitive])),fr={};var Er=nr.attributes;Er.length=Hr.length;for(var _r=0;_r<Hr.length;++_r){var en=Hr[_r],dr=Er[_r]=new O,xr=en.data||en;if(Array.isArray(xr)||De(xr)||y(xr)){var Ur;nr.buffers[_r]&&(Ur=nr.buffers[_r],De(xr)&&Ur._buffer.byteLength>=xr.byteLength?Ur.subdata(xr):(Ur.destroy(),nr.buffers[_r]=null)),nr.buffers[_r]||(Ur=nr.buffers[_r]=br.create(en,34962,!1,!0)),dr.buffer=br.getBuffer(Ur),dr.size=dr.buffer.dimension|0,dr.normalized=!1,dr.type=dr.buffer.dtype,dr.offset=0,dr.stride=0,dr.divisor=0,dr.state=1,fr[_r]=1}else br.getBuffer(en)?(dr.buffer=br.getBuffer(en),dr.size=dr.buffer.dimension|0,dr.normalized=!1,dr.type=dr.buffer.dtype,dr.offset=0,dr.stride=0,dr.divisor=0,dr.state=1):br.getBuffer(en.buffer)?(dr.buffer=br.getBuffer(en.buffer),dr.size=(+en.size||dr.buffer.dimension)|0,dr.normalized=!!en.normalized||!1,dr.type="type"in en?Pe[en.type]:dr.buffer.dtype,dr.offset=(en.offset||0)|0,dr.stride=(en.stride||0)|0,dr.divisor=(en.divisor||0)|0,dr.state=1):"x"in en&&(dr.x=+en.x||0,dr.y=+en.y||0,dr.z=+en.z||0,dr.w=+en.w||0,dr.state=2)}for(Ur=0;Ur<nr.buffers.length;++Ur)!fr[Ur]&&nr.buffers[Ur]&&(nr.buffers[Ur].destroy(),nr.buffers[Ur]=null);return nr.refresh(),Nt}var nr=new Se;return Gt.vaoCount+=1,Nt.destroy=function(){for(var fr=0;fr<nr.buffers.length;++fr)nr.buffers[fr]&&nr.buffers[fr].destroy();nr.buffers.length=0,nr.ownsElements&&(nr.elements.destroy(),nr.elements=null,nr.ownsElements=!1),nr.destroy()},Nt._vao=nr,Nt._reglType="vao",Nt(kt)},getVAO:function(kt){return typeof kt=="function"&&kt._vao?kt._vao:null},destroyBuffer:function(kt){for(var Nt=0;Nt<it.length;++Nt){var nr=it[Nt];nr.buffer===kt&&(nt.disableVertexAttribArray(Nt),nr.buffer=null)}},setVAO:Ht.oes_vertex_array_object?st:ft,clear:Ht.oes_vertex_array_object?Me:function(){}};return Se.prototype.bindAttrs=function(){for(var kt=Ht.angle_instanced_arrays,Nt=this.attributes,nr=0;nr<Nt.length;++nr){var fr=Nt[nr];fr.buffer?(nt.enableVertexAttribArray(nr),nt.bindBuffer(34962,fr.buffer.buffer),nt.vertexAttribPointer(nr,fr.size,fr.type,fr.normalized,fr.stride,fr.offset),kt&&fr.divisor&&kt.vertexAttribDivisorANGLE(nr,fr.divisor)):(nt.disableVertexAttribArray(nr),nt.vertexAttrib4f(nr,fr.x,fr.y,fr.z,fr.w))}for(kt=Nt.length;kt<Xe;++kt)nt.disableVertexAttribArray(kt);(kt=tt.getElements(this.elements))?nt.bindBuffer(34963,kt.buffer.buffer):nt.bindBuffer(34963,null)},Se.prototype.refresh=function(){var kt=Ht.oes_vertex_array_object;kt&&(kt.bindVertexArrayOES(this.vao),this.bindAttrs(),St.currentVAO=null,kt.bindVertexArrayOES(null))},Se.prototype.destroy=function(){if(this.vao){var kt=Ht.oes_vertex_array_object;this===St.currentVAO&&(St.currentVAO=null,kt.bindVertexArrayOES(null)),kt.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),vt[this.id]&&(delete vt[this.id],--Gt.vaoCount)},St}function V(nt,Ht,Kt,Gt){function br(pt,vt,St,kt){this.name=pt,this.id=vt,this.location=St,this.info=kt}function tt(pt,vt){for(var St=0;St<pt.length;++St)if(pt[St].id===vt.id){pt[St].location=vt.location;return}pt.push(vt)}function je(pt,vt,St){St=pt===35632?Me:Se;var kt=St[vt];if(!kt){var Nt=Ht.str(vt),kt=nt.createShader(pt);nt.shaderSource(kt,Nt),nt.compileShader(kt),St[vt]=kt}return kt}function st(pt,vt){this.id=it++,this.fragId=pt,this.vertId=vt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Gt.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function ft(pt,vt,St){var kt;kt=je(35632,pt.fragId);var Nt=je(35633,pt.vertId);if(vt=pt.program=nt.createProgram(),nt.attachShader(vt,kt),nt.attachShader(vt,Nt),St)for(kt=0;kt<St.length;++kt)Nt=St[kt],nt.bindAttribLocation(vt,Nt[0],Nt[1]);nt.linkProgram(vt),Nt=nt.getProgramParameter(vt,35718),Gt.profile&&(pt.stats.uniformsCount=Nt);var nr=pt.uniforms;for(kt=0;kt<Nt;++kt)if(St=nt.getActiveUniform(vt,kt))if(1<St.size)for(var fr=0;fr<St.size;++fr){var Hr=St.name.replace("[0]","["+fr+"]");tt(nr,new br(Hr,Ht.id(Hr),nt.getUniformLocation(vt,Hr),St))}else tt(nr,new br(St.name,Ht.id(St.name),nt.getUniformLocation(vt,St.name),St));for(Nt=nt.getProgramParameter(vt,35721),Gt.profile&&(pt.stats.attributesCount=Nt),pt=pt.attributes,kt=0;kt<Nt;++kt)(St=nt.getActiveAttrib(vt,kt))&&tt(pt,new br(St.name,Ht.id(St.name),nt.getAttribLocation(vt,St.name),St))}var Me={},Se={},Ke={},Xe=[],it=0;return Gt.profile&&(Kt.getMaxUniformsCount=function(){var pt=0;return Xe.forEach(function(vt){vt.stats.uniformsCount>pt&&(pt=vt.stats.uniformsCount)}),pt},Kt.getMaxAttributesCount=function(){var pt=0;return Xe.forEach(function(vt){vt.stats.attributesCount>pt&&(pt=vt.stats.attributesCount)}),pt}),{clear:function(){var pt=nt.deleteShader.bind(nt);Be(Me).forEach(pt),Me={},Be(Se).forEach(pt),Se={},Xe.forEach(function(vt){nt.deleteProgram(vt.program)}),Xe.length=0,Ke={},Kt.shaderCount=0},program:function(pt,vt,St,kt){var Nt=Ke[vt];Nt||(Nt=Ke[vt]={});var nr=Nt[pt];if(nr&&(nr.refCount++,!kt))return nr;var fr=new st(vt,pt);return Kt.shaderCount++,ft(fr,St,kt),nr||(Nt[pt]=fr),Xe.push(fr),le(fr,{destroy:function(){if(fr.refCount--,0>=fr.refCount){nt.deleteProgram(fr.program);var Hr=Xe.indexOf(fr);Xe.splice(Hr,1),Kt.shaderCount--}0>=Nt[fr.vertId].refCount&&(nt.deleteShader(Se[fr.vertId]),delete Se[fr.vertId],delete Ke[fr.fragId][fr.vertId]),Object.keys(Ke[fr.fragId]).length||(nt.deleteShader(Me[fr.fragId]),delete Me[fr.fragId],delete Ke[fr.fragId])}})},restore:function(){Me={},Se={};for(var pt=0;pt<Xe.length;++pt)ft(Xe[pt],null,Xe[pt].attributes.map(function(vt){return[vt.location,vt.name]}))},shader:je,frag:-1,vert:-1}}function G(nt,Ht,Kt,Gt,br,tt,je){function st(Me){var Se;Se=Ht.next===null?5121:Ht.next.colorAttachments[0].texture._texture.type;var Ke=0,Xe=0,it=Gt.framebufferWidth,pt=Gt.framebufferHeight,vt=null;return De(Me)?vt=Me:Me&&(Ke=Me.x|0,Xe=Me.y|0,it=(Me.width||Gt.framebufferWidth-Ke)|0,pt=(Me.height||Gt.framebufferHeight-Xe)|0,vt=Me.data||null),Kt(),Me=it*pt*4,vt||(Se===5121?vt=new Uint8Array(Me):Se===5126&&(vt=vt||new Float32Array(Me))),nt.pixelStorei(3333,4),nt.readPixels(Ke,Xe,it,pt,6408,Se,vt),vt}function ft(Me){var Se;return Ht.setFBO({framebuffer:Me.framebuffer},function(){Se=st(Me)}),Se}return function(Me){return Me&&"framebuffer"in Me?ft(Me):st(Me)}}function J(nt){for(var Ht=Array(nt.length>>2),Gt=0;Gt<Ht.length;Gt++)Ht[Gt]=0;for(Gt=0;Gt<8*nt.length;Gt+=8)Ht[Gt>>5]|=(nt.charCodeAt(Gt/8)&255)<<24-Gt%32;var Kt=8*nt.length;nt=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225];var Gt=Array(64),br,tt,je,st,ft,Me,Se,Ke,Xe,it,pt;for(Ht[Kt>>5]|=128<<24-Kt%32,Ht[(Kt+64>>9<<4)+15]=Kt,Ke=0;Ke<Ht.length;Ke+=16){for(Kt=nt[0],br=nt[1],tt=nt[2],je=nt[3],st=nt[4],ft=nt[5],Me=nt[6],Se=nt[7],Xe=0;64>Xe;Xe++){if(16>Xe)Gt[Xe]=Ht[Xe+Ke];else{it=Xe,pt=Gt[Xe-2],pt=j(pt,17)^j(pt,19)^pt>>>10,pt=re(pt,Gt[Xe-7]);var vt;vt=Gt[Xe-15],vt=j(vt,7)^j(vt,18)^vt>>>3,Gt[it]=re(re(pt,vt),Gt[Xe-16])}it=st,it=j(it,6)^j(it,11)^j(it,25),it=re(re(re(re(Se,it),st&ft^~st&Me),qt[Xe]),Gt[Xe]),Se=Kt,Se=j(Se,2)^j(Se,13)^j(Se,22),pt=re(Se,Kt&br^Kt&tt^br&tt),Se=Me,Me=ft,ft=st,st=re(je,it),je=tt,tt=br,br=Kt,Kt=re(it,pt)}nt[0]=re(Kt,nt[0]),nt[1]=re(br,nt[1]),nt[2]=re(tt,nt[2]),nt[3]=re(je,nt[3]),nt[4]=re(st,nt[4]),nt[5]=re(ft,nt[5]),nt[6]=re(Me,nt[6]),nt[7]=re(Se,nt[7])}for(Ht="",Gt=0;Gt<32*nt.length;Gt+=8)Ht+=String.fromCharCode(nt[Gt>>5]>>>24-Gt%32&255);return Ht}function Z(nt){for(var Ht="",Kt,Gt=0;Gt<nt.length;Gt++)Kt=nt.charCodeAt(Gt),Ht+="0123456789abcdef".charAt(Kt>>>4&15)+"0123456789abcdef".charAt(Kt&15);return Ht}function Y(nt){for(var Ht="",Kt=-1,Gt,br;++Kt<nt.length;)Gt=nt.charCodeAt(Kt),br=Kt+1<nt.length?nt.charCodeAt(Kt+1):0,55296<=Gt&&56319>=Gt&&56320<=br&&57343>=br&&(Gt=65536+((Gt&1023)<<10)+(br&1023),Kt++),127>=Gt?Ht+=String.fromCharCode(Gt):2047>=Gt?Ht+=String.fromCharCode(192|Gt>>>6&31,128|Gt&63):65535>=Gt?Ht+=String.fromCharCode(224|Gt>>>12&15,128|Gt>>>6&63,128|Gt&63):2097151>=Gt&&(Ht+=String.fromCharCode(240|Gt>>>18&7,128|Gt>>>12&63,128|Gt>>>6&63,128|Gt&63));return Ht}function j(nt,Ht){return nt>>>Ht|nt<<32-Ht}function re(nt,Ht){var Kt=(nt&65535)+(Ht&65535);return(nt>>16)+(Ht>>16)+(Kt>>16)<<16|Kt&65535}function se(nt){return Array.prototype.slice.call(nt)}function oe(nt){return se(nt).join("")}function N(nt){function Ht(){var Se=[],Ke=[];return le(function(){Se.push.apply(Se,se(arguments))},{def:function(){var Xe="v"+br++;return Ke.push(Xe),0<arguments.length&&(Se.push(Xe,"="),Se.push.apply(Se,se(arguments)),Se.push(";")),Xe},toString:function(){return oe([0<Ke.length?"var "+Ke.join(",")+";":"",oe(Se)])}})}function Kt(){function Se(vt,St){Xe(vt,St,"=",Ke.def(vt,St),";")}var Ke=Ht(),Xe=Ht(),it=Ke.toString,pt=Xe.toString;return le(function(){Ke.apply(Ke,se(arguments))},{def:Ke.def,entry:Ke,exit:Xe,save:Se,set:function(vt,St,kt){Se(vt,St),Ke(vt,St,"=",kt,";")},toString:function(){return it()+pt()}})}var Gt=nt&&nt.cache,br=0,tt=[],je=[],st=[],ft=Ht(),Me={};return{global:ft,link:function(Se,Ke){var Xe=Ke&&Ke.stable;if(!Xe){for(var it=0;it<je.length;++it)if(je[it]===Se&&!st[it])return tt[it]}return it="g"+br++,tt.push(it),je.push(Se),st.push(Xe),it},block:Ht,proc:function(Se,Ke){function Xe(){var St="a"+it.length;return it.push(St),St}var it=[];Ke=Ke||0;for(var pt=0;pt<Ke;++pt)Xe();var pt=Kt(),vt=pt.toString;return Me[Se]=le(pt,{arg:Xe,toString:function(){return oe(["function(",it.join(),"){",vt(),"}"])}})},scope:Kt,cond:function(){var Se=oe(arguments),Ke=Kt(),Xe=Kt(),it=Ke.toString,pt=Xe.toString;return le(Ke,{then:function(){return Ke.apply(Ke,se(arguments)),this},else:function(){return Xe.apply(Xe,se(arguments)),this},toString:function(){var vt=pt();return vt&&(vt="else{"+vt+"}"),oe(["if(",Se,"){",it(),"}",vt])}})},compile:function(){var Se=['"use strict";',ft,"return {"];Object.keys(Me).forEach(function(it){Se.push('"',it,'":',Me[it].toString(),",")}),Se.push("}");var Ke=oe(Se).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Xe;return Gt&&(Xe=Z(J(Y(Ke))),Gt[Xe])?Gt[Xe].apply(null,je):(Ke=Function.apply(null,tt.concat(Ke)),Gt&&(Gt[Xe]=Ke),Ke.apply(null,je))}}}function U(nt){return Array.isArray(nt)||De(nt)||y(nt)}function q(nt){return nt.sort(function(Ht,Kt){return Ht==="viewport"?-1:Kt==="viewport"?1:Ht<Kt?-1:1})}function Q(nt,Ht,Kt,Gt){this.thisDep=nt,this.contextDep=Ht,this.propDep=Kt,this.append=Gt}function W(nt){return nt&&!(nt.thisDep||nt.contextDep||nt.propDep)}function X(nt){return new Q(!1,!1,!1,nt)}function ee(nt,Ht){var Kt=nt.type;if(Kt===0)return Kt=nt.data.length,new Q(!0,1<=Kt,2<=Kt,Ht);if(Kt===4)return Kt=nt.data,new Q(Kt.thisDep,Kt.contextDep,Kt.propDep,Ht);if(Kt===5)return new Q(!1,!1,!1,Ht);if(Kt===6){for(var Gt=Kt=!1,br=!1,tt=0;tt<nt.data.length;++tt){var je=nt.data[tt];je.type===1?br=!0:je.type===2?Gt=!0:je.type===3?Kt=!0:je.type===0?(Kt=!0,je=je.data,1<=je&&(Gt=!0),2<=je&&(br=!0)):je.type===4&&(Kt=Kt||je.data.thisDep,Gt=Gt||je.data.contextDep,br=br||je.data.propDep)}return new Q(Kt,Gt,br,Ht)}return new Q(Kt===3,Kt===2,Kt===1,Ht)}function te(nt,Ht,Kt,Gt,br,tt,je,st,ft,Me,Se,Ke,Xe,it,pt,vt){function St(Ft){return Ft.replace(".","_")}function kt(Ft,cr,$r){var rn=St(Ft);ia.push(Ft),Gn[rn]=An[rn]=!!$r,Yn[rn]=cr}function Nt(Ft,cr,$r){var rn=St(Ft);ia.push(Ft),Array.isArray($r)?(An[rn]=$r.slice(),Gn[rn]=$r.slice()):An[rn]=Gn[rn]=$r,zn[rn]=cr}function nr(){var Ft=N({cache:pt}),cr=Ft.link,$r=Ft.global;Ft.id=si++,Ft.batchId="0";var rn=cr(ea),sn=Ft.shared={props:"a0"};Object.keys(ea).forEach(function(gr){sn[gr]=$r.def(rn,".",gr)});var kn=Ft.next={},mn=Ft.current={};Object.keys(zn).forEach(function(gr){Array.isArray(An[gr])&&(kn[gr]=$r.def(sn.next,".",gr),mn[gr]=$r.def(sn.current,".",gr))});var un=Ft.constants={};Object.keys(wa).forEach(function(gr){un[gr]=$r.def(JSON.stringify(wa[gr]))}),Ft.invoke=function(gr,Dr){switch(Dr.type){case 0:var dn=["this",sn.context,sn.props,Ft.batchId];return gr.def(cr(Dr.data),".call(",dn.slice(0,Math.max(Dr.data.length+1,4)),")");case 1:return gr.def(sn.props,Dr.data);case 2:return gr.def(sn.context,Dr.data);case 3:return gr.def("this",Dr.data);case 4:return Dr.data.append(Ft,gr),Dr.data.ref;case 5:return Dr.data.toString();case 6:return Dr.data.map(function(Bn){return Ft.invoke(gr,Bn)})}},Ft.attribCache={};var yr={};return Ft.scopeAttrib=function(gr){if(gr=Ht.id(gr),gr in yr)return yr[gr];var Dr=Me.scope[gr];return Dr||(Dr=Me.scope[gr]=new Va),yr[gr]=cr(Dr)},Ft}function fr(Ft){var cr=Ft.static;Ft=Ft.dynamic;var $r;if("profile"in cr){var rn=!!cr.profile;$r=X(function(kn,mn){return rn}),$r.enable=rn}else if("profile"in Ft){var sn=Ft.profile;$r=ee(sn,function(kn,mn){return kn.invoke(mn,sn)})}return $r}function Hr(Ft,cr){var $r=Ft.static,rn=Ft.dynamic;if("framebuffer"in $r){var sn=$r.framebuffer;return sn?(sn=st.getFramebuffer(sn),X(function(mn,un){var yr=mn.link(sn),gr=mn.shared;return un.set(gr.framebuffer,".next",yr),gr=gr.context,un.set(gr,".framebufferWidth",yr+".width"),un.set(gr,".framebufferHeight",yr+".height"),yr})):X(function(mn,un){var yr=mn.shared;return un.set(yr.framebuffer,".next","null"),yr=yr.context,un.set(yr,".framebufferWidth",yr+".drawingBufferWidth"),un.set(yr,".framebufferHeight",yr+".drawingBufferHeight"),"null"})}if("framebuffer"in rn){var kn=rn.framebuffer;return ee(kn,function(mn,un){var Dr=mn.invoke(un,kn),yr=mn.shared,gr=yr.framebuffer,Dr=un.def(gr,".getFramebuffer(",Dr,")");return un.set(gr,".next",Dr),yr=yr.context,un.set(yr,".framebufferWidth",Dr+"?"+Dr+".width:"+yr+".drawingBufferWidth"),un.set(yr,".framebufferHeight",Dr+"?"+Dr+".height:"+yr+".drawingBufferHeight"),Dr})}return null}function Er(Ft,cr,$r){function rn(un){if(un in sn){var yr=sn[un];un=!0;var gr=yr.x|0,Dr=yr.y|0,dn,Bn;return"width"in yr?dn=yr.width|0:un=!1,"height"in yr?Bn=yr.height|0:un=!1,new Q(!un&&cr&&cr.thisDep,!un&&cr&&cr.contextDep,!un&&cr&&cr.propDep,function(bn,Zn){var aa=bn.shared.context,pa=dn;"width"in yr||(pa=Zn.def(aa,".","framebufferWidth","-",gr));var ya=Bn;return"height"in yr||(ya=Zn.def(aa,".","framebufferHeight","-",Dr)),[gr,Dr,pa,ya]})}if(un in kn){var ta=kn[un];return un=ee(ta,function(bn,Zn){var Sa=bn.invoke(Zn,ta),aa=bn.shared.context,pa=Zn.def(Sa,".x|0"),ya=Zn.def(Sa,".y|0"),la=Zn.def('"width" in ',Sa,"?",Sa,".width|0:","(",aa,".","framebufferWidth","-",pa,")"),Sa=Zn.def('"height" in ',Sa,"?",Sa,".height|0:","(",aa,".","framebufferHeight","-",ya,")");return[pa,ya,la,Sa]}),cr&&(un.thisDep=un.thisDep||cr.thisDep,un.contextDep=un.contextDep||cr.contextDep,un.propDep=un.propDep||cr.propDep),un}return cr?new Q(cr.thisDep,cr.contextDep,cr.propDep,function(bn,Zn){var aa=bn.shared.context;return[0,0,Zn.def(aa,".","framebufferWidth"),Zn.def(aa,".","framebufferHeight")]}):null}var sn=Ft.static,kn=Ft.dynamic;if(Ft=rn("viewport")){var mn=Ft;Ft=new Q(Ft.thisDep,Ft.contextDep,Ft.propDep,function(un,yr){var gr=mn.append(un,yr),Dr=un.shared.context;return yr.set(Dr,".viewportWidth",gr[2]),yr.set(Dr,".viewportHeight",gr[3]),gr})}return{viewport:Ft,scissor_box:rn("scissor.box")}}function _r(Ft,cr){var $r=Ft.static;if(typeof $r.frag=="string"&&typeof $r.vert=="string"){if(0<Object.keys(cr.dynamic).length)return null;var $r=cr.static,rn=Object.keys($r);if(0<rn.length&&typeof $r[rn[0]]=="number"){for(var sn=[],kn=0;kn<rn.length;++kn)sn.push([$r[rn[kn]]|0,rn[kn]]);return sn}}return null}function en(Ft,cr,$r){function rn(gr){if(gr in sn){var Dr=Ht.id(sn[gr]);return gr=X(function(){return Dr}),gr.id=Dr,gr}if(gr in kn){var dn=kn[gr];return ee(dn,function(Bn,ta){var bn=Bn.invoke(ta,dn);return ta.def(Bn.shared.strings,".id(",bn,")")})}return null}var sn=Ft.static,kn=Ft.dynamic,mn=rn("frag"),un=rn("vert"),yr=null;return W(mn)&&W(un)?(yr=Se.program(un.id,mn.id,null,$r),Ft=X(function(gr,Dr){return gr.link(yr)})):Ft=new Q(mn&&mn.thisDep||un&&un.thisDep,mn&&mn.contextDep||un&&un.contextDep,mn&&mn.propDep||un&&un.propDep,function(gr,Dr){var dn=gr.shared.shader,Bn;Bn=mn?mn.append(gr,Dr):Dr.def(dn,".","frag");var ta;return ta=un?un.append(gr,Dr):Dr.def(dn,".","vert"),Dr.def(dn+".program("+ta+","+Bn+")")}),{frag:mn,vert:un,progVar:Ft,program:yr}}function dr(Ft,cr){function $r(bn,Zn){if(bn in rn){var aa=rn[bn]|0;return Zn?kn.offset=aa:kn.instances=aa,X(function(ya,la){return Zn&&(ya.OFFSET=aa),aa})}if(bn in sn){var pa=sn[bn];return ee(pa,function(ya,la){var Sa=ya.invoke(la,pa);return Zn&&(ya.OFFSET=Sa),Sa})}if(Zn){if(yr)return X(function(ya,la){return ya.OFFSET=0});if(mn)return new Q(un.thisDep,un.contextDep,un.propDep,function(ya,la){return la.def(ya.shared.vao+".currentVAO?"+ya.shared.vao+".currentVAO.offset:0")})}else if(mn)return new Q(un.thisDep,un.contextDep,un.propDep,function(ya,la){return la.def(ya.shared.vao+".currentVAO?"+ya.shared.vao+".currentVAO.instances:-1")});return null}var rn=Ft.static,sn=Ft.dynamic,kn={},mn=!1,un=function(){if("vao"in rn){var bn=rn.vao;return bn!==null&&Me.getVAO(bn)===null&&(bn=Me.createVAO(bn)),mn=!0,kn.vao=bn,X(function(aa){var pa=Me.getVAO(bn);return pa?aa.link(pa):"null"})}if("vao"in sn){mn=!0;var Zn=sn.vao;return ee(Zn,function(aa,pa){var ya=aa.invoke(pa,Zn);return pa.def(aa.shared.vao+".getVAO("+ya+")")})}return null}(),yr=!1,gr=function(){if("elements"in rn){var bn=rn.elements;if(kn.elements=bn,U(bn)){var Zn=kn.elements=tt.create(bn,!0),bn=tt.getElements(Zn);yr=!0}else bn&&(bn=tt.getElements(bn),yr=!0);return Zn=X(function(pa,ya){if(bn){var la=pa.link(bn);return pa.ELEMENTS=la}return pa.ELEMENTS=null}),Zn.value=bn,Zn}if("elements"in sn){yr=!0;var aa=sn.elements;return ee(aa,function(pa,ya){var la=pa.shared,ho=la.isBufferArgs,la=la.elements,Ro=pa.invoke(ya,aa),Sa=ya.def("null"),ho=ya.def(ho,"(",Ro,")"),Ro=pa.cond(ho).then(Sa,"=",la,".createStream(",Ro,");").else(Sa,"=",la,".getElements(",Ro,");");return ya.entry(Ro),ya.exit(pa.cond(ho).then(la,".destroyStream(",Sa,");")),pa.ELEMENTS=Sa})}return mn?new Q(un.thisDep,un.contextDep,un.propDep,function(pa,ya){return ya.def(pa.shared.vao+".currentVAO?"+pa.shared.elements+".getElements("+pa.shared.vao+".currentVAO.elements):null")}):null}(),Dr=$r("offset",!0),dn=function(){if("primitive"in rn){var bn=rn.primitive;return kn.primitive=bn,X(function(aa,pa){return Ne[bn]})}if("primitive"in sn){var Zn=sn.primitive;return ee(Zn,function(aa,pa){var ya=aa.constants.primTypes,la=aa.invoke(pa,Zn);return pa.def(ya,"[",la,"]")})}return yr?W(gr)?gr.value?X(function(aa,pa){return pa.def(aa.ELEMENTS,".primType")}):X(function(){return 4}):new Q(gr.thisDep,gr.contextDep,gr.propDep,function(aa,pa){var ya=aa.ELEMENTS;return pa.def(ya,"?",ya,".primType:",4)}):mn?new Q(un.thisDep,un.contextDep,un.propDep,function(aa,pa){return pa.def(aa.shared.vao+".currentVAO?"+aa.shared.vao+".currentVAO.primitive:4")}):null}(),Bn=function(){if("count"in rn){var bn=rn.count|0;return kn.count=bn,X(function(){return bn})}if("count"in sn){var Zn=sn.count;return ee(Zn,function(aa,pa){return aa.invoke(pa,Zn)})}return yr?W(gr)?gr?Dr?new Q(Dr.thisDep,Dr.contextDep,Dr.propDep,function(aa,pa){return pa.def(aa.ELEMENTS,".vertCount-",aa.OFFSET)}):X(function(aa,pa){return pa.def(aa.ELEMENTS,".vertCount")}):X(function(){return-1}):new Q(gr.thisDep||Dr.thisDep,gr.contextDep||Dr.contextDep,gr.propDep||Dr.propDep,function(aa,pa){var ya=aa.ELEMENTS;return aa.OFFSET?pa.def(ya,"?",ya,".vertCount-",aa.OFFSET,":-1"):pa.def(ya,"?",ya,".vertCount:-1")}):mn?new Q(un.thisDep,un.contextDep,un.propDep,function(aa,pa){return pa.def(aa.shared.vao,".currentVAO?",aa.shared.vao,".currentVAO.count:-1")}):null}(),ta=$r("instances",!1);return{elements:gr,primitive:dn,count:Bn,instances:ta,offset:Dr,vao:un,vaoActive:mn,elementsActive:yr,static:kn}}function xr(Ft,cr){var $r=Ft.static,rn=Ft.dynamic,sn={};return ia.forEach(function(kn){function mn(yr,gr){if(kn in $r){var Dr=yr($r[kn]);sn[un]=X(function(){return Dr})}else if(kn in rn){var dn=rn[kn];sn[un]=ee(dn,function(Bn,ta){return gr(Bn,ta,Bn.invoke(ta,dn))})}}var un=St(kn);switch(kn){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return mn(function(yr){return yr},function(yr,gr,Dr){return Dr});case"depth.func":return mn(function(yr){return er[yr]},function(yr,gr,Dr){return gr.def(yr.constants.compareFuncs,"[",Dr,"]")});case"depth.range":return mn(function(yr){return yr},function(yr,gr,Dr){return yr=gr.def("+",Dr,"[0]"),gr=gr.def("+",Dr,"[1]"),[yr,gr]});case"blend.func":return mn(function(yr){return[rr["srcRGB"in yr?yr.srcRGB:yr.src],rr["dstRGB"in yr?yr.dstRGB:yr.dst],rr["srcAlpha"in yr?yr.srcAlpha:yr.src],rr["dstAlpha"in yr?yr.dstAlpha:yr.dst]]},function(yr,gr,Dr){function dn(Zn,aa){return gr.def('"',Zn,aa,'" in ',Dr,"?",Dr,".",Zn,aa,":",Dr,".",Zn)}yr=yr.constants.blendFuncs;var Bn=dn("src","RGB"),bn=dn("dst","RGB"),Bn=gr.def(yr,"[",Bn,"]"),ta=gr.def(yr,"[",dn("src","Alpha"),"]"),bn=gr.def(yr,"[",bn,"]");return yr=gr.def(yr,"[",dn("dst","Alpha"),"]"),[Bn,bn,ta,yr]});case"blend.equation":return mn(function(yr){if(typeof yr=="string")return[ti[yr],ti[yr]];if(typeof yr=="object")return[ti[yr.rgb],ti[yr.alpha]]},function(yr,gr,Dr){var dn=yr.constants.blendEquations,Bn=gr.def(),ta=gr.def();return yr=yr.cond("typeof ",Dr,'==="string"'),yr.then(Bn,"=",ta,"=",dn,"[",Dr,"];"),yr.else(Bn,"=",dn,"[",Dr,".rgb];",ta,"=",dn,"[",Dr,".alpha];"),gr(yr),[Bn,ta]});case"blend.color":return mn(function(yr){return i(4,function(gr){return+yr[gr]})},function(yr,gr,Dr){return i(4,function(dn){return gr.def("+",Dr,"[",dn,"]")})});case"stencil.mask":return mn(function(yr){return yr|0},function(yr,gr,Dr){return gr.def(Dr,"|0")});case"stencil.func":return mn(function(yr){return[er[yr.cmp||"keep"],yr.ref||0,"mask"in yr?yr.mask:-1]},function(yr,gr,Dr){yr=gr.def('"cmp" in ',Dr,"?",yr.constants.compareFuncs,"[",Dr,".cmp]",":",7680);var dn=gr.def(Dr,".ref|0");return gr=gr.def('"mask" in ',Dr,"?",Dr,".mask|0:-1"),[yr,dn,gr]});case"stencil.opFront":case"stencil.opBack":return mn(function(yr){return[kn==="stencil.opBack"?1029:1028,pr[yr.fail||"keep"],pr[yr.zfail||"keep"],pr[yr.zpass||"keep"]]},function(yr,gr,Dr){function dn(ta){return gr.def('"',ta,'" in ',Dr,"?",Bn,"[",Dr,".",ta,"]:",7680)}var Bn=yr.constants.stencilOps;return[kn==="stencil.opBack"?1029:1028,dn("fail"),dn("zfail"),dn("zpass")]});case"polygonOffset.offset":return mn(function(yr){return[yr.factor|0,yr.units|0]},function(yr,gr,Dr){return yr=gr.def(Dr,".factor|0"),gr=gr.def(Dr,".units|0"),[yr,gr]});case"cull.face":return mn(function(yr){var gr=0;return yr==="front"?gr=1028:yr==="back"&&(gr=1029),gr},function(yr,gr,Dr){return gr.def(Dr,'==="front"?',1028,":",1029)});case"lineWidth":return mn(function(yr){return yr},function(yr,gr,Dr){return Dr});case"frontFace":return mn(function(yr){return Xr[yr]},function(yr,gr,Dr){return gr.def(Dr+'==="cw"?2304:2305')});case"colorMask":return mn(function(yr){return yr.map(function(gr){return!!gr})},function(yr,gr,Dr){return i(4,function(dn){return"!!"+Dr+"["+dn+"]"})});case"sample.coverage":return mn(function(yr){return["value"in yr?yr.value:1,!!yr.invert]},function(yr,gr,Dr){return yr=gr.def('"value" in ',Dr,"?+",Dr,".value:1"),gr=gr.def("!!",Dr,".invert"),[yr,gr]})}}),sn}function Ur(Ft,cr){var $r=Ft.static,rn=Ft.dynamic,sn={};return Object.keys($r).forEach(function(kn){var mn=$r[kn],un;if(typeof mn=="number"||typeof mn=="boolean")un=X(function(){return mn});else if(typeof mn=="function"){var yr=mn._reglType;yr==="texture2d"||yr==="textureCube"?un=X(function(gr){return gr.link(mn)}):(yr==="framebuffer"||yr==="framebufferCube")&&(un=X(function(gr){return gr.link(mn.color[0])}))}else x(mn)&&(un=X(function(gr){return gr.global.def("[",i(mn.length,function(Dr){return mn[Dr]}),"]")}));un.value=mn,sn[kn]=un}),Object.keys(rn).forEach(function(kn){var mn=rn[kn];sn[kn]=ee(mn,function(un,yr){return un.invoke(yr,mn)})}),sn}function Yr(Ft,cr){var $r=Ft.static,rn=Ft.dynamic,sn={};return Object.keys($r).forEach(function(kn){var mn=$r[kn],un=Ht.id(kn),yr=new Va;if(U(mn))yr.state=1,yr.buffer=br.getBuffer(br.create(mn,34962,!1,!0)),yr.type=0;else{var gr=br.getBuffer(mn);if(gr)yr.state=1,yr.buffer=gr,yr.type=0;else if("constant"in mn){var Dr=mn.constant;yr.buffer="null",yr.state=2,typeof Dr=="number"?yr.x=Dr:Ot.forEach(function(aa,pa){pa<Dr.length&&(yr[aa]=Dr[pa])})}else{var gr=U(mn.buffer)?br.getBuffer(br.create(mn.buffer,34962,!1,!0)):br.getBuffer(mn.buffer),dn=mn.offset|0,Bn=mn.stride|0,ta=mn.size|0,bn=!!mn.normalized,Zn=0;"type"in mn&&(Zn=Pe[mn.type]),mn=mn.divisor|0,yr.buffer=gr,yr.state=1,yr.size=ta,yr.normalized=bn,yr.type=Zn||gr.dtype,yr.offset=dn,yr.stride=Bn,yr.divisor=mn}}sn[kn]=X(function(aa,pa){var ya=aa.attribCache;if(un in ya)return ya[un];var la={isStream:!1};return Object.keys(yr).forEach(function(Sa){la[Sa]=yr[Sa]}),yr.buffer&&(la.buffer=aa.link(yr.buffer),la.type=la.type||la.buffer+".dtype"),ya[un]=la})}),Object.keys(rn).forEach(function(kn){var mn=rn[kn];sn[kn]=ee(mn,function(un,yr){function gr(ya){yr(bn[ya],"=",Dr,".",ya,"|0;")}var Dr=un.invoke(yr,mn),ta=un.shared,dn=un.constants,Bn=ta.isBufferArgs,ta=ta.buffer,bn={isStream:yr.def(!1)},Zn=new Va;Zn.state=1,Object.keys(Zn).forEach(function(ya){bn[ya]=yr.def(""+Zn[ya])});var aa=bn.buffer,pa=bn.type;return yr("if(",Bn,"(",Dr,")){",bn.isStream,"=true;",aa,"=",ta,".createStream(",34962,",",Dr,");",pa,"=",aa,".dtype;","}else{",aa,"=",ta,".getBuffer(",Dr,");","if(",aa,"){",pa,"=",aa,".dtype;",'}else if("constant" in ',Dr,"){",bn.state,"=",2,";","if(typeof "+Dr+'.constant === "number"){',bn[Ot[0]],"=",Dr,".constant;",Ot.slice(1).map(function(ya){return bn[ya]}).join("="),"=0;","}else{",Ot.map(function(ya,la){return bn[ya]+"="+Dr+".constant.length>"+la+"?"+Dr+".constant["+la+"]:0;"}).join(""),"}}else{","if(",Bn,"(",Dr,".buffer)){",aa,"=",ta,".createStream(",34962,",",Dr,".buffer);","}else{",aa,"=",ta,".getBuffer(",Dr,".buffer);","}",pa,'="type" in ',Dr,"?",dn.glTypes,"[",Dr,".type]:",aa,".dtype;",bn.normalized,"=!!",Dr,".normalized;"),gr("size"),gr("offset"),gr("stride"),gr("divisor"),yr("}}"),yr.exit("if(",bn.isStream,"){",ta,".destroyStream(",aa,");","}"),bn})}),sn}function Ar(Ft){var cr=Ft.static,$r=Ft.dynamic,rn={};return Object.keys(cr).forEach(function(sn){var kn=cr[sn];rn[sn]=X(function(mn,un){return typeof kn=="number"||typeof kn=="boolean"?""+kn:mn.link(kn)})}),Object.keys($r).forEach(function(sn){var kn=$r[sn];rn[sn]=ee(kn,function(mn,un){return mn.invoke(un,kn)})}),rn}function et(Ft,cr,$r,rn,sn){function kn(Zn){var aa=un[Zn];aa&&(gr[Zn]=aa)}var mn=_r(Ft,cr),Bn=Hr(Ft),un=Er(Ft,Bn),yr=dr(Ft),gr=xr(Ft),Dr=en(Ft,sn,mn);kn("viewport"),kn(St("scissor.box"));var dn=0<Object.keys(gr).length,Bn={framebuffer:Bn,draw:yr,shader:Dr,state:gr,dirty:dn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Bn.profile=fr(Ft),Bn.uniforms=Ur($r),Bn.drawVAO=Bn.scopeVAO=yr.vao,!Bn.drawVAO&&Dr.program&&!mn&&Kt.angle_instanced_arrays&&yr.static.elements){var ta=!0;if(Ft=Dr.program.attributes.map(function(Zn){return Zn=cr.static[Zn],ta=ta&&!!Zn,Zn}),ta&&0<Ft.length){var bn=Me.getVAO(Me.createVAO({attributes:Ft,elements:yr.static.elements}));Bn.drawVAO=new Q(null,null,null,function(Zn,aa){return Zn.link(bn)}),Bn.useVAO=!0}}return mn?Bn.useVAO=!0:Bn.attributes=Yr(cr),Bn.context=Ar(rn),Bn}function Lt(Ft,cr,$r){var rn=Ft.shared.context,sn=Ft.scope();Object.keys($r).forEach(function(kn){cr.save(rn,"."+kn);var mn=$r[kn].append(Ft,cr);Array.isArray(mn)?sn(rn,".",kn,"=[",mn.join(),"];"):sn(rn,".",kn,"=",mn,";")}),cr(sn)}function Zt(Ft,cr,$r,rn){var un=Ft.shared,sn=un.gl,kn=un.framebuffer,mn;vn&&(mn=cr.def(un.extensions,".webgl_draw_buffers"));var yr=Ft.constants,un=yr.drawBuffer,yr=yr.backBuffer;Ft=$r?$r.append(Ft,cr):cr.def(kn,".next"),rn||cr("if(",Ft,"!==",kn,".cur){"),cr("if(",Ft,"){",sn,".bindFramebuffer(",36160,",",Ft,".framebuffer);"),vn&&cr(mn,".drawBuffersWEBGL(",un,"[",Ft,".colorAttachments.length]);"),cr("}else{",sn,".bindFramebuffer(",36160,",null);"),vn&&cr(mn,".drawBuffersWEBGL(",yr,");"),cr("}",kn,".cur=",Ft,";"),rn||cr("}")}function sr(Ft,cr,$r){var rn=Ft.shared,sn=rn.gl,kn=Ft.current,mn=Ft.next,un=rn.current,yr=rn.next,gr=Ft.cond(un,".dirty");ia.forEach(function(Dr){if(Dr=St(Dr),!(Dr in $r.state)){var dn,Bn;if(Dr in mn){dn=mn[Dr],Bn=kn[Dr];var ta=i(An[Dr].length,function(bn){return gr.def(dn,"[",bn,"]")});gr(Ft.cond(ta.map(function(bn,Zn){return bn+"!=="+Bn+"["+Zn+"]"}).join("||")).then(sn,".",zn[Dr],"(",ta,");",ta.map(function(bn,Zn){return Bn+"["+Zn+"]="+bn}).join(";"),";"))}else dn=gr.def(yr,".",Dr),ta=Ft.cond(dn,"!==",un,".",Dr),gr(ta),Dr in Yn?ta(Ft.cond(dn).then(sn,".enable(",Yn[Dr],");").else(sn,".disable(",Yn[Dr],");"),un,".",Dr,"=",dn,";"):ta(sn,".",zn[Dr],"(",dn,");",un,".",Dr,"=",dn,";")}}),Object.keys($r.state).length===0&&gr(un,".dirty=false;"),cr(gr)}function Ir(Ft,cr,$r,rn){var sn=Ft.shared,kn=Ft.current,mn=sn.current,un=sn.gl,yr;q(Object.keys($r)).forEach(function(gr){var Dr=$r[gr];if(!rn||rn(Dr)){var dn=Dr.append(Ft,cr);if(Yn[gr]){var Bn=Yn[gr];W(Dr)?(yr=Ft.link(dn,{stable:!0}),cr(Ft.cond(yr).then(un,".enable(",Bn,");").else(un,".disable(",Bn,");")),cr(mn,".",gr,"=",yr,";")):(cr(Ft.cond(dn).then(un,".enable(",Bn,");").else(un,".disable(",Bn,");")),cr(mn,".",gr,"=",dn,";"))}else if(x(dn)){var ta=kn[gr];cr(un,".",zn[gr],"(",dn,");",dn.map(function(bn,Zn){return ta+"["+Zn+"]="+bn}).join(";"),";")}else W(Dr)?(yr=Ft.link(dn,{stable:!0}),cr(un,".",zn[gr],"(",yr,");",mn,".",gr,"=",yr,";")):cr(un,".",zn[gr],"(",dn,");",mn,".",gr,"=",dn,";")}})}function Zr(Ft,cr){Mr&&(Ft.instancing=cr.def(Ft.shared.extensions,".angle_instanced_arrays"))}function Pr(Ft,cr,$r,rn,sn){function kn(){return typeof performance>"u"?"Date.now()":"performance.now()"}function mn(Zn){ta=cr.def(),Zn(ta,"=",kn(),";"),typeof sn=="string"?Zn(Dr,".count+=",sn,";"):Zn(Dr,".count++;"),it&&(rn?(bn=cr.def(),Zn(bn,"=",Bn,".getNumPendingQueries();")):Zn(Bn,".beginQuery(",Dr,");"))}function un(Zn){Zn(Dr,".cpuTime+=",kn(),"-",ta,";"),it&&(rn?Zn(Bn,".pushScopeStats(",bn,",",Bn,".getNumPendingQueries(),",Dr,");"):Zn(Bn,".endQuery();"))}function yr(Zn){var aa=cr.def(dn,".profile");cr(dn,".profile=",Zn,";"),cr.exit(dn,".profile=",aa,";")}var gr=Ft.shared,Dr=Ft.stats,dn=gr.current,Bn=gr.timer;$r=$r.profile;var ta,bn;if($r){if(W($r)){$r.enable?(mn(cr),un(cr.exit),yr("true")):yr("false");return}$r=$r.append(Ft,cr),yr($r)}else $r=cr.def(dn,".profile");gr=Ft.block(),mn(gr),cr("if(",$r,"){",gr,"}"),Ft=Ft.block(),un(Ft),cr.exit("if(",$r,"){",Ft,"}")}function wr(Ft,cr,$r,rn,sn){function kn(yr){switch(yr){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function mn(yr,gr,Dr){function dn(){cr("if(!",Zn,".buffer){",ta,".enableVertexAttribArray(",bn,");}");var la=Dr.type,Sa;Sa=Dr.size?cr.def(Dr.size,"||",gr):gr,cr("if(",Zn,".type!==",la,"||",Zn,".size!==",Sa,"||",ya.map(function(ho){return Zn+"."+ho+"!=="+Dr[ho]}).join("||"),"){",ta,".bindBuffer(",34962,",",aa,".buffer);",ta,".vertexAttribPointer(",[bn,Sa,la,Dr.normalized,Dr.stride,Dr.offset],");",Zn,".type=",la,";",Zn,".size=",Sa,";",ya.map(function(ho){return Zn+"."+ho+"="+Dr[ho]+";"}).join(""),"}"),Mr&&(la=Dr.divisor,cr("if(",Zn,".divisor!==",la,"){",Ft.instancing,".vertexAttribDivisorANGLE(",[bn,la],");",Zn,".divisor=",la,";}"))}function Bn(){cr("if(",Zn,".buffer){",ta,".disableVertexAttribArray(",bn,");",Zn,".buffer=null;","}if(",Ot.map(function(la,Sa){return Zn+"."+la+"!=="+pa[Sa]}).join("||"),"){",ta,".vertexAttrib4f(",bn,",",pa,");",Ot.map(function(la,Sa){return Zn+"."+la+"="+pa[Sa]+";"}).join(""),"}")}var ta=un.gl,bn=cr.def(yr,".location"),Zn=cr.def(un.attributes,"[",bn,"]");yr=Dr.state;var aa=Dr.buffer,pa=[Dr.x,Dr.y,Dr.z,Dr.w],ya=["buffer","normalized","offset","stride"];yr===1?dn():yr===2?Bn():(cr("if(",yr,"===",1,"){"),dn(),cr("}else{"),Bn(),cr("}"))}var un=Ft.shared;rn.forEach(function(yr){var gr=yr.name,Dr=$r.attributes[gr],dn;if(Dr){if(!sn(Dr))return;dn=Dr.append(Ft,cr)}else{if(!sn(hn))return;var Bn=Ft.scopeAttrib(gr);dn={},Object.keys(new Va).forEach(function(ta){dn[ta]=cr.def(Bn,".",ta)})}mn(Ft.link(yr),kn(yr.info.type),dn)})}function Nr(Ft,cr,$r,rn,sn,kn){for(var mn=Ft.shared,un=mn.gl,yr,gr=0;gr<rn.length;++gr){var ta=rn[gr],Dr=ta.name,dn=ta.info.type,Bn=$r.uniforms[Dr],ta=Ft.link(ta)+".location",bn;if(Bn){if(!sn(Bn))continue;if(W(Bn)){if(Dr=Bn.value,dn===35678||dn===35680)dn=Ft.link(Dr._texture||Dr.color[0]._texture),cr(un,".uniform1i(",ta,",",dn+".bind());"),cr.exit(dn,".unbind();");else if(dn===35674||dn===35675||dn===35676)Dr=Ft.global.def("new Float32Array(["+Array.prototype.slice.call(Dr)+"])"),Bn=2,dn===35675?Bn=3:dn===35676&&(Bn=4),cr(un,".uniformMatrix",Bn,"fv(",ta,",false,",Dr,");");else{switch(dn){case 5126:yr="1f";break;case 35664:yr="2f";break;case 35665:yr="3f";break;case 35666:yr="4f";break;case 35670:yr="1i";break;case 5124:yr="1i";break;case 35671:yr="2i";break;case 35667:yr="2i";break;case 35672:yr="3i";break;case 35668:yr="3i";break;case 35673:yr="4i";break;case 35669:yr="4i"}cr(un,".uniform",yr,"(",ta,",",x(Dr)?Array.prototype.slice.call(Dr):Dr,");")}continue}else bn=Bn.append(Ft,cr)}else{if(!sn(hn))continue;bn=cr.def(mn.uniforms,"[",Ht.id(Dr),"]")}switch(dn===35678?cr("if(",bn,"&&",bn,'._reglType==="framebuffer"){',bn,"=",bn,".color[0];","}"):dn===35680&&cr("if(",bn,"&&",bn,'._reglType==="framebufferCube"){',bn,"=",bn,".color[0];","}"),Dr=1,dn){case 35678:case 35680:dn=cr.def(bn,"._texture"),cr(un,".uniform1i(",ta,",",dn,".bind());"),cr.exit(dn,".unbind();");continue;case 5124:case 35670:yr="1i";break;case 35667:case 35671:yr="2i",Dr=2;break;case 35668:case 35672:yr="3i",Dr=3;break;case 35669:case 35673:yr="4i",Dr=4;break;case 5126:yr="1f";break;case 35664:yr="2f",Dr=2;break;case 35665:yr="3f",Dr=3;break;case 35666:yr="4f",Dr=4;break;case 35674:yr="Matrix2fv";break;case 35675:yr="Matrix3fv";break;case 35676:yr="Matrix4fv"}if(yr.charAt(0)==="M"){cr(un,".uniform",yr,"(",ta,",");var ta=Math.pow(dn-35674+2,2),Zn=Ft.global.def("new Float32Array(",ta,")");Array.isArray(bn)?cr("false,(",i(ta,function(ya){return Zn+"["+ya+"]="+bn[ya]}),",",Zn,")"):cr("false,(Array.isArray(",bn,")||",bn," instanceof Float32Array)?",bn,":(",i(ta,function(ya){return Zn+"["+ya+"]="+bn+"["+ya+"]"}),",",Zn,")"),cr(");")}else{if(1<Dr){for(var dn=[],aa=[],Bn=0;Bn<Dr;++Bn)Array.isArray(bn)?aa.push(bn[Bn]):aa.push(cr.def(bn+"["+Bn+"]")),kn&&dn.push(cr.def());kn&&cr("if(!",Ft.batchId,"||",dn.map(function(pa,ya){return pa+"!=="+aa[ya]}).join("||"),"){",dn.map(function(pa,ya){return pa+"="+aa[ya]+";"}).join("")),cr(un,".uniform",yr,"(",ta,",",aa.join(","),");")}else kn&&(dn=cr.def(),cr("if(!",Ft.batchId,"||",dn,"!==",bn,"){",dn,"=",bn,";")),cr(un,".uniform",yr,"(",ta,",",bn,");");kn&&cr("}")}}}function Sn(Ft,cr,$r,rn){function sn(la){var Sa=Dr[la];return Sa?Sa.contextDep&&rn.contextDynamic||Sa.propDep?Sa.append(Ft,$r):Sa.append(Ft,cr):cr.def(gr,".",la)}function kn(){function la(){$r(aa,".drawElementsInstancedANGLE(",[Bn,bn,pa,ta+"<<(("+pa+"-5121)>>1)",Zn],");")}function Sa(){$r(aa,".drawArraysInstancedANGLE(",[Bn,ta,bn,Zn],");")}dn&&dn!=="null"?ya?la():($r("if(",dn,"){"),la(),$r("}else{"),Sa(),$r("}")):Sa()}function mn(){function la(){$r(yr+".drawElements("+[Bn,bn,pa,ta+"<<(("+pa+"-5121)>>1)"]+");")}function Sa(){$r(yr+".drawArrays("+[Bn,ta,bn]+");")}dn&&dn!=="null"?ya?la():($r("if(",dn,"){"),la(),$r("}else{"),Sa(),$r("}")):Sa()}var un=Ft.shared,yr=un.gl,gr=un.draw,Dr=rn.draw,dn=function(){var la=Dr.elements,Sa=cr;return la?((la.contextDep&&rn.contextDynamic||la.propDep)&&(Sa=$r),la=la.append(Ft,Sa),Dr.elementsActive&&Sa("if("+la+")"+yr+".bindBuffer(34963,"+la+".buffer.buffer);")):(la=Sa.def(),Sa(la,"=",gr,".","elements",";","if(",la,"){",yr,".bindBuffer(",34963,",",la,".buffer.buffer);}","else if(",un.vao,".currentVAO){",la,"=",Ft.shared.elements+".getElements("+un.vao,".currentVAO.elements);",fn?"":"if("+la+")"+yr+".bindBuffer(34963,"+la+".buffer.buffer);","}")),la}(),Bn=sn("primitive"),ta=sn("offset"),bn=function(){var la=Dr.count,Sa=cr;return la?((la.contextDep&&rn.contextDynamic||la.propDep)&&(Sa=$r),la=la.append(Ft,Sa)):la=Sa.def(gr,".","count"),la}();if(typeof bn=="number"){if(bn===0)return}else $r("if(",bn,"){"),$r.exit("}");var Zn,aa;Mr&&(Zn=sn("instances"),aa=Ft.instancing);var pa=dn+".type",ya=Dr.elements&&W(Dr.elements)&&!Dr.vaoActive;Mr&&(typeof Zn!="number"||0<=Zn)?typeof Zn=="string"?($r("if(",Zn,">0){"),kn(),$r("}else if(",Zn,"<0){"),mn(),$r("}")):kn():mn()}function _n(Ft,cr,$r,rn,sn){return cr=nr(),sn=cr.proc("body",sn),Mr&&(cr.instancing=sn.def(cr.shared.extensions,".angle_instanced_arrays")),Ft(cr,sn,$r,rn),cr.compile().body}function Wn(Ft,cr,$r,rn){Zr(Ft,cr),$r.useVAO?$r.drawVAO?cr(Ft.shared.vao,".setVAO(",$r.drawVAO.append(Ft,cr),");"):cr(Ft.shared.vao,".setVAO(",Ft.shared.vao,".targetVAO);"):(cr(Ft.shared.vao,".setVAO(null);"),wr(Ft,cr,$r,rn.attributes,function(){return!0})),Nr(Ft,cr,$r,rn.uniforms,function(){return!0},!1),Sn(Ft,cr,cr,$r)}function Ln(Ft,cr){var $r=Ft.proc("draw",1);Zr(Ft,$r),Lt(Ft,$r,cr.context),Zt(Ft,$r,cr.framebuffer),sr(Ft,$r,cr),Ir(Ft,$r,cr.state),Pr(Ft,$r,cr,!1,!0);var rn=cr.shader.progVar.append(Ft,$r);if($r(Ft.shared.gl,".useProgram(",rn,".program);"),cr.shader.program)Wn(Ft,$r,cr,cr.shader.program);else{$r(Ft.shared.vao,".setVAO(null);");var sn=Ft.global.def("{}"),kn=$r.def(rn,".id"),mn=$r.def(sn,"[",kn,"]");$r(Ft.cond(mn).then(mn,".call(this,a0);").else(mn,"=",sn,"[",kn,"]=",Ft.link(function(un){return _n(Wn,Ft,cr,un,1)}),"(",rn,");",mn,".call(this,a0);"))}0<Object.keys(cr.state).length&&$r(Ft.shared.current,".dirty=true;"),Ft.shared.vao&&$r(Ft.shared.vao,".setVAO(null);")}function Xn(Ft,cr,$r,rn){function sn(){return!0}Ft.batchId="a1",Zr(Ft,cr),wr(Ft,cr,$r,rn.attributes,sn),Nr(Ft,cr,$r,rn.uniforms,sn,!1),Sn(Ft,cr,cr,$r)}function Kn(Ft,cr,$r,rn){function sn(dn){return dn.contextDep&&mn||dn.propDep}function kn(dn){return!sn(dn)}Zr(Ft,cr);var mn=$r.contextDep,un=cr.def(),yr=cr.def();Ft.shared.props=yr,Ft.batchId=un;var gr=Ft.scope(),Dr=Ft.scope();cr(gr.entry,"for(",un,"=0;",un,"<","a1",";++",un,"){",yr,"=","a0","[",un,"];",Dr,"}",gr.exit),$r.needsContext&&Lt(Ft,Dr,$r.context),$r.needsFramebuffer&&Zt(Ft,Dr,$r.framebuffer),Ir(Ft,Dr,$r.state,sn),$r.profile&&sn($r.profile)&&Pr(Ft,Dr,$r,!1,!0),rn?($r.useVAO?$r.drawVAO?sn($r.drawVAO)?Dr(Ft.shared.vao,".setVAO(",$r.drawVAO.append(Ft,Dr),");"):gr(Ft.shared.vao,".setVAO(",$r.drawVAO.append(Ft,gr),");"):gr(Ft.shared.vao,".setVAO(",Ft.shared.vao,".targetVAO);"):(gr(Ft.shared.vao,".setVAO(null);"),wr(Ft,gr,$r,rn.attributes,kn),wr(Ft,Dr,$r,rn.attributes,sn)),Nr(Ft,gr,$r,rn.uniforms,kn,!1),Nr(Ft,Dr,$r,rn.uniforms,sn,!0),Sn(Ft,gr,Dr,$r)):(cr=Ft.global.def("{}"),rn=$r.shader.progVar.append(Ft,Dr),yr=Dr.def(rn,".id"),gr=Dr.def(cr,"[",yr,"]"),Dr(Ft.shared.gl,".useProgram(",rn,".program);","if(!",gr,"){",gr,"=",cr,"[",yr,"]=",Ft.link(function(dn){return _n(Xn,Ft,$r,dn,2)}),"(",rn,");}",gr,".call(this,a0[",un,"],",un,");"))}function Aa(Ft,cr){function $r(gr){return gr.contextDep&&sn||gr.propDep}var rn=Ft.proc("batch",2);Ft.batchId="0",Zr(Ft,rn);var sn=!1,kn=!0;Object.keys(cr.context).forEach(function(gr){sn=sn||cr.context[gr].propDep}),sn||(Lt(Ft,rn,cr.context),kn=!1);var mn=cr.framebuffer,un=!1;if(mn?(mn.propDep?sn=un=!0:mn.contextDep&&sn&&(un=!0),un||Zt(Ft,rn,mn)):Zt(Ft,rn,null),cr.state.viewport&&cr.state.viewport.propDep&&(sn=!0),sr(Ft,rn,cr),Ir(Ft,rn,cr.state,function(gr){return!$r(gr)}),cr.profile&&$r(cr.profile)||Pr(Ft,rn,cr,!1,"a1"),cr.contextDep=sn,cr.needsContext=kn,cr.needsFramebuffer=un,kn=cr.shader.progVar,kn.contextDep&&sn||kn.propDep)Kn(Ft,rn,cr,null);else if(kn=kn.append(Ft,rn),rn(Ft.shared.gl,".useProgram(",kn,".program);"),cr.shader.program)Kn(Ft,rn,cr,cr.shader.program);else{rn(Ft.shared.vao,".setVAO(null);");var mn=Ft.global.def("{}"),un=rn.def(kn,".id"),yr=rn.def(mn,"[",un,"]");rn(Ft.cond(yr).then(yr,".call(this,a0,a1);").else(yr,"=",mn,"[",un,"]=",Ft.link(function(dn){return _n(Kn,Ft,cr,dn,2)}),"(",kn,");",yr,".call(this,a0,a1);"))}0<Object.keys(cr.state).length&&rn(Ft.shared.current,".dirty=true;"),Ft.shared.vao&&rn(Ft.shared.vao,".setVAO(null);")}function Ta(Ft,cr){function $r(un){var yr=cr.shader[un];yr&&(yr=yr.append(Ft,rn),isNaN(yr)?rn.set(sn.shader,"."+un,yr):rn.set(sn.shader,"."+un,Ft.link(yr,{stable:!0})))}var rn=Ft.proc("scope",3);Ft.batchId="a2";var sn=Ft.shared,kn=sn.current;if(Lt(Ft,rn,cr.context),cr.framebuffer&&cr.framebuffer.append(Ft,rn),q(Object.keys(cr.state)).forEach(function(un){var yr=cr.state[un],gr=yr.append(Ft,rn);x(gr)?gr.forEach(function(Dr,dn){isNaN(Dr)?rn.set(Ft.next[un],"["+dn+"]",Dr):rn.set(Ft.next[un],"["+dn+"]",Ft.link(Dr,{stable:!0}))}):W(yr)?rn.set(sn.next,"."+un,Ft.link(gr,{stable:!0})):rn.set(sn.next,"."+un,gr)}),Pr(Ft,rn,cr,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(un){var yr=cr.draw[un];yr&&(yr=yr.append(Ft,rn),isNaN(yr)?rn.set(sn.draw,"."+un,yr):rn.set(sn.draw,"."+un,Ft.link(yr),{stable:!0}))}),Object.keys(cr.uniforms).forEach(function(un){var yr=cr.uniforms[un].append(Ft,rn);Array.isArray(yr)&&(yr="["+yr.map(function(gr){return isNaN(gr)?gr:Ft.link(gr,{stable:!0})})+"]"),rn.set(sn.uniforms,"["+Ft.link(Ht.id(un),{stable:!0})+"]",yr)}),Object.keys(cr.attributes).forEach(function(un){var yr=cr.attributes[un].append(Ft,rn),gr=Ft.scopeAttrib(un);Object.keys(new Va).forEach(function(Dr){rn.set(gr,"."+Dr,yr[Dr])})}),cr.scopeVAO){var mn=cr.scopeVAO.append(Ft,rn);isNaN(mn)?rn.set(sn.vao,".targetVAO",mn):rn.set(sn.vao,".targetVAO",Ft.link(mn,{stable:!0}))}$r("vert"),$r("frag"),0<Object.keys(cr.state).length&&(rn(kn,".dirty=true;"),rn.exit(kn,".dirty=true;")),rn("a1(",Ft.shared.context,",a0,",Ft.batchId,");")}function oi(Ft){if(typeof Ft=="object"&&!x(Ft)){for(var cr=Object.keys(Ft),$r=0;$r<cr.length;++$r)if(fe.isDynamic(Ft[cr[$r]]))return!0;return!1}}function $a(Ft,cr,$r){function rn(dn,Bn){mn.forEach(function(ta){var bn=sn[ta];fe.isDynamic(bn)&&(bn=dn.invoke(Bn,bn),Bn(Dr,".",ta,"=",bn,";"))})}var sn=cr.static[$r];if(sn&&oi(sn)){var kn=Ft.global,mn=Object.keys(sn),un=!1,yr=!1,gr=!1,Dr=Ft.global.def("{}");mn.forEach(function(dn){var Bn=sn[dn];if(fe.isDynamic(Bn))typeof Bn=="function"&&(Bn=sn[dn]=fe.unbox(Bn)),dn=ee(Bn,null),un=un||dn.thisDep,gr=gr||dn.propDep,yr=yr||dn.contextDep;else{switch(kn(Dr,".",dn,"="),typeof Bn){case"number":kn(Bn);break;case"string":kn('"',Bn,'"');break;case"object":Array.isArray(Bn)&&kn("[",Bn.join(),"]");break;default:kn(Ft.link(Bn))}kn(";")}}),cr.dynamic[$r]=new fe.DynamicVariable(4,{thisDep:un,contextDep:yr,propDep:gr,ref:Dr,append:rn}),delete cr.static[$r]}}var Va=Me.Record,ti={add:32774,subtract:32778,"reverse subtract":32779};Kt.ext_blend_minmax&&(ti.min=32775,ti.max=32776);var Mr=Kt.angle_instanced_arrays,vn=Kt.webgl_draw_buffers,fn=Kt.oes_vertex_array_object,An={dirty:!0,profile:vt.profile},Gn={},ia=[],Yn={},zn={};kt("dither",3024),kt("blend.enable",3042),Nt("blend.color","blendColor",[0,0,0,0]),Nt("blend.equation","blendEquationSeparate",[32774,32774]),Nt("blend.func","blendFuncSeparate",[1,0,1,0]),kt("depth.enable",2929,!0),Nt("depth.func","depthFunc",513),Nt("depth.range","depthRange",[0,1]),Nt("depth.mask","depthMask",!0),Nt("colorMask","colorMask",[!0,!0,!0,!0]),kt("cull.enable",2884),Nt("cull.face","cullFace",1029),Nt("frontFace","frontFace",2305),Nt("lineWidth","lineWidth",1),kt("polygonOffset.enable",32823),Nt("polygonOffset.offset","polygonOffset",[0,0]),kt("sample.alpha",32926),kt("sample.enable",32928),Nt("sample.coverage","sampleCoverage",[1,!1]),kt("stencil.enable",2960),Nt("stencil.mask","stencilMask",-1),Nt("stencil.func","stencilFunc",[519,0,-1]),Nt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Nt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),kt("scissor.enable",3089),Nt("scissor.box","scissor",[0,0,nt.drawingBufferWidth,nt.drawingBufferHeight]),Nt("viewport","viewport",[0,0,nt.drawingBufferWidth,nt.drawingBufferHeight]);var ea={gl:nt,context:Xe,strings:Ht,next:Gn,current:An,draw:Ke,elements:tt,buffer:br,shader:Se,attributes:Me.state,vao:Me,uniforms:ft,framebuffer:st,extensions:Kt,timer:it,isBufferArgs:U},wa={primTypes:Ne,compareFuncs:er,blendFuncs:rr,blendEquations:ti,stencilOps:pr,glTypes:Pe,orientationType:Xr};vn&&(wa.backBuffer=[1029],wa.drawBuffer=i(Gt.maxDrawbuffers,function(Ft){return Ft===0?[0]:i(Ft,function(cr){return 36064+cr})}));var si=0;return{next:Gn,current:An,procs:function(){var Ft=nr(),cr=Ft.proc("poll"),$r=Ft.proc("refresh"),rn=Ft.block();cr(rn),$r(rn);var yr=Ft.shared,sn=yr.gl,kn=yr.next,mn=yr.current;rn(mn,".dirty=false;"),Zt(Ft,cr),Zt(Ft,$r,null,!0);var un;Mr&&(un=Ft.link(Mr)),Kt.oes_vertex_array_object&&$r(Ft.link(Kt.oes_vertex_array_object),".bindVertexArrayOES(null);");var yr=$r.def(yr.attributes),gr=$r.def(0),Dr=Ft.cond(gr,".buffer");Dr.then(sn,".enableVertexAttribArray(i);",sn,".bindBuffer(",34962,",",gr,".buffer.buffer);",sn,".vertexAttribPointer(i,",gr,".size,",gr,".type,",gr,".normalized,",gr,".stride,",gr,".offset);").else(sn,".disableVertexAttribArray(i);",sn,".vertexAttrib4f(i,",gr,".x,",gr,".y,",gr,".z,",gr,".w);",gr,".buffer=null;");var dn=Ft.link(Gt.maxAttributes,{stable:!0});return $r("for(var i=0;i<",dn,";++i){",gr,"=",yr,"[i];",Dr,"}"),Mr&&$r("for(var i=0;i<",dn,";++i){",un,".vertexAttribDivisorANGLE(i,",yr,"[i].divisor);","}"),$r(Ft.shared.vao,".currentVAO=null;",Ft.shared.vao,".setVAO(",Ft.shared.vao,".targetVAO);"),Object.keys(Yn).forEach(function(Bn){var ta=Yn[Bn],bn=rn.def(kn,".",Bn),Zn=Ft.block();Zn("if(",bn,"){",sn,".enable(",ta,")}else{",sn,".disable(",ta,")}",mn,".",Bn,"=",bn,";"),$r(Zn),cr("if(",bn,"!==",mn,".",Bn,"){",Zn,"}")}),Object.keys(zn).forEach(function(Bn){var ta=zn[Bn],bn=An[Bn],Zn,aa,pa=Ft.block();pa(sn,".",ta,"("),x(bn)?(ta=bn.length,Zn=Ft.global.def(kn,".",Bn),aa=Ft.global.def(mn,".",Bn),pa(i(ta,function(ya){return Zn+"["+ya+"]"}),");",i(ta,function(ya){return aa+"["+ya+"]="+Zn+"["+ya+"];"}).join("")),cr("if(",i(ta,function(ya){return Zn+"["+ya+"]!=="+aa+"["+ya+"]"}).join("||"),"){",pa,"}")):(Zn=rn.def(kn,".",Bn),aa=rn.def(mn,".",Bn),pa(Zn,");",mn,".",Bn,"=",Zn,";"),cr("if(",Zn,"!==",aa,"){",pa,"}")),$r(pa)}),Ft.compile()}(),compile:function(Ft,cr,$r,rn,sn){var kn=nr();kn.stats=kn.link(sn),Object.keys(cr.static).forEach(function(un){$a(kn,cr,un)}),$t.forEach(function(un){$a(kn,Ft,un)});var mn=et(Ft,cr,$r,rn,kn);return mn.shader.program&&(mn.shader.program.attributes.sort(function(un,yr){return un.name<yr.name?-1:1}),mn.shader.program.uniforms.sort(function(un,yr){return un.name<yr.name?-1:1})),Ln(kn,mn),Ta(kn,mn),Aa(kn,mn),le(kn.compile(),{destroy:function(){mn.shader.program.destroy()}})}}}function ie(nt,Ht){for(var Kt=0;Kt<nt.length;++Kt)if(nt[Kt]===Ht)return Kt;return-1}var le=function(nt,Ht){for(var Kt=Object.keys(Ht),Gt=0;Gt<Kt.length;++Gt)nt[Kt[Gt]]=Ht[Kt[Gt]];return nt},ge=0,fe={DynamicVariable:w,define:function(nt,Ht){return new w(nt,M(Ht+""))},isDynamic:function(nt){return typeof nt=="function"&&!nt._reglType||nt instanceof w},unbox:T,accessor:M},pe={next:typeof requestAnimationFrame=="function"?function(nt){return requestAnimationFrame(nt)}:function(nt){return setTimeout(nt,16)},cancel:typeof cancelAnimationFrame=="function"?function(nt){return cancelAnimationFrame(nt)}:clearTimeout},ye=typeof performance<"u"&&performance.now?function(){return performance.now()}:function(){return+new Date},Te=p();Te.zero=p();var _e=function(nt,Ht){var Kt=1;Ht.ext_texture_filter_anisotropic&&(Kt=nt.getParameter(34047));var Gt=1,br=1;Ht.webgl_draw_buffers&&(Gt=nt.getParameter(34852),br=nt.getParameter(36063));var tt=!!Ht.oes_texture_float;if(tt){tt=nt.createTexture(),nt.bindTexture(3553,tt),nt.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var je=nt.createFramebuffer();if(nt.bindFramebuffer(36160,je),nt.framebufferTexture2D(36160,36064,3553,tt,0),nt.bindTexture(3553,null),nt.checkFramebufferStatus(36160)!==36053)tt=!1;else{nt.viewport(0,0,1,1),nt.clearColor(1,0,0,1),nt.clear(16384);var st=Te.allocType(5126,4);nt.readPixels(0,0,1,1,6408,5126,st),nt.getError()?tt=!1:(nt.deleteFramebuffer(je),nt.deleteTexture(tt),tt=st[0]===1),Te.freeType(st)}}return st=!0,typeof navigator<"u"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(st=nt.createTexture(),je=Te.allocType(5121,36),nt.activeTexture(33984),nt.bindTexture(34067,st),nt.texImage2D(34069,0,6408,3,3,0,6408,5121,je),Te.freeType(je),nt.bindTexture(34067,null),nt.deleteTexture(st),st=!nt.getError()),{colorBits:[nt.getParameter(3410),nt.getParameter(3411),nt.getParameter(3412),nt.getParameter(3413)],depthBits:nt.getParameter(3414),stencilBits:nt.getParameter(3415),subpixelBits:nt.getParameter(3408),extensions:Object.keys(Ht).filter(function(ft){return!!Ht[ft]}),maxAnisotropic:Kt,maxDrawbuffers:Gt,maxColorAttachments:br,pointSizeDims:nt.getParameter(33901),lineWidthDims:nt.getParameter(33902),maxViewportDims:nt.getParameter(3386),maxCombinedTextureUnits:nt.getParameter(35661),maxCubeMapSize:nt.getParameter(34076),maxRenderbufferSize:nt.getParameter(34024),maxTextureUnits:nt.getParameter(34930),maxTextureSize:nt.getParameter(3379),maxAttributes:nt.getParameter(34921),maxVertexUniforms:nt.getParameter(36347),maxVertexTextureUnits:nt.getParameter(35660),maxVaryingVectors:nt.getParameter(36348),maxFragmentUniforms:nt.getParameter(36349),glsl:nt.getParameter(35724),renderer:nt.getParameter(7937),vendor:nt.getParameter(7936),version:nt.getParameter(7938),readFloat:tt,npotTextureCube:st}},De=function(nt){return nt instanceof Uint8Array||nt instanceof Uint16Array||nt instanceof Uint32Array||nt instanceof Int8Array||nt instanceof Int16Array||nt instanceof Int32Array||nt instanceof Float32Array||nt instanceof Float64Array||nt instanceof Uint8ClampedArray},Be=function(nt){return Object.keys(nt).map(function(Ht){return nt[Ht]})},Ue={shape:function(nt){for(var Ht=[];nt.length;nt=nt[0])Ht.push(nt.length);return Ht},flatten:function(nt,Ht,Kt,Gt){var br=1;if(Ht.length)for(var tt=0;tt<Ht.length;++tt)br*=Ht[tt];else br=0;switch(Kt=Gt||Te.allocType(Kt,br),Ht.length){case 0:break;case 1:for(Gt=Ht[0],Ht=0;Ht<Gt;++Ht)Kt[Ht]=nt[Ht];break;case 2:for(Gt=Ht[0],Ht=Ht[1],tt=br=0;tt<Gt;++tt)for(var je=nt[tt],st=0;st<Ht;++st)Kt[br++]=je[st];break;case 3:c(nt,Ht[0],Ht[1],Ht[2],Kt,0);break;default:b(nt,Ht,0,Kt,0)}return Kt}},xe={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Pe={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Ve={dynamic:35048,stream:35040,static:35044},Qe=Ue.flatten,Fe=Ue.shape,Le=[];Le[5120]=1,Le[5122]=2,Le[5124]=4,Le[5121]=1,Le[5123]=2,Le[5125]=4,Le[5126]=4;var Ne={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},dt=new Float32Array(1),Dt=new Uint32Array(dt.buffer),Xt=[9984,9986,9985,9987],At=[0,6409,6410,6407,6408],zt={};zt[6409]=zt[6406]=zt[6402]=1,zt[34041]=zt[6410]=2,zt[6407]=zt[35904]=3,zt[6408]=zt[35906]=4;var Ut=u("HTMLCanvasElement"),Ct=u("OffscreenCanvas"),Mt=u("CanvasRenderingContext2D"),rt=u("ImageBitmap"),ct=u("HTMLImageElement"),Ze=u("HTMLVideoElement"),ke=Object.keys(xe).concat([Ut,Ct,Mt,rt,ct,Ze]),Ge=[];Ge[5121]=1,Ge[5126]=4,Ge[36193]=2,Ge[5123]=2,Ge[5125]=4;var Je=[];Je[32854]=2,Je[32855]=2,Je[36194]=2,Je[34041]=4,Je[33776]=.5,Je[33777]=.5,Je[33778]=1,Je[33779]=1,Je[35986]=.5,Je[35987]=1,Je[34798]=1,Je[35840]=.5,Je[35841]=.25,Je[35842]=.5,Je[35843]=.25,Je[36196]=.5;var ot=[];ot[32854]=2,ot[32855]=2,ot[36194]=2,ot[33189]=2,ot[36168]=1,ot[34041]=4,ot[35907]=4,ot[34836]=16,ot[34842]=8,ot[34843]=6;var Pt=function(nt,Ht,Kt,Gt,br){function tt(Ke){this.id=Me++,this.refCount=1,this.renderbuffer=Ke,this.format=32854,this.height=this.width=0,br.profile&&(this.stats={size:0})}function je(Ke){var Xe=Ke.renderbuffer;nt.bindRenderbuffer(36161,null),nt.deleteRenderbuffer(Xe),Ke.renderbuffer=null,Ke.refCount=0,delete Se[Ke.id],Gt.renderbufferCount--}var st={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};Ht.ext_srgb&&(st.srgba=35907),Ht.ext_color_buffer_half_float&&(st.rgba16f=34842,st.rgb16f=34843),Ht.webgl_color_buffer_float&&(st.rgba32f=34836);var ft=[];Object.keys(st).forEach(function(Ke){ft[st[Ke]]=Ke});var Me=0,Se={};return tt.prototype.decRef=function(){0>=--this.refCount&&je(this)},br.profile&&(Gt.getTotalRenderbufferSize=function(){var Ke=0;return Object.keys(Se).forEach(function(Xe){Ke+=Se[Xe].stats.size}),Ke}),{create:function(Ke,Xe){function it(vt,St){var kt=0,Nt=0,nr=32854;if(typeof vt=="object"&&vt?("shape"in vt?(Nt=vt.shape,kt=Nt[0]|0,Nt=Nt[1]|0):("radius"in vt&&(kt=Nt=vt.radius|0),"width"in vt&&(kt=vt.width|0),"height"in vt&&(Nt=vt.height|0)),"format"in vt&&(nr=st[vt.format])):typeof vt=="number"?(kt=vt|0,Nt=typeof St=="number"?St|0:kt):vt||(kt=Nt=1),kt!==pt.width||Nt!==pt.height||nr!==pt.format)return it.width=pt.width=kt,it.height=pt.height=Nt,pt.format=nr,nt.bindRenderbuffer(36161,pt.renderbuffer),nt.renderbufferStorage(36161,nr,kt,Nt),br.profile&&(pt.stats.size=ot[pt.format]*pt.width*pt.height),it.format=ft[pt.format],it}var pt=new tt(nt.createRenderbuffer());return Se[pt.id]=pt,Gt.renderbufferCount++,it(Ke,Xe),it.resize=function(vt,St){var kt=vt|0,Nt=St|0||kt;return kt===pt.width&&Nt===pt.height||(it.width=pt.width=kt,it.height=pt.height=Nt,nt.bindRenderbuffer(36161,pt.renderbuffer),nt.renderbufferStorage(36161,pt.format,kt,Nt),br.profile&&(pt.stats.size=ot[pt.format]*pt.width*pt.height)),it},it._reglType="renderbuffer",it._renderbuffer=pt,br.profile&&(it.stats=pt.stats),it.destroy=function(){pt.decRef()},it},clear:function(){Be(Se).forEach(je)},restore:function(){Be(Se).forEach(function(Ke){Ke.renderbuffer=nt.createRenderbuffer(),nt.bindRenderbuffer(36161,Ke.renderbuffer),nt.renderbufferStorage(36161,Ke.format,Ke.width,Ke.height)}),nt.bindRenderbuffer(36161,null)}}},_t=[];_t[6408]=4,_t[6407]=3;var Bt=[];Bt[5121]=1,Bt[5126]=4,Bt[36193]=2;var qt=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],Ot=["x","y","z","w"],$t="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),rr={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},er={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},pr={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Xr={cw:2304,ccw:2305},hn=new Q(!1,!1,!1,function(){}),Qr=function(nt,Ht){function Kt(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function Gt(Se,Ke,Xe){var it=je.pop()||new Kt;it.startQueryIndex=Se,it.endQueryIndex=Ke,it.sum=0,it.stats=Xe,st.push(it)}if(!Ht.ext_disjoint_timer_query)return null;var br=[],tt=[],je=[],st=[],ft=[],Me=[];return{beginQuery:function(Se){var Ke=br.pop()||Ht.ext_disjoint_timer_query.createQueryEXT();Ht.ext_disjoint_timer_query.beginQueryEXT(35007,Ke),tt.push(Ke),Gt(tt.length-1,tt.length,Se)},endQuery:function(){Ht.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:Gt,update:function(){var Se,Ke;if(Se=tt.length,Se!==0){Me.length=Math.max(Me.length,Se+1),ft.length=Math.max(ft.length,Se+1),ft[0]=0;var Xe=Me[0]=0;for(Ke=Se=0;Ke<tt.length;++Ke){var it=tt[Ke];Ht.ext_disjoint_timer_query.getQueryObjectEXT(it,34919)?(Xe+=Ht.ext_disjoint_timer_query.getQueryObjectEXT(it,34918),br.push(it)):tt[Se++]=it,ft[Ke+1]=Xe,Me[Ke+1]=Se}for(tt.length=Se,Ke=Se=0;Ke<st.length;++Ke){var Xe=st[Ke],pt=Xe.startQueryIndex,it=Xe.endQueryIndex;Xe.sum+=ft[it]-ft[pt],pt=Me[pt],it=Me[it],it===pt?(Xe.stats.gpuTime+=Xe.sum/1e6,je.push(Xe)):(Xe.startQueryIndex=pt,Xe.endQueryIndex=it,st[Se++]=Xe)}st.length=Se}},getNumPendingQueries:function(){return tt.length},clear:function(){br.push.apply(br,tt);for(var Se=0;Se<br.length;Se++)Ht.ext_disjoint_timer_query.deleteQueryEXT(br[Se]);tt.length=0,br.length=0},restore:function(){tt.length=0,br.length=0}}};return function(nt){function Ht(){if(Pr.length===0)nr&&nr.update(),_n=null;else{_n=pe.next(Ht),Se();for(var Ln=Pr.length-1;0<=Ln;--Ln){var Xn=Pr[Ln];Xn&&Xn(Er,null,0)}it.flush(),nr&&nr.update()}}function Kt(){!_n&&0<Pr.length&&(_n=pe.next(Ht))}function Gt(){_n&&(pe.cancel(Ht),_n=null)}function br(Ln){Ln.preventDefault(),Gt(),wr.forEach(function(Xn){Xn()})}function tt(Ln){it.getError(),vt.restore(),Yr.restore(),dr.restore(),Ar.restore(),et.restore(),Lt.restore(),Ur.restore(),nr&&nr.restore(),Zt.procs.refresh(),Kt(),Nr.forEach(function(Xn){Xn()})}function je(Ln){function Xn(An,Gn){var ia={},Yn={};return Object.keys(An).forEach(function(zn){var ea=An[zn];if(fe.isDynamic(ea))Yn[zn]=fe.unbox(ea,zn);else{if(Gn&&Array.isArray(ea)){for(var wa=0;wa<ea.length;++wa)if(fe.isDynamic(ea[wa])){Yn[zn]=fe.unbox(ea,zn);return}}ia[zn]=ea}}),{dynamic:Yn,static:ia}}function Kn(An){for(;fn.length<An;)fn.push(null);return fn}var Aa=Xn(Ln.context||{},!0),Ta=Xn(Ln.uniforms||{},!0),oi=Xn(Ln.attributes||{},!1);Ln=Xn(function(An){function Gn(Yn){if(Yn in ia){var zn=ia[Yn];delete ia[Yn],Object.keys(zn).forEach(function(ea){ia[Yn+"."+ea]=zn[ea]})}}var ia=le({},An);return delete ia.uniforms,delete ia.attributes,delete ia.context,delete ia.vao,"stencil"in ia&&ia.stencil.op&&(ia.stencil.opBack=ia.stencil.opFront=ia.stencil.op,delete ia.stencil.op),Gn("blend"),Gn("depth"),Gn("cull"),Gn("stencil"),Gn("polygonOffset"),Gn("scissor"),Gn("sample"),"vao"in An&&(ia.vao=An.vao),ia}(Ln),!1);var $a={gpuTime:0,cpuTime:0,count:0},Va=Zt.compile(Ln,oi,Ta,Aa,$a),ti=Va.draw,Mr=Va.batch,vn=Va.scope,fn=[];return le(function(An,Gn){var ia;if(typeof An=="function")return vn.call(this,null,An,0);if(typeof Gn=="function")if(typeof An=="number")for(ia=0;ia<An;++ia)vn.call(this,null,Gn,ia);else if(Array.isArray(An))for(ia=0;ia<An.length;++ia)vn.call(this,An[ia],Gn,ia);else return vn.call(this,An,Gn,0);else if(typeof An=="number"){if(0<An)return Mr.call(this,Kn(An|0),An|0)}else if(Array.isArray(An)){if(An.length)return Mr.call(this,An,An.length)}else return ti.call(this,An)},{stats:$a,destroy:function(){Va.destroy()}})}function st(Ln,Xn){var Kn=0;Zt.procs.poll();var Aa=Xn.color;Aa&&(it.clearColor(+Aa[0]||0,+Aa[1]||0,+Aa[2]||0,+Aa[3]||0),Kn|=16384),"depth"in Xn&&(it.clearDepth(+Xn.depth),Kn|=256),"stencil"in Xn&&(it.clearStencil(Xn.stencil|0),Kn|=1024),it.clear(Kn)}function ft(Ln){return Pr.push(Ln),Kt(),{cancel:function(){function Xn(){var Aa=ie(Pr,Xn);Pr[Aa]=Pr[Pr.length-1],--Pr.length,0>=Pr.length&&Gt()}var Kn=ie(Pr,Ln);Pr[Kn]=Xn}}}function Me(){var Ln=Ir.viewport,Xn=Ir.scissor_box;Ln[0]=Ln[1]=Xn[0]=Xn[1]=0,Er.viewportWidth=Er.framebufferWidth=Er.drawingBufferWidth=Ln[2]=Xn[2]=it.drawingBufferWidth,Er.viewportHeight=Er.framebufferHeight=Er.drawingBufferHeight=Ln[3]=Xn[3]=it.drawingBufferHeight}function Se(){Er.tick+=1,Er.time=Xe(),Me(),Zt.procs.poll()}function Ke(){Ar.refresh(),Me(),Zt.procs.refresh(),nr&&nr.update()}function Xe(){return(ye()-fr)/1e3}if(nt=f(nt),!nt)return null;var it=nt.gl,pt=it.getContextAttributes();it.isContextLost();var vt=o(it,nt);if(!vt)return null;var sr=e(),St={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},kt=nt.cachedCode||{},Nt=vt.extensions,nr=Qr(it,Nt),fr=ye(),_r=it.drawingBufferWidth,Hr=it.drawingBufferHeight,Er={tick:0,time:0,viewportWidth:_r,viewportHeight:Hr,framebufferWidth:_r,framebufferHeight:Hr,drawingBufferWidth:_r,drawingBufferHeight:Hr,pixelRatio:nt.pixelRatio},_r={elements:null,primitive:4,count:-1,offset:0,instances:-1},en=_e(it,Nt),dr=A(it,St,nt,function(Ln){return Ur.destroyBuffer(Ln)}),xr=m(it,Nt,dr,St),Ur=F(it,Nt,en,St,dr,xr,_r),Yr=V(it,sr,St,nt),Ar=D(it,Nt,en,function(){Zt.procs.poll()},Er,St,nt),et=Pt(it,Nt,en,St,nt),Lt=R(it,Nt,en,Ar,et,St),Zt=te(it,sr,Nt,en,dr,xr,Ar,Lt,{},Ur,Yr,_r,Er,nr,kt,nt),sr=G(it,Lt,Zt.procs.poll,Er),Ir=Zt.next,Zr=it.canvas,Pr=[],wr=[],Nr=[],Sn=[nt.onDestroy],_n=null;Zr&&(Zr.addEventListener("webglcontextlost",br,!1),Zr.addEventListener("webglcontextrestored",tt,!1));var Wn=Lt.setFBO=je({framebuffer:fe.define.call(null,1,"framebuffer")});return Ke(),pt=le(je,{clear:function(Ln){if("framebuffer"in Ln)if(Ln.framebuffer&&Ln.framebuffer_reglType==="framebufferCube")for(var Xn=0;6>Xn;++Xn)Wn(le({framebuffer:Ln.framebuffer.faces[Xn]},Ln),st);else Wn(Ln,st);else st(null,Ln)},prop:fe.define.bind(null,1),context:fe.define.bind(null,2),this:fe.define.bind(null,3),draw:je({}),buffer:function(Ln){return dr.create(Ln,34962,!1,!1)},elements:function(Ln){return xr.create(Ln,!1)},texture:Ar.create2D,cube:Ar.createCube,renderbuffer:et.create,framebuffer:Lt.create,framebufferCube:Lt.createCube,vao:Ur.createVAO,attributes:pt,frame:ft,on:function(Ln,Xn){var Kn;switch(Ln){case"frame":return ft(Xn);case"lost":Kn=wr;break;case"restore":Kn=Nr;break;case"destroy":Kn=Sn}return Kn.push(Xn),{cancel:function(){for(var Aa=0;Aa<Kn.length;++Aa)if(Kn[Aa]===Xn){Kn[Aa]=Kn[Kn.length-1],Kn.pop();break}}}},limits:en,hasExtension:function(Ln){return 0<=en.extensions.indexOf(Ln.toLowerCase())},read:sr,destroy:function(){Pr.length=0,Gt(),Zr&&(Zr.removeEventListener("webglcontextlost",br),Zr.removeEventListener("webglcontextrestored",tt)),Yr.clear(),Lt.clear(),et.clear(),Ur.clear(),Ar.clear(),xr.clear(),dr.clear(),nr&&nr.clear(),Sn.forEach(function(Ln){Ln()})},_gl:it,_refresh:Ke,poll:function(){Se(),nr&&nr.update()},now:Xe,stats:St,getCachedCode:function(){return kt},preloadCachedCode:function(Ln){Object.entries(Ln).forEach(function(Xn){kt[Xn[0]]=Xn[1]})}}),nt.onDone(null,pt),pt}})},{}],284:[function(d,ne,ae){var w=d("buffer"),v=w.Buffer;function M(e,a){for(var n in e)a[n]=e[n]}v.from&&v.alloc&&v.allocUnsafe&&v.allocUnsafeSlow?ne.exports=w:(M(w,ae),ae.Buffer=T);function T(e,a,n){return v(e,a,n)}T.prototype=Object.create(v.prototype),M(v,T),T.from=function(e,a,n){if(typeof e=="number")throw new TypeError("Argument must not be a number");return v(e,a,n)},T.alloc=function(e,a,n){if(typeof e!="number")throw new TypeError("Argument must be a number");var r=v(e);return a!==void 0?typeof n=="string"?r.fill(a,n):r.fill(a):r.fill(0),r},T.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return v(e)},T.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return w.SlowBuffer(e)}},{buffer:85}],285:[function(d,ne,ae){ne.exports=M;var w=d("events").EventEmitter,v=d("inherits");v(M,w),M.Readable=d("readable-stream/lib/_stream_readable.js"),M.Writable=d("readable-stream/lib/_stream_writable.js"),M.Duplex=d("readable-stream/lib/_stream_duplex.js"),M.Transform=d("readable-stream/lib/_stream_transform.js"),M.PassThrough=d("readable-stream/lib/_stream_passthrough.js"),M.finished=d("readable-stream/lib/internal/streams/end-of-stream.js"),M.pipeline=d("readable-stream/lib/internal/streams/pipeline.js"),M.Stream=M;function M(){w.call(this)}M.prototype.pipe=function(T,e){var a=this;function n(p){T.writable&&T.write(p)===!1&&a.pause&&a.pause()}a.on("data",n);function r(){a.readable&&a.resume&&a.resume()}T.on("drain",r),!T._isStdio&&(!e||e.end!==!1)&&(a.on("end",f),a.on("close",o));var t=!1;function f(){t||(t=!0,T.end())}function o(){t||(t=!0,typeof T.destroy=="function"&&T.destroy())}function i(p){if(g(),w.listenerCount(this,"error")===0)throw p}a.on("error",i),T.on("error",i);function g(){a.removeListener("data",n),T.removeListener("drain",r),a.removeListener("end",f),a.removeListener("close",o),a.removeListener("error",i),T.removeListener("error",i),a.removeListener("end",g),a.removeListener("close",g),T.removeListener("close",g)}return a.on("end",g),a.on("close",g),T.on("close",g),T.emit("pipe",a),T}},{events:84,inherits:231,"readable-stream/lib/_stream_duplex.js":287,"readable-stream/lib/_stream_passthrough.js":288,"readable-stream/lib/_stream_readable.js":289,"readable-stream/lib/_stream_transform.js":290,"readable-stream/lib/_stream_writable.js":291,"readable-stream/lib/internal/streams/end-of-stream.js":295,"readable-stream/lib/internal/streams/pipeline.js":297}],286:[function(d,ne,ae){function w(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.__proto__=t}var v={};function M(r,t,f){f||(f=Error);function o(g,p,y){return typeof t=="string"?t:t(g,p,y)}var i=function(g){w(p,g);function p(y,c,b){return g.call(this,o(y,c,b))||this}return p}(f);i.prototype.name=f.name,i.prototype.code=r,v[r]=i}function T(r,t){if(Array.isArray(r)){var f=r.length;return r=r.map(function(o){return String(o)}),f>2?"one of ".concat(t," ").concat(r.slice(0,f-1).join(", "),", or ")+r[f-1]:f===2?"one of ".concat(t," ").concat(r[0]," or ").concat(r[1]):"of ".concat(t," ").concat(r[0])}else return"of ".concat(t," ").concat(String(r))}function e(r,t,f){return r.substr(!f||f<0?0:+f,t.length)===t}function a(r,t,f){return(f===void 0||f>r.length)&&(f=r.length),r.substring(f-t.length,f)===t}function n(r,t,f){return typeof f!="number"&&(f=0),f+t.length>r.length?!1:r.indexOf(t,f)!==-1}M("ERR_INVALID_OPT_VALUE",function(r,t){return'The value "'+t+'" is invalid for option "'+r+'"'},TypeError),M("ERR_INVALID_ARG_TYPE",function(r,t,f){var o;typeof t=="string"&&e(t,"not ")?(o="must not be",t=t.replace(/^not /,"")):o="must be";var i;if(a(r," argument"))i="The ".concat(r," ").concat(o," ").concat(T(t,"type"));else{var g=n(r,".")?"property":"argument";i='The "'.concat(r,'" ').concat(g," ").concat(o," ").concat(T(t,"type"))}return i+=". Received type ".concat(typeof f),i},TypeError),M("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),M("ERR_METHOD_NOT_IMPLEMENTED",function(r){return"The "+r+" method is not implemented"}),M("ERR_STREAM_PREMATURE_CLOSE","Premature close"),M("ERR_STREAM_DESTROYED",function(r){return"Cannot call "+r+" after a stream was destroyed"}),M("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),M("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),M("ERR_STREAM_WRITE_AFTER_END","write after end"),M("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),M("ERR_UNKNOWN_ENCODING",function(r){return"Unknown encoding: "+r},TypeError),M("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),ne.exports.codes=v},{}],287:[function(d,ne,ae){(function(w){(function(){var v=Object.keys||function(o){var i=[];for(var g in o)i.push(g);return i};ne.exports=r;var M=d("./_stream_readable"),T=d("./_stream_writable");d("inherits")(r,M);for(var e=v(T.prototype),a=0;a<e.length;a++){var n=e[a];r.prototype[n]||(r.prototype[n]=T.prototype[n])}function r(o){if(!(this instanceof r))return new r(o);M.call(this,o),T.call(this,o),this.allowHalfOpen=!0,o&&(o.readable===!1&&(this.readable=!1),o.writable===!1&&(this.writable=!1),o.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",t)))}Object.defineProperty(r.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(r.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function t(){this._writableState.ended||w.nextTick(f,this)}function f(o){o.end()}Object.defineProperty(r.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(i){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=i,this._writableState.destroyed=i)}})}).call(this)}).call(this,d("_process"))},{"./_stream_readable":289,"./_stream_writable":291,_process:277,inherits:231}],288:[function(d,ne,ae){ne.exports=v;var w=d("./_stream_transform");d("inherits")(v,w);function v(M){if(!(this instanceof v))return new v(M);w.call(this,M)}v.prototype._transform=function(M,T,e){e(null,M)}},{"./_stream_transform":290,inherits:231}],289:[function(d,ne,ae){(function(w,v){(function(){ne.exports=k;var M;k.ReadableState=S,d("events").EventEmitter;var T=function(ee,te){return ee.listeners(te).length},e=d("./internal/streams/stream"),a=d("buffer").Buffer,n=v.Uint8Array||function(){};function r(X){return a.from(X)}function t(X){return a.isBuffer(X)||X instanceof n}var f=d("util"),o;f&&f.debuglog?o=f.debuglog("stream"):o=function(){};var i=d("./internal/streams/buffer_list"),g=d("./internal/streams/destroy"),p=d("./internal/streams/state"),y=p.getHighWaterMark,c=d("../errors").codes,b=c.ERR_INVALID_ARG_TYPE,l=c.ERR_STREAM_PUSH_AFTER_EOF,_=c.ERR_METHOD_NOT_IMPLEMENTED,s=c.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,A,m,h;d("inherits")(k,e);var x=g.errorOrDestroy,u=["error","close","destroy","pause","resume"];function L(X,ee,te){if(typeof X.prependListener=="function")return X.prependListener(ee,te);!X._events||!X._events[ee]?X.on(ee,te):Array.isArray(X._events[ee])?X._events[ee].unshift(te):X._events[ee]=[te,X._events[ee]]}function S(X,ee,te){M=M||d("./_stream_duplex"),X=X||{},typeof te!="boolean"&&(te=ee instanceof M),this.objectMode=!!X.objectMode,te&&(this.objectMode=this.objectMode||!!X.readableObjectMode),this.highWaterMark=y(this,X,"readableHighWaterMark",te),this.buffer=new i,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=X.emitClose!==!1,this.autoDestroy=!!X.autoDestroy,this.destroyed=!1,this.defaultEncoding=X.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,X.encoding&&(A||(A=d("string_decoder/").StringDecoder),this.decoder=new A(X.encoding),this.encoding=X.encoding)}function k(X){if(M=M||d("./_stream_duplex"),!(this instanceof k))return new k(X);var ee=this instanceof M;this._readableState=new S(X,this,ee),this.readable=!0,X&&(typeof X.read=="function"&&(this._read=X.read),typeof X.destroy=="function"&&(this._destroy=X.destroy)),e.call(this)}Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(ee){!this._readableState||(this._readableState.destroyed=ee)}}),k.prototype.destroy=g.destroy,k.prototype._undestroy=g.undestroy,k.prototype._destroy=function(X,ee){ee(X)},k.prototype.push=function(X,ee){var te=this._readableState,ie;return te.objectMode?ie=!0:typeof X=="string"&&(ee=ee||te.defaultEncoding,ee!==te.encoding&&(X=a.from(X,ee),ee=""),ie=!0),P(this,X,ee,!1,ie)},k.prototype.unshift=function(X){return P(this,X,null,!0,!1)};function P(X,ee,te,ie,le){o("readableAddChunk",ee);var ge=X._readableState;if(ee===null)ge.reading=!1,F(X,ge);else{var fe;if(le||(fe=I(ge,ee)),fe)x(X,fe);else if(ge.objectMode||ee&&ee.length>0)if(typeof ee!="string"&&!ge.objectMode&&Object.getPrototypeOf(ee)!==a.prototype&&(ee=r(ee)),ie)ge.endEmitted?x(X,new s):z(X,ge,ee,!0);else if(ge.ended)x(X,new l);else{if(ge.destroyed)return!1;ge.reading=!1,ge.decoder&&!te?(ee=ge.decoder.write(ee),ge.objectMode||ee.length!==0?z(X,ge,ee,!1):J(X,ge)):z(X,ge,ee,!1)}else ie||(ge.reading=!1,J(X,ge))}return!ge.ended&&(ge.length<ge.highWaterMark||ge.length===0)}function z(X,ee,te,ie){ee.flowing&&ee.length===0&&!ee.sync?(ee.awaitDrain=0,X.emit("data",te)):(ee.length+=ee.objectMode?1:te.length,ie?ee.buffer.unshift(te):ee.buffer.push(te),ee.needReadable&&V(X)),J(X,ee)}function I(X,ee){var te;return!t(ee)&&typeof ee!="string"&&ee!==void 0&&!X.objectMode&&(te=new b("chunk",["string","Buffer","Uint8Array"],ee)),te}k.prototype.isPaused=function(){return this._readableState.flowing===!1},k.prototype.setEncoding=function(X){A||(A=d("string_decoder/").StringDecoder);var ee=new A(X);this._readableState.decoder=ee,this._readableState.encoding=this._readableState.decoder.encoding;for(var te=this._readableState.buffer.head,ie="";te!==null;)ie+=ee.write(te.data),te=te.next;return this._readableState.buffer.clear(),ie!==""&&this._readableState.buffer.push(ie),this._readableState.length=ie.length,this};var D=1073741824;function R(X){return X>=D?X=D:(X--,X|=X>>>1,X|=X>>>2,X|=X>>>4,X|=X>>>8,X|=X>>>16,X++),X}function O(X,ee){return X<=0||ee.length===0&&ee.ended?0:ee.objectMode?1:X!==X?ee.flowing&&ee.length?ee.buffer.head.data.length:ee.length:(X>ee.highWaterMark&&(ee.highWaterMark=R(X)),X<=ee.length?X:ee.ended?ee.length:(ee.needReadable=!0,0))}k.prototype.read=function(X){o("read",X),X=parseInt(X,10);var ee=this._readableState,te=X;if(X!==0&&(ee.emittedReadable=!1),X===0&&ee.needReadable&&((ee.highWaterMark!==0?ee.length>=ee.highWaterMark:ee.length>0)||ee.ended))return o("read: emitReadable",ee.length,ee.ended),ee.length===0&&ee.ended?q(this):V(this),null;if(X=O(X,ee),X===0&&ee.ended)return ee.length===0&&q(this),null;var ie=ee.needReadable;o("need readable",ie),(ee.length===0||ee.length-X<ee.highWaterMark)&&(ie=!0,o("length less than watermark",ie)),ee.ended||ee.reading?(ie=!1,o("reading or ended",ie)):ie&&(o("do read"),ee.reading=!0,ee.sync=!0,ee.length===0&&(ee.needReadable=!0),this._read(ee.highWaterMark),ee.sync=!1,ee.reading||(X=O(te,ee)));var le;return X>0?le=U(X,ee):le=null,le===null?(ee.needReadable=ee.length<=ee.highWaterMark,X=0):(ee.length-=X,ee.awaitDrain=0),ee.length===0&&(ee.ended||(ee.needReadable=!0),te!==X&&ee.ended&&q(this)),le!==null&&this.emit("data",le),le};function F(X,ee){if(o("onEofChunk"),!ee.ended){if(ee.decoder){var te=ee.decoder.end();te&&te.length&&(ee.buffer.push(te),ee.length+=ee.objectMode?1:te.length)}ee.ended=!0,ee.sync?V(X):(ee.needReadable=!1,ee.emittedReadable||(ee.emittedReadable=!0,G(X)))}}function V(X){var ee=X._readableState;o("emitReadable",ee.needReadable,ee.emittedReadable),ee.needReadable=!1,ee.emittedReadable||(o("emitReadable",ee.flowing),ee.emittedReadable=!0,w.nextTick(G,X))}function G(X){var ee=X._readableState;o("emitReadable_",ee.destroyed,ee.length,ee.ended),!ee.destroyed&&(ee.length||ee.ended)&&(X.emit("readable"),ee.emittedReadable=!1),ee.needReadable=!ee.flowing&&!ee.ended&&ee.length<=ee.highWaterMark,N(X)}function J(X,ee){ee.readingMore||(ee.readingMore=!0,w.nextTick(Z,X,ee))}function Z(X,ee){for(;!ee.reading&&!ee.ended&&(ee.length<ee.highWaterMark||ee.flowing&&ee.length===0);){var te=ee.length;if(o("maybeReadMore read 0"),X.read(0),te===ee.length)break}ee.readingMore=!1}k.prototype._read=function(X){x(this,new _("_read()"))},k.prototype.pipe=function(X,ee){var te=this,ie=this._readableState;switch(ie.pipesCount){case 0:ie.pipes=X;break;case 1:ie.pipes=[ie.pipes,X];break;default:ie.pipes.push(X);break}ie.pipesCount+=1,o("pipe count=%d opts=%j",ie.pipesCount,ee);var le=(!ee||ee.end!==!1)&&X!==w.stdout&&X!==w.stderr,ge=le?pe:Pe;ie.endEmitted?w.nextTick(ge):te.once("end",ge),X.on("unpipe",fe);function fe(Ve,Qe){o("onunpipe"),Ve===te&&Qe&&Qe.hasUnpiped===!1&&(Qe.hasUnpiped=!0,_e())}function pe(){o("onend"),X.end()}var ye=Y(te);X.on("drain",ye);var Te=!1;function _e(){o("cleanup"),X.removeListener("close",Ue),X.removeListener("finish",xe),X.removeListener("drain",ye),X.removeListener("error",Be),X.removeListener("unpipe",fe),te.removeListener("end",pe),te.removeListener("end",Pe),te.removeListener("data",De),Te=!0,ie.awaitDrain&&(!X._writableState||X._writableState.needDrain)&&ye()}te.on("data",De);function De(Ve){o("ondata");var Qe=X.write(Ve);o("dest.write",Qe),Qe===!1&&((ie.pipesCount===1&&ie.pipes===X||ie.pipesCount>1&&W(ie.pipes,X)!==-1)&&!Te&&(o("false write response, pause",ie.awaitDrain),ie.awaitDrain++),te.pause())}function Be(Ve){o("onerror",Ve),Pe(),X.removeListener("error",Be),T(X,"error")===0&&x(X,Ve)}L(X,"error",Be);function Ue(){X.removeListener("finish",xe),Pe()}X.once("close",Ue);function xe(){o("onfinish"),X.removeListener("close",Ue),Pe()}X.once("finish",xe);function Pe(){o("unpipe"),te.unpipe(X)}return X.emit("pipe",te),ie.flowing||(o("pipe resume"),te.resume()),X};function Y(X){return function(){var te=X._readableState;o("pipeOnDrain",te.awaitDrain),te.awaitDrain&&te.awaitDrain--,te.awaitDrain===0&&T(X,"data")&&(te.flowing=!0,N(X))}}k.prototype.unpipe=function(X){var ee=this._readableState,te={hasUnpiped:!1};if(ee.pipesCount===0)return this;if(ee.pipesCount===1)return X&&X!==ee.pipes?this:(X||(X=ee.pipes),ee.pipes=null,ee.pipesCount=0,ee.flowing=!1,X&&X.emit("unpipe",this,te),this);if(!X){var ie=ee.pipes,le=ee.pipesCount;ee.pipes=null,ee.pipesCount=0,ee.flowing=!1;for(var ge=0;ge<le;ge++)ie[ge].emit("unpipe",this,{hasUnpiped:!1});return this}var fe=W(ee.pipes,X);return fe===-1?this:(ee.pipes.splice(fe,1),ee.pipesCount-=1,ee.pipesCount===1&&(ee.pipes=ee.pipes[0]),X.emit("unpipe",this,te),this)},k.prototype.on=function(X,ee){var te=e.prototype.on.call(this,X,ee),ie=this._readableState;return X==="data"?(ie.readableListening=this.listenerCount("readable")>0,ie.flowing!==!1&&this.resume()):X==="readable"&&!ie.endEmitted&&!ie.readableListening&&(ie.readableListening=ie.needReadable=!0,ie.flowing=!1,ie.emittedReadable=!1,o("on readable",ie.length,ie.reading),ie.length?V(this):ie.reading||w.nextTick(re,this)),te},k.prototype.addListener=k.prototype.on,k.prototype.removeListener=function(X,ee){var te=e.prototype.removeListener.call(this,X,ee);return X==="readable"&&w.nextTick(j,this),te},k.prototype.removeAllListeners=function(X){var ee=e.prototype.removeAllListeners.apply(this,arguments);return(X==="readable"||X===void 0)&&w.nextTick(j,this),ee};function j(X){var ee=X._readableState;ee.readableListening=X.listenerCount("readable")>0,ee.resumeScheduled&&!ee.paused?ee.flowing=!0:X.listenerCount("data")>0&&X.resume()}function re(X){o("readable nexttick read 0"),X.read(0)}k.prototype.resume=function(){var X=this._readableState;return X.flowing||(o("resume"),X.flowing=!X.readableListening,se(this,X)),X.paused=!1,this};function se(X,ee){ee.resumeScheduled||(ee.resumeScheduled=!0,w.nextTick(oe,X,ee))}function oe(X,ee){o("resume",ee.reading),ee.reading||X.read(0),ee.resumeScheduled=!1,X.emit("resume"),N(X),ee.flowing&&!ee.reading&&X.read(0)}k.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function N(X){var ee=X._readableState;for(o("flow",ee.flowing);ee.flowing&&X.read()!==null;);}k.prototype.wrap=function(X){var ee=this,te=this._readableState,ie=!1;X.on("end",function(){if(o("wrapped end"),te.decoder&&!te.ended){var fe=te.decoder.end();fe&&fe.length&&ee.push(fe)}ee.push(null)}),X.on("data",function(fe){if(o("wrapped data"),te.decoder&&(fe=te.decoder.write(fe)),!(te.objectMode&&fe==null)&&!(!te.objectMode&&(!fe||!fe.length))){var pe=ee.push(fe);pe||(ie=!0,X.pause())}});for(var le in X)this[le]===void 0&&typeof X[le]=="function"&&(this[le]=function(pe){return function(){return X[pe].apply(X,arguments)}}(le));for(var ge=0;ge<u.length;ge++)X.on(u[ge],this.emit.bind(this,u[ge]));return this._read=function(fe){o("wrapped _read",fe),ie&&(ie=!1,X.resume())},this},typeof Symbol=="function"&&(k.prototype[Symbol.asyncIterator]=function(){return m===void 0&&(m=d("./internal/streams/async_iterator")),m(this)}),Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(k.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(k.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ee){this._readableState&&(this._readableState.flowing=ee)}}),k._fromList=U,Object.defineProperty(k.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function U(X,ee){if(ee.length===0)return null;var te;return ee.objectMode?te=ee.buffer.shift():!X||X>=ee.length?(ee.decoder?te=ee.buffer.join(""):ee.buffer.length===1?te=ee.buffer.first():te=ee.buffer.concat(ee.length),ee.buffer.clear()):te=ee.buffer.consume(X,ee.decoder),te}function q(X){var ee=X._readableState;o("endReadable",ee.endEmitted),ee.endEmitted||(ee.ended=!0,w.nextTick(Q,ee,X))}function Q(X,ee){if(o("endReadableNT",X.endEmitted,X.length),!X.endEmitted&&X.length===0&&(X.endEmitted=!0,ee.readable=!1,ee.emit("end"),X.autoDestroy)){var te=ee._writableState;(!te||te.autoDestroy&&te.finished)&&ee.destroy()}}typeof Symbol=="function"&&(k.from=function(X,ee){return h===void 0&&(h=d("./internal/streams/from")),h(k,X,ee)});function W(X,ee){for(var te=0,ie=X.length;te<ie;te++)if(X[te]===ee)return te;return-1}}).call(this)}).call(this,d("_process"),typeof To<"u"?To:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":286,"./_stream_duplex":287,"./internal/streams/async_iterator":292,"./internal/streams/buffer_list":293,"./internal/streams/destroy":294,"./internal/streams/from":296,"./internal/streams/state":298,"./internal/streams/stream":299,_process:277,buffer:85,events:84,inherits:231,"string_decoder/":300,util:83}],290:[function(d,ne,ae){ne.exports=r;var w=d("../errors").codes,v=w.ERR_METHOD_NOT_IMPLEMENTED,M=w.ERR_MULTIPLE_CALLBACK,T=w.ERR_TRANSFORM_ALREADY_TRANSFORMING,e=w.ERR_TRANSFORM_WITH_LENGTH_0,a=d("./_stream_duplex");d("inherits")(r,a);function n(o,i){var g=this._transformState;g.transforming=!1;var p=g.writecb;if(p===null)return this.emit("error",new M);g.writechunk=null,g.writecb=null,i!=null&&this.push(i),p(o);var y=this._readableState;y.reading=!1,(y.needReadable||y.length<y.highWaterMark)&&this._read(y.highWaterMark)}function r(o){if(!(this instanceof r))return new r(o);a.call(this,o),this._transformState={afterTransform:n.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,o&&(typeof o.transform=="function"&&(this._transform=o.transform),typeof o.flush=="function"&&(this._flush=o.flush)),this.on("prefinish",t)}function t(){var o=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(i,g){f(o,i,g)}):f(this,null,null)}r.prototype.push=function(o,i){return this._transformState.needTransform=!1,a.prototype.push.call(this,o,i)},r.prototype._transform=function(o,i,g){g(new v("_transform()"))},r.prototype._write=function(o,i,g){var p=this._transformState;if(p.writecb=g,p.writechunk=o,p.writeencoding=i,!p.transforming){var y=this._readableState;(p.needTransform||y.needReadable||y.length<y.highWaterMark)&&this._read(y.highWaterMark)}},r.prototype._read=function(o){var i=this._transformState;i.writechunk!==null&&!i.transforming?(i.transforming=!0,this._transform(i.writechunk,i.writeencoding,i.afterTransform)):i.needTransform=!0},r.prototype._destroy=function(o,i){a.prototype._destroy.call(this,o,function(g){i(g)})};function f(o,i,g){if(i)return o.emit("error",i);if(g!=null&&o.push(g),o._writableState.length)throw new e;if(o._transformState.transforming)throw new T;return o.push(null)}},{"../errors":286,"./_stream_duplex":287,inherits:231}],291:[function(d,ne,ae){(function(w,v){(function(){ne.exports=S;function M(N){var U=this;this.next=null,this.entry=null,this.finish=function(){oe(U,N)}}var T;S.WritableState=u;var e={deprecate:d("util-deprecate")},a=d("./internal/streams/stream"),n=d("buffer").Buffer,r=v.Uint8Array||function(){};function t(N){return n.from(N)}function f(N){return n.isBuffer(N)||N instanceof r}var o=d("./internal/streams/destroy"),i=d("./internal/streams/state"),g=i.getHighWaterMark,p=d("../errors").codes,y=p.ERR_INVALID_ARG_TYPE,c=p.ERR_METHOD_NOT_IMPLEMENTED,b=p.ERR_MULTIPLE_CALLBACK,l=p.ERR_STREAM_CANNOT_PIPE,_=p.ERR_STREAM_DESTROYED,s=p.ERR_STREAM_NULL_VALUES,A=p.ERR_STREAM_WRITE_AFTER_END,m=p.ERR_UNKNOWN_ENCODING,h=o.errorOrDestroy;d("inherits")(S,a);function x(){}function u(N,U,q){T=T||d("./_stream_duplex"),N=N||{},typeof q!="boolean"&&(q=U instanceof T),this.objectMode=!!N.objectMode,q&&(this.objectMode=this.objectMode||!!N.writableObjectMode),this.highWaterMark=g(this,N,"writableHighWaterMark",q),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Q=N.decodeStrings===!1;this.decodeStrings=!Q,this.defaultEncoding=N.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(W){F(U,W)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=N.emitClose!==!1,this.autoDestroy=!!N.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new M(this)}u.prototype.getBuffer=function(){for(var U=this.bufferedRequest,q=[];U;)q.push(U),U=U.next;return q},function(){try{Object.defineProperty(u.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var L;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(L=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(U){return L.call(this,U)?!0:this!==S?!1:U&&U._writableState instanceof u}})):L=function(U){return U instanceof this};function S(N){T=T||d("./_stream_duplex");var U=this instanceof T;if(!U&&!L.call(S,this))return new S(N);this._writableState=new u(N,this,U),this.writable=!0,N&&(typeof N.write=="function"&&(this._write=N.write),typeof N.writev=="function"&&(this._writev=N.writev),typeof N.destroy=="function"&&(this._destroy=N.destroy),typeof N.final=="function"&&(this._final=N.final)),a.call(this)}S.prototype.pipe=function(){h(this,new l)};function k(N,U){var q=new A;h(N,q),w.nextTick(U,q)}function P(N,U,q,Q){var W;return q===null?W=new s:typeof q!="string"&&!U.objectMode&&(W=new y("chunk",["string","Buffer"],q)),W?(h(N,W),w.nextTick(Q,W),!1):!0}S.prototype.write=function(N,U,q){var Q=this._writableState,W=!1,X=!Q.objectMode&&f(N);return X&&!n.isBuffer(N)&&(N=t(N)),typeof U=="function"&&(q=U,U=null),X?U="buffer":U||(U=Q.defaultEncoding),typeof q!="function"&&(q=x),Q.ending?k(this,q):(X||P(this,Q,N,q))&&(Q.pendingcb++,W=I(this,Q,X,N,U,q)),W},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var N=this._writableState;N.corked&&(N.corked--,!N.writing&&!N.corked&&!N.bufferProcessing&&N.bufferedRequest&&J(this,N))},S.prototype.setDefaultEncoding=function(U){if(typeof U=="string"&&(U=U.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((U+"").toLowerCase())>-1))throw new m(U);return this._writableState.defaultEncoding=U,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function z(N,U,q){return!N.objectMode&&N.decodeStrings!==!1&&typeof U=="string"&&(U=n.from(U,q)),U}Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function I(N,U,q,Q,W,X){if(!q){var ee=z(U,Q,W);Q!==ee&&(q=!0,W="buffer",Q=ee)}var te=U.objectMode?1:Q.length;U.length+=te;var ie=U.length<U.highWaterMark;if(ie||(U.needDrain=!0),U.writing||U.corked){var le=U.lastBufferedRequest;U.lastBufferedRequest={chunk:Q,encoding:W,isBuf:q,callback:X,next:null},le?le.next=U.lastBufferedRequest:U.bufferedRequest=U.lastBufferedRequest,U.bufferedRequestCount+=1}else D(N,U,!1,te,Q,W,X);return ie}function D(N,U,q,Q,W,X,ee){U.writelen=Q,U.writecb=ee,U.writing=!0,U.sync=!0,U.destroyed?U.onwrite(new _("write")):q?N._writev(W,U.onwrite):N._write(W,X,U.onwrite),U.sync=!1}function R(N,U,q,Q,W){--U.pendingcb,q?(w.nextTick(W,Q),w.nextTick(re,N,U),N._writableState.errorEmitted=!0,h(N,Q)):(W(Q),N._writableState.errorEmitted=!0,h(N,Q),re(N,U))}function O(N){N.writing=!1,N.writecb=null,N.length-=N.writelen,N.writelen=0}function F(N,U){var q=N._writableState,Q=q.sync,W=q.writecb;if(typeof W!="function")throw new b;if(O(q),U)R(N,q,Q,U,W);else{var X=Z(q)||N.destroyed;!X&&!q.corked&&!q.bufferProcessing&&q.bufferedRequest&&J(N,q),Q?w.nextTick(V,N,q,X,W):V(N,q,X,W)}}function V(N,U,q,Q){q||G(N,U),U.pendingcb--,Q(),re(N,U)}function G(N,U){U.length===0&&U.needDrain&&(U.needDrain=!1,N.emit("drain"))}function J(N,U){U.bufferProcessing=!0;var q=U.bufferedRequest;if(N._writev&&q&&q.next){var Q=U.bufferedRequestCount,W=new Array(Q),X=U.corkedRequestsFree;X.entry=q;for(var ee=0,te=!0;q;)W[ee]=q,q.isBuf||(te=!1),q=q.next,ee+=1;W.allBuffers=te,D(N,U,!0,U.length,W,"",X.finish),U.pendingcb++,U.lastBufferedRequest=null,X.next?(U.corkedRequestsFree=X.next,X.next=null):U.corkedRequestsFree=new M(U),U.bufferedRequestCount=0}else{for(;q;){var ie=q.chunk,le=q.encoding,ge=q.callback,fe=U.objectMode?1:ie.length;if(D(N,U,!1,fe,ie,le,ge),q=q.next,U.bufferedRequestCount--,U.writing)break}q===null&&(U.lastBufferedRequest=null)}U.bufferedRequest=q,U.bufferProcessing=!1}S.prototype._write=function(N,U,q){q(new c("_write()"))},S.prototype._writev=null,S.prototype.end=function(N,U,q){var Q=this._writableState;return typeof N=="function"?(q=N,N=null,U=null):typeof U=="function"&&(q=U,U=null),N!=null&&this.write(N,U),Q.corked&&(Q.corked=1,this.uncork()),Q.ending||se(this,Q,q),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Z(N){return N.ending&&N.length===0&&N.bufferedRequest===null&&!N.finished&&!N.writing}function Y(N,U){N._final(function(q){U.pendingcb--,q&&h(N,q),U.prefinished=!0,N.emit("prefinish"),re(N,U)})}function j(N,U){!U.prefinished&&!U.finalCalled&&(typeof N._final=="function"&&!U.destroyed?(U.pendingcb++,U.finalCalled=!0,w.nextTick(Y,N,U)):(U.prefinished=!0,N.emit("prefinish")))}function re(N,U){var q=Z(U);if(q&&(j(N,U),U.pendingcb===0&&(U.finished=!0,N.emit("finish"),U.autoDestroy))){var Q=N._readableState;(!Q||Q.autoDestroy&&Q.endEmitted)&&N.destroy()}return q}function se(N,U,q){U.ending=!0,re(N,U),q&&(U.finished?w.nextTick(q):N.once("finish",q)),U.ended=!0,N.writable=!1}function oe(N,U,q){var Q=N.entry;for(N.entry=null;Q;){var W=Q.callback;U.pendingcb--,W(q),Q=Q.next}U.corkedRequestsFree.next=N}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(U){!this._writableState||(this._writableState.destroyed=U)}}),S.prototype.destroy=o.destroy,S.prototype._undestroy=o.undestroy,S.prototype._destroy=function(N,U){U(N)}}).call(this)}).call(this,d("_process"),typeof To<"u"?To:typeof self<"u"?self:typeof window<"u"?window:{})},{"../errors":286,"./_stream_duplex":287,"./internal/streams/destroy":294,"./internal/streams/state":298,"./internal/streams/stream":299,_process:277,buffer:85,inherits:231,"util-deprecate":330}],292:[function(d,ne,ae){(function(w){(function(){var v;function M(_,s,A){return s in _?Object.defineProperty(_,s,{value:A,enumerable:!0,configurable:!0,writable:!0}):_[s]=A,_}var T=d("./end-of-stream"),e=Symbol("lastResolve"),a=Symbol("lastReject"),n=Symbol("error"),r=Symbol("ended"),t=Symbol("lastPromise"),f=Symbol("handlePromise"),o=Symbol("stream");function i(_,s){return{value:_,done:s}}function g(_){var s=_[e];if(s!==null){var A=_[o].read();A!==null&&(_[t]=null,_[e]=null,_[a]=null,s(i(A,!1)))}}function p(_){w.nextTick(g,_)}function y(_,s){return function(A,m){_.then(function(){if(s[r]){A(i(void 0,!0));return}s[f](A,m)},m)}}var c=Object.getPrototypeOf(function(){}),b=Object.setPrototypeOf((v={get stream(){return this[o]},next:function(){var s=this,A=this[n];if(A!==null)return Promise.reject(A);if(this[r])return Promise.resolve(i(void 0,!0));if(this[o].destroyed)return new Promise(function(u,L){w.nextTick(function(){s[n]?L(s[n]):u(i(void 0,!0))})});var m=this[t],h;if(m)h=new Promise(y(m,this));else{var x=this[o].read();if(x!==null)return Promise.resolve(i(x,!1));h=new Promise(this[f])}return this[t]=h,h}},M(v,Symbol.asyncIterator,function(){return this}),M(v,"return",function(){var s=this;return new Promise(function(A,m){s[o].destroy(null,function(h){if(h){m(h);return}A(i(void 0,!0))})})}),v),c),l=function(s){var A,m=Object.create(b,(A={},M(A,o,{value:s,writable:!0}),M(A,e,{value:null,writable:!0}),M(A,a,{value:null,writable:!0}),M(A,n,{value:null,writable:!0}),M(A,r,{value:s._readableState.endEmitted,writable:!0}),M(A,f,{value:function(x,u){var L=m[o].read();L?(m[t]=null,m[e]=null,m[a]=null,x(i(L,!1))):(m[e]=x,m[a]=u)},writable:!0}),A));return m[t]=null,T(s,function(h){if(h&&h.code!=="ERR_STREAM_PREMATURE_CLOSE"){var x=m[a];x!==null&&(m[t]=null,m[e]=null,m[a]=null,x(h)),m[n]=h;return}var u=m[e];u!==null&&(m[t]=null,m[e]=null,m[a]=null,u(i(void 0,!0))),m[r]=!0}),s.on("readable",p.bind(null,m)),m};ne.exports=l}).call(this)}).call(this,d("_process"))},{"./end-of-stream":295,_process:277}],293:[function(d,ne,ae){function w(g,p){var y=Object.keys(g);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(g);p&&(c=c.filter(function(b){return Object.getOwnPropertyDescriptor(g,b).enumerable})),y.push.apply(y,c)}return y}function v(g){for(var p=1;p<arguments.length;p++){var y=arguments[p]!=null?arguments[p]:{};p%2?w(Object(y),!0).forEach(function(c){M(g,c,y[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(y)):w(Object(y)).forEach(function(c){Object.defineProperty(g,c,Object.getOwnPropertyDescriptor(y,c))})}return g}function M(g,p,y){return p in g?Object.defineProperty(g,p,{value:y,enumerable:!0,configurable:!0,writable:!0}):g[p]=y,g}function T(g,p){if(!(g instanceof p))throw new TypeError("Cannot call a class as a function")}function e(g,p){for(var y=0;y<p.length;y++){var c=p[y];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(g,c.key,c)}}function a(g,p,y){return p&&e(g.prototype,p),y&&e(g,y),g}var n=d("buffer"),r=n.Buffer,t=d("util"),f=t.inspect,o=f&&f.custom||"inspect";function i(g,p,y){r.prototype.copy.call(g,p,y)}ne.exports=function(){function g(){T(this,g),this.head=null,this.tail=null,this.length=0}return a(g,[{key:"push",value:function(y){var c={data:y,next:null};this.length>0?this.tail.next=c:this.head=c,this.tail=c,++this.length}},{key:"unshift",value:function(y){var c={data:y,next:this.head};this.length===0&&(this.tail=c),this.head=c,++this.length}},{key:"shift",value:function(){if(this.length!==0){var y=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,y}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(y){if(this.length===0)return"";for(var c=this.head,b=""+c.data;c=c.next;)b+=y+c.data;return b}},{key:"concat",value:function(y){if(this.length===0)return r.alloc(0);for(var c=r.allocUnsafe(y>>>0),b=this.head,l=0;b;)i(b.data,c,l),l+=b.data.length,b=b.next;return c}},{key:"consume",value:function(y,c){var b;return y<this.head.data.length?(b=this.head.data.slice(0,y),this.head.data=this.head.data.slice(y)):y===this.head.data.length?b=this.shift():b=c?this._getString(y):this._getBuffer(y),b}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(y){var c=this.head,b=1,l=c.data;for(y-=l.length;c=c.next;){var _=c.data,s=y>_.length?_.length:y;if(s===_.length?l+=_:l+=_.slice(0,y),y-=s,y===0){s===_.length?(++b,c.next?this.head=c.next:this.head=this.tail=null):(this.head=c,c.data=_.slice(s));break}++b}return this.length-=b,l}},{key:"_getBuffer",value:function(y){var c=r.allocUnsafe(y),b=this.head,l=1;for(b.data.copy(c),y-=b.data.length;b=b.next;){var _=b.data,s=y>_.length?_.length:y;if(_.copy(c,c.length-y,0,s),y-=s,y===0){s===_.length?(++l,b.next?this.head=b.next:this.head=this.tail=null):(this.head=b,b.data=_.slice(s));break}++l}return this.length-=l,c}},{key:o,value:function(y,c){return f(this,v({},c,{depth:0,customInspect:!1}))}}]),g}()},{buffer:85,util:83}],294:[function(d,ne,ae){(function(w){(function(){function v(r,t){var f=this,o=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return o||i?(t?t(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,w.nextTick(a,this,r)):w.nextTick(a,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(g){!t&&g?f._writableState?f._writableState.errorEmitted?w.nextTick(T,f):(f._writableState.errorEmitted=!0,w.nextTick(M,f,g)):w.nextTick(M,f,g):t?(w.nextTick(T,f),t(g)):w.nextTick(T,f)}),this)}function M(r,t){a(r,t),T(r)}function T(r){r._writableState&&!r._writableState.emitClose||r._readableState&&!r._readableState.emitClose||r.emit("close")}function e(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function a(r,t){r.emit("error",t)}function n(r,t){var f=r._readableState,o=r._writableState;f&&f.autoDestroy||o&&o.autoDestroy?r.destroy(t):r.emit("error",t)}ne.exports={destroy:v,undestroy:e,errorOrDestroy:n}}).call(this)}).call(this,d("_process"))},{_process:277}],295:[function(d,ne,ae){var w=d("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function v(a){var n=!1;return function(){if(!n){n=!0;for(var r=arguments.length,t=new Array(r),f=0;f<r;f++)t[f]=arguments[f];a.apply(this,t)}}}function M(){}function T(a){return a.setHeader&&typeof a.abort=="function"}function e(a,n,r){if(typeof n=="function")return e(a,null,n);n||(n={}),r=v(r||M);var t=n.readable||n.readable!==!1&&a.readable,f=n.writable||n.writable!==!1&&a.writable,o=function(){a.writable||g()},i=a._writableState&&a._writableState.finished,g=function(){f=!1,i=!0,t||r.call(a)},p=a._readableState&&a._readableState.endEmitted,y=function(){t=!1,p=!0,f||r.call(a)},c=function(s){r.call(a,s)},b=function(){var s;if(t&&!p)return(!a._readableState||!a._readableState.ended)&&(s=new w),r.call(a,s);if(f&&!i)return(!a._writableState||!a._writableState.ended)&&(s=new w),r.call(a,s)},l=function(){a.req.on("finish",g)};return T(a)?(a.on("complete",g),a.on("abort",b),a.req?l():a.on("request",l)):f&&!a._writableState&&(a.on("end",o),a.on("close",o)),a.on("end",y),a.on("finish",g),n.error!==!1&&a.on("error",c),a.on("close",b),function(){a.removeListener("complete",g),a.removeListener("abort",b),a.removeListener("request",l),a.req&&a.req.removeListener("finish",g),a.removeListener("end",o),a.removeListener("close",o),a.removeListener("finish",g),a.removeListener("end",y),a.removeListener("error",c),a.removeListener("close",b)}}ne.exports=e},{"../../../errors":286}],296:[function(d,ne,ae){ne.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],297:[function(d,ne,ae){var w;function v(g){var p=!1;return function(){p||(p=!0,g.apply(void 0,arguments))}}var M=d("../../../errors").codes,T=M.ERR_MISSING_ARGS,e=M.ERR_STREAM_DESTROYED;function a(g){if(g)throw g}function n(g){return g.setHeader&&typeof g.abort=="function"}function r(g,p,y,c){c=v(c);var b=!1;g.on("close",function(){b=!0}),w===void 0&&(w=d("./end-of-stream")),w(g,{readable:p,writable:y},function(_){if(_)return c(_);b=!0,c()});var l=!1;return function(_){if(!b&&!l){if(l=!0,n(g))return g.abort();if(typeof g.destroy=="function")return g.destroy();c(_||new e("pipe"))}}}function t(g){g()}function f(g,p){return g.pipe(p)}function o(g){return!g.length||typeof g[g.length-1]!="function"?a:g.pop()}function i(){for(var g=arguments.length,p=new Array(g),y=0;y<g;y++)p[y]=arguments[y];var c=o(p);if(Array.isArray(p[0])&&(p=p[0]),p.length<2)throw new T("streams");var b,l=p.map(function(_,s){var A=s<p.length-1,m=s>0;return r(_,A,m,function(h){b||(b=h),h&&l.forEach(t),!A&&(l.forEach(t),c(b))})});return p.reduce(f)}ne.exports=i},{"../../../errors":286,"./end-of-stream":295}],298:[function(d,ne,ae){var w=d("../../../errors").codes.ERR_INVALID_OPT_VALUE;function v(T,e,a){return T.highWaterMark!=null?T.highWaterMark:e?T[a]:null}function M(T,e,a,n){var r=v(e,n,a);if(r!=null){if(!(isFinite(r)&&Math.floor(r)===r)||r<0){var t=n?a:"highWaterMark";throw new w(t,r)}return Math.floor(r)}return T.objectMode?16:16*1024}ne.exports={getHighWaterMark:M}},{"../../../errors":286}],299:[function(d,ne,ae){ne.exports=d("events").EventEmitter},{events:84}],300:[function(d,ne,ae){var w=d("safe-buffer").Buffer,v=w.isEncoding||function(l){switch(l=""+l,l&&l.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function M(l){if(!l)return"utf8";for(var _;;)switch(l){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return l;default:if(_)return;l=(""+l).toLowerCase(),_=!0}}function T(l){var _=M(l);if(typeof _!="string"&&(w.isEncoding===v||!v(l)))throw new Error("Unknown encoding: "+l);return _||l}ae.StringDecoder=e;function e(l){this.encoding=T(l);var _;switch(this.encoding){case"utf16le":this.text=i,this.end=g,_=4;break;case"utf8":this.fillLast=t,_=4;break;case"base64":this.text=p,this.end=y,_=3;break;default:this.write=c,this.end=b;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=w.allocUnsafe(_)}e.prototype.write=function(l){if(l.length===0)return"";var _,s;if(this.lastNeed){if(_=this.fillLast(l),_===void 0)return"";s=this.lastNeed,this.lastNeed=0}else s=0;return s<l.length?_?_+this.text(l,s):this.text(l,s):_||""},e.prototype.end=o,e.prototype.text=f,e.prototype.fillLast=function(l){if(this.lastNeed<=l.length)return l.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);l.copy(this.lastChar,this.lastTotal-this.lastNeed,0,l.length),this.lastNeed-=l.length};function a(l){return l<=127?0:l>>5===6?2:l>>4===14?3:l>>3===30?4:l>>6===2?-1:-2}function n(l,_,s){var A=_.length-1;if(A<s)return 0;var m=a(_[A]);return m>=0?(m>0&&(l.lastNeed=m-1),m):--A<s||m===-2?0:(m=a(_[A]),m>=0?(m>0&&(l.lastNeed=m-2),m):--A<s||m===-2?0:(m=a(_[A]),m>=0?(m>0&&(m===2?m=0:l.lastNeed=m-3),m):0))}function r(l,_,s){if((_[0]&192)!==128)return l.lastNeed=0,"\uFFFD";if(l.lastNeed>1&&_.length>1){if((_[1]&192)!==128)return l.lastNeed=1,"\uFFFD";if(l.lastNeed>2&&_.length>2&&(_[2]&192)!==128)return l.lastNeed=2,"\uFFFD"}}function t(l){var _=this.lastTotal-this.lastNeed,s=r(this,l);if(s!==void 0)return s;if(this.lastNeed<=l.length)return l.copy(this.lastChar,_,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);l.copy(this.lastChar,_,0,l.length),this.lastNeed-=l.length}function f(l,_){var s=n(this,l,_);if(!this.lastNeed)return l.toString("utf8",_);this.lastTotal=s;var A=l.length-(s-this.lastNeed);return l.copy(this.lastChar,0,A),l.toString("utf8",_,A)}function o(l){var _=l&&l.length?this.write(l):"";return this.lastNeed?_+"\uFFFD":_}function i(l,_){if((l.length-_)%2===0){var s=l.toString("utf16le",_);if(s){var A=s.charCodeAt(s.length-1);if(A>=55296&&A<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=l[l.length-2],this.lastChar[1]=l[l.length-1],s.slice(0,-1)}return s}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=l[l.length-1],l.toString("utf16le",_,l.length-1)}function g(l){var _=l&&l.length?this.write(l):"";if(this.lastNeed){var s=this.lastTotal-this.lastNeed;return _+this.lastChar.toString("utf16le",0,s)}return _}function p(l,_){var s=(l.length-_)%3;return s===0?l.toString("base64",_):(this.lastNeed=3-s,this.lastTotal=3,s===1?this.lastChar[0]=l[l.length-1]:(this.lastChar[0]=l[l.length-2],this.lastChar[1]=l[l.length-1]),l.toString("base64",_,l.length-s))}function y(l){var _=l&&l.length?this.write(l):"";return this.lastNeed?_+this.lastChar.toString("base64",0,3-this.lastNeed):_}function c(l){return l.toString(this.encoding)}function b(l){return l&&l.length?this.write(l):""}},{"safe-buffer":284}],301:[function(d,ne,ae){(function(w,v){(function(){var M=d("assert"),T=d("debug")("stream-parser");ne.exports=t;var e=-1,a=0,n=1,r=2;function t(s){var A=s&&typeof s._transform=="function",m=s&&typeof s._write=="function";if(!A&&!m)throw new Error("must pass a Writable or Transform stream in");T("extending Parser into stream"),s._bytes=o,s._skipBytes=i,A&&(s._passthrough=g),A?s._transform=y:s._write=p}function f(s){T("initializing parser stream"),s._parserBytesLeft=0,s._parserBuffers=[],s._parserBuffered=0,s._parserState=e,s._parserCallback=null,typeof s.push=="function"&&(s._parserOutput=s.push.bind(s)),s._parserInit=!0}function o(s,A){M(!this._parserCallback,'there is already a "callback" set!'),M(isFinite(s)&&s>0,'can only buffer a finite number of bytes > 0, got "'+s+'"'),this._parserInit||f(this),T("buffering %o bytes",s),this._parserBytesLeft=s,this._parserCallback=A,this._parserState=a}function i(s,A){M(!this._parserCallback,'there is already a "callback" set!'),M(s>0,'can only skip > 0 bytes, got "'+s+'"'),this._parserInit||f(this),T("skipping %o bytes",s),this._parserBytesLeft=s,this._parserCallback=A,this._parserState=n}function g(s,A){M(!this._parserCallback,'There is already a "callback" set!'),M(s>0,'can only pass through > 0 bytes, got "'+s+'"'),this._parserInit||f(this),T("passing through %o bytes",s),this._parserBytesLeft=s,this._parserCallback=A,this._parserState=r}function p(s,A,m){this._parserInit||f(this),T("write(%o bytes)",s.length),typeof A=="function"&&(m=A),l(this,s,null,m)}function y(s,A,m){this._parserInit||f(this),T("transform(%o bytes)",s.length),typeof A!="function"&&(A=this._parserOutput),l(this,s,A,m)}function c(s,A,m,h){return s._parserBytesLeft<=0?h(new Error("got data but not currently parsing anything")):A.length<=s._parserBytesLeft?function(){return b(s,A,m,h)}:function(){var x=A.slice(0,s._parserBytesLeft);return b(s,x,m,function(u){if(u)return h(u);if(A.length>x.length)return function(){return c(s,A.slice(x.length),m,h)}})}}function b(s,A,m,h){if(s._parserBytesLeft-=A.length,T("%o bytes left for stream piece",s._parserBytesLeft),s._parserState===a?(s._parserBuffers.push(A),s._parserBuffered+=A.length):s._parserState===r&&m(A),s._parserBytesLeft===0){var x=s._parserCallback;if(x&&s._parserState===a&&s._parserBuffers.length>1&&(A=v.concat(s._parserBuffers,s._parserBuffered)),s._parserState!==a&&(A=null),s._parserCallback=null,s._parserBuffered=0,s._parserState=e,s._parserBuffers.splice(0),x){var u=[];A&&u.push(A),m&&u.push(m);var L=x.length>u.length;L&&u.push(_(h));var S=x.apply(s,u);if(!L||h===S)return h}}else return h}var l=_(c);function _(s){return function(){for(var A=s.apply(this,arguments);typeof A=="function";)A=A();return A}}}).call(this)}).call(this,d("_process"),d("buffer").Buffer)},{_process:277,assert:75,buffer:85,debug:302}],302:[function(d,ne,ae){(function(w){(function(){ae=ne.exports=d("./debug"),ae.log=T,ae.formatArgs=M,ae.save=e,ae.load=a,ae.useColors=v,ae.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:n(),ae.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function v(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}ae.formatters.j=function(r){try{return JSON.stringify(r)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}};function M(r){var t=this.useColors;if(r[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+r[0]+(t?"%c ":" ")+"+"+ae.humanize(this.diff),!!t){var f="color: "+this.color;r.splice(1,0,f,"color: inherit");var o=0,i=0;r[0].replace(/%[a-zA-Z%]/g,function(g){g!=="%%"&&(o++,g==="%c"&&(i=o))}),r.splice(i,0,f)}}function T(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function e(r){try{r==null?ae.storage.removeItem("debug"):ae.storage.debug=r}catch{}}function a(){var r;try{r=ae.storage.debug}catch{}return!r&&typeof w<"u"&&"env"in w&&(r={}.DEBUG),r}ae.enable(a());function n(){try{return window.localStorage}catch{}}}).call(this)}).call(this,d("_process"))},{"./debug":303,_process:277}],303:[function(d,ne,ae){ae=ne.exports=M.debug=M.default=M,ae.coerce=n,ae.disable=e,ae.enable=T,ae.enabled=a,ae.humanize=d("ms"),ae.names=[],ae.skips=[],ae.formatters={};var w;function v(r){var t=0,f;for(f in r)t=(t<<5)-t+r.charCodeAt(f),t|=0;return ae.colors[Math.abs(t)%ae.colors.length]}function M(r){function t(){if(!!t.enabled){var f=t,o=+new Date,i=o-(w||o);f.diff=i,f.prev=w,f.curr=o,w=o;for(var g=new Array(arguments.length),p=0;p<g.length;p++)g[p]=arguments[p];g[0]=ae.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");var y=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,function(b,l){if(b==="%%")return b;y++;var _=ae.formatters[l];if(typeof _=="function"){var s=g[y];b=_.call(f,s),g.splice(y,1),y--}return b}),ae.formatArgs.call(f,g);var c=t.log||ae.log||console.log.bind(console);c.apply(f,g)}}return t.namespace=r,t.enabled=ae.enabled(r),t.useColors=ae.useColors(),t.color=v(r),typeof ae.init=="function"&&ae.init(t),t}function T(r){ae.save(r),ae.names=[],ae.skips=[];for(var t=(typeof r=="string"?r:"").split(/[\s,]+/),f=t.length,o=0;o<f;o++)!t[o]||(r=t[o].replace(/\*/g,".*?"),r[0]==="-"?ae.skips.push(new RegExp("^"+r.substr(1)+"$")):ae.names.push(new RegExp("^"+r+"$")))}function e(){ae.enable("")}function a(r){var t,f;for(t=0,f=ae.skips.length;t<f;t++)if(ae.skips[t].test(r))return!1;for(t=0,f=ae.names.length;t<f;t++)if(ae.names[t].test(r))return!0;return!1}function n(r){return r instanceof Error?r.stack||r.message:r}},{ms:304}],304:[function(d,ne,ae){var w=1e3,v=w*60,M=v*60,T=M*24,e=T*365.25;ne.exports=function(f,o){o=o||{};var i=typeof f;if(i==="string"&&f.length>0)return a(f);if(i==="number"&&isNaN(f)===!1)return o.long?r(f):n(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))};function a(f){if(f=String(f),!(f.length>100)){var o=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(f);if(!!o){var i=parseFloat(o[1]),g=(o[2]||"ms").toLowerCase();switch(g){case"years":case"year":case"yrs":case"yr":case"y":return i*e;case"days":case"day":case"d":return i*T;case"hours":case"hour":case"hrs":case"hr":case"h":return i*M;case"minutes":case"minute":case"mins":case"min":case"m":return i*v;case"seconds":case"second":case"secs":case"sec":case"s":return i*w;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}function n(f){return f>=T?Math.round(f/T)+"d":f>=M?Math.round(f/M)+"h":f>=v?Math.round(f/v)+"m":f>=w?Math.round(f/w)+"s":f+"ms"}function r(f){return t(f,T,"day")||t(f,M,"hour")||t(f,v,"minute")||t(f,w,"second")||f+" ms"}function t(f,o,i){if(!(f<o))return f<o*1.5?Math.floor(f/o)+" "+i:Math.ceil(f/o)+" "+i+"s"}},{}],305:[function(d,ne,ae){var w=d("parenthesis");ne.exports=function(M,T,e){if(M==null)throw Error("First argument should be a string");if(T==null)throw Error("Separator should be a string or a RegExp");e?(typeof e=="string"||Array.isArray(e))&&(e={ignore:e}):e={},e.escape==null&&(e.escape=!0),e.ignore==null?e.ignore=["[]","()","{}","<>",'""',"''","``","\u201C\u201D","\xAB\xBB"]:(typeof e.ignore=="string"&&(e.ignore=[e.ignore]),e.ignore=e.ignore.map(function(g){return g.length===1&&(g=g+g),g}));var a=w.parse(M,{flat:!0,brackets:e.ignore}),n=a[0],r=n.split(T);if(e.escape){for(var t=[],f=0;f<r.length;f++){var o=r[f],i=r[f+1];o[o.length-1]==="\\"&&o[o.length-2]!=="\\"?(t.push(o+T+i),f++):t.push(o)}r=t}for(var f=0;f<r.length;f++)a[0]=r[f],r[f]=w.stringify(a,{flat:!0});return r}},{parenthesis:248}],306:[function(d,ne,ae){ne.exports=w;function w(v){for(var M=v.length,T=new Array(M),e=new Array(M),a=new Array(M),n=new Array(M),r=new Array(M),t=new Array(M),f=0;f<M;++f)T[f]=-1,e[f]=0,a[f]=!1,n[f]=0,r[f]=-1,t[f]=[];var o=0,i=[],g=[];function p(l){var _=[l],s=[l];for(T[l]=e[l]=o,a[l]=!0,o+=1;s.length>0;){l=s[s.length-1];var A=v[l];if(n[l]<A.length){for(var m=n[l];m<A.length;++m){var h=A[m];if(T[h]<0){T[h]=e[h]=o,a[h]=!0,o+=1,_.push(h),s.push(h);break}else a[h]&&(e[l]=Math.min(e[l],e[h])|0);r[h]>=0&&t[l].push(r[h])}n[l]=m}else{if(e[l]===T[l]){for(var x=[],u=[],L=0,m=_.length-1;m>=0;--m){var S=_[m];if(a[S]=!1,x.push(S),u.push(t[S]),L+=t[S].length,r[S]=i.length,S===l){_.length=m;break}}i.push(x);for(var k=new Array(L),m=0;m<u.length;m++)for(var P=0;P<u[m].length;P++)k[--L]=u[m][P];g.push(k)}s.pop()}}}for(var f=0;f<M;++f)T[f]<0&&p(f);for(var y,f=0;f<g.length;f++){var c=g[f];if(c.length!==0){c.sort(function(_,s){return _-s}),y=[c[0]];for(var b=1;b<c.length;b++)c[b]!==c[b-1]&&y.push(c[b]);g[f]=y}}return{components:i,adjacencyList:g}}},{}],307:[function(d,ne,ae){Object.defineProperty(ae,"__esModule",{value:!0});var w=function(){function r(t,f){var o=[],i=!0,g=!1,p=void 0;try{for(var y=t[Symbol.iterator](),c;!(i=(c=y.next()).done)&&(o.push(c.value),!(f&&o.length===f));i=!0);}catch(b){g=!0,p=b}finally{try{!i&&y.return&&y.return()}finally{if(g)throw p}}return o}return function(t,f){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return r(t,f);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),v=Math.PI*2,M=function(t,f,o,i,g,p,y){var c=t.x,b=t.y;c*=f,b*=o;var l=i*c-g*b,_=g*c+i*b;return{x:l+p,y:_+y}},T=function(t,f){var o=f===1.5707963267948966?.551915024494:f===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(f/4),i=Math.cos(t),g=Math.sin(t),p=Math.cos(t+f),y=Math.sin(t+f);return[{x:i-g*o,y:g+i*o},{x:p+y*o,y:y-p*o},{x:p,y}]},e=function(t,f,o,i){var g=t*i-f*o<0?-1:1,p=t*o+f*i;return p>1&&(p=1),p<-1&&(p=-1),g*Math.acos(p)},a=function(t,f,o,i,g,p,y,c,b,l,_,s){var A=Math.pow(g,2),m=Math.pow(p,2),h=Math.pow(_,2),x=Math.pow(s,2),u=A*m-A*x-m*h;u<0&&(u=0),u/=A*x+m*h,u=Math.sqrt(u)*(y===c?-1:1);var L=u*g/p*s,S=u*-p/g*_,k=l*L-b*S+(t+o)/2,P=b*L+l*S+(f+i)/2,z=(_-L)/g,I=(s-S)/p,D=(-_-L)/g,R=(-s-S)/p,O=e(1,0,z,I),F=e(z,I,D,R);return c===0&&F>0&&(F-=v),c===1&&F<0&&(F+=v),[k,P,O,F]},n=function(t){var f=t.px,o=t.py,i=t.cx,g=t.cy,p=t.rx,y=t.ry,c=t.xAxisRotation,b=c===void 0?0:c,l=t.largeArcFlag,_=l===void 0?0:l,s=t.sweepFlag,A=s===void 0?0:s,m=[];if(p===0||y===0)return[];var h=Math.sin(b*v/360),x=Math.cos(b*v/360),u=x*(f-i)/2+h*(o-g)/2,L=-h*(f-i)/2+x*(o-g)/2;if(u===0&&L===0)return[];p=Math.abs(p),y=Math.abs(y);var S=Math.pow(u,2)/Math.pow(p,2)+Math.pow(L,2)/Math.pow(y,2);S>1&&(p*=Math.sqrt(S),y*=Math.sqrt(S));var k=a(f,o,i,g,p,y,_,A,h,x,u,L),P=w(k,4),z=P[0],I=P[1],D=P[2],R=P[3],O=Math.abs(R)/(v/4);Math.abs(1-O)<1e-7&&(O=1);var F=Math.max(Math.ceil(O),1);R/=F;for(var V=0;V<F;V++)m.push(T(D,R)),D+=R;return m.map(function(G){var J=M(G[0],p,y,x,h,z,I),Z=J.x,Y=J.y,j=M(G[1],p,y,x,h,z,I),re=j.x,se=j.y,oe=M(G[2],p,y,x,h,z,I),N=oe.x,U=oe.y;return{x1:Z,y1:Y,x2:re,y2:se,x:N,y:U}})};ae.default=n,ne.exports=ae.default},{}],308:[function(d,ne,ae){var w=d("parse-svg-path"),v=d("abs-svg-path"),M=d("normalize-svg-path"),T=d("is-svg-path"),e=d("assert");ne.exports=a;function a(n){if(Array.isArray(n)&&n.length===1&&typeof n[0]=="string"&&(n=n[0]),typeof n=="string"&&(e(T(n),"String is not an SVG path."),n=w(n)),e(Array.isArray(n),"Argument should be a string or an array of path segments."),n=v(n),n=M(n),!n.length)return[0,0,0,0];for(var r=[1/0,1/0,-1/0,-1/0],t=0,f=n.length;t<f;t++)for(var o=n[t].slice(1),i=0;i<o.length;i+=2)o[i+0]<r[0]&&(r[0]=o[i+0]),o[i+1]<r[1]&&(r[1]=o[i+1]),o[i+0]>r[2]&&(r[2]=o[i+0]),o[i+1]>r[3]&&(r[3]=o[i+1]);return r}},{"abs-svg-path":70,assert:75,"is-svg-path":238,"normalize-svg-path":309,"parse-svg-path":250}],309:[function(d,ne,ae){ne.exports=v;var w=d("svg-arc-to-cubic-bezier");function v(e){for(var a,n=[],r=0,t=0,f=0,o=0,i=null,g=null,p=0,y=0,c=0,b=e.length;c<b;c++){var l=e[c],_=l[0];switch(_){case"M":f=l[1],o=l[2];break;case"A":var s=w({px:p,py:y,cx:l[6],cy:l[7],rx:l[1],ry:l[2],xAxisRotation:l[3],largeArcFlag:l[4],sweepFlag:l[5]});if(!s.length)continue;for(var A=0,m;A<s.length;A++)m=s[A],l=["C",m.x1,m.y1,m.x2,m.y2,m.x,m.y],A<s.length-1&&n.push(l);break;case"S":var h=p,x=y;(a=="C"||a=="S")&&(h+=h-r,x+=x-t),l=["C",h,x,l[1],l[2],l[3],l[4]];break;case"T":a=="Q"||a=="T"?(i=p*2-i,g=y*2-g):(i=p,g=y),l=T(p,y,i,g,l[1],l[2]);break;case"Q":i=l[1],g=l[2],l=T(p,y,l[1],l[2],l[3],l[4]);break;case"L":l=M(p,y,l[1],l[2]);break;case"H":l=M(p,y,l[1],y);break;case"V":l=M(p,y,p,l[1]);break;case"Z":l=M(p,y,f,o);break}a=_,p=l[l.length-2],y=l[l.length-1],l.length>4?(r=l[l.length-4],t=l[l.length-3]):(r=p,t=y),n.push(l)}return n}function M(e,a,n,r){return["C",e,a,n,r,n,r]}function T(e,a,n,r,t,f){return["C",e/3+2/3*n,a/3+2/3*r,t/3+2/3*n,f/3+2/3*r,t,f]}},{"svg-arc-to-cubic-bezier":307}],310:[function(d,ne,ae){var w=d("svg-path-bounds"),v=d("parse-svg-path"),M=d("draw-svg-path"),T=d("is-svg-path"),e=d("bitmap-sdf"),a=document.createElement("canvas"),n=a.getContext("2d");ne.exports=r;function r(o,i){if(!T(o))throw Error("Argument should be valid svg path string");i||(i={});var g,p;i.shape?(g=i.shape[0],p=i.shape[1]):(g=a.width=i.w||i.width||200,p=a.height=i.h||i.height||200);var y=Math.min(g,p),c=i.stroke||0,b=i.viewbox||i.viewBox||w(o),l=[g/(b[2]-b[0]),p/(b[3]-b[1])],_=Math.min(l[0]||0,l[1]||0)/2;if(n.fillStyle="black",n.fillRect(0,0,g,p),n.fillStyle="white",c&&(typeof c!="number"&&(c=1),c>0?n.strokeStyle="white":n.strokeStyle="black",n.lineWidth=Math.abs(c)),n.translate(g*.5,p*.5),n.scale(_,_),f()){var s=new Path2D(o);n.fill(s),c&&n.stroke(s)}else{var A=v(o);M(n,A),n.fill(),c&&n.stroke()}n.setTransform(1,0,0,1,0,0);var m=e(n,{cutoff:i.cutoff!=null?i.cutoff:.5,radius:i.radius!=null?i.radius:y*.5});return m}var t;function f(){if(t!=null)return t;var o=document.createElement("canvas").getContext("2d");if(o.canvas.width=o.canvas.height=1,!window.Path2D)return t=!1;var i=new Path2D("M0,0h1v1h-1v-1Z");o.fillStyle="black",o.fill(i);var g=o.getImageData(0,0,1,1);return t=g&&g.data&&g.data[3]===255}},{"bitmap-sdf":82,"draw-svg-path":126,"is-svg-path":238,"parse-svg-path":250,"svg-path-bounds":308}],311:[function(d,ne,ae){(function(w,v){(function(){var M=d("process/browser.js").nextTick,T=Function.prototype.apply,e=Array.prototype.slice,a={},n=0;ae.setTimeout=function(){return new r(T.call(setTimeout,window,arguments),clearTimeout)},ae.setInterval=function(){return new r(T.call(setInterval,window,arguments),clearInterval)},ae.clearTimeout=ae.clearInterval=function(t){t.close()};function r(t,f){this._id=t,this._clearFn=f}r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},ae.enroll=function(t,f){clearTimeout(t._idleTimeoutId),t._idleTimeout=f},ae.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},ae._unrefActive=ae.active=function(t){clearTimeout(t._idleTimeoutId);var f=t._idleTimeout;f>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},f))},ae.setImmediate=typeof w=="function"?w:function(t){var f=n++,o=arguments.length<2?!1:e.call(arguments,1);return a[f]=!0,M(function(){a[f]&&(o?t.apply(null,o):t.call(null),ae.clearImmediate(f))}),f},ae.clearImmediate=typeof v=="function"?v:function(t){delete a[t]}}).call(this)}).call(this,d("timers").setImmediate,d("timers").clearImmediate)},{"process/browser.js":277,timers:311}],312:[function(d,ne,ae){(function(w){var v=/^\s+/,M=/\s+$/,T=0,e=w.round,a=w.min,n=w.max,r=w.random;function t(W,X){if(W=W||"",X=X||{},W instanceof t)return W;if(!(this instanceof t))return new t(W,X);var ee=f(W);this._originalInput=W,this._r=ee.r,this._g=ee.g,this._b=ee.b,this._a=ee.a,this._roundA=e(100*this._a)/100,this._format=X.format||ee.format,this._gradientType=X.gradientType,this._r<1&&(this._r=e(this._r)),this._g<1&&(this._g=e(this._g)),this._b<1&&(this._b=e(this._b)),this._ok=ee.ok,this._tc_id=T++}t.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var W=this.toRgb();return(W.r*299+W.g*587+W.b*114)/1e3},getLuminance:function(){var W=this.toRgb(),X,ee,te,ie,le,ge;return X=W.r/255,ee=W.g/255,te=W.b/255,X<=.03928?ie=X/12.92:ie=w.pow((X+.055)/1.055,2.4),ee<=.03928?le=ee/12.92:le=w.pow((ee+.055)/1.055,2.4),te<=.03928?ge=te/12.92:ge=w.pow((te+.055)/1.055,2.4),.2126*ie+.7152*le+.0722*ge},setAlpha:function(W){return this._a=F(W),this._roundA=e(100*this._a)/100,this},toHsv:function(){var W=p(this._r,this._g,this._b);return{h:W.h*360,s:W.s,v:W.v,a:this._a}},toHsvString:function(){var W=p(this._r,this._g,this._b),X=e(W.h*360),ee=e(W.s*100),te=e(W.v*100);return this._a==1?"hsv("+X+", "+ee+"%, "+te+"%)":"hsva("+X+", "+ee+"%, "+te+"%, "+this._roundA+")"},toHsl:function(){var W=i(this._r,this._g,this._b);return{h:W.h*360,s:W.s,l:W.l,a:this._a}},toHslString:function(){var W=i(this._r,this._g,this._b),X=e(W.h*360),ee=e(W.s*100),te=e(W.l*100);return this._a==1?"hsl("+X+", "+ee+"%, "+te+"%)":"hsla("+X+", "+ee+"%, "+te+"%, "+this._roundA+")"},toHex:function(W){return c(this._r,this._g,this._b,W)},toHexString:function(W){return"#"+this.toHex(W)},toHex8:function(W){return b(this._r,this._g,this._b,this._a,W)},toHex8String:function(W){return"#"+this.toHex8(W)},toRgb:function(){return{r:e(this._r),g:e(this._g),b:e(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+e(this._r)+", "+e(this._g)+", "+e(this._b)+")":"rgba("+e(this._r)+", "+e(this._g)+", "+e(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:e(V(this._r,255)*100)+"%",g:e(V(this._g,255)*100)+"%",b:e(V(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+e(V(this._r,255)*100)+"%, "+e(V(this._g,255)*100)+"%, "+e(V(this._b,255)*100)+"%)":"rgba("+e(V(this._r,255)*100)+"%, "+e(V(this._g,255)*100)+"%, "+e(V(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:R[c(this._r,this._g,this._b,!0)]||!1},toFilter:function(W){var X="#"+l(this._r,this._g,this._b,this._a),ee=X,te=this._gradientType?"GradientType = 1, ":"";if(W){var ie=t(W);ee="#"+l(ie._r,ie._g,ie._b,ie._a)}return"progid:DXImageTransform.Microsoft.gradient("+te+"startColorstr="+X+",endColorstr="+ee+")"},toString:function(W){var X=!!W;W=W||this._format;var ee=!1,te=this._a<1&&this._a>=0,ie=!X&&te&&(W==="hex"||W==="hex6"||W==="hex3"||W==="hex4"||W==="hex8"||W==="name");return ie?W==="name"&&this._a===0?this.toName():this.toRgbString():(W==="rgb"&&(ee=this.toRgbString()),W==="prgb"&&(ee=this.toPercentageRgbString()),(W==="hex"||W==="hex6")&&(ee=this.toHexString()),W==="hex3"&&(ee=this.toHexString(!0)),W==="hex4"&&(ee=this.toHex8String(!0)),W==="hex8"&&(ee=this.toHex8String()),W==="name"&&(ee=this.toName()),W==="hsl"&&(ee=this.toHslString()),W==="hsv"&&(ee=this.toHsvString()),ee||this.toHexString())},clone:function(){return t(this.toString())},_applyModification:function(W,X){var ee=W.apply(null,[this].concat([].slice.call(X)));return this._r=ee._r,this._g=ee._g,this._b=ee._b,this.setAlpha(ee._a),this},lighten:function(){return this._applyModification(m,arguments)},brighten:function(){return this._applyModification(h,arguments)},darken:function(){return this._applyModification(x,arguments)},desaturate:function(){return this._applyModification(_,arguments)},saturate:function(){return this._applyModification(s,arguments)},greyscale:function(){return this._applyModification(A,arguments)},spin:function(){return this._applyModification(u,arguments)},_applyCombination:function(W,X){return W.apply(null,[this].concat([].slice.call(X)))},analogous:function(){return this._applyCombination(z,arguments)},complement:function(){return this._applyCombination(L,arguments)},monochromatic:function(){return this._applyCombination(I,arguments)},splitcomplement:function(){return this._applyCombination(P,arguments)},triad:function(){return this._applyCombination(S,arguments)},tetrad:function(){return this._applyCombination(k,arguments)}},t.fromRatio=function(W,X){if(typeof W=="object"){var ee={};for(var te in W)W.hasOwnProperty(te)&&(te==="a"?ee[te]=W[te]:ee[te]=re(W[te]));W=ee}return t(W,X)};function f(W){var X={r:0,g:0,b:0},ee=1,te=null,ie=null,le=null,ge=!1,fe=!1;return typeof W=="string"&&(W=q(W)),typeof W=="object"&&(U(W.r)&&U(W.g)&&U(W.b)?(X=o(W.r,W.g,W.b),ge=!0,fe=String(W.r).substr(-1)==="%"?"prgb":"rgb"):U(W.h)&&U(W.s)&&U(W.v)?(te=re(W.s),ie=re(W.v),X=y(W.h,te,ie),ge=!0,fe="hsv"):U(W.h)&&U(W.s)&&U(W.l)&&(te=re(W.s),le=re(W.l),X=g(W.h,te,le),ge=!0,fe="hsl"),W.hasOwnProperty("a")&&(ee=W.a)),ee=F(ee),{ok:ge,format:W.format||fe,r:a(255,n(X.r,0)),g:a(255,n(X.g,0)),b:a(255,n(X.b,0)),a:ee}}function o(W,X,ee){return{r:V(W,255)*255,g:V(X,255)*255,b:V(ee,255)*255}}function i(W,X,ee){W=V(W,255),X=V(X,255),ee=V(ee,255);var te=n(W,X,ee),ie=a(W,X,ee),le,ge,fe=(te+ie)/2;if(te==ie)le=ge=0;else{var pe=te-ie;switch(ge=fe>.5?pe/(2-te-ie):pe/(te+ie),te){case W:le=(X-ee)/pe+(X<ee?6:0);break;case X:le=(ee-W)/pe+2;break;case ee:le=(W-X)/pe+4;break}le/=6}return{h:le,s:ge,l:fe}}function g(W,X,ee){var te,ie,le;W=V(W,360),X=V(X,100),ee=V(ee,100);function ge(ye,Te,_e){return _e<0&&(_e+=1),_e>1&&(_e-=1),_e<1/6?ye+(Te-ye)*6*_e:_e<1/2?Te:_e<2/3?ye+(Te-ye)*(2/3-_e)*6:ye}if(X===0)te=ie=le=ee;else{var fe=ee<.5?ee*(1+X):ee+X-ee*X,pe=2*ee-fe;te=ge(pe,fe,W+1/3),ie=ge(pe,fe,W),le=ge(pe,fe,W-1/3)}return{r:te*255,g:ie*255,b:le*255}}function p(W,X,ee){W=V(W,255),X=V(X,255),ee=V(ee,255);var te=n(W,X,ee),ie=a(W,X,ee),le,ge,fe=te,pe=te-ie;if(ge=te===0?0:pe/te,te==ie)le=0;else{switch(te){case W:le=(X-ee)/pe+(X<ee?6:0);break;case X:le=(ee-W)/pe+2;break;case ee:le=(W-X)/pe+4;break}le/=6}return{h:le,s:ge,v:fe}}function y(W,X,ee){W=V(W,360)*6,X=V(X,100),ee=V(ee,100);var te=w.floor(W),ie=W-te,le=ee*(1-X),ge=ee*(1-ie*X),fe=ee*(1-(1-ie)*X),pe=te%6,ye=[ee,ge,le,le,fe,ee][pe],Te=[fe,ee,ee,ge,le,le][pe],_e=[le,le,fe,ee,ee,ge][pe];return{r:ye*255,g:Te*255,b:_e*255}}function c(W,X,ee,te){var ie=[j(e(W).toString(16)),j(e(X).toString(16)),j(e(ee).toString(16))];return te&&ie[0].charAt(0)==ie[0].charAt(1)&&ie[1].charAt(0)==ie[1].charAt(1)&&ie[2].charAt(0)==ie[2].charAt(1)?ie[0].charAt(0)+ie[1].charAt(0)+ie[2].charAt(0):ie.join("")}function b(W,X,ee,te,ie){var le=[j(e(W).toString(16)),j(e(X).toString(16)),j(e(ee).toString(16)),j(se(te))];return ie&&le[0].charAt(0)==le[0].charAt(1)&&le[1].charAt(0)==le[1].charAt(1)&&le[2].charAt(0)==le[2].charAt(1)&&le[3].charAt(0)==le[3].charAt(1)?le[0].charAt(0)+le[1].charAt(0)+le[2].charAt(0)+le[3].charAt(0):le.join("")}function l(W,X,ee,te){var ie=[j(se(te)),j(e(W).toString(16)),j(e(X).toString(16)),j(e(ee).toString(16))];return ie.join("")}t.equals=function(W,X){return!W||!X?!1:t(W).toRgbString()==t(X).toRgbString()},t.random=function(){return t.fromRatio({r:r(),g:r(),b:r()})};function _(W,X){X=X===0?0:X||10;var ee=t(W).toHsl();return ee.s-=X/100,ee.s=G(ee.s),t(ee)}function s(W,X){X=X===0?0:X||10;var ee=t(W).toHsl();return ee.s+=X/100,ee.s=G(ee.s),t(ee)}function A(W){return t(W).desaturate(100)}function m(W,X){X=X===0?0:X||10;var ee=t(W).toHsl();return ee.l+=X/100,ee.l=G(ee.l),t(ee)}function h(W,X){X=X===0?0:X||10;var ee=t(W).toRgb();return ee.r=n(0,a(255,ee.r-e(255*-(X/100)))),ee.g=n(0,a(255,ee.g-e(255*-(X/100)))),ee.b=n(0,a(255,ee.b-e(255*-(X/100)))),t(ee)}function x(W,X){X=X===0?0:X||10;var ee=t(W).toHsl();return ee.l-=X/100,ee.l=G(ee.l),t(ee)}function u(W,X){var ee=t(W).toHsl(),te=(ee.h+X)%360;return ee.h=te<0?360+te:te,t(ee)}function L(W){var X=t(W).toHsl();return X.h=(X.h+180)%360,t(X)}function S(W){var X=t(W).toHsl(),ee=X.h;return[t(W),t({h:(ee+120)%360,s:X.s,l:X.l}),t({h:(ee+240)%360,s:X.s,l:X.l})]}function k(W){var X=t(W).toHsl(),ee=X.h;return[t(W),t({h:(ee+90)%360,s:X.s,l:X.l}),t({h:(ee+180)%360,s:X.s,l:X.l}),t({h:(ee+270)%360,s:X.s,l:X.l})]}function P(W){var X=t(W).toHsl(),ee=X.h;return[t(W),t({h:(ee+72)%360,s:X.s,l:X.l}),t({h:(ee+216)%360,s:X.s,l:X.l})]}function z(W,X,ee){X=X||6,ee=ee||30;var te=t(W).toHsl(),ie=360/ee,le=[t(W)];for(te.h=(te.h-(ie*X>>1)+720)%360;--X;)te.h=(te.h+ie)%360,le.push(t(te));return le}function I(W,X){X=X||6;for(var ee=t(W).toHsv(),te=ee.h,ie=ee.s,le=ee.v,ge=[],fe=1/X;X--;)ge.push(t({h:te,s:ie,v:le})),le=(le+fe)%1;return ge}t.mix=function(W,X,ee){ee=ee===0?0:ee||50;var te=t(W).toRgb(),ie=t(X).toRgb(),le=ee/100,ge={r:(ie.r-te.r)*le+te.r,g:(ie.g-te.g)*le+te.g,b:(ie.b-te.b)*le+te.b,a:(ie.a-te.a)*le+te.a};return t(ge)},t.readability=function(W,X){var ee=t(W),te=t(X);return(w.max(ee.getLuminance(),te.getLuminance())+.05)/(w.min(ee.getLuminance(),te.getLuminance())+.05)},t.isReadable=function(W,X,ee){var te=t.readability(W,X),ie,le;switch(le=!1,ie=Q(ee),ie.level+ie.size){case"AAsmall":case"AAAlarge":le=te>=4.5;break;case"AAlarge":le=te>=3;break;case"AAAsmall":le=te>=7;break}return le},t.mostReadable=function(W,X,ee){var te=null,ie=0,le,ge,fe,pe;ee=ee||{},ge=ee.includeFallbackColors,fe=ee.level,pe=ee.size;for(var ye=0;ye<X.length;ye++)le=t.readability(W,X[ye]),le>ie&&(ie=le,te=t(X[ye]));return t.isReadable(W,te,{level:fe,size:pe})||!ge?te:(ee.includeFallbackColors=!1,t.mostReadable(W,["#fff","#000"],ee))};var D=t.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},R=t.hexNames=O(D);function O(W){var X={};for(var ee in W)W.hasOwnProperty(ee)&&(X[W[ee]]=ee);return X}function F(W){return W=parseFloat(W),(isNaN(W)||W<0||W>1)&&(W=1),W}function V(W,X){Z(W)&&(W="100%");var ee=Y(W);return W=a(X,n(0,parseFloat(W))),ee&&(W=parseInt(W*X,10)/100),w.abs(W-X)<1e-6?1:W%X/parseFloat(X)}function G(W){return a(1,n(0,W))}function J(W){return parseInt(W,16)}function Z(W){return typeof W=="string"&&W.indexOf(".")!=-1&&parseFloat(W)===1}function Y(W){return typeof W=="string"&&W.indexOf("%")!=-1}function j(W){return W.length==1?"0"+W:""+W}function re(W){return W<=1&&(W=W*100+"%"),W}function se(W){return w.round(parseFloat(W)*255).toString(16)}function oe(W){return J(W)/255}var N=function(){var W="[-\\+]?\\d+%?",X="[-\\+]?\\d*\\.\\d+%?",ee="(?:"+X+")|(?:"+W+")",te="[\\s|\\(]+("+ee+")[,|\\s]+("+ee+")[,|\\s]+("+ee+")\\s*\\)?",ie="[\\s|\\(]+("+ee+")[,|\\s]+("+ee+")[,|\\s]+("+ee+")[,|\\s]+("+ee+")\\s*\\)?";return{CSS_UNIT:new RegExp(ee),rgb:new RegExp("rgb"+te),rgba:new RegExp("rgba"+ie),hsl:new RegExp("hsl"+te),hsla:new RegExp("hsla"+ie),hsv:new RegExp("hsv"+te),hsva:new RegExp("hsva"+ie),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function U(W){return!!N.CSS_UNIT.exec(W)}function q(W){W=W.replace(v,"").replace(M,"").toLowerCase();var X=!1;if(D[W])W=D[W],X=!0;else if(W=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var ee;return(ee=N.rgb.exec(W))?{r:ee[1],g:ee[2],b:ee[3]}:(ee=N.rgba.exec(W))?{r:ee[1],g:ee[2],b:ee[3],a:ee[4]}:(ee=N.hsl.exec(W))?{h:ee[1],s:ee[2],l:ee[3]}:(ee=N.hsla.exec(W))?{h:ee[1],s:ee[2],l:ee[3],a:ee[4]}:(ee=N.hsv.exec(W))?{h:ee[1],s:ee[2],v:ee[3]}:(ee=N.hsva.exec(W))?{h:ee[1],s:ee[2],v:ee[3],a:ee[4]}:(ee=N.hex8.exec(W))?{r:J(ee[1]),g:J(ee[2]),b:J(ee[3]),a:oe(ee[4]),format:X?"name":"hex8"}:(ee=N.hex6.exec(W))?{r:J(ee[1]),g:J(ee[2]),b:J(ee[3]),format:X?"name":"hex"}:(ee=N.hex4.exec(W))?{r:J(ee[1]+""+ee[1]),g:J(ee[2]+""+ee[2]),b:J(ee[3]+""+ee[3]),a:oe(ee[4]+""+ee[4]),format:X?"name":"hex8"}:(ee=N.hex3.exec(W))?{r:J(ee[1]+""+ee[1]),g:J(ee[2]+""+ee[2]),b:J(ee[3]+""+ee[3]),format:X?"name":"hex"}:!1}function Q(W){var X,ee;return W=W||{level:"AA",size:"small"},X=(W.level||"AA").toUpperCase(),ee=(W.size||"small").toLowerCase(),X!=="AA"&&X!=="AAA"&&(X="AA"),ee!=="small"&&ee!=="large"&&(ee="small"),{level:X,size:ee}}typeof ne<"u"&&ne.exports?ne.exports=t:window.tinycolor=t})(Math)},{}],313:[function(d,ne,ae){ne.exports=M,ne.exports.float32=ne.exports.float=M,ne.exports.fract32=ne.exports.fract=v;var w=new Float32Array(1);function v(T,e){if(T.length){if(T instanceof Float32Array)return new Float32Array(T.length);e instanceof Float32Array||(e=M(T));for(var a=0,n=e.length;a<n;a++)e[a]=T[a]-e[a];return e}return M(T-M(T))}function M(T){return T.length?T instanceof Float32Array?T:new Float32Array(T):(w[0]=T,w[0])}},{}],314:[function(d,ne,ae){var w=d("parse-unit");ne.exports=e;var v=96;function M(a,n){var r=w(getComputedStyle(a).getPropertyValue(n));return r[0]*e(r[1],a)}function T(a,n){var r=document.createElement("div");r.style["font-size"]="128"+a,n.appendChild(r);var t=M(r,"font-size")/128;return n.removeChild(r),t}function e(a,n){switch(n=n||document.body,a=(a||"px").trim().toLowerCase(),(n===window||n===document)&&(n=document.body),a){case"%":return n.clientHeight/100;case"ch":case"ex":return T(a,n);case"em":return M(n,"font-size");case"rem":return M(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return v;case"cm":return v/2.54;case"mm":return v/25.4;case"pt":return v/72;case"pc":return v/6}return 1}},{"parse-unit":251}],315:[function(d,ne,ae){(function(w,v){typeof ae=="object"&&typeof ne<"u"?v(ae):(w=w||self,v(w.topojson=w.topojson||{}))})(this,function(w){function v(s){return s}function M(s){if(s==null)return v;var A,m,h=s.scale[0],x=s.scale[1],u=s.translate[0],L=s.translate[1];return function(S,k){k||(A=m=0);var P=2,z=S.length,I=new Array(z);for(I[0]=(A+=S[0])*h+u,I[1]=(m+=S[1])*x+L;P<z;)I[P]=S[P],++P;return I}}function T(s){var A=M(s.transform),m,h=1/0,x=h,u=-h,L=-h;function S(P){P=A(P),P[0]<h&&(h=P[0]),P[0]>u&&(u=P[0]),P[1]<x&&(x=P[1]),P[1]>L&&(L=P[1])}function k(P){switch(P.type){case"GeometryCollection":P.geometries.forEach(k);break;case"Point":S(P.coordinates);break;case"MultiPoint":P.coordinates.forEach(S);break}}s.arcs.forEach(function(P){for(var z=-1,I=P.length,D;++z<I;)D=A(P[z],z),D[0]<h&&(h=D[0]),D[0]>u&&(u=D[0]),D[1]<x&&(x=D[1]),D[1]>L&&(L=D[1])});for(m in s.objects)k(s.objects[m]);return[h,x,u,L]}function e(s,A){for(var m,h=s.length,x=h-A;x<--h;)m=s[x],s[x++]=s[h],s[h]=m}function a(s,A){return typeof A=="string"&&(A=s.objects[A]),A.type==="GeometryCollection"?{type:"FeatureCollection",features:A.geometries.map(function(m){return n(s,m)})}:n(s,A)}function n(s,A){var m=A.id,h=A.bbox,x=A.properties==null?{}:A.properties,u=r(s,A);return m==null&&h==null?{type:"Feature",properties:x,geometry:u}:h==null?{type:"Feature",id:m,properties:x,geometry:u}:{type:"Feature",id:m,bbox:h,properties:x,geometry:u}}function r(s,A){var m=M(s.transform),h=s.arcs;function x(z,I){I.length&&I.pop();for(var D=h[z<0?~z:z],R=0,O=D.length;R<O;++R)I.push(m(D[R],R));z<0&&e(I,O)}function u(z){return m(z)}function L(z){for(var I=[],D=0,R=z.length;D<R;++D)x(z[D],I);return I.length<2&&I.push(I[0]),I}function S(z){for(var I=L(z);I.length<4;)I.push(I[0]);return I}function k(z){return z.map(S)}function P(z){var I=z.type,D;switch(I){case"GeometryCollection":return{type:I,geometries:z.geometries.map(P)};case"Point":D=u(z.coordinates);break;case"MultiPoint":D=z.coordinates.map(u);break;case"LineString":D=L(z.arcs);break;case"MultiLineString":D=z.arcs.map(L);break;case"Polygon":D=k(z.arcs);break;case"MultiPolygon":D=z.arcs.map(k);break;default:return null}return{type:I,coordinates:D}}return P(A)}function t(s,A){var m={},h={},x={},u=[],L=-1;A.forEach(function(P,z){var I=s.arcs[P<0?~P:P],D;I.length<3&&!I[1][0]&&!I[1][1]&&(D=A[++L],A[L]=P,A[z]=D)}),A.forEach(function(P){var z=S(P),I=z[0],D=z[1],R,O;if(R=x[I])if(delete x[R.end],R.push(P),R.end=D,O=h[D]){delete h[O.start];var F=O===R?R:R.concat(O);h[F.start=R.start]=x[F.end=O.end]=F}else h[R.start]=x[R.end]=R;else if(R=h[D])if(delete h[R.start],R.unshift(P),R.start=I,O=x[I]){delete x[O.end];var V=O===R?R:O.concat(R);h[V.start=O.start]=x[V.end=R.end]=V}else h[R.start]=x[R.end]=R;else R=[P],h[R.start=I]=x[R.end=D]=R});function S(P){var z=s.arcs[P<0?~P:P],I=z[0],D;return s.transform?(D=[0,0],z.forEach(function(R){D[0]+=R[0],D[1]+=R[1]})):D=z[z.length-1],P<0?[D,I]:[I,D]}function k(P,z){for(var I in P){var D=P[I];delete z[D.start],delete D.start,delete D.end,D.forEach(function(R){m[R<0?~R:R]=1}),u.push(D)}}return k(x,h),k(h,x),A.forEach(function(P){m[P<0?~P:P]||u.push([P])}),u}function f(s){return r(s,o.apply(this,arguments))}function o(s,A,m){var h,x,u;if(arguments.length>1)h=i(s,A,m);else for(x=0,h=new Array(u=s.arcs.length);x<u;++x)h[x]=x;return{type:"MultiLineString",arcs:t(s,h)}}function i(s,A,m){var h=[],x=[],u;function L(I){var D=I<0?~I:I;(x[D]||(x[D]=[])).push({i:I,g:u})}function S(I){I.forEach(L)}function k(I){I.forEach(S)}function P(I){I.forEach(k)}function z(I){switch(u=I,I.type){case"GeometryCollection":I.geometries.forEach(z);break;case"LineString":S(I.arcs);break;case"MultiLineString":case"Polygon":k(I.arcs);break;case"MultiPolygon":P(I.arcs);break}}return z(A),x.forEach(m==null?function(I){h.push(I[0].i)}:function(I){m(I[0].g,I[I.length-1].g)&&h.push(I[0].i)}),h}function g(s){for(var A=-1,m=s.length,h,x=s[m-1],u=0;++A<m;)h=x,x=s[A],u+=h[0]*x[1]-h[1]*x[0];return Math.abs(u)}function p(s){return r(s,y.apply(this,arguments))}function y(s,A){var m={},h=[],x=[];A.forEach(u);function u(k){switch(k.type){case"GeometryCollection":k.geometries.forEach(u);break;case"Polygon":L(k.arcs);break;case"MultiPolygon":k.arcs.forEach(L);break}}function L(k){k.forEach(function(P){P.forEach(function(z){(m[z=z<0?~z:z]||(m[z]=[])).push(k)})}),h.push(k)}function S(k){return g(r(s,{type:"Polygon",arcs:[k]}).coordinates[0])}return h.forEach(function(k){if(!k._){var P=[],z=[k];for(k._=1,x.push(P);k=z.pop();)P.push(k),k.forEach(function(I){I.forEach(function(D){m[D<0?~D:D].forEach(function(R){R._||(R._=1,z.push(R))})})})}}),h.forEach(function(k){delete k._}),{type:"MultiPolygon",arcs:x.map(function(k){var P=[],z;if(k.forEach(function(F){F.forEach(function(V){V.forEach(function(G){m[G<0?~G:G].length<2&&P.push(G)})})}),P=t(s,P),(z=P.length)>1)for(var I=1,D=S(P[0]),R,O;I<z;++I)(R=S(P[I]))>D&&(O=P[0],P[0]=P[I],P[I]=O,D=R);return P}).filter(function(k){return k.length>0})}}function c(s,A){for(var m=0,h=s.length;m<h;){var x=m+h>>>1;s[x]<A?m=x+1:h=x}return m}function b(s){var A={},m=s.map(function(){return[]});function h(F,V){F.forEach(function(G){G<0&&(G=~G);var J=A[G];J?J.push(V):A[G]=[V]})}function x(F,V){F.forEach(function(G){h(G,V)})}function u(F,V){F.type==="GeometryCollection"?F.geometries.forEach(function(G){u(G,V)}):F.type in L&&L[F.type](F.arcs,V)}var L={LineString:h,MultiLineString:x,Polygon:x,MultiPolygon:function(F,V){F.forEach(function(G){x(G,V)})}};s.forEach(u);for(var S in A)for(var k=A[S],P=k.length,z=0;z<P;++z)for(var I=z+1;I<P;++I){var D=k[z],R=k[I],O;(O=m[D])[S=c(O,R)]!==R&&O.splice(S,0,R),(O=m[R])[S=c(O,D)]!==D&&O.splice(S,0,D)}return m}function l(s){if(s==null)return v;var A,m,h=s.scale[0],x=s.scale[1],u=s.translate[0],L=s.translate[1];return function(S,k){k||(A=m=0);var P=2,z=S.length,I=new Array(z),D=Math.round((S[0]-u)/h),R=Math.round((S[1]-L)/x);for(I[0]=D-A,A=D,I[1]=R-m,m=R;P<z;)I[P]=S[P],++P;return I}}function _(s,A){if(s.transform)throw new Error("already quantized");if(!A||!A.scale){if(!((L=Math.floor(A))>=2))throw new Error("n must be \u22652");k=s.bbox||T(s);var m=k[0],h=k[1],x=k[2],u=k[3],L;A={scale:[x-m?(x-m)/(L-1):1,u-h?(u-h)/(L-1):1],translate:[m,h]}}else k=s.bbox;var S=l(A),k,P,z=s.objects,I={};function D(F){return S(F)}function R(F){var V;switch(F.type){case"GeometryCollection":V={type:"GeometryCollection",geometries:F.geometries.map(R)};break;case"Point":V={type:"Point",coordinates:D(F.coordinates)};break;case"MultiPoint":V={type:"MultiPoint",coordinates:F.coordinates.map(D)};break;default:return F}return F.id!=null&&(V.id=F.id),F.bbox!=null&&(V.bbox=F.bbox),F.properties!=null&&(V.properties=F.properties),V}function O(F){var V=0,G=1,J=F.length,Z,Y=new Array(J);for(Y[0]=S(F[0],0);++V<J;)((Z=S(F[V],V))[0]||Z[1])&&(Y[G++]=Z);return G===1&&(Y[G++]=[0,0]),Y.length=G,Y}for(P in z)I[P]=R(z[P]);return{type:"Topology",bbox:k,transform:A,objects:I,arcs:s.arcs.map(O)}}w.bbox=T,w.feature=a,w.merge=p,w.mergeArcs=y,w.mesh=f,w.meshArcs=o,w.neighbors=b,w.quantize=_,w.transform=M,w.untransform=l,Object.defineProperty(w,"__esModule",{value:!0})})},{}],316:[function(d,ne,ae){var w=d("../prototype/is");ne.exports=function(v){if(typeof v!="function"||!hasOwnProperty.call(v,"length"))return!1;try{if(typeof v.length!="number"||typeof v.call!="function"||typeof v.apply!="function")return!1}catch{return!1}return!w(v)}},{"../prototype/is":323}],317:[function(d,ne,ae){var w=d("../value/is"),v=d("../object/is"),M=d("../string/coerce"),T=d("./to-short-string"),e=function(a,n){return a.replace("%v",T(n))};ne.exports=function(a,n,r){if(!v(r))throw new TypeError(e(n,a));if(!w(a)){if("default"in r)return r.default;if(r.isOptional)return null}var t=M(r.errorMessage);throw w(t)||(t=n),new TypeError(e(t,a))}},{"../object/is":320,"../string/coerce":324,"../value/is":326,"./to-short-string":319}],318:[function(d,ne,ae){ne.exports=function(w){try{return w.toString()}catch{try{return String(w)}catch{return null}}}},{}],319:[function(d,ne,ae){var w=d("./safe-to-string"),v=/[\n\r\u2028\u2029]/g;ne.exports=function(M){var T=w(M);return T===null?"<Non-coercible to string value>":(T.length>100&&(T=T.slice(0,99)+"\u2026"),T=T.replace(v,function(e){switch(e){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}),T)}},{"./safe-to-string":318}],320:[function(d,ne,ae){var w=d("../value/is"),v={object:!0,function:!0,undefined:!0};ne.exports=function(M){return w(M)?hasOwnProperty.call(v,typeof M):!1}},{"../value/is":326}],321:[function(d,ne,ae){var w=d("../lib/resolve-exception"),v=d("./is");ne.exports=function(M){return v(M)?M:w(M,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":317,"./is":322}],322:[function(d,ne,ae){var w=d("../function/is"),v=/^\s*class[\s{/}]/,M=Function.prototype.toString;ne.exports=function(T){return!(!w(T)||v.test(M.call(T)))}},{"../function/is":316}],323:[function(d,ne,ae){var w=d("../object/is");ne.exports=function(v){if(!w(v))return!1;try{return v.constructor?v.constructor.prototype===v:!1}catch{return!1}}},{"../object/is":320}],324:[function(d,ne,ae){var w=d("../value/is"),v=d("../object/is"),M=Object.prototype.toString;ne.exports=function(T){if(!w(T))return null;if(v(T)){var e=T.toString;if(typeof e!="function"||e===M)return null}try{return""+T}catch{return null}}},{"../object/is":320,"../value/is":326}],325:[function(d,ne,ae){var w=d("../lib/resolve-exception"),v=d("./is");ne.exports=function(M){return v(M)?M:w(M,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":317,"./is":326}],326:[function(d,ne,ae){var w=void 0;ne.exports=function(v){return v!==w&&v!==null}},{}],327:[function(d,ne,ae){(function(w){(function(){var v=d("bit-twiddle"),M=d("dup"),T=d("buffer").Buffer;w.__TYPEDARRAY_POOL||(w.__TYPEDARRAY_POOL={UINT8:M([32,0]),UINT16:M([32,0]),UINT32:M([32,0]),BIGUINT64:M([32,0]),INT8:M([32,0]),INT16:M([32,0]),INT32:M([32,0]),BIGINT64:M([32,0]),FLOAT:M([32,0]),DOUBLE:M([32,0]),DATA:M([32,0]),UINT8C:M([32,0]),BUFFER:M([32,0])});var e=typeof Uint8ClampedArray<"u",a=typeof BigUint64Array<"u",n=typeof BigInt64Array<"u",r=w.__TYPEDARRAY_POOL;r.UINT8C||(r.UINT8C=M([32,0])),r.BIGUINT64||(r.BIGUINT64=M([32,0])),r.BIGINT64||(r.BIGINT64=M([32,0])),r.BUFFER||(r.BUFFER=M([32,0]));var t=r.DATA,f=r.BUFFER;ae.free=function(k){if(T.isBuffer(k))f[v.log2(k.length)].push(k);else{if(Object.prototype.toString.call(k)!=="[object ArrayBuffer]"&&(k=k.buffer),!k)return;var P=k.length||k.byteLength,z=v.log2(P)|0;t[z].push(k)}};function o(S){if(!!S){var k=S.length||S.byteLength,P=v.log2(k);t[P].push(S)}}function i(S){o(S.buffer)}ae.freeUint8=ae.freeUint16=ae.freeUint32=ae.freeBigUint64=ae.freeInt8=ae.freeInt16=ae.freeInt32=ae.freeBigInt64=ae.freeFloat32=ae.freeFloat=ae.freeFloat64=ae.freeDouble=ae.freeUint8Clamped=ae.freeDataView=i,ae.freeArrayBuffer=o,ae.freeBuffer=function(k){f[v.log2(k.length)].push(k)},ae.malloc=function(k,P){if(P===void 0||P==="arraybuffer")return g(k);switch(P){case"uint8":return p(k);case"uint16":return y(k);case"uint32":return c(k);case"int8":return b(k);case"int16":return l(k);case"int32":return _(k);case"float":case"float32":return s(k);case"double":case"float64":return A(k);case"uint8_clamped":return m(k);case"bigint64":return x(k);case"biguint64":return h(k);case"buffer":return L(k);case"data":case"dataview":return u(k);default:return null}return null};function g(k){var k=v.nextPow2(k),P=v.log2(k),z=t[P];return z.length>0?z.pop():new ArrayBuffer(k)}ae.mallocArrayBuffer=g;function p(S){return new Uint8Array(g(S),0,S)}ae.mallocUint8=p;function y(S){return new Uint16Array(g(2*S),0,S)}ae.mallocUint16=y;function c(S){return new Uint32Array(g(4*S),0,S)}ae.mallocUint32=c;function b(S){return new Int8Array(g(S),0,S)}ae.mallocInt8=b;function l(S){return new Int16Array(g(2*S),0,S)}ae.mallocInt16=l;function _(S){return new Int32Array(g(4*S),0,S)}ae.mallocInt32=_;function s(S){return new Float32Array(g(4*S),0,S)}ae.mallocFloat32=ae.mallocFloat=s;function A(S){return new Float64Array(g(8*S),0,S)}ae.mallocFloat64=ae.mallocDouble=A;function m(S){return e?new Uint8ClampedArray(g(S),0,S):p(S)}ae.mallocUint8Clamped=m;function h(S){return a?new BigUint64Array(g(8*S),0,S):null}ae.mallocBigUint64=h;function x(S){return n?new BigInt64Array(g(8*S),0,S):null}ae.mallocBigInt64=x;function u(S){return new DataView(g(S),0,S)}ae.mallocDataView=u;function L(S){S=v.nextPow2(S);var k=v.log2(S),P=f[k];return P.length>0?P.pop():new T(S)}ae.mallocBuffer=L,ae.clearCache=function(){for(var k=0;k<32;++k)r.UINT8[k].length=0,r.UINT16[k].length=0,r.UINT32[k].length=0,r.INT8[k].length=0,r.INT16[k].length=0,r.INT32[k].length=0,r.FLOAT[k].length=0,r.DOUBLE[k].length=0,r.BIGUINT64[k].length=0,r.BIGINT64[k].length=0,r.UINT8C[k].length=0,t[k].length=0,f[k].length=0}}).call(this)}).call(this,typeof To<"u"?To:typeof self<"u"?self:typeof window<"u"?window:{})},{"bit-twiddle":81,buffer:85,dup:128}],328:[function(d,ne,ae){var w=/[\'\"]/;ne.exports=function(M){return M?(w.test(M.charAt(0))&&(M=M.substr(1)),w.test(M.charAt(M.length-1))&&(M=M.substr(0,M.length-1)),M):""}},{}],329:[function(d,ne,ae){ne.exports=function(v,M,T){Array.isArray(T)||(T=[].slice.call(arguments,2));for(var e=0,a=T.length;e<a;e++){var n=T[e];for(var r in n)if(!(M[r]!==void 0&&!Array.isArray(M[r])&&v[r]===M[r])&&r in M){var t;if(n[r]===!0)t=M[r];else{if(n[r]===!1)continue;if(typeof n[r]=="function"&&(t=n[r](M[r],v,M),t===void 0))continue}v[r]=t}}return v}},{}],330:[function(d,ne,ae){(function(w){(function(){ne.exports=v;function v(T,e){if(M("noDeprecation"))return T;var a=!1;function n(){if(!a){if(M("throwDeprecation"))throw new Error(e);M("traceDeprecation")?console.trace(e):console.warn(e),a=!0}return T.apply(this,arguments)}return n}function M(T){try{if(!w.localStorage)return!1}catch{return!1}var e=w.localStorage[T];return e==null?!1:String(e).toLowerCase()==="true"}}).call(this)}).call(this,typeof To<"u"?To:typeof self<"u"?self:typeof window<"u"?window:{})},{}],331:[function(d,ne,ae){var w=d("get-canvas-context");ne.exports=function(M){return w("webgl",M)}},{"get-canvas-context":194}],332:[function(d,ne,ae){var w=d("../main"),v=d("object-assign"),M=w.instance();function T(g){this.local=this.regionalOptions[g||""]||this.regionalOptions[""]}T.prototype=new w.baseCalendar,v(T.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(g,p){if(typeof g=="string"){var y=g.match(a);return y?y[0]:""}var c=this._validateYear(g),b=g.month(),l=""+this.toChineseMonth(c,b);return p&&l.length<2&&(l="0"+l),this.isIntercalaryMonth(c,b)&&(l+="i"),l},monthNames:function(g){if(typeof g=="string"){var p=g.match(n);return p?p[0]:""}var y=this._validateYear(g),c=g.month(),b=this.toChineseMonth(y,c),l=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"][b-1];return this.isIntercalaryMonth(y,c)&&(l="\u95F0"+l),l},monthNamesShort:function(g){if(typeof g=="string"){var p=g.match(r);return p?p[0]:""}var y=this._validateYear(g),c=g.month(),b=this.toChineseMonth(y,c),l=["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"][b-1];return this.isIntercalaryMonth(y,c)&&(l="\u95F0"+l),l},parseMonth:function(g,p){g=this._validateYear(g);var y=parseInt(p),c;if(isNaN(y))p[0]==="\u95F0"&&(c=!0,p=p.substring(1)),p[p.length-1]==="\u6708"&&(p=p.substring(0,p.length-1)),y=1+["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"].indexOf(p);else{var b=p[p.length-1];c=b==="i"||b==="I"}var l=this.toMonthIndex(g,y,c);return l},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(g,p){if(g.year&&(g=g.year()),typeof g!="number"||g<1888||g>2111)throw p.replace(/\{0\}/,this.local.name);return g},toMonthIndex:function(g,p,y){var c=this.intercalaryMonth(g),b=y&&p!==c;if(b||p<1||p>12)throw w.local.invalidMonth.replace(/\{0\}/,this.local.name);var l;return c?!y&&p<=c?l=p-1:l=p:l=p-1,l},toChineseMonth:function(g,p){g.year&&(g=g.year(),p=g.month());var y=this.intercalaryMonth(g),c=y?12:11;if(p<0||p>c)throw w.local.invalidMonth.replace(/\{0\}/,this.local.name);var b;return y?p<y?b=p+1:b=p:b=p+1,b},intercalaryMonth:function(g){g=this._validateYear(g);var p=t[g-t[0]],y=p>>13;return y},isIntercalaryMonth:function(g,p){g.year&&(g=g.year(),p=g.month());var y=this.intercalaryMonth(g);return!!y&&y===p},leapYear:function(g){return this.intercalaryMonth(g)!==0},weekOfYear:function(g,p,y){var c=this._validateYear(g,w.local.invalidyear),b=f[c-f[0]],l=b>>9&4095,_=b>>5&15,s=b&31,A;A=M.newDate(l,_,s),A.add(4-(A.dayOfWeek()||7),"d");var m=this.toJD(g,p,y)-A.toJD();return 1+Math.floor(m/7)},monthsInYear:function(g){return this.leapYear(g)?13:12},daysInMonth:function(g,p){g.year&&(p=g.month(),g=g.year()),g=this._validateYear(g);var y=t[g-t[0]],c=y>>13,b=c?12:11;if(p>b)throw w.local.invalidMonth.replace(/\{0\}/,this.local.name);var l=y&1<<12-p?30:29;return l},weekDay:function(g,p,y){return(this.dayOfWeek(g,p,y)||7)<6},toJD:function(g,p,y){var c=this._validate(g,l,y,w.local.invalidDate);g=this._validateYear(c.year()),p=c.month(),y=c.day();var b=this.isIntercalaryMonth(g,p),l=this.toChineseMonth(g,p),_=i(g,l,y,b);return M.toJD(_.year,_.month,_.day)},fromJD:function(g){var p=M.fromJD(g),y=o(p.year(),p.month(),p.day()),c=this.toMonthIndex(y.year,y.month,y.isIntercalary);return this.newDate(y.year,c,y.day)},fromString:function(g){var p=g.match(e),y=this._validateYear(+p[1]),c=+p[2],b=!!p[3],l=this.toMonthIndex(y,c,b),_=+p[4];return this.newDate(y,l,_)},add:function(g,p,y){var c=g.year(),b=g.month(),l=this.isIntercalaryMonth(c,b),_=this.toChineseMonth(c,b),s=Object.getPrototypeOf(T.prototype).add.call(this,g,p,y);if(y==="y"){var A=s.year(),m=s.month(),h=this.isIntercalaryMonth(A,_),x=l&&h?this.toMonthIndex(A,_,!0):this.toMonthIndex(A,_,!1);x!==m&&s.month(x)}return s}});var e=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,a=/^\d?\d[iI]?/m,n=/^闰?十?[一二三四五六七八九]?月/m,r=/^闰?十?[一二三四五六七八九]?/m;w.calendars.chinese=T;var t=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],f=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function o(g,p,y,c){var b,l;if(typeof g=="object")b=g,l=p||{};else{var _=typeof g=="number"&&g>=1888&&g<=2111;if(!_)throw new Error("Solar year outside range 1888-2111");var s=typeof p=="number"&&p>=1&&p<=12;if(!s)throw new Error("Solar month outside range 1 - 12");var A=typeof y=="number"&&y>=1&&y<=31;if(!A)throw new Error("Solar day outside range 1 - 31");b={year:g,month:p,day:y},l=c||{}}var m=f[b.year-f[0]],h=b.year<<9|b.month<<5|b.day;l.year=h>=m?b.year:b.year-1,m=f[l.year-f[0]];var x=m>>9&4095,u=m>>5&15,L=m&31,S,k=new Date(x,u-1,L),P=new Date(b.year,b.month-1,b.day);S=Math.round((P-k)/(24*3600*1e3));var z=t[l.year-t[0]],I;for(I=0;I<13;I++){var D=z&1<<12-I?30:29;if(S<D)break;S-=D}var R=z>>13;return!R||I<R?(l.isIntercalary=!1,l.month=1+I):I===R?(l.isIntercalary=!0,l.month=I):(l.isIntercalary=!1,l.month=I),l.day=1+S,l}function i(g,p,y,c,b){var l,_;if(typeof g=="object")_=g,l=p||{};else{var s=typeof g=="number"&&g>=1888&&g<=2111;if(!s)throw new Error("Lunar year outside range 1888-2111");var A=typeof p=="number"&&p>=1&&p<=12;if(!A)throw new Error("Lunar month outside range 1 - 12");var m=typeof y=="number"&&y>=1&&y<=30;if(!m)throw new Error("Lunar day outside range 1 - 30");var h;typeof c=="object"?(h=!1,l=c):(h=!!c,l=b||{}),_={year:g,month:p,day:y,isIntercalary:h}}var x;x=_.day-1;var u=t[_.year-t[0]],L=u>>13,S;L&&(_.month>L||_.isIntercalary)?S=_.month:S=_.month-1;for(var k=0;k<S;k++){var P=u&1<<12-k?30:29;x+=P}var z=f[_.year-f[0]],I=z>>9&4095,D=z>>5&15,R=z&31,O=new Date(I,D-1,R+x);return l.year=O.getFullYear(),l.month=1+O.getMonth(),l.day=O.getDate(),l}},{"../main":346,"object-assign":247}],333:[function(d,ne,ae){var w=d("../main"),v=d("object-assign");function M(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}M.prototype=new w.baseCalendar,v(M.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var e=this._validate(a,this.minMonth,this.minDay,w.local.invalidYear),a=e.year()+(e.year()<0?1:0);return a%4===3||a%4===-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,w.local.invalidYear||w.regionalOptions[""].invalidYear),13},weekOfYear:function(T,e,a){var n=this.newDate(T,e,a);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(T,e){var a=this._validate(T,e,this.minDay,w.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===13&&this.leapYear(a.year())?1:0)},weekDay:function(T,e,a){return(this.dayOfWeek(T,e,a)||7)<6},toJD:function(T,e,a){var n=this._validate(T,e,a,w.local.invalidDate);return T=n.year(),T<0&&T++,n.day()+(n.month()-1)*30+(T-1)*365+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var e=Math.floor(T)+.5-this.jdEpoch,a=Math.floor((e-Math.floor((e+366)/1461))/365)+1;a<=0&&a--,e=Math.floor(T)+.5-this.newDate(a,1,1).toJD();var n=Math.floor(e/30)+1,r=e-(n-1)*30+1;return this.newDate(a,n,r)}}),w.calendars.coptic=M},{"../main":346,"object-assign":247}],334:[function(d,ne,ae){var w=d("../main"),v=d("object-assign");function M(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}M.prototype=new w.baseCalendar,v(M.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,w.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,w.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,w.local.invalidYear),400},weekOfYear:function(e,a,n){var r=this.newDate(e,a,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/8)+1},daysInMonth:function(e,a){var n=this._validate(e,a,this.minDay,w.local.invalidMonth);return this.daysPerMonth[n.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,a,n){var r=this._validate(e,a,n,w.local.invalidDate);return(r.day()+1)%8},weekDay:function(e,a,n){var r=this.dayOfWeek(e,a,n);return r>=2&&r<=6},extraInfo:function(e,a,n){var r=this._validate(e,a,n,w.local.invalidDate);return{century:T[Math.floor((r.year()-1)/100)+1]||""}},toJD:function(e,a,n){var r=this._validate(e,a,n,w.local.invalidDate);return e=r.year()+(r.year()<0?1:0),a=r.month(),n=r.day(),n+(a>1?16:0)+(a>2?(a-2)*32:0)+(e-1)*400+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var a=Math.floor(e/400)+1;e-=(a-1)*400,e+=e>15?16:0;var n=Math.floor(e/32)+1,r=e-(n-1)*32+1;return this.newDate(a<=0?a-1:a,n,r)}});var T={20:"Fruitbat",21:"Anchovy"};w.calendars.discworld=M},{"../main":346,"object-assign":247}],335:[function(d,ne,ae){var w=d("../main"),v=d("object-assign");function M(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}M.prototype=new w.baseCalendar,v(M.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var e=this._validate(a,this.minMonth,this.minDay,w.local.invalidYear),a=e.year()+(e.year()<0?1:0);return a%4===3||a%4===-1},monthsInYear:function(T){return this._validate(T,this.minMonth,this.minDay,w.local.invalidYear||w.regionalOptions[""].invalidYear),13},weekOfYear:function(T,e,a){var n=this.newDate(T,e,a);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(T,e){var a=this._validate(T,e,this.minDay,w.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===13&&this.leapYear(a.year())?1:0)},weekDay:function(T,e,a){return(this.dayOfWeek(T,e,a)||7)<6},toJD:function(T,e,a){var n=this._validate(T,e,a,w.local.invalidDate);return T=n.year(),T<0&&T++,n.day()+(n.month()-1)*30+(T-1)*365+Math.floor(T/4)+this.jdEpoch-1},fromJD:function(T){var e=Math.floor(T)+.5-this.jdEpoch,a=Math.floor((e-Math.floor((e+366)/1461))/365)+1;a<=0&&a--,e=Math.floor(T)+.5-this.newDate(a,1,1).toJD();var n=Math.floor(e/30)+1,r=e-(n-1)*30+1;return this.newDate(a,n,r)}}),w.calendars.ethiopian=M},{"../main":346,"object-assign":247}],336:[function(d,ne,ae){var w=d("../main"),v=d("object-assign");function M(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}M.prototype=new w.baseCalendar,v(M.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,w.local.invalidYear);return this._leapYear(a.year())},_leapYear:function(e){return e=e<0?e+1:e,T(e*7+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,w.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,a,n){var r=this.newDate(e,a,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,w.local.invalidYear);return e=a.year(),this.toJD(e===-1?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,a){return e.year&&(a=e.month(),e=e.year()),this._validate(e,a,this.minDay,w.local.invalidMonth),a===12&&this.leapYear(e)||a===8&&T(this.daysInYear(e),10)===5?30:a===9&&T(this.daysInYear(e),10)===3?29:this.daysPerMonth[a-1]},weekDay:function(e,a,n){return this.dayOfWeek(e,a,n)!==6},extraInfo:function(e,a,n){var r=this._validate(e,a,n,w.local.invalidDate);return{yearType:(this.leapYear(r)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(r)%10-3]}},toJD:function(e,a,n){var r=this._validate(e,a,n,w.local.invalidDate);e=r.year(),a=r.month(),n=r.day();var t=e<=0?e+1:e,f=this.jdEpoch+this._delay1(t)+this._delay2(t)+n+1;if(a<7){for(var o=7;o<=this.monthsInYear(e);o++)f+=this.daysInMonth(e,o);for(var o=1;o<a;o++)f+=this.daysInMonth(e,o)}else for(var o=7;o<a;o++)f+=this.daysInMonth(e,o);return f},_delay1:function(e){var a=Math.floor((235*e-234)/19),n=12084+13753*a,r=a*29+Math.floor(n/25920);return T(3*(r+1),7)<3&&r++,r},_delay2:function(e){var a=this._delay1(e-1),n=this._delay1(e),r=this._delay1(e+1);return r-n===356?2:n-a===382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var a=Math.floor((e-this.jdEpoch)*98496/35975351)-1;e>=this.toJD(a===-1?1:a+1,7,1);)a++;for(var n=e<this.toJD(a,1,1)?7:1;e>this.toJD(a,n,this.daysInMonth(a,n));)n++;var r=e-this.toJD(a,n,1)+1;return this.newDate(a,n,r)}});function T(e,a){return e-a*Math.floor(e/a)}w.calendars.hebrew=M},{"../main":346,"object-assign":247}],337:[function(d,ne,ae){var w=d("../main"),v=d("object-assign");function M(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}M.prototype=new w.baseCalendar,v(M.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012Bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(T){var e=this._validate(T,this.minMonth,this.minDay,w.local.invalidYear);return(e.year()*11+14)%30<11},weekOfYear:function(T,e,a){var n=this.newDate(T,e,a);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(T){return this.leapYear(T)?355:354},daysInMonth:function(T,e){var a=this._validate(T,e,this.minDay,w.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===12&&this.leapYear(a.year())?1:0)},weekDay:function(T,e,a){return this.dayOfWeek(T,e,a)!==5},toJD:function(T,e,a){var n=this._validate(T,e,a,w.local.invalidDate);return T=n.year(),e=n.month(),a=n.day(),T=T<=0?T+1:T,a+Math.ceil(29.5*(e-1))+(T-1)*354+Math.floor((3+11*T)/30)+this.jdEpoch-1},fromJD:function(T){T=Math.floor(T)+.5;var e=Math.floor((30*(T-this.jdEpoch)+10646)/10631);e=e<=0?e-1:e;var a=Math.min(12,Math.ceil((T-29-this.toJD(e,1,1))/29.5)+1),n=T-this.toJD(e,a,1)+1;return this.newDate(e,a,n)}}),w.calendars.islamic=M},{"../main":346,"object-assign":247}],338:[function(d,ne,ae){var w=d("../main"),v=d("object-assign");function M(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}M.prototype=new w.baseCalendar,v(M.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(a){var e=this._validate(a,this.minMonth,this.minDay,w.local.invalidYear),a=e.year()<0?e.year()+1:e.year();return a%4===0},weekOfYear:function(T,e,a){var n=this.newDate(T,e,a);return n.add(4-(n.dayOfWeek()||7),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInMonth:function(T,e){var a=this._validate(T,e,this.minDay,w.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===2&&this.leapYear(a.year())?1:0)},weekDay:function(T,e,a){return(this.dayOfWeek(T,e,a)||7)<6},toJD:function(T,e,a){var n=this._validate(T,e,a,w.local.invalidDate);return T=n.year(),e=n.month(),a=n.day(),T<0&&T++,e<=2&&(T--,e+=12),Math.floor(365.25*(T+4716))+Math.floor(30.6001*(e+1))+a-1524.5},fromJD:function(T){var e=Math.floor(T+.5),a=e+1524,n=Math.floor((a-122.1)/365.25),r=Math.floor(365.25*n),t=Math.floor((a-r)/30.6001),f=t-Math.floor(t<14?1:13),o=n-Math.floor(f>2?4716:4715),i=a-r-Math.floor(30.6001*t);return o<=0&&o--,this.newDate(o,f,i)}}),w.calendars.julian=M},{"../main":346,"object-assign":247}],339:[function(d,ne,ae){var w=d("../main"),v=d("object-assign");function M(a){this.local=this.regionalOptions[a||""]||this.regionalOptions[""]}M.prototype=new w.baseCalendar,v(M.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(a){return this._validate(a,this.minMonth,this.minDay,w.local.invalidYear),!1},formatYear:function(a){var n=this._validate(a,this.minMonth,this.minDay,w.local.invalidYear);a=n.year();var r=Math.floor(a/400);a=a%400,a+=a<0?400:0;var t=Math.floor(a/20);return r+"."+t+"."+a%20},forYear:function(a){if(a=a.split("."),a.length<3)throw"Invalid Mayan year";for(var n=0,r=0;r<a.length;r++){var t=parseInt(a[r],10);if(Math.abs(t)>19||r>0&&t<0)throw"Invalid Mayan year";n=n*20+t}return n},monthsInYear:function(a){return this._validate(a,this.minMonth,this.minDay,w.local.invalidYear),18},weekOfYear:function(a,n,r){return this._validate(a,n,r,w.local.invalidDate),0},daysInYear:function(a){return this._validate(a,this.minMonth,this.minDay,w.local.invalidYear),360},daysInMonth:function(a,n){return this._validate(a,n,this.minDay,w.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(a,n,r){var t=this._validate(a,n,r,w.local.invalidDate);return t.day()},weekDay:function(a,n,r){return this._validate(a,n,r,w.local.invalidDate),!0},extraInfo:function(a,n,r){var t=this._validate(a,n,r,w.local.invalidDate),f=t.toJD(),o=this._toHaab(f),i=this._toTzolkin(f);return{haabMonthName:this.local.haabMonths[o[0]-1],haabMonth:o[0],haabDay:o[1],tzolkinDayName:this.local.tzolkinMonths[i[0]-1],tzolkinDay:i[0],tzolkinTrecena:i[1]}},_toHaab:function(a){a-=this.jdEpoch;var n=T(a+8+(18-1)*20,365);return[Math.floor(n/20)+1,T(n,20)]},_toTzolkin:function(a){return a-=this.jdEpoch,[e(a+20,20),e(a+4,13)]},toJD:function(a,n,r){var t=this._validate(a,n,r,w.local.invalidDate);return t.day()+t.month()*20+t.year()*360+this.jdEpoch},fromJD:function(a){a=Math.floor(a)+.5-this.jdEpoch;var n=Math.floor(a/360);a=a%360,a+=a<0?360:0;var r=Math.floor(a/20),t=a%20;return this.newDate(n,r,t)}});function T(a,n){return a-n*Math.floor(a/n)}function e(a,n){return T(a-1,n)+1}w.calendars.mayan=M},{"../main":346,"object-assign":247}],340:[function(d,ne,ae){var w=d("../main"),v=d("object-assign");function M(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}M.prototype=new w.baseCalendar;var T=w.instance("gregorian");v(M.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,w.local.invalidYear||w.regionalOptions[""].invalidYear);return T.leapYear(a.year()+(a.year()<1?1:0)+1469)},weekOfYear:function(e,a,n){var r=this.newDate(e,a,n);return r.add(1-(r.dayOfWeek()||7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(e,a){var n=this._validate(e,a,this.minDay,w.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(n.month()===12&&this.leapYear(n.year())?1:0)},weekDay:function(e,a,n){return(this.dayOfWeek(e,a,n)||7)<6},toJD:function(t,a,n){var r=this._validate(t,a,n,w.local.invalidMonth),t=r.year();t<0&&t++;for(var f=r.day(),o=1;o<r.month();o++)f+=this.daysPerMonth[o-1];return f+T.toJD(t+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var a=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(a+1,1,1);)a++;for(var n=e-Math.floor(this.toJD(a,1,1)+.5)+1,r=1;n>this.daysInMonth(a,r);)n-=this.daysInMonth(a,r),r++;return this.newDate(a,r,n)}}),w.calendars.nanakshahi=M},{"../main":346,"object-assign":247}],341:[function(d,ne,ae){var w=d("../main"),v=d("object-assign");function M(T){this.local=this.regionalOptions[T||""]||this.regionalOptions[""]}M.prototype=new w.baseCalendar,v(M.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(T){return this.daysInYear(T)!==this.daysPerYear},weekOfYear:function(T,e,a){var n=this.newDate(T,e,a);return n.add(-n.dayOfWeek(),"d"),Math.floor((n.dayOfYear()-1)/7)+1},daysInYear:function(T){var e=this._validate(T,this.minMonth,this.minDay,w.local.invalidYear);if(T=e.year(),typeof this.NEPALI_CALENDAR_DATA[T]>"u")return this.daysPerYear;for(var a=0,n=this.minMonth;n<=12;n++)a+=this.NEPALI_CALENDAR_DATA[T][n];return a},daysInMonth:function(T,e){return T.year&&(e=T.month(),T=T.year()),this._validate(T,e,this.minDay,w.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[T]>"u"?this.daysPerMonth[e-1]:this.NEPALI_CALENDAR_DATA[T][e]},weekDay:function(T,e,a){return this.dayOfWeek(T,e,a)!==6},toJD:function(T,e,a){var n=this._validate(T,e,a,w.local.invalidDate);T=n.year(),e=n.month(),a=n.day();var r=w.instance(),t=0,f=e,o=T;this._createMissingCalendarData(T);var i=T-(f>9||f===9&&a>=this.NEPALI_CALENDAR_DATA[o][0]?56:57);for(e!==9&&(t=a,f--);f!==9;)f<=0&&(f=12,o--),t+=this.NEPALI_CALENDAR_DATA[o][f],f--;return e===9?(t+=a-this.NEPALI_CALENDAR_DATA[o][0],t<0&&(t+=r.daysInYear(i))):t+=this.NEPALI_CALENDAR_DATA[o][9]-this.NEPALI_CALENDAR_DATA[o][0],r.newDate(i,1,1).add(t,"d").toJD()},fromJD:function(T){var e=w.instance(),a=e.fromJD(T),n=a.year(),r=a.dayOfYear(),t=n+56;this._createMissingCalendarData(t);for(var f=9,o=this.NEPALI_CALENDAR_DATA[t][0],i=this.NEPALI_CALENDAR_DATA[t][f]-o+1;r>i;)f++,f>12&&(f=1,t++),i+=this.NEPALI_CALENDAR_DATA[t][f];var g=this.NEPALI_CALENDAR_DATA[t][f]-(i-r);return this.newDate(t,f,g)},_createMissingCalendarData:function(T){var e=this.daysPerMonth.slice(0);e.unshift(17);for(var a=T-1;a<T+2;a++)typeof this.NEPALI_CALENDAR_DATA[a]>"u"&&(this.NEPALI_CALENDAR_DATA[a]=e)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),w.calendars.nepali=M},{"../main":346,"object-assign":247}],342:[function(d,ne,ae){var w=d("../main"),v=d("object-assign");function M(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}M.prototype=new w.baseCalendar,v(M.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xE6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xE6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,w.local.invalidYear);return((a.year()-(a.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(e,a,n){var r=this.newDate(e,a,n);return r.add(-((r.dayOfWeek()+1)%7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(e,a){var n=this._validate(e,a,this.minDay,w.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(n.month()===12&&this.leapYear(n.year())?1:0)},weekDay:function(e,a,n){return this.dayOfWeek(e,a,n)!==5},toJD:function(e,a,n){var r=this._validate(e,a,n,w.local.invalidDate);e=r.year(),a=r.month(),n=r.day();var t=e-(e>=0?474:473),f=474+T(t,2820);return n+(a<=7?(a-1)*31:(a-1)*30+6)+Math.floor((f*682-110)/2816)+(f-1)*365+Math.floor(t/2820)*1029983+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var a=e-this.toJD(475,1,1),n=Math.floor(a/1029983),r=T(a,1029983),t=2820;if(r!==1029982){var f=Math.floor(r/366),o=T(r,366);t=Math.floor((2134*f+2816*o+2815)/1028522)+f+1}var i=t+2820*n+474;i=i<=0?i-1:i;var g=e-this.toJD(i,1,1)+1,p=g<=186?Math.ceil(g/31):Math.ceil((g-6)/30),y=e-this.toJD(i,p,1)+1;return this.newDate(i,p,y)}});function T(e,a){return e-a*Math.floor(e/a)}w.calendars.persian=M,w.calendars.jalali=M},{"../main":346,"object-assign":247}],343:[function(d,ne,ae){var w=d("../main"),v=d("object-assign"),M=w.instance();function T(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}T.prototype=new w.baseCalendar,v(T.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(n){var a=this._validate(n,this.minMonth,this.minDay,w.local.invalidYear),n=this._t2gYear(a.year());return M.leapYear(n)},weekOfYear:function(t,a,n){var r=this._validate(t,this.minMonth,this.minDay,w.local.invalidYear),t=this._t2gYear(r.year());return M.weekOfYear(t,r.month(),r.day())},daysInMonth:function(e,a){var n=this._validate(e,a,this.minDay,w.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(n.month()===2&&this.leapYear(n.year())?1:0)},weekDay:function(e,a,n){return(this.dayOfWeek(e,a,n)||7)<6},toJD:function(t,a,n){var r=this._validate(t,a,n,w.local.invalidDate),t=this._t2gYear(r.year());return M.toJD(t,r.month(),r.day())},fromJD:function(e){var a=M.fromJD(e),n=this._g2tYear(a.year());return this.newDate(n,a.month(),a.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}}),w.calendars.taiwan=T},{"../main":346,"object-assign":247}],344:[function(d,ne,ae){var w=d("../main"),v=d("object-assign"),M=w.instance();function T(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}T.prototype=new w.baseCalendar,v(T.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(n){var a=this._validate(n,this.minMonth,this.minDay,w.local.invalidYear),n=this._t2gYear(a.year());return M.leapYear(n)},weekOfYear:function(t,a,n){var r=this._validate(t,this.minMonth,this.minDay,w.local.invalidYear),t=this._t2gYear(r.year());return M.weekOfYear(t,r.month(),r.day())},daysInMonth:function(e,a){var n=this._validate(e,a,this.minDay,w.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(n.month()===2&&this.leapYear(n.year())?1:0)},weekDay:function(e,a,n){return(this.dayOfWeek(e,a,n)||7)<6},toJD:function(t,a,n){var r=this._validate(t,a,n,w.local.invalidDate),t=this._t2gYear(r.year());return M.toJD(t,r.month(),r.day())},fromJD:function(e){var a=M.fromJD(e),n=this._g2tYear(a.year());return this.newDate(n,a.month(),a.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}}),w.calendars.thai=T},{"../main":346,"object-assign":247}],345:[function(d,ne,ae){var w=d("../main"),v=d("object-assign");function M(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}M.prototype=new w.baseCalendar,v(M.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012Bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){var a=this._validate(e,this.minMonth,this.minDay,w.local.invalidYear);return this.daysInYear(a.year())===355},weekOfYear:function(e,a,n){var r=this.newDate(e,a,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var a=0,n=1;n<=12;n++)a+=this.daysInMonth(e,n);return a},daysInMonth:function(e,a){for(var n=this._validate(e,a,this.minDay,w.local.invalidMonth),r=n.toJD()-24e5+.5,t=0,f=0;f<T.length;f++){if(T[f]>r)return T[t]-T[t-1];t++}return 30},weekDay:function(e,a,n){return this.dayOfWeek(e,a,n)!==5},toJD:function(e,a,n){var r=this._validate(e,a,n,w.local.invalidDate),t=12*(r.year()-1)+r.month()-15292,f=r.day()+T[t-1]-1;return f+24e5-.5},fromJD:function(e){for(var a=e-24e5+.5,n=0,r=0;r<T.length&&!(T[r]>a);r++)n++;var t=n+15292,f=Math.floor((t-1)/12),o=f+1,i=t-12*f,g=a-T[n-1]+1;return this.newDate(o,i,g)},isValid:function(e,a,n){var r=w.baseCalendar.prototype.isValid.apply(this,arguments);return r&&(e=e.year!=null?e.year:e,r=e>=1276&&e<=1500),r},_validate:function(e,a,n,r){var t=w.baseCalendar.prototype._validate.apply(this,arguments);if(t.year<1276||t.year>1500)throw r.replace(/\{0\}/,this.local.name);return t}}),w.calendars.ummalqura=M;var T=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":346,"object-assign":247}],346:[function(d,ne,ae){var w=d("object-assign");function v(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}w(v.prototype,{instance:function(r,t){r=(r||"gregorian").toLowerCase(),t=t||"";var f=this._localCals[r+"-"+t];if(!f&&this.calendars[r]&&(f=new this.calendars[r](t),this._localCals[r+"-"+t]=f),!f)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,r);return f},newDate:function(r,t,f,o,i){return o=(r!=null&&r.year?r.calendar():typeof o=="string"?this.instance(o,i):o)||this.instance(),o.newDate(r,t,f)},substituteDigits:function(r){return function(t){return(t+"").replace(/[0-9]/g,function(f){return r[f]})}},substituteChineseDigits:function(r,t){return function(f){for(var o="",i=0;f>0;){var g=f%10;o=(g===0?"":r[g]+t[i])+o,i++,f=Math.floor(f/10)}return o.indexOf(r[1]+t[1])===0&&(o=o.substr(1)),o||r[0]}}});function M(r,t,f,o){if(this._calendar=r,this._year=t,this._month=f,this._day=o,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(n.local.invalidDate||n.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function T(r,t){return r=""+r,"000000".substring(0,t-r.length)+r}w(M.prototype,{newDate:function(r,t,f){return this._calendar.newDate(r??this,t,f)},year:function(r){return arguments.length===0?this._year:this.set(r,"y")},month:function(r){return arguments.length===0?this._month:this.set(r,"m")},day:function(r){return arguments.length===0?this._day:this.set(r,"d")},date:function(r,t,f){if(!this._calendar.isValid(r,t,f))throw(n.local.invalidDate||n.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=r,this._month=t,this._day=f,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(r,t){return this._calendar.add(this,r,t)},set:function(r,t){return this._calendar.set(this,r,t)},compareTo:function(r){if(this._calendar.name!==r._calendar.name)throw(n.local.differentCalendars||n.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,r._calendar.local.name);var t=this._year!==r._year?this._year-r._year:this._month!==r._month?this.monthOfYear()-r.monthOfYear():this._day-r._day;return t===0?0:t<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(r){return this._calendar.fromJD(r)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(r){return this._calendar.fromJSDate(r)},toString:function(){return(this.year()<0?"-":"")+T(Math.abs(this.year()),4)+"-"+T(this.month(),2)+"-"+T(this.day(),2)}});function e(){this.shortYearCutoff="+10"}w(e.prototype,{_validateLevel:0,newDate:function(r,t,f){return r==null?this.today():(r.year&&(this._validate(r,t,f,n.local.invalidDate||n.regionalOptions[""].invalidDate),f=r.day(),t=r.month(),r=r.year()),new M(this,r,t,f))},today:function(){return this.fromJSDate(new Date)},epoch:function(r){var t=this._validate(r,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return t.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return(t.year()<0?"-":"")+T(Math.abs(t.year()),4)},monthsInYear:function(r){return this._validate(r,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear),12},monthOfYear:function(r,t){var f=this._validate(r,t,this.minDay,n.local.invalidMonth||n.regionalOptions[""].invalidMonth);return(f.month()+this.monthsInYear(f)-this.firstMonth)%this.monthsInYear(f)+this.minMonth},fromMonthOfYear:function(r,t){var f=(t+this.firstMonth-2*this.minMonth)%this.monthsInYear(r)+this.minMonth;return this._validate(r,f,this.minDay,n.local.invalidMonth||n.regionalOptions[""].invalidMonth),f},daysInYear:function(r){var t=this._validate(r,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear);return this.leapYear(t)?366:365},dayOfYear:function(r,t,f){var o=this._validate(r,t,f,n.local.invalidDate||n.regionalOptions[""].invalidDate);return o.toJD()-this.newDate(o.year(),this.fromMonthOfYear(o.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(r,t,f){var o=this._validate(r,t,f,n.local.invalidDate||n.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(o))+2)%this.daysInWeek()},extraInfo:function(r,t,f){return this._validate(r,t,f,n.local.invalidDate||n.regionalOptions[""].invalidDate),{}},add:function(r,t,f){return this._validate(r,this.minMonth,this.minDay,n.local.invalidDate||n.regionalOptions[""].invalidDate),this._correctAdd(r,this._add(r,t,f),t,f)},_add:function(r,t,f){if(this._validateLevel++,f==="d"||f==="w"){var o=r.toJD()+t*(f==="w"?this.daysInWeek():1),i=r.calendar().fromJD(o);return this._validateLevel--,[i.year(),i.month(),i.day()]}try{var g=r.year()+(f==="y"?t:0),p=r.monthOfYear()+(f==="m"?t:0),i=r.day(),y=function(l){for(;p<l.minMonth;)g--,p+=l.monthsInYear(g);for(var _=l.monthsInYear(g);p>_-1+l.minMonth;)g++,p-=_,_=l.monthsInYear(g)};f==="y"?(r.month()!==this.fromMonthOfYear(g,p)&&(p=this.newDate(g,r.month(),this.minDay).monthOfYear()),p=Math.min(p,this.monthsInYear(g)),i=Math.min(i,this.daysInMonth(g,this.fromMonthOfYear(g,p)))):f==="m"&&(y(this),i=Math.min(i,this.daysInMonth(g,this.fromMonthOfYear(g,p))));var c=[g,this.fromMonthOfYear(g,p),i];return this._validateLevel--,c}catch(b){throw this._validateLevel--,b}},_correctAdd:function(r,t,f,o){if(!this.hasYearZero&&(o==="y"||o==="m")&&(t[0]===0||r.year()>0!=t[0]>0)){var i={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[o],g=f<0?-1:1;t=this._add(r,f*i[0]+g*i[1],i[2])}return r.date(t[0],t[1],t[2])},set:function(r,t,f){this._validate(r,this.minMonth,this.minDay,n.local.invalidDate||n.regionalOptions[""].invalidDate);var o=f==="y"?t:r.year(),i=f==="m"?t:r.month(),g=f==="d"?t:r.day();return(f==="y"||f==="m")&&(g=Math.min(g,this.daysInMonth(o,i))),r.date(o,i,g)},isValid:function(r,t,f){this._validateLevel++;var o=this.hasYearZero||r!==0;if(o){var i=this.newDate(r,t,this.minDay);o=t>=this.minMonth&&t-this.minMonth<this.monthsInYear(i)&&f>=this.minDay&&f-this.minDay<this.daysInMonth(i)}return this._validateLevel--,o},toJSDate:function(r,t,f){var o=this._validate(r,t,f,n.local.invalidDate||n.regionalOptions[""].invalidDate);return n.instance().fromJD(this.toJD(o)).toJSDate()},fromJSDate:function(r){return this.fromJD(n.instance().fromJSDate(r).toJD())},_validate:function(r,t,f,o){if(r.year){if(this._validateLevel===0&&this.name!==r.calendar().name)throw(n.local.differentCalendars||n.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,r.calendar().local.name);return r}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(r,t,f))throw o.replace(/\{0\}/,this.local.name);var i=this.newDate(r,t,f);return this._validateLevel--,i}catch(g){throw this._validateLevel--,g}}});function a(r){this.local=this.regionalOptions[r]||this.regionalOptions[""]}a.prototype=new e,w(a.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(f){var t=this._validate(f,this.minMonth,this.minDay,n.local.invalidYear||n.regionalOptions[""].invalidYear),f=t.year()+(t.year()<0?1:0);return f%4===0&&(f%100!==0||f%400===0)},weekOfYear:function(r,t,f){var o=this.newDate(r,t,f);return o.add(4-(o.dayOfWeek()||7),"d"),Math.floor((o.dayOfYear()-1)/7)+1},daysInMonth:function(r,t){var f=this._validate(r,t,this.minDay,n.local.invalidMonth||n.regionalOptions[""].invalidMonth);return this.daysPerMonth[f.month()-1]+(f.month()===2&&this.leapYear(f.year())?1:0)},weekDay:function(r,t,f){return(this.dayOfWeek(r,t,f)||7)<6},toJD:function(r,t,f){var o=this._validate(r,t,f,n.local.invalidDate||n.regionalOptions[""].invalidDate);r=o.year(),t=o.month(),f=o.day(),r<0&&r++,t<3&&(t+=12,r--);var i=Math.floor(r/100),g=2-i+Math.floor(i/4);return Math.floor(365.25*(r+4716))+Math.floor(30.6001*(t+1))+f+g-1524.5},fromJD:function(r){var t=Math.floor(r+.5),f=Math.floor((t-186721625e-2)/36524.25);f=t+1+f-Math.floor(f/4);var o=f+1524,i=Math.floor((o-122.1)/365.25),g=Math.floor(365.25*i),p=Math.floor((o-g)/30.6001),y=o-g-Math.floor(p*30.6001),c=p-(p>13.5?13:1),b=i-(c>2.5?4716:4715);return b<=0&&b--,this.newDate(b,c,y)},toJSDate:function(r,t,f){var o=this._validate(r,t,f,n.local.invalidDate||n.regionalOptions[""].invalidDate),i=new Date(o.year(),o.month()-1,o.day());return i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),i.setHours(i.getHours()>12?i.getHours()+2:0),i},fromJSDate:function(r){return this.newDate(r.getFullYear(),r.getMonth()+1,r.getDate())}});var n=ne.exports=new v;n.cdate=M,n.baseCalendar=e,n.calendars.gregorian=a},{"object-assign":247}],347:[function(d,ne,ae){var w=d("object-assign"),v=d("./main");w(v.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),v.local=v.regionalOptions[""],w(v.cdate.prototype,{formatDate:function(M,T){return typeof M!="string"&&(T=M,M=""),this._calendar.formatDate(M||"",this,T)}}),w(v.baseCalendar.prototype,{UNIX_EPOCH:v.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:24*60*60,TICKS_EPOCH:v.instance().jdEpoch,TICKS_PER_DAY:24*60*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(M,T,e){if(typeof M!="string"&&(e=T,T=M,M=""),!T)return"";if(T.calendar()!==this)throw v.local.invalidFormat||v.regionalOptions[""].invalidFormat;M=M||this.local.dateFormat,e=e||{};var a=e.dayNamesShort||this.local.dayNamesShort,n=e.dayNames||this.local.dayNames,r=e.monthNumbers||this.local.monthNumbers,t=e.monthNamesShort||this.local.monthNamesShort,f=e.monthNames||this.local.monthNames;e.calculateWeek||this.local.calculateWeek;for(var o=function(m,h){for(var x=1;A+x<M.length&&M.charAt(A+x)===m;)x++;return A+=x-1,Math.floor(x/(h||1))>1},i=function(m,h,x,u){var L=""+h;if(o(m,u))for(;L.length<x;)L="0"+L;return L},g=function(m,h,x,u){return o(m)?u[h]:x[h]},p=this,y=function(m){return typeof r=="function"?r.call(p,m,o("m")):l(i("m",m.month(),2))},c=function(m,h){return h?typeof f=="function"?f.call(p,m):f[m.month()-p.minMonth]:typeof t=="function"?t.call(p,m):t[m.month()-p.minMonth]},b=this.local.digits,l=function(m){return e.localNumbers&&b?b(m):m},_="",s=!1,A=0;A<M.length;A++)if(s)M.charAt(A)==="'"&&!o("'")?s=!1:_+=M.charAt(A);else switch(M.charAt(A)){case"d":_+=l(i("d",T.day(),2));break;case"D":_+=g("D",T.dayOfWeek(),a,n);break;case"o":_+=i("o",T.dayOfYear(),3);break;case"w":_+=i("w",T.weekOfYear(),2);break;case"m":_+=y(T);break;case"M":_+=c(T,o("M"));break;case"y":_+=o("y",2)?T.year():(T.year()%100<10?"0":"")+T.year()%100;break;case"Y":o("Y",2),_+=T.formatYear();break;case"J":_+=T.toJD();break;case"@":_+=(T.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":_+=(T.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":o("'")?_+="'":s=!0;break;default:_+=M.charAt(A)}return _},parseDate:function(M,T,e){if(T==null)throw v.local.invalidArguments||v.regionalOptions[""].invalidArguments;if(T=typeof T=="object"?T.toString():T+"",T==="")return null;M=M||this.local.dateFormat,e=e||{};var a=e.shortYearCutoff||this.shortYearCutoff;a=typeof a!="string"?a:this.today().year()%100+parseInt(a,10);for(var n=e.dayNamesShort||this.local.dayNamesShort,r=e.dayNames||this.local.dayNames,t=e.parseMonth||this.local.parseMonth,f=e.monthNumbers||this.local.monthNumbers,o=e.monthNamesShort||this.local.monthNamesShort,i=e.monthNames||this.local.monthNames,g=-1,p=-1,y=-1,c=-1,b=-1,l=!1,_=!1,s=function(I,D){for(var R=1;k+R<M.length&&M.charAt(k+R)===I;)R++;return k+=R-1,Math.floor(R/(D||1))>1},A=function(I,D){var R=s(I,D),O=[2,3,R?4:2,R?4:2,10,11,20]["oyYJ@!".indexOf(I)+1],F=new RegExp("^-?\\d{1,"+O+"}"),V=T.substring(S).match(F);if(!V)throw(v.local.missingNumberAt||v.regionalOptions[""].missingNumberAt).replace(/\{0\}/,S);return S+=V[0].length,parseInt(V[0],10)},m=this,h=function(){if(typeof f=="function"){s("m");var I=f.call(m,T.substring(S));return S+=I.length,I}return A("m")},x=function(I,D,R,O){for(var F=s(I,O)?R:D,V=0;V<F.length;V++)if(T.substr(S,F[V].length).toLowerCase()===F[V].toLowerCase())return S+=F[V].length,V+m.minMonth;throw(v.local.unknownNameAt||v.regionalOptions[""].unknownNameAt).replace(/\{0\}/,S)},u=function(){if(typeof i=="function"){var I=s("M")?i.call(m,T.substring(S)):o.call(m,T.substring(S));return S+=I.length,I}return x("M",o,i)},L=function(){if(T.charAt(S)!==M.charAt(k))throw(v.local.unexpectedLiteralAt||v.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,S);S++},S=0,k=0;k<M.length;k++)if(_)M.charAt(k)==="'"&&!s("'")?_=!1:L();else switch(M.charAt(k)){case"d":c=A("d");break;case"D":x("D",n,r);break;case"o":b=A("o");break;case"w":A("w");break;case"m":y=h();break;case"M":y=u();break;case"y":var P=k;l=!s("y",2),k=P,p=A("y",2);break;case"Y":p=A("Y",2);break;case"J":g=A("J")+.5,T.charAt(S)==="."&&(S++,A("J"));break;case"@":g=A("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":g=A("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":S=T.length;break;case"'":s("'")?L():_=!0;break;default:L()}if(S<T.length)throw v.local.unexpectedText||v.regionalOptions[""].unexpectedText;if(p===-1?p=this.today().year():p<100&&l&&(p+=a===-1?1900:this.today().year()-this.today().year()%100-(p<=a?0:100)),typeof y=="string"&&(y=t.call(this,p,y)),b>-1){y=1,c=b;for(var z=this.daysInMonth(p,y);c>z;z=this.daysInMonth(p,y))y++,c-=z}return g>-1?this.fromJD(g):this.newDate(p,y,c)},determineDate:function(M,T,e,a,n){e&&typeof e!="object"&&(n=a,a=e,e=null),typeof a!="string"&&(n=a,a="");var r=this,t=function(f){try{return r.parseDate(a,f,n)}catch{}f=f.toLowerCase();for(var o=(f.match(/^c/)&&e?e.newDate():null)||r.today(),i=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,g=i.exec(f);g;)o.add(parseInt(g[1],10),g[2]||"d"),g=i.exec(f);return o};return T=T?T.newDate():null,M=M==null?T:typeof M=="string"?t(M):typeof M=="number"?isNaN(M)||M===1/0||M===-1/0?T:r.today().add(M,"d"):r.newDate(M),M}})},{"./main":346,"object-assign":247}],348:[function(d,ne,ae){ne.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],349:[function(d,ne,ae){var w=d("./arrow_paths"),v=d("../../plots/font_attributes"),M=d("../../plots/cartesian/constants"),T=d("../../plot_api/plot_template").templatedArray;d("../../constants/axis_placeable_objects"),ne.exports=T("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:v({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:w.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:w.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",M.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",M.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",M.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",M.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:v({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":472,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561,"../../plots/font_attributes":585,"./arrow_paths":348}],350:[function(d,ne,ae){var w=d("../../lib"),v=d("../../plots/cartesian/axes"),M=d("./draw").draw;ne.exports=function(n){var r=n._fullLayout,t=w.filterVisible(r.annotations);if(t.length&&n._fullData.length)return w.syncOrAsync([M,T],n)};function T(a){var n=a._fullLayout;w.filterVisible(n.annotations).forEach(function(r){var t=v.getFromId(a,r.xref),f=v.getFromId(a,r.yref),o=v.getRefType(r.xref),i=v.getRefType(r.yref);r._extremes={},o==="range"&&e(r,t),i==="range"&&e(r,f)})}function e(a,n){var r=n._id,t=r.charAt(0),f=a[t],o=a["a"+t],i=a[t+"ref"],g=a["a"+t+"ref"],p=a["_"+t+"padplus"],y=a["_"+t+"padminus"],c={x:1,y:-1}[t]*a[t+"shift"],b=3*a.arrowsize*a.arrowwidth||0,l=b+c,_=b-c,s=3*a.startarrowsize*a.arrowwidth||0,A=s+c,m=s-c,h;if(g===i){var x=v.findExtremes(n,[n.r2c(f)],{ppadplus:l,ppadminus:_}),u=v.findExtremes(n,[n.r2c(o)],{ppadplus:Math.max(p,A),ppadminus:Math.max(y,m)});h={min:[x.min[0],u.min[0]],max:[x.max[0],u.max[0]]}}else A=o?A+o:A,m=o?m-o:m,h=v.findExtremes(n,[n.r2c(f)],{ppadplus:Math.max(p,l,A),ppadminus:Math.max(y,_,m)});a._extremes[r]=h}},{"../../lib":503,"../../plots/cartesian/axes":554,"./draw":355}],351:[function(d,ne,ae){var w=d("../../lib"),v=d("../../registry"),M=d("../../plot_api/plot_template").arrayEditor;ne.exports={hasClickToShow:T,onClick:e};function T(r,t){var f=a(r,t);return f.on.length>0||f.explicitOff.length>0}function e(r,t){var f=a(r,t),o=f.on,i=f.off.concat(f.explicitOff),g={},p=r._fullLayout.annotations,y,c;if(!!(o.length||i.length)){for(y=0;y<o.length;y++)c=M(r.layout,"annotations",p[o[y]]),c.modifyItem("visible",!0),w.extendFlat(g,c.getUpdateObj());for(y=0;y<i.length;y++)c=M(r.layout,"annotations",p[i[y]]),c.modifyItem("visible",!1),w.extendFlat(g,c.getUpdateObj());return v.call("update",r,{},g)}}function a(r,t){var f=r._fullLayout.annotations,o=[],i=[],g=[],p=(t||[]).length,y,c,b,l,_,s,A,m;for(y=0;y<f.length;y++)if(b=f[y],l=b.clicktoshow,l){for(c=0;c<p;c++)if(_=t[c],s=_.xaxis,A=_.yaxis,s._id===b.xref&&A._id===b.yref&&s.d2r(_.x)===n(b._xclick,s)&&A.d2r(_.y)===n(b._yclick,A)){b.visible?l==="onout"?m=i:m=g:m=o,m.push(y);break}c===p&&b.visible&&l==="onout"&&i.push(y)}return{on:o,off:i,explicitOff:g}}function n(r,t){return t.type==="log"?t.l2r(r):t.d2r(r)}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638}],352:[function(d,ne,ae){var w=d("../../lib"),v=d("../color");ne.exports=function(T,e,a,n){n("opacity");var r=n("bgcolor"),t=n("bordercolor"),f=v.opacity(t);n("borderpad");var o=n("borderwidth"),i=n("showarrow");n("text",i?" ":a._dfltTitle.annotation),n("textangle"),w.coerceFont(n,"font",a.font),n("width"),n("align");var g=n("height");if(g&&n("valign"),i){var p=n("arrowside"),y,c;p.indexOf("end")!==-1&&(y=n("arrowhead"),c=n("arrowsize")),p.indexOf("start")!==-1&&(n("startarrowhead",y),n("startarrowsize",c)),n("arrowcolor",f?e.bordercolor:v.defaultLine),n("arrowwidth",(f&&o||1)*2),n("standoff"),n("startstandoff")}var b=n("hovertext"),l=a.hoverlabel||{};if(b){var _=n("hoverlabel.bgcolor",l.bgcolor||(v.opacity(r)?v.rgb(r):v.defaultLine)),s=n("hoverlabel.bordercolor",l.bordercolor||v.contrast(_));w.coerceFont(n,"hoverlabel.font",{family:l.font.family,size:l.font.size,color:l.font.color||s})}n("captureevents",!!b)}},{"../../lib":503,"../color":366}],353:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("../../lib/to_log_range");ne.exports=function(T,e,a,n){e=e||{};var r=a==="log"&&e.type==="linear",t=a==="linear"&&e.type==="log";if(!(r||t))return;var f=T._fullLayout.annotations,o=e._id.charAt(0),i,g;function p(c){var b=i[c],l=null;r?l=v(b,e.range):l=Math.pow(10,b),w(l)||(l=null),n(g+c,l)}for(var y=0;y<f.length;y++)i=f[y],g="annotations["+y+"].",i[o+"ref"]===e._id&&p(o),i["a"+o+"ref"]===e._id&&p("a"+o)}},{"../../lib/to_log_range":531,"fast-isnumeric":190}],354:[function(d,ne,ae){var w=d("../../lib"),v=d("../../plots/cartesian/axes"),M=d("../../plots/array_container_defaults"),T=d("./common_defaults"),e=d("./attributes");ne.exports=function(r,t){M(r,t,{name:"annotations",handleItemDefaults:a})};function a(n,r,t){function f(L,S){return w.coerce(n,r,e,L,S)}var o=f("visible"),i=f("clicktoshow");if(!!(o||i)){T(n,r,t,f);for(var g=r.showarrow,p=["x","y"],y=[-10,-30],c={_fullLayout:t},b=0;b<2;b++){var l=p[b],_=v.coerceRef(n,r,c,l,"","paper");if(_!=="paper"){var s=v.getFromId(c,_);s._annIndices.push(r._index)}if(v.coercePosition(r,c,f,_,l,.5),g){var A="a"+l,m=v.coerceRef(n,r,c,A,"pixel",["pixel","paper"]);m!=="pixel"&&m!==_&&(m=r[A]="pixel");var h=m==="pixel"?y[b]:.4;v.coercePosition(r,c,f,m,A,h)}f(l+"anchor"),f(l+"shift")}if(w.noneOrAll(n,r,["x","y"]),g&&w.noneOrAll(n,r,["ax","ay"]),i){var x=f("xclick"),u=f("yclick");r._xclick=x===void 0?r.x:v.cleanPosition(x,c,r.xref),r._yclick=u===void 0?r.y:v.cleanPosition(u,c,r.yref)}}}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":349,"./common_defaults":352}],355:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../registry"),M=d("../../plots/plots"),T=d("../../lib"),e=T.strTranslate,a=d("../../plots/cartesian/axes"),n=d("../color"),r=d("../drawing"),t=d("../fx"),f=d("../../lib/svg_text_utils"),o=d("../../lib/setcursor"),i=d("../dragelement"),g=d("../../plot_api/plot_template").arrayEditor,p=d("./draw_arrow_head");ne.exports={draw:y,drawOne:c,drawRaw:l};function y(_){var s=_._fullLayout;s._infolayer.selectAll(".annotation").remove();for(var A=0;A<s.annotations.length;A++)s.annotations[A].visible&&c(_,A);return M.previousPromises(_)}function c(_,s){var A=_._fullLayout,m=A.annotations[s]||{},h=a.getFromId(_,m.xref),x=a.getFromId(_,m.yref);h&&h.setScale(),x&&x.setScale(),l(_,m,s,!1,h,x)}function b(_,s,A,m,h){var x=h[A],u=h[A+"ref"],L=A.indexOf("y")!==-1,S=a.getRefType(u)==="domain",k=L?m.h:m.w;return _?S?x+(L?-s:s)/_._length:_.p2r(_.r2p(x)+s):x+(L?-s:s)/k}function l(_,s,A,m,h,x){var u=_._fullLayout,L=_._fullLayout._size,S=_._context.edits,k,P;m?(k="annotation-"+m,P=m+".annotations"):(k="annotation",P="annotations");var z=g(_.layout,P,s),I=z.modifyBase,D=z.modifyItem,R=z.getUpdateObj;u._infolayer.selectAll("."+k+'[data-index="'+A+'"]').remove();var O="clip"+u._uid+"_ann"+A;if(!s._input||s.visible===!1){w.selectAll("#"+O).remove();return}var F={x:{},y:{}},V=+s.textangle||0,G=u._infolayer.append("g").classed(k,!0).attr("data-index",String(A)).style("opacity",s.opacity),J=G.append("g").classed("annotation-text-g",!0),Z=S[s.showarrow?"annotationTail":"annotationPosition"],Y=s.captureevents||S.annotationText||Z;function j(le){var ge={index:A,annotation:s._input,fullAnnotation:s,event:le};return m&&(ge.subplotId=m),ge}var re=J.append("g").style("pointer-events",Y?"all":null).call(o,"pointer").on("click",function(){_._dragging=!1,_.emit("plotly_clickannotation",j(w.event))});s.hovertext&&re.on("mouseover",function(){var le=s.hoverlabel,ge=le.font,fe=this.getBoundingClientRect(),pe=_.getBoundingClientRect();t.loneHover({x0:fe.left-pe.left,x1:fe.right-pe.left,y:(fe.top+fe.bottom)/2-pe.top,text:s.hovertext,color:le.bgcolor,borderColor:le.bordercolor,fontFamily:ge.family,fontSize:ge.size,fontColor:ge.color},{container:u._hoverlayer.node(),outerContainer:u._paper.node(),gd:_})}).on("mouseout",function(){t.loneUnhover(u._hoverlayer.node())});var se=s.borderwidth,oe=s.borderpad,N=se+oe,U=re.append("rect").attr("class","bg").style("stroke-width",se+"px").call(n.stroke,s.bordercolor).call(n.fill,s.bgcolor),q=s.width||s.height,Q=u._topclips.selectAll("#"+O).data(q?[0]:[]);Q.enter().append("clipPath").classed("annclip",!0).attr("id",O).append("rect"),Q.exit().remove();var W=s.font,X=u._meta?T.templateString(s.text,u._meta):s.text,ee=re.append("text").classed("annotation-text",!0).text(X);function te(le){return le.call(r.font,W).attr({"text-anchor":{left:"start",right:"end"}[s.align]||"middle"}),f.convertToTspans(le,_,ie),le}function ie(){var le=ee.selectAll("a");if(le.size()===1&&le.text()===ee.text()){var ge=re.insert("a",":first-child").attr({"xlink:xlink:href":le.attr("xlink:href"),"xlink:xlink:show":le.attr("xlink:show")}).style({cursor:"pointer"});ge.node().appendChild(U.node())}var fe=re.select(".annotation-text-math-group"),pe=!fe.empty(),ye=r.bBox((pe?fe:ee).node()),Te=ye.width,_e=ye.height,De=s.width||Te,Be=s.height||_e,Ue=Math.round(De+2*N),xe=Math.round(Be+2*N);function Pe(Ht,Kt){return Kt==="auto"&&(Ht<1/3?Kt="left":Ht>2/3?Kt="right":Kt="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[Kt]}for(var Ve=!1,Qe=["x","y"],Fe=0;Fe<Qe.length;Fe++){var Le=Qe[Fe],Ne=s[Le+"ref"]||Le,dt=s["a"+Le+"ref"],Dt={x:h,y:x}[Le],Xt=(V+(Le==="x"?0:-90))*Math.PI/180,At=Ue*Math.cos(Xt),zt=xe*Math.sin(Xt),Ut=Math.abs(At)+Math.abs(zt),Ct=s[Le+"anchor"],Mt=s[Le+"shift"]*(Le==="x"?1:-1),rt=F[Le],ct,Ze,ke,Ge,Je,ot=a.getRefType(Ne);if(Dt&&ot!=="domain"){var Pt=Dt.r2fraction(s[Le]);(Pt<0||Pt>1)&&(dt===Ne?(Pt=Dt.r2fraction(s["a"+Le]),(Pt<0||Pt>1)&&(Ve=!0)):Ve=!0),ct=Dt._offset+Dt.r2p(s[Le]),Ge=.5}else{var _t=ot==="domain";Le==="x"?(ke=s[Le],ct=_t?Dt._offset+Dt._length*ke:ct=L.l+L.w*ke):(ke=1-s[Le],ct=_t?Dt._offset+Dt._length*ke:ct=L.t+L.h*ke),Ge=s.showarrow?.5:ke}if(s.showarrow){rt.head=ct;var Bt=s["a"+Le];if(Je=At*Pe(.5,s.xanchor)-zt*Pe(.5,s.yanchor),dt===Ne){var qt=a.getRefType(dt);qt==="domain"?(Le==="y"&&(Bt=1-Bt),rt.tail=Dt._offset+Dt._length*Bt):qt==="paper"?Le==="y"?(Bt=1-Bt,rt.tail=L.t+L.h*Bt):rt.tail=L.l+L.w*Bt:rt.tail=Dt._offset+Dt.r2p(Bt),Ze=Je}else rt.tail=ct+Bt,Ze=Je+Bt;rt.text=rt.tail+Je;var Ot=u[Le==="x"?"width":"height"];if(Ne==="paper"&&(rt.head=T.constrain(rt.head,1,Ot-1)),dt==="pixel"){var $t=-Math.max(rt.tail-3,rt.text),rr=Math.min(rt.tail+3,rt.text)-Ot;$t>0?(rt.tail+=$t,rt.text+=$t):rr>0&&(rt.tail-=rr,rt.text-=rr)}rt.tail+=Mt,rt.head+=Mt}else Je=Ut*Pe(Ge,Ct),Ze=Je,rt.text=ct+Je;rt.text+=Mt,Je+=Mt,Ze+=Mt,s["_"+Le+"padplus"]=Ut/2+Ze,s["_"+Le+"padminus"]=Ut/2-Ze,s["_"+Le+"size"]=Ut,s["_"+Le+"shift"]=Je}if(Ve){re.remove();return}var er=0,pr=0;if(s.align!=="left"&&(er=(De-Te)*(s.align==="center"?.5:1)),s.valign!=="top"&&(pr=(Be-_e)*(s.valign==="middle"?.5:1)),pe)fe.select("svg").attr({x:N+er-1,y:N+pr}).call(r.setClipUrl,q?O:null,_);else{var Xr=N+pr-ye.top,hn=N+er-ye.left;ee.call(f.positionText,hn,Xr).call(r.setClipUrl,q?O:null,_)}Q.select("rect").call(r.setRect,N,N,De,Be),U.call(r.setRect,se/2,se/2,Ue-se,xe-se),re.call(r.setTranslate,Math.round(F.x.text-Ue/2),Math.round(F.y.text-xe/2)),J.attr({transform:"rotate("+V+","+F.x.text+","+F.y.text+")"});var Qr=function(Ht,Kt){G.selectAll(".annotation-arrow-g").remove();var Gt=F.x.head,br=F.y.head,tt=F.x.tail+Ht,je=F.y.tail+Kt,st=F.x.text+Ht,ft=F.y.text+Kt,Me=T.rotationXYMatrix(V,st,ft),Se=T.apply2DTransform(Me),Ke=T.apply2DTransform2(Me),Xe=+U.attr("width"),it=+U.attr("height"),pt=st-.5*Xe,vt=pt+Xe,St=ft-.5*it,kt=St+it,Nt=[[pt,St,pt,kt],[pt,kt,vt,kt],[vt,kt,vt,St],[vt,St,pt,St]].map(Ke);if(!Nt.reduce(function(et,Lt){return et^!!T.segmentsIntersect(Gt,br,Gt+1e6,br+1e6,Lt[0],Lt[1],Lt[2],Lt[3])},!1)){Nt.forEach(function(et){var Lt=T.segmentsIntersect(tt,je,Gt,br,et[0],et[1],et[2],et[3]);Lt&&(tt=Lt.x,je=Lt.y)});var nr=s.arrowwidth,fr=s.arrowcolor,Hr=s.arrowside,Er=G.append("g").style({opacity:n.opacity(fr)}).classed("annotation-arrow-g",!0),_r=Er.append("path").attr("d","M"+tt+","+je+"L"+Gt+","+br).style("stroke-width",nr+"px").call(n.stroke,n.rgb(fr));if(p(_r,Hr,s),S.annotationPosition&&_r.node().parentNode&&!m){var en=Gt,dr=br;if(s.standoff){var xr=Math.sqrt(Math.pow(Gt-tt,2)+Math.pow(br-je,2));en+=s.standoff*(tt-Gt)/xr,dr+=s.standoff*(je-br)/xr}var Ur=Er.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(tt-en)+","+(je-dr),transform:e(en,dr)}).style("stroke-width",nr+6+"px").call(n.stroke,"rgba(0,0,0,0)").call(n.fill,"rgba(0,0,0,0)"),Yr,Ar;i.init({element:Ur.node(),gd:_,prepFn:function(){var et=r.getTranslate(re);Yr=et.x,Ar=et.y,h&&h.autorange&&I(h._name+".autorange",!0),x&&x.autorange&&I(x._name+".autorange",!0)},moveFn:function(et,Lt){var Zt=Se(Yr,Ar),sr=Zt[0]+et,Ir=Zt[1]+Lt;re.call(r.setTranslate,sr,Ir),D("x",b(h,et,"x",L,s)),D("y",b(x,Lt,"y",L,s)),s.axref===s.xref&&D("ax",b(h,et,"ax",L,s)),s.ayref===s.yref&&D("ay",b(x,Lt,"ay",L,s)),Er.attr("transform",e(et,Lt)),J.attr({transform:"rotate("+V+","+sr+","+Ir+")"})},doneFn:function(){v.call("_guiRelayout",_,R());var et=document.querySelector(".js-notes-box-panel");et&&et.redraw(et.selectedObj)}})}}};if(s.showarrow&&Qr(0,0),Z){var nt;i.init({element:re.node(),gd:_,prepFn:function(){nt=J.attr("transform")},moveFn:function(Ht,Kt){var Gt="pointer";if(s.showarrow)s.axref===s.xref?D("ax",b(h,Ht,"ax",L,s)):D("ax",s.ax+Ht),s.ayref===s.yref?D("ay",b(x,Kt,"ay",L.w,s)):D("ay",s.ay+Kt),Qr(Ht,Kt);else{if(m)return;var br,tt;if(h)br=b(h,Ht,"x",L,s);else{var je=s._xsize/L.w,st=s.x+(s._xshift-s.xshift)/L.w-je/2;br=i.align(st+Ht/L.w,je,0,1,s.xanchor)}if(x)tt=b(x,Kt,"y",L,s);else{var ft=s._ysize/L.h,Me=s.y-(s._yshift+s.yshift)/L.h-ft/2;tt=i.align(Me-Kt/L.h,ft,0,1,s.yanchor)}D("x",br),D("y",tt),(!h||!x)&&(Gt=i.getCursor(h?.5:br,x?.5:tt,s.xanchor,s.yanchor))}J.attr({transform:e(Ht,Kt)+nt}),o(re,Gt)},clickFn:function(Ht,Kt){s.captureevents&&_.emit("plotly_clickannotation",j(Kt))},doneFn:function(){o(re),v.call("_guiRelayout",_,R());var Ht=document.querySelector(".js-notes-box-panel");Ht&&Ht.redraw(Ht.selectedObj)}})}}S.annotationText?ee.call(f.makeEditable,{delegate:re,gd:_}).call(te).on("edit",function(le){s.text=le,this.call(te),D("text",le),h&&h.autorange&&I(h._name+".autorange",!0),x&&x.autorange&&I(x._name+".autorange",!0),v.call("_guiRelayout",_,R())}):ee.call(te)}},{"../../lib":503,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/cartesian/axes":554,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../fx":406,"./draw_arrow_head":356,"@plotly/d3":58}],356:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../color"),M=d("./arrow_paths"),T=d("../../lib"),e=T.strScale,a=T.strRotate,n=T.strTranslate;ne.exports=function(t,f,o){var i=t.node(),g=M[o.arrowhead||0],p=M[o.startarrowhead||0],y=(o.arrowwidth||1)*(o.arrowsize||1),c=(o.arrowwidth||1)*(o.startarrowsize||1),b=f.indexOf("start")>=0,l=f.indexOf("end")>=0,_=g.backoff*y+o.standoff,s=p.backoff*c+o.startstandoff,A,m,h,x;if(i.nodeName==="line"){A={x:+t.attr("x1"),y:+t.attr("y1")},m={x:+t.attr("x2"),y:+t.attr("y2")};var u=A.x-m.x,L=A.y-m.y;if(h=Math.atan2(L,u),x=h+Math.PI,_&&s&&_+s>Math.sqrt(u*u+L*L)){J();return}if(_){if(_*_>u*u+L*L){J();return}var S=_*Math.cos(h),k=_*Math.sin(h);m.x+=S,m.y+=k,t.attr({x2:m.x,y2:m.y})}if(s){if(s*s>u*u+L*L){J();return}var P=s*Math.cos(h),z=s*Math.sin(h);A.x-=P,A.y-=z,t.attr({x1:A.x,y1:A.y})}}else if(i.nodeName==="path"){var I=i.getTotalLength(),D="";if(I<_+s){J();return}var R=i.getPointAtLength(0),O=i.getPointAtLength(.1);h=Math.atan2(R.y-O.y,R.x-O.x),A=i.getPointAtLength(Math.min(s,I)),D="0px,"+s+"px,";var F=i.getPointAtLength(I),V=i.getPointAtLength(I-.1);x=Math.atan2(F.y-V.y,F.x-V.x),m=i.getPointAtLength(Math.max(0,I-_));var G=D?s+_:_;D+=I-G+"px,"+I+"px",t.style("stroke-dasharray",D)}function J(){t.style("stroke-dasharray","0px,100px")}function Z(Y,j,re,se){!Y.path||(Y.noRotate&&(re=0),w.select(i.parentNode).append("path").attr({class:t.attr("class"),d:Y.path,transform:n(j.x,j.y)+a(re*180/Math.PI)+e(se)}).style({fill:v.rgb(o.arrowcolor),"stroke-width":0}))}b&&Z(p,A,h,c),l&&Z(g,m,x,y)}},{"../../lib":503,"../color":366,"./arrow_paths":348,"@plotly/d3":58}],357:[function(d,ne,ae){var w=d("./draw"),v=d("./click");ne.exports={moduleType:"component",name:"annotations",layoutAttributes:d("./attributes"),supplyLayoutDefaults:d("./defaults"),includeBasePlot:d("../../plots/cartesian/include_components")("annotations"),calcAutorange:d("./calc_autorange"),draw:w.draw,drawOne:w.drawOne,drawRaw:w.drawRaw,hasClickToShow:v.hasClickToShow,onClick:v.onClick,convertCoords:d("./convert_coords")}},{"../../plots/cartesian/include_components":567,"./attributes":349,"./calc_autorange":350,"./click":351,"./convert_coords":353,"./defaults":354,"./draw":355}],358:[function(d,ne,ae){var w=d("../annotations/attributes"),v=d("../../plot_api/edit_types").overrideAll,M=d("../../plot_api/plot_template").templatedArray;ne.exports=v(M("annotation",{visible:w.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:w.xanchor,xshift:w.xshift,yanchor:w.yanchor,yshift:w.yshift,text:w.text,textangle:w.textangle,font:w.font,width:w.width,height:w.height,opacity:w.opacity,align:w.align,valign:w.valign,bgcolor:w.bgcolor,bordercolor:w.bordercolor,borderpad:w.borderpad,borderwidth:w.borderwidth,showarrow:w.showarrow,arrowcolor:w.arrowcolor,arrowhead:w.arrowhead,startarrowhead:w.startarrowhead,arrowside:w.arrowside,arrowsize:w.arrowsize,startarrowsize:w.startarrowsize,arrowwidth:w.arrowwidth,standoff:w.standoff,startstandoff:w.startstandoff,hovertext:w.hovertext,hoverlabel:w.hoverlabel,captureevents:w.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../annotations/attributes":349}],359:[function(d,ne,ae){var w=d("../../lib"),v=d("../../plots/cartesian/axes");ne.exports=function(e){for(var a=e.fullSceneLayout,n=a.annotations,r=0;r<n.length;r++)M(n[r],e);e.fullLayout._infolayer.selectAll(".annotation-"+e.id).remove()};function M(T,e){var a=e.fullSceneLayout,n=a.domain,r=e.fullLayout._size,t={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};T._xa={},w.extendFlat(T._xa,t),v.setConvert(T._xa),T._xa._offset=r.l+n.x[0]*r.w,T._xa.l2p=function(){return .5*(1+T._pdata[0]/T._pdata[3])*r.w*(n.x[1]-n.x[0])},T._ya={},w.extendFlat(T._ya,t),v.setConvert(T._ya),T._ya._offset=r.t+(1-n.y[1])*r.h,T._ya.l2p=function(){return .5*(1-T._pdata[1]/T._pdata[3])*r.h*(n.y[1]-n.y[0])}}},{"../../lib":503,"../../plots/cartesian/axes":554}],360:[function(d,ne,ae){var w=d("../../lib"),v=d("../../plots/cartesian/axes"),M=d("../../plots/array_container_defaults"),T=d("../annotations/common_defaults"),e=d("./attributes");ne.exports=function(r,t,f){M(r,t,{name:"annotations",handleItemDefaults:a,fullLayout:f.fullLayout})};function a(n,r,t,f){function o(p,y){return w.coerce(n,r,e,p,y)}function i(p){var y=p+"axis",c={_fullLayout:{}};return c._fullLayout[y]=t[y],v.coercePosition(r,c,o,p,p,.5)}var g=o("visible");!g||(T(n,r,f.fullLayout,o),i("x"),i("y"),i("z"),w.noneOrAll(n,r,["x","y","z"]),r.xref="x",r.yref="y",r.zref="z",o("xanchor"),o("yanchor"),o("xshift"),o("yshift"),r.showarrow&&(r.axref="pixel",r.ayref="pixel",o("ax",-10),o("ay",-30),w.noneOrAll(n,r,["ax","ay"])))}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"../annotations/common_defaults":352,"./attributes":358}],361:[function(d,ne,ae){var w=d("../annotations/draw").drawRaw,v=d("../../plots/gl3d/project"),M=["x","y","z"];ne.exports=function(e){for(var a=e.fullSceneLayout,n=e.dataScale,r=a.annotations,t=0;t<r.length;t++){for(var f=r[t],o=!1,i=0;i<3;i++){var g=M[i],p=f[g],y=a[g+"axis"],c=y.r2fraction(p);if(c<0||c>1){o=!0;break}}o?e.fullLayout._infolayer.select(".annotation-"+e.id+'[data-index="'+t+'"]').remove():(f._pdata=v(e.glplot.cameraParams,[a.xaxis.r2l(f.x)*n[0],a.yaxis.r2l(f.y)*n[1],a.zaxis.r2l(f.z)*n[2]]),w(e.graphDiv,f,t,e.id,f._xa,f._ya))}}},{"../../plots/gl3d/project":607,"../annotations/draw":355}],362:[function(d,ne,ae){var w=d("../../registry"),v=d("../../lib");ne.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:d("./attributes")}}},layoutAttributes:d("./attributes"),handleDefaults:d("./defaults"),includeBasePlot:M,convert:d("./convert"),draw:d("./draw")};function M(T,e){var a=w.subplotsRegistry.gl3d;if(!!a)for(var n=a.attrRegex,r=Object.keys(T),t=0;t<r.length;t++){var f=r[t];n.test(f)&&(T[f].annotations||[]).length&&(v.pushUnique(e._basePlotModules,a),v.pushUnique(e._subplots.gl3d,f))}}},{"../../lib":503,"../../registry":638,"./attributes":358,"./convert":359,"./defaults":360,"./draw":361}],363:[function(d,ne,ae){ne.exports=d("world-calendars/dist/main"),d("world-calendars/dist/plus"),d("world-calendars/dist/calendars/chinese"),d("world-calendars/dist/calendars/coptic"),d("world-calendars/dist/calendars/discworld"),d("world-calendars/dist/calendars/ethiopian"),d("world-calendars/dist/calendars/hebrew"),d("world-calendars/dist/calendars/islamic"),d("world-calendars/dist/calendars/julian"),d("world-calendars/dist/calendars/mayan"),d("world-calendars/dist/calendars/nanakshahi"),d("world-calendars/dist/calendars/nepali"),d("world-calendars/dist/calendars/persian"),d("world-calendars/dist/calendars/taiwan"),d("world-calendars/dist/calendars/thai"),d("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":332,"world-calendars/dist/calendars/coptic":333,"world-calendars/dist/calendars/discworld":334,"world-calendars/dist/calendars/ethiopian":335,"world-calendars/dist/calendars/hebrew":336,"world-calendars/dist/calendars/islamic":337,"world-calendars/dist/calendars/julian":338,"world-calendars/dist/calendars/mayan":339,"world-calendars/dist/calendars/nanakshahi":340,"world-calendars/dist/calendars/nepali":341,"world-calendars/dist/calendars/persian":342,"world-calendars/dist/calendars/taiwan":343,"world-calendars/dist/calendars/thai":344,"world-calendars/dist/calendars/ummalqura":345,"world-calendars/dist/main":346,"world-calendars/dist/plus":347}],364:[function(d,ne,ae){var w=d("./calendars"),v=d("../../lib"),M=d("../../constants/numerical"),T=M.EPOCHJD,e=M.ONEDAY,a={valType:"enumerated",values:v.sortObjectKeys(w.calendars),editType:"calc",dflt:"gregorian"},n=function(h,x,u,L){var S={};return S[u]=a,v.coerce(h,x,S,u,L)},r=function(h,x,u,L){for(var S=0;S<u.length;S++)n(h,x,u[S]+"calendar",L.calendar)},t={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},f={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},o={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},i="##",g={d:{"0":"dd","-":"d"},e:{"0":"d","-":"d"},a:{"0":"D","-":"D"},A:{"0":"DD","-":"DD"},j:{"0":"oo","-":"o"},W:{"0":"ww","-":"w"},m:{"0":"mm","-":"m"},b:{"0":"M","-":"M"},B:{"0":"MM","-":"MM"},y:{"0":"yy","-":"yy"},Y:{"0":"yyyy","-":"yyyy"},U:i,w:i,c:{"0":"D M d %X yyyy","-":"D M d %X yyyy"},x:{"0":"mm/dd/yyyy","-":"mm/dd/yyyy"}};function p(h,x,u){for(var L=Math.floor((x+.05)/e)+T,S=c(u).fromJD(L),k=0,P,z,I,D,R;(k=h.indexOf("%",k))!==-1;)P=h.charAt(k+1),P==="0"||P==="-"||P==="_"?(I=3,z=h.charAt(k+2),P==="_"&&(P="-")):(z=P,P="0",I=2),D=g[z],D?(D===i?R=i:R=S.formatDate(D[P]),h=h.substr(0,k)+R+h.substr(k+I),k+=R.length):k+=I;return h}var y={};function c(h){var x=y[h];return x||(x=y[h]=w.instance(h),x)}function b(h){return v.extendFlat({},a,{description:h})}function l(h){return"Sets the calendar system to use with `"+h+"` date data."}var _={xcalendar:b(l("x"))},s=v.extendFlat({},_,{ycalendar:b(l("y"))}),A=v.extendFlat({},s,{zcalendar:b(l("z"))}),m=b(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));ne.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:s,bar:s,box:s,heatmap:s,contour:s,histogram:s,histogram2d:s,histogram2dcontour:s,scatter3d:A,surface:A,mesh3d:A,scattergl:s,ohlc:_,candlestick:_},layout:{calendar:b(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:m},yaxis:{calendar:m},scene:{xaxis:{calendar:m},yaxis:{calendar:m},zaxis:{calendar:m}},polar:{radialaxis:{calendar:m}}},transforms:{filter:{valuecalendar:b(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:b(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:a,handleDefaults:n,handleTraceDefaults:r,CANONICAL_SUNDAY:f,CANONICAL_TICK:t,DFLTRANGE:o,getCal:c,worldCalFmt:p}},{"../../constants/numerical":479,"../../lib":503,"./calendars":363}],365:[function(d,ne,ae){ae.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],ae.defaultLine="#444",ae.lightLine="#eee",ae.background="#fff",ae.borderLine="#BEC8D9",ae.lightFraction=100*(14-4)/(15-4)},{}],366:[function(d,ne,ae){var w=d("tinycolor2"),v=d("fast-isnumeric"),M=d("../../lib/array").isTypedArray,T=ne.exports={},e=d("./attributes");T.defaults=e.defaults;var a=T.defaultLine=e.defaultLine;T.lightLine=e.lightLine;var n=T.background=e.background;T.tinyRGB=function(t){var f=t.toRgb();return"rgb("+Math.round(f.r)+", "+Math.round(f.g)+", "+Math.round(f.b)+")"},T.rgb=function(t){return T.tinyRGB(w(t))},T.opacity=function(t){return t?w(t).getAlpha():0},T.addOpacity=function(t,f){var o=w(t).toRgb();return"rgba("+Math.round(o.r)+", "+Math.round(o.g)+", "+Math.round(o.b)+", "+f+")"},T.combine=function(t,f){var o=w(t).toRgb();if(o.a===1)return w(t).toRgbString();var i=w(f||n).toRgb(),g=i.a===1?i:{r:255*(1-i.a)+i.r*i.a,g:255*(1-i.a)+i.g*i.a,b:255*(1-i.a)+i.b*i.a},p={r:g.r*(1-o.a)+o.r*o.a,g:g.g*(1-o.a)+o.g*o.a,b:g.b*(1-o.a)+o.b*o.a};return w(p).toRgbString()},T.contrast=function(t,f,o){var i=w(t);i.getAlpha()!==1&&(i=w(T.combine(t,n)));var g=i.isDark()?f?i.lighten(f):n:o?i.darken(o):a;return g.toString()},T.stroke=function(t,f){var o=w(f);t.style({stroke:T.tinyRGB(o),"stroke-opacity":o.getAlpha()})},T.fill=function(t,f){var o=w(f);t.style({fill:T.tinyRGB(o),"fill-opacity":o.getAlpha()})},T.clean=function(t){if(!(!t||typeof t!="object")){var f=Object.keys(t),o,i,g,p;for(o=0;o<f.length;o++)if(g=f[o],p=t[g],g.substr(g.length-5)==="color")if(Array.isArray(p))for(i=0;i<p.length;i++)p[i]=r(p[i]);else t[g]=r(p);else if(g.substr(g.length-10)==="colorscale"&&Array.isArray(p))for(i=0;i<p.length;i++)Array.isArray(p[i])&&(p[i][1]=r(p[i][1]));else if(Array.isArray(p)){var y=p[0];if(!Array.isArray(y)&&y&&typeof y=="object")for(i=0;i<p.length;i++)T.clean(p[i])}else p&&typeof p=="object"&&!M(p)&&T.clean(p)}};function r(t){if(v(t)||typeof t!="string")return t;var f=t.trim();if(f.substr(0,3)!=="rgb")return t;var o=f.match(/^rgba?\s*\(([^()]*)\)$/);if(!o)return t;var i=o[1].trim().split(/\s*[\s,]\s*/),g=f.charAt(3)==="a"&&i.length===4;if(!g&&i.length!==3)return t;for(var p=0;p<i.length;p++){if(!i[p].length||(i[p]=Number(i[p]),!(i[p]>=0)))return t;if(p===3)i[p]>1&&(i[p]=1);else if(i[p]>=1)return t}var y=Math.round(i[0]*255)+", "+Math.round(i[1]*255)+", "+Math.round(i[2]*255);return g?"rgba("+y+", "+i[3]+")":"rgb("+y+")"}},{"../../lib/array":485,"./attributes":365,"fast-isnumeric":190,tinycolor2:312}],367:[function(d,ne,ae){var w=d("../../plots/cartesian/layout_attributes"),v=d("../../plots/font_attributes"),M=d("../../lib/extend").extendFlat,T=d("../../plot_api/edit_types").overrideAll;ne.exports=T({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:w.linecolor,outlinewidth:w.linewidth,bordercolor:w.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:w.tickmode,nticks:w.nticks,tick0:w.tick0,dtick:w.dtick,tickvals:w.tickvals,ticktext:w.ticktext,ticks:M({},w.ticks,{dflt:""}),ticklabeloverflow:M({},w.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:w.ticklen,tickwidth:w.tickwidth,tickcolor:w.tickcolor,ticklabelstep:w.ticklabelstep,showticklabels:w.showticklabels,tickfont:v({}),tickangle:w.tickangle,tickformat:w.tickformat,tickformatstops:w.tickformatstops,tickprefix:w.tickprefix,showtickprefix:w.showtickprefix,ticksuffix:w.ticksuffix,showticksuffix:w.showticksuffix,separatethousands:w.separatethousands,exponentformat:w.exponentformat,minexponent:w.minexponent,showexponent:w.showexponent,title:{text:{valType:"string"},font:v({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:v({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/layout_attributes":569,"../../plots/font_attributes":585}],368:[function(d,ne,ae){ne.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],369:[function(d,ne,ae){var w=d("../../lib"),v=d("../../plot_api/plot_template"),M=d("../../plots/cartesian/tick_value_defaults"),T=d("../../plots/cartesian/tick_mark_defaults"),e=d("../../plots/cartesian/tick_label_defaults"),a=d("../../plots/cartesian/prefix_suffix_defaults"),n=d("./attributes");ne.exports=function(t,f,o){var i=v.newContainer(f,"colorbar"),g=t.colorbar||{};function p(S,k){return w.coerce(g,i,n,S,k)}var y=o.margin||{t:0,b:0,l:0,r:0},c=o.width-y.l-y.r,b=o.height-y.t-y.b,l=p("orientation"),_=l==="v",s=p("thicknessmode");p("thickness",s==="fraction"?30/(_?c:b):30);var A=p("lenmode");p("len",A==="fraction"?1:_?b:c),p("x",_?1.02:.5),p("xanchor",_?"left":"center"),p("xpad"),p("y",_?.5:1.02),p("yanchor",_?"middle":"bottom"),p("ypad"),w.noneOrAll(g,i,["x","y"]),p("outlinecolor"),p("outlinewidth"),p("bordercolor"),p("borderwidth"),p("bgcolor");var m=w.coerce(g,i,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:_?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");p("ticklabeloverflow",m.indexOf("inside")!==-1?"hide past domain":"hide past div"),M(g,i,p,"linear");var h=o.font,x={outerTicks:!1,font:h};m.indexOf("inside")!==-1&&(x.bgColor="black"),a(g,i,p,"linear",x),e(g,i,p,"linear",x),T(g,i,p,"linear",x),p("title.text",o._dfltTitle.colorbar);var u=i.tickfont,L=w.extendFlat({},u,{color:h.color,size:w.bigFont(u.size)});w.coerceFont(p,"title.font",L),p("title.side",_?"top":"right")}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_mark_defaults":579,"../../plots/cartesian/tick_value_defaults":580,"./attributes":367}],370:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("tinycolor2"),M=d("../../plots/plots"),T=d("../../registry"),e=d("../../plots/cartesian/axes"),a=d("../dragelement"),n=d("../../lib"),r=n.strTranslate,t=d("../../lib/extend").extendFlat,f=d("../../lib/setcursor"),o=d("../drawing"),i=d("../color"),g=d("../titles"),p=d("../../lib/svg_text_utils"),y=d("../colorscale/helpers").flipScale,c=d("../../plots/cartesian/axis_defaults"),b=d("../../plots/cartesian/position_defaults"),l=d("../../plots/cartesian/layout_attributes"),_=d("../../constants/alignment"),s=_.LINE_SPACING,A=_.FROM_TL,m=_.FROM_BR,h=d("./constants").cn;function x(z){var I=z._fullLayout,D=I._infolayer.selectAll("g."+h.colorbar).data(u(z),function(R){return R._id});D.enter().append("g").attr("class",function(R){return R._id}).classed(h.colorbar,!0),D.each(function(R){var O=w.select(this);n.ensureSingle(O,"rect",h.cbbg),n.ensureSingle(O,"g",h.cbfills),n.ensureSingle(O,"g",h.cblines),n.ensureSingle(O,"g",h.cbaxis,function(V){V.classed(h.crisp,!0)}),n.ensureSingle(O,"g",h.cbtitleunshift,function(V){V.append("g").classed(h.cbtitle,!0)}),n.ensureSingle(O,"rect",h.cboutline);var F=L(O,R,z);F&&F.then&&(z._promises||[]).push(F),z._context.edits.colorbarPosition&&S(O,R,z)}),D.exit().each(function(R){M.autoMargin(z,R._id)}).remove(),D.order()}function u(z){var I=z._fullLayout,D=z.calcdata,R=[],O,F,V,G;function J(W){return t(W,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function Z(){typeof G.calc=="function"?G.calc(z,V,O):(O._fillgradient=F.reversescale?y(F.colorscale):F.colorscale,O._zrange=[F[G.min],F[G.max]])}for(var Y=0;Y<D.length;Y++){var j=D[Y];V=j[0].trace;var re=V._module.colorbar;if(V.visible===!0&&re)for(var se=Array.isArray(re),oe=se?re:[re],N=0;N<oe.length;N++){G=oe[N];var U=G.container;F=U?V[U]:V,F&&F.showscale&&(O=J(F.colorbar),O._id="cb"+V.uid+(se&&U?"-"+U:""),O._traceIndex=V.index,O._propPrefix=(U?U+".":"")+"colorbar.",O._meta=V._meta,Z(),R.push(O))}}for(var q in I._colorAxes)if(F=I[q],F.showscale){var Q=I._colorAxes[q];O=J(F.colorbar),O._id="cb"+q,O._propPrefix=q+".colorbar.",O._meta=I._meta,G={min:"cmin",max:"cmax"},Q[0]!=="heatmap"&&(V=Q[1],G.calc=V._module.colorbar.calc),Z(),R.push(O)}return R}function L(z,I,D){var R=I.orientation==="v",O=I.len,F=I.lenmode,V=I.thickness,G=I.thicknessmode,J=I.outlinewidth,Z=I.borderwidth,Y=I.bgcolor,j=I.xanchor,re=I.yanchor,se=I.xpad,oe=I.ypad,N=I.x,U=R?I.y:1-I.y,q=D._fullLayout,Q=q._size,W=I._fillcolor,X=I._line,ee=I.title,te=ee.side,ie=I._zrange||w.extent((typeof W=="function"?W:X.color).domain()),le=typeof X.color=="function"?X.color:function(){return X.color},ge=typeof W=="function"?W:function(){return W},fe=I._levels,pe=k(D,I,ie),ye=pe.fill,Te=pe.line,_e=Math.round(V*(G==="fraction"?R?Q.w:Q.h:1)),De=_e/(R?Q.w:Q.h),Be=Math.round(O*(F==="fraction"?R?Q.h:Q.w:1)),Ue=Be/(R?Q.h:Q.w),xe=Math.round(R?N*Q.w+se:U*Q.h+oe),Pe={center:.5,right:1}[j]||0,Ve={top:1,middle:.5}[re]||0,Qe=R?N-Pe*De:U-Ve*De,Fe=R?U-Ve*Ue:N-Pe*Ue,Le=Math.round(R?Q.h*(1-Fe):Q.w*Fe);I._lenFrac=Ue,I._thickFrac=De,I._uFrac=Qe,I._vFrac=Fe;var Ne=I._axis=P(D,I,ie);Ne.position=De+(R?N+se/Q.w:U+oe/Q.h);var dt=["top","bottom"].indexOf(te)!==-1;if(R&&dt&&(Ne.title.side=te,Ne.titlex=N+se/Q.w,Ne.titley=Fe+(ee.side==="top"?Ue-oe/Q.h:oe/Q.h)),!R&&!dt&&(Ne.title.side=te,Ne.titley=U+oe/Q.h,Ne.titlex=Fe+se/Q.w),X.color&&I.tickmode==="auto"){Ne.tickmode="linear",Ne.tick0=fe.start;var Dt=fe.size,Xt=n.constrain(Be/50,4,15)+1,At=(ie[1]-ie[0])/((I.nticks||Xt)*Dt);if(At>1){var zt=Math.pow(10,Math.floor(Math.log(At)/Math.LN10));Dt*=zt*n.roundUp(At/zt,[2,5,10]),(Math.abs(fe.start)/fe.size+1e-6)%1<2e-6&&(Ne.tick0=0)}Ne.dtick=Dt}Ne.domain=R?[Fe+oe/Q.h,Fe+Ue-oe/Q.h]:[Fe+se/Q.w,Fe+Ue-se/Q.w],Ne.setScale(),z.attr("transform",r(Math.round(Q.l),Math.round(Q.t)));var Ut=z.select("."+h.cbtitleunshift).attr("transform",r(-Math.round(Q.l),-Math.round(Q.t))),Ct=Ne.ticklabelposition,Mt=Ne.title.font.size,rt=z.select("."+h.cbaxis),ct,Ze=0,ke=0;function Ge(Bt,qt){var Ot={propContainer:Ne,propName:I._propPrefix+"title",traceIndex:I._traceIndex,_meta:I._meta,placeholder:q._dfltTitle.colorbar,containerGroup:z.select("."+h.cbtitle)},$t=Bt.charAt(0)==="h"?Bt.substr(1):"h"+Bt;z.selectAll("."+$t+",."+$t+"-math-group").remove(),g.draw(D,Bt,t(Ot,qt||{}))}function Je(){if(R&&dt||!R&&!dt){var Bt,qt;te==="top"&&(Bt=se+Q.l+Q.w*N,qt=oe+Q.t+Q.h*(1-Fe-Ue)+3+Mt*.75),te==="bottom"&&(Bt=se+Q.l+Q.w*N,qt=oe+Q.t+Q.h*(1-Fe)-3-Mt*.25),te==="right"&&(qt=oe+Q.t+Q.h*U+3+Mt*.75,Bt=se+Q.l+Q.w*Fe),Ge(Ne._id+"title",{attributes:{x:Bt,y:qt,"text-anchor":R?"start":"middle"}})}}function ot(){if(R&&!dt||!R&&dt){var Bt=Ne.position||0,qt=Ne._offset+Ne._length/2,Ot,$t;if(te==="right")$t=qt,Ot=Q.l+Q.w*Bt+10+Mt*(Ne.showticklabels?1:.5);else if(Ot=qt,te==="bottom"&&($t=Q.t+Q.h*Bt+10+(Ct.indexOf("inside")===-1?Ne.tickfont.size:0)+(Ne.ticks!=="intside"&&I.ticklen||0)),te==="top"){var rr=ee.text.split("<br>").length;$t=Q.t+Q.h*Bt+10-_e-s*Mt*rr}Ge((R?"h":"v")+Ne._id+"title",{avoid:{selection:w.select(D).selectAll("g."+Ne._id+"tick"),side:te,offsetTop:R?0:Q.t,offsetLeft:R?Q.l:0,maxShift:R?q.width:q.height},attributes:{x:Ot,y:$t,"text-anchor":"middle"},transform:{rotate:R?-90:0,offset:0}})}}function Pt(){if(!R&&!dt||R&&dt){var Bt=z.select("."+h.cbtitle),qt=Bt.select("text"),Ot=[-J/2,J/2],$t=Bt.select(".h"+Ne._id+"title-math-group").node(),rr=15.6;qt.node()&&(rr=parseInt(qt.node().style.fontSize,10)*s);var er;if($t?(er=o.bBox($t),ke=er.width,Ze=er.height,Ze>rr&&(Ot[1]-=(Ze-rr)/2)):qt.node()&&!qt.classed(h.jsPlaceholder)&&(er=o.bBox(qt.node()),ke=er.width,Ze=er.height),R){if(Ze){if(Ze+=5,te==="top")Ne.domain[1]-=Ze/Q.h,Ot[1]*=-1;else{Ne.domain[0]+=Ze/Q.h;var pr=p.lineCount(qt);Ot[1]+=(1-pr)*rr}Bt.attr("transform",r(Ot[0],Ot[1])),Ne.setScale()}}else ke&&(te==="right"&&(Ne.domain[0]+=(ke+Mt/2)/Q.w),Bt.attr("transform",r(Ot[0],Ot[1])),Ne.setScale())}z.selectAll("."+h.cbfills+",."+h.cblines).attr("transform",R?r(0,Math.round(Q.h*(1-Ne.domain[1]))):r(Math.round(Q.w*Ne.domain[0]),0)),rt.attr("transform",R?r(0,Math.round(-Q.t)):r(Math.round(-Q.l),0));var Xr=z.select("."+h.cbfills).selectAll("rect."+h.cbfill).attr("style","").data(ye);Xr.enter().append("rect").classed(h.cbfill,!0).style("stroke","none"),Xr.exit().remove();var hn=ie.map(Ne.c2p).map(Math.round).sort(function(Gt,br){return Gt-br});Xr.each(function(Gt,br){var tt=[br===0?ie[0]:(ye[br]+ye[br-1])/2,br===ye.length-1?ie[1]:(ye[br]+ye[br+1])/2].map(Ne.c2p).map(Math.round);R&&(tt[1]=n.constrain(tt[1]+(tt[1]>tt[0])?1:-1,hn[0],hn[1]));var je=w.select(this).attr(R?"x":"y",xe).attr(R?"y":"x",w.min(tt)).attr(R?"width":"height",Math.max(_e,2)).attr(R?"height":"width",Math.max(w.max(tt)-w.min(tt),2));if(I._fillgradient)o.gradient(je,D,I._id,R?"vertical":"horizontalreversed",I._fillgradient,"fill");else{var st=ge(Gt).replace("e-","");je.attr("fill",v(st).toHexString())}});var Qr=z.select("."+h.cblines).selectAll("path."+h.cbline).data(X.color&&X.width?Te:[]);Qr.enter().append("path").classed(h.cbline,!0),Qr.exit().remove(),Qr.each(function(Gt){var br=xe,tt=Math.round(Ne.c2p(Gt))+X.width/2%1;w.select(this).attr("d","M"+(R?br+","+tt:tt+","+br)+(R?"h":"v")+_e).call(o.lineGroupStyle,X.width,le(Gt),X.dash)}),rt.selectAll("g."+Ne._id+"tick,path").remove();var nt=xe+_e+(J||0)/2-(I.ticks==="outside"?1:0),Ht=e.calcTicks(Ne),Kt=e.getTickSigns(Ne)[2];return e.drawTicks(D,Ne,{vals:Ne.ticks==="inside"?e.clipEnds(Ne,Ht):Ht,layer:rt,path:e.makeTickPath(Ne,nt,Kt),transFn:e.makeTransTickFn(Ne)}),e.drawLabels(D,Ne,{vals:Ht,layer:rt,transFn:e.makeTransTickLabelFn(Ne),labelFns:e.makeLabelFns(Ne,nt)})}function _t(){var Bt,qt=_e+J/2;Ct.indexOf("inside")===-1&&(Bt=o.bBox(rt.node()),qt+=R?Bt.width:Bt.height),ct=Ut.select("text");var Ot=0,$t=R&&te==="top",rr=!R&&te==="right",er=0;if(ct.node()&&!ct.classed(h.jsPlaceholder)){var pr,Xr=Ut.select(".h"+Ne._id+"title-math-group").node();Xr&&(R&&dt||!R&&!dt)?(Bt=o.bBox(Xr),Ot=Bt.width,pr=Bt.height):(Bt=o.bBox(Ut.node()),Ot=Bt.right-Q.l-(R?xe:Le),pr=Bt.bottom-Q.t-(R?Le:xe),!R&&te==="top"&&(qt+=Bt.height,er=Bt.height)),rr&&(ct.attr("transform",r(Ot/2+Mt/2,0)),Ot*=2),qt=Math.max(qt,R?Ot:pr)}var hn=(R?se:oe)*2+qt+Z+J/2,Qr=0;!R&&ee.text&&re==="bottom"&&U<=0&&(Qr=hn/2,hn+=Qr,er+=Qr),q._hColorbarMoveTitle=Qr,q._hColorbarMoveCBTitle=er;var nt=Z+J;z.select("."+h.cbbg).attr("x",(R?xe:Le)-nt/2-(R?se:0)).attr("y",(R?Le:xe)-(R?Be:oe+er-Qr)).attr(R?"width":"height",Math.max(hn-Qr,2)).attr(R?"height":"width",Math.max(Be+nt,2)).call(i.fill,Y).call(i.stroke,I.bordercolor).style("stroke-width",Z);var Ht=rr?Math.max(Ot-10,0):0;if(z.selectAll("."+h.cboutline).attr("x",(R?xe:Le+se)+Ht).attr("y",(R?Le+oe-Be:xe)+($t?Ze:0)).attr(R?"width":"height",Math.max(_e,2)).attr(R?"height":"width",Math.max(Be-(R?2*oe+Ze:2*se+Ht),2)).call(i.stroke,I.outlinecolor).style({fill:"none","stroke-width":J}),z.attr("transform",r(Q.l-(R?Pe*hn:0),Q.t-(R?0:(1-Ve)*hn-er))),!R&&(Z||v(Y).getAlpha()&&!v.equals(q.paper_bgcolor,Y))){var Kt=rt.selectAll("text"),Gt=Kt[0].length,br=z.select("."+h.cbbg).node(),tt=o.bBox(br),je=o.getTranslate(z),st=2;Kt.each(function(pt,vt){var St=0,kt=Gt-1;if(vt===St||vt===kt){var Nt=o.bBox(this),nr=o.getTranslate(this),fr;if(vt===kt){var Hr=Nt.right+nr.x,Er=tt.right+je.x+Le-Z-st+N;fr=Er-Hr,fr>0&&(fr=0)}else if(vt===St){var _r=Nt.left+nr.x,en=tt.left+je.x+Le+Z+st;fr=en-_r,fr<0&&(fr=0)}fr&&(Gt<3?this.setAttribute("transform","translate("+fr+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var ft={},Me=A[j],Se=m[j],Ke=A[re],Xe=m[re],it=hn-_e;R?(F==="pixels"?(ft.y=U,ft.t=Be*Ke,ft.b=Be*Xe):(ft.t=ft.b=0,ft.yt=U+O*Ke,ft.yb=U-O*Xe),G==="pixels"?(ft.x=N,ft.l=hn*Me,ft.r=hn*Se):(ft.l=it*Me,ft.r=it*Se,ft.xl=N-V*Me,ft.xr=N+V*Se)):(F==="pixels"?(ft.x=N,ft.l=Be*Me,ft.r=Be*Se):(ft.l=ft.r=0,ft.xl=N+O*Me,ft.xr=N-O*Se),G==="pixels"?(ft.y=1-U,ft.t=hn*Ke,ft.b=hn*Xe):(ft.t=it*Ke,ft.b=it*Xe,ft.yt=U-V*Ke,ft.yb=U+V*Xe)),M.autoMargin(D,I._id,ft)}return n.syncOrAsync([M.previousPromises,Je,Pt,ot,M.previousPromises,_t],D)}function S(z,I,D){var R=I.orientation==="v",O=D._fullLayout,F=O._size,V,G,J;a.init({element:z.node(),gd:D,prepFn:function(){V=z.attr("transform"),f(z)},moveFn:function(Z,Y){z.attr("transform",V+r(Z,Y)),G=a.align((R?I._uFrac:I._vFrac)+Z/F.w,R?I._thickFrac:I._lenFrac,0,1,I.xanchor),J=a.align((R?I._vFrac:1-I._uFrac)-Y/F.h,R?I._lenFrac:I._thickFrac,0,1,I.yanchor);var j=a.getCursor(G,J,I.xanchor,I.yanchor);f(z,j)},doneFn:function(){if(f(z),G!==void 0&&J!==void 0){var Z={};Z[I._propPrefix+"x"]=G,Z[I._propPrefix+"y"]=J,I._traceIndex!==void 0?T.call("_guiRestyle",D,Z,I._traceIndex):T.call("_guiRelayout",D,Z)}}})}function k(z,I,D){var R=I._levels,O=[],F=[],V,G,J=R.end+R.size/100,Z=R.size,Y=1.001*D[0]-.001*D[1],j=1.001*D[1]-.001*D[0];for(G=0;G<1e5&&(V=R.start+G*Z,!(Z>0?V>=J:V<=J));G++)V>Y&&V<j&&O.push(V);if(I._fillgradient)F=[0];else if(typeof I._fillcolor=="function"){var re=I._filllevels;if(re)for(J=re.end+re.size/100,Z=re.size,G=0;G<1e5&&(V=re.start+G*Z,!(Z>0?V>=J:V<=J));G++)V>D[0]&&V<D[1]&&F.push(V);else F=O.map(function(se){return se-R.size/2}),F.push(F[F.length-1]+R.size)}else I._fillcolor&&typeof I._fillcolor=="string"&&(F=[0]);return R.size<0&&(O.reverse(),F.reverse()),{line:O,fill:F}}function P(z,I,D){var R=z._fullLayout,O=I.orientation==="v",F={type:"linear",range:D,tickmode:I.tickmode,nticks:I.nticks,tick0:I.tick0,dtick:I.dtick,tickvals:I.tickvals,ticktext:I.ticktext,ticks:I.ticks,ticklen:I.ticklen,tickwidth:I.tickwidth,tickcolor:I.tickcolor,showticklabels:I.showticklabels,ticklabelposition:I.ticklabelposition,ticklabeloverflow:I.ticklabeloverflow,ticklabelstep:I.ticklabelstep,tickfont:I.tickfont,tickangle:I.tickangle,tickformat:I.tickformat,exponentformat:I.exponentformat,minexponent:I.minexponent,separatethousands:I.separatethousands,showexponent:I.showexponent,showtickprefix:I.showtickprefix,tickprefix:I.tickprefix,showticksuffix:I.showticksuffix,ticksuffix:I.ticksuffix,title:I.title,showline:!0,anchor:"free",side:O?"right":"bottom",position:1},V=O?"y":"x",G={type:"linear",_id:V+I._id},J={letter:V,font:R.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:R.calendar};function Z(Y,j){return n.coerce(F,G,l,Y,j)}return c(F,G,Z,J,R),b(F,G,Z,J),G}ne.exports={draw:x}},{"../../constants/alignment":471,"../../lib":503,"../../lib/extend":493,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_defaults":556,"../../plots/cartesian/layout_attributes":569,"../../plots/cartesian/position_defaults":572,"../../plots/plots":619,"../../registry":638,"../color":366,"../colorscale/helpers":377,"../dragelement":385,"../drawing":388,"../titles":464,"./constants":368,"@plotly/d3":58,tinycolor2:312}],371:[function(d,ne,ae){var w=d("../../lib");ne.exports=function(M){return w.isPlainObject(M.colorbar)}},{"../../lib":503}],372:[function(d,ne,ae){ne.exports={moduleType:"component",name:"colorbar",attributes:d("./attributes"),supplyDefaults:d("./defaults"),draw:d("./draw").draw,hasColorbar:d("./has_colorbar")}},{"./attributes":367,"./defaults":369,"./draw":370,"./has_colorbar":371}],373:[function(d,ne,ae){var w=d("../colorbar/attributes"),v=d("../../lib/regex").counter,M=d("../../lib/sort_object_keys"),T=d("./scales.js").scales;M(T),ne.exports=function(a,n){a=a||"",n=n||{};var r=n.cLetter||"c";"onlyIfNumerical"in n?n.onlyIfNumerical:Boolean(a);var t="noScale"in n?n.noScale:a==="marker.line",f="showScaleDflt"in n?n.showScaleDflt:r==="z",o=typeof n.colorscaleDflt=="string"?T[n.colorscaleDflt]:null,i=n.editTypeOverride||"",g;"colorAttr"in n?g=n.colorAttr:g={z:"z",c:"color"}[r];var p=r+"auto",y=r+"min",c=r+"max",b=r+"mid",l={};l[y]=l[c]=void 0;var _={};_[p]=!1;var s={};return g==="color"&&(s.color={valType:"color",arrayOk:!0,editType:i||"style"},n.anim&&(s.color.anim=!0)),s[p]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:l},s[y]={valType:"number",dflt:null,editType:i||"plot",impliedEdits:_},s[c]={valType:"number",dflt:null,editType:i||"plot",impliedEdits:_},s[b]={valType:"number",dflt:null,editType:"calc",impliedEdits:l},s.colorscale={valType:"colorscale",editType:"calc",dflt:o,impliedEdits:{autocolorscale:!1}},s.autocolorscale={valType:"boolean",dflt:n.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},s.reversescale={valType:"boolean",dflt:!1,editType:"plot"},t||(s.showscale={valType:"boolean",dflt:f,editType:"calc"},s.colorbar=w),n.noColorAxis||(s.coloraxis={valType:"subplotid",regex:v("coloraxis"),dflt:null,editType:"calc"}),s}},{"../../lib/regex":520,"../../lib/sort_object_keys":526,"../colorbar/attributes":367,"./scales.js":381}],374:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("../../lib"),M=d("./helpers").extractOpts;ne.exports=function(e,a,n){var r=e._fullLayout,t=n.vals,f=n.containerStr,o=f?v.nestedProperty(a,f).get():a,i=M(o),g=i.auto!==!1,p=i.min,y=i.max,c=i.mid,b=function(){return v.aggNums(Math.min,null,t)},l=function(){return v.aggNums(Math.max,null,t)};if(p===void 0?p=b():g&&(o._colorAx&&w(p)?p=Math.min(p,b()):p=b()),y===void 0?y=l():g&&(o._colorAx&&w(y)?y=Math.max(y,l()):y=l()),g&&c!==void 0&&(y-c>c-p?p=c-(y-c):y-c<c-p&&(y=c+(c-p))),p===y&&(p-=.5,y+=.5),i._sync("min",p),i._sync("max",y),i.autocolorscale){var _;p*y<0?_=r.colorscale.diverging:p>=0?_=r.colorscale.sequential:_=r.colorscale.sequentialminus,i._sync("colorscale",_)}}},{"../../lib":503,"./helpers":377,"fast-isnumeric":190}],375:[function(d,ne,ae){var w=d("../../lib"),v=d("./helpers").hasColorscale,M=d("./helpers").extractOpts;ne.exports=function(e,a){function n(p,y){var c=p["_"+y];c!==void 0&&(p[y]=c)}function r(p,y){var c=y.container?w.nestedProperty(p,y.container).get():p;if(c)if(c.coloraxis)c._colorAx=a[c.coloraxis];else{var b=M(c),l=b.auto;(l||b.min===void 0)&&n(c,y.min),(l||b.max===void 0)&&n(c,y.max),b.autocolorscale&&n(c,"colorscale")}}for(var t=0;t<e.length;t++){var f=e[t],o=f._module.colorbar;if(o)if(Array.isArray(o))for(var i=0;i<o.length;i++)r(f,o[i]);else r(f,o);v(f,"marker.line")&&r(f,{container:"marker.line",min:"cmin",max:"cmax"})}for(var g in a._colorAxes)r(a[g],{min:"cmin",max:"cmax"})}},{"../../lib":503,"./helpers":377}],376:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("../../lib"),M=d("../colorbar/has_colorbar"),T=d("../colorbar/defaults"),e=d("./scales").isValid,a=d("../../registry").traceIs;function n(r,t){var f=t.slice(0,t.length-1);return t?v.nestedProperty(r,f).get()||{}:r}ne.exports=function r(t,f,o,i,g){var p=g.prefix,y=g.cLetter,c="_module"in f,b=n(t,p),l=n(f,p),_=n(f._template||{},p)||{},s=function(){return delete t.coloraxis,delete f.coloraxis,r(t,f,o,i,g)};if(c){var A=o._colorAxes||{},m=i(p+"coloraxis");if(m){var h=a(f,"contour")&&v.nestedProperty(f,"contours.coloring").get()||"heatmap",x=A[m];x?(x[2].push(s),x[0]!==h&&(x[0]=!1,v.warn(["Ignoring coloraxis:",m,"setting","as it is linked to incompatible colorscales."].join(" ")))):A[m]=[h,f,[s]];return}}var u=b[y+"min"],L=b[y+"max"],S=w(u)&&w(L)&&u<L,k=i(p+y+"auto",!S);k?i(p+y+"mid"):(i(p+y+"min"),i(p+y+"max"));var P=b.colorscale,z=_.colorscale,I;if(P!==void 0&&(I=!e(P)),z!==void 0&&(I=!e(z)),i(p+"autocolorscale",I),i(p+"colorscale"),i(p+"reversescale"),p!=="marker.line."){var D;p&&c&&(D=M(b));var R=i(p+"showscale",D);R&&(p&&_&&(l._template=_),T(b,l,o))}}},{"../../lib":503,"../../registry":638,"../colorbar/defaults":369,"../colorbar/has_colorbar":371,"./scales":381,"fast-isnumeric":190}],377:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("tinycolor2"),M=d("fast-isnumeric"),T=d("../../lib"),e=d("../color"),a=d("./scales").isValid;function n(c,b,l){var _=b?T.nestedProperty(c,b).get()||{}:c,s=_[l||"color"],A=!1;if(T.isArrayOrTypedArray(s)){for(var m=0;m<s.length;m++)if(M(s[m])){A=!0;break}}return T.isPlainObject(_)&&(A||_.showscale===!0||M(_.cmin)&&M(_.cmax)||a(_.colorscale)||T.isPlainObject(_.colorbar))}var r=["showscale","autocolorscale","colorscale","reversescale","colorbar"],t=["min","max","mid","auto"];function f(c){var b=c._colorAx,l=b||c,_={},s,A,m;for(A=0;A<r.length;A++)m=r[A],_[m]=l[m];if(b)for(s="c",A=0;A<t.length;A++)m=t[A],_[m]=l["c"+m];else{var h;for(A=0;A<t.length;A++){if(m=t[A],h="c"+m,h in l){_[m]=l[h];continue}h="z"+m,h in l&&(_[m]=l[h])}s=h.charAt(0)}return _._sync=function(x,u){var L=t.indexOf(x)!==-1?s+x:x;l[L]=l["_"+L]=u},_}function o(c){for(var b=f(c),l=b.min,_=b.max,s=b.reversescale?i(b.colorscale):b.colorscale,A=s.length,m=new Array(A),h=new Array(A),x=0;x<A;x++){var u=s[x];m[x]=l+u[0]*(_-l),h[x]=u[1]}return{domain:m,range:h}}function i(c){for(var b=c.length,l=new Array(b),_=b-1,s=0;_>=0;_--,s++){var A=c[_];l[s]=[1-A[0],A[1]]}return l}function g(c,b){b=b||{};for(var l=c.domain,_=c.range,s=_.length,A=new Array(s),m=0;m<s;m++){var h=v(_[m]).toRgb();A[m]=[h.r,h.g,h.b,h.a]}var x=w.scale.linear().domain(l).range(A).clamp(!0),u=b.noNumericCheck,L=b.returnArray,S;return u&&L?S=x:u?S=function(k){return y(x(k))}:L?S=function(k){return M(k)?x(k):v(k).isValid()?k:e.defaultLine}:S=function(k){return M(k)?y(x(k)):v(k).isValid()?k:e.defaultLine},S.domain=x.domain,S.range=function(){return _},S}function p(c,b){return g(o(c),b)}function y(c){var b={r:c[0],g:c[1],b:c[2],a:c[3]};return v(b).toRgbString()}ne.exports={hasColorscale:n,extractOpts:f,extractScale:o,flipScale:i,makeColorScaleFunc:g,makeColorScaleFuncFromTrace:p}},{"../../lib":503,"../color":366,"./scales":381,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],378:[function(d,ne,ae){var w=d("./scales"),v=d("./helpers");ne.exports={moduleType:"component",name:"colorscale",attributes:d("./attributes"),layoutAttributes:d("./layout_attributes"),supplyLayoutDefaults:d("./layout_defaults"),handleDefaults:d("./defaults"),crossTraceDefaults:d("./cross_trace_defaults"),calc:d("./calc"),scales:w.scales,defaultScale:w.defaultScale,getScale:w.get,isValidScale:w.isValid,hasColorscale:v.hasColorscale,extractOpts:v.extractOpts,extractScale:v.extractScale,flipScale:v.flipScale,makeColorScaleFunc:v.makeColorScaleFunc,makeColorScaleFuncFromTrace:v.makeColorScaleFuncFromTrace}},{"./attributes":373,"./calc":374,"./cross_trace_defaults":375,"./defaults":376,"./helpers":377,"./layout_attributes":379,"./layout_defaults":380,"./scales":381}],379:[function(d,ne,ae){var w=d("../../lib/extend").extendFlat,v=d("./attributes"),M=d("./scales").scales;ne.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:M.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:M.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:M.RdBu,editType:"calc"}},coloraxis:w({_isSubplotObj:!0,editType:"calc"},v("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":493,"./attributes":373,"./scales":381}],380:[function(d,ne,ae){var w=d("../../lib"),v=d("../../plot_api/plot_template"),M=d("./layout_attributes"),T=d("./defaults");ne.exports=function(a,n){function r(c,b){return w.coerce(a,n,M,c,b)}r("colorscale.sequential"),r("colorscale.sequentialminus"),r("colorscale.diverging");var t=n._colorAxes,f,o;function i(c,b){return w.coerce(f,o,M.coloraxis,c,b)}for(var g in t){var p=t[g];if(p[0])f=a[g]||{},o=v.newContainer(n,g,"coloraxis"),o._name=g,T(f,o,n,i,{prefix:"",cLetter:"c"});else{for(var y=0;y<p[2].length;y++)p[2][y]();delete n._colorAxes[g]}}}},{"../../lib":503,"../../plot_api/plot_template":543,"./defaults":376,"./layout_attributes":379}],381:[function(d,ne,ae){var w=d("tinycolor2"),v={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},M=v.RdBu;function T(n,r){if(r||(r=M),!n)return r;function t(){try{n=v[n]||JSON.parse(n)}catch{n=r}}return typeof n=="string"&&(t(),typeof n=="string"&&t()),e(n)?n:r}function e(n){var r=0;if(!Array.isArray(n)||n.length<2||!n[0]||!n[n.length-1]||+n[0][0]!=0||+n[n.length-1][0]!=1)return!1;for(var t=0;t<n.length;t++){var f=n[t];if(f.length!==2||+f[0]<r||!w(f[1]).isValid())return!1;r=+f[0]}return!0}function a(n){return v[n]!==void 0?!0:e(n)}ne.exports={scales:v,defaultScale:M,get:T,isValid:a}},{tinycolor2:312}],382:[function(d,ne,ae){ne.exports=function(v,M,T,e,a){var n=(v-T)/(e-T),r=n+M/(e-T),t=(n+r)/2;return a==="left"||a==="bottom"?n:a==="center"||a==="middle"?t:a==="right"||a==="top"?r:n<2/3-t?n:r>4/3-t?r:t}},{}],383:[function(d,ne,ae){var w=d("../../lib"),v=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];ne.exports=function(T,e,a,n){return a==="left"?T=0:a==="center"?T=1:a==="right"?T=2:T=w.constrain(Math.floor(T*3),0,2),n==="bottom"?e=0:n==="middle"?e=1:n==="top"?e=2:e=w.constrain(Math.floor(e*3),0,2),v[e][T]}},{"../../lib":503}],384:[function(d,ne,ae){ae.selectMode=function(w){return w==="lasso"||w==="select"},ae.drawMode=function(w){return w==="drawclosedpath"||w==="drawopenpath"||w==="drawline"||w==="drawrect"||w==="drawcircle"},ae.openMode=function(w){return w==="drawline"||w==="drawopenpath"},ae.rectMode=function(w){return w==="select"||w==="drawline"||w==="drawrect"||w==="drawcircle"},ae.freeMode=function(w){return w==="lasso"||w==="drawclosedpath"||w==="drawopenpath"},ae.selectingOrDrawing=function(w){return ae.freeMode(w)||ae.rectMode(w)}},{}],385:[function(d,ne,ae){var w=d("mouse-event-offset"),v=d("has-hover"),M=d("has-passive-events"),T=d("../../lib").removeElement,e=d("../../plots/cartesian/constants"),a=ne.exports={};a.align=d("./align"),a.getCursor=d("./cursor");var n=d("./unhover");a.unhover=n.wrapped,a.unhoverRaw=n.raw,a.init=function(o){var i=o.gd,g=1,p=i._context.doubleClickDelay,y=o.element,c,b,l,_,s,A,m,h;i._mouseDownTime||(i._mouseDownTime=0),y.style.pointerEvents="all",y.onmousedown=L,M?(y._ontouchstart&&y.removeEventListener("touchstart",y._ontouchstart),y._ontouchstart=L,y.addEventListener("touchstart",L,{passive:!1})):y.ontouchstart=L;function x(P,z,I){return Math.abs(P)<I&&(P=0),Math.abs(z)<I&&(z=0),[P,z]}var u=o.clampFn||x;function L(P){i._dragged=!1,i._dragging=!0;var z=t(P);c=z[0],b=z[1],m=P.target,A=P,h=P.buttons===2||P.ctrlKey,typeof P.clientX>"u"&&typeof P.clientY>"u"&&(P.clientX=c,P.clientY=b),l=new Date().getTime(),l-i._mouseDownTime<p?g+=1:(g=1,i._mouseDownTime=l),o.prepFn&&o.prepFn(P,c,b),v&&!h?(s=r(),s.style.cursor=window.getComputedStyle(y).cursor):v||(s=document,_=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(y).cursor),document.addEventListener("mouseup",k),document.addEventListener("touchend",k),o.dragmode!==!1&&(P.preventDefault(),document.addEventListener("mousemove",S),document.addEventListener("touchmove",S,{passive:!1}))}function S(P){P.preventDefault();var z=t(P),I=o.minDrag||e.MINDRAG,D=u(z[0]-c,z[1]-b,I),R=D[0],O=D[1];(R||O)&&(i._dragged=!0,a.unhover(i,P)),i._dragged&&o.moveFn&&!h&&(i._dragdata={element:y,dx:R,dy:O},o.moveFn(R,O))}function k(P){if(delete i._dragdata,o.dragmode!==!1&&(P.preventDefault(),document.removeEventListener("mousemove",S),document.removeEventListener("touchmove",S)),document.removeEventListener("mouseup",k),document.removeEventListener("touchend",k),v?T(s):_&&(s.documentElement.style.cursor=_,_=null),!i._dragging){i._dragged=!1;return}if(i._dragging=!1,new Date().getTime()-i._mouseDownTime>p&&(g=Math.max(g-1,1)),i._dragged)o.doneFn&&o.doneFn();else if(o.clickFn&&o.clickFn(g,A),!h){var z;try{z=new MouseEvent("click",P)}catch{var I=t(P);z=document.createEvent("MouseEvents"),z.initMouseEvent("click",P.bubbles,P.cancelable,P.view,P.detail,P.screenX,P.screenY,I[0],I[1],P.ctrlKey,P.altKey,P.shiftKey,P.metaKey,P.button,P.relatedTarget)}m.dispatchEvent(z)}i._dragging=!1,i._dragged=!1}};function r(){var f=document.createElement("div");f.className="dragcover";var o=f.style;return o.position="fixed",o.left=0,o.right=0,o.top=0,o.bottom=0,o.zIndex=999999999,o.background="none",document.body.appendChild(f),f}a.coverSlip=r;function t(f){return w(f.changedTouches?f.changedTouches[0]:f,document.body)}},{"../../lib":503,"../../plots/cartesian/constants":561,"./align":382,"./cursor":383,"./unhover":386,"has-hover":228,"has-passive-events":229,"mouse-event-offset":242}],386:[function(d,ne,ae){var w=d("../../lib/events"),v=d("../../lib/throttle"),M=d("../../lib/dom").getGraphDiv,T=d("../fx/constants"),e=ne.exports={};e.wrapped=function(a,n,r){a=M(a),a._fullLayout&&v.clear(a._fullLayout._uid+T.HOVERID),e.raw(a,n,r)},e.raw=function(n,r){var t=n._fullLayout,f=n._hoverdata;r||(r={}),!(r.target&&!n._dragged&&w.triggerHandler(n,"plotly_beforehover",r)===!1)&&(t._hoverlayer.selectAll("g").remove(),t._hoverlayer.selectAll("line").remove(),t._hoverlayer.selectAll("circle").remove(),n._hoverdata=void 0,r.target&&f&&n.emit("plotly_unhover",{event:r,points:f}))}},{"../../lib/dom":491,"../../lib/events":492,"../../lib/throttle":530,"../fx/constants":400}],387:[function(d,ne,ae){ae.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},ae.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],388:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../lib"),M=v.numberFormat,T=d("fast-isnumeric"),e=d("tinycolor2"),a=d("../../registry"),n=d("../color"),r=d("../colorscale"),t=v.strTranslate,f=d("../../lib/svg_text_utils"),o=d("../../constants/xmlns_namespaces"),i=d("../../constants/alignment"),g=i.LINE_SPACING,p=d("../../constants/interactions").DESELECTDIM,y=d("../../traces/scatter/subtypes"),c=d("../../traces/scatter/make_bubble_size_func"),b=d("../../components/fx/helpers").appendArrayPointValue,l=ne.exports={};l.font=function(j,re,se,oe){v.isPlainObject(re)&&(oe=re.color,se=re.size,re=re.family),re&&j.style("font-family",re),se+1&&j.style("font-size",se+"px"),oe&&j.call(n.fill,oe)},l.setPosition=function(j,re,se){j.attr("x",re).attr("y",se)},l.setSize=function(j,re,se){j.attr("width",re).attr("height",se)},l.setRect=function(j,re,se,oe,N){j.call(l.setPosition,re,se).call(l.setSize,oe,N)},l.translatePoint=function(j,re,se,oe){var N=se.c2p(j.x),U=oe.c2p(j.y);if(T(N)&&T(U)&&re.node())re.node().nodeName==="text"?re.attr("x",N).attr("y",U):re.attr("transform",t(N,U));else return!1;return!0},l.translatePoints=function(j,re,se){j.each(function(oe){var N=w.select(this);l.translatePoint(oe,N,re,se)})},l.hideOutsideRangePoint=function(j,re,se,oe,N,U){re.attr("display",se.isPtWithinRange(j,N)&&oe.isPtWithinRange(j,U)?null:"none")},l.hideOutsideRangePoints=function(j,re){if(!!re._hasClipOnAxisFalse){var se=re.xaxis,oe=re.yaxis;j.each(function(N){var U=N[0].trace,q=U.xcalendar,Q=U.ycalendar,W=a.traceIs(U,"bar-like")?".bartext":".point,.textpoint";j.selectAll(W).each(function(X){l.hideOutsideRangePoint(X,w.select(this),se,oe,q,Q)})})}},l.crispRound=function(j,re,se){return!re||!T(re)?se||0:j._context.staticPlot?re:re<1?1:Math.round(re)},l.singleLineStyle=function(j,re,se,oe,N){re.style("fill","none");var U=(((j||[])[0]||{}).trace||{}).line||{},q=se||U.width||0,Q=N||U.dash||"";n.stroke(re,oe||U.color),l.dashLine(re,Q,q)},l.lineGroupStyle=function(j,re,se,oe){j.style("fill","none").each(function(N){var U=(((N||[])[0]||{}).trace||{}).line||{},q=re||U.width||0,Q=oe||U.dash||"";w.select(this).call(n.stroke,se||U.color).call(l.dashLine,Q,q)})},l.dashLine=function(j,re,se){se=+se||0,re=l.dashStyle(re,se),j.style({"stroke-dasharray":re,"stroke-width":se+"px"})},l.dashStyle=function(j,re){re=+re||1;var se=Math.max(re,3);return j==="solid"?j="":j==="dot"?j=se+"px,"+se+"px":j==="dash"?j=3*se+"px,"+3*se+"px":j==="longdash"?j=5*se+"px,"+5*se+"px":j==="dashdot"?j=3*se+"px,"+se+"px,"+se+"px,"+se+"px":j==="longdashdot"&&(j=5*se+"px,"+2*se+"px,"+se+"px,"+2*se+"px"),j};function _(j,re,se){var oe=re.fillpattern,N=oe&&l.getPatternAttr(oe.shape,0,"");if(N){var U=l.getPatternAttr(oe.bgcolor,0,null),q=l.getPatternAttr(oe.fgcolor,0,null),Q=oe.fgopacity,W=l.getPatternAttr(oe.size,0,8),X=l.getPatternAttr(oe.solidity,0,.3),ee=re.uid;l.pattern(j,"point",se,ee,N,W,X,void 0,oe.fillmode,U,q,Q)}else re.fillcolor&&j.call(n.fill,re.fillcolor)}l.singleFillStyle=function(j,re){var se=w.select(j.node()),oe=se.data(),N=((oe[0]||[])[0]||{}).trace||{};_(j,N,re)},l.fillGroupStyle=function(j,re){j.style("stroke-width",0).each(function(se){var oe=w.select(this);se[0].trace&&_(oe,se[0].trace,re)})};var s=d("./symbol_defs");l.symbolNames=[],l.symbolFuncs=[],l.symbolNeedLines={},l.symbolNoDot={},l.symbolNoFill={},l.symbolList=[],Object.keys(s).forEach(function(j){var re=s[j],se=re.n;l.symbolList.push(se,String(se),j,se+100,String(se+100),j+"-open"),l.symbolNames[se]=j,l.symbolFuncs[se]=re.f,re.needLine&&(l.symbolNeedLines[se]=!0),re.noDot?l.symbolNoDot[se]=!0:l.symbolList.push(se+200,String(se+200),j+"-dot",se+300,String(se+300),j+"-open-dot"),re.noFill&&(l.symbolNoFill[se]=!0)});var A=l.symbolNames.length,m="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";l.symbolNumber=function(j){if(T(j))j=+j;else if(typeof j=="string"){var re=0;j.indexOf("-open")>0&&(re=100,j=j.replace("-open","")),j.indexOf("-dot")>0&&(re+=200,j=j.replace("-dot","")),j=l.symbolNames.indexOf(j),j>=0&&(j+=re)}return j%100>=A||j>=400?0:Math.floor(Math.max(j,0))};function h(j,re){var se=j%100;return l.symbolFuncs[se](re)+(j>=200?m:"")}var x={x1:1,x2:0,y1:0,y2:0},u={x1:0,x2:0,y1:1,y2:0},L=M("~f"),S={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:x},horizontalreversed:{node:"linearGradient",attrs:x,reversed:!0},vertical:{node:"linearGradient",attrs:u},verticalreversed:{node:"linearGradient",attrs:u,reversed:!0}};l.gradient=function(j,re,se,oe,N,U){for(var q=N.length,Q=S[oe],W=new Array(q),X=0;X<q;X++)Q.reversed?W[q-1-X]=[L((1-N[X][0])*100),N[X][1]]:W[X]=[L(N[X][0]*100),N[X][1]];var ee=re._fullLayout,te="g"+ee._uid+"-"+se,ie=ee._defs.select(".gradients").selectAll("#"+te).data([oe+W.join(";")],v.identity);ie.exit().remove(),ie.enter().append(Q.node).each(function(){var le=w.select(this);Q.attrs&&le.attr(Q.attrs),le.attr("id",te);var ge=le.selectAll("stop").data(W);ge.exit().remove(),ge.enter().append("stop"),ge.each(function(fe){var pe=e(fe[1]);w.select(this).attr({offset:fe[0]+"%","stop-color":n.tinyRGB(pe),"stop-opacity":pe.getAlpha()})})}),j.style(U,J(te,re)).style(U+"-opacity",null),j.classed("gradient_filled",!0)},l.pattern=function(j,re,se,oe,N,U,q,Q,W,X,ee,te){var ie=re==="legend";Q&&(W==="overlay"?(X=Q,ee=n.contrast(X)):(X=void 0,ee=Q));var le=se._fullLayout,ge="p"+le._uid+"-"+oe,fe,pe,ye=function(Ve,Qe,Fe,Le,Ne){return Le+(Ne-Le)*(Ve-Qe)/(Fe-Qe)},Te,_e,De,Be,Ue={};switch(N){case"/":fe=U*Math.sqrt(2),pe=U*Math.sqrt(2),Te="M-"+fe/4+","+pe/4+"l"+fe/2+",-"+pe/2+"M0,"+pe+"L"+fe+",0M"+fe/4*3+","+pe/4*5+"l"+fe/2+",-"+pe/2,_e=q*U,Be="path",Ue={d:Te,opacity:te,stroke:ee,"stroke-width":_e+"px"};break;case"\\":fe=U*Math.sqrt(2),pe=U*Math.sqrt(2),Te="M"+fe/4*3+",-"+pe/4+"l"+fe/2+","+pe/2+"M0,0L"+fe+","+pe+"M-"+fe/4+","+pe/4*3+"l"+fe/2+","+pe/2,_e=q*U,Be="path",Ue={d:Te,opacity:te,stroke:ee,"stroke-width":_e+"px"};break;case"x":fe=U*Math.sqrt(2),pe=U*Math.sqrt(2),Te="M-"+fe/4+","+pe/4+"l"+fe/2+",-"+pe/2+"M0,"+pe+"L"+fe+",0M"+fe/4*3+","+pe/4*5+"l"+fe/2+",-"+pe/2+"M"+fe/4*3+",-"+pe/4+"l"+fe/2+","+pe/2+"M0,0L"+fe+","+pe+"M-"+fe/4+","+pe/4*3+"l"+fe/2+","+pe/2,_e=U-U*Math.sqrt(1-q),Be="path",Ue={d:Te,opacity:te,stroke:ee,"stroke-width":_e+"px"};break;case"|":fe=U,pe=U,Be="path",Te="M"+fe/2+",0L"+fe/2+","+pe,_e=q*U,Be="path",Ue={d:Te,opacity:te,stroke:ee,"stroke-width":_e+"px"};break;case"-":fe=U,pe=U,Be="path",Te="M0,"+pe/2+"L"+fe+","+pe/2,_e=q*U,Be="path",Ue={d:Te,opacity:te,stroke:ee,"stroke-width":_e+"px"};break;case"+":fe=U,pe=U,Be="path",Te="M"+fe/2+",0L"+fe/2+","+pe+"M0,"+pe/2+"L"+fe+","+pe/2,_e=U-U*Math.sqrt(1-q),Be="path",Ue={d:Te,opacity:te,stroke:ee,"stroke-width":_e+"px"};break;case".":fe=U,pe=U,q<Math.PI/4?De=Math.sqrt(q*U*U/Math.PI):De=ye(q,Math.PI/4,1,U/2,U/Math.sqrt(2)),Be="circle",Ue={cx:fe/2,cy:pe/2,r:De,opacity:te,fill:ee};break}var xe=[N||"noSh",X||"noBg",ee||"noFg",U,q].join(";"),Pe=le._defs.select(".patterns").selectAll("#"+ge).data([xe],v.identity);Pe.exit().remove(),Pe.enter().append("pattern").each(function(){var Ve=w.select(this);if(Ve.attr({id:ge,width:fe+"px",height:pe+"px",patternUnits:"userSpaceOnUse",patternTransform:ie?"scale(0.8)":""}),X){var Qe=Ve.selectAll("rect").data([0]);Qe.exit().remove(),Qe.enter().append("rect").attr({width:fe+"px",height:pe+"px",fill:X})}var Fe=Ve.selectAll(Be).data([0]);Fe.exit().remove(),Fe.enter().append(Be).attr(Ue)}),j.style("fill",J(ge,se)).style("fill-opacity",null),j.classed("pattern_filled",!0)},l.initGradients=function(j){var re=j._fullLayout,se=v.ensureSingle(re._defs,"g","gradients");se.selectAll("linearGradient,radialGradient").remove(),w.select(j).selectAll(".gradient_filled").classed("gradient_filled",!1)},l.initPatterns=function(j){var re=j._fullLayout,se=v.ensureSingle(re._defs,"g","patterns");se.selectAll("pattern").remove(),w.select(j).selectAll(".pattern_filled").classed("pattern_filled",!1)},l.getPatternAttr=function(j,re,se){return j&&v.isArrayOrTypedArray(j)?re<j.length?j[re]:se:j},l.pointStyle=function(j,re,se){if(!!j.size()){var oe=l.makePointStyleFns(re);j.each(function(N){l.singlePointStyle(N,w.select(this),re,oe,se)})}},l.singlePointStyle=function(j,re,se,oe,N){var U=se.marker,q=U.line;if(re.style("opacity",oe.selectedOpacityFn?oe.selectedOpacityFn(j):j.mo===void 0?U.opacity:j.mo),oe.ms2mrc){var Q;j.ms==="various"||U.size==="various"?Q=3:Q=oe.ms2mrc(j.ms),j.mrc=Q,oe.selectedSizeFn&&(Q=j.mrc=oe.selectedSizeFn(j));var W=l.symbolNumber(j.mx||U.symbol)||0;j.om=W%200>=100,re.attr("d",h(W,Q))}var X=!1,ee,te,ie;if(j.so)ie=q.outlierwidth,te=q.outliercolor,ee=U.outliercolor;else{var le=(q||{}).width;ie=(j.mlw+1||le+1||(j.trace?(j.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in j?te=j.mlcc=oe.lineScale(j.mlc):v.isArrayOrTypedArray(q.color)?te=n.defaultLine:te=q.color,v.isArrayOrTypedArray(U.color)&&(ee=n.defaultLine,X=!0),"mc"in j?ee=j.mcc=oe.markerScale(j.mc):ee=U.color||"rgba(0,0,0,0)",oe.selectedColorFn&&(ee=oe.selectedColorFn(j))}if(j.om)re.call(n.stroke,ee).style({"stroke-width":(ie||1)+"px",fill:"none"});else{re.style("stroke-width",(j.isBlank?0:ie)+"px");var ge=U.gradient,fe=j.mgt;fe?X=!0:fe=ge&&ge.type,v.isArrayOrTypedArray(fe)&&(fe=fe[0],S[fe]||(fe=0));var pe=U.pattern,ye=pe&&l.getPatternAttr(pe.shape,j.i,"");if(fe&&fe!=="none"){var Te=j.mgc;Te?X=!0:Te=ge.color;var _e=se.uid;X&&(_e+="-"+j.i),l.gradient(re,N,_e,fe,[[0,Te],[1,ee]],"fill")}else if(ye){var De=l.getPatternAttr(pe.bgcolor,j.i,null),Be=l.getPatternAttr(pe.fgcolor,j.i,null),Ue=pe.fgopacity,xe=l.getPatternAttr(pe.size,j.i,8),Pe=l.getPatternAttr(pe.solidity,j.i,.3),Ve=j.mcc||v.isArrayOrTypedArray(pe.shape)||v.isArrayOrTypedArray(pe.bgcolor)||v.isArrayOrTypedArray(pe.size)||v.isArrayOrTypedArray(pe.solidity),Qe=se.uid;Ve&&(Qe+="-"+j.i),l.pattern(re,"point",N,Qe,ye,xe,Pe,j.mcc,pe.fillmode,De,Be,Ue)}else n.fill(re,ee);ie&&n.stroke(re,te)}},l.makePointStyleFns=function(j){var re={},se=j.marker;return re.markerScale=l.tryColorscale(se,""),re.lineScale=l.tryColorscale(se,"line"),a.traceIs(j,"symbols")&&(re.ms2mrc=y.isBubble(j)?c(j):function(){return(se.size||6)/2}),j.selectedpoints&&v.extendFlat(re,l.makeSelectedPointStyleFns(j)),re},l.makeSelectedPointStyleFns=function(j){var re={},se=j.selected||{},oe=j.unselected||{},N=j.marker||{},U=se.marker||{},q=oe.marker||{},Q=N.opacity,W=U.opacity,X=q.opacity,ee=W!==void 0,te=X!==void 0;(v.isArrayOrTypedArray(Q)||ee||te)&&(re.selectedOpacityFn=function(De){var Be=De.mo===void 0?N.opacity:De.mo;return De.selected?ee?W:Be:te?X:p*Be});var ie=N.color,le=U.color,ge=q.color;(le||ge)&&(re.selectedColorFn=function(De){var Be=De.mcc||ie;return De.selected?le||Be:ge||Be});var fe=N.size,pe=U.size,ye=q.size,Te=pe!==void 0,_e=ye!==void 0;return a.traceIs(j,"symbols")&&(Te||_e)&&(re.selectedSizeFn=function(De){var Be=De.mrc||fe/2;return De.selected?Te?pe/2:Be:_e?ye/2:Be}),re},l.makeSelectedTextStyleFns=function(j){var re={},se=j.selected||{},oe=j.unselected||{},N=j.textfont||{},U=se.textfont||{},q=oe.textfont||{},Q=N.color,W=U.color,X=q.color;return re.selectedTextColorFn=function(ee){var te=ee.tc||Q;return ee.selected?W||te:X||(W?te:n.addOpacity(te,p))},re},l.selectedPointStyle=function(j,re){if(!(!j.size()||!re.selectedpoints)){var se=l.makeSelectedPointStyleFns(re),oe=re.marker||{},N=[];se.selectedOpacityFn&&N.push(function(U,q){U.style("opacity",se.selectedOpacityFn(q))}),se.selectedColorFn&&N.push(function(U,q){n.fill(U,se.selectedColorFn(q))}),se.selectedSizeFn&&N.push(function(U,q){var Q=q.mx||oe.symbol||0,W=se.selectedSizeFn(q);U.attr("d",h(l.symbolNumber(Q),W)),q.mrc2=W}),N.length&&j.each(function(U){for(var q=w.select(this),Q=0;Q<N.length;Q++)N[Q](q,U)})}},l.tryColorscale=function(j,re){var se=re?v.nestedProperty(j,re).get():j;if(se){var oe=se.color;if((se.colorscale||se._colorAx)&&v.isArrayOrTypedArray(oe))return r.makeColorScaleFuncFromTrace(se)}return v.identity};var k={start:1,end:-1,middle:0,bottom:1,top:-1};function P(j,re,se,oe,N){var U=w.select(j.node().parentNode),q=re.indexOf("top")!==-1?"top":re.indexOf("bottom")!==-1?"bottom":"middle",Q=re.indexOf("left")!==-1?"end":re.indexOf("right")!==-1?"start":"middle",W=oe?oe/.8+1:0,X=(f.lineCount(j)-1)*g+1,ee=k[Q]*W,te=se*.75+k[q]*W+(k[q]-1)*X*se/2;j.attr("text-anchor",Q),N||U.attr("transform",t(ee,te))}function z(j,re){var se=j.ts||re.textfont.size;return T(se)&&se>0?se:0}l.textPointStyle=function(j,re,se){if(!!j.size()){var oe;if(re.selectedpoints){var N=l.makeSelectedTextStyleFns(re);oe=N.selectedTextColorFn}var U=re.texttemplate,q=se._fullLayout;j.each(function(Q){var W=w.select(this),X=U?v.extractOption(Q,re,"txt","texttemplate"):v.extractOption(Q,re,"tx","text");if(!X&&X!==0){W.remove();return}if(U){var ee=re._module.formatLabels,te=ee?ee(Q,re,q):{},ie={};b(ie,re,Q.i);var le=re._meta||{};X=v.texttemplateString(X,te,q._d3locale,ie,Q,le)}var ge=Q.tp||re.textposition,fe=z(Q,re),pe=oe?oe(Q):Q.tc||re.textfont.color;W.call(l.font,Q.tf||re.textfont.family,fe,pe).text(X).call(f.convertToTspans,se).call(P,ge,fe,Q.mrc)})}},l.selectedTextStyle=function(j,re){if(!(!j.size()||!re.selectedpoints)){var se=l.makeSelectedTextStyleFns(re);j.each(function(oe){var N=w.select(this),U=se.selectedTextColorFn(oe),q=oe.tp||re.textposition,Q=z(oe,re);n.fill(N,U);var W=a.traceIs(re,"bar-like");P(N,q,Q,oe.mrc2||oe.mrc,W)})}};var I=.5;l.smoothopen=function(j,re){if(j.length<3)return"M"+j.join("L");var se="M"+j[0],oe=[],N;for(N=1;N<j.length-1;N++)oe.push(D(j[N-1],j[N],j[N+1],re));for(se+="Q"+oe[0][0]+" "+j[1],N=2;N<j.length-1;N++)se+="C"+oe[N-2][1]+" "+oe[N-1][0]+" "+j[N];return se+="Q"+oe[j.length-3][1]+" "+j[j.length-1],se},l.smoothclosed=function(j,re){if(j.length<3)return"M"+j.join("L")+"Z";var se="M"+j[0],oe=j.length-1,N=[D(j[oe],j[0],j[1],re)],U;for(U=1;U<oe;U++)N.push(D(j[U-1],j[U],j[U+1],re));for(N.push(D(j[oe-1],j[oe],j[0],re)),U=1;U<=oe;U++)se+="C"+N[U-1][1]+" "+N[U][0]+" "+j[U];return se+="C"+N[oe][1]+" "+N[0][0]+" "+j[0]+"Z",se};function D(j,re,se,oe){var N=j[0]-re[0],U=j[1]-re[1],q=se[0]-re[0],Q=se[1]-re[1],W=Math.pow(N*N+U*U,I/2),X=Math.pow(q*q+Q*Q,I/2),ee=(X*X*N-W*W*q)*oe,te=(X*X*U-W*W*Q)*oe,ie=3*X*(W+X),le=3*W*(W+X);return[[w.round(re[0]+(ie&&ee/ie),2),w.round(re[1]+(ie&&te/ie),2)],[w.round(re[0]-(le&&ee/le),2),w.round(re[1]-(le&&te/le),2)]]}var R={hv:function(j,re){return"H"+w.round(re[0],2)+"V"+w.round(re[1],2)},vh:function(j,re){return"V"+w.round(re[1],2)+"H"+w.round(re[0],2)},hvh:function(j,re){return"H"+w.round((j[0]+re[0])/2,2)+"V"+w.round(re[1],2)+"H"+w.round(re[0],2)},vhv:function(j,re){return"V"+w.round((j[1]+re[1])/2,2)+"H"+w.round(re[0],2)+"V"+w.round(re[1],2)}},O=function(j,re){return"L"+w.round(re[0],2)+","+w.round(re[1],2)};l.steps=function(j){var re=R[j]||O;return function(se){for(var oe="M"+w.round(se[0][0],2)+","+w.round(se[0][1],2),N=1;N<se.length;N++)oe+=re(se[N-1],se[N]);return oe}},l.makeTester=function(){var j=v.ensureSingleById(w.select("body"),"svg","js-plotly-tester",function(se){se.attr(o.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),re=v.ensureSingle(j,"path","js-reference-point",function(se){se.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});l.tester=j,l.testref=re},l.savedBBoxes={};var F=0,V=1e4;l.bBox=function(j,re,se){se||(se=G(j));var oe;if(se){if(oe=l.savedBBoxes[se],oe)return v.extendFlat({},oe)}else if(j.childNodes.length===1){var N=j.childNodes[0];if(se=G(N),se){var U=+N.getAttribute("x")||0,q=+N.getAttribute("y")||0,Q=N.getAttribute("transform");if(!Q){var W=l.bBox(N,!1,se);return U&&(W.left+=U,W.right+=U),q&&(W.top+=q,W.bottom+=q),W}if(se+="~"+U+"~"+q+"~"+Q,oe=l.savedBBoxes[se],oe)return v.extendFlat({},oe)}}var X,ee;re?X=j:(ee=l.tester.node(),X=j.cloneNode(!0),ee.appendChild(X)),w.select(X).attr("transform",null).call(f.positionText,0,0);var te=X.getBoundingClientRect(),ie=l.testref.node().getBoundingClientRect();re||ee.removeChild(X);var le={height:te.height,width:te.width,left:te.left-ie.left,top:te.top-ie.top,right:te.right-ie.left,bottom:te.bottom-ie.top};return F>=V&&(l.savedBBoxes={},F=0),se&&(l.savedBBoxes[se]=le),F++,v.extendFlat({},le)};function G(j){var re=j.getAttribute("data-unformatted");if(re!==null)return re+j.getAttribute("data-math")+j.getAttribute("text-anchor")+j.getAttribute("style")}l.setClipUrl=function(j,re,se){j.attr("clip-path",J(re,se))};function J(j,re){if(!j)return null;var se=re._context,oe=se._exportedPlot?"":se._baseUrl||"";return oe?"url('"+oe+"#"+j+"')":"url(#"+j+")"}l.getTranslate=function(j){var re=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,se=j.attr?"attr":"getAttribute",oe=j[se]("transform")||"",N=oe.replace(re,function(U,q,Q){return[q,Q].join(" ")}).split(" ");return{x:+N[0]||0,y:+N[1]||0}},l.setTranslate=function(j,re,se){var oe=/(\btranslate\(.*?\);?)/,N=j.attr?"attr":"getAttribute",U=j.attr?"attr":"setAttribute",q=j[N]("transform")||"";return re=re||0,se=se||0,q=q.replace(oe,"").trim(),q+=t(re,se),q=q.trim(),j[U]("transform",q),q},l.getScale=function(j){var re=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,se=j.attr?"attr":"getAttribute",oe=j[se]("transform")||"",N=oe.replace(re,function(U,q,Q){return[q,Q].join(" ")}).split(" ");return{x:+N[0]||1,y:+N[1]||1}},l.setScale=function(j,re,se){var oe=/(\bscale\(.*?\);?)/,N=j.attr?"attr":"getAttribute",U=j.attr?"attr":"setAttribute",q=j[N]("transform")||"";return re=re||1,se=se||1,q=q.replace(oe,"").trim(),q+="scale("+re+","+se+")",q=q.trim(),j[U]("transform",q),q};var Z=/\s*sc.*/;l.setPointGroupScale=function(j,re,se){if(re=re||1,se=se||1,!!j){var oe=re===1&&se===1?"":"scale("+re+","+se+")";j.each(function(){var N=(this.getAttribute("transform")||"").replace(Z,"");N+=oe,N=N.trim(),this.setAttribute("transform",N)})}};var Y=/translate\([^)]*\)\s*$/;l.setTextPointsScale=function(j,re,se){!j||j.each(function(){var oe,N=w.select(this),U=N.select("text");if(!!U.node()){var q=parseFloat(U.attr("x")||0),Q=parseFloat(U.attr("y")||0),W=(N.attr("transform")||"").match(Y);re===1&&se===1?oe=[]:oe=[t(q,Q),"scale("+re+","+se+")",t(-q,-Q)],W&&oe.push(W),N.attr("transform",oe.join(""))}})}},{"../../components/fx/helpers":402,"../../constants/alignment":471,"../../constants/interactions":478,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../registry":638,"../../traces/scatter/make_bubble_size_func":944,"../../traces/scatter/subtypes":952,"../color":366,"../colorscale":378,"./symbol_defs":389,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],389:[function(d,ne,ae){var w=d("@plotly/d3");ne.exports={circle:{n:0,f:function(v){var M=w.round(v,2);return"M"+M+",0A"+M+","+M+" 0 1,1 0,-"+M+"A"+M+","+M+" 0 0,1 "+M+",0Z"}},square:{n:1,f:function(v){var M=w.round(v,2);return"M"+M+","+M+"H-"+M+"V-"+M+"H"+M+"Z"}},diamond:{n:2,f:function(v){var M=w.round(v*1.3,2);return"M"+M+",0L0,"+M+"L-"+M+",0L0,-"+M+"Z"}},cross:{n:3,f:function(v){var M=w.round(v*.4,2),T=w.round(v*1.2,2);return"M"+T+","+M+"H"+M+"V"+T+"H-"+M+"V"+M+"H-"+T+"V-"+M+"H-"+M+"V-"+T+"H"+M+"V-"+M+"H"+T+"Z"}},x:{n:4,f:function(v){var M=w.round(v*.8/Math.sqrt(2),2),T="l"+M+","+M,e="l"+M+",-"+M,a="l-"+M+",-"+M,n="l-"+M+","+M;return"M0,"+M+T+e+a+e+a+n+a+n+T+n+T+"Z"}},"triangle-up":{n:5,f:function(v){var M=w.round(v*2/Math.sqrt(3),2),T=w.round(v/2,2),e=w.round(v,2);return"M-"+M+","+T+"H"+M+"L0,-"+e+"Z"}},"triangle-down":{n:6,f:function(v){var M=w.round(v*2/Math.sqrt(3),2),T=w.round(v/2,2),e=w.round(v,2);return"M-"+M+",-"+T+"H"+M+"L0,"+e+"Z"}},"triangle-left":{n:7,f:function(v){var M=w.round(v*2/Math.sqrt(3),2),T=w.round(v/2,2),e=w.round(v,2);return"M"+T+",-"+M+"V"+M+"L-"+e+",0Z"}},"triangle-right":{n:8,f:function(v){var M=w.round(v*2/Math.sqrt(3),2),T=w.round(v/2,2),e=w.round(v,2);return"M-"+T+",-"+M+"V"+M+"L"+e+",0Z"}},"triangle-ne":{n:9,f:function(v){var M=w.round(v*.6,2),T=w.round(v*1.2,2);return"M-"+T+",-"+M+"H"+M+"V"+T+"Z"}},"triangle-se":{n:10,f:function(v){var M=w.round(v*.6,2),T=w.round(v*1.2,2);return"M"+M+",-"+T+"V"+M+"H-"+T+"Z"}},"triangle-sw":{n:11,f:function(v){var M=w.round(v*.6,2),T=w.round(v*1.2,2);return"M"+T+","+M+"H-"+M+"V-"+T+"Z"}},"triangle-nw":{n:12,f:function(v){var M=w.round(v*.6,2),T=w.round(v*1.2,2);return"M-"+M+","+T+"V-"+M+"H"+T+"Z"}},pentagon:{n:13,f:function(v){var M=w.round(v*.951,2),T=w.round(v*.588,2),e=w.round(-v,2),a=w.round(v*-.309,2),n=w.round(v*.809,2);return"M"+M+","+a+"L"+T+","+n+"H-"+T+"L-"+M+","+a+"L0,"+e+"Z"}},hexagon:{n:14,f:function(v){var M=w.round(v,2),T=w.round(v/2,2),e=w.round(v*Math.sqrt(3)/2,2);return"M"+e+",-"+T+"V"+T+"L0,"+M+"L-"+e+","+T+"V-"+T+"L0,-"+M+"Z"}},hexagon2:{n:15,f:function(v){var M=w.round(v,2),T=w.round(v/2,2),e=w.round(v*Math.sqrt(3)/2,2);return"M-"+T+","+e+"H"+T+"L"+M+",0L"+T+",-"+e+"H-"+T+"L-"+M+",0Z"}},octagon:{n:16,f:function(v){var M=w.round(v*.924,2),T=w.round(v*.383,2);return"M-"+T+",-"+M+"H"+T+"L"+M+",-"+T+"V"+T+"L"+T+","+M+"H-"+T+"L-"+M+","+T+"V-"+T+"Z"}},star:{n:17,f:function(v){var M=v*1.4,T=w.round(M*.225,2),e=w.round(M*.951,2),a=w.round(M*.363,2),n=w.round(M*.588,2),r=w.round(-M,2),t=w.round(M*-.309,2),f=w.round(M*.118,2),o=w.round(M*.809,2),i=w.round(M*.382,2);return"M"+T+","+t+"H"+e+"L"+a+","+f+"L"+n+","+o+"L0,"+i+"L-"+n+","+o+"L-"+a+","+f+"L-"+e+","+t+"H-"+T+"L0,"+r+"Z"}},hexagram:{n:18,f:function(v){var M=w.round(v*.66,2),T=w.round(v*.38,2),e=w.round(v*.76,2);return"M-"+e+",0l-"+T+",-"+M+"h"+e+"l"+T+",-"+M+"l"+T+","+M+"h"+e+"l-"+T+","+M+"l"+T+","+M+"h-"+e+"l-"+T+","+M+"l-"+T+",-"+M+"h-"+e+"Z"}},"star-triangle-up":{n:19,f:function(v){var M=w.round(v*Math.sqrt(3)*.8,2),T=w.round(v*.8,2),e=w.round(v*1.6,2),a=w.round(v*4,2),n="A "+a+","+a+" 0 0 1 ";return"M-"+M+","+T+n+M+","+T+n+"0,-"+e+n+"-"+M+","+T+"Z"}},"star-triangle-down":{n:20,f:function(v){var M=w.round(v*Math.sqrt(3)*.8,2),T=w.round(v*.8,2),e=w.round(v*1.6,2),a=w.round(v*4,2),n="A "+a+","+a+" 0 0 1 ";return"M"+M+",-"+T+n+"-"+M+",-"+T+n+"0,"+e+n+M+",-"+T+"Z"}},"star-square":{n:21,f:function(v){var M=w.round(v*1.1,2),T=w.round(v*2,2),e="A "+T+","+T+" 0 0 1 ";return"M-"+M+",-"+M+e+"-"+M+","+M+e+M+","+M+e+M+",-"+M+e+"-"+M+",-"+M+"Z"}},"star-diamond":{n:22,f:function(v){var M=w.round(v*1.4,2),T=w.round(v*1.9,2),e="A "+T+","+T+" 0 0 1 ";return"M-"+M+",0"+e+"0,"+M+e+M+",0"+e+"0,-"+M+e+"-"+M+",0Z"}},"diamond-tall":{n:23,f:function(v){var M=w.round(v*.7,2),T=w.round(v*1.4,2);return"M0,"+T+"L"+M+",0L0,-"+T+"L-"+M+",0Z"}},"diamond-wide":{n:24,f:function(v){var M=w.round(v*1.4,2),T=w.round(v*.7,2);return"M0,"+T+"L"+M+",0L0,-"+T+"L-"+M+",0Z"}},hourglass:{n:25,f:function(v){var M=w.round(v,2);return"M"+M+","+M+"H-"+M+"L"+M+",-"+M+"H-"+M+"Z"},noDot:!0},bowtie:{n:26,f:function(v){var M=w.round(v,2);return"M"+M+","+M+"V-"+M+"L-"+M+","+M+"V-"+M+"Z"},noDot:!0},"circle-cross":{n:27,f:function(v){var M=w.round(v,2);return"M0,"+M+"V-"+M+"M"+M+",0H-"+M+"M"+M+",0A"+M+","+M+" 0 1,1 0,-"+M+"A"+M+","+M+" 0 0,1 "+M+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(v){var M=w.round(v,2),T=w.round(v/Math.sqrt(2),2);return"M"+T+","+T+"L-"+T+",-"+T+"M"+T+",-"+T+"L-"+T+","+T+"M"+M+",0A"+M+","+M+" 0 1,1 0,-"+M+"A"+M+","+M+" 0 0,1 "+M+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(v){var M=w.round(v,2);return"M0,"+M+"V-"+M+"M"+M+",0H-"+M+"M"+M+","+M+"H-"+M+"V-"+M+"H"+M+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(v){var M=w.round(v,2);return"M"+M+","+M+"L-"+M+",-"+M+"M"+M+",-"+M+"L-"+M+","+M+"M"+M+","+M+"H-"+M+"V-"+M+"H"+M+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(v){var M=w.round(v*1.3,2);return"M"+M+",0L0,"+M+"L-"+M+",0L0,-"+M+"ZM0,-"+M+"V"+M+"M-"+M+",0H"+M},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(v){var M=w.round(v*1.3,2),T=w.round(v*.65,2);return"M"+M+",0L0,"+M+"L-"+M+",0L0,-"+M+"ZM-"+T+",-"+T+"L"+T+","+T+"M-"+T+","+T+"L"+T+",-"+T},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(v){var M=w.round(v*1.4,2);return"M0,"+M+"V-"+M+"M"+M+",0H-"+M},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(v){var M=w.round(v,2);return"M"+M+","+M+"L-"+M+",-"+M+"M"+M+",-"+M+"L-"+M+","+M},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(v){var M=w.round(v*1.2,2),T=w.round(v*.85,2);return"M0,"+M+"V-"+M+"M"+M+",0H-"+M+"M"+T+","+T+"L-"+T+",-"+T+"M"+T+",-"+T+"L-"+T+","+T},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(v){var M=w.round(v/2,2),T=w.round(v,2);return"M"+M+","+T+"V-"+T+"m-"+T+",0V"+T+"M"+T+","+M+"H-"+T+"m0,-"+T+"H"+T},needLine:!0,noFill:!0},"y-up":{n:37,f:function(v){var M=w.round(v*1.2,2),T=w.round(v*1.6,2),e=w.round(v*.8,2);return"M-"+M+","+e+"L0,0M"+M+","+e+"L0,0M0,-"+T+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(v){var M=w.round(v*1.2,2),T=w.round(v*1.6,2),e=w.round(v*.8,2);return"M-"+M+",-"+e+"L0,0M"+M+",-"+e+"L0,0M0,"+T+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(v){var M=w.round(v*1.2,2),T=w.round(v*1.6,2),e=w.round(v*.8,2);return"M"+e+","+M+"L0,0M"+e+",-"+M+"L0,0M-"+T+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(v){var M=w.round(v*1.2,2),T=w.round(v*1.6,2),e=w.round(v*.8,2);return"M-"+e+","+M+"L0,0M-"+e+",-"+M+"L0,0M"+T+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(v){var M=w.round(v*1.4,2);return"M"+M+",0H-"+M},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(v){var M=w.round(v*1.4,2);return"M0,"+M+"V-"+M},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(v){var M=w.round(v,2);return"M"+M+",-"+M+"L-"+M+","+M},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(v){var M=w.round(v,2);return"M"+M+","+M+"L-"+M+",-"+M},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(v){var M=w.round(v,2),T=w.round(v*2,2);return"M0,0L-"+M+","+T+"H"+M+"Z"},noDot:!0},"arrow-down":{n:46,f:function(v){var M=w.round(v,2),T=w.round(v*2,2);return"M0,0L-"+M+",-"+T+"H"+M+"Z"},noDot:!0},"arrow-left":{n:47,f:function(v){var M=w.round(v*2,2),T=w.round(v,2);return"M0,0L"+M+",-"+T+"V"+T+"Z"},noDot:!0},"arrow-right":{n:48,f:function(v){var M=w.round(v*2,2),T=w.round(v,2);return"M0,0L-"+M+",-"+T+"V"+T+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(v){var M=w.round(v,2),T=w.round(v*2,2);return"M-"+M+",0H"+M+"M0,0L-"+M+","+T+"H"+M+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(v){var M=w.round(v,2),T=w.round(v*2,2);return"M-"+M+",0H"+M+"M0,0L-"+M+",-"+T+"H"+M+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(v){var M=w.round(v*2,2),T=w.round(v,2);return"M0,-"+T+"V"+T+"M0,0L"+M+",-"+T+"V"+T+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(v){var M=w.round(v*2,2),T=w.round(v,2);return"M0,-"+T+"V"+T+"M0,0L-"+M+",-"+T+"V"+T+"Z"},needLine:!0,noDot:!0}}},{"@plotly/d3":58}],390:[function(d,ne,ae){ne.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],391:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("../../registry"),M=d("../../plots/cartesian/axes"),T=d("../../lib"),e=d("./compute_error");ne.exports=function(r){for(var t=r.calcdata,f=0;f<t.length;f++){var o=t[f],i=o[0].trace;if(i.visible===!0&&v.traceIs(i,"errorBarsOK")){var g=M.getFromId(r,i.xaxis),p=M.getFromId(r,i.yaxis);a(o,i,g,"x"),a(o,i,p,"y")}}};function a(n,r,t,f){var o=r["error_"+f]||{},i=o.visible&&["linear","log"].indexOf(t.type)!==-1,g=[];if(!!i){for(var p=e(o),y=0;y<n.length;y++){var c=n[y],b=c.i;if(b===void 0)b=y;else if(b===null)continue;var l=c[f];if(!!w(t.c2l(l))){var _=p(l,b);if(w(_[0])&&w(_[1])){var s=c[f+"s"]=l-_[0],A=c[f+"h"]=l+_[1];g.push(s,A)}}}var m=t._id,h=r._extremes[m],x=M.findExtremes(t,g,T.extendFlat({tozero:h.opts.tozero},{padded:!0}));h.min=h.min.concat(x.min),h.max=h.max.concat(x.max)}}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./compute_error":392,"fast-isnumeric":190}],392:[function(d,ne,ae){ne.exports=function(M){var T=M.type,e=M.symmetric;if(T==="data"){var a=M.array||[];if(e)return function(o,i){var g=+a[i];return[g,g]};var n=M.arrayminus||[];return function(o,i){var g=+a[i],p=+n[i];return!isNaN(g)||!isNaN(p)?[p||0,g||0]:[NaN,NaN]}}else{var r=w(T,M.value),t=w(T,M.valueminus);return e||M.valueminus===void 0?function(o){var i=r(o);return[i,i]}:function(o){return[t(o),r(o)]}}};function w(v,M){if(v==="percent")return function(T){return Math.abs(T*M/100)};if(v==="constant")return function(){return Math.abs(M)};if(v==="sqrt")return function(T){return Math.sqrt(Math.abs(T))}}},{}],393:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("../../registry"),M=d("../../lib"),T=d("../../plot_api/plot_template"),e=d("./attributes");ne.exports=function(a,n,r,t){var f="error_"+t.axis,o=T.newContainer(n,f),i=a[f]||{};function g(s,A){return M.coerce(i,o,e,s,A)}var p=i.array!==void 0||i.value!==void 0||i.type==="sqrt",y=g("visible",p);if(y!==!1){var c=g("type","array"in i?"data":"percent"),b=!0;c!=="sqrt"&&(b=g("symmetric",!((c==="data"?"arrayminus":"valueminus")in i))),c==="data"?(g("array"),g("traceref"),b||(g("arrayminus"),g("tracerefminus"))):(c==="percent"||c==="constant")&&(g("value"),b||g("valueminus"));var l="copy_"+t.inherit+"style";if(t.inherit){var _=n["error_"+t.inherit];(_||{}).visible&&g(l,!(i.color||w(i.thickness)||w(i.width)))}(!t.inherit||!o[l])&&(g("color",r),g("thickness"),g("width",v.traceIs(n,"gl3d")?0:4))}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"./attributes":390,"fast-isnumeric":190}],394:[function(d,ne,ae){var w=d("../../lib"),v=d("../../plot_api/edit_types").overrideAll,M=d("./attributes"),T={error_x:w.extendFlat({},M),error_y:w.extendFlat({},M)};delete T.error_x.copy_zstyle,delete T.error_y.copy_zstyle,delete T.error_y.copy_ystyle;var e={error_x:w.extendFlat({},M),error_y:w.extendFlat({},M),error_z:w.extendFlat({},M)};delete e.error_x.copy_ystyle,delete e.error_y.copy_ystyle,delete e.error_z.copy_ystyle,delete e.error_z.copy_zstyle,ne.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:T,bar:T,histogram:T,scatter3d:v(e,"calc","nested"),scattergl:v(T,"calc","nested")}},supplyDefaults:d("./defaults"),calc:d("./calc"),makeComputeError:d("./compute_error"),plot:d("./plot"),style:d("./style"),hoverInfo:a};function a(n,r,t){(r.error_y||{}).visible&&(t.yerr=n.yh-n.y,r.error_y.symmetric||(t.yerrneg=n.y-n.ys)),(r.error_x||{}).visible&&(t.xerr=n.xh-n.x,r.error_x.symmetric||(t.xerrneg=n.x-n.xs))}},{"../../lib":503,"../../plot_api/edit_types":536,"./attributes":390,"./calc":391,"./compute_error":392,"./defaults":393,"./plot":395,"./style":396}],395:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("fast-isnumeric"),M=d("../drawing"),T=d("../../traces/scatter/subtypes");ne.exports=function(n,r,t,f){var o,i=t.xaxis,g=t.yaxis,p=f&&f.duration>0;r.each(function(y){var c=y[0].trace,b=c.error_x||{},l=c.error_y||{},_;c.ids&&(_=function(h){return h.id});var s=T.hasMarkers(c)&&c.marker.maxdisplayed>0;!l.visible&&!b.visible&&(y=[]);var A=w.select(this).selectAll("g.errorbar").data(y,_);if(A.exit().remove(),!!y.length){b.visible||A.selectAll("path.xerror").remove(),l.visible||A.selectAll("path.yerror").remove(),A.style("opacity",1);var m=A.enter().append("g").classed("errorbar",!0);p&&m.style("opacity",0).transition().duration(f.duration).style("opacity",1),M.setClipUrl(A,t.layerClipId,n),A.each(function(h){var x=w.select(this),u=e(h,i,g);if(!(s&&!h.vis)){var L,S=x.select("path.yerror");if(l.visible&&v(u.x)&&v(u.yh)&&v(u.ys)){var k=l.width;L="M"+(u.x-k)+","+u.yh+"h"+2*k+"m-"+k+",0V"+u.ys,u.noYS||(L+="m-"+k+",0h"+2*k),o=!S.size(),o?S=x.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):p&&(S=S.transition().duration(f.duration).ease(f.easing)),S.attr("d",L)}else S.remove();var P=x.select("path.xerror");if(b.visible&&v(u.y)&&v(u.xh)&&v(u.xs)){var z=(b.copy_ystyle?l:b).width;L="M"+u.xh+","+(u.y-z)+"v"+2*z+"m0,-"+z+"H"+u.xs,u.noXS||(L+="m0,-"+z+"v"+2*z),o=!P.size(),o?P=x.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):p&&(P=P.transition().duration(f.duration).ease(f.easing)),P.attr("d",L)}else P.remove()}})}})};function e(a,n,r){var t={x:n.c2p(a.x),y:r.c2p(a.y)};return a.yh!==void 0&&(t.yh=r.c2p(a.yh),t.ys=r.c2p(a.ys),v(t.ys)||(t.noYS=!0,t.ys=r.c2p(a.ys,!0))),a.xh!==void 0&&(t.xh=n.c2p(a.xh),t.xs=n.c2p(a.xs),v(t.xs)||(t.noXS=!0,t.xs=n.c2p(a.xs,!0))),t}},{"../../traces/scatter/subtypes":952,"../drawing":388,"@plotly/d3":58,"fast-isnumeric":190}],396:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../color");ne.exports=function(T){T.each(function(e){var a=e[0].trace,n=a.error_y||{},r=a.error_x||{},t=w.select(this);t.selectAll("path.yerror").style("stroke-width",n.thickness+"px").call(v.stroke,n.color),r.copy_ystyle&&(r=n),t.selectAll("path.xerror").style("stroke-width",r.thickness+"px").call(v.stroke,r.color)})}},{"../color":366,"@plotly/d3":58}],397:[function(d,ne,ae){var w=d("../../plots/font_attributes"),v=d("./layout_attributes").hoverlabel,M=d("../../lib/extend").extendFlat;ne.exports={hoverlabel:{bgcolor:M({},v.bgcolor,{arrayOk:!0}),bordercolor:M({},v.bordercolor,{arrayOk:!0}),font:w({arrayOk:!0,editType:"none"}),align:M({},v.align,{arrayOk:!0}),namelength:M({},v.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":493,"../../plots/font_attributes":585,"./layout_attributes":407}],398:[function(d,ne,ae){var w=d("../../lib"),v=d("../../registry");ne.exports=function(e){var a=e.calcdata,n=e._fullLayout;function r(g){return function(p){return w.coerceHoverinfo({hoverinfo:p},{_module:g._module},n)}}for(var t=0;t<a.length;t++){var f=a[t],o=f[0].trace;if(!v.traceIs(o,"pie-like")){var i=v.traceIs(o,"2dMap")?M:w.fillArray;i(o.hoverinfo,f,"hi",r(o)),o.hovertemplate&&i(o.hovertemplate,f,"ht"),o.hoverlabel&&(i(o.hoverlabel.bgcolor,f,"hbg"),i(o.hoverlabel.bordercolor,f,"hbc"),i(o.hoverlabel.font.size,f,"hts"),i(o.hoverlabel.font.color,f,"htc"),i(o.hoverlabel.font.family,f,"htf"),i(o.hoverlabel.namelength,f,"hnl"),i(o.hoverlabel.align,f,"hta"))}}};function M(T,e,a,n){n=n||w.identity,Array.isArray(T)&&(e[0][a]=n(T))}},{"../../lib":503,"../../registry":638}],399:[function(d,ne,ae){var w=d("../../registry"),v=d("./hover").hover;ne.exports=function(T,e,a){var n=w.getComponentMethod("annotations","onClick")(T,T._hoverdata);a!==void 0&&v(T,e,a,!0);function r(){T.emit("plotly_click",{points:T._hoverdata,event:e})}T._hoverdata&&e&&e.target&&(n&&n.then?n.then(r):r(),e.stopImmediatePropagation&&e.stopImmediatePropagation())}},{"../../registry":638,"./hover":403}],400:[function(d,ne,ae){ne.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],401:[function(d,ne,ae){var w=d("../../lib"),v=d("./attributes"),M=d("./hoverlabel_defaults");ne.exports=function(e,a,n,r){function t(o,i){return w.coerce(e,a,v,o,i)}var f=w.extendFlat({},r.hoverlabel);a.hovertemplate&&(f.namelength=-1),M(e,a,t,f)}},{"../../lib":503,"./attributes":397,"./hoverlabel_defaults":404}],402:[function(d,ne,ae){var w=d("../../lib");ae.getSubplot=function(n){return n.subplot||n.xaxis+n.yaxis||n.geo},ae.isTraceInSubplots=function(n,r){if(n.type==="splom"){for(var t=n.xaxes||[],f=n.yaxes||[],o=0;o<t.length;o++)for(var i=0;i<f.length;i++)if(r.indexOf(t[o]+f[i])!==-1)return!0;return!1}return r.indexOf(ae.getSubplot(n))!==-1},ae.flat=function(n,r){for(var t=new Array(n.length),f=0;f<n.length;f++)t[f]=r;return t},ae.p2c=function(n,r){for(var t=new Array(n.length),f=0;f<n.length;f++)t[f]=n[f].p2c(r);return t},ae.getDistanceFunction=function(n,r,t,f){return n==="closest"?f||ae.quadrature(r,t):n.charAt(0)==="x"?r:t},ae.getClosest=function(n,r,t){if(t.index!==!1)t.index>=0&&t.index<n.length?t.distance=0:t.index=!1;else for(var f=0;f<n.length;f++){var o=r(n[f]);o<=t.distance&&(t.index=f,t.distance=o)}return t},ae.inbox=function(n,r,t){return n*r<0||n===0?t:1/0},ae.quadrature=function(n,r){return function(t){var f=n(t),o=r(t);return Math.sqrt(f*f+o*o)}},ae.makeEventData=function(n,r,t){var f="index"in n?n.index:n.pointNumber,o={data:r._input,fullData:r,curveNumber:r.index,pointNumber:f};if(r._indexToPoints){var i=r._indexToPoints[f];i.length===1?o.pointIndex=i[0]:o.pointIndices=i}else o.pointIndex=f;return r._module.eventData?o=r._module.eventData(o,n,r,t,f):("xVal"in n?o.x=n.xVal:"x"in n&&(o.x=n.x),"yVal"in n?o.y=n.yVal:"y"in n&&(o.y=n.y),n.xa&&(o.xaxis=n.xa),n.ya&&(o.yaxis=n.ya),n.zLabelVal!==void 0&&(o.z=n.zLabelVal)),ae.appendArrayPointValue(o,r,f),o},ae.appendArrayPointValue=function(n,r,t){var f=r._arrayAttrs;if(!!f)for(var o=0;o<f.length;o++){var i=f[o],g=M(i);if(n[g]===void 0){var p=w.nestedProperty(r,i).get(),y=T(p,t);y!==void 0&&(n[g]=y)}}},ae.appendArrayMultiPointValues=function(n,r,t){var f=r._arrayAttrs;if(!!f)for(var o=0;o<f.length;o++){var i=f[o],g=M(i);if(n[g]===void 0){for(var p=w.nestedProperty(r,i).get(),y=new Array(t.length),c=0;c<t.length;c++)y[c]=T(p,t[c]);n[g]=y}}};var v={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function M(n){return v[n]||n}function T(n,r){if(Array.isArray(r)){if(Array.isArray(n)&&Array.isArray(n[r[0]]))return n[r[0]][r[1]]}else return n[r]}var e={x:!0,y:!0},a={"x unified":!0,"y unified":!0};ae.isUnifiedHover=function(n){return typeof n!="string"?!1:!!a[n]},ae.isXYhover=function(n){return typeof n!="string"?!1:!!e[n]}},{"../../lib":503}],403:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("fast-isnumeric"),M=d("tinycolor2"),T=d("../../lib"),e=T.strTranslate,a=T.strRotate,n=d("../../lib/events"),r=d("../../lib/svg_text_utils"),t=d("../../lib/override_cursor"),f=d("../drawing"),o=d("../color"),i=d("../dragelement"),g=d("../../plots/cartesian/axes"),p=d("../../registry"),y=d("./helpers"),c=d("./constants"),b=d("../legend/defaults"),l=d("../legend/draw"),_=c.YANGLE,s=Math.PI*_/180,A=1/Math.sin(s),m=Math.cos(s),h=Math.sin(s),x=c.HOVERARROWSIZE,u=c.HOVERTEXTPAD,L={box:!0,ohlc:!0,violin:!0,candlestick:!0},S={scatter:!0,scattergl:!0,splom:!0};ae.hover=function(U,q,Q,W){U=T.getGraphDiv(U);var X=q.target;T.throttle(U._fullLayout._uid+c.HOVERID,c.HOVERMINTIME,function(){k(U,q,Q,W,X)})},ae.loneHover=function(U,q){var Q=!0;Array.isArray(U)||(Q=!1,U=[U]);var W=q.gd,X=re(W),ee=se(W),te=U.map(function(_e){var De=_e._x0||_e.x0||_e.x||0,Be=_e._x1||_e.x1||_e.x||0,Ue=_e._y0||_e.y0||_e.y||0,xe=_e._y1||_e.y1||_e.y||0,Pe=_e.eventData;if(Pe){var Ve=Math.min(De,Be),Qe=Math.max(De,Be),Fe=Math.min(Ue,xe),Le=Math.max(Ue,xe),Ne=_e.trace;if(p.traceIs(Ne,"gl3d")){var dt=W._fullLayout[Ne.scene]._scene.container,Dt=dt.offsetLeft,Xt=dt.offsetTop;Ve+=Dt,Qe+=Dt,Fe+=Xt,Le+=Xt}Pe.bbox={x0:Ve+ee,x1:Qe+ee,y0:Fe+X,y1:Le+X},q.inOut_bbox&&q.inOut_bbox.push(Pe.bbox)}else Pe=!1;return{color:_e.color||o.defaultLine,x0:_e.x0||_e.x||0,x1:_e.x1||_e.x||0,y0:_e.y0||_e.y||0,y1:_e.y1||_e.y||0,xLabel:_e.xLabel,yLabel:_e.yLabel,zLabel:_e.zLabel,text:_e.text,name:_e.name,idealAlign:_e.idealAlign,borderColor:_e.borderColor,fontFamily:_e.fontFamily,fontSize:_e.fontSize,fontColor:_e.fontColor,nameLength:_e.nameLength,textAlign:_e.textAlign,trace:_e.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:_e.hovertemplate||!1,hovertemplateLabels:_e.hovertemplateLabels||!1,eventData:Pe}}),ie=!1,le=I(te,{gd:W,hovermode:"closest",rotateLabels:ie,bgColor:q.bgColor||o.background,container:w.select(q.container),outerContainer:q.outerContainer||q.container}),ge=5,fe=0,pe=0;le.sort(function(_e,De){return _e.y0-De.y0}).each(function(_e,De){var Be=_e.y0-_e.by/2;Be-ge<fe?_e.offset=fe-Be+ge:_e.offset=0,fe=Be+_e.by+_e.offset,De===q.anchorIndex&&(pe=_e.offset)}).each(function(_e){_e.offset-=pe});var ye=W._fullLayout._invScaleX,Te=W._fullLayout._invScaleY;return O(le,ie,ye,Te),Q?le:le.node()};function k(N,U,q,Q,W){q||(q="xy");var X=Array.isArray(q)?q:[q],ee=N._fullLayout,te=ee._plots||[],ie=te[q],le=ee._has("cartesian");if(ie){var ge=ie.overlays.map(function(sr){return sr.id});X=X.concat(ge)}for(var fe=X.length,pe=new Array(fe),ye=new Array(fe),Te=!1,_e=0;_e<fe;_e++){var De=X[_e];if(te[De])Te=!0,pe[_e]=te[De].xaxis,ye[_e]=te[De].yaxis;else if(ee[De]&&ee[De]._subplot){var Be=ee[De]._subplot;pe[_e]=Be.xaxis,ye[_e]=Be.yaxis}else{T.warn("Unrecognized subplot: "+De);return}}var Ue=U.hovermode||ee.hovermode;if(Ue&&!Te&&(Ue="closest"),["x","y","closest","x unified","y unified"].indexOf(Ue)===-1||!N.calcdata||N.querySelector(".zoombox")||N._dragging)return i.unhoverRaw(N,U);var xe=ee.hoverdistance;xe===-1&&(xe=1/0);var Pe=ee.spikedistance;Pe===-1&&(Pe=1/0);var Ve=[],Qe=[],Fe,Le,Ne,dt,Dt,Xt,At,zt,Ut,Ct,Mt,rt,ct,Ze={hLinePoint:null,vLinePoint:null},ke=!1;if(Array.isArray(U))for(Ue="array",Ne=0;Ne<U.length;Ne++)Dt=N.calcdata[U[Ne].curveNumber||0],Dt&&(Xt=Dt[0].trace,Dt[0].trace.hoverinfo!=="skip"&&(Qe.push(Dt),Xt.orientation==="h"&&(ke=!0)));else{for(dt=0;dt<N.calcdata.length;dt++)Dt=N.calcdata[dt],Xt=Dt[0].trace,Xt.hoverinfo!=="skip"&&y.isTraceInSubplots(Xt,X)&&(Qe.push(Dt),Xt.orientation==="h"&&(ke=!0));var Ge=!W,Je,ot;if(Ge)"xpx"in U?Je=U.xpx:Je=pe[0]._length/2,"ypx"in U?ot=U.ypx:ot=ye[0]._length/2;else{if(n.triggerHandler(N,"plotly_beforehover",U)===!1)return;var Pt=W.getBoundingClientRect();Je=U.clientX-Pt.left,ot=U.clientY-Pt.top,ee._calcInverseTransform(N);var _t=T.apply3DTransform(ee._invTransform)(Je,ot);if(Je=_t[0],ot=_t[1],Je<0||Je>pe[0]._length||ot<0||ot>ye[0]._length)return i.unhoverRaw(N,U)}if(U.pointerX=Je+pe[0]._offset,U.pointerY=ot+ye[0]._offset,"xval"in U?Fe=y.flat(X,U.xval):Fe=y.p2c(pe,Je),"yval"in U?Le=y.flat(X,U.yval):Le=y.p2c(ye,ot),!v(Fe[0])||!v(Le[0]))return T.warn("Fx.hover failed",U,N),i.unhoverRaw(N,U)}var Bt=1/0;function qt(sr,Ir){for(dt=0;dt<Qe.length;dt++)if(Dt=Qe[dt],!(!Dt||!Dt[0]||!Dt[0].trace)&&(Xt=Dt[0].trace,!(Xt.visible!==!0||Xt._length===0)&&["carpet","contourcarpet"].indexOf(Xt._module.name)===-1)){if(Xt.type==="splom"?(zt=0,At=X[zt]):(At=y.getSubplot(Xt),zt=X.indexOf(At)),Ut=Ue,y.isUnifiedHover(Ut)&&(Ut=Ut.charAt(0)),rt={cd:Dt,trace:Xt,xa:pe[zt],ya:ye[zt],maxHoverDistance:xe,maxSpikeDistance:Pe,index:!1,distance:Math.min(Bt,xe),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:o.defaultLine,name:Xt.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},ee[At]&&(rt.subplot=ee[At]._subplot),ee._splomScenes&&ee._splomScenes[Xt.uid]&&(rt.scene=ee._splomScenes[Xt.uid]),ct=Ve.length,Ut==="array"){var Zr=U[dt];"pointNumber"in Zr?(rt.index=Zr.pointNumber,Ut="closest"):(Ut="","xval"in Zr&&(Ct=Zr.xval,Ut="x"),"yval"in Zr&&(Mt=Zr.yval,Ut=Ut?"closest":"y"))}else sr!==void 0&&Ir!==void 0?(Ct=sr,Mt=Ir):(Ct=Fe[zt],Mt=Le[zt]);if(xe!==0)if(Xt._module&&Xt._module.hoverPoints){var Pr=Xt._module.hoverPoints(rt,Ct,Mt,Ut,{finiteRange:!0,hoverLayer:ee._hoverlayer});if(Pr)for(var wr,Nr=0;Nr<Pr.length;Nr++)wr=Pr[Nr],v(wr.x0)&&v(wr.y0)&&Ve.push(F(wr,Ue))}else T.log("Unrecognized trace type in hover:",Xt);if(Ue==="closest"&&Ve.length>ct&&(Ve.splice(0,ct),Bt=Ve[0].distance),le&&Pe!==0&&Ve.length===0){rt.distance=Pe,rt.index=!1;var Sn=Xt._module.hoverPoints(rt,Ct,Mt,"closest",{hoverLayer:ee._hoverlayer});if(Sn&&(Sn=Sn.filter(function(Aa){return Aa.spikeDistance<=Pe})),Sn&&Sn.length){var _n,Wn=Sn.filter(function(Aa){return Aa.xa.showspikes&&Aa.xa.spikesnap!=="hovered data"});if(Wn.length){var Ln=Wn[0];v(Ln.x0)&&v(Ln.y0)&&(_n=$t(Ln),(!Ze.vLinePoint||Ze.vLinePoint.spikeDistance>_n.spikeDistance)&&(Ze.vLinePoint=_n))}var Xn=Sn.filter(function(Aa){return Aa.ya.showspikes&&Aa.ya.spikesnap!=="hovered data"});if(Xn.length){var Kn=Xn[0];v(Kn.x0)&&v(Kn.y0)&&(_n=$t(Kn),(!Ze.hLinePoint||Ze.hLinePoint.spikeDistance>_n.spikeDistance)&&(Ze.hLinePoint=_n))}}}}}qt();function Ot(sr,Ir,Zr){for(var Pr=null,wr=1/0,Nr,Sn=0;Sn<sr.length;Sn++)Nr=sr[Sn].spikeDistance,Zr&&Sn===0&&(Nr=-1/0),Nr<=wr&&Nr<=Ir&&(Pr=sr[Sn],wr=Nr);return Pr}function $t(sr){return sr?{xa:sr.xa,ya:sr.ya,x:sr.xSpike!==void 0?sr.xSpike:(sr.x0+sr.x1)/2,y:sr.ySpike!==void 0?sr.ySpike:(sr.y0+sr.y1)/2,distance:sr.distance,spikeDistance:sr.spikeDistance,curveNumber:sr.trace.index,color:sr.color,pointNumber:sr.index}:null}var rr={fullLayout:ee,container:ee._hoverlayer,event:U},er=N._spikepoints,pr={vLinePoint:Ze.vLinePoint,hLinePoint:Ze.hLinePoint};N._spikepoints=pr;var Xr=function(){Ve.sort(function(sr,Ir){return sr.distance-Ir.distance}),Ve=Y(Ve,Ue)};Xr();var hn=Ue.charAt(0),Qr=(hn==="x"||hn==="y")&&Ve[0]&&S[Ve[0].trace.type];if(le&&Pe!==0&&Ve.length!==0){var nt=Ve.filter(function(sr){return sr.ya.showspikes}),Ht=Ot(nt,Pe,Qr);Ze.hLinePoint=$t(Ht);var Kt=Ve.filter(function(sr){return sr.xa.showspikes}),Gt=Ot(Kt,Pe,Qr);Ze.vLinePoint=$t(Gt)}if(Ve.length===0){var br=i.unhoverRaw(N,U);return le&&(Ze.hLinePoint!==null||Ze.vLinePoint!==null)&&J(er)&&V(N,Ze,rr),br}if(le&&J(er)&&V(N,Ze,rr),y.isXYhover(Ut)&&Ve[0].length!==0&&Ve[0].trace.type!=="splom"){var tt=Ve[0];L[tt.trace.type]?Ve=Ve.filter(function(sr){return sr.trace.index===tt.trace.index}):Ve=[tt];var je=Ve.length,st=j("x",tt,ee),ft=j("y",tt,ee);qt(st,ft);var Me=[],Se={},Ke=0,Xe=function(sr){var Ir=L[sr.trace.type]?P(sr):sr.trace.index;if(!Se[Ir])Ke++,Se[Ir]=Ke,Me.push(sr);else{var Zr=Se[Ir]-1,Pr=Me[Zr];Zr>0&&Math.abs(sr.distance)<Math.abs(Pr.distance)&&(Me[Zr]=sr)}},it;for(it=0;it<je;it++)Xe(Ve[it]);for(it=Ve.length-1;it>je-1;it--)Xe(Ve[it]);Ve=Me,Xr()}var pt=N._hoverdata,vt=[],St=re(N),kt=se(N);for(Ne=0;Ne<Ve.length;Ne++){var Nt=Ve[Ne],nr=y.makeEventData(Nt,Nt.trace,Nt.cd);if(Nt.hovertemplate!==!1){var fr=!1;Nt.cd[Nt.index]&&Nt.cd[Nt.index].ht&&(fr=Nt.cd[Nt.index].ht),Nt.hovertemplate=fr||Nt.trace.hovertemplate||!1}if(Nt.xa&&Nt.ya){var Hr=Nt.x0+Nt.xa._offset,Er=Nt.x1+Nt.xa._offset,_r=Nt.y0+Nt.ya._offset,en=Nt.y1+Nt.ya._offset,dr=Math.min(Hr,Er),xr=Math.max(Hr,Er),Ur=Math.min(_r,en),Yr=Math.max(_r,en);nr.bbox={x0:dr+kt,x1:xr+kt,y0:Ur+St,y1:Yr+St}}Nt.eventData=[nr],vt.push(nr)}N._hoverdata=vt;var Ar=Ue==="y"&&(Qe.length>1||Ve.length>1)||Ue==="closest"&&ke&&Ve.length>1,et=o.combine(ee.plot_bgcolor||o.background,ee.paper_bgcolor),Lt=I(Ve,{gd:N,hovermode:Ue,rotateLabels:Ar,bgColor:et,container:ee._hoverlayer,outerContainer:ee._paper.node(),commonLabelOpts:ee.hoverlabel,hoverdistance:ee.hoverdistance});if(y.isUnifiedHover(Ue)||(R(Lt,Ar?"xa":"ya",ee),O(Lt,Ar,ee._invScaleX,ee._invScaleY)),W&&W.tagName){var Zt=p.getComponentMethod("annotations","hasClickToShow")(N,vt);t(w.select(W),Zt?"pointer":"")}!W||Q||!G(N,U,pt)||(pt&&N.emit("plotly_unhover",{event:U,points:pt}),N.emit("plotly_hover",{event:U,points:N._hoverdata,xaxes:pe,yaxes:ye,xvals:Fe,yvals:Le}))}function P(N){return[N.trace.index,N.index,N.x0,N.y0,N.name,N.attr,N.xa?N.xa._id:"",N.ya?N.ya._id:""].join(",")}var z=/<extra>([\s\S]*)<\/extra>/;function I(N,U){var q=U.gd,Q=q._fullLayout,W=U.hovermode,X=U.rotateLabels,ee=U.bgColor,te=U.container,ie=U.outerContainer,le=U.commonLabelOpts||{};if(N.length===0)return[[]];var ge=U.fontFamily||c.HOVERFONT,fe=U.fontSize||c.HOVERFONTSIZE,pe=N[0],ye=pe.xa,Te=pe.ya,_e=W.charAt(0),De=pe[_e+"Label"],Be=oe(q,ie),Ue=Be.top,xe=Be.width,Pe=Be.height,Ve=De!==void 0&&pe.distance<=U.hoverdistance&&(W==="x"||W==="y");if(Ve){var Qe=!0,Fe,Le;for(Fe=0;Fe<N.length;Fe++)if(Qe&&N[Fe].zLabel===void 0&&(Qe=!1),Le=N[Fe].hoverinfo||N[Fe].trace.hoverinfo,Le){var Ne=Array.isArray(Le)?Le:Le.split("+");if(Ne.indexOf("all")===-1&&Ne.indexOf(W)===-1){Ve=!1;break}}Qe&&(Ve=!1)}var dt=te.selectAll("g.axistext").data(Ve?[0]:[]);if(dt.enter().append("g").classed("axistext",!0),dt.exit().remove(),dt.each(function(){var Gt=w.select(this),br=T.ensureSingle(Gt,"path","",function(en){en.style({"stroke-width":"1px"})}),tt=T.ensureSingle(Gt,"text","",function(en){en.attr("data-notex",1)}),je=le.bgcolor||o.defaultLine,st=le.bordercolor||o.contrast(je),ft=o.contrast(je),Me={family:le.font.family||ge,size:le.font.size||fe,color:le.font.color||ft};br.style({fill:je,stroke:st}),tt.text(De).call(f.font,Me).call(r.positionText,0,0).call(r.convertToTspans,q),Gt.attr("transform","");var Se=oe(q,tt.node()),Ke,Xe;if(W==="x"){var it=ye.side==="top"?"-":"";tt.attr("text-anchor","middle").call(r.positionText,0,ye.side==="top"?Ue-Se.bottom-x-u:Ue-Se.top+x+u),Ke=ye._offset+(pe.x0+pe.x1)/2,Xe=Te._offset+(ye.side==="top"?0:Te._length);var pt=Se.width/2+u;Ke<pt?(Ke=pt,br.attr("d","M-"+(pt-x)+",0L-"+(pt-x*2)+","+it+x+"H"+(u+Se.width/2)+"v"+it+(u*2+Se.height)+"H-"+pt+"V"+it+x+"Z")):Ke>Q.width-pt?(Ke=Q.width-pt,br.attr("d","M"+(pt-x)+",0L"+pt+","+it+x+"v"+it+(u*2+Se.height)+"H-"+pt+"V"+it+x+"H"+(pt-x*2)+"Z")):br.attr("d","M0,0L"+x+","+it+x+"H"+(u+Se.width/2)+"v"+it+(u*2+Se.height)+"H-"+(u+Se.width/2)+"V"+it+x+"H-"+x+"Z")}else{var vt,St,kt;Te.side==="right"?(vt="start",St=1,kt="",Ke=ye._offset+ye._length):(vt="end",St=-1,kt="-",Ke=ye._offset),Xe=Te._offset+(pe.y0+pe.y1)/2,tt.attr("text-anchor",vt),br.attr("d","M0,0L"+kt+x+","+x+"V"+(u+Se.height/2)+"h"+kt+(u*2+Se.width)+"V-"+(u+Se.height/2)+"H"+kt+x+"V-"+x+"Z");var Nt=Se.height/2,nr=Ue-Se.top-Nt,fr="clip"+Q._uid+"commonlabel"+Te._id,Hr;if(Ke<Se.width+2*u+x){Hr="M-"+(x+u)+"-"+Nt+"h-"+(Se.width-u)+"V"+Nt+"h"+(Se.width-u)+"Z";var Er=Se.width-Ke+u;r.positionText(tt,Er,nr),vt==="end"&&tt.selectAll("tspan").each(function(){var en=w.select(this),dr=f.tester.append("text").text(en.text()).call(f.font,Me),xr=oe(q,dr.node());Math.round(xr.width)<Math.round(Se.width)&&en.attr("x",Er-xr.width),dr.remove()})}else r.positionText(tt,St*(u+x),nr),Hr=null;var _r=Q._topclips.selectAll("#"+fr).data(Hr?[0]:[]);_r.enter().append("clipPath").attr("id",fr).append("path"),_r.exit().remove(),_r.select("path").attr("d",Hr),f.setClipUrl(tt,Hr?fr:null,q)}Gt.attr("transform",e(Ke,Xe))}),y.isUnifiedHover(W)){te.selectAll("g.hovertext").remove();var Dt=N.filter(function(Gt){return Gt.hoverinfo!=="none"});if(Dt.length===0)return;var Xt=Q.hoverlabel,At=Xt.font,zt={showlegend:!0,legend:{title:{text:De,font:At},font:At,bgcolor:Xt.bgcolor,bordercolor:Xt.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:Q.legend?Q.legend.traceorder:void 0,orientation:"v"}},Ut={font:At};b(zt,Ut,q._fullData);var Ct=Ut.legend;Ct.entries=[];for(var Mt=0;Mt<Dt.length;Mt++){var rt=Dt[Mt];if(rt.hoverinfo!=="none"){var ct=D(rt,!0,W,Q,De),Ze=ct[0],ke=ct[1];rt.name=ke,ke!==""?rt.text=ke+" : "+Ze:rt.text=Ze;var Ge=rt.cd[rt.index];Ge&&(Ge.mc&&(rt.mc=Ge.mc),Ge.mcc&&(rt.mc=Ge.mcc),Ge.mlc&&(rt.mlc=Ge.mlc),Ge.mlcc&&(rt.mlc=Ge.mlcc),Ge.mlw&&(rt.mlw=Ge.mlw),Ge.mrc&&(rt.mrc=Ge.mrc),Ge.dir&&(rt.dir=Ge.dir)),rt._distinct=!0,Ct.entries.push([rt])}}Ct.entries.sort(function(Gt,br){return Gt[0].trace.index-br[0].trace.index}),Ct.layer=te,Ct._inHover=!0,Ct._groupTitleFont=Xt.grouptitlefont,l(q,Ct);var Je=te.select("g.legend"),ot=oe(q,Je.node()),Pt=ot.width+2*u,_t=ot.height+2*u,Bt=Dt[0],qt=(Bt.x0+Bt.x1)/2,Ot=(Bt.y0+Bt.y1)/2,$t=!(p.traceIs(Bt.trace,"bar-like")||p.traceIs(Bt.trace,"box-violin")),rr,er;_e==="y"?$t?(er=Ot-u,rr=Ot+u):(er=Math.min.apply(null,Dt.map(function(Gt){return Math.min(Gt.y0,Gt.y1)})),rr=Math.max.apply(null,Dt.map(function(Gt){return Math.max(Gt.y0,Gt.y1)}))):er=rr=T.mean(Dt.map(function(Gt){return(Gt.y0+Gt.y1)/2}))-_t/2;var pr,Xr;_e==="x"?$t?(pr=qt+u,Xr=qt-u):(pr=Math.max.apply(null,Dt.map(function(Gt){return Math.max(Gt.x0,Gt.x1)})),Xr=Math.min.apply(null,Dt.map(function(Gt){return Math.min(Gt.x0,Gt.x1)}))):pr=Xr=T.mean(Dt.map(function(Gt){return(Gt.x0+Gt.x1)/2}))-Pt/2;var hn=ye._offset,Qr=Te._offset;rr+=Qr,pr+=hn,Xr+=hn-Pt,er+=Qr-_t;var nt,Ht;return pr+Pt<xe&&pr>=0?nt=pr:Xr+Pt<xe&&Xr>=0?nt=Xr:hn+Pt<xe?nt=hn:pr-qt<qt-Xr+Pt?nt=xe-Pt:nt=0,nt+=u,rr+_t<Pe&&rr>=0?Ht=rr:er+_t<Pe&&er>=0?Ht=er:Qr+_t<Pe?Ht=Qr:rr-Ot<Ot-er+_t?Ht=Pe-_t:Ht=0,Ht+=u,Je.attr("transform",e(nt-1,Ht-1)),Je}var Kt=te.selectAll("g.hovertext").data(N,function(Gt){return P(Gt)});return Kt.enter().append("g").classed("hovertext",!0).each(function(){var Gt=w.select(this);Gt.append("rect").call(o.fill,o.addOpacity(ee,.8)),Gt.append("text").classed("name",!0),Gt.append("path").style("stroke-width","1px"),Gt.append("text").classed("nums",!0).call(f.font,ge,fe)}),Kt.exit().remove(),Kt.each(function(Gt){var br=w.select(this).attr("transform",""),tt=Gt.color;Array.isArray(tt)&&(tt=tt[Gt.eventData[0].pointNumber]);var je=Gt.bgcolor||tt,st=o.combine(o.opacity(je)?je:o.defaultLine,ee),ft=o.combine(o.opacity(tt)?tt:o.defaultLine,ee),Me=Gt.borderColor||o.contrast(st),Se=D(Gt,Ve,W,Q,De,br),Ke=Se[0],Xe=Se[1],it=br.select("text.nums").call(f.font,Gt.fontFamily||ge,Gt.fontSize||fe,Gt.fontColor||Me).text(Ke).attr("data-notex",1).call(r.positionText,0,0).call(r.convertToTspans,q),pt=br.select("text.name"),vt=0,St=0;if(Xe&&Xe!==Ke){pt.call(f.font,Gt.fontFamily||ge,Gt.fontSize||fe,ft).text(Xe).attr("data-notex",1).call(r.positionText,0,0).call(r.convertToTspans,q);var kt=oe(q,pt.node());vt=kt.width+2*u,St=kt.height+2*u}else pt.remove(),br.select("rect").remove();br.select("path").style({fill:st,stroke:Me});var Nt=Gt.xa._offset+(Gt.x0+Gt.x1)/2,nr=Gt.ya._offset+(Gt.y0+Gt.y1)/2,fr=Math.abs(Gt.x1-Gt.x0),Hr=Math.abs(Gt.y1-Gt.y0),Er=oe(q,it.node()),_r=Er.width/Q._invScaleX,en=Er.height/Q._invScaleY;Gt.ty0=(Ue-Er.top)/Q._invScaleY,Gt.bx=_r+2*u,Gt.by=Math.max(en+2*u,St),Gt.anchor="start",Gt.txwidth=_r,Gt.tx2width=vt,Gt.offset=0;var dr=(_r+x+u+vt)*Q._invScaleX,xr,Ur;if(X)Gt.pos=Nt,xr=nr+Hr/2+dr<=Pe,Ur=nr-Hr/2-dr>=0,(Gt.idealAlign==="top"||!xr)&&Ur?(nr-=Hr/2,Gt.anchor="end"):xr?(nr+=Hr/2,Gt.anchor="start"):Gt.anchor="middle";else if(Gt.pos=nr,xr=Nt+fr/2+dr<=xe,Ur=Nt-fr/2-dr>=0,(Gt.idealAlign==="left"||!xr)&&Ur)Nt-=fr/2,Gt.anchor="end";else if(xr)Nt+=fr/2,Gt.anchor="start";else{Gt.anchor="middle";var Yr=dr/2,Ar=Nt+Yr-xe,et=Nt-Yr;Ar>0&&(Nt-=Ar),et<0&&(Nt+=-et)}it.attr("text-anchor",Gt.anchor),vt&&pt.attr("text-anchor",Gt.anchor),br.attr("transform",e(Nt,nr)+(X?a(_):""))}),Kt}function D(N,U,q,Q,W,X){var ee="",te="";N.nameOverride!==void 0&&(N.name=N.nameOverride),N.name&&(N.trace._meta&&(N.name=T.templateString(N.name,N.trace._meta)),ee=Z(N.name,N.nameLength));var ie=q.charAt(0),le=ie==="x"?"y":"x";N.zLabel!==void 0?(N.xLabel!==void 0&&(te+="x: "+N.xLabel+"<br>"),N.yLabel!==void 0&&(te+="y: "+N.yLabel+"<br>"),N.trace.type!=="choropleth"&&N.trace.type!=="choroplethmapbox"&&(te+=(te?"z: ":"")+N.zLabel)):U&&N[ie+"Label"]===W?te=N[le+"Label"]||"":N.xLabel===void 0?N.yLabel!==void 0&&N.trace.type!=="scattercarpet"&&(te=N.yLabel):N.yLabel===void 0?te=N.xLabel:te="("+N.xLabel+", "+N.yLabel+")",(N.text||N.text===0)&&!Array.isArray(N.text)&&(te+=(te?"<br>":"")+N.text),N.extraText!==void 0&&(te+=(te?"<br>":"")+N.extraText),X&&te===""&&!N.hovertemplate&&(ee===""&&X.remove(),te=ee);var ge=N.hovertemplate||!1;if(ge){var fe=N.hovertemplateLabels||N;N[ie+"Label"]!==W&&(fe[ie+"other"]=fe[ie+"Val"],fe[ie+"otherLabel"]=fe[ie+"Label"]),te=T.hovertemplateString(ge,fe,Q._d3locale,N.eventData[0]||{},N.trace._meta),te=te.replace(z,function(pe,ye){return ee=Z(ye,N.nameLength),""})}return[te,ee]}function R(N,U,q){var Q=0,W=1,X=N.size(),ee=new Array(X),te=0;N.each(function(Fe){var Le=Fe[U],Ne=Le._id.charAt(0)==="x",dt=Le.range;te===0&&dt&&dt[0]>dt[1]!==Ne&&(W=-1),ee[te++]=[{datum:Fe,traceIndex:Fe.trace.index,dp:0,pos:Fe.pos,posref:Fe.posref,size:Fe.by*(Ne?A:1)/2,pmin:0,pmax:Ne?q.width:q.height}]}),ee.sort(function(Fe,Le){return Fe[0].posref-Le[0].posref||W*(Le[0].traceIndex-Fe[0].traceIndex)});var ie,le,ge,fe,pe,ye,Te;function _e(Fe){var Le=Fe[0],Ne=Fe[Fe.length-1];if(le=Le.pmin-Le.pos-Le.dp+Le.size,ge=Ne.pos+Ne.dp+Ne.size-Le.pmax,le>.01){for(pe=Fe.length-1;pe>=0;pe--)Fe[pe].dp+=le;ie=!1}if(!(ge<.01)){if(le<-.01){for(pe=Fe.length-1;pe>=0;pe--)Fe[pe].dp-=ge;ie=!1}if(!!ie){var dt=0;for(fe=0;fe<Fe.length;fe++)ye=Fe[fe],ye.pos+ye.dp+ye.size>Le.pmax&&dt++;for(fe=Fe.length-1;fe>=0&&!(dt<=0);fe--)ye=Fe[fe],ye.pos>Le.pmax-1&&(ye.del=!0,dt--);for(fe=0;fe<Fe.length&&!(dt<=0);fe++)if(ye=Fe[fe],ye.pos<Le.pmin+1)for(ye.del=!0,dt--,ge=ye.size*2,pe=Fe.length-1;pe>=0;pe--)Fe[pe].dp-=ge;for(fe=Fe.length-1;fe>=0&&!(dt<=0);fe--)ye=Fe[fe],ye.pos+ye.dp+ye.size>Le.pmax&&(ye.del=!0,dt--)}}}for(;!ie&&Q<=X;){for(Q++,ie=!0,fe=0;fe<ee.length-1;){var De=ee[fe],Be=ee[fe+1],Ue=De[De.length-1],xe=Be[0];if(le=Ue.pos+Ue.dp+Ue.size-xe.pos-xe.dp+xe.size,le>.01&&Ue.pmin===xe.pmin&&Ue.pmax===xe.pmax){for(pe=Be.length-1;pe>=0;pe--)Be[pe].dp+=le;for(De.push.apply(De,Be),ee.splice(fe+1,1),Te=0,pe=De.length-1;pe>=0;pe--)Te+=De[pe].dp;for(ge=Te/De.length,pe=De.length-1;pe>=0;pe--)De[pe].dp-=ge;ie=!1}else fe++}ee.forEach(_e)}for(fe=ee.length-1;fe>=0;fe--){var Pe=ee[fe];for(pe=Pe.length-1;pe>=0;pe--){var Ve=Pe[pe],Qe=Ve.datum;Qe.offset=Ve.dp,Qe.del=Ve.del}}}function O(N,U,q,Q){var W=function(ee){return ee*q},X=function(ee){return ee*Q};N.each(function(ee){var te=w.select(this);if(ee.del)return te.remove();var ie=te.select("text.nums"),le=ee.anchor,ge=le==="end"?-1:1,fe={start:1,end:-1,middle:0}[le],pe=fe*(x+u),ye=pe+fe*(ee.txwidth+u),Te=0,_e=ee.offset,De=le==="middle";De&&(pe-=ee.tx2width/2,ye+=ee.txwidth/2+u),U&&(_e*=-h,Te=ee.offset*m),te.select("path").attr("d",De?"M-"+W(ee.bx/2+ee.tx2width/2)+","+X(_e-ee.by/2)+"h"+W(ee.bx)+"v"+X(ee.by)+"h-"+W(ee.bx)+"Z":"M0,0L"+W(ge*x+Te)+","+X(x+_e)+"v"+X(ee.by/2-x)+"h"+W(ge*ee.bx)+"v-"+X(ee.by)+"H"+W(ge*x+Te)+"V"+X(_e-x)+"Z");var Be=Te+pe,Ue=_e+ee.ty0-ee.by/2+u,xe=ee.textAlign||"auto";xe!=="auto"&&(xe==="left"&&le!=="start"?(ie.attr("text-anchor","start"),Be=De?-ee.bx/2-ee.tx2width/2+u:-ee.bx-u):xe==="right"&&le!=="end"&&(ie.attr("text-anchor","end"),Be=De?ee.bx/2-ee.tx2width/2-u:ee.bx+u)),ie.call(r.positionText,W(Be),X(Ue)),ee.tx2width&&(te.select("text.name").call(r.positionText,W(ye+fe*u+Te),X(_e+ee.ty0-ee.by/2+u)),te.select("rect").call(f.setRect,W(ye+(fe-1)*ee.tx2width/2+Te),X(_e-ee.by/2-1),W(ee.tx2width),X(ee.by+2)))})}function F(N,U){var q=N.index,Q=N.trace||{},W=N.cd[0],X=N.cd[q]||{};function ee(pe){return pe||v(pe)&&pe===0}var te=Array.isArray(q)?function(pe,ye){var Te=T.castOption(W,q,pe);return ee(Te)?Te:T.extractOption({},Q,"",ye)}:function(pe,ye){return T.extractOption(X,Q,pe,ye)};function ie(pe,ye,Te){var _e=te(ye,Te);ee(_e)&&(N[pe]=_e)}if(ie("hoverinfo","hi","hoverinfo"),ie("bgcolor","hbg","hoverlabel.bgcolor"),ie("borderColor","hbc","hoverlabel.bordercolor"),ie("fontFamily","htf","hoverlabel.font.family"),ie("fontSize","hts","hoverlabel.font.size"),ie("fontColor","htc","hoverlabel.font.color"),ie("nameLength","hnl","hoverlabel.namelength"),ie("textAlign","hta","hoverlabel.align"),N.posref=U==="y"||U==="closest"&&Q.orientation==="h"?N.xa._offset+(N.x0+N.x1)/2:N.ya._offset+(N.y0+N.y1)/2,N.x0=T.constrain(N.x0,0,N.xa._length),N.x1=T.constrain(N.x1,0,N.xa._length),N.y0=T.constrain(N.y0,0,N.ya._length),N.y1=T.constrain(N.y1,0,N.ya._length),N.xLabelVal!==void 0&&(N.xLabel="xLabel"in N?N.xLabel:g.hoverLabelText(N.xa,N.xLabelVal,Q.xhoverformat),N.xVal=N.xa.c2d(N.xLabelVal)),N.yLabelVal!==void 0&&(N.yLabel="yLabel"in N?N.yLabel:g.hoverLabelText(N.ya,N.yLabelVal,Q.yhoverformat),N.yVal=N.ya.c2d(N.yLabelVal)),N.zLabelVal!==void 0&&N.zLabel===void 0&&(N.zLabel=String(N.zLabelVal)),!isNaN(N.xerr)&&!(N.xa.type==="log"&&N.xerr<=0)){var le=g.tickText(N.xa,N.xa.c2l(N.xerr),"hover").text;N.xerrneg!==void 0?N.xLabel+=" +"+le+" / -"+g.tickText(N.xa,N.xa.c2l(N.xerrneg),"hover").text:N.xLabel+=" \xB1 "+le,U==="x"&&(N.distance+=1)}if(!isNaN(N.yerr)&&!(N.ya.type==="log"&&N.yerr<=0)){var ge=g.tickText(N.ya,N.ya.c2l(N.yerr),"hover").text;N.yerrneg!==void 0?N.yLabel+=" +"+ge+" / -"+g.tickText(N.ya,N.ya.c2l(N.yerrneg),"hover").text:N.yLabel+=" \xB1 "+ge,U==="y"&&(N.distance+=1)}var fe=N.hoverinfo||N.trace.hoverinfo;return fe&&fe!=="all"&&(fe=Array.isArray(fe)?fe:fe.split("+"),fe.indexOf("x")===-1&&(N.xLabel=void 0),fe.indexOf("y")===-1&&(N.yLabel=void 0),fe.indexOf("z")===-1&&(N.zLabel=void 0),fe.indexOf("text")===-1&&(N.text=void 0),fe.indexOf("name")===-1&&(N.name=void 0)),N}function V(N,U,q){var Q=q.container,W=q.fullLayout,X=W._size,ee=q.event,te=!!U.hLinePoint,ie=!!U.vLinePoint,le,ge;if(Q.selectAll(".spikeline").remove(),!!(ie||te)){var fe=o.combine(W.plot_bgcolor,W.paper_bgcolor);if(te){var pe=U.hLinePoint,ye,Te;le=pe&&pe.xa,ge=pe&&pe.ya;var _e=ge.spikesnap;_e==="cursor"?(ye=ee.pointerX,Te=ee.pointerY):(ye=le._offset+pe.x,Te=ge._offset+pe.y);var De=M.readability(pe.color,fe)<1.5?o.contrast(fe):pe.color,Be=ge.spikemode,Ue=ge.spikethickness,xe=ge.spikecolor||De,Pe=g.getPxPosition(N,ge),Ve,Qe;if(Be.indexOf("toaxis")!==-1||Be.indexOf("across")!==-1){if(Be.indexOf("toaxis")!==-1&&(Ve=Pe,Qe=ye),Be.indexOf("across")!==-1){var Fe=ge._counterDomainMin,Le=ge._counterDomainMax;ge.anchor==="free"&&(Fe=Math.min(Fe,ge.position),Le=Math.max(Le,ge.position)),Ve=X.l+Fe*X.w,Qe=X.l+Le*X.w}Q.insert("line",":first-child").attr({x1:Ve,x2:Qe,y1:Te,y2:Te,"stroke-width":Ue,stroke:xe,"stroke-dasharray":f.dashStyle(ge.spikedash,Ue)}).classed("spikeline",!0).classed("crisp",!0),Q.insert("line",":first-child").attr({x1:Ve,x2:Qe,y1:Te,y2:Te,"stroke-width":Ue+2,stroke:fe}).classed("spikeline",!0).classed("crisp",!0)}Be.indexOf("marker")!==-1&&Q.insert("circle",":first-child").attr({cx:Pe+(ge.side!=="right"?Ue:-Ue),cy:Te,r:Ue,fill:xe}).classed("spikeline",!0)}if(ie){var Ne=U.vLinePoint,dt,Dt;le=Ne&&Ne.xa,ge=Ne&&Ne.ya;var Xt=le.spikesnap;Xt==="cursor"?(dt=ee.pointerX,Dt=ee.pointerY):(dt=le._offset+Ne.x,Dt=ge._offset+Ne.y);var At=M.readability(Ne.color,fe)<1.5?o.contrast(fe):Ne.color,zt=le.spikemode,Ut=le.spikethickness,Ct=le.spikecolor||At,Mt=g.getPxPosition(N,le),rt,ct;if(zt.indexOf("toaxis")!==-1||zt.indexOf("across")!==-1){if(zt.indexOf("toaxis")!==-1&&(rt=Mt,ct=Dt),zt.indexOf("across")!==-1){var Ze=le._counterDomainMin,ke=le._counterDomainMax;le.anchor==="free"&&(Ze=Math.min(Ze,le.position),ke=Math.max(ke,le.position)),rt=X.t+(1-ke)*X.h,ct=X.t+(1-Ze)*X.h}Q.insert("line",":first-child").attr({x1:dt,x2:dt,y1:rt,y2:ct,"stroke-width":Ut,stroke:Ct,"stroke-dasharray":f.dashStyle(le.spikedash,Ut)}).classed("spikeline",!0).classed("crisp",!0),Q.insert("line",":first-child").attr({x1:dt,x2:dt,y1:rt,y2:ct,"stroke-width":Ut+2,stroke:fe}).classed("spikeline",!0).classed("crisp",!0)}zt.indexOf("marker")!==-1&&Q.insert("circle",":first-child").attr({cx:dt,cy:Mt-(le.side!=="top"?Ut:-Ut),r:Ut,fill:Ct}).classed("spikeline",!0)}}}function G(N,U,q){if(!q||q.length!==N._hoverdata.length)return!0;for(var Q=q.length-1;Q>=0;Q--){var W=q[Q],X=N._hoverdata[Q];if(W.curveNumber!==X.curveNumber||String(W.pointNumber)!==String(X.pointNumber)||String(W.pointNumbers)!==String(X.pointNumbers))return!0}return!1}function J(N,U){return!U||U.vLinePoint!==N._spikepoints.vLinePoint||U.hLinePoint!==N._spikepoints.hLinePoint}function Z(N,U){return r.plainText(N||"",{len:U,allowedTags:["br","sub","sup","b","i","em"]})}function Y(N,U){for(var q=U.charAt(0),Q=[],W=[],X=[],ee=0;ee<N.length;ee++){var te=N[ee];p.traceIs(te.trace,"bar-like")||p.traceIs(te.trace,"box-violin")?X.push(te):te.trace[q+"period"]?W.push(te):Q.push(te)}return Q.concat(W).concat(X)}function j(N,U,q){var Q=U[N+"a"],W=U[N+"Val"],X=U.cd[0];if(Q.type==="category")W=Q._categoriesMap[W];else if(Q.type==="date"){var ee=U.trace[N+"periodalignment"];if(ee){var te=U.cd[U.index],ie=te[N+"Start"];ie===void 0&&(ie=te[N]);var le=te[N+"End"];le===void 0&&(le=te[N]);var ge=le-ie;ee==="end"?W+=ge:ee==="middle"&&(W+=ge/2)}W=Q.d2c(W)}return X&&X.t&&X.t.posLetter===Q._id&&(q.boxmode==="group"||q.violinmode==="group")&&(W+=X.t.dPos),W}function re(N){return N.offsetTop+N.clientTop}function se(N){return N.offsetLeft+N.clientLeft}function oe(N,U){var q=N._fullLayout,Q=U.getBoundingClientRect(),W=Q.x,X=Q.y,ee=W+Q.width,te=X+Q.height,ie=T.apply3DTransform(q._invTransform)(W,X),le=T.apply3DTransform(q._invTransform)(ee,te),ge=ie[0],fe=ie[1],pe=le[0],ye=le[1];return{x:ge,y:fe,width:pe-ge,height:ye-fe,top:Math.min(fe,ye),left:Math.min(ge,pe),right:Math.max(ge,pe),bottom:Math.max(fe,ye)}}},{"../../lib":503,"../../lib/events":492,"../../lib/override_cursor":514,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../legend/defaults":418,"../legend/draw":419,"./constants":400,"./helpers":402,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],404:[function(d,ne,ae){var w=d("../../lib"),v=d("../color"),M=d("./helpers").isUnifiedHover;ne.exports=function(e,a,n,r){r=r||{};var t=a.legend;function f(o){r.font[o]||(r.font[o]=t?a.legend.font[o]:a.font[o])}a&&M(a.hovermode)&&(r.font||(r.font={}),f("size"),f("family"),f("color"),t?(r.bgcolor||(r.bgcolor=v.combine(a.legend.bgcolor,a.paper_bgcolor)),r.bordercolor||(r.bordercolor=a.legend.bordercolor)):r.bgcolor||(r.bgcolor=a.paper_bgcolor)),n("hoverlabel.bgcolor",r.bgcolor),n("hoverlabel.bordercolor",r.bordercolor),n("hoverlabel.namelength",r.namelength),w.coerceFont(n,"hoverlabel.font",r.font),n("hoverlabel.align",r.align)}},{"../../lib":503,"../color":366,"./helpers":402}],405:[function(d,ne,ae){var w=d("../../lib"),v=d("./layout_attributes");ne.exports=function(T,e){function a(n,r){return e[n]!==void 0?e[n]:w.coerce(T,e,v,n,r)}return a("clickmode"),a("hovermode")}},{"../../lib":503,"./layout_attributes":407}],406:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../lib"),M=d("../dragelement"),T=d("./helpers"),e=d("./layout_attributes"),a=d("./hover");ne.exports={moduleType:"component",name:"fx",constants:d("./constants"),schema:{layout:e},attributes:d("./attributes"),layoutAttributes:e,supplyLayoutGlobalDefaults:d("./layout_global_defaults"),supplyDefaults:d("./defaults"),supplyLayoutDefaults:d("./layout_defaults"),calc:d("./calc"),getDistanceFunction:T.getDistanceFunction,getClosest:T.getClosest,inbox:T.inbox,quadrature:T.quadrature,appendArrayPointValue:T.appendArrayPointValue,castHoverOption:r,castHoverinfo:t,hover:a.hover,unhover:M.unhover,loneHover:a.loneHover,loneUnhover:n,click:d("./click")};function n(f){var o=v.isD3Selection(f)?f:w.select(f);o.selectAll("g.hovertext").remove(),o.selectAll(".spikeline").remove()}function r(f,o,i){return v.castOption(f,o,"hoverlabel."+i)}function t(f,o,i){function g(p){return v.coerceHoverinfo({hoverinfo:p},{_module:f._module},o)}return v.castOption(f,i,"hoverinfo",g)}},{"../../lib":503,"../dragelement":385,"./attributes":397,"./calc":398,"./click":399,"./constants":400,"./defaults":401,"./helpers":402,"./hover":403,"./layout_attributes":407,"./layout_defaults":408,"./layout_global_defaults":409,"@plotly/d3":58}],407:[function(d,ne,ae){var w=d("./constants"),v=d("../../plots/font_attributes"),M=v({editType:"none"});M.family.dflt=w.HOVERFONT,M.size.dflt=w.HOVERFONTSIZE,ne.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:M,grouptitlefont:v({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":585,"./constants":400}],408:[function(d,ne,ae){var w=d("../../lib"),v=d("./layout_attributes"),M=d("./hovermode_defaults"),T=d("./hoverlabel_defaults");ne.exports=function(a,n){function r(p,y){return w.coerce(a,n,v,p,y)}var t=M(a,n);t&&(r("hoverdistance"),r("spikedistance"));var f=r("dragmode");f==="select"&&r("selectdirection");var o=n._has("mapbox"),i=n._has("geo"),g=n._basePlotModules.length;n.dragmode==="zoom"&&((o||i)&&g===1||o&&i&&g===2)&&(n.dragmode="pan"),T(a,n,r),w.coerceFont(r,"hoverlabel.grouptitlefont",n.hoverlabel.font)}},{"../../lib":503,"./hoverlabel_defaults":404,"./hovermode_defaults":405,"./layout_attributes":407}],409:[function(d,ne,ae){var w=d("../../lib"),v=d("./hoverlabel_defaults"),M=d("./layout_attributes");ne.exports=function(e,a){function n(r,t){return w.coerce(e,a,M,r,t)}v(e,a,n)}},{"../../lib":503,"./hoverlabel_defaults":404,"./layout_attributes":407}],410:[function(d,ne,ae){var w=d("../../lib"),v=d("../../lib/regex").counter,M=d("../../plots/domain").attributes,T=d("../../plots/cartesian/constants").idRegex,e=d("../../plot_api/plot_template"),a={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[v("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[T.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:M({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function n(i,g,p){var y=g[p+"axes"],c=Object.keys((i._splomAxes||{})[p]||{});if(Array.isArray(y))return y;if(c.length)return c}function r(i,g){var p=i.grid||{},y=n(g,p,"x"),c=n(g,p,"y");if(!i.grid&&!y&&!c)return;var b=Array.isArray(p.subplots)&&Array.isArray(p.subplots[0]),l=Array.isArray(y),_=Array.isArray(c),s=l&&y!==p.xaxes&&_&&c!==p.yaxes,A,m;b?(A=p.subplots.length,m=p.subplots[0].length):(_&&(A=c.length),l&&(m=y.length));var h=e.newContainer(g,"grid");function x(O,F){return w.coerce(p,h,a,O,F)}var u=x("rows",A),L=x("columns",m);if(!(u*L>1)){delete g.grid;return}if(!b&&!l&&!_){var S=x("pattern")==="independent";S&&(b=!0)}h._hasSubplotGrid=b;var k=x("roworder"),P=k==="top to bottom",z=b?.2:.1,I=b?.3:.1,D,R;s&&g._splomGridDflt&&(D=g._splomGridDflt.xside,R=g._splomGridDflt.yside),h._domains={x:t("x",x,z,D,L),y:t("y",x,I,R,u,P)}}function t(i,g,p,y,c,b){var l=g(i+"gap",p),_=g("domain."+i);g(i+"side",y);for(var s=new Array(c),A=_[0],m=(_[1]-A)/(c-l),h=m*(1-l),x=0;x<c;x++){var u=A+m*x;s[b?c-1-x:x]=[u,u+h]}return s}function f(i,g){var p=g.grid;if(!(!p||!p._domains)){var y=i.grid||{},c=g._subplots,b=p._hasSubplotGrid,l=p.rows,_=p.columns,s=p.pattern==="independent",A,m,h,x,u,L,S,k=p._axisMap={};if(b){var P=y.subplots||[];L=p.subplots=new Array(l);var z=1;for(A=0;A<l;A++){var I=L[A]=new Array(_),D=P[A]||[];for(m=0;m<_;m++)if(s?(u=z===1?"xy":"x"+z+"y"+z,z++):u=D[m],I[m]="",c.cartesian.indexOf(u)!==-1){if(S=u.indexOf("y"),h=u.slice(0,S),x=u.slice(S),k[h]!==void 0&&k[h]!==m||k[x]!==void 0&&k[x]!==A)continue;I[m]=u,k[h]=m,k[x]=A}}}else{var R=n(g,y,"x"),O=n(g,y,"y");p.xaxes=o(R,c.xaxis,_,k,"x"),p.yaxes=o(O,c.yaxis,l,k,"y")}var F=p._anchors={},V=p.roworder==="top to bottom";for(var G in k){var J=G.charAt(0),Z=p[J+"side"],Y,j,re;if(Z.length<8)F[G]="free";else if(J==="x"){if(Z.charAt(0)==="t"===V?(Y=0,j=1,re=l):(Y=l-1,j=-1,re=-1),b){var se=k[G];for(A=Y;A!==re;A+=j)if(u=L[A][se],!!u&&(S=u.indexOf("y"),u.slice(0,S)===G)){F[G]=u.slice(S);break}}else for(A=Y;A!==re;A+=j)if(x=p.yaxes[A],c.cartesian.indexOf(G+x)!==-1){F[G]=x;break}}else if(Z.charAt(0)==="l"?(Y=0,j=1,re=_):(Y=_-1,j=-1,re=-1),b){var oe=k[G];for(A=Y;A!==re;A+=j)if(u=L[oe][A],!!u&&(S=u.indexOf("y"),u.slice(S)===G)){F[G]=u.slice(0,S);break}}else for(A=Y;A!==re;A+=j)if(h=p.xaxes[A],c.cartesian.indexOf(h+G)!==-1){F[G]=h;break}}}}function o(i,g,p,y,c){var b=new Array(p),l;function _(s,A){g.indexOf(A)!==-1&&y[A]===void 0?(b[s]=A,y[A]=s):b[s]=""}if(Array.isArray(i))for(l=0;l<p;l++)_(l,i[l]);else for(_(0,c),l=1;l<p;l++)_(l,c+(l+1));return b}ne.exports={moduleType:"component",name:"grid",schema:{layout:{grid:a}},layoutAttributes:a,sizeDefaults:r,contentDefaults:f}},{"../../lib":503,"../../lib/regex":520,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561,"../../plots/domain":584}],411:[function(d,ne,ae){var w=d("../../plots/cartesian/constants"),v=d("../../plot_api/plot_template").templatedArray;d("../../constants/axis_placeable_objects"),ne.exports=v("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",w.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",w.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":472,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561}],412:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("../../lib/to_log_range");ne.exports=function(T,e,a,n){e=e||{};var r=a==="log"&&e.type==="linear",t=a==="linear"&&e.type==="log";if(!!(r||t)){for(var f=T._fullLayout.images,o=e._id.charAt(0),i,g,p=0;p<f.length;p++)if(i=f[p],g="images["+p+"].",i[o+"ref"]===e._id){var y=i[o],c=i["size"+o],b=null,l=null;if(r){b=v(y,e.range);var _=c/Math.pow(10,b)/2;l=2*Math.log(_+Math.sqrt(1+_*_))/Math.LN10}else b=Math.pow(10,y),l=b*(Math.pow(10,c/2)-Math.pow(10,-c/2));w(b)?w(l)||(l=null):(b=null,l=null),n(g+o,b),n(g+"size"+o,l)}}}},{"../../lib/to_log_range":531,"fast-isnumeric":190}],413:[function(d,ne,ae){var w=d("../../lib"),v=d("../../plots/cartesian/axes"),M=d("../../plots/array_container_defaults"),T=d("./attributes"),e="images";ne.exports=function(r,t){var f={name:e,handleItemDefaults:a};M(r,t,f)};function a(n,r,t){function f(_,s){return w.coerce(n,r,T,_,s)}var o=f("source"),i=f("visible",!!o);if(!i)return r;f("layer"),f("xanchor"),f("yanchor"),f("sizex"),f("sizey"),f("sizing"),f("opacity");for(var g={_fullLayout:t},p=["x","y"],y=0;y<2;y++){var c=p[y],b=v.coerceRef(n,r,g,c,"paper",void 0);if(b!=="paper"){var l=v.getFromId(g,b);l._imgIndices.push(r._index)}v.coercePosition(r,g,f,b,c,0)}return r}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":411}],414:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../drawing"),M=d("../../plots/cartesian/axes"),T=d("../../plots/cartesian/axis_ids"),e=d("../../constants/xmlns_namespaces");ne.exports=function(n){var r=n._fullLayout,t=[],f={},o=[],i,g;for(g=0;g<r.images.length;g++){var p=r.images[g];if(p.visible)if(p.layer==="below"&&p.xref!=="paper"&&p.yref!=="paper"){i=T.ref2id(p.xref)+T.ref2id(p.yref);var y=r._plots[i];if(!y){o.push(p);continue}y.mainplot&&(i=y.mainplot.id),f[i]||(f[i]=[]),f[i].push(p)}else p.layer==="above"?t.push(p):o.push(p)}var c={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function b(x){var u=w.select(this);if(this._imgSrc!==x.source)if(u.attr("xmlns",e.svg),x.source&&x.source.slice(0,5)==="data:")u.attr("xlink:href",x.source),this._imgSrc=x.source;else{var L=new Promise(function(S){var k=new Image;this.img=k,k.setAttribute("crossOrigin","anonymous"),k.onerror=P,k.onload=function(){var z=document.createElement("canvas");z.width=this.width,z.height=this.height;var I=z.getContext("2d",{willReadFrequently:!0});I.drawImage(this,0,0);var D=z.toDataURL("image/png");u.attr("xlink:href",D),S()},u.on("error",P),k.src=x.source,this._imgSrc=x.source;function P(){u.remove(),S()}}.bind(this));n._promises.push(L)}}function l(x){var u=w.select(this),L=M.getFromId(n,x.xref),S=M.getFromId(n,x.yref),k=M.getRefType(x.xref)==="domain",P=M.getRefType(x.yref)==="domain",z=r._size,I,D;L!==void 0?I=typeof x.xref=="string"&&k?L._length*x.sizex:Math.abs(L.l2p(x.sizex)-L.l2p(0)):I=x.sizex*z.w,S!==void 0?D=typeof x.yref=="string"&&P?S._length*x.sizey:Math.abs(S.l2p(x.sizey)-S.l2p(0)):D=x.sizey*z.h;var R=I*c.x[x.xanchor].offset,O=D*c.y[x.yanchor].offset,F=c.x[x.xanchor].sizing+c.y[x.yanchor].sizing,V,G;switch(L!==void 0?V=typeof x.xref=="string"&&k?L._length*x.x+L._offset:L.r2p(x.x)+L._offset:V=x.x*z.w+z.l,V+=R,S!==void 0?G=typeof x.yref=="string"&&P?S._length*(1-x.y)+S._offset:S.r2p(x.y)+S._offset:G=z.h-x.y*z.h+z.t,G+=O,x.sizing){case"fill":F+=" slice";break;case"stretch":F="none";break}u.attr({x:V,y:G,width:I,height:D,preserveAspectRatio:F,opacity:x.opacity});var J=L&&M.getRefType(x.xref)!=="domain"?L._id:"",Z=S&&M.getRefType(x.yref)!=="domain"?S._id:"",Y=J+Z;v.setClipUrl(u,Y?"clip"+r._uid+Y:null,n)}var _=r._imageLowerLayer.selectAll("image").data(o),s=r._imageUpperLayer.selectAll("image").data(t);_.enter().append("image"),s.enter().append("image"),_.exit().remove(),s.exit().remove(),_.each(function(x){b.bind(this)(x),l.bind(this)(x)}),s.each(function(x){b.bind(this)(x),l.bind(this)(x)});var A=Object.keys(r._plots);for(g=0;g<A.length;g++){i=A[g];var m=r._plots[i];if(!!m.imagelayer){var h=m.imagelayer.selectAll("image").data(f[i]||[]);h.enter().append("image"),h.exit().remove(),h.each(function(x){b.bind(this)(x),l.bind(this)(x)})}}}},{"../../constants/xmlns_namespaces":480,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_ids":558,"../drawing":388,"@plotly/d3":58}],415:[function(d,ne,ae){ne.exports={moduleType:"component",name:"images",layoutAttributes:d("./attributes"),supplyLayoutDefaults:d("./defaults"),includeBasePlot:d("../../plots/cartesian/include_components")("images"),draw:d("./draw"),convertCoords:d("./convert_coords")}},{"../../plots/cartesian/include_components":567,"./attributes":411,"./convert_coords":412,"./defaults":413,"./draw":414}],416:[function(d,ne,ae){var w=d("../../plots/font_attributes"),v=d("../color/attributes");ne.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:v.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:w({editType:"legend"}),grouptitlefont:w({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:w({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":585,"../color/attributes":365}],417:[function(d,ne,ae){ne.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],418:[function(d,ne,ae){var w=d("../../registry"),v=d("../../lib"),M=d("../../plot_api/plot_template"),T=d("../../plots/attributes"),e=d("./attributes"),a=d("../../plots/layout_attributes"),n=d("./helpers");ne.exports=function(t,f,o){var i=t.legend||{},g=M.newContainer(f,"legend");function p(D,R){return v.coerce(i,g,e,D,R)}for(var y,c=function(D,R){var O=y._input,F=y;return v.coerce(O,F,T,D,R)},b=f.font||{},l=v.coerceFont(p,"grouptitlefont",v.extendFlat({},b,{size:Math.round(b.size*1.1)})),_=0,s=!1,A="normal",m=0;m<o.length;m++)y=o[m],y.visible&&((y.showlegend||y._dfltShowLegend&&!(y._module&&y._module.attributes&&y._module.attributes.showlegend&&y._module.attributes.showlegend.dflt===!1))&&(_++,y.showlegend&&(s=!0,(w.traceIs(y,"pie-like")||y._input.showlegend===!0)&&_++),v.coerceFont(c,"legendgrouptitle.font",l)),(w.traceIs(y,"bar")&&f.barmode==="stack"||["tonextx","tonexty"].indexOf(y.fill)!==-1)&&(A=n.isGrouped({traceorder:A})?"grouped+reversed":"reversed"),y.legendgroup!==void 0&&y.legendgroup!==""&&(A=n.isReversed({traceorder:A})?"reversed+grouped":"grouped"));var h=v.coerce(t,f,a,"showlegend",s&&_>1);if(h===!1&&(f.legend=void 0),!(h===!1&&!i.uirevision)&&(p("uirevision",f.uirevision),h!==!1)){p("bgcolor",f.paper_bgcolor),p("bordercolor"),p("borderwidth");var x=v.coerceFont(p,"font",f.font),u=p("orientation"),L=u==="h",S,k,P;L?(S=0,w.getComponentMethod("rangeslider","isVisible")(t.xaxis)?(k=1.1,P="bottom"):(k=-.1,P="top")):(S=1.02,k=1,P="auto"),p("traceorder",A),n.isGrouped(f.legend)&&p("tracegroupgap"),p("itemsizing"),p("itemwidth"),p("itemclick"),p("itemdoubleclick"),p("groupclick"),p("x",S),p("xanchor"),p("y",k),p("yanchor",P),p("valign"),v.noneOrAll(i,g,["x","y"]);var z=p("title.text");if(z){p("title.side",L?"left":"top");var I=v.extendFlat({},x,{size:v.bigFont(x.size)});v.coerceFont(p,"title.font",I)}}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/attributes":550,"../../plots/layout_attributes":610,"../../registry":638,"./attributes":416,"./helpers":422}],419:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../lib"),M=d("../../plots/plots"),T=d("../../registry"),e=d("../../lib/events"),a=d("../dragelement"),n=d("../drawing"),r=d("../color"),t=d("../../lib/svg_text_utils"),f=d("./handle_click"),o=d("./constants"),i=d("../../constants/alignment"),g=i.LINE_SPACING,p=i.FROM_TL,y=i.FROM_BR,c=d("./get_legend_data"),b=d("./style"),l=d("./helpers"),_=1;ne.exports=function(R,O){return O||(O=R._fullLayout.legend||{}),s(R,O)};function s(D,R){var O=D._fullLayout,F="legend"+O._uid,V,G=R._inHover;if(G?(V=R.layer,F+="-hover"):V=O._infolayer,!!V){D._legendMouseDownTime||(D._legendMouseDownTime=0);var J;if(G){if(!R.entries)return;J=c(R.entries,R)}else{if(!D.calcdata)return;J=O.showlegend&&c(D.calcdata,R)}var Z=O.hiddenlabels||[];if(!G&&(!O.showlegend||!J.length))return V.selectAll(".legend").remove(),O._topdefs.select("#"+F).remove(),M.autoMargin(D,"legend");var Y=v.ensureSingle(V,"g","legend",function(W){G||W.attr("pointer-events","all")}),j=v.ensureSingleById(O._topdefs,"clipPath",F,function(W){W.append("rect")}),re=v.ensureSingle(Y,"rect","bg",function(W){W.attr("shape-rendering","crispEdges")});re.call(r.stroke,R.bordercolor).call(r.fill,R.bgcolor).style("stroke-width",R.borderwidth+"px");var se=v.ensureSingle(Y,"g","scrollbox"),oe=R.title;if(R._titleWidth=0,R._titleHeight=0,oe.text){var N=v.ensureSingle(se,"text","legendtitletext");N.attr("text-anchor","start").call(n.font,oe.font).text(oe.text),u(N,se,D,R,_)}else se.selectAll(".legendtitletext").remove();var U=v.ensureSingle(Y,"rect","scrollbar",function(W){W.attr(o.scrollBarEnterAttrs).call(r.fill,o.scrollBarColor)}),q=se.selectAll("g.groups").data(J);q.enter().append("g").attr("class","groups"),q.exit().remove();var Q=q.selectAll("g.traces").data(v.identity);Q.enter().append("g").attr("class","traces"),Q.exit().remove(),Q.style("opacity",function(W){var X=W[0].trace;return T.traceIs(X,"pie-like")?Z.indexOf(W[0].label)!==-1?.5:1:X.visible==="legendonly"?.5:1}).each(function(){w.select(this).call(m,D,R)}).call(b,D,R).each(function(){G||w.select(this).call(x,D)}),v.syncOrAsync([M.previousPromises,function(){return k(D,q,Q,R)},function(){var W=O._size,X=R.borderwidth;if(!G){var ee=P(D);if(ee)return;var te=W.l+W.w*R.x-p[z(R)]*R._width,ie=W.t+W.h*(1-R.y)-p[I(R)]*R._effHeight;if(O.margin.autoexpand){var le=te,ge=ie;te=v.constrain(te,0,O.width-R._width),ie=v.constrain(ie,0,O.height-R._effHeight),te!==le&&v.log("Constrain legend.x to make legend fit inside graph"),ie!==ge&&v.log("Constrain legend.y to make legend fit inside graph")}n.setTranslate(Y,te,ie)}if(U.on(".drag",null),Y.on("wheel",null),G||R._height<=R._maxHeight||D._context.staticPlot){var fe=R._effHeight;G&&(fe=R._height),re.attr({width:R._width-X,height:fe-X,x:X/2,y:X/2}),n.setTranslate(se,0,0),j.select("rect").attr({width:R._width-2*X,height:fe-2*X,x:X,y:X}),n.setClipUrl(se,F,D),n.setRect(U,0,0,0,0),delete R._scrollY}else{var pe=Math.max(o.scrollBarMinHeight,R._effHeight*R._effHeight/R._height),ye=R._effHeight-pe-2*o.scrollBarMargin,Te=R._height-R._effHeight,_e=ye/Te,De=Math.min(R._scrollY||0,Te);re.attr({width:R._width-2*X+o.scrollBarWidth+o.scrollBarMargin,height:R._effHeight-X,x:X/2,y:X/2}),j.select("rect").attr({width:R._width-2*X+o.scrollBarWidth+o.scrollBarMargin,height:R._effHeight-2*X,x:X,y:X+De}),n.setClipUrl(se,F,D),Le(De,pe,_e),Y.on("wheel",function(){De=v.constrain(R._scrollY+w.event.deltaY/ye*Te,0,Te),Le(De,pe,_e),De!==0&&De!==Te&&w.event.preventDefault()});var Be,Ue,xe,Pe=function(At,zt,Ut){var Ct=(Ut-zt)/_e+At;return v.constrain(Ct,0,Te)},Ve=function(At,zt,Ut){var Ct=(zt-Ut)/_e+At;return v.constrain(Ct,0,Te)},Qe=w.behavior.drag().on("dragstart",function(){var At=w.event.sourceEvent;At.type==="touchstart"?Be=At.changedTouches[0].clientY:Be=At.clientY,xe=De}).on("drag",function(){var At=w.event.sourceEvent;At.buttons===2||At.ctrlKey||(At.type==="touchmove"?Ue=At.changedTouches[0].clientY:Ue=At.clientY,De=Pe(xe,Be,Ue),Le(De,pe,_e))});U.call(Qe);var Fe=w.behavior.drag().on("dragstart",function(){var At=w.event.sourceEvent;At.type==="touchstart"&&(Be=At.changedTouches[0].clientY,xe=De)}).on("drag",function(){var At=w.event.sourceEvent;At.type==="touchmove"&&(Ue=At.changedTouches[0].clientY,De=Ve(xe,Be,Ue),Le(De,pe,_e))});se.call(Fe)}function Le(At,zt,Ut){R._scrollY=D._fullLayout.legend._scrollY=At,n.setTranslate(se,0,-At),n.setRect(U,R._width,o.scrollBarMargin+At*Ut,o.scrollBarWidth,zt),j.select("rect").attr("y",X+At)}if(D._context.edits.legendPosition){var Ne,dt,Dt,Xt;Y.classed("cursor-move",!0),a.init({element:Y.node(),gd:D,prepFn:function(){var At=n.getTranslate(Y);Dt=At.x,Xt=At.y},moveFn:function(At,zt){var Ut=Dt+At,Ct=Xt+zt;n.setTranslate(Y,Ut,Ct),Ne=a.align(Ut,0,W.l,W.l+W.w,R.xanchor),dt=a.align(Ct,0,W.t+W.h,W.t,R.yanchor)},doneFn:function(){Ne!==void 0&&dt!==void 0&&T.call("_guiRelayout",D,{"legend.x":Ne,"legend.y":dt})},clickFn:function(At,zt){var Ut=V.selectAll("g.traces").filter(function(){var Ct=this.getBoundingClientRect();return zt.clientX>=Ct.left&&zt.clientX<=Ct.right&&zt.clientY>=Ct.top&&zt.clientY<=Ct.bottom});Ut.size()>0&&A(D,Y,Ut,At,zt)}})}}],D)}}function A(D,R,O,F,V){var G=O.data()[0][0].trace,J={event:V,node:O.node(),curveNumber:G.index,expandedIndex:G._expandedIndex,data:D.data,layout:D.layout,frames:D._transitionData._frames,config:D._context,fullData:D._fullData,fullLayout:D._fullLayout};G._group&&(J.group=G._group),T.traceIs(G,"pie-like")&&(J.label=O.datum()[0].label);var Z=e.triggerHandler(D,"plotly_legendclick",J);if(Z!==!1){if(F===1)R._clickTimeout=setTimeout(function(){!D._fullLayout||f(O,D,F)},D._context.doubleClickDelay);else if(F===2){R._clickTimeout&&clearTimeout(R._clickTimeout),D._legendMouseDownTime=0;var Y=e.triggerHandler(D,"plotly_legenddoubleclick",J);Y!==!1&&f(O,D,F)}}}function m(D,R,O){var F=D.data()[0][0],V=F.trace,G=T.traceIs(V,"pie-like"),J=!O._inHover&&R._context.edits.legendText&&!G,Z=O._maxNameLength,Y,j;F.groupTitle?(Y=F.groupTitle.text,j=F.groupTitle.font):(j=O.font,O.entries?Y=F.text:(Y=G?F.label:V.name,V._meta&&(Y=v.templateString(Y,V._meta))));var re=v.ensureSingle(D,"text","legendtext");re.attr("text-anchor","start").call(n.font,j).text(J?h(Y,Z):Y);var se=O.itemwidth+o.itemGap*2;t.positionText(re,se,0),J?re.call(t.makeEditable,{gd:R,text:Y}).call(u,D,R,O).on("edit",function(oe){this.text(h(oe,Z)).call(u,D,R,O);var N=F.trace._fullInput||{},U={};if(T.hasTransform(N,"groupby")){var q=T.getTransformIndices(N,"groupby"),Q=q[q.length-1],W=v.keyedContainer(N,"transforms["+Q+"].styles","target","value.name");W.set(F.trace._group,oe),U=W.constructUpdate()}else U.name=oe;return T.call("_guiRestyle",R,U,V.index)}):u(re,D,R,O)}function h(D,R){var O=Math.max(4,R);if(D&&D.trim().length>=O/2)return D;D=D||"";for(var F=O-D.length;F>0;F--)D+=" ";return D}function x(D,R){var O=R._context.doubleClickDelay,F,V=1,G=v.ensureSingle(D,"rect","legendtoggle",function(J){R._context.staticPlot||J.style("cursor","pointer").attr("pointer-events","all"),J.call(r.fill,"rgba(0,0,0,0)")});R._context.staticPlot||(G.on("mousedown",function(){F=new Date().getTime(),F-R._legendMouseDownTime<O?V+=1:(V=1,R._legendMouseDownTime=F)}),G.on("mouseup",function(){if(!(R._dragged||R._editing)){var J=R._fullLayout.legend;new Date().getTime()-R._legendMouseDownTime>O&&(V=Math.max(V-1,1)),A(R,J,D,V,w.event)}}))}function u(D,R,O,F,V){F._inHover&&D.attr("data-notex",!0),t.convertToTspans(D,O,function(){L(R,O,F,V)})}function L(D,R,O,F){var V=D.data()[0][0];if(!O._inHover&&V&&!V.trace.showlegend){D.remove();return}var G=D.select("g[class*=math-group]"),J=G.node();O||(O=R._fullLayout.legend);var Z=O.borderwidth,Y;F===_?Y=O.title.font:V.groupTitle?Y=V.groupTitle.font:Y=O.font;var j=Y.size*g,re,se;if(J){var oe=n.bBox(J);re=oe.height,se=oe.width,F===_?n.setTranslate(G,Z,Z+re*.75):n.setTranslate(G,0,re*.25)}else{var N=D.select(F===_?".legendtitletext":".legendtext"),U=t.lineCount(N),q=N.node();if(re=j*U,se=q?n.bBox(q).width:0,F===_)O.title.side==="left"&&(se+=o.itemGap*2),t.positionText(N,Z+o.titlePad,Z+j);else{var Q=o.itemGap*2+O.itemwidth;V.groupTitle&&(Q=o.itemGap,se-=O.itemwidth),t.positionText(N,Q,-j*((U-1)/2-.3))}}F===_?(O._titleWidth=se,O._titleHeight=re):(V.lineHeight=j,V.height=Math.max(re,16)+3,V.width=se)}function S(D){var R=0,O=0,F=D.title.side;return F&&(F.indexOf("left")!==-1&&(R=D._titleWidth),F.indexOf("top")!==-1&&(O=D._titleHeight)),[R,O]}function k(D,R,O,F){var V=D._fullLayout;F||(F=V.legend);var G=V._size,J=l.isVertical(F),Z=l.isGrouped(F),Y=F.borderwidth,j=2*Y,re=o.itemGap,se=F.itemwidth+re*2,oe=2*(Y+re),N=I(F),U=F.y<0||F.y===0&&N==="top",q=F.y>1||F.y===1&&N==="bottom",Q=F.tracegroupgap;F._maxHeight=Math.max(U||q?V.height/2:G.h,30);var W=0;F._width=0,F._height=0;var X=S(F);if(J)O.each(function(Ne){var dt=Ne[0].height;n.setTranslate(this,Y+X[0],Y+X[1]+F._height+dt/2+re),F._height+=dt,F._width=Math.max(F._width,Ne[0].width)}),W=se+F._width,F._width+=re+se+j,F._height+=oe,Z&&(R.each(function(Ne,dt){n.setTranslate(this,0,dt*F.tracegroupgap)}),F._height+=(F._lgroupsLength-1)*F.tracegroupgap);else{var ee=z(F),te=F.x<0||F.x===0&&ee==="right",ie=F.x>1||F.x===1&&ee==="left",le=q||U,ge=V.width/2;F._maxWidth=Math.max(te?le&&ee==="left"?G.l+G.w:ge:ie?le&&ee==="right"?G.r+G.w:ge:G.w,2*se);var fe=0,pe=0;O.each(function(Ne){var dt=Ne[0].width+se;fe=Math.max(fe,dt),pe+=dt}),W=null;var ye=0;if(Z){var Te=0,_e=0,De=0;R.each(function(){var Ne=0,dt=0;w.select(this).selectAll("g.traces").each(function(Xt){var At=Xt[0].width,zt=Xt[0].height;n.setTranslate(this,X[0],X[1]+Y+re+zt/2+dt),dt+=zt,Ne=Math.max(Ne,se+At)});var Dt=Ne+re;_e>0&&Dt+Y+_e>F._maxWidth?(ye=Math.max(ye,_e),_e=0,De+=Te+Q,Te=dt):Te=Math.max(Te,dt),n.setTranslate(this,_e,De),_e+=Dt}),F._width=Math.max(ye,_e)+Y,F._height=De+Te+oe}else{var Be=O.size(),Ue=pe+j+(Be-1)*re<F._maxWidth,xe=0,Pe=0,Ve=0,Qe=0;O.each(function(Ne){var dt=Ne[0].height,Dt=se+Ne[0].width,Xt=(Ue?Dt:fe)+re;Xt+Y+Pe-re>=F._maxWidth&&(ye=Math.max(ye,Qe),Pe=0,Ve+=xe,F._height+=xe,xe=0),n.setTranslate(this,X[0]+Y+Pe,X[1]+Y+Ve+dt/2+re),Qe=Pe+Dt+re,Pe+=Xt,xe=Math.max(xe,dt)}),Ue?(F._width=Pe+j,F._height=xe+oe):(F._width=Math.max(ye,Qe)+j,F._height+=xe+oe)}}F._width=Math.ceil(Math.max(F._width+X[0],F._titleWidth+2*(Y+o.titlePad))),F._height=Math.ceil(Math.max(F._height+X[1],F._titleHeight+2*(Y+o.itemGap))),F._effHeight=Math.min(F._height,F._maxHeight);var Fe=D._context.edits,Le=Fe.legendText||Fe.legendPosition;O.each(function(Ne){var dt=w.select(this).select(".legendtoggle"),Dt=Ne[0].height,Xt=Le?se:W||se+Ne[0].width;J||(Xt+=re/2),n.setRect(dt,0,-Dt/2,Xt,Dt)})}function P(D){var R=D._fullLayout,O=R.legend,F=z(O),V=I(O);return M.autoMargin(D,"legend",{x:O.x,y:O.y,l:O._width*p[F],r:O._width*y[F],b:O._effHeight*y[V],t:O._effHeight*p[V]})}function z(D){return v.isRightAnchor(D)?"right":v.isCenterAnchor(D)?"center":"left"}function I(D){return v.isBottomAnchor(D)?"bottom":v.isMiddleAnchor(D)?"middle":"top"}},{"../../constants/alignment":471,"../../lib":503,"../../lib/events":492,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"./constants":417,"./get_legend_data":420,"./handle_click":421,"./helpers":422,"./style":424,"@plotly/d3":58}],420:[function(d,ne,ae){var w=d("../../registry"),v=d("./helpers");ne.exports=function(T,e){var a=e._inHover,n=v.isGrouped(e),r=v.isReversed(e),t={},f=[],o=!1,i={},g=0,p=0,y,c;function b(O,F){if(O===""||!v.isGrouped(e)){var V="~~i"+g;f.push(V),t[V]=[F],g++}else f.indexOf(O)===-1?(f.push(O),o=!0,t[O]=[F]):t[O].push(F)}for(y=0;y<T.length;y++){var l=T[y],_=l[0],s=_.trace,A=s.legendgroup;if(!(!a&&(!s.visible||!s.showlegend)))if(w.traceIs(s,"pie-like"))for(i[A]||(i[A]={}),c=0;c<l.length;c++){var m=l[c].label;i[A][m]||(b(A,{label:m,color:l[c].color,i:l[c].i,trace:s,pts:l[c].pts}),i[A][m]=!0,p=Math.max(p,(m||"").length))}else b(A,_),p=Math.max(p,(s.name||"").length)}if(!f.length)return[];var h=!o||!n,x=[];for(y=0;y<f.length;y++){var u=t[f[y]];h?x.push(u[0]):x.push(u)}for(h&&(x=[x]),y=0;y<x.length;y++){var L=1/0;for(c=0;c<x[y].length;c++){var S=x[y][c].trace.legendrank;L>S&&(L=S)}x[y][0]._groupMinRank=L,x[y][0]._preGroupSort=y}var k=function(O,F){return O[0]._groupMinRank-F[0]._groupMinRank||O[0]._preGroupSort-F[0]._preGroupSort},P=function(O,F){return O.trace.legendrank-F.trace.legendrank||O._preSort-F._preSort};for(x.forEach(function(O,F){O[0]._preGroupSort=F}),x.sort(k),y=0;y<x.length;y++){x[y].forEach(function(O,F){O._preSort=F}),x[y].sort(P);var z=x[y][0].trace,I=null;for(c=0;c<x[y].length;c++){var D=x[y][c].trace.legendgrouptitle;if(D&&D.text){I=D,a&&(D.font=e._groupTitleFont);break}}if(r&&x[y].reverse(),I){var R=!1;for(c=0;c<x[y].length;c++)if(w.traceIs(x[y][c].trace,"pie-like")){R=!0;break}x[y].unshift({i:-1,groupTitle:I,noClick:R,trace:{showlegend:z.showlegend,legendgroup:z.legendgroup,visible:e.groupclick==="toggleitem"?!0:z.visible}})}for(c=0;c<x[y].length;c++)x[y][c]=[x[y][c]]}return e._lgroupsLength=x.length,e._maxNameLength=p,x}},{"../../registry":638,"./helpers":422}],421:[function(d,ne,ae){var w=d("../../lib"),v=d("../../registry"),M=!0;ne.exports=function(e,a,n){var r=a._fullLayout;if(a._dragged||a._editing)return;var t=r.legend.itemclick,f=r.legend.itemdoubleclick,o=r.legend.groupclick;n===1&&t==="toggle"&&f==="toggleothers"&&M&&a.data&&a._context.showTips&&w.notifier(w._(a,"Double-click on legend to isolate one trace"),"long"),M=!1;var i;if(n===1?i=t:n===2&&(i=f),!i)return;var g=o==="togglegroup",p=r.hiddenlabels?r.hiddenlabels.slice():[],y=e.data()[0][0];if(y.groupTitle&&y.noClick)return;var c=a._fullData,b=y.trace,l=b.legendgroup,_,s,A,m,h,x,u={},L=[],S=[],k=[];function P(oe,N,U){var q=L.indexOf(oe),Q=u[N];return Q||(Q=u[N]=[]),L.indexOf(oe)===-1&&(L.push(oe),q=L.length-1),Q[q]=U,q}function z(oe,N){if(!(y.groupTitle&&!g)){var U=oe._fullInput;if(v.hasTransform(U,"groupby")){var q=S[U.index];if(!q){var Q=v.getTransformIndices(U,"groupby"),W=Q[Q.length-1];q=w.keyedContainer(U,"transforms["+W+"].styles","target","value.visible"),S[U.index]=q}var X=q.get(oe._group);X===void 0&&(X=!0),X!==!1&&q.set(oe._group,N),k[U.index]=P(U.index,"visible",U.visible!==!1)}else{var ee=U.visible===!1?!1:N;P(U.index,"visible",ee)}}}if(v.traceIs(b,"pie-like")){var I=y.label,D=p.indexOf(I);i==="toggle"?D===-1?p.push(I):p.splice(D,1):i==="toggleothers"&&(p=[],a.calcdata[0].forEach(function(oe){I!==oe.label&&p.push(oe.label)}),a._fullLayout.hiddenlabels&&a._fullLayout.hiddenlabels.length===p.length&&D===-1&&(p=[])),v.call("_guiRelayout",a,"hiddenlabels",p)}else{var R=l&&l.length,O=[],F;if(R)for(_=0;_<c.length;_++)F=c[_],!!F.visible&&F.legendgroup===l&&O.push(_);if(i==="toggle"){var V;switch(b.visible){case!0:V="legendonly";break;case!1:V=!1;break;case"legendonly":V=!0;break}if(R)if(g)for(_=0;_<c.length;_++)c[_].visible!==!1&&c[_].legendgroup===l&&z(c[_],V);else z(b,V);else z(b,V)}else if(i==="toggleothers"){var G,J,Z,Y,j=!0;for(_=0;_<c.length;_++)if(G=c[_]===b,Z=c[_].showlegend!==!0,!(G||Z)&&(J=R&&c[_].legendgroup===l,!J&&c[_].visible===!0&&!v.traceIs(c[_],"notLegendIsolatable"))){j=!1;break}for(_=0;_<c.length;_++)if(c[_].visible!==!1&&!v.traceIs(c[_],"notLegendIsolatable"))switch(b.visible){case"legendonly":z(c[_],!0);break;case!0:Y=j?!0:"legendonly",G=c[_]===b,Z=c[_].showlegend!==!0&&!c[_].legendgroup,J=G||R&&c[_].legendgroup===l,z(c[_],J||Z?!0:Y);break}}for(_=0;_<S.length;_++)if(A=S[_],!!A){var re=A.constructUpdate(),se=Object.keys(re);for(s=0;s<se.length;s++)m=se[s],x=u[m]=u[m]||[],x[k[_]]=re[m]}for(h=Object.keys(u),_=0;_<h.length;_++)for(m=h[_],s=0;s<L.length;s++)u[m].hasOwnProperty(s)||(u[m][s]=void 0);v.call("_guiRestyle",a,u,L)}}},{"../../lib":503,"../../registry":638}],422:[function(d,ne,ae){ae.isGrouped=function(v){return(v.traceorder||"").indexOf("grouped")!==-1},ae.isVertical=function(v){return v.orientation!=="h"},ae.isReversed=function(v){return(v.traceorder||"").indexOf("reversed")!==-1}},{}],423:[function(d,ne,ae){ne.exports={moduleType:"component",name:"legend",layoutAttributes:d("./attributes"),supplyLayoutDefaults:d("./defaults"),draw:d("./draw"),style:d("./style")}},{"./attributes":416,"./defaults":418,"./draw":419,"./style":424}],424:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../registry"),M=d("../../lib"),T=M.strTranslate,e=d("../drawing"),a=d("../color"),n=d("../colorscale/helpers").extractOpts,r=d("../../traces/scatter/subtypes"),t=d("../../traces/pie/style_one"),f=d("../../traces/pie/helpers").castOption,o=d("./constants"),i=12,g=5,p=2,y=10,c=5;ne.exports=function(A,m,h){var x=m._fullLayout;h||(h=x.legend);var u=h.itemsizing==="constant",L=h.itemwidth,S=(L+o.itemGap*2)/2,k=T(S,0),P=function(se,oe,N,U){var q;if(se+1)q=se;else if(oe&&oe.width>0)q=oe.width;else return 0;return u?U:Math.min(q,N)};A.each(function(se){var oe=w.select(this),N=M.ensureSingle(oe,"g","layers");N.style("opacity",se[0].trace.opacity);var U=h.valign,q=se[0].lineHeight,Q=se[0].height;if(U==="middle"||!q||!Q)N.attr("transform",null);else{var W={top:1,bottom:-1}[U],X=W*(.5*(q-Q+3));N.attr("transform",T(0,X))}var ee=N.selectAll("g.legendfill").data([se]);ee.enter().append("g").classed("legendfill",!0);var te=N.selectAll("g.legendlines").data([se]);te.enter().append("g").classed("legendlines",!0);var ie=N.selectAll("g.legendsymbols").data([se]);ie.enter().append("g").classed("legendsymbols",!0),ie.selectAll("g.legendpoints").data([se]).enter().append("g").classed("legendpoints",!0)}).each(re).each(D).each(O).each(R).each(V).each(Y).each(Z).each(z).each(I).each(G).each(J);function z(se){var oe=l(se),N=oe.showFill,U=oe.showLine,q=oe.showGradientLine,Q=oe.showGradientFill,W=oe.anyFill,X=oe.anyLine,ee=se[0],te=ee.trace,ie,le,ge=n(te),fe=ge.colorscale,pe=ge.reversescale,ye=function(Pe){if(Pe.size())if(N)e.fillGroupStyle(Pe,m);else{var Ve="legendfill-"+te.uid;e.gradient(Pe,m,Ve,b(pe),fe,"fill")}},Te=function(Pe){if(Pe.size()){var Ve="legendline-"+te.uid;e.lineGroupStyle(Pe),e.gradient(Pe,m,Ve,b(pe),fe,"stroke")}},_e=r.hasMarkers(te)||!W?"M5,0":X?"M5,-2":"M5,-3",De=w.select(this),Be=De.select(".legendfill").selectAll("path").data(N||Q?[se]:[]);if(Be.enter().append("path").classed("js-fill",!0),Be.exit().remove(),Be.attr("d",_e+"h"+L+"v6h-"+L+"z").call(ye),U||q){var Ue=P(void 0,te.line,y,g);le=M.minExtend(te,{line:{width:Ue}}),ie=[M.minExtend(ee,{trace:le})]}var xe=De.select(".legendlines").selectAll("path").data(U||q?[ie]:[]);xe.enter().append("path").classed("js-line",!0),xe.exit().remove(),xe.attr("d",_e+(q?"l"+L+",0.0001":"h"+L)).call(U?e.lineGroupStyle:Te)}function I(se){var oe=l(se),N=oe.anyFill,U=oe.anyLine,q=oe.showLine,Q=oe.showMarker,W=se[0],X=W.trace,ee=!Q&&!U&&!N&&r.hasText(X),te,ie;function le(Be,Ue,xe,Pe){var Ve=M.nestedProperty(X,Be).get(),Qe=M.isArrayOrTypedArray(Ve)&&Ue?Ue(Ve):Ve;if(u&&Qe&&Pe!==void 0&&(Qe=Pe),xe){if(Qe<xe[0])return xe[0];if(Qe>xe[1])return xe[1]}return Qe}function ge(Be){return W._distinct&&W.index&&Be[W.index]?Be[W.index]:Be[0]}if(Q||ee||q){var fe={},pe={};if(Q){fe.mc=le("marker.color",ge),fe.mx=le("marker.symbol",ge),fe.mo=le("marker.opacity",M.mean,[.2,1]),fe.mlc=le("marker.line.color",ge),fe.mlw=le("marker.line.width",M.mean,[0,5],p),pe.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var ye=le("marker.size",M.mean,[2,16],i);fe.ms=ye,pe.marker.size=ye}q&&(pe.line={width:le("line.width",ge,[0,10],g)}),ee&&(fe.tx="Aa",fe.tp=le("textposition",ge),fe.ts=10,fe.tc=le("textfont.color",ge),fe.tf=le("textfont.family",ge)),te=[M.minExtend(W,fe)],ie=M.minExtend(X,pe),ie.selectedpoints=null,ie.texttemplate=null}var Te=w.select(this).select("g.legendpoints"),_e=Te.selectAll("path.scatterpts").data(Q?te:[]);_e.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",k),_e.exit().remove(),_e.call(e.pointStyle,ie,m),Q&&(te[0].mrc=3);var De=Te.selectAll("g.pointtext").data(ee?te:[]);De.enter().append("g").classed("pointtext",!0).append("text").attr("transform",k),De.exit().remove(),De.selectAll("text").call(e.textPointStyle,ie,m)}function D(se){var oe=se[0].trace,N=oe.type==="waterfall";if(se[0]._distinct&&N){var U=se[0].trace[se[0].dir].marker;return se[0].mc=U.color,se[0].mlw=U.line.width,se[0].mlc=U.line.color,F(se,this,"waterfall")}var q=[];oe.visible&&N&&(q=se[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var Q=w.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(q);Q.enter().append("path").classed("legendwaterfall",!0).attr("transform",k).style("stroke-miterlimit",1),Q.exit().remove(),Q.each(function(W){var X=w.select(this),ee=oe[W[0]].marker,te=P(void 0,ee.line,c,p);X.attr("d",W[1]).style("stroke-width",te+"px").call(a.fill,ee.color),te&&X.call(a.stroke,ee.line.color)})}function R(se){F(se,this)}function O(se){F(se,this,"funnel")}function F(se,oe,N){var U=se[0].trace,q=U.marker||{},Q=q.line||{},W=N?U.visible&&U.type===N:v.traceIs(U,"bar"),X=w.select(oe).select("g.legendpoints").selectAll("path.legend"+N).data(W?[se]:[]);X.enter().append("path").classed("legend"+N,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",k),X.exit().remove(),X.each(function(ee){var te=w.select(this),ie=ee[0],le=P(ie.mlw,q.line,c,p);te.style("stroke-width",le+"px");var ge=ie.mcc;if(!h._inHover&&"mc"in ie){var fe=n(q),pe=fe.mid;pe===void 0&&(pe=(fe.max+fe.min)/2),ge=e.tryColorscale(q,"")(pe)}var ye=ge||ie.mc||q.color,Te=q.pattern,_e=Te&&e.getPatternAttr(Te.shape,0,"");if(_e){var De=e.getPatternAttr(Te.bgcolor,0,null),Be=e.getPatternAttr(Te.fgcolor,0,null),Ue=Te.fgopacity,xe=_(Te.size,8,10),Pe=_(Te.solidity,.5,1),Ve="legend-"+U.uid;te.call(e.pattern,"legend",m,Ve,_e,xe,Pe,ge,Te.fillmode,De,Be,Ue)}else te.call(a.fill,ye);le&&a.stroke(te,ie.mlc||Q.color)})}function V(se){var oe=se[0].trace,N=w.select(this).select("g.legendpoints").selectAll("path.legendbox").data(oe.visible&&v.traceIs(oe,"box-violin")?[se]:[]);N.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",k),N.exit().remove(),N.each(function(){var U=w.select(this);if((oe.boxpoints==="all"||oe.points==="all")&&a.opacity(oe.fillcolor)===0&&a.opacity((oe.line||{}).color)===0){var q=M.minExtend(oe,{marker:{size:u?i:M.constrain(oe.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});N.call(e.pointStyle,q,m)}else{var Q=P(void 0,oe.line,c,p);U.style("stroke-width",Q+"px").call(a.fill,oe.fillcolor),Q&&a.stroke(U,oe.line.color)}})}function G(se){var oe=se[0].trace,N=w.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(oe.visible&&oe.type==="candlestick"?[se,se]:[]);N.enter().append("path").classed("legendcandle",!0).attr("d",function(U,q){return q?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",k).style("stroke-miterlimit",1),N.exit().remove(),N.each(function(U,q){var Q=w.select(this),W=oe[q?"increasing":"decreasing"],X=P(void 0,W.line,c,p);Q.style("stroke-width",X+"px").call(a.fill,W.fillcolor),X&&a.stroke(Q,W.line.color)})}function J(se){var oe=se[0].trace,N=w.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(oe.visible&&oe.type==="ohlc"?[se,se]:[]);N.enter().append("path").classed("legendohlc",!0).attr("d",function(U,q){return q?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",k).style("stroke-miterlimit",1),N.exit().remove(),N.each(function(U,q){var Q=w.select(this),W=oe[q?"increasing":"decreasing"],X=P(void 0,W.line,c,p);Q.style("fill","none").call(e.dashLine,W.line.dash,X),X&&a.stroke(Q,W.line.color)})}function Z(se){j(se,this,"pie")}function Y(se){j(se,this,"funnelarea")}function j(se,oe,N){var U=se[0],q=U.trace,Q=N?q.visible&&q.type===N:v.traceIs(q,N),W=w.select(oe).select("g.legendpoints").selectAll("path.legend"+N).data(Q?[se]:[]);if(W.enter().append("path").classed("legend"+N,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",k),W.exit().remove(),W.size()){var X=(q.marker||{}).line,ee=P(f(X.width,U.pts),X,c,p),te=M.minExtend(q,{marker:{line:{width:ee}}});te.marker.line.color=X.color;var ie=M.minExtend(U,{trace:te});t(W,ie,te)}}function re(se){var oe=se[0].trace,N,U=[];if(oe.visible)switch(oe.type){case"histogram2d":case"heatmap":U=[["M-15,-2V4H15V-2Z"]],N=!0;break;case"choropleth":case"choroplethmapbox":U=[["M-6,-6V6H6V-6Z"]],N=!0;break;case"densitymapbox":U=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],N="radial";break;case"cone":U=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],N=!1;break;case"streamtube":U=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],N=!1;break;case"surface":U=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],N=!0;break;case"mesh3d":U=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],N=!1;break;case"volume":U=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],N=!0;break;case"isosurface":U=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],N=!1;break}var q=w.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(U);q.enter().append("path").classed("legend3dandfriends",!0).attr("transform",k).style("stroke-miterlimit",1),q.exit().remove(),q.each(function(Q,W){var X=w.select(this),ee=n(oe),te=ee.colorscale,ie=ee.reversescale,le=function(ye){if(ye.size()){var Te="legendfill-"+oe.uid;e.gradient(ye,m,Te,b(ie,N==="radial"),te,"fill")}},ge;if(te){if(!N){var pe=te.length;ge=W===0?te[ie?pe-1:0][1]:W===1?te[ie?0:pe-1][1]:te[Math.floor((pe-1)/2)][1]}}else{var fe=oe.vertexcolor||oe.facecolor||oe.color;ge=M.isArrayOrTypedArray(fe)?fe[W]||fe[0]:fe}X.attr("d",Q[0]),ge?X.call(a.fill,ge):X.call(le)})}};function b(s,A){var m=A?"radial":"horizontal";return m+(s?"":"reversed")}function l(s){var A=s[0].trace,m=A.contours,h=r.hasLines(A),x=r.hasMarkers(A),u=A.visible&&A.fill&&A.fill!=="none",L=!1,S=!1;if(m){var k=m.coloring;k==="lines"?L=!0:h=k==="none"||k==="heatmap"||m.showlines,m.type==="constraint"?u=m._operation!=="=":(k==="fill"||k==="heatmap")&&(S=!0)}return{showMarker:x,showLine:h,showFill:u,showGradientLine:L,showGradientFill:S,anyLine:h||L,anyFill:u||S}}function _(s,A,m){return s&&M.isArrayOrTypedArray(s)?A:s>m?m:s}},{"../../lib":503,"../../registry":638,"../../traces/pie/helpers":906,"../../traces/pie/style_one":912,"../../traces/scatter/subtypes":952,"../color":366,"../colorscale/helpers":377,"../drawing":388,"./constants":417,"@plotly/d3":58}],425:[function(d,ne,ae){d("./constants"),ne.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":427}],426:[function(d,ne,ae){var w=d("../../registry"),v=d("../../plots/plots"),M=d("../../plots/cartesian/axis_ids"),T=d("../../fonts/ploticon"),e=d("../shapes/draw").eraseActiveShape,a=d("../../lib"),n=a._,r=ne.exports={};r.toImage={name:"toImage",title:function(s){var A=s._context.toImageButtonOptions||{},m=A.format||"png";return m==="png"?n(s,"Download plot as a png"):n(s,"Download plot")},icon:T.camera,click:function(s){var A=s._context.toImageButtonOptions,m={format:A.format||"png"};a.notifier(n(s,"Taking snapshot - this may take a few seconds"),"long"),m.format!=="svg"&&a.isIE()&&(a.notifier(n(s,"IE only supports svg.  Changing format to svg."),"long"),m.format="svg"),["filename","width","height","scale"].forEach(function(h){h in A&&(m[h]=A[h])}),w.call("downloadImage",s,m).then(function(h){a.notifier(n(s,"Snapshot succeeded")+" - "+h,"long")}).catch(function(){a.notifier(n(s,"Sorry, there was a problem downloading your snapshot!"),"long")})}},r.sendDataToCloud={name:"sendDataToCloud",title:function(s){return n(s,"Edit in Chart Studio")},icon:T.disk,click:function(s){v.sendDataToCloud(s)}},r.editInChartStudio={name:"editInChartStudio",title:function(s){return n(s,"Edit in Chart Studio")},icon:T.pencil,click:function(s){v.sendDataToCloud(s)}},r.zoom2d={name:"zoom2d",_cat:"zoom",title:function(s){return n(s,"Zoom")},attr:"dragmode",val:"zoom",icon:T.zoombox,click:t},r.pan2d={name:"pan2d",_cat:"pan",title:function(s){return n(s,"Pan")},attr:"dragmode",val:"pan",icon:T.pan,click:t},r.select2d={name:"select2d",_cat:"select",title:function(s){return n(s,"Box Select")},attr:"dragmode",val:"select",icon:T.selectbox,click:t},r.lasso2d={name:"lasso2d",_cat:"lasso",title:function(s){return n(s,"Lasso Select")},attr:"dragmode",val:"lasso",icon:T.lasso,click:t},r.drawclosedpath={name:"drawclosedpath",title:function(s){return n(s,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:T.drawclosedpath,click:t},r.drawopenpath={name:"drawopenpath",title:function(s){return n(s,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:T.drawopenpath,click:t},r.drawline={name:"drawline",title:function(s){return n(s,"Draw line")},attr:"dragmode",val:"drawline",icon:T.drawline,click:t},r.drawrect={name:"drawrect",title:function(s){return n(s,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:T.drawrect,click:t},r.drawcircle={name:"drawcircle",title:function(s){return n(s,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:T.drawcircle,click:t},r.eraseshape={name:"eraseshape",title:function(s){return n(s,"Erase active shape")},icon:T.eraseshape,click:e},r.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(s){return n(s,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:t},r.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(s){return n(s,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:t},r.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(s){return n(s,"Autoscale")},attr:"zoom",val:"auto",icon:T.autoscale,click:t},r.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(s){return n(s,"Reset axes")},attr:"zoom",val:"reset",icon:T.home,click:t},r.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(s){return n(s,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:t},r.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(s){return n(s,"Compare data on hover")},attr:"hovermode",val:function(s){return s._fullLayout._isHoriz?"y":"x"},icon:T.tooltip_compare,gravity:"ne",click:t};function t(s,A){var m=A.currentTarget,h=m.getAttribute("data-attr"),x=m.getAttribute("data-val")||!0,u=s._fullLayout,L={},S=M.list(s,null,!0),k=u._cartesianSpikesEnabled,P,z;if(h==="zoom"){var I=x==="in"?.5:2,D=(1+I)/2,R=(1-I)/2,O;for(z=0;z<S.length;z++)if(P=S[z],!P.fixedrange)if(O=P._name,x==="auto")L[O+".autorange"]=!0;else if(x==="reset"){if(P._rangeInitial===void 0)L[O+".autorange"]=!0;else{var F=P._rangeInitial.slice();L[O+".range[0]"]=F[0],L[O+".range[1]"]=F[1]}P._showSpikeInitial!==void 0&&(L[O+".showspikes"]=P._showSpikeInitial,k==="on"&&!P._showSpikeInitial&&(k="off"))}else{var V=[P.r2l(P.range[0]),P.r2l(P.range[1])],G=[D*V[0]+R*V[1],D*V[1]+R*V[0]];L[O+".range[0]"]=P.l2r(G[0]),L[O+".range[1]"]=P.l2r(G[1])}}else h==="hovermode"&&(x==="x"||x==="y")&&(x=u._isHoriz?"y":"x",m.setAttribute("data-val",x)),L[h]=x;u._cartesianSpikesEnabled=k,w.call("_guiRelayout",s,L)}r.zoom3d={name:"zoom3d",_cat:"zoom",title:function(s){return n(s,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:T.zoombox,click:f},r.pan3d={name:"pan3d",_cat:"pan",title:function(s){return n(s,"Pan")},attr:"scene.dragmode",val:"pan",icon:T.pan,click:f},r.orbitRotation={name:"orbitRotation",title:function(s){return n(s,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:T["3d_rotate"],click:f},r.tableRotation={name:"tableRotation",title:function(s){return n(s,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:T["z-axis"],click:f};function f(s,A){for(var m=A.currentTarget,h=m.getAttribute("data-attr"),x=m.getAttribute("data-val")||!0,u=s._fullLayout._subplots.gl3d||[],L={},S=h.split("."),k=0;k<u.length;k++)L[u[k]+"."+S[1]]=x;var P=x==="pan"?x:"zoom";L.dragmode=P,w.call("_guiRelayout",s,L)}r.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(s){return n(s,"Reset camera to default")},attr:"resetDefault",icon:T.home,click:o},r.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(s){return n(s,"Reset camera to last save")},attr:"resetLastSave",icon:T.movie,click:o};function o(s,A){for(var m=A.currentTarget,h=m.getAttribute("data-attr"),x=h==="resetLastSave",u=h==="resetDefault",L=s._fullLayout,S=L._subplots.gl3d||[],k={},P=0;P<S.length;P++){var z=S[P],I=z+".camera",D=z+".aspectratio",R=z+".aspectmode",O=L[z]._scene,F;x?(k[I+".up"]=O.viewInitial.up,k[I+".eye"]=O.viewInitial.eye,k[I+".center"]=O.viewInitial.center,F=!0):u&&(k[I+".up"]=null,k[I+".eye"]=null,k[I+".center"]=null,F=!0),F&&(k[D+".x"]=O.viewInitial.aspectratio.x,k[D+".y"]=O.viewInitial.aspectratio.y,k[D+".z"]=O.viewInitial.aspectratio.z,k[R]=O.viewInitial.aspectmode)}w.call("_guiRelayout",s,k)}r.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(s){return n(s,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:g};function i(s,A){var m=A.currentTarget,h=m._previousVal,x=s._fullLayout,u=x._subplots.gl3d||[],L=["xaxis","yaxis","zaxis"],S={},k={};if(h)k=h,m._previousVal=null;else{for(var P=0;P<u.length;P++){var z=u[P],I=x[z],D=z+".hovermode";S[D]=I.hovermode,k[D]=!1;for(var R=0;R<3;R++){var O=L[R],F=z+"."+O+".showspikes";k[F]=!1,S[F]=I[O].showspikes}}m._previousVal=S}return k}function g(s,A){var m=i(s,A);w.call("_guiRelayout",s,m)}r.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(s){return n(s,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:p},r.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(s){return n(s,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:p},r.resetGeo={name:"resetGeo",_cat:"reset",title:function(s){return n(s,"Reset")},attr:"reset",val:null,icon:T.autoscale,click:p},r.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(s){return n(s,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:c};function p(s,A){for(var m=A.currentTarget,h=m.getAttribute("data-attr"),x=m.getAttribute("data-val")||!0,u=s._fullLayout,L=u._subplots.geo||[],S=0;S<L.length;S++){var k=L[S],P=u[k];if(h==="zoom"){var z=P.projection.scale,I=x==="in"?2*z:.5*z;w.call("_guiRelayout",s,k+".projection.scale",I)}}h==="reset"&&_(s,"geo")}r.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(s){return n(s,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:c},r.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(s){return n(s,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:T.tooltip_basic,gravity:"ne",click:c};function y(s){var A=s._fullLayout;return A.hovermode?!1:A._has("cartesian")?A._isHoriz?"y":"x":"closest"}function c(s){var A=y(s);w.call("_guiRelayout",s,"hovermode",A)}r.resetViewSankey={name:"resetSankeyGroup",title:function(s){return n(s,"Reset view")},icon:T.home,click:function(s){for(var A={"node.groups":[],"node.x":[],"node.y":[]},m=0;m<s._fullData.length;m++){var h=s._fullData[m]._viewInitial;A["node.groups"].push(h.node.groups.slice()),A["node.x"].push(h.node.x.slice()),A["node.y"].push(h.node.y.slice())}w.call("restyle",s,A)}},r.toggleHover={name:"toggleHover",title:function(s){return n(s,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:T.tooltip_basic,gravity:"ne",click:function(s,A){var m=i(s,A);m.hovermode=y(s),w.call("_guiRelayout",s,m)}},r.resetViews={name:"resetViews",title:function(s){return n(s,"Reset views")},icon:T.home,click:function(s,A){var m=A.currentTarget;m.setAttribute("data-attr","zoom"),m.setAttribute("data-val","reset"),t(s,A),m.setAttribute("data-attr","resetLastSave"),o(s,A),_(s,"geo"),_(s,"mapbox")}},r.toggleSpikelines={name:"toggleSpikelines",title:function(s){return n(s,"Toggle Spike Lines")},icon:T.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(s){var A=s._fullLayout,m=A._cartesianSpikesEnabled;A._cartesianSpikesEnabled=m==="on"?"off":"on",w.call("_guiRelayout",s,b(s))}};function b(s){for(var A=s._fullLayout,m=A._cartesianSpikesEnabled==="on",h=M.list(s,null,!0),x={},u=0;u<h.length;u++){var L=h[u];x[L._name+".showspikes"]=m?!0:L._showSpikeInitial}return x}r.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(s){return n(s,"Reset view")},attr:"reset",icon:T.home,click:function(s){_(s,"mapbox")}},r.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(s){return n(s,"Zoom in")},attr:"zoom",val:"in",icon:T.zoom_plus,click:l},r.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(s){return n(s,"Zoom out")},attr:"zoom",val:"out",icon:T.zoom_minus,click:l};function l(s,A){for(var m=A.currentTarget,h=m.getAttribute("data-val"),x=s._fullLayout,u=x._subplots.mapbox||[],L=1.05,S={},k=0;k<u.length;k++){var P=u[k],z=x[P].zoom,I=h==="in"?L*z:z/L;S[P+".zoom"]=I}w.call("_guiRelayout",s,S)}function _(s,A){for(var m=s._fullLayout,h=m._subplots[A]||[],x={},u=0;u<h.length;u++)for(var L=h[u],S=m[L]._subplot,k=S.viewInitial,P=Object.keys(k),z=0;z<P.length;z++){var I=P[z];x[L+"."+I]=k[I]}w.call("_guiRelayout",s,x)}},{"../../fonts/ploticon":482,"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../shapes/draw":450}],427:[function(d,ne,ae){var w=d("./buttons"),v=Object.keys(w),M=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],T=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(M),e=[],a=function(n){if(T.indexOf(n._cat||n.name)===-1){var r=n.name,t=(n._cat||n.name).toLowerCase();e.indexOf(r)===-1&&e.push(r),e.indexOf(t)===-1&&e.push(t)}};v.forEach(function(n){a(w[n])}),e.sort(),ne.exports={DRAW_MODES:M,backButtons:T,foreButtons:e}},{"./buttons":426}],428:[function(d,ne,ae){var w=d("../../lib"),v=d("../color"),M=d("../../plot_api/plot_template"),T=d("./attributes");ne.exports=function(a,n){var r=a.modebar||{},t=M.newContainer(n,"modebar");function f(i,g){return w.coerce(r,t,T,i,g)}f("orientation"),f("bgcolor",v.addOpacity(n.paper_bgcolor,.5));var o=v.contrast(v.rgb(n.modebar.bgcolor));f("color",v.addOpacity(o,.3)),f("activecolor",v.addOpacity(o,.7)),f("uirevision",n.uirevision),f("add"),f("remove")}},{"../../lib":503,"../../plot_api/plot_template":543,"../color":366,"./attributes":425}],429:[function(d,ne,ae){ne.exports={moduleType:"component",name:"modebar",layoutAttributes:d("./attributes"),supplyLayoutDefaults:d("./defaults"),manage:d("./manage")}},{"./attributes":425,"./defaults":428,"./manage":430}],430:[function(d,ne,ae){var w=d("../../plots/cartesian/axis_ids"),v=d("../../traces/scatter/subtypes"),M=d("../../registry"),T=d("../fx/helpers").isUnifiedHover,e=d("./modebar"),a=d("./buttons"),n=d("./constants").DRAW_MODES,r=d("../../lib").extendDeep;ne.exports=function(c){var b=c._fullLayout,l=c._context,_=b._modeBar;if(!l.displayModeBar&&!l.watermark){_&&(_.destroy(),delete b._modeBar);return}if(!Array.isArray(l.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(l.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var s=l.modeBarButtons,A;Array.isArray(s)&&s.length?A=p(s):!l.displayModeBar&&l.watermark?A=[]:A=t(c),_?_.update(c,A):b._modeBar=e(c,A)};function t(y){var c=y._fullLayout,b=y._fullData,l=y._context;function _(W,X){if(typeof X=="string"){if(X.toLowerCase()===W.toLowerCase())return!0}else{var ee=X.name,te=X._cat||X.name;if(ee===W||te===W.toLowerCase())return!0}return!1}var s=c.modebar.add;typeof s=="string"&&(s=[s]);var A=c.modebar.remove;typeof A=="string"&&(A=[A]);var m=l.modeBarButtonsToAdd.concat(s.filter(function(W){for(var X=0;X<l.modeBarButtonsToRemove.length;X++)if(_(W,l.modeBarButtonsToRemove[X]))return!1;return!0})),h=l.modeBarButtonsToRemove.concat(A.filter(function(W){for(var X=0;X<l.modeBarButtonsToAdd.length;X++)if(_(W,l.modeBarButtonsToAdd[X]))return!1;return!0})),x=c._has("cartesian"),u=c._has("gl3d"),L=c._has("geo"),S=c._has("pie"),k=c._has("funnelarea"),P=c._has("gl2d"),z=c._has("ternary"),I=c._has("mapbox"),D=c._has("polar"),R=c._has("smith"),O=c._has("sankey"),F=f(c),V=T(c.hovermode),G=[];function J(W){if(!!W.length){for(var X=[],ee=0;ee<W.length;ee++){for(var te=W[ee],ie=a[te],le=ie.name.toLowerCase(),ge=(ie._cat||ie.name).toLowerCase(),fe=!1,pe=0;pe<h.length;pe++){var ye=h[pe].toLowerCase();if(ye===le||ye===ge){fe=!0;break}}fe||X.push(a[te])}G.push(X)}}var Z=["toImage"];l.showEditInChartStudio?Z.push("editInChartStudio"):l.showSendToCloud&&Z.push("sendDataToCloud"),J(Z);var Y=[],j=[],re=[],se=[];(x||P||S||k||z)+L+u+I+D+R>1?(j=["toggleHover"],re=["resetViews"]):L?(Y=["zoomInGeo","zoomOutGeo"],j=["hoverClosestGeo"],re=["resetGeo"]):u?(j=["hoverClosest3d"],re=["resetCameraDefault3d","resetCameraLastSave3d"]):I?(Y=["zoomInMapbox","zoomOutMapbox"],j=["toggleHover"],re=["resetViewMapbox"]):P?j=["hoverClosestGl2d"]:S?j=["hoverClosestPie"]:O?(j=["hoverClosestCartesian","hoverCompareCartesian"],re=["resetViewSankey"]):j=["toggleHover"],x&&(j=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(i(b)||V)&&(j=[]),(x||P)&&!F&&(Y=["zoomIn2d","zoomOut2d","autoScale2d"],re[0]!=="resetViews"&&(re=["resetScale2d"])),u?se=["zoom3d","pan3d","orbitRotation","tableRotation"]:(x||P)&&!F||z?se=["zoom2d","pan2d"]:I||L?se=["pan2d"]:D&&(se=["zoom2d"]),o(b)&&se.push("select2d","lasso2d");var oe=[],N=function(W){oe.indexOf(W)===-1&&j.indexOf(W)!==-1&&oe.push(W)};if(Array.isArray(m)){for(var U=[],q=0;q<m.length;q++){var Q=m[q];typeof Q=="string"?(Q=Q.toLowerCase(),n.indexOf(Q)!==-1?(c._has("mapbox")||c._has("cartesian"))&&se.push(Q):Q==="togglespikelines"?N("toggleSpikelines"):Q==="togglehover"?N("toggleHover"):Q==="hovercompare"?N("hoverCompareCartesian"):Q==="hoverclosest"?(N("hoverClosestCartesian"),N("hoverClosestGeo"),N("hoverClosest3d"),N("hoverClosestGl2d"),N("hoverClosestPie")):Q==="v1hovermode"&&(N("toggleHover"),N("hoverClosestCartesian"),N("hoverCompareCartesian"),N("hoverClosestGeo"),N("hoverClosest3d"),N("hoverClosestGl2d"),N("hoverClosestPie"))):U.push(Q)}m=U}return J(se),J(Y.concat(re)),J(oe),g(G,m)}function f(y){for(var c=w.list({_fullLayout:y},null,!0),b=0;b<c.length;b++)if(!c[b].fixedrange)return!1;return!0}function o(y){for(var c=!1,b=0;b<y.length&&!c;b++){var l=y[b];!l._module||!l._module.selectPoints||(M.traceIs(l,"scatter-like")?(v.hasMarkers(l)||v.hasText(l))&&(c=!0):M.traceIs(l,"box-violin")?(l.boxpoints==="all"||l.points==="all")&&(c=!0):c=!0)}return c}function i(y){for(var c=0;c<y.length;c++)if(!M.traceIs(y[c],"noHover"))return!1;return!0}function g(y,c){if(c.length)if(Array.isArray(c[0]))for(var b=0;b<c.length;b++)y.push(c[b]);else y.push(c);return y}function p(y){for(var c=r([],y),b=0;b<c.length;b++)for(var l=c[b],_=0;_<l.length;_++){var s=l[_];if(typeof s=="string")if(a[s]!==void 0)c[b][_]=a[s];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return c}},{"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../registry":638,"../../traces/scatter/subtypes":952,"../fx/helpers":402,"./buttons":426,"./constants":427,"./modebar":431}],431:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("fast-isnumeric"),M=d("../../lib"),T=d("../../fonts/ploticon"),e=d("../../version").version,a=new DOMParser;function n(o){this.container=o.container,this.element=document.createElement("div"),this.update(o.graphInfo,o.buttons),this.container.appendChild(this.element)}var r=n.prototype;r.update=function(o,i){this.graphInfo=o;var g=this.graphInfo._context,p=this.graphInfo._fullLayout,y="modebar-"+p._uid;this.element.setAttribute("id",y),this._uid=y,this.element.className="modebar",g.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),p.modebar.orientation==="v"&&(this.element.className+=" vertical",i=i.reverse());var c=p.modebar,b=g.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";M.deleteRelatedStyleRule(y),M.addRelatedStyleRule(y,b+"#"+y+" .modebar-group","background-color: "+c.bgcolor),M.addRelatedStyleRule(y,"#"+y+" .modebar-btn .icon path","fill: "+c.color),M.addRelatedStyleRule(y,"#"+y+" .modebar-btn:hover .icon path","fill: "+c.activecolor),M.addRelatedStyleRule(y,"#"+y+" .modebar-btn.active .icon path","fill: "+c.activecolor);var l=!this.hasButtons(i),_=this.hasLogo!==g.displaylogo,s=this.locale!==g.locale;if(this.locale=g.locale,(l||_||s)&&(this.removeAllButtons(),this.updateButtons(i),g.watermark||g.displaylogo)){var A=this.getLogo();g.watermark&&(A.className=A.className+" watermark"),p.modebar.orientation==="v"?this.element.insertBefore(A,this.element.childNodes[0]):this.element.appendChild(A),this.hasLogo=!0}this.updateActiveButton()},r.updateButtons=function(o){var i=this;this.buttons=o,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(g){var p=i.createGroup();g.forEach(function(y){var c=y.name;if(!c)throw new Error("must provide button 'name' in button config");if(i.buttonsNames.indexOf(c)!==-1)throw new Error("button name '"+c+"' is taken");i.buttonsNames.push(c);var b=i.createButton(y);i.buttonElements.push(b),p.appendChild(b)}),i.element.appendChild(p)})},r.createGroup=function(){var o=document.createElement("div");return o.className="modebar-group",o},r.createButton=function(o){var i=this,g=document.createElement("a");g.setAttribute("rel","tooltip"),g.className="modebar-btn";var p=o.title;p===void 0?p=o.name:typeof p=="function"&&(p=p(this.graphInfo)),(p||p===0)&&g.setAttribute("data-title",p),o.attr!==void 0&&g.setAttribute("data-attr",o.attr);var y=o.val;y!==void 0&&(typeof y=="function"&&(y=y(this.graphInfo)),g.setAttribute("data-val",y));var c=o.click;if(typeof c!="function")throw new Error("must provide button 'click' function in button config");g.addEventListener("click",function(l){o.click(i.graphInfo,l),i.updateActiveButton(l.currentTarget)}),g.setAttribute("data-toggle",o.toggle||!1),o.toggle&&w.select(g).classed("active",!0);var b=o.icon;return typeof b=="function"?g.appendChild(b()):g.appendChild(this.createIcon(b||T.question)),g.setAttribute("data-gravity",o.gravity||"n"),g},r.createIcon=function(o){var i=v(o.height)?Number(o.height):o.ascent-o.descent,g="http://www.w3.org/2000/svg",p;if(o.path){p=document.createElementNS(g,"svg"),p.setAttribute("viewBox",[0,0,o.width,i].join(" ")),p.setAttribute("class","icon");var y=document.createElementNS(g,"path");y.setAttribute("d",o.path),o.transform?y.setAttribute("transform",o.transform):o.ascent!==void 0&&y.setAttribute("transform","matrix(1 0 0 -1 0 "+o.ascent+")"),p.appendChild(y)}if(o.svg){var c=a.parseFromString(o.svg,"application/xml");p=c.childNodes[0]}return p.setAttribute("height","1em"),p.setAttribute("width","1em"),p},r.updateActiveButton=function(o){var i=this.graphInfo._fullLayout,g=o!==void 0?o.getAttribute("data-attr"):null;this.buttonElements.forEach(function(p){var y=p.getAttribute("data-val")||!0,c=p.getAttribute("data-attr"),b=p.getAttribute("data-toggle")==="true",l=w.select(p);if(b)c===g&&l.classed("active",!l.classed("active"));else{var _=c===null?c:M.nestedProperty(i,c).get();l.classed("active",_===y)}})},r.hasButtons=function(o){var i=this.buttons;if(!i||o.length!==i.length)return!1;for(var g=0;g<o.length;++g){if(o[g].length!==i[g].length)return!1;for(var p=0;p<o[g].length;p++)if(o[g][p].name!==i[g][p].name)return!1}return!0};function t(o){return o+" (v"+e+")"}r.getLogo=function(){var o=this.createGroup(),i=document.createElement("a");return i.href="https://plotly.com/",i.target="_blank",i.setAttribute("data-title",t(M._(this.graphInfo,"Produced with Plotly.js"))),i.className="modebar-btn plotlyjsicon modebar-btn--logo",i.appendChild(this.createIcon(T.newplotlylogo)),o.appendChild(i),o},r.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},r.destroy=function(){M.removeElement(this.container.querySelector(".modebar")),M.deleteRelatedStyleRule(this._uid)};function f(o,i){var g=o._fullLayout,p=new n({graphInfo:o,container:g._modebardiv.node(),buttons:i});return g._privateplot&&w.select(p.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),p}ne.exports=f},{"../../fonts/ploticon":482,"../../lib":503,"../../version":1123,"@plotly/d3":58,"fast-isnumeric":190}],432:[function(d,ne,ae){var w=d("../../plots/font_attributes"),v=d("../color/attributes"),M=d("../../plot_api/plot_template").templatedArray,T=M("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});ne.exports={visible:{valType:"boolean",editType:"plot"},buttons:T,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:w({editType:"plot"}),bgcolor:{valType:"color",dflt:v.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:v.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":543,"../../plots/font_attributes":585,"../color/attributes":365}],433:[function(d,ne,ae){ne.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],434:[function(d,ne,ae){var w=d("../../lib"),v=d("../color"),M=d("../../plot_api/plot_template"),T=d("../../plots/array_container_defaults"),e=d("./attributes"),a=d("./constants");ne.exports=function(f,o,i,g,p){var y=f.rangeselector||{},c=M.newContainer(o,"rangeselector");function b(m,h){return w.coerce(y,c,e,m,h)}var l=T(y,c,{name:"buttons",handleItemDefaults:n,calendar:p}),_=b("visible",l.length>0);if(_){var s=r(o,i,g);b("x",s[0]),b("y",s[1]),w.noneOrAll(f,o,["x","y"]),b("xanchor"),b("yanchor"),w.coerceFont(b,"font",i.font);var A=b("bgcolor");b("activecolor",v.contrast(A,a.lightAmount,a.darkAmount)),b("bordercolor"),b("borderwidth")}};function n(t,f,o,i){var g=i.calendar;function p(b,l){return w.coerce(t,f,e.buttons,b,l)}var y=p("visible");if(y){var c=p("step");c!=="all"&&(g&&g!=="gregorian"&&(c==="month"||c==="year")?f.stepmode="backward":p("stepmode"),p("count")),p("label")}}function r(t,f,o){for(var i=o.filter(function(c){return f[c].anchor===t._id}),g=0,p=0;p<i.length;p++){var y=f[i[p]].domain;y&&(g=Math.max(y[1],g))}return[t.domain[0],g+a.yPad]}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../color":366,"./attributes":432,"./constants":433}],435:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../registry"),M=d("../../plots/plots"),T=d("../color"),e=d("../drawing"),a=d("../../lib"),n=a.strTranslate,r=d("../../lib/svg_text_utils"),t=d("../../plots/cartesian/axis_ids"),f=d("../../constants/alignment"),o=f.LINE_SPACING,i=f.FROM_TL,g=f.FROM_BR,p=d("./constants"),y=d("./get_update_object");ne.exports=function(u){var L=u._fullLayout,S=L._infolayer.selectAll(".rangeselector").data(c(u),b);S.enter().append("g").classed("rangeselector",!0),S.exit().remove(),S.style({cursor:"pointer","pointer-events":"all"}),S.each(function(k){var P=w.select(this),z=k,I=z.rangeselector,D=P.selectAll("g.button").data(a.filterVisible(I.buttons));D.enter().append("g").classed("button",!0),D.exit().remove(),D.each(function(R){var O=w.select(this),F=y(z,R);R._isActive=l(z,R,F),O.call(_,I,R),O.call(A,I,R,u),O.on("click",function(){u._dragged||v.call("_guiRelayout",u,F)}),O.on("mouseover",function(){R._isHovered=!0,O.call(_,I,R)}),O.on("mouseout",function(){R._isHovered=!1,O.call(_,I,R)})}),h(u,D,I,z._name,P)})};function c(x){for(var u=t.list(x,"x",!0),L=[],S=0;S<u.length;S++){var k=u[S];k.rangeselector&&k.rangeselector.visible&&L.push(k)}return L}function b(x){return x._id}function l(x,u,L){if(u.step==="all")return x.autorange===!0;var S=Object.keys(L);return x.range[0]===L[S[0]]&&x.range[1]===L[S[1]]}function _(x,u,L){var S=a.ensureSingle(x,"rect","selector-rect",function(k){k.attr("shape-rendering","crispEdges")});S.attr({rx:p.rx,ry:p.ry}),S.call(T.stroke,u.bordercolor).call(T.fill,s(u,L)).style("stroke-width",u.borderwidth+"px")}function s(x,u){return u._isActive||u._isHovered?x.activecolor:x.bgcolor}function A(x,u,L,S){function k(z){r.convertToTspans(z,S)}var P=a.ensureSingle(x,"text","selector-text",function(z){z.attr("text-anchor","middle")});P.call(e.font,u.font).text(m(L,S._fullLayout._meta)).call(k)}function m(x,u){return x.label?u?a.templateString(x.label,u):x.label:x.step==="all"?"all":x.count+x.step.charAt(0)}function h(x,u,L,S,k){var P=0,z=0,I=L.borderwidth;u.each(function(){var G=w.select(this),J=G.select(".selector-text"),Z=L.font.size*o,Y=Math.max(Z*r.lineCount(J),16)+3;z=Math.max(z,Y)}),u.each(function(){var G=w.select(this),J=G.select(".selector-rect"),Z=G.select(".selector-text"),Y=Z.node()&&e.bBox(Z.node()).width,j=L.font.size*o,re=r.lineCount(Z),se=Math.max(Y+10,p.minButtonWidth);G.attr("transform",n(I+P,I)),J.attr({x:0,y:0,width:se,height:z}),r.positionText(Z,se/2,z/2-(re-1)*j/2+3),P+=se+5});var D=x._fullLayout._size,R=D.l+D.w*L.x,O=D.t+D.h*(1-L.y),F="left";a.isRightAnchor(L)&&(R-=P,F="right"),a.isCenterAnchor(L)&&(R-=P/2,F="center");var V="top";a.isBottomAnchor(L)&&(O-=z,V="bottom"),a.isMiddleAnchor(L)&&(O-=z/2,V="middle"),P=Math.ceil(P),z=Math.ceil(z),R=Math.round(R),O=Math.round(O),M.autoMargin(x,S+"-range-selector",{x:L.x,y:L.y,l:P*i[F],r:P*g[F],b:z*g[V],t:z*i[V]}),k.attr("transform",n(R,O))}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../color":366,"../drawing":388,"./constants":433,"./get_update_object":436,"@plotly/d3":58}],436:[function(d,ne,ae){var w=d("d3-time"),v=d("../../lib").titleCase;ne.exports=function(e,a){var n=e._name,r={};if(a.step==="all")r[n+".autorange"]=!0;else{var t=M(e,a);r[n+".range[0]"]=t[0],r[n+".range[1]"]=t[1]}return r};function M(T,e){var a=T.range,n=new Date(T.r2l(a[1])),r=e.step,t=w["utc"+v(r)],f=e.count,o;switch(e.stepmode){case"backward":o=T.l2r(+t.offset(n,-f));break;case"todate":var i=t.offset(n,-f);o=T.l2r(+t.ceil(i));break}var g=a[1];return[o,g]}},{"../../lib":503,"d3-time":122}],437:[function(d,ne,ae){ne.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:d("./attributes")}}},layoutAttributes:d("./attributes"),handleDefaults:d("./defaults"),draw:d("./draw")}},{"./attributes":432,"./defaults":434,"./draw":435}],438:[function(d,ne,ae){var w=d("../color/attributes");ne.exports={bgcolor:{valType:"color",dflt:w.background,editType:"plot"},bordercolor:{valType:"color",dflt:w.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":365}],439:[function(d,ne,ae){var w=d("../../plots/cartesian/axis_ids").list,v=d("../../plots/cartesian/autorange").getAutoRange,M=d("./constants");ne.exports=function(e){for(var a=w(e,"x",!0),n=0;n<a.length;n++){var r=a[n],t=r[M.name];t&&t.visible&&t.autorange&&(t._input.autorange=!0,t._input.range=t.range=v(e,r))}}},{"../../plots/cartesian/autorange":553,"../../plots/cartesian/axis_ids":558,"./constants":440}],440:[function(d,ne,ae){ne.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],441:[function(d,ne,ae){var w=d("../../lib"),v=d("../../plot_api/plot_template"),M=d("../../plots/cartesian/axis_ids"),T=d("./attributes"),e=d("./oppaxis_attributes");ne.exports=function(n,r,t){var f=n[t],o=r[t];if(!(f.rangeslider||r._requestRangeslider[o._id]))return;w.isPlainObject(f.rangeslider)||(f.rangeslider={});var i=f.rangeslider,g=v.newContainer(o,"rangeslider");function p(S,k){return w.coerce(i,g,T,S,k)}var y,c;function b(S,k){return w.coerce(y,c,e,S,k)}var l=p("visible");if(!!l){p("bgcolor",r.plot_bgcolor),p("bordercolor"),p("borderwidth"),p("thickness"),p("autorange",!o.isValidRange(i.range)),p("range");var _=r._subplots;if(_)for(var s=_.cartesian.filter(function(S){return S.substr(0,S.indexOf("y"))===M.name2id(t)}).map(function(S){return S.substr(S.indexOf("y"),S.length)}),A=w.simpleMap(s,M.id2name),m=0;m<A.length;m++){var h=A[m];y=i[h]||{},c=v.newContainer(g,h,"yaxis");var x=r[h],u;y.range&&x.isValidRange(y.range)&&(u="fixed");var L=b("rangemode",u);L!=="match"&&b("range",x.range.slice())}g._input=i}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_ids":558,"./attributes":438,"./oppaxis_attributes":445}],442:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../registry"),M=d("../../plots/plots"),T=d("../../lib"),e=T.strTranslate,a=d("../drawing"),n=d("../color"),r=d("../titles"),t=d("../../plots/cartesian"),f=d("../../plots/cartesian/axis_ids"),o=d("../dragelement"),i=d("../../lib/setcursor"),g=d("./constants");ne.exports=function(x){for(var u=x._fullLayout,L=u._rangeSliderData,S=0;S<L.length;S++){var k=L[S][g.name];k._clipId=k._id+"-"+u._uid}function P(I){return I._name}var z=u._infolayer.selectAll("g."+g.containerClassName).data(L,P);z.exit().each(function(I){var D=I[g.name];u._topdefs.select("#"+D._clipId).remove()}).remove(),L.length!==0&&(z.enter().append("g").classed(g.containerClassName,!0).attr("pointer-events","all"),z.each(function(I){var D=w.select(this),R=I[g.name],O=u[f.id2name(I.anchor)],F=R[f.id2name(I.anchor)];if(R.range){var V=T.simpleMap(R.range,I.r2l),G=T.simpleMap(I.range,I.r2l),J;G[0]<G[1]?J=[Math.min(V[0],G[0]),Math.max(V[1],G[1])]:J=[Math.max(V[0],G[0]),Math.min(V[1],G[1])],R.range=R._input.range=T.simpleMap(J,I.l2r)}I.cleanRange("rangeslider.range");var Z=u._size,Y=I.domain;R._width=Z.w*(Y[1]-Y[0]);var j=Math.round(Z.l+Z.w*Y[0]),re=Math.round(Z.t+Z.h*(1-I._counterDomainMin)+(I.side==="bottom"?I._depth:0)+R._offsetShift+g.extraPad);D.attr("transform",e(j,re)),R._rl=T.simpleMap(R.range,I.r2l);var se=R._rl[0],oe=R._rl[1],N=oe-se;if(R.p2d=function(ge){return ge/R._width*N+se},R.d2p=function(ge){return(ge-se)/N*R._width},I.rangebreaks){var U=I.locateBreaks(se,oe);if(U.length){var q,Q,W=0;for(q=0;q<U.length;q++)Q=U[q],W+=Q.max-Q.min;var X=R._width/(oe-se-W),ee=[-X*se];for(q=0;q<U.length;q++)Q=U[q],ee.push(ee[ee.length-1]-X*(Q.max-Q.min));for(R.d2p=function(ge){for(var fe=ee[0],pe=0;pe<U.length;pe++){var ye=U[pe];if(ge>=ye.max)fe=ee[pe+1];else if(ge<ye.min)break}return fe+X*ge},q=0;q<U.length;q++)Q=U[q],Q.pmin=R.d2p(Q.min),Q.pmax=R.d2p(Q.max);R.p2d=function(ge){for(var fe=ee[0],pe=0;pe<U.length;pe++){var ye=U[pe];if(ge>=ye.pmax)fe=ee[pe+1];else if(ge<ye.pmin)break}return(ge-fe)/X}}}if(F.rangemode!=="match"){var te=O.r2l(F.range[0]),ie=O.r2l(F.range[1]),le=ie-te;R.d2pOppAxis=function(ge){return(ge-te)/le*R._height}}D.call(b,x,I,R).call(l,x,I,R).call(_,x,I,R).call(A,x,I,R,F).call(m,x,I,R).call(h,x,I,R),p(D,x,I,R),c(D,x,I,R,O,F),I.side==="bottom"&&r.draw(x,I._id+"title",{propContainer:I,propName:I._name+".title",placeholder:u._dfltTitle.x,attributes:{x:I._offset+I._length/2,y:re+R._height+R._offsetShift+10+1.5*I.title.font.size,"text-anchor":"middle"}})}))};function p(x,u,L,S){if(u._context.staticPlot)return;var k=x.select("rect."+g.slideBoxClassName).node(),P=x.select("rect."+g.grabAreaMinClassName).node(),z=x.select("rect."+g.grabAreaMaxClassName).node();function I(){var D=w.event,R=D.target,O=D.clientX||D.touches[0].clientX,F=O-x.node().getBoundingClientRect().left,V=S.d2p(L._rl[0]),G=S.d2p(L._rl[1]),J=o.coverSlip();this.addEventListener("touchmove",Z),this.addEventListener("touchend",Y),J.addEventListener("mousemove",Z),J.addEventListener("mouseup",Y);function Z(j){var re=j.clientX||j.touches[0].clientX,se=+re-O,oe,N,U;switch(R){case k:U="ew-resize",oe=V+se,N=G+se;break;case P:U="col-resize",oe=V+se,N=G;break;case z:U="col-resize",oe=V,N=G+se;break;default:U="ew-resize",oe=F,N=F+se;break}if(N<oe){var q=N;N=oe,oe=q}S._pixelMin=oe,S._pixelMax=N,i(w.select(J),U),y(x,u,L,S)}function Y(){J.removeEventListener("mousemove",Z),J.removeEventListener("mouseup",Y),this.removeEventListener("touchmove",Z),this.removeEventListener("touchend",Y),T.removeElement(J)}}x.on("mousedown",I),x.on("touchstart",I)}function y(x,u,L,S){function k(I){return L.l2r(T.constrain(I,S._rl[0],S._rl[1]))}var P=k(S.p2d(S._pixelMin)),z=k(S.p2d(S._pixelMax));window.requestAnimationFrame(function(){v.call("_guiRelayout",u,L._name+".range",[P,z])})}function c(x,u,L,S,k,P){var z=g.handleWidth/2;function I(j){return T.constrain(j,0,S._width)}function D(j){return T.constrain(j,0,S._height)}function R(j){return T.constrain(j,-z,S._width+z)}var O=I(S.d2p(L._rl[0])),F=I(S.d2p(L._rl[1]));if(x.select("rect."+g.slideBoxClassName).attr("x",O).attr("width",F-O),x.select("rect."+g.maskMinClassName).attr("width",O),x.select("rect."+g.maskMaxClassName).attr("x",F).attr("width",S._width-F),P.rangemode!=="match"){var V=S._height-D(S.d2pOppAxis(k._rl[1])),G=S._height-D(S.d2pOppAxis(k._rl[0]));x.select("rect."+g.maskMinOppAxisClassName).attr("x",O).attr("height",V).attr("width",F-O),x.select("rect."+g.maskMaxOppAxisClassName).attr("x",O).attr("y",G).attr("height",S._height-G).attr("width",F-O),x.select("rect."+g.slideBoxClassName).attr("y",V).attr("height",G-V)}var J=.5,Z=Math.round(R(O-z))-J,Y=Math.round(R(F-z))+J;x.select("g."+g.grabberMinClassName).attr("transform",e(Z,J)),x.select("g."+g.grabberMaxClassName).attr("transform",e(Y,J))}function b(x,u,L,S){var k=T.ensureSingle(x,"rect",g.bgClassName,function(D){D.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),P=S.borderwidth%2===0?S.borderwidth:S.borderwidth-1,z=-S._offsetShift,I=a.crispRound(u,S.borderwidth);k.attr({width:S._width+P,height:S._height+P,transform:e(z,z),fill:S.bgcolor,stroke:S.bordercolor,"stroke-width":I})}function l(x,u,L,S){var k=u._fullLayout,P=T.ensureSingleById(k._topdefs,"clipPath",S._clipId,function(z){z.append("rect").attr({x:0,y:0})});P.select("rect").attr({width:S._width,height:S._height})}function _(x,u,L,S){var k=u.calcdata,P=x.selectAll("g."+g.rangePlotClassName).data(L._subplotsWith,T.identity);P.enter().append("g").attr("class",function(I){return g.rangePlotClassName+" "+I}).call(a.setClipUrl,S._clipId,u),P.order(),P.exit().remove();var z;P.each(function(I,D){var R=w.select(this),O=D===0,F=f.getFromId(u,I,"y"),V=F._name,G=S[V],J={data:[],layout:{xaxis:{type:L.type,domain:[0,1],range:S.range.slice(),calendar:L.calendar},width:S._width,height:S._height,margin:{t:0,b:0,l:0,r:0}},_context:u._context};L.rangebreaks&&(J.layout.xaxis.rangebreaks=L.rangebreaks),J.layout[V]={type:F.type,domain:[0,1],range:G.rangemode!=="match"?G.range.slice():F.range.slice(),calendar:F.calendar},F.rangebreaks&&(J.layout[V].rangebreaks=F.rangebreaks),M.supplyDefaults(J);var Z=J._fullLayout.xaxis,Y=J._fullLayout[V];Z.clearCalc(),Z.setScale(),Y.clearCalc(),Y.setScale();var j={id:I,plotgroup:R,xaxis:Z,yaxis:Y,isRangePlot:!0};O?z=j:(j.mainplot="xy",j.mainplotinfo=z),t.rangePlot(u,j,s(k,I))})}function s(x,u){for(var L=[],S=0;S<x.length;S++){var k=x[S],P=k[0].trace;P.xaxis+P.yaxis===u&&L.push(k)}return L}function A(x,u,L,S,k){var P=T.ensureSingle(x,"rect",g.maskMinClassName,function(R){R.attr({x:0,y:0,"shape-rendering":"crispEdges"})});P.attr("height",S._height).call(n.fill,g.maskColor);var z=T.ensureSingle(x,"rect",g.maskMaxClassName,function(R){R.attr({y:0,"shape-rendering":"crispEdges"})});if(z.attr("height",S._height).call(n.fill,g.maskColor),k.rangemode!=="match"){var I=T.ensureSingle(x,"rect",g.maskMinOppAxisClassName,function(R){R.attr({y:0,"shape-rendering":"crispEdges"})});I.attr("width",S._width).call(n.fill,g.maskOppAxisColor);var D=T.ensureSingle(x,"rect",g.maskMaxOppAxisClassName,function(R){R.attr({y:0,"shape-rendering":"crispEdges"})});D.attr("width",S._width).style("border-top",g.maskOppBorder).call(n.fill,g.maskOppAxisColor)}}function m(x,u,L,S){if(!u._context.staticPlot){var k=T.ensureSingle(x,"rect",g.slideBoxClassName,function(P){P.attr({y:0,cursor:g.slideBoxCursor,"shape-rendering":"crispEdges"})});k.attr({height:S._height,fill:g.slideBoxFill})}}function h(x,u,L,S){var k=T.ensureSingle(x,"g",g.grabberMinClassName),P=T.ensureSingle(x,"g",g.grabberMaxClassName),z={x:0,width:g.handleWidth,rx:g.handleRadius,fill:n.background,stroke:n.defaultLine,"stroke-width":g.handleStrokeWidth,"shape-rendering":"crispEdges"},I={y:Math.round(S._height/4),height:Math.round(S._height/2)},D=T.ensureSingle(k,"rect",g.handleMinClassName,function(G){G.attr(z)});D.attr(I);var R=T.ensureSingle(P,"rect",g.handleMaxClassName,function(G){G.attr(z)});R.attr(I);var O={width:g.grabAreaWidth,x:0,y:0,fill:g.grabAreaFill,cursor:u._context.staticPlot?void 0:g.grabAreaCursor},F=T.ensureSingle(k,"rect",g.grabAreaMinClassName,function(G){G.attr(O)});F.attr("height",S._height);var V=T.ensureSingle(P,"rect",g.grabAreaMaxClassName,function(G){G.attr(O)});V.attr("height",S._height)}},{"../../lib":503,"../../lib/setcursor":524,"../../plots/cartesian":568,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../titles":464,"./constants":440,"@plotly/d3":58}],443:[function(d,ne,ae){var w=d("../../plots/cartesian/axis_ids"),v=d("../../lib/svg_text_utils"),M=d("./constants"),T=d("../../constants/alignment").LINE_SPACING,e=M.name;function a(n){var r=n&&n[e];return r&&r.visible}ae.isVisible=a,ae.makeData=function(n){var r=w.list({_fullLayout:n},"x",!0),t=n.margin,f=[];if(!n._has("gl2d"))for(var o=0;o<r.length;o++){var i=r[o];if(a(i)){f.push(i);var g=i[e];g._id=e+i._id,g._height=(n.height-t.b-t.t)*g.thickness,g._offsetShift=Math.floor(g.borderwidth/2)}}n._rangeSliderData=f},ae.autoMarginOpts=function(n,r){var t=n._fullLayout,f=r[e],o=r._id.charAt(0),i=0,g=0;if(r.side==="bottom"&&(i=r._depth,r.title.text!==t._dfltTitle[o])){g=1.5*r.title.font.size+10+f._offsetShift;var p=(r.title.text.match(v.BR_TAG_ALL)||[]).length;g+=p*r.title.font.size*T}return{x:0,y:r._counterDomainMin,l:0,r:0,t:0,b:f._height+i+Math.max(t.margin.b,g),pad:M.extraPad+f._offsetShift*2}}},{"../../constants/alignment":471,"../../lib/svg_text_utils":529,"../../plots/cartesian/axis_ids":558,"./constants":440}],444:[function(d,ne,ae){var w=d("../../lib"),v=d("./attributes"),M=d("./oppaxis_attributes"),T=d("./helpers");ne.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:w.extendFlat({},v,{yaxis:M})}}},layoutAttributes:d("./attributes"),handleDefaults:d("./defaults"),calcAutorange:d("./calc_autorange"),draw:d("./draw"),isVisible:T.isVisible,makeData:T.makeData,autoMarginOpts:T.autoMarginOpts}},{"../../lib":503,"./attributes":438,"./calc_autorange":439,"./defaults":441,"./draw":442,"./helpers":443,"./oppaxis_attributes":445}],445:[function(d,ne,ae){ne.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],446:[function(d,ne,ae){var w=d("../annotations/attributes"),v=d("../../traces/scatter/attributes").line,M=d("../drawing/attributes").dash,T=d("../../lib/extend").extendFlat,e=d("../../plot_api/plot_template").templatedArray;d("../../constants/axis_placeable_objects"),ne.exports=e("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:T({},w.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:T({},w.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:T({},v.color,{editType:"arraydraw"}),width:T({},v.width,{editType:"calc+arraydraw"}),dash:T({},M,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":472,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../traces/scatter/attributes":927,"../annotations/attributes":349,"../drawing/attributes":387}],447:[function(d,ne,ae){var w=d("../../lib"),v=d("../../plots/cartesian/axes"),M=d("./constants"),T=d("./helpers");ne.exports=function(f){var o=f._fullLayout,i=w.filterVisible(o.shapes);if(!(!i.length||!f._fullData.length))for(var g=0;g<i.length;g++){var p=i[g];p._extremes={};var y,c,b=v.getRefType(p.xref),l=v.getRefType(p.yref);if(p.xref!=="paper"&&b!=="domain"){var _=p.xsizemode==="pixel"?p.xanchor:p.x0,s=p.xsizemode==="pixel"?p.xanchor:p.x1;y=v.getFromId(f,p.xref),c=r(y,_,s,p.path,M.paramIsX),c&&(p._extremes[y._id]=v.findExtremes(y,c,e(p)))}if(p.yref!=="paper"&&l!=="domain"){var A=p.ysizemode==="pixel"?p.yanchor:p.y0,m=p.ysizemode==="pixel"?p.yanchor:p.y1;y=v.getFromId(f,p.yref),c=r(y,A,m,p.path,M.paramIsY),c&&(p._extremes[y._id]=v.findExtremes(y,c,a(p)))}}};function e(t){return n(t.line.width,t.xsizemode,t.x0,t.x1,t.path,!1)}function a(t){return n(t.line.width,t.ysizemode,t.y0,t.y1,t.path,!0)}function n(t,f,o,i,g,p){var y=t/2,c=p;if(f==="pixel"){var b=g?T.extractPathCoords(g,p?M.paramIsY:M.paramIsX):[o,i],l=w.aggNums(Math.max,null,b),_=w.aggNums(Math.min,null,b),s=_<0?Math.abs(_)+y:y,A=l>0?l+y:y;return{ppad:y,ppadplus:c?s:A,ppadminus:c?A:s}}else return{ppad:y}}function r(t,f,o,i,g){var p=t.type==="category"||t.type==="multicategory"?t.r2c:t.d2c;if(f!==void 0)return[p(f),p(o)];if(!!i){var y=1/0,c=-1/0,b=i.match(M.segmentRE),l,_,s,A,m;for(t.type==="date"&&(p=T.decodeDate(p)),l=0;l<b.length;l++)_=b[l],s=g[_.charAt(0)].drawn,s!==void 0&&(A=b[l].substr(1).match(M.paramRE),!(!A||A.length<s)&&(m=p(A[s]),m<y&&(y=m),m>c&&(c=m)));if(c>=y)return[y,c]}}},{"../../lib":503,"../../plots/cartesian/axes":554,"./constants":448,"./helpers":457}],448:[function(d,ne,ae){ne.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],449:[function(d,ne,ae){var w=d("../../lib"),v=d("../../plots/cartesian/axes"),M=d("../../plots/array_container_defaults"),T=d("./attributes"),e=d("./helpers");ne.exports=function(r,t){M(r,t,{name:"shapes",handleItemDefaults:a})};function a(n,r,t){function f(V,G){return w.coerce(n,r,T,V,G)}var o=f("visible");if(!!o){var i=f("path"),g=i?"path":"rect",p=f("type",g);r.type!=="path"&&delete r.path,f("editable"),f("layer"),f("opacity"),f("fillcolor"),f("fillrule");var y=f("line.width");y&&(f("line.color"),f("line.dash"));for(var c=f("xsizemode"),b=f("ysizemode"),l=["x","y"],_=0;_<2;_++){var s=l[_],A=s+"anchor",m=s==="x"?c:b,h={_fullLayout:t},x,u,L,S=v.coerceRef(n,r,h,s,void 0,"paper"),k=v.getRefType(S);if(k==="range"?(x=v.getFromId(h,S),x._shapeIndices.push(r._index),L=e.rangeToShapePosition(x),u=e.shapePositionToRange(x)):u=L=w.identity,p!=="path"){var P=.25,z=.75,I=s+"0",D=s+"1",R=n[I],O=n[D];n[I]=u(n[I],!0),n[D]=u(n[D],!0),m==="pixel"?(f(I,0),f(D,10)):(v.coercePosition(r,h,f,S,I,P),v.coercePosition(r,h,f,S,D,z)),r[I]=L(r[I]),r[D]=L(r[D]),n[I]=R,n[D]=O}if(m==="pixel"){var F=n[A];n[A]=u(n[A],!0),v.coercePosition(r,h,f,S,A,.25),r[A]=L(r[A]),n[A]=F}}p==="path"?f("path"):w.noneOrAll(n,r,["x0","x1","y0","y1"])}}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":446,"./helpers":457}],450:[function(d,ne,ae){var w=d("../../registry"),v=d("../../lib"),M=d("../../plots/cartesian/axes"),T=d("./draw_newshape/helpers").readPaths,e=d("./draw_newshape/display_outlines"),a=d("../../plots/cartesian/handle_outline").clearOutlineControllers,n=d("../color"),r=d("../drawing"),t=d("../../plot_api/plot_template").arrayEditor,f=d("../dragelement"),o=d("../../lib/setcursor"),i=d("./constants"),g=d("./helpers");ne.exports={draw:p,drawOne:b,eraseActiveShape:u};function p(L){var S=L._fullLayout;S._shapeUpperLayer.selectAll("path").remove(),S._shapeLowerLayer.selectAll("path").remove();for(var k in S._plots){var P=S._plots[k].shapelayer;P&&P.selectAll("path").remove()}for(var z=0;z<S.shapes.length;z++)S.shapes[z].visible&&b(L,z)}function y(L){return!!L._fullLayout._drawing}function c(L){return!L._context.edits.shapePosition}function b(L,S){L._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+S+'"]').remove();var k=g.makeOptionsAndPlotinfo(L,S),P=k.options,z=k.plotinfo;if(!P._input||P.visible===!1)return;if(P.layer!=="below")D(L._fullLayout._shapeUpperLayer);else if(P.xref==="paper"||P.yref==="paper")D(L._fullLayout._shapeLowerLayer);else if(z._hadPlotinfo){var I=z.mainplotinfo||z;D(I.shapelayer)}else D(L._fullLayout._shapeLowerLayer);function D(R){var O=s(L,P),F={"data-index":S,"fill-rule":P.fillrule,d:O},V=P.opacity,G=P.fillcolor,J=P.line.width?P.line.color:"rgba(0,0,0,0)",Z=P.line.width,Y=P.line.dash;!Z&&P.editable===!0&&(Z=5,Y="solid");var j=O[O.length-1]!=="Z",re=c(L)&&P.editable&&L._fullLayout._activeShapeIndex===S;re&&(G=j?"rgba(0,0,0,0)":L._fullLayout.activeshape.fillcolor,V=L._fullLayout.activeshape.opacity);var se=R.append("path").attr(F).style("opacity",V).call(n.stroke,J).call(n.fill,G).call(r.dashLine,Y,Z);l(se,L,P);var oe;if((re||L._context.edits.shapePosition)&&(oe=t(L.layout,"shapes",P)),re){se.style({cursor:"move"});var N={element:se.node(),plotinfo:z,gd:L,editHelpers:oe,isActiveShape:!0},U=T(O,L);e(U,se,N)}else L._context.edits.shapePosition?_(L,se,P,S,R,oe):P.editable===!0&&se.style("pointer-events",j||n.opacity(G)*V<=.5?"stroke":"all");se.node().addEventListener("click",function(){return h(L,se)})}}function l(L,S,k){var P=(k.xref+k.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");r.setClipUrl(L,P?"clip"+S._fullLayout._uid+P:null,S)}function _(L,S,k,P,z,I){var D=10,R=10,O=k.xsizemode==="pixel",F=k.ysizemode==="pixel",V=k.type==="line",G=k.type==="path",J=I.modifyItem,Z,Y,j,re,se,oe,N,U,q,Q,W,X,ee,te,ie,le=M.getFromId(L,k.xref),ge=M.getRefType(k.xref),fe=M.getFromId(L,k.yref),pe=M.getRefType(k.yref),ye=g.getDataToPixel(L,le,!1,ge),Te=g.getDataToPixel(L,fe,!0,pe),_e=g.getPixelToData(L,le,!1,ge),De=g.getPixelToData(L,fe,!0,pe),Be=Pe(),Ue={element:Be.node(),gd:L,prepFn:Fe,doneFn:Le,clickFn:Ne},xe;f.init(Ue),Be.node().onmousemove=Qe;function Pe(){return V?Ve():S}function Ve(){var Ut=10,Ct=Math.max(k.line.width,Ut),Mt=z.append("g").attr("data-index",P);Mt.append("path").attr("d",S.attr("d")).style({cursor:"move","stroke-width":Ct,"stroke-opacity":"0"});var rt={"fill-opacity":"0"},ct=Math.max(Ct/2,Ut);return Mt.append("circle").attr({"data-line-point":"start-point",cx:O?ye(k.xanchor)+k.x0:ye(k.x0),cy:F?Te(k.yanchor)-k.y0:Te(k.y0),r:ct}).style(rt).classed("cursor-grab",!0),Mt.append("circle").attr({"data-line-point":"end-point",cx:O?ye(k.xanchor)+k.x1:ye(k.x1),cy:F?Te(k.yanchor)-k.y1:Te(k.y1),r:ct}).style(rt).classed("cursor-grab",!0),Mt}function Qe(Ut){if(y(L)){xe=null;return}if(V)Ut.target.tagName==="path"?xe="move":xe=Ut.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var Ct=Ue.element.getBoundingClientRect(),Mt=Ct.right-Ct.left,rt=Ct.bottom-Ct.top,ct=Ut.clientX-Ct.left,Ze=Ut.clientY-Ct.top,ke=!G&&Mt>D&&rt>R&&!Ut.shiftKey?f.getCursor(ct/Mt,1-Ze/rt):"move";o(S,ke),xe=ke.split("-")[0]}}function Fe(Ut){y(L)||(O&&(se=ye(k.xanchor)),F&&(oe=Te(k.yanchor)),k.type==="path"?ie=k.path:(Z=O?k.x0:ye(k.x0),Y=F?k.y0:Te(k.y0),j=O?k.x1:ye(k.x1),re=F?k.y1:Te(k.y1)),Z<j?(q=Z,ee="x0",Q=j,te="x1"):(q=j,ee="x1",Q=Z,te="x0"),!F&&Y<re||F&&Y>re?(N=Y,W="y0",U=re,X="y1"):(N=re,W="y1",U=Y,X="y0"),Qe(Ut),Xt(z,k),zt(S,k,L),Ue.moveFn=xe==="move"?dt:Dt,Ue.altKey=Ut.altKey)}function Le(){y(L)||(o(S),At(z),l(S,L,k),w.call("_guiRelayout",L,I.getUpdateObj()))}function Ne(){y(L)||At(z)}function dt(Ut,Ct){if(k.type==="path"){var Mt=function(Ze){return Ze},rt=Mt,ct=Mt;O?J("xanchor",k.xanchor=_e(se+Ut)):(rt=function(ke){return _e(ye(ke)+Ut)},le&&le.type==="date"&&(rt=g.encodeDate(rt))),F?J("yanchor",k.yanchor=De(oe+Ct)):(ct=function(ke){return De(Te(ke)+Ct)},fe&&fe.type==="date"&&(ct=g.encodeDate(ct))),J("path",k.path=m(ie,rt,ct))}else O?J("xanchor",k.xanchor=_e(se+Ut)):(J("x0",k.x0=_e(Z+Ut)),J("x1",k.x1=_e(j+Ut))),F?J("yanchor",k.yanchor=De(oe+Ct)):(J("y0",k.y0=De(Y+Ct)),J("y1",k.y1=De(re+Ct)));S.attr("d",s(L,k)),Xt(z,k)}function Dt(Ut,Ct){if(G){var Mt=function(pr){return pr},rt=Mt,ct=Mt;O?J("xanchor",k.xanchor=_e(se+Ut)):(rt=function(Xr){return _e(ye(Xr)+Ut)},le&&le.type==="date"&&(rt=g.encodeDate(rt))),F?J("yanchor",k.yanchor=De(oe+Ct)):(ct=function(Xr){return De(Te(Xr)+Ct)},fe&&fe.type==="date"&&(ct=g.encodeDate(ct))),J("path",k.path=m(ie,rt,ct))}else if(V){if(xe==="resize-over-start-point"){var Ze=Z+Ut,ke=F?Y-Ct:Y+Ct;J("x0",k.x0=O?Ze:_e(Ze)),J("y0",k.y0=F?ke:De(ke))}else if(xe==="resize-over-end-point"){var Ge=j+Ut,Je=F?re-Ct:re+Ct;J("x1",k.x1=O?Ge:_e(Ge)),J("y1",k.y1=F?Je:De(Je))}}else{var ot=function(pr){return xe.indexOf(pr)!==-1},Pt=ot("n"),_t=ot("s"),Bt=ot("w"),qt=ot("e"),Ot=Pt?N+Ct:N,$t=_t?U+Ct:U,rr=Bt?q+Ut:q,er=qt?Q+Ut:Q;F&&(Pt&&(Ot=N-Ct),_t&&($t=U-Ct)),(!F&&$t-Ot>R||F&&Ot-$t>R)&&(J(W,k[W]=F?Ot:De(Ot)),J(X,k[X]=F?$t:De($t))),er-rr>D&&(J(ee,k[ee]=O?rr:_e(rr)),J(te,k[te]=O?er:_e(er)))}S.attr("d",s(L,k)),Xt(z,k)}function Xt(Ut,Ct){(O||F)&&Mt();function Mt(){var rt=Ct.type!=="path",ct=Ut.selectAll(".visual-cue").data([0]),Ze=1;ct.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":Ze}).classed("visual-cue",!0);var ke=ye(O?Ct.xanchor:v.midRange(rt?[Ct.x0,Ct.x1]:g.extractPathCoords(Ct.path,i.paramIsX))),Ge=Te(F?Ct.yanchor:v.midRange(rt?[Ct.y0,Ct.y1]:g.extractPathCoords(Ct.path,i.paramIsY)));if(ke=g.roundPositionForSharpStrokeRendering(ke,Ze),Ge=g.roundPositionForSharpStrokeRendering(Ge,Ze),O&&F){var Je="M"+(ke-1-Ze)+","+(Ge-1-Ze)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";ct.attr("d",Je)}else if(O){var ot="M"+(ke-1-Ze)+","+(Ge-9-Ze)+"v18 h2 v-18 Z";ct.attr("d",ot)}else{var Pt="M"+(ke-9-Ze)+","+(Ge-1-Ze)+"h18 v2 h-18 Z";ct.attr("d",Pt)}}}function At(Ut){Ut.selectAll(".visual-cue").remove()}function zt(Ut,Ct,Mt){var rt=Ct.xref,ct=Ct.yref,Ze=M.getFromId(Mt,rt),ke=M.getFromId(Mt,ct),Ge="";rt!=="paper"&&!Ze.autorange&&(Ge+=rt),ct!=="paper"&&!ke.autorange&&(Ge+=ct),r.setClipUrl(Ut,Ge?"clip"+Mt._fullLayout._uid+Ge:null,Mt)}}function s(L,S){var k=S.type,P=M.getRefType(S.xref),z=M.getRefType(S.yref),I=M.getFromId(L,S.xref),D=M.getFromId(L,S.yref),R=L._fullLayout._size,O,F,V,G,J,Z,Y,j;if(I?P==="domain"?F=function(ee){return I._offset+I._length*ee}:(O=g.shapePositionToRange(I),F=function(ee){return I._offset+I.r2p(O(ee,!0))}):F=function(ee){return R.l+R.w*ee},D?z==="domain"?G=function(ee){return D._offset+D._length*(1-ee)}:(V=g.shapePositionToRange(D),G=function(ee){return D._offset+D.r2p(V(ee,!0))}):G=function(ee){return R.t+R.h*(1-ee)},k==="path")return I&&I.type==="date"&&(F=g.decodeDate(F)),D&&D.type==="date"&&(G=g.decodeDate(G)),A(S,F,G);if(S.xsizemode==="pixel"){var re=F(S.xanchor);J=re+S.x0,Z=re+S.x1}else J=F(S.x0),Z=F(S.x1);if(S.ysizemode==="pixel"){var se=G(S.yanchor);Y=se-S.y0,j=se-S.y1}else Y=G(S.y0),j=G(S.y1);if(k==="line")return"M"+J+","+Y+"L"+Z+","+j;if(k==="rect")return"M"+J+","+Y+"H"+Z+"V"+j+"H"+J+"Z";var oe=(J+Z)/2,N=(Y+j)/2,U=Math.abs(oe-J),q=Math.abs(N-Y),Q="A"+U+","+q,W=oe+U+","+N,X=oe+","+(N-q);return"M"+W+Q+" 0 1,1 "+X+Q+" 0 0,1 "+W+"Z"}function A(L,S,k){var P=L.path,z=L.xsizemode,I=L.ysizemode,D=L.xanchor,R=L.yanchor;return P.replace(i.segmentRE,function(O){var F=0,V=O.charAt(0),G=i.paramIsX[V],J=i.paramIsY[V],Z=i.numParams[V],Y=O.substr(1).replace(i.paramRE,function(j){return G[F]?z==="pixel"?j=S(D)+Number(j):j=S(j):J[F]&&(I==="pixel"?j=k(R)-Number(j):j=k(j)),F++,F>Z&&(j="X"),j});return F>Z&&(Y=Y.replace(/[\s,]*X.*/,""),v.log("Ignoring extra params in segment "+O)),V+Y})}function m(L,S,k){return L.replace(i.segmentRE,function(P){var z=0,I=P.charAt(0),D=i.paramIsX[I],R=i.paramIsY[I],O=i.numParams[I],F=P.substr(1).replace(i.paramRE,function(V){return z>=O||(D[z]?V=S(V):R[z]&&(V=k(V)),z++),V});return I+F})}function h(L,S){if(!!c(L)){var k=S.node(),P=+k.getAttribute("data-index");if(P>=0){if(P===L._fullLayout._activeShapeIndex){x(L);return}L._fullLayout._activeShapeIndex=P,L._fullLayout._deactivateShape=x,p(L)}}}function x(L){if(!!c(L)){var S=L._fullLayout._activeShapeIndex;S>=0&&(a(L),delete L._fullLayout._activeShapeIndex,p(L))}}function u(L){if(!!c(L)){a(L);var S=L._fullLayout._activeShapeIndex,k=(L.layout||{}).shapes||[];if(S<k.length){for(var P=[],z=0;z<k.length;z++)z!==S&&P.push(k[z]);delete L._fullLayout._activeShapeIndex,w.call("_guiRelayout",L,{shapes:P})}}}},{"../../lib":503,"../../lib/setcursor":524,"../../plot_api/plot_template":543,"../../plots/cartesian/axes":554,"../../plots/cartesian/handle_outline":565,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"./constants":448,"./draw_newshape/display_outlines":454,"./draw_newshape/helpers":455,"./helpers":457}],451:[function(d,ne,ae){var w=d("../../drawing/attributes").dash,v=d("../../../lib/extend").extendFlat;ne.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:v({},w,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":493,"../../drawing/attributes":387}],452:[function(d,ne,ae){var w=32;ne.exports={CIRCLE_SIDES:w,i000:0,i090:w/4,i180:w/2,i270:w/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],453:[function(d,ne,ae){var w=d("../../color");ne.exports=function(M,T,e){e("newshape.drawdirection"),e("newshape.layer"),e("newshape.fillcolor"),e("newshape.fillrule"),e("newshape.opacity");var a=e("newshape.line.width");if(a){var n=(M||{}).plot_bgcolor||"#FFF";e("newshape.line.color",w.contrast(n)),e("newshape.line.dash")}e("activeshape.fillcolor"),e("activeshape.opacity")}},{"../../color":366}],454:[function(d,ne,ae){var w=d("../../dragelement"),v=d("../../dragelement/helpers"),M=v.drawMode,T=d("../../../registry"),e=d("./constants"),a=e.i000,n=e.i090,r=e.i180,t=e.i270,f=d("../../../plots/cartesian/handle_outline"),o=f.clearOutlineControllers,i=d("./helpers"),g=i.pointsShapeRectangle,p=i.pointsShapeEllipse,y=i.writePaths,c=d("./newshapes");ne.exports=function l(_,s,A,m){m||(m=0);var h=A.gd;function x(){l(_,s,A,m++),p(_[0])&&u({redrawing:!0})}function u(Q){A.isActiveShape=!1;var W=c(s,A);Object.keys(W).length&&T.call((Q||{}).redrawing?"relayout":"_guiRelayout",h,W)}var L=A.isActiveShape,S=h._fullLayout,k=S._zoomlayer,P=A.dragmode,z=M(P);z?h._fullLayout._drawing=!0:h._fullLayout._activeShapeIndex>=0&&o(h),s.attr("d",y(_));var I,D,R,O,F;if(L&&!m){F=b([],_);var V=k.append("g").attr("class","outline-controllers");re(V),q()}function G(Q){R=+Q.srcElement.getAttribute("data-i"),O=+Q.srcElement.getAttribute("data-j"),I[R][O].moveFn=J}function J(Q,W){if(!!_.length){var X=F[R][O][1],ee=F[R][O][2],te=_[R],ie=te.length;if(g(te)){for(var le=0;le<ie;le++)if(le!==O){var ge=te[le];ge[1]===te[O][1]&&(ge[1]=X+Q),ge[2]===te[O][2]&&(ge[2]=ee+W)}if(te[O][1]=X+Q,te[O][2]=ee+W,!g(te))for(var fe=0;fe<ie;fe++)for(var pe=0;pe<te[fe].length;pe++)te[fe][pe]=F[R][fe][pe]}else te[O][1]=X+Q,te[O][2]=ee+W;x()}}function Z(){u()}function Y(){if(!!_.length&&!!_[R]&&!!_[R].length){for(var Q=[],W=0;W<_[R].length;W++)W!==O&&Q.push(_[R][W]);Q.length>1&&!(Q.length===2&&Q[1][0]==="Z")&&(O===0&&(Q[0][0]="M"),_[R]=Q,x(),u())}}function j(Q,W){if(Q===2){R=+W.srcElement.getAttribute("data-i"),O=+W.srcElement.getAttribute("data-j");var X=_[R];!g(X)&&!p(X)&&Y()}}function re(Q){I=[];for(var W=0;W<_.length;W++){var X=_[W],ee=g(X),te=!ee&&p(X);I[W]=[];for(var ie=0;ie<X.length;ie++)if(X[ie][0]!=="Z"&&!(te&&ie!==a&&ie!==n&&ie!==r&&ie!==t)){var le=X[ie][1],ge=X[ie][2],fe=Q.append("circle").classed("cursor-grab",!0).attr("data-i",W).attr("data-j",ie).attr("cx",le).attr("cy",ge).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});I[W][ie]={element:fe.node(),gd:h,prepFn:G,doneFn:Z,clickFn:j},w.init(I[W][ie])}}}function se(Q,W){if(!!_.length)for(var X=0;X<_.length;X++)for(var ee=0;ee<_[X].length;ee++)for(var te=0;te+2<_[X][ee].length;te+=2)_[X][ee][te+1]=F[X][ee][te+1]+Q,_[X][ee][te+2]=F[X][ee][te+2]+W}function oe(Q,W){se(Q,W),x()}function N(Q){R=+Q.srcElement.getAttribute("data-i"),R||(R=0),D[R].moveFn=oe}function U(){u()}function q(){if(D=[],!!_.length){var Q=0;D[Q]={element:s[0][0],gd:h,prepFn:N,doneFn:U},w.init(D[Q])}}};function b(l,_){for(var s=0;s<_.length;s++){var A=_[s];l[s]=[];for(var m=0;m<A.length;m++){l[s][m]=[];for(var h=0;h<A[m].length;h++)l[s][m][h]=A[m][h]}}return l}},{"../../../plots/cartesian/handle_outline":565,"../../../registry":638,"../../dragelement":385,"../../dragelement/helpers":384,"./constants":452,"./helpers":455,"./newshapes":456}],455:[function(d,ne,ae){var w=d("parse-svg-path"),v=d("./constants"),M=v.CIRCLE_SIDES,T=v.SQRT2,e=d("../../../plots/cartesian/helpers"),a=e.p2r,n=e.r2p,r=[0,3,4,5,6,1,2],t=[0,3,4,1,2];ae.writePaths=function(i){var g=i.length;if(!g)return"M0,0Z";for(var p="",y=0;y<g;y++)for(var c=i[y].length,b=0;b<c;b++){var l=i[y][b][0];if(l==="Z")p+="Z";else for(var _=i[y][b].length,s=0;s<_;s++){var A=s;l==="Q"||l==="S"?A=t[s]:l==="C"&&(A=r[s]),p+=i[y][b][A],s>0&&s<_-1&&(p+=",")}}return p},ae.readPaths=function(i,g,p,y){var c=w(i),b=[],l=-1,_=function(){l++,b[l]=[]},s,A=0,m=0,h,x,u=function(){h=A,x=m};u();for(var L=0;L<c.length;L++){var S=[],k,P,z,I,D=c[L][0],R=D;switch(D){case"M":_(),A=+c[L][1],m=+c[L][2],S.push([R,A,m]),u();break;case"Q":case"S":k=+c[L][1],z=+c[L][2],A=+c[L][3],m=+c[L][4],S.push([R,A,m,k,z]);break;case"C":k=+c[L][1],z=+c[L][2],P=+c[L][3],I=+c[L][4],A=+c[L][5],m=+c[L][6],S.push([R,A,m,k,z,P,I]);break;case"T":case"L":A=+c[L][1],m=+c[L][2],S.push([R,A,m]);break;case"H":R="L",A=+c[L][1],S.push([R,A,m]);break;case"V":R="L",m=+c[L][1],S.push([R,A,m]);break;case"A":R="L";var O=+c[L][1],F=+c[L][2];+c[L][4]||(O=-O,F=-F);var V=A-O,G=m;for(s=1;s<=M/2;s++){var J=2*Math.PI*s/M;S.push([R,V+O*Math.cos(J),G+F*Math.sin(J)])}break;case"Z":(A!==h||m!==x)&&(A=h,m=x,S.push([R,A,m]));break}for(var Z=(p||{}).domain,Y=g._fullLayout._size,j=p&&p.xsizemode==="pixel",re=p&&p.ysizemode==="pixel",se=y===!1,oe=0;oe<S.length;oe++){for(s=0;s+2<7;s+=2){var N=S[oe][s+1],U=S[oe][s+2];N===void 0||U===void 0||(A=N,m=U,p&&(p.xaxis&&p.xaxis.p2r?(se&&(N-=p.xaxis._offset),j?N=n(p.xaxis,p.xanchor)+N:N=a(p.xaxis,N)):(se&&(N-=Y.l),Z?N=Z.x[0]+N/Y.w:N=N/Y.w),p.yaxis&&p.yaxis.p2r?(se&&(U-=p.yaxis._offset),re?U=n(p.yaxis,p.yanchor)-U:U=a(p.yaxis,U)):(se&&(U-=Y.t),Z?U=Z.y[1]-U/Y.h:U=1-U/Y.h)),S[oe][s+1]=N,S[oe][s+2]=U)}b[l].push(S[oe].slice())}}return b};function f(i,g){return Math.abs(i-g)<=1e-6}function o(i,g){var p=g[1]-i[1],y=g[2]-i[2];return Math.sqrt(p*p+y*y)}ae.pointsShapeRectangle=function(i){var g=i.length;if(g!==5)return!1;for(var p=1;p<3;p++){var y=i[0][p]-i[1][p],c=i[3][p]-i[2][p];if(!f(y,c))return!1;var b=i[0][p]-i[3][p],l=i[1][p]-i[2][p];if(!f(b,l))return!1}return!f(i[0][1],i[1][1])&&!f(i[0][1],i[3][1])?!1:!!(o(i[0],i[1])*o(i[0],i[3]))},ae.pointsShapeEllipse=function(i){var g=i.length;if(g!==M+1)return!1;g=M;for(var p=0;p<g;p++){var y=(g*2-p)%g,c=(g/2+y)%g,b=(g/2+p)%g;if(!f(o(i[p],i[b]),o(i[y],i[c])))return!1}return!0},ae.handleEllipse=function(i,g,p){if(!i)return[g,p];var y=ae.ellipseOver({x0:g[0],y0:g[1],x1:p[0],y1:p[1]}),c=(y.x1+y.x0)/2,b=(y.y1+y.y0)/2,l=(y.x1-y.x0)/2,_=(y.y1-y.y0)/2;l||(l=_=_/T),_||(_=l=l/T);for(var s=[],A=0;A<M;A++){var m=A*2*Math.PI/M;s.push([c+l*Math.cos(m),b+_*Math.sin(m)])}return s},ae.ellipseOver=function(i){var g=i.x0,p=i.y0,y=i.x1,c=i.y1,b=y-g,l=c-p;g-=b,p-=l;var _=(g+y)/2,s=(p+c)/2,A=T;return b*=A,l*=A,{x0:_-b,y0:s-l,x1:_+b,y1:s+l}}},{"../../../plots/cartesian/helpers":566,"./constants":452,"parse-svg-path":250}],456:[function(d,ne,ae){var w=d("../../dragelement/helpers"),v=w.drawMode,M=w.openMode,T=d("./constants"),e=T.i000,a=T.i090,n=T.i180,r=T.i270,t=T.cos45,f=T.sin45,o=d("../../../plots/cartesian/helpers"),i=o.p2r,g=o.r2p,p=d("../../../plots/cartesian/handle_outline"),y=p.clearSelect,c=d("./helpers"),b=c.readPaths,l=c.writePaths,_=c.ellipseOver;ne.exports=function(m,h){if(!!m.length){var x=m[0][0];if(!!x){var u=x.getAttribute("d"),L=h.gd,S=L._fullLayout.newshape,k=h.plotinfo,P=k.xaxis,z=k.yaxis,I=!!k.domain||!k.xaxis,D=!!k.domain||!k.yaxis,R=h.isActiveShape,O=h.dragmode,F=(L.layout||{}).shapes||[];if(!v(O)&&R!==void 0){var V=L._fullLayout._activeShapeIndex;if(V<F.length)switch(L._fullLayout.shapes[V].type){case"rect":O="drawrect";break;case"circle":O="drawcircle";break;case"line":O="drawline";break;case"path":var G=F[V].path||"";G[G.length-1]==="Z"?O="drawclosedpath":O="drawopenpath";break}}var J=M(O),Z=b(u,L,k,R),Y={editable:!0,xref:I?"paper":P._id,yref:D?"paper":z._id,layer:S.layer,opacity:S.opacity,line:{color:S.line.color,width:S.line.width,dash:S.line.dash}};J||(Y.fillcolor=S.fillcolor,Y.fillrule=S.fillrule);var j;if(Z.length===1&&(j=Z[0]),j&&O==="drawrect")Y.type="rect",Y.x0=j[0][1],Y.y0=j[0][2],Y.x1=j[2][1],Y.y1=j[2][2];else if(j&&O==="drawline")Y.type="line",Y.x0=j[0][1],Y.y0=j[0][2],Y.x1=j[1][1],Y.y1=j[1][2];else if(j&&O==="drawcircle"){Y.type="circle";var re=j[e][1],se=j[a][1],oe=j[n][1],N=j[r][1],U=j[e][2],q=j[a][2],Q=j[n][2],W=j[r][2],X=k.xaxis&&(k.xaxis.type==="date"||k.xaxis.type==="log"),ee=k.yaxis&&(k.yaxis.type==="date"||k.yaxis.type==="log");X&&(re=g(k.xaxis,re),se=g(k.xaxis,se),oe=g(k.xaxis,oe),N=g(k.xaxis,N)),ee&&(U=g(k.yaxis,U),q=g(k.yaxis,q),Q=g(k.yaxis,Q),W=g(k.yaxis,W));var te=(se+N)/2,ie=(U+Q)/2,le=(N-se+oe-re)/2,ge=(W-q+Q-U)/2,fe=_({x0:te,y0:ie,x1:te+le*t,y1:ie+ge*f});X&&(fe.x0=i(k.xaxis,fe.x0),fe.x1=i(k.xaxis,fe.x1)),ee&&(fe.y0=i(k.yaxis,fe.y0),fe.y1=i(k.yaxis,fe.y1)),Y.x0=fe.x0,Y.y0=fe.y0,Y.x1=fe.x1,Y.y1=fe.y1}else Y.type="path",P&&z&&s(Z,P,z),Y.path=l(Z),j=null;y(L);for(var pe=h.editHelpers,ye=(pe||{}).modifyItem,Te=[],_e=0;_e<F.length;_e++){var De=L._fullLayout.shapes[_e];if(Te[_e]=De._input,R!==void 0&&_e===L._fullLayout._activeShapeIndex){var Be=Y;switch(De.type){case"line":case"rect":case"circle":ye("x0",Be.x0),ye("x1",Be.x1),ye("y0",Be.y0),ye("y1",Be.y1);break;case"path":ye("path",Be.path);break}}}return R===void 0?(Te.push(Y),Te):pe?pe.getUpdateObj():{}}}};function s(A,m,h){var x=m.type==="date",u=h.type==="date";if(!x&&!u)return A;for(var L=0;L<A.length;L++)for(var S=0;S<A[L].length;S++)for(var k=0;k+2<A[L][S].length;k+=2)x&&(A[L][S][k+1]=A[L][S][k+1].replace(" ","_")),u&&(A[L][S][k+2]=A[L][S][k+2].replace(" ","_"));return A}},{"../../../plots/cartesian/handle_outline":565,"../../../plots/cartesian/helpers":566,"../../dragelement/helpers":384,"./constants":452,"./helpers":455}],457:[function(d,ne,ae){var w=d("./constants"),v=d("../../lib");ae.rangeToShapePosition=function(M){return M.type==="log"?M.r2d:function(T){return T}},ae.shapePositionToRange=function(M){return M.type==="log"?M.d2r:function(T){return T}},ae.decodeDate=function(M){return function(T){return T.replace&&(T=T.replace("_"," ")),M(T)}},ae.encodeDate=function(M){return function(T){return M(T).replace(" ","_")}},ae.extractPathCoords=function(M,T){var e=[],a=M.match(w.segmentRE);return a.forEach(function(n){var r=T[n.charAt(0)].drawn;if(r!==void 0){var t=n.substr(1).match(w.paramRE);!t||t.length<r||e.push(v.cleanNumber(t[r]))}}),e},ae.getDataToPixel=function(M,T,e,a){var n=M._fullLayout._size,r;if(T)if(a==="domain")r=function(f){return T._length*(e?1-f:f)+T._offset};else{var t=ae.shapePositionToRange(T);r=function(f){return T._offset+T.r2p(t(f,!0))},T.type==="date"&&(r=ae.decodeDate(r))}else e?r=function(f){return n.t+n.h*(1-f)}:r=function(f){return n.l+n.w*f};return r},ae.getPixelToData=function(M,T,e,a){var n=M._fullLayout._size,r;if(T)if(a==="domain")r=function(f){var o=(f-T._offset)/T._length;return e?1-o:o};else{var t=ae.rangeToShapePosition(T);r=function(f){return t(T.p2r(f-T._offset))}}else e?r=function(f){return 1-(f-n.t)/n.h}:r=function(f){return(f-n.l)/n.w};return r},ae.roundPositionForSharpStrokeRendering=function(M,T){var e=Math.round(T%2)===1,a=Math.round(M);return e?a+.5:a},ae.makeOptionsAndPlotinfo=function(M,T){var e=M._fullLayout.shapes[T]||{},a=M._fullLayout._plots[e.xref+e.yref],n=!!a;return n?a._hadPlotinfo=!0:(a={},e.xref&&e.xref!=="paper"&&(a.xaxis=M._fullLayout[e.xref+"axis"]),e.yref&&e.yref!=="paper"&&(a.yaxis=M._fullLayout[e.yref+"axis"])),a.xsizemode=e.xsizemode,a.ysizemode=e.ysizemode,a.xanchor=e.xanchor,a.yanchor=e.yanchor,{options:e,plotinfo:a}}},{"../../lib":503,"./constants":448}],458:[function(d,ne,ae){var w=d("./draw");ne.exports={moduleType:"component",name:"shapes",layoutAttributes:d("./attributes"),supplyLayoutDefaults:d("./defaults"),supplyDrawNewShapeDefaults:d("./draw_newshape/defaults"),includeBasePlot:d("../../plots/cartesian/include_components")("shapes"),calcAutorange:d("./calc_autorange"),draw:w.draw,drawOne:w.drawOne}},{"../../plots/cartesian/include_components":567,"./attributes":446,"./calc_autorange":447,"./defaults":449,"./draw":450,"./draw_newshape/defaults":453}],459:[function(d,ne,ae){var w=d("../../plots/font_attributes"),v=d("../../plots/pad_attributes"),M=d("../../lib/extend").extendDeepAll,T=d("../../plot_api/edit_types").overrideAll,e=d("../../plots/animation_attributes"),a=d("../../plot_api/plot_template").templatedArray,n=d("./constants"),r=a("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});ne.exports=T(a("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:r,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:M(v({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:e.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:w({})},font:w({}),activebgcolor:{valType:"color",dflt:n.gripBgActiveColor},bgcolor:{valType:"color",dflt:n.railBgColor},bordercolor:{valType:"color",dflt:n.railBorderColor},borderwidth:{valType:"number",min:0,dflt:n.railBorderWidth},ticklen:{valType:"number",min:0,dflt:n.tickLength},tickcolor:{valType:"color",dflt:n.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:n.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/animation_attributes":548,"../../plots/font_attributes":585,"../../plots/pad_attributes":618,"./constants":460}],460:[function(d,ne,ae){ne.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],461:[function(d,ne,ae){var w=d("../../lib"),v=d("../../plots/array_container_defaults"),M=d("./attributes"),T=d("./constants"),e=T.name,a=M.steps;ne.exports=function(f,o){v(f,o,{name:e,handleItemDefaults:n})};function n(t,f,o){function i(s,A){return w.coerce(t,f,M,s,A)}for(var g=v(t,f,{name:"steps",handleItemDefaults:r}),p=0,y=0;y<g.length;y++)g[y].visible&&p++;var c;if(p<2?c=f.visible=!1:c=i("visible"),!!c){f._stepCount=p;var b=f._visibleSteps=w.filterVisible(g),l=i("active");(g[l]||{}).visible||(f.active=b[0]._index),i("x"),i("y"),w.noneOrAll(t,f,["x","y"]),i("xanchor"),i("yanchor"),i("len"),i("lenmode"),i("pad.t"),i("pad.r"),i("pad.b"),i("pad.l"),w.coerceFont(i,"font",o.font);var _=i("currentvalue.visible");_&&(i("currentvalue.xanchor"),i("currentvalue.prefix"),i("currentvalue.suffix"),i("currentvalue.offset"),w.coerceFont(i,"currentvalue.font",f.font)),i("transition.duration"),i("transition.easing"),i("bgcolor"),i("activebgcolor"),i("bordercolor"),i("borderwidth"),i("ticklen"),i("tickwidth"),i("tickcolor"),i("minorticklen")}}function r(t,f){function o(p,y){return w.coerce(t,f,a,p,y)}var i;if(t.method!=="skip"&&!Array.isArray(t.args)?i=f.visible=!1:i=o("visible"),i){o("method"),o("args");var g=o("label","step-"+f._index);o("value",g),o("execute")}}},{"../../lib":503,"../../plots/array_container_defaults":549,"./attributes":459,"./constants":460}],462:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../plots/plots"),M=d("../color"),T=d("../drawing"),e=d("../../lib"),a=e.strTranslate,n=d("../../lib/svg_text_utils"),r=d("../../plot_api/plot_template").arrayEditor,t=d("./constants"),f=d("../../constants/alignment"),o=f.LINE_SPACING,i=f.FROM_TL,g=f.FROM_BR;ne.exports=function(O){var F=O._fullLayout,V=y(F,O),G=F._infolayer.selectAll("g."+t.containerClassName).data(V.length>0?[0]:[]);G.enter().append("g").classed(t.containerClassName,!0).style("cursor","ew-resize");function J(re){re._commandObserver&&(re._commandObserver.remove(),delete re._commandObserver),v.autoMargin(O,p(re))}if(G.exit().each(function(){w.select(this).selectAll("g."+t.groupClassName).each(J)}).remove(),V.length!==0){var Z=G.selectAll("g."+t.groupClassName).data(V,c);Z.enter().append("g").classed(t.groupClassName,!0),Z.exit().each(J).remove();for(var Y=0;Y<V.length;Y++){var j=V[Y];b(O,j)}Z.each(function(re){var se=w.select(this);S(re),v.manageCommandObserver(O,re,re._visibleSteps,function(oe){var N=se.data()[0];N.active!==oe.index&&(N._dragging||x(O,se,N,oe.index,!1,!0))}),l(O,w.select(this),re)})}};function p(R){return t.autoMarginIdRoot+R._index}function y(R,O){for(var F=R[t.name],V=[],G=0;G<F.length;G++){var J=F[G];!J.visible||(J._gd=O,V.push(J))}return V}function c(R){return R._index}function b(R,O){var F=T.tester.selectAll("g."+t.labelGroupClass).data(O._visibleSteps);F.enter().append("g").classed(t.labelGroupClass,!0);var V=0,G=0;F.each(function(q){var Q=w.select(this),W=A(Q,{step:q},O),X=W.node();if(X){var ee=T.bBox(X);G=Math.max(G,ee.height),V=Math.max(V,ee.width)}}),F.remove();var J=O._dims={};J.inputAreaWidth=Math.max(t.railWidth,t.gripHeight);var Z=R._fullLayout._size;J.lx=Z.l+Z.w*O.x,J.ly=Z.t+Z.h*(1-O.y),O.lenmode==="fraction"?J.outerLength=Math.round(Z.w*O.len):J.outerLength=O.len,J.inputAreaStart=0,J.inputAreaLength=Math.round(J.outerLength-O.pad.l-O.pad.r);var Y=J.inputAreaLength-2*t.stepInset,j=Y/(O._stepCount-1),re=V+t.labelPadding;if(J.labelStride=Math.max(1,Math.ceil(re/j)),J.labelHeight=G,J.currentValueMaxWidth=0,J.currentValueHeight=0,J.currentValueTotalHeight=0,J.currentValueMaxLines=1,O.currentvalue.visible){var se=T.tester.append("g");F.each(function(q){var Q=_(se,O,q.label),W=Q.node()&&T.bBox(Q.node())||{width:0,height:0},X=n.lineCount(Q);J.currentValueMaxWidth=Math.max(J.currentValueMaxWidth,Math.ceil(W.width)),J.currentValueHeight=Math.max(J.currentValueHeight,Math.ceil(W.height)),J.currentValueMaxLines=Math.max(J.currentValueMaxLines,X)}),J.currentValueTotalHeight=J.currentValueHeight+O.currentvalue.offset,se.remove()}J.height=J.currentValueTotalHeight+t.tickOffset+O.ticklen+t.labelOffset+J.labelHeight+O.pad.t+O.pad.b;var oe="left";e.isRightAnchor(O)&&(J.lx-=J.outerLength,oe="right"),e.isCenterAnchor(O)&&(J.lx-=J.outerLength/2,oe="center");var N="top";e.isBottomAnchor(O)&&(J.ly-=J.height,N="bottom"),e.isMiddleAnchor(O)&&(J.ly-=J.height/2,N="middle"),J.outerLength=Math.ceil(J.outerLength),J.height=Math.ceil(J.height),J.lx=Math.round(J.lx),J.ly=Math.round(J.ly);var U={y:O.y,b:J.height*g[N],t:J.height*i[N]};O.lenmode==="fraction"?(U.l=0,U.xl=O.x-O.len*i[oe],U.r=0,U.xr=O.x+O.len*g[oe]):(U.x=O.x,U.l=J.outerLength*i[oe],U.r=J.outerLength*g[oe]),v.autoMargin(R,p(O),U)}function l(R,O,F){(F.steps[F.active]||{}).visible||(F.active=F._visibleSteps[0]._index),O.call(_,F).call(D,F).call(m,F).call(L,F).call(I,R,F).call(s,R,F);var V=F._dims;T.setTranslate(O,V.lx+F.pad.l,V.ly+F.pad.t),O.call(k,F,!1),O.call(_,F)}function _(R,O,F){if(!!O.currentvalue.visible){var V=O._dims,G,J;switch(O.currentvalue.xanchor){case"right":G=V.inputAreaLength-t.currentValueInset-V.currentValueMaxWidth,J="left";break;case"center":G=V.inputAreaLength*.5,J="middle";break;default:G=t.currentValueInset,J="left"}var Z=e.ensureSingle(R,"text",t.labelClass,function(N){N.attr({"text-anchor":J,"data-notex":1})}),Y=O.currentvalue.prefix?O.currentvalue.prefix:"";if(typeof F=="string")Y+=F;else{var j=O.steps[O.active].label,re=O._gd._fullLayout._meta;re&&(j=e.templateString(j,re)),Y+=j}O.currentvalue.suffix&&(Y+=O.currentvalue.suffix),Z.call(T.font,O.currentvalue.font).text(Y).call(n.convertToTspans,O._gd);var se=n.lineCount(Z),oe=(V.currentValueMaxLines+1-se)*O.currentvalue.font.size*o;return n.positionText(Z,G,oe),Z}}function s(R,O,F){var V=e.ensureSingle(R,"rect",t.gripRectClass,function(G){G.call(u,O,R,F).style("pointer-events","all")});V.attr({width:t.gripWidth,height:t.gripHeight,rx:t.gripRadius,ry:t.gripRadius}).call(M.stroke,F.bordercolor).call(M.fill,F.bgcolor).style("stroke-width",F.borderwidth+"px")}function A(R,O,F){var V=e.ensureSingle(R,"text",t.labelClass,function(Z){Z.attr({"text-anchor":"middle","data-notex":1})}),G=O.step.label,J=F._gd._fullLayout._meta;return J&&(G=e.templateString(G,J)),V.call(T.font,F.font).text(G).call(n.convertToTspans,F._gd),V}function m(R,O){var F=e.ensureSingle(R,"g",t.labelsClass),V=O._dims,G=F.selectAll("g."+t.labelGroupClass).data(V.labelSteps);G.enter().append("g").classed(t.labelGroupClass,!0),G.exit().remove(),G.each(function(J){var Z=w.select(this);Z.call(A,J,O),T.setTranslate(Z,P(O,J.fraction),t.tickOffset+O.ticklen+O.font.size*o+t.labelOffset+V.currentValueTotalHeight)})}function h(R,O,F,V,G){var J=Math.round(V*(F._stepCount-1)),Z=F._visibleSteps[J]._index;Z!==F.active&&x(R,O,F,Z,!0,G)}function x(R,O,F,V,G,J){var Z=F.active;F.active=V,r(R.layout,t.name,F).applyUpdate("active",V);var Y=F.steps[F.active];O.call(k,F,J),O.call(_,F),R.emit("plotly_sliderchange",{slider:F,step:F.steps[F.active],interaction:G,previousActive:Z}),Y&&Y.method&&G&&(O._nextMethod?(O._nextMethod.step=Y,O._nextMethod.doCallback=G,O._nextMethod.doTransition=J):(O._nextMethod={step:Y,doCallback:G,doTransition:J},O._nextMethodRaf=window.requestAnimationFrame(function(){var j=O._nextMethod.step;!j.method||(j.execute&&v.executeAPICommand(R,j.method,j.args),O._nextMethod=null,O._nextMethodRaf=null)})))}function u(R,O,F){var V=F.node(),G=w.select(O);function J(){return F.data()[0]}function Z(){var Y=J();O.emit("plotly_sliderstart",{slider:Y});var j=F.select("."+t.gripRectClass);w.event.stopPropagation(),w.event.preventDefault(),j.call(M.fill,Y.activebgcolor);var re=z(Y,w.mouse(V)[0]);h(O,F,Y,re,!0),Y._dragging=!0;function se(){var N=J(),U=z(N,w.mouse(V)[0]);h(O,F,N,U,!1)}G.on("mousemove",se),G.on("touchmove",se);function oe(){var N=J();N._dragging=!1,j.call(M.fill,N.bgcolor),G.on("mouseup",null),G.on("mousemove",null),G.on("touchend",null),G.on("touchmove",null),O.emit("plotly_sliderend",{slider:N,step:N.steps[N.active]})}G.on("mouseup",oe),G.on("touchend",oe)}R.on("mousedown",Z),R.on("touchstart",Z)}function L(R,O){var F=R.selectAll("rect."+t.tickRectClass).data(O._visibleSteps),V=O._dims;F.enter().append("rect").classed(t.tickRectClass,!0),F.exit().remove(),F.attr({width:O.tickwidth+"px","shape-rendering":"crispEdges"}),F.each(function(G,J){var Z=J%V.labelStride===0,Y=w.select(this);Y.attr({height:Z?O.ticklen:O.minorticklen}).call(M.fill,O.tickcolor),T.setTranslate(Y,P(O,J/(O._stepCount-1))-.5*O.tickwidth,(Z?t.tickOffset:t.minorTickOffset)+V.currentValueTotalHeight)})}function S(R){var O=R._dims;O.labelSteps=[];for(var F=R._stepCount,V=0;V<F;V+=O.labelStride)O.labelSteps.push({fraction:V/(F-1),step:R._visibleSteps[V]})}function k(R,O,F){for(var V=R.select("rect."+t.gripRectClass),G=0,J=0;J<O._stepCount;J++)if(O._visibleSteps[J]._index===O.active){G=J;break}var Z=P(O,G/(O._stepCount-1));if(!O._invokingCommand){var Y=V;F&&O.transition.duration>0&&(Y=Y.transition().duration(O.transition.duration).ease(O.transition.easing)),Y.attr("transform",a(Z-t.gripWidth*.5,O._dims.currentValueTotalHeight))}}function P(R,O){var F=R._dims;return F.inputAreaStart+t.stepInset+(F.inputAreaLength-2*t.stepInset)*Math.min(1,Math.max(0,O))}function z(R,O){var F=R._dims;return Math.min(1,Math.max(0,(O-t.stepInset-F.inputAreaStart)/(F.inputAreaLength-2*t.stepInset-2*F.inputAreaStart)))}function I(R,O,F){var V=F._dims,G=e.ensureSingle(R,"rect",t.railTouchRectClass,function(J){J.call(u,O,R,F).style("pointer-events","all")});G.attr({width:V.inputAreaLength,height:Math.max(V.inputAreaWidth,t.tickOffset+F.ticklen+V.labelHeight)}).call(M.fill,F.bgcolor).attr("opacity",0),T.setTranslate(G,0,V.currentValueTotalHeight)}function D(R,O){var F=O._dims,V=F.inputAreaLength-t.railInset*2,G=e.ensureSingle(R,"rect",t.railRectClass);G.attr({width:V,height:t.railWidth,rx:t.railRadius,ry:t.railRadius,"shape-rendering":"crispEdges"}).call(M.stroke,O.bordercolor).call(M.fill,O.bgcolor).style("stroke-width",O.borderwidth+"px"),T.setTranslate(G,t.railInset,(F.inputAreaWidth-t.railWidth)*.5+F.currentValueTotalHeight)}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/plots":619,"../color":366,"../drawing":388,"./constants":460,"@plotly/d3":58}],463:[function(d,ne,ae){var w=d("./constants");ne.exports={moduleType:"component",name:w.name,layoutAttributes:d("./attributes"),supplyLayoutDefaults:d("./defaults"),draw:d("./draw")}},{"./attributes":459,"./constants":460,"./defaults":461,"./draw":462}],464:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("fast-isnumeric"),M=d("../../plots/plots"),T=d("../../registry"),e=d("../../lib"),a=e.strTranslate,n=d("../drawing"),r=d("../color"),t=d("../../lib/svg_text_utils"),f=d("../../constants/interactions"),o=d("../../constants/alignment").OPPOSITE_SIDE,i=/ [XY][0-9]* /;function g(p,y,c){var b=c.propContainer,l=c.propName,_=c.placeholder,s=c.traceIndex,A=c.avoid||{},m=c.attributes,h=c.transform,x=c.containerGroup,u=p._fullLayout,L=1,S=!1,k=b.title,P=(k&&k.text?k.text:"").trim(),z=k&&k.font?k.font:{},I=z.family,D=z.size,R=z.color,O;l==="title.text"?O="titleText":l.indexOf("axis")!==-1?O="axisTitleText":l.indexOf("colorbar"!==-1)&&(O="colorbarTitleText");var F=p._context.edits[O];P===""?L=0:P.replace(i," % ")===_.replace(i," % ")&&(L=.2,S=!0,F||(P="")),c._meta?P=e.templateString(P,c._meta):u._meta&&(P=e.templateString(P,u._meta));var V=P||F,G;x||(x=e.ensureSingle(u._infolayer,"g","g-"+y),G=u._hColorbarMoveTitle);var J=x.selectAll("text").data(V?[0]:[]);if(J.enter().append("text"),J.text(P).attr("class",y),J.exit().remove(),!V)return x;function Z(se){e.syncOrAsync([Y,j],se)}function Y(se){var oe;return!h&&G&&(h={}),h?(oe="",h.rotate&&(oe+="rotate("+[h.rotate,m.x,m.y]+")"),(h.offset||G)&&(oe+=a(0,(h.offset||0)-(G||0)))):oe=null,se.attr("transform",oe),se.style({"font-family":I,"font-size":w.round(D,2)+"px",fill:r.rgb(R),opacity:L*r.opacity(R),"font-weight":M.fontWeight}).attr(m).call(t.convertToTspans,p),M.previousPromises(p)}function j(se){var oe=w.select(se.node().parentNode);if(A&&A.selection&&A.side&&P){oe.attr("transform",null);var N=o[A.side],U=A.side==="left"||A.side==="top"?-1:1,q=v(A.pad)?A.pad:2,Q=n.bBox(oe.node()),W={left:0,top:0,right:u.width,bottom:u.height},X=A.maxShift||U*(W[A.side]-Q[A.side]),ee=0;if(X<0)ee=X;else{var te=A.offsetLeft||0,ie=A.offsetTop||0;Q.left-=te,Q.right-=te,Q.top-=ie,Q.bottom-=ie,A.selection.each(function(){var ge=n.bBox(this);e.bBoxIntersect(Q,ge,q)&&(ee=Math.max(ee,U*(ge[A.side]-Q[N])+q))}),ee=Math.min(X,ee)}if(ee>0||X<0){var le={left:[-ee,0],right:[ee,0],top:[0,-ee],bottom:[0,ee]}[A.side];oe.attr("transform",a(le[0],le[1]))}}}J.call(Z);function re(){L=0,S=!0,J.text(_).on("mouseover.opacity",function(){w.select(this).transition().duration(f.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){w.select(this).transition().duration(f.HIDE_PLACEHOLDER).style("opacity",0)})}return F&&(P?J.on(".opacity",null):re(),J.call(t.makeEditable,{gd:p}).on("edit",function(se){s!==void 0?T.call("_guiRestyle",p,l,se,s):T.call("_guiRelayout",p,l,se)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(Z)}).on("input",function(se){this.text(se||" ").call(t.positionText,m.x,m.y)})),J.classed("js-placeholder",S),x}ne.exports={draw:g}},{"../../constants/alignment":471,"../../constants/interactions":478,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"../color":366,"../drawing":388,"@plotly/d3":58,"fast-isnumeric":190}],465:[function(d,ne,ae){var w=d("../../plots/font_attributes"),v=d("../color/attributes"),M=d("../../lib/extend").extendFlat,T=d("../../plot_api/edit_types").overrideAll,e=d("../../plots/pad_attributes"),a=d("../../plot_api/plot_template").templatedArray,n=a("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});ne.exports=T(a("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:n,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:M(e({editType:"arraydraw"}),{}),font:w({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:v.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/font_attributes":585,"../../plots/pad_attributes":618,"../color/attributes":365}],466:[function(d,ne,ae){ne.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25C4",right:"\u25BA",up:"\u25B2",down:"\u25BC"}}},{}],467:[function(d,ne,ae){var w=d("../../lib"),v=d("../../plots/array_container_defaults"),M=d("./attributes"),T=d("./constants"),e=T.name,a=M.buttons;ne.exports=function(f,o){var i={name:e,handleItemDefaults:n};v(f,o,i)};function n(t,f,o){function i(y,c){return w.coerce(t,f,M,y,c)}var g=v(t,f,{name:"buttons",handleItemDefaults:r}),p=i("visible",g.length>0);!p||(i("active"),i("direction"),i("type"),i("showactive"),i("x"),i("y"),w.noneOrAll(t,f,["x","y"]),i("xanchor"),i("yanchor"),i("pad.t"),i("pad.r"),i("pad.b"),i("pad.l"),w.coerceFont(i,"font",o.font),i("bgcolor",o.paper_bgcolor),i("bordercolor"),i("borderwidth"))}function r(t,f){function o(g,p){return w.coerce(t,f,a,g,p)}var i=o("visible",t.method==="skip"||Array.isArray(t.args));i&&(o("method"),o("args"),o("args2"),o("label"),o("execute"))}},{"../../lib":503,"../../plots/array_container_defaults":549,"./attributes":465,"./constants":466}],468:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../plots/plots"),M=d("../color"),T=d("../drawing"),e=d("../../lib"),a=d("../../lib/svg_text_utils"),n=d("../../plot_api/plot_template").arrayEditor,r=d("../../constants/alignment").LINE_SPACING,t=d("./constants"),f=d("./scrollbox");ne.exports=function(z){var I=z._fullLayout,D=e.filterVisible(I[t.name]);function R(j){v.autoMargin(z,L(j))}var O=I._menulayer.selectAll("g."+t.containerClassName).data(D.length>0?[0]:[]);if(O.enter().append("g").classed(t.containerClassName,!0).style("cursor","pointer"),O.exit().each(function(){w.select(this).selectAll("g."+t.headerGroupClassName).each(R)}).remove(),D.length!==0){var F=O.selectAll("g."+t.headerGroupClassName).data(D,o);F.enter().append("g").classed(t.headerGroupClassName,!0);for(var V=e.ensureSingle(O,"g",t.dropdownButtonGroupClassName,function(j){j.style("pointer-events","all")}),G=0;G<D.length;G++){var J=D[G];u(z,J)}var Z="updatemenus"+I._uid,Y=new f(z,V,Z);F.enter().size()&&(V.node().parentNode.appendChild(V.node()),V.call(k)),F.exit().each(function(j){V.call(k),R(j)}).remove(),F.each(function(j){var re=w.select(this),se=j.type==="dropdown"?V:null;v.manageCommandObserver(z,j,j.buttons,function(oe){p(z,j,j.buttons[oe.index],re,se,Y,oe.index,!0)}),j.type==="dropdown"?(y(z,re,V,Y,j),g(V,j)&&c(z,re,V,Y,j)):c(z,re,null,null,j)})}};function o(P){return P._index}function i(P){return+P.attr(t.menuIndexAttrName)==-1}function g(P,z){return+P.attr(t.menuIndexAttrName)===z._index}function p(P,z,I,D,R,O,F,V){z.active=F,n(P.layout,t.name,z).applyUpdate("active",F),z.type==="buttons"?c(P,D,null,null,z):z.type==="dropdown"&&(R.attr(t.menuIndexAttrName,"-1"),y(P,D,R,O,z),V||c(P,D,R,O,z))}function y(P,z,I,D,R){var O=e.ensureSingle(z,"g",t.headerClassName,function(j){j.style("pointer-events","all")}),F=R._dims,V=R.active,G=R.buttons[V]||t.blankHeaderOpts,J={y:R.pad.t,yPad:0,x:R.pad.l,xPad:0,index:0},Z={width:F.headerWidth,height:F.headerHeight};O.call(_,R,G,P).call(S,R,J,Z);var Y=e.ensureSingle(z,"text",t.headerArrowClassName,function(j){j.attr("text-anchor","end").call(T.font,R.font).text(t.arrowSymbol[R.direction])});Y.attr({x:F.headerWidth-t.arrowOffsetX+R.pad.l,y:F.headerHeight/2+t.textOffsetY+R.pad.t}),O.on("click",function(){I.call(k,String(g(I,R)?-1:R._index)),c(P,z,I,D,R)}),O.on("mouseover",function(){O.call(h)}),O.on("mouseout",function(){O.call(x,R)}),T.setTranslate(z,F.lx,F.ly)}function c(P,z,I,D,R){I||(I=z,I.attr("pointer-events","all"));var O=!i(I)||R.type==="buttons"?R.buttons:[],F=R.type==="dropdown"?t.dropdownButtonClassName:t.buttonClassName,V=I.selectAll("g."+F).data(e.filterVisible(O)),G=V.enter().append("g").classed(F,!0),J=V.exit();R.type==="dropdown"?(G.attr("opacity","0").transition().attr("opacity","1"),J.transition().attr("opacity","0").remove()):J.remove();var Z=0,Y=0,j=R._dims,re=["up","down"].indexOf(R.direction)!==-1;R.type==="dropdown"&&(re?Y=j.headerHeight+t.gapButtonHeader:Z=j.headerWidth+t.gapButtonHeader),R.type==="dropdown"&&R.direction==="up"&&(Y=-t.gapButtonHeader+t.gapButton-j.openHeight),R.type==="dropdown"&&R.direction==="left"&&(Z=-t.gapButtonHeader+t.gapButton-j.openWidth);var se={x:j.lx+Z+R.pad.l,y:j.ly+Y+R.pad.t,yPad:t.gapButton,xPad:t.gapButton,index:0},oe={l:se.x+R.borderwidth,t:se.y+R.borderwidth};V.each(function(N,U){var q=w.select(this);q.call(_,R,N,P).call(S,R,se),q.on("click",function(){w.event.defaultPrevented||(N.execute&&(N.args2&&R.active===U?(p(P,R,N,z,I,D,-1),v.executeAPICommand(P,N.method,N.args2)):(p(P,R,N,z,I,D,U),v.executeAPICommand(P,N.method,N.args))),P.emit("plotly_buttonclicked",{menu:R,button:N,active:R.active}))}),q.on("mouseover",function(){q.call(h)}),q.on("mouseout",function(){q.call(x,R),V.call(m,R)})}),V.call(m,R),re?(oe.w=Math.max(j.openWidth,j.headerWidth),oe.h=se.y-oe.t):(oe.w=se.x-oe.l,oe.h=Math.max(j.openHeight,j.headerHeight)),oe.direction=R.direction,D&&(V.size()?b(P,z,I,D,R,oe):l(D))}function b(P,z,I,D,R,O){var F=R.direction,V=F==="up"||F==="down",G=R._dims,J=R.active,Z,Y,j;if(V)for(Y=0,j=0;j<J;j++)Y+=G.heights[j]+t.gapButton;else for(Z=0,j=0;j<J;j++)Z+=G.widths[j]+t.gapButton;D.enable(O,Z,Y),D.hbar&&D.hbar.attr("opacity","0").transition().attr("opacity","1"),D.vbar&&D.vbar.attr("opacity","0").transition().attr("opacity","1")}function l(P){var z=!!P.hbar,I=!!P.vbar;z&&P.hbar.transition().attr("opacity","0").each("end",function(){z=!1,I||P.disable()}),I&&P.vbar.transition().attr("opacity","0").each("end",function(){I=!1,z||P.disable()})}function _(P,z,I,D){P.call(s,z).call(A,z,I,D)}function s(P,z){var I=e.ensureSingle(P,"rect",t.itemRectClassName,function(D){D.attr({rx:t.rx,ry:t.ry,"shape-rendering":"crispEdges"})});I.call(M.stroke,z.bordercolor).call(M.fill,z.bgcolor).style("stroke-width",z.borderwidth+"px")}function A(P,z,I,D){var R=e.ensureSingle(P,"text",t.itemTextClassName,function(V){V.attr({"text-anchor":"start","data-notex":1})}),O=I.label,F=D._fullLayout._meta;F&&(O=e.templateString(O,F)),R.call(T.font,z.font).text(O).call(a.convertToTspans,D)}function m(P,z){var I=z.active;P.each(function(D,R){var O=w.select(this);R===I&&z.showactive&&O.select("rect."+t.itemRectClassName).call(M.fill,t.activeColor)})}function h(P){P.select("rect."+t.itemRectClassName).call(M.fill,t.hoverColor)}function x(P,z){P.select("rect."+t.itemRectClassName).call(M.fill,z.bgcolor)}function u(P,z){var I=z._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},D=T.tester.selectAll("g."+t.dropdownButtonClassName).data(e.filterVisible(z.buttons));D.enter().append("g").classed(t.dropdownButtonClassName,!0);var R=["up","down"].indexOf(z.direction)!==-1;D.each(function(Z,Y){var j=w.select(this);j.call(_,z,Z,P);var re=j.select("."+t.itemTextClassName),se=re.node()&&T.bBox(re.node()).width,oe=Math.max(se+t.textPadX,t.minWidth),N=z.font.size*r,U=a.lineCount(re),q=Math.max(N*U,t.minHeight)+t.textOffsetY;q=Math.ceil(q),oe=Math.ceil(oe),I.widths[Y]=oe,I.heights[Y]=q,I.height1=Math.max(I.height1,q),I.width1=Math.max(I.width1,oe),R?(I.totalWidth=Math.max(I.totalWidth,oe),I.openWidth=I.totalWidth,I.totalHeight+=q+t.gapButton,I.openHeight+=q+t.gapButton):(I.totalWidth+=oe+t.gapButton,I.openWidth+=oe+t.gapButton,I.totalHeight=Math.max(I.totalHeight,q),I.openHeight=I.totalHeight)}),R?I.totalHeight-=t.gapButton:I.totalWidth-=t.gapButton,I.headerWidth=I.width1+t.arrowPadX,I.headerHeight=I.height1,z.type==="dropdown"&&(R?(I.width1+=t.arrowPadX,I.totalHeight=I.height1):I.totalWidth=I.width1,I.totalWidth+=t.arrowPadX),D.remove();var O=I.totalWidth+z.pad.l+z.pad.r,F=I.totalHeight+z.pad.t+z.pad.b,V=P._fullLayout._size;I.lx=V.l+V.w*z.x,I.ly=V.t+V.h*(1-z.y);var G="left";e.isRightAnchor(z)&&(I.lx-=O,G="right"),e.isCenterAnchor(z)&&(I.lx-=O/2,G="center");var J="top";e.isBottomAnchor(z)&&(I.ly-=F,J="bottom"),e.isMiddleAnchor(z)&&(I.ly-=F/2,J="middle"),I.totalWidth=Math.ceil(I.totalWidth),I.totalHeight=Math.ceil(I.totalHeight),I.lx=Math.round(I.lx),I.ly=Math.round(I.ly),v.autoMargin(P,L(z),{x:z.x,y:z.y,l:O*({right:1,center:.5}[G]||0),r:O*({left:1,center:.5}[G]||0),b:F*({top:1,middle:.5}[J]||0),t:F*({bottom:1,middle:.5}[J]||0)})}function L(P){return t.autoMarginIdRoot+P._index}function S(P,z,I,D){D=D||{};var R=P.select("."+t.itemRectClassName),O=P.select("."+t.itemTextClassName),F=z.borderwidth,V=I.index,G=z._dims;T.setTranslate(P,F+I.x,F+I.y);var J=["up","down"].indexOf(z.direction)!==-1,Z=D.height||(J?G.heights[V]:G.height1);R.attr({x:0,y:0,width:D.width||(J?G.width1:G.widths[V]),height:Z});var Y=z.font.size*r,j=a.lineCount(O),re=(j-1)*Y/2;a.positionText(O,t.textOffsetX,Z/2-re+t.textOffsetY),J?I.y+=G.heights[V]+I.yPad:I.x+=G.widths[V]+I.xPad,I.index++}function k(P,z){P.attr(t.menuIndexAttrName,z||"-1").selectAll("g."+t.dropdownButtonClassName).remove()}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/plots":619,"../color":366,"../drawing":388,"./constants":466,"./scrollbox":470,"@plotly/d3":58}],469:[function(d,ne,ae){arguments[4][463][0].apply(ae,arguments)},{"./attributes":465,"./constants":466,"./defaults":467,"./draw":468,dup:463}],470:[function(d,ne,ae){ne.exports=e;var w=d("@plotly/d3"),v=d("../color"),M=d("../drawing"),T=d("../../lib");function e(a,n,r){this.gd=a,this.container=n,this.id=r,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}e.barWidth=2,e.barLength=20,e.barRadius=2,e.barPad=1,e.barColor="#808BA4",e.prototype.enable=function(n,r,t){var f=this.gd._fullLayout,o=f.width,i=f.height;this.position=n;var g=this.position.l,p=this.position.w,y=this.position.t,c=this.position.h,b=this.position.direction,l=b==="down",_=b==="left",s=b==="right",A=b==="up",m=p,h=c,x,u,L,S;!l&&!_&&!s&&!A&&(this.position.direction="down",l=!0);var k=l||A;k?(x=g,u=x+m,l?(L=y,S=Math.min(L+h,i),h=S-L):(S=y+h,L=Math.max(S-h,0),h=S-L)):(L=y,S=L+h,_?(u=g+m,x=Math.max(u-m,0),m=u-x):(x=g,u=Math.min(x+m,o),m=u-x)),this._box={l:x,t:L,w:m,h};var P=p>m,z=e.barLength+2*e.barPad,I=e.barWidth+2*e.barPad,D=g,R=y+c;R+I>i&&(R=i-I);var O=this.container.selectAll("rect.scrollbar-horizontal").data(P?[0]:[]);O.exit().on(".drag",null).remove(),O.enter().append("rect").classed("scrollbar-horizontal",!0).call(v.fill,e.barColor),P?(this.hbar=O.attr({rx:e.barRadius,ry:e.barRadius,x:D,y:R,width:z,height:I}),this._hbarXMin=D+z/2,this._hbarTranslateMax=m-z):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var F=c>h,V=e.barWidth+2*e.barPad,G=e.barLength+2*e.barPad,J=g+p,Z=y;J+V>o&&(J=o-V);var Y=this.container.selectAll("rect.scrollbar-vertical").data(F?[0]:[]);Y.exit().on(".drag",null).remove(),Y.enter().append("rect").classed("scrollbar-vertical",!0).call(v.fill,e.barColor),F?(this.vbar=Y.attr({rx:e.barRadius,ry:e.barRadius,x:J,y:Z,width:V,height:G}),this._vbarYMin=Z+G/2,this._vbarTranslateMax=h-G):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var j=this.id,re=x-.5,se=F?u+V+.5:u+.5,oe=L-.5,N=P?S+I+.5:S+.5,U=f._topdefs.selectAll("#"+j).data(P||F?[0]:[]);if(U.exit().remove(),U.enter().append("clipPath").attr("id",j).append("rect"),P||F?(this._clipRect=U.select("rect").attr({x:Math.floor(re),y:Math.floor(oe),width:Math.ceil(se)-Math.floor(re),height:Math.ceil(N)-Math.floor(oe)}),this.container.call(M.setClipUrl,j,this.gd),this.bg.attr({x:g,y,width:p,height:c})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(M.setClipUrl,null),delete this._clipRect),P||F){var q=w.behavior.drag().on("dragstart",function(){w.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(q);var Q=w.behavior.drag().on("dragstart",function(){w.event.sourceEvent.preventDefault(),w.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));P&&this.hbar.on(".drag",null).call(Q),F&&this.vbar.on(".drag",null).call(Q)}this.setTranslate(r,t)},e.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(M.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},e.prototype._onBoxDrag=function(){var n=this.translateX,r=this.translateY;this.hbar&&(n-=w.event.dx),this.vbar&&(r-=w.event.dy),this.setTranslate(n,r)},e.prototype._onBoxWheel=function(){var n=this.translateX,r=this.translateY;this.hbar&&(n+=w.event.deltaY),this.vbar&&(r+=w.event.deltaY),this.setTranslate(n,r)},e.prototype._onBarDrag=function(){var n=this.translateX,r=this.translateY;if(this.hbar){var t=n+this._hbarXMin,f=t+this._hbarTranslateMax,o=T.constrain(w.event.x,t,f),i=(o-t)/(f-t),g=this.position.w-this._box.w;n=i*g}if(this.vbar){var p=r+this._vbarYMin,y=p+this._vbarTranslateMax,c=T.constrain(w.event.y,p,y),b=(c-p)/(y-p),l=this.position.h-this._box.h;r=b*l}this.setTranslate(n,r)},e.prototype.setTranslate=function(n,r){var t=this.position.w-this._box.w,f=this.position.h-this._box.h;if(n=T.constrain(n||0,0,t),r=T.constrain(r||0,0,f),this.translateX=n,this.translateY=r,this.container.call(M.setTranslate,this._box.l-this.position.l-n,this._box.t-this.position.t-r),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+n-.5),y:Math.floor(this.position.t+r-.5)}),this.hbar){var o=n/t;this.hbar.call(M.setTranslate,n+o*this._hbarTranslateMax,r)}if(this.vbar){var i=r/f;this.vbar.call(M.setTranslate,n,r+i*this._vbarTranslateMax)}}},{"../../lib":503,"../color":366,"../drawing":388,"@plotly/d3":58}],471:[function(d,ne,ae){ne.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],472:[function(d,ne,ae){ne.exports={axisRefDescription:function(w,v,M){return["If set to a",w,"axis id (e.g. *"+w+"* or","*"+w+"2*), the `"+w+"` position refers to a",w,"coordinate. If set to *paper*, the `"+w+"`","position refers to the distance from the",v,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",v,"("+M+"). If set to a",w,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",v,"of the domain of that axis: e.g.,","*"+w+"2 domain* refers to the domain of the second",w," axis and a",w,"position of 0.5 refers to the","point between the",v,"and the",M,"of the domain of the","second",w,"axis."].join(" ")}}},{}],473:[function(d,ne,ae){ne.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25B2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25BC"}}},{}],474:[function(d,ne,ae){ne.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},{}],475:[function(d,ne,ae){ne.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],476:[function(d,ne,ae){ne.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],477:[function(d,ne,ae){ne.exports={circle:"\u25CF","circle-open":"\u25CB",square:"\u25A0","square-open":"\u25A1",diamond:"\u25C6","diamond-open":"\u25C7",cross:"+",x:"\u274C"}},{}],478:[function(d,ne,ae){ne.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],479:[function(d,ne,ae){ne.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],480:[function(d,ne,ae){ae.xmlns="http://www.w3.org/2000/xmlns/",ae.svg="http://www.w3.org/2000/svg",ae.xlink="http://www.w3.org/1999/xlink",ae.svgAttrs={xmlns:ae.svg,"xmlns:xlink":ae.xlink}},{}],481:[function(d,ne,ae){ae.version=d("./version").version,d("native-promise-only"),d("../build/plotcss");for(var w=d("./registry"),v=ae.register=w.register,M=d("./plot_api"),T=Object.keys(M),e=0;e<T.length;e++){var a=T[e];a.charAt(0)!=="_"&&(ae[a]=M[a]),v({moduleType:"apiMethod",name:a,fn:M[a]})}v(d("./traces/scatter")),v([d("./components/legend"),d("./components/fx"),d("./components/annotations"),d("./components/annotations3d"),d("./components/shapes"),d("./components/images"),d("./components/updatemenus"),d("./components/sliders"),d("./components/rangeslider"),d("./components/rangeselector"),d("./components/grid"),d("./components/errorbars"),d("./components/colorscale"),d("./components/colorbar"),d("./components/modebar")]),v([d("./locale-en"),d("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(v(window.PlotlyLocales),delete window.PlotlyLocales),ae.Icons=d("./fonts/ploticon");var n=d("./components/fx"),r=d("./plots/plots");ae.Plots={resize:r.resize,graphJson:r.graphJson,sendDataToCloud:r.sendDataToCloud},ae.Fx={hover:n.hover,unhover:n.unhover,loneHover:n.loneHover,loneUnhover:n.loneUnhover},ae.Snapshot=d("./snapshot"),ae.PlotSchema=d("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":357,"./components/annotations3d":362,"./components/colorbar":372,"./components/colorscale":378,"./components/errorbars":394,"./components/fx":406,"./components/grid":410,"./components/images":415,"./components/legend":423,"./components/modebar":429,"./components/rangeselector":437,"./components/rangeslider":444,"./components/shapes":458,"./components/sliders":463,"./components/updatemenus":469,"./fonts/ploticon":482,"./locale-en":534,"./locale-en-us":533,"./plot_api":538,"./plot_api/plot_schema":542,"./plots/plots":619,"./registry":638,"./snapshot":643,"./traces/scatter":939,"./version":1123,"native-promise-only":245}],482:[function(d,ne,ae){ne.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],483:[function(d,ne,ae){ae.isLeftAnchor=function(v){return v.xanchor==="left"||v.xanchor==="auto"&&v.x<=1/3},ae.isCenterAnchor=function(v){return v.xanchor==="center"||v.xanchor==="auto"&&v.x>1/3&&v.x<2/3},ae.isRightAnchor=function(v){return v.xanchor==="right"||v.xanchor==="auto"&&v.x>=2/3},ae.isTopAnchor=function(v){return v.yanchor==="top"||v.yanchor==="auto"&&v.y>=2/3},ae.isMiddleAnchor=function(v){return v.yanchor==="middle"||v.yanchor==="auto"&&v.y>1/3&&v.y<2/3},ae.isBottomAnchor=function(v){return v.yanchor==="bottom"||v.yanchor==="auto"&&v.y<=1/3}},{}],484:[function(d,ne,ae){var w=d("./mod"),v=w.mod,M=w.modHalf,T=Math.PI,e=2*T;function a(b){return b/180*T}function n(b){return b/T*180}function r(b){return Math.abs(b[1]-b[0])>e-1e-14}function t(b,l){return M(l-b,e)}function f(b,l){return Math.abs(t(b,l))}function o(b,l){if(r(l))return!0;var _,s;l[0]<l[1]?(_=l[0],s=l[1]):(_=l[1],s=l[0]),_=v(_,e),s=v(s,e),_>s&&(s+=e);var A=v(b,e),m=A+e;return A>=_&&A<=s||m>=_&&m<=s}function i(b,l,_,s){if(!o(l,s))return!1;var A,m;return _[0]<_[1]?(A=_[0],m=_[1]):(A=_[1],m=_[0]),b>=A&&b<=m}function g(b,l,_,s,A,m,h){A=A||0,m=m||0;var x=r([_,s]),u,L,S,k,P;x?(u=0,L=T,S=e):_<s?(u=_,S=s):(u=s,S=_),b<l?(k=b,P=l):(k=l,P=b);function z(O,F){return[O*Math.cos(F)+A,m-O*Math.sin(F)]}var I=Math.abs(S-u)<=T?0:1;function D(O,F,V){return"A"+[O,O]+" "+[0,I,V]+" "+z(O,F)}var R;return x?k===null?R="M"+z(P,u)+D(P,L,0)+D(P,S,0)+"Z":R="M"+z(k,u)+D(k,L,0)+D(k,S,0)+"ZM"+z(P,u)+D(P,L,1)+D(P,S,1)+"Z":k===null?(R="M"+z(P,u)+D(P,S,0),h&&(R+="L0,0Z")):R="M"+z(k,u)+"L"+z(P,u)+D(P,S,0)+"L"+z(k,S)+D(k,u,1)+"Z",R}function p(b,l,_,s,A){return g(null,b,l,_,s,A,0)}function y(b,l,_,s,A){return g(null,b,l,_,s,A,1)}function c(b,l,_,s,A,m){return g(b,l,_,s,A,m,1)}ne.exports={deg2rad:a,rad2deg:n,angleDelta:t,angleDist:f,isFullCircle:r,isAngleInsideSector:o,isPtInsideSector:i,pathArc:p,pathSector:y,pathAnnulus:c}},{"./mod":510}],485:[function(d,ne,ae){var w=Array.isArray,v=ArrayBuffer,M=DataView;function T(r){return v.isView(r)&&!(r instanceof M)}ae.isTypedArray=T;function e(r){return w(r)||T(r)}ae.isArrayOrTypedArray=e;function a(r){return!e(r[0])}ae.isArray1D=a,ae.ensureArray=function(r,t){return w(r)||(r=[]),r.length=t,r},ae.concat=function(){var r=[],t=!0,f=0,o,i,g,p,y,c,b,l;for(g=0;g<arguments.length;g++)p=arguments[g],c=p.length,c&&(i?r.push(p):(i=p,y=c),w(p)?o=!1:(t=!1,f?o!==p.constructor&&(o=!1):o=p.constructor),f+=c);if(!f)return[];if(!r.length)return i;if(t)return i.concat.apply(i,r);if(o){for(b=new o(f),b.set(i),g=0;g<r.length;g++)p=r[g],b.set(p,y),y+=p.length;return b}for(b=new Array(f),l=0;l<i.length;l++)b[l]=i[l];for(g=0;g<r.length;g++){for(p=r[g],l=0;l<p.length;l++)b[y+l]=p[l];y+=l}return b},ae.maxRowLength=function(r){return n(r,Math.max,0)},ae.minRowLength=function(r){return n(r,Math.min,1/0)};function n(r,t,f){if(e(r))if(e(r[0])){for(var o=f,i=0;i<r.length;i++)o=t(o,r[i].length);return o}else return r.length;return 0}},{}],486:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("../constants/numerical").BADNUM,M=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;ne.exports=function(e){return typeof e=="string"&&(e=e.replace(M,"")),w(e)?Number(e):v}},{"../constants/numerical":479,"fast-isnumeric":190}],487:[function(d,ne,ae){ne.exports=function(v){var M=v._fullLayout;M._glcanvas&&M._glcanvas.size()&&M._glcanvas.each(function(T){T.regl&&T.regl.clear({color:!0,depth:!0})})}},{}],488:[function(d,ne,ae){ne.exports=function(v){v._responsiveChartHandler&&(window.removeEventListener("resize",v._responsiveChartHandler),delete v._responsiveChartHandler)}},{}],489:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("tinycolor2"),M=d("../plots/attributes"),T=d("../components/colorscale/scales"),e=d("../components/color"),a=d("../constants/interactions").DESELECTDIM,n=d("./nested_property"),r=d("./regex").counter,t=d("./mod").modHalf,f=d("./array").isArrayOrTypedArray;ae.valObjectMeta={data_array:{coerceFunction:function(i,g,p){f(i)?g.set(i):p!==void 0&&g.set(p)}},enumerated:{coerceFunction:function(i,g,p,y){y.coerceNumber&&(i=+i),y.values.indexOf(i)===-1?g.set(p):g.set(i)},validateFunction:function(i,g){g.coerceNumber&&(i=+i);for(var p=g.values,y=0;y<p.length;y++){var c=String(p[y]);if(c.charAt(0)==="/"&&c.charAt(c.length-1)==="/"){var b=new RegExp(c.substr(1,c.length-2));if(b.test(i))return!0}else if(i===p[y])return!0}return!1}},boolean:{coerceFunction:function(i,g,p){i===!0||i===!1?g.set(i):g.set(p)}},number:{coerceFunction:function(i,g,p,y){!w(i)||y.min!==void 0&&i<y.min||y.max!==void 0&&i>y.max?g.set(p):g.set(+i)}},integer:{coerceFunction:function(i,g,p,y){i%1||!w(i)||y.min!==void 0&&i<y.min||y.max!==void 0&&i>y.max?g.set(p):g.set(+i)}},string:{coerceFunction:function(i,g,p,y){if(typeof i!="string"){var c=typeof i=="number";y.strict===!0||!c?g.set(p):g.set(String(i))}else y.noBlank&&!i?g.set(p):g.set(i)}},color:{coerceFunction:function(i,g,p){v(i).isValid()?g.set(i):g.set(p)}},colorlist:{coerceFunction:function(i,g,p){function y(c){return v(c).isValid()}!Array.isArray(i)||!i.length?g.set(p):i.every(y)?g.set(i):g.set(p)}},colorscale:{coerceFunction:function(i,g,p){g.set(T.get(i,p))}},angle:{coerceFunction:function(i,g,p){i==="auto"?g.set("auto"):w(i)?g.set(t(+i,360)):g.set(p)}},subplotid:{coerceFunction:function(i,g,p,y){var c=y.regex||r(p);if(typeof i=="string"&&c.test(i)){g.set(i);return}g.set(p)},validateFunction:function(i,g){var p=g.dflt;return i===p?!0:typeof i!="string"?!1:!!r(p).test(i)}},flaglist:{coerceFunction:function(i,g,p,y){if(typeof i!="string"){g.set(p);return}if((y.extras||[]).indexOf(i)!==-1){g.set(i);return}for(var c=i.split("+"),b=0;b<c.length;){var l=c[b];y.flags.indexOf(l)===-1||c.indexOf(l)<b?c.splice(b,1):b++}c.length?g.set(c.join("+")):g.set(p)}},any:{coerceFunction:function(i,g,p){i===void 0?g.set(p):g.set(i)}},info_array:{coerceFunction:function(i,g,p,y){function c(z,I,D){var R,O={set:function(F){R=F}};return D===void 0&&(D=I.dflt),ae.valObjectMeta[I.valType].coerceFunction(z,O,D,I),R}var b=y.dimensions===2||y.dimensions==="1-2"&&Array.isArray(i)&&Array.isArray(i[0]);if(!Array.isArray(i)){g.set(p);return}var l=y.items,_=[],s=Array.isArray(l),A=s&&b&&Array.isArray(l[0]),m=b&&s&&!A,h=s&&!m?l.length:i.length,x,u,L,S,k,P;if(p=Array.isArray(p)?p:[],b)for(x=0;x<h;x++)for(_[x]=[],L=Array.isArray(i[x])?i[x]:[],m?k=l.length:s?k=l[x].length:k=L.length,u=0;u<k;u++)m?S=l[u]:s?S=l[x][u]:S=l,P=c(L[u],S,(p[x]||[])[u]),P!==void 0&&(_[x][u]=P);else for(x=0;x<h;x++)P=c(i[x],s?l[x]:l,p[x]),P!==void 0&&(_[x]=P);g.set(_)},validateFunction:function(i,g){if(!Array.isArray(i))return!1;var p=g.items,y=Array.isArray(p),c=g.dimensions===2;if(!g.freeLength&&i.length!==p.length)return!1;for(var b=0;b<i.length;b++)if(c){if(!Array.isArray(i[b])||!g.freeLength&&i[b].length!==p[b].length)return!1;for(var l=0;l<i[b].length;l++)if(!o(i[b][l],y?p[b][l]:p))return!1}else if(!o(i[b],y?p[b]:p))return!1;return!0}}},ae.coerce=function(i,g,p,y,c){var b=n(p,y).get(),l=n(i,y),_=n(g,y),s=l.get(),A=g._template;if(s===void 0&&A&&(s=n(A,y).get(),A=0),c===void 0&&(c=b.dflt),b.arrayOk&&f(s))return _.set(s),s;var m=ae.valObjectMeta[b.valType].coerceFunction;m(s,_,c,b);var h=_.get();return A&&h===c&&!o(s,b)&&(s=n(A,y).get(),m(s,_,c,b),h=_.get()),h},ae.coerce2=function(i,g,p,y,c){var b=n(i,y),l=ae.coerce(i,g,p,y,c),_=b.get();return _!=null?l:!1},ae.coerceFont=function(i,g,p){var y={};return p=p||{},y.family=i(g+".family",p.family),y.size=i(g+".size",p.size),y.color=i(g+".color",p.color),y},ae.coercePattern=function(i,g,p,y){var c=i(g+".shape");if(c){i(g+".solidity"),i(g+".size");var b=i(g+".fillmode"),l=b==="overlay";if(!y){var _=i(g+".bgcolor",l?p:void 0);i(g+".fgcolor",l?e.contrast(_):p)}i(g+".fgopacity",l?.5:1)}},ae.coerceHoverinfo=function(i,g,p){var y=g._module.attributes,c=y.hoverinfo?y:M,b=c.hoverinfo,l;if(p._dataLength===1){var _=b.dflt==="all"?b.flags.slice():b.dflt.split("+");_.splice(_.indexOf("name"),1),l=_.join("+")}return ae.coerce(i,g,c,"hoverinfo",l)},ae.coerceSelectionMarkerOpacity=function(i,g){if(!!i.marker){var p=i.marker.opacity;if(p!==void 0){var y,c;!f(p)&&!i.selected&&!i.unselected&&(y=p,c=a*p),g("selected.marker.opacity",y),g("unselected.marker.opacity",c)}}};function o(i,g){var p=ae.valObjectMeta[g.valType];if(g.arrayOk&&f(i))return!0;if(p.validateFunction)return p.validateFunction(i,g);var y={},c=y,b={set:function(l){c=l}};return p.coerceFunction(i,b,y,g),c!==y}ae.validate=o},{"../components/color":366,"../components/colorscale/scales":381,"../constants/interactions":478,"../plots/attributes":550,"./array":485,"./mod":510,"./nested_property":511,"./regex":520,"fast-isnumeric":190,tinycolor2:312}],490:[function(d,ne,ae){var w=d("d3-time-format").timeFormat,v=d("fast-isnumeric"),M=d("./loggers"),T=d("./mod").mod,e=d("../constants/numerical"),a=e.BADNUM,n=e.ONEDAY,r=e.ONEHOUR,t=e.ONEMIN,f=e.ONESEC,o=e.EPOCHJD,i=d("../registry"),g=d("d3-time-format").utcFormat,p=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,y=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,c=new Date().getFullYear()-70;function b(R){return R&&i.componentsRegistry.calendars&&typeof R=="string"&&R!=="gregorian"}ae.dateTick0=function(R,O){var F=l(R,!!O);if(O<2)return F;var V=ae.dateTime2ms(F,R);return V+=n*(O-1),ae.ms2DateTime(V,0,R)};function l(R,O){return b(R)?O?i.getComponentMethod("calendars","CANONICAL_SUNDAY")[R]:i.getComponentMethod("calendars","CANONICAL_TICK")[R]:O?"2000-01-02":"2000-01-01"}ae.dfltRange=function(R){return b(R)?i.getComponentMethod("calendars","DFLTRANGE")[R]:["2000-01-01","2001-01-01"]},ae.isJSDate=function(R){return typeof R=="object"&&R!==null&&typeof R.getTime=="function"};var _,s;ae.dateTime2ms=function(R,O){if(ae.isJSDate(R)){var F=R.getTimezoneOffset()*t,V=(R.getUTCMinutes()-R.getMinutes())*t+(R.getUTCSeconds()-R.getSeconds())*f+(R.getUTCMilliseconds()-R.getMilliseconds());if(V){var G=3*t;F=F-G/2+T(V-F+G/2,G)}return R=Number(R)-F,R>=_&&R<=s?R:a}if(typeof R!="string"&&typeof R!="number")return a;R=String(R);var J=b(O),Z=R.charAt(0);J&&(Z==="G"||Z==="g")&&(R=R.substr(1),O="");var Y=J&&O.substr(0,7)==="chinese",j=R.match(Y?y:p);if(!j)return a;var re=j[1],se=j[3]||"1",oe=Number(j[5]||1),N=Number(j[7]||0),U=Number(j[9]||0),q=Number(j[11]||0);if(J){if(re.length===2)return a;re=Number(re);var Q;try{var W=i.getComponentMethod("calendars","getCal")(O);if(Y){var X=se.charAt(se.length-1)==="i";se=parseInt(se,10),Q=W.newDate(re,W.toMonthIndex(re,se,X),oe)}else Q=W.newDate(re,Number(se),oe)}catch{return a}return Q?(Q.toJD()-o)*n+N*r+U*t+q*f:a}re.length===2?re=(Number(re)+2e3-c)%100+c:re=Number(re),se-=1;var ee=new Date(Date.UTC(2e3,se,oe,N,U));return ee.setUTCFullYear(re),ee.getUTCMonth()!==se||ee.getUTCDate()!==oe?a:ee.getTime()+q*f},_=ae.MIN_MS=ae.dateTime2ms("-9999"),s=ae.MAX_MS=ae.dateTime2ms("9999-12-31 23:59:59.9999"),ae.isDateTime=function(R,O){return ae.dateTime2ms(R,O)!==a};function A(R,O){return String(R+Math.pow(10,O)).substr(1)}var m=90*n,h=3*r,x=5*t;ae.ms2DateTime=function(R,O,F){if(typeof R!="number"||!(R>=_&&R<=s))return a;O||(O=0);var V=Math.floor(T(R+.05,1)*10),G=Math.round(R-V/10),J,Z,Y,j,re,se;if(b(F)){var oe=Math.floor(G/n)+o,N=Math.floor(T(R,n));try{J=i.getComponentMethod("calendars","getCal")(F).fromJD(oe).formatDate("yyyy-mm-dd")}catch{J=g("G%Y-%m-%d")(new Date(G))}if(J.charAt(0)==="-")for(;J.length<11;)J="-0"+J.substr(1);else for(;J.length<10;)J="0"+J;Z=O<m?Math.floor(N/r):0,Y=O<m?Math.floor(N%r/t):0,j=O<h?Math.floor(N%t/f):0,re=O<x?N%f*10+V:0}else se=new Date(G),J=g("%Y-%m-%d")(se),Z=O<m?se.getUTCHours():0,Y=O<m?se.getUTCMinutes():0,j=O<h?se.getUTCSeconds():0,re=O<x?se.getUTCMilliseconds()*10+V:0;return u(J,Z,Y,j,re)},ae.ms2DateTimeLocal=function(R){if(!(R>=_+n&&R<=s-n))return a;var O=Math.floor(T(R+.05,1)*10),F=new Date(Math.round(R-O/10)),V=w("%Y-%m-%d")(F),G=F.getHours(),J=F.getMinutes(),Z=F.getSeconds(),Y=F.getUTCMilliseconds()*10+O;return u(V,G,J,Z,Y)};function u(R,O,F,V,G){if((O||F||V||G)&&(R+=" "+A(O,2)+":"+A(F,2),(V||G)&&(R+=":"+A(V,2),G))){for(var J=4;G%10===0;)J-=1,G/=10;R+="."+A(G,J)}return R}ae.cleanDate=function(R,O,F){if(R===a)return O;if(ae.isJSDate(R)||typeof R=="number"&&isFinite(R)){if(b(F))return M.error("JS Dates and milliseconds are incompatible with world calendars",R),O;if(R=ae.ms2DateTimeLocal(+R),!R&&O!==void 0)return O}else if(!ae.isDateTime(R,F))return M.error("unrecognized date",R),O;return R};var L=/%\d?f/g,S=/%h/g,k={"1":"1","2":"1","3":"2","4":"2"};function P(R,O,F,V){R=R.replace(L,function(J){var Z=Math.min(+J.charAt(1)||6,6),Y=(O/1e3%1+2).toFixed(Z).substr(2).replace(/0+$/,"")||"0";return Y});var G=new Date(Math.floor(O+.05));if(R=R.replace(S,function(){return k[F("%q")(G)]}),b(V))try{R=i.getComponentMethod("calendars","worldCalFmt")(R,O,V)}catch{return"Invalid"}return F(R)(G)}var z=[59,59.9,59.99,59.999,59.9999];function I(R,O){var F=T(R+.05,n),V=A(Math.floor(F/r),2)+":"+A(T(Math.floor(F/t),60),2);if(O!=="M"){v(O)||(O=0);var G=Math.min(T(R/f,60),z[O]),J=(100+G).toFixed(O).substr(1);O>0&&(J=J.replace(/0+$/,"").replace(/[\.]$/,"")),V+=":"+J}return V}ae.formatDate=function(R,O,F,V,G,J){if(G=b(G)&&G,!O)if(F==="y")O=J.year;else if(F==="m")O=J.month;else if(F==="d")O=J.dayMonth+`
`+J.year;else return I(R,F)+`
`+P(J.dayMonthYear,R,V,G);return P(O,R,V,G)};var D=3*n;ae.incrementMonth=function(R,O,F){F=b(F)&&F;var V=T(R,n);if(R=Math.round(R-V),F)try{var G=Math.round(R/n)+o,J=i.getComponentMethod("calendars","getCal")(F),Z=J.fromJD(G);return O%12?J.add(Z,O,"m"):J.add(Z,O/12,"y"),(Z.toJD()-o)*n+V}catch{M.error("invalid ms "+R+" in calendar "+F)}var Y=new Date(R+D);return Y.setUTCMonth(Y.getUTCMonth()+O)+V-D},ae.findExactDates=function(R,O){for(var F=0,V=0,G=0,J=0,Z,Y,j=b(O)&&i.getComponentMethod("calendars","getCal")(O),re=0;re<R.length;re++){if(Y=R[re],!v(Y)){J++;continue}if(!(Y%n))if(j)try{Z=j.fromJD(Y/n+o),Z.day()===1?Z.month()===1?F++:V++:G++}catch{}else Z=new Date(Y),Z.getUTCDate()===1?Z.getUTCMonth()===0?F++:V++:G++}V+=F,G+=V;var se=R.length-J;return{exactYears:F/se,exactMonths:V/se,exactDays:G/se}}},{"../constants/numerical":479,"../registry":638,"./loggers":507,"./mod":510,"d3-time-format":120,"fast-isnumeric":190}],491:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("./loggers"),M=d("./matrix"),T=d("gl-mat4");function e(c){var b;if(typeof c=="string"){if(b=document.getElementById(c),b===null)throw new Error("No DOM element with id '"+c+"' exists on the page.");return b}else if(c==null)throw new Error("DOM element provided is null or undefined");return c}function a(c){var b=w.select(c);return b.node()instanceof HTMLElement&&b.size()&&b.classed("js-plotly-plot")}function n(c){var b=c&&c.parentNode;b&&b.removeChild(c)}function r(c,b){t("global",c,b)}function t(c,b,l){var _="plotly.js-style-"+c,s=document.getElementById(_);s||(s=document.createElement("style"),s.setAttribute("id",_),s.appendChild(document.createTextNode("")),document.head.appendChild(s));var A=s.sheet;A.insertRule?A.insertRule(b+"{"+l+"}",0):A.addRule?A.addRule(b,l,0):v.warn("addStyleRule failed")}function f(c){var b="plotly.js-style-"+c,l=document.getElementById(b);l&&n(l)}function o(c){var b=g(c),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return b.forEach(function(_){var s=i(_);if(s){var A=M.convertCssMatrix(s);l=T.multiply(l,l,A)}}),l}function i(c){var b=window.getComputedStyle(c,null),l=b.getPropertyValue("-webkit-transform")||b.getPropertyValue("-moz-transform")||b.getPropertyValue("-ms-transform")||b.getPropertyValue("-o-transform")||b.getPropertyValue("transform");return l==="none"?null:l.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(_){return+_})}function g(c){for(var b=[];p(c);)b.push(c),c=c.parentNode;return b}function p(c){return c&&(c instanceof Element||c instanceof HTMLElement)}function y(c,b){return c&&b&&c.x===b.x&&c.y===b.y&&c.top===b.top&&c.left===b.left&&c.right===b.right&&c.bottom===b.bottom}ne.exports={getGraphDiv:e,isPlotDiv:a,removeElement:n,addStyleRule:r,addRelatedStyleRule:t,deleteRelatedStyleRule:f,getFullTransformMatrix:o,getElementTransformMatrix:i,getElementAndAncestors:g,equalDomRects:y}},{"./loggers":507,"./matrix":509,"@plotly/d3":58,"gl-mat4":210}],492:[function(d,ne,ae){var w=d("events").EventEmitter,v={init:function(M){if(M._ev instanceof w)return M;var T=new w,e=new w;return M._ev=T,M._internalEv=e,M.on=T.on.bind(T),M.once=T.once.bind(T),M.removeListener=T.removeListener.bind(T),M.removeAllListeners=T.removeAllListeners.bind(T),M._internalOn=e.on.bind(e),M._internalOnce=e.once.bind(e),M._removeInternalListener=e.removeListener.bind(e),M._removeAllInternalListeners=e.removeAllListeners.bind(e),M.emit=function(a,n){typeof jQuery<"u"&&jQuery(M).trigger(a,n),T.emit(a,n),e.emit(a,n)},M},triggerHandler:function(M,T,e){var a,n;typeof jQuery<"u"&&(a=jQuery(M).triggerHandler(T,e));var r=M._ev;if(!r)return a;var t=r._events[T];if(!t)return a;function f(i){if(i.listener){if(r.removeListener(T,i.listener),!i.fired)return i.fired=!0,i.listener.apply(r,[e])}else return i.apply(r,[e])}t=Array.isArray(t)?t:[t];var o;for(o=0;o<t.length-1;o++)f(t[o]);return n=f(t[o]),a!==void 0?a:n},purge:function(M){return delete M._ev,delete M.on,delete M.once,delete M.removeListener,delete M.removeAllListeners,delete M.emit,delete M._ev,delete M._internalEv,delete M._internalOn,delete M._internalOnce,delete M._removeInternalListener,delete M._removeAllInternalListeners,M}};ne.exports=v},{events:84}],493:[function(d,ne,ae){var w=d("./is_plain_object.js"),v=Array.isArray;function M(e,a){var n,r;for(n=0;n<e.length;n++){if(r=e[n],r!==null&&typeof r=="object")return!1;r!==void 0&&(a[n]=r)}return!0}ae.extendFlat=function(){return T(arguments,!1,!1,!1)},ae.extendDeep=function(){return T(arguments,!0,!1,!1)},ae.extendDeepAll=function(){return T(arguments,!0,!0,!1)},ae.extendDeepNoArrays=function(){return T(arguments,!0,!1,!0)};function T(e,a,n,r){var t=e[0],f=e.length,o,i,g,p,y,c,b;if(f===2&&v(t)&&v(e[1])&&t.length===0){if(b=M(e[1],t),b)return t;t.splice(0,t.length)}for(var l=1;l<f;l++){o=e[l];for(i in o)g=t[i],p=o[i],r&&v(p)?t[i]=p:a&&p&&(w(p)||(y=v(p)))?(y?(y=!1,c=g&&v(g)?g:[]):c=g&&w(g)?g:{},t[i]=T([c,p],a,n,r)):(typeof p<"u"||n)&&(t[i]=p)}return t}},{"./is_plain_object.js":504}],494:[function(d,ne,ae){ne.exports=function(v){for(var M={},T=[],e=0,a=0;a<v.length;a++){var n=v[a];M[n]!==1&&(M[n]=1,T[e++]=n)}return T}},{}],495:[function(d,ne,ae){ne.exports=function(e){for(var a=M(e)?v:w,n=[],r=0;r<e.length;r++){var t=e[r];a(t)&&n.push(t)}return n};function w(T){return T.visible===!0}function v(T){var e=T[0].trace;return e.visible===!0&&e._length!==0}function M(T){return Array.isArray(T)&&Array.isArray(T[0])&&T[0][0]&&T[0][0].trace}},{}],496:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("country-regex"),M=d("@turf/area"),T=d("@turf/centroid"),e=d("@turf/bbox"),a=d("./identity"),n=d("./loggers"),r=d("./is_plain_object"),t=d("./nested_property"),f=d("./polygon"),o=Object.keys(v),i={"ISO-3":a,"USA-states":a,"country names":g};function g(A){for(var m=0;m<o.length;m++){var h=o[m],x=new RegExp(v[h]);if(x.test(A.trim().toLowerCase()))return h}return n.log("Unrecognized country name: "+A+"."),!1}function p(A,m,h){if(!m||typeof m!="string")return!1;var x=i[A](m),u,L,S;if(x){if(A==="USA-states")for(u=[],S=0;S<h.length;S++)L=h[S],L.properties&&L.properties.gu&&L.properties.gu==="USA"&&u.push(L);else u=h;for(S=0;S<u.length;S++)if(L=u[S],L.id===x)return L;n.log(["Location with id",x,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}function y(A){var m=A.geometry,h=m.coordinates,x=A.id,u=[],L,S,k,P;function z(I){for(var D=0;D<I.length-1;D++)if(I[D][0]>0&&I[D+1][0]<0)return D;return null}switch(x==="RUS"||x==="FJI"?L=function(I){var D;if(z(I)===null)D=I;else for(D=new Array(I.length),P=0;P<I.length;P++)D[P]=[I[P][0]<0?I[P][0]+360:I[P][0],I[P][1]];u.push(f.tester(D))}:x==="ATA"?L=function(I){var D=z(I);if(D===null)return u.push(f.tester(I));var R=new Array(I.length+1),O=0;for(P=0;P<I.length;P++)P>D?R[O++]=[I[P][0]+360,I[P][1]]:P===D?(R[O++]=I[P],R[O++]=[I[P][0],-90]):R[O++]=I[P];var F=f.tester(R);F.pts.pop(),u.push(F)}:L=function(I){u.push(f.tester(I))},m.type){case"MultiPolygon":for(S=0;S<h.length;S++)for(k=0;k<h[S].length;k++)L(h[S][k]);break;case"Polygon":for(S=0;S<h.length;S++)L(h[S]);break}return u}function c(A){var m=A.geojson,h=window.PlotlyGeoAssets||{},x=typeof m=="string"?h[m]:m;return r(x)?x:(n.error("Oops ... something went wrong when fetching "+m),!1)}function b(A){var m=A[0].trace,h=c(m);if(!h)return!1;var x={},u=[],L;for(L=0;L<m._length;L++){var S=A[L];(S.loc||S.loc===0)&&(x[S.loc]=S)}function k(I){var D=t(I,m.featureidkey||"id").get(),R=x[D];if(R){var O=I.geometry;if(O.type==="Polygon"||O.type==="MultiPolygon"){var F={type:"Feature",id:D,geometry:O,properties:{}};F.properties.ct=l(F),R.fIn=I,R.fOut=F,u.push(F)}else n.log(["Location",R.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete x[D]}switch(h.type){case"FeatureCollection":var P=h.features;for(L=0;L<P.length;L++)k(P[L]);break;case"Feature":k(h);break;default:return n.warn(["Invalid GeoJSON type",(h.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var z in x)n.log(["Location *"+z+"*","does not have a matching feature with id-key","*"+m.featureidkey+"*."].join(" "));return u}function l(A){var m=A.geometry,h;if(m.type==="MultiPolygon")for(var x=m.coordinates,u=0,L=0;L<x.length;L++){var S={type:"Polygon",coordinates:x[L]},k=M.default(S);k>u&&(u=k,h=S)}else h=m;return T.default(h).geometry.coordinates}function _(A){var m=window.PlotlyGeoAssets||{},h=[];function x(P){return new Promise(function(z,I){w.json(P,function(D,R){if(D){delete m[P];var O=D.status===404?'GeoJSON at URL "'+P+'" does not exist.':"Unexpected error while fetching from "+P;return I(new Error(O))}return m[P]=R,z(R)})})}function u(P){return new Promise(function(z,I){var D=0,R=setInterval(function(){if(m[P]&&m[P]!=="pending")return clearInterval(R),z(m[P]);if(D>100)return clearInterval(R),I("Unexpected error while fetching from "+P);D++},50)})}for(var L=0;L<A.length;L++){var S=A[L][0].trace,k=S.geojson;typeof k=="string"&&(m[k]?m[k]==="pending"&&h.push(u(k)):(m[k]="pending",h.push(x(k))))}return h}function s(A){return e.default(A)}ne.exports={locationToFeature:p,feature2polygons:y,getTraceGeojson:c,extractTraceFeature:b,fetchTraceGeoData:_,computeBbox:s}},{"./identity":501,"./is_plain_object":504,"./loggers":507,"./nested_property":511,"./polygon":515,"@plotly/d3":58,"@turf/area":61,"@turf/bbox":64,"@turf/centroid":67,"country-regex":94}],497:[function(d,ne,ae){var w=d("../constants/numerical").BADNUM;ae.calcTraceToLineCoords=function(v){for(var M=v[0].trace,T=M.connectgaps,e=[],a=[],n=0;n<v.length;n++){var r=v[n],t=r.lonlat;t[0]!==w?a.push(t):!T&&a.length>0&&(e.push(a),a=[])}return a.length>0&&e.push(a),e},ae.makeLine=function(v){return v.length===1?{type:"LineString",coordinates:v[0]}:{type:"MultiLineString",coordinates:v}},ae.makePolygon=function(v){if(v.length===1)return{type:"Polygon",coordinates:v};for(var M=new Array(v.length),T=0;T<v.length;T++)M[T]=[v[T]];return{type:"MultiPolygon",coordinates:M}},ae.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":479}],498:[function(d,ne,ae){var w=d("./mod").mod;ae.segmentsIntersect=v;function v(n,r,t,f,o,i,g,p){var y=t-n,c=o-n,b=g-o,l=f-r,_=i-r,s=p-i,A=y*s-b*l;if(A===0)return null;var m=(c*s-b*_)/A,h=(c*l-y*_)/A;return h<0||h>1||m<0||m>1?null:{x:n+y*m,y:r+l*m}}ae.segmentDistance=function(r,t,f,o,i,g,p,y){if(v(r,t,f,o,i,g,p,y))return 0;var c=f-r,b=o-t,l=p-i,_=y-g,s=c*c+b*b,A=l*l+_*_,m=Math.min(M(c,b,s,i-r,g-t),M(c,b,s,p-r,y-t),M(l,_,A,r-i,t-g),M(l,_,A,f-i,o-g));return Math.sqrt(m)};function M(n,r,t,f,o){var i=f*n+o*r;if(i<0)return f*f+o*o;if(i>t){var g=f-n,p=o-r;return g*g+p*p}else{var y=f*r-o*n;return y*y/t}}var T,e,a;ae.getTextLocation=function(r,t,f,o){if((r!==e||o!==a)&&(T={},e=r,a=o),T[f])return T[f];var i=r.getPointAtLength(w(f-o/2,t)),g=r.getPointAtLength(w(f+o/2,t)),p=Math.atan((g.y-i.y)/(g.x-i.x)),y=r.getPointAtLength(w(f,t)),c=(y.x*4+i.x+g.x)/6,b=(y.y*4+i.y+g.y)/6,l={x:c,y:b,theta:p};return T[f]=l,l},ae.clearLocationCache=function(){e=null},ae.getVisibleSegment=function(r,t,f){var o=t.left,i=t.right,g=t.top,p=t.bottom,y=0,c=r.getTotalLength(),b=c,l,_;function s(m){var h=r.getPointAtLength(m);m===0?l=h:m===c&&(_=h);var x=h.x<o?o-h.x:h.x>i?h.x-i:0,u=h.y<g?g-h.y:h.y>p?h.y-p:0;return Math.sqrt(x*x+u*u)}for(var A=s(y);A;){if(y+=A+f,y>b)return;A=s(y)}for(A=s(b);A;){if(b-=A+f,y>b)return;A=s(b)}return{min:y,max:b,len:b-y,total:c,isClosed:y===0&&b===c&&Math.abs(l.x-_.x)<.1&&Math.abs(l.y-_.y)<.1}},ae.findPointOnPath=function(r,t,f,o){o=o||{};for(var i=o.pathLength||r.getTotalLength(),g=o.tolerance||.001,p=o.iterationLimit||30,y=r.getPointAtLength(0)[f]>r.getPointAtLength(i)[f]?-1:1,c=0,b=0,l=i,_,s,A;c<p;){if(_=(b+l)/2,s=r.getPointAtLength(_),A=s[f]-t,Math.abs(A)<g)return s;y*A>0?l=_:b=_,c++}return s}},{"./mod":510}],499:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("tinycolor2"),M=d("color-normalize"),T=d("../components/colorscale"),e=d("../components/color/attributes").defaultLine,a=d("./array").isArrayOrTypedArray,n=M(e),r=1;function t(p,y){var c=p;return c[3]*=y,c}function f(p){if(w(p))return n;var y=M(p);return y.length?y:n}function o(p){return w(p)?p:r}function i(p,y,c){var b=p.color,l=a(b),_=a(y),s=T.extractOpts(p),A=[],m,h,x,u,L;if(s.colorscale!==void 0?m=T.makeColorScaleFuncFromTrace(p):m=f,l?h=function(k,P){return k[P]===void 0?n:M(m(k[P]))}:h=f,_?x=function(k,P){return k[P]===void 0?r:o(k[P])}:x=o,l||_)for(var S=0;S<c;S++)u=h(b,S),L=x(y,S),A[S]=t(u,L);else A=t(M(b),y);return A}function g(p){var y=T.extractOpts(p),c=y.colorscale;return y.reversescale&&(c=T.flipScale(y.colorscale)),c.map(function(b){var l=b[0],_=v(b[1]),s=_.toRgb();return{index:l,rgb:[s.r,s.g,s.b,s.a]}})}ne.exports={formatColor:i,parseColorScale:g}},{"../components/color/attributes":365,"../components/colorscale":378,"./array":485,"color-normalize":89,"fast-isnumeric":190,tinycolor2:312}],500:[function(d,ne,ae){var w=d("./identity");function v(M){return[M]}ne.exports={keyFun:function(M){return M.key},repeat:v,descend:w,wrap:v,unwrap:function(M){return M[0]}}},{"./identity":501}],501:[function(d,ne,ae){ne.exports=function(v){return v}},{}],502:[function(d,ne,ae){ne.exports=function(v,M){if(!M)return v;var T=1/Math.abs(M),e=T>1?(T*v+T*M)/T:v+M,a=String(e).length;if(a>16){var n=String(M).length,r=String(v).length;if(a>=r+n){var t=parseFloat(e).toPrecision(12);t.indexOf("e+")===-1&&(e=+t)}}return e}},{}],503:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("d3-time-format").utcFormat,M=d("d3-format").format,T=d("fast-isnumeric"),e=d("../constants/numerical"),a=e.FP_SAFE,n=-a,r=e.BADNUM,t=ne.exports={};t.adjustFormat=function(se){return!se||/^\d[.]\df/.test(se)||/[.]\d%/.test(se)?se:se==="0.f"?"~f":/^\d%/.test(se)?"~%":/^\ds/.test(se)?"~s":!/^[~,.0$]/.test(se)&&/[&fps]/.test(se)?"~"+se:se};var f={};t.warnBadFormat=function(re){var se=String(re);f[se]||(f[se]=1,t.warn('encountered bad format: "'+se+'"'))},t.noFormat=function(re){return String(re)},t.numberFormat=function(re){var se;try{se=M(t.adjustFormat(re))}catch{return t.warnBadFormat(re),t.noFormat}return se},t.nestedProperty=d("./nested_property"),t.keyedContainer=d("./keyed_container"),t.relativeAttr=d("./relative_attr"),t.isPlainObject=d("./is_plain_object"),t.toLogRange=d("./to_log_range"),t.relinkPrivateKeys=d("./relink_private");var o=d("./array");t.isTypedArray=o.isTypedArray,t.isArrayOrTypedArray=o.isArrayOrTypedArray,t.isArray1D=o.isArray1D,t.ensureArray=o.ensureArray,t.concat=o.concat,t.maxRowLength=o.maxRowLength,t.minRowLength=o.minRowLength;var i=d("./mod");t.mod=i.mod,t.modHalf=i.modHalf;var g=d("./coerce");t.valObjectMeta=g.valObjectMeta,t.coerce=g.coerce,t.coerce2=g.coerce2,t.coerceFont=g.coerceFont,t.coercePattern=g.coercePattern,t.coerceHoverinfo=g.coerceHoverinfo,t.coerceSelectionMarkerOpacity=g.coerceSelectionMarkerOpacity,t.validate=g.validate;var p=d("./dates");t.dateTime2ms=p.dateTime2ms,t.isDateTime=p.isDateTime,t.ms2DateTime=p.ms2DateTime,t.ms2DateTimeLocal=p.ms2DateTimeLocal,t.cleanDate=p.cleanDate,t.isJSDate=p.isJSDate,t.formatDate=p.formatDate,t.incrementMonth=p.incrementMonth,t.dateTick0=p.dateTick0,t.dfltRange=p.dfltRange,t.findExactDates=p.findExactDates,t.MIN_MS=p.MIN_MS,t.MAX_MS=p.MAX_MS;var y=d("./search");t.findBin=y.findBin,t.sorterAsc=y.sorterAsc,t.sorterDes=y.sorterDes,t.distinctVals=y.distinctVals,t.roundUp=y.roundUp,t.sort=y.sort,t.findIndexOfMin=y.findIndexOfMin,t.sortObjectKeys=d("./sort_object_keys");var c=d("./stats");t.aggNums=c.aggNums,t.len=c.len,t.mean=c.mean,t.median=c.median,t.midRange=c.midRange,t.variance=c.variance,t.stdev=c.stdev,t.interp=c.interp;var b=d("./matrix");t.init2dArray=b.init2dArray,t.transposeRagged=b.transposeRagged,t.dot=b.dot,t.translationMatrix=b.translationMatrix,t.rotationMatrix=b.rotationMatrix,t.rotationXYMatrix=b.rotationXYMatrix,t.apply3DTransform=b.apply3DTransform,t.apply2DTransform=b.apply2DTransform,t.apply2DTransform2=b.apply2DTransform2,t.convertCssMatrix=b.convertCssMatrix,t.inverseTransformMatrix=b.inverseTransformMatrix;var l=d("./angles");t.deg2rad=l.deg2rad,t.rad2deg=l.rad2deg,t.angleDelta=l.angleDelta,t.angleDist=l.angleDist,t.isFullCircle=l.isFullCircle,t.isAngleInsideSector=l.isAngleInsideSector,t.isPtInsideSector=l.isPtInsideSector,t.pathArc=l.pathArc,t.pathSector=l.pathSector,t.pathAnnulus=l.pathAnnulus;var _=d("./anchor_utils");t.isLeftAnchor=_.isLeftAnchor,t.isCenterAnchor=_.isCenterAnchor,t.isRightAnchor=_.isRightAnchor,t.isTopAnchor=_.isTopAnchor,t.isMiddleAnchor=_.isMiddleAnchor,t.isBottomAnchor=_.isBottomAnchor;var s=d("./geometry2d");t.segmentsIntersect=s.segmentsIntersect,t.segmentDistance=s.segmentDistance,t.getTextLocation=s.getTextLocation,t.clearLocationCache=s.clearLocationCache,t.getVisibleSegment=s.getVisibleSegment,t.findPointOnPath=s.findPointOnPath;var A=d("./extend");t.extendFlat=A.extendFlat,t.extendDeep=A.extendDeep,t.extendDeepAll=A.extendDeepAll,t.extendDeepNoArrays=A.extendDeepNoArrays;var m=d("./loggers");t.log=m.log,t.warn=m.warn,t.error=m.error;var h=d("./regex");t.counterRegex=h.counter;var x=d("./throttle");t.throttle=x.throttle,t.throttleDone=x.done,t.clearThrottle=x.clear;var u=d("./dom");t.getGraphDiv=u.getGraphDiv,t.isPlotDiv=u.isPlotDiv,t.removeElement=u.removeElement,t.addStyleRule=u.addStyleRule,t.addRelatedStyleRule=u.addRelatedStyleRule,t.deleteRelatedStyleRule=u.deleteRelatedStyleRule,t.getFullTransformMatrix=u.getFullTransformMatrix,t.getElementTransformMatrix=u.getElementTransformMatrix,t.getElementAndAncestors=u.getElementAndAncestors,t.equalDomRects=u.equalDomRects,t.clearResponsive=d("./clear_responsive"),t.preserveDrawingBuffer=d("./preserve_drawing_buffer"),t.makeTraceGroups=d("./make_trace_groups"),t._=d("./localize"),t.notifier=d("./notifier"),t.filterUnique=d("./filter_unique"),t.filterVisible=d("./filter_visible"),t.pushUnique=d("./push_unique"),t.increment=d("./increment"),t.cleanNumber=d("./clean_number"),t.ensureNumber=function(se){return T(se)?(se=Number(se),se>a||se<n?r:se):r},t.isIndex=function(re,se){return se!==void 0&&re>=se?!1:T(re)&&re>=0&&re%1===0},t.noop=d("./noop"),t.identity=d("./identity"),t.repeat=function(re,se){for(var oe=new Array(se),N=0;N<se;N++)oe[N]=re;return oe},t.swapAttrs=function(re,se,oe,N){oe||(oe="x"),N||(N="y");for(var U=0;U<se.length;U++){var q=se[U],Q=t.nestedProperty(re,q.replace("?",oe)),W=t.nestedProperty(re,q.replace("?",N)),X=Q.get();Q.set(W.get()),W.set(X)}},t.raiseToTop=function(se){se.parentNode.appendChild(se)},t.cancelTransition=function(re){return re.transition().duration(0)},t.constrain=function(re,se,oe){return se>oe?Math.max(oe,Math.min(se,re)):Math.max(se,Math.min(oe,re))},t.bBoxIntersect=function(re,se,oe){return oe=oe||0,re.left<=se.right+oe&&se.left<=re.right+oe&&re.top<=se.bottom+oe&&se.top<=re.bottom+oe},t.simpleMap=function(re,se,oe,N,U){for(var q=re.length,Q=new Array(q),W=0;W<q;W++)Q[W]=se(re[W],oe,N,U);return Q},t.randstr=function re(se,oe,N,U){if(N||(N=16),oe===void 0&&(oe=24),oe<=0)return"0";var q=Math.log(Math.pow(2,oe))/Math.log(N),Q="",W,X,ee;for(W=2;q===1/0;W*=2)q=Math.log(Math.pow(2,oe/W))/Math.log(N)*W;var te=q-Math.floor(q);for(W=0;W<Math.floor(q);W++)ee=Math.floor(Math.random()*N).toString(N),Q=ee+Q;te&&(X=Math.pow(N,te),ee=Math.floor(Math.random()*X).toString(N),Q=ee+Q);var ie=parseInt(Q,N);return se&&se[Q]||ie!==1/0&&ie>=Math.pow(2,oe)?U>10?(t.warn("randstr failed uniqueness"),Q):re(se,oe,N,(U||0)+1):Q},t.OptionControl=function(re,se){re||(re={}),se||(se="opt");var oe={};return oe.optionList=[],oe._newoption=function(N){N[se]=re,oe[N.name]=N,oe.optionList.push(N)},oe["_"+se]=re,oe},t.smooth=function(re,se){if(se=Math.round(se)||0,se<2)return re;var oe=re.length,N=2*oe,U=2*se-1,q=new Array(U),Q=new Array(oe),W,X,ee,te;for(W=0;W<U;W++)q[W]=(1-Math.cos(Math.PI*(W+1)/se))/(2*se);for(W=0;W<oe;W++){for(te=0,X=0;X<U;X++)ee=W+X+1-se,ee<-oe?ee-=N*Math.round(ee/N):ee>=N&&(ee-=N*Math.floor(ee/N)),ee<0?ee=-1-ee:ee>=oe&&(ee=N-1-ee),te+=re[ee]*q[X];Q[W]=te}return Q},t.syncOrAsync=function(re,se,oe){var N,U;function q(){return t.syncOrAsync(re,se,oe)}for(;re.length;)if(U=re.splice(0,1)[0],N=U(se),N&&N.then)return N.then(q);return oe&&oe(se)},t.stripTrailingSlash=function(re){return re.substr(-1)==="/"?re.substr(0,re.length-1):re},t.noneOrAll=function(re,se,oe){if(!!re){var N=!1,U=!0,q,Q;for(q=0;q<oe.length;q++)Q=re[oe[q]],Q!=null?N=!0:U=!1;if(N&&!U)for(q=0;q<oe.length;q++)re[oe[q]]=se[oe[q]]}},t.mergeArray=function(re,se,oe,N){var U=typeof N=="function";if(t.isArrayOrTypedArray(re))for(var q=Math.min(re.length,se.length),Q=0;Q<q;Q++){var W=re[Q];se[Q][oe]=U?N(W):W}},t.mergeArrayCastPositive=function(re,se,oe){return t.mergeArray(re,se,oe,function(N){var U=+N;return isFinite(U)&&U>0?U:0})},t.fillArray=function(re,se,oe,N){if(N=N||t.identity,t.isArrayOrTypedArray(re))for(var U=0;U<se.length;U++)se[U][oe]=N(re[U])},t.castOption=function(re,se,oe,N){N=N||t.identity;var U=t.nestedProperty(re,oe).get();return t.isArrayOrTypedArray(U)?Array.isArray(se)&&t.isArrayOrTypedArray(U[se[0]])?N(U[se[0]][se[1]]):N(U[se]):U},t.extractOption=function(re,se,oe,N){if(oe in re)return re[oe];var U=t.nestedProperty(se,N).get();if(!Array.isArray(U))return U};function L(re){var se={};for(var oe in re)for(var N=re[oe],U=0;U<N.length;U++)se[N[U]]=+oe;return se}t.tagSelected=function(re,se,oe){var N=se.selectedpoints,U=se._indexToPoints,q;U&&(q=L(U));function Q(ie){return ie!==void 0&&ie<re.length}for(var W=0;W<N.length;W++){var X=N[W];if(t.isIndex(X)||t.isArrayOrTypedArray(X)&&t.isIndex(X[0])&&t.isIndex(X[1])){var ee=q?q[X]:X,te=oe?oe[ee]:ee;Q(te)&&(re[te].selected=1)}}},t.selIndices2selPoints=function(re){var se=re.selectedpoints,oe=re._indexToPoints;if(oe){for(var N=L(oe),U=[],q=0;q<se.length;q++){var Q=se[q];if(t.isIndex(Q)){var W=N[Q];t.isIndex(W)&&U.push(W)}}return U}else return se},t.getTargetArray=function(re,se){var oe=se.target;if(typeof oe=="string"&&oe){var N=t.nestedProperty(re,oe).get();return Array.isArray(N)?N:!1}else if(Array.isArray(oe))return oe;return!1},t.minExtend=function(re,se){var oe={};typeof se!="object"&&(se={});var N=3,U=Object.keys(re),q,Q,W;for(q=0;q<U.length;q++)Q=U[q],W=re[Q],!(Q.charAt(0)==="_"||typeof W=="function")&&(Q==="module"?oe[Q]=W:Array.isArray(W)?Q==="colorscale"?oe[Q]=W.slice():oe[Q]=W.slice(0,N):t.isTypedArray(W)?oe[Q]=W.subarray(0,N):W&&typeof W=="object"?oe[Q]=t.minExtend(re[Q],se[Q]):oe[Q]=W);for(U=Object.keys(se),q=0;q<U.length;q++)Q=U[q],W=se[Q],(typeof W!="object"||!(Q in oe)||typeof oe[Q]!="object")&&(oe[Q]=W);return oe},t.titleCase=function(re){return re.charAt(0).toUpperCase()+re.substr(1)},t.containsAny=function(re,se){for(var oe=0;oe<se.length;oe++)if(re.indexOf(se[oe])!==-1)return!0;return!1},t.isIE=function(){return typeof window.navigator.msSaveBlob<"u"};var S=/Version\/[\d\.]+.*Safari/;t.isSafari=function(){return S.test(window.navigator.userAgent)};var k=/iPad|iPhone|iPod/;t.isIOS=function(){return k.test(window.navigator.userAgent)};var P=/Firefox\/(\d+)\.\d+/;t.getFirefoxVersion=function(){var re=P.exec(window.navigator.userAgent);if(re&&re.length===2){var se=parseInt(re[1]);if(!isNaN(se))return se}return null},t.isD3Selection=function(re){return re instanceof w.selection},t.ensureSingle=function(re,se,oe,N){var U=re.select(se+(oe?"."+oe:""));if(U.size())return U;var q=re.append(se);return oe&&q.classed(oe,!0),N&&q.call(N),q},t.ensureSingleById=function(re,se,oe,N){var U=re.select(se+"#"+oe);if(U.size())return U;var q=re.append(se).attr("id",oe);return N&&q.call(N),q},t.objectFromPath=function(re,se){for(var oe=re.split("."),N,U=N={},q=0;q<oe.length;q++){var Q=oe[q],W=null,X=oe[q].match(/(.*)\[([0-9]+)\]/);X?(Q=X[1],W=X[2],N=N[Q]=[],q===oe.length-1?N[W]=se:N[W]={},N=N[W]):(q===oe.length-1?N[Q]=se:N[Q]={},N=N[Q])}return U};var z=/^([^\[\.]+)\.(.+)?/,I=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;t.expandObjectPaths=function(re){var se,oe,N,U,q,Q,W;if(typeof re=="object"&&!Array.isArray(re))for(oe in re)re.hasOwnProperty(oe)&&((se=oe.match(z))?(U=re[oe],N=se[1],delete re[oe],re[N]=t.extendDeepNoArrays(re[N]||{},t.objectFromPath(oe,t.expandObjectPaths(U))[N])):(se=oe.match(I))?(U=re[oe],N=se[1],q=parseInt(se[2]),delete re[oe],re[N]=re[N]||[],se[3]==="."?(W=se[4],Q=re[N][q]=re[N][q]||{},t.extendDeepNoArrays(Q,t.objectFromPath(W,t.expandObjectPaths(U)))):re[N][q]=t.expandObjectPaths(U)):re[oe]=t.expandObjectPaths(re[oe]));return re},t.numSeparate=function(re,se,oe){if(oe||(oe=!1),typeof se!="string"||se.length===0)throw new Error("Separator string required for formatting!");typeof re=="number"&&(re=String(re));var N=/(\d+)(\d{3})/,U=se.charAt(0),q=se.charAt(1),Q=re.split("."),W=Q[0],X=Q.length>1?U+Q[1]:"";if(q&&(Q.length>1||W.length>4||oe))for(;N.test(W);)W=W.replace(N,"$1"+q+"$2");return W+X},t.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var D=/^\w*$/;t.templateString=function(re,se){var oe={};return re.replace(t.TEMPLATE_STRING_REGEX,function(N,U){var q;return D.test(U)?q=se[U]:(oe[U]=oe[U]||t.nestedProperty(se,U).get,q=oe[U]()),t.isValidTextValue(q)?q:""})};var R={max:10,count:0,name:"hovertemplate"};t.hovertemplateString=function(){return V.apply(R,arguments)};var O={max:10,count:0,name:"texttemplate"};t.texttemplateString=function(){return V.apply(O,arguments)};var F=/^[:|\|]/;function V(re,se,oe){var N=this,U=arguments;se||(se={});var q={};return re.replace(t.TEMPLATE_STRING_REGEX,function(Q,W,X){var ee=W==="xother"||W==="yother",te=W==="_xother"||W==="_yother",ie=W==="_xother_"||W==="_yother_",le=W==="xother_"||W==="yother_",ge=ee||te||le||ie,fe=W;(te||ie)&&(fe=fe.substring(1)),(le||ie)&&(fe=fe.substring(0,fe.length-1));var pe;if(ge){if(pe=se[fe],pe===void 0)return""}else{var ye,Te;for(Te=3;Te<U.length;Te++)if(ye=U[Te],!!ye){if(ye.hasOwnProperty(fe)){pe=ye[fe];break}if(D.test(fe)||(pe=t.nestedProperty(ye,fe).get(),pe=q[fe]||t.nestedProperty(ye,fe).get(),pe&&(q[fe]=pe)),pe!==void 0)break}}if(pe===void 0&&N)return N.count<N.max&&(t.warn("Variable '"+fe+"' in "+N.name+" could not be found!"),pe=Q),N.count===N.max&&t.warn("Too many "+N.name+" warnings - additional warnings will be suppressed"),N.count++,Q;if(X){var _e;if(X[0]===":"&&(_e=oe?oe.numberFormat:t.numberFormat,pe=_e(X.replace(F,""))(pe)),X[0]==="|"){_e=oe?oe.timeFormat:v;var De=t.dateTime2ms(pe);pe=t.formatDate(De,X.replace(F,""),!1,_e)}}else{var Be=fe+"Label";se.hasOwnProperty(Be)&&(pe=se[Be])}return ge&&(pe="("+pe+")",(te||ie)&&(pe=" "+pe),(le||ie)&&(pe=pe+" ")),pe})}var G=48,J=57;t.subplotSort=function(re,se){for(var oe=Math.min(re.length,se.length)+1,N=0,U=0,q=0;q<oe;q++){var Q=re.charCodeAt(q)||0,W=se.charCodeAt(q)||0,X=Q>=G&&Q<=J,ee=W>=G&&W<=J;if(X&&(N=10*N+Q-G),ee&&(U=10*U+W-G),!X||!ee){if(N!==U)return N-U;if(Q!==W)return Q-W}}return U-N};var Z=2e9;t.seedPseudoRandom=function(){Z=2e9},t.pseudoRandom=function(){var re=Z;return Z=(69069*Z+1)%4294967296,Math.abs(Z-re)<429496729?t.pseudoRandom():Z/4294967296},t.fillText=function(re,se,oe){var N=Array.isArray(oe)?function(Q){oe.push(Q)}:function(Q){oe.text=Q},U=t.extractOption(re,se,"htx","hovertext");if(t.isValidTextValue(U))return N(U);var q=t.extractOption(re,se,"tx","text");if(t.isValidTextValue(q))return N(q)},t.isValidTextValue=function(re){return re||re===0},t.formatPercent=function(re,se){se=se||0;for(var oe=(Math.round(100*re*Math.pow(10,se))*Math.pow(.1,se)).toFixed(se)+"%",N=0;N<se;N++)oe.indexOf(".")!==-1&&(oe=oe.replace("0%","%"),oe=oe.replace(".%","%"));return oe},t.isHidden=function(re){var se=window.getComputedStyle(re).display;return!se||se==="none"},t.strTranslate=function(re,se){return re||se?"translate("+re+","+se+")":""},t.strRotate=function(re){return re?"rotate("+re+")":""},t.strScale=function(re){return re!==1?"scale("+re+")":""},t.getTextTransform=function(re){var se=re.noCenter,oe=re.textX,N=re.textY,U=re.targetX,q=re.targetY,Q=re.anchorX||0,W=re.anchorY||0,X=re.rotate,ee=re.scale;return ee?ee>1&&(ee=1):ee=0,t.strTranslate(U-ee*(oe+Q),q-ee*(N+W))+t.strScale(ee)+(X?"rotate("+X+(se?"":" "+oe+" "+N)+")":"")},t.ensureUniformFontSize=function(re,se){var oe=t.extendFlat({},se);return oe.size=Math.max(se.size,re._fullLayout.uniformtext.minsize||0),oe},t.join2=function(re,se,oe){var N=re.length;return N>1?re.slice(0,-1).join(se)+oe+re[N-1]:re.join(se)},t.bigFont=function(re){return Math.round(1.2*re)};var Y=t.getFirefoxVersion(),j=Y!==null&&Y<86;t.getPositionFromD3Event=function(){return j?[w.event.layerX,w.event.layerY]:[w.event.offsetX,w.event.offsetY]}},{"../constants/numerical":479,"./anchor_utils":483,"./angles":484,"./array":485,"./clean_number":486,"./clear_responsive":488,"./coerce":489,"./dates":490,"./dom":491,"./extend":493,"./filter_unique":494,"./filter_visible":495,"./geometry2d":498,"./identity":501,"./increment":502,"./is_plain_object":504,"./keyed_container":505,"./localize":506,"./loggers":507,"./make_trace_groups":508,"./matrix":509,"./mod":510,"./nested_property":511,"./noop":512,"./notifier":513,"./preserve_drawing_buffer":517,"./push_unique":518,"./regex":520,"./relative_attr":521,"./relink_private":522,"./search":523,"./sort_object_keys":526,"./stats":527,"./throttle":530,"./to_log_range":531,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],504:[function(d,ne,ae){ne.exports=function(v){return window&&window.process&&window.process.versions?Object.prototype.toString.call(v)==="[object Object]":Object.prototype.toString.call(v)==="[object Object]"&&Object.getPrototypeOf(v).hasOwnProperty("hasOwnProperty")}},{}],505:[function(d,ne,ae){var w=d("./nested_property"),v=/^\w*$/,M=0,T=1,e=2,a=3,n=4;ne.exports=function(t,f,o,i){o=o||"name",i=i||"value";var g,p,y,c={};f&&f.length?(y=w(t,f),p=y.get()):p=t,f=f||"";var b={};if(p)for(g=0;g<p.length;g++)b[p[g][o]]=g;var l=v.test(i),_={set:function(s,A){var m=A===null?n:M;if(!p){if(!y||m===n)return;p=[],y.set(p)}var h=b[s];if(h===void 0){if(m===n)return;m=m|a,h=p.length,b[s]=h}else A!==(l?p[h][i]:w(p[h],i).get())&&(m=m|e);var x=p[h]=p[h]||{};return x[o]=s,l?x[i]=A:w(x,i).set(A),A!==null&&(m=m&~n),c[h]=c[h]|m,_},get:function(s){if(!!p){var A=b[s];if(A!==void 0)return l?p[A][i]:w(p[A],i).get()}},rename:function(s,A){var m=b[s];return m===void 0||(c[m]=c[m]|T,b[A]=m,delete b[s],p[m][o]=A),_},remove:function(s){var A=b[s];if(A===void 0)return _;var m=p[A];if(Object.keys(m).length>2)return c[A]=c[A]|e,_.set(s,null);if(l){for(g=A;g<p.length;g++)c[g]=c[g]|a;for(g=A;g<p.length;g++)b[p[g][o]]--;p.splice(A,1),delete b[s]}else w(m,i).set(null),c[A]=c[A]|e|n;return _},constructUpdate:function(){for(var s,A,m={},h=Object.keys(c),x=0;x<h.length;x++)A=h[x],s=f+"["+A+"]",p[A]?(c[A]&T&&(m[s+"."+o]=p[A][o]),c[A]&e&&(l?m[s+"."+i]=c[A]&n?null:p[A][i]:m[s+"."+i]=c[A]&n?null:w(p[A],i).get())):m[s]=null;return m}};return _}},{"./nested_property":511}],506:[function(d,ne,ae){var w=d("../registry");ne.exports=function(M,T){for(var e=M._context.locale,a=0;a<2;a++){for(var n=M._context.locales,r=0;r<2;r++){var t=(n[e]||{}).dictionary;if(t){var f=t[T];if(f)return f}n=w.localeRegistry}var o=e.split("-")[0];if(o===e)break;e=o}return T}},{"../registry":638}],507:[function(d,ne,ae){var w=d("../plot_api/plot_config").dfltConfig,v=d("./notifier"),M=ne.exports={};M.log=function(){var T;if(w.logging>1){var e=["LOG:"];for(T=0;T<arguments.length;T++)e.push(arguments[T]);console.trace.apply(console,e)}if(w.notifyOnLogging>1){var a=[];for(T=0;T<arguments.length;T++)a.push(arguments[T]);v(a.join("<br>"),"long")}},M.warn=function(){var T;if(w.logging>0){var e=["WARN:"];for(T=0;T<arguments.length;T++)e.push(arguments[T]);console.trace.apply(console,e)}if(w.notifyOnLogging>0){var a=[];for(T=0;T<arguments.length;T++)a.push(arguments[T]);v(a.join("<br>"),"stick")}},M.error=function(){var T;if(w.logging>0){var e=["ERROR:"];for(T=0;T<arguments.length;T++)e.push(arguments[T]);console.error.apply(console,e)}if(w.notifyOnLogging>0){var a=[];for(T=0;T<arguments.length;T++)a.push(arguments[T]);v(a.join("<br>"),"stick")}}},{"../plot_api/plot_config":541,"./notifier":513}],508:[function(d,ne,ae){var w=d("@plotly/d3");ne.exports=function(M,T,e){var a=M.selectAll("g."+e.replace(/\s/g,".")).data(T,function(r){return r[0].trace.uid});a.exit().remove(),a.enter().append("g").attr("class",e),a.order();var n=M.classed("rangeplot")?"nodeRangePlot3":"node3";return a.each(function(r){r[0][n]=w.select(this)}),a}},{"@plotly/d3":58}],509:[function(d,ne,ae){var w=d("gl-mat4");ae.init2dArray=function(v,M){for(var T=new Array(v),e=0;e<v;e++)T[e]=new Array(M);return T},ae.transposeRagged=function(v){var M=0,T=v.length,e,a;for(e=0;e<T;e++)M=Math.max(M,v[e].length);var n=new Array(M);for(e=0;e<M;e++)for(n[e]=new Array(T),a=0;a<T;a++)n[e][a]=v[a][e];return n},ae.dot=function(v,M){if(!(v.length&&M.length)||v.length!==M.length)return null;var T=v.length,e,a;if(v[0].length)for(e=new Array(T),a=0;a<T;a++)e[a]=ae.dot(v[a],M);else if(M[0].length){var n=ae.transposeRagged(M);for(e=new Array(n.length),a=0;a<n.length;a++)e[a]=ae.dot(v,n[a])}else for(e=0,a=0;a<T;a++)e+=v[a]*M[a];return e},ae.translationMatrix=function(v,M){return[[1,0,v],[0,1,M],[0,0,1]]},ae.rotationMatrix=function(v){var M=v*Math.PI/180;return[[Math.cos(M),-Math.sin(M),0],[Math.sin(M),Math.cos(M),0],[0,0,1]]},ae.rotationXYMatrix=function(v,M,T){return ae.dot(ae.dot(ae.translationMatrix(M,T),ae.rotationMatrix(v)),ae.translationMatrix(-M,-T))},ae.apply3DTransform=function(v){return function(){var M=arguments,T=arguments.length===1?M[0]:[M[0],M[1],M[2]||0];return ae.dot(v,[T[0],T[1],T[2],1]).slice(0,3)}},ae.apply2DTransform=function(v){return function(){var M=arguments;M.length===3&&(M=M[0]);var T=arguments.length===1?M[0]:[M[0],M[1]];return ae.dot(v,[T[0],T[1],1]).slice(0,2)}},ae.apply2DTransform2=function(v){var M=ae.apply2DTransform(v);return function(T){return M(T.slice(0,2)).concat(M(T.slice(2,4)))}},ae.convertCssMatrix=function(v){if(v){var M=v.length;if(M===16)return v;if(M===6)return[v[0],v[1],0,0,v[2],v[3],0,0,0,0,1,0,v[4],v[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},ae.inverseTransformMatrix=function(v){var M=[];return w.invert(M,v),[[M[0],M[1],M[2],M[3]],[M[4],M[5],M[6],M[7]],[M[8],M[9],M[10],M[11]],[M[12],M[13],M[14],M[15]]]}},{"gl-mat4":210}],510:[function(d,ne,ae){function w(M,T){var e=M%T;return e<0?e+T:e}function v(M,T){return Math.abs(M)>T/2?M-Math.round(M/T)*T:M}ne.exports={mod:w,modHalf:v}},{}],511:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("./array").isArrayOrTypedArray;ne.exports=function(i,g){if(w(g))g=String(g);else if(typeof g!="string"||g.substr(g.length-4)==="[-1]")throw"bad property string";for(var p=0,y=g.split("."),c,b,l;p<y.length;){if(c=String(y[p]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),c){if(c[1])y[p]=c[1];else if(p===0)y.splice(0,1);else throw"bad property string";for(b=c[2].substr(1,c[2].length-2).split("]["),l=0;l<b.length;l++)p++,y.splice(p,0,Number(b[l]))}p++}return typeof i!="object"?f(i,g,y):{set:a(i,y,g),get:M(i,y),astr:g,parts:y,obj:i}};function M(o,i){return function(){var g=o,p,y,c,b,l;for(b=0;b<i.length-1;b++){if(p=i[b],p===-1){for(y=!0,c=[],l=0;l<g.length;l++)c[l]=M(g[l],i.slice(b+1))(),c[l]!==c[0]&&(y=!1);return y?c[0]:c}if(typeof p=="number"&&!v(g)||(g=g[p],typeof g!="object"||g===null))return}if(!(typeof g!="object"||g===null)&&(c=g[i[b]],c!==null))return c}}var T=/(^|\.)args\[/;function e(o,i){return o===void 0||o===null&&!i.match(T)}function a(o,i,g){return function(p){var y=o,c="",b=e(p,g),l,_;for(_=0;_<i.length-1;_++){if(l=i[_],typeof l=="number"&&!v(y))throw"array index but container is not an array";if(l===-1){if(b=!r(y,i.slice(_+1),p,g),b)break;return}if(!t(y,l,i[_+1],b))break;if(y=y[l],typeof y!="object"||y===null)throw"container is not an object";c=n(c,l)}if(b){if(_===i.length-1&&(delete y[i[_]],Array.isArray(y)&&+i[_]===y.length-1))for(;y.length&&y[y.length-1]===void 0;)y.pop()}else y[i[_]]=p}}function n(o,i){var g=i;return w(i)?g="["+i+"]":o&&(g="."+i),o+g}function r(o,i,g,p){var y=v(g),c=!0,b=g,l=p.replace("-1",0),_=y?!1:e(g,l),s=i[0],A;for(A=0;A<o.length;A++)l=p.replace("-1",A),y&&(b=g[A%g.length],_=e(b,l)),_&&(c=!1),t(o,A,s,_)&&a(o[A],i,p.replace("-1",A))(b);return c}function t(o,i,g,p){if(o[i]===void 0){if(p)return!1;typeof g=="number"?o[i]=[]:o[i]={}}return!0}function f(o,i,g){return{set:function(){throw"bad container"},get:function(){},astr:i,parts:g,obj:o}}},{"./array":485,"fast-isnumeric":190}],512:[function(d,ne,ae){ne.exports=function(){}},{}],513:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("fast-isnumeric"),M=[];ne.exports=function(T,e){if(M.indexOf(T)!==-1)return;M.push(T);var a=1e3;v(e)?a=e:e==="long"&&(a=3e3);var n=w.select("body").selectAll(".plotly-notifier").data([0]);n.enter().append("div").classed("plotly-notifier",!0);var r=n.selectAll(".notifier-note").data(M);function t(f){f.duration(700).style("opacity",0).each("end",function(o){var i=M.indexOf(o);i!==-1&&M.splice(i,1),w.select(this).remove()})}r.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(f){var o=w.select(this);o.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){o.transition().call(t)});for(var i=o.append("p"),g=f.split(/<br\s*\/?>/g),p=0;p<g.length;p++)p&&i.append("br"),i.append("span").text(g[p]);e==="stick"?o.transition().duration(350).style("opacity",1):o.transition().duration(700).style("opacity",1).transition().delay(a).call(t)})}},{"@plotly/d3":58,"fast-isnumeric":190}],514:[function(d,ne,ae){var w=d("./setcursor"),v="data-savedcursor",M="!!";ne.exports=function(e,a){var n=e.attr(v);if(a){if(!n){for(var r=(e.attr("class")||"").split(" "),t=0;t<r.length;t++){var f=r[t];f.indexOf("cursor-")===0&&e.attr(v,f.substr(7)).classed(f,!1)}e.attr(v)||e.attr(v,M)}w(e,a)}else n&&(e.attr(v,null),n===M?w(e):w(e,n))}},{"./setcursor":524}],515:[function(d,ne,ae){var w=d("./matrix").dot,v=d("../constants/numerical").BADNUM,M=ne.exports={};M.tester=function(e){var a=e.slice(),n=a[0][0],r=n,t=a[0][1],f=t,o;for(a.push(a[0]),o=1;o<a.length;o++)n=Math.min(n,a[o][0]),r=Math.max(r,a[o][0]),t=Math.min(t,a[o][1]),f=Math.max(f,a[o][1]);var i=!1,g;a.length===5&&(a[0][0]===a[1][0]?a[2][0]===a[3][0]&&a[0][1]===a[3][1]&&a[1][1]===a[2][1]&&(i=!0,g=function(l){return l[0]===a[0][0]}):a[0][1]===a[1][1]&&a[2][1]===a[3][1]&&a[0][0]===a[3][0]&&a[1][0]===a[2][0]&&(i=!0,g=function(l){return l[1]===a[0][1]}));function p(l,_){var s=l[0],A=l[1];return!(s===v||s<n||s>r||A===v||A<t||A>f||_&&g(l))}function y(l,_){var s=l[0],A=l[1];if(s===v||s<n||s>r||A===v||A<t||A>f)return!1;var m=a.length,h=a[0][0],x=a[0][1],u=0,L,S,k,P,z;for(L=1;L<m;L++)if(S=h,k=x,h=a[L][0],x=a[L][1],P=Math.min(S,h),!(s<P||s>Math.max(S,h)||A>Math.max(k,x)))if(A<Math.min(k,x))s!==P&&u++;else{if(h===S?z=A:z=k+(s-S)*(x-k)/(h-S),A===z)return!(L===1&&_);A<=z&&s!==P&&u++}return u%2===1}var c=!0,b=a[0];for(o=1;o<a.length;o++)if(b[0]!==a[o][0]||b[1]!==a[o][1]){c=!1;break}return{xmin:n,xmax:r,ymin:t,ymax:f,pts:a,contains:i?p:y,isRect:i,degenerate:c}},M.isSegmentBent=function(e,a,n,r){var t=e[a],f=[e[n][0]-t[0],e[n][1]-t[1]],o=w(f,f),i=Math.sqrt(o),g=[-f[1]/i,f[0]/i],p,y,c;for(p=a+1;p<n;p++)if(y=[e[p][0]-t[0],e[p][1]-t[1]],c=w(y,f),c<0||c>o||Math.abs(w(y,g))>r)return!0;return!1},M.filter=function(e,a){var n=[e[0]],r=0,t=0;function f(i){e.push(i);var g=n.length,p=r;n.splice(t+1);for(var y=p+1;y<e.length;y++)(y===e.length-1||M.isSegmentBent(e,p,y+1,a))&&(n.push(e[y]),n.length<g-2&&(r=y,t=n.length-1),p=y)}if(e.length>1){var o=e.pop();f(o)}return{addPt:f,raw:e,filtered:n}}},{"../constants/numerical":479,"./matrix":509}],516:[function(d,ne,ae){(function(w){(function(){var v=d("./show_no_webgl_msg"),M=d("regl");ne.exports=function(e,a,n){var r=e._fullLayout,t=!0;return r._glcanvas.each(function(f){if(f.regl){f.regl.preloadCachedCode(n);return}if(!(f.pick&&!r._has("parcoords"))){try{f.regl=M({canvas:this,attributes:{antialias:!f.pick,preserveDrawingBuffer:!0},pixelRatio:e._context.plotGlPixelRatio||w.devicePixelRatio,extensions:a||[],cachedCode:n||{}})}catch{t=!1}f.regl||(t=!1),t&&this.addEventListener("webglcontextlost",function(o){e&&e.emit&&e.emit("plotly_webglcontextlost",{event:o,layer:f.key})},!1)}}),t||v({container:r._glcontainer.node()}),t}}).call(this)}).call(this,typeof To<"u"?To:typeof self<"u"?self:typeof window<"u"?window:{})},{"./show_no_webgl_msg":525,regl:283}],517:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("is-mobile");ne.exports=function(e){var a;if(e&&e.hasOwnProperty("userAgent")?a=e.userAgent:a=M(),typeof a!="string")return!0;var n=v({ua:{headers:{"user-agent":a}},tablet:!0,featureDetect:!1});if(!n)for(var r=a.split(" "),t=1;t<r.length;t++){var f=r[t];if(f.indexOf("Safari")!==-1)for(var o=t-1;o>-1;o--){var i=r[o];if(i.substr(0,8)==="Version/"){var g=i.substr(8).split(".")[0];if(w(g)&&(g=+g),g>=13)return!0}}}return n};function M(){var T;return typeof navigator<"u"&&(T=navigator.userAgent),T&&T.headers&&typeof T.headers["user-agent"]=="string"&&(T=T.headers["user-agent"]),T}},{"fast-isnumeric":190,"is-mobile":234}],518:[function(d,ne,ae){ne.exports=function(v,M){if(M instanceof RegExp){for(var T=M.toString(),e=0;e<v.length;e++)if(v[e]instanceof RegExp&&v[e].toString()===T)return v;v.push(M)}else(M||M===0)&&v.indexOf(M)===-1&&v.push(M);return v}},{}],519:[function(d,ne,ae){var w=d("../lib"),v=d("../plot_api/plot_config").dfltConfig;function M(e,a){for(var n=[],r,t=0;t<a.length;t++)r=a[t],r===e?n[t]=r:typeof r=="object"?n[t]=Array.isArray(r)?w.extendDeep([],r):w.extendDeepAll({},r):n[t]=r;return n}var T={};T.add=function(e,a,n,r,t){var f,o;if(e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},o=e.undoQueue.index,e.autoplay){e.undoQueue.inSequence||(e.autoplay=!1);return}!e.undoQueue.sequence||e.undoQueue.beginSequence?(f={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},e.undoQueue.queue.splice(o,e.undoQueue.queue.length-o,f),e.undoQueue.index+=1):f=e.undoQueue.queue[o-1],e.undoQueue.beginSequence=!1,f&&(f.undo.calls.unshift(a),f.undo.args.unshift(n),f.redo.calls.push(r),f.redo.args.push(t)),e.undoQueue.queue.length>v.queueLength&&(e.undoQueue.queue.shift(),e.undoQueue.index--)},T.startSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!0,e.undoQueue.beginSequence=!0},T.stopSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!1,e.undoQueue.beginSequence=!1},T.undo=function(a){var n,r;if(!(a.undoQueue===void 0||isNaN(a.undoQueue.index)||a.undoQueue.index<=0)){for(a.undoQueue.index--,n=a.undoQueue.queue[a.undoQueue.index],a.undoQueue.inSequence=!0,r=0;r<n.undo.calls.length;r++)T.plotDo(a,n.undo.calls[r],n.undo.args[r]);a.undoQueue.inSequence=!1,a.autoplay=!1}},T.redo=function(a){var n,r;if(!(a.undoQueue===void 0||isNaN(a.undoQueue.index)||a.undoQueue.index>=a.undoQueue.queue.length)){for(n=a.undoQueue.queue[a.undoQueue.index],a.undoQueue.inSequence=!0,r=0;r<n.redo.calls.length;r++)T.plotDo(a,n.redo.calls[r],n.redo.args[r]);a.undoQueue.inSequence=!1,a.autoplay=!1,a.undoQueue.index++}},T.plotDo=function(e,a,n){e.autoplay=!0,n=M(e,n),a.apply(null,n)},ne.exports=T},{"../lib":503,"../plot_api/plot_config":541}],520:[function(d,ne,ae){ae.counter=function(w,v,M,T){var e=(v||"")+(M?"":"$"),a=T===!1?"":"^";return w==="xy"?new RegExp(a+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+e):new RegExp(a+w+"([2-9]|[1-9][0-9]+)?"+e)}},{}],521:[function(d,ne,ae){var w=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,v=/^[^\.\[\]]+$/;ne.exports=function(M,T){for(;T;){var e=M.match(w);if(e)M=e[1];else if(M.match(v))M="";else throw new Error("bad relativeAttr call:"+[M,T]);if(T.charAt(0)==="^")T=T.slice(1);else break}return M&&T.charAt(0)!=="["?M+"."+T:M+T}},{}],522:[function(d,ne,ae){var w=d("./array").isArrayOrTypedArray,v=d("./is_plain_object");ne.exports=function M(T,e){for(var a in e){var n=e[a],r=T[a];if(r!==n)if(a.charAt(0)==="_"||typeof n=="function"){if(a in T)continue;T[a]=n}else if(w(n)&&w(r)&&v(n[0])){if(a==="customdata"||a==="ids")continue;for(var t=Math.min(n.length,r.length),f=0;f<t;f++)r[f]!==n[f]&&v(n[f])&&v(r[f])&&M(r[f],n[f])}else v(n)&&v(r)&&(M(r,n),Object.keys(r).length||delete T[a])}}},{"./array":485,"./is_plain_object":504}],523:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("./loggers"),M=d("./identity"),T=d("../constants/numerical").BADNUM,e=1e-9;ae.findBin=function(f,o,i){if(w(o.start))return i?Math.ceil((f-o.start)/o.size-e)-1:Math.floor((f-o.start)/o.size+e);var g=0,p=o.length,y=0,c=p>1?(o[p-1]-o[0])/(p-1):1,b,l;for(c>=0?l=i?a:n:l=i?t:r,f+=c*e*(i?-1:1)*(c>=0?1:-1);g<p&&y++<100;)b=Math.floor((g+p)/2),l(o[b],f)?g=b+1:p=b;return y>90&&v.log("Long binary search..."),g-1};function a(f,o){return f<o}function n(f,o){return f<=o}function r(f,o){return f>o}function t(f,o){return f>=o}ae.sorterAsc=function(f,o){return f-o},ae.sorterDes=function(f,o){return o-f},ae.distinctVals=function(f){var o=f.slice();o.sort(ae.sorterAsc);var i;for(i=o.length-1;i>-1&&o[i]===T;i--);for(var g=o[i]-o[0]||1,p=g/(i||1)/1e4,y=[],c,b=0;b<=i;b++){var l=o[b],_=l-c;c===void 0?(y.push(l),c=l):_>p&&(g=Math.min(g,_),y.push(l),c=l)}return{vals:y,minDiff:g}},ae.roundUp=function(f,o,i){for(var g=0,p=o.length-1,y,c=0,b=i?0:1,l=i?1:0,_=i?Math.ceil:Math.floor;g<p&&c++<100;)y=_((g+p)/2),o[y]<=f?g=y+b:p=y-l;return o[g]},ae.sort=function(f,o){for(var i=0,g=0,p=1;p<f.length;p++){var y=o(f[p],f[p-1]);if(y<0?i=1:y>0&&(g=1),i&&g)return f.sort(o)}return g?f:f.reverse()},ae.findIndexOfMin=function(f,o){o=o||M;for(var i=1/0,g,p=0;p<f.length;p++){var y=o(f[p]);y<i&&(i=y,g=p)}return g}},{"../constants/numerical":479,"./identity":501,"./loggers":507,"fast-isnumeric":190}],524:[function(d,ne,ae){ne.exports=function(v,M){(v.attr("class")||"").split(" ").forEach(function(T){T.indexOf("cursor-")===0&&v.classed(T,!1)}),M&&v.classed("cursor-"+M,!0)}},{}],525:[function(d,ne,ae){var w=d("../components/color"),v=function(){};ne.exports=function(T){for(var e in T)typeof T[e]=="function"&&(T[e]=v);T.destroy=function(){T.container.parentNode.removeChild(T.container)};var a=document.createElement("div");a.className="no-webgl",a.style.cursor="pointer",a.style.fontSize="24px",a.style.color=w.defaults[0],a.style.position="absolute",a.style.left=a.style.top="0px",a.style.width=a.style.height="100%",a.style["background-color"]=w.lightLine,a.style["z-index"]=30;var n=document.createElement("p");return n.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",n.style.position="relative",n.style.top="50%",n.style.left="50%",n.style.height="30%",n.style.width="50%",n.style.margin="-15% 0 0 -25%",a.appendChild(n),T.container.appendChild(a),T.container.style.background="#FFFFFF",T.container.onclick=function(){window.open("https://get.webgl.org")},!1}},{"../components/color":366}],526:[function(d,ne,ae){ne.exports=function(v){return Object.keys(v).sort()}},{}],527:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("./array").isArrayOrTypedArray;ae.aggNums=function(M,T,e,a){var n,r;if((!a||a>e.length)&&(a=e.length),w(T)||(T=!1),v(e[0])){for(r=new Array(a),n=0;n<a;n++)r[n]=ae.aggNums(M,T,e[n]);e=r}for(n=0;n<a;n++)w(T)?w(e[n])&&(T=M(+T,+e[n])):T=e[n];return T},ae.len=function(M){return ae.aggNums(function(T){return T+1},0,M)},ae.mean=function(M,T){return T||(T=ae.len(M)),ae.aggNums(function(e,a){return e+a},0,M)/T},ae.midRange=function(M){if(!(M===void 0||M.length===0))return(ae.aggNums(Math.max,null,M)+ae.aggNums(Math.min,null,M))/2},ae.variance=function(M,T,e){return T||(T=ae.len(M)),w(e)||(e=ae.mean(M,T)),ae.aggNums(function(a,n){return a+Math.pow(n-e,2)},0,M)/T},ae.stdev=function(M,T,e){return Math.sqrt(ae.variance(M,T,e))},ae.median=function(M){var T=M.slice().sort();return ae.interp(T,.5)},ae.interp=function(M,T){if(!w(T))throw"n should be a finite number";if(T=T*M.length-.5,T<0)return M[0];if(T>M.length-1)return M[M.length-1];var e=T%1;return e*M[Math.ceil(T)]+(1-e)*M[Math.floor(T)]}},{"./array":485,"fast-isnumeric":190}],528:[function(d,ne,ae){var w=d("color-normalize");function v(M){return M?w(M):[0,0,0,1]}ne.exports=v},{"color-normalize":89}],529:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../lib"),M=v.strTranslate,T=d("../constants/xmlns_namespaces"),e=d("../constants/alignment").LINE_SPACING,a=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;ae.convertToTspans=function(F,V,G){var J=F.text(),Z=!F.attr("data-notex")&&V&&V._context.typesetMath&&typeof MathJax<"u"&&J.match(a),Y=w.select(F.node().parentNode);if(Y.empty())return;var j=F.attr("class")?F.attr("class").split(" ")[0]:"text";j+="-math",Y.selectAll("svg."+j).remove(),Y.selectAll("g."+j+"-group").remove(),F.style("display",null).attr({"data-unformatted":J,"data-math":"N"});function re(){Y.empty()||(j=F.attr("class")+"-math",Y.select("svg."+j).remove()),F.text("").style("white-space","pre");var se=I(F.node(),J);se&&F.style("pointer-events","all"),ae.positionText(F),G&&G.call(F)}return Z?(V&&V._promises||[]).push(new Promise(function(se){F.style("display","none");var oe=parseInt(F.node().style.fontSize,10),N={fontSize:oe};o(Z[2],N,function(U,q,Q){Y.selectAll("svg."+j).remove(),Y.selectAll("g."+j+"-group").remove();var W=U&&U.select("svg");if(!W||!W.node()){re(),se();return}var X=Y.append("g").classed(j+"-group",!0).attr({"pointer-events":"none","data-unformatted":J,"data-math":"Y"});X.node().appendChild(W.node()),q&&q.node()&&W.node().insertBefore(q.node().cloneNode(!0),W.node().firstChild);var ee=Q.width,te=Q.height;W.attr({class:j,height:te,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var ie=F.node().style.fill||"black",le=W.select("g");le.attr({fill:ie,stroke:ie});var ge=le.node().getBoundingClientRect(),fe=ge.width,pe=ge.height;(fe>ee||pe>te)&&(W.style("overflow","hidden"),ge=W.node().getBoundingClientRect(),fe=ge.width,pe=ge.height);var ye=+F.attr("x"),Te=+F.attr("y"),_e=oe||F.node().getBoundingClientRect().height,De=-_e/4;if(j[0]==="y")X.attr({transform:"rotate("+[-90,ye,Te]+")"+M(-fe/2,De-pe/2)});else if(j[0]==="l")Te=De-pe/2;else if(j[0]==="a"&&j.indexOf("atitle")!==0)ye=0,Te=De;else{var Be=F.attr("text-anchor");ye=ye-fe*(Be==="middle"?.5:Be==="end"?1:0),Te=Te+De-pe/2}W.attr({x:ye,y:Te}),G&&G.call(F,X),se(X)})})):re(),F};var n=/(<|&lt;|&#60;)/g,r=/(>|&gt;|&#62;)/g;function t(F){return F.replace(n,"\\lt ").replace(r,"\\gt ")}var f=[["$","$"],["\\(","\\)"]];function o(F,V,G){var J=parseInt((MathJax.version||"").split(".")[0]);if(J!==2&&J!==3){v.warn("No MathJax version:",MathJax.version);return}var Z,Y,j,re,se=function(){return Y=v.extendDeepAll({},MathJax.Hub.config),j=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:f},displayAlign:"left"})},oe=function(){Y=v.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=f},N=function(){if(Z=MathJax.Hub.config.menuSettings.renderer,Z!=="SVG")return MathJax.Hub.setRenderer("SVG")},U=function(){Z=MathJax.config.startup.output,Z!=="svg"&&(MathJax.config.startup.output="svg")},q=function(){var ie="math-output-"+v.randstr({},64);re=w.select("body").append("div").attr({id:ie}).style({visibility:"hidden",position:"absolute","font-size":V.fontSize+"px"}).text(t(F));var le=re.node();return J===2?MathJax.Hub.Typeset(le):MathJax.typeset([le])},Q=function(){var ie=re.select(J===2?".MathJax_SVG":".MathJax"),le=!ie.empty()&&re.select("svg").node();if(!le)v.log("There was an error in the tex syntax.",F),G();else{var ge=le.getBoundingClientRect(),fe;J===2?fe=w.select("body").select("#MathJax_SVG_glyphs"):fe=ie.select("defs"),G(ie,fe,ge)}re.remove()},W=function(){if(Z!=="SVG")return MathJax.Hub.setRenderer(Z)},X=function(){Z!=="svg"&&(MathJax.config.startup.output=Z)},ee=function(){return j!==void 0&&(MathJax.Hub.processSectionDelay=j),MathJax.Hub.Config(Y)},te=function(){MathJax.config=Y};J===2?MathJax.Hub.Queue(se,N,q,Q,W,ee):J===3&&(oe(),U(),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){q(),Q(),X(),te()}))}var i={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},g={sub:"0.3em",sup:"-0.6em"},p={sub:"-0.21em",sup:"0.42em"},y="\u200B",c=["http:","https:","mailto:","",void 0,":"],b=ae.NEWLINES=/(\r\n?|\n)/g,l=/(<[^<>]*>)/,_=/<(\/?)([^ >]*)(\s+(.*))?>/i,s=/<br(\s+.*)?>/i;ae.BR_TAG_ALL=/<br(\s+.*)?>/gi;var A=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,m=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,h=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,x=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function u(F,V){if(!F)return null;var G=F.match(V),J=G&&(G[3]||G[4]);return J&&P(J)}var L=/(^|;)\s*color:/;ae.plainText=function(F,V){V=V||{};for(var G=V.len!==void 0&&V.len!==-1?V.len:1/0,J=V.allowedTags!==void 0?V.allowedTags:["br"],Z="...",Y=Z.length,j=F.split(l),re=[],se="",oe=0,N=0;N<j.length;N++){var U=j[N],q=U.match(_),Q=q&&q[2].toLowerCase();if(Q)J.indexOf(Q)!==-1&&(re.push(U),se=Q);else{var W=U.length;if(oe+W<G)re.push(U),oe+=W;else if(oe<G){var X=G-oe;se&&(se!=="br"||X<=Y||W<=Y)&&re.pop(),G>Y?re.push(U.substr(0,X-Y)+Z):re.push(U.substr(0,X));break}se=""}}return re.join("")};var S={mu:"\u03BC",amp:"&",lt:"<",gt:">",nbsp:"\xA0",times:"\xD7",plusmn:"\xB1",deg:"\xB0"},k=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function P(F){return F.replace(k,function(V,G){var J;return G.charAt(0)==="#"?J=z(G.charAt(1)==="x"?parseInt(G.substr(2),16):parseInt(G.substr(1),10)):J=S[G],J||V})}ae.convertEntities=P;function z(F){if(!(F>1114111)){var V=String.fromCodePoint;if(V)return V(F);var G=String.fromCharCode;return F<=65535?G(F):G((F>>10)+55232,F%1024+56320)}}function I(F,V){V=V.replace(b," ");var G=!1,J=[],Z,Y=-1;function j(){Y++;var pe=document.createElementNS(T.svg,"tspan");w.select(pe).attr({class:"line",dy:Y*e+"em"}),F.appendChild(pe),Z=pe;var ye=J;if(J=[{node:pe}],ye.length>1)for(var Te=1;Te<ye.length;Te++)re(ye[Te])}function re(pe){var ye=pe.type,Te={},_e;if(ye==="a"){_e="a";var De=pe.target,Be=pe.href,Ue=pe.popup;Be&&(Te={"xlink:xlink:show":De==="_blank"||De.charAt(0)!=="_"?"new":"replace",target:De,"xlink:xlink:href":Be},Ue&&(Te.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+Ue+'");return false;'))}else _e="tspan";pe.style&&(Te.style=pe.style);var xe=document.createElementNS(T.svg,_e);if(ye==="sup"||ye==="sub"){se(Z,y),Z.appendChild(xe);var Pe=document.createElementNS(T.svg,"tspan");se(Pe,y),w.select(Pe).attr("dy",p[ye]),Te.dy=g[ye],Z.appendChild(xe),Z.appendChild(Pe)}else Z.appendChild(xe);w.select(xe).attr(Te),Z=pe.node=xe,J.push(pe)}function se(pe,ye){pe.appendChild(document.createTextNode(ye))}function oe(pe){if(J.length===1){v.log("Ignoring unexpected end tag </"+pe+">.",V);return}var ye=J.pop();pe!==ye.type&&v.log("Start tag <"+ye.type+"> doesnt match end tag <"+pe+">. Pretending it did match.",V),Z=J[J.length-1].node}var N=s.test(V);N?j():(Z=F,J=[{node:F}]);for(var U=V.split(l),q=0;q<U.length;q++){var Q=U[q],W=Q.match(_),X=W&&W[2].toLowerCase(),ee=i[X];if(X==="br")j();else if(ee===void 0)se(Z,P(Q));else if(W[1])oe(X);else{var te=W[4],ie={type:X},le=u(te,A);if(le?(le=le.replace(L,"$1 fill:"),ee&&(le+=";"+ee)):ee&&(le=ee),le&&(ie.style=le),X==="a"){G=!0;var ge=u(te,m);if(ge){var fe=D(ge);fe&&(ie.href=fe,ie.target=u(te,h)||"_blank",ie.popup=u(te,x))}}re(ie)}}return G}function D(F){var V=encodeURI(decodeURI(F)),G=document.createElement("a"),J=document.createElement("a");G.href=F,J.href=V;var Z=G.protocol,Y=J.protocol;return c.indexOf(Z)!==-1&&c.indexOf(Y)!==-1?V:""}ae.sanitizeHTML=function(V){V=V.replace(b," ");for(var G=document.createElement("p"),J=G,Z=[],Y=V.split(l),j=0;j<Y.length;j++){var re=Y[j],se=re.match(_),oe=se&&se[2].toLowerCase();if(oe in i)if(se[1])Z.length&&(J=Z.pop());else{var N=se[4],U=u(N,A),q=U?{style:U}:{};if(oe==="a"){var Q=u(N,m);if(Q){var W=D(Q);if(W){q.href=W;var X=u(N,h);X&&(q.target=X)}}}var ee=document.createElement(oe);J.appendChild(ee),w.select(ee).attr(q),J=ee,Z.push(ee)}else J.appendChild(document.createTextNode(P(re)))}var te="innerHTML";return G[te]},ae.lineCount=function(V){return V.selectAll("tspan.line").size()||1},ae.positionText=function(V,G,J){return V.each(function(){var Z=w.select(this);function Y(se,oe){return oe===void 0?(oe=Z.attr(se),oe===null&&(Z.attr(se,0),oe=0)):Z.attr(se,oe),oe}var j=Y("x",G),re=Y("y",J);this.nodeName==="text"&&Z.selectAll("tspan.line").attr({x:j,y:re})})};function R(F,V,G){var J=G.horizontalAlign,Z=G.verticalAlign||"top",Y=F.node().getBoundingClientRect(),j=V.node().getBoundingClientRect(),re,se,oe;return Z==="bottom"?se=function(){return Y.bottom-re.height}:Z==="middle"?se=function(){return Y.top+(Y.height-re.height)/2}:se=function(){return Y.top},J==="right"?oe=function(){return Y.right-re.width}:J==="center"?oe=function(){return Y.left+(Y.width-re.width)/2}:oe=function(){return Y.left},function(){re=this.node().getBoundingClientRect();var N=oe()-j.left,U=se()-j.top,q=G.gd||{};if(G.gd){q._fullLayout._calcInverseTransform(q);var Q=v.apply3DTransform(q._fullLayout._invTransform)(N,U);N=Q[0],U=Q[1]}return this.style({top:U+"px",left:N+"px","z-index":1e3}),this}}var O="1px ";ae.makeTextShadow=function(F){var V=O,G=O,J=O;return V+G+J+F+", -"+V+"-"+G+J+F+", "+V+"-"+G+J+F+", -"+V+G+J+F},ae.makeEditable=function(F,V){var G=V.gd,J=V.delegate,Z=w.dispatch("edit","input","cancel"),Y=J||F;if(F.style({"pointer-events":J?"none":"all"}),F.size()!==1)throw new Error("boo");function j(){se(),F.style({opacity:0});var oe=Y.attr("class"),N;oe?N="."+oe.split(" ")[0]+"-math-group":N="[class*=-math-group]",N&&w.select(F.node().parentNode).select(N).style({opacity:0})}function re(oe){var N=oe.node(),U=document.createRange();U.selectNodeContents(N);var q=window.getSelection();q.removeAllRanges(),q.addRange(U),N.focus()}function se(){var oe=w.select(G),N=oe.select(".svg-container"),U=N.append("div"),q=F.node().style,Q=parseFloat(q.fontSize||12),W=V.text;W===void 0&&(W=F.attr("data-unformatted")),U.classed("plugin-editable editable",!0).style({position:"absolute","font-family":q.fontFamily||"Arial","font-size":Q,color:V.fill||q.fill||"black",opacity:1,"background-color":V.background||"transparent",outline:"#ffffff33 1px solid",margin:[-Q/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(W).call(R(F,N,V)).on("blur",function(){G._editing=!1,F.text(this.textContent).style({opacity:1});var X=w.select(this).attr("class"),ee;X?ee="."+X.split(" ")[0]+"-math-group":ee="[class*=-math-group]",ee&&w.select(F.node().parentNode).select(ee).style({opacity:0});var te=this.textContent;w.select(this).transition().duration(0).remove(),w.select(document).on("mouseup",null),Z.edit.call(F,te)}).on("focus",function(){var X=this;G._editing=!0,w.select(document).on("mouseup",function(){if(w.event.target===X)return!1;document.activeElement===U.node()&&U.node().blur()})}).on("keyup",function(){w.event.which===27?(G._editing=!1,F.style({opacity:1}),w.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),Z.cancel.call(F,this.textContent)):(Z.input.call(F,this.textContent),w.select(this).call(R(F,N,V)))}).on("keydown",function(){w.event.which===13&&this.blur()}).call(re)}return V.immediate?j():Y.on("click",j),w.rebind(F,Z,"on")}},{"../constants/alignment":471,"../constants/xmlns_namespaces":480,"../lib":503,"@plotly/d3":58}],530:[function(d,ne,ae){var w={};ae.throttle=function(T,e,a){var n=w[T],r=Date.now();if(!n){for(var t in w)w[t].ts<r-6e4&&delete w[t];n=w[T]={ts:0,timer:null}}v(n);function f(){a(),n.ts=Date.now(),n.onDone&&(n.onDone(),n.onDone=null)}if(r>n.ts+e){f();return}n.timer=setTimeout(function(){f(),n.timer=null},e)},ae.done=function(M){var T=w[M];return!T||!T.timer?Promise.resolve():new Promise(function(e){var a=T.onDone;T.onDone=function(){a&&a(),e(),T.onDone=null}})},ae.clear=function(M){if(M)v(w[M]),delete w[M];else for(var T in w)ae.clear(T)};function v(M){M&&M.timer!==null&&(clearTimeout(M.timer),M.timer=null)}},{}],531:[function(d,ne,ae){var w=d("fast-isnumeric");ne.exports=function(M,T){if(M>0)return Math.log(M)/Math.LN10;var e=Math.log(Math.min(T[0],T[1]))/Math.LN10;return w(e)||(e=Math.log(Math.max(T[0],T[1]))/Math.LN10-6),e}},{"fast-isnumeric":190}],532:[function(d,ne,ae){var w=ne.exports={},v=d("../plots/geo/constants").locationmodeToLayer,M=d("topojson-client").feature;w.getTopojsonName=function(T){return[T.scope.replace(/ /g,"-"),"_",T.resolution.toString(),"m"].join("")},w.getTopojsonPath=function(T,e){return T+e+".json"},w.getTopojsonFeatures=function(T,e){var a=v[T.locationmode],n=e.objects[a];return M(e,n).features}},{"../plots/geo/constants":587,"topojson-client":315}],533:[function(d,ne,ae){ne.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],534:[function(d,ne,ae){ne.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],535:[function(d,ne,ae){var w=d("../registry");ne.exports=function(M){for(var T=w.layoutArrayContainers,e=w.layoutArrayRegexes,a=M.split("[")[0],n,r,t=0;t<e.length;t++)if(r=M.match(e[t]),r&&r.index===0){n=r[0];break}if(n||(n=T[T.indexOf(a)]),!n)return!1;var f=M.substr(n.length);return f?(r=f.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),r?{array:n,index:Number(r[1]),property:r[3]||""}:!1):{array:n,index:"",property:""}}},{"../registry":638}],536:[function(d,ne,ae){var w=d("../lib"),v=w.extendFlat,M=w.isPlainObject,T={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},e={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},a=T.flags.slice().concat(["fullReplot"]),n=e.flags.slice().concat("layoutReplot");ne.exports={traces:T,layout:e,traceFlags:function(){return r(a)},layoutFlags:function(){return r(n)},update:function(o,i){var g=i.editType;if(g&&g!=="none")for(var p=g.split("+"),y=0;y<p.length;y++)o[p[y]]=!0},overrideAll:t};function r(o){for(var i={},g=0;g<o.length;g++)i[o[g]]=!1;return i}function t(o,i,g){var p=v({},o);for(var y in p){var c=p[y];M(c)&&(p[y]=f(c,i,g,y))}return g==="from-root"&&(p.editType=i),p}function f(o,i,g,p){if(o.valType){var y=v({},o);if(y.editType=i,Array.isArray(o.items)){y.items=new Array(o.items.length);for(var c=0;c<o.items.length;c++)y.items[c]=f(o.items[c],i)}return y}else return t(o,i,p.charAt(0)==="_"?"nested":"from-root")}},{"../lib":503}],537:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("gl-mat4/fromQuat"),M=d("../registry"),T=d("../lib"),e=d("../plots/plots"),a=d("../plots/cartesian/axis_ids"),n=d("../components/color"),r=a.cleanId,t=a.getFromTrace,f=M.traceIs;ae.clearPromiseQueue=function(s){Array.isArray(s._promises)&&s._promises.length>0&&T.log("Clearing previous rejected promises from queue."),s._promises=[]},ae.cleanLayout=function(s){var A,m;s||(s={}),s.xaxis1&&(s.xaxis||(s.xaxis=s.xaxis1),delete s.xaxis1),s.yaxis1&&(s.yaxis||(s.yaxis=s.yaxis1),delete s.yaxis1),s.scene1&&(s.scene||(s.scene=s.scene1),delete s.scene1);var h=(e.subplotsRegistry.cartesian||{}).attrRegex,x=(e.subplotsRegistry.polar||{}).attrRegex,u=(e.subplotsRegistry.ternary||{}).attrRegex,L=(e.subplotsRegistry.gl3d||{}).attrRegex,S=Object.keys(s);for(A=0;A<S.length;A++){var k=S[A];if(h&&h.test(k)){var P=s[k];P.anchor&&P.anchor!=="free"&&(P.anchor=r(P.anchor)),P.overlaying&&(P.overlaying=r(P.overlaying)),P.type||(P.isdate?P.type="date":P.islog?P.type="log":P.isdate===!1&&P.islog===!1&&(P.type="linear")),(P.autorange==="withzero"||P.autorange==="tozero")&&(P.autorange=!0,P.rangemode="tozero"),delete P.islog,delete P.isdate,delete P.categories,c(P,"domain")&&delete P.domain,P.autotick!==void 0&&(P.tickmode===void 0&&(P.tickmode=P.autotick?"auto":"linear"),delete P.autotick),i(P)}else if(x&&x.test(k)){var z=s[k];i(z.radialaxis)}else if(u&&u.test(k)){var I=s[k];i(I.aaxis),i(I.baxis),i(I.caxis)}else if(L&&L.test(k)){var D=s[k],R=D.cameraposition;if(Array.isArray(R)&&R[0].length===4){var O=R[0],F=R[1],V=R[2],G=v([],O),J=[];for(m=0;m<3;++m)J[m]=F[m]+V*G[2+4*m];D.camera={eye:{x:J[0],y:J[1],z:J[2]},center:{x:F[0],y:F[1],z:F[2]},up:{x:0,y:0,z:1}},delete D.cameraposition}i(D.xaxis),i(D.yaxis),i(D.zaxis)}}var Z=Array.isArray(s.annotations)?s.annotations.length:0;for(A=0;A<Z;A++){var Y=s.annotations[A];!T.isPlainObject(Y)||(Y.ref&&(Y.ref==="paper"?(Y.xref="paper",Y.yref="paper"):Y.ref==="data"&&(Y.xref="x",Y.yref="y"),delete Y.ref),o(Y,"xref"),o(Y,"yref"))}var j=Array.isArray(s.shapes)?s.shapes.length:0;for(A=0;A<j;A++){var re=s.shapes[A];!T.isPlainObject(re)||(o(re,"xref"),o(re,"yref"))}var se=Array.isArray(s.images)?s.images.length:0;for(A=0;A<se;A++){var oe=s.images[A];!T.isPlainObject(oe)||(o(oe,"xref"),o(oe,"yref"))}var N=s.legend;return N&&(N.x>3?(N.x=1.02,N.xanchor="left"):N.x<-2&&(N.x=-.02,N.xanchor="right"),N.y>3?(N.y=1.02,N.yanchor="bottom"):N.y<-2&&(N.y=-.02,N.yanchor="top")),i(s),s.dragmode==="rotate"&&(s.dragmode="orbit"),n.clean(s),s.template&&s.template.layout&&ae.cleanLayout(s.template.layout),s};function o(s,A){var m=s[A],h=A.charAt(0);m&&m!=="paper"&&(s[A]=r(m,h,!0))}function i(s){s&&((typeof s.title=="string"||typeof s.title=="number")&&(s.title={text:s.title}),A("titlefont","font"),A("titleposition","position"),A("titleside","side"),A("titleoffset","offset"));function A(m,h){var x=s[m],u=s.title&&s.title[h];x&&!u&&(s.title||(s.title={}),s.title[h]=s[m],delete s[m])}}ae.cleanData=function(s){for(var A=0;A<s.length;A++){var m=s[A],h;if(m.type==="histogramy"&&"xbins"in m&&!("ybins"in m)&&(m.ybins=m.xbins,delete m.xbins),m.error_y&&"opacity"in m.error_y){var x=n.defaults,u=m.error_y.color||(f(m,"bar")?n.defaultLine:x[A%x.length]);m.error_y.color=n.addOpacity(n.rgb(u),n.opacity(u)*m.error_y.opacity),delete m.error_y.opacity}if("bardir"in m&&(m.bardir==="h"&&(f(m,"bar")||m.type.substr(0,9)==="histogram")&&(m.orientation="h",ae.swapXYData(m)),delete m.bardir),m.type==="histogramy"&&ae.swapXYData(m),(m.type==="histogramx"||m.type==="histogramy")&&(m.type="histogram"),"scl"in m&&!("colorscale"in m)&&(m.colorscale=m.scl,delete m.scl),"reversescl"in m&&!("reversescale"in m)&&(m.reversescale=m.reversescl,delete m.reversescl),m.xaxis&&(m.xaxis=r(m.xaxis,"x")),m.yaxis&&(m.yaxis=r(m.yaxis,"y")),f(m,"gl3d")&&m.scene&&(m.scene=e.subplotsRegistry.gl3d.cleanId(m.scene)),!f(m,"pie-like")&&!f(m,"bar-like"))if(Array.isArray(m.textposition))for(h=0;h<m.textposition.length;h++)m.textposition[h]=y(m.textposition[h]);else m.textposition&&(m.textposition=y(m.textposition));var L=M.getModule(m);if(L&&L.colorbar){var S=L.colorbar.container,k=S?m[S]:m;k&&k.colorscale&&(k.colorscale==="YIGnBu"&&(k.colorscale="YlGnBu"),k.colorscale==="YIOrRd"&&(k.colorscale="YlOrRd"))}if(m.type==="surface"&&T.isPlainObject(m.contours)){var P=["x","y","z"];for(h=0;h<P.length;h++){var z=m.contours[P[h]];!T.isPlainObject(z)||(z.highlightColor&&(z.highlightcolor=z.highlightColor,delete z.highlightColor),z.highlightWidth&&(z.highlightwidth=z.highlightWidth,delete z.highlightWidth))}}if(m.type==="candlestick"||m.type==="ohlc"){var I=(m.increasing||{}).showlegend!==!1,D=(m.decreasing||{}).showlegend!==!1,R=g(m.increasing),O=g(m.decreasing);if(R!==!1&&O!==!1){var F=p(R,O,I,D);F&&(m.name=F)}else(R||O)&&!m.name&&(m.name=R||O)}if(Array.isArray(m.transforms)){var V=m.transforms;for(h=0;h<V.length;h++){var G=V[h];if(!!T.isPlainObject(G))switch(G.type){case"filter":G.filtersrc&&(G.target=G.filtersrc,delete G.filtersrc),G.calendar&&(G.valuecalendar||(G.valuecalendar=G.calendar),delete G.calendar);break;case"groupby":if(G.styles=G.styles||G.style,G.styles&&!Array.isArray(G.styles)){var J=G.styles,Z=Object.keys(J);G.styles=[];for(var Y=0;Y<Z.length;Y++)G.styles.push({target:Z[Y],value:J[Z[Y]]})}break}}}c(m,"line")&&delete m.line,"marker"in m&&(c(m.marker,"line")&&delete m.marker.line,c(m,"marker")&&delete m.marker),n.clean(m),m.autobinx&&(delete m.autobinx,delete m.xbins),m.autobiny&&(delete m.autobiny,delete m.ybins),i(m),m.colorbar&&i(m.colorbar),m.marker&&m.marker.colorbar&&i(m.marker.colorbar),m.line&&m.line.colorbar&&i(m.line.colorbar),m.aaxis&&i(m.aaxis),m.baxis&&i(m.baxis)}};function g(s){if(!T.isPlainObject(s))return!1;var A=s.name;return delete s.name,delete s.showlegend,(typeof A=="string"||typeof A=="number")&&String(A)}function p(s,A,m,h){if(m&&!h)return s;if(h&&!m||!s.trim())return A;if(!A.trim())return s;var x=Math.min(s.length,A.length),u;for(u=0;u<x&&s.charAt(u)===A.charAt(u);u++);var L=s.substr(0,u);return L.trim()}function y(s){var A="middle",m="center";return typeof s=="string"&&(s.indexOf("top")!==-1?A="top":s.indexOf("bottom")!==-1&&(A="bottom"),s.indexOf("left")!==-1?m="left":s.indexOf("right")!==-1&&(m="right")),A+" "+m}function c(s,A){return A in s&&typeof s[A]=="object"&&Object.keys(s[A]).length===0}ae.swapXYData=function(s){var A;if(T.swapAttrs(s,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(s.z)&&Array.isArray(s.z[0])&&(s.transpose?delete s.transpose:s.transpose=!0),s.error_x&&s.error_y){var m=s.error_y,h="copy_ystyle"in m?m.copy_ystyle:!(m.color||m.thickness||m.width);T.swapAttrs(s,["error_?.copy_ystyle"]),h&&T.swapAttrs(s,["error_?.color","error_?.thickness","error_?.width"])}if(typeof s.hoverinfo=="string"){var x=s.hoverinfo.split("+");for(A=0;A<x.length;A++)x[A]==="x"?x[A]="y":x[A]==="y"&&(x[A]="x");s.hoverinfo=x.join("+")}},ae.coerceTraceIndices=function(s,A){if(w(A))return[A];if(!Array.isArray(A)||!A.length)return s.data.map(function(x,u){return u});if(Array.isArray(A)){for(var m=[],h=0;h<A.length;h++)T.isIndex(A[h],s.data.length)?m.push(A[h]):T.warn("trace index (",A[h],") is not a number or is out of bounds");return m}return A},ae.manageArrayContainers=function(s,A,m){var h=s.obj,x=s.parts,u=x.length,L=x[u-1],S=w(L);if(S&&A===null){var k=x.slice(0,u-1).join("."),P=T.nestedProperty(h,k).get();P.splice(L,1)}else S&&s.get()===void 0&&s.get()===void 0&&(m[s.astr]=null),s.set(A)};var b=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function l(s){var A=s.search(b);if(A>0)return s.substr(0,A)}ae.hasParent=function(s,A){for(var m=l(A);m;){if(m in s)return!0;m=l(m)}return!1};var _=["x","y","z"];ae.clearAxisTypes=function(s,A,m){for(var h=0;h<A.length;h++)for(var x=s._fullData[h],u=0;u<3;u++){var L=t(s,x,_[u]);if(L&&L.type!=="log"){var S=L._name,k=L._id.substr(1);if(k.substr(0,5)==="scene"){if(m[k]!==void 0)continue;S=k+"."+S}var P=S+".type";m[S]===void 0&&m[P]===void 0&&T.nestedProperty(s.layout,P).set(null)}}}},{"../components/color":366,"../lib":503,"../plots/cartesian/axis_ids":558,"../plots/plots":619,"../registry":638,"fast-isnumeric":190,"gl-mat4/fromQuat":200}],538:[function(d,ne,ae){var w=d("./plot_api");ae._doPlot=w._doPlot,ae.newPlot=w.newPlot,ae.restyle=w.restyle,ae.relayout=w.relayout,ae.redraw=w.redraw,ae.update=w.update,ae._guiRestyle=w._guiRestyle,ae._guiRelayout=w._guiRelayout,ae._guiUpdate=w._guiUpdate,ae._storeDirectGUIEdit=w._storeDirectGUIEdit,ae.react=w.react,ae.extendTraces=w.extendTraces,ae.prependTraces=w.prependTraces,ae.addTraces=w.addTraces,ae.deleteTraces=w.deleteTraces,ae.moveTraces=w.moveTraces,ae.purge=w.purge,ae.addFrames=w.addFrames,ae.deleteFrames=w.deleteFrames,ae.animate=w.animate,ae.setPlotConfig=w.setPlotConfig,ae.toImage=d("./to_image"),ae.validate=d("./validate"),ae.downloadImage=d("../snapshot/download");var v=d("./template_api");ae.makeTemplate=v.makeTemplate,ae.validateTemplate=v.validateTemplate},{"../snapshot/download":640,"./plot_api":540,"./template_api":545,"./to_image":546,"./validate":547}],539:[function(d,ne,ae){var w=d("../lib/is_plain_object"),v=d("../lib/noop"),M=d("../lib/loggers"),T=d("../lib/search").sorterAsc,e=d("../registry");ae.containerArrayMatch=d("./container_array_match");var a=ae.isAddVal=function(t){return t==="add"||w(t)},n=ae.isRemoveVal=function(t){return t===null||t==="remove"};ae.applyContainerArrayChanges=function(t,f,o,i,g){var p=f.astr,y=e.getComponentMethod(p,"supplyLayoutDefaults"),c=e.getComponentMethod(p,"draw"),b=e.getComponentMethod(p,"drawOne"),l=i.replot||i.recalc||y===v||c===v,_=t.layout,s=t._fullLayout;if(o[""]){Object.keys(o).length>1&&M.warn("Full array edits are incompatible with other edits",p);var A=o[""][""];if(n(A))f.set(null);else if(Array.isArray(A))f.set(A);else return M.warn("Unrecognized full array edit value",p,A),!0;return l?!1:(y(_,s),c(t),!0)}var m=Object.keys(o).map(Number).sort(T),h=f.get(),x=h||[],u=g(s,p).get(),L=[],S=-1,k=x.length,P,z,I,D,R,O,F,V;for(P=0;P<m.length;P++){if(I=m[P],D=o[I],R=Object.keys(D),O=D[""],F=a(O),I<0||I>x.length-(F?0:1)){M.warn("index out of range",p,I);continue}if(O!==void 0)R.length>1&&M.warn("Insertion & removal are incompatible with edits to the same index.",p,I),n(O)?L.push(I):F?(O==="add"&&(O={}),x.splice(I,0,O),u&&u.splice(I,0,{})):M.warn("Unrecognized full object edit value",p,I,O),S===-1&&(S=I);else for(z=0;z<R.length;z++)V=p+"["+I+"].",g(x[I],R[z],V).set(D[R[z]])}for(P=L.length-1;P>=0;P--)x.splice(L[P],1),u&&u.splice(L[P],1);if(x.length?h||f.set(x):f.set(null),l)return!1;if(y(_,s),b!==v){var G;if(S===-1)G=m;else{for(k=Math.max(x.length,k),G=[],P=0;P<m.length&&(I=m[P],!(I>=S));P++)G.push(I);for(P=S;P<k;P++)G.push(P)}for(P=0;P<G.length;P++)b(t,G[P])}else c(t);return!0}},{"../lib/is_plain_object":504,"../lib/loggers":507,"../lib/noop":512,"../lib/search":523,"../registry":638,"./container_array_match":535}],540:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("fast-isnumeric"),M=d("has-hover"),T=d("../lib"),e=T.nestedProperty,a=d("../lib/events"),n=d("../lib/queue"),r=d("../registry"),t=d("./plot_schema"),f=d("../plots/plots"),o=d("../plots/cartesian/axes"),i=d("../components/drawing"),g=d("../components/color"),p=d("../plots/cartesian/graph_interact").initInteractions,y=d("../constants/xmlns_namespaces"),c=d("../plots/cartesian/select").clearSelect,b=d("./plot_config").dfltConfig,l=d("./manage_arrays"),_=d("./helpers"),s=d("./subroutines"),A=d("./edit_types"),m=d("../plots/cartesian/constants").AX_NAME_PATTERN,h=0,x=5;function u(ke,Ge,Je,ot){var Pt;if(ke=T.getGraphDiv(ke),a.init(ke),T.isPlainObject(Ge)){var _t=Ge;Ge=_t.data,Je=_t.layout,ot=_t.config,Pt=_t.frames}var Bt=a.triggerHandler(ke,"plotly_beforeplot",[Ge,Je,ot]);if(Bt===!1)return Promise.reject();!Ge&&!Je&&!T.isPlotDiv(ke)&&T.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",ke);function qt(){if(Pt)return ae.addFrames(ke,Pt)}z(ke,ot),Je||(Je={}),w.select(ke).classed("js-plotly-plot",!0),i.makeTester(),Array.isArray(ke._promises)||(ke._promises=[]);var Ot=(ke.data||[]).length===0&&Array.isArray(Ge);Array.isArray(Ge)&&(_.cleanData(Ge),Ot?ke.data=Ge:ke.data.push.apply(ke.data,Ge),ke.empty=!1),(!ke.layout||Ot)&&(ke.layout=_.cleanLayout(Je)),f.supplyDefaults(ke);var $t=ke._fullLayout,rr=$t._has("cartesian");$t._replotting=!0,(Ot||$t._shouldCreateBgLayer)&&(Ze(ke),$t._shouldCreateBgLayer&&delete $t._shouldCreateBgLayer),i.initGradients(ke),i.initPatterns(ke),Ot&&o.saveShowSpikeInitial(ke);var er=!ke.calcdata||ke.calcdata.length!==(ke._fullData||[]).length;er&&f.doCalcdata(ke);for(var pr=0;pr<ke.calcdata.length;pr++)ke.calcdata[pr][0].trace=ke._fullData[pr];ke._context.responsive?ke._responsiveChartHandler||(ke._responsiveChartHandler=function(){T.isHidden(ke)||f.resize(ke)},window.addEventListener("resize",ke._responsiveChartHandler)):T.clearResponsive(ke);var Xr=T.extendFlat({},$t._size),hn=0;function Qr(){for(var ft=$t._basePlotModules,Me=0;Me<ft.length;Me++)ft[Me].drawFramework&&ft[Me].drawFramework(ke);!$t._glcanvas&&$t._has("gl")&&($t._glcanvas=$t._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(it){return it.key}),$t._glcanvas.enter().append("canvas").attr("class",function(it){return"gl-canvas gl-canvas-"+it.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Se=ke._context.plotGlPixelRatio;if($t._glcanvas){$t._glcanvas.attr("width",$t.width*Se).attr("height",$t.height*Se).style("width",$t.width+"px").style("height",$t.height+"px");var Ke=$t._glcanvas.data()[0].regl;if(Ke&&(Math.floor($t.width*Se)!==Ke._gl.drawingBufferWidth||Math.floor($t.height*Se)!==Ke._gl.drawingBufferHeight)){var Xe="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(hn)T.error(Xe);else return T.log(Xe+" Clearing graph and plotting again."),f.cleanPlot([],{},ke._fullData,$t),f.supplyDefaults(ke),$t=ke._fullLayout,f.doCalcdata(ke),hn++,Qr()}}return $t.modebar.orientation==="h"?$t._modebardiv.style("height",null).style("width","100%"):$t._modebardiv.style("width",null).style("height",$t.height+"px"),f.previousPromises(ke)}function nt(){if(f.clearAutoMarginIds(ke),s.drawMarginPushers(ke),o.allowAutoMargin(ke),$t._has("pie"))for(var ft=ke._fullData,Me=0;Me<ft.length;Me++){var Se=ft[Me];Se.type==="pie"&&Se.automargin&&f.allowAutoMargin(ke,"pie."+Se.uid+".automargin")}return f.doAutoMargin(ke),f.previousPromises(ke)}function Ht(){if(!!f.didMarginChange(Xr,$t._size))return T.syncOrAsync([nt,s.layoutStyles],ke)}function Kt(){if(!er){Gt();return}return T.syncOrAsync([r.getComponentMethod("shapes","calcAutorange"),r.getComponentMethod("annotations","calcAutorange"),Gt],ke)}function Gt(){ke._transitioning||(s.doAutoRangeAndConstraints(ke),Ot&&o.saveRangeInitial(ke),r.getComponentMethod("rangeslider","calcAutorange")(ke))}function br(){return o.draw(ke,Ot?"":"redraw")}var tt=[f.previousPromises,qt,Qr,nt,Ht];rr&&tt.push(Kt),tt.push(s.layoutStyles),rr&&tt.push(br,function(Me){Me._fullLayout._insideTickLabelsAutorange&&ie(Me,Me._fullLayout._insideTickLabelsAutorange).then(function(){Me._fullLayout._insideTickLabelsAutorange=void 0})}),tt.push(s.drawData,s.finalDraw,p,f.addLinks,f.rehover,f.redrag,f.doAutoMargin,je,f.previousPromises);function je(ft){ft._fullLayout._insideTickLabelsAutorange&&Ot&&o.saveRangeInitial(ft,!0)}var st=T.syncOrAsync(tt,ke);return(!st||!st.then)&&(st=Promise.resolve()),st.then(function(){return L(ke),ke})}function L(ke){var Ge=ke._fullLayout;Ge._redrawFromAutoMarginCount?Ge._redrawFromAutoMarginCount--:ke.emit("plotly_afterplot")}function S(ke){return T.extendFlat(b,ke)}function k(ke,Ge){try{ke._fullLayout._paper.style("background",Ge)}catch(Je){T.error(Je)}}function P(ke,Ge){var Je=g.combine(Ge,"white");k(ke,Je)}function z(ke,Ge){if(!ke._context){ke._context=T.extendDeep({},b);var Je=w.select("base");ke._context._baseUrl=Je.size()&&Je.attr("href")?window.location.href.split("#")[0]:""}var ot=ke._context,Pt,_t,Bt;if(Ge){for(_t=Object.keys(Ge),Pt=0;Pt<_t.length;Pt++)Bt=_t[Pt],!(Bt==="editable"||Bt==="edits")&&Bt in ot&&(Bt==="setBackground"&&Ge[Bt]==="opaque"?ot[Bt]=P:ot[Bt]=Ge[Bt]);Ge.plot3dPixelRatio&&!ot.plotGlPixelRatio&&(ot.plotGlPixelRatio=ot.plot3dPixelRatio);var qt=Ge.editable;if(qt!==void 0)for(ot.editable=qt,_t=Object.keys(ot.edits),Pt=0;Pt<_t.length;Pt++)ot.edits[_t[Pt]]=qt;if(Ge.edits)for(_t=Object.keys(Ge.edits),Pt=0;Pt<_t.length;Pt++)Bt=_t[Pt],Bt in ot.edits&&(ot.edits[Bt]=Ge.edits[Bt]);ot._exportedPlot=Ge._exportedPlot}ot.staticPlot&&(ot.editable=!1,ot.edits={},ot.autosizable=!1,ot.scrollZoom=!1,ot.doubleClick=!1,ot.showTips=!1,ot.showLink=!1,ot.displayModeBar=!1),ot.displayModeBar==="hover"&&!M&&(ot.displayModeBar=!0),(ot.setBackground==="transparent"||typeof ot.setBackground!="function")&&(ot.setBackground=k),ot._hasZeroHeight=ot._hasZeroHeight||ke.clientHeight===0,ot._hasZeroWidth=ot._hasZeroWidth||ke.clientWidth===0;var Ot=ot.scrollZoom,$t=ot._scrollZoom={};if(Ot===!0)$t.cartesian=1,$t.gl3d=1,$t.geo=1,$t.mapbox=1;else if(typeof Ot=="string"){var rr=Ot.split("+");for(Pt=0;Pt<rr.length;Pt++)$t[rr[Pt]]=1}else Ot!==!1&&($t.gl3d=1,$t.geo=1,$t.mapbox=1)}function I(ke){if(ke=T.getGraphDiv(ke),!T.isPlotDiv(ke))throw new Error("This element is not a Plotly plot: "+ke);return _.cleanData(ke.data),_.cleanLayout(ke.layout),ke.calcdata=void 0,ae._doPlot(ke).then(function(){return ke.emit("plotly_redraw"),ke})}function D(ke,Ge,Je,ot){return ke=T.getGraphDiv(ke),f.cleanPlot([],{},ke._fullData||[],ke._fullLayout||{}),f.purge(ke),ae._doPlot(ke,Ge,Je,ot)}function R(ke,Ge){var Je=Ge+1,ot=[],Pt,_t;for(Pt=0;Pt<ke.length;Pt++)_t=ke[Pt],_t<0?ot.push(Je+_t):ot.push(_t);return ot}function O(ke,Ge,Je){var ot,Pt;for(ot=0;ot<Ge.length;ot++){if(Pt=Ge[ot],Pt!==parseInt(Pt,10))throw new Error("all values in "+Je+" must be integers");if(Pt>=ke.data.length||Pt<-ke.data.length)throw new Error(Je+" must be valid indices for gd.data.");if(Ge.indexOf(Pt,ot+1)>-1||Pt>=0&&Ge.indexOf(-ke.data.length+Pt)>-1||Pt<0&&Ge.indexOf(ke.data.length+Pt)>-1)throw new Error("each index in "+Je+" must be unique.")}}function F(ke,Ge,Je){if(!Array.isArray(ke.data))throw new Error("gd.data must be an array.");if(typeof Ge>"u")throw new Error("currentIndices is a required argument.");if(Array.isArray(Ge)||(Ge=[Ge]),O(ke,Ge,"currentIndices"),typeof Je<"u"&&!Array.isArray(Je)&&(Je=[Je]),typeof Je<"u"&&O(ke,Je,"newIndices"),typeof Je<"u"&&Ge.length!==Je.length)throw new Error("current and new indices must be of equal length.")}function V(ke,Ge,Je){var ot,Pt;if(!Array.isArray(ke.data))throw new Error("gd.data must be an array.");if(typeof Ge>"u")throw new Error("traces must be defined.");for(Array.isArray(Ge)||(Ge=[Ge]),ot=0;ot<Ge.length;ot++)if(Pt=Ge[ot],typeof Pt!="object"||Array.isArray(Pt)||Pt===null)throw new Error("all values in traces array must be non-array objects");if(typeof Je<"u"&&!Array.isArray(Je)&&(Je=[Je]),typeof Je<"u"&&Je.length!==Ge.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function G(ke,Ge,Je,ot){var Pt=T.isPlainObject(ot);if(!Array.isArray(ke.data))throw new Error("gd.data must be an array");if(!T.isPlainObject(Ge))throw new Error("update must be a key:value object");if(typeof Je>"u")throw new Error("indices must be an integer or array of integers");O(ke,Je,"indices");for(var _t in Ge){if(!Array.isArray(Ge[_t])||Ge[_t].length!==Je.length)throw new Error("attribute "+_t+" must be an array of length equal to indices array length");if(Pt&&(!(_t in ot)||!Array.isArray(ot[_t])||ot[_t].length!==Ge[_t].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function J(ke,Ge,Je,ot){var Pt=T.isPlainObject(ot),_t=[],Bt,qt,Ot,$t,rr;Array.isArray(Je)||(Je=[Je]),Je=R(Je,ke.data.length-1);for(var er in Ge)for(var pr=0;pr<Je.length;pr++){if(Bt=ke.data[Je[pr]],Ot=e(Bt,er),qt=Ot.get(),$t=Ge[er][pr],!T.isArrayOrTypedArray($t))throw new Error("attribute: "+er+" index: "+pr+" must be an array");if(!T.isArrayOrTypedArray(qt))throw new Error("cannot extend missing or non-array attribute: "+er);if(qt.constructor!==$t.constructor)throw new Error("cannot extend array with an array of a different type: "+er);rr=Pt?ot[er][pr]:ot,v(rr)||(rr=-1),_t.push({prop:Ot,target:qt,insert:$t,maxp:Math.floor(rr)})}return _t}function Z(ke,Ge,Je,ot,Pt){G(ke,Ge,Je,ot);for(var _t=J(ke,Ge,Je,ot),Bt={},qt={},Ot=0;Ot<_t.length;Ot++){var $t=_t[Ot].prop,rr=_t[Ot].maxp,er=Pt(_t[Ot].target,_t[Ot].insert,rr);$t.set(er[0]),Array.isArray(Bt[$t.astr])||(Bt[$t.astr]=[]),Bt[$t.astr].push(er[1]),Array.isArray(qt[$t.astr])||(qt[$t.astr]=[]),qt[$t.astr].push(_t[Ot].target.length)}return{update:Bt,maxPoints:qt}}function Y(ke,Ge){var Je=new ke.constructor(ke.length+Ge.length);return Je.set(ke),Je.set(Ge,ke.length),Je}function j(ke,Ge,Je,ot){ke=T.getGraphDiv(ke);function Pt(Ot,$t,rr){var er,pr;if(T.isTypedArray(Ot))if(rr<0){var Xr=new Ot.constructor(0),hn=Y(Ot,$t);rr<0?(er=hn,pr=Xr):(er=Xr,pr=hn)}else if(er=new Ot.constructor(rr),pr=new Ot.constructor(Ot.length+$t.length-rr),rr===$t.length)er.set($t),pr.set(Ot);else if(rr<$t.length){var Qr=$t.length-rr;er.set($t.subarray(Qr)),pr.set(Ot),pr.set($t.subarray(0,Qr),Ot.length)}else{var nt=rr-$t.length,Ht=Ot.length-nt;er.set(Ot.subarray(Ht)),er.set($t,nt),pr.set(Ot.subarray(0,Ht))}else er=Ot.concat($t),pr=rr>=0&&rr<er.length?er.splice(0,er.length-rr):[];return[er,pr]}var _t=Z(ke,Ge,Je,ot,Pt),Bt=ae.redraw(ke),qt=[ke,_t.update,Je,_t.maxPoints];return n.add(ke,ae.prependTraces,qt,j,arguments),Bt}function re(ke,Ge,Je,ot){ke=T.getGraphDiv(ke);function Pt(Ot,$t,rr){var er,pr;if(T.isTypedArray(Ot))if(rr<=0){var Xr=new Ot.constructor(0),hn=Y($t,Ot);rr<0?(er=hn,pr=Xr):(er=Xr,pr=hn)}else if(er=new Ot.constructor(rr),pr=new Ot.constructor(Ot.length+$t.length-rr),rr===$t.length)er.set($t),pr.set(Ot);else if(rr<$t.length){var Qr=$t.length-rr;er.set($t.subarray(0,Qr)),pr.set($t.subarray(Qr)),pr.set(Ot,Qr)}else{var nt=rr-$t.length;er.set($t),er.set(Ot.subarray(0,nt),$t.length),pr.set(Ot.subarray(nt))}else er=$t.concat(Ot),pr=rr>=0&&rr<er.length?er.splice(rr,er.length):[];return[er,pr]}var _t=Z(ke,Ge,Je,ot,Pt),Bt=ae.redraw(ke),qt=[ke,_t.update,Je,_t.maxPoints];return n.add(ke,ae.extendTraces,qt,re,arguments),Bt}function se(ke,Ge,Je){ke=T.getGraphDiv(ke);var ot=[],Pt=ae.deleteTraces,_t=se,Bt=[ke,ot],qt=[ke,Ge],Ot,$t;for(V(ke,Ge,Je),Array.isArray(Ge)||(Ge=[Ge]),Ge=Ge.map(function(rr){return T.extendFlat({},rr)}),_.cleanData(Ge),Ot=0;Ot<Ge.length;Ot++)ke.data.push(Ge[Ot]);for(Ot=0;Ot<Ge.length;Ot++)ot.push(-Ge.length+Ot);if(typeof Je>"u")return $t=ae.redraw(ke),n.add(ke,Pt,Bt,_t,qt),$t;Array.isArray(Je)||(Je=[Je]);try{F(ke,ot,Je)}catch(rr){throw ke.data.splice(ke.data.length-Ge.length,Ge.length),rr}return n.startSequence(ke),n.add(ke,Pt,Bt,_t,qt),$t=ae.moveTraces(ke,ot,Je),n.stopSequence(ke),$t}function oe(ke,Ge){ke=T.getGraphDiv(ke);var Je=[],ot=ae.addTraces,Pt=oe,_t=[ke,Je,Ge],Bt=[ke,Ge],qt,Ot;if(typeof Ge>"u")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Ge)||(Ge=[Ge]),O(ke,Ge,"indices"),Ge=R(Ge,ke.data.length-1),Ge.sort(T.sorterDes),qt=0;qt<Ge.length;qt+=1)Ot=ke.data.splice(Ge[qt],1)[0],Je.push(Ot);var $t=ae.redraw(ke);return n.add(ke,ot,_t,Pt,Bt),$t}function N(ke,Ge,Je){ke=T.getGraphDiv(ke);var ot=[],Pt=[],_t=N,Bt=N,qt=[ke,Je,Ge],Ot=[ke,Ge,Je],$t;if(F(ke,Ge,Je),Ge=Array.isArray(Ge)?Ge:[Ge],typeof Je>"u")for(Je=[],$t=0;$t<Ge.length;$t++)Je.push(-Ge.length+$t);for(Je=Array.isArray(Je)?Je:[Je],Ge=R(Ge,ke.data.length-1),Je=R(Je,ke.data.length-1),$t=0;$t<ke.data.length;$t++)Ge.indexOf($t)===-1&&ot.push(ke.data[$t]);for($t=0;$t<Ge.length;$t++)Pt.push({newIndex:Je[$t],trace:ke.data[Ge[$t]]});for(Pt.sort(function(er,pr){return er.newIndex-pr.newIndex}),$t=0;$t<Pt.length;$t+=1)ot.splice(Pt[$t].newIndex,0,Pt[$t].trace);ke.data=ot;var rr=ae.redraw(ke);return n.add(ke,_t,qt,Bt,Ot),rr}function U(ke,Ge,Je,ot){ke=T.getGraphDiv(ke),_.clearPromiseQueue(ke);var Pt={};if(typeof Ge=="string")Pt[Ge]=Je;else if(T.isPlainObject(Ge))Pt=T.extendFlat({},Ge),ot===void 0&&(ot=Je);else return T.warn("Restyle fail.",Ge,Je,ot),Promise.reject();Object.keys(Pt).length&&(ke.changed=!0);var _t=_.coerceTraceIndices(ke,ot),Bt=ee(ke,Pt,_t),qt=Bt.flags;qt.calc&&(ke.calcdata=void 0),qt.clearAxisTypes&&_.clearAxisTypes(ke,_t,{});var Ot=[];qt.fullReplot?Ot.push(ae._doPlot):(Ot.push(f.previousPromises),f.supplyDefaults(ke),qt.markerSize&&(f.doCalcdata(ke),ge(Ot)),qt.style&&Ot.push(s.doTraceStyle),qt.colorbars&&Ot.push(s.doColorBars),Ot.push(L)),Ot.push(f.rehover,f.redrag),n.add(ke,U,[ke,Bt.undoit,Bt.traces],U,[ke,Bt.redoit,Bt.traces]);var $t=T.syncOrAsync(Ot,ke);return(!$t||!$t.then)&&($t=Promise.resolve()),$t.then(function(){return ke.emit("plotly_restyle",Bt.eventData),ke})}function q(ke){return ke===void 0?null:ke}function Q(ke,Ge){return Ge?function(Je,ot,Pt){var _t=e(Je,ot),Bt=_t.set;return _t.set=function(qt){var Ot=(Pt||"")+ot;W(Ot,_t.get(),qt,ke),Bt(qt)},_t}:e}function W(ke,Ge,Je,ot){if(Array.isArray(Ge)||Array.isArray(Je))for(var Pt=Array.isArray(Ge)?Ge:[],_t=Array.isArray(Je)?Je:[],Bt=Math.max(Pt.length,_t.length),qt=0;qt<Bt;qt++)W(ke+"["+qt+"]",Pt[qt],_t[qt],ot);else if(T.isPlainObject(Ge)||T.isPlainObject(Je)){var Ot=T.isPlainObject(Ge)?Ge:{},$t=T.isPlainObject(Je)?Je:{},rr=T.extendFlat({},Ot,$t);for(var er in rr)W(ke+"."+er,Ot[er],$t[er],ot)}else ot[ke]===void 0&&(ot[ke]=q(Ge))}function X(ke,Ge,Je){for(var ot in Je){var Pt=e(ke,ot);W(ot,Pt.get(),Je[ot],Ge)}}function ee(ke,Ge,Je){var ot=ke._fullLayout,Pt=ke._fullData,_t=ke.data,Bt=ot._guiEditing,qt=Q(ot._preGUI,Bt),Ot=T.extendDeepAll({},Ge),$t;te(Ge);var rr=A.traceFlags(),er={},pr={},Xr;function hn(){return Je.map(function(){})}function Qr(Zt){var sr=o.id2name(Zt);Xr.indexOf(sr)===-1&&Xr.push(sr)}function nt(Zt){return"LAYOUT"+Zt+".autorange"}function Ht(Zt){return"LAYOUT"+Zt+".range"}function Kt(Zt){for(var sr=Zt;sr<Pt.length;sr++)if(Pt[sr]._input===_t[Zt])return Pt[sr]}function Gt(Zt,sr,Ir){if(Array.isArray(Zt)){Zt.forEach(function(Nr){Gt(Nr,sr,Ir)});return}if(!(Zt in Ge||_.hasParent(Ge,Zt))){var Zr;if(Zt.substr(0,6)==="LAYOUT")Zr=qt(ke.layout,Zt.replace("LAYOUT",""));else{var Pr=Je[Ir],wr=ot._tracePreGUI[Kt(Pr)._fullInput.uid];Zr=Q(wr,Bt)(_t[Pr],Zt)}Zt in pr||(pr[Zt]=hn()),pr[Zt][Ir]===void 0&&(pr[Zt][Ir]=q(Zr.get())),sr!==void 0&&Zr.set(sr)}}function br(Zt){return function(sr){return Pt[sr][Zt]}}function tt(Zt){return function(sr,Ir){return sr===!1?Pt[Je[Ir]][Zt]:null}}for(var je in Ge){if(_.hasParent(Ge,je))throw new Error("cannot set "+je+" and a parent attribute simultaneously");var st=Ge[je],ft,Me,Se,Ke,Xe,it;if((je==="autobinx"||je==="autobiny")&&(je=je.charAt(je.length-1)+"bins",Array.isArray(st)?st=st.map(tt(je)):st===!1?st=Je.map(br(je)):st=null),er[je]=st,je.substr(0,6)==="LAYOUT"){Se=qt(ke.layout,je.replace("LAYOUT","")),pr[je]=[q(Se.get())],Se.set(Array.isArray(st)?st[0]:st),rr.calc=!0;continue}for(pr[je]=hn(),$t=0;$t<Je.length;$t++){ft=_t[Je[$t]],Me=Kt(Je[$t]);var pt=ot._tracePreGUI[Me._fullInput.uid];if(Se=Q(pt,Bt)(ft,je),Ke=Se.get(),Xe=Array.isArray(st)?st[$t%st.length]:st,Xe!==void 0){var vt=Se.parts[Se.parts.length-1],St=je.substr(0,je.length-vt.length-1),kt=St?St+".":"",Nt=St?e(Me,St).get():Me;if(it=t.getTraceValObject(Me,Se.parts),it&&it.impliedEdits&&Xe!==null)for(var nr in it.impliedEdits)Gt(T.relativeAttr(je,nr),it.impliedEdits[nr],$t);else if((vt==="thicknessmode"||vt==="lenmode")&&Ke!==Xe&&(Xe==="fraction"||Xe==="pixels")&&Nt){var fr=ot._size,Hr=Nt.orient,Er=Hr==="top"||Hr==="bottom";if(vt==="thicknessmode"){var _r=Er?fr.h:fr.w;Gt(kt+"thickness",Nt.thickness*(Xe==="fraction"?1/_r:_r),$t)}else{var en=Er?fr.w:fr.h;Gt(kt+"len",Nt.len*(Xe==="fraction"?1/en:en),$t)}}else if(je==="type"&&(Xe==="pie"!=(Ke==="pie")||Xe==="funnelarea"!=(Ke==="funnelarea"))){var dr="x",xr="y";(Xe==="bar"||Ke==="bar")&&ft.orientation==="h"&&(dr="y",xr="x"),T.swapAttrs(ft,["?","?src"],"labels",dr),T.swapAttrs(ft,["d?","?0"],"label",dr),T.swapAttrs(ft,["?","?src"],"values",xr),Ke==="pie"||Ke==="funnelarea"?(e(ft,"marker.color").set(e(ft,"marker.colors").get()),ot._pielayer.selectAll("g.trace").remove()):r.traceIs(ft,"cartesian")&&e(ft,"marker.colors").set(e(ft,"marker.color").get())}pr[je][$t]=q(Ke);var Ur=["swapxy","swapxyaxes","orientation","orientationaxes"];if(Ur.indexOf(je)!==-1){if(je==="orientation"){Se.set(Xe);var Yr=ft.x&&!ft.y?"h":"v";if((Se.get()||Yr)===Me.orientation)continue}else je==="orientationaxes"&&(ft.orientation={v:"h",h:"v"}[Me.orientation]);_.swapXYData(ft),rr.calc=rr.clearAxisTypes=!0}else f.dataArrayContainers.indexOf(Se.parts[0])!==-1?(_.manageArrayContainers(Se,Xe,pr),rr.calc=!0):(it?it.arrayOk&&!r.traceIs(Me,"regl")&&(T.isArrayOrTypedArray(Xe)||T.isArrayOrTypedArray(Ke))?rr.calc=!0:A.update(rr,it):rr.calc=!0,Se.set(Xe))}}if(["swapxyaxes","orientationaxes"].indexOf(je)!==-1&&o.swap(ke,Je),je==="orientationaxes"){var Ar=e(ke.layout,"hovermode"),et=Ar.get();et==="x"?Ar.set("y"):et==="y"?Ar.set("x"):et==="x unified"?Ar.set("y unified"):et==="y unified"&&Ar.set("x unified")}if(["orientation","type"].indexOf(je)!==-1){for(Xr=[],$t=0;$t<Je.length;$t++){var Lt=_t[Je[$t]];r.traceIs(Lt,"cartesian")&&(Qr(Lt.xaxis||"x"),Qr(Lt.yaxis||"y"))}Gt(Xr.map(nt),!0,0),Gt(Xr.map(Ht),[0,1],0)}}return(rr.calc||rr.plot)&&(rr.fullReplot=!0),{flags:rr,undoit:pr,redoit:er,traces:Je,eventData:T.extendDeepNoArrays([],[Ot,Je])}}function te(ke){var Ge=T.counterRegex("axis",".title",!1,!1),Je=/colorbar\.title$/,ot=Object.keys(ke),Pt,_t,Bt;for(Pt=0;Pt<ot.length;Pt++)_t=ot[Pt],Bt=ke[_t],(_t==="title"||Ge.test(_t)||Je.test(_t))&&(typeof Bt=="string"||typeof Bt=="number")?qt(_t,_t.replace("title","title.text")):_t.indexOf("titlefont")>-1&&_t.indexOf("grouptitlefont")===-1?qt(_t,_t.replace("titlefont","title.font")):_t.indexOf("titleposition")>-1?qt(_t,_t.replace("titleposition","title.position")):_t.indexOf("titleside")>-1?qt(_t,_t.replace("titleside","title.side")):_t.indexOf("titleoffset")>-1&&qt(_t,_t.replace("titleoffset","title.offset"));function qt(Ot,$t){ke[$t]=ke[Ot],delete ke[Ot]}}function ie(ke,Ge,Je){ke=T.getGraphDiv(ke),_.clearPromiseQueue(ke);var ot={};if(typeof Ge=="string")ot[Ge]=Je;else if(T.isPlainObject(Ge))ot=T.extendFlat({},Ge);else return T.warn("Relayout fail.",Ge,Je),Promise.reject();Object.keys(ot).length&&(ke.changed=!0);var Pt=Te(ke,ot),_t=Pt.flags;_t.calc&&(ke.calcdata=void 0);var Bt=[f.previousPromises];_t.layoutReplot?Bt.push(s.layoutReplot):Object.keys(ot).length&&(le(ke,_t,Pt)||f.supplyDefaults(ke),_t.legend&&Bt.push(s.doLegend),_t.layoutstyle&&Bt.push(s.layoutStyles),_t.axrange&&ge(Bt,Pt.rangesAltered),_t.ticks&&Bt.push(s.doTicksRelayout),_t.modebar&&Bt.push(s.doModeBar),_t.camera&&Bt.push(s.doCamera),_t.colorbars&&Bt.push(s.doColorBars),Bt.push(L)),Bt.push(f.rehover,f.redrag),n.add(ke,ie,[ke,Pt.undoit],ie,[ke,Pt.redoit]);var qt=T.syncOrAsync(Bt,ke);return(!qt||!qt.then)&&(qt=Promise.resolve(ke)),qt.then(function(){return ke.emit("plotly_relayout",Pt.eventData),ke})}function le(ke,Ge,Je){var ot=ke._fullLayout;if(!Ge.axrange)return!1;for(var Pt in Ge)if(Pt!=="axrange"&&Ge[Pt])return!1;for(var _t in Je.rangesAltered){var Bt=o.id2name(_t),qt=ke.layout[Bt],Ot=ot[Bt];if(Ot.autorange=qt.autorange,qt.range&&(Ot.range=qt.range.slice()),Ot.cleanRange(),Ot._matchGroup){for(var $t in Ot._matchGroup)if($t!==_t){var rr=ot[o.id2name($t)];rr.autorange=Ot.autorange,rr.range=Ot.range.slice(),rr._input.range=Ot.range.slice()}}}return!0}function ge(ke,Ge){var Je=Ge?function(ot){var Pt=[],_t=!0;for(var Bt in Ge){var qt=o.getFromId(ot,Bt);if(Pt.push(Bt),(qt.ticklabelposition||"").indexOf("inside")!==-1&&qt._anchorAxis&&Pt.push(qt._anchorAxis._id),qt._matchGroup)for(var Ot in qt._matchGroup)Ge[Ot]||Pt.push(Ot);qt.automargin&&(_t=!1)}return o.draw(ot,Pt,{skipTitle:_t})}:function(ot){return o.draw(ot,"redraw")};ke.push(c,s.doAutoRangeAndConstraints,Je,s.drawData,s.finalDraw)}var fe=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,pe=/^[xyz]axis[0-9]*\.autorange$/,ye=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function Te(ke,Ge){var Je=ke.layout,ot=ke._fullLayout,Pt=ot._guiEditing,_t=Q(ot._preGUI,Pt),Bt=Object.keys(Ge),qt=o.list(ke),Ot=T.extendDeepAll({},Ge),$t={},rr,er,pr;for(te(Ge),Bt=Object.keys(Ge),er=0;er<Bt.length;er++)if(Bt[er].indexOf("allaxes")===0){for(pr=0;pr<qt.length;pr++){var Xr=qt[pr]._id.substr(1),hn=Xr.indexOf("scene")!==-1?Xr+".":"",Qr=Bt[er].replace("allaxes",hn+qt[pr]._name);Ge[Qr]||(Ge[Qr]=Ge[Bt[er]])}delete Ge[Bt[er]]}var nt=A.layoutFlags(),Ht={},Kt={};function Gt(Pr,wr){if(Array.isArray(Pr)){Pr.forEach(function(Sn){Gt(Sn,wr)});return}if(!(Pr in Ge||_.hasParent(Ge,Pr))){var Nr=_t(Je,Pr);Pr in Kt||(Kt[Pr]=q(Nr.get())),wr!==void 0&&Nr.set(wr)}}var br={},tt;function je(Pr){var wr=o.name2id(Pr.split(".")[0]);return br[wr]=1,wr}for(var st in Ge){if(_.hasParent(Ge,st))throw new Error("cannot set "+st+" and a parent attribute simultaneously");for(var ft=_t(Je,st),Me=Ge[st],Se=ft.parts.length,Ke=Se-1;Ke>0&&typeof ft.parts[Ke]!="string";)Ke--;var Xe=ft.parts[Ke],it=ft.parts[Ke-1]+"."+Xe,pt=ft.parts.slice(0,Ke).join("."),vt=e(ke.layout,pt).get(),St=e(ot,pt).get(),kt=ft.get();if(Me!==void 0){Ht[st]=Me,Kt[st]=Xe==="reverse"?Me:q(kt);var Nt=t.getLayoutValObject(ot,ft.parts);if(Nt&&Nt.impliedEdits&&Me!==null)for(var nr in Nt.impliedEdits)Gt(T.relativeAttr(st,nr),Nt.impliedEdits[nr]);if(["width","height"].indexOf(st)!==-1)if(Me){Gt("autosize",null);var fr=st==="height"?"width":"height";Gt(fr,ot[fr])}else ot[st]=ke._initialAutoSize[st];else if(st==="autosize")Gt("width",Me?null:ot.width),Gt("height",Me?null:ot.height);else if(it.match(fe))je(it),e(ot,pt+"._inputRange").set(null);else if(it.match(pe)){je(it),e(ot,pt+"._inputRange").set(null);var Hr=e(ot,pt).get();Hr._inputDomain&&(Hr._input.domain=Hr._inputDomain.slice())}else it.match(ye)&&e(ot,pt+"._inputDomain").set(null);if(Xe==="type"){tt=vt;var Er=St.type==="linear"&&Me==="log",_r=St.type==="log"&&Me==="linear";if(Er||_r){if(!tt||!tt.range)Gt(pt+".autorange",!0);else if(St.autorange)Er&&(tt.range=tt.range[1]>tt.range[0]?[1,2]:[2,1]);else{var en=tt.range[0],dr=tt.range[1];Er?(en<=0&&dr<=0&&Gt(pt+".autorange",!0),en<=0?en=dr/1e6:dr<=0&&(dr=en/1e6),Gt(pt+".range[0]",Math.log(en)/Math.LN10),Gt(pt+".range[1]",Math.log(dr)/Math.LN10)):(Gt(pt+".range[0]",Math.pow(10,en)),Gt(pt+".range[1]",Math.pow(10,dr)))}Array.isArray(ot._subplots.polar)&&ot._subplots.polar.length&&ot[ft.parts[0]]&&ft.parts[1]==="radialaxis"&&delete ot[ft.parts[0]]._subplot.viewInitial["radialaxis.range"],r.getComponentMethod("annotations","convertCoords")(ke,St,Me,Gt),r.getComponentMethod("images","convertCoords")(ke,St,Me,Gt)}else Gt(pt+".autorange",!0),Gt(pt+".range",null);e(ot,pt+"._inputRange").set(null)}else if(Xe.match(m)){var xr=e(ot,st).get(),Ur=(Me||{}).type;(!Ur||Ur==="-")&&(Ur="linear"),r.getComponentMethod("annotations","convertCoords")(ke,xr,Ur,Gt),r.getComponentMethod("images","convertCoords")(ke,xr,Ur,Gt)}var Yr=l.containerArrayMatch(st);if(Yr){rr=Yr.array,er=Yr.index;var Ar=Yr.property,et=Nt||{editType:"calc"};er!==""&&Ar===""&&(l.isAddVal(Me)?Kt[st]=null:l.isRemoveVal(Me)?Kt[st]=(e(Je,rr).get()||[])[er]:T.warn("unrecognized full object value",Ge)),A.update(nt,et),$t[rr]||($t[rr]={});var Lt=$t[rr][er];Lt||(Lt=$t[rr][er]={}),Lt[Ar]=Me,delete Ge[st]}else Xe==="reverse"?(vt.range?vt.range.reverse():(Gt(pt+".autorange",!0),vt.range=[1,0]),St.autorange?nt.calc=!0:nt.plot=!0):(st==="dragmode"&&(Me===!1&&kt!==!1||Me!==!1&&kt===!1)||ot._has("scatter-like")&&ot._has("regl")&&st==="dragmode"&&(Me==="lasso"||Me==="select")&&!(kt==="lasso"||kt==="select")||ot._has("gl2d")?nt.plot=!0:Nt?A.update(nt,Nt):nt.calc=!0,ft.set(Me))}}for(rr in $t){var Zt=l.applyContainerArrayChanges(ke,_t(Je,rr),$t[rr],nt,_t);Zt||(nt.plot=!0)}for(var sr in br){tt=o.getFromId(ke,sr);var Ir=tt&&tt._constraintGroup;if(Ir){nt.calc=!0;for(var Zr in Ir)br[Zr]||(o.getFromId(ke,Zr)._constraintShrinkable=!0)}}return(_e(ke)||Ge.height||Ge.width)&&(nt.plot=!0),(nt.plot||nt.calc)&&(nt.layoutReplot=!0),{flags:nt,rangesAltered:br,undoit:Kt,redoit:Ht,eventData:Ot}}function _e(ke){var Ge=ke._fullLayout,Je=Ge.width,ot=Ge.height;return ke.layout.autosize&&f.plotAutoSize(ke,ke.layout,Ge),Ge.width!==Je||Ge.height!==ot}function De(ke,Ge,Je,ot){ke=T.getGraphDiv(ke),_.clearPromiseQueue(ke),T.isPlainObject(Ge)||(Ge={}),T.isPlainObject(Je)||(Je={}),Object.keys(Ge).length&&(ke.changed=!0),Object.keys(Je).length&&(ke.changed=!0);var Pt=_.coerceTraceIndices(ke,ot),_t=ee(ke,T.extendFlat({},Ge),Pt),Bt=_t.flags,qt=Te(ke,T.extendFlat({},Je)),Ot=qt.flags;(Bt.calc||Ot.calc)&&(ke.calcdata=void 0),Bt.clearAxisTypes&&_.clearAxisTypes(ke,Pt,Je);var $t=[];Ot.layoutReplot?$t.push(s.layoutReplot):Bt.fullReplot?$t.push(ae._doPlot):($t.push(f.previousPromises),le(ke,Ot,qt)||f.supplyDefaults(ke),Bt.style&&$t.push(s.doTraceStyle),(Bt.colorbars||Ot.colorbars)&&$t.push(s.doColorBars),Ot.legend&&$t.push(s.doLegend),Ot.layoutstyle&&$t.push(s.layoutStyles),Ot.axrange&&ge($t,qt.rangesAltered),Ot.ticks&&$t.push(s.doTicksRelayout),Ot.modebar&&$t.push(s.doModeBar),Ot.camera&&$t.push(s.doCamera),$t.push(L)),$t.push(f.rehover,f.redrag),n.add(ke,De,[ke,_t.undoit,qt.undoit,_t.traces],De,[ke,_t.redoit,qt.redoit,_t.traces]);var rr=T.syncOrAsync($t,ke);return(!rr||!rr.then)&&(rr=Promise.resolve(ke)),rr.then(function(){return ke.emit("plotly_update",{data:_t.eventData,layout:qt.eventData}),ke})}function Be(ke){return function(Je){Je._fullLayout._guiEditing=!0;var ot=ke.apply(null,arguments);return Je._fullLayout._guiEditing=!1,ot}}var Ue=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],xe=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function Pe(ke,Ge){for(var Je=0;Je<Ge.length;Je++){var ot=Ge[Je],Pt=ke.match(ot.pattern);if(Pt){var _t=Pt[1]||"";return{head:_t,tail:ke.substr(_t.length+1),attr:ot.attr}}}}function Ve(ke,Ge){var Je=e(Ge,ke).get();if(Je!==void 0)return Je;var ot=ke.split(".");for(ot.pop();ot.length>1;)if(ot.pop(),Je=e(Ge,ot.join(".")+".uirevision").get(),Je!==void 0)return Je;return Ge.uirevision}function Qe(ke,Ge){for(var Je=0;Je<Ge.length;Je++)if(Ge[Je]._fullInput.uid===ke)return Je;return-1}function Fe(ke,Ge,Je){for(var ot=0;ot<Ge.length;ot++)if(Ge[ot].uid===ke)return ot;return!Ge[Je]||Ge[Je].uid?-1:Je}function Le(ke,Ge){var Je=T.isPlainObject(ke),ot=Array.isArray(ke);return Je||ot?(Je&&T.isPlainObject(Ge)||ot&&Array.isArray(Ge))&&JSON.stringify(ke)===JSON.stringify(Ge):ke===Ge}function Ne(ke,Ge,Je,ot){var Pt=ot._preGUI,_t,Bt,qt,Ot,$t,rr,er,pr,Xr,hn,Qr=[],nt={},Ht={};for(_t in Pt){if($t=Pe(_t,Ue),$t){if(Xr=$t.head,hn=$t.tail,Bt=$t.attr||Xr+".uirevision",qt=e(ot,Bt).get(),Ot=qt&&Ve(Bt,Ge),Ot&&Ot===qt){if(rr=Pt[_t],rr===null&&(rr=void 0),er=e(Ge,_t),pr=er.get(),Le(pr,rr)){pr===void 0&&hn==="autorange"&&Qr.push(Xr),er.set(q(e(ot,_t).get()));continue}else if(hn==="autorange"||hn.substr(0,6)==="range["){var Kt=Pt[Xr+".range[0]"],Gt=Pt[Xr+".range[1]"],br=Pt[Xr+".autorange"];if(br||br===null&&Kt===null&&Gt===null){if(!(Xr in nt)){var tt=e(Ge,Xr).get();nt[Xr]=tt&&(tt.autorange||tt.autorange!==!1&&(!tt.range||tt.range.length!==2))}if(nt[Xr]){er.set(q(e(ot,_t).get()));continue}}}}}else T.warn("unrecognized GUI edit: "+_t);delete Pt[_t],$t&&$t.tail.substr(0,6)==="range["&&(Ht[$t.head]=1)}for(var je=0;je<Qr.length;je++){var st=Qr[je];if(Ht[st]){var ft=e(Ge,st).get();ft&&delete ft.autorange}}var Me=ot._tracePreGUI;for(var Se in Me){var Ke=Me[Se],Xe=null,it;for(_t in Ke){if(!Xe){var pt=Qe(Se,Je);if(pt<0){delete Me[Se];break}var vt=Je[pt];it=vt._fullInput;var St=Fe(Se,ke,it.index);if(St<0){delete Me[Se];break}Xe=ke[St]}if($t=Pe(_t,xe),$t){if($t.attr?(qt=e(ot,$t.attr).get(),Ot=qt&&Ve($t.attr,Ge)):(qt=it.uirevision,Ot=Xe.uirevision,Ot===void 0&&(Ot=Ge.uirevision)),Ot&&Ot===qt&&(rr=Ke[_t],rr===null&&(rr=void 0),er=e(Xe,_t),pr=er.get(),Le(pr,rr))){er.set(q(e(it,_t).get()));continue}}else T.warn("unrecognized GUI edit: "+_t+" in trace uid "+Se);delete Ke[_t]}}}function dt(ke,Ge,Je,ot){var Pt,_t;function Bt(){return ae.addFrames(ke,Pt)}ke=T.getGraphDiv(ke),_.clearPromiseQueue(ke);var qt=ke._fullData,Ot=ke._fullLayout;if(!T.isPlotDiv(ke)||!qt||!Ot)_t=ae.newPlot(ke,Ge,Je,ot);else{if(T.isPlainObject(Ge)){var $t=Ge;Ge=$t.data,Je=$t.layout,ot=$t.config,Pt=$t.frames}var rr=!1;if(ot){var er=T.extendDeep({},ke._context);ke._context=void 0,z(ke,ot),rr=zt(er,ke._context)}ke.data=Ge||[],_.cleanData(ke.data),ke.layout=Je||{},_.cleanLayout(ke.layout),Ne(ke.data,ke.layout,qt,Ot),f.supplyDefaults(ke,{skipUpdateCalc:!0});var pr=ke._fullData,Xr=ke._fullLayout,hn=Xr.datarevision===void 0,Qr=Xr.transition,nt=Xt(ke,Ot,Xr,hn,Qr),Ht=nt.newDataRevision,Kt=Dt(ke,qt,pr,hn,Qr,Ht);if(_e(ke)&&(nt.layoutReplot=!0),Kt.calc||nt.calc){ke.calcdata=void 0;for(var Gt=Object.getOwnPropertyNames(Xr),br=0;br<Gt.length;br++){var tt=Gt[br],je=tt.substring(0,5);if(je==="xaxis"||je==="yaxis"){var st=Xr[tt]._emptyCategories;st&&st()}}}else f.supplyDefaultsUpdateCalc(ke.calcdata,pr);var ft=[];if(Pt&&(ke._transitionData={},f.createTransitionData(ke),ft.push(Bt)),Xr.transition&&!rr&&(Kt.anim||nt.anim))nt.ticks&&ft.push(s.doTicksRelayout),f.doCalcdata(ke),s.doAutoRangeAndConstraints(ke),ft.push(function(){return f.transitionFromReact(ke,Kt,nt,Ot)});else if(Kt.fullReplot||nt.layoutReplot||rr)ke._fullLayout._skipDefaults=!0,ft.push(ae._doPlot);else{for(var Me in nt.arrays){var Se=nt.arrays[Me];if(Se.length){var Ke=r.getComponentMethod(Me,"drawOne");if(Ke!==T.noop)for(var Xe=0;Xe<Se.length;Xe++)Ke(ke,Se[Xe]);else{var it=r.getComponentMethod(Me,"draw");if(it===T.noop)throw new Error("cannot draw components: "+Me);it(ke)}}}ft.push(f.previousPromises),Kt.style&&ft.push(s.doTraceStyle),(Kt.colorbars||nt.colorbars)&&ft.push(s.doColorBars),nt.legend&&ft.push(s.doLegend),nt.layoutstyle&&ft.push(s.layoutStyles),nt.axrange&&ge(ft),nt.ticks&&ft.push(s.doTicksRelayout),nt.modebar&&ft.push(s.doModeBar),nt.camera&&ft.push(s.doCamera),ft.push(L)}ft.push(f.rehover,f.redrag),_t=T.syncOrAsync(ft,ke),(!_t||!_t.then)&&(_t=Promise.resolve(ke))}return _t.then(function(){return ke.emit("plotly_react",{data:Ge,layout:Je}),ke})}function Dt(ke,Ge,Je,ot,Pt,_t){var Bt=Ge.length===Je.length;if(!Pt&&!Bt)return{fullReplot:!0,calc:!0};var qt=A.traceFlags();qt.arrays={},qt.nChanges=0,qt.nChangesAnim=0;var Ot,$t;function rr(Xr){var hn=t.getTraceValObject($t,Xr);return!$t._module.animatable&&hn.anim&&(hn.anim=!1),hn}var er={getValObject:rr,flags:qt,immutable:ot,transition:Pt,newDataRevision:_t,gd:ke},pr={};for(Ot=0;Ot<Ge.length;Ot++)if(Je[Ot]){if($t=Je[Ot]._fullInput,f.hasMakesDataTransform($t)&&($t=Je[Ot]),pr[$t.uid])continue;pr[$t.uid]=1,At(Ge[Ot]._fullInput,$t,[],er)}return(qt.calc||qt.plot)&&(qt.fullReplot=!0),Pt&&qt.nChanges&&qt.nChangesAnim&&(qt.anim=qt.nChanges===qt.nChangesAnim&&Bt?"all":"some"),qt}function Xt(ke,Ge,Je,ot,Pt){var _t=A.layoutFlags();_t.arrays={},_t.rangesAltered={},_t.nChanges=0,_t.nChangesAnim=0;function Bt(Ot){return t.getLayoutValObject(Je,Ot)}var qt={getValObject:Bt,flags:_t,immutable:ot,transition:Pt,gd:ke};return At(Ge,Je,[],qt),(_t.plot||_t.calc)&&(_t.layoutReplot=!0),Pt&&_t.nChanges&&_t.nChangesAnim&&(_t.anim=_t.nChanges===_t.nChangesAnim?"all":"some"),_t}function At(ke,Ge,Je,ot){var Pt,_t,Bt,qt=ot.getValObject,Ot=ot.flags,$t=ot.immutable,rr=ot.inArray,er=ot.arrayIndex;function pr(){var pt=Pt.editType;if(rr&&pt.indexOf("arraydraw")!==-1){T.pushUnique(Ot.arrays[rr],er);return}A.update(Ot,Pt),pt!=="none"&&Ot.nChanges++,ot.transition&&Pt.anim&&Ot.nChangesAnim++,(fe.test(Bt)||pe.test(Bt))&&(Ot.rangesAltered[Je[0]]=1),ye.test(Bt)&&e(Ge,"_inputDomain").set(null),_t==="datarevision"&&(Ot.newDataRevision=1)}function Xr(pt){return pt.valType==="data_array"||pt.arrayOk}for(_t in ke){if(Ot.calc&&!ot.transition)return;var hn=ke[_t],Qr=Ge[_t],nt=Je.concat(_t);if(Bt=nt.join("."),!(_t.charAt(0)==="_"||typeof hn=="function"||hn===Qr)){if((_t==="tick0"||_t==="dtick")&&Je[0]!=="geo"){var Ht=Ge.tickmode;if(Ht==="auto"||Ht==="array"||!Ht)continue}if(!(_t==="range"&&Ge.autorange)&&!((_t==="zmin"||_t==="zmax")&&Ge.type==="contourcarpet")&&(Pt=qt(nt),!!Pt&&!(Pt._compareAsJSON&&JSON.stringify(hn)===JSON.stringify(Qr)))){var Kt=Pt.valType,Gt,br=Xr(Pt),tt=Array.isArray(hn),je=Array.isArray(Qr);if(tt&&je){var st="_input_"+_t,ft=ke[st],Me=Ge[st];if(Array.isArray(ft)&&ft===Me)continue}if(Qr===void 0)br&&tt?Ot.calc=!0:pr();else if(Pt._isLinkedToArray){var Se=[],Ke=!1;rr||(Ot.arrays[_t]=Se);var Xe=Math.min(hn.length,Qr.length),it=Math.max(hn.length,Qr.length);if(Xe!==it)if(Pt.editType==="arraydraw")Ke=!0;else{pr();continue}for(Gt=0;Gt<Xe;Gt++)At(hn[Gt],Qr[Gt],nt.concat(Gt),T.extendFlat({inArray:_t,arrayIndex:Gt},ot));if(Ke)for(Gt=Xe;Gt<it;Gt++)Se.push(Gt)}else!Kt&&T.isPlainObject(hn)?At(hn,Qr,nt,ot):br?tt&&je?($t&&(Ot.calc=!0),($t||ot.newDataRevision)&&pr()):tt!==je?Ot.calc=!0:pr():tt&&je?(hn.length!==Qr.length||String(hn)!==String(Qr))&&pr():pr()}}}for(_t in Ge)if(!(_t in ke||_t.charAt(0)==="_"||typeof Ge[_t]=="function"))if(Pt=qt(Je.concat(_t)),Xr(Pt)&&Array.isArray(Ge[_t])){Ot.calc=!0;return}else pr()}function zt(ke,Ge){var Je;for(Je in ke)if(Je.charAt(0)!=="_"){var ot=ke[Je],Pt=Ge[Je];if(ot!==Pt)if(T.isPlainObject(ot)&&T.isPlainObject(Pt)){if(zt(ot,Pt))return!0}else if(Array.isArray(ot)&&Array.isArray(Pt)){if(ot.length!==Pt.length)return!0;for(var _t=0;_t<ot.length;_t++)if(ot[_t]!==Pt[_t])if(T.isPlainObject(ot[_t])&&T.isPlainObject(Pt[_t])){if(zt(ot[_t],Pt[_t]))return!0}else return!0}else return!0}}function Ut(ke,Ge,Je){if(ke=T.getGraphDiv(ke),!T.isPlotDiv(ke))throw new Error("This element is not a Plotly plot: "+ke+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var ot=ke._transitionData;ot._frameQueue||(ot._frameQueue=[]),Je=f.supplyAnimationDefaults(Je);var Pt=Je.transition,_t=Je.frame;ot._frameWaitingCnt===void 0&&(ot._frameWaitingCnt=0);function Bt($t){return Array.isArray(Pt)?$t>=Pt.length?Pt[0]:Pt[$t]:Pt}function qt($t){return Array.isArray(_t)?$t>=_t.length?_t[0]:_t[$t]:_t}function Ot($t,rr){var er=0;return function(){if($t&&++er===rr)return $t()}}return new Promise(function($t,rr){function er(){if(ot._frameQueue.length!==0){for(;ot._frameQueue.length;){var Xe=ot._frameQueue.pop();Xe.onInterrupt&&Xe.onInterrupt()}ke.emit("plotly_animationinterrupted",[])}}function pr(Xe){if(Xe.length!==0){for(var it=0;it<Xe.length;it++){var pt;Xe[it].type==="byname"?pt=f.computeFrame(ke,Xe[it].name):pt=Xe[it].data;var vt=qt(it),St=Bt(it);St.duration=Math.min(St.duration,vt.duration);var kt={frame:pt,name:Xe[it].name,frameOpts:vt,transitionOpts:St};it===Xe.length-1&&(kt.onComplete=Ot($t,2),kt.onInterrupt=rr),ot._frameQueue.push(kt)}Je.mode==="immediate"&&(ot._lastFrameAt=-1/0),ot._animationRaf||Qr()}}function Xr(){ke.emit("plotly_animated"),window.cancelAnimationFrame(ot._animationRaf),ot._animationRaf=null}function hn(){ot._currentFrame&&ot._currentFrame.onComplete&&ot._currentFrame.onComplete();var Xe=ot._currentFrame=ot._frameQueue.shift();if(Xe){var it=Xe.name?Xe.name.toString():null;ke._fullLayout._currentFrame=it,ot._lastFrameAt=Date.now(),ot._timeToNext=Xe.frameOpts.duration,f.transition(ke,Xe.frame.data,Xe.frame.layout,_.coerceTraceIndices(ke,Xe.frame.traces),Xe.frameOpts,Xe.transitionOpts).then(function(){Xe.onComplete&&Xe.onComplete()}),ke.emit("plotly_animatingframe",{name:it,frame:Xe.frame,animation:{frame:Xe.frameOpts,transition:Xe.transitionOpts}})}else Xr()}function Qr(){ke.emit("plotly_animating"),ot._lastFrameAt=-1/0,ot._timeToNext=0,ot._runningTransitions=0,ot._currentFrame=null;var Xe=function(){ot._animationRaf=window.requestAnimationFrame(Xe),Date.now()-ot._lastFrameAt>ot._timeToNext&&hn()};Xe()}var nt=0;function Ht(Xe){return Array.isArray(Pt)?nt>=Pt.length?Xe.transitionOpts=Pt[nt]:Xe.transitionOpts=Pt[0]:Xe.transitionOpts=Pt,nt++,Xe}var Kt,Gt,br=[],tt=Ge==null,je=Array.isArray(Ge),st=!tt&&!je&&T.isPlainObject(Ge);if(st)br.push({type:"object",data:Ht(T.extendFlat({},Ge))});else if(tt||["string","number"].indexOf(typeof Ge)!==-1)for(Kt=0;Kt<ot._frames.length;Kt++)Gt=ot._frames[Kt],!!Gt&&(tt||String(Gt.group)===String(Ge))&&br.push({type:"byname",name:String(Gt.name),data:Ht({name:Gt.name})});else if(je)for(Kt=0;Kt<Ge.length;Kt++){var ft=Ge[Kt];["number","string"].indexOf(typeof ft)!==-1?(ft=String(ft),br.push({type:"byname",name:ft,data:Ht({name:ft})})):T.isPlainObject(ft)&&br.push({type:"object",data:Ht(T.extendFlat({},ft))})}for(Kt=0;Kt<br.length;Kt++)if(Gt=br[Kt],Gt.type==="byname"&&!ot._frameHash[Gt.data.name]){T.warn('animate failure: frame not found: "'+Gt.data.name+'"'),rr();return}["next","immediate"].indexOf(Je.mode)!==-1&&er(),Je.direction==="reverse"&&br.reverse();var Me=ke._fullLayout._currentFrame;if(Me&&Je.fromcurrent){var Se=-1;for(Kt=0;Kt<br.length;Kt++)if(Gt=br[Kt],Gt.type==="byname"&&Gt.name===Me){Se=Kt;break}if(Se>0&&Se<br.length-1){var Ke=[];for(Kt=0;Kt<br.length;Kt++)Gt=br[Kt],(br[Kt].type!=="byname"||Kt>Se)&&Ke.push(Gt);br=Ke}}br.length>0?pr(br):(ke.emit("plotly_animated"),$t())})}function Ct(ke,Ge,Je){if(ke=T.getGraphDiv(ke),Ge==null)return Promise.resolve();if(!T.isPlotDiv(ke))throw new Error("This element is not a Plotly plot: "+ke+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var ot,Pt,_t,Bt,qt=ke._transitionData._frames,Ot=ke._transitionData._frameHash;if(!Array.isArray(Ge))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+Ge);var $t=qt.length+Ge.length*2,rr=[],er={};for(ot=Ge.length-1;ot>=0;ot--)if(!!T.isPlainObject(Ge[ot])){var pr=Ge[ot].name,Xr=(Ot[pr]||er[pr]||{}).name,hn=Ge[ot].name,Qr=Ot[Xr]||er[Xr];Xr&&hn&&typeof hn=="number"&&Qr&&h<x&&(h++,T.warn('addFrames: overwriting frame "'+(Ot[Xr]||er[Xr]).name+'" with a frame whose name of type "number" also equates to "'+Xr+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),h===x&&T.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),er[pr]={name:pr},rr.push({frame:f.supplyFrameDefaults(Ge[ot]),index:Je&&Je[ot]!==void 0&&Je[ot]!==null?Je[ot]:$t+ot})}rr.sort(function(st,ft){return st.index>ft.index?-1:st.index<ft.index?1:0});var nt=[],Ht=[],Kt=qt.length;for(ot=rr.length-1;ot>=0;ot--){if(Pt=rr[ot].frame,typeof Pt.name=="number"&&T.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Pt.name)for(;Ot[Pt.name="frame "+ke._transitionData._counter++];);if(Ot[Pt.name]){for(_t=0;_t<qt.length&&(qt[_t]||{}).name!==Pt.name;_t++);nt.push({type:"replace",index:_t,value:Pt}),Ht.unshift({type:"replace",index:_t,value:qt[_t]})}else Bt=Math.max(0,Math.min(rr[ot].index,Kt)),nt.push({type:"insert",index:Bt,value:Pt}),Ht.unshift({type:"delete",index:Bt}),Kt++}var Gt=f.modifyFrames,br=f.modifyFrames,tt=[ke,Ht],je=[ke,nt];return n&&n.add(ke,Gt,tt,br,je),f.modifyFrames(ke,nt)}function Mt(ke,Ge){if(ke=T.getGraphDiv(ke),!T.isPlotDiv(ke))throw new Error("This element is not a Plotly plot: "+ke);var Je,ot,Pt=ke._transitionData._frames,_t=[],Bt=[];if(!Ge)for(Ge=[],Je=0;Je<Pt.length;Je++)Ge.push(Je);for(Ge=Ge.slice(),Ge.sort(),Je=Ge.length-1;Je>=0;Je--)ot=Ge[Je],_t.push({type:"delete",index:ot}),Bt.unshift({type:"insert",index:ot,value:Pt[ot]});var qt=f.modifyFrames,Ot=f.modifyFrames,$t=[ke,Bt],rr=[ke,_t];return n&&n.add(ke,qt,$t,Ot,rr),f.modifyFrames(ke,_t)}function rt(ke){ke=T.getGraphDiv(ke);var Ge=ke._fullLayout||{},Je=ke._fullData||[];return f.cleanPlot([],{},Je,Ge),f.purge(ke),a.purge(ke),Ge._container&&Ge._container.remove(),delete ke._context,ke}function ct(ke){var Ge=ke._fullLayout,Je=ke.getBoundingClientRect();if(!T.equalDomRects(Je,Ge._lastBBox)){var ot=Ge._invTransform=T.inverseTransformMatrix(T.getFullTransformMatrix(ke));Ge._invScaleX=Math.sqrt(ot[0][0]*ot[0][0]+ot[0][1]*ot[0][1]+ot[0][2]*ot[0][2]),Ge._invScaleY=Math.sqrt(ot[1][0]*ot[1][0]+ot[1][1]*ot[1][1]+ot[1][2]*ot[1][2]),Ge._lastBBox=Je}}function Ze(ke){var Ge=w.select(ke),Je=ke._fullLayout;if(Je._calcInverseTransform=ct,Je._calcInverseTransform(ke),Je._container=Ge.selectAll(".plot-container").data([0]),Je._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),Je._paperdiv=Je._container.selectAll(".svg-container").data([0]),Je._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),Je._glcontainer=Je._paperdiv.selectAll(".gl-container").data([{}]),Je._glcontainer.enter().append("div").classed("gl-container",!0),Je._paperdiv.selectAll(".main-svg").remove(),Je._paperdiv.select(".modebar-container").remove(),Je._paper=Je._paperdiv.insert("svg",":first-child").classed("main-svg",!0),Je._toppaper=Je._paperdiv.append("svg").classed("main-svg",!0),Je._modebardiv=Je._paperdiv.append("div"),delete Je._modeBar,Je._hoverpaper=Je._paperdiv.append("svg").classed("main-svg",!0),!Je._uid){var ot={};w.selectAll("defs").each(function(){this.id&&(ot[this.id.split("-")[1]]=1)}),Je._uid=T.randstr(ot)}Je._paperdiv.selectAll(".main-svg").attr(y.svgAttrs),Je._defs=Je._paper.append("defs").attr("id","defs-"+Je._uid),Je._clips=Je._defs.append("g").classed("clips",!0),Je._topdefs=Je._toppaper.append("defs").attr("id","topdefs-"+Je._uid),Je._topclips=Je._topdefs.append("g").classed("clips",!0),Je._bgLayer=Je._paper.append("g").classed("bglayer",!0),Je._draggers=Je._paper.append("g").classed("draglayer",!0);var Pt=Je._paper.append("g").classed("layer-below",!0);Je._imageLowerLayer=Pt.append("g").classed("imagelayer",!0),Je._shapeLowerLayer=Pt.append("g").classed("shapelayer",!0),Je._cartesianlayer=Je._paper.append("g").classed("cartesianlayer",!0),Je._polarlayer=Je._paper.append("g").classed("polarlayer",!0),Je._smithlayer=Je._paper.append("g").classed("smithlayer",!0),Je._ternarylayer=Je._paper.append("g").classed("ternarylayer",!0),Je._geolayer=Je._paper.append("g").classed("geolayer",!0),Je._funnelarealayer=Je._paper.append("g").classed("funnelarealayer",!0),Je._pielayer=Je._paper.append("g").classed("pielayer",!0),Je._iciclelayer=Je._paper.append("g").classed("iciclelayer",!0),Je._treemaplayer=Je._paper.append("g").classed("treemaplayer",!0),Je._sunburstlayer=Je._paper.append("g").classed("sunburstlayer",!0),Je._indicatorlayer=Je._toppaper.append("g").classed("indicatorlayer",!0),Je._glimages=Je._paper.append("g").classed("glimages",!0);var _t=Je._toppaper.append("g").classed("layer-above",!0);Je._imageUpperLayer=_t.append("g").classed("imagelayer",!0),Je._shapeUpperLayer=_t.append("g").classed("shapelayer",!0),Je._infolayer=Je._toppaper.append("g").classed("infolayer",!0),Je._menulayer=Je._toppaper.append("g").classed("menulayer",!0),Je._zoomlayer=Je._toppaper.append("g").classed("zoomlayer",!0),Je._hoverlayer=Je._hoverpaper.append("g").classed("hoverlayer",!0),Je._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),ke.emit("plotly_framework")}ae.animate=Ut,ae.addFrames=Ct,ae.deleteFrames=Mt,ae.addTraces=se,ae.deleteTraces=oe,ae.extendTraces=j,ae.moveTraces=N,ae.prependTraces=re,ae.newPlot=D,ae._doPlot=u,ae.purge=rt,ae.react=dt,ae.redraw=I,ae.relayout=ie,ae.restyle=U,ae.setPlotConfig=S,ae.update=De,ae._guiRelayout=Be(ie),ae._guiRestyle=Be(U),ae._guiUpdate=Be(De),ae._storeDirectGUIEdit=X},{"../components/color":366,"../components/drawing":388,"../constants/xmlns_namespaces":480,"../lib":503,"../lib/events":492,"../lib/queue":519,"../plots/cartesian/axes":554,"../plots/cartesian/constants":561,"../plots/cartesian/graph_interact":564,"../plots/cartesian/select":575,"../plots/plots":619,"../registry":638,"./edit_types":536,"./helpers":537,"./manage_arrays":539,"./plot_config":541,"./plot_schema":542,"./subroutines":544,"@plotly/d3":58,"fast-isnumeric":190,"has-hover":228}],541:[function(d,ne,ae){var w={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},v={};function M(T,e){for(var a in T){var n=T[a];n.valType?e[a]=n.dflt:(e[a]||(e[a]={}),M(n,e[a]))}}M(w,v),ne.exports={configAttributes:w,dfltConfig:v}},{}],542:[function(d,ne,ae){var w=d("../registry"),v=d("../lib"),M=d("../plots/attributes"),T=d("../plots/layout_attributes"),e=d("../plots/frame_attributes"),a=d("../plots/animation_attributes"),n=d("./plot_config").configAttributes,r=d("./edit_types"),t=v.extendDeepAll,f=v.isPlainObject,o=v.isArrayOrTypedArray,i=v.nestedProperty,g=v.valObjectMeta,p="_isSubplotObj",y="_isLinkedToArray",c="_arrayAttrRegexps",b="_deprecated",l=[p,y,c,b];ae.IS_SUBPLOT_OBJ=p,ae.IS_LINKED_TO_ARRAY=y,ae.DEPRECATED=b,ae.UNDERSCORE_ATTRS=l,ae.get=function(){var D={};w.allTypes.forEach(function(O){D[O]=m(O)});var R={};return Object.keys(w.transformsRegistry).forEach(function(O){R[O]=x(O)}),{defs:{valObjects:g,metaKeys:l.concat(["description","role","editType","impliedEdits"]),editType:{traces:r.traces,layout:r.layout},impliedEdits:{}},traces:D,layout:h(),transforms:R,frames:u(),animation:L(a),config:L(n)}},ae.crawl=function(D,R,O,F){var V=O||0;F=F||"",Object.keys(D).forEach(function(G){var J=D[G];if(l.indexOf(G)===-1){var Z=(F?F+".":"")+G;R(J,G,D,V,Z),!ae.isValObject(J)&&f(J)&&G!=="impliedEdits"&&ae.crawl(J,R,V+1,Z)}})},ae.isValObject=function(D){return D&&D.valType!==void 0},ae.findArrayAttributes=function(D){var R=[],O=[],F=[],V,G;function J(oe,N,U,q){O=O.slice(0,q).concat([N]),F=F.slice(0,q).concat([oe&&oe._isLinkedToArray]);var Q=oe&&(oe.valType==="data_array"||oe.arrayOk===!0)&&!(O[q-1]==="colorbar"&&(N==="ticktext"||N==="tickvals"));!Q||Z(V,0,"")}function Z(oe,N,U){var q=oe[O[N]],Q=U+O[N];if(N===O.length-1)o(q)&&R.push(G+Q);else if(F[N]){if(Array.isArray(q))for(var W=0;W<q.length;W++)f(q[W])&&Z(q[W],N+1,Q+"["+W+"].")}else f(q)&&Z(q,N+1,Q+".")}V=D,G="",ae.crawl(M,J),D._module&&D._module.attributes&&ae.crawl(D._module.attributes,J);var Y=D.transforms;if(Y)for(var j=0;j<Y.length;j++){var re=Y[j],se=re._module;se&&(G="transforms["+j+"].",V=re,ae.crawl(se.attributes,J))}return R},ae.getTraceValObject=function(D,R){var O=R[0],F=1,V,G;if(O==="transforms"){if(R.length===1)return M.transforms;var J=D.transforms;if(!Array.isArray(J)||!J.length)return!1;var Z=R[1];if(!A(Z)||Z>=J.length)return!1;V=(w.transformsRegistry[J[Z].type]||{}).attributes,G=V&&V[R[2]],F=3}else{var Y=D._module;if(Y||(Y=(w.modules[D.type||M.type.dflt]||{})._module),!Y)return!1;if(V=Y.attributes,G=V&&V[O],!G){var j=Y.basePlotModule;j&&j.attributes&&(G=j.attributes[O])}G||(G=M[O])}return s(G,R,F)},ae.getLayoutValObject=function(D,R){var O=_(D,R[0]);return s(O,R,1)};function _(D,R){var O,F,V,G,J=D._basePlotModules;if(J){var Z;for(O=0;O<J.length;O++){if(V=J[O],V.attrRegex&&V.attrRegex.test(R)){if(V.layoutAttrOverrides)return V.layoutAttrOverrides;!Z&&V.layoutAttributes&&(Z=V.layoutAttributes)}var Y=V.baseLayoutAttrOverrides;if(Y&&R in Y)return Y[R]}if(Z)return Z}var j=D._modules;if(j){for(O=0;O<j.length;O++)if(G=j[O].layoutAttributes,G&&R in G)return G[R]}for(F in w.componentsRegistry){if(V=w.componentsRegistry[F],V.name==="colorscale"&&R.indexOf("coloraxis")===0)return V.layoutAttributes[R];if(!V.schema&&R===V.name)return V.layoutAttributes}return R in T?T[R]:!1}function s(D,R,O){if(!D)return!1;if(D._isLinkedToArray){if(A(R[O]))O++;else if(O<R.length)return!1}for(;O<R.length;O++){var F=D[R[O]];if(f(F))D=F;else break;if(O===R.length-1)break;if(D._isLinkedToArray){if(O++,!A(R[O]))return!1}else if(D.valType==="info_array"){O++;var V=R[O];if(!A(V))return!1;var G=D.items;if(Array.isArray(G)){if(V>=G.length)return!1;if(D.dimensions===2){if(O++,R.length===O)return D;var J=R[O];if(!A(J))return!1;D=G[V][J]}else D=G[V]}else D=G}}return D}function A(D){return D===Math.round(D)&&D>=0}function m(D){var R,O;R=w.modules[D]._module,O=R.basePlotModule;var F={};F.type=null;var V=t({},M),G=t({},R.attributes);ae.crawl(G,function(Y,j,re,se,oe){i(V,oe).set(void 0),Y===void 0&&i(G,oe).set(void 0)}),t(F,V),w.traceIs(D,"noOpacity")&&delete F.opacity,w.traceIs(D,"showLegend")||(delete F.showlegend,delete F.legendgroup),w.traceIs(D,"noHover")&&(delete F.hoverinfo,delete F.hoverlabel),R.selectPoints||delete F.selectedpoints,t(F,G),O.attributes&&t(F,O.attributes),F.type=D;var J={meta:R.meta||{},categories:R.categories||{},animatable:Boolean(R.animatable),type:D,attributes:L(F)};if(R.layoutAttributes){var Z={};t(Z,R.layoutAttributes),J.layoutAttributes=L(Z)}return R.animatable||ae.crawl(J,function(Y){ae.isValObject(Y)&&"anim"in Y&&delete Y.anim}),J}function h(){var D={},R,O;t(D,T);for(R in w.subplotsRegistry)if(O=w.subplotsRegistry[R],!!O.layoutAttributes)if(Array.isArray(O.attr))for(var F=0;F<O.attr.length;F++)z(D,O,O.attr[F]);else{var V=O.attr==="subplot"?O.name:O.attr;z(D,O,V)}for(R in w.componentsRegistry){O=w.componentsRegistry[R];var G=O.schema;if(G&&(G.subplots||G.layout)){var J=G.subplots;if(J&&J.xaxis&&!J.yaxis)for(var Z in J.xaxis)delete D.yaxis[Z]}else O.name==="colorscale"?t(D,O.layoutAttributes):O.layoutAttributes&&I(D,O.layoutAttributes,O.name)}return{layoutAttributes:L(D)}}function x(D){var R=w.transformsRegistry[D],O=t({},R.attributes);return Object.keys(w.componentsRegistry).forEach(function(F){var V=w.componentsRegistry[F];V.schema&&V.schema.transforms&&V.schema.transforms[D]&&Object.keys(V.schema.transforms[D]).forEach(function(G){I(O,V.schema.transforms[D][G],G)})}),{attributes:L(O)}}function u(){var D={frames:t({},e)};return L(D),D.frames}function L(D){return S(D),k(D),P(D),D}function S(D){function R(F){return{valType:"string",editType:"none"}}function O(F,V,G){ae.isValObject(F)?(F.arrayOk===!0||F.valType==="data_array")&&(G[V+"src"]=R()):f(F)&&(F.role="object")}ae.crawl(D,O)}function k(D){function R(O,F,V){if(!!O){var G=O[y];!G||(delete O[y],V[F]={items:{}},V[F].items[G]=O,V[F].role="object")}}ae.crawl(D,R)}function P(D){function R(O){for(var F in O)if(f(O[F]))R(O[F]);else if(Array.isArray(O[F]))for(var V=0;V<O[F].length;V++)R(O[F][V]);else O[F]instanceof RegExp&&(O[F]=O[F].toString())}R(D)}function z(D,R,O){var F=i(D,O),V=t({},R.layoutAttributes);V[p]=!0,F.set(V)}function I(D,R,O){var F=i(D,O);F.set(t(F.get()||{},R))}},{"../lib":503,"../plots/animation_attributes":548,"../plots/attributes":550,"../plots/frame_attributes":586,"../plots/layout_attributes":610,"../registry":638,"./edit_types":536,"./plot_config":541}],543:[function(d,ne,ae){var w=d("../lib"),v=d("../plots/attributes"),M="templateitemname",T={name:{valType:"string",editType:"none"}};T[M]={valType:"string",editType:"calc"},ae.templatedArray=function(n,r){return r._isLinkedToArray=n,r.name=T.name,r[M]=T[M],r},ae.traceTemplater=function(n){var r={},t,f;for(t in n)f=n[t],Array.isArray(f)&&f.length&&(r[t]=0);function o(i){t=w.coerce(i,{},v,"type");var g={type:t,_template:null};if(t in r){f=n[t];var p=r[t]%f.length;r[t]++,g._template=f[p]}return g}return{newTrace:o}},ae.newContainer=function(n,r,t){var f=n._template,o=f&&(f[r]||t&&f[t]);w.isPlainObject(o)||(o=null);var i=n[r]={_template:o};return i},ae.arrayTemplater=function(n,r,t){var f=n._template,o=f&&f[a(r)],i=f&&f[r];(!Array.isArray(i)||!i.length)&&(i=[]);var g={};function p(c){var b={name:c.name,_input:c},l=b[M]=c[M];if(!e(l))return b._template=o,b;for(var _=0;_<i.length;_++){var s=i[_];if(s.name===l)return g[l]=1,b._template=s,b}return b[t]=c[t]||!1,b._template=!1,b}function y(){for(var c=[],b=0;b<i.length;b++){var l=i[b],_=l.name;if(e(_)&&!g[_]){var s={_template:l,name:_,_input:{_templateitemname:_}};s[M]=l[M],c.push(s),g[_]=1}}return c}return{newItem:p,defaultItems:y}};function e(n){return n&&typeof n=="string"}function a(n){var r=n.length-1;return n.charAt(r)!=="s"&&w.warn("bad argument to arrayDefaultKey: "+n),n.substr(0,n.length-1)+"defaults"}ae.arrayDefaultKey=a,ae.arrayEditor=function(n,r,t){var f=(w.nestedProperty(n,r).get()||[]).length,o=t._index,i=o>=f&&(t._input||{})._templateitemname;i&&(o=f);var g=r+"["+o+"]",p;function y(){p={},i&&(p[g]={},p[g][M]=i)}y();function c(s,A){p[s]=A}function b(s,A){i?w.nestedProperty(p[g],s).set(A):p[g+"."+s]=A}function l(){var s=p;return y(),s}function _(s,A){s&&b(s,A);var m=l();for(var h in m)w.nestedProperty(n,h).set(m[h])}return{modifyBase:c,modifyItem:b,getUpdateObj:l,applyUpdate:_}}},{"../lib":503,"../plots/attributes":550}],544:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../registry"),M=d("../plots/plots"),T=d("../lib"),e=d("../lib/clear_gl_canvases"),a=d("../components/color"),n=d("../components/drawing"),r=d("../components/titles"),t=d("../components/modebar"),f=d("../plots/cartesian/axes"),o=d("../constants/alignment"),i=d("../plots/cartesian/constraints"),g=i.enforce,p=i.clean,y=d("../plots/cartesian/autorange").doAutoRange,c="start",b="middle",l="end";ae.layoutStyles=function(k){return T.syncOrAsync([M.doAutoMargin,s],k)};function _(k,P,z){for(var I=0;I<z.length;I++){var D=z[I][0],R=z[I][1];if(!(D[0]>=k[1]||D[1]<=k[0])&&R[0]<P[1]&&R[1]>P[0])return!0}return!1}function s(k){var P=k._fullLayout,z=P._size,I=z.p,D=f.list(k,"",!0),R,O,F,V,G,J;if(P._paperdiv.style({width:k._context.responsive&&P.autosize&&!k._context._hasZeroWidth&&!k.layout.width?"100%":P.width+"px",height:k._context.responsive&&P.autosize&&!k._context._hasZeroHeight&&!k.layout.height?"100%":P.height+"px"}).selectAll(".main-svg").call(n.setSize,P.width,P.height),k._context.setBackground(k,P.paper_bgcolor),ae.drawMainTitle(k),t.manage(k),!P._has("cartesian"))return M.previousPromises(k);function Z(zt,Ut,Ct){var Mt=zt._lw/2;if(zt._id.charAt(0)==="x"){if(Ut){if(Ct==="top")return Ut._offset-I-Mt}else return z.t+z.h*(1-(zt.position||0))+Mt%1;return Ut._offset+Ut._length+I+Mt}if(Ut){if(Ct==="right")return Ut._offset+Ut._length+I+Mt}else return z.l+z.w*(zt.position||0)+Mt%1;return Ut._offset-I-Mt}for(R=0;R<D.length;R++){V=D[R];var Y=V._anchorAxis;V._linepositions={},V._lw=n.crispRound(k,V.linewidth,1),V._mainLinePosition=Z(V,Y,V.side),V._mainMirrorPosition=V.mirror&&Y?Z(V,Y,o.OPPOSITE_SIDE[V.side]):null}var j=[],re=[],se=[],oe=a.opacity(P.paper_bgcolor)===1&&a.opacity(P.plot_bgcolor)===1&&P.paper_bgcolor===P.plot_bgcolor;for(O in P._plots)if(F=P._plots[O],F.mainplot)F.bg&&F.bg.remove(),F.bg=void 0;else{var N=F.xaxis.domain,U=F.yaxis.domain,q=F.plotgroup;if(_(N,U,se)){var Q=q.node(),W=F.bg=T.ensureSingle(q,"rect","bg");Q.insertBefore(W.node(),Q.childNodes[0]),re.push(O)}else q.select("rect.bg").remove(),se.push([N,U]),oe||(j.push(O),re.push(O))}var X=P._bgLayer.selectAll(".bg").data(j);for(X.enter().append("rect").classed("bg",!0),X.exit().remove(),X.each(function(zt){P._plots[zt].bg=w.select(this)}),R=0;R<re.length;R++)F=P._plots[re[R]],G=F.xaxis,J=F.yaxis,F.bg&&G._offset!==void 0&&J._offset!==void 0&&F.bg.call(n.setRect,G._offset-I,J._offset-I,G._length+2*I,J._length+2*I).call(a.fill,P.plot_bgcolor).style("stroke-width",0);if(!P._hasOnlyLargeSploms)for(O in P._plots){F=P._plots[O],G=F.xaxis,J=F.yaxis;var ee=F.clipId="clip"+P._uid+O+"plot",te=T.ensureSingleById(P._clips,"clipPath",ee,function(zt){zt.classed("plotclip",!0).append("rect")});F.clipRect=te.select("rect").attr({width:G._length,height:J._length}),n.setTranslate(F.plot,G._offset,J._offset);var ie,le;F._hasClipOnAxisFalse?(ie=null,le=ee):(ie=ee,le=null),n.setClipUrl(F.plot,ie,k),F.layerClipId=le}var ge,fe,pe,ye,Te,_e,De,Be,Ue,xe,Pe,Ve,Qe;function Fe(zt){return"M"+ge+","+zt+"H"+fe}function Le(zt){return"M"+G._offset+","+zt+"h"+G._length}function Ne(zt){return"M"+zt+","+Be+"V"+De}function dt(zt){return"M"+zt+","+J._offset+"v"+J._length}function Dt(zt,Ut,Ct){if(!zt.showline||O!==zt._mainSubplot)return"";if(!zt._anchorAxis)return Ct(zt._mainLinePosition);var Mt=Ut(zt._mainLinePosition);return zt.mirror&&(Mt+=Ut(zt._mainMirrorPosition)),Mt}for(O in P._plots){F=P._plots[O],G=F.xaxis,J=F.yaxis;var Xt="M0,0";A(G,O)&&(Te=h(G,"left",J,D),ge=G._offset-(Te?I+Te:0),_e=h(G,"right",J,D),fe=G._offset+G._length+(_e?I+_e:0),pe=Z(G,J,"bottom"),ye=Z(G,J,"top"),Qe=!G._anchorAxis||O!==G._mainSubplot,Qe&&(G.mirror==="allticks"||G.mirror==="all")&&(G._linepositions[O]=[pe,ye]),Xt=Dt(G,Fe,Le),Qe&&G.showline&&(G.mirror==="all"||G.mirror==="allticks")&&(Xt+=Fe(pe)+Fe(ye)),F.xlines.style("stroke-width",G._lw+"px").call(a.stroke,G.showline?G.linecolor:"rgba(0,0,0,0)")),F.xlines.attr("d",Xt);var At="M0,0";A(J,O)&&(Pe=h(J,"bottom",G,D),De=J._offset+J._length+(Pe?I:0),Ve=h(J,"top",G,D),Be=J._offset-(Ve?I:0),Ue=Z(J,G,"left"),xe=Z(J,G,"right"),Qe=!J._anchorAxis||O!==J._mainSubplot,Qe&&(J.mirror==="allticks"||J.mirror==="all")&&(J._linepositions[O]=[Ue,xe]),At=Dt(J,Ne,dt),Qe&&J.showline&&(J.mirror==="all"||J.mirror==="allticks")&&(At+=Ne(Ue)+Ne(xe)),F.ylines.style("stroke-width",J._lw+"px").call(a.stroke,J.showline?J.linecolor:"rgba(0,0,0,0)")),F.ylines.attr("d",At)}return f.makeClipPaths(k),M.previousPromises(k)}function A(k,P){return(k.ticks||k.showline)&&(P===k._mainSubplot||k.mirror==="all"||k.mirror==="allticks")}function m(k,P,z){if(!z.showline||!z._lw)return!1;if(z.mirror==="all"||z.mirror==="allticks")return!0;var I=z._anchorAxis;if(!I)return!1;var D=o.FROM_BL[P];return z.side===P?I.domain[D]===k.domain[D]:z.mirror&&I.domain[1-D]===k.domain[1-D]}function h(k,P,z,I){if(m(k,P,z))return z._lw;for(var D=0;D<I.length;D++){var R=I[D];if(R._mainAxis===z._mainAxis&&m(k,P,R))return R._lw}return 0}ae.drawMainTitle=function(k){var P=k._fullLayout,z=L(P),I=S(P);r.draw(k,"gtitle",{propContainer:P,propName:"title.text",placeholder:P._dfltTitle.plot,attributes:{x:x(P,z),y:u(P,I),"text-anchor":z,dy:I}})};function x(k,P){var z=k.title,I=k._size,D=0;switch(P===c?D=z.pad.l:P===l&&(D=-z.pad.r),z.xref){case"paper":return I.l+I.w*z.x+D;case"container":default:return k.width*z.x+D}}function u(k,P){var z=k.title,I=k._size,D=0;if(P==="0em"||!P?D=-z.pad.b:P===o.CAP_SHIFT+"em"&&(D=z.pad.t),z.y==="auto")return I.t/2;switch(z.yref){case"paper":return I.t+I.h-I.h*z.y+D;case"container":default:return k.height-k.height*z.y+D}}function L(k){var P=k.title,z=b;return T.isRightAnchor(P)?z=l:T.isLeftAnchor(P)&&(z=c),z}function S(k){var P=k.title,z="0em";return T.isTopAnchor(P)?z=o.CAP_SHIFT+"em":T.isMiddleAnchor(P)&&(z=o.MID_SHIFT+"em"),z}ae.doTraceStyle=function(k){var P=k.calcdata,z=[],I;for(I=0;I<P.length;I++){var D=P[I],R=D[0]||{},O=R.trace||{},F=O._module||{},V=F.arraysToCalcdata;V&&V(D,O);var G=F.editStyle;G&&z.push({fn:G,cd0:R})}if(z.length){for(I=0;I<z.length;I++){var J=z[I];J.fn(k,J.cd0)}e(k),ae.redrawReglTraces(k)}return M.style(k),v.getComponentMethod("legend","draw")(k),M.previousPromises(k)},ae.doColorBars=function(k){return v.getComponentMethod("colorbar","draw")(k),M.previousPromises(k)},ae.layoutReplot=function(k){var P=k.layout;return k.layout=void 0,v.call("_doPlot",k,"",P)},ae.doLegend=function(k){return v.getComponentMethod("legend","draw")(k),M.previousPromises(k)},ae.doTicksRelayout=function(k){return f.draw(k,"redraw"),k._fullLayout._hasOnlyLargeSploms&&(v.subplotsRegistry.splom.updateGrid(k),e(k),ae.redrawReglTraces(k)),ae.drawMainTitle(k),M.previousPromises(k)},ae.doModeBar=function(k){var P=k._fullLayout;t.manage(k);for(var z=0;z<P._basePlotModules.length;z++){var I=P._basePlotModules[z].updateFx;I&&I(k)}return M.previousPromises(k)},ae.doCamera=function(k){for(var P=k._fullLayout,z=P._subplots.gl3d,I=0;I<z.length;I++){var D=P[z[I]],R=D._scene;R.setViewport(D)}},ae.drawData=function(k){var P=k._fullLayout;e(k);for(var z=P._basePlotModules,I=0;I<z.length;I++)z[I].plot(k);return ae.redrawReglTraces(k),M.style(k),v.getComponentMethod("shapes","draw")(k),v.getComponentMethod("annotations","draw")(k),v.getComponentMethod("images","draw")(k),P._replotting=!1,M.previousPromises(k)},ae.redrawReglTraces=function(k){var P=k._fullLayout;if(P._has("regl")){var z=k._fullData,I=[],D=[],R,O;for(P._hasOnlyLargeSploms&&P._splomGrid.draw(),R=0;R<z.length;R++){var F=z[R];F.visible===!0&&F._length!==0&&(F.type==="splom"?P._splomScenes[F.uid].draw():F.type==="scattergl"?T.pushUnique(I,F.xaxis+F.yaxis):F.type==="scatterpolargl"&&T.pushUnique(D,F.subplot))}for(R=0;R<I.length;R++)O=P._plots[I[R]],O._scene&&O._scene.draw();for(R=0;R<D.length;R++)O=P[D[R]]._subplot,O._scene&&O._scene.draw()}},ae.doAutoRangeAndConstraints=function(k){for(var P=f.list(k,"",!0),z,I={},D=0;D<P.length;D++)if(z=P[D],!I[z._id]){I[z._id]=1,p(k,z),y(k,z);var R=z._matchGroup;if(R)for(var O in R){var F=f.getFromId(k,O);y(k,F,z.range),I[O]=1}}g(k)},ae.finalDraw=function(k){v.getComponentMethod("rangeslider","draw")(k),v.getComponentMethod("rangeselector","draw")(k)},ae.drawMarginPushers=function(k){v.getComponentMethod("legend","draw")(k),v.getComponentMethod("rangeselector","draw")(k),v.getComponentMethod("sliders","draw")(k),v.getComponentMethod("updatemenus","draw")(k),v.getComponentMethod("colorbar","draw")(k)}},{"../components/color":366,"../components/drawing":388,"../components/modebar":429,"../components/titles":464,"../constants/alignment":471,"../lib":503,"../lib/clear_gl_canvases":487,"../plots/cartesian/autorange":553,"../plots/cartesian/axes":554,"../plots/cartesian/constraints":562,"../plots/plots":619,"../registry":638,"@plotly/d3":58}],545:[function(d,ne,ae){var w=d("../lib"),v=w.isPlainObject,M=d("./plot_schema"),T=d("../plots/plots"),e=d("../plots/attributes"),a=d("./plot_template"),n=d("./plot_config").dfltConfig;ae.makeTemplate=function(c){c=w.isPlainObject(c)?c:w.getGraphDiv(c),c=w.extendDeep({_context:n},{data:c.data,layout:c.layout}),T.supplyDefaults(c);var b=c.data||[],l=c.layout||{};l._basePlotModules=c._fullLayout._basePlotModules,l._modules=c._fullLayout._modules;var _={data:{},layout:{}};b.forEach(function(P){var z={};f(P,z,i.bind(null,P));var I=w.coerce(P,{},e,"type"),D=_.data[I];D||(D=_.data[I]=[]),D.push(z)}),f(l,_.layout,o.bind(null,l)),delete _.layout.template;var s=l.template;if(v(s)){var A=s.layout,m,h,x,u,L,S;v(A)&&r(A,_.layout);var k=s.data;if(v(k)){for(h in _.data)if(x=k[h],Array.isArray(x)){for(L=_.data[h],S=L.length,u=x.length,m=0;m<S;m++)r(x[m%u],L[m]);for(m=S;m<u;m++)L.push(w.extendDeep({},x[m]))}for(h in k)h in _.data||(_.data[h]=w.extendDeep([],k[h]))}}return _};function r(c,b){c=w.extendDeep({},c);var l=Object.keys(c).sort(),_,s;function A(L,S,k){if(v(S)&&v(L))r(L,S);else if(Array.isArray(S)&&Array.isArray(L)){var P=a.arrayTemplater({_template:c},k);for(s=0;s<S.length;s++){var z=S[s],I=P.newItem(z)._template;I&&r(I,z)}var D=P.defaultItems();for(s=0;s<D.length;s++)S.push(D[s]._template);for(s=0;s<S.length;s++)delete S[s].templateitemname}}for(_=0;_<l.length;_++){var m=l[_],h=c[m];if(m in b?A(h,b[m],m):b[m]=h,t(m)===m)for(var x in b){var u=t(x);x!==u&&u===m&&!(x in c)&&A(h,b[x],m)}}}function t(c){return c.replace(/[0-9]+$/,"")}function f(c,b,l,_,s){var A=s&&l(s);for(var m in c){var h=c[m],x=g(c,m,_),u=g(c,m,s),L=l(u);if(!L){var S=t(m);S!==m&&(u=g(c,S,s),L=l(u))}if(!(A&&A===L)&&!(!L||L._noTemplating||L.valType==="data_array"||L.arrayOk&&Array.isArray(h)))if(!L.valType&&v(h))f(h,b,l,x,u);else if(L._isLinkedToArray&&Array.isArray(h))for(var k=!1,P=0,z={},I=0;I<h.length;I++){var D=h[I];if(v(D)){var R=D.name;if(R)z[R]||(f(D,b,l,g(h,P,x),g(h,P,u)),P++,z[R]=1);else if(!k){var O=a.arrayDefaultKey(m),F=g(c,O,_),V=g(h,P,x);f(D,b,l,V,g(h,P,u));var G=w.nestedProperty(b,V),J=w.nestedProperty(b,F);J.set(G.get()),G.set(null),k=!0}}}else{var Z=w.nestedProperty(b,x);Z.set(h)}}}function o(c,b){return M.getLayoutValObject(c,w.nestedProperty({},b).parts)}function i(c,b){return M.getTraceValObject(c,w.nestedProperty({},b).parts)}function g(c,b,l){var _;return l?Array.isArray(c)?_=l+"["+b+"]":_=l+"."+b:_=b,_}ae.validateTemplate=function(c,b){var l=w.extendDeep({},{_context:n,data:c.data,layout:c.layout}),_=l.layout||{};v(b)||(b=_.template||{});var s=b.layout,A=b.data,m=[];l.layout=_,l.layout.template=b,T.supplyDefaults(l);var h=l._fullLayout,x=l._fullData,u={};function L(F,V){for(var G in F)if(G.charAt(0)!=="_"&&v(F[G])){var J=t(G),Z=[],Y;for(Y=0;Y<V.length;Y++)Z.push(g(F,G,V[Y])),J!==G&&Z.push(g(F,J,V[Y]));for(Y=0;Y<Z.length;Y++)u[Z[Y]]=1;L(F[G],Z)}}function S(F,V){for(var G in F)if(G.indexOf("defaults")===-1&&v(F[G])){var J=g(F,G,V);u[J]?S(F[G],J):m.push({code:"unused",path:J})}}if(v(s)?(L(h,["layout"]),S(s,"layout")):m.push({code:"layout"}),!v(A))m.push({code:"data"});else{for(var k={},P,z=0;z<x.length;z++){var I=x[z];P=I.type,k[P]=(k[P]||0)+1,I._fullInput._template||m.push({code:"missing",index:I._fullInput.index,traceType:P})}for(P in A){var D=A[P].length,R=k[P]||0;D>R?m.push({code:"unused",traceType:P,templateCount:D,dataCount:R}):R>D&&m.push({code:"reused",traceType:P,templateCount:D,dataCount:R})}}function O(F,V){for(var G in F)if(G.charAt(0)!=="_"){var J=F[G],Z=g(F,G,V);v(J)?(Array.isArray(F)&&J._template===!1&&J.templateitemname&&m.push({code:"missing",path:Z,templateitemname:J.templateitemname}),O(J,Z)):Array.isArray(J)&&p(J)&&O(J,Z)}}if(O({data:x,layout:h},""),m.length)return m.map(y)};function p(c){for(var b=0;b<c.length;b++)if(v(c[b]))return!0}function y(c){var b;switch(c.code){case"data":b="The template has no key data.";break;case"layout":b="The template has no key layout.";break;case"missing":c.path?b="There are no templates for item "+c.path+" with name "+c.templateitemname:b="There are no templates for trace "+c.index+", of type "+c.traceType+".";break;case"unused":c.path?b="The template item at "+c.path+" was not used in constructing the plot.":c.dataCount?b="Some of the templates of type "+c.traceType+" were not used. The template has "+c.templateCount+" traces, the data only has "+c.dataCount+" of this type.":b="The template has "+c.templateCount+" traces of type "+c.traceType+" but there are none in the data.";break;case"reused":b="Some of the templates of type "+c.traceType+" were used more than once. The template has "+c.templateCount+" traces, the data has "+c.dataCount+" of this type.";break}return c.msg=b,c}},{"../lib":503,"../plots/attributes":550,"../plots/plots":619,"./plot_config":541,"./plot_schema":542,"./plot_template":543}],546:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("./plot_api"),M=d("../plots/plots"),T=d("../lib"),e=d("../snapshot/helpers"),a=d("../snapshot/tosvg"),n=d("../snapshot/svgtoimg"),r=d("../version").version,t={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function f(o,i){i=i||{};var g,p,y,c;T.isPlainObject(o)?(g=o.data||[],p=o.layout||{},y=o.config||{},c={}):(o=T.getGraphDiv(o),g=T.extendDeep([],o.data),p=T.extendDeep({},o.layout),y=o._context,c=o._fullLayout||{});function b(R){return!(R in i)||T.validate(i[R],t[R])}if(!b("width")&&i.width!==null||!b("height")&&i.height!==null)throw new Error("Height and width should be pixel values.");if(!b("format"))throw new Error("Export format is not "+T.join2(t.format.values,", "," or ")+".");var l={};function _(R,O){return T.coerce(i,l,t,R,O)}var s=_("format"),A=_("width"),m=_("height"),h=_("scale"),x=_("setBackground"),u=_("imageDataOnly"),L=document.createElement("div");L.style.position="absolute",L.style.left="-5000px",document.body.appendChild(L);var S=T.extendFlat({},p);A?S.width=A:i.width===null&&w(c.width)&&(S.width=c.width),m?S.height=m:i.height===null&&w(c.height)&&(S.height=c.height);var k=T.extendFlat({},y,{_exportedPlot:!0,staticPlot:!0,setBackground:x}),P=e.getRedrawFunc(L);function z(){return new Promise(function(R){setTimeout(R,e.getDelay(L._fullLayout))})}function I(){return new Promise(function(R,O){var F=a(L,s,h),V=L._fullLayout.width,G=L._fullLayout.height;function J(){v.purge(L),document.body.removeChild(L)}if(s==="full-json"){var Z=M.graphJson(L,!1,"keepdata","object",!0,!0);return Z.version=r,Z=JSON.stringify(Z),J(),R(u?Z:e.encodeJSON(Z))}if(J(),s==="svg")return R(u?F:e.encodeSVG(F));var Y=document.createElement("canvas");Y.id=T.randstr(),n({format:s,width:V,height:G,scale:h,canvas:Y,svg:F,promise:!0}).then(R).catch(O)})}function D(R){return u?R.replace(e.IMAGE_URL_PREFIX,""):R}return new Promise(function(R,O){v.newPlot(L,g,S,k).then(P).then(z).then(I).then(function(F){R(D(F))}).catch(function(F){O(F)})})}ne.exports=f},{"../lib":503,"../plots/plots":619,"../snapshot/helpers":642,"../snapshot/svgtoimg":644,"../snapshot/tosvg":646,"../version":1123,"./plot_api":540,"fast-isnumeric":190}],547:[function(d,ne,ae){var w=d("../lib"),v=d("../plots/plots"),M=d("./plot_schema"),T=d("./plot_config").dfltConfig,e=w.isPlainObject,a=Array.isArray,n=w.isArrayOrTypedArray;ne.exports=function(_,s){_===void 0&&(_=[]),s===void 0&&(s={});var A=M.get(),m=[],h={_context:w.extendFlat({},T)},x,u;a(_)?(h.data=w.extendDeep([],_),x=_):(h.data=[],x=[],m.push(i("array","data"))),e(s)?(h.layout=w.extendDeep({},s),u=s):(h.layout={},u={},arguments.length>1&&m.push(i("object","layout"))),v.supplyDefaults(h);for(var L=h._fullData,S=x.length,k=0;k<S;k++){var P=x[k],z=["data",k];if(!e(P)){m.push(i("object",z));continue}var I=L[k],D=I.type,R=A.traces[D].attributes;R.type={valType:"enumerated",values:[D]},I.visible===!1&&P.visible!==!1&&m.push(i("invisible",z)),r(P,I,R,m,z);var O=P.transforms,F=I.transforms;if(O){a(O)||m.push(i("array",z,["transforms"])),z.push("transforms");for(var V=0;V<O.length;V++){var G=["transforms",V],J=O[V].type;if(!e(O[V])){m.push(i("object",z,G));continue}var Z=A.transforms[J]?A.transforms[J].attributes:{};Z.type={valType:"enumerated",values:Object.keys(A.transforms)},r(O[V],F[V],Z,m,z,G)}}}var Y=h._fullLayout,j=t(A,L);return r(u,Y,j,m,"layout"),m.length===0?void 0:m};function r(l,_,s,A,m,h){h=h||[];for(var x=Object.keys(l),u=0;u<x.length;u++){var L=x[u];if(L!=="transforms"){var S=h.slice();S.push(L);var k=l[L],P=_[L],z=p(s,L),I=(z||{}).valType,D=I==="info_array",R=I==="colorscale",O=(z||{}).items;if(!g(s,L))A.push(i("schema",m,S));else if(e(k)&&e(P)&&I!=="any")r(k,P,z,A,m,S);else if(D&&a(k)){k.length>P.length&&A.push(i("unused",m,S.concat(P.length)));var F=P.length,V=Array.isArray(O);V&&(F=Math.min(F,O.length));var G,J,Z,Y,j;if(z.dimensions===2)for(J=0;J<F;J++)if(a(k[J])){k[J].length>P[J].length&&A.push(i("unused",m,S.concat(J,P[J].length)));var re=P[J].length;for(G=0;G<(V?Math.min(re,O[J].length):re);G++)Z=V?O[J][G]:O,Y=k[J][G],j=P[J][G],w.validate(Y,Z)?j!==Y&&j!==+Y&&A.push(i("dynamic",m,S.concat(J,G),Y,j)):A.push(i("value",m,S.concat(J,G),Y))}else A.push(i("array",m,S.concat(J),k[J]));else for(J=0;J<F;J++)Z=V?O[J]:O,Y=k[J],j=P[J],w.validate(Y,Z)?j!==Y&&j!==+Y&&A.push(i("dynamic",m,S.concat(J),Y,j)):A.push(i("value",m,S.concat(J),Y))}else if(z.items&&!D&&a(k)){var se=O[Object.keys(O)[0]],oe=[],N,U;for(N=0;N<P.length;N++){var q=P[N]._index||N;if(U=S.slice(),U.push(q),e(k[q])&&e(P[N])){oe.push(q);var Q=k[q],W=P[N];e(Q)&&Q.visible!==!1&&W.visible===!1?A.push(i("invisible",m,U)):r(Q,W,se,A,m,U)}}for(N=0;N<k.length;N++)U=S.slice(),U.push(N),e(k[N])?oe.indexOf(N)===-1&&A.push(i("unused",m,U)):A.push(i("object",m,U,k[N]))}else!e(k)&&e(P)?A.push(i("object",m,S,k)):!n(k)&&n(P)&&!D&&!R?A.push(i("array",m,S,k)):L in _?w.validate(k,z)?z.valType==="enumerated"&&(z.coerceNumber&&k!==+P||k!==P)&&A.push(i("dynamic",m,S,k,P)):A.push(i("value",m,S,k)):A.push(i("unused",m,S,k))}}return A}function t(l,_){for(var s=l.layout.layoutAttributes,A=0;A<_.length;A++){var m=_[A],h=l.traces[m.type],x=h.layoutAttributes;x&&(m.subplot?w.extendFlat(s[h.attributes.subplot.dflt],x):w.extendFlat(s,x))}return s}var f={object:function(l,_){var s;return l==="layout"&&_===""?s="The layout argument":l[0]==="data"&&_===""?s="Trace "+l[1]+" in the data argument":s=o(l)+"key "+_,s+" must be linked to an object container"},array:function(l,_){var s;return l==="data"?s="The data argument":s=o(l)+"key "+_,s+" must be linked to an array container"},schema:function(l,_){return o(l)+"key "+_+" is not part of the schema"},unused:function(l,_,s){var A=e(s)?"container":"key";return o(l)+A+" "+_+" did not get coerced"},dynamic:function(l,_,s,A){return[o(l)+"key",_,"(set to '"+s+"')","got reset to","'"+A+"'","during defaults."].join(" ")},invisible:function(l,_){return(_?o(l)+"item "+_:"Trace "+l[1])+" got defaulted to be not visible"},value:function(l,_,s){return[o(l)+"key "+_,"is set to an invalid value ("+s+")"].join(" ")}};function o(l){return a(l)?"In data trace "+l[1]+", ":"In "+l+", "}function i(l,_,s,A,m){s=s||"";var h,x;a(_)?(h=_[0],x=_[1]):(h=_,x=null);var u=b(s),L=f[l](_,u,A,m);return w.log(L),{code:l,container:h,trace:x,path:s,astr:u,msg:L}}function g(l,_){var s=c(_),A=s.keyMinusId,m=s.id;return A in l&&l[A]._isSubplotObj&&m?!0:_ in l}function p(l,_){if(_ in l)return l[_];var s=c(_);return l[s.keyMinusId]}var y=w.counterRegex("([a-z]+)");function c(l){var _=l.match(y);return{keyMinusId:_&&_[1],id:_&&_[2]}}function b(l){if(!a(l))return String(l);for(var _="",s=0;s<l.length;s++){var A=l[s];typeof A=="number"?_=_.substr(0,_.length-1)+"["+A+"]":_+=A,s<l.length-1&&(_+=".")}return _}},{"../lib":503,"../plots/plots":619,"./plot_config":541,"./plot_schema":542}],548:[function(d,ne,ae){ne.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],549:[function(d,ne,ae){var w=d("../lib"),v=d("../plot_api/plot_template");ne.exports=function(T,e,a){var n=a.name,r=a.inclusionAttr||"visible",t=e[n],f=w.isArrayOrTypedArray(T[n])?T[n]:[],o=e[n]=[],i=v.arrayTemplater(e,n,r),g,p;for(g=0;g<f.length;g++){var y=f[g];w.isPlainObject(y)?p=i.newItem(y):(p=i.newItem({}),p[r]=!1),p._index=g,p[r]!==!1&&a.handleItemDefaults(y,p,e,a),o.push(p)}var c=i.defaultItems();for(g=0;g<c.length;g++)p=c[g],p._index=o.length,a.handleItemDefaults({},p,e,a,{}),o.push(p);if(w.isArrayOrTypedArray(t)){var b=Math.min(t.length,o.length);for(g=0;g<b;g++)w.relinkPrivateKeys(o[g],t[g])}return o}},{"../lib":503,"../plot_api/plot_template":543}],550:[function(d,ne,ae){var w=d("./font_attributes"),v=d("../components/fx/attributes");ne.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:w({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:v.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":397,"./font_attributes":585}],551:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("../../lib"),M=v.dateTime2ms,T=v.incrementMonth,e=d("../../constants/numerical"),a=e.ONEAVGMONTH;ne.exports=function(r,t,f,o){if(t.type!=="date")return{vals:o};var i=r[f+"periodalignment"];if(!i)return{vals:o};var g=r[f+"period"],p;if(w(g)){if(g=+g,g<=0)return{vals:o}}else if(typeof g=="string"&&g.charAt(0)==="M"){var y=+g.substring(1);if(y>0&&Math.round(y)===y)p=y;else return{vals:o}}for(var c=t.calendar,b=i==="start",l=i==="end",_=r[f+"period0"],s=M(_,c)||0,A=[],m=[],h=[],x=o.length,u=0;u<x;u++){var L=o[u],S,k,P;if(p){for(S=Math.round((L-s)/(p*a)),P=T(s,p*S,c);P>L;)P=T(P,-p,c);for(;P<=L;)P=T(P,p,c);k=T(P,-p,c)}else{for(S=Math.round((L-s)/g),P=s+S*g;P>L;)P-=g;for(;P<=L;)P+=g;k=P-g}A[u]=b?k:l?P:(k+P)/2,m[u]=k,h[u]=P}return{vals:A,starts:m,ends:h}}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],552:[function(d,ne,ae){ne.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],553:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("fast-isnumeric"),M=d("../../lib"),T=d("../../constants/numerical").FP_SAFE,e=d("../../registry"),a=d("../../components/drawing"),n=d("./axis_ids"),r=n.getFromId,t=n.isLinked;ne.exports={getAutoRange:f,makePadFn:i,doAutoRange:c,findExtremes:b,concatExtremes:y};function f(x,u){var L,S,k=[],P=x._fullLayout,z=i(P,u,0),I=i(P,u,1),D=y(x,u),R=D.min,O=D.max;if(R.length===0||O.length===0)return M.simpleMap(u.range,u.r2l);var F=R[0].val,V=O[0].val;for(L=1;L<R.length&&F===V;L++)F=Math.min(F,R[L].val);for(L=1;L<O.length&&F===V;L++)V=Math.max(V,O[L].val);var G=!1;if(u.range){var J=M.simpleMap(u.range,u.r2l);G=J[1]<J[0]}u.autorange==="reversed"&&(G=!0,u.autorange=!0);var Z=u.rangemode,Y=Z==="tozero",j=Z==="nonnegative",re=u._length,se=re/10,oe=0,N,U,q,Q,W,X;for(L=0;L<R.length;L++)for(N=R[L],S=0;S<O.length;S++)U=O[S],X=U.val-N.val-o(u,N.val,U.val),X>0&&(W=re-z(N)-I(U),W>se?X/W>oe&&(q=N,Q=U,oe=X/W):X/re>oe&&(q={val:N.val,nopad:1},Q={val:U.val,nopad:1},oe=X/re));function ee(fe,pe){return Math.max(fe,I(pe))}if(F===V){var te=F-1,ie=F+1;if(Y)if(F===0)k=[0,1];else{var le=(F>0?O:R).reduce(ee,0),ge=F/(1-Math.min(.5,le/re));k=F>0?[0,ge]:[ge,0]}else j?k=[Math.max(0,te),Math.max(1,ie)]:k=[te,ie]}else Y?(q.val>=0&&(q={val:0,nopad:1}),Q.val<=0&&(Q={val:0,nopad:1})):j&&(q.val-oe*z(q)<0&&(q={val:0,nopad:1}),Q.val<=0&&(Q={val:1,nopad:1})),oe=(Q.val-q.val-o(u,N.val,U.val))/(re-z(q)-I(Q)),k=[q.val-oe*z(q),Q.val+oe*I(Q)];return G&&k.reverse(),M.simpleMap(k,u.l2r||Number)}function o(x,u,L){var S=0;if(x.rangebreaks)for(var k=x.locateBreaks(u,L),P=0;P<k.length;P++){var z=k[P];S+=z.max-z.min}return S}function i(x,u,L){var S=.05*u._length,k=u._anchorAxis||{};if((u.ticklabelposition||"").indexOf("inside")!==-1||(k.ticklabelposition||"").indexOf("inside")!==-1){var P=u.autorange==="reversed";if(!P){var z=M.simpleMap(u.range,u.r2l);P=z[1]<z[0]}P&&(L=!L)}var I=0;return t(x,u._id)||(I=p(x,u,L)),S=Math.max(I,S),u.constrain==="domain"&&u._inputDomain&&(S*=(u._inputDomain[1]-u._inputDomain[0])/(u.domain[1]-u.domain[0])),function(R){return R.nopad?0:R.pad+(R.extrapad?S:I)}}var g=3;function p(x,u,L){var S=0,k=u._id.charAt(0)==="x";for(var P in x._plots){var z=x._plots[P];if(!(u._id!==z.xaxis._id&&u._id!==z.yaxis._id)){var I=(k?z.yaxis:z.xaxis)||{};if((I.ticklabelposition||"").indexOf("inside")!==-1&&(!L&&(I.side==="left"||I.side==="bottom")||L&&(I.side==="top"||I.side==="right"))){if(I._vals){var D=M.deg2rad(I._tickAngles[I._id+"tick"]||0),R=Math.abs(Math.cos(D)),O=Math.abs(Math.sin(D));if(!I._vals[0].bb){var F=I._id+"tick",V=I._selections[F];V.each(function(re){var se=w.select(this),oe=se.select(".text-math-group");oe.empty()&&(re.bb=a.bBox(se.node()))})}for(var G=0;G<I._vals.length;G++){var J=I._vals[G],Z=J.bb;if(Z){var Y=2*g+Z.width,j=2*g+Z.height;S=Math.max(S,k?Math.max(Y*R,j*O):Math.max(j*R,Y*O))}}}I.ticks==="inside"&&I.ticklabelposition==="inside"&&(S+=I.ticklen||0)}}}return S}function y(x,u,L){var S=u._id,k=x._fullData,P=x._fullLayout,z=[],I=[],D,R,O;function F(Y,j){for(D=0;D<j.length;D++){var re=Y[j[D]],se=(re._extremes||{})[S];if(re.visible===!0&&se){for(R=0;R<se.min.length;R++)O=se.min[R],l(z,O.val,O.pad,{extrapad:O.extrapad});for(R=0;R<se.max.length;R++)O=se.max[R],_(I,O.val,O.pad,{extrapad:O.extrapad})}}}if(F(k,u._traceIndices),F(P.annotations||[],u._annIndices||[]),F(P.shapes||[],u._shapeIndices||[]),u._matchGroup&&!L){for(var V in u._matchGroup)if(V!==u._id){var G=r(x,V),J=y(x,G,!0),Z=u._length/G._length;for(R=0;R<J.min.length;R++)O=J.min[R],l(z,O.val,O.pad*Z,{extrapad:O.extrapad});for(R=0;R<J.max.length;R++)O=J.max[R],_(I,O.val,O.pad*Z,{extrapad:O.extrapad})}}return{min:z,max:I}}function c(x,u,L){if(u.setScale(),u.autorange){u.range=L?L.slice():f(x,u),u._r=u.range.slice(),u._rl=M.simpleMap(u._r,u.r2l);var S=u._input,k={};k[u._attr+".range"]=u.range,k[u._attr+".autorange"]=u.autorange,e.call("_storeDirectGUIEdit",x.layout,x._fullLayout._preGUI,k),S.range=u.range.slice(),S.autorange=u.autorange}var P=u._anchorAxis;if(P&&P.rangeslider){var z=P.rangeslider[u._name];z&&z.rangemode==="auto"&&(z.range=f(x,u)),P._input.rangeslider[u._name]=M.extendFlat({},z)}}function b(x,u,L){L||(L={}),x._m||x.setScale();var S=[],k=[],P=u.length,z=L.padded||!1,I=L.tozero&&(x.type==="linear"||x.type==="-"),D=x.type==="log",R=!1,O=L.vpadLinearized||!1,F,V,G,J,Z,Y,j,re,se;function oe(te){if(Array.isArray(te))return R=!0,function(le){return Math.max(Number(te[le]||0),0)};var ie=Math.max(Number(te||0),0);return function(){return ie}}var N=oe((x._m>0?L.ppadplus:L.ppadminus)||L.ppad||0),U=oe((x._m>0?L.ppadminus:L.ppadplus)||L.ppad||0),q=oe(L.vpadplus||L.vpad),Q=oe(L.vpadminus||L.vpad);if(!R){if(re=1/0,se=-1/0,D)for(F=0;F<P;F++)V=u[F],V<re&&V>0&&(re=V),V>se&&V<T&&(se=V);else for(F=0;F<P;F++)V=u[F],V<re&&V>-T&&(re=V),V>se&&V<T&&(se=V);u=[re,se],P=2}var W={tozero:I,extrapad:z};function X(te){G=u[te],v(G)&&(Y=N(te),j=U(te),O?(J=x.c2l(G)-Q(te),Z=x.c2l(G)+q(te)):(re=G-Q(te),se=G+q(te),D&&re<se/10&&(re=se/10),J=x.c2l(re),Z=x.c2l(se)),I&&(J=Math.min(0,J),Z=Math.max(0,Z)),A(J)&&l(S,J,j,W),A(Z)&&_(k,Z,Y,W))}var ee=Math.min(6,P);for(F=0;F<ee;F++)X(F);for(F=P-1;F>=ee;F--)X(F);return{min:S,max:k,opts:L}}function l(x,u,L,S){s(x,u,L,S,m)}function _(x,u,L,S){s(x,u,L,S,h)}function s(x,u,L,S,k){for(var P=S.tozero,z=S.extrapad,I=!0,D=0;D<x.length&&I;D++){var R=x[D];if(k(R.val,u)&&R.pad>=L&&(R.extrapad||!z)){I=!1;break}else k(u,R.val)&&R.pad<=L&&(z||!R.extrapad)&&(x.splice(D,1),D--)}if(I){var O=P&&u===0;x.push({val:u,pad:O?0:L,extrapad:O?!1:z})}}function A(x){return v(x)&&Math.abs(x)<T}function m(x,u){return x<=u}function h(x,u){return x>=u}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../../registry":638,"./axis_ids":558,"@plotly/d3":58,"fast-isnumeric":190}],554:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("fast-isnumeric"),M=d("../../plots/plots"),T=d("../../registry"),e=d("../../lib"),a=e.strTranslate,n=d("../../lib/svg_text_utils"),r=d("../../components/titles"),t=d("../../components/color"),f=d("../../components/drawing"),o=d("./layout_attributes"),i=d("./clean_ticks"),g=d("../../constants/numerical"),p=g.ONEMAXYEAR,y=g.ONEAVGYEAR,c=g.ONEMINYEAR,b=g.ONEMAXQUARTER,l=g.ONEAVGQUARTER,_=g.ONEMINQUARTER,s=g.ONEMAXMONTH,A=g.ONEAVGMONTH,m=g.ONEMINMONTH,h=g.ONEWEEK,x=g.ONEDAY,u=x/2,L=g.ONEHOUR,S=g.ONEMIN,k=g.ONESEC,P=g.MINUS_SIGN,z=g.BADNUM,I={K:"zeroline"},D={K:"gridline",L:"path"},R={K:"minor-gridline",L:"path"},O={K:"tick",L:"path"},F={K:"tick",L:"text"},V=d("../../constants/alignment"),G=V.MID_SHIFT,J=V.CAP_SHIFT,Z=V.LINE_SPACING,Y=V.OPPOSITE_SIDE,j=3,re=ne.exports={};re.setConvert=d("./set_convert");var se=d("./axis_autotype"),oe=d("./axis_ids"),N=oe.idSort,U=oe.isLinked;re.id2name=oe.id2name,re.name2id=oe.name2id,re.cleanId=oe.cleanId,re.list=oe.list,re.listIds=oe.listIds,re.getFromId=oe.getFromId,re.getFromTrace=oe.getFromTrace;var q=d("./autorange");re.getAutoRange=q.getAutoRange,re.findExtremes=q.findExtremes;var Q=1e-4;function W(Me){var Se=(Me[1]-Me[0])*Q;return[Me[0]-Se,Me[1]+Se]}re.coerceRef=function(Me,Se,Ke,Xe,it,pt){var vt=Xe.charAt(Xe.length-1),St=Ke._fullLayout._subplots[vt+"axis"],kt=Xe+"ref",Nt={};return it||(it=St[0]||(typeof pt=="string"?pt:pt[0])),pt||(pt=it),St=St.concat(St.map(function(nr){return nr+" domain"})),Nt[kt]={valType:"enumerated",values:St.concat(pt?typeof pt=="string"?[pt]:pt:[]),dflt:it},e.coerce(Me,Se,Nt,kt)},re.getRefType=function(Me){return Me===void 0?Me:Me==="paper"?"paper":Me==="pixel"?"pixel":/( domain)$/.test(Me)?"domain":"range"},re.coercePosition=function(Me,Se,Ke,Xe,it,pt){var vt,St,kt=re.getRefType(Xe);if(kt!=="range")vt=e.ensureNumber,St=Ke(it,pt);else{var Nt=re.getFromId(Se,Xe);pt=Nt.fraction2r(pt),St=Ke(it,pt),vt=Nt.cleanPos}Me[it]=vt(St)},re.cleanPosition=function(Me,Se,Ke){var Xe=Ke==="paper"||Ke==="pixel"?e.ensureNumber:re.getFromId(Se,Ke).cleanPos;return Xe(Me)},re.redrawComponents=function(Me,Se){Se=Se||re.listIds(Me);var Ke=Me._fullLayout;function Xe(it,pt,vt,St){for(var kt=T.getComponentMethod(it,pt),Nt={},nr=0;nr<Se.length;nr++)for(var fr=Ke[re.id2name(Se[nr])],Hr=fr[vt],Er=0;Er<Hr.length;Er++){var _r=Hr[Er];if(!Nt[_r]&&(kt(Me,_r),Nt[_r]=1,St))return}}Xe("annotations","drawOne","_annIndices"),Xe("shapes","drawOne","_shapeIndices"),Xe("images","draw","_imgIndices",!0)};var X=re.getDataConversions=function(Me,Se,Ke,Xe){var it,pt=Ke==="x"||Ke==="y"||Ke==="z"?Ke:Xe;if(Array.isArray(pt)){if(it={type:se(Xe,void 0,{autotypenumbers:Me._fullLayout.autotypenumbers}),_categories:[]},re.setConvert(it),it.type==="category")for(var vt=0;vt<Xe.length;vt++)it.d2c(Xe[vt])}else it=re.getFromTrace(Me,Se,pt);return it?{d2c:it.d2c,c2d:it.c2d}:pt==="ids"?{d2c:te,c2d:te}:{d2c:ee,c2d:ee}};function ee(Me){return+Me}function te(Me){return String(Me)}re.getDataToCoordFunc=function(Me,Se,Ke,Xe){return X(Me,Se,Ke,Xe).d2c},re.counterLetter=function(Me){var Se=Me.charAt(0);if(Se==="x")return"y";if(Se==="y")return"x"},re.minDtick=function(Me,Se,Ke,Xe){["log","category","multicategory"].indexOf(Me.type)!==-1||!Xe?Me._minDtick=0:Me._minDtick===void 0?(Me._minDtick=Se,Me._forceTick0=Ke):Me._minDtick&&((Me._minDtick/Se+1e-6)%1<2e-6&&((Ke-Me._forceTick0)/Se%1+1.000001)%1<2e-6?(Me._minDtick=Se,Me._forceTick0=Ke):((Se/Me._minDtick+1e-6)%1>2e-6||((Ke-Me._forceTick0)/Me._minDtick%1+1.000001)%1>2e-6)&&(Me._minDtick=0))},re.saveRangeInitial=function(Me,Se){for(var Ke=re.list(Me,"",!0),Xe=!1,it=0;it<Ke.length;it++){var pt=Ke[it],vt=pt._rangeInitial===void 0,St=vt||!(pt.range[0]===pt._rangeInitial[0]&&pt.range[1]===pt._rangeInitial[1]);(vt&&pt.autorange===!1||Se&&St)&&(pt._rangeInitial=pt.range.slice(),Xe=!0)}return Xe},re.saveShowSpikeInitial=function(Me,Se){for(var Ke=re.list(Me,"",!0),Xe=!1,it="on",pt=0;pt<Ke.length;pt++){var vt=Ke[pt],St=vt._showSpikeInitial===void 0,kt=St||vt.showspikes!==vt._showspikes;(St||Se&&kt)&&(vt._showSpikeInitial=vt.showspikes,Xe=!0),it==="on"&&!vt.showspikes&&(it="off")}return Me._fullLayout._cartesianSpikesEnabled=it,Xe},re.autoBin=function(Me,Se,Ke,Xe,it,pt){var vt=e.aggNums(Math.min,null,Me),St=e.aggNums(Math.max,null,Me);if(Se.type==="category"||Se.type==="multicategory")return{start:vt-.5,end:St+.5,size:Math.max(1,Math.round(pt)||1),_dataSpan:St-vt};it||(it=Se.calendar);var kt;if(Se.type==="log"?kt={type:"linear",range:[vt,St]}:kt={type:Se.type,range:e.simpleMap([vt,St],Se.c2r,0,it),calendar:it},re.setConvert(kt),pt=pt&&i.dtick(pt,kt.type),pt)kt.dtick=pt,kt.tick0=i.tick0(void 0,kt.type,it);else{var Nt;if(Ke)Nt=(St-vt)/Ke;else{var nr=e.distinctVals(Me),fr=Math.pow(10,Math.floor(Math.log(nr.minDiff)/Math.LN10)),Hr=fr*e.roundUp(nr.minDiff/fr,[.9,1.9,4.9,9.9],!0);Nt=Math.max(Hr,2*e.stdev(Me)/Math.pow(Me.length,Xe?.25:.4)),v(Nt)||(Nt=1)}re.autoTicks(kt,Nt)}var Er=kt.dtick,_r=re.tickIncrement(re.tickFirst(kt),Er,"reverse",it),en,dr;if(typeof Er=="number")_r=ie(_r,Me,kt,vt,St),dr=1+Math.floor((St-_r)/Er),en=_r+dr*Er;else for(kt.dtick.charAt(0)==="M"&&(_r=le(_r,Me,Er,vt,it)),en=_r,dr=0;en<=St;)en=re.tickIncrement(en,Er,!1,it),dr++;return{start:Se.c2r(_r,0,it),end:Se.c2r(en,0,it),size:Er,_dataSpan:St-vt}};function ie(Me,Se,Ke,Xe,it){var pt=0,vt=0,St=0,kt=0;function Nt(Er){return(1+(Er-Me)*100/Ke.dtick)%100<2}for(var nr=0;nr<Se.length;nr++)Se[nr]%1===0?St++:v(Se[nr])||kt++,Nt(Se[nr])&&pt++,Nt(Se[nr]+Ke.dtick/2)&&vt++;var fr=Se.length-kt;if(St===fr&&Ke.type!=="date")Ke.dtick<1?Me=Xe-.5*Ke.dtick:(Me-=.5,Me+Ke.dtick<Xe&&(Me+=Ke.dtick));else if(vt<fr*.1&&(pt>fr*.3||Nt(Xe)||Nt(it))){var Hr=Ke.dtick/2;Me+=Me+Hr<Xe?Hr:-Hr}return Me}function le(Me,Se,Ke,Xe,it){var pt=e.findExactDates(Se,it),vt=.8;if(pt.exactDays>vt){var St=Number(Ke.substr(1));pt.exactYears>vt&&St%12===0?Me=re.tickIncrement(Me,"M6","reverse")+x*1.5:pt.exactMonths>vt?Me=re.tickIncrement(Me,"M1","reverse")+x*15.5:Me-=u;var kt=re.tickIncrement(Me,Ke);if(kt<=Xe)return kt}return Me}re.prepMinorTicks=function(Me,Se,Ke){if(!Se.minor.dtick){delete Me.dtick;var Xe=Se.dtick&&v(Se._tmin),it;if(Xe){var pt=re.tickIncrement(Se._tmin,Se.dtick,!0);it=[Se._tmin,pt*.99+Se._tmin*.01]}else{var vt=e.simpleMap(Se.range,Se.r2l);it=[vt[0],.8*vt[0]+.2*vt[1]]}if(Me.range=e.simpleMap(it,Se.l2r),Me._isMinor=!0,re.prepTicks(Me,Ke),Xe){var St=v(Se.dtick),kt=v(Me.dtick),Nt=St?Se.dtick:+Se.dtick.substring(1),nr=kt?Me.dtick:+Me.dtick.substring(1);St&&kt?ge(Nt,nr)?Nt===2*h&&nr===2*x&&(Me.dtick=h):Nt===2*h&&nr===3*x?Me.dtick=h:Nt===h&&!(Se._input.minor||{}).nticks?Me.dtick=x:fe(Nt/nr,2.5)?Me.dtick=Nt/2:Me.dtick=Nt:String(Se.dtick).charAt(0)==="M"?kt?Me.dtick="M1":ge(Nt,nr)?Nt>=12&&nr===2&&(Me.dtick="M3"):Me.dtick=Se.dtick:String(Me.dtick).charAt(0)==="L"?String(Se.dtick).charAt(0)==="L"?ge(Nt,nr)||(Me.dtick=fe(Nt/nr,2.5)?Se.dtick/2:Se.dtick):Me.dtick="D1":Me.dtick==="D2"&&+Se.dtick>1&&(Me.dtick=1)}Me.range=Se.range}Se.minor._tick0Init===void 0&&(Me.tick0=Se.tick0)};function ge(Me,Se){return Math.abs((Me/Se+.5)%1-.5)<.001}function fe(Me,Se){return Math.abs(Me/Se-1)<.001}re.prepTicks=function(Me,Se){var Ke=e.simpleMap(Me.range,Me.r2l,void 0,void 0,Se);if(Me.tickmode==="auto"||!Me.dtick){var Xe=Me.nticks,it;Xe||(Me.type==="category"||Me.type==="multicategory"?(it=Me.tickfont?e.bigFont(Me.tickfont.size||12):15,Xe=Me._length/it):(it=Me._id.charAt(0)==="y"?40:80,Xe=e.constrain(Me._length/it,4,9)+1),Me._name==="radialaxis"&&(Xe*=2)),Me.minor&&Me.minor.tickmode!=="array"||Me.tickmode==="array"&&(Xe*=100),Me._roughDTick=Math.abs(Ke[1]-Ke[0])/Xe,re.autoTicks(Me,Me._roughDTick),Me._minDtick>0&&Me.dtick<Me._minDtick*2&&(Me.dtick=Me._minDtick,Me.tick0=Me.l2r(Me._forceTick0))}Me.ticklabelmode==="period"&&ye(Me),Me.tick0||(Me.tick0=Me.type==="date"?"2000-01-01":0),Me.type==="date"&&Me.dtick<.1&&(Me.dtick=.1),Le(Me)};function pe(Me){return+Me.substring(1)}function ye(Me){var Se;function Ke(){return!(v(Me.dtick)||Me.dtick.charAt(0)!=="M")}var Xe=Ke(),it=re.getTickFormat(Me);if(it){var pt=Me._dtickInit!==Me.dtick;/%[fLQsSMX]/.test(it)||(/%[HI]/.test(it)?(Se=L,pt&&!Xe&&Me.dtick<L&&(Me.dtick=L)):/%p/.test(it)?(Se=u,pt&&!Xe&&Me.dtick<u&&(Me.dtick=u)):/%[Aadejuwx]/.test(it)?(Se=x,pt&&!Xe&&Me.dtick<x&&(Me.dtick=x)):/%[UVW]/.test(it)?(Se=h,pt&&!Xe&&Me.dtick<h&&(Me.dtick=h)):/%[Bbm]/.test(it)?(Se=A,pt&&(Xe?pe(Me.dtick)<1:Me.dtick<m)&&(Me.dtick="M1")):/%[q]/.test(it)?(Se=l,pt&&(Xe?pe(Me.dtick)<3:Me.dtick<_)&&(Me.dtick="M3")):/%[Yy]/.test(it)&&(Se=y,pt&&(Xe?pe(Me.dtick)<12:Me.dtick<c)&&(Me.dtick="M12")))}Xe=Ke(),Xe&&Me.tick0===Me._dowTick0&&(Me.tick0=Me._rawTick0),Me._definedDelta=Se}function Te(Me,Se,Ke){for(var Xe=0;Xe<Me.length;Xe++){var it=Me[Xe].value,pt=Xe,vt=Xe+1;Xe<Me.length-1?(pt=Xe,vt=Xe+1):Xe>0?(pt=Xe-1,vt=Xe):(pt=Xe,vt=Xe);var St=Me[pt].value,kt=Me[vt].value,Nt=Math.abs(kt-St),nr=Ke||Nt,fr=0;nr>=c?Nt>=c&&Nt<=p?fr=Nt:fr=y:Ke===l&&nr>=_?Nt>=_&&Nt<=b?fr=Nt:fr=l:nr>=m?Nt>=m&&Nt<=s?fr=Nt:fr=A:Ke===h&&nr>=h?fr=h:nr>=x?fr=x:Ke===u&&nr>=u?fr=u:Ke===L&&nr>=L&&(fr=L);var Hr;fr>=Nt&&(fr=Nt,Hr=!0);var Er=it+fr;if(Se.rangebreaks&&fr>0){for(var _r=84,en=0,dr=0;dr<_r;dr++){var xr=(dr+.5)/_r;Se.maskBreaks(it*(1-xr)+xr*Er)!==z&&en++}fr*=en/_r,fr||(Me[Xe].drop=!0),Hr&&Nt>h&&(fr=Nt)}(fr>0||Xe===0)&&(Me[Xe].periodX=it+fr/2)}}re.calcTicks=function(Se,Ke){for(var Xe=Se.type,it=Se.calendar,pt=Se.ticklabelstep,vt=Se.ticklabelmode==="period",St=e.simpleMap(Se.range,Se.r2l,void 0,void 0,Ke),kt=St[1]<St[0],Nt=Math.min(St[0],St[1]),nr=Math.max(St[0],St[1]),fr=Math.max(1e3,Se._length||0),Hr=[],Er=[],_r=[],en=[],dr=Se.minor&&(Se.minor.ticks||Se.minor.showgrid),xr=1;xr>=(dr?0:1);xr--){var Ur=!xr;xr?(Se._dtickInit=Se.dtick,Se._tick0Init=Se.tick0):(Se.minor._dtickInit=Se.minor.dtick,Se.minor._tick0Init=Se.minor.tick0);var Yr=xr?Se:e.extendFlat({},Se,Se.minor);if(Ur?re.prepMinorTicks(Yr,Se,Ke):re.prepTicks(Yr,Ke),Yr.tickmode==="array"){xr?(_r=[],Hr=_e(Se)):(en=[],Er=_e(Se));continue}var Ar=W(St),et=Ar[0],Lt=Ar[1],Zt=v(Yr.dtick),sr=Xe==="log"&&!(Zt||Yr.dtick.charAt(0)==="L"),Ir=re.tickFirst(Yr,Ke);if(xr){if(Se._tmin=Ir,Ir<et!==kt)break;(Xe==="category"||Xe==="multicategory")&&(Lt=kt?Math.max(-.5,Lt):Math.min(Se._categories.length-.5,Lt))}var Zr=null,Pr=Ir,wr;if(xr){var Nr;Zt?Nr=Se.dtick:Xe==="date"?typeof Se.dtick=="string"&&Se.dtick.charAt(0)==="M"&&(Nr=A*Se.dtick.substring(1)):Nr=Se._roughDTick,wr=Math.round((Se.r2l(Pr)-Se.r2l(Se.tick0))/Nr)-1}var Sn=Yr.dtick;for(Yr.rangebreaks&&Yr._tick0Init!==Yr.tick0&&(Pr=je(Pr,Se),kt||(Pr=re.tickIncrement(Pr,Sn,!kt,it))),xr&&vt&&(Pr=re.tickIncrement(Pr,Sn,!kt,it),wr--);kt?Pr>=Lt:Pr<=Lt;Pr=re.tickIncrement(Pr,Sn,kt,it)){if(xr&&wr++,Yr.rangebreaks&&!kt){if(Pr<et)continue;if(Yr.maskBreaks(Pr)===z&&je(Pr,Yr)>=nr)break}if(_r.length>fr||Pr===Zr)break;Zr=Pr;var _n={value:Pr};xr?(sr&&Pr!==(Pr|0)&&(_n.simpleLabel=!0),pt>1&&wr%pt&&(_n.skipLabel=!0),_r.push(_n)):(_n.minor=!0,en.push(_n))}}if(dr){var Wn=Se.minor.ticks==="inside"&&Se.ticks==="outside"||Se.minor.ticks==="outside"&&Se.ticks==="inside";if(!Wn){for(var Ln=_r.map(function(wa){return wa.value}),Xn=[],Kn=0;Kn<en.length;Kn++){var Aa=en[Kn],Ta=Aa.value;if(Ln.indexOf(Ta)===-1){for(var oi=!1,$a=0;!oi&&$a<_r.length;$a++)1e7+_r[$a].value===1e7+Ta&&(oi=!0);oi||Xn.push(Aa)}}en=Xn}}vt&&Te(_r,Se,Se._definedDelta);var Va;if(Se.rangebreaks){var ti=Se._id.charAt(0)==="y",Mr=1;Se.tickmode==="auto"&&(Mr=Se.tickfont?Se.tickfont.size:12);var vn=NaN;for(Va=_r.length-1;Va>-1;Va--){if(_r[Va].drop){_r.splice(Va,1);continue}_r[Va].value=je(_r[Va].value,Se);var fn=Se.c2p(_r[Va].value);(ti?vn>fn-Mr:vn<fn+Mr)?_r.splice(kt?Va+1:Va,1):vn=fn}}tt(Se)&&Math.abs(St[1]-St[0])===360&&_r.pop(),Se._tmax=(_r[_r.length-1]||{}).value,Se._prevDateHead="",Se._inCalcTicks=!0;var An,Gn=function(wa){wa.text="",Se._prevDateHead=An};_r=_r.concat(en);var ia,Yn;for(Va=0;Va<_r.length;Va++){var zn=_r[Va].minor,ea=_r[Va].value;zn?Er.push({x:ea,minor:!0}):(An=Se._prevDateHead,ia=re.tickText(Se,ea,!1,_r[Va].simpleLabel),Yn=_r[Va].periodX,Yn!==void 0&&(ia.periodX=Yn,(Yn>nr||Yn<Nt)&&(Yn>nr&&(ia.periodX=nr),Yn<Nt&&(ia.periodX=Nt),Gn(ia))),_r[Va].skipLabel&&Gn(ia),Hr.push(ia))}return Hr=Hr.concat(Er),Se._inCalcTicks=!1,vt&&Hr.length&&(Hr[0].noTick=!0),Hr};function _e(Me){var Se=e.simpleMap(Me.range,Me.r2l),Ke=W(Se),Xe=Math.min(Ke[0],Ke[1]),it=Math.max(Ke[0],Ke[1]),pt=Me.type==="category"?Me.d2l_noadd:Me.d2l;Me.type==="log"&&String(Me.dtick).charAt(0)!=="L"&&(Me.dtick="L"+Math.pow(10,Math.floor(Math.min(Me.range[0],Me.range[1]))-1));for(var vt=[],St=0;St<=1;St++)if(!(St&&!Me.minor)){var kt=St?Me.minor.tickvals:Me.tickvals,Nt=St?[]:Me.ticktext;if(!!kt){Array.isArray(Nt)||(Nt=[]);for(var nr=0;nr<kt.length;nr++){var fr=pt(kt[nr]);if(fr>Xe&&fr<it){var Hr=Nt[nr]===void 0?re.tickText(Me,fr):Ne(Me,fr,String(Nt[nr]));St&&(Hr.minor=!0,Hr.text=""),vt.push(Hr)}}}}return Me.rangebreaks&&(vt=vt.filter(function(Er){return Me.maskBreaks(Er.x)!==z})),vt}var De=[2,5,10],Be=[1,2,3,6,12],Ue=[1,2,5,10,15,30],xe=[1,2,3,7,14],Pe=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Ve=[-.301,0,.301,.699,1],Qe=[15,30,45,90,180];function Fe(Me,Se,Ke){return Se*e.roundUp(Me/Se,Ke)}re.autoTicks=function(Me,Se,Ke){var Xe;function it(fr){return Math.pow(fr,Math.floor(Math.log(Se)/Math.LN10))}if(Me.type==="date"){Me.tick0=e.dateTick0(Me.calendar,0);var pt=2*Se;if(pt>y)Se/=y,Xe=it(10),Me.dtick="M"+12*Fe(Se,Xe,De);else if(pt>A)Se/=A,Me.dtick="M"+Fe(Se,1,Be);else if(pt>x){if(Me.dtick=Fe(Se,x,Me._hasDayOfWeekBreaks?[1,2,7,14]:xe),!Ke){var vt=re.getTickFormat(Me),St=Me.ticklabelmode==="period";St&&(Me._rawTick0=Me.tick0),/%[uVW]/.test(vt)?Me.tick0=e.dateTick0(Me.calendar,2):Me.tick0=e.dateTick0(Me.calendar,1),St&&(Me._dowTick0=Me.tick0)}}else pt>L?Me.dtick=Fe(Se,L,Be):pt>S?Me.dtick=Fe(Se,S,Ue):pt>k?Me.dtick=Fe(Se,k,Ue):(Xe=it(10),Me.dtick=Fe(Se,Xe,De))}else if(Me.type==="log"){Me.tick0=0;var kt=e.simpleMap(Me.range,Me.r2l);if(Me._isMinor&&(Se*=1.5),Se>.7)Me.dtick=Math.ceil(Se);else if(Math.abs(kt[1]-kt[0])<1){var Nt=1.5*Math.abs((kt[1]-kt[0])/Se);Se=Math.abs(Math.pow(10,kt[1])-Math.pow(10,kt[0]))/Nt,Xe=it(10),Me.dtick="L"+Fe(Se,Xe,De)}else Me.dtick=Se>.3?"D2":"D1"}else Me.type==="category"||Me.type==="multicategory"?(Me.tick0=0,Me.dtick=Math.ceil(Math.max(Se,1))):tt(Me)?(Me.tick0=0,Xe=1,Me.dtick=Fe(Se,Xe,Qe)):(Me.tick0=0,Xe=it(10),Me.dtick=Fe(Se,Xe,De));if(Me.dtick===0&&(Me.dtick=1),!v(Me.dtick)&&typeof Me.dtick!="string"){var nr=Me.dtick;throw Me.dtick=1,"ax.dtick error: "+String(nr)}};function Le(Me){var Se=Me.dtick;if(Me._tickexponent=0,!v(Se)&&typeof Se!="string"&&(Se=1),(Me.type==="category"||Me.type==="multicategory")&&(Me._tickround=null),Me.type==="date"){var Ke=Me.r2l(Me.tick0),Xe=Me.l2r(Ke).replace(/(^-|i)/g,""),it=Xe.length;if(String(Se).charAt(0)==="M")it>10||Xe.substr(5)!=="01-01"?Me._tickround="d":Me._tickround=+Se.substr(1)%12===0?"y":"m";else if(Se>=x&&it<=10||Se>=x*15)Me._tickround="d";else if(Se>=S&&it<=16||Se>=L)Me._tickround="M";else if(Se>=k&&it<=19||Se>=S)Me._tickround="S";else{var pt=Me.l2r(Ke+Se).replace(/^-/,"").length;Me._tickround=Math.max(it,pt)-20,Me._tickround<0&&(Me._tickround=4)}}else if(v(Se)||Se.charAt(0)==="L"){var vt=Me.range.map(Me.r2d||Number);v(Se)||(Se=Number(Se.substr(1))),Me._tickround=2-Math.floor(Math.log(Se)/Math.LN10+.01);var St=Math.max(Math.abs(vt[0]),Math.abs(vt[1])),kt=Math.floor(Math.log(St)/Math.LN10+.01),Nt=Me.minexponent===void 0?3:Me.minexponent;Math.abs(kt)>Nt&&(rt(Me.exponentformat)&&!ct(kt)?Me._tickexponent=3*Math.round((kt-1)/3):Me._tickexponent=kt)}else Me._tickround=null}re.tickIncrement=function(Me,Se,Ke,Xe){var it=Ke?-1:1;if(v(Se))return e.increment(Me,it*Se);var pt=Se.charAt(0),vt=it*Number(Se.substr(1));if(pt==="M")return e.incrementMonth(Me,vt,Xe);if(pt==="L")return Math.log(Math.pow(10,Me)+vt)/Math.LN10;if(pt==="D"){var St=Se==="D2"?Ve:Pe,kt=Me+it*.01,Nt=e.roundUp(e.mod(kt,1),St,Ke);return Math.floor(kt)+Math.log(w.round(Math.pow(10,Nt),1))/Math.LN10}throw"unrecognized dtick "+String(Se)},re.tickFirst=function(Me,Se){var Ke=Me.r2l||Number,Xe=e.simpleMap(Me.range,Ke,void 0,void 0,Se),it=Xe[1]<Xe[0],pt=it?Math.floor:Math.ceil,vt=W(Xe)[0],St=Me.dtick,kt=Ke(Me.tick0);if(v(St)){var Nt=pt((vt-kt)/St)*St+kt;return(Me.type==="category"||Me.type==="multicategory")&&(Nt=e.constrain(Nt,0,Me._categories.length-1)),Nt}var nr=St.charAt(0),fr=Number(St.substr(1));if(nr==="M"){for(var Hr=0,Er=kt,_r,en,dr;Hr<10;){if(_r=re.tickIncrement(Er,St,it,Me.calendar),(_r-vt)*(Er-vt)<=0)return it?Math.min(Er,_r):Math.max(Er,_r);en=(vt-(Er+_r)/2)/(_r-Er),dr=nr+(Math.abs(Math.round(en))||1)*fr,Er=re.tickIncrement(Er,dr,en<0?!it:it,Me.calendar),Hr++}return e.error("tickFirst did not converge",Me),Er}else{if(nr==="L")return Math.log(pt((Math.pow(10,vt)-kt)/fr)*fr+kt)/Math.LN10;if(nr==="D"){var xr=St==="D2"?Ve:Pe,Ur=e.roundUp(e.mod(vt,1),xr,it);return Math.floor(vt)+Math.log(w.round(Math.pow(10,Ur),1))/Math.LN10}else throw"unrecognized dtick "+String(St)}},re.tickText=function(Me,Se,Ke,Xe){var it=Ne(Me,Se),pt=Me.tickmode==="array",vt=Ke||pt,St=Me.type,kt=St==="category"?Me.d2l_noadd:Me.d2l,Nt;if(pt&&Array.isArray(Me.ticktext)){var nr=e.simpleMap(Me.range,Me.r2l),fr=(Math.abs(nr[1]-nr[0])-(Me._lBreaks||0))/1e4;for(Nt=0;Nt<Me.ticktext.length&&!(Math.abs(Se-kt(Me.tickvals[Nt]))<fr);Nt++);if(Nt<Me.ticktext.length)return it.text=String(Me.ticktext[Nt]),it}function Hr(en){if(en===void 0)return!0;if(Ke)return en==="none";var dr={first:Me._tmin,last:Me._tmax}[en];return en!=="all"&&Se!==dr}var Er=Ke?"never":Me.exponentformat!=="none"&&Hr(Me.showexponent)?"hide":"";if(St==="date"?dt(Me,it,Ke,vt):St==="log"?Dt(Me,it,Ke,vt,Er):St==="category"?Xt(Me,it):St==="multicategory"?At(Me,it,Ke):tt(Me)?Ut(Me,it,Ke,vt,Er):zt(Me,it,Ke,vt,Er),Xe||(Me.tickprefix&&!Hr(Me.showtickprefix)&&(it.text=Me.tickprefix+it.text),Me.ticksuffix&&!Hr(Me.showticksuffix)&&(it.text+=Me.ticksuffix)),Me.tickson==="boundaries"||Me.showdividers){var _r=function(en){var dr=Me.l2p(en);return dr>=0&&dr<=Me._length?en:null};it.xbnd=[_r(it.x-.5),_r(it.x+Me.dtick-.5)]}return it},re.hoverLabelText=function(Me,Se,Ke){Ke&&(Me=e.extendFlat({},Me,{hoverformat:Ke}));var Xe=Array.isArray(Se)?Se[0]:Se,it=Array.isArray(Se)?Se[1]:void 0;if(it!==void 0&&it!==Xe)return re.hoverLabelText(Me,Xe,Ke)+" - "+re.hoverLabelText(Me,it,Ke);var pt=Me.type==="log"&&Xe<=0,vt=re.tickText(Me,Me.c2l(pt?-Xe:Xe),"hover").text;return pt?Xe===0?"0":P+vt:vt};function Ne(Me,Se,Ke){var Xe=Me.tickfont||{};return{x:Se,dx:0,dy:0,text:Ke||"",fontSize:Xe.size,font:Xe.family,fontColor:Xe.color}}function dt(Me,Se,Ke,Xe){var it=Me._tickround,pt=Ke&&Me.hoverformat||re.getTickFormat(Me);Xe&&(v(it)?it=4:it={y:"m",m:"d",d:"M",M:"S",S:4}[it]);var vt=e.formatDate(Se.x,pt,it,Me._dateFormat,Me.calendar,Me._extraFormat),St,kt=vt.indexOf(`
`);if(kt!==-1&&(St=vt.substr(kt+1),vt=vt.substr(0,kt)),Xe&&(vt==="00:00:00"||vt==="00:00"?(vt=St,St=""):vt.length===8&&(vt=vt.replace(/:00$/,""))),St)if(Ke)it==="d"?vt+=", "+St:vt=St+(vt?", "+vt:"");else if(!Me._inCalcTicks||Me._prevDateHead!==St)Me._prevDateHead=St,vt+="<br>"+St;else{var Nt=st(Me),nr=Me._trueSide||Me.side;(!Nt&&nr==="top"||Nt&&nr==="bottom")&&(vt+="<br> ")}Se.text=vt}function Dt(Me,Se,Ke,Xe,it){var pt=Me.dtick,vt=Se.x,St=Me.tickformat,kt=typeof pt=="string"&&pt.charAt(0);if(it==="never"&&(it=""),Xe&&kt!=="L"&&(pt="L3",kt="L"),St||kt==="L")Se.text=Ze(Math.pow(10,vt),Me,it,Xe);else if(v(pt)||kt==="D"&&e.mod(vt+.01,1)<.1){var Nt=Math.round(vt),nr=Math.abs(Nt),fr=Me.exponentformat;fr==="power"||rt(fr)&&ct(Nt)?(Nt===0?Se.text=1:Nt===1?Se.text="10":Se.text="10<sup>"+(Nt>1?"":P)+nr+"</sup>",Se.fontSize*=1.25):(fr==="e"||fr==="E")&&nr>2?Se.text="1"+fr+(Nt>0?"+":P)+nr:(Se.text=Ze(Math.pow(10,vt),Me,"","fakehover"),pt==="D1"&&Me._id.charAt(0)==="y"&&(Se.dy-=Se.fontSize/6))}else if(kt==="D")Se.text=String(Math.round(Math.pow(10,e.mod(vt,1)))),Se.fontSize*=.75;else throw"unrecognized dtick "+String(pt);if(Me.dtick==="D1"){var Hr=String(Se.text).charAt(0);(Hr==="0"||Hr==="1")&&(Me._id.charAt(0)==="y"?Se.dx-=Se.fontSize/4:(Se.dy+=Se.fontSize/2,Se.dx+=(Me.range[1]>Me.range[0]?1:-1)*Se.fontSize*(vt<0?.5:.25)))}}function Xt(Me,Se){var Ke=Me._categories[Math.round(Se.x)];Ke===void 0&&(Ke=""),Se.text=String(Ke)}function At(Me,Se,Ke){var Xe=Math.round(Se.x),it=Me._categories[Xe]||[],pt=it[1]===void 0?"":String(it[1]),vt=it[0]===void 0?"":String(it[0]);Ke?Se.text=vt+" - "+pt:(Se.text=pt,Se.text2=vt)}function zt(Me,Se,Ke,Xe,it){it==="never"?it="":Me.showexponent==="all"&&Math.abs(Se.x/Me.dtick)<1e-6&&(it="hide"),Se.text=Ze(Se.x,Me,it,Xe)}function Ut(Me,Se,Ke,Xe,it){if(Me.thetaunit==="radians"&&!Ke){var pt=Se.x/180;if(pt===0)Se.text="0";else{var vt=Ct(pt);if(vt[1]>=100)Se.text=Ze(e.deg2rad(Se.x),Me,it,Xe);else{var St=Se.x<0;vt[1]===1?vt[0]===1?Se.text="\u03C0":Se.text=vt[0]+"\u03C0":Se.text=["<sup>",vt[0],"</sup>","\u2044","<sub>",vt[1],"</sub>","\u03C0"].join(""),St&&(Se.text=P+Se.text)}}}else Se.text=Ze(Se.x,Me,it,Xe)}function Ct(Me){function Se(St,kt){return Math.abs(St-kt)<=1e-6}function Ke(St,kt){return Se(kt,0)?St:Ke(kt,St%kt)}function Xe(St){for(var kt=1;!Se(Math.round(St*kt)/kt,St);)kt*=10;return kt}var it=Xe(Me),pt=Me*it,vt=Math.abs(Ke(pt,it));return[Math.round(pt/vt),Math.round(it/vt)]}var Mt=["f","p","n","\u03BC","m","","k","M","G","T"];function rt(Me){return Me==="SI"||Me==="B"}function ct(Me){return Me>14||Me<-15}function Ze(Me,Se,Ke,Xe){var it=Me<0,pt=Se._tickround,vt=Ke||Se.exponentformat||"B",St=Se._tickexponent,kt=re.getTickFormat(Se),Nt=Se.separatethousands;if(Xe){var nr={exponentformat:vt,minexponent:Se.minexponent,dtick:Se.showexponent==="none"?Se.dtick:v(Me)&&Math.abs(Me)||1,range:Se.showexponent==="none"?Se.range.map(Se.r2d):[0,Me||1]};Le(nr),pt=(Number(nr._tickround)||0)+4,St=nr._tickexponent,Se.hoverformat&&(kt=Se.hoverformat)}if(kt)return Se._numFormat(kt)(Me).replace(/-/g,P);var fr=Math.pow(10,-pt)/2;if(vt==="none"&&(St=0),Me=Math.abs(Me),Me<fr)Me="0",it=!1;else{if(Me+=fr,St&&(Me*=Math.pow(10,-St),pt+=St),pt===0)Me=String(Math.floor(Me));else if(pt<0){Me=String(Math.round(Me)),Me=Me.substr(0,Me.length+pt);for(var Hr=pt;Hr<0;Hr++)Me+="0"}else{Me=String(Me);var Er=Me.indexOf(".")+1;Er&&(Me=Me.substr(0,Er+pt).replace(/\.?0+$/,""))}Me=e.numSeparate(Me,Se._separators,Nt)}if(St&&vt!=="hide"){rt(vt)&&ct(St)&&(vt="power");var _r;St<0?_r=P+-St:vt!=="power"?_r="+"+St:_r=String(St),vt==="e"||vt==="E"?Me+=vt+_r:vt==="power"?Me+="\xD710<sup>"+_r+"</sup>":vt==="B"&&St===9?Me+="B":rt(vt)&&(Me+=Mt[St/3+5])}return it?P+Me:Me}re.getTickFormat=function(Me){var Se;function Ke(kt){return typeof kt!="string"?kt:Number(kt.replace("M",""))*A}function Xe(kt,Nt){var nr=["L","D"];if(typeof kt==typeof Nt){if(typeof kt=="number")return kt-Nt;var fr=nr.indexOf(kt.charAt(0)),Hr=nr.indexOf(Nt.charAt(0));return fr===Hr?Number(kt.replace(/(L|D)/g,""))-Number(Nt.replace(/(L|D)/g,"")):fr-Hr}else return typeof kt=="number"?1:-1}function it(kt,Nt,nr){var fr=nr||function(_r){return _r},Hr=Nt[0],Er=Nt[1];return(!Hr&&typeof Hr!="number"||fr(Hr)<=fr(kt))&&(!Er&&typeof Er!="number"||fr(Er)>=fr(kt))}function pt(kt,Nt){var nr=Nt[0]===null,fr=Nt[1]===null,Hr=Xe(kt,Nt[0])>=0,Er=Xe(kt,Nt[1])<=0;return(nr||Hr)&&(fr||Er)}var vt,St;if(Me.tickformatstops&&Me.tickformatstops.length>0)switch(Me.type){case"date":case"linear":{for(Se=0;Se<Me.tickformatstops.length;Se++)if(St=Me.tickformatstops[Se],St.enabled&&it(Me.dtick,St.dtickrange,Ke)){vt=St;break}break}case"log":{for(Se=0;Se<Me.tickformatstops.length;Se++)if(St=Me.tickformatstops[Se],St.enabled&&pt(Me.dtick,St.dtickrange)){vt=St;break}break}}return vt?vt.value:Me.tickformat},re.getSubplots=function(Me,Se){var Ke=Me._fullLayout._subplots,Xe=Ke.cartesian.concat(Ke.gl2d||[]),it=Se?re.findSubplotsWithAxis(Xe,Se):Xe;return it.sort(function(pt,vt){var St=pt.substr(1).split("y"),kt=vt.substr(1).split("y");return St[0]===kt[0]?+St[1]-+kt[1]:+St[0]-+kt[0]}),it},re.findSubplotsWithAxis=function(Me,Se){for(var Ke=new RegExp(Se._id.charAt(0)==="x"?"^"+Se._id+"y":Se._id+"$"),Xe=[],it=0;it<Me.length;it++){var pt=Me[it];Ke.test(pt)&&Xe.push(pt)}return Xe},re.makeClipPaths=function(Me){var Se=Me._fullLayout;if(!Se._hasOnlyLargeSploms){var Ke={_offset:0,_length:Se.width,_id:""},Xe={_offset:0,_length:Se.height,_id:""},it=re.list(Me,"x",!0),pt=re.list(Me,"y",!0),vt=[],St,kt;for(St=0;St<it.length;St++)for(vt.push({x:it[St],y:Xe}),kt=0;kt<pt.length;kt++)St===0&&vt.push({x:Ke,y:pt[kt]}),vt.push({x:it[St],y:pt[kt]});var Nt=Se._clips.selectAll(".axesclip").data(vt,function(nr){return nr.x._id+nr.y._id});Nt.enter().append("clipPath").classed("axesclip",!0).attr("id",function(nr){return"clip"+Se._uid+nr.x._id+nr.y._id}).append("rect"),Nt.exit().remove(),Nt.each(function(nr){w.select(this).select("rect").attr({x:nr.x._offset||0,y:nr.y._offset||0,width:nr.x._length||1,height:nr.y._length||1})})}},re.draw=function(Me,Se,Ke){var Xe=Me._fullLayout;Se==="redraw"&&Xe._paper.selectAll("g.subplot").each(function(pt){var vt=pt[0],St=Xe._plots[vt];if(St){var kt=St.xaxis,Nt=St.yaxis;St.xaxislayer.selectAll("."+kt._id+"tick").remove(),St.yaxislayer.selectAll("."+Nt._id+"tick").remove(),St.xaxislayer.selectAll("."+kt._id+"tick2").remove(),St.yaxislayer.selectAll("."+Nt._id+"tick2").remove(),St.xaxislayer.selectAll("."+kt._id+"divider").remove(),St.yaxislayer.selectAll("."+Nt._id+"divider").remove(),St.minorGridlayer&&St.minorGridlayer.selectAll("path").remove(),St.gridlayer&&St.gridlayer.selectAll("path").remove(),St.zerolinelayer&&St.zerolinelayer.selectAll("path").remove(),Xe._infolayer.select(".g-"+kt._id+"title").remove(),Xe._infolayer.select(".g-"+Nt._id+"title").remove()}});var it=!Se||Se==="redraw"?re.listIds(Me):Se;return e.syncOrAsync(it.map(function(pt){return function(){if(!!pt){var vt=re.getFromId(Me,pt),St=re.drawOne(Me,vt,Ke);return vt._r=vt.range.slice(),vt._rl=e.simpleMap(vt._r,vt.r2l),St}}}))},re.drawOne=function(Me,Se,Ke){Ke=Ke||{};var Xe,it,pt;Se.setScale();var vt=Me._fullLayout,St=Se._id,kt=St.charAt(0),Nt=re.counterLetter(St),nr=vt._plots[Se._mainSubplot];if(!nr)return;var fr=nr[kt+"axislayer"],Hr=Se._mainLinePosition,Er=Se._mainMirrorPosition,_r=Se._vals=re.calcTicks(Se),en=[Se.mirror,Hr,Er].join("_");for(Xe=0;Xe<_r.length;Xe++)_r[Xe].axInfo=en;Se._selections={},Se._tickAngles&&(Se._prevTickAngles=Se._tickAngles),Se._tickAngles={},Se._depth=null;var dr={};function xr(wa){var si=St+(wa||"tick");return dr[si]||(dr[si]=ot(Se,si)),dr[si]}if(!!Se.visible){var Ur=re.makeTransTickFn(Se),Yr=re.makeTransTickLabelFn(Se),Ar,et,Lt=Se.ticks==="inside",Zt=Se.ticks==="outside";if(Se.tickson==="boundaries"){var sr=ke(Se,_r);et=re.clipEnds(Se,sr),Ar=Lt?et:sr}else et=re.clipEnds(Se,_r),Ar=Lt&&Se.ticklabelmode!=="period"?et:_r;var Ir=Se._gridVals=et,Zr=Je(Se,_r);if(!vt._hasOnlyLargeSploms){var Pr=Se._subplotsWith,wr={};for(Xe=0;Xe<Pr.length;Xe++){it=Pr[Xe],pt=vt._plots[it];var Nr=pt[Nt+"axis"],Sn=Nr._mainAxis._id;if(!wr[Sn]){wr[Sn]=1;var _n=kt==="x"?"M0,"+Nr._offset+"v"+Nr._length:"M"+Nr._offset+",0h"+Nr._length;re.drawGrid(Me,Se,{vals:Ir,counterAxis:Nr,layer:pt.gridlayer.select("."+St),minorLayer:pt.minorGridlayer.select("."+St),path:_n,transFn:Ur}),re.drawZeroLine(Me,Se,{counterAxis:Nr,layer:pt.zerolinelayer,path:_n,transFn:Ur})}}}var Wn,Ln=re.getTickSigns(Se),Xn=re.getTickSigns(Se,"minor");if(Se.ticks||Se.minor&&Se.minor.ticks){var Kn=re.makeTickPath(Se,Hr,Ln[2]),Aa=re.makeTickPath(Se,Hr,Xn[2],{minor:!0}),Ta,oi,$a,Va;if(Se._anchorAxis&&Se.mirror&&Se.mirror!==!0?(Ta=re.makeTickPath(Se,Er,Ln[3]),oi=re.makeTickPath(Se,Er,Xn[3],{minor:!0}),$a=Kn+Ta,Va=Aa+oi):(Ta="",oi="",$a=Kn,Va=Aa),Se.showdividers&&Zt&&Se.tickson==="boundaries"){var ti={};for(Xe=0;Xe<Zr.length;Xe++)ti[Zr[Xe].x]=1;Wn=function(wa){return ti[wa.x]?Ta:$a}}else Wn=function(wa){return wa.minor?Va:$a}}if(re.drawTicks(Me,Se,{vals:Ar,layer:fr,path:Wn,transFn:Ur}),Se.mirror==="allticks"){var Mr=Object.keys(Se._linepositions||{});for(Xe=0;Xe<Mr.length;Xe++){it=Mr[Xe],pt=vt._plots[it];var vn=Se._linepositions[it]||[],fn=vn[0],An=vn[1],Gn=vn[2],ia=re.makeTickPath(Se,fn,Gn?Ln[0]:Xn[0],{minor:Gn})+re.makeTickPath(Se,An,Gn?Ln[1]:Xn[1],{minor:Gn});re.drawTicks(Me,Se,{vals:Ar,layer:pt[kt+"axislayer"],path:ia,transFn:Ur})}}var Yn=[];if(Yn.push(function(){return re.drawLabels(Me,Se,{vals:_r,layer:fr,plotinfo:pt,transFn:Yr,labelFns:re.makeLabelFns(Se,Hr)})}),Se.type==="multicategory"){var zn={x:2,y:10}[kt];Yn.push(function(){var wa={x:"height",y:"width"}[kt],si=xr()[wa]+zn+(Se._tickAngles[St+"tick"]?Se.tickfont.size*Z:0);return re.drawLabels(Me,Se,{vals:Ge(Se,_r),layer:fr,cls:St+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:Ur,labelFns:re.makeLabelFns(Se,Hr+si*Ln[4])})}),Yn.push(function(){return Se._depth=Ln[4]*(xr("tick2")[Se.side]-Hr),qt(Me,Se,{vals:Zr,layer:fr,path:re.makeTickPath(Se,Hr,Ln[4],{len:Se._depth}),transFn:Ur})})}else Se.title.hasOwnProperty("standoff")&&Yn.push(function(){Se._depth=Ln[4]*(xr()[Se.side]-Hr)});var ea=T.getComponentMethod("rangeslider","isVisible")(Se);return Yn.push(function(){var wa=Se.side.charAt(0),si=Y[Se.side].charAt(0),Ft=re.getPxPosition(Me,Se),cr=Zt?Se.ticklen:0,$r,rn,sn,kn;if((Se.automargin||ea)&&(Se.type==="multicategory"?$r=xr("tick2"):($r=xr(),kt==="x"&&wa==="b"&&(Se._depth=Math.max($r.width>0?$r.bottom-Ft:0,cr)))),Se.automargin){rn={x:0,y:0,r:0,l:0,t:0,b:0};var mn=[0,1];if(kt==="x"){if(wa==="b"?rn[wa]=Se._depth:(rn[wa]=Se._depth=Math.max($r.width>0?Ft-$r.top:0,cr),mn.reverse()),$r.width>0){var un=$r.right-(Se._offset+Se._length);un>0&&(rn.xr=1,rn.r=un);var yr=Se._offset-$r.left;yr>0&&(rn.xl=0,rn.l=yr)}}else if(wa==="l"?rn[wa]=Se._depth=Math.max($r.height>0?Ft-$r.left:0,cr):(rn[wa]=Se._depth=Math.max($r.height>0?$r.right-Ft:0,cr),mn.reverse()),$r.height>0){var gr=$r.bottom-(Se._offset+Se._length);gr>0&&(rn.yb=0,rn.b=gr);var Dr=Se._offset-$r.top;Dr>0&&(rn.yt=1,rn.t=Dr)}rn[Nt]=Se.anchor==="free"?Se.position:Se._anchorAxis.domain[mn[0]],Se.title.text!==vt._dfltTitle[kt]&&(rn[wa]+=Ot(Se)+(Se.title.standoff||0)),Se.mirror&&Se.anchor!=="free"&&(sn={x:0,y:0,r:0,l:0,t:0,b:0},sn[si]=Se.linewidth,Se.mirror&&Se.mirror!==!0&&(sn[si]+=cr),Se.mirror===!0||Se.mirror==="ticks"?sn[Nt]=Se._anchorAxis.domain[mn[1]]:(Se.mirror==="all"||Se.mirror==="allticks")&&(sn[Nt]=[Se._counterDomainMin,Se._counterDomainMax][mn[1]]))}ea&&(kn=T.getComponentMethod("rangeslider","autoMarginOpts")(Me,Se)),M.autoMargin(Me,hn(Se),rn),M.autoMargin(Me,Qr(Se),sn),M.autoMargin(Me,nt(Se),kn)}),!Ke.skipTitle&&!(ea&&Se.side==="bottom")&&Yn.push(function(){return $t(Me,Se)}),e.syncOrAsync(Yn)}};function ke(Me,Se){var Ke=[],Xe,it=function(pt,vt){var St=pt.xbnd[vt];St!==null&&Ke.push(e.extendFlat({},pt,{x:St}))};if(Se.length){for(Xe=0;Xe<Se.length;Xe++)it(Se[Xe],0);it(Se[Xe-1],1)}return Ke}function Ge(Me,Se){for(var Ke=[],Xe={},it=0;it<Se.length;it++){var pt=Se[it];Xe[pt.text2]?Xe[pt.text2].push(pt.x):Xe[pt.text2]=[pt.x]}for(var vt in Xe)Ke.push(Ne(Me,e.interp(Xe[vt],.5),vt));return Ke}function Je(Me,Se){var Ke=[],Xe,it,pt=Se.length&&Se[Se.length-1].x<Se[0].x,vt=function(kt,Nt){var nr=kt.xbnd[Nt];nr!==null&&Ke.push(e.extendFlat({},kt,{x:nr}))};if(Me.showdividers&&Se.length){for(Xe=0;Xe<Se.length;Xe++){var St=Se[Xe];St.text2!==it&&vt(St,pt?1:0),it=St.text2}vt(Se[Xe-1],pt?0:1)}return Ke}function ot(Me,Se){var Ke,Xe,it,pt;return Me._selections[Se].size()?(Ke=1/0,Xe=-1/0,it=1/0,pt=-1/0,Me._selections[Se].each(function(){var vt=Xr(this),St=f.bBox(vt.node().parentNode);Ke=Math.min(Ke,St.top),Xe=Math.max(Xe,St.bottom),it=Math.min(it,St.left),pt=Math.max(pt,St.right)})):(Ke=0,Xe=0,it=0,pt=0),{top:Ke,bottom:Xe,left:it,right:pt,height:Xe-Ke,width:pt-it}}re.getTickSigns=function(Me,Se){var Ke=Me._id.charAt(0),Xe={x:"top",y:"right"}[Ke],it=Me.side===Xe?1:-1,pt=[-1,1,it,-it],vt=Se?(Me.minor||{}).ticks:Me.ticks;return vt!=="inside"==(Ke==="x")&&(pt=pt.map(function(St){return-St})),Me.side&&pt.push({l:-1,t:-1,r:1,b:1}[Me.side.charAt(0)]),pt},re.makeTransTickFn=function(Me){return Me._id.charAt(0)==="x"?function(Se){return a(Me._offset+Me.l2p(Se.x),0)}:function(Se){return a(0,Me._offset+Me.l2p(Se.x))}},re.makeTransTickLabelFn=function(Me){var Se=_t(Me),Ke=Se[0],Xe=Se[1];return Me._id.charAt(0)==="x"?function(it){return a(Ke+Me._offset+Me.l2p(Pt(it)),Xe)}:function(it){return a(Xe,Ke+Me._offset+Me.l2p(Pt(it)))}};function Pt(Me){return Me.periodX!==void 0?Me.periodX:Me.x}function _t(Me){var Se=Me.ticklabelposition||"",Ke=function(Er){return Se.indexOf(Er)!==-1},Xe=Ke("top"),it=Ke("left"),pt=Ke("right"),vt=Ke("bottom"),St=Ke("inside"),kt=vt||it||Xe||pt;if(!kt&&!St)return[0,0];var Nt=Me.side,nr=kt?(Me.tickwidth||0)/2:0,fr=j,Hr=Me.tickfont?Me.tickfont.size:12;return(vt||Xe)&&(nr+=Hr*J,fr+=(Me.linewidth||0)/2),(it||pt)&&(nr+=(Me.linewidth||0)/2,fr+=j),St&&Nt==="top"&&(fr-=Hr*(1-J)),(it||Xe)&&(nr=-nr),(Nt==="bottom"||Nt==="right")&&(fr=-fr),[kt?nr:0,St?fr:0]}re.makeTickPath=function(Me,Se,Ke,Xe){Xe||(Xe={});var it=Xe.minor;if(it&&!Me.minor)return"";var pt=Xe.len!==void 0?Xe.len:it?Me.minor.ticklen:Me.ticklen,vt=Me._id.charAt(0),St=(Me.linewidth||1)/2;return vt==="x"?"M0,"+(Se+St*Ke)+"v"+pt*Ke:"M"+(Se+St*Ke)+",0h"+pt*Ke},re.makeLabelFns=function(Me,Se,Ke){var Xe=Me.ticklabelposition||"",it=function(wr){return Xe.indexOf(wr)!==-1},pt=it("top"),vt=it("left"),St=it("right"),kt=it("bottom"),Nt=kt||vt||pt||St,nr=it("inside"),fr=Xe==="inside"&&Me.ticks==="inside"||!nr&&Me.ticks==="outside"&&Me.tickson!=="boundaries",Hr=0,Er=0,_r=fr?Me.ticklen:0;if(nr?_r*=-1:Nt&&(_r=0),fr&&(Hr+=_r,Ke)){var en=e.deg2rad(Ke);Hr=_r*Math.cos(en)+1,Er=_r*Math.sin(en)}Me.showticklabels&&(fr||Me.showline)&&(Hr+=.2*Me.tickfont.size),Hr+=(Me.linewidth||1)/2*(nr?-1:1);var dr={labelStandoff:Hr,labelShift:Er},xr,Ur,Yr,Ar,et=0,Lt=Me.side,Zt=Me._id.charAt(0),sr=Me.tickangle,Ir;if(Zt==="x")Ir=!nr&&Lt==="bottom"||nr&&Lt==="top",Ar=Ir?1:-1,nr&&(Ar*=-1),xr=Er*Ar,Ur=Se+Hr*Ar,Yr=Ir?1:-.2,Math.abs(sr)===90&&(nr?Yr+=G:sr===-90&&Lt==="bottom"?Yr=J:sr===90&&Lt==="top"?Yr=G:Yr=.5,et=G/2*(sr/90)),dr.xFn=function(wr){return wr.dx+xr+et*wr.fontSize},dr.yFn=function(wr){return wr.dy+Ur+wr.fontSize*Yr},dr.anchorFn=function(wr,Nr){if(Nt){if(vt)return"end";if(St)return"start"}return!v(Nr)||Nr===0||Nr===180?"middle":Nr*Ar<0!==nr?"end":"start"},dr.heightFn=function(wr,Nr,Sn){return Nr<-60||Nr>60?-.5*Sn:Me.side==="top"!==nr?-Sn:0};else if(Zt==="y"){if(Ir=!nr&&Lt==="left"||nr&&Lt==="right",Ar=Ir?1:-1,nr&&(Ar*=-1),xr=Hr,Ur=Er*Ar,Yr=0,!nr&&Math.abs(sr)===90&&(sr===-90&&Lt==="left"||sr===90&&Lt==="right"?Yr=J:Yr=.5),nr){var Zr=v(sr)?+sr:0;if(Zr!==0){var Pr=e.deg2rad(Zr);et=Math.abs(Math.sin(Pr))*J*Ar,Yr=0}}dr.xFn=function(wr){return wr.dx+Se-(xr+wr.fontSize*Yr)*Ar+et*wr.fontSize},dr.yFn=function(wr){return wr.dy+Ur+wr.fontSize*G},dr.anchorFn=function(wr,Nr){return v(Nr)&&Math.abs(Nr)===90?"middle":Ir?"end":"start"},dr.heightFn=function(wr,Nr,Sn){return Me.side==="right"&&(Nr*=-1),Nr<-30?-Sn:Nr<30?-.5*Sn:0}}return dr};function Bt(Me){return[Me.text,Me.x,Me.axInfo,Me.font,Me.fontSize,Me.fontColor].join("_")}re.drawTicks=function(Me,Se,Ke){Ke=Ke||{};var Xe=Se._id+"tick",it=[].concat(Se.minor&&Se.minor.ticks?Ke.vals.filter(function(vt){return vt.minor&&!vt.noTick}):[]).concat(Se.ticks?Ke.vals.filter(function(vt){return!vt.minor&&!vt.noTick}):[]),pt=Ke.layer.selectAll("path."+Xe).data(it,Bt);pt.exit().remove(),pt.enter().append("path").classed(Xe,1).classed("ticks",1).classed("crisp",Ke.crisp!==!1).each(function(vt){return t.stroke(w.select(this),vt.minor?Se.minor.tickcolor:Se.tickcolor)}).style("stroke-width",function(vt){return f.crispRound(Me,vt.minor?Se.minor.tickwidth:Se.tickwidth,1)+"px"}).attr("d",Ke.path).style("display",null),ft(Se,[O]),pt.attr("transform",Ke.transFn)},re.drawGrid=function(Me,Se,Ke){Ke=Ke||{};var Xe=Se._id+"grid",it=Se.minor&&Se.minor.showgrid,pt=it?Ke.vals.filter(function(xr){return xr.minor}):[],vt=Se.showgrid?Ke.vals.filter(function(xr){return!xr.minor}):[],St=Ke.counterAxis;if(St&&re.shouldShowZeroLine(Me,Se,St))for(var kt=Se.tickmode==="array",Nt=0;Nt<vt.length;Nt++){var nr=vt[Nt].x;if(kt?!nr:Math.abs(nr)<Se.dtick/100)if(vt=vt.slice(0,Nt).concat(vt.slice(Nt+1)),kt)Nt--;else break}Se._gw=f.crispRound(Me,Se.gridwidth,1);for(var fr=it?f.crispRound(Me,Se.minor.gridwidth,1):0,Hr=Ke.layer,Er=Ke.minorLayer,_r=1;_r>=0;_r--){var en=_r?Hr:Er;if(!!en){var dr=en.selectAll("path."+Xe).data(_r?vt:pt,Bt);dr.exit().remove(),dr.enter().append("path").classed(Xe,1).classed("crisp",Ke.crisp!==!1),dr.attr("transform",Ke.transFn).attr("d",Ke.path).each(function(xr){return t.stroke(w.select(this),xr.minor?Se.minor.gridcolor:Se.gridcolor||"#ddd")}).style("stroke-dasharray",function(xr){return f.dashStyle(xr.minor?Se.minor.griddash:Se.griddash,xr.minor?Se.minor.gridwidth:Se.gridwidth)}).style("stroke-width",function(xr){return(xr.minor?fr:Se._gw)+"px"}).style("display",null),typeof Ke.path=="function"&&dr.attr("d",Ke.path)}}ft(Se,[D,R])},re.drawZeroLine=function(Me,Se,Ke){Ke=Ke||Ke;var Xe=Se._id+"zl",it=re.shouldShowZeroLine(Me,Se,Ke.counterAxis),pt=Ke.layer.selectAll("path."+Xe).data(it?[{x:0,id:Se._id}]:[]);pt.exit().remove(),pt.enter().append("path").classed(Xe,1).classed("zl",1).classed("crisp",Ke.crisp!==!1).each(function(){Ke.layer.selectAll("path").sort(function(vt,St){return N(vt.id,St.id)})}),pt.attr("transform",Ke.transFn).attr("d",Ke.path).call(t.stroke,Se.zerolinecolor||t.defaultLine).style("stroke-width",f.crispRound(Me,Se.zerolinewidth,Se._gw||1)+"px").style("display",null),ft(Se,[I])},re.drawLabels=function(Me,Se,Ke){Ke=Ke||{};var Xe=Me._fullLayout,it=Se._id,pt=it.charAt(0),vt=Ke.cls||it+"tick",St=Ke.vals.filter(function(Ar){return Ar.text}),kt=Ke.labelFns,Nt=Ke.secondary?0:Se.tickangle,nr=(Se._prevTickAngles||{})[vt],fr=Ke.layer.selectAll("g."+vt).data(Se.showticklabels?St:[],Bt),Hr=[];fr.enter().append("g").classed(vt,1).append("text").attr("text-anchor","middle").each(function(Ar){var et=w.select(this),Lt=Me._promises.length;et.call(n.positionText,kt.xFn(Ar),kt.yFn(Ar)).call(f.font,Ar.font,Ar.fontSize,Ar.fontColor).text(Ar.text).call(n.convertToTspans,Me),Me._promises[Lt]?Hr.push(Me._promises.pop().then(function(){Er(et,Nt)})):Er(et,Nt)}),ft(Se,[F]),fr.exit().remove(),Ke.repositionOnUpdate&&fr.each(function(Ar){w.select(this).select("text").call(n.positionText,kt.xFn(Ar),kt.yFn(Ar))});function Er(Ar,et){Ar.each(function(Lt){var Zt=w.select(this),sr=Zt.select(".text-math-group"),Ir=kt.anchorFn(Lt,et),Zr=Ke.transFn.call(Zt.node(),Lt)+(v(et)&&+et!=0?" rotate("+et+","+kt.xFn(Lt)+","+(kt.yFn(Lt)-Lt.fontSize/2)+")":""),Pr=n.lineCount(Zt),wr=Z*Lt.fontSize,Nr=kt.heightFn(Lt,v(et)?+et:0,(Pr-1)*wr);if(Nr&&(Zr+=a(0,Nr)),sr.empty()){var Sn=Zt.select("text");Sn.attr({transform:Zr,"text-anchor":Ir}),Sn.style("opacity",1),Se._adjustTickLabelsOverflow&&Se._adjustTickLabelsOverflow()}else{var _n=f.bBox(sr.node()).width,Wn=_n*{end:-.5,start:.5}[Ir];sr.attr("transform",Zr+a(Wn,0))}})}Se._adjustTickLabelsOverflow=function(){var Ar=Se.ticklabeloverflow;if(!(!Ar||Ar==="allow")){var et=Ar.indexOf("hide")!==-1,Lt=Se._id.charAt(0)==="x",Zt=0,sr=Lt?Me._fullLayout.width:Me._fullLayout.height;if(Ar.indexOf("domain")!==-1){var Ir=e.simpleMap(Se.range,Se.r2l);Zt=Se.l2p(Ir[0])+Se._offset,sr=Se.l2p(Ir[1])+Se._offset}var Zr=Math.min(Zt,sr),Pr=Math.max(Zt,sr),wr=Se.side,Nr=1/0,Sn=-1/0;fr.each(function(Xn){var Kn=w.select(this),Aa=Kn.select(".text-math-group");if(Aa.empty()){var Ta=f.bBox(Kn.node()),oi=0;Lt?(Ta.right>Pr||Ta.left<Zr)&&(oi=1):(Ta.bottom>Pr||Ta.top+(Se.tickangle?0:Xn.fontSize/4)<Zr)&&(oi=1);var $a=Kn.select("text");oi?et&&$a.style("opacity",0):($a.style("opacity",1),wr==="bottom"||wr==="right"?Nr=Math.min(Nr,Lt?Ta.top:Ta.left):Nr=-1/0,wr==="top"||wr==="left"?Sn=Math.max(Sn,Lt?Ta.bottom:Ta.right):Sn=1/0)}});for(var _n in Xe._plots){var Wn=Xe._plots[_n];if(!(Se._id!==Wn.xaxis._id&&Se._id!==Wn.yaxis._id)){var Ln=Lt?Wn.yaxis:Wn.xaxis;Ln&&(Ln["_visibleLabelMin_"+Se._id]=Nr,Ln["_visibleLabelMax_"+Se._id]=Sn)}}}},Se._hideCounterAxisInsideTickLabels=function(Ar){var et=Se._id.charAt(0)==="x",Lt=[];for(var Zt in Xe._plots){var sr=Xe._plots[Zt];Se._id!==sr.xaxis._id&&Se._id!==sr.yaxis._id||Lt.push(et?sr.yaxis:sr.xaxis)}Lt.forEach(function(Ir,Zr){Ir&&st(Ir)&&(Ar||[I,R,D,O,F]).forEach(function(Pr){var wr=Pr.K==="tick"&&Pr.L==="text"&&Se.ticklabelmode==="period",Nr=Xe._plots[Se._mainSubplot],Sn;Pr.K===I.K?Sn=Nr.zerolinelayer.selectAll("."+Se._id+"zl"):Pr.K===R.K?Sn=Nr.minorGridlayer.selectAll("."+Se._id):Pr.K===D.K?Sn=Nr.gridlayer.selectAll("."+Se._id):Sn=Nr[Se._id.charAt(0)+"axislayer"],Sn.each(function(){var _n=w.select(this);Pr.L&&(_n=_n.selectAll(Pr.L)),_n.each(function(Wn){var Ln=Se.l2p(wr?Pt(Wn):Wn.x)+Se._offset,Xn=w.select(this);Ln<Se["_visibleLabelMax_"+Ir._id]&&Ln>Se["_visibleLabelMin_"+Ir._id]?Xn.style("display","none"):Pr.K==="tick"&&!Zr&&Xn.style("display",null)})})})})},Er(fr,nr+1?nr:Nt);function _r(){return Hr.length&&Promise.all(Hr)}var en=null;function dr(){if(Er(fr,Nt),St.length&&pt==="x"&&!v(Nt)&&(Se.type!=="log"||String(Se.dtick).charAt(0)!=="D")){en=0;var Ar=0,et=[],Lt;if(fr.each(function(Ta){Ar=Math.max(Ar,Ta.fontSize);var oi=Se.l2p(Ta.x),$a=Xr(this),Va=f.bBox($a.node());et.push({top:0,bottom:10,height:10,left:oi-Va.width/2,right:oi+Va.width/2+2,width:Va.width+2})}),(Se.tickson==="boundaries"||Se.showdividers)&&!Ke.secondary){var Zt=2;for(Se.ticks&&(Zt+=Se.tickwidth/2),Lt=0;Lt<et.length;Lt++){var sr=St[Lt].xbnd,Ir=et[Lt];if(sr[0]!==null&&Ir.left-Se.l2p(sr[0])<Zt||sr[1]!==null&&Se.l2p(sr[1])-Ir.right<Zt){en=90;break}}}else{var Zr=St.length,Pr=Math.abs((St[Zr-1].x-St[0].x)*Se._m)/(Zr-1),wr=Se.ticklabelposition||"",Nr=function(Ta){return wr.indexOf(Ta)!==-1},Sn=Nr("top"),_n=Nr("left"),Wn=Nr("right"),Ln=Nr("bottom"),Xn=Ln||_n||Sn||Wn,Kn=Xn?(Se.tickwidth||0)+2*j:0,Aa=Pr<Ar*2.5||Se.type==="multicategory"||Se._name==="realaxis";for(Lt=0;Lt<et.length-1;Lt++)if(e.bBoxIntersect(et[Lt],et[Lt+1],Kn)){en=Aa?90:30;break}}en&&Er(fr,en)}}Se._selections&&(Se._selections[vt]=fr);var xr=[_r];Se.automargin&&Xe._redrawFromAutoMarginCount&&nr===90?(en=90,xr.push(function(){Er(fr,nr)})):xr.push(dr),Se._tickAngles&&xr.push(function(){Se._tickAngles[vt]=en===null?v(Nt)?Nt:0:en});var Ur=Se._anchorAxis;Ur&&Ur.autorange&&st(Se)&&!U(Xe,Se._id)&&(Xe._insideTickLabelsAutorange||(Xe._insideTickLabelsAutorange={}),Xe._insideTickLabelsAutorange[Ur._name+".autorange"]=Ur.autorange,xr.push(function(){fr.each(function(et,Lt){var Zt=Xr(this),sr=Zt.select(".text-math-group");sr.empty()&&(Se._vals[Lt].bb=f.bBox(Zt.node()))})}));var Yr=e.syncOrAsync(xr);return Yr&&Yr.then&&Me._promises.push(Yr),Yr};function qt(Me,Se,Ke){var Xe=Se._id+"divider",it=Ke.vals,pt=Ke.layer.selectAll("path."+Xe).data(it,Bt);pt.exit().remove(),pt.enter().insert("path",":first-child").classed(Xe,1).classed("crisp",1).call(t.stroke,Se.dividercolor).style("stroke-width",f.crispRound(Me,Se.dividerwidth,1)+"px"),pt.attr("transform",Ke.transFn).attr("d",Ke.path)}re.getPxPosition=function(Me,Se){var Ke=Me._fullLayout._size,Xe=Se._id.charAt(0),it=Se.side,pt;if(Se.anchor!=="free"?pt=Se._anchorAxis:Xe==="x"?pt={_offset:Ke.t+(1-(Se.position||0))*Ke.h,_length:0}:Xe==="y"&&(pt={_offset:Ke.l+(Se.position||0)*Ke.w,_length:0}),it==="top"||it==="left")return pt._offset;if(it==="bottom"||it==="right")return pt._offset+pt._length};function Ot(Me){var Se=Me.title.font.size,Ke=(Me.title.text.match(n.BR_TAG_ALL)||[]).length;return Me.title.hasOwnProperty("standoff")?Ke?Se*(J+Ke*Z):Se*J:Ke?Se*(Ke+1)*Z:Se}function $t(Me,Se){var Ke=Me._fullLayout,Xe=Se._id,it=Xe.charAt(0),pt=Se.title.font.size,vt;if(Se.title.hasOwnProperty("standoff"))vt=Se._depth+Se.title.standoff+Ot(Se);else{var St=st(Se);if(Se.type==="multicategory")vt=Se._depth;else{var kt=1.5*pt;St&&(kt=.5*pt,Se.ticks==="outside"&&(kt+=Se.ticklen)),vt=10+kt+(Se.linewidth?Se.linewidth-1:0)}St||(it==="x"?vt+=Se.side==="top"?pt*(Se.showticklabels?1:0):pt*(Se.showticklabels?1.5:.5):vt+=Se.side==="right"?pt*(Se.showticklabels?1:.5):pt*(Se.showticklabels?.5:0))}var Nt=re.getPxPosition(Me,Se),nr,fr,Hr;it==="x"?(fr=Se._offset+Se._length/2,Hr=Se.side==="top"?Nt-vt:Nt+vt):(Hr=Se._offset+Se._length/2,fr=Se.side==="right"?Nt+vt:Nt-vt,nr={rotate:"-90",offset:0});var Er;if(Se.type!=="multicategory"){var _r=Se._selections[Se._id+"tick"];if(Er={selection:_r,side:Se.side},_r&&_r.node()&&_r.node().parentNode){var en=f.getTranslate(_r.node().parentNode);Er.offsetLeft=en.x,Er.offsetTop=en.y}Se.title.hasOwnProperty("standoff")&&(Er.pad=0)}return r.draw(Me,Xe+"title",{propContainer:Se,propName:Se._name+".title.text",placeholder:Ke._dfltTitle[it],avoid:Er,transform:nr,attributes:{x:fr,y:Hr,"text-anchor":"middle"}})}re.shouldShowZeroLine=function(Me,Se,Ke){var Xe=e.simpleMap(Se.range,Se.r2l);return Xe[0]*Xe[1]<=0&&Se.zeroline&&(Se.type==="linear"||Se.type==="-")&&!(Se.rangebreaks&&Se.maskBreaks(0)===z)&&(rr(Se,0)||!er(Me,Se,Ke,Xe)||pr(Me,Se))},re.clipEnds=function(Me,Se){return Se.filter(function(Ke){return rr(Me,Ke.x)})};function rr(Me,Se){var Ke=Me.l2p(Se);return Ke>1&&Ke<Me._length-1}function er(Me,Se,Ke,Xe){var it=Ke._mainAxis;if(!it)return;var pt=Me._fullLayout,vt=Se._id.charAt(0),St=re.counterLetter(Se._id),kt=Se._offset+(Math.abs(Xe[0])<Math.abs(Xe[1])==(vt==="x")?0:Se._length);function Nt(_r){if(!_r.showline||!_r.linewidth)return!1;var en=Math.max((_r.linewidth+Se.zerolinewidth)/2,1);function dr(Yr){return typeof Yr=="number"&&Math.abs(Yr-kt)<en}if(dr(_r._mainLinePosition)||dr(_r._mainMirrorPosition))return!0;var xr=_r._linepositions||{};for(var Ur in xr)if(dr(xr[Ur][0])||dr(xr[Ur][1]))return!0}var nr=pt._plots[Ke._mainSubplot];if(!(nr.mainplotinfo||nr).overlays.length)return Nt(Ke);for(var fr=re.list(Me,St),Hr=0;Hr<fr.length;Hr++){var Er=fr[Hr];if(Er._mainAxis===it&&Nt(Er))return!0}}function pr(Me,Se){for(var Ke=Me._fullData,Xe=Se._mainSubplot,it=Se._id.charAt(0),pt=0;pt<Ke.length;pt++){var vt=Ke[pt];if(vt.visible===!0&&vt.xaxis+vt.yaxis===Xe&&(T.traceIs(vt,"bar-like")&&vt.orientation==={x:"h",y:"v"}[it]||vt.fill&&vt.fill.charAt(vt.fill.length-1)===it))return!0}return!1}function Xr(Me){var Se=w.select(Me),Ke=Se.select(".text-math-group");return Ke.empty()?Se.select("text"):Ke}re.allowAutoMargin=function(Me){for(var Se=re.list(Me,"",!0),Ke=0;Ke<Se.length;Ke++){var Xe=Se[Ke];Xe.automargin&&(M.allowAutoMargin(Me,hn(Xe)),Xe.mirror&&M.allowAutoMargin(Me,Qr(Xe))),T.getComponentMethod("rangeslider","isVisible")(Xe)&&M.allowAutoMargin(Me,nt(Xe))}};function hn(Me){return Me._id+".automargin"}function Qr(Me){return hn(Me)+".mirror"}function nt(Me){return Me._id+".rangeslider"}re.swap=function(Me,Se){for(var Ke=Ht(Me,Se),Xe=0;Xe<Ke.length;Xe++)Gt(Me,Ke[Xe].x,Ke[Xe].y)};function Ht(Me,Se){var Ke=[],Xe,it;for(Xe=0;Xe<Se.length;Xe++){var pt=[],vt=Me._fullData[Se[Xe]].xaxis,St=Me._fullData[Se[Xe]].yaxis;if(!(!vt||!St)){for(it=0;it<Ke.length;it++)(Ke[it].x.indexOf(vt)!==-1||Ke[it].y.indexOf(St)!==-1)&&pt.push(it);if(!pt.length){Ke.push({x:[vt],y:[St]});continue}var kt=Ke[pt[0]],Nt;if(pt.length>1)for(it=1;it<pt.length;it++)Nt=Ke[pt[it]],Kt(kt.x,Nt.x),Kt(kt.y,Nt.y);Kt(kt.x,[vt]),Kt(kt.y,[St])}}return Ke}function Kt(Me,Se){for(var Ke=0;Ke<Se.length;Ke++)Me.indexOf(Se[Ke])===-1&&Me.push(Se[Ke])}function Gt(Me,Se,Ke){var Xe=[],it=[],pt=Me.layout,vt,St;for(vt=0;vt<Se.length;vt++)Xe.push(re.getFromId(Me,Se[vt]));for(vt=0;vt<Ke.length;vt++)it.push(re.getFromId(Me,Ke[vt]));var kt=Object.keys(o),Nt=["anchor","domain","overlaying","position","side","tickangle","editType"],nr=["linear","log"];for(vt=0;vt<kt.length;vt++){var fr=kt[vt],Hr=Xe[0][fr],Er=it[0][fr],_r=!0,en=!1,dr=!1;if(!(fr.charAt(0)==="_"||typeof Hr=="function"||Nt.indexOf(fr)!==-1)){for(St=1;St<Xe.length&&_r;St++){var xr=Xe[St][fr];fr==="type"&&nr.indexOf(Hr)!==-1&&nr.indexOf(xr)!==-1&&Hr!==xr?en=!0:xr!==Hr&&(_r=!1)}for(St=1;St<it.length&&_r;St++){var Ur=it[St][fr];fr==="type"&&nr.indexOf(Er)!==-1&&nr.indexOf(Ur)!==-1&&Er!==Ur?dr=!0:it[St][fr]!==Er&&(_r=!1)}_r&&(en&&(pt[Xe[0]._name].type="linear"),dr&&(pt[it[0]._name].type="linear"),br(pt,fr,Xe,it,Me._fullLayout._dfltTitle))}}for(vt=0;vt<Me._fullLayout.annotations.length;vt++){var Yr=Me._fullLayout.annotations[vt];Se.indexOf(Yr.xref)!==-1&&Ke.indexOf(Yr.yref)!==-1&&e.swapAttrs(pt.annotations[vt],["?"])}}function br(Me,Se,Ke,Xe,it){var pt=e.nestedProperty,vt=pt(Me[Ke[0]._name],Se).get(),St=pt(Me[Xe[0]._name],Se).get(),kt;for(Se==="title"&&(vt&&vt.text===it.x&&(vt.text=it.y),St&&St.text===it.y&&(St.text=it.x)),kt=0;kt<Ke.length;kt++)pt(Me,Ke[kt]._name+"."+Se).set(St);for(kt=0;kt<Xe.length;kt++)pt(Me,Xe[kt]._name+"."+Se).set(vt)}function tt(Me){return Me._id==="angularaxis"}function je(Me,Se){for(var Ke=Se._rangebreaks.length,Xe=0;Xe<Ke;Xe++){var it=Se._rangebreaks[Xe];if(Me>=it.min&&Me<it.max)return it.max}return Me}function st(Me){return(Me.ticklabelposition||"").indexOf("inside")!==-1}function ft(Me,Se){st(Me._anchorAxis||{})&&Me._hideCounterAxisInsideTickLabels&&Me._hideCounterAxisInsideTickLabels(Se)}},{"../../components/color":366,"../../components/drawing":388,"../../components/titles":464,"../../constants/alignment":471,"../../constants/numerical":479,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"./autorange":553,"./axis_autotype":555,"./axis_ids":558,"./clean_ticks":560,"./layout_attributes":569,"./set_convert":576,"@plotly/d3":58,"fast-isnumeric":190}],555:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("../../lib"),M=d("../../constants/numerical").BADNUM,T=v.isArrayOrTypedArray,e=v.isDateTime,a=v.cleanNumber,n=Math.round;ne.exports=function(y,c,b){var l=y,_=b.noMultiCategory;if(T(l)&&!l.length)return"-";if(!_&&g(l))return"multicategory";if(_&&Array.isArray(l[0])){for(var s=[],A=0;A<l.length;A++)if(T(l[A]))for(var m=0;m<l[A].length;m++)s.push(l[A][m]);l=s}if(f(l,c))return"date";var h=b.autotypenumbers!=="strict";return i(l,h)?"category":t(l,h)?"linear":"-"};function r(p,y){return y?w(p):typeof p=="number"}function t(p,y){for(var c=p.length,b=0;b<c;b++)if(r(p[b],y))return!0;return!1}function f(p,y){for(var c=p.length,b=o(c),l=0,_=0,s={},A=0;A<c;A+=b){var m=n(A),h=p[m],x=String(h);s[x]||(s[x]=1,e(h,y)&&l++,w(h)&&_++)}return l>_*2}function o(p){return Math.max(1,(p-1)/1e3)}function i(p,y){for(var c=p.length,b=o(c),l=0,_=0,s={},A=0;A<c;A+=b){var m=n(A),h=p[m],x=String(h);if(!s[x]){s[x]=1;var u=typeof h;u==="boolean"?_++:(y?a(h)!==M:u==="number")?l++:u==="string"&&_++}}return _>l*2}function g(p){return T(p[0])&&T(p[1])}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],556:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("../../registry"),M=d("../../lib"),T=d("../../plot_api/plot_template"),e=d("../array_container_defaults"),a=d("./layout_attributes"),n=d("./tick_value_defaults"),r=d("./tick_mark_defaults"),t=d("./tick_label_defaults"),f=d("./prefix_suffix_defaults"),o=d("./category_order_defaults"),i=d("./line_grid_defaults"),g=d("./set_convert"),p=d("./constants").WEEKDAY_PATTERN,y=d("./constants").HOUR_PATTERN;ne.exports=function(s,A,m,h,x){var u=h.letter,L=h.font||{},S=h.splomStash||{},k=m("visible",!h.visibleDflt),P=A._template||{},z=A.type||P.type||"-",I;if(z==="date"){var D=v.getComponentMethod("calendars","handleDefaults");D(s,A,"calendar",h.calendar),h.noTicklabelmode||(I=m("ticklabelmode"))}var R="";(!h.noTicklabelposition||z==="multicategory")&&(R=M.coerce(s,A,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:I==="period"?["outside","inside"]:u==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),h.noTicklabeloverflow||m("ticklabeloverflow",R.indexOf("inside")!==-1?"hide past domain":z==="category"||z==="multicategory"?"allow":"hide past div"),g(A,x);var O=!A.isValidRange(s.range);O&&h.reverseDflt&&(O="reversed");var F=m("autorange",O);F&&(z==="linear"||z==="-")&&m("rangemode"),m("range"),A.cleanRange(),o(s,A,m,h),z!=="category"&&!h.noHover&&m("hoverformat");var V=m("color"),G=V!==a.color.dflt?V:L.color,J=S.label||x._dfltTitle[u];if(f(s,A,m,z,h),!k)return A;m("title.text",J),M.coerceFont(m,"title.font",{family:L.family,size:M.bigFont(L.size),color:G}),n(s,A,m,z);var Z=h.hasMinor;if(Z&&(T.newContainer(A,"minor"),n(s,A,m,z,{isMinor:!0})),t(s,A,m,z,h),r(s,A,m,h),Z){var Y=h.isMinor;h.isMinor=!0,r(s,A,m,h),h.isMinor=Y}i(s,A,m,{dfltColor:V,bgColor:h.bgColor,showGrid:h.showGrid,hasMinor:Z,attributes:a}),Z&&!A.minor.ticks&&!A.minor.showgrid&&delete A.minor,(A.showline||A.ticks)&&m("mirror"),h.automargin&&m("automargin");var j=z==="multicategory";if(!h.noTickson&&(z==="category"||j)&&(A.ticks||A.showgrid)){var re;j&&(re="boundaries");var se=m("tickson",re);se==="boundaries"&&delete A.ticklabelposition}if(j){var oe=m("showdividers");oe&&(m("dividercolor"),m("dividerwidth"))}if(z==="date")if(e(s,A,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:c}),!A.rangebreaks.length)delete A.rangebreaks;else{for(var N=0;N<A.rangebreaks.length;N++)if(A.rangebreaks[N].pattern===p){A._hasDayOfWeekBreaks=!0;break}if(g(A,x),x._has("scattergl")||x._has("splom"))for(var U=0;U<h.data.length;U++){var q=h.data[U];(q.type==="scattergl"||q.type==="splom")&&(q.visible=!1,M.warn(q.type+" traces do not work on axes with rangebreaks. Setting trace "+q.index+" to `visible: false`."))}}return A};function c(_,s,A){function m(I,D){return M.coerce(_,s,a.rangebreaks,I,D)}var h=m("enabled");if(h){var x=m("bounds");if(x&&x.length>=2){var u="",L,S;if(x.length===2){for(L=0;L<2;L++)if(S=l(x[L]),S){u=p;break}}var k=m("pattern",u);if(k===p)for(L=0;L<2;L++)S=l(x[L]),S&&(s.bounds[L]=x[L]=S-1);if(k)for(L=0;L<2;L++)switch(S=x[L],k){case p:if(!w(S)){s.enabled=!1;return}if(S=+S,S!==Math.floor(S)||S<0||S>=7){s.enabled=!1;return}s.bounds[L]=x[L]=S;break;case y:if(!w(S)){s.enabled=!1;return}if(S=+S,S<0||S>24){s.enabled=!1;return}s.bounds[L]=x[L]=S;break}if(A.autorange===!1){var P=A.range;if(P[0]<P[1]){if(x[0]<P[0]&&x[1]>P[1]){s.enabled=!1;return}}else if(x[0]>P[0]&&x[1]<P[1]){s.enabled=!1;return}}}else{var z=m("values");if(z&&z.length)m("dvalue");else{s.enabled=!1;return}}}}var b={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function l(_){if(typeof _=="string")return b[_.substr(0,3).toLowerCase()]}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"../array_container_defaults":549,"./category_order_defaults":559,"./constants":561,"./layout_attributes":569,"./line_grid_defaults":571,"./prefix_suffix_defaults":573,"./set_convert":576,"./tick_label_defaults":578,"./tick_mark_defaults":579,"./tick_value_defaults":580,"fast-isnumeric":190}],557:[function(d,ne,ae){var w=d("../../constants/docs"),v=w.FORMAT_LINK,M=w.DATE_FORMAT_LINK;function T(n,r){return{valType:"string",dflt:"",editType:"none",description:(r?e:a)("hover text",n)+["By default the values are formatted using "+(r?"generic number format":"`"+n+"axis.hoverformat`")+"."].join(" ")}}function e(n,r){return["Sets the "+n+" formatting rule"+(r?"for `"+r+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+v+"."].join(" ")}function a(n,r){return e(n,r)+[" And for dates see: "+M+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}ne.exports={axisHoverFormat:T,descriptionOnlyNumbers:e,descriptionWithDates:a}},{"../../constants/docs":474}],558:[function(d,ne,ae){var w=d("../../registry"),v=d("./constants");ae.id2name=function(e){if(!(typeof e!="string"||!e.match(v.AX_ID_PATTERN))){var a=e.split(" ")[0].substr(1);return a==="1"&&(a=""),e.charAt(0)+"axis"+a}},ae.name2id=function(e){if(!!e.match(v.AX_NAME_PATTERN)){var a=e.substr(5);return a==="1"&&(a=""),e.charAt(0)+a}},ae.cleanId=function(e,a,n){var r=/( domain)$/.test(e);if(!(typeof e!="string"||!e.match(v.AX_ID_PATTERN))&&!(a&&e.charAt(0)!==a)&&!(r&&!n)){var t=e.split(" ")[0].substr(1).replace(/^0+/,"");return t==="1"&&(t=""),e.charAt(0)+t+(r&&n?" domain":"")}},ae.list=function(T,e,a){var n=T._fullLayout;if(!n)return[];var r=ae.listIds(T,e),t=new Array(r.length),f;for(f=0;f<r.length;f++){var o=r[f];t[f]=n[o.charAt(0)+"axis"+o.substr(1)]}if(!a){var i=n._subplots.gl3d||[];for(f=0;f<i.length;f++){var g=n[i[f]];e?t.push(g[e+"axis"]):t.push(g.xaxis,g.yaxis,g.zaxis)}}return t},ae.listIds=function(T,e){var a=T._fullLayout;if(!a)return[];var n=a._subplots;return e?n[e+"axis"]:n.xaxis.concat(n.yaxis)},ae.getFromId=function(T,e,a){var n=T._fullLayout;return e=e===void 0||typeof e!="string"?e:e.replace(" domain",""),a==="x"?e=e.replace(/y[0-9]*/,""):a==="y"&&(e=e.replace(/x[0-9]*/,"")),n[ae.id2name(e)]},ae.getFromTrace=function(T,e,a){var n=T._fullLayout,r=null;if(w.traceIs(e,"gl3d")){var t=e.scene;t.substr(0,5)==="scene"&&(r=n[t][a+"axis"])}else r=ae.getFromId(T,e[a+"axis"]||a);return r},ae.idSort=function(T,e){var a=T.charAt(0),n=e.charAt(0);return a!==n?a>n?1:-1:+(T.substr(1)||1)-+(e.substr(1)||1)},ae.ref2id=function(T){return/^[xyz]/.test(T)?T.split(" ")[0]:!1};function M(T,e){if(e&&e.length){for(var a=0;a<e.length;a++)if(e[a][T])return!0}return!1}ae.isLinked=function(T,e){return M(e,T._axisMatchGroups)||M(e,T._axisConstraintGroups)}},{"../../registry":638,"./constants":561}],559:[function(d,ne,ae){function w(v,M){var T=M.dataAttr||v._id.charAt(0),e={},a,n,r;if(M.axData)a=M.axData;else for(a=[],n=0;n<M.data.length;n++){var t=M.data[n];t[T+"axis"]===v._id&&a.push(t)}for(n=0;n<a.length;n++){var f=a[n][T];for(r=0;r<f.length;r++){var o=f[r];o!=null&&(e[o]=1)}}return Object.keys(e)}ne.exports=function(M,T,e,a){if(T.type==="category"){var n=M.categoryarray,r=Array.isArray(n)&&n.length>0,t;r&&(t="array");var f=e("categoryorder",t),o;f==="array"&&(o=e("categoryarray")),!r&&f==="array"&&(f=T.categoryorder="trace"),f==="trace"?T._initialCategories=[]:f==="array"?T._initialCategories=o.slice():(o=w(T,a).sort(),f==="category ascending"?T._initialCategories=o:f==="category descending"&&(T._initialCategories=o.reverse()))}}},{}],560:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("../../lib"),M=d("../../constants/numerical"),T=M.ONEDAY,e=M.ONEWEEK;ae.dtick=function(a,n){var r=n==="log",t=n==="date",f=n==="category",o=t?T:1;if(!a)return o;if(w(a))return a=Number(a),a<=0?o:f?Math.max(1,Math.round(a)):t?Math.max(.1,a):a;if(typeof a!="string"||!(t||r))return o;var i=a.charAt(0),g=a.substr(1);return g=w(g)?Number(g):0,g<=0||!(t&&i==="M"&&g===Math.round(g)||r&&i==="L"||r&&i==="D"&&(g===1||g===2))?o:a},ae.tick0=function(a,n,r,t){if(n==="date")return v.cleanDate(a,v.dateTick0(r,t%e===0?1:0));if(!(t==="D1"||t==="D2"))return w(a)?Number(a):0}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],561:[function(d,ne,ae){var w=d("../../lib/regex").counter;ne.exports={idRegex:{x:w("x","( domain)?"),y:w("y","( domain)?")},attrRegex:w("[xy]axis"),xAxisMatch:w("xaxis"),yAxisMatch:w("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":520}],562:[function(d,ne,ae){var w=d("../../lib"),v=d("./autorange"),M=d("./axis_ids").id2name,T=d("./layout_attributes"),e=d("./scale_zoom"),a=d("./set_convert"),n=d("../../constants/numerical").ALMOST_EQUAL,r=d("../../constants/alignment").FROM_BL;ae.handleDefaults=function(c,b,l){var _=l.axIds,s=l.axHasImage,A=b._axisConstraintGroups=[],m=b._axisMatchGroups=[],h,x,u,L,S,k,P,z;for(h=0;h<_.length;h++)L=M(_[h]),S=c[L],k=b[L],t(S,k,{axIds:_,layoutOut:b,hasImage:s[L]});function I(Y,j){for(h=0;h<Y.length;h++){x=Y[h];for(u in x)b[M(u)][j]=x}}for(I(m,"_matchGroup"),h=0;h<A.length;h++){x=A[h];for(u in x)if(k=b[M(u)],k.fixedrange){for(var D in x){var R=M(D);(c[R]||{}).fixedrange===!1&&w.warn("fixedrange was specified as false for axis "+R+" but was overridden because another axis in its constraint group has fixedrange true"),b[R].fixedrange=!0}break}}for(h=0;h<A.length;){x=A[h];for(u in x){k=b[M(u)],k._matchGroup&&Object.keys(k._matchGroup).length===Object.keys(x).length&&(A.splice(h,1),h--);break}h++}I(A,"_constraintGroup");var O=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],F=!1,V=!1;function G(){z=k[P],P==="rangebreaks"&&(V=k._hasDayOfWeekBreaks)}for(h=0;h<m.length;h++){x=m[h];for(var J=0;J<O.length;J++){P=O[J],z=null;var Z;for(u in x)if(L=M(u),S=c[L],k=b[L],P in k){if(!k.matches&&(Z=k,P in S)){G();break}z===null&&P in S&&G()}if(P==="range"&&z&&(F=!0),P==="autorange"&&z===null&&F&&(z=!1),z===null&&P in Z&&(z=Z[P]),z!==null)for(u in x)k=b[M(u)],k[P]=P==="range"?z.slice():z,P==="rangebreaks"&&(k._hasDayOfWeekBreaks=V,a(k,b))}}};function t(c,b,l){var _=l.axIds,s=l.layoutOut,A=l.hasImage,m=s._axisConstraintGroups,h=s._axisMatchGroups,x=b._id,u=x.charAt(0),L=((s._splomAxes||{})[u]||{})[x]||{},S=b._id,k=S.charAt(0)==="x";b._matchGroup=null,b._constraintGroup=null;function P(oe,N){return w.coerce(c,b,T,oe,N)}P("constrain",A?"domain":"range"),w.coerce(c,b,{constraintoward:{valType:"enumerated",values:k?["left","center","right"]:["bottom","middle","top"],dflt:k?"center":"middle"}},"constraintoward");var z=b.type,I,D,R=[];for(I=0;I<_.length;I++)if(D=_[I],D!==S){var O=s[M(D)];O.type===z&&R.push(D)}var F=o(m,S);if(F){var V=[];for(I=0;I<R.length;I++)D=R[I],F[D]||V.push(D);R=V}var G=R.length,J,Z;G&&(c.matches||L.matches)&&(J=w.coerce(c,b,{matches:{valType:"enumerated",values:R,dflt:R.indexOf(L.matches)!==-1?L.matches:void 0}},"matches"));var Y=A&&!k?b.anchor:void 0;if(G&&!J&&(c.scaleanchor||Y)&&(Z=w.coerce(c,b,{scaleanchor:{valType:"enumerated",values:R}},"scaleanchor",Y)),J){b._matchGroup=i(h,S,J,1);var j=s[M(J)],re=f(s,b)/f(s,j);k!==(J.charAt(0)==="x")&&(re=(k?"x":"y")+re),i(m,S,J,re)}else c.matches&&_.indexOf(c.matches)!==-1&&w.warn("ignored "+b._name+'.matches: "'+c.matches+'" to avoid an infinite loop');if(Z){var se=P("scaleratio");se||(se=b.scaleratio=1),i(m,S,Z,se)}else c.scaleanchor&&_.indexOf(c.scaleanchor)!==-1&&w.warn("ignored "+b._name+'.scaleanchor: "'+c.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function f(c,b){var l=b.domain;return l||(l=c[M(b.overlaying)].domain),l[1]-l[0]}function o(c,b){for(var l=0;l<c.length;l++)if(c[l][b])return c[l];return null}function i(c,b,l,_){var s,A,m,h,x,u=o(c,b);u===null?(u={},u[b]=1,x=c.length,c.push(u)):x=c.indexOf(u);var L=Object.keys(u);for(s=0;s<c.length;s++)if(m=c[s],s!==x&&m[l]){var S=m[l];for(A=0;A<L.length;A++)h=L[A],m[h]=g(S,g(_,u[h]));c.splice(x,1);return}if(_!==1)for(A=0;A<L.length;A++){var k=L[A];u[k]=g(_,u[k])}u[l]=1}function g(c,b){var l="",_="",s,A;typeof c=="string"&&(l=c.match(/^[xy]*/)[0],s=l.length,c=+c.substr(s)),typeof b=="string"&&(_=b.match(/^[xy]*/)[0],A=_.length,b=+b.substr(A));var m=c*b;return!s&&!A?m:!s||!A||l.charAt(0)===_.charAt(0)?l+_+c*b:s===A?m:(s>A?l.substr(A):_.substr(s))+m}function p(c,b){for(var l=b._size,_=l.h/l.w,s={},A=Object.keys(c),m=0;m<A.length;m++){var h=A[m],x=c[h];if(typeof x=="string"){var u=x.match(/^[xy]*/)[0],L=u.length;x=+x.substr(L);for(var S=u.charAt(0)==="y"?_:1/_,k=0;k<L;k++)x*=S}s[h]=x}return s}ae.enforce=function(b){var l=b._fullLayout,_=l._axisConstraintGroups||[],s,A,m,h,x,u,L,S;for(s=0;s<_.length;s++){m=p(_[s],l);var k=Object.keys(m),P=1/0,z=0,I=1/0,D={},R={},O=!1;for(A=0;A<k.length;A++)h=k[A],R[h]=x=l[M(h)],x._inputDomain?x.domain=x._inputDomain.slice():x._inputDomain=x.domain.slice(),x._inputRange||(x._inputRange=x.range.slice()),x.setScale(),D[h]=u=Math.abs(x._m)/m[h],P=Math.min(P,u),(x.constrain==="domain"||!x._constraintShrinkable)&&(I=Math.min(I,u)),delete x._constraintShrinkable,z=Math.max(z,u),x.constrain==="domain"&&(O=!0);if(!(P>n*z&&!O)){for(A=0;A<k.length;A++)if(h=k[A],u=D[h],x=R[h],L=x.constrain,u!==I||L==="domain")if(S=u/I,L==="range")e(x,S);else{var F=x._inputDomain,V=(x.domain[1]-x.domain[0])/(F[1]-F[0]),G=(x.r2l(x.range[1])-x.r2l(x.range[0]))/(x.r2l(x._inputRange[1])-x.r2l(x._inputRange[0]));if(S/=V,S*G<1){x.domain=x._input.domain=F.slice(),e(x,S);continue}if(G<1&&(x.range=x._input.range=x._inputRange.slice(),S*=G),x.autorange){var J=x.r2l(x.range[0]),Z=x.r2l(x.range[1]),Y=(J+Z)/2,j=Y,re=Y,se=Math.abs(Z-Y),oe=Y-se*S*1.0001,N=Y+se*S*1.0001,U=v.makePadFn(l,x,0),q=v.makePadFn(l,x,1);y(x,S);var Q=Math.abs(x._m),W=v.concatExtremes(b,x),X=W.min,ee=W.max,te,ie;for(ie=0;ie<X.length;ie++)te=X[ie].val-U(X[ie])/Q,te>oe&&te<j&&(j=te);for(ie=0;ie<ee.length;ie++)te=ee[ie].val+q(ee[ie])/Q,te<N&&te>re&&(re=te);var le=(re-j)/(2*se);S/=le,j=x.l2r(j),re=x.l2r(re),x.range=x._input.range=J<Z?[j,re]:[re,j]}y(x,S)}}}},ae.getAxisGroup=function(b,l){for(var _=b._axisMatchGroups,s=0;s<_.length;s++){var A=_[s];if(A[l])return"g"+s}return l},ae.clean=function(b,l){if(l._inputDomain){for(var _=!1,s=l._id,A=b._fullLayout._axisConstraintGroups,m=0;m<A.length;m++)if(A[m][s]){_=!0;break}(!_||l.constrain!=="domain")&&(l._input.domain=l.domain=l._inputDomain,delete l._inputDomain)}};function y(c,b){var l=c._inputDomain,_=r[c.constraintoward],s=l[0]+(l[1]-l[0])*_;c.domain=c._input.domain=[s+(l[0]-s)/b,s+(l[1]-s)/b],c.setScale()}},{"../../constants/alignment":471,"../../constants/numerical":479,"../../lib":503,"./autorange":553,"./axis_ids":558,"./layout_attributes":569,"./scale_zoom":574,"./set_convert":576}],563:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../lib"),M=v.numberFormat,T=d("tinycolor2"),e=d("has-passive-events"),a=d("../../registry"),n=v.strTranslate,r=d("../../lib/svg_text_utils"),t=d("../../components/color"),f=d("../../components/drawing"),o=d("../../components/fx"),i=d("./axes"),g=d("../../lib/setcursor"),p=d("../../components/dragelement"),y=d("../../components/dragelement/helpers"),c=y.selectingOrDrawing,b=y.freeMode,l=d("../../constants/alignment").FROM_TL,_=d("../../lib/clear_gl_canvases"),s=d("../../plot_api/subroutines").redrawReglTraces,A=d("../plots"),m=d("./axis_ids").getFromId,h=d("./select").prepSelect,x=d("./select").clearSelect,u=d("./select").selectOnClick,L=d("./scale_zoom"),S=d("./constants"),k=S.MINDRAG,P=S.MINZOOM,z=!0;function I(te,ie,le,ge,fe,pe,ye,Te){var _e=te._fullLayout._zoomlayer,De=ye+Te==="nsew",Be=(ye+Te).length===1,Ue,xe,Pe,Ve,Qe,Fe,Le,Ne,dt,Dt,Xt,At,zt,Ut,Ct,Mt,rt,ct,Ze,ke,Ge,Je,ot;function Pt(){if(Ue=ie.xaxis,xe=ie.yaxis,dt=Ue._length,Dt=xe._length,Le=Ue._offset,Ne=xe._offset,Pe={},Pe[Ue._id]=Ue,Ve={},Ve[xe._id]=xe,ye&&Te)for(var Er=ie.overlays,_r=0;_r<Er.length;_r++){var en=Er[_r].xaxis;Pe[en._id]=en;var dr=Er[_r].yaxis;Ve[dr._id]=dr}Qe=ee(Pe),Fe=ee(Ve),zt=O(Qe,Te),Ut=O(Fe,ye),Ct=!Ut&&!zt,At=W(te,te._fullLayout._axisMatchGroups,Pe,Ve),Xt=W(te,te._fullLayout._axisConstraintGroups,Pe,Ve,At);var xr=Xt.isSubplotConstrained||At.isSubplotConstrained;Mt=Te||xr,rt=ye||xr;var Ur=te._fullLayout;ct=Ur._has("scattergl"),Ze=Ur._has("splom"),ke=Ur._has("svg")}Pt();var _t=Z(Ut+zt,te._fullLayout.dragmode,De),Bt=R(ie,ye+Te+"drag",_t,le,ge,fe,pe);if(Ct&&!De)return Bt.onmousedown=null,Bt.style.pointerEvents="none",Bt;var qt={element:Bt,gd:te,plotinfo:ie};qt.prepFn=function(Er,_r,en){var dr=qt.dragmode,xr=te._fullLayout.dragmode;xr!==dr&&(qt.dragmode=xr),Pt(),Je=te._fullLayout._invScaleX,ot=te._fullLayout._invScaleY,Ct||(De?Er.shiftKey?xr==="pan"?xr="zoom":c(xr)||(xr="pan"):Er.ctrlKey&&(xr="pan"):xr="pan"),b(xr)?qt.minDrag=1:qt.minDrag=void 0,c(xr)?(qt.xaxes=Qe,qt.yaxes=Fe,h(Er,_r,en,qt,xr)):(qt.clickFn=$t,c(dr)&&Ot(),Ct||(xr==="zoom"?(qt.moveFn=tt,qt.doneFn=st,qt.minDrag=1,br(Er,_r,en)):xr==="pan"&&(qt.moveFn=it,qt.doneFn=kt))),te._fullLayout._redrag=function(){var Ur=te._dragdata;if(Ur&&Ur.element===Bt){var Yr=te._fullLayout.dragmode;c(Yr)||(Pt(),Nt([0,0,dt,Dt]),qt.moveFn(Ur.dx,Ur.dy))}}};function Ot(){qt.plotinfo.selection=!1,x(te)}function $t(Er,_r){var en=qt.gd;if(en._fullLayout._activeShapeIndex>=0){en._fullLayout._deactivateShape(en);return}var dr=en._fullLayout.clickmode;if(oe(en),Er===2&&!Be&&St(),De)dr.indexOf("select")>-1&&u(_r,en,Qe,Fe,ie.id,qt),dr.indexOf("event")>-1&&o.click(en,_r,ie.id);else if(Er===1&&Be){var xr=ye?xe:Ue,Ur=ye==="s"||Te==="w"?0:1,Yr=xr._name+".range["+Ur+"]",Ar=F(xr,Ur),et="left",Lt="middle";if(xr.fixedrange)return;ye?(Lt=ye==="n"?"top":"bottom",xr.side==="right"&&(et="right")):Te==="e"&&(et="right"),en._context.showAxisRangeEntryBoxes&&w.select(Bt).call(r.makeEditable,{gd:en,immediate:!0,background:en._fullLayout.paper_bgcolor,text:String(Ar),fill:xr.tickfont?xr.tickfont.color:"#444",horizontalAlign:et,verticalAlign:Lt}).on("edit",function(Zt){var sr=xr.d2r(Zt);sr!==void 0&&a.call("_guiRelayout",en,Yr,sr)})}}p.init(qt);var rr,er,pr,Xr,hn,Qr,nt,Ht,Kt,Gt;function br(Er,_r,en){var dr=Bt.getBoundingClientRect();rr=_r-dr.left,er=en-dr.top,te._fullLayout._calcInverseTransform(te);var xr=v.apply3DTransform(te._fullLayout._invTransform)(rr,er);rr=xr[0],er=xr[1],pr={l:rr,r:rr,w:0,t:er,b:er,h:0},Xr=te._hmpixcount?te._hmlumcount/te._hmpixcount:T(te._fullLayout.plot_bgcolor).getLuminance(),hn="M0,0H"+dt+"V"+Dt+"H0V0",Qr=!1,nt="xy",Gt=!1,Ht=Y(_e,Xr,Le,Ne,hn),Kt=j(_e,Le,Ne)}function tt(Er,_r){if(te._transitioningWithDuration)return!1;var en=Math.max(0,Math.min(dt,Je*Er+rr)),dr=Math.max(0,Math.min(Dt,ot*_r+er)),xr=Math.abs(en-rr),Ur=Math.abs(dr-er);pr.l=Math.min(rr,en),pr.r=Math.max(rr,en),pr.t=Math.min(er,dr),pr.b=Math.max(er,dr);function Yr(){nt="",pr.r=pr.l,pr.t=pr.b,Kt.attr("d","M0,0Z")}if(Xt.isSubplotConstrained)xr>P||Ur>P?(nt="xy",xr/dt>Ur/Dt?(Ur=xr*Dt/dt,er>dr?pr.t=er-Ur:pr.b=er+Ur):(xr=Ur*dt/Dt,rr>en?pr.l=rr-xr:pr.r=rr+xr),Kt.attr("d",Q(pr))):Yr();else if(At.isSubplotConstrained)if(xr>P||Ur>P){nt="xy";var Ar=Math.min(pr.l/dt,(Dt-pr.b)/Dt),et=Math.max(pr.r/dt,(Dt-pr.t)/Dt);pr.l=Ar*dt,pr.r=et*dt,pr.b=(1-Ar)*Dt,pr.t=(1-et)*Dt,Kt.attr("d",Q(pr))}else Yr();else!Ut||Ur<Math.min(Math.max(xr*.6,k),P)?xr<k||!zt?Yr():(pr.t=0,pr.b=Dt,nt="x",Kt.attr("d",U(pr,er))):!zt||xr<Math.min(Ur*.6,P)?(pr.l=0,pr.r=dt,nt="y",Kt.attr("d",q(pr,rr))):(nt="xy",Kt.attr("d",Q(pr)));pr.w=pr.r-pr.l,pr.h=pr.b-pr.t,nt&&(Gt=!0),te._dragged=Gt,re(Ht,Kt,pr,hn,Qr,Xr),je(),te.emit("plotly_relayouting",Ge),Qr=!0}function je(){Ge={},(nt==="xy"||nt==="x")&&(V(Qe,pr.l/dt,pr.r/dt,Ge,Xt.xaxes),pt("x",Ge)),(nt==="xy"||nt==="y")&&(V(Fe,(Dt-pr.b)/Dt,(Dt-pr.t)/Dt,Ge,Xt.yaxes),pt("y",Ge))}function st(){je(),oe(te),kt(),N(te)}var ft=[0,0,dt,Dt],Me=null,Se=S.REDRAWDELAY,Ke=ie.mainplot?te._fullLayout._plots[ie.mainplot]:ie;function Xe(Er){if(!te._context._scrollZoom.cartesian&&!te._fullLayout._enablescrollzoom)return;if(Ot(),te._transitioningWithDuration){Er.preventDefault(),Er.stopPropagation();return}Pt(),clearTimeout(Me);var _r=-Er.deltaY;if(isFinite(_r)||(_r=Er.wheelDelta/10),!isFinite(_r)){v.log("Did not find wheel motion attributes: ",Er);return}var en=Math.exp(-Math.min(Math.max(_r,-20),20)/200),dr=Ke.draglayer.select(".nsewdrag").node().getBoundingClientRect(),xr=(Er.clientX-dr.left)/dr.width,Ur=(dr.bottom-Er.clientY)/dr.height,Yr;function Ar(et,Lt,Zt){if(et.fixedrange)return;var sr=v.simpleMap(et.range,et.r2l),Ir=sr[0]+(sr[1]-sr[0])*Lt;function Zr(Pr){return et.l2r(Ir+(Pr-Ir)*Zt)}et.range=sr.map(Zr)}if(Mt){for(Te||(xr=.5),Yr=0;Yr<Qe.length;Yr++)Ar(Qe[Yr],xr,en);pt("x"),ft[2]*=en,ft[0]+=ft[2]*xr*(1/en-1)}if(rt){for(ye||(Ur=.5),Yr=0;Yr<Fe.length;Yr++)Ar(Fe[Yr],Ur,en);pt("y"),ft[3]*=en,ft[1]+=ft[3]*(1-Ur)*(1/en-1)}Nt(ft),vt(),te.emit("plotly_relayouting",Ge),Me=setTimeout(function(){!te._fullLayout||(ft=[0,0,dt,Dt],kt())},Se),Er.preventDefault()}ye.length*Te.length!==1&&X(Bt,Xe);function it(Er,_r){if(Er=Er*Je,_r=_r*ot,te._transitioningWithDuration)return;if(te._fullLayout._replotting=!0,zt==="ew"||Ut==="ns"){var en=zt?-Er:0,dr=Ut?-_r:0;if(At.isSubplotConstrained){if(zt&&Ut){var xr=(Er/dt-_r/Dt)/2;Er=xr*dt,_r=-xr*Dt,en=-Er,dr=-_r}Ut?en=-dr*dt/Dt:dr=-en*Dt/dt}zt&&(G(Qe,Er),pt("x")),Ut&&(G(Fe,_r),pt("y")),Nt([en,dr,dt,Dt]),vt(),te.emit("plotly_relayouting",Ge);return}function Ur(Zr,Pr,wr){for(var Nr=1-Pr,Sn,_n,Wn=0;Wn<Zr.length;Wn++){var Ln=Zr[Wn];if(!Ln.fixedrange){Sn=Ln,_n=Ln._rl[Nr]+(Ln._rl[Pr]-Ln._rl[Nr])/J(wr/Ln._length);var Xn=Ln.l2r(_n);Xn!==!1&&Xn!==void 0&&(Ln.range[Pr]=Xn)}}return Sn._length*(Sn._rl[Pr]-_n)/(Sn._rl[Pr]-Sn._rl[Nr])}var Yr=zt==="w"==(Ut==="n")?1:-1;if(zt&&Ut&&(Xt.isSubplotConstrained||At.isSubplotConstrained)){var Ar=(Er/dt+Yr*_r/Dt)/2;Er=Ar*dt,_r=Yr*Ar*Dt}var et,Lt;if(zt==="w"?Er=Ur(Qe,0,Er):zt==="e"?Er=Ur(Qe,1,-Er):zt||(Er=0),Ut==="n"?_r=Ur(Fe,1,_r):Ut==="s"?_r=Ur(Fe,0,-_r):Ut||(_r=0),et=zt==="w"?Er:0,Lt=Ut==="n"?_r:0,Xt.isSubplotConstrained&&!At.isSubplotConstrained||At.isSubplotConstrained&&zt&&Ut&&Yr>0){var Zt;if(At.isSubplotConstrained||!zt&&Ut.length===1){for(Zt=0;Zt<Qe.length;Zt++)Qe[Zt].range=Qe[Zt]._r.slice(),L(Qe[Zt],1-_r/Dt);Er=_r*dt/Dt,et=Er/2}if(At.isSubplotConstrained||!Ut&&zt.length===1){for(Zt=0;Zt<Fe.length;Zt++)Fe[Zt].range=Fe[Zt]._r.slice(),L(Fe[Zt],1-Er/dt);_r=Er*Dt/dt,Lt=_r/2}}(!At.isSubplotConstrained||!Ut)&&pt("x"),(!At.isSubplotConstrained||!zt)&&pt("y");var sr=dt-Er,Ir=Dt-_r;At.isSubplotConstrained&&!(zt&&Ut)&&(zt?(Lt=et?0:Er*Dt/dt,Ir=sr*Dt/dt):(et=Lt?0:_r*dt/Dt,sr=Ir*dt/Dt)),Nt([et,Lt,sr,Ir]),vt(),te.emit("plotly_relayouting",Ge)}function pt(Er,_r){for(var en=At.isSubplotConstrained?{x:Fe,y:Qe}[Er]:At[Er+"axes"],dr=At.isSubplotConstrained?{x:Qe,y:Fe}[Er]:[],xr=0;xr<en.length;xr++){var Ur=en[xr],Yr=Ur._id,Ar=At.xLinks[Yr]||At.yLinks[Yr],et=dr[0]||Pe[Ar]||Ve[Ar];et&&(_r?(_r[Ur._name+".range[0]"]=_r[et._name+".range[0]"],_r[Ur._name+".range[1]"]=_r[et._name+".range[1]"]):Ur.range=et.range.slice())}}function vt(){var Er=[],_r;function en(Ur){for(_r=0;_r<Ur.length;_r++)Ur[_r].fixedrange||Er.push(Ur[_r]._id)}for(Mt&&(en(Qe),en(Xt.xaxes),en(At.xaxes)),rt&&(en(Fe),en(Xt.yaxes),en(At.yaxes)),Ge={},_r=0;_r<Er.length;_r++){var dr=Er[_r],xr=m(te,dr);i.drawOne(te,xr,{skipTitle:!0}),Ge[xr._name+".range[0]"]=xr.range[0],Ge[xr._name+".range[1]"]=xr.range[1]}i.redrawComponents(te,Er)}function St(){if(!te._transitioningWithDuration){var Er=te._context.doubleClick,_r=[];zt&&(_r=_r.concat(Qe)),Ut&&(_r=_r.concat(Fe)),At.xaxes&&(_r=_r.concat(At.xaxes)),At.yaxes&&(_r=_r.concat(At.yaxes));var en={},dr,xr,Ur;if(Er==="reset+autosize"){for(Er="autosize",xr=0;xr<_r.length;xr++)if(dr=_r[xr],dr._rangeInitial&&(dr.range[0]!==dr._rangeInitial[0]||dr.range[1]!==dr._rangeInitial[1])||!dr._rangeInitial&&!dr.autorange){Er="reset";break}}if(Er==="autosize")for(xr=0;xr<_r.length;xr++)dr=_r[xr],dr.fixedrange||(en[dr._name+".autorange"]=!0);else if(Er==="reset")for((zt||Xt.isSubplotConstrained)&&(_r=_r.concat(Xt.xaxes)),Ut&&!Xt.isSubplotConstrained&&(_r=_r.concat(Xt.yaxes)),Xt.isSubplotConstrained&&(zt?Ut||(_r=_r.concat(Fe)):_r=_r.concat(Qe)),xr=0;xr<_r.length;xr++)dr=_r[xr],dr.fixedrange||(dr._rangeInitial?(Ur=dr._rangeInitial,en[dr._name+".range[0]"]=Ur[0],en[dr._name+".range[1]"]=Ur[1]):en[dr._name+".autorange"]=!0);te.emit("plotly_doubleclick",null),a.call("_guiRelayout",te,en)}}function kt(){Nt([0,0,dt,Dt]),v.syncOrAsync([A.previousPromises,function(){te._fullLayout._replotting=!1,a.call("_guiRelayout",te,Ge)}],te)}function Nt(Er){var _r=te._fullLayout,en=_r._plots,dr=_r._subplots.cartesian,xr,Ur,Yr,Ar;if(Ze&&a.subplotsRegistry.splom.drag(te),ct){for(xr=0;xr<dr.length;xr++)if(Ur=en[dr[xr]],Yr=Ur.xaxis,Ar=Ur.yaxis,Ur._scene){var et=v.simpleMap(Yr.range,Yr.r2l),Lt=v.simpleMap(Ar.range,Ar.r2l);Ur._scene.update({range:[et[0],Lt[0],et[1],Lt[1]]})}}if((Ze||ct)&&(_(te),s(te)),ke){var Zt=Er[2]/Ue._length,sr=Er[3]/xe._length;for(xr=0;xr<dr.length;xr++){Ur=en[dr[xr]],Yr=Ur.xaxis,Ar=Ur.yaxis;var Ir=(Mt||At.isSubplotConstrained)&&!Yr.fixedrange&&Pe[Yr._id],Zr=(rt||At.isSubplotConstrained)&&!Ar.fixedrange&&Ve[Ar._id],Pr,wr,Nr,Sn;if(Ir?(Pr=Zt,Nr=Te||At.isSubplotConstrained?Er[0]:Hr(Yr,Pr)):At.xaHash[Yr._id]?(Pr=Zt,Nr=Er[0]*Yr._length/Ue._length):At.yaHash[Yr._id]?(Pr=sr,Nr=Ut==="ns"?-Er[1]*Yr._length/xe._length:Hr(Yr,Pr,{n:"top",s:"bottom"}[Ut])):(Pr=nr(Yr,Zt,sr),Nr=fr(Yr,Pr)),Zr?(wr=sr,Sn=ye||At.isSubplotConstrained?Er[1]:Hr(Ar,wr)):At.yaHash[Ar._id]?(wr=sr,Sn=Er[1]*Ar._length/xe._length):At.xaHash[Ar._id]?(wr=Zt,Sn=zt==="ew"?-Er[0]*Ar._length/Ue._length:Hr(Ar,wr,{e:"right",w:"left"}[zt])):(wr=nr(Ar,Zt,sr),Sn=fr(Ar,wr)),!(!Pr&&!wr)){Pr||(Pr=1),wr||(wr=1);var _n=Yr._offset-Nr/Pr,Wn=Ar._offset-Sn/wr;Ur.clipRect.call(f.setTranslate,Nr,Sn).call(f.setScale,Pr,wr),Ur.plot.call(f.setTranslate,_n,Wn).call(f.setScale,1/Pr,1/wr),(Pr!==Ur.xScaleFactor||wr!==Ur.yScaleFactor)&&(f.setPointGroupScale(Ur.zoomScalePts,Pr,wr),f.setTextPointsScale(Ur.zoomScaleTxt,Pr,wr)),f.hideOutsideRangePoints(Ur.clipOnAxisFalseTraces,Ur),Ur.xScaleFactor=Pr,Ur.yScaleFactor=wr}}}}function nr(Er,_r,en){return Er.fixedrange?0:Mt&&Xt.xaHash[Er._id]?_r:rt&&(Xt.isSubplotConstrained?Xt.xaHash:Xt.yaHash)[Er._id]?en:0}function fr(Er,_r){return _r?(Er.range=Er._r.slice(),L(Er,_r),Hr(Er,_r)):0}function Hr(Er,_r,en){return Er._length*(1-_r)*l[en||Er.constraintoward||"middle"]}return Bt}function D(te,ie,le,ge){var fe=v.ensureSingle(te.draglayer,ie,le,function(pe){pe.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",te.id)});return fe.call(g,ge),fe.node()}function R(te,ie,le,ge,fe,pe,ye){var Te=D(te,"rect",ie,le);return w.select(Te).call(f.setRect,ge,fe,pe,ye),Te}function O(te,ie){for(var le=0;le<te.length;le++)if(!te[le].fixedrange)return ie;return""}function F(te,ie){var le=te.range[ie],ge=Math.abs(le-te.range[1-ie]),fe;return te.type==="date"?le:te.type==="log"?(fe=Math.ceil(Math.max(0,-Math.log(ge)/Math.LN10))+3,M("."+fe+"g")(Math.pow(10,le))):(fe=Math.floor(Math.log(Math.abs(le))/Math.LN10)-Math.floor(Math.log(ge)/Math.LN10)+4,M("."+String(fe)+"g")(le))}function V(te,ie,le,ge,fe){for(var pe=0;pe<te.length;pe++){var ye=te[pe];if(!ye.fixedrange)if(ye.rangebreaks){var Te=ye._id.charAt(0)==="y",_e=Te?1-ie:ie,De=Te?1-le:le;ge[ye._name+".range[0]"]=ye.l2r(ye.p2l(_e*ye._length)),ge[ye._name+".range[1]"]=ye.l2r(ye.p2l(De*ye._length))}else{var Be=ye._rl[0],Ue=ye._rl[1]-Be;ge[ye._name+".range[0]"]=ye.l2r(Be+Ue*ie),ge[ye._name+".range[1]"]=ye.l2r(Be+Ue*le)}}if(fe&&fe.length){var xe=(ie+(1-le))/2;V(fe,xe,1-xe,ge,[])}}function G(te,ie){for(var le=0;le<te.length;le++){var ge=te[le];if(!ge.fixedrange)if(ge.rangebreaks){var fe=0,pe=ge._length,ye=ge.p2l(fe+ie)-ge.p2l(fe),Te=ge.p2l(pe+ie)-ge.p2l(pe),_e=(ye+Te)/2;ge.range=[ge.l2r(ge._rl[0]-_e),ge.l2r(ge._rl[1]-_e)]}else ge.range=[ge.l2r(ge._rl[0]-ie/ge._m),ge.l2r(ge._rl[1]-ie/ge._m)]}}function J(te){return 1-(te>=0?Math.min(te,.9):1/(1/Math.max(te,-.3)+3.222))}function Z(te,ie,le){return te?te==="nsew"?le?"":ie==="pan"?"move":"crosshair":te.toLowerCase()+"-resize":"pointer"}function Y(te,ie,le,ge,fe){return te.append("path").attr("class","zoombox").style({fill:ie>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",n(le,ge)).attr("d",fe+"Z")}function j(te,ie,le){return te.append("path").attr("class","zoombox-corners").style({fill:t.background,stroke:t.defaultLine,"stroke-width":1,opacity:0}).attr("transform",n(ie,le)).attr("d","M0,0Z")}function re(te,ie,le,ge,fe,pe){te.attr("d",ge+"M"+le.l+","+le.t+"v"+le.h+"h"+le.w+"v-"+le.h+"h-"+le.w+"Z"),se(te,ie,fe,pe)}function se(te,ie,le,ge){le||(te.transition().style("fill",ge>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ie.transition().style("opacity",1).duration(200))}function oe(te){w.select(te).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function N(te){z&&te.data&&te._context.showTips&&(v.notifier(v._(te,"Double-click to zoom back out"),"long"),z=!1)}function U(te,ie){return"M"+(te.l-.5)+","+(ie-P-.5)+"h-3v"+(2*P+1)+"h3ZM"+(te.r+.5)+","+(ie-P-.5)+"h3v"+(2*P+1)+"h-3Z"}function q(te,ie){return"M"+(ie-P-.5)+","+(te.t-.5)+"v-3h"+(2*P+1)+"v3ZM"+(ie-P-.5)+","+(te.b+.5)+"v3h"+(2*P+1)+"v-3Z"}function Q(te){var ie=Math.floor(Math.min(te.b-te.t,te.r-te.l,P)/2);return"M"+(te.l-3.5)+","+(te.t-.5+ie)+"h3v"+-ie+"h"+ie+"v-3h-"+(ie+3)+"ZM"+(te.r+3.5)+","+(te.t-.5+ie)+"h-3v"+-ie+"h"+-ie+"v-3h"+(ie+3)+"ZM"+(te.r+3.5)+","+(te.b+.5-ie)+"h-3v"+ie+"h"+-ie+"v3h"+(ie+3)+"ZM"+(te.l-3.5)+","+(te.b+.5-ie)+"h3v"+ie+"h"+ie+"v3h-"+(ie+3)+"Z"}function W(te,ie,le,ge,fe){for(var pe=!1,ye={},Te={},_e,De,Be,Ue,xe=(fe||{}).xaHash,Pe=(fe||{}).yaHash,Ve=0;Ve<ie.length;Ve++){var Qe=ie[Ve];for(_e in le)if(Qe[_e]){for(Be in Qe)!(fe&&(xe[Be]||Pe[Be]))&&!(Be.charAt(0)==="x"?le:ge)[Be]&&(ye[Be]=_e);for(De in ge)!(fe&&(xe[De]||Pe[De]))&&Qe[De]&&(pe=!0)}for(De in ge)if(Qe[De])for(Ue in Qe)!(fe&&(xe[Ue]||Pe[Ue]))&&!(Ue.charAt(0)==="x"?le:ge)[Ue]&&(Te[Ue]=De)}pe&&(v.extendFlat(ye,Te),Te={});var Fe={},Le=[];for(Be in ye){var Ne=m(te,Be);Le.push(Ne),Fe[Ne._id]=Ne}var dt={},Dt=[];for(Ue in Te){var Xt=m(te,Ue);Dt.push(Xt),dt[Xt._id]=Xt}return{xaHash:Fe,yaHash:dt,xaxes:Le,yaxes:Dt,xLinks:ye,yLinks:Te,isSubplotConstrained:pe}}function X(te,ie){if(!e)te.onwheel!==void 0?te.onwheel=ie:te.onmousewheel!==void 0?te.onmousewheel=ie:te.isAddedWheelEvent||(te.isAddedWheelEvent=!0,te.addEventListener("wheel",ie,{passive:!1}));else{var le=te.onwheel!==void 0?"wheel":"mousewheel";te._onwheel&&te.removeEventListener(le,te._onwheel),te._onwheel=ie,te.addEventListener(le,ie,{passive:!1})}}function ee(te){var ie=[];for(var le in te)ie.push(te[le]);return ie}ne.exports={makeDragBox:I,makeDragger:D,makeRectDragger:R,makeZoombox:Y,makeCorners:j,updateZoombox:re,xyCorners:Q,transitionZoombox:se,removeZoombox:oe,showDoubleClickNotifier:N,attachWheelEventHandler:X}},{"../../components/color":366,"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../constants/alignment":471,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plot_api/subroutines":544,"../../registry":638,"../plots":619,"./axes":554,"./axis_ids":558,"./constants":561,"./scale_zoom":574,"./select":575,"@plotly/d3":58,"has-passive-events":229,tinycolor2:312}],564:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../components/fx"),M=d("../../components/dragelement"),T=d("../../lib/setcursor"),e=d("./dragbox").makeDragBox,a=d("./constants").DRAGGERSIZE;ae.initInteractions=function(r){var t=r._fullLayout;if(r._context.staticPlot){w.select(r).selectAll(".drag").remove();return}if(!(!t._has("cartesian")&&!t._has("splom"))){var f=Object.keys(t._plots||{}).sort(function(i,g){if((t._plots[i].mainplot&&!0)===(t._plots[g].mainplot&&!0)){var p=i.split("y"),y=g.split("y");return p[0]===y[0]?Number(p[1]||1)-Number(y[1]||1):Number(p[0]||1)-Number(y[0]||1)}return t._plots[i].mainplot?1:-1});f.forEach(function(i){var g=t._plots[i],p=g.xaxis,y=g.yaxis;if(!g.mainplot){var c=e(r,g,p._offset,y._offset,p._length,y._length,"ns","ew");c.onmousemove=function(_){r._fullLayout._rehover=function(){r._fullLayout._hoversubplot===i&&r._fullLayout._plots[i]&&v.hover(r,_,i)},v.hover(r,_,i),r._fullLayout._lasthover=c,r._fullLayout._hoversubplot=i},c.onmouseout=function(_){r._dragging||(r._fullLayout._hoversubplot=null,M.unhover(r,_))},r._context.showAxisDragHandles&&(e(r,g,p._offset-a,y._offset-a,a,a,"n","w"),e(r,g,p._offset+p._length,y._offset-a,a,a,"n","e"),e(r,g,p._offset-a,y._offset+y._length,a,a,"s","w"),e(r,g,p._offset+p._length,y._offset+y._length,a,a,"s","e"))}if(r._context.showAxisDragHandles){if(i===p._mainSubplot){var b=p._mainLinePosition;p.side==="top"&&(b-=a),e(r,g,p._offset+p._length*.1,b,p._length*.8,a,"","ew"),e(r,g,p._offset,b,p._length*.1,a,"","w"),e(r,g,p._offset+p._length*.9,b,p._length*.1,a,"","e")}if(i===y._mainSubplot){var l=y._mainLinePosition;y.side!=="right"&&(l-=a),e(r,g,l,y._offset+y._length*.1,a,y._length*.8,"ns",""),e(r,g,l,y._offset+y._length*.9,a,y._length*.1,"s",""),e(r,g,l,y._offset,a,y._length*.1,"n","")}}});var o=t._hoverlayer.node();o.onmousemove=function(i){i.target=r._fullLayout._lasthover,v.hover(r,i,t._hoversubplot)},o.onclick=function(i){i.target=r._fullLayout._lasthover,v.click(r,i)},o.onmousedown=function(i){r._fullLayout._lasthover.onmousedown(i)},ae.updateFx(r)}},ae.updateFx=function(n){var r=n._fullLayout,t=r.dragmode==="pan"?"move":"crosshair";T(r._draggers,t)}},{"../../components/dragelement":385,"../../components/fx":406,"../../lib/setcursor":524,"./constants":561,"./dragbox":563,"@plotly/d3":58}],565:[function(d,ne,ae){function w(M){var T=M._fullLayout._zoomlayer;T&&T.selectAll(".outline-controllers").remove()}function v(M){var T=M._fullLayout._zoomlayer;T&&T.selectAll(".select-outline").remove(),M._fullLayout._drawing=!1}ne.exports={clearOutlineControllers:w,clearSelect:v}},{}],566:[function(d,ne,ae){var w=d("../../lib").strTranslate;function v(a,n){switch(a.type){case"log":return a.p2d(n);case"date":return a.p2r(n,0,a.calendar);default:return a.p2r(n)}}function M(a,n){switch(a.type){case"log":return a.d2p(n);case"date":return a.r2p(n,0,a.calendar);default:return a.r2p(n)}}function T(a){var n=a._id.charAt(0)==="y"?1:0;return function(r){return v(a,r[n])}}function e(a){return w(a.xaxis._offset,a.yaxis._offset)}ne.exports={p2r:v,r2p:M,axValue:T,getTransform:e}},{"../../lib":503}],567:[function(d,ne,ae){var w=d("../../registry"),v=d("../../lib"),M=d("./axis_ids");ne.exports=function(e){return function(n,r){var t=n[e];if(!!Array.isArray(t))for(var f=w.subplotsRegistry.cartesian,o=f.idRegex,i=r._subplots,g=i.xaxis,p=i.yaxis,y=i.cartesian,c=r._has("cartesian")||r._has("gl2d"),b=0;b<t.length;b++){var l=t[b];if(!!v.isPlainObject(l)){var _=M.cleanId(l.xref,"x",!1),s=M.cleanId(l.yref,"y",!1),A=o.x.test(_),m=o.y.test(s);if(A||m){c||v.pushUnique(r._basePlotModules,f);var h=!1;A&&g.indexOf(_)===-1&&(g.push(_),h=!0),m&&p.indexOf(s)===-1&&(p.push(s),h=!0),h&&A&&m&&y.push(_+s)}}}}}},{"../../lib":503,"../../registry":638,"./axis_ids":558}],568:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../registry"),M=d("../../lib"),T=d("../plots"),e=d("../../components/drawing"),a=d("../get_data").getModuleCalcData,n=d("./axis_ids"),r=d("./constants"),t=d("../../constants/xmlns_namespaces"),f=M.ensureSingle;function o(b,l,_){return M.ensureSingle(b,l,_,function(s){s.datum(_)})}ae.name="cartesian",ae.attr=["xaxis","yaxis"],ae.idRoot=["x","y"],ae.idRegex=r.idRegex,ae.attrRegex=r.attrRegex,ae.attributes=d("./attributes"),ae.layoutAttributes=d("./layout_attributes"),ae.supplyLayoutDefaults=d("./layout_defaults"),ae.transitionAxes=d("./transition_axes"),ae.finalizeSubplots=function(b,l){var _=l._subplots,s=_.xaxis,A=_.yaxis,m=_.cartesian,h=m.concat(_.gl2d||[]),x={},u={},L,S,k;for(L=0;L<h.length;L++){var P=h[L].split("y");x[P[0]]=1,u["y"+P[1]]=1}for(L=0;L<s.length;L++)S=s[L],x[S]||(k=(b[n.id2name(S)]||{}).anchor,r.idRegex.y.test(k)||(k="y"),m.push(S+k),h.push(S+k),u[k]||(u[k]=1,M.pushUnique(A,k)));for(L=0;L<A.length;L++)k=A[L],u[k]||(S=(b[n.id2name(k)]||{}).anchor,r.idRegex.x.test(S)||(S="x"),m.push(S+k),h.push(S+k),x[S]||(x[S]=1,M.pushUnique(s,S)));if(!h.length){S="",k="";for(var z in b)if(r.attrRegex.test(z)){var I=z.charAt(0);I==="x"?(!S||+z.substr(5)<+S.substr(5))&&(S=z):(!k||+z.substr(5)<+k.substr(5))&&(k=z)}S=S?n.name2id(S):"x",k=k?n.name2id(k):"y",s.push(S),A.push(k),m.push(S+k)}},ae.plot=function(b,l,_,s){var A=b._fullLayout,m=A._subplots.cartesian,h=b.calcdata,x;if(!Array.isArray(l))for(l=[],x=0;x<h.length;x++)l.push(x);for(x=0;x<m.length;x++){for(var u=m[x],L=A._plots[u],S=[],k,P=0;P<h.length;P++){var z=h[P],I=z[0].trace;I.xaxis+I.yaxis===u&&((l.indexOf(I.index)!==-1||I.carpet)&&(k&&k[0].trace.xaxis+k[0].trace.yaxis===u&&["tonextx","tonexty","tonext"].indexOf(I.fill)!==-1&&S.indexOf(k)===-1&&S.push(k),S.push(z)),k=z)}i(b,L,S,_,s)}};function i(b,l,_,s,A){for(var m=r.traceLayerClasses,h=b._fullLayout,x=h._modules,u,L,S,k=[],P=[],z=0;z<x.length;z++){u=x[z];var I=u.name,D=v.modules[I].categories;if(D.svg){var R=u.layerName||I+"layer",O=u.plot;L=a(_,O),S=L[0],_=L[1],S.length&&k.push({i:m.indexOf(R),className:R,plotMethod:O,cdModule:S}),D.zoomScale&&P.push("."+R)}}k.sort(function(G,J){return G.i-J.i});var F=l.plot.selectAll("g.mlayer").data(k,function(G){return G.className});if(F.enter().append("g").attr("class",function(G){return G.className}).classed("mlayer",!0).classed("rangeplot",l.isRangePlot),F.exit().remove(),F.order(),F.each(function(G){var J=w.select(this),Z=G.className;G.plotMethod(b,l,G.cdModule,J,s,A),r.clipOnAxisFalseQuery.indexOf("."+Z)===-1&&e.setClipUrl(J,l.layerClipId,b)}),h._has("scattergl")&&(u=v.getModule("scattergl"),S=a(_,u)[0],u.plot(b,l,S)),!b._context.staticPlot&&(l._hasClipOnAxisFalse&&(l.clipOnAxisFalseTraces=l.plot.selectAll(r.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),P.length)){var V=l.plot.selectAll(P.join(",")).selectAll(".trace");l.zoomScalePts=V.selectAll("path.point"),l.zoomScaleTxt=V.selectAll(".textpoint")}}ae.clean=function(b,l,_,s){var A=s._plots||{},m=l._plots||{},h=s._subplots||{},x,u,L;if(s._hasOnlyLargeSploms&&!l._hasOnlyLargeSploms)for(L in A)x=A[L],x.plotgroup&&x.plotgroup.remove();var S=s._has&&s._has("gl"),k=l._has&&l._has("gl");if(S&&!k)for(L in A)x=A[L],x._scene&&x._scene.destroy();if(h.xaxis&&h.yaxis){var P=n.listIds({_fullLayout:s});for(u=0;u<P.length;u++){var z=P[u];l[n.id2name(z)]||s._infolayer.selectAll(".g-"+z+"title").remove()}}var I=s._has&&s._has("cartesian"),D=l._has&&l._has("cartesian");if(I&&!D)y(s._cartesianlayer.selectAll(".subplot"),s),s._defs.selectAll(".axesclip").remove(),delete s._axisConstraintGroups,delete s._axisMatchGroups;else if(h.cartesian)for(u=0;u<h.cartesian.length;u++){var R=h.cartesian[u];if(!m[R]){var O="."+R+",."+R+"-x,."+R+"-y";s._cartesianlayer.selectAll(O).remove(),c(R,s)}}},ae.drawFramework=function(b){var l=b._fullLayout,_=g(b),s=l._cartesianlayer.selectAll(".subplot").data(_,String);s.enter().append("g").attr("class",function(A){return"subplot "+A[0]}),s.order(),s.exit().call(y,l),s.each(function(A){var m=A[0],h=l._plots[m];h.plotgroup=w.select(this),p(b,h),h.draglayer=f(l._draggers,"g",m)})},ae.rangePlot=function(b,l,_){p(b,l),i(b,l,_),T.style(b)};function g(b){var l=b._fullLayout,_=l._subplots.cartesian,s=_.length,A,m,h,x,u,L,S=[],k=[];for(A=0;A<s;A++){h=_[A],x=l._plots[h],u=x.xaxis,L=x.yaxis;var P=u._mainAxis,z=L._mainAxis,I=P._id+z._id,D=l._plots[I];x.overlays=[],I!==h&&D?(x.mainplot=I,x.mainplotinfo=D,k.push(h)):(x.mainplot=void 0,x.mainplotinfo=void 0,S.push(h))}for(A=0;A<k.length;A++)h=k[A],x=l._plots[h],x.mainplotinfo.overlays.push(x);var R=S.concat(k),O=new Array(s);for(A=0;A<s;A++){h=R[A],x=l._plots[h],u=x.xaxis,L=x.yaxis;var F=[h,u.layer,L.layer,u.overlaying||"",L.overlaying||""];for(m=0;m<x.overlays.length;m++)F.push(x.overlays[m].id);O[A]=F}return O}function p(b,l){var _=l.plotgroup,s=l.id,A=r.layerValue2layerClass[l.xaxis.layer],m=r.layerValue2layerClass[l.yaxis.layer],h=b._fullLayout._hasOnlyLargeSploms;if(l.mainplot){var u=l.mainplotinfo,L=u.plotgroup,S=s+"-x",k=s+"-y";l.minorGridlayer=u.minorGridlayer,l.gridlayer=u.gridlayer,l.zerolinelayer=u.zerolinelayer,f(u.overlinesBelow,"path",S),f(u.overlinesBelow,"path",k),f(u.overaxesBelow,"g",S),f(u.overaxesBelow,"g",k),l.plot=f(u.overplot,"g",s),f(u.overlinesAbove,"path",S),f(u.overlinesAbove,"path",k),f(u.overaxesAbove,"g",S),f(u.overaxesAbove,"g",k),l.xlines=L.select(".overlines-"+A).select("."+S),l.ylines=L.select(".overlines-"+m).select("."+k),l.xaxislayer=L.select(".overaxes-"+A).select("."+S),l.yaxislayer=L.select(".overaxes-"+m).select("."+k)}else if(h)l.xlines=f(_,"path","xlines-above"),l.ylines=f(_,"path","ylines-above"),l.xaxislayer=f(_,"g","xaxislayer-above"),l.yaxislayer=f(_,"g","yaxislayer-above");else{var x=f(_,"g","layer-subplot");l.shapelayer=f(x,"g","shapelayer"),l.imagelayer=f(x,"g","imagelayer"),l.minorGridlayer=f(_,"g","minor-gridlayer"),l.gridlayer=f(_,"g","gridlayer"),l.zerolinelayer=f(_,"g","zerolinelayer"),f(_,"path","xlines-below"),f(_,"path","ylines-below"),l.overlinesBelow=f(_,"g","overlines-below"),f(_,"g","xaxislayer-below"),f(_,"g","yaxislayer-below"),l.overaxesBelow=f(_,"g","overaxes-below"),l.plot=f(_,"g","plot"),l.overplot=f(_,"g","overplot"),l.xlines=f(_,"path","xlines-above"),l.ylines=f(_,"path","ylines-above"),l.overlinesAbove=f(_,"g","overlines-above"),f(_,"g","xaxislayer-above"),f(_,"g","yaxislayer-above"),l.overaxesAbove=f(_,"g","overaxes-above"),l.xlines=_.select(".xlines-"+A),l.ylines=_.select(".ylines-"+m),l.xaxislayer=_.select(".xaxislayer-"+A),l.yaxislayer=_.select(".yaxislayer-"+m)}h||(o(l.minorGridlayer,"g",l.xaxis._id),o(l.minorGridlayer,"g",l.yaxis._id),l.minorGridlayer.selectAll("g").map(function(P){return P[0]}).sort(n.idSort),o(l.gridlayer,"g",l.xaxis._id),o(l.gridlayer,"g",l.yaxis._id),l.gridlayer.selectAll("g").map(function(P){return P[0]}).sort(n.idSort)),l.xlines.style("fill","none").classed("crisp",!0),l.ylines.style("fill","none").classed("crisp",!0)}function y(b,l){if(!!b){var _={};b.each(function(u){var L=u[0],S=w.select(this);S.remove(),c(L,l),_[L]=!0});for(var s in l._plots)for(var A=l._plots[s],m=A.overlays||[],h=0;h<m.length;h++){var x=m[h];_[x.id]&&x.plot.selectAll(".trace").remove()}}}function c(b,l){l._draggers.selectAll("g."+b).remove(),l._defs.select("#clip"+l._uid+b+"plot").remove()}ae.toSVG=function(b){var l=b._fullLayout._glimages,_=w.select(b).selectAll(".svg-container"),s=_.filter(function(m,h){return h===_.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function A(){var m=this,h=m.toDataURL("image/png"),x=l.append("svg:image");x.attr({xmlns:t.svg,"xlink:href":h,preserveAspectRatio:"none",x:0,y:0,width:m.style.width,height:m.style.height})}s.each(A)},ae.updateFx=d("./graph_interact").updateFx},{"../../components/drawing":388,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../registry":638,"../get_data":593,"../plots":619,"./attributes":552,"./axis_ids":558,"./constants":561,"./graph_interact":564,"./layout_attributes":569,"./layout_defaults":570,"./transition_axes":581,"@plotly/d3":58}],569:[function(d,ne,ae){var w=d("../font_attributes"),v=d("../../components/color/attributes"),M=d("../../components/drawing/attributes").dash,T=d("../../lib/extend").extendFlat,e=d("../../plot_api/plot_template").templatedArray,a=d("../../plots/cartesian/axis_format_attributes").descriptionWithDates,n=d("../../constants/numerical").ONEDAY,r=d("./constants"),t=r.HOUR_PATTERN,f=r.WEEKDAY_PATTERN,o={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}};function i(x){return{valType:"integer",min:0,dflt:x?5:0,editType:"ticks"}}var g={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},p={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},y={valType:"data_array",editType:"ticks"},c={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function b(x){var u={valType:"number",min:0,editType:"ticks"};return x||(u.dflt=5),u}function l(x){var u={valType:"number",min:0,editType:"ticks"};return x||(u.dflt=1),u}var _={valType:"color",dflt:v.defaultLine,editType:"ticks"},s={valType:"color",dflt:v.lightLine,editType:"ticks"};function A(x){var u={valType:"number",min:0,editType:"ticks"};return x||(u.dflt=1),u}var m=T({},M,{editType:"ticks"}),h={valType:"boolean",editType:"ticks"};ne.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:v.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:w({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[r.idRegex.x.toString(),r.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[r.idRegex.x.toString(),r.idRegex.y.toString()],editType:"calc"},rangebreaks:e("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[f,t,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:n},editType:"calc"}),tickmode:o,nticks:i(),tick0:g,dtick:p,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:y,ticktext:{valType:"data_array",editType:"ticks"},ticks:c,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:b(),tickwidth:l(),tickcolor:_,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:T({},M,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:w({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:a("tick label")},tickformatstops:e("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:a("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:v.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:h,gridcolor:s,gridwidth:A(),griddash:m,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:v.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:v.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",r.idRegex.x.toString(),r.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",r.idRegex.x.toString(),r.idRegex.y.toString()],editType:"plot"},minor:{tickmode:o,nticks:i("minor"),tick0:g,dtick:p,tickvals:y,ticks:c,ticklen:b("minor"),tickwidth:l("minor"),tickcolor:_,gridcolor:s,gridwidth:A("minor"),griddash:m,showgrid:h,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:w({editType:"ticks"})}}},{"../../components/color/attributes":365,"../../components/drawing/attributes":387,"../../constants/numerical":479,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../font_attributes":585,"./constants":561}],570:[function(d,ne,ae){var w=d("../../lib"),v=d("../../components/color"),M=d("../../components/fx/helpers").isUnifiedHover,T=d("../../components/fx/hovermode_defaults"),e=d("../../plot_api/plot_template"),a=d("../layout_attributes"),n=d("./layout_attributes"),r=d("./type_defaults"),t=d("./axis_defaults"),f=d("./constraints"),o=d("./position_defaults"),i=d("./axis_ids"),g=i.id2name,p=i.name2id,y=d("./constants").AX_ID_PATTERN,c=d("../../registry"),b=c.traceIs,l=c.getComponentMethod;function _(s,A,m){Array.isArray(s[A])?s[A].push(m):s[A]=[m]}ne.exports=function(A,m,h){var x=m.autotypenumbers,u={},L={},S={},k={},P={},z={},I={},D={},R={},O={},F,V;for(F=0;F<h.length;F++){var G=h[F];if(!(!b(G,"cartesian")&&!b(G,"gl2d"))){var J;if(G.xaxis)J=g(G.xaxis),_(u,J,G);else if(G.xaxes)for(V=0;V<G.xaxes.length;V++)_(u,g(G.xaxes[V]),G);var Z;if(G.yaxis)Z=g(G.yaxis),_(u,Z,G);else if(G.yaxes)for(V=0;V<G.yaxes.length;V++)_(u,g(G.yaxes[V]),G);if(G.type==="funnel"?G.orientation==="h"?(J&&(L[J]=!0),Z&&(I[Z]=!0)):Z&&(S[Z]=!0):G.type==="image"?(Z&&(D[Z]=!0),J&&(D[J]=!0)):(Z&&(P[Z]=!0,z[Z]=!0),(!b(G,"carpet")||G.type==="carpet"&&!G._cheater)&&J&&(k[J]=!0)),G.type==="carpet"&&G._cheater&&J&&(L[J]=!0),b(G,"2dMap")&&(R[J]=!0,R[Z]=!0),b(G,"oriented")){var Y=G.orientation==="h"?Z:J;O[Y]=!0}}}var j=m._subplots,re=j.xaxis,se=j.yaxis,oe=w.simpleMap(re,g),N=w.simpleMap(se,g),U=oe.concat(N),q=v.background;re.length&&se.length&&(q=w.coerce(A,m,a,"plot_bgcolor"));var Q=v.combine(q,m.paper_bgcolor),W,X,ee,te,ie;function le(){var Ze=u[W]||[];ie._traceIndices=Ze.map(function(ke){return ke._expandedIndex}),ie._annIndices=[],ie._shapeIndices=[],ie._imgIndices=[],ie._subplotsWith=[],ie._counterAxes=[],ie._name=ie._attr=W,ie._id=X}function ge(Ze,ke){return w.coerce(te,ie,n,Ze,ke)}function fe(Ze,ke){return w.coerce2(te,ie,n,Ze,ke)}function pe(Ze){return Ze==="x"?se:re}function ye(Ze,ke){for(var Ge=Ze==="x"?oe:N,Je=[],ot=0;ot<Ge.length;ot++){var Pt=Ge[ot];Pt!==ke&&!(A[Pt]||{}).overlaying&&Je.push(p(Pt))}return Je}var Te={x:pe("x"),y:pe("y")},_e=Te.x.concat(Te.y),De={},Be=[];function Ue(){var Ze=te.matches;y.test(Ze)&&_e.indexOf(Ze)===-1&&(De[Ze]=te.type,Be=Object.keys(De))}var xe=T(A,m),Pe=M(xe);for(F=0;F<U.length;F++){W=U[F],X=p(W),ee=W.charAt(0),w.isPlainObject(A[W])||(A[W]={}),te=A[W],ie=e.newContainer(m,W,ee+"axis"),le();var Ve=ee==="x"&&!k[W]&&L[W]||ee==="y"&&!P[W]&&S[W],Qe=ee==="y"&&(!z[W]&&I[W]||D[W]),Fe={hasMinor:!0,letter:ee,font:m.font,outerTicks:R[W],showGrid:!O[W],data:u[W]||[],bgColor:Q,calendar:m.calendar,automargin:!0,visibleDflt:Ve,reverseDflt:Qe,autotypenumbersDflt:x,splomStash:((m._splomAxes||{})[ee]||{})[X]};ge("uirevision",m.uirevision),r(te,ie,ge,Fe),t(te,ie,ge,Fe,m);var Le=Pe&&ee===xe.charAt(0),Ne=fe("spikecolor",Pe?ie.color:void 0),dt=fe("spikethickness",Pe?1.5:void 0),Dt=fe("spikedash",Pe?"dot":void 0),Xt=fe("spikemode",Pe?"across":void 0),At=fe("spikesnap"),zt=ge("showspikes",!!Le||!!Ne||!!dt||!!Dt||!!Xt||!!At);zt||(delete ie.spikecolor,delete ie.spikethickness,delete ie.spikedash,delete ie.spikemode,delete ie.spikesnap),o(te,ie,ge,{letter:ee,counterAxes:Te[ee],overlayableAxes:ye(ee,W),grid:m.grid}),ge("title.standoff"),Ue(),ie._input=te}for(F=0;F<Be.length;){X=Be[F++],W=g(X),ee=W.charAt(0),w.isPlainObject(A[W])||(A[W]={}),te=A[W],ie=e.newContainer(m,W,ee+"axis"),le();var Ut={letter:ee,font:m.font,outerTicks:R[W],showGrid:!O[W],data:[],bgColor:Q,calendar:m.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:x,splomStash:((m._splomAxes||{})[ee]||{})[X]};ge("uirevision",m.uirevision),ie.type=De[X]||"linear",t(te,ie,ge,Ut,m),o(te,ie,ge,{letter:ee,counterAxes:Te[ee],overlayableAxes:ye(ee,W),grid:m.grid}),ge("fixedrange"),Ue(),ie._input=te}var Ct=l("rangeslider","handleDefaults"),Mt=l("rangeselector","handleDefaults");for(F=0;F<oe.length;F++)W=oe[F],te=A[W],ie=m[W],Ct(A,m,W),ie.type==="date"&&Mt(te,ie,m,N,ie.calendar),ge("fixedrange");for(F=0;F<N.length;F++){W=N[F],te=A[W],ie=m[W];var rt=m[g(ie.anchor)],ct=l("rangeslider","isVisible")(rt);ge("fixedrange",ct)}f.handleDefaults(A,m,{axIds:_e.concat(Be).sort(i.idSort),axHasImage:D})}},{"../../components/color":366,"../../components/fx/helpers":402,"../../components/fx/hovermode_defaults":405,"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"../layout_attributes":610,"./axis_defaults":556,"./axis_ids":558,"./constants":561,"./constraints":562,"./layout_attributes":569,"./position_defaults":572,"./type_defaults":582}],571:[function(d,ne,ae){var w=d("tinycolor2").mix,v=d("../../components/color/attributes"),M=d("../../lib");ne.exports=function(e,a,n,r){r=r||{};var t=r.dfltColor;function f(S,k){return M.coerce2(e,a,r.attributes,S,k)}var o=f("linecolor",t),i=f("linewidth"),g=n("showline",r.showLine||!!o||!!i);g||(delete a.linecolor,delete a.linewidth);var p=w(t,r.bgColor,r.blend||v.lightFraction).toRgbString(),y=f("gridcolor",p),c=f("gridwidth"),b=f("griddash"),l=n("showgrid",r.showGrid||!!y||!!c||!!b);if(l||(delete a.gridcolor,delete a.gridwidth,delete a.griddash),r.hasMinor){var _=w(a.gridcolor,r.bgColor,67).toRgbString(),s=f("minor.gridcolor",_),A=f("minor.gridwidth",a.gridwidth||1),m=f("minor.griddash",a.griddash||"solid"),h=n("minor.showgrid",!!s||!!A||!!m);h||(delete a.minor.gridcolor,delete a.minor.gridwidth,delete a.minor.griddash)}if(!r.noZeroLine){var x=f("zerolinecolor",t),u=f("zerolinewidth"),L=n("zeroline",r.showGrid||!!x||!!u);L||(delete a.zerolinecolor,delete a.zerolinewidth)}}},{"../../components/color/attributes":365,"../../lib":503,tinycolor2:312}],572:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("../../lib");ne.exports=function(T,e,a,n){var r=n.counterAxes||[],t=n.overlayableAxes||[],f=n.letter,o=n.grid,i,g,p,y;o&&(g=o._domains[f][o._axisMap[e._id]],i=o._anchors[e._id],g&&(p=o[f+"side"].split(" ")[0],y=o.domain[f][p==="right"||p==="top"?1:0])),g=g||[0,1],i=i||(w(T.position)?"free":r[0]||"free"),p=p||(f==="x"?"bottom":"left"),y=y||0;var c=v.coerce(T,e,{anchor:{valType:"enumerated",values:["free"].concat(r),dflt:i}},"anchor");c==="free"&&a("position",y),v.coerce(T,e,{side:{valType:"enumerated",values:f==="x"?["bottom","top"]:["left","right"],dflt:p}},"side");var b=!1;if(t.length&&(b=v.coerce(T,e,{overlaying:{valType:"enumerated",values:[!1].concat(t),dflt:!1}},"overlaying")),!b){var l=a("domain",g);l[0]>l[1]-1/4096&&(e.domain=g),v.noneOrAll(T.domain,e.domain,g)}return a("layer"),e}},{"../../lib":503,"fast-isnumeric":190}],573:[function(d,ne,ae){var w=d("./show_dflt");ne.exports=function(M,T,e,a,n){n||(n={});var r=n.tickSuffixDflt,t=w(M),f=e("tickprefix");f&&e("showtickprefix",t);var o=e("ticksuffix",r);o&&e("showticksuffix",t)}},{"./show_dflt":577}],574:[function(d,ne,ae){var w=d("../../constants/alignment").FROM_BL;ne.exports=function(M,T,e){e===void 0&&(e=w[M.constraintoward||"center"]);var a=[M.r2l(M.range[0]),M.r2l(M.range[1])],n=a[0]+(a[1]-a[0])*e;M.range=M._input.range=[M.l2r(n+(a[0]-n)*T),M.l2r(n+(a[1]-n)*T)],M.setScale()}},{"../../constants/alignment":471}],575:[function(d,ne,ae){var w=d("polybooljs"),v=d("../../registry"),M=d("../../components/drawing").dashStyle,T=d("../../components/color"),e=d("../../components/fx"),a=d("../../components/fx/helpers").makeEventData,n=d("../../components/dragelement/helpers"),r=n.freeMode,t=n.rectMode,f=n.drawMode,o=n.openMode,i=n.selectMode,g=d("../../components/shapes/draw_newshape/display_outlines"),p=d("../../components/shapes/draw_newshape/helpers").handleEllipse,y=d("../../components/shapes/draw_newshape/newshapes"),c=d("../../lib"),b=d("../../lib/polygon"),l=d("../../lib/throttle"),_=d("./axis_ids").getFromId,s=d("../../lib/clear_gl_canvases"),A=d("../../plot_api/subroutines").redrawReglTraces,m=d("./constants"),h=m.MINSELECT,x=b.filter,u=b.tester,L=d("./handle_outline").clearSelect,S=d("./helpers"),k=S.p2r,P=S.axValue,z=S.getTransform;function I(W,X,ee,te,ie){var le=r(ie),ge=t(ie),fe=o(ie),pe=f(ie),ye=i(ie),Te=ie==="drawline",_e=ie==="drawcircle",De=Te||_e,Be=te.gd,Ue=Be._fullLayout,xe=Ue._zoomlayer,Pe=te.element.getBoundingClientRect(),Ve=te.plotinfo,Qe=z(Ve),Fe=X-Pe.left,Le=ee-Pe.top;Ue._calcInverseTransform(Be);var Ne=c.apply3DTransform(Ue._invTransform)(Fe,Le);Fe=Ne[0],Le=Ne[1];var dt=Ue._invScaleX,Dt=Ue._invScaleY,Xt=Fe,At=Le,zt="M"+Fe+","+Le,Ut=te.xaxes[0]._length,Ct=te.yaxes[0]._length,Mt=te.xaxes.concat(te.yaxes),rt=W.altKey&&!(f(ie)&&fe),ct,Ze,ke,Ge,Je,ot,Pt;G(W,Be,te),le&&(ct=x([[Fe,Le]],m.BENDPX));var _t=xe.selectAll("path.select-outline-"+Ve.id).data(pe?[0]:[1,2]),Bt=Ue.newshape;_t.enter().append("path").attr("class",function(Xr){return"select-outline select-outline-"+Xr+" select-outline-"+Ve.id}).style(pe?{opacity:Bt.opacity/2,fill:fe?void 0:Bt.fillcolor,stroke:Bt.line.color,"stroke-dasharray":M(Bt.line.dash,Bt.line.width),"stroke-width":Bt.line.width+"px"}:{}).attr("fill-rule",Bt.fillrule).classed("cursor-move",!!pe).attr("transform",Qe).attr("d",zt+"Z");var qt=xe.append("path").attr("class","zoombox-corners").style({fill:T.background,stroke:T.defaultLine,"stroke-width":1}).attr("transform",Qe).attr("d","M0,0Z"),Ot=Ue._uid+m.SELECTID,$t=[],rr=Z(Be,te.xaxes,te.yaxes,te.subplot);function er(Xr,hn){return Xr-hn}var pr;Ve.fillRangeItems?pr=Ve.fillRangeItems:ge?pr=function(Xr,hn){var Qr=Xr.range={};for(Je=0;Je<Mt.length;Je++){var nt=Mt[Je],Ht=nt._id.charAt(0);Qr[nt._id]=[k(nt,hn[Ht+"min"]),k(nt,hn[Ht+"max"])].sort(er)}}:pr=function(Xr,hn,Qr){var nt=Xr.lassoPoints={};for(Je=0;Je<Mt.length;Je++){var Ht=Mt[Je];nt[Ht._id]=Qr.filtered.map(P(Ht))}},te.moveFn=function(Xr,hn){Xt=Math.max(0,Math.min(Ut,dt*Xr+Fe)),At=Math.max(0,Math.min(Ct,Dt*hn+Le));var Qr=Math.abs(Xt-Fe),nt=Math.abs(At-Le);if(ge){var Ht,Kt,Gt;if(ye){var br=Ue.selectdirection;switch(br==="any"?nt<Math.min(Qr*.6,h)?Ht="h":Qr<Math.min(nt*.6,h)?Ht="v":Ht="d":Ht=br,Ht){case"h":Kt=_e?Ct/2:0,Gt=Ct;break;case"v":Kt=_e?Ut/2:0,Gt=Ut;break}}if(pe)switch(Ue.newshape.drawdirection){case"vertical":Ht="h",Kt=_e?Ct/2:0,Gt=Ct;break;case"horizontal":Ht="v",Kt=_e?Ut/2:0,Gt=Ut;break;case"ortho":Qr<nt?(Ht="h",Kt=Le,Gt=At):(Ht="v",Kt=Fe,Gt=Xt);break;default:Ht="d"}Ht==="h"?(Ge=De?p(_e,[Xt,Kt],[Xt,Gt]):[[Fe,Kt],[Fe,Gt],[Xt,Gt],[Xt,Kt]],Ge.xmin=De?Xt:Math.min(Fe,Xt),Ge.xmax=De?Xt:Math.max(Fe,Xt),Ge.ymin=Math.min(Kt,Gt),Ge.ymax=Math.max(Kt,Gt),qt.attr("d","M"+Ge.xmin+","+(Le-h)+"h-4v"+2*h+"h4ZM"+(Ge.xmax-1)+","+(Le-h)+"h4v"+2*h+"h-4Z")):Ht==="v"?(Ge=De?p(_e,[Kt,At],[Gt,At]):[[Kt,Le],[Kt,At],[Gt,At],[Gt,Le]],Ge.xmin=Math.min(Kt,Gt),Ge.xmax=Math.max(Kt,Gt),Ge.ymin=De?At:Math.min(Le,At),Ge.ymax=De?At:Math.max(Le,At),qt.attr("d","M"+(Fe-h)+","+Ge.ymin+"v-4h"+2*h+"v4ZM"+(Fe-h)+","+(Ge.ymax-1)+"v4h"+2*h+"v-4Z")):Ht==="d"&&(Ge=De?p(_e,[Fe,Le],[Xt,At]):[[Fe,Le],[Fe,At],[Xt,At],[Xt,Le]],Ge.xmin=Math.min(Fe,Xt),Ge.xmax=Math.max(Fe,Xt),Ge.ymin=Math.min(Le,At),Ge.ymax=Math.max(Le,At),qt.attr("d","M0,0Z"))}else le&&(ct.addPt([Xt,At]),Ge=ct.filtered);te.selectionDefs&&te.selectionDefs.length?(ke=U(te.mergedPolygons,Ge,rt),Ge.subtract=rt,Ze=V(te.selectionDefs.concat([Ge]))):(ke=[Ge],Ze=u(Ge)),g(Q(ke,fe),_t,te),ye&&l.throttle(Ot,m.SELECTDELAY,function(){$t=[];var tt,je;for(Je=0;Je<rr.length;Je++)if(ot=rr[Je],je=ot._module.selectPoints(ot,Ze),tt=q(je,ot),$t.length)for(var st=0;st<tt.length;st++)$t.push(tt[st]);else $t=tt;Pt={points:$t},N(Be,rr,Pt),pr(Pt,Ge,ct),te.gd.emit("plotly_selecting",Pt)})},te.clickFn=function(Xr,hn){if(qt.remove(),Be._fullLayout._activeShapeIndex>=0){Be._fullLayout._deactivateShape(Be);return}if(!pe){var Qr=Ue.clickmode;l.done(Ot).then(function(){if(l.clear(Ot),Xr===2){for(_t.remove(),Je=0;Je<rr.length;Je++)ot=rr[Je],ot._module.selectPoints(ot,!1);N(Be,rr),J(te),Be.emit("plotly_deselect",null)}else Qr.indexOf("select")>-1&&D(hn,Be,te.xaxes,te.yaxes,te.subplot,te,_t),Qr==="event"&&Be.emit("plotly_selected",void 0);e.click(Be,hn)}).catch(c.error)}},te.doneFn=function(){qt.remove(),l.done(Ot).then(function(){l.clear(Ot),te.gd.emit("plotly_selected",Pt),Ge&&te.selectionDefs&&(Ge.subtract=rt,te.selectionDefs.push(Ge),te.mergedPolygons.length=0,[].push.apply(te.mergedPolygons,ke)),te.doneFnCompleted&&te.doneFnCompleted($t)}).catch(c.error),pe&&J(te)}}function D(W,X,ee,te,ie,le,ge){var fe=X._hoverdata,pe=X._fullLayout,ye=pe.clickmode,Te=ye.indexOf("event")>-1,_e=[],De,Be,Ue,xe,Pe,Ve,Qe,Fe,Le,Ne;if(Y(fe)){G(W,X,le),De=Z(X,ee,te,ie);var dt=j(fe,De),Dt=dt.pointNumbers.length>0;if(Dt?se(De,dt):oe(De)&&(Qe=re(dt))){for(ge&&ge.remove(),Ne=0;Ne<De.length;Ne++)Be=De[Ne],Be._module.selectPoints(Be,!1);N(X,De),J(le),Te&&X.emit("plotly_deselect",null)}else{Fe=W.shiftKey&&(Qe!==void 0?Qe:re(dt)),Ue=R(dt.pointNumber,dt.searchInfo,Fe);var Xt=le.selectionDefs.concat([Ue]);for(xe=V(Xt),Ne=0;Ne<De.length;Ne++)if(Pe=De[Ne]._module.selectPoints(De[Ne],xe),Ve=q(Pe,De[Ne]),_e.length)for(var At=0;At<Ve.length;At++)_e.push(Ve[At]);else _e=Ve;if(Le={points:_e},N(X,De,Le),Ue&&le&&le.selectionDefs.push(Ue),ge){var zt=le.mergedPolygons,Ut=o(le.dragmode);g(Q(zt,Ut),ge,le)}Te&&X.emit("plotly_selected",Le)}}}function R(W,X,ee){return{pointNumber:W,searchInfo:X,subtract:ee}}function O(W){return"pointNumber"in W&&"searchInfo"in W}function F(W){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(X,ee,te,ie){var le=W.searchInfo.cd[0].trace._expandedIndex,ge=ie.cd[0].trace._expandedIndex;return ge===le&&te===W.pointNumber},isRect:!1,degenerate:!1,subtract:W.subtract}}function V(W){for(var X=[],ee=O(W[0])?0:W[0][0][0],te=ee,ie=O(W[0])?0:W[0][0][1],le=ie,ge=0;ge<W.length;ge++)if(O(W[ge]))X.push(F(W[ge]));else{var fe=b.tester(W[ge]);fe.subtract=W[ge].subtract,X.push(fe),ee=Math.min(ee,fe.xmin),te=Math.max(te,fe.xmax),ie=Math.min(ie,fe.ymin),le=Math.max(le,fe.ymax)}function pe(ye,Te,_e,De){for(var Be=!1,Ue=0;Ue<X.length;Ue++)X[Ue].contains(ye,Te,_e,De)&&(Be=X[Ue].subtract===!1);return Be}return{xmin:ee,xmax:te,ymin:ie,ymax:le,pts:[],contains:pe,isRect:!1,degenerate:!1}}function G(W,X,ee){X._fullLayout._drawing=!1;var te=X._fullLayout,ie=ee.plotinfo,le=ee.dragmode,ge=te._lastSelectedSubplot&&te._lastSelectedSubplot===ie.id,fe=(W.shiftKey||W.altKey)&&!(f(le)&&o(le));ge&&fe&&ie.selection&&ie.selection.selectionDefs&&!ee.selectionDefs?(ee.selectionDefs=ie.selection.selectionDefs,ee.mergedPolygons=ie.selection.mergedPolygons):(!fe||!ie.selection)&&J(ee),ge||(L(X),te._lastSelectedSubplot=ie.id)}function J(W){var X=W.dragmode,ee=W.plotinfo,te=W.gd;if(te._fullLayout._activeShapeIndex>=0&&te._fullLayout._deactivateShape(te),f(X)){var ie=te._fullLayout,le=ie._zoomlayer,ge=le.selectAll(".select-outline-"+ee.id);if(ge&&te._fullLayout._drawing){var fe=y(ge,W);fe&&v.call("_guiRelayout",te,{shapes:fe}),te._fullLayout._drawing=!1}}ee.selection={},ee.selection.selectionDefs=W.selectionDefs=[],ee.selection.mergedPolygons=W.mergedPolygons=[]}function Z(W,X,ee,te){var ie=[],le=X.map(function(Be){return Be._id}),ge=ee.map(function(Be){return Be._id}),fe,pe,ye;for(ye=0;ye<W.calcdata.length;ye++)if(fe=W.calcdata[ye],pe=fe[0].trace,!(pe.visible!==!0||!pe._module||!pe._module.selectPoints))if(te&&(pe.subplot===te||pe.geo===te))ie.push(De(pe._module,fe,X[0],ee[0]));else if(pe.type==="splom"&&pe._xaxes[le[0]]&&pe._yaxes[ge[0]]){var Te=De(pe._module,fe,X[0],ee[0]);Te.scene=W._fullLayout._splomScenes[pe.uid],ie.push(Te)}else if(pe.type==="sankey"){var _e=De(pe._module,fe,X[0],ee[0]);ie.push(_e)}else{if(le.indexOf(pe.xaxis)===-1||ge.indexOf(pe.yaxis)===-1)continue;ie.push(De(pe._module,fe,_(W,pe.xaxis),_(W,pe.yaxis)))}return ie;function De(Be,Ue,xe,Pe){return{_module:Be,cd:Ue,xaxis:xe,yaxis:Pe}}}function Y(W){return W&&Array.isArray(W)&&W[0].hoverOnBox!==!0}function j(W,X){var ee=W[0],te=-1,ie=[],le,ge;for(ge=0;ge<X.length;ge++)if(le=X[ge],ee.fullData._expandedIndex===le.cd[0].trace._expandedIndex){if(ee.hoverOnBox===!0)break;ee.pointNumber!==void 0?te=ee.pointNumber:ee.binNumber!==void 0&&(te=ee.binNumber,ie=ee.pointNumbers);break}return{pointNumber:te,pointNumbers:ie,searchInfo:le}}function re(W){var X=W.searchInfo.cd[0].trace,ee=W.pointNumber,te=W.pointNumbers,ie=te.length>0,le=ie?te[0]:ee;return X.selectedpoints?X.selectedpoints.indexOf(le)>-1:!1}function se(W,X){var ee=[],te,ie,le,ge;for(ge=0;ge<W.length;ge++)te=W[ge],te.cd[0].trace.selectedpoints&&te.cd[0].trace.selectedpoints.length>0&&ee.push(te);if(ee.length===1&&(le=ee[0]===X.searchInfo,le&&(ie=X.searchInfo.cd[0].trace,ie.selectedpoints.length===X.pointNumbers.length))){for(ge=0;ge<X.pointNumbers.length;ge++)if(ie.selectedpoints.indexOf(X.pointNumbers[ge])<0)return!1;return!0}return!1}function oe(W){var X=0,ee,te,ie;for(ie=0;ie<W.length;ie++)if(ee=W[ie],te=ee.cd[0].trace,te.selectedpoints&&(te.selectedpoints.length>1||(X+=te.selectedpoints.length,X>1)))return!1;return X===1}function N(W,X,ee){var te,ie,le,ge;for(te=0;te<X.length;te++){var fe=X[te].cd[0].trace._fullInput,pe=W._fullLayout._tracePreGUI[fe.uid]||{};pe.selectedpoints===void 0&&(pe.selectedpoints=fe._input.selectedpoints||null)}if(ee){var ye=ee.points||[];for(te=0;te<X.length;te++)ge=X[te].cd[0].trace,ge._input.selectedpoints=ge._fullInput.selectedpoints=[],ge._fullInput!==ge&&(ge.selectedpoints=[]);for(te=0;te<ye.length;te++){var Te=ye[te],_e=Te.data,De=Te.fullData;Te.pointIndices?([].push.apply(_e.selectedpoints,Te.pointIndices),ge._fullInput!==ge&&[].push.apply(De.selectedpoints,Te.pointIndices)):(_e.selectedpoints.push(Te.pointIndex),ge._fullInput!==ge&&De.selectedpoints.push(Te.pointIndex))}}else for(te=0;te<X.length;te++)ge=X[te].cd[0].trace,delete ge.selectedpoints,delete ge._input.selectedpoints,ge._fullInput!==ge&&delete ge._fullInput.selectedpoints;var Be=!1;for(te=0;te<X.length;te++){ie=X[te],le=ie.cd,ge=le[0].trace,v.traceIs(ge,"regl")&&(Be=!0);var Ue=ie._module,xe=Ue.styleOnSelect||Ue.style;xe&&(xe(W,le,le[0].node3),le[0].nodeRangePlot3&&xe(W,le,le[0].nodeRangePlot3))}Be&&(s(W),A(W))}function U(W,X,ee){var te;return ee?(te=w.difference({regions:W,inverted:!1},{regions:[X],inverted:!1}),te.regions):(te=w.union({regions:W,inverted:!1},{regions:[X],inverted:!1}),te.regions)}function q(W,X){if(Array.isArray(W))for(var ee=X.cd,te=X.cd[0].trace,ie=0;ie<W.length;ie++)W[ie]=a(W[ie],te,ee);return W}function Q(W,X){for(var ee=[],te=0;te<W.length;te++){ee[te]=[];for(var ie=0;ie<W[te].length;ie++){ee[te][ie]=[],ee[te][ie][0]=ie?"L":"M";for(var le=0;le<W[te][ie].length;le++)ee[te][ie].push(W[te][ie][le])}X||ee[te].push(["Z",ee[te][0][1],ee[te][0][2]])}return ee}ne.exports={prepSelect:I,clearSelect:L,clearSelectionsCache:J,selectOnClick:D}},{"../../components/color":366,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../components/fx/helpers":402,"../../components/shapes/draw_newshape/display_outlines":454,"../../components/shapes/draw_newshape/helpers":455,"../../components/shapes/draw_newshape/newshapes":456,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/polygon":515,"../../lib/throttle":530,"../../plot_api/subroutines":544,"../../registry":638,"./axis_ids":558,"./constants":561,"./handle_outline":565,"./helpers":566,polybooljs:254}],576:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("d3-time-format").utcFormat,M=d("../../lib"),T=M.numberFormat,e=d("fast-isnumeric"),a=M.cleanNumber,n=M.ms2DateTime,r=M.dateTime2ms,t=M.ensureNumber,f=M.isArrayOrTypedArray,o=d("../../constants/numerical"),i=o.FP_SAFE,g=o.BADNUM,p=o.LOG_CLIP,y=o.ONEWEEK,c=o.ONEDAY,b=o.ONEHOUR,l=o.ONEMIN,_=o.ONESEC,s=d("./axis_ids"),A=d("./constants"),m=A.HOUR_PATTERN,h=A.WEEKDAY_PATTERN;function x(L){return Math.pow(10,L)}function u(L){return L!=null}ne.exports=function(S,k){k=k||{};var P=S._id||"x",z=P.charAt(0);function I(U,q){if(U>0)return Math.log(U)/Math.LN10;if(U<=0&&q&&S.range&&S.range.length===2){var Q=S.range[0],W=S.range[1];return .5*(Q+W-2*p*Math.abs(Q-W))}else return g}function D(U,q,Q,W){if((W||{}).msUTC&&e(U))return+U;var X=r(U,Q||S.calendar);if(X===g)if(e(U)){U=+U;var ee=Math.floor(M.mod(U+.05,1)*10),te=Math.round(U-ee/10);X=r(new Date(te))+ee/10}else return g;return X}function R(U,q,Q){return n(U,q,Q||S.calendar)}function O(U){return S._categories[Math.round(U)]}function F(U){if(u(U)){if(S._categoriesMap===void 0&&(S._categoriesMap={}),S._categoriesMap[U]!==void 0)return S._categoriesMap[U];S._categories.push(typeof U=="number"?String(U):U);var q=S._categories.length-1;return S._categoriesMap[U]=q,q}return g}function V(U,q){for(var Q=new Array(q),W=0;W<q;W++){var X=(U[0]||[])[W],ee=(U[1]||[])[W];Q[W]=G([X,ee])}return Q}function G(U){if(S._categoriesMap)return S._categoriesMap[U]}function J(U){var q=G(U);if(q!==void 0)return q;if(e(U))return+U}function Z(U){return e(U)?+U:G(U)}function Y(U,q,Q){return w.round(Q+q*U,2)}function j(U,q,Q){return(U-Q)/q}var re=function(q){return e(q)?Y(q,S._m,S._b):g},se=function(U){return j(U,S._m,S._b)};if(S.rangebreaks){var oe=z==="y";re=function(U){if(!e(U))return g;var q=S._rangebreaks.length;if(!q)return Y(U,S._m,S._b);var Q=oe;S.range[0]>S.range[1]&&(Q=!Q);for(var W=Q?-1:1,X=W*U,ee=0,te=0;te<q;te++){var ie=W*S._rangebreaks[te].min,le=W*S._rangebreaks[te].max;if(X<ie)break;if(X>le)ee=te+1;else{ee=X<(ie+le)/2?te:te+1;break}}var ge=S._B[ee]||0;return isFinite(ge)?Y(U,S._m2,ge):0},se=function(U){var q=S._rangebreaks.length;if(!q)return j(U,S._m,S._b);for(var Q=0,W=0;W<q&&!(U<S._rangebreaks[W].pmin);W++)U>S._rangebreaks[W].pmax&&(Q=W+1);return j(U,S._m2,S._B[Q])}}S.c2l=S.type==="log"?I:t,S.l2c=S.type==="log"?x:t,S.l2p=re,S.p2l=se,S.c2p=S.type==="log"?function(U,q){return re(I(U,q))}:re,S.p2c=S.type==="log"?function(U){return x(se(U))}:se,["linear","-"].indexOf(S.type)!==-1?(S.d2r=S.r2d=S.d2c=S.r2c=S.d2l=S.r2l=a,S.c2d=S.c2r=S.l2d=S.l2r=t,S.d2p=S.r2p=function(U){return S.l2p(a(U))},S.p2d=S.p2r=se,S.cleanPos=t):S.type==="log"?(S.d2r=S.d2l=function(U,q){return I(a(U),q)},S.r2d=S.r2c=function(U){return x(a(U))},S.d2c=S.r2l=a,S.c2d=S.l2r=t,S.c2r=I,S.l2d=x,S.d2p=function(U,q){return S.l2p(S.d2r(U,q))},S.p2d=function(U){return x(se(U))},S.r2p=function(U){return S.l2p(a(U))},S.p2r=se,S.cleanPos=t):S.type==="date"?(S.d2r=S.r2d=M.identity,S.d2c=S.r2c=S.d2l=S.r2l=D,S.c2d=S.c2r=S.l2d=S.l2r=R,S.d2p=S.r2p=function(U,q,Q){return S.l2p(D(U,0,Q))},S.p2d=S.p2r=function(U,q,Q){return R(se(U),q,Q)},S.cleanPos=function(U){return M.cleanDate(U,g,S.calendar)}):S.type==="category"?(S.d2c=S.d2l=F,S.r2d=S.c2d=S.l2d=O,S.d2r=S.d2l_noadd=J,S.r2c=function(U){var q=Z(U);return q!==void 0?q:S.fraction2r(.5)},S.l2r=S.c2r=t,S.r2l=Z,S.d2p=function(U){return S.l2p(S.r2c(U))},S.p2d=function(U){return O(se(U))},S.r2p=S.d2p,S.p2r=se,S.cleanPos=function(U){return typeof U=="string"&&U!==""?U:t(U)}):S.type==="multicategory"&&(S.r2d=S.c2d=S.l2d=O,S.d2r=S.d2l_noadd=J,S.r2c=function(U){var q=J(U);return q!==void 0?q:S.fraction2r(.5)},S.r2c_just_indices=G,S.l2r=S.c2r=t,S.r2l=J,S.d2p=function(U){return S.l2p(S.r2c(U))},S.p2d=function(U){return O(se(U))},S.r2p=S.d2p,S.p2r=se,S.cleanPos=function(U){return Array.isArray(U)||typeof U=="string"&&U!==""?U:t(U)},S.setupMultiCategory=function(U){var q=S._traceIndices,Q,W,X=S._matchGroup;if(X&&S._categories.length===0){for(var ee in X)if(ee!==P){var te=k[s.id2name(ee)];q=q.concat(te._traceIndices)}}var ie=[[0,{}],[0,{}]],le=[];for(Q=0;Q<q.length;Q++){var ge=U[q[Q]];if(z in ge){var fe=ge[z],pe=ge._length||M.minRowLength(fe);if(f(fe[0])&&f(fe[1]))for(W=0;W<pe;W++){var ye=fe[0][W],Te=fe[1][W];u(ye)&&u(Te)&&(le.push([ye,Te]),ye in ie[0][1]||(ie[0][1][ye]=ie[0][0]++),Te in ie[1][1]||(ie[1][1][Te]=ie[1][0]++))}}}for(le.sort(function(_e,De){var Be=ie[0][1],Ue=Be[_e[0]]-Be[De[0]];if(Ue)return Ue;var xe=ie[1][1];return xe[_e[1]]-xe[De[1]]}),Q=0;Q<le.length;Q++)F(le[Q])}),S.fraction2r=function(U){var q=S.r2l(S.range[0]),Q=S.r2l(S.range[1]);return S.l2r(q+U*(Q-q))},S.r2fraction=function(U){var q=S.r2l(S.range[0]),Q=S.r2l(S.range[1]);return(S.r2l(U)-q)/(Q-q)},S.cleanRange=function(U,q){q||(q={}),U||(U="range");var Q=M.nestedProperty(S,U).get(),W,X;if(S.type==="date"?X=M.dfltRange(S.calendar):z==="y"?X=A.DFLTRANGEY:S._name==="realaxis"?X=[0,1]:X=q.dfltRange||A.DFLTRANGEX,X=X.slice(),(S.rangemode==="tozero"||S.rangemode==="nonnegative")&&(X[0]=0),!Q||Q.length!==2){M.nestedProperty(S,U).set(X);return}for(S.type==="date"&&!S.autorange&&(Q[0]=M.cleanDate(Q[0],g,S.calendar),Q[1]=M.cleanDate(Q[1],g,S.calendar)),W=0;W<2;W++)if(S.type==="date"){if(!M.isDateTime(Q[W],S.calendar)){S[U]=X;break}if(S.r2l(Q[0])===S.r2l(Q[1])){var ee=M.constrain(S.r2l(Q[0]),M.MIN_MS+1e3,M.MAX_MS-1e3);Q[0]=S.l2r(ee-1e3),Q[1]=S.l2r(ee+1e3);break}}else{if(!e(Q[W]))if(e(Q[1-W]))Q[W]=Q[1-W]*(W?10:.1);else{S[U]=X;break}if(Q[W]<-i?Q[W]=-i:Q[W]>i&&(Q[W]=i),Q[0]===Q[1]){var te=Math.max(1,Math.abs(Q[0]*1e-6));Q[0]-=te,Q[1]+=te}}},S.setScale=function(U){var q=k._size;if(S.overlaying){var Q=s.getFromId({_fullLayout:k},S.overlaying);S.domain=Q.domain}var W=U&&S._r?"_r":"range",X=S.calendar;S.cleanRange(W);var ee=S.r2l(S[W][0],X),te=S.r2l(S[W][1],X),ie=z==="y";if(ie?(S._offset=q.t+(1-S.domain[1])*q.h,S._length=q.h*(S.domain[1]-S.domain[0]),S._m=S._length/(ee-te),S._b=-S._m*te):(S._offset=q.l+S.domain[0]*q.w,S._length=q.w*(S.domain[1]-S.domain[0]),S._m=S._length/(te-ee),S._b=-S._m*ee),S._rangebreaks=[],S._lBreaks=0,S._m2=0,S._B=[],S.rangebreaks){var le,ge;if(S._rangebreaks=S.locateBreaks(Math.min(ee,te),Math.max(ee,te)),S._rangebreaks.length){for(le=0;le<S._rangebreaks.length;le++)ge=S._rangebreaks[le],S._lBreaks+=Math.abs(ge.max-ge.min);var fe=ie;ee>te&&(fe=!fe),fe&&S._rangebreaks.reverse();var pe=fe?-1:1;for(S._m2=pe*S._length/(Math.abs(te-ee)-S._lBreaks),S._B.push(-S._m2*(ie?te:ee)),le=0;le<S._rangebreaks.length;le++)ge=S._rangebreaks[le],S._B.push(S._B[S._B.length-1]-pe*S._m2*(ge.max-ge.min));for(le=0;le<S._rangebreaks.length;le++)ge=S._rangebreaks[le],ge.pmin=re(ge.min),ge.pmax=re(ge.max)}}if(!isFinite(S._m)||!isFinite(S._b)||S._length<0)throw k._replotting=!1,new Error("Something went wrong with axis scaling")},S.maskBreaks=function(U){var q=S.rangebreaks||[],Q,W,X,ee,te;q._cachedPatterns||(q._cachedPatterns=q.map(function(Be){return Be.enabled&&Be.bounds?M.simpleMap(Be.bounds,Be.pattern?a:S.d2c):null})),q._cachedValues||(q._cachedValues=q.map(function(Be){return Be.enabled&&Be.values?M.simpleMap(Be.values,S.d2c).sort(M.sorterAsc):null}));for(var ie=0;ie<q.length;ie++){var le=q[ie];if(le.enabled){if(le.bounds){var ge=le.pattern;switch(Q=q._cachedPatterns[ie],W=Q[0],X=Q[1],ge){case h:te=new Date(U),ee=te.getUTCDay(),W>X&&(X+=7,ee<W&&(ee+=7));break;case m:te=new Date(U);var fe=te.getUTCHours(),pe=te.getUTCMinutes(),ye=te.getUTCSeconds(),Te=te.getUTCMilliseconds();ee=fe+(pe/60+ye/3600+Te/36e5),W>X&&(X+=24,ee<W&&(ee+=24));break;case"":ee=U;break}if(ee>=W&&ee<X)return g}else for(var _e=q._cachedValues[ie],De=0;De<_e.length;De++)if(W=_e[De],X=W+le.dvalue,U>=W&&U<X)return g}}return U},S.locateBreaks=function(U,q){var Q,W,X,ee,te=[];if(!S.rangebreaks)return te;var ie=S.rangebreaks.slice().sort(function(xe,Pe){return xe.pattern===h&&Pe.pattern===m?-1:Pe.pattern===h&&xe.pattern===m?1:0}),le=function(xe,Pe){if(xe=M.constrain(xe,U,q),Pe=M.constrain(Pe,U,q),xe!==Pe){for(var Ve=!0,Qe=0;Qe<te.length;Qe++){var Fe=te[Qe];xe<Fe.max&&Pe>=Fe.min&&(xe<Fe.min&&(Fe.min=xe),Pe>Fe.max&&(Fe.max=Pe),Ve=!1)}Ve&&te.push({min:xe,max:Pe})}};for(Q=0;Q<ie.length;Q++){var ge=ie[Q];if(ge.enabled)if(ge.bounds){var fe=U,pe=q;ge.pattern&&(fe=Math.floor(fe)),W=M.simpleMap(ge.bounds,ge.pattern?a:S.r2l),X=W[0],ee=W[1];var ye=new Date(fe),Te,_e;switch(ge.pattern){case h:_e=y,Te=((ee<X?7:0)+(ee-X))*c,fe+=X*c-(ye.getUTCDay()*c+ye.getUTCHours()*b+ye.getUTCMinutes()*l+ye.getUTCSeconds()*_+ye.getUTCMilliseconds());break;case m:_e=c,Te=((ee<X?24:0)+(ee-X))*b,fe+=X*b-(ye.getUTCHours()*b+ye.getUTCMinutes()*l+ye.getUTCSeconds()*_+ye.getUTCMilliseconds());break;default:fe=Math.min(W[0],W[1]),pe=Math.max(W[0],W[1]),_e=pe-fe,Te=_e}for(var De=fe;De<pe;De+=_e)le(De,De+Te)}else for(var Be=M.simpleMap(ge.values,S.d2c),Ue=0;Ue<Be.length;Ue++)X=Be[Ue],ee=X+ge.dvalue,le(X,ee)}return te.sort(function(xe,Pe){return xe.min-Pe.min}),te},S.makeCalcdata=function(U,q,Q){var W,X,ee,te,ie=S.type,le=ie==="date"&&U[q+"calendar"];if(q in U){if(W=U[q],te=U._length||M.minRowLength(W),M.isTypedArray(W)&&(ie==="linear"||ie==="log")){if(te===W.length)return W;if(W.subarray)return W.subarray(0,te)}if(ie==="multicategory")return V(W,te);for(X=new Array(te),ee=0;ee<te;ee++)X[ee]=S.d2c(W[ee],0,le,Q)}else{var ge=q+"0"in U?S.d2c(U[q+"0"],0,le):0,fe=U["d"+q]?Number(U["d"+q]):1;for(W=U[{x:"y",y:"x"}[q]],te=U._length||W.length,X=new Array(te),ee=0;ee<te;ee++)X[ee]=ge+ee*fe}if(S.rangebreaks)for(ee=0;ee<te;ee++)X[ee]=S.maskBreaks(X[ee]);return X},S.isValidRange=function(U){return Array.isArray(U)&&U.length===2&&e(S.r2l(U[0]))&&e(S.r2l(U[1]))},S.isPtWithinRange=function(U,q){var Q=S.c2l(U[z],null,q),W=S.r2l(S.range[0]),X=S.r2l(S.range[1]);return W<X?W<=Q&&Q<=X:X<=Q&&Q<=W},S._emptyCategories=function(){S._categories=[],S._categoriesMap={}},S.clearCalc=function(){var U=S._matchGroup;if(U){var q=null,Q=null;for(var W in U){var X=k[s.id2name(W)];if(X._categories){q=X._categories,Q=X._categoriesMap;break}}q&&Q?(S._categories=q,S._categoriesMap=Q):S._emptyCategories()}else S._emptyCategories();if(S._initialCategories)for(var ee=0;ee<S._initialCategories.length;ee++)F(S._initialCategories[ee])},S.sortByInitialCategories=function(){var U=[];if(S._emptyCategories(),S._initialCategories)for(var q=0;q<S._initialCategories.length;q++)F(S._initialCategories[q]);U=U.concat(S._traceIndices);var Q=S._matchGroup;for(var W in Q)if(P!==W){var X=k[s.id2name(W)];X._categories=S._categories,X._categoriesMap=S._categoriesMap,U=U.concat(X._traceIndices)}return U};var N=k._d3locale;S.type==="date"&&(S._dateFormat=N?N.timeFormat:v,S._extraFormat=k._extraFormat),S._separators=k.separators,S._numFormat=N?N.numberFormat:T,delete S._minDtick,delete S._forceTick0}},{"../../constants/numerical":479,"../../lib":503,"./axis_ids":558,"./constants":561,"@plotly/d3":58,"d3-time-format":120,"fast-isnumeric":190}],577:[function(d,ne,ae){ne.exports=function(v){var M=["showexponent","showtickprefix","showticksuffix"],T=M.filter(function(a){return v[a]!==void 0}),e=function(a){return v[a]===v[T[0]]};if(T.every(e)||T.length===1)return v[T[0]]}},{}],578:[function(d,ne,ae){var w=d("../../lib"),v=d("../../components/color").contrast,M=d("./layout_attributes"),T=d("./show_dflt"),e=d("../array_container_defaults");ne.exports=function(r,t,f,o,i){i||(i={});var g=T(r),p=f("showticklabels");if(p){var y=i.font||{},c=t.color,b=t.ticklabelposition||"",l=b.indexOf("inside")!==-1?v(i.bgColor):c&&c!==M.color.dflt?c:y.color;if(w.coerceFont(f,"tickfont",{family:y.family,size:y.size,color:l}),!i.noTicklabelstep&&o!=="multicategory"&&o!=="log"&&f("ticklabelstep"),i.noAng||f("tickangle"),o!=="category"){var _=f("tickformat");e(r,t,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:a}),t.tickformatstops.length||delete t.tickformatstops,!i.noExp&&!_&&o!=="date"&&(f("showexponent",g),f("exponentformat"),f("minexponent"),f("separatethousands"))}}};function a(n,r){function t(o,i){return w.coerce(n,r,M.tickformatstops,o,i)}var f=t("enabled");f&&(t("dtickrange"),t("value"))}},{"../../components/color":366,"../../lib":503,"../array_container_defaults":549,"./layout_attributes":569,"./show_dflt":577}],579:[function(d,ne,ae){var w=d("../../lib"),v=d("./layout_attributes");ne.exports=function(T,e,a,n){var r=n.isMinor,t=r?T.minor||{}:T,f=r?e.minor:e,o=r?v.minor:v,i=r?"minor.":"",g=w.coerce2(t,f,o,"ticklen",r?(e.ticklen||5)*.6:void 0),p=w.coerce2(t,f,o,"tickwidth",r?e.tickwidth||1:void 0),y=w.coerce2(t,f,o,"tickcolor",(r?e.tickcolor:void 0)||f.color),c=a(i+"ticks",!r&&n.outerTicks||g||p||y?"outside":"");c||(delete f.ticklen,delete f.tickwidth,delete f.tickcolor)}},{"../../lib":503,"./layout_attributes":569}],580:[function(d,ne,ae){var w=d("./clean_ticks"),v=d("../../lib").isArrayOrTypedArray;ne.exports=function(T,e,a,n,r){r||(r={});var t=r.isMinor,f=t?T.minor||{}:T,o=t?e.minor:e,i=t?"minor.":"";function g(A){var m=f[A];return m!==void 0?m:(o._template||{})[A]}var p=g("tick0"),y=g("dtick"),c=g("tickvals"),b=v(c)?"array":y?"linear":"auto",l=a(i+"tickmode",b);if(l==="auto")a(i+"nticks");else if(l==="linear"){var _=o.dtick=w.dtick(y,n);o.tick0=w.tick0(p,n,e.calendar,_)}else if(n!=="multicategory"){var s=a(i+"tickvals");s===void 0?o.tickmode="auto":t||a("ticktext")}}},{"../../lib":503,"./clean_ticks":560}],581:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../registry"),M=d("../../lib"),T=d("../../components/drawing"),e=d("./axes");ne.exports=function(n,r,t,f){var o=n._fullLayout;if(r.length===0){e.redrawComponents(n);return}function i(m){var h=m.xaxis,x=m.yaxis;o._defs.select("#"+m.clipId+"> rect").call(T.setTranslate,0,0).call(T.setScale,1,1),m.plot.call(T.setTranslate,h._offset,x._offset).call(T.setScale,1,1);var u=m.plot.selectAll(".scatterlayer .trace");u.selectAll(".point").call(T.setPointGroupScale,1,1),u.selectAll(".textpoint").call(T.setTextPointsScale,1,1),u.call(T.hideOutsideRangePoints,m)}function g(m,h){var x=m.plotinfo,u=x.xaxis,L=x.yaxis,S=u._length,k=L._length,P=!!m.xr1,z=!!m.yr1,I=[];if(P){var D=M.simpleMap(m.xr0,u.r2l),R=M.simpleMap(m.xr1,u.r2l),O=D[1]-D[0],F=R[1]-R[0];I[0]=(D[0]*(1-h)+h*R[0]-D[0])/(D[1]-D[0])*S,I[2]=S*(1-h+h*F/O),u.range[0]=u.l2r(D[0]*(1-h)+h*R[0]),u.range[1]=u.l2r(D[1]*(1-h)+h*R[1])}else I[0]=0,I[2]=S;if(z){var V=M.simpleMap(m.yr0,L.r2l),G=M.simpleMap(m.yr1,L.r2l),J=V[1]-V[0],Z=G[1]-G[0];I[1]=(V[1]*(1-h)+h*G[1]-V[1])/(V[0]-V[1])*k,I[3]=k*(1-h+h*Z/J),L.range[0]=u.l2r(V[0]*(1-h)+h*G[0]),L.range[1]=L.l2r(V[1]*(1-h)+h*G[1])}else I[1]=0,I[3]=k;e.drawOne(n,u,{skipTitle:!0}),e.drawOne(n,L,{skipTitle:!0}),e.redrawComponents(n,[u._id,L._id]);var Y=P?S/I[2]:1,j=z?k/I[3]:1,re=P?I[0]:0,se=z?I[1]:0,oe=P?I[0]/I[2]*S:0,N=z?I[1]/I[3]*k:0,U=u._offset-oe,q=L._offset-N;x.clipRect.call(T.setTranslate,re,se).call(T.setScale,1/Y,1/j),x.plot.call(T.setTranslate,U,q).call(T.setScale,Y,j),T.setPointGroupScale(x.zoomScalePts,1/Y,1/j),T.setTextPointsScale(x.zoomScaleTxt,1/Y,1/j)}var p;f&&(p=f());function y(){for(var m={},h=0;h<r.length;h++){var x=r[h],u=x.plotinfo.xaxis,L=x.plotinfo.yaxis;x.xr1&&(m[u._name+".range"]=x.xr1.slice()),x.yr1&&(m[L._name+".range"]=x.yr1.slice())}return p&&p(),v.call("relayout",n,m).then(function(){for(var S=0;S<r.length;S++)i(r[S].plotinfo)})}function c(){for(var m={},h=0;h<r.length;h++){var x=r[h],u=x.plotinfo.xaxis,L=x.plotinfo.yaxis;x.xr0&&(m[u._name+".range"]=x.xr0.slice()),x.yr0&&(m[L._name+".range"]=x.yr0.slice())}return v.call("relayout",n,m).then(function(){for(var S=0;S<r.length;S++)i(r[S].plotinfo)})}var b,l,_,s=w.ease(t.easing);n._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(_),_=null,c()});function A(){l=Date.now();for(var m=Math.min(1,(l-b)/t.duration),h=s(m),x=0;x<r.length;x++)g(r[x],h);l-b>t.duration?(y(),_=window.cancelAnimationFrame(A)):_=window.requestAnimationFrame(A)}return b=Date.now(),_=window.requestAnimationFrame(A),Promise.resolve()}},{"../../components/drawing":388,"../../lib":503,"../../registry":638,"./axes":554,"@plotly/d3":58}],582:[function(d,ne,ae){var w=d("../../registry").traceIs,v=d("./axis_autotype");ne.exports=function(r,t,f,o){f("autotypenumbers",o.autotypenumbersDflt);var i=f("type",(o.splomStash||{}).type);i==="-"&&(M(t,o.data),t.type==="-"?t.type="linear":r.type=t.type)};function M(n,r){if(n.type==="-"){var t=n._id,f=t.charAt(0),o;t.indexOf("scene")!==-1&&(t=f);var i=T(r,t,f);if(!!i){if(i.type==="histogram"&&f==={v:"y",h:"x"}[i.orientation||"v"]){n.type="linear";return}var g=f+"calendar",p=i[g],y={noMultiCategory:!w(i,"cartesian")||w(i,"noMultiCategory")};if(i.type==="box"&&i._hasPreCompStats&&f==={h:"x",v:"y"}[i.orientation||"v"]&&(y.noMultiCategory=!0),y.autotypenumbers=n.autotypenumbers,a(i,f)){var c=e(i),b=[];for(o=0;o<r.length;o++){var l=r[o];!w(l,"box-violin")||(l[f+"axis"]||f)!==t||(l[c]!==void 0?b.push(l[c][0]):l.name!==void 0?b.push(l.name):b.push("text"),l[g]!==p&&(p=void 0))}n.type=v(b,p,y)}else if(i.type==="splom"){var _=i.dimensions,s=_[i._axesDim[t]];s.visible&&(n.type=v(s.values,p,y))}else n.type=v(i[f]||[i[f+"0"]],p,y)}}}function T(n,r,t){for(var f=0;f<n.length;f++){var o=n[f];if(o.type==="splom"&&o._length>0&&(o["_"+t+"axes"]||{})[r])return o;if((o[t+"axis"]||t)===r){if(a(o,t))return o;if((o[t]||[]).length||o[t+"0"])return o}}}function e(n){return{v:"x",h:"y"}[n.orientation||"v"]}function a(n,r){var t=e(n),f=w(n,"box-violin"),o=w(n._fullInput||{},"candlestick");return f&&!o&&r===t&&n[t]===void 0&&n[t+"0"]===void 0}},{"../../registry":638,"./axis_autotype":555}],583:[function(d,ne,ae){var w=d("../registry"),v=d("../lib");ae.manageCommandObserver=function(r,t,f,o){var i={},g=!0;t&&t._commandObserver&&(i=t._commandObserver),i.cache||(i.cache={}),i.lookupTable={};var p=ae.hasSimpleAPICommandBindings(r,f,i.lookupTable);if(t&&t._commandObserver){if(p)return i;if(t._commandObserver.remove)return t._commandObserver.remove(),t._commandObserver=null,i}if(p){M(r,p,i.cache),i.check=function(){if(!!g){var l=M(r,p,i.cache);return l.changed&&o&&i.lookupTable[l.value]!==void 0&&(i.disable(),Promise.resolve(o({value:l.value,type:p.type,prop:p.prop,traces:p.traces,index:i.lookupTable[l.value]})).then(i.enable,i.enable)),l.changed}};for(var y=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],c=0;c<y.length;c++)r._internalOn(y[c],i.check);i.remove=function(){for(var b=0;b<y.length;b++)r._removeInternalListener(y[b],i.check)}}else v.log("Unable to automatically bind plot updates to API command"),i.lookupTable={},i.remove=function(){};return i.disable=function(){g=!1},i.enable=function(){g=!0},t&&(t._commandObserver=i),i},ae.hasSimpleAPICommandBindings=function(r,t,f){var o,i=t.length,g;for(o=0;o<i;o++){var p,y=t[o],c=y.method,b=y.args;if(Array.isArray(b)||(b=[]),!c)return!1;var l=ae.computeAPICommandBindings(r,c,b);if(l.length!==1)return!1;if(!g)g=l[0],Array.isArray(g.traces)&&g.traces.sort();else{if(p=l[0],p.type!==g.type||p.prop!==g.prop)return!1;if(Array.isArray(g.traces))if(Array.isArray(p.traces)){p.traces.sort();for(var _=0;_<g.traces.length;_++)if(g.traces[_]!==p.traces[_])return!1}else return!1;else if(p.prop!==g.prop)return!1}p=l[0];var s=p.value;if(Array.isArray(s))if(s.length===1)s=s[0];else return!1;f&&(f[s]=o)}return g};function M(r,t,f){var o,i,g,p=!1;if(t.type==="data")o=r._fullData[t.traces!==null?t.traces[0]:0];else if(t.type==="layout")o=r._fullLayout;else return!1;return i=v.nestedProperty(o,t.prop).get(),g=f[t.type]=f[t.type]||{},g.hasOwnProperty(t.prop)&&g[t.prop]!==i&&(p=!0),g[t.prop]=i,{changed:p,value:i}}ae.executeAPICommand=function(r,t,f){if(t==="skip")return Promise.resolve();var o=w.apiMethodRegistry[t],i=[r];Array.isArray(f)||(f=[]);for(var g=0;g<f.length;g++)i.push(f[g]);return o.apply(null,i).catch(function(p){return v.warn("API call to Plotly."+t+" rejected.",p),Promise.reject(p)})},ae.computeAPICommandBindings=function(r,t,f){var o;switch(Array.isArray(f)||(f=[]),t){case"restyle":o=a(r,f);break;case"relayout":o=e(r,f);break;case"update":o=a(r,[f[0],f[2]]).concat(e(r,[f[1]]));break;case"animate":o=T(r,f);break;default:o=[]}return o};function T(r,t){return Array.isArray(t[0])&&t[0].length===1&&["string","number"].indexOf(typeof t[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:t[0][0].toString()}]:[]}function e(r,t){var f=[],o=t[0],i={};if(typeof o=="string")i[o]=t[1];else if(v.isPlainObject(o))i=o;else return f;return n(i,function(g,p,y){f.push({type:"layout",prop:g,value:y})},"",0),f}function a(r,t){var f,o,i,g,p=[];if(o=t[0],i=t[1],f=t[2],g={},typeof o=="string")g[o]=i;else if(v.isPlainObject(o))g=o,f===void 0&&(f=i);else return p;return f===void 0&&(f=null),n(g,function(y,c,b){var l,_;if(Array.isArray(b)){_=b.slice();var s=Math.min(_.length,r.data.length);f&&(s=Math.min(s,f.length)),l=[];for(var A=0;A<s;A++)l[A]=f?f[A]:A}else _=b,l=f?f.slice():null;if(l===null)Array.isArray(_)&&(_=_[0]);else if(Array.isArray(l)){if(!Array.isArray(_)){var m=_;_=[];for(var h=0;h<l.length;h++)_[h]=m}_.length=Math.min(l.length,_.length)}p.push({type:"data",prop:y,traces:l,value:_})},"",0),p}function n(r,t,f,o){Object.keys(r).forEach(function(i){var g=r[i];if(i[0]!=="_"){var p=f+(o>0?".":"")+i;v.isPlainObject(g)?n(g,t,p,o+1):t(p,i,g)}})}},{"../lib":503,"../registry":638}],584:[function(d,ne,ae){var w=d("../lib/extend").extendFlat;ae.attributes=function(v,M){v=v||{},M=M||{};var T={valType:"info_array",editType:v.editType,items:[{valType:"number",min:0,max:1,editType:v.editType},{valType:"number",min:0,max:1,editType:v.editType}],dflt:[0,1]};v.name&&v.name+"",v.trace,M.description&&""+M.description;var e={x:w({},T,{}),y:w({},T,{}),editType:v.editType};return v.noGridCell||(e.row={valType:"integer",min:0,dflt:0,editType:v.editType},e.column={valType:"integer",min:0,dflt:0,editType:v.editType}),e},ae.defaults=function(v,M,T,e){var a=e&&e.x||[0,1],n=e&&e.y||[0,1],r=M.grid;if(r){var t=T("domain.column");t!==void 0&&(t<r.columns?a=r._domains.x[t]:delete v.domain.column);var f=T("domain.row");f!==void 0&&(f<r.rows?n=r._domains.y[f]:delete v.domain.row)}var o=T("domain.x",a),i=T("domain.y",n);o[0]<o[1]||(v.domain.x=a.slice()),i[0]<i[1]||(v.domain.y=n.slice())}},{"../lib/extend":493}],585:[function(d,ne,ae){ne.exports=function(w){var v=w.editType,M=w.colorEditType;M===void 0&&(M=v);var T={family:{valType:"string",noBlank:!0,strict:!0,editType:v},size:{valType:"number",min:1,editType:v},color:{valType:"color",editType:M},editType:v};return w.autoSize&&(T.size.dflt="auto"),w.autoColor&&(T.color.dflt="auto"),w.arrayOk&&(T.family.arrayOk=!0,T.size.arrayOk=!0,T.color.arrayOk=!0),T}},{}],586:[function(d,ne,ae){ne.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],587:[function(d,ne,ae){ae.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},ae.axesNames=["lonaxis","lataxis"],ae.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},ae.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},ae.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},ae.clipPad=.001,ae.precision=.1,ae.landColor="#F0DC82",ae.waterColor="#3399FF",ae.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},ae.sphereSVG={type:"Sphere"},ae.fillLayers={ocean:1,land:1,lakes:1},ae.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},ae.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],ae.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],ae.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],588:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("d3-geo"),M=v.geoPath,T=v.geoDistance,e=d("d3-geo-projection"),a=d("../../registry"),n=d("../../lib"),r=n.strTranslate,t=d("../../components/color"),f=d("../../components/drawing"),o=d("../../components/fx"),i=d("../plots"),g=d("../cartesian/axes"),p=d("../cartesian/autorange").getAutoRange,y=d("../../components/dragelement"),c=d("../cartesian/select").prepSelect,b=d("../cartesian/select").clearSelect,l=d("../cartesian/select").selectOnClick,_=d("./zoom"),s=d("./constants"),A=d("../../lib/geo_location_utils"),m=d("../../lib/topojson_utils"),h=d("topojson-client").feature;function x(P){this.id=P.id,this.graphDiv=P.graphDiv,this.container=P.container,this.topojsonURL=P.topojsonURL,this.isStatic=P.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var u=x.prototype;ne.exports=function(z){return new x(z)},u.plot=function(P,z,I){var D=this,R=z[this.id],O=[],F=!1;for(var V in s.layerNameToAdjective)if(V!=="frame"&&R["show"+V]){F=!0;break}for(var G=0;G<P.length;G++)if(P[0][0].trace.locationmode){F=!0;break}if(F){var J=m.getTopojsonName(R);(D.topojson===null||J!==D.topojsonName)&&(D.topojsonName=J,PlotlyGeoAssets.topojson[D.topojsonName]===void 0&&O.push(D.fetchTopojson()))}O=O.concat(A.fetchTraceGeoData(P)),I.push(new Promise(function(Z,Y){Promise.all(O).then(function(){D.topojson=PlotlyGeoAssets.topojson[D.topojsonName],D.update(P,z),Z()}).catch(Y)}))},u.fetchTopojson=function(){var P=this,z=m.getTopojsonPath(P.topojsonURL,P.topojsonName);return new Promise(function(I,D){w.json(z,function(R,O){if(R)return R.status===404?D(new Error(["plotly.js could not find topojson file at",z+".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):D(new Error(["unexpected error while fetching topojson file at",z].join(" ")));PlotlyGeoAssets.topojson[P.topojsonName]=O,I()})})},u.update=function(P,z){var I=z[this.id];this.hasChoropleth=!1;for(var D=0;D<P.length;D++){var R=P[D],O=R[0].trace;O.type==="choropleth"&&(this.hasChoropleth=!0),O.visible===!0&&O._length>0&&O._module.calcGeoJSON(R,z)}var F=this.updateProjection(P,z);if(!F){(!this.viewInitial||this.scope!==I.scope)&&this.saveViewInitial(I),this.scope=I.scope,this.updateBaseLayers(z,I),this.updateDims(z,I),this.updateFx(z,I),i.generalUpdatePerTraceModule(this.graphDiv,this,P,I);var V=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=V.selectAll(".point"),this.dataPoints.text=V.selectAll("text"),this.dataPaths.line=V.selectAll(".js-line");var G=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=G.selectAll("path"),this.render()}},u.updateProjection=function(P,z){var I=this.graphDiv,D=z[this.id],R=z._size,O=D.domain,F=D.projection,V=D.lonaxis,G=D.lataxis,J=V._ax,Z=G._ax,Y=this.projection=L(D),j=[[R.l+R.w*O.x[0],R.t+R.h*(1-O.y[1])],[R.l+R.w*O.x[1],R.t+R.h*(1-O.y[0])]],re=D.center||{},se=F.rotation||{},oe=V.range||[],N=G.range||[];if(D.fitbounds){J._length=j[1][0]-j[0][0],Z._length=j[1][1]-j[0][1],J.range=p(I,J),Z.range=p(I,Z);var U=(J.range[0]+J.range[1])/2,q=(Z.range[0]+Z.range[1])/2;if(D._isScoped)re={lon:U,lat:q};else if(D._isClipped){re={lon:U,lat:q},se={lon:U,lat:q,roll:se.roll};var Q=F.type,W=s.lonaxisSpan[Q]/2||180,X=s.lataxisSpan[Q]/2||90;oe=[U-W,U+W],N=[q-X,q+X]}else re={lon:U,lat:q},se={lon:U,lat:se.lat,roll:se.roll}}Y.center([re.lon-se.lon,re.lat-se.lat]).rotate([-se.lon,-se.lat,se.roll]).parallels(F.parallels);var ee=k(oe,N);Y.fitExtent(j,ee);var te=this.bounds=Y.getBounds(ee),ie=this.fitScale=Y.scale(),le=Y.translate();if(D.fitbounds){var ge=Y.getBounds(k(J.range,Z.range)),fe=Math.min((te[1][0]-te[0][0])/(ge[1][0]-ge[0][0]),(te[1][1]-te[0][1])/(ge[1][1]-ge[0][1]));isFinite(fe)?Y.scale(fe*ie):n.warn("Something went wrong during"+this.id+"fitbounds computations.")}else Y.scale(F.scale*ie);var pe=this.midPt=[(te[0][0]+te[1][0])/2,(te[0][1]+te[1][1])/2];if(Y.translate([le[0]+(pe[0]-le[0]),le[1]+(pe[1]-le[1])]).clipExtent(te),D._isAlbersUsa){var ye=Y([re.lon,re.lat]),Te=Y.translate();Y.translate([Te[0]-(ye[0]-Te[0]),Te[1]-(ye[1]-Te[1])])}},u.updateBaseLayers=function(P,z){var I=this,D=I.topojson,R=I.layers,O=I.basePaths;function F(j){return j==="lonaxis"||j==="lataxis"}function V(j){return Boolean(s.lineLayers[j])}function G(j){return Boolean(s.fillLayers[j])}var J=this.hasChoropleth?s.layersForChoropleth:s.layers,Z=J.filter(function(j){return V(j)||G(j)?z["show"+j]:F(j)?z[j].showgrid:!0}),Y=I.framework.selectAll(".layer").data(Z,String);Y.exit().each(function(j){delete R[j],delete O[j],w.select(this).remove()}),Y.enter().append("g").attr("class",function(j){return"layer "+j}).each(function(j){var re=R[j]=w.select(this);j==="bg"?I.bgRect=re.append("rect").style("pointer-events","all"):F(j)?O[j]=re.append("path").style("fill","none"):j==="backplot"?re.append("g").classed("choroplethlayer",!0):j==="frontplot"?re.append("g").classed("scatterlayer",!0):V(j)?O[j]=re.append("path").style("fill","none").style("stroke-miterlimit",2):G(j)&&(O[j]=re.append("path").style("stroke","none"))}),Y.order(),Y.each(function(j){var re=O[j],se=s.layerNameToAdjective[j];j==="frame"?re.datum(s.sphereSVG):V(j)||G(j)?re.datum(h(D,D.objects[j])):F(j)&&re.datum(S(j,z,P)).call(t.stroke,z[j].gridcolor).call(f.dashLine,z[j].griddash,z[j].gridwidth),V(j)?re.call(t.stroke,z[se+"color"]).call(f.dashLine,"",z[se+"width"]):G(j)&&re.call(t.fill,z[se+"color"])})},u.updateDims=function(P,z){var I=this.bounds,D=(z.framewidth||0)/2,R=I[0][0]-D,O=I[0][1]-D,F=I[1][0]-R+D,V=I[1][1]-O+D;f.setRect(this.clipRect,R,O,F,V),this.bgRect.call(f.setRect,R,O,F,V).call(t.fill,z.bgcolor),this.xaxis._offset=R,this.xaxis._length=F,this.yaxis._offset=O,this.yaxis._length=V},u.updateFx=function(P,z){var I=this,D=I.graphDiv,R=I.bgRect,O=P.dragmode,F=P.clickmode;if(I.isStatic)return;function V(){var Y=I.viewInitial,j={};for(var re in Y)j[I.id+"."+re]=Y[re];a.call("_guiRelayout",D,j),D.emit("plotly_doubleclick",null)}function G(Y){return I.projection.invert([Y[0]+I.xaxis._offset,Y[1]+I.yaxis._offset])}var J;O==="select"?J=function(Y,j){var re=Y.range={};re[I.id]=[G([j.xmin,j.ymin]),G([j.xmax,j.ymax])]}:O==="lasso"&&(J=function(Y,j,re){var se=Y.lassoPoints={};se[I.id]=re.filtered.map(G)});var Z={element:I.bgRect.node(),gd:D,plotinfo:{id:I.id,xaxis:I.xaxis,yaxis:I.yaxis,fillRangeItems:J},xaxes:[I.xaxis],yaxes:[I.yaxis],subplot:I.id,clickFn:function(Y){Y===2&&b(D)}};O==="pan"?(R.node().onmousedown=null,R.call(_(I,z)),R.on("dblclick.zoom",V),D._context._scrollZoom.geo||R.on("wheel.zoom",null)):(O==="select"||O==="lasso")&&(R.on(".zoom",null),Z.prepFn=function(Y,j,re){c(Y,j,re,Z,O)},y.init(Z)),R.on("mousemove",function(){var Y=I.projection.invert(n.getPositionFromD3Event());if(!Y)return y.unhover(D,w.event);I.xaxis.p2c=function(){return Y[0]},I.yaxis.p2c=function(){return Y[1]},o.hover(D,w.event,I.id)}),R.on("mouseout",function(){D._dragging||y.unhover(D,w.event)}),R.on("click",function(){O!=="select"&&O!=="lasso"&&(F.indexOf("select")>-1&&l(w.event,D,[I.xaxis],[I.yaxis],I.id,Z),F.indexOf("event")>-1&&o.click(D,w.event))})},u.makeFramework=function(){var P=this,z=P.graphDiv,I=z._fullLayout,D="clip"+I._uid+P.id;P.clipDef=I._clips.append("clipPath").attr("id",D),P.clipRect=P.clipDef.append("rect"),P.framework=w.select(P.container).append("g").attr("class","geo "+P.id).call(f.setClipUrl,D,z),P.project=function(R){var O=P.projection(R);return O?[O[0]-P.xaxis._offset,O[1]-P.yaxis._offset]:[null,null]},P.xaxis={_id:"x",c2p:function(R){return P.project(R)[0]}},P.yaxis={_id:"y",c2p:function(R){return P.project(R)[1]}},P.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},g.setConvert(P.mockAxis,I)},u.saveViewInitial=function(P){var z=P.center||{},I=P.projection,D=I.rotation||{};this.viewInitial={fitbounds:P.fitbounds,"projection.scale":I.scale};var R;P._isScoped?R={"center.lon":z.lon,"center.lat":z.lat}:P._isClipped?R={"projection.rotation.lon":D.lon,"projection.rotation.lat":D.lat}:R={"center.lon":z.lon,"center.lat":z.lat,"projection.rotation.lon":D.lon},n.extendFlat(this.viewInitial,R)},u.render=function(){var P=this.projection,z=P.getPath(),I;function D(O){var F=P(O.lonlat);return F?r(F[0],F[1]):null}function R(O){return P.isLonLatOverEdges(O.lonlat)?"none":null}for(I in this.basePaths)this.basePaths[I].attr("d",z);for(I in this.dataPaths)this.dataPaths[I].attr("d",function(O){return z(O.geojson)});for(I in this.dataPoints)this.dataPoints[I].attr("display",R).attr("transform",D)};function L(P){var z=P.projection,I=z.type,D=s.projNames[I];D="geo"+n.titleCase(D);for(var R=v[D]||e[D],O=R(),F=P._isSatellite?Math.acos(1/z.distance)*180/Math.PI:P._isClipped?s.lonaxisSpan[I]/2:null,V=["center","rotate","parallels","clipExtent"],G=function(Y){return Y?O:[]},J=0;J<V.length;J++){var Z=V[J];typeof O[Z]!="function"&&(O[Z]=G)}return O.isLonLatOverEdges=function(Y){if(O(Y)===null)return!0;if(F){var j=O.rotate(),re=T(Y,[-j[0],-j[1]]),se=F*Math.PI/180;return re>se}else return!1},O.getPath=function(){return M().projection(O)},O.getBounds=function(Y){return O.getPath().bounds(Y)},O.precision(s.precision),P._isSatellite&&O.tilt(z.tilt).distance(z.distance),F&&O.clipAngle(F-s.clipPad),O}function S(P,z,I){var D=1e-6,R=2.5,O=z[P],F=s.scopeDefaults[z.scope],V,G,J;P==="lonaxis"?(V=F.lonaxisRange,G=F.lataxisRange,J=function(q,Q){return[q,Q]}):P==="lataxis"&&(V=F.lataxisRange,G=F.lonaxisRange,J=function(q,Q){return[Q,q]});var Z={type:"linear",range:[V[0],V[1]-D],tick0:O.tick0,dtick:O.dtick};g.setConvert(Z,I);var Y=g.calcTicks(Z);!z.isScoped&&P==="lonaxis"&&Y.pop();for(var j=Y.length,re=new Array(j),se=0;se<j;se++)for(var oe=Y[se].x,N=re[se]=[],U=G[0];U<G[1]+R;U+=R)N.push(J(oe,U));return{type:"MultiLineString",coordinates:re}}function k(P,z){var I=s.clipPad,D=P[0]+I,R=P[1]-I,O=z[0]+I,F=z[1]-I;D>0&&R<0&&(R+=360);var V=(R-D)/4;return{type:"Polygon",coordinates:[[[D,O],[D,F],[D+V,F],[D+2*V,F],[D+3*V,F],[R,F],[R,O],[R-V,O],[R-2*V,O],[R-3*V,O],[D,O]]]}}},{"../../components/color":366,"../../components/dragelement":385,"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/topojson_utils":532,"../../registry":638,"../cartesian/autorange":553,"../cartesian/axes":554,"../cartesian/select":575,"../plots":619,"./constants":587,"./zoom":592,"@plotly/d3":58,"d3-geo":114,"d3-geo-projection":113,"topojson-client":315}],589:[function(d,ne,ae){var w=d("../../plots/get_data").getSubplotCalcData,v=d("../../lib").counterRegex,M=d("./geo"),T="geo",e=v(T),a={};a[T]={valType:"subplotid",dflt:T,editType:"calc"};function n(f){for(var o=f._fullLayout,i=f.calcdata,g=o._subplots[T],p=0;p<g.length;p++){var y=g[p],c=w(i,T,y),b=o[y],l=b._subplot;l||(l=M({id:y,graphDiv:f,container:o._geolayer.node(),topojsonURL:f._context.topojsonURL,staticPlot:f._context.staticPlot}),o[y]._subplot=l),l.plot(c,o,f._promises)}}function r(f,o,i,g){for(var p=g._subplots[T]||[],y=0;y<p.length;y++){var c=p[y],b=g[c]._subplot;!o[c]&&!!b&&(b.framework.remove(),b.clipDef.remove())}}function t(f){for(var o=f._fullLayout,i=o._subplots[T],g=0;g<i.length;g++){var p=o[i[g]],y=p._subplot;y.updateFx(o,p)}}ne.exports={attr:T,name:T,idRoot:T,idRegex:e,attrRegex:e,attributes:a,layoutAttributes:d("./layout_attributes"),supplyLayoutDefaults:d("./layout_defaults"),plot:n,updateFx:t,clean:r}},{"../../lib":503,"../../plots/get_data":593,"./geo":588,"./layout_attributes":590,"./layout_defaults":591}],590:[function(d,ne,ae){var w=d("../../components/color/attributes"),v=d("../domain").attributes,M=d("../../components/drawing/attributes").dash,T=d("./constants"),e=d("../../plot_api/edit_types").overrideAll,a=d("../../lib/sort_object_keys"),n={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:w.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:M},r=ne.exports=e({domain:v({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:a(T.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:a(T.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:w.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:T.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:T.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:T.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:T.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:w.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:w.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:w.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:w.background},lonaxis:n,lataxis:n},"plot","from-root");r.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":365,"../../components/drawing/attributes":387,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../domain":584,"./constants":587}],591:[function(d,ne,ae){var w=d("../../lib"),v=d("../subplot_defaults"),M=d("../get_data").getSubplotData,T=d("./constants"),e=d("./layout_attributes"),a=T.axesNames;ne.exports=function(t,f,o){v(t,f,o,{type:"geo",attributes:e,handleDefaults:n,fullData:o,partition:"y"})};function n(r,t,f,o){var i=M(o.fullData,"geo",o.id),g=i.map(function(N){return N._expandedIndex}),p=f("resolution"),y=f("scope"),c=T.scopeDefaults[y],b=f("projection.type",c.projType),l=t._isAlbersUsa=b==="albers usa";l&&(y=t.scope="usa");var _=t._isScoped=y!=="world",s=t._isSatellite=b==="satellite",A=t._isConic=b.indexOf("conic")!==-1||b==="albers",m=t._isClipped=!!T.lonaxisSpan[b];if(r.visible===!1){var h=w.extendDeep({},t._template);h.showcoastlines=!1,h.showcountries=!1,h.showframe=!1,h.showlakes=!1,h.showland=!1,h.showocean=!1,h.showrivers=!1,h.showsubunits=!1,h.lonaxis&&(h.lonaxis.showgrid=!1),h.lataxis&&(h.lataxis.showgrid=!1),t._template=h}for(var x=f("visible"),u,L=0;L<a.length;L++){var S=a[L],k=[30,10][L],P;if(_)P=c[S+"Range"];else{var z=T[S+"Span"],I=(z[b]||z["*"])/2,D=f("projection.rotation."+S.substr(0,3),c.projRotate[L]);P=[D-I,D+I]}var R=f(S+".range",P);f(S+".tick0"),f(S+".dtick",k),u=f(S+".showgrid",x?void 0:!1),u&&(f(S+".gridcolor"),f(S+".gridwidth"),f(S+".griddash")),t[S]._ax={type:"linear",_id:S.slice(0,3),_traceIndices:g,setScale:w.identity,c2l:w.identity,r2l:w.identity,autorange:!0,range:R.slice(),_m:1,_input:{}}}var O=t.lonaxis.range,F=t.lataxis.range,V=O[0],G=O[1];V>0&&G<0&&(G+=360);var J=(V+G)/2,Z;if(!l){var Y=_?c.projRotate:[J,0,0];Z=f("projection.rotation.lon",Y[0]),f("projection.rotation.lat",Y[1]),f("projection.rotation.roll",Y[2]),u=f("showcoastlines",!_&&x),u&&(f("coastlinecolor"),f("coastlinewidth")),u=f("showocean",x?void 0:!1),u&&f("oceancolor")}var j,re;if(l?(j=-96.6,re=38.7):(j=_?J:Z,re=(F[0]+F[1])/2),f("center.lon",j),f("center.lat",re),s&&(f("projection.tilt"),f("projection.distance")),A){var se=c.projParallels||[0,60];f("projection.parallels",se)}f("projection.scale"),u=f("showland",x?void 0:!1),u&&f("landcolor"),u=f("showlakes",x?void 0:!1),u&&f("lakecolor"),u=f("showrivers",x?void 0:!1),u&&(f("rivercolor"),f("riverwidth")),u=f("showcountries",_&&y!=="usa"&&x),u&&(f("countrycolor"),f("countrywidth")),(y==="usa"||y==="north america"&&p===50)&&(f("showsubunits",x),f("subunitcolor"),f("subunitwidth")),_||(u=f("showframe",x),u&&(f("framecolor"),f("framewidth"))),f("bgcolor");var oe=f("fitbounds");oe&&(delete t.projection.scale,_?(delete t.center.lon,delete t.center.lat):m?(delete t.center.lon,delete t.center.lat,delete t.projection.rotation.lon,delete t.projection.rotation.lat,delete t.lonaxis.range,delete t.lataxis.range):(delete t.center.lon,delete t.center.lat,delete t.projection.rotation.lon))}},{"../../lib":503,"../get_data":593,"../subplot_defaults":632,"./constants":587,"./layout_attributes":590}],592:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../lib"),M=d("../../registry"),T=Math.PI/180,e=180/Math.PI,a={cursor:"pointer"},n={cursor:"auto"};function r(S,k){var P=S.projection,z;return k._isScoped?z=o:k._isClipped?z=g:z=i,z(S,P)}ne.exports=r;function t(S,k){return w.behavior.zoom().translate(k.translate()).scale(k.scale())}function f(S,k,P){var z=S.id,I=S.graphDiv,D=I.layout,R=D[z],O=I._fullLayout,F=O[z],V={},G={};function J(Z,Y){V[z+"."+Z]=v.nestedProperty(R,Z).get(),M.call("_storeDirectGUIEdit",D,O._preGUI,V);var j=v.nestedProperty(F,Z);j.get()!==Y&&(j.set(Y),v.nestedProperty(R,Z).set(Y),G[z+"."+Z]=Y)}P(J),J("projection.scale",k.scale()/S.fitScale),J("fitbounds",!1),I.emit("plotly_relayout",G)}function o(S,k){var P=t(S,k);function z(){w.select(this).style(a)}function I(){k.scale(w.event.scale).translate(w.event.translate),S.render();var O=k.invert(S.midPt);S.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":k.scale()/S.fitScale,"geo.center.lon":O[0],"geo.center.lat":O[1]})}function D(O){var F=k.invert(S.midPt);O("center.lon",F[0]),O("center.lat",F[1])}function R(){w.select(this).style(n),f(S,k,D)}return P.on("zoomstart",z).on("zoom",I).on("zoomend",R),P}function i(S,k){var P=t(S,k),z=2,I,D,R,O,F,V,G,J,Z;function Y(U){return k.invert(U)}function j(U){var q=Y(U);if(!q)return!0;var Q=k(q);return Math.abs(Q[0]-U[0])>z||Math.abs(Q[1]-U[1])>z}function re(){w.select(this).style(a),I=w.mouse(this),D=k.rotate(),R=k.translate(),O=D,F=Y(I)}function se(){if(V=w.mouse(this),j(I)){P.scale(k.scale()),P.translate(k.translate());return}k.scale(w.event.scale),k.translate([R[0],w.event.translate[1]]),F?Y(V)&&(J=Y(V),G=[O[0]+(J[0]-F[0]),D[1],D[2]],k.rotate(G),O=G):(I=V,F=Y(I)),Z=!0,S.render();var U=k.rotate(),q=k.invert(S.midPt);S.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":k.scale()/S.fitScale,"geo.center.lon":q[0],"geo.center.lat":q[1],"geo.projection.rotation.lon":-U[0]})}function oe(){w.select(this).style(n),Z&&f(S,k,N)}function N(U){var q=k.rotate(),Q=k.invert(S.midPt);U("projection.rotation.lon",-q[0]),U("center.lon",Q[0]),U("center.lat",Q[1])}return P.on("zoomstart",re).on("zoom",se).on("zoomend",oe),P}function g(S,k){k.rotate(),k.scale();var P=t(S,k),z=L(P,"zoomstart","zoom","zoomend"),I=0,D=P.on,R;P.on("zoomstart",function(){w.select(this).style(a);var J=w.mouse(this),Z=k.rotate(),Y=Z,j=k.translate(),re=y(Z);R=p(k,J),D.call(P,"zoom",function(){var se=w.mouse(this);if(k.scale(w.event.scale),!R)J=se,R=p(k,J);else if(p(k,se)){k.rotate(Z).translate(j);var oe=p(k,se),N=b(R,oe),U=m(c(re,N)),q=l(U,R,Y);(!isFinite(q[0])||!isFinite(q[1])||!isFinite(q[2]))&&(q=Y),k.rotate(q),Y=q}F(z.of(this,arguments))}),O(z.of(this,arguments))}).on("zoomend",function(){w.select(this).style(n),D.call(P,"zoom",null),V(z.of(this,arguments)),f(S,k,G)}).on("zoom.redraw",function(){S.render();var J=k.rotate();S.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":k.scale()/S.fitScale,"geo.projection.rotation.lon":-J[0],"geo.projection.rotation.lat":-J[1]})});function O(J){I++||J({type:"zoomstart"})}function F(J){J({type:"zoom"})}function V(J){--I||J({type:"zoomend"})}function G(J){var Z=k.rotate();J("projection.rotation.lon",-Z[0]),J("projection.rotation.lat",-Z[1])}return w.rebind(P,z,"on")}function p(S,k){var P=S.invert(k);return P&&isFinite(P[0])&&isFinite(P[1])&&h(P)}function y(S){var k=.5*S[0]*T,P=.5*S[1]*T,z=.5*S[2]*T,I=Math.sin(k),D=Math.cos(k),R=Math.sin(P),O=Math.cos(P),F=Math.sin(z),V=Math.cos(z);return[D*O*V+I*R*F,I*O*V-D*R*F,D*R*V+I*O*F,D*O*F-I*R*V]}function c(S,k){var P=S[0],z=S[1],I=S[2],D=S[3],R=k[0],O=k[1],F=k[2],V=k[3];return[P*R-z*O-I*F-D*V,P*O+z*R+I*V-D*F,P*F-z*V+I*R+D*O,P*V+z*F-I*O+D*R]}function b(S,k){if(!(!S||!k)){var P=u(S,k),z=Math.sqrt(x(P,P)),I=.5*Math.acos(Math.max(-1,Math.min(1,x(S,k)))),D=Math.sin(I)/z;return z&&[Math.cos(I),P[2]*D,-P[1]*D,P[0]*D]}}function l(S,k,P){var z=A(k,2,S[0]);z=A(z,1,S[1]),z=A(z,0,S[2]-P[2]);var I=k[0],D=k[1],R=k[2],O=z[0],F=z[1],V=z[2],G=Math.atan2(D,I)*e,J=Math.sqrt(I*I+D*D),Z,Y;Math.abs(F)>J?(Y=(F>0?90:-90)-G,Z=0):(Y=Math.asin(F/J)*e-G,Z=Math.sqrt(J*J-F*F));var j=180-Y-2*G,re=(Math.atan2(V,O)-Math.atan2(R,Z))*e,se=(Math.atan2(V,O)-Math.atan2(R,-Z))*e,oe=_(P[0],P[1],Y,re),N=_(P[0],P[1],j,se);return oe<=N?[Y,re,P[2]]:[j,se,P[2]]}function _(S,k,P,z){var I=s(P-S),D=s(z-k);return Math.sqrt(I*I+D*D)}function s(S){return(S%360+540)%360-180}function A(S,k,P){var z=P*T,I=S.slice(),D=k===0?1:0,R=k===2?1:2,O=Math.cos(z),F=Math.sin(z);return I[D]=S[D]*O-S[R]*F,I[R]=S[R]*O+S[D]*F,I}function m(S){return[Math.atan2(2*(S[0]*S[1]+S[2]*S[3]),1-2*(S[1]*S[1]+S[2]*S[2]))*e,Math.asin(Math.max(-1,Math.min(1,2*(S[0]*S[2]-S[3]*S[1]))))*e,Math.atan2(2*(S[0]*S[3]+S[1]*S[2]),1-2*(S[2]*S[2]+S[3]*S[3]))*e]}function h(S){var k=S[0]*T,P=S[1]*T,z=Math.cos(P);return[z*Math.cos(k),z*Math.sin(k),Math.sin(P)]}function x(S,k){for(var P=0,z=0,I=S.length;z<I;++z)P+=S[z]*k[z];return P}function u(S,k){return[S[1]*k[2]-S[2]*k[1],S[2]*k[0]-S[0]*k[2],S[0]*k[1]-S[1]*k[0]]}function L(S){for(var k=0,P=arguments.length,z=[];++k<P;)z.push(arguments[k]);var I=w.dispatch.apply(null,z);return I.of=function(D,R){return function(O){var F;try{F=O.sourceEvent=w.event,O.target=S,w.event=O,I[O.type].apply(D,R)}finally{w.event=F}}},I}},{"../../lib":503,"../../registry":638,"@plotly/d3":58}],593:[function(d,ne,ae){var w=d("../registry"),v=d("./cartesian/constants").SUBPLOT_PATTERN;ae.getSubplotCalcData=function(M,T,e){var a=w.subplotsRegistry[T];if(!a)return[];for(var n=a.attr,r=[],t=0;t<M.length;t++){var f=M[t],o=f[0].trace;o[n]===e&&r.push(f)}return r},ae.getModuleCalcData=function(M,T){var e=[],a=[],n;if(typeof T=="string"?n=w.getModule(T).plot:typeof T=="function"?n=T:n=T.plot,!n)return[e,M];for(var r=0;r<M.length;r++){var t=M[r],f=t[0].trace;f.visible!==!0||f._length===0||(f._module.plot===n?e.push(t):a.push(t))}return[e,a]},ae.getSubplotData=function(T,e,a){if(!w.subplotsRegistry[e])return[];var n=w.subplotsRegistry[e].attr,r=[],t,f,o;if(e==="gl2d"){var i=a.match(v);f="x"+i[1],o="y"+i[2]}for(var g=0;g<T.length;g++)t=T[g],e==="gl2d"&&w.traceIs(t,"gl2d")?t[n[0]]===f&&t[n[1]]===o&&r.push(t):t[n]===a&&r.push(t);return r}},{"../registry":638,"./cartesian/constants":561}],594:[function(d,ne,ae){var w=d("mouse-change"),v=d("mouse-wheel"),M=d("mouse-event-offset"),T=d("../cartesian/constants"),e=d("has-passive-events");ne.exports=n;function a(r,t){this.element=r,this.plot=t,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}function n(r){var t=r.mouseContainer,f=r.glplot,o=new a(t,f);function i(){r.xaxis.autorange=!1,r.yaxis.autorange=!1}function g(){for(var y=r.graphDiv._fullLayout._axisConstraintGroups,c=r.xaxis._id,b=r.yaxis._id,l=0;l<y.length;l++)if(y[l][c]!==-1){if(y[l][b]!==-1)return!0;break}return!1}o.mouseListener=w(t,p),t.addEventListener("touchstart",function(y){var c=M(y.changedTouches[0],t);p(0,c[0],c[1]),p(1,c[0],c[1]),y.preventDefault()},e?{passive:!1}:!1),t.addEventListener("touchmove",function(y){y.preventDefault();var c=M(y.changedTouches[0],t);p(1,c[0],c[1]),y.preventDefault()},e?{passive:!1}:!1),t.addEventListener("touchend",function(y){p(0,o.lastPos[0],o.lastPos[1]),y.preventDefault()},e?{passive:!1}:!1);function p(y,c,b){var l=r.calcDataBox(),_=f.viewBox,s=o.lastPos[0],A=o.lastPos[1],m=T.MINDRAG*f.pixelRatio,h=T.MINZOOM*f.pixelRatio,x,u;c*=f.pixelRatio,b*=f.pixelRatio,b=_[3]-_[1]-b;function L(D,R,O){var F=Math.min(R,O),V=Math.max(R,O);F!==V?(l[D]=F,l[D+2]=V,o.dataBox=l,r.setRanges(l)):(r.selectBox.selectBox=[0,0,1,1],r.glplot.setDirty())}switch(r.fullLayout.dragmode){case"zoom":if(y){var S=c/(_[2]-_[0])*(l[2]-l[0])+l[0],k=b/(_[3]-_[1])*(l[3]-l[1])+l[1];o.boxInited||(o.boxStart[0]=S,o.boxStart[1]=k,o.dragStart[0]=c,o.dragStart[1]=b),o.boxEnd[0]=S,o.boxEnd[1]=k,o.boxInited=!0,!o.boxEnabled&&(o.boxStart[0]!==o.boxEnd[0]||o.boxStart[1]!==o.boxEnd[1])&&(o.boxEnabled=!0);var P=Math.abs(o.dragStart[0]-c)<h,z=Math.abs(o.dragStart[1]-b)<h;if(g()&&!(P&&z)){x=o.boxEnd[0]-o.boxStart[0],u=o.boxEnd[1]-o.boxStart[1];var I=(l[3]-l[1])/(l[2]-l[0]);Math.abs(x*I)>Math.abs(u)?(o.boxEnd[1]=o.boxStart[1]+Math.abs(x)*I*(u>=0?1:-1),o.boxEnd[1]<l[1]?(o.boxEnd[1]=l[1],o.boxEnd[0]=o.boxStart[0]+(l[1]-o.boxStart[1])/Math.abs(I)):o.boxEnd[1]>l[3]&&(o.boxEnd[1]=l[3],o.boxEnd[0]=o.boxStart[0]+(l[3]-o.boxStart[1])/Math.abs(I))):(o.boxEnd[0]=o.boxStart[0]+Math.abs(u)/I*(x>=0?1:-1),o.boxEnd[0]<l[0]?(o.boxEnd[0]=l[0],o.boxEnd[1]=o.boxStart[1]+(l[0]-o.boxStart[0])*Math.abs(I)):o.boxEnd[0]>l[2]&&(o.boxEnd[0]=l[2],o.boxEnd[1]=o.boxStart[1]+(l[2]-o.boxStart[0])*Math.abs(I)))}else P&&(o.boxEnd[0]=o.boxStart[0]),z&&(o.boxEnd[1]=o.boxStart[1])}else o.boxEnabled?(x=o.boxStart[0]!==o.boxEnd[0],u=o.boxStart[1]!==o.boxEnd[1],x||u?(x&&(L(0,o.boxStart[0],o.boxEnd[0]),r.xaxis.autorange=!1),u&&(L(1,o.boxStart[1],o.boxEnd[1]),r.yaxis.autorange=!1),r.relayoutCallback()):r.glplot.setDirty(),o.boxEnabled=!1,o.boxInited=!1):o.boxInited&&(o.boxInited=!1);break;case"pan":o.boxEnabled=!1,o.boxInited=!1,y?(o.panning||(o.dragStart[0]=c,o.dragStart[1]=b),Math.abs(o.dragStart[0]-c)<m&&(c=o.dragStart[0]),Math.abs(o.dragStart[1]-b)<m&&(b=o.dragStart[1]),x=(s-c)*(l[2]-l[0])/(f.viewBox[2]-f.viewBox[0]),u=(A-b)*(l[3]-l[1])/(f.viewBox[3]-f.viewBox[1]),l[0]+=x,l[2]+=x,l[1]+=u,l[3]+=u,r.setRanges(l),o.panning=!0,o.lastInputTime=Date.now(),i(),r.cameraChanged(),r.handleAnnotations()):o.panning&&(o.panning=!1,r.relayoutCallback());break}o.lastPos[0]=c,o.lastPos[1]=b}return o.wheelListener=v(t,function(y,c){if(!r.scrollZoom)return!1;var b=r.calcDataBox(),l=f.viewBox,_=o.lastPos[0],s=o.lastPos[1],A=Math.exp(5*c/(l[3]-l[1])),m=_/(l[2]-l[0])*(b[2]-b[0])+b[0],h=s/(l[3]-l[1])*(b[3]-b[1])+b[1];return b[0]=(b[0]-m)*A+m,b[2]=(b[2]-m)*A+m,b[1]=(b[1]-h)*A+h,b[3]=(b[3]-h)*A+h,r.setRanges(b),o.lastInputTime=Date.now(),i(),r.cameraChanged(),r.handleAnnotations(),r.relayoutCallback(),!0},!0),o}},{"../cartesian/constants":561,"has-passive-events":229,"mouse-change":241,"mouse-event-offset":242,"mouse-wheel":244}],595:[function(d,ne,ae){var w=d("../cartesian/axes"),v=d("../../lib/str2rgbarray");function M(n){this.scene=n,this.gl=n.gl,this.pixelRatio=n.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var T=M.prototype,e=["xaxis","yaxis"];T.merge=function(n){this.titleEnable=!1,this.backgroundColor=v(n.plot_bgcolor);var r,t,f,o,i,g,p,y,c,b,l;for(b=0;b<2;++b){r=e[b];var _=r.charAt(0);for(t=n[this.scene[r]._name],f=t.title.text===this.scene.fullLayout._dfltTitle[_]?"":t.title.text,l=0;l<=2;l+=2)this.labelEnable[b+l]=!1,this.labels[b+l]=f,this.labelColor[b+l]=v(t.title.font.color),this.labelFont[b+l]=t.title.font.family,this.labelSize[b+l]=t.title.font.size,this.labelPad[b+l]=this.getLabelPad(r,t),this.tickEnable[b+l]=!1,this.tickColor[b+l]=v((t.tickfont||{}).color),this.tickAngle[b+l]=t.tickangle==="auto"?0:Math.PI*-t.tickangle/180,this.tickPad[b+l]=this.getTickPad(t),this.tickMarkLength[b+l]=0,this.tickMarkWidth[b+l]=t.tickwidth||0,this.tickMarkColor[b+l]=v(t.tickcolor),this.borderLineEnable[b+l]=!1,this.borderLineColor[b+l]=v(t.linecolor),this.borderLineWidth[b+l]=t.linewidth||0;p=this.hasSharedAxis(t),i=this.hasAxisInDfltPos(r,t)&&!p,g=this.hasAxisInAltrPos(r,t)&&!p,o=t.mirror||!1,y=p?String(o).indexOf("all")!==-1:!!o,c=p?o==="allticks":String(o).indexOf("ticks")!==-1,i?this.labelEnable[b]=!0:g&&(this.labelEnable[b+2]=!0),i?this.tickEnable[b]=t.showticklabels:g&&(this.tickEnable[b+2]=t.showticklabels),(i||y)&&(this.borderLineEnable[b]=t.showline),(g||y)&&(this.borderLineEnable[b+2]=t.showline),(i||c)&&(this.tickMarkLength[b]=this.getTickMarkLength(t)),(g||c)&&(this.tickMarkLength[b+2]=this.getTickMarkLength(t)),this.gridLineEnable[b]=t.showgrid,this.gridLineColor[b]=v(t.gridcolor),this.gridLineWidth[b]=t.gridwidth,this.zeroLineEnable[b]=t.zeroline,this.zeroLineColor[b]=v(t.zerolinecolor),this.zeroLineWidth[b]=t.zerolinewidth}},T.hasSharedAxis=function(n){var r=this.scene,t=r.fullLayout._subplots.gl2d,f=w.findSubplotsWithAxis(t,n);return f.indexOf(r.id)!==0},T.hasAxisInDfltPos=function(n,r){var t=r.side;if(n==="xaxis")return t==="bottom";if(n==="yaxis")return t==="left"},T.hasAxisInAltrPos=function(n,r){var t=r.side;if(n==="xaxis")return t==="top";if(n==="yaxis")return t==="right"},T.getLabelPad=function(n,r){var t=1.5,f=r.title.font.size,o=r.showticklabels;if(n==="xaxis")return r.side==="top"?-10+f*(t+(o?1:0)):-10+f*(t+(o?.5:0));if(n==="yaxis")return r.side==="right"?10+f*(t+(o?1:.5)):10+f*(t+(o?.5:0))},T.getTickPad=function(n){return n.ticks==="outside"?10+n.ticklen:15},T.getTickMarkLength=function(n){if(!n.ticks)return 0;var r=n.ticklen;return n.ticks==="inside"?-r:r};function a(n){return new M(n)}ne.exports=a},{"../../lib/str2rgbarray":528,"../cartesian/axes":554}],596:[function(d,ne,ae){var w=d("../../plot_api/edit_types").overrideAll,v=d("./scene2d"),M=d("../layout_attributes"),T=d("../../constants/xmlns_namespaces"),e=d("../cartesian/constants"),a=d("../cartesian"),n=d("../../components/fx/layout_attributes"),r=d("../get_data").getSubplotData;ae.name="gl2d",ae.attr=["xaxis","yaxis"],ae.idRoot=["x","y"],ae.idRegex=e.idRegex,ae.attrRegex=e.attrRegex,ae.attributes=d("../cartesian/attributes"),ae.supplyLayoutDefaults=function(t,f,o){f._has("cartesian")||a.supplyLayoutDefaults(t,f,o)},ae.layoutAttrOverrides=w(a.layoutAttributes,"plot","from-root"),ae.baseLayoutAttrOverrides=w({plot_bgcolor:M.plot_bgcolor,hoverlabel:n.hoverlabel},"plot","nested"),ae.plot=function(f){for(var o=f._fullLayout,i=f._fullData,g=o._subplots.gl2d,p=0;p<g.length;p++){var y=g[p],c=o._plots[y],b=r(i,"gl2d",y),l=c._scene2d;l===void 0&&(l=new v({id:y,graphDiv:f,container:f.querySelector(".gl-container"),staticPlot:f._context.staticPlot,plotGlPixelRatio:f._context.plotGlPixelRatio},o),c._scene2d=l),l.plot(b,f.calcdata,o,f.layout)}},ae.clean=function(t,f,o,i){for(var g=i._subplots.gl2d||[],p=0;p<g.length;p++){var y=g[p],c=i._plots[y];if(!!c._scene2d){var b=r(t,"gl2d",y);b.length===0&&(c._scene2d.destroy(),delete i._plots[y])}}a.clean.apply(this,arguments)},ae.drawFramework=function(t){t._context.staticPlot||a.drawFramework(t)},ae.toSVG=function(t){for(var f=t._fullLayout,o=f._subplots.gl2d,i=0;i<o.length;i++){var g=f._plots[o[i]],p=g._scene2d,y=p.toImage("png"),c=f._glimages.append("svg:image");c.attr({xmlns:T.svg,"xlink:href":y,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),p.destroy()}},ae.updateFx=function(t){for(var f=t._fullLayout,o=f._subplots.gl2d,i=0;i<o.length;i++){var g=f._plots[o[i]]._scene2d;g.updateFx(f.dragmode)}}},{"../../components/fx/layout_attributes":407,"../../constants/xmlns_namespaces":480,"../../plot_api/edit_types":536,"../cartesian":568,"../cartesian/attributes":552,"../cartesian/constants":561,"../get_data":593,"../layout_attributes":610,"./scene2d":597}],597:[function(d,ne,ae){var w=d("../../registry"),v=d("../../plots/cartesian/axes"),M=d("../../components/fx"),T=d("../../../stackgl_modules").gl_plot2d,e=d("../../../stackgl_modules").gl_spikes2d,a=d("../../../stackgl_modules").gl_select_box,n=d("webgl-context"),r=d("./convert"),t=d("./camera"),f=d("../../lib/show_no_webgl_msg"),o=d("../cartesian/constraints"),i=o.enforce,g=o.clean,p=d("../cartesian/autorange").doAutoRange,y=d("../../components/dragelement/helpers"),c=y.drawMode,b=y.selectMode,l=["xaxis","yaxis"],_,s,A=d("../cartesian/constants").SUBPLOT_PATTERN;function m(u,L){this.container=u.container,this.graphDiv=u.graphDiv,this.pixelRatio=u.plotGlPixelRatio||window.devicePixelRatio,this.id=u.id,this.staticPlot=!!u.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(L),this.makeFramework(),!this.stopped&&(this.glplotOptions=r(this),this.glplotOptions.merge(L),this.glplot=T(this.glplotOptions),this.camera=t(this),this.traces={},this.spikes=e(this.glplot),this.selectBox=a(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}ne.exports=m;var h=m.prototype;h.makeFramework=function(){if(this.staticPlot){if(!s&&(_=document.createElement("canvas"),s=n({canvas:_,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!s))throw new Error("Error creating static canvas/context for image server");this.canvas=_,this.gl=s}else{var u=this.container.querySelector(".gl-canvas-focus"),L=n({canvas:u,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!L){f(this),this.stopped=!0;return}this.canvas=u,this.gl=L}var S=this.canvas;S.style.width="100%",S.style.height="100%",S.style.position="absolute",S.style.top="0px",S.style.left="0px",S.style["pointer-events"]="none",this.updateSize(S);var k=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");k.style.position="absolute",k.style.top=k.style.left="0px",k.style.width=k.style.height="100%",k.style["z-index"]=20,k.style["pointer-events"]="none";var P=this.mouseContainer=document.createElement("div");P.style.position="absolute",P.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var z=this.container;z.appendChild(k),z.appendChild(P);var I=this;P.addEventListener("mouseout",function(){I.isMouseOver=!1,I.unhover()}),P.addEventListener("mouseover",function(){I.isMouseOver=!0})},h.toImage=function(u){u||(u="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(_),this.updateSize(this.canvas);var L=this.glplot.gl,S=L.drawingBufferWidth,k=L.drawingBufferHeight;L.clearColor(1,1,1,0),L.clear(L.COLOR_BUFFER_BIT|L.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),L.bindFramebuffer(L.FRAMEBUFFER,null);var P=new Uint8Array(S*k*4);L.readPixels(0,0,S,k,L.RGBA,L.UNSIGNED_BYTE,P);for(var z=0,I=k-1;z<I;++z,--I)for(var D=0;D<S;++D)for(var R=0;R<4;++R){var O=P[4*(S*z+D)+R];P[4*(S*z+D)+R]=P[4*(S*I+D)+R],P[4*(S*I+D)+R]=O}var F=document.createElement("canvas");F.width=S,F.height=k;var V=F.getContext("2d",{willReadFrequently:!0}),G=V.createImageData(S,k);G.data.set(P),V.putImageData(G,0,0);var J;switch(u){case"jpeg":J=F.toDataURL("image/jpeg");break;case"webp":J=F.toDataURL("image/webp");break;default:J=F.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(_),J},h.updateSize=function(u){u||(u=this.canvas);var L=this.pixelRatio,S=this.fullLayout,k=S.width,P=S.height,z=Math.ceil(L*k)|0,I=Math.ceil(L*P)|0;return(u.width!==z||u.height!==I)&&(u.width=z,u.height=I),u},h.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var u=[v.calcTicks(this.xaxis),v.calcTicks(this.yaxis)],L=0;L<2;++L)for(var S=0;S<u[L].length;++S)u[L][S].text=u[L][S].text+"";return u};function x(u,L){for(var S=0;S<2;++S){var k=u[S],P=L[S];if(k.length!==P.length)return!0;for(var z=0;z<k.length;++z)if(k[z].x!==P[z].x)return!0}return!1}h.updateRefs=function(u){this.fullLayout=u;var L=this.id.match(A),S="xaxis"+L[1],k="yaxis"+L[2];this.xaxis=this.fullLayout[S],this.yaxis=this.fullLayout[k]},h.relayoutCallback=function(){var u=this.graphDiv,L=this.xaxis,S=this.yaxis,k=u.layout,P={},z=P[L._name+".range"]=L.range.slice(),I=P[S._name+".range"]=S.range.slice();P[L._name+".autorange"]=L.autorange,P[S._name+".autorange"]=S.autorange,w.call("_storeDirectGUIEdit",u.layout,u._fullLayout._preGUI,P);var D=k[L._name];D.range=z,D.autorange=L.autorange;var R=k[S._name];R.range=I,R.autorange=S.autorange,P.lastInputTime=this.camera.lastInputTime,u.emit("plotly_relayout",P)},h.cameraChanged=function(){var u=this.camera;this.glplot.setDataBox(this.calcDataBox());var L=this.computeTickMarks(),S=this.glplotOptions.ticks;x(L,S)&&(this.glplotOptions.ticks=L,this.glplotOptions.dataBox=u.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},h.handleAnnotations=function(){for(var u=this.graphDiv,L=this.fullLayout.annotations,S=0;S<L.length;S++){var k=L[S];k.xref===this.xaxis._id&&k.yref===this.yaxis._id&&w.getComponentMethod("annotations","drawOne")(u,S)}},h.destroy=function(){if(!!this.glplot){var u=this.traces;u&&Object.keys(u).map(function(L){u[L].dispose(),delete u[L]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},h.plot=function(u,L,S){var k=this.glplot;this.updateRefs(S),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(u,L),this.updateFx(S.dragmode);var P=S.width,z=S.height;this.updateSize(this.canvas);var I=this.glplotOptions;I.merge(S),I.screenBox=[0,0,P,z];var D={_fullLayout:{_axisConstraintGroups:S._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:S._size}};g(D,this.xaxis),g(D,this.yaxis);var R=S._size,O=this.xaxis.domain,F=this.yaxis.domain;I.viewBox=[R.l+O[0]*R.w,R.b+F[0]*R.h,P-R.r-(1-O[1])*R.w,z-R.t-(1-F[1])*R.h],this.mouseContainer.style.width=R.w*(O[1]-O[0])+"px",this.mouseContainer.style.height=R.h*(F[1]-F[0])+"px",this.mouseContainer.height=R.h*(F[1]-F[0]),this.mouseContainer.style.left=R.l+O[0]*R.w+"px",this.mouseContainer.style.top=R.t+(1-F[1])*R.h+"px";var V,G;for(G=0;G<2;++G)V=this[l[G]],V._length=I.viewBox[G+2]-I.viewBox[G],p(this.graphDiv,V),V.setScale();i(D),I.ticks=this.computeTickMarks(),I.dataBox=this.calcDataBox(),I.merge(S),k.update(I),this.glplot.draw()},h.calcDataBox=function(){var u=this.xaxis,L=this.yaxis,S=u.range,k=L.range,P=u.r2l,z=L.r2l;return[P(S[0]),z(k[0]),P(S[1]),z(k[1])]},h.setRanges=function(u){var L=this.xaxis,S=this.yaxis,k=L.l2r,P=S.l2r;L.range=[k(u[0]),k(u[2])],S.range=[P(u[1]),P(u[3])]},h.updateTraces=function(u,L){var S=Object.keys(this.traces),k,P,z;this.fullData=u;e:for(k=0;k<S.length;k++){var I=S[k],D=this.traces[I];for(P=0;P<u.length;P++)if(z=u[P],z.uid===I&&z.type===D.type)continue e;D.dispose(),delete this.traces[I]}for(k=0;k<u.length;k++){z=u[k];var R=L[k],O=this.traces[z.uid];O?O.update(z,R):(O=z._module.plot(this,z,R),this.traces[z.uid]=O)}this.glplot.objects.sort(function(F,V){return F._trace.index-V._trace.index})},h.updateFx=function(u){b(u)||c(u)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),u==="pan"?this.mouseContainer.style.cursor="move":u==="zoom"?this.mouseContainer.style.cursor="crosshair":this.mouseContainer.style.cursor=null},h.emitPointAction=function(u,L){for(var S=u.trace.uid,k=u.pointIndex,P,z=0;z<this.fullData.length;z++)this.fullData[z].uid===S&&(P=this.fullData[z]);var I={x:u.traceCoord[0],y:u.traceCoord[1],curveNumber:P.index,pointNumber:k,data:P._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};M.appendArrayPointValue(I,P,k),this.graphDiv.emit(L,{points:[I]})},h.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var u=this.glplot,L=this.camera,S=L.mouseListener,k=this.lastButtonState===1&&S.buttons===0,P=this.fullLayout;this.lastButtonState=S.buttons,this.cameraChanged();var z=S.x*u.pixelRatio,I=this.canvas.height-u.pixelRatio*S.y,D;if(L.boxEnabled&&P.dragmode==="zoom"){this.selectBox.enabled=!0;for(var R=this.selectBox.selectBox=[Math.min(L.boxStart[0],L.boxEnd[0]),Math.min(L.boxStart[1],L.boxEnd[1]),Math.max(L.boxStart[0],L.boxEnd[0]),Math.max(L.boxStart[1],L.boxEnd[1])],O=0;O<2;O++)L.boxStart[O]===L.boxEnd[O]&&(R[O]=u.dataBox[O],R[O+2]=u.dataBox[O+2]);u.setDirty()}else if(!L.panning&&this.isMouseOver){this.selectBox.enabled=!1;var F=P._size,V=this.xaxis.domain,G=this.yaxis.domain;D=u.pick(z/u.pixelRatio+F.l+V[0]*F.w,I/u.pixelRatio-(F.t+(1-G[1])*F.h));var J=D&&D.object._trace.handlePick(D);if(J&&k&&this.emitPointAction(J,"plotly_click"),D&&D.object._trace.hoverinfo!=="skip"&&P.hovermode&&J&&(!this.lastPickResult||this.lastPickResult.traceUid!==J.trace.uid||this.lastPickResult.dataCoord[0]!==J.dataCoord[0]||this.lastPickResult.dataCoord[1]!==J.dataCoord[1])){var Z=J;this.lastPickResult={traceUid:J.trace?J.trace.uid:null,dataCoord:J.dataCoord.slice()},this.spikes.update({center:D.dataCoord}),Z.screenCoord=[((u.viewBox[2]-u.viewBox[0])*(D.dataCoord[0]-u.dataBox[0])/(u.dataBox[2]-u.dataBox[0])+u.viewBox[0])/u.pixelRatio,(this.canvas.height-(u.viewBox[3]-u.viewBox[1])*(D.dataCoord[1]-u.dataBox[1])/(u.dataBox[3]-u.dataBox[1])-u.viewBox[1])/u.pixelRatio],this.emitPointAction(J,"plotly_hover");var Y=this.fullData[Z.trace.index]||{},j=Z.pointIndex,re=M.castHoverinfo(Y,P,j);if(re&&re!=="all"){var se=re.split("+");se.indexOf("x")===-1&&(Z.traceCoord[0]=void 0),se.indexOf("y")===-1&&(Z.traceCoord[1]=void 0),se.indexOf("z")===-1&&(Z.traceCoord[2]=void 0),se.indexOf("text")===-1&&(Z.textLabel=void 0),se.indexOf("name")===-1&&(Z.name=void 0)}M.loneHover({x:Z.screenCoord[0],y:Z.screenCoord[1],xLabel:this.hoverFormatter("xaxis",Z.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",Z.traceCoord[1]),zLabel:Z.traceCoord[2],text:Z.textLabel,name:Z.name,color:M.castHoverOption(Y,j,"bgcolor")||Z.color,borderColor:M.castHoverOption(Y,j,"bordercolor"),fontFamily:M.castHoverOption(Y,j,"font.family"),fontSize:M.castHoverOption(Y,j,"font.size"),fontColor:M.castHoverOption(Y,j,"font.color"),nameLength:M.castHoverOption(Y,j,"namelength"),textAlign:M.castHoverOption(Y,j,"align")},{container:this.svgContainer,gd:this.graphDiv})}}D||this.unhover(),u.draw()}},h.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),M.loneUnhover(this.svgContainer))},h.hoverFormatter=function(u,L){if(L!==void 0){var S=this[u];return v.tickText(S,S.c2l(L),"hover").text}}},{"../../../stackgl_modules":1124,"../../components/dragelement/helpers":384,"../../components/fx":406,"../../lib/show_no_webgl_msg":525,"../../plots/cartesian/axes":554,"../../registry":638,"../cartesian/autorange":553,"../cartesian/constants":561,"../cartesian/constraints":562,"./camera":594,"./convert":595,"webgl-context":331}],598:[function(d,ne,ae){var w=d("../../plot_api/edit_types").overrideAll,v=d("../../components/fx/layout_attributes"),M=d("./scene"),T=d("../get_data").getSubplotData,e=d("../../lib"),a=d("../../constants/xmlns_namespaces"),n="gl3d",r="scene";ae.name=n,ae.attr=r,ae.idRoot=r,ae.idRegex=ae.attrRegex=e.counterRegex("scene"),ae.attributes=d("./layout/attributes"),ae.layoutAttributes=d("./layout/layout_attributes"),ae.baseLayoutAttrOverrides=w({hoverlabel:v.hoverlabel},"plot","nested"),ae.supplyLayoutDefaults=d("./layout/defaults"),ae.plot=function(f){for(var o=f._fullLayout,i=f._fullData,g=o._subplots[n],p=0;p<g.length;p++){var y=g[p],c=T(i,n,y),b=o[y],l=b.camera,_=b._scene;_||(_=new M({id:y,graphDiv:f,container:f.querySelector(".gl-container"),staticPlot:f._context.staticPlot,plotGlPixelRatio:f._context.plotGlPixelRatio,camera:l},o),b._scene=_),_.viewInitial||(_.viewInitial={up:{x:l.up.x,y:l.up.y,z:l.up.z},eye:{x:l.eye.x,y:l.eye.y,z:l.eye.z},center:{x:l.center.x,y:l.center.y,z:l.center.z}}),_.plot(c,o,f.layout)}},ae.clean=function(t,f,o,i){for(var g=i._subplots[n]||[],p=0;p<g.length;p++){var y=g[p];!f[y]&&!!i[y]._scene&&(i[y]._scene.destroy(),i._infolayer&&i._infolayer.selectAll(".annotation-"+y).remove())}},ae.toSVG=function(t){for(var f=t._fullLayout,o=f._subplots[n],i=f._size,g=0;g<o.length;g++){var p=f[o[g]],y=p.domain,c=p._scene,b=c.toImage("png"),l=f._glimages.append("svg:image");l.attr({xmlns:a.svg,"xlink:href":b,x:i.l+i.w*y.x[0],y:i.t+i.h*(1-y.y[1]),width:i.w*(y.x[1]-y.x[0]),height:i.h*(y.y[1]-y.y[0]),preserveAspectRatio:"none"}),c.destroy()}},ae.cleanId=function(f){if(!!f.match(/^scene[0-9]*$/)){var o=f.substr(5);return o==="1"&&(o=""),r+o}},ae.updateFx=function(t){for(var f=t._fullLayout,o=f._subplots[n],i=0;i<o.length;i++){var g=f[o[i]]._scene;g.updateFx(f.dragmode,f.hovermode)}}},{"../../components/fx/layout_attributes":407,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../plot_api/edit_types":536,"../get_data":593,"./layout/attributes":599,"./layout/defaults":603,"./layout/layout_attributes":604,"./scene":608}],599:[function(d,ne,ae){ne.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],600:[function(d,ne,ae){var w=d("../../../components/color"),v=d("../../cartesian/layout_attributes"),M=d("../../../lib/extend").extendFlat,T=d("../../../plot_api/edit_types").overrideAll;ne.exports=T({visible:v.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:w.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:v.color,categoryorder:v.categoryorder,categoryarray:v.categoryarray,title:{text:v.title.text,font:v.title.font},type:M({},v.type,{values:["-","linear","log","date","category"]}),autotypenumbers:v.autotypenumbers,autorange:v.autorange,rangemode:v.rangemode,range:M({},v.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:v.tickmode,nticks:v.nticks,tick0:v.tick0,dtick:v.dtick,tickvals:v.tickvals,ticktext:v.ticktext,ticks:v.ticks,mirror:v.mirror,ticklen:v.ticklen,tickwidth:v.tickwidth,tickcolor:v.tickcolor,showticklabels:v.showticklabels,tickfont:v.tickfont,tickangle:v.tickangle,tickprefix:v.tickprefix,showtickprefix:v.showtickprefix,ticksuffix:v.ticksuffix,showticksuffix:v.showticksuffix,showexponent:v.showexponent,exponentformat:v.exponentformat,minexponent:v.minexponent,separatethousands:v.separatethousands,tickformat:v.tickformat,tickformatstops:v.tickformatstops,hoverformat:v.hoverformat,showline:v.showline,linecolor:v.linecolor,linewidth:v.linewidth,showgrid:v.showgrid,gridcolor:M({},v.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:v.gridwidth,zeroline:v.zeroline,zerolinecolor:v.zerolinecolor,zerolinewidth:v.zerolinewidth,_deprecated:{title:v._deprecated.title,titlefont:v._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":366,"../../../lib/extend":493,"../../../plot_api/edit_types":536,"../../cartesian/layout_attributes":569}],601:[function(d,ne,ae){var w=d("tinycolor2").mix,v=d("../../../lib"),M=d("../../../plot_api/plot_template"),T=d("./axis_attributes"),e=d("../../cartesian/type_defaults"),a=d("../../cartesian/axis_defaults"),n=["xaxis","yaxis","zaxis"],r=100*(204-68)/(255-68);ne.exports=function(f,o,i){var g,p;function y(l,_){return v.coerce(g,p,T,l,_)}for(var c=0;c<n.length;c++){var b=n[c];g=f[b]||{},p=M.newContainer(o,b),p._id=b[0]+i.scene,p._name=b,e(g,p,y,i),a(g,p,y,{font:i.font,letter:b[0],data:i.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:i.bgColor,calendar:i.calendar},i.fullLayout),y("gridcolor",w(p.color,i.bgColor,r).toRgbString()),y("title.text",b[0]),p.setScale=v.noop,y("showspikes")&&(y("spikesides"),y("spikethickness"),y("spikecolor",p.color)),y("showaxeslabels"),y("showbackground")&&y("backgroundcolor")}}},{"../../../lib":503,"../../../plot_api/plot_template":543,"../../cartesian/axis_defaults":556,"../../cartesian/type_defaults":582,"./axis_attributes":600,tinycolor2:312}],602:[function(d,ne,ae){var w=d("../../../lib/str2rgbarray"),v=d("../../../lib"),M=["xaxis","yaxis","zaxis"];function T(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}var e=T.prototype;e.merge=function(n,r){for(var t=this,f=0;f<3;++f){var o=r[M[f]];if(!o.visible){t.tickEnable[f]=!1,t.labelEnable[f]=!1,t.lineEnable[f]=!1,t.lineTickEnable[f]=!1,t.gridEnable[f]=!1,t.zeroEnable[f]=!1,t.backgroundEnable[f]=!1;continue}t.labels[f]=n._meta?v.templateString(o.title.text,n._meta):o.title.text,"font"in o.title&&(o.title.font.color&&(t.labelColor[f]=w(o.title.font.color)),o.title.font.family&&(t.labelFont[f]=o.title.font.family),o.title.font.size&&(t.labelSize[f]=o.title.font.size)),"showline"in o&&(t.lineEnable[f]=o.showline),"linecolor"in o&&(t.lineColor[f]=w(o.linecolor)),"linewidth"in o&&(t.lineWidth[f]=o.linewidth),"showgrid"in o&&(t.gridEnable[f]=o.showgrid),"gridcolor"in o&&(t.gridColor[f]=w(o.gridcolor)),"gridwidth"in o&&(t.gridWidth[f]=o.gridwidth),o.type==="log"?t.zeroEnable[f]=!1:"zeroline"in o&&(t.zeroEnable[f]=o.zeroline),"zerolinecolor"in o&&(t.zeroLineColor[f]=w(o.zerolinecolor)),"zerolinewidth"in o&&(t.zeroLineWidth[f]=o.zerolinewidth),"ticks"in o&&!!o.ticks?t.lineTickEnable[f]=!0:t.lineTickEnable[f]=!1,"ticklen"in o&&(t.lineTickLength[f]=t._defaultLineTickLength[f]=o.ticklen),"tickcolor"in o&&(t.lineTickColor[f]=w(o.tickcolor)),"tickwidth"in o&&(t.lineTickWidth[f]=o.tickwidth),"tickangle"in o&&(t.tickAngle[f]=o.tickangle==="auto"?-3600:Math.PI*-o.tickangle/180),"showticklabels"in o&&(t.tickEnable[f]=o.showticklabels),"tickfont"in o&&(o.tickfont.color&&(t.tickColor[f]=w(o.tickfont.color)),o.tickfont.family&&(t.tickFont[f]=o.tickfont.family),o.tickfont.size&&(t.tickSize[f]=o.tickfont.size)),"mirror"in o?["ticks","all","allticks"].indexOf(o.mirror)!==-1?(t.lineTickMirror[f]=!0,t.lineMirror[f]=!0):o.mirror===!0?(t.lineTickMirror[f]=!1,t.lineMirror[f]=!0):(t.lineTickMirror[f]=!1,t.lineMirror[f]=!1):t.lineMirror[f]=!1,"showbackground"in o&&o.showbackground!==!1?(t.backgroundEnable[f]=!0,t.backgroundColor[f]=w(o.backgroundcolor)):t.backgroundEnable[f]=!1}};function a(n,r){var t=new T;return t.merge(n,r),t}ne.exports=a},{"../../../lib":503,"../../../lib/str2rgbarray":528}],603:[function(d,ne,ae){var w=d("../../../lib"),v=d("../../../components/color"),M=d("../../../registry"),T=d("../../subplot_defaults"),e=d("./axis_defaults"),a=d("./layout_attributes"),n=d("../../get_data").getSubplotData,r="gl3d";ne.exports=function(o,i,g){var p=i._basePlotModules.length>1;function y(c){if(!p){var b=w.validate(o[c],a[c]);if(b)return o[c]}}T(o,i,g,{type:r,attributes:a,handleDefaults:t,fullLayout:i,font:i.font,fullData:g,getDfltFromLayout:y,autotypenumbersDflt:i.autotypenumbers,paper_bgcolor:i.paper_bgcolor,calendar:i.calendar})};function t(f,o,i,g){for(var p=i("bgcolor"),y=v.combine(p,g.paper_bgcolor),c=["up","center","eye"],b=0;b<c.length;b++)i("camera."+c[b]+".x"),i("camera."+c[b]+".y"),i("camera."+c[b]+".z");i("camera.projection.type");var l=!!i("aspectratio.x")&&!!i("aspectratio.y")&&!!i("aspectratio.z"),_=l?"manual":"auto",s=i("aspectmode",_);l||(f.aspectratio=o.aspectratio={x:1,y:1,z:1},s==="manual"&&(o.aspectmode="auto"),f.aspectmode=o.aspectmode);var A=n(g.fullData,r,g.id);e(f,o,{font:g.font,scene:g.id,data:A,bgColor:y,calendar:g.calendar,autotypenumbersDflt:g.autotypenumbersDflt,fullLayout:g.fullLayout}),M.getComponentMethod("annotations3d","handleDefaults")(f,o,g);var m=g.getDfltFromLayout("dragmode");if(m!==!1&&!m)if(m="orbit",f.camera&&f.camera.up){var h=f.camera.up.x,x=f.camera.up.y,u=f.camera.up.z;u!==0&&(!h||!x||!u||u/Math.sqrt(h*h+x*x+u*u)>.999)&&(m="turntable")}else m="turntable";i("dragmode",m),i("hovermode",g.getDfltFromLayout("hovermode"))}},{"../../../components/color":366,"../../../lib":503,"../../../registry":638,"../../get_data":593,"../../subplot_defaults":632,"./axis_defaults":601,"./layout_attributes":604}],604:[function(d,ne,ae){var w=d("./axis_attributes"),v=d("../../domain").attributes,M=d("../../../lib/extend").extendFlat,T=d("../../../lib").counterRegex;function e(a,n,r){return{x:{valType:"number",dflt:a,editType:"camera"},y:{valType:"number",dflt:n,editType:"camera"},z:{valType:"number",dflt:r,editType:"camera"},editType:"camera"}}ne.exports={_arrayAttrRegexps:[T("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:M(e(0,0,1),{}),center:M(e(0,0,0),{}),eye:M(e(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:v({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:w,yaxis:w,zaxis:w,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":503,"../../../lib/extend":493,"../../domain":584,"./axis_attributes":600}],605:[function(d,ne,ae){var w=d("../../../lib/str2rgbarray"),v=["xaxis","yaxis","zaxis"];function M(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}var T=M.prototype;T.merge=function(a){for(var n=0;n<3;++n){var r=a[v[n]];if(!r.visible){this.enabled[n]=!1,this.drawSides[n]=!1;continue}this.enabled[n]=r.showspikes,this.colors[n]=w(r.spikecolor),this.drawSides[n]=r.spikesides,this.lineWidth[n]=r.spikethickness}};function e(a){var n=new M;return n.merge(a),n}ne.exports=e},{"../../../lib/str2rgbarray":528}],606:[function(d,ne,ae){ne.exports=e;var w=d("../../cartesian/axes"),v=d("../../../lib"),M=["xaxis","yaxis","zaxis"];function T(a){for(var n=new Array(3),r=0;r<3;++r){for(var t=a[r],f=new Array(t.length),o=0;o<t.length;++o)f[o]=t[o].x;n[r]=f}return n}function e(a){for(var n=a.axesOptions,r=a.glplot.axesPixels,t=a.fullSceneLayout,f=[[],[],[]],o=0;o<3;++o){var i=t[M[o]];if(i._length=(r[o].hi-r[o].lo)*r[o].pixelsPerDataUnit/a.dataScale[o],Math.abs(i._length)===1/0||isNaN(i._length))f[o]=[];else{i._input_range=i.range.slice(),i.range[0]=r[o].lo/a.dataScale[o],i.range[1]=r[o].hi/a.dataScale[o],i._m=1/(a.dataScale[o]*r[o].pixelsPerDataUnit),i.range[0]===i.range[1]&&(i.range[0]-=1,i.range[1]+=1);var g=i.tickmode;if(i.tickmode==="auto"){i.tickmode="linear";var p=i.nticks||v.constrain(i._length/40,4,9);w.autoTicks(i,Math.abs(i.range[1]-i.range[0])/p)}for(var y=w.calcTicks(i,{msUTC:!0}),c=0;c<y.length;++c)y[c].x=y[c].x*a.dataScale[o],i.type==="date"&&(y[c].text=y[c].text.replace(/\<br\>/g," "));f[o]=y,i.tickmode=g}}n.ticks=f;for(var o=0;o<3;++o){.5*(a.glplot.bounds[0][o]+a.glplot.bounds[1][o]);for(var c=0;c<2;++c)n.bounds[c][o]=a.glplot.bounds[c][o]}a.contourLevels=T(f)}},{"../../../lib":503,"../../cartesian/axes":554}],607:[function(d,ne,ae){function w(M,T){var e=[0,0,0,0],a,n;for(a=0;a<4;++a)for(n=0;n<4;++n)e[n]+=M[4*a+n]*T[a];return e}function v(M,T){var e=w(M.projection,w(M.view,w(M.model,[T[0],T[1],T[2],1])));return e}ne.exports=v},{}],608:[function(d,ne,ae){var w=d("../../../stackgl_modules").gl_plot3d,v=w.createCamera,M=w.createScene,T=d("webgl-context"),e=d("has-passive-events"),a=d("../../registry"),n=d("../../lib"),r=n.preserveDrawingBuffer(),t=d("../../plots/cartesian/axes"),f=d("../../components/fx"),o=d("../../lib/str2rgbarray"),i=d("../../lib/show_no_webgl_msg"),g=d("./project"),p=d("./layout/convert"),y=d("./layout/spikes"),c=d("./layout/tick_marks"),b,l;function _(P,z){var I=document.createElement("div"),D=P.container;this.graphDiv=P.graphDiv;var R=document.createElementNS("http://www.w3.org/2000/svg","svg");R.style.position="absolute",R.style.top=R.style.left="0px",R.style.width=R.style.height="100%",R.style["z-index"]=20,R.style["pointer-events"]="none",I.appendChild(R),this.svgContainer=R,I.id=P.id,I.style.position="absolute",I.style.top=I.style.left="0px",I.style.width=I.style.height="100%",D.appendChild(I),this.fullLayout=z,this.id=P.id||"scene",this.fullSceneLayout=z[this.id],this.plotArgs=[[],{},{}],this.axesOptions=p(z,z[this.id]),this.spikeOptions=y(z[this.id]),this.container=I,this.staticMode=!!P.staticPlot,this.pixelRatio=this.pixelRatio||P.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=a.getComponentMethod("annotations3d","convert"),this.drawAnnotations=a.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var s=_.prototype;s.prepareOptions=function(){var P=this,z={canvas:P.canvas,gl:P.gl,glOptions:{preserveDrawingBuffer:r,premultipliedAlpha:!0,antialias:!0},container:P.container,axes:P.axesOptions,spikes:P.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:P.camera,pixelRatio:P.pixelRatio};if(P.staticMode){if(!l&&(b=document.createElement("canvas"),l=T({canvas:b,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!l))throw new Error("error creating static canvas/context for image server");z.gl=l,z.canvas=b}return z};var A=!0;s.tryCreatePlot=function(){var P=this,z=P.prepareOptions(),I=!0;try{P.glplot=M(z)}catch{if(P.staticMode||!A||r)I=!1;else{n.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{r=z.glOptions.preserveDrawingBuffer=!0,P.glplot=M(z)}catch{r=z.glOptions.preserveDrawingBuffer=!1,I=!1}}}return A=!1,I},s.initializeGLCamera=function(){var P=this,z=P.fullSceneLayout.camera,I=z.projection.type==="orthographic";P.camera=v(P.container,{center:[z.center.x,z.center.y,z.center.z],eye:[z.eye.x,z.eye.y,z.eye.z],up:[z.up.x,z.up.y,z.up.z],_ortho:I,zoomMin:.01,zoomMax:100,mode:"orbit"})},s.initializeGLPlot=function(){var P=this;P.initializeGLCamera();var z=P.tryCreatePlot();if(!z)return i(P);P.traces={},P.make4thDimension();var I=P.graphDiv,D=I.layout,R=function(){var F={};return P.isCameraChanged(D)&&(F[P.id+".camera"]=P.getCamera()),P.isAspectChanged(D)&&(F[P.id+".aspectratio"]=P.glplot.getAspectratio(),D[P.id].aspectmode!=="manual"&&(P.fullSceneLayout.aspectmode=D[P.id].aspectmode=F[P.id+".aspectmode"]="manual")),F},O=function(F){if(F.fullSceneLayout.dragmode!==!1){var V=R();F.saveLayout(D),F.graphDiv.emit("plotly_relayout",V)}};return P.glplot.canvas&&(P.glplot.canvas.addEventListener("mouseup",function(){O(P)}),P.glplot.canvas.addEventListener("wheel",function(F){if(I._context._scrollZoom.gl3d){if(P.camera._ortho){var V=F.deltaX>F.deltaY?1.1:.9090909090909091,G=P.glplot.getAspectratio();P.glplot.setAspectratio({x:V*G.x,y:V*G.y,z:V*G.z})}O(P)}},e?{passive:!1}:!1),P.glplot.canvas.addEventListener("mousemove",function(){if(P.fullSceneLayout.dragmode!==!1&&P.camera.mouseListener.buttons!==0){var F=R();P.graphDiv.emit("plotly_relayouting",F)}}),P.staticMode||P.glplot.canvas.addEventListener("webglcontextlost",function(F){I&&I.emit&&I.emit("plotly_webglcontextlost",{event:F,layer:P.id})},!1)),P.glplot.oncontextloss=function(){P.recoverContext()},P.glplot.onrender=function(){P.render()},!0},s.render=function(){var P=this,z=P.graphDiv,I,D=P.svgContainer,R=P.container.getBoundingClientRect();z._fullLayout._calcInverseTransform(z);var O=z._fullLayout._invScaleX,F=z._fullLayout._invScaleY,V=R.width*O,G=R.height*F;D.setAttributeNS(null,"viewBox","0 0 "+V+" "+G),D.setAttributeNS(null,"width",V),D.setAttributeNS(null,"height",G),c(P),P.glplot.axes.update(P.axesOptions);for(var J=Object.keys(P.traces),Z=null,Y=P.glplot.selection,j=0;j<J.length;++j)I=P.traces[J[j]],I.data.hoverinfo!=="skip"&&I.handlePick(Y)&&(Z=I),I.setContourLevels&&I.setContourLevels();function re(ge,fe,pe){var ye=P.fullSceneLayout[ge+"axis"];return ye.type!=="log"&&(fe=ye.d2l(fe)),t.hoverLabelText(ye,fe,pe)}if(Z!==null){var se=g(P.glplot.cameraParams,Y.dataCoordinate);I=Z.data;var oe=z._fullData[I.index],N=Y.index,U={xLabel:re("x",Y.traceCoordinate[0],I.xhoverformat),yLabel:re("y",Y.traceCoordinate[1],I.yhoverformat),zLabel:re("z",Y.traceCoordinate[2],I.zhoverformat)},q=f.castHoverinfo(oe,P.fullLayout,N),Q=(q||"").split("+"),W=q&&q==="all";!oe.hovertemplate&&!W&&(Q.indexOf("x")===-1&&(U.xLabel=void 0),Q.indexOf("y")===-1&&(U.yLabel=void 0),Q.indexOf("z")===-1&&(U.zLabel=void 0),Q.indexOf("text")===-1&&(Y.textLabel=void 0),Q.indexOf("name")===-1&&(Z.name=void 0));var X,ee=[];I.type==="cone"||I.type==="streamtube"?(U.uLabel=re("x",Y.traceCoordinate[3],I.uhoverformat),(W||Q.indexOf("u")!==-1)&&ee.push("u: "+U.uLabel),U.vLabel=re("y",Y.traceCoordinate[4],I.vhoverformat),(W||Q.indexOf("v")!==-1)&&ee.push("v: "+U.vLabel),U.wLabel=re("z",Y.traceCoordinate[5],I.whoverformat),(W||Q.indexOf("w")!==-1)&&ee.push("w: "+U.wLabel),U.normLabel=Y.traceCoordinate[6].toPrecision(3),(W||Q.indexOf("norm")!==-1)&&ee.push("norm: "+U.normLabel),I.type==="streamtube"&&(U.divergenceLabel=Y.traceCoordinate[7].toPrecision(3),(W||Q.indexOf("divergence")!==-1)&&ee.push("divergence: "+U.divergenceLabel)),Y.textLabel&&ee.push(Y.textLabel),X=ee.join("<br>")):I.type==="isosurface"||I.type==="volume"?(U.valueLabel=t.hoverLabelText(P._mockAxis,P._mockAxis.d2l(Y.traceCoordinate[3]),I.valuehoverformat),ee.push("value: "+U.valueLabel),Y.textLabel&&ee.push(Y.textLabel),X=ee.join("<br>")):X=Y.textLabel;var te={x:Y.traceCoordinate[0],y:Y.traceCoordinate[1],z:Y.traceCoordinate[2],data:oe._input,fullData:oe,curveNumber:oe.index,pointNumber:N};f.appendArrayPointValue(te,oe,N),I._module.eventData&&(te=oe._module.eventData(te,Y,oe,{},N));var ie={points:[te]};if(P.fullSceneLayout.hovermode){var le=[];f.loneHover({trace:oe,x:(.5+.5*se[0]/se[3])*V,y:(.5-.5*se[1]/se[3])*G,xLabel:U.xLabel,yLabel:U.yLabel,zLabel:U.zLabel,text:X,name:Z.name,color:f.castHoverOption(oe,N,"bgcolor")||Z.color,borderColor:f.castHoverOption(oe,N,"bordercolor"),fontFamily:f.castHoverOption(oe,N,"font.family"),fontSize:f.castHoverOption(oe,N,"font.size"),fontColor:f.castHoverOption(oe,N,"font.color"),nameLength:f.castHoverOption(oe,N,"namelength"),textAlign:f.castHoverOption(oe,N,"align"),hovertemplate:n.castOption(oe,N,"hovertemplate"),hovertemplateLabels:n.extendFlat({},te,U),eventData:[te]},{container:D,gd:z,inOut_bbox:le}),te.bbox=le[0]}Y.buttons&&Y.distance<5?z.emit("plotly_click",ie):z.emit("plotly_hover",ie),this.oldEventData=ie}else f.loneUnhover(D),this.oldEventData&&z.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;P.drawAnnotations(P)},s.recoverContext=function(){var P=this;P.glplot.dispose();var z=function(){if(P.glplot.gl.isContextLost()){requestAnimationFrame(z);return}if(!P.initializeGLPlot()){n.error("Catastrophic and unrecoverable WebGL error. Context lost.");return}P.plot.apply(P,P.plotArgs)};requestAnimationFrame(z)};var m=["xaxis","yaxis","zaxis"];function h(P,z,I){for(var D=P.fullSceneLayout,R=0;R<3;R++){var O=m[R],F=O.charAt(0),V=D[O],G=z[F],J=z[F+"calendar"],Z=z["_"+F+"length"];if(!n.isArrayOrTypedArray(G))I[0][R]=Math.min(I[0][R],0),I[1][R]=Math.max(I[1][R],Z-1);else for(var Y,j=0;j<(Z||G.length);j++)if(n.isArrayOrTypedArray(G[j]))for(var re=0;re<G[j].length;++re)Y=V.d2l(G[j][re],0,J),!isNaN(Y)&&isFinite(Y)&&(I[0][R]=Math.min(I[0][R],Y),I[1][R]=Math.max(I[1][R],Y));else Y=V.d2l(G[j],0,J),!isNaN(Y)&&isFinite(Y)&&(I[0][R]=Math.min(I[0][R],Y),I[1][R]=Math.max(I[1][R],Y))}}function x(P,z){for(var I=P.fullSceneLayout,D=I.annotations||[],R=0;R<3;R++)for(var O=m[R],F=O.charAt(0),V=I[O],G=0;G<D.length;G++){var J=D[G];if(J.visible){var Z=V.r2l(J[F]);!isNaN(Z)&&isFinite(Z)&&(z[0][R]=Math.min(z[0][R],Z),z[1][R]=Math.max(z[1][R],Z))}}}s.plot=function(P,z,I){var D=this;if(D.plotArgs=[P,z,I],D.glplot.contextLost)return;var R,O,F,V,G,J,Z=z[D.id],Y=I[D.id];D.fullLayout=z,D.fullSceneLayout=Z,D.axesOptions.merge(z,Z),D.spikeOptions.merge(Z),D.setViewport(Z),D.updateFx(Z.dragmode,Z.hovermode),D.camera.enableWheel=D.graphDiv._context._scrollZoom.gl3d,D.glplot.setClearColor(o(Z.bgcolor)),D.setConvert(G),P?Array.isArray(P)||(P=[P]):P=[];var j=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(F=0;F<P.length;++F)R=P[F],!(R.visible!==!0||R._length===0)&&h(this,R,j);x(this,j);var re=[1,1,1];for(V=0;V<3;++V)j[1][V]===j[0][V]?re[V]=1:re[V]=1/(j[1][V]-j[0][V]);for(D.dataScale=re,D.convertAnnotations(this),F=0;F<P.length;++F)R=P[F],!(R.visible!==!0||R._length===0)&&(O=D.traces[R.uid],O?O.data.type===R.type?O.update(R):(O.dispose(),O=R._module.plot(this,R),D.traces[R.uid]=O):(O=R._module.plot(this,R),D.traces[R.uid]=O),O.name=R.name);var se=Object.keys(D.traces);e:for(F=0;F<se.length;++F){for(V=0;V<P.length;++V)if(P[V].uid===se[F]&&P[V].visible===!0&&P[V]._length!==0)continue e;O=D.traces[se[F]],O.dispose(),delete D.traces[se[F]]}D.glplot.objects.sort(function(Pe,Ve){return Pe._trace.data.index-Ve._trace.data.index});var oe=[[0,0,0],[0,0,0]],N={};for(F=0;F<3;++F){if(G=Z[m[F]],J=G.type,J in N?(N[J].acc*=re[F],N[J].count+=1):N[J]={acc:re[F],count:1},G.autorange){oe[0][F]=1/0,oe[1][F]=-1/0;var U=D.glplot.objects,q=D.fullSceneLayout.annotations||[],Q=G._name.charAt(0);for(V=0;V<U.length;V++){var W=U[V],X=W.bounds,ee=W._trace.data._pad||0;W.constructor.name==="ErrorBars"&&G._lowerLogErrorBound?oe[0][F]=Math.min(oe[0][F],G._lowerLogErrorBound):oe[0][F]=Math.min(oe[0][F],X[0][F]/re[F]-ee),oe[1][F]=Math.max(oe[1][F],X[1][F]/re[F]+ee)}for(V=0;V<q.length;V++){var te=q[V];if(te.visible){var ie=G.r2l(te[Q]);oe[0][F]=Math.min(oe[0][F],ie),oe[1][F]=Math.max(oe[1][F],ie)}}if("rangemode"in G&&G.rangemode==="tozero"&&(oe[0][F]=Math.min(oe[0][F],0),oe[1][F]=Math.max(oe[1][F],0)),oe[0][F]>oe[1][F])oe[0][F]=-1,oe[1][F]=1;else{var le=oe[1][F]-oe[0][F];oe[0][F]-=le/32,oe[1][F]+=le/32}if(G.autorange==="reversed"){var ge=oe[0][F];oe[0][F]=oe[1][F],oe[1][F]=ge}}else{var fe=G.range;oe[0][F]=G.r2l(fe[0]),oe[1][F]=G.r2l(fe[1])}oe[0][F]===oe[1][F]&&(oe[0][F]-=1,oe[1][F]+=1),D.glplot.setBounds(F,{min:oe[0][F]*re[F],max:oe[1][F]*re[F]})}var pe,ye=Z.aspectmode;if(ye==="cube")pe=[1,1,1];else if(ye==="manual"){var Te=Z.aspectratio;pe=[Te.x,Te.y,Te.z]}else if(ye==="auto"||ye==="data"){var _e=[1,1,1];for(F=0;F<3;++F){G=Z[m[F]],J=G.type;var De=N[J];_e[F]=Math.pow(De.acc,1/De.count)/re[F]}ye==="data"||Math.max.apply(null,_e)/Math.min.apply(null,_e)<=4?pe=_e:pe=[1,1,1]}else throw new Error("scene.js aspectRatio was not one of the enumerated types");Z.aspectratio.x=Y.aspectratio.x=pe[0],Z.aspectratio.y=Y.aspectratio.y=pe[1],Z.aspectratio.z=Y.aspectratio.z=pe[2],D.glplot.setAspectratio(Z.aspectratio),D.viewInitial.aspectratio||(D.viewInitial.aspectratio={x:Z.aspectratio.x,y:Z.aspectratio.y,z:Z.aspectratio.z}),D.viewInitial.aspectmode||(D.viewInitial.aspectmode=Z.aspectmode);var Be=Z.domain||null,Ue=z._size||null;if(Be&&Ue){var xe=D.container.style;xe.position="absolute",xe.left=Ue.l+Be.x[0]*Ue.w+"px",xe.top=Ue.t+(1-Be.y[1])*Ue.h+"px",xe.width=Ue.w*(Be.x[1]-Be.x[0])+"px",xe.height=Ue.h*(Be.y[1]-Be.y[0])+"px"}D.glplot.redraw()},s.destroy=function(){var P=this;!P.glplot||(P.camera.mouseListener.enabled=!1,P.container.removeEventListener("wheel",P.camera.wheelListener),P.camera=null,P.glplot.dispose(),P.container.parentNode.removeChild(P.container),P.glplot=null)};function u(P){return[[P.eye.x,P.eye.y,P.eye.z],[P.center.x,P.center.y,P.center.z],[P.up.x,P.up.y,P.up.z]]}function L(P){return{up:{x:P.up[0],y:P.up[1],z:P.up[2]},center:{x:P.center[0],y:P.center[1],z:P.center[2]},eye:{x:P.eye[0],y:P.eye[1],z:P.eye[2]},projection:{type:P._ortho===!0?"orthographic":"perspective"}}}s.getCamera=function(){var P=this;return P.camera.view.recalcMatrix(P.camera.view.lastT()),L(P.camera)},s.setViewport=function(P){var z=this,I=P.camera;z.camera.lookAt.apply(this,u(I)),z.glplot.setAspectratio(P.aspectratio);var D=I.projection.type==="orthographic",R=z.camera._ortho;D!==R&&(z.glplot.redraw(),z.glplot.clearRGBA(),z.glplot.dispose(),z.initializeGLPlot())},s.isCameraChanged=function(P){var z=this,I=z.getCamera(),D=n.nestedProperty(P,z.id+".camera"),R=D.get();function O(J,Z,Y,j){var re=["up","center","eye"],se=["x","y","z"];return Z[re[Y]]&&J[re[Y]][se[j]]===Z[re[Y]][se[j]]}var F=!1;if(R===void 0)F=!0;else{for(var V=0;V<3;V++)for(var G=0;G<3;G++)if(!O(I,R,V,G)){F=!0;break}(!R.projection||I.projection&&I.projection.type!==R.projection.type)&&(F=!0)}return F},s.isAspectChanged=function(P){var z=this,I=z.glplot.getAspectratio(),D=n.nestedProperty(P,z.id+".aspectratio"),R=D.get();return R===void 0||R.x!==I.x||R.y!==I.y||R.z!==I.z},s.saveLayout=function(P){var z=this,I=z.fullLayout,D,R,O,F,V,G,J=z.isCameraChanged(P),Z=z.isAspectChanged(P),Y=J||Z;if(Y){var j={};if(J&&(D=z.getCamera(),R=n.nestedProperty(P,z.id+".camera"),O=R.get(),j[z.id+".camera"]=O),Z&&(F=z.glplot.getAspectratio(),V=n.nestedProperty(P,z.id+".aspectratio"),G=V.get(),j[z.id+".aspectratio"]=G),a.call("_storeDirectGUIEdit",P,I._preGUI,j),J){R.set(D);var re=n.nestedProperty(I,z.id+".camera");re.set(D)}if(Z){V.set(F);var se=n.nestedProperty(I,z.id+".aspectratio");se.set(F),z.glplot.redraw()}}return Y},s.updateFx=function(P,z){var I=this,D=I.camera;if(D)if(P==="orbit")D.mode="orbit",D.keyBindingMode="rotate";else if(P==="turntable"){D.up=[0,0,1],D.mode="turntable",D.keyBindingMode="rotate";var R=I.graphDiv,O=R._fullLayout,F=I.fullSceneLayout.camera,V=F.up.x,G=F.up.y,J=F.up.z;if(J/Math.sqrt(V*V+G*G+J*J)<.999){var Z=I.id+".camera.up",Y={x:0,y:0,z:1},j={};j[Z]=Y;var re=R.layout;a.call("_storeDirectGUIEdit",re,O._preGUI,j),F.up=Y,n.nestedProperty(re,Z).set(Y)}}else D.keyBindingMode=P;I.fullSceneLayout.hovermode=z};function S(P,z,I){for(var D=0,R=I-1;D<R;++D,--R)for(var O=0;O<z;++O)for(var F=0;F<4;++F){var V=4*(z*D+O)+F,G=4*(z*R+O)+F,J=P[V];P[V]=P[G],P[G]=J}}function k(P,z,I){for(var D=0;D<I;++D)for(var R=0;R<z;++R){var O=4*(z*D+R),F=P[O+3];if(F>0)for(var V=255/F,G=0;G<3;++G)P[O+G]=Math.min(V*P[O+G],255)}}s.toImage=function(P){var z=this;P||(P="png"),z.staticMode&&z.container.appendChild(b),z.glplot.redraw();var I=z.glplot.gl,D=I.drawingBufferWidth,R=I.drawingBufferHeight;I.bindFramebuffer(I.FRAMEBUFFER,null);var O=new Uint8Array(D*R*4);I.readPixels(0,0,D,R,I.RGBA,I.UNSIGNED_BYTE,O),S(O,D,R),k(O,D,R);var F=document.createElement("canvas");F.width=D,F.height=R;var V=F.getContext("2d",{willReadFrequently:!0}),G=V.createImageData(D,R);G.data.set(O),V.putImageData(G,0,0);var J;switch(P){case"jpeg":J=F.toDataURL("image/jpeg");break;case"webp":J=F.toDataURL("image/webp");break;default:J=F.toDataURL("image/png")}return z.staticMode&&z.container.removeChild(b),J},s.setConvert=function(){for(var P=this,z=0;z<3;z++){var I=P.fullSceneLayout[m[z]];t.setConvert(I,P.fullLayout),I.setScale=n.noop}},s.make4thDimension=function(){var P=this,z=P.graphDiv,I=z._fullLayout;P._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},t.setConvert(P._mockAxis,I)},ne.exports=_},{"../../../stackgl_modules":1124,"../../components/fx":406,"../../lib":503,"../../lib/show_no_webgl_msg":525,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554,"../../registry":638,"./layout/convert":602,"./layout/spikes":605,"./layout/tick_marks":606,"./project":607,"has-passive-events":229,"webgl-context":331}],609:[function(d,ne,ae){ne.exports=function(v,M,T,e){e=e||v.length;for(var a=new Array(e),n=0;n<e;n++)a[n]=[v[n],M[n],T[n]];return a}},{}],610:[function(d,ne,ae){var w=d("./font_attributes"),v=d("./animation_attributes"),M=d("../components/color/attributes"),T=d("../components/shapes/draw_newshape/attributes"),e=d("./pad_attributes"),a=d("../lib/extend").extendFlat,n=w({editType:"calc"});n.family.dflt='"Open Sans", verdana, arial, sans-serif',n.size.dflt=12,n.color.dflt=M.defaultLine,ne.exports={font:n,title:{text:{valType:"string",editType:"layoutstyle"},font:w({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:a(e({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:M.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:M.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:M.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:T.newshape,activeshape:T.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:a({},v.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:w({editType:"layoutstyle"})}}},{"../components/color/attributes":365,"../components/shapes/draw_newshape/attributes":451,"../lib/extend":493,"./animation_attributes":548,"./font_attributes":585,"./pad_attributes":618}],611:[function(d,ne,ae){var w=d("../../lib/sort_object_keys"),v="1.10.1",M='\xA9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',T=['\xA9 <a target="_blank" href="https://carto.com/">Carto</a>',M].join(" "),e=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),a=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),n={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:M,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:e,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:e,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:a,tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},r=w(n);ne.exports={requiredVersion:v,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:n,styleValuesNonMapbox:r,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@"+v+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",r.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},{"../../lib/sort_object_keys":526}],612:[function(d,ne,ae){var w=d("../../lib");ne.exports=function(M,T){var e=M.split(" "),a=e[0],n=e[1],r=w.isArrayOrTypedArray(T)?w.mean(T):T,t=.5+r/100,f=1.5+r/100,o=["",""],i=[0,0];switch(a){case"top":o[0]="top",i[1]=-f;break;case"bottom":o[0]="bottom",i[1]=f;break}switch(n){case"left":o[1]="right",i[0]=-t;break;case"right":o[1]="left",i[0]=t;break}var g;return o[0]&&o[1]?g=o.join("-"):o[0]?g=o[0]:o[1]?g=o[1]:g="center",{anchor:g,offset:i}}},{"../../lib":503}],613:[function(d,ne,ae){var w=d("mapbox-gl/dist/mapbox-gl-unminified"),v=d("../../lib"),M=v.strTranslate,T=v.strScale,e=d("../../plots/get_data").getSubplotCalcData,a=d("../../constants/xmlns_namespaces"),n=d("@plotly/d3"),r=d("../../components/drawing"),t=d("../../lib/svg_text_utils"),f=d("./mapbox"),o="mapbox",i=ae.constants=d("./constants");ae.name=o,ae.attr="subplot",ae.idRoot=o,ae.idRegex=ae.attrRegex=v.counterRegex(o),ae.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},ae.layoutAttributes=d("./layout_attributes"),ae.supplyLayoutDefaults=d("./layout_defaults"),ae.plot=function(c){var b=c._fullLayout,l=c.calcdata,_=b._subplots[o];if(w.version!==i.requiredVersion)throw new Error(i.wrongVersionErrorMsg);var s=g(c,_);w.accessToken=s;for(var A=0;A<_.length;A++){var m=_[A],h=e(l,o,m),x=b[m],u=x._subplot;u||(u=new f(c,m),b[m]._subplot=u),u.viewInitial||(u.viewInitial={center:v.extendFlat({},x.center),zoom:x.zoom,bearing:x.bearing,pitch:x.pitch}),u.plot(h,b,c._promises)}},ae.clean=function(y,c,b,l){for(var _=l._subplots[o]||[],s=0;s<_.length;s++){var A=_[s];!c[A]&&!!l[A]._subplot&&l[A]._subplot.destroy()}},ae.toSVG=function(y){for(var c=y._fullLayout,b=c._subplots[o],l=c._size,_=0;_<b.length;_++){var s=c[b[_]],A=s.domain,m=s._subplot,h=m.toImage("png"),x=c._glimages.append("svg:image");x.attr({xmlns:a.svg,"xlink:href":h,x:l.l+l.w*A.x[0],y:l.t+l.h*(1-A.y[1]),width:l.w*(A.x[1]-A.x[0]),height:l.h*(A.y[1]-A.y[0]),preserveAspectRatio:"none"});var u=n.select(s._subplot.div),L=u.select(".mapboxgl-ctrl-logo").node().offsetParent===null;if(!L){var S=c._glimages.append("g");S.attr("transform",M(l.l+l.w*A.x[0]+10,l.t+l.h*(1-A.y[0])-31)),S.append("path").attr("d",i.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),S.append("path").attr("d",i.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),S.append("path").attr("d",i.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),S.append("polygon").attr("points",i.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var k=u.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),P=c._glimages.append("g"),z=P.append("text");z.text(k).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":k});var I=r.bBox(z.node()),D=l.w*(A.x[1]-A.x[0]);if(I.width>D/2){var R=k.split("|").join("<br>");z.text(R).attr("data-unformatted",R).call(t.convertToTspans,y),I=r.bBox(z.node())}z.attr("transform",M(-3,-I.height+8)),P.insert("rect",".static-attribution").attr({x:-I.width-6,y:-I.height-3,width:I.width+6,height:I.height+3,fill:"rgba(255, 255, 255, 0.75)"});var O=1;I.width+6>D&&(O=D/(I.width+6));var F=[l.l+l.w*A.x[1],l.t+l.h*(1-A.y[0])];P.attr("transform",M(F[0],F[1])+T(O))}};function g(y,c){var b=y._fullLayout,l=y._context;if(l.mapboxAccessToken==="")return"";for(var _=[],s=[],A=!1,m=!1,h=0;h<c.length;h++){var x=b[c[h]],u=x.accesstoken;p(x.style)&&(u?v.pushUnique(_,u):(p(x._input.style)&&(v.error("Uses Mapbox map style, but did not set an access token."),A=!0),m=!0)),u&&v.pushUnique(s,u)}if(m){var L=A?i.noAccessTokenErrorMsg:i.missingStyleErrorMsg;throw v.error(L),new Error(L)}return _.length?(_.length>1&&v.warn(i.multipleTokensErrorMsg),_[0]):(s.length&&v.log(["Listed mapbox access token(s)",s.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}function p(y){return typeof y=="string"&&(i.styleValuesMapbox.indexOf(y)!==-1||y.indexOf("mapbox://")===0)}ae.updateFx=function(y){for(var c=y._fullLayout,b=c._subplots[o],l=0;l<b.length;l++){var _=c[b[l]]._subplot;_.updateFx(c)}}},{"../../components/drawing":388,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/get_data":593,"./constants":611,"./layout_attributes":615,"./layout_defaults":616,"./mapbox":617,"@plotly/d3":58,"mapbox-gl/dist/mapbox-gl-unminified":239}],614:[function(d,ne,ae){var w=d("../../lib"),v=d("../../lib/svg_text_utils").sanitizeHTML,M=d("./convert_text_opts"),T=d("./constants");function e(f,o){this.subplot=f,this.uid=f.uid+"-"+o,this.index=o,this.idSource="source-"+this.uid,this.idLayer=T.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var a=e.prototype;a.update=function(o){this.visible?this.needsNewImage(o)?this.updateImage(o):this.needsNewSource(o)?(this.removeLayer(),this.updateSource(o),this.updateLayer(o)):this.needsNewLayer(o)?this.updateLayer(o):this.updateStyle(o):(this.updateSource(o),this.updateLayer(o)),this.visible=n(o)},a.needsNewImage=function(f){var o=this.subplot.map;return o.getSource(this.idSource)&&this.sourceType==="image"&&f.sourcetype==="image"&&(this.source!==f.source||JSON.stringify(this.coordinates)!==JSON.stringify(f.coordinates))},a.needsNewSource=function(f){return this.sourceType!==f.sourcetype||JSON.stringify(this.source)!==JSON.stringify(f.source)||this.layerType!==f.type},a.needsNewLayer=function(f){return this.layerType!==f.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},a.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},a.updateImage=function(f){var o=this.subplot.map;o.getSource(this.idSource).updateImage({url:f.source,coordinates:f.coordinates});var i=this.findFollowingMapboxLayerId(this.lookupBelow());i!==null&&this.subplot.map.moveLayer(this.idLayer,i)},a.updateSource=function(f){var o=this.subplot.map;if(o.getSource(this.idSource)&&o.removeSource(this.idSource),this.sourceType=f.sourcetype,this.source=f.source,!!n(f)){var i=t(f);o.addSource(this.idSource,i)}},a.findFollowingMapboxLayerId=function(f){if(f==="traces")for(var o=this.subplot.getMapLayers(),i=0;i<o.length;i++){var g=o[i].id;if(typeof g=="string"&&g.indexOf(T.traceLayerPrefix)===0){f=g;break}}return f},a.updateLayer=function(f){var o=this.subplot,i=r(f),g=this.lookupBelow(),p=this.findFollowingMapboxLayerId(g);this.removeLayer(),n(f)&&o.addLayer({id:this.idLayer,source:this.idSource,"source-layer":f.sourcelayer||"",type:f.type,minzoom:f.minzoom,maxzoom:f.maxzoom,layout:i.layout,paint:i.paint},p),this.layerType=f.type,this.below=g},a.updateStyle=function(f){if(n(f)){var o=r(f);this.subplot.setOptions(this.idLayer,"setLayoutProperty",o.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",o.paint)}},a.removeLayer=function(){var f=this.subplot.map;f.getLayer(this.idLayer)&&f.removeLayer(this.idLayer)},a.dispose=function(){var f=this.subplot.map;f.getLayer(this.idLayer)&&f.removeLayer(this.idLayer),f.getSource(this.idSource)&&f.removeSource(this.idSource)};function n(f){if(!f.visible)return!1;var o=f.source;if(Array.isArray(o)&&o.length>0){for(var i=0;i<o.length;i++)if(typeof o[i]!="string"||o[i].length===0)return!1;return!0}return w.isPlainObject(o)||typeof o=="string"&&o.length>0}function r(f){var o={},i={};switch(f.type){case"circle":w.extendFlat(i,{"circle-radius":f.circle.radius,"circle-color":f.color,"circle-opacity":f.opacity});break;case"line":w.extendFlat(i,{"line-width":f.line.width,"line-color":f.color,"line-opacity":f.opacity,"line-dasharray":f.line.dash});break;case"fill":w.extendFlat(i,{"fill-color":f.color,"fill-outline-color":f.fill.outlinecolor,"fill-opacity":f.opacity});break;case"symbol":var g=f.symbol,p=M(g.textposition,g.iconsize);w.extendFlat(o,{"icon-image":g.icon+"-15","icon-size":g.iconsize/10,"text-field":g.text,"text-size":g.textfont.size,"text-anchor":p.anchor,"text-offset":p.offset,"symbol-placement":g.placement}),w.extendFlat(i,{"icon-color":f.color,"text-color":g.textfont.color,"text-opacity":f.opacity});break;case"raster":w.extendFlat(i,{"raster-fade-duration":0,"raster-opacity":f.opacity});break}return{layout:o,paint:i}}function t(f){var o=f.sourcetype,i=f.source,g={type:o},p;return o==="geojson"?p="data":o==="vector"?p=typeof i=="string"?"url":"tiles":o==="raster"?(p="tiles",g.tileSize=256):o==="image"&&(p="url",g.coordinates=f.coordinates),g[p]=i,f.sourceattribution&&(g.attribution=v(f.sourceattribution)),g}ne.exports=function(o,i,g){var p=new e(o,i);return p.update(g),p}},{"../../lib":503,"../../lib/svg_text_utils":529,"./constants":611,"./convert_text_opts":612}],615:[function(d,ne,ae){var w=d("../../lib"),v=d("../../components/color").defaultLine,M=d("../domain").attributes,T=d("../font_attributes"),e=d("../../traces/scatter/attributes").textposition,a=d("../../plot_api/edit_types").overrideAll,n=d("../../plot_api/plot_template").templatedArray,r=d("./constants"),t=T({});t.family.dflt="Open Sans Regular, Arial Unicode MS Regular";var f=ne.exports=a({_arrayAttrRegexps:[w.counterRegex("mapbox",".layers",!0)],domain:M({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:r.styleValuesMapbox.concat(r.styleValuesNonMapbox),dflt:r.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:n("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:v},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:v}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:t,textposition:w.extendFlat({},e,{arrayOk:!1})}})},"plot","from-root");f.uirevision={valType:"any",editType:"none"}},{"../../components/color":366,"../../lib":503,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../traces/scatter/attributes":927,"../domain":584,"../font_attributes":585,"./constants":611}],616:[function(d,ne,ae){var w=d("../../lib"),v=d("../subplot_defaults"),M=d("../array_container_defaults"),T=d("./layout_attributes");ne.exports=function(r,t,f){v(r,t,f,{type:"mapbox",attributes:T,handleDefaults:e,partition:"y",accessToken:t._mapboxAccessToken})};function e(n,r,t,f){t("accesstoken",f.accessToken),t("style"),t("center.lon"),t("center.lat"),t("zoom"),t("bearing"),t("pitch"),M(n,r,{name:"layers",handleItemDefaults:a}),r._input=n}function a(n,r){function t(y,c){return w.coerce(n,r,T.layers,y,c)}var f=t("visible");if(f){var o=t("sourcetype"),i=o==="raster"||o==="image";t("source"),t("sourceattribution"),o==="vector"&&t("sourcelayer"),o==="image"&&t("coordinates");var g;i&&(g="raster");var p=t("type",g);i&&p!=="raster"&&(p=r.type="raster",w.log("Source types *raster* and *image* must drawn *raster* layer type.")),t("below"),t("color"),t("opacity"),t("minzoom"),t("maxzoom"),p==="circle"&&t("circle.radius"),p==="line"&&(t("line.width"),t("line.dash")),p==="fill"&&t("fill.outlinecolor"),p==="symbol"&&(t("symbol.icon"),t("symbol.iconsize"),t("symbol.text"),w.coerceFont(t,"symbol.textfont"),t("symbol.textposition"),t("symbol.placement"))}}},{"../../lib":503,"../array_container_defaults":549,"../subplot_defaults":632,"./layout_attributes":615}],617:[function(d,ne,ae){var w=d("mapbox-gl/dist/mapbox-gl-unminified"),v=d("../../lib"),M=d("../../lib/geo_location_utils"),T=d("../../registry"),e=d("../cartesian/axes"),a=d("../../components/dragelement"),n=d("../../components/fx"),r=d("../../components/dragelement/helpers"),t=r.rectMode,f=r.drawMode,o=r.selectMode,i=d("../cartesian/select").prepSelect,g=d("../cartesian/select").clearSelect,p=d("../cartesian/select").clearSelectionsCache,y=d("../cartesian/select").selectOnClick,c=d("./constants"),b=d("./layers");function l(x,u){this.id=u,this.gd=x;var L=x._fullLayout,S=x._context;this.container=L._glcontainer.node(),this.isStatic=S.staticPlot,this.uid=L._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(L),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var _=l.prototype;_.plot=function(x,u,L){var S=this,k=u[S.id];S.map&&k.accesstoken!==S.accessToken&&(S.map.remove(),S.map=null,S.styleObj=null,S.traceHash={},S.layerList=[]);var P;S.map?P=new Promise(function(z,I){S.updateMap(x,u,z,I)}):P=new Promise(function(z,I){S.createMap(x,u,z,I)}),L.push(P)},_.createMap=function(x,u,L,S){var k=this,P=u[k.id],z=k.styleObj=A(P.style);k.accessToken=P.accesstoken;var I=k.map=new w.Map({container:k.div,style:z.style,center:h(P.center),zoom:P.zoom,bearing:P.bearing,pitch:P.pitch,interactive:!k.isStatic,preserveDrawingBuffer:k.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new w.AttributionControl({compact:!0}));I._canvas.style.left="0px",I._canvas.style.top="0px",k.rejectOnError(S),k.isStatic||k.initFx(x,u);var D=[];D.push(new Promise(function(R){I.once("load",R)})),D=D.concat(M.fetchTraceGeoData(x)),Promise.all(D).then(function(){k.fillBelowLookup(x,u),k.updateData(x),k.updateLayout(u),k.resolveOnRender(L)}).catch(S)},_.updateMap=function(x,u,L,S){var k=this,P=k.map,z=u[this.id];k.rejectOnError(S);var I=[],D=A(z.style);JSON.stringify(k.styleObj)!==JSON.stringify(D)&&(k.styleObj=D,P.setStyle(D.style),k.traceHash={},I.push(new Promise(function(R){P.once("styledata",R)}))),I=I.concat(M.fetchTraceGeoData(x)),Promise.all(I).then(function(){k.fillBelowLookup(x,u),k.updateData(x),k.updateLayout(u),k.resolveOnRender(L)}).catch(S)},_.fillBelowLookup=function(x,u){var L=u[this.id],S=L.layers,k,P,z=this.belowLookup={},I=!1;for(k=0;k<x.length;k++){var D=x[k][0].trace,R=D._module;typeof D.below=="string"?P=D.below:R.getBelow&&(P=R.getBelow(D,this)),P===""&&(I=!0),z["trace-"+D.uid]=P||""}for(k=0;k<S.length;k++){var O=S[k];typeof O.below=="string"?P=O.below:I?P="traces":P="",z["layout-"+k]=P}var F={},V,G;for(V in z)P=z[V],F[P]?F[P].push(V):F[P]=[V];for(P in F){var J=F[P];if(J.length>1)for(k=0;k<J.length;k++)V=J[k],V.indexOf("trace-")===0?(G=V.split("trace-")[1],this.traceHash[G]&&(this.traceHash[G].below=null)):V.indexOf("layout-")===0&&(G=V.split("layout-")[1],this.layerList[G]&&(this.layerList[G].below=null))}};var s={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};_.updateData=function(x){var u=this.traceHash,L,S,k,P,z=x.slice().sort(function(F,V){return s[F[0].trace.type]-s[V[0].trace.type]});for(k=0;k<z.length;k++){var I=z[k];S=I[0].trace,L=u[S.uid];var D=!1;L&&(L.type===S.type?(L.update(I),D=!0):L.dispose()),!D&&S._module&&(u[S.uid]=S._module.plot(this,I))}var R=Object.keys(u);e:for(k=0;k<R.length;k++){var O=R[k];for(P=0;P<x.length;P++)if(S=x[P][0].trace,O===S.uid)continue e;L=u[O],L.dispose(),delete u[O]}},_.updateLayout=function(x){var u=this.map,L=x[this.id];!this.dragging&&!this.wheeling&&(u.setCenter(h(L.center)),u.setZoom(L.zoom),u.setBearing(L.bearing),u.setPitch(L.pitch)),this.updateLayers(x),this.updateFramework(x),this.updateFx(x),this.map.resize(),this.gd._context._scrollZoom.mapbox?u.scrollZoom.enable():u.scrollZoom.disable()},_.resolveOnRender=function(x){var u=this.map;u.on("render",function L(){u.loaded()&&(u.off("render",L),setTimeout(x,10))})},_.rejectOnError=function(x){var u=this.map;function L(){x(new Error(c.mapOnErrorMsg))}u.once("error",L),u.once("style.error",L),u.once("source.error",L),u.once("tile.error",L),u.once("layer.error",L)},_.createFramework=function(x){var u=this,L=u.div=document.createElement("div");L.id=u.uid,L.style.position="absolute",u.container.appendChild(L),u.xaxis={_id:"x",c2p:function(S){return u.project(S).x}},u.yaxis={_id:"y",c2p:function(S){return u.project(S).y}},u.updateFramework(x),u.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},e.setConvert(u.mockAxis,x)},_.initFx=function(x,u){var L=this,S=L.gd,k=L.map;k.on("moveend",function(I){if(!!L.map){var D=S._fullLayout;if(I.originalEvent||L.wheeling){var R=D[L.id];T.call("_storeDirectGUIEdit",S.layout,D._preGUI,L.getViewEdits(R));var O=L.getView();R._input.center=R.center=O.center,R._input.zoom=R.zoom=O.zoom,R._input.bearing=R.bearing=O.bearing,R._input.pitch=R.pitch=O.pitch,S.emit("plotly_relayout",L.getViewEditsWithDerived(O))}I.originalEvent&&I.originalEvent.type==="mouseup"?L.dragging=!1:L.wheeling&&(L.wheeling=!1),D._rehover&&D._rehover()}}),k.on("wheel",function(){L.wheeling=!0}),k.on("mousemove",function(I){var D=L.div.getBoundingClientRect(),R=[I.originalEvent.offsetX,I.originalEvent.offsetY];I.target.getBoundingClientRect=function(){return D},L.xaxis.p2c=function(){return k.unproject(R).lng},L.yaxis.p2c=function(){return k.unproject(R).lat},S._fullLayout._rehover=function(){S._fullLayout._hoversubplot===L.id&&S._fullLayout[L.id]&&n.hover(S,I,L.id)},n.hover(S,I,L.id),S._fullLayout._hoversubplot=L.id});function P(){n.loneUnhover(u._hoverlayer)}k.on("dragstart",function(){L.dragging=!0,P()}),k.on("zoomstart",P),k.on("mouseout",function(){S._fullLayout._hoversubplot=null});function z(){var I=L.getView();S.emit("plotly_relayouting",L.getViewEditsWithDerived(I))}k.on("drag",z),k.on("zoom",z),k.on("dblclick",function(){var I=S._fullLayout[L.id];T.call("_storeDirectGUIEdit",S.layout,S._fullLayout._preGUI,L.getViewEdits(I));var D=L.viewInitial;k.setCenter(h(D.center)),k.setZoom(D.zoom),k.setBearing(D.bearing),k.setPitch(D.pitch);var R=L.getView();I._input.center=I.center=R.center,I._input.zoom=I.zoom=R.zoom,I._input.bearing=I.bearing=R.bearing,I._input.pitch=I.pitch=R.pitch,S.emit("plotly_doubleclick",null),S.emit("plotly_relayout",L.getViewEditsWithDerived(R))}),L.clearSelect=function(){p(L.dragOptions),g(L.dragOptions.gd)},L.onClickInPanFn=function(I){return function(D){var R=S._fullLayout.clickmode;R.indexOf("select")>-1&&y(D.originalEvent,S,[L.xaxis],[L.yaxis],L.id,I),R.indexOf("event")>-1&&n.click(S,D.originalEvent)}}},_.updateFx=function(x){var u=this,L=u.map,S=u.gd;if(u.isStatic)return;function k(D){var R=u.map.unproject(D);return[R.lng,R.lat]}var P=x.dragmode,z;t(P)?z=function(D,R){var O=D.range={};O[u.id]=[k([R.xmin,R.ymin]),k([R.xmax,R.ymax])]}:z=function(D,R,O){var F=D.lassoPoints={};F[u.id]=O.filtered.map(k)};var I=u.dragOptions;u.dragOptions=v.extendDeep(I||{},{dragmode:x.dragmode,element:u.div,gd:S,plotinfo:{id:u.id,domain:x[u.id].domain,xaxis:u.xaxis,yaxis:u.yaxis,fillRangeItems:z},xaxes:[u.xaxis],yaxes:[u.yaxis],subplot:u.id}),L.off("click",u.onClickInPanHandler),o(P)||f(P)?(L.dragPan.disable(),L.on("zoomstart",u.clearSelect),u.dragOptions.prepFn=function(D,R,O){i(D,R,O,u.dragOptions,P)},a.init(u.dragOptions)):(L.dragPan.enable(),L.off("zoomstart",u.clearSelect),u.div.onmousedown=null,u.onClickInPanHandler=u.onClickInPanFn(u.dragOptions),L.on("click",u.onClickInPanHandler))},_.updateFramework=function(x){var u=x[this.id].domain,L=x._size,S=this.div.style;S.width=L.w*(u.x[1]-u.x[0])+"px",S.height=L.h*(u.y[1]-u.y[0])+"px",S.left=L.l+u.x[0]*L.w+"px",S.top=L.t+(1-u.y[1])*L.h+"px",this.xaxis._offset=L.l+u.x[0]*L.w,this.xaxis._length=L.w*(u.x[1]-u.x[0]),this.yaxis._offset=L.t+(1-u.y[1])*L.h,this.yaxis._length=L.h*(u.y[1]-u.y[0])},_.updateLayers=function(x){var u=x[this.id],L=u.layers,S=this.layerList,k;if(L.length!==S.length){for(k=0;k<S.length;k++)S[k].dispose();for(S=this.layerList=[],k=0;k<L.length;k++)S.push(b(this,k,L[k]))}else for(k=0;k<L.length;k++)S[k].update(L[k])},_.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},_.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},_.setOptions=function(x,u,L){for(var S in L)this.map[u](x,S,L[S])},_.getMapLayers=function(){return this.map.getStyle().layers},_.addLayer=function(x,u){var L=this.map;if(typeof u=="string"){if(u===""){L.addLayer(x,u);return}for(var S=this.getMapLayers(),k=0;k<S.length;k++)if(u===S[k].id){L.addLayer(x,u);return}v.warn(["Trying to add layer with *below* value",u,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}L.addLayer(x)},_.project=function(x){return this.map.project(new w.LngLat(x[0],x[1]))},_.getView=function(){var x=this.map,u=x.getCenter(),L=u.lng,S=u.lat,k={lon:L,lat:S},P=x.getCanvas(),z=parseInt(P.style.width),I=parseInt(P.style.height);return{center:k,zoom:x.getZoom(),bearing:x.getBearing(),pitch:x.getPitch(),_derived:{coordinates:[x.unproject([0,0]).toArray(),x.unproject([z,0]).toArray(),x.unproject([z,I]).toArray(),x.unproject([0,I]).toArray()]}}},_.getViewEdits=function(x){for(var u=this.id,L=["center","zoom","bearing","pitch"],S={},k=0;k<L.length;k++){var P=L[k];S[u+"."+P]=x[P]}return S},_.getViewEditsWithDerived=function(x){var u=this.id,L=this.getViewEdits(x);return L[u+"._derived"]=x._derived,L};function A(x){var u={};return v.isPlainObject(x)?(u.id=x.id,u.style=x):typeof x=="string"?(u.id=x,c.styleValuesMapbox.indexOf(x)!==-1?u.style=m(x):c.stylesNonMapbox[x]?u.style=c.stylesNonMapbox[x]:u.style=x):(u.id=c.styleValueDflt,u.style=m(c.styleValueDflt)),u.transition={duration:0,delay:0},u}function m(x){return c.styleUrlPrefix+x+"-"+c.styleUrlSuffix}function h(x){return[x.lon,x.lat]}ne.exports=l},{"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/fx":406,"../../lib":503,"../../lib/geo_location_utils":496,"../../registry":638,"../cartesian/axes":554,"../cartesian/select":575,"./constants":611,"./layers":614,"mapbox-gl/dist/mapbox-gl-unminified":239}],618:[function(d,ne,ae){ne.exports=function(w){var v=w.editType;return{t:{valType:"number",dflt:0,editType:v},r:{valType:"number",dflt:0,editType:v},b:{valType:"number",dflt:0,editType:v},l:{valType:"number",dflt:0,editType:v},editType:v}}},{}],619:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("d3-time-format").timeFormatLocale,M=d("d3-format").formatLocale,T=d("fast-isnumeric"),e=d("../registry"),a=d("../plot_api/plot_schema"),n=d("../plot_api/plot_template"),r=d("../lib"),t=d("../components/color"),f=d("../constants/numerical").BADNUM,o=d("./cartesian/axis_ids"),i=d("./cartesian/handle_outline").clearSelect,g=d("./animation_attributes"),p=d("./frame_attributes"),y=d("../plots/get_data").getModuleCalcData,c=r.relinkPrivateKeys,b=r._,l=ne.exports={};r.extendFlat(l,e),l.attributes=d("./attributes"),l.attributes.type.values=l.allTypes,l.fontAttrs=d("./font_attributes"),l.layoutAttributes=d("./layout_attributes"),l.fontWeight="normal";var _=l.transformsRegistry,s=d("./command");l.executeAPICommand=s.executeAPICommand,l.computeAPICommandBindings=s.computeAPICommandBindings,l.manageCommandObserver=s.manageCommandObserver,l.hasSimpleAPICommandBindings=s.hasSimpleAPICommandBindings,l.redrawText=function(N){return N=r.getGraphDiv(N),new Promise(function(U){setTimeout(function(){!N._fullLayout||(e.getComponentMethod("annotations","draw")(N),e.getComponentMethod("legend","draw")(N),e.getComponentMethod("colorbar","draw")(N),U(l.previousPromises(N)))},300)})},l.resize=function(N){N=r.getGraphDiv(N);var U,q=new Promise(function(Q,W){(!N||r.isHidden(N))&&W(new Error("Resize must be passed a displayed plot div element.")),N._redrawTimer&&clearTimeout(N._redrawTimer),N._resolveResize&&(U=N._resolveResize),N._resolveResize=Q,N._redrawTimer=setTimeout(function(){if(!N.layout||N.layout.width&&N.layout.height||r.isHidden(N)){Q(N);return}delete N.layout.width,delete N.layout.height;var X=N.changed;N.autoplay=!0,e.call("relayout",N,{autosize:!0}).then(function(){N.changed=X,N._resolveResize===Q&&(delete N._resolveResize,Q(N))})},100)});return U&&U(q),q},l.previousPromises=function(N){if((N._promises||[]).length)return Promise.all(N._promises).then(function(){N._promises=[]})},l.addLinks=function(N){if(!(!N._context.showLink&&!N._context.showSources)){var U=N._fullLayout,q=r.ensureSingle(U._paper,"text","js-plot-link-container",function(ie){ie.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:t.defaultLine,"pointer-events":"all"}).each(function(){var le=w.select(this);le.append("tspan").classed("js-link-to-tool",!0),le.append("tspan").classed("js-link-spacer",!0),le.append("tspan").classed("js-sourcelinks",!0)})}),Q=q.node(),W={y:U._paper.attr("height")-9};document.body.contains(Q)&&Q.getComputedTextLength()>=U.width-20?(W["text-anchor"]="start",W.x=5):(W["text-anchor"]="end",W.x=U._paper.attr("width")-7),q.attr(W);var X=q.select(".js-link-to-tool"),ee=q.select(".js-link-spacer"),te=q.select(".js-sourcelinks");N._context.showSources&&N._context.showSources(N),N._context.showLink&&A(N,X),ee.text(X.text()&&te.text()?" - ":"")}};function A(N,U){U.text("");var q=U.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(N._context.linkText+" "+String.fromCharCode(187));if(N._context.sendData)q.on("click",function(){l.sendDataToCloud(N)});else{var Q=window.location.pathname.split("/"),W=window.location.search;q.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+Q[2].split(".")[0]+"/"+Q[1]+W})}}l.sendDataToCloud=function(N){var U=(window.PLOTLYENV||{}).BASE_URL||N._context.plotlyServerURL;if(!!U){N.emit("plotly_beforeexport");var q=w.select(N).append("div").attr("id","hiddenform").style("display","none"),Q=q.append("form").attr({action:U+"/external",method:"post",target:"_blank"}),W=Q.append("input").attr({type:"text",name:"data"});return W.node().value=l.graphJson(N,!1,"keepdata"),Q.node().submit(),q.remove(),N.emit("plotly_afterexport"),!1}};var m=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],h=["year","month","dayMonth","dayMonthYear"];l.supplyDefaults=function(N,U){var q=U&&U.skipUpdateCalc,Q=N._fullLayout||{};if(Q._skipDefaults){delete Q._skipDefaults;return}var W=N._fullLayout={},X=N.layout||{},ee=N._fullData||[],te=N._fullData=[],ie=N.data||[],le=N.calcdata||[],ge=N._context||{},fe;N._transitionData||l.createTransitionData(N),W._dfltTitle={plot:b(N,"Click to enter Plot title"),x:b(N,"Click to enter X axis title"),y:b(N,"Click to enter Y axis title"),colorbar:b(N,"Click to enter Colorscale title"),annotation:b(N,"new text")},W._traceWord=b(N,"trace");var pe=L(N,m);if(W._mapboxAccessToken=ge.mapboxAccessToken,Q._initialAutoSizeIsDone){var ye=Q.width,Te=Q.height;l.supplyLayoutGlobalDefaults(X,W,pe),X.width||(W.width=ye),X.height||(W.height=Te),l.sanitizeMargins(W)}else{l.supplyLayoutGlobalDefaults(X,W,pe);var _e=!X.width||!X.height,De=W.autosize,Be=ge.autosizable,Ue=_e&&(De||Be);Ue?l.plotAutoSize(N,X,W):_e&&l.sanitizeMargins(W),!De&&_e&&(X.width=W.width,X.height=W.height)}W._d3locale=S(pe,W.separators),W._extraFormat=L(N,h),W._initialAutoSizeIsDone=!0,W._dataLength=ie.length,W._modules=[],W._visibleModules=[],W._basePlotModules=[];var xe=W._subplots=u(),Pe=W._splomAxes={x:{},y:{}},Ve=W._splomSubplots={};W._splomGridDflt={},W._scatterStackOpts={},W._firstScatter={},W._alignmentOpts={},W._colorAxes={},W._requestRangeslider={},W._traceUids=x(ee,ie),W._globalTransforms=(N._context||{}).globalTransforms,l.supplyDataDefaults(ie,te,X,W);var Qe=Object.keys(Pe.x),Fe=Object.keys(Pe.y);if(Qe.length>1&&Fe.length>1){for(e.getComponentMethod("grid","sizeDefaults")(X,W),fe=0;fe<Qe.length;fe++)r.pushUnique(xe.xaxis,Qe[fe]);for(fe=0;fe<Fe.length;fe++)r.pushUnique(xe.yaxis,Fe[fe]);for(var Le in Ve)r.pushUnique(xe.cartesian,Le)}if(W._has=l._hasPlotType.bind(W),ee.length===te.length)for(fe=0;fe<te.length;fe++)c(te[fe],ee[fe]);l.supplyLayoutModuleDefaults(X,W,te,N._transitionData);var Ne=W._visibleModules,dt=[];for(fe=0;fe<Ne.length;fe++){var Dt=Ne[fe].crossTraceDefaults;Dt&&r.pushUnique(dt,Dt)}for(fe=0;fe<dt.length;fe++)dt[fe](te,W);W._hasOnlyLargeSploms=W._basePlotModules.length===1&&W._basePlotModules[0].name==="splom"&&Qe.length>15&&Fe.length>15&&W.shapes.length===0&&W.images.length===0,l.linkSubplots(te,W,ee,Q),l.cleanPlot(te,W,ee,Q);var Xt=!!(Q._has&&Q._has("gl2d")),At=!!(W._has&&W._has("gl2d")),zt=!!(Q._has&&Q._has("cartesian")),Ut=!!(W._has&&W._has("cartesian")),Ct=zt||Xt,Mt=Ut||At;Ct&&!Mt?Q._bgLayer.remove():Mt&&!Ct&&(W._shouldCreateBgLayer=!0),Q._zoomlayer&&!N._dragging&&i({_fullLayout:Q}),k(te,W),c(W,Q),e.getComponentMethod("colorscale","crossTraceDefaults")(te,W),W._preGUI||(W._preGUI={}),W._tracePreGUI||(W._tracePreGUI={});var rt=W._tracePreGUI,ct={},Ze;for(Ze in rt)ct[Ze]="old";for(fe=0;fe<te.length;fe++)Ze=te[fe]._fullInput.uid,ct[Ze]||(rt[Ze]={}),ct[Ze]="new";for(Ze in ct)ct[Ze]==="old"&&delete rt[Ze];R(W),e.getComponentMethod("rangeslider","makeData")(W),!q&&le.length===te.length&&l.supplyDefaultsUpdateCalc(le,te)},l.supplyDefaultsUpdateCalc=function(N,U){for(var q=0;q<U.length;q++){var Q=U[q],W=(N[q]||[])[0];if(W&&W.trace){var X=W.trace;if(X._hasCalcTransform){var ee=X._arrayAttrs,te,ie,le;for(te=0;te<ee.length;te++)ie=ee[te],le=r.nestedProperty(X,ie).get().slice(),r.nestedProperty(Q,ie).set(le)}W.trace=Q}}};function x(N,U){var q=U.length,Q=[],W,X;for(W=0;W<N.length;W++){var ee=N[W]._fullInput;ee!==X&&Q.push(ee),X=ee}var te=Q.length,ie=new Array(q),le={};function ge(ye,Te){ie[Te]=ye,le[ye]=1}function fe(ye,Te){if(ye&&typeof ye=="string"&&!le[ye])return ge(ye,Te),!0}for(W=0;W<q;W++){var pe=U[W].uid;typeof pe=="number"&&(pe=String(pe)),!fe(pe,W)&&(W<te&&fe(Q[W].uid,W)||ge(r.randstr(le),W))}return ie}function u(){var N=e.collectableSubplotTypes,U={},q,Q;if(!N){N=[];var W=e.subplotsRegistry;for(var X in W){var ee=W[X],te=ee.attr;if(te&&(N.push(X),Array.isArray(te)))for(Q=0;Q<te.length;Q++)r.pushUnique(N,te[Q])}}for(q=0;q<N.length;q++)U[N[q]]=[];return U}function L(N,U){var q=N._context.locale;q||(q="en-US");var Q=!1,W={};function X(fe){for(var pe=!0,ye=0;ye<U.length;ye++){var Te=U[ye];W[Te]||(fe[Te]?W[Te]=fe[Te]:pe=!1)}pe&&(Q=!0)}for(var ee=0;ee<2;ee++){for(var te=N._context.locales,ie=0;ie<2;ie++){var le=(te[q]||{}).format;if(le&&(X(le),Q))break;te=e.localeRegistry}var ge=q.split("-")[0];if(Q||ge===q)break;q=ge}return Q||X(e.localeRegistry.en.format),W}function S(N,U){return N.decimal=U.charAt(0),N.thousands=U.charAt(1),{numberFormat:function(q){try{q=M(N).format(r.adjustFormat(q))}catch{return r.warnBadFormat(q),r.noFormat}return q},timeFormat:v(N).utcFormat}}function k(N,U){var q,Q=[];U.meta&&(q=U._meta={meta:U.meta,layout:{meta:U.meta}});for(var W=0;W<N.length;W++){var X=N[W];X.meta?Q[X.index]=X._meta={meta:X.meta}:U.meta&&(X._meta={meta:U.meta}),U.meta&&(X._meta.layout={meta:U.meta})}Q.length&&(q||(q=U._meta={}),q.data=Q)}l.createTransitionData=function(N){N._transitionData||(N._transitionData={}),N._transitionData._frames||(N._transitionData._frames=[]),N._transitionData._frameHash||(N._transitionData._frameHash={}),N._transitionData._counter||(N._transitionData._counter=0),N._transitionData._interruptCallbacks||(N._transitionData._interruptCallbacks=[])},l._hasPlotType=function(N){var U,q=this._basePlotModules||[];for(U=0;U<q.length;U++)if(q[U].name===N)return!0;var Q=this._modules||[];for(U=0;U<Q.length;U++){var W=Q[U].name;if(W===N)return!0;var X=e.modules[W];if(X&&X.categories[N])return!0}return!1},l.cleanPlot=function(N,U,q,Q){var W,X,ee=Q._basePlotModules||[];for(W=0;W<ee.length;W++){var te=ee[W];te.clean&&te.clean(N,U,q,Q)}var ie=Q._has&&Q._has("gl"),le=U._has&&U._has("gl");ie&&!le&&Q._glcontainer!==void 0&&(Q._glcontainer.selectAll(".gl-canvas").remove(),Q._glcontainer.selectAll(".no-webgl").remove(),Q._glcanvas=null);var ge=!!Q._infolayer;e:for(W=0;W<q.length;W++){var fe=q[W],pe=fe.uid;for(X=0;X<N.length;X++){var ye=N[X];if(pe===ye.uid)continue e}ge&&Q._infolayer.select(".cb"+pe).remove()}},l.linkSubplots=function(N,U,q,Q){var W,X,ee=Q._plots||{},te=U._plots={},ie=U._subplots,le={_fullData:N,_fullLayout:U},ge=ie.cartesian.concat(ie.gl2d||[]);for(W=0;W<ge.length;W++){var fe=ge[W],pe=ee[fe],ye=o.getFromId(le,fe,"x"),Te=o.getFromId(le,fe,"y"),_e;for(pe?_e=te[fe]=pe:(_e=te[fe]={},_e.id=fe),ye._counterAxes.push(Te._id),Te._counterAxes.push(ye._id),ye._subplotsWith.push(fe),Te._subplotsWith.push(fe),_e.xaxis=ye,_e.yaxis=Te,_e._hasClipOnAxisFalse=!1,X=0;X<N.length;X++){var De=N[X];if(De.xaxis===_e.xaxis._id&&De.yaxis===_e.yaxis._id&&De.cliponaxis===!1){_e._hasClipOnAxisFalse=!0;break}}}var Be=o.list(le,null,!0),Ue;for(W=0;W<Be.length;W++){Ue=Be[W];var xe=null;Ue.overlaying&&(xe=o.getFromId(le,Ue.overlaying),xe&&xe.overlaying&&(Ue.overlaying=!1,xe=null)),Ue._mainAxis=xe||Ue,xe&&(Ue.domain=xe.domain.slice()),Ue._anchorAxis=Ue.anchor==="free"?null:o.getFromId(le,Ue.anchor)}for(W=0;W<Be.length;W++)if(Ue=Be[W],Ue._counterAxes.sort(o.idSort),Ue._subplotsWith.sort(r.subplotSort),Ue._mainSubplot=P(Ue,U),Ue._counterAxes.length&&(Ue.spikemode&&Ue.spikemode.indexOf("across")!==-1||Ue.automargin&&Ue.mirror&&Ue.anchor!=="free"||e.getComponentMethod("rangeslider","isVisible")(Ue))){var Pe=1,Ve=0;for(X=0;X<Ue._counterAxes.length;X++){var Qe=o.getFromId(le,Ue._counterAxes[X]);Pe=Math.min(Pe,Qe.domain[0]),Ve=Math.max(Ve,Qe.domain[1])}Pe<Ve&&(Ue._counterDomainMin=Pe,Ue._counterDomainMax=Ve)}};function P(N,U){var q={_fullLayout:U},Q=N._id.charAt(0)==="x",W=N._mainAxis._anchorAxis,X="",ee="",te="";if(W&&(te=W._mainAxis._id,X=Q?N._id+te:te+N._id),!X||!U._plots[X]){X="";for(var ie=N._counterAxes,le=0;le<ie.length;le++){var ge=ie[le],fe=Q?N._id+ge:ge+N._id;ee||(ee=fe);var pe=o.getFromId(q,ge);if(te&&pe.overlaying===te){X=fe;break}}}return X||ee}l.clearExpandedTraceDefaultColors=function(N){var U,q,Q;function W(ee,te,ie,le){q[le]=te,q.length=le+1,ee.valType==="color"&&ee.dflt===void 0&&U.push(q.join("."))}for(q=[],U=N._module._colorAttrs,U||(N._module._colorAttrs=U=[],a.crawl(N._module.attributes,W)),Q=0;Q<U.length;Q++){var X=r.nestedProperty(N,"_input."+U[Q]);X.get()||r.nestedProperty(N,U[Q]).set(null)}},l.supplyDataDefaults=function(N,U,q,Q){var W=Q._modules,X=Q._visibleModules,ee=Q._basePlotModules,te=0,ie=0,le,ge,fe;Q._transformModules=[];function pe(Fe){U.push(Fe);var Le=Fe._module;!Le||(r.pushUnique(W,Le),Fe.visible===!0&&r.pushUnique(X,Le),r.pushUnique(ee,Fe._module.basePlotModule),te++,Fe._input.visible!==!1&&ie++)}var ye={},Te=[],_e=(q.template||{}).data||{},De=n.traceTemplater(_e);for(le=0;le<N.length;le++){if(fe=N[le],ge=De.newTrace(fe),ge.uid=Q._traceUids[le],l.supplyTraceDefaults(fe,ge,ie,Q,le),ge.index=le,ge._input=fe,ge._expandedIndex=te,ge.transforms&&ge.transforms.length)for(var Be=fe.visible!==!1&&ge.visible===!1,Ue=I(ge,U,q,Q),xe=0;xe<Ue.length;xe++){var Pe=Ue[xe],Ve={_template:ge._template,type:ge.type,uid:ge.uid+xe};Be&&Pe.visible===!1&&delete Pe.visible,l.supplyTraceDefaults(Pe,Ve,te,Q,le),c(Ve,Pe),Ve.index=le,Ve._input=fe,Ve._fullInput=ge,Ve._expandedIndex=te,Ve._expandedInput=Pe,pe(Ve)}else ge._fullInput=ge,ge._expandedInput=ge,pe(ge);e.traceIs(ge,"carpetAxis")&&(ye[ge.carpet]=ge),e.traceIs(ge,"carpetDependent")&&Te.push(le)}for(le=0;le<Te.length;le++)if(ge=U[Te[le]],!!ge.visible){var Qe=ye[ge.carpet];if(ge._carpet=Qe,!Qe||!Qe.visible){ge.visible=!1;continue}ge.xaxis=Qe.xaxis,ge.yaxis=Qe.yaxis}},l.supplyAnimationDefaults=function(N){N=N||{};var U,q={};function Q(W,X){return r.coerce(N||{},q,g,W,X)}if(Q("mode"),Q("direction"),Q("fromcurrent"),Array.isArray(N.frame))for(q.frame=[],U=0;U<N.frame.length;U++)q.frame[U]=l.supplyAnimationFrameDefaults(N.frame[U]||{});else q.frame=l.supplyAnimationFrameDefaults(N.frame||{});if(Array.isArray(N.transition))for(q.transition=[],U=0;U<N.transition.length;U++)q.transition[U]=l.supplyAnimationTransitionDefaults(N.transition[U]||{});else q.transition=l.supplyAnimationTransitionDefaults(N.transition||{});return q},l.supplyAnimationFrameDefaults=function(N){var U={};function q(Q,W){return r.coerce(N||{},U,g.frame,Q,W)}return q("duration"),q("redraw"),U},l.supplyAnimationTransitionDefaults=function(N){var U={};function q(Q,W){return r.coerce(N||{},U,g.transition,Q,W)}return q("duration"),q("easing"),U},l.supplyFrameDefaults=function(N){var U={};function q(Q,W){return r.coerce(N,U,p,Q,W)}return q("group"),q("name"),q("traces"),q("baseframe"),q("data"),q("layout"),U},l.supplyTraceDefaults=function(N,U,q,Q,W){var X=Q.colorway||t.defaults,ee=X[q%X.length],te;function ie(Ue,xe){return r.coerce(N,U,l.attributes,Ue,xe)}var le=ie("visible");ie("type"),ie("name",Q._traceWord+" "+W),ie("uirevision",Q.uirevision);var ge=l.getModule(U);if(U._module=ge,ge){var fe=ge.basePlotModule,pe=fe.attr,ye=fe.attributes;if(pe&&ye){var Te=Q._subplots,_e="";if(le||fe.name!=="gl2d"){if(Array.isArray(pe))for(te=0;te<pe.length;te++){var De=pe[te],Be=r.coerce(N,U,ye,De);Te[De]&&r.pushUnique(Te[De],Be),_e+=Be}else _e=r.coerce(N,U,ye,pe);Te[fe.name]&&r.pushUnique(Te[fe.name],_e)}}}return le&&(ie("customdata"),ie("ids"),ie("meta"),e.traceIs(U,"showLegend")?(r.coerce(N,U,ge.attributes.showlegend?ge.attributes:l.attributes,"showlegend"),ie("legendgroup"),ie("legendgrouptitle.text"),ie("legendrank"),U._dfltShowLegend=!0):U._dfltShowLegend=!1,ge&&ge.supplyDefaults(N,U,ee,Q),e.traceIs(U,"noOpacity")||ie("opacity"),e.traceIs(U,"notLegendIsolatable")&&(U.visible=!!U.visible),e.traceIs(U,"noHover")||(U.hovertemplate||r.coerceHoverinfo(N,U,Q),U.type!=="parcats"&&e.getComponentMethod("fx","supplyDefaults")(N,U,ee,Q)),ge&&ge.selectPoints&&ie("selectedpoints"),l.supplyTransformDefaults(N,U,Q)),U};function z(N){var U=N.transforms;if(Array.isArray(U)&&U.length)for(var q=0;q<U.length;q++){var Q=U[q],W=Q._module||_[Q.type];if(W&&W.makesData)return!0}return!1}l.hasMakesDataTransform=z,l.supplyTransformDefaults=function(N,U,q){if(!!(U._length||z(N))){var Q=q._globalTransforms||[],W=q._transformModules||[];if(!(!Array.isArray(N.transforms)&&Q.length===0))for(var X=N.transforms||[],ee=Q.concat(X),te=U.transforms=[],ie=0;ie<ee.length;ie++){var le=ee[ie],ge=le.type,fe=_[ge],pe,ye=!(le._module&&le._module===fe),Te=fe&&typeof fe.transform=="function";fe||r.warn("Unrecognized transform type "+ge+"."),fe&&fe.supplyDefaults&&(ye||Te)?(pe=fe.supplyDefaults(le,U,q,N),pe.type=ge,pe._module=fe,r.pushUnique(W,fe)):pe=r.extendFlat({},le),te.push(pe)}}};function I(N,U,q,Q){for(var W=N.transforms,X=[N],ee=0;ee<W.length;ee++){var te=W[ee],ie=_[te.type];ie&&ie.transform&&(X=ie.transform(X,{transform:te,fullTrace:N,fullData:U,layout:q,fullLayout:Q,transformIndex:ee}))}return X}l.supplyLayoutGlobalDefaults=function(N,U,q){function Q(le,ge){return r.coerce(N,U,l.layoutAttributes,le,ge)}var W=N.template;r.isPlainObject(W)&&(U.template=W,U._template=W.layout,U._dataTemplate=W.data),Q("autotypenumbers");var X=r.coerceFont(Q,"font"),ee=X.size;r.coerceFont(Q,"title.font",r.extendFlat({},X,{size:Math.round(ee*1.4)})),Q("title.text",U._dfltTitle.plot),Q("title.xref"),Q("title.yref"),Q("title.x"),Q("title.y"),Q("title.xanchor"),Q("title.yanchor"),Q("title.pad.t"),Q("title.pad.r"),Q("title.pad.b"),Q("title.pad.l");var te=Q("uniformtext.mode");te&&Q("uniformtext.minsize"),Q("autosize",!(N.width&&N.height)),Q("width"),Q("height"),Q("margin.l"),Q("margin.r"),Q("margin.t"),Q("margin.b"),Q("margin.pad"),Q("margin.autoexpand"),N.width&&N.height&&l.sanitizeMargins(U),e.getComponentMethod("grid","sizeDefaults")(N,U),Q("paper_bgcolor"),Q("separators",q.decimal+q.thousands),Q("hidesources"),Q("colorway"),Q("datarevision");var ie=Q("uirevision");Q("editrevision",ie),Q("selectionrevision",ie),e.getComponentMethod("modebar","supplyLayoutDefaults")(N,U),e.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(N,U,Q),Q("meta"),r.isPlainObject(N.transition)&&(Q("transition.duration"),Q("transition.easing"),Q("transition.ordering")),e.getComponentMethod("calendars","handleDefaults")(N,U,"calendar"),e.getComponentMethod("fx","supplyLayoutGlobalDefaults")(N,U,Q)};function D(N){return typeof N=="string"&&N.substr(N.length-2)==="px"&&parseFloat(N)}l.plotAutoSize=function(U,q,Q){var W=U._context||{},X=W.frameMargins,ee,te,ie=r.isPlotDiv(U);if(ie&&U.emit("plotly_autosize"),W.fillFrame)ee=window.innerWidth,te=window.innerHeight,document.body.style.overflow="hidden";else{var le=ie?window.getComputedStyle(U):{};if(ee=D(le.width)||D(le.maxWidth)||Q.width,te=D(le.height)||D(le.maxHeight)||Q.height,T(X)&&X>0){var ge=1-2*X;ee=Math.round(ge*ee),te=Math.round(ge*te)}}var fe=l.layoutAttributes.width.min,pe=l.layoutAttributes.height.min;ee<fe&&(ee=fe),te<pe&&(te=pe);var ye=!q.width&&Math.abs(Q.width-ee)>1,Te=!q.height&&Math.abs(Q.height-te)>1;(Te||ye)&&(ye&&(Q.width=ee),Te&&(Q.height=te)),U._initialAutoSize||(U._initialAutoSize={width:ee,height:te}),l.sanitizeMargins(Q)},l.supplyLayoutModuleDefaults=function(N,U,q,Q){var W=e.componentsRegistry,X=U._basePlotModules,ee,te,ie,le=e.subplotsRegistry.cartesian;for(ee in W)ie=W[ee],ie.includeBasePlot&&ie.includeBasePlot(N,U);X.length||X.push(le),U._has("cartesian")&&(e.getComponentMethod("grid","contentDefaults")(N,U),le.finalizeSubplots(N,U));for(var ge in U._subplots)U._subplots[ge].sort(r.subplotSort);for(te=0;te<X.length;te++)ie=X[te],ie.supplyLayoutDefaults&&ie.supplyLayoutDefaults(N,U,q);var fe=U._modules;for(te=0;te<fe.length;te++)ie=fe[te],ie.supplyLayoutDefaults&&ie.supplyLayoutDefaults(N,U,q);var pe=U._transformModules;for(te=0;te<pe.length;te++)ie=pe[te],ie.supplyLayoutDefaults&&ie.supplyLayoutDefaults(N,U,q,Q);for(ee in W)ie=W[ee],ie.supplyLayoutDefaults&&ie.supplyLayoutDefaults(N,U,q)},l.purge=function(N){var U=N._fullLayout||{};U._glcontainer!==void 0&&(U._glcontainer.selectAll(".gl-canvas").remove(),U._glcontainer.remove(),U._glcanvas=null),U._modeBar&&U._modeBar.destroy(),N._transitionData&&(N._transitionData._interruptCallbacks&&(N._transitionData._interruptCallbacks.length=0),N._transitionData._animationRaf&&window.cancelAnimationFrame(N._transitionData._animationRaf)),r.clearThrottle(),r.clearResponsive(N),delete N.data,delete N.layout,delete N._fullData,delete N._fullLayout,delete N.calcdata,delete N.empty,delete N.fid,delete N.undoqueue,delete N.undonum,delete N.autoplay,delete N.changed,delete N._promises,delete N._redrawTimer,delete N._hmlumcount,delete N._hmpixcount,delete N._transitionData,delete N._transitioning,delete N._initialAutoSize,delete N._transitioningWithDuration,delete N._dragging,delete N._dragged,delete N._dragdata,delete N._hoverdata,delete N._snapshotInProgress,delete N._editing,delete N._mouseDownTime,delete N._legendMouseDownTime,N.removeAllListeners&&N.removeAllListeners()},l.style=function(N){var U=N._fullLayout._visibleModules,q=[],Q;for(Q=0;Q<U.length;Q++){var W=U[Q];W.style&&r.pushUnique(q,W.style)}for(Q=0;Q<q.length;Q++)q[Q](N)},l.sanitizeMargins=function(N){if(!(!N||!N.margin)){var U=N.width,q=N.height,Q=N.margin,W=U-(Q.l+Q.r),X=q-(Q.t+Q.b),ee;W<0&&(ee=(U-1)/(Q.l+Q.r),Q.l=Math.floor(ee*Q.l),Q.r=Math.floor(ee*Q.r)),X<0&&(ee=(q-1)/(Q.t+Q.b),Q.t=Math.floor(ee*Q.t),Q.b=Math.floor(ee*Q.b))}},l.clearAutoMarginIds=function(N){N._fullLayout._pushmarginIds={}},l.allowAutoMargin=function(N,U){N._fullLayout._pushmarginIds[U]=1};function R(N){var U=N.margin;if(!N._size){var q=N._size={l:Math.round(U.l),r:Math.round(U.r),t:Math.round(U.t),b:Math.round(U.b),p:Math.round(U.pad)};q.w=Math.round(N.width)-q.l-q.r,q.h=Math.round(N.height)-q.t-q.b}N._pushmargin||(N._pushmargin={}),N._pushmarginIds||(N._pushmarginIds={})}var O=2,F=2,V=64,G=64;l.autoMargin=function(N,U,q){var Q=N._fullLayout,W=Q.width,X=Q.height,ee=Q.margin,te=r.constrain(W-ee.l-ee.r,O,V),ie=r.constrain(X-ee.t-ee.b,F,G),le=Math.max(0,W-te),ge=Math.max(0,X-ie),fe=Q._pushmargin,pe=Q._pushmarginIds;if(ee.autoexpand!==!1){if(!q)delete fe[U],delete pe[U];else{var ye=q.pad;if(ye===void 0&&(ye=Math.min(12,ee.l,ee.r,ee.t,ee.b)),le){var Te=(q.l+q.r)/le;Te>1&&(q.l/=Te,q.r/=Te)}if(ge){var _e=(q.t+q.b)/ge;_e>1&&(q.t/=_e,q.b/=_e)}var De=q.xl!==void 0?q.xl:q.x,Be=q.xr!==void 0?q.xr:q.x,Ue=q.yt!==void 0?q.yt:q.y,xe=q.yb!==void 0?q.yb:q.y;fe[U]={l:{val:De,size:q.l+ye},r:{val:Be,size:q.r+ye},b:{val:xe,size:q.b+ye},t:{val:Ue,size:q.t+ye}},pe[U]=1}if(!Q._replotting)return l.doAutoMargin(N)}},l.doAutoMargin=function(N){var U=N._fullLayout,q=U.width,Q=U.height;U._size||(U._size={}),R(U);var W=U._size,X=U.margin,ee=r.extendFlat({},W),te=X.l,ie=X.r,le=X.t,ge=X.b,fe=U._pushmargin,pe=U._pushmarginIds;if(U.margin.autoexpand!==!1){for(var ye in fe)pe[ye]||delete fe[ye];fe.base={l:{val:0,size:te},r:{val:1,size:ie},t:{val:1,size:le},b:{val:0,size:ge}};for(var Te in fe){var _e=fe[Te].l||{},De=fe[Te].b||{},Be=_e.val,Ue=_e.size,xe=De.val,Pe=De.size;for(var Ve in fe){if(T(Ue)&&fe[Ve].r){var Qe=fe[Ve].r.val,Fe=fe[Ve].r.size;if(Qe>Be){var Le=(Ue*Qe+(Fe-q)*Be)/(Qe-Be),Ne=(Fe*(1-Be)+(Ue-q)*(1-Qe))/(Qe-Be);Le+Ne>te+ie&&(te=Le,ie=Ne)}}if(T(Pe)&&fe[Ve].t){var dt=fe[Ve].t.val,Dt=fe[Ve].t.size;if(dt>xe){var Xt=(Pe*dt+(Dt-Q)*xe)/(dt-xe),At=(Dt*(1-xe)+(Pe-Q)*(1-dt))/(dt-xe);Xt+At>ge+le&&(ge=Xt,le=At)}}}}}var zt=r.constrain(q-X.l-X.r,O,V),Ut=r.constrain(Q-X.t-X.b,F,G),Ct=Math.max(0,q-zt),Mt=Math.max(0,Q-Ut);if(Ct){var rt=(te+ie)/Ct;rt>1&&(te/=rt,ie/=rt)}if(Mt){var ct=(ge+le)/Mt;ct>1&&(ge/=ct,le/=ct)}if(W.l=Math.round(te),W.r=Math.round(ie),W.t=Math.round(le),W.b=Math.round(ge),W.p=Math.round(X.pad),W.w=Math.round(q)-W.l-W.r,W.h=Math.round(Q)-W.t-W.b,!U._replotting&&l.didMarginChange(ee,W)){"_redrawFromAutoMarginCount"in U?U._redrawFromAutoMarginCount++:U._redrawFromAutoMarginCount=1;var Ze=3*(1+Object.keys(pe).length);if(U._redrawFromAutoMarginCount<Ze)return e.call("_doPlot",N);U._size=ee,r.warn("Too many auto-margin redraws.")}J(N)};function J(N){var U=o.list(N,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(q){for(var Q=0;Q<U.length;Q++){var W=U[Q][q];W&&W()}})}var Z=["l","r","t","b","p","w","h"];l.didMarginChange=function(N,U){for(var q=0;q<Z.length;q++){var Q=Z[q],W=N[Q],X=U[Q];if(!T(W)||Math.abs(X-W)>1)return!0}return!1},l.graphJson=function(N,U,q,Q,W,X){(W&&U&&!N._fullData||W&&!U&&!N._fullLayout)&&l.supplyDefaults(N);var ee=W?N._fullData:N.data,te=W?N._fullLayout:N.layout,ie=(N._transitionData||{})._frames;function le(pe,ye){if(typeof pe=="function")return ye?"_function_":null;if(r.isPlainObject(pe)){var Te={},_e;return Object.keys(pe).sort().forEach(function(De){if(["_","["].indexOf(De.charAt(0))===-1){if(typeof pe[De]=="function"){ye&&(Te[De]="_function");return}if(q==="keepdata"){if(De.substr(De.length-3)==="src")return}else if(q==="keepstream"){if(_e=pe[De+"src"],typeof _e=="string"&&_e.indexOf(":")>0&&!r.isPlainObject(pe.stream))return}else if(q!=="keepall"&&(_e=pe[De+"src"],typeof _e=="string"&&_e.indexOf(":")>0))return;Te[De]=le(pe[De],ye)}}),Te}return Array.isArray(pe)?pe.map(function(De){return le(De,ye)}):r.isTypedArray(pe)?r.simpleMap(pe,r.identity):r.isJSDate(pe)?r.ms2DateTimeLocal(+pe):pe}var ge={data:(ee||[]).map(function(pe){var ye=le(pe);return U&&delete ye.fit,ye})};if(!U&&(ge.layout=le(te),W)){var fe=te._size;ge.layout.computed={margin:{b:fe.b,l:fe.l,r:fe.r,t:fe.t}}}return ie&&(ge.frames=le(ie)),X&&(ge.config=le(N._context,!0)),Q==="object"?ge:JSON.stringify(ge)},l.modifyFrames=function(N,U){var q,Q,W,X=N._transitionData._frames,ee=N._transitionData._frameHash;for(q=0;q<U.length;q++)switch(Q=U[q],Q.type){case"replace":W=Q.value;var te=(X[Q.index]||{}).name,ie=W.name;X[Q.index]=ee[ie]=W,ie!==te&&(delete ee[te],ee[ie]=W);break;case"insert":W=Q.value,ee[W.name]=W,X.splice(Q.index,0,W);break;case"delete":W=X[Q.index],delete ee[W.name],X.splice(Q.index,1);break}return Promise.resolve()},l.computeFrame=function(N,U){var q=N._transitionData._frameHash,Q,W,X,ee;if(!U)throw new Error("computeFrame must be given a string frame name");var te=q[U.toString()];if(!te)return!1;for(var ie=[te],le=[te.name];te.baseframe&&(te=q[te.baseframe.toString()])&&le.indexOf(te.name)===-1;)ie.push(te),le.push(te.name);for(var ge={};te=ie.pop();)if(te.layout&&(ge.layout=l.extendLayout(ge.layout,te.layout)),te.data){if(ge.data||(ge.data=[]),W=te.traces,!W)for(W=[],Q=0;Q<te.data.length;Q++)W[Q]=Q;for(ge.traces||(ge.traces=[]),Q=0;Q<te.data.length;Q++)X=W[Q],X!=null&&(ee=ge.traces.indexOf(X),ee===-1&&(ee=ge.data.length,ge.traces[ee]=X),ge.data[ee]=l.extendTrace(ge.data[ee],te.data[Q]))}return ge},l.recomputeFrameHash=function(N){for(var U=N._transitionData._frameHash={},q=N._transitionData._frames,Q=0;Q<q.length;Q++){var W=q[Q];W&&W.name&&(U[W.name]=W)}},l.extendObjectWithContainers=function(N,U,q){var Q,W,X,ee,te,ie,le,ge,fe=r.extendDeepNoArrays({},U||{}),pe=r.expandObjectPaths(fe),ye={};if(q&&q.length)for(X=0;X<q.length;X++)Q=r.nestedProperty(pe,q[X]),W=Q.get(),W===void 0?r.nestedProperty(ye,q[X]).set(null):(Q.set(null),r.nestedProperty(ye,q[X]).set(W));if(N=r.extendDeepNoArrays(N||{},pe),q&&q.length){for(X=0;X<q.length;X++)if(te=r.nestedProperty(ye,q[X]),le=te.get(),!!le){for(ie=r.nestedProperty(N,q[X]),ge=ie.get(),Array.isArray(ge)||(ge=[],ie.set(ge)),ee=0;ee<le.length;ee++){var Te=le[ee];Te===null?ge[ee]=null:ge[ee]=l.extendObjectWithContainers(ge[ee],Te)}ie.set(ge)}}return N},l.dataArrayContainers=["transforms","dimensions"],l.layoutArrayContainers=e.layoutArrayContainers,l.extendTrace=function(N,U){return l.extendObjectWithContainers(N,U,l.dataArrayContainers)},l.extendLayout=function(N,U){return l.extendObjectWithContainers(N,U,l.layoutArrayContainers)},l.transition=function(N,U,q,Q,W,X){var ee={redraw:W.redraw},te={},ie=[];return ee.prepareFn=function(){for(var le=Array.isArray(U)?U.length:0,ge=Q.slice(0,le),fe=0;fe<ge.length;fe++){var pe=ge[fe],ye=N._fullData[pe],Te=ye._module;if(!!Te){if(Te.animatable){var _e=Te.basePlotModule.name;te[_e]||(te[_e]=[]),te[_e].push(pe)}N.data[ge[fe]]=l.extendTrace(N.data[ge[fe]],U[fe])}}var De=r.expandObjectPaths(r.extendDeepNoArrays({},q)),Be=/^[xy]axis[0-9]*$/;for(var Ue in De)!Be.test(Ue)||delete De[Ue].range;l.extendLayout(N.layout,De),delete N.calcdata,l.supplyDefaults(N),l.doCalcdata(N);var xe=r.expandObjectPaths(q);if(xe){var Pe=N._fullLayout._plots;for(var Ve in Pe){var Qe=Pe[Ve],Fe=Qe.xaxis,Le=Qe.yaxis,Ne=Fe.range.slice(),dt=Le.range.slice(),Dt=null,Xt=null,At=null,zt=null;Array.isArray(xe[Fe._name+".range"])?Dt=xe[Fe._name+".range"].slice():Array.isArray((xe[Fe._name]||{}).range)&&(Dt=xe[Fe._name].range.slice()),Array.isArray(xe[Le._name+".range"])?Xt=xe[Le._name+".range"].slice():Array.isArray((xe[Le._name]||{}).range)&&(Xt=xe[Le._name].range.slice()),Ne&&Dt&&(Fe.r2l(Ne[0])!==Fe.r2l(Dt[0])||Fe.r2l(Ne[1])!==Fe.r2l(Dt[1]))&&(At={xr0:Ne,xr1:Dt}),dt&&Xt&&(Le.r2l(dt[0])!==Le.r2l(Xt[0])||Le.r2l(dt[1])!==Le.r2l(Xt[1]))&&(zt={yr0:dt,yr1:Xt}),(At||zt)&&ie.push(r.extendFlat({plotinfo:Qe},At,zt))}}return Promise.resolve()},ee.runFn=function(le){var ge,fe=N._fullLayout._basePlotModules,pe=ie.length,ye;if(q)for(ye=0;ye<fe.length;ye++)fe[ye].transitionAxes&&fe[ye].transitionAxes(N,ie,X,le);pe?(ge=r.extendFlat({},X),ge.duration=0,delete te.cartesian):ge=X;for(var Te in te){var _e=te[Te],De=N._fullData[_e[0]]._module;De.basePlotModule.plot(N,_e,ge,le)}},Y(N,X,ee)},l.transitionFromReact=function(N,U,q,Q){var W=N._fullLayout,X=W.transition,ee={},te=[];return ee.prepareFn=function(){var ie=W._plots;ee.redraw=!1,U.anim==="some"&&(ee.redraw=!0),q.anim==="some"&&(ee.redraw=!0);for(var le in ie){var ge=ie[le],fe=ge.xaxis,pe=ge.yaxis,ye=Q[fe._name].range.slice(),Te=Q[pe._name].range.slice(),_e=fe.range.slice(),De=pe.range.slice();fe.setScale(),pe.setScale();var Be=null,Ue=null;(fe.r2l(ye[0])!==fe.r2l(_e[0])||fe.r2l(ye[1])!==fe.r2l(_e[1]))&&(Be={xr0:ye,xr1:_e}),(pe.r2l(Te[0])!==pe.r2l(De[0])||pe.r2l(Te[1])!==pe.r2l(De[1]))&&(Ue={yr0:Te,yr1:De}),(Be||Ue)&&te.push(r.extendFlat({plotinfo:ge},Be,Ue))}return Promise.resolve()},ee.runFn=function(ie){for(var le=N._fullData,ge=N._fullLayout,fe=ge._basePlotModules,pe,ye,Te,_e=[],De=0;De<le.length;De++)_e.push(De);function Be(){if(!!N._fullLayout)for(var xe=0;xe<fe.length;xe++)fe[xe].transitionAxes&&fe[xe].transitionAxes(N,te,pe,ie)}function Ue(){if(!!N._fullLayout)for(var xe=0;xe<fe.length;xe++)fe[xe].plot(N,Te,ye,ie)}te.length&&U.anim?X.ordering==="traces first"?(pe=r.extendFlat({},X,{duration:0}),Te=_e,ye=X,setTimeout(Be,X.duration),Ue()):(pe=X,Te=null,ye=r.extendFlat({},X,{duration:0}),setTimeout(Ue,pe.duration),Be()):te.length?(pe=X,Be()):U.anim&&(Te=_e,ye=X,Ue())},Y(N,X,ee)};function Y(N,U,q){var Q=!1;function W(fe){var pe=Promise.resolve();if(!fe)return pe;for(;fe.length;)pe=pe.then(fe.shift());return pe}function X(fe){if(!!fe)for(;fe.length;)fe.shift()}function ee(){return N.emit("plotly_transitioning",[]),new Promise(function(fe){N._transitioning=!0,U.duration>0&&(N._transitioningWithDuration=!0),N._transitionData._interruptCallbacks.push(function(){Q=!0}),q.redraw&&N._transitionData._interruptCallbacks.push(function(){return e.call("redraw",N)}),N._transitionData._interruptCallbacks.push(function(){N.emit("plotly_transitioninterrupted",[])});var pe=0,ye=0;function Te(){return pe++,function(){ye++,!Q&&ye===pe&&te(fe)}}q.runFn(Te),setTimeout(Te())})}function te(fe){if(!!N._transitionData)return X(N._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(q.redraw)return e.call("redraw",N)}).then(function(){N._transitioning=!1,N._transitioningWithDuration=!1,N.emit("plotly_transitioned",[])}).then(fe)}function ie(){if(!!N._transitionData)return N._transitioning=!1,W(N._transitionData._interruptCallbacks)}var le=[l.previousPromises,ie,q.prepareFn,l.rehover,ee],ge=r.syncOrAsync(le,N);return(!ge||!ge.then)&&(ge=Promise.resolve()),ge.then(function(){return N})}l.doCalcdata=function(N,U){var q=o.list(N),Q=N._fullData,W=N._fullLayout,X,ee,te,ie,le=new Array(Q.length),ge=(N.calcdata||[]).slice();for(N.calcdata=le,W._numBoxes=0,W._numViolins=0,W._violinScaleGroupStats={},N._hmpixcount=0,N._hmlumcount=0,W._piecolormap={},W._sunburstcolormap={},W._treemapcolormap={},W._iciclecolormap={},W._funnelareacolormap={},te=0;te<Q.length;te++)if(Array.isArray(U)&&U.indexOf(te)===-1){le[te]=ge[te];continue}for(te=0;te<Q.length;te++)X=Q[te],X._arrayAttrs=a.findArrayAttributes(X),X._extremes={};var fe=W._subplots.polar||[];for(te=0;te<fe.length;te++)q.push(W[fe[te]].radialaxis,W[fe[te]].angularaxis);for(var pe in W._colorAxes){var ye=W[pe];ye.cauto!==!1&&(delete ye.cmin,delete ye.cmax)}var Te=!1;function _e(Ue){if(X=Q[Ue],ee=X._module,X.visible===!0&&X.transforms){if(ee&&ee.calc){var xe=ee.calc(N,X);xe[0]&&xe[0].t&&xe[0].t._scene&&delete xe[0].t._scene.dirty}for(ie=0;ie<X.transforms.length;ie++){var Pe=X.transforms[ie];ee=_[Pe.type],ee&&ee.calcTransform&&(X._hasCalcTransform=!0,Te=!0,ee.calcTransform(N,X,Pe))}}}function De(Ue,xe){if(X=Q[Ue],ee=X._module,!!ee.isContainer===xe){var Pe=[];if(X.visible===!0&&X._length!==0){delete X._indexToPoints;var Ve=X.transforms||[];for(ie=Ve.length-1;ie>=0;ie--)if(Ve[ie].enabled){X._indexToPoints=Ve[ie]._indexToPoints;break}ee&&ee.calc&&(Pe=ee.calc(N,X))}(!Array.isArray(Pe)||!Pe[0])&&(Pe=[{x:f,y:f}]),Pe[0].t||(Pe[0].t={}),Pe[0].trace=X,le[Ue]=Pe}}for(se(q,Q,W),te=0;te<Q.length;te++)De(te,!0);for(te=0;te<Q.length;te++)_e(te);for(Te&&se(q,Q,W),te=0;te<Q.length;te++)De(te,!0);for(te=0;te<Q.length;te++)De(te,!1);oe(N);var Be=re(q,N);if(Be.length){for(W._numBoxes=0,W._numViolins=0,te=0;te<Be.length;te++)De(Be[te],!0);for(te=0;te<Be.length;te++)De(Be[te],!1);oe(N)}e.getComponentMethod("fx","calc")(N),e.getComponentMethod("errorbars","calc")(N)};var j=/(total|sum|min|max|mean|median) (ascending|descending)/;function re(N,U){var q=[],Q,W,X,ee,te;function ie(Ct,Mt,rt){var ct=Mt._id.charAt(0);if(Ct==="histogram2dcontour"){var Ze=Mt._counterAxes[0],ke=o.getFromId(U,Ze),Ge=ct==="x"||Ze==="x"&&ke.type==="category",Je=ct==="y"||Ze==="y"&&ke.type==="category";return function(ot,Pt){return ot===0||Pt===0||Ge&&ot===rt[Pt].length-1||Je&&Pt===rt.length-1?-1:(ct==="y"?Pt:ot)-1}}else return function(ot,Pt){return ct==="y"?Pt:ot}}var le={min:function(Ct){return r.aggNums(Math.min,null,Ct)},max:function(Ct){return r.aggNums(Math.max,null,Ct)},sum:function(Ct){return r.aggNums(function(Mt,rt){return Mt+rt},null,Ct)},total:function(Ct){return r.aggNums(function(Mt,rt){return Mt+rt},null,Ct)},mean:function(Ct){return r.mean(Ct)},median:function(Ct){return r.median(Ct)}};for(Q=0;Q<N.length;Q++){var ge=N[Q];if(ge.type==="category"){var fe=ge.categoryorder.match(j);if(fe){var pe=fe[1],ye=fe[2],Te=ge._id.charAt(0),_e=Te==="x",De=[];for(W=0;W<ge._categories.length;W++)De.push([ge._categories[W],[]]);for(W=0;W<ge._traceIndices.length;W++){var Be=ge._traceIndices[W],Ue=U._fullData[Be];if(Ue.visible===!0){var xe=Ue.type;e.traceIs(Ue,"histogram")&&(delete Ue._xautoBinFinished,delete Ue._yautoBinFinished);var Pe=xe==="splom",Ve=xe==="scattergl",Qe=U.calcdata[Be];for(X=0;X<Qe.length;X++){var Fe=Qe[X],Le,Ne;if(Pe){var dt=Ue._axesDim[ge._id];if(!_e){var Dt=Ue._diag[dt][0];Dt&&(ge=U._fullLayout[o.id2name(Dt)])}var Xt=Fe.trace.dimensions[dt].values;for(ee=0;ee<Xt.length;ee++)for(Le=ge._categoriesMap[Xt[ee]],te=0;te<Fe.trace.dimensions.length;te++)if(te!==dt){var At=Fe.trace.dimensions[te];De[Le][1].push(At.values[ee])}}else if(Ve){for(ee=0;ee<Fe.t.x.length;ee++)_e?(Le=Fe.t.x[ee],Ne=Fe.t.y[ee]):(Le=Fe.t.y[ee],Ne=Fe.t.x[ee]),De[Le][1].push(Ne);Fe.t&&Fe.t._scene&&delete Fe.t._scene.dirty}else if(Fe.hasOwnProperty("z")){Ne=Fe.z;var zt=ie(Ue.type,ge,Ne);for(ee=0;ee<Ne.length;ee++)for(te=0;te<Ne[ee].length;te++)Le=zt(te,ee),Le+1&&De[Le][1].push(Ne[ee][te])}else for(Le=Fe.p,Le===void 0&&(Le=Fe[Te]),Ne=Fe.s,Ne===void 0&&(Ne=Fe.v),Ne===void 0&&(Ne=_e?Fe.y:Fe.x),Array.isArray(Ne)||(Ne===void 0?Ne=[]:Ne=[Ne]),ee=0;ee<Ne.length;ee++)De[Le][1].push(Ne[ee])}}}ge._categoriesValue=De;var Ut=[];for(W=0;W<De.length;W++)Ut.push([De[W][0],le[pe](De[W][1])]);Ut.sort(function(Ct,Mt){return Ct[1]-Mt[1]}),ge._categoriesAggregatedValue=Ut,ge._initialCategories=Ut.map(function(Ct){return Ct[0]}),ye==="descending"&&ge._initialCategories.reverse(),q=q.concat(ge.sortByInitialCategories())}}}return q}function se(N,U,q){var Q={};function W(ie){ie.clearCalc(),ie.type==="multicategory"&&ie.setupMultiCategory(U),Q[ie._id]=1}r.simpleMap(N,W);for(var X=q._axisMatchGroups||[],ee=0;ee<X.length;ee++)for(var te in X[ee])Q[te]||W(q[o.id2name(te)])}function oe(N){var U=N._fullLayout,q=U._visibleModules,Q={},W,X,ee;for(X=0;X<q.length;X++){var te=q[X],ie=te.crossTraceCalc;if(ie){var le=te.basePlotModule.name;Q[le]?r.pushUnique(Q[le],ie):Q[le]=[ie]}}for(ee in Q){var ge=Q[ee],fe=U._subplots[ee];if(Array.isArray(fe))for(W=0;W<fe.length;W++){var pe=fe[W],ye=ee==="cartesian"?U._plots[pe]:U[pe];for(X=0;X<ge.length;X++)ge[X](N,ye,pe)}else for(X=0;X<ge.length;X++)ge[X](N)}}l.rehover=function(N){N._fullLayout._rehover&&N._fullLayout._rehover()},l.redrag=function(N){N._fullLayout._redrag&&N._fullLayout._redrag()},l.generalUpdatePerTraceModule=function(N,U,q,Q){var W=U.traceHash,X={},ee;for(ee=0;ee<q.length;ee++){var te=q[ee],ie=te[0].trace;ie.visible&&(X[ie.type]=X[ie.type]||[],X[ie.type].push(te))}for(var le in W)if(!X[le]){var ge=W[le][0],fe=ge[0].trace;fe.visible=!1,X[le]=[ge]}for(var pe in X){var ye=X[pe],Te=ye[0][0].trace._module;Te.plot(N,U,r.filterVisible(ye),Q)}U.traceHash=X},l.plotBasePlot=function(N,U,q,Q,W){var X=e.getModule(N),ee=y(U.calcdata,X)[0];X.plot(U,ee,Q,W)},l.cleanBasePlot=function(N,U,q,Q,W){var X=W._has&&W._has(N),ee=q._has&&q._has(N);X&&!ee&&W["_"+N+"layer"].selectAll("g.trace").remove()}},{"../components/color":366,"../constants/numerical":479,"../lib":503,"../plot_api/plot_schema":542,"../plot_api/plot_template":543,"../plots/get_data":593,"../registry":638,"./animation_attributes":548,"./attributes":550,"./cartesian/axis_ids":558,"./cartesian/handle_outline":565,"./command":583,"./font_attributes":585,"./frame_attributes":586,"./layout_attributes":610,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],620:[function(d,ne,ae){ne.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],621:[function(d,ne,ae){var w=d("../../lib"),v=d("../../lib/polygon").tester,M=w.findIndexOfMin,T=w.isAngleInsideSector,e=w.angleDelta,a=w.angleDist;function n(_,s,A,m,h){if(!T(s,m))return!1;var x,u;A[0]<A[1]?(x=A[0],u=A[1]):(x=A[1],u=A[0]);var L=v(i(x,m[0],m[1],h)),S=v(i(u,m[0],m[1],h)),k=[_*Math.cos(s),_*Math.sin(s)];return S.contains(k)&&!L.contains(k)}function r(_,s,A,m){var h,x,u=m[0],L=m[1],S=y(Math.sin(s)-Math.sin(_)),k=y(Math.cos(s)-Math.cos(_)),P=Math.tan(A),z=y(1/P),I=S/k,D=L-I*u;return z?S&&k?(h=D/(P-I),x=P*h):k?(h=L*z,x=L):(h=u,x=u*P):S&&k?(h=0,x=D):k?(h=0,x=L):h=x=NaN,[h,x]}function t(_,s,A,m){var h=-s*A,x=s*s+1,u=2*(s*h-A),L=h*h+A*A-_*_,S=Math.sqrt(u*u-4*x*L),k=(-u+S)/(2*x),P=(-u-S)/(2*x);return[[k,s*k+h+m],[P,s*P+h+m]]}function f(_,s){var A=s.length,m=new Array(A+1),h;for(h=0;h<A;h++){var x=s[h];m[h]=[_*Math.cos(x),_*Math.sin(x)]}return m[h]=m[0].slice(),m}function o(_,s,A,m){var h=m.length,x=[],u,L;function S(V){return[_*Math.cos(V),_*Math.sin(V)]}function k(V,G,J){return r(V,G,J,S(V))}function P(V){return w.mod(V,h)}function z(V){return T(V,[s,A])}var I=M(m,function(V){return z(V)?a(V,s):1/0}),D=k(m[I],m[P(I-1)],s);for(x.push(D),u=I,L=0;L<h;u++,L++){var R=m[P(u)];if(!z(R))break;x.push(S(R))}var O=M(m,function(V){return z(V)?a(V,A):1/0}),F=k(m[O],m[P(O+1)],A);return x.push(F),x.push([0,0]),x.push(x[0].slice()),x}function i(_,s,A,m){return w.isFullCircle([s,A])?f(_,m):o(_,s,A,m)}function g(_,s,A,m){for(var h=1/0,x=1/0,u=i(_,s,A,m),L=0;L<u.length;L++){var S=u[L];h=Math.min(h,S[0]),x=Math.min(x,-S[1])}return[h,x]}function p(_,s){var A=function(x){var u=e(x,_);return u>0?u:1/0},m=M(s,A),h=w.mod(m+1,s.length);return[s[m],s[h]]}function y(_){return Math.abs(_)>1e-10?_:0}function c(_,s,A){s=s||0,A=A||0;for(var m=_.length,h=new Array(m),x=0;x<m;x++){var u=_[x];h[x]=[s+u[0],A-u[1]]}return h}function b(_,s,A,m,h,x){var u=i(_,s,A,m);return"M"+c(u,h,x).join("L")}function l(_,s,A,m,h,x,u){var L,S;_<s?(L=_,S=s):(L=s,S=_);var k=c(i(L,A,m,h),x,u),P=c(i(S,A,m,h),x,u);return"M"+P.reverse().join("L")+"M"+k.join("L")}ne.exports={isPtInsidePolygon:n,findPolygonOffset:g,findEnclosingVertexAngles:p,findIntersectionXY:r,findXYatLength:t,clampTiny:y,pathPolygon:b,pathPolygonAnnulus:l}},{"../../lib":503,"../../lib/polygon":515}],622:[function(d,ne,ae){var w=d("../get_data").getSubplotCalcData,v=d("../../lib").counterRegex,M=d("./polar"),T=d("./constants"),e=T.attr,a=T.name,n=v(a),r={};r[e]={valType:"subplotid",dflt:a,editType:"calc"};function t(o){for(var i=o._fullLayout,g=o.calcdata,p=i._subplots[a],y=0;y<p.length;y++){var c=p[y],b=w(g,a,c),l=i[c]._subplot;l||(l=M(o,c),i[c]._subplot=l),l.plot(b,i,o._promises)}}function f(o,i,g,p){for(var y=p._subplots[a]||[],c=p._has&&p._has("gl"),b=i._has&&i._has("gl"),l=c&&!b,_=0;_<y.length;_++){var s=y[_],A=p[s]._subplot;if(!i[s]&&!!A){A.framework.remove(),A.layers["radial-axis-title"].remove();for(var m in A.clipPaths)A.clipPaths[m].remove()}l&&A._scene&&(A._scene.destroy(),A._scene=null)}}ne.exports={attr:e,name:a,idRoot:a,idRegex:n,attrRegex:n,attributes:r,layoutAttributes:d("./layout_attributes"),supplyLayoutDefaults:d("./layout_defaults"),plot:t,clean:f,toSVG:d("../cartesian").toSVG}},{"../../lib":503,"../cartesian":568,"../get_data":593,"./constants":620,"./layout_attributes":623,"./layout_defaults":624,"./polar":625}],623:[function(d,ne,ae){var w=d("../../components/color/attributes"),v=d("../cartesian/layout_attributes"),M=d("../domain").attributes,T=d("../../lib").extendFlat,e=d("../../plot_api/edit_types").overrideAll,a=e({color:v.color,showline:T({},v.showline,{dflt:!0}),linecolor:v.linecolor,linewidth:v.linewidth,showgrid:T({},v.showgrid,{dflt:!0}),gridcolor:v.gridcolor,gridwidth:v.gridwidth,griddash:v.griddash},"plot","from-root"),n=e({tickmode:v.tickmode,nticks:v.nticks,tick0:v.tick0,dtick:v.dtick,tickvals:v.tickvals,ticktext:v.ticktext,ticks:v.ticks,ticklen:v.ticklen,tickwidth:v.tickwidth,tickcolor:v.tickcolor,ticklabelstep:v.ticklabelstep,showticklabels:v.showticklabels,showtickprefix:v.showtickprefix,tickprefix:v.tickprefix,showticksuffix:v.showticksuffix,ticksuffix:v.ticksuffix,showexponent:v.showexponent,exponentformat:v.exponentformat,minexponent:v.minexponent,separatethousands:v.separatethousands,tickfont:v.tickfont,tickangle:v.tickangle,tickformat:v.tickformat,tickformatstops:v.tickformatstops,layer:v.layer},"plot","from-root"),r={visible:T({},v.visible,{dflt:!0}),type:T({},v.type,{values:["-","linear","log","date","category"]}),autotypenumbers:v.autotypenumbers,autorange:T({},v.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:T({},v.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:v.categoryorder,categoryarray:v.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:T({},v.title.text,{editType:"plot",dflt:""}),font:T({},v.title.font,{editType:"plot"}),editType:"plot"},hoverformat:v.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:v._deprecated.title,titlefont:v._deprecated.titlefont}};T(r,a,n);var t={visible:T({},v.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:v.autotypenumbers,categoryorder:v.categoryorder,categoryarray:v.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:v.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};T(t,a,n),ne.exports={domain:M({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:w.background},radialaxis:r,angularaxis:t,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":365,"../../lib":503,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],624:[function(d,ne,ae){var w=d("../../lib"),v=d("../../components/color"),M=d("../../plot_api/plot_template"),T=d("../subplot_defaults"),e=d("../get_data").getSubplotData,a=d("../cartesian/tick_value_defaults"),n=d("../cartesian/tick_mark_defaults"),r=d("../cartesian/tick_label_defaults"),t=d("../cartesian/prefix_suffix_defaults"),f=d("../cartesian/category_order_defaults"),o=d("../cartesian/line_grid_defaults"),i=d("../cartesian/axis_autotype"),g=d("./layout_attributes"),p=d("./set_convert"),y=d("./constants"),c=y.axisNames;function b(_,s,A,m){var h=A("bgcolor");m.bgColor=v.combine(h,m.paper_bgcolor);var x=A("sector");A("hole");var u=e(m.fullData,y.name,m.id),L=m.layoutOut,S;function k(se,oe){return A(S+"."+se,oe)}for(var P=0;P<c.length;P++){S=c[P],w.isPlainObject(_[S])||(_[S]={});var z=_[S],I=M.newContainer(s,S);I._id=I._name=S,I._attr=m.id+"."+S,I._traceIndices=u.map(function(se){return se._expandedIndex});var D=y.axisName2dataArray[S],R=l(z,I,k,u,D,m);f(z,I,k,{axData:u,dataAttr:D});var O=k("visible");switch(p(I,s,L),k("uirevision",s.uirevision),I._m=1,S){case"radialaxis":var F=k("autorange",!I.isValidRange(z.range));z.autorange=F,F&&(R==="linear"||R==="-")&&k("rangemode"),F==="reversed"&&(I._m=-1),k("range"),I.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(R==="date"){w.log("Polar plots do not support date angular axes yet.");for(var V=0;V<u.length;V++)u[V].visible=!1;R=z.type=I.type="linear"}k(R==="linear"?"thetaunit":"period");var G=k("direction");k("rotation",{counterclockwise:0,clockwise:90}[G]);break}if(t(z,I,k,I.type,{tickSuffixDflt:I.thetaunit==="degrees"?"\xB0":void 0}),O){var J,Z,Y,j,re=m.font||{};J=k("color"),Z=J===z.color?J:re.color,Y=re.size,j=re.family,a(z,I,k,I.type),r(z,I,k,I.type,{font:{color:Z,size:Y,family:j}}),n(z,I,k,{outerTicks:!0}),o(z,I,k,{dfltColor:J,bgColor:m.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:g[S]}),k("layer"),S==="radialaxis"&&(k("side"),k("angle",x[0]),k("title.text"),w.coerceFont(k,"title.font",{color:Z,size:w.bigFont(Y),family:j}))}R!=="category"&&k("hoverformat"),I._input=z}s.angularaxis.type==="category"&&A("gridshape")}function l(_,s,A,m,h,x){var u=A("autotypenumbers",x.autotypenumbersDflt),L=A("type");if(L==="-"){for(var S,k=0;k<m.length;k++)if(m[k].visible){S=m[k];break}S&&S[h]&&(s.type=i(S[h],"gregorian",{noMultiCategory:!0,autotypenumbers:u})),s.type==="-"?s.type="linear":_.type=s.type}return s.type}ne.exports=function(s,A,m){T(s,A,m,{type:y.name,attributes:g,handleDefaults:b,font:A.font,autotypenumbersDflt:A.autotypenumbers,paper_bgcolor:A.paper_bgcolor,fullData:m,layoutOut:A})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/axis_autotype":555,"../cartesian/category_order_defaults":559,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/tick_label_defaults":578,"../cartesian/tick_mark_defaults":579,"../cartesian/tick_value_defaults":580,"../get_data":593,"../subplot_defaults":632,"./constants":620,"./layout_attributes":623,"./set_convert":626}],625:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("tinycolor2"),M=d("../../registry"),T=d("../../lib"),e=T.strRotate,a=T.strTranslate,n=d("../../components/color"),r=d("../../components/drawing"),t=d("../plots"),f=d("../../plots/cartesian/axes"),o=d("../cartesian/set_convert"),i=d("./set_convert"),g=d("../cartesian/autorange").doAutoRange,p=d("../cartesian/dragbox"),y=d("../../components/dragelement"),c=d("../../components/fx"),b=d("../../components/titles"),l=d("../cartesian/select").prepSelect,_=d("../cartesian/select").selectOnClick,s=d("../cartesian/select").clearSelect,A=d("../../lib/setcursor"),m=d("../../lib/clear_gl_canvases"),h=d("../../plot_api/subroutines").redrawReglTraces,x=d("../../constants/alignment").MID_SHIFT,u=d("./constants"),L=d("./helpers"),S=d("../smith/helpers"),k=S.smith,P=S.reactanceArc,z=S.resistanceArc,I=S.smithTransform,D=T._,R=T.mod,O=T.deg2rad,F=T.rad2deg;function V(re,se,oe){this.isSmith=oe||!1,this.id=se,this.gd=re,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var N=re._fullLayout,U="clip"+N._uid+se;this.clipIds.forTraces=U+"-for-traces",this.clipPaths.forTraces=N._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=N["_"+(oe?"smith":"polar")+"layer"].append("g").attr("class",se),this.getHole=function(q){return this.isSmith?0:q.hole},this.getSector=function(q){return this.isSmith?[0,360]:q.sector},this.getRadial=function(q){return this.isSmith?q.realaxis:q.radialaxis},this.getAngular=function(q){return this.isSmith?q.imaginaryaxis:q.angularaxis},oe||(this.radialTickLayout=null,this.angularTickLayout=null)}var G=V.prototype;ne.exports=function(se,oe,N){return new V(se,oe,N)},G.plot=function(re,se){for(var oe=this,N=se[oe.id],U=!1,q=0;q<re.length;q++){var Q=re[q][0].trace;if(Q.cliponaxis===!1){U=!0;break}}oe._hasClipOnAxisFalse=U,oe.updateLayers(se,N),oe.updateLayout(se,N),t.generalUpdatePerTraceModule(oe.gd,oe,re,N),oe.updateFx(se,N),oe.isSmith&&(delete N.realaxis.range,delete N.imaginaryaxis.range)},G.updateLayers=function(re,se){var oe=this,N=oe.isSmith,U=oe.layers,q=oe.getRadial(se),Q=oe.getAngular(se),W=u.layerNames,X=W.indexOf("frontplot"),ee=W.slice(0,X),te=Q.layer==="below traces",ie=q.layer==="below traces";te&&ee.push("angular-line"),ie&&ee.push("radial-line"),te&&ee.push("angular-axis"),ie&&ee.push("radial-axis"),ee.push("frontplot"),te||ee.push("angular-line"),ie||ee.push("radial-line"),te||ee.push("angular-axis"),ie||ee.push("radial-axis");var le=(N?"smith":"polar")+"sublayer",ge=oe.framework.selectAll("."+le).data(ee,String);ge.enter().append("g").attr("class",function(fe){return le+" "+fe}).each(function(fe){var pe=U[fe]=w.select(this);switch(fe){case"frontplot":N||pe.append("g").classed("barlayer",!0),pe.append("g").classed("scatterlayer",!0);break;case"backplot":pe.append("g").classed("maplayer",!0);break;case"plotbg":U.bg=pe.append("path");break;case"radial-grid":pe.style("fill","none");break;case"angular-grid":pe.style("fill","none");break;case"radial-line":pe.append("line").style("fill","none");break;case"angular-line":pe.append("path").style("fill","none");break}}),ge.order()},G.updateLayout=function(re,se){var oe=this,N=oe.layers,U=re._size,q=oe.getRadial(se),Q=oe.getAngular(se),W=se.domain.x,X=se.domain.y;oe.xOffset=U.l+U.w*W[0],oe.yOffset=U.t+U.h*(1-X[1]);var ee=oe.xLength=U.w*(W[1]-W[0]),te=oe.yLength=U.h*(X[1]-X[0]),ie=oe.getSector(se);oe.sectorInRad=ie.map(O);var le=oe.sectorBBox=Z(ie),ge=le[2]-le[0],fe=le[3]-le[1],pe=te/ee,ye=Math.abs(fe/ge),Te,_e,De,Be,Ue;pe>ye?(Te=ee,_e=ee*ye,Ue=(te-_e)/U.h/2,De=[W[0],W[1]],Be=[X[0]+Ue,X[1]-Ue]):(Te=te/ye,_e=te,Ue=(ee-Te)/U.w/2,De=[W[0]+Ue,W[1]-Ue],Be=[X[0],X[1]]),oe.xLength2=Te,oe.yLength2=_e,oe.xDomain2=De,oe.yDomain2=Be;var xe=oe.xOffset2=U.l+U.w*De[0],Pe=oe.yOffset2=U.t+U.h*(1-Be[1]),Ve=oe.radius=Te/ge,Qe=oe.innerRadius=oe.getHole(se)*Ve,Fe=oe.cx=xe-Ve*le[0],Le=oe.cy=Pe+Ve*le[3],Ne=oe.cxx=Fe-xe,dt=oe.cyy=Le-Pe,Dt=q.side,Xt;Dt==="counterclockwise"?(Xt=Dt,Dt="top"):Dt==="clockwise"&&(Xt=Dt,Dt="bottom"),oe.radialAxis=oe.mockAxis(re,se,q,{_id:"x",side:Dt,_trueSide:Xt,domain:[Qe/U.w,Ve/U.w]}),oe.angularAxis=oe.mockAxis(re,se,Q,{side:"right",domain:[0,Math.PI],autorange:!1}),oe.doAutoRange(re,se),oe.updateAngularAxis(re,se),oe.updateRadialAxis(re,se),oe.updateRadialAxisTitle(re,se),oe.xaxis=oe.mockCartesianAxis(re,se,{_id:"x",domain:De}),oe.yaxis=oe.mockCartesianAxis(re,se,{_id:"y",domain:Be});var At=oe.pathSubplot();oe.clipPaths.forTraces.select("path").attr("d",At).attr("transform",a(Ne,dt)),N.frontplot.attr("transform",a(xe,Pe)).call(r.setClipUrl,oe._hasClipOnAxisFalse?null:oe.clipIds.forTraces,oe.gd),N.bg.attr("d",At).attr("transform",a(Fe,Le)).call(n.fill,se.bgcolor)},G.mockAxis=function(re,se,oe,N){var U=T.extendFlat({},oe,N);return i(U,se,re),U},G.mockCartesianAxis=function(re,se,oe){var N=this,U=N.isSmith,q=oe._id,Q=T.extendFlat({type:"linear"},oe);o(Q,re);var W={x:[0,2],y:[1,3]};return Q.setRange=function(){var X=N.sectorBBox,ee=W[q],te=N.radialAxis._rl,ie=(te[1]-te[0])/(1-N.getHole(se));Q.range=[X[ee[0]]*ie,X[ee[1]]*ie]},Q.isPtWithinRange=q==="x"&&!U?function(X){return N.isPtInside(X)}:function(){return!0},Q.setRange(),Q.setScale(),Q},G.doAutoRange=function(re,se){var oe=this,N=oe.gd,U=oe.radialAxis,q=oe.getRadial(se);g(N,U);var Q=U.range;q.range=Q.slice(),q._input.range=Q.slice(),U._rl=[U.r2l(Q[0],null,"gregorian"),U.r2l(Q[1],null,"gregorian")]},G.updateRadialAxis=function(re,se){var oe=this,N=oe.gd,U=oe.layers,q=oe.radius,Q=oe.innerRadius,W=oe.cx,X=oe.cy,ee=oe.getRadial(se),te=R(oe.getSector(se)[0],360),ie=oe.radialAxis,le=Q<q,ge=oe.isSmith;ge||(oe.fillViewInitialKey("radialaxis.angle",ee.angle),oe.fillViewInitialKey("radialaxis.range",ie.range.slice()),ie.setGeometry()),ie.tickangle==="auto"&&te>90&&te<=270&&(ie.tickangle=180);var fe=ge?function(Ve){var Qe=I(oe,k([Ve.x,0]));return a(Qe[0]-W,Qe[1]-X)}:function(Ve){return a(ie.l2p(Ve.x)+Q,0)},pe=ge?function(Ve){return z(oe,Ve.x,-1/0,1/0)}:function(Ve){return oe.pathArc(ie.r2p(Ve.x)+Q)},ye=J(ee);if(oe.radialTickLayout!==ye&&(U["radial-axis"].selectAll(".xtick").remove(),oe.radialTickLayout=ye),le){ie.setScale();var Te=0,_e=ge?(ie.tickvals||[]).filter(function(Ve){return Ve>=0}).map(function(Ve){return f.tickText(ie,Ve,!0,!1)}):f.calcTicks(ie),De=ge?_e:f.clipEnds(ie,_e),Be=f.getTickSigns(ie)[2];ge&&((ie.ticks==="top"&&ie.side==="bottom"||ie.ticks==="bottom"&&ie.side==="top")&&(Be=-Be),ie.ticks==="top"&&ie.side==="top"&&(Te=-ie.ticklen),ie.ticks==="bottom"&&ie.side==="bottom"&&(Te=ie.ticklen)),f.drawTicks(N,ie,{vals:_e,layer:U["radial-axis"],path:f.makeTickPath(ie,0,Be),transFn:fe,crisp:!1}),f.drawGrid(N,ie,{vals:De,layer:U["radial-grid"],path:pe,transFn:T.noop,crisp:!1}),f.drawLabels(N,ie,{vals:_e,layer:U["radial-axis"],transFn:fe,labelFns:f.makeLabelFns(ie,Te)})}var Ue=oe.radialAxisAngle=oe.vangles?F(Y(O(ee.angle),oe.vangles)):ee.angle,xe=a(W,X),Pe=xe+e(-Ue);j(U["radial-axis"],le&&(ee.showticklabels||ee.ticks),{transform:Pe}),j(U["radial-grid"],le&&ee.showgrid,{transform:ge?"":xe}),j(U["radial-line"].select("line"),le&&ee.showline,{x1:ge?-q:Q,y1:0,x2:q,y2:0,transform:Pe}).attr("stroke-width",ee.linewidth).call(n.stroke,ee.linecolor)},G.updateRadialAxisTitle=function(re,se,oe){if(!this.isSmith){var N=this,U=N.gd,q=N.radius,Q=N.cx,W=N.cy,X=N.getRadial(se),ee=N.id+"title",te=0;if(X.title){var ie=r.bBox(N.layers["radial-axis"].node()).height,le=X.title.font.size,ge=X.side;te=ge==="top"?le:ge==="counterclockwise"?-(ie+le*.4):ie+le*.8}var fe=oe!==void 0?oe:N.radialAxisAngle,pe=O(fe),ye=Math.cos(pe),Te=Math.sin(pe),_e=Q+q/2*ye+te*Te,De=W-q/2*Te+te*ye;N.layers["radial-axis-title"]=b.draw(U,ee,{propContainer:X,propName:N.id+".radialaxis.title",placeholder:D(U,"Click to enter radial axis title"),attributes:{x:_e,y:De,"text-anchor":"middle"},transform:{rotate:-fe}})}},G.updateAngularAxis=function(re,se){var oe=this,N=oe.gd,U=oe.layers,q=oe.radius,Q=oe.innerRadius,W=oe.cx,X=oe.cy,ee=oe.getAngular(se),te=oe.angularAxis,ie=oe.isSmith;ie||(oe.fillViewInitialKey("angularaxis.rotation",ee.rotation),te.setGeometry(),te.setScale());var le=ie?function(Qe){var Fe=I(oe,k([0,Qe.x]));return Math.atan2(Fe[0]-W,Fe[1]-X)-Math.PI/2}:function(Qe){return te.t2g(Qe.x)};te.type==="linear"&&te.thetaunit==="radians"&&(te.tick0=F(te.tick0),te.dtick=F(te.dtick));var ge=function(Qe){return a(W+q*Math.cos(Qe),X-q*Math.sin(Qe))},fe=ie?function(Qe){var Fe=I(oe,k([0,Qe.x]));return a(Fe[0],Fe[1])}:function(Qe){return ge(le(Qe))},pe=ie?function(Qe){var Fe=I(oe,k([0,Qe.x])),Le=Math.atan2(Fe[0]-W,Fe[1]-X)-Math.PI/2;return a(Fe[0],Fe[1])+e(-F(Le))}:function(Qe){var Fe=le(Qe);return ge(Fe)+e(-F(Fe))},ye=ie?function(Qe){return P(oe,Qe.x,0,1/0)}:function(Qe){var Fe=le(Qe),Le=Math.cos(Fe),Ne=Math.sin(Fe);return"M"+[W+Q*Le,X-Q*Ne]+"L"+[W+q*Le,X-q*Ne]},Te=f.makeLabelFns(te,0),_e=Te.labelStandoff,De={};De.xFn=function(Qe){var Fe=le(Qe);return Math.cos(Fe)*_e},De.yFn=function(Qe){var Fe=le(Qe),Le=Math.sin(Fe)>0?.2:1;return-Math.sin(Fe)*(_e+Qe.fontSize*Le)+Math.abs(Math.cos(Fe))*(Qe.fontSize*x)},De.anchorFn=function(Qe){var Fe=le(Qe),Le=Math.cos(Fe);return Math.abs(Le)<.1?"middle":Le>0?"start":"end"},De.heightFn=function(Qe,Fe,Le){var Ne=le(Qe);return-.5*(1+Math.sin(Ne))*Le};var Be=J(ee);oe.angularTickLayout!==Be&&(U["angular-axis"].selectAll("."+te._id+"tick").remove(),oe.angularTickLayout=Be);var Ue=ie?[1/0].concat(te.tickvals||[]).map(function(Qe){return f.tickText(te,Qe,!0,!1)}):f.calcTicks(te);ie&&(Ue[0].text="\u221E",Ue[0].fontSize*=1.75);var xe;if(se.gridshape==="linear"?(xe=Ue.map(le),T.angleDelta(xe[0],xe[1])<0&&(xe=xe.slice().reverse())):xe=null,oe.vangles=xe,te.type==="category"&&(Ue=Ue.filter(function(Qe){return T.isAngleInsideSector(le(Qe),oe.sectorInRad)})),te.visible){var Pe=te.ticks==="inside"?-1:1,Ve=(te.linewidth||1)/2;f.drawTicks(N,te,{vals:Ue,layer:U["angular-axis"],path:"M"+Pe*Ve+",0h"+Pe*te.ticklen,transFn:pe,crisp:!1}),f.drawGrid(N,te,{vals:Ue,layer:U["angular-grid"],path:ye,transFn:T.noop,crisp:!1}),f.drawLabels(N,te,{vals:Ue,layer:U["angular-axis"],repositionOnUpdate:!0,transFn:fe,labelFns:De})}j(U["angular-line"].select("path"),ee.showline,{d:oe.pathSubplot(),transform:a(W,X)}).attr("stroke-width",ee.linewidth).call(n.stroke,ee.linecolor)},G.updateFx=function(re,se){if(!this.gd._context.staticPlot){var oe=!this.isSmith;oe&&(this.updateAngularDrag(re),this.updateRadialDrag(re,se,0),this.updateRadialDrag(re,se,1)),this.updateHoverAndMainDrag(re)}},G.updateHoverAndMainDrag=function(re){var se=this,oe=se.isSmith,N=se.gd,U=se.layers,q=re._zoomlayer,Q=u.MINZOOM,W=u.OFFEDGE,X=se.radius,ee=se.innerRadius,te=se.cx,ie=se.cy,le=se.cxx,ge=se.cyy,fe=se.sectorInRad,pe=se.vangles,ye=se.radialAxis,Te=L.clampTiny,_e=L.findXYatLength,De=L.findEnclosingVertexAngles,Be=u.cornerHalfWidth,Ue=u.cornerLen/2,xe,Pe,Ve=p.makeDragger(U,"path","maindrag",re.dragmode===!1?"none":"crosshair");w.select(Ve).attr("d",se.pathSubplot()).attr("transform",a(te,ie)),Ve.onmousemove=function(rr){c.hover(N,rr,se.id),N._fullLayout._lasthover=Ve,N._fullLayout._hoversubplot=se.id},Ve.onmouseout=function(rr){N._dragging||y.unhover(N,rr)};var Qe={element:Ve,gd:N,subplot:se.id,plotinfo:{id:se.id,xaxis:se.xaxis,yaxis:se.yaxis},xaxes:[se.xaxis],yaxes:[se.yaxis]},Fe,Le,Ne,dt,Dt,Xt,At,zt,Ut;function Ct(rr,er){return Math.sqrt(rr*rr+er*er)}function Mt(rr,er){return Ct(rr-le,er-ge)}function rt(rr,er){return Math.atan2(ge-er,rr-le)}function ct(rr,er){return[rr*Math.cos(er),rr*Math.sin(-er)]}function Ze(rr,er){if(rr===0)return se.pathSector(2*Be);var pr=Ue/rr,Xr=er-pr,hn=er+pr,Qr=Math.max(0,Math.min(rr,X)),nt=Qr-Be,Ht=Qr+Be;return"M"+ct(nt,Xr)+"A"+[nt,nt]+" 0,0,0 "+ct(nt,hn)+"L"+ct(Ht,hn)+"A"+[Ht,Ht]+" 0,0,1 "+ct(Ht,Xr)+"Z"}function ke(rr,er,pr){if(rr===0)return se.pathSector(2*Be);var Xr=ct(rr,er),hn=ct(rr,pr),Qr=Te((Xr[0]+hn[0])/2),nt=Te((Xr[1]+hn[1])/2),Ht,Kt;if(Qr&&nt){var Gt=nt/Qr,br=-1/Gt,tt=_e(Be,Gt,Qr,nt);Ht=_e(Ue,br,tt[0][0],tt[0][1]),Kt=_e(Ue,br,tt[1][0],tt[1][1])}else{var je,st;nt?(je=Ue,st=Be):(je=Be,st=Ue),Ht=[[Qr-je,nt-st],[Qr+je,nt-st]],Kt=[[Qr-je,nt+st],[Qr+je,nt+st]]}return"M"+Ht.join("L")+"L"+Kt.reverse().join("L")+"Z"}function Ge(){Ne=null,dt=null,Dt=se.pathSubplot(),Xt=!1;var rr=N._fullLayout[se.id];At=v(rr.bgcolor).getLuminance(),zt=p.makeZoombox(q,At,te,ie,Dt),zt.attr("fill-rule","evenodd"),Ut=p.makeCorners(q,te,ie),s(N)}function Je(rr,er){return er=Math.max(Math.min(er,X),ee),rr<W?rr=0:X-rr<W?rr=X:er<W?er=0:X-er<W&&(er=X),Math.abs(er-rr)>Q?(rr<er?(Ne=rr,dt=er):(Ne=er,dt=rr),!0):(Ne=null,dt=null,!1)}function ot(rr,er){rr=rr||Dt,er=er||"M0,0Z",zt.attr("d",rr),Ut.attr("d",er),p.transitionZoombox(zt,Ut,Xt,At),Xt=!0;var pr={};Ot(pr),N.emit("plotly_relayouting",pr)}function Pt(rr,er){rr=rr*xe,er=er*Pe;var pr=Fe+rr,Xr=Le+er,hn=Mt(Fe,Le),Qr=Math.min(Mt(pr,Xr),X),nt=rt(Fe,Le),Ht,Kt;Je(hn,Qr)&&(Ht=Dt+se.pathSector(dt),Ne&&(Ht+=se.pathSector(Ne)),Kt=Ze(Ne,nt)+Ze(dt,nt)),ot(Ht,Kt)}function _t(rr,er,pr,Xr){var hn=L.findIntersectionXY(pr,Xr,pr,[rr-le,ge-er]);return Ct(hn[0],hn[1])}function Bt(rr,er){var pr=Fe+rr,Xr=Le+er,hn=rt(Fe,Le),Qr=rt(pr,Xr),nt=De(hn,pe),Ht=De(Qr,pe),Kt=_t(Fe,Le,nt[0],nt[1]),Gt=Math.min(_t(pr,Xr,Ht[0],Ht[1]),X),br,tt;Je(Kt,Gt)&&(br=Dt+se.pathSector(dt),Ne&&(br+=se.pathSector(Ne)),tt=[ke(Ne,nt[0],nt[1]),ke(dt,nt[0],nt[1])].join(" ")),ot(br,tt)}function qt(){if(p.removeZoombox(N),!(Ne===null||dt===null)){var rr={};Ot(rr),p.showDoubleClickNotifier(N),M.call("_guiRelayout",N,rr)}}function Ot(rr){var er=ye._rl,pr=(er[1]-er[0])/(1-ee/X)/X,Xr=[er[0]+(Ne-ee)*pr,er[0]+(dt-ee)*pr];rr[se.id+".radialaxis.range"]=Xr}function $t(rr,er){var pr=N._fullLayout.clickmode;if(p.removeZoombox(N),rr===2){var Xr={};for(var hn in se.viewInitial)Xr[se.id+"."+hn]=se.viewInitial[hn];N.emit("plotly_doubleclick",null),M.call("_guiRelayout",N,Xr)}pr.indexOf("select")>-1&&rr===1&&_(er,N,[se.xaxis],[se.yaxis],se.id,Qe),pr.indexOf("event")>-1&&c.click(N,er,se.id)}Qe.prepFn=function(rr,er,pr){var Xr=N._fullLayout.dragmode,hn=Ve.getBoundingClientRect();N._fullLayout._calcInverseTransform(N);var Qr=N._fullLayout._invTransform;xe=N._fullLayout._invScaleX,Pe=N._fullLayout._invScaleY;var nt=T.apply3DTransform(Qr)(er-hn.left,pr-hn.top);if(Fe=nt[0],Le=nt[1],pe){var Ht=L.findPolygonOffset(X,fe[0],fe[1],pe);Fe+=le+Ht[0],Le+=ge+Ht[1]}switch(Xr){case"zoom":Qe.clickFn=$t,oe||(pe?Qe.moveFn=Bt:Qe.moveFn=Pt,Qe.doneFn=qt,Ge());break;case"select":case"lasso":l(rr,er,pr,Qe,Xr);break}},y.init(Qe)},G.updateRadialDrag=function(re,se,oe){var N=this,U=N.gd,q=N.layers,Q=N.radius,W=N.innerRadius,X=N.cx,ee=N.cy,te=N.radialAxis,ie=u.radialDragBoxSize,le=ie/2;if(!te.visible)return;var ge=O(N.radialAxisAngle),fe=te._rl,pe=fe[0],ye=fe[1],Te=fe[oe],_e=.75*(fe[1]-fe[0])/(1-N.getHole(se))/Q,De,Be,Ue;oe?(De=X+(Q+le)*Math.cos(ge),Be=ee-(Q+le)*Math.sin(ge),Ue="radialdrag"):(De=X+(W-le)*Math.cos(ge),Be=ee-(W-le)*Math.sin(ge),Ue="radialdrag-inner");var xe=p.makeRectDragger(q,Ue,"crosshair",-le,-le,ie,ie),Pe={element:xe,gd:U};re.dragmode===!1&&(Pe.dragmode=!1),j(w.select(xe),te.visible&&W<Q,{transform:a(De,Be)});var Ve,Qe,Fe;function Le(At,zt){if(Ve)Ve(At,zt);else{var Ut=[At,-zt],Ct=[Math.cos(ge),Math.sin(ge)],Mt=Math.abs(T.dot(Ut,Ct)/Math.sqrt(T.dot(Ut,Ut)));isNaN(Mt)||(Ve=Mt<.5?Dt:Xt)}var rt={};Ne(rt),U.emit("plotly_relayouting",rt)}function Ne(At){Qe!==null?At[N.id+".radialaxis.angle"]=Qe:Fe!==null&&(At[N.id+".radialaxis.range["+oe+"]"]=Fe)}function dt(){Qe!==null?M.call("_guiRelayout",U,N.id+".radialaxis.angle",Qe):Fe!==null&&M.call("_guiRelayout",U,N.id+".radialaxis.range["+oe+"]",Fe)}function Dt(At,zt){if(oe!==0){var Ut=De+At,Ct=Be+zt;Qe=Math.atan2(ee-Ct,Ut-X),N.vangles&&(Qe=Y(Qe,N.vangles)),Qe=F(Qe);var Mt=a(X,ee)+e(-Qe);q["radial-axis"].attr("transform",Mt),q["radial-line"].select("line").attr("transform",Mt);var rt=N.gd._fullLayout,ct=rt[N.id];N.updateRadialAxisTitle(rt,ct,Qe)}}function Xt(At,zt){var Ut=T.dot([At,-zt],[Math.cos(ge),Math.sin(ge)]);if(Fe=Te-_e*Ut,_e>0!=(oe?Fe>pe:Fe<ye)){Fe=null;return}var Ct=U._fullLayout,Mt=Ct[N.id];te.range[oe]=Fe,te._rl[oe]=Fe,N.updateRadialAxis(Ct,Mt),N.xaxis.setRange(),N.xaxis.setScale(),N.yaxis.setRange(),N.yaxis.setScale();var rt=!1;for(var ct in N.traceHash){var Ze=N.traceHash[ct],ke=T.filterVisible(Ze),Ge=Ze[0][0].trace._module;Ge.plot(U,N,ke,Mt),M.traceIs(ct,"gl")&&ke.length&&(rt=!0)}rt&&(m(U),h(U))}Pe.prepFn=function(){Ve=null,Qe=null,Fe=null,Pe.moveFn=Le,Pe.doneFn=dt,s(U)},Pe.clampFn=function(At,zt){return Math.sqrt(At*At+zt*zt)<u.MINDRAG&&(At=0,zt=0),[At,zt]},y.init(Pe)},G.updateAngularDrag=function(re){var se=this,oe=se.gd,N=se.layers,U=se.radius,q=se.angularAxis,Q=se.cx,W=se.cy,X=se.cxx,ee=se.cyy,te=u.angularDragBoxSize,ie=p.makeDragger(N,"path","angulardrag",re.dragmode===!1?"none":"move"),le={element:ie,gd:oe};re.dragmode===!1?le.dragmode=!1:w.select(ie).attr("d",se.pathAnnulus(U,U+te)).attr("transform",a(Q,W)).call(A,"move");function ge(Fe,Le){return Math.atan2(ee+te-Le,Fe-X-te)}var fe=N.frontplot.select(".scatterlayer").selectAll(".trace"),pe=fe.selectAll(".point"),ye=fe.selectAll(".textpoint"),Te,_e,De,Be,Ue,xe;function Pe(Fe,Le){var Ne=se.gd._fullLayout,dt=Ne[se.id],Dt=Te+Fe*re._invScaleX,Xt=_e+Le*re._invScaleY,At=ge(Dt,Xt),zt=F(At-xe);if(Be=De+zt,N.frontplot.attr("transform",a(se.xOffset2,se.yOffset2)+e([-zt,X,ee])),se.vangles){Ue=se.radialAxisAngle+zt;var Ut=a(Q,W)+e(-zt),Ct=a(Q,W)+e(-Ue);N.bg.attr("transform",Ut),N["radial-grid"].attr("transform",Ut),N["radial-axis"].attr("transform",Ct),N["radial-line"].select("line").attr("transform",Ct),se.updateRadialAxisTitle(Ne,dt,Ue)}else se.clipPaths.forTraces.select("path").attr("transform",a(X,ee)+e(zt));pe.each(function(){var Je=w.select(this),ot=r.getTranslate(Je);Je.attr("transform",a(ot.x,ot.y)+e([zt]))}),ye.each(function(){var Je=w.select(this),ot=Je.select("text"),Pt=r.getTranslate(Je);Je.attr("transform",e([zt,ot.attr("x"),ot.attr("y")])+a(Pt.x,Pt.y))}),q.rotation=T.modHalf(Be,360),se.updateAngularAxis(Ne,dt),se._hasClipOnAxisFalse&&!T.isFullCircle(se.sectorInRad)&&fe.call(r.hideOutsideRangePoints,se);var Mt=!1;for(var rt in se.traceHash)if(M.traceIs(rt,"gl")){var ct=se.traceHash[rt],Ze=T.filterVisible(ct),ke=ct[0][0].trace._module;ke.plot(oe,se,Ze,dt),Ze.length&&(Mt=!0)}Mt&&(m(oe),h(oe));var Ge={};Ve(Ge),oe.emit("plotly_relayouting",Ge)}function Ve(Fe){Fe[se.id+".angularaxis.rotation"]=Be,se.vangles&&(Fe[se.id+".radialaxis.angle"]=Ue)}function Qe(){ye.select("text").attr("transform",null);var Fe={};Ve(Fe),M.call("_guiRelayout",oe,Fe)}le.prepFn=function(Fe,Le,Ne){var dt=re[se.id];De=dt.angularaxis.rotation;var Dt=ie.getBoundingClientRect();Te=Le-Dt.left,_e=Ne-Dt.top,oe._fullLayout._calcInverseTransform(oe);var Xt=T.apply3DTransform(re._invTransform)(Te,_e);Te=Xt[0],_e=Xt[1],xe=ge(Te,_e),le.moveFn=Pe,le.doneFn=Qe,s(oe)},se.vangles&&!T.isFullCircle(se.sectorInRad)&&(le.prepFn=T.noop,A(w.select(ie),null)),y.init(le)},G.isPtInside=function(re){if(this.isSmith)return!0;var se=this.sectorInRad,oe=this.vangles,N=this.angularAxis.c2g(re.theta),U=this.radialAxis,q=U.c2l(re.r),Q=U._rl,W=oe?L.isPtInsidePolygon:T.isPtInsideSector;return W(q,N,Q,se,oe)},G.pathArc=function(re){var se=this.sectorInRad,oe=this.vangles,N=oe?L.pathPolygon:T.pathArc;return N(re,se[0],se[1],oe)},G.pathSector=function(re){var se=this.sectorInRad,oe=this.vangles,N=oe?L.pathPolygon:T.pathSector;return N(re,se[0],se[1],oe)},G.pathAnnulus=function(re,se){var oe=this.sectorInRad,N=this.vangles,U=N?L.pathPolygonAnnulus:T.pathAnnulus;return U(re,se,oe[0],oe[1],N)},G.pathSubplot=function(){var re=this.innerRadius,se=this.radius;return re?this.pathAnnulus(re,se):this.pathSector(se)},G.fillViewInitialKey=function(re,se){re in this.viewInitial||(this.viewInitial[re]=se)};function J(re){var se=re.ticks+String(re.ticklen)+String(re.showticklabels);return"side"in re&&(se+=re.side),se}function Z(re){var se=re[0],oe=re[1],N=oe-se,U=R(se,360),q=U+N,Q=Math.cos(O(U)),W=Math.sin(O(U)),X=Math.cos(O(q)),ee=Math.sin(O(q)),te,ie,le,ge;return U<=90&&q>=90||U>90&&q>=450?ge=1:W<=0&&ee<=0?ge=0:ge=Math.max(W,ee),U<=180&&q>=180||U>180&&q>=540?te=-1:Q>=0&&X>=0?te=0:te=Math.min(Q,X),U<=270&&q>=270||U>270&&q>=630?ie=-1:W>=0&&ee>=0?ie=0:ie=Math.min(W,ee),q>=360?le=1:Q<=0&&X<=0?le=0:le=Math.max(Q,X),[te,ie,le,ge]}function Y(re,se){var oe=function(U){return T.angleDist(re,U)},N=T.findIndexOfMin(se,oe);return se[N]}function j(re,se,oe){return se?(re.attr("display",null),re.attr(oe)):re&&re.attr("display","none"),re}},{"../../components/color":366,"../../components/dragelement":385,"../../components/drawing":388,"../../components/fx":406,"../../components/titles":464,"../../constants/alignment":471,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/setcursor":524,"../../plot_api/subroutines":544,"../../plots/cartesian/axes":554,"../../registry":638,"../cartesian/autorange":553,"../cartesian/dragbox":563,"../cartesian/select":575,"../cartesian/set_convert":576,"../plots":619,"../smith/helpers":628,"./constants":620,"./helpers":621,"./set_convert":626,"@plotly/d3":58,tinycolor2:312}],626:[function(d,ne,ae){var w=d("../../lib"),v=d("../cartesian/set_convert"),M=w.deg2rad,T=w.rad2deg;ne.exports=function(f,o,i){switch(v(f,i),f._id){case"x":case"radialaxis":e(f,o);break;case"angularaxis":r(f,o);break}};function e(t,f){var o=f._subplot;t.setGeometry=function(){var i=t._rl[0],g=t._rl[1],p=o.innerRadius,y=(o.radius-p)/(g-i),c=p/y,b=i>g?function(l){return l<=0}:function(l){return l>=0};t.c2g=function(l){var _=t.c2l(l)-i;return(b(_)?_:0)+c},t.g2c=function(l){return t.l2c(l+i-c)},t.g2p=function(l){return l*y},t.c2p=function(l){return t.g2p(t.c2g(l))}}}function a(t,f){return f==="degrees"?M(t):t}function n(t,f){return f==="degrees"?T(t):t}function r(t,f){var o=t.type;if(o==="linear"){var i=t.d2c,g=t.c2d;t.d2c=function(p,y){return a(i(p),y)},t.c2d=function(p,y){return g(n(p,y))}}t.makeCalcdata=function(p,y){var c=p[y],b=p._length,l,_,s=function(u){return t.d2c(u,p.thetaunit)};if(c){if(w.isTypedArray(c)&&o==="linear"){if(b===c.length)return c;if(c.subarray)return c.subarray(0,b)}for(l=new Array(b),_=0;_<b;_++)l[_]=s(c[_])}else{var A=y+"0",m="d"+y,h=A in p?s(p[A]):0,x=p[m]?s(p[m]):(t.period||2*Math.PI)/b;for(l=new Array(b),_=0;_<b;_++)l[_]=h+_*x}return l},t.setGeometry=function(){var p=f.sector,y=p.map(M),c={clockwise:-1,counterclockwise:1}[t.direction],b=M(t.rotation),l=function(L){return c*L+b},_=function(L){return(L-b)/c},s,A,m,h;switch(o){case"linear":A=s=w.identity,h=M,m=T,t.range=w.isFullCircle(y)?[p[0],p[0]+360]:y.map(_).map(T);break;case"category":var x=t._categories.length,u=t.period?Math.max(t.period,x):x;u===0&&(u=1),A=h=function(L){return L*2*Math.PI/u},s=m=function(L){return L*u/Math.PI/2},t.range=[0,u];break}t.c2g=function(L){return l(A(L))},t.g2c=function(L){return s(_(L))},t.t2g=function(L){return l(h(L))},t.g2t=function(L){return m(_(L))}}}},{"../../lib":503,"../cartesian/set_convert":576}],627:[function(d,ne,ae){ne.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},{}],628:[function(d,ne,ae){function w(n){return n<0?-1:n>0?1:0}function v(n){var r=n[0],t=n[1];if(!isFinite(r)||!isFinite(t))return[1,0];var f=(r+1)*(r+1)+t*t;return[(r*r+t*t-1)/f,2*t/f]}function M(n,r){var t=r[0],f=r[1];return[t*n.radius+n.cx,-f*n.radius+n.cy]}function T(n,r){return r*n.radius}function e(n,r,t,f){var o=M(n,v([t,r])),i=o[0],g=o[1],p=M(n,v([f,r])),y=p[0],c=p[1];if(r===0)return["M"+i+","+g,"L"+y+","+c].join(" ");var b=T(n,1/Math.abs(r));return["M"+i+","+g,"A"+b+","+b+" 0 0,"+(r<0?1:0)+" "+y+","+c].join(" ")}function a(n,r,t,f){var o=T(n,1/(r+1)),i=M(n,v([r,t])),g=i[0],p=i[1],y=M(n,v([r,f])),c=y[0],b=y[1];if(w(t)!==w(f)){var l=M(n,v([r,0])),_=l[0],s=l[1];return["M"+g+","+p,"A"+o+","+o+" 0 0,"+(0<t?0:1)+" "+_+","+s,"A"+o+","+o+" 0 0,"+(f<0?0:1)+c+","+b].join(" ")}return["M"+g+","+p,"A"+o+","+o+" 0 0,"+(f<t?0:1)+" "+c+","+b].join(" ")}ne.exports={smith:v,reactanceArc:e,resistanceArc:a,smithTransform:M}},{}],629:[function(d,ne,ae){var w=d("../get_data").getSubplotCalcData,v=d("../../lib").counterRegex,M=d("../polar/polar"),T=d("./constants"),e=T.attr,a=T.name,n=v(a),r={};r[e]={valType:"subplotid",dflt:a,editType:"calc"};function t(o){for(var i=o._fullLayout,g=o.calcdata,p=i._subplots[a],y=0;y<p.length;y++){var c=p[y],b=w(g,a,c),l=i[c]._subplot;l||(l=M(o,c,!0),i[c]._subplot=l),l.plot(b,i,o._promises)}}function f(o,i,g,p){for(var y=p._subplots[a]||[],c=0;c<y.length;c++){var b=y[c],l=p[b]._subplot;if(!i[b]&&!!l){l.framework.remove();for(var _ in l.clipPaths)l.clipPaths[_].remove()}}}ne.exports={attr:e,name:a,idRoot:a,idRegex:n,attrRegex:n,attributes:r,layoutAttributes:d("./layout_attributes"),supplyLayoutDefaults:d("./layout_defaults"),plot:t,clean:f,toSVG:d("../cartesian").toSVG}},{"../../lib":503,"../cartesian":568,"../get_data":593,"../polar/polar":625,"./constants":627,"./layout_attributes":630,"./layout_defaults":631}],630:[function(d,ne,ae){var w=d("../../components/color/attributes"),v=d("../cartesian/layout_attributes"),M=d("../domain").attributes,T=d("../../lib").extendFlat,e=d("../../plot_api/edit_types").overrideAll,a=e({color:v.color,showline:T({},v.showline,{dflt:!0}),linecolor:v.linecolor,linewidth:v.linewidth,showgrid:T({},v.showgrid,{dflt:!0}),gridcolor:v.gridcolor,gridwidth:v.gridwidth,griddash:v.griddash},"plot","from-root"),n=e({ticklen:v.ticklen,tickwidth:T({},v.tickwidth,{dflt:2}),tickcolor:v.tickcolor,showticklabels:v.showticklabels,showtickprefix:v.showtickprefix,tickprefix:v.tickprefix,showticksuffix:v.showticksuffix,ticksuffix:v.ticksuffix,tickfont:v.tickfont,tickformat:v.tickformat,hoverformat:v.hoverformat,layer:v.layer},"plot","from-root"),r=T({visible:T({},v.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:T({},v.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},a,n),t=T({visible:T({},v.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:v.ticks,editType:"calc"},a,n);ne.exports={domain:M({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:w.background},realaxis:r,imaginaryaxis:t,editType:"calc"}},{"../../components/color/attributes":365,"../../lib":503,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],631:[function(d,ne,ae){var w=d("../../lib"),v=d("../../components/color"),M=d("../../plot_api/plot_template"),T=d("../subplot_defaults"),e=d("../get_data").getSubplotData,a=d("../cartesian/prefix_suffix_defaults"),n=d("../cartesian/tick_label_defaults"),r=d("../cartesian/line_grid_defaults"),t=d("../cartesian/set_convert"),f=d("./layout_attributes"),o=d("./constants"),i=o.axisNames,g=y(function(c){return c.slice().reverse().map(function(b){return-b}).concat([0]).concat(c)},String);function p(c,b,l,_){var s=l("bgcolor");_.bgColor=v.combine(s,_.paper_bgcolor);var A=e(_.fullData,o.name,_.id),m=_.layoutOut,h;function x(G,J){return l(h+"."+G,J)}for(var u=0;u<i.length;u++){h=i[u],w.isPlainObject(c[h])||(c[h]={});var L=c[h],S=M.newContainer(b,h);S._id=S._name=h,S._attr=_.id+"."+h,S._traceIndices=A.map(function(G){return G._expandedIndex});var k=x("visible");if(S.type="linear",t(S,m),a(L,S,x,S.type),k){var P=h==="realaxis";if(P&&x("side"),P)x("tickvals");else{var z=g(b.realaxis.tickvals||f.realaxis.tickvals.dflt);x("tickvals",z)}var I,D,R,O,F=_.font||{};k&&(I=x("color"),D=I===L.color?I:F.color,R=F.size,O=F.family),n(L,S,x,S.type,{noTicklabelstep:!0,noAng:!P,noExp:!0,font:{color:D,size:R,family:O}}),w.coerce2(c,b,f,h+".ticklen"),w.coerce2(c,b,f,h+".tickwidth"),w.coerce2(c,b,f,h+".tickcolor",b.color);var V=x("ticks");V||(delete b[h].ticklen,delete b[h].tickwidth,delete b[h].tickcolor),r(L,S,x,{dfltColor:I,bgColor:_.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:f[h]}),x("layer")}x("hoverformat"),delete S.type,S._input=L}}ne.exports=function(b,l,_){T(b,l,_,{noUirevision:!0,type:o.name,attributes:f,handleDefaults:p,font:l.font,paper_bgcolor:l.paper_bgcolor,fullData:_,layoutOut:l})};function y(c,b){var l={};return function(_){var s=b?b(_):_;if(s in l)return l[s];var A=c(_);return l[s]=A,A}}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/set_convert":576,"../cartesian/tick_label_defaults":578,"../get_data":593,"../subplot_defaults":632,"./constants":627,"./layout_attributes":630}],632:[function(d,ne,ae){var w=d("../lib"),v=d("../plot_api/plot_template"),M=d("./domain").defaults;ne.exports=function(e,a,n,r){var t=r.type,f=r.attributes,o=r.handleDefaults,i=r.partition||"x",g=a._subplots[t],p=g.length,y=p&&g[0].replace(/\d+$/,""),c,b;function l(m,h){return w.coerce(c,b,f,m,h)}for(var _=0;_<p;_++){var s=g[_];e[s]?c=e[s]:c=e[s]={},b=v.newContainer(a,s,y),r.noUirevision||l("uirevision",a.uirevision);var A={};A[i]=[_/p,(_+1)/p],M(b,a,l,A),r.id=s,o(c,b,l,r)}}},{"../lib":503,"../plot_api/plot_template":543,"./domain":584}],633:[function(d,ne,ae){var w=d("../constants/docs");w.FORMAT_LINK,w.DATE_FORMAT_LINK;function v(M){var T=M.description?" "+M.description:"",e=M.keys||[];if(e.length>0){for(var a=[],n=0;n<e.length;n++)a[n]="`"+e[n]+"`";T=T+"Finally, the template string has access to ",e.length===1?T="variable "+a[0]:T="variables "+a.slice(0,-1).join(", ")+" and "+a.slice(-1)+"."}return T}ae.hovertemplateAttrs=function(M,T){M=M||{},T=T||{},v(T);var e={valType:"string",dflt:"",editType:M.editType||"none"};return M.arrayOk!==!1&&(e.arrayOk=!0),e},ae.texttemplateAttrs=function(M,T){M=M||{},T=T||{},v(T);var e={valType:"string",dflt:"",editType:M.editType||"calc"};return M.arrayOk!==!1&&(e.arrayOk=!0),e}},{"../constants/docs":474}],634:[function(d,ne,ae){var w=d("./ternary"),v=d("../../plots/get_data").getSubplotCalcData,M=d("../../lib").counterRegex,T="ternary";ae.name=T;var e=ae.attr="subplot";ae.idRoot=T,ae.idRegex=ae.attrRegex=M(T);var a=ae.attributes={};a[e]={valType:"subplotid",dflt:"ternary",editType:"calc"},ae.layoutAttributes=d("./layout_attributes"),ae.supplyLayoutDefaults=d("./layout_defaults"),ae.plot=function(r){for(var t=r._fullLayout,f=r.calcdata,o=t._subplots[T],i=0;i<o.length;i++){var g=o[i],p=v(f,T,g),y=t[g]._subplot;y||(y=new w({id:g,graphDiv:r,container:t._ternarylayer.node()},t),t[g]._subplot=y),y.plot(p,t,r._promises)}},ae.clean=function(n,r,t,f){for(var o=f._subplots[T]||[],i=0;i<o.length;i++){var g=o[i],p=f[g]._subplot;!r[g]&&!!p&&(p.plotContainer.remove(),p.clipDef.remove(),p.clipDefRelative.remove(),p.layers["a-title"].remove(),p.layers["b-title"].remove(),p.layers["c-title"].remove())}}},{"../../lib":503,"../../plots/get_data":593,"./layout_attributes":635,"./layout_defaults":636,"./ternary":637}],635:[function(d,ne,ae){var w=d("../../components/color/attributes"),v=d("../domain").attributes,M=d("../cartesian/layout_attributes"),T=d("../../plot_api/edit_types").overrideAll,e=d("../../lib/extend").extendFlat,a={title:{text:M.title.text,font:M.title.font},color:M.color,tickmode:M.tickmode,nticks:e({},M.nticks,{dflt:6,min:1}),tick0:M.tick0,dtick:M.dtick,tickvals:M.tickvals,ticktext:M.ticktext,ticks:M.ticks,ticklen:M.ticklen,tickwidth:M.tickwidth,tickcolor:M.tickcolor,ticklabelstep:M.ticklabelstep,showticklabels:M.showticklabels,showtickprefix:M.showtickprefix,tickprefix:M.tickprefix,showticksuffix:M.showticksuffix,ticksuffix:M.ticksuffix,showexponent:M.showexponent,exponentformat:M.exponentformat,minexponent:M.minexponent,separatethousands:M.separatethousands,tickfont:M.tickfont,tickangle:M.tickangle,tickformat:M.tickformat,tickformatstops:M.tickformatstops,hoverformat:M.hoverformat,showline:e({},M.showline,{dflt:!0}),linecolor:M.linecolor,linewidth:M.linewidth,showgrid:e({},M.showgrid,{dflt:!0}),gridcolor:M.gridcolor,gridwidth:M.gridwidth,griddash:M.griddash,layer:M.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:M._deprecated.title,titlefont:M._deprecated.titlefont}},n=ne.exports=T({domain:v({name:"ternary"}),bgcolor:{valType:"color",dflt:w.background},sum:{valType:"number",dflt:1,min:0},aaxis:a,baxis:a,caxis:a},"plot","from-root");n.uirevision={valType:"any",editType:"none"},n.aaxis.uirevision=n.baxis.uirevision=n.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],636:[function(d,ne,ae){var w=d("../../components/color"),v=d("../../plot_api/plot_template"),M=d("../../lib"),T=d("../subplot_defaults"),e=d("../cartesian/tick_label_defaults"),a=d("../cartesian/prefix_suffix_defaults"),n=d("../cartesian/tick_mark_defaults"),r=d("../cartesian/tick_value_defaults"),t=d("../cartesian/line_grid_defaults"),f=d("./layout_attributes"),o=["aaxis","baxis","caxis"];ne.exports=function(y,c,b){T(y,c,b,{type:"ternary",attributes:f,handleDefaults:i,font:c.font,paper_bgcolor:c.paper_bgcolor})};function i(p,y,c,b){var l=c("bgcolor"),_=c("sum");b.bgColor=w.combine(l,b.paper_bgcolor);for(var s,A,m,h=0;h<o.length;h++)s=o[h],A=p[s]||{},m=v.newContainer(y,s),m._name=s,g(A,m,b,y);var x=y.aaxis,u=y.baxis,L=y.caxis;x.min+u.min+L.min>=_&&(x.min=0,u.min=0,L.min=0,p.aaxis&&delete p.aaxis.min,p.baxis&&delete p.baxis.min,p.caxis&&delete p.caxis.min)}function g(p,y,c,b){var l=f[y._name];function _(S,k){return M.coerce(p,y,l,S,k)}_("uirevision",b.uirevision),y.type="linear";var s=_("color"),A=s!==l.color.dflt?s:c.font.color,m=y._name,h=m.charAt(0).toUpperCase(),x="Component "+h,u=_("title.text",x);y._hovertitle=u===x?u:h,M.coerceFont(_,"title.font",{family:c.font.family,size:M.bigFont(c.font.size),color:A}),_("min"),r(p,y,_,"linear"),a(p,y,_,"linear"),e(p,y,_,"linear"),n(p,y,_,{outerTicks:!0});var L=_("showticklabels");L&&(M.coerceFont(_,"tickfont",{family:c.font.family,size:c.font.size,color:A}),_("tickangle"),_("tickformat")),t(p,y,_,{dfltColor:s,bgColor:c.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:l}),_("hoverformat"),_("layer")}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/tick_label_defaults":578,"../cartesian/tick_mark_defaults":579,"../cartesian/tick_value_defaults":580,"../subplot_defaults":632,"./layout_attributes":635}],637:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("tinycolor2"),M=d("../../registry"),T=d("../../lib"),e=T.strTranslate,a=T._,n=d("../../components/color"),r=d("../../components/drawing"),t=d("../cartesian/set_convert"),f=d("../../lib/extend").extendFlat,o=d("../plots"),i=d("../cartesian/axes"),g=d("../../components/dragelement"),p=d("../../components/fx"),y=d("../../components/dragelement/helpers"),c=y.freeMode,b=y.rectMode,l=d("../../components/titles"),_=d("../cartesian/select").prepSelect,s=d("../cartesian/select").selectOnClick,A=d("../cartesian/select").clearSelect,m=d("../cartesian/select").clearSelectionsCache,h=d("../cartesian/constants");function x(F,V){this.id=F.id,this.graphDiv=F.graphDiv,this.init(V),this.makeFramework(V),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}ne.exports=x;var u=x.prototype;u.init=function(F){this.container=F._ternarylayer,this.defs=F._defs,this.layoutId=F._uid,this.traceHash={},this.layers={}},u.plot=function(F,V){var G=this,J=V[G.id],Z=V._size;G._hasClipOnAxisFalse=!1;for(var Y=0;Y<F.length;Y++){var j=F[Y][0].trace;if(j.cliponaxis===!1){G._hasClipOnAxisFalse=!0;break}}G.updateLayers(J),G.adjustLayout(J,Z),o.generalUpdatePerTraceModule(G.graphDiv,G,F,J),G.layers.plotbg.select("path").call(n.fill,J.bgcolor)},u.makeFramework=function(F){var V=this,G=V.graphDiv,J=F[V.id],Z=V.clipId="clip"+V.layoutId+V.id,Y=V.clipIdRelative="clip-relative"+V.layoutId+V.id;V.clipDef=T.ensureSingleById(F._clips,"clipPath",Z,function(j){j.append("path").attr("d","M0,0Z")}),V.clipDefRelative=T.ensureSingleById(F._clips,"clipPath",Y,function(j){j.append("path").attr("d","M0,0Z")}),V.plotContainer=T.ensureSingle(V.container,"g",V.id),V.updateLayers(J),r.setClipUrl(V.layers.backplot,Z,G),r.setClipUrl(V.layers.grids,Z,G)},u.updateLayers=function(F){var V=this,G=V.layers,J=["draglayer","plotbg","backplot","grids"];F.aaxis.layer==="below traces"&&J.push("aaxis","aline"),F.baxis.layer==="below traces"&&J.push("baxis","bline"),F.caxis.layer==="below traces"&&J.push("caxis","cline"),J.push("frontplot"),F.aaxis.layer==="above traces"&&J.push("aaxis","aline"),F.baxis.layer==="above traces"&&J.push("baxis","bline"),F.caxis.layer==="above traces"&&J.push("caxis","cline");var Z=V.plotContainer.selectAll("g.toplevel").data(J,String),Y=["agrid","bgrid","cgrid"];Z.enter().append("g").attr("class",function(j){return"toplevel "+j}).each(function(j){var re=w.select(this);G[j]=re,j==="frontplot"?re.append("g").classed("scatterlayer",!0):j==="backplot"?re.append("g").classed("maplayer",!0):j==="plotbg"?re.append("path").attr("d","M0,0Z"):j==="aline"||j==="bline"||j==="cline"?re.append("path"):j==="grids"&&Y.forEach(function(se){G[se]=re.append("g").classed("grid "+se,!0)})}),Z.order()};var L=Math.sqrt(4/3);u.adjustLayout=function(F,V){var G=this,J=F.domain,Z=(J.x[0]+J.x[1])/2,Y=(J.y[0]+J.y[1])/2,j=J.x[1]-J.x[0],re=J.y[1]-J.y[0],se=j*V.w,oe=re*V.h,N=F.sum,U=F.aaxis.min,q=F.baxis.min,Q=F.caxis.min,W,X,ee,te,ie,le;se>L*oe?(te=oe,ee=te*L):(ee=se,te=ee/L),ie=j*ee/se,le=re*te/oe,W=V.l+V.w*Z-ee/2,X=V.t+V.h*(1-Y)-te/2,G.x0=W,G.y0=X,G.w=ee,G.h=te,G.sum=N,G.xaxis={type:"linear",range:[U+2*Q-N,N-U-2*q],domain:[Z-ie/2,Z+ie/2],_id:"x"},t(G.xaxis,G.graphDiv._fullLayout),G.xaxis.setScale(),G.xaxis.isPtWithinRange=function(Pe){return Pe.a>=G.aaxis.range[0]&&Pe.a<=G.aaxis.range[1]&&Pe.b>=G.baxis.range[1]&&Pe.b<=G.baxis.range[0]&&Pe.c>=G.caxis.range[1]&&Pe.c<=G.caxis.range[0]},G.yaxis={type:"linear",range:[U,N-q-Q],domain:[Y-le/2,Y+le/2],_id:"y"},t(G.yaxis,G.graphDiv._fullLayout),G.yaxis.setScale(),G.yaxis.isPtWithinRange=function(){return!0};var ge=G.yaxis.domain[0],fe=G.aaxis=f({},F.aaxis,{range:[U,N-q-Q],side:"left",tickangle:(+F.aaxis.tickangle||0)-30,domain:[ge,ge+le*L],anchor:"free",position:0,_id:"y",_length:ee});t(fe,G.graphDiv._fullLayout),fe.setScale();var pe=G.baxis=f({},F.baxis,{range:[N-U-Q,q],side:"bottom",domain:G.xaxis.domain,anchor:"free",position:0,_id:"x",_length:ee});t(pe,G.graphDiv._fullLayout),pe.setScale();var ye=G.caxis=f({},F.caxis,{range:[N-U-q,Q],side:"right",tickangle:(+F.caxis.tickangle||0)+30,domain:[ge,ge+le*L],anchor:"free",position:0,_id:"y",_length:ee});t(ye,G.graphDiv._fullLayout),ye.setScale();var Te="M"+W+","+(X+te)+"h"+ee+"l-"+ee/2+",-"+te+"Z";G.clipDef.select("path").attr("d",Te),G.layers.plotbg.select("path").attr("d",Te);var _e="M0,"+te+"h"+ee+"l-"+ee/2+",-"+te+"Z";G.clipDefRelative.select("path").attr("d",_e);var De=e(W,X);G.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",De),G.clipDefRelative.select("path").attr("transform",null);var Be=e(W-pe._offset,X+te);G.layers.baxis.attr("transform",Be),G.layers.bgrid.attr("transform",Be);var Ue=e(W+ee/2,X)+"rotate(30)"+e(0,-fe._offset);G.layers.aaxis.attr("transform",Ue),G.layers.agrid.attr("transform",Ue);var xe=e(W+ee/2,X)+"rotate(-30)"+e(0,-ye._offset);G.layers.caxis.attr("transform",xe),G.layers.cgrid.attr("transform",xe),G.drawAxes(!0),G.layers.aline.select("path").attr("d",fe.showline?"M"+W+","+(X+te)+"l"+ee/2+",-"+te:"M0,0").call(n.stroke,fe.linecolor||"#000").style("stroke-width",(fe.linewidth||0)+"px"),G.layers.bline.select("path").attr("d",pe.showline?"M"+W+","+(X+te)+"h"+ee:"M0,0").call(n.stroke,pe.linecolor||"#000").style("stroke-width",(pe.linewidth||0)+"px"),G.layers.cline.select("path").attr("d",ye.showline?"M"+(W+ee/2)+","+X+"l"+ee/2+","+te:"M0,0").call(n.stroke,ye.linecolor||"#000").style("stroke-width",(ye.linewidth||0)+"px"),G.graphDiv._context.staticPlot||G.initInteractions(),r.setClipUrl(G.layers.frontplot,G._hasClipOnAxisFalse?null:G.clipId,G.graphDiv)},u.drawAxes=function(F){var V=this,G=V.graphDiv,J=V.id.substr(7)+"title",Z=V.layers,Y=V.aaxis,j=V.baxis,re=V.caxis;if(V.drawAx(Y),V.drawAx(j),V.drawAx(re),F){var se=Math.max(Y.showticklabels?Y.tickfont.size/2:0,(re.showticklabels?re.tickfont.size*.75:0)+(re.ticks==="outside"?re.ticklen*.87:0)),oe=(j.showticklabels?j.tickfont.size:0)+(j.ticks==="outside"?j.ticklen:0)+3;Z["a-title"]=l.draw(G,"a"+J,{propContainer:Y,propName:V.id+".aaxis.title",placeholder:a(G,"Click to enter Component A title"),attributes:{x:V.x0+V.w/2,y:V.y0-Y.title.font.size/3-se,"text-anchor":"middle"}}),Z["b-title"]=l.draw(G,"b"+J,{propContainer:j,propName:V.id+".baxis.title",placeholder:a(G,"Click to enter Component B title"),attributes:{x:V.x0-oe,y:V.y0+V.h+j.title.font.size*.83+oe,"text-anchor":"middle"}}),Z["c-title"]=l.draw(G,"c"+J,{propContainer:re,propName:V.id+".caxis.title",placeholder:a(G,"Click to enter Component C title"),attributes:{x:V.x0+V.w+oe,y:V.y0+V.h+re.title.font.size*.83+oe,"text-anchor":"middle"}})}},u.drawAx=function(F){var V=this,G=V.graphDiv,J=F._name,Z=J.charAt(0),Y=F._id,j=V.layers[J],re=30,se=Z+"tickLayout",oe=S(F);V[se]!==oe&&(j.selectAll("."+Y+"tick").remove(),V[se]=oe),F.setScale();var N=i.calcTicks(F),U=i.clipEnds(F,N),q=i.makeTransTickFn(F),Q=i.getTickSigns(F)[2],W=T.deg2rad(re),X=Q*(F.linewidth||1)/2,ee=Q*F.ticklen,te=V.w,ie=V.h,le=Z==="b"?"M0,"+X+"l"+Math.sin(W)*ee+","+Math.cos(W)*ee:"M"+X+",0l"+Math.cos(W)*ee+","+-Math.sin(W)*ee,ge={a:"M0,0l"+ie+",-"+te/2,b:"M0,0l-"+te/2+",-"+ie,c:"M0,0l-"+ie+","+te/2}[Z];i.drawTicks(G,F,{vals:F.ticks==="inside"?U:N,layer:j,path:le,transFn:q,crisp:!1}),i.drawGrid(G,F,{vals:U,layer:V.layers[Z+"grid"],path:ge,transFn:q,crisp:!1}),i.drawLabels(G,F,{vals:N,layer:j,transFn:q,labelFns:i.makeLabelFns(F,0,re)})};function S(F){return F.ticks+String(F.ticklen)+String(F.showticklabels)}var k=h.MINZOOM/2+.87,P="m-0.87,.5h"+k+"v3h-"+(k+5.2)+"l"+(k/2+2.6)+",-"+(k*.87+4.5)+"l2.6,1.5l-"+k/2+","+k*.87+"Z",z="m0.87,.5h-"+k+"v3h"+(k+5.2)+"l-"+(k/2+2.6)+",-"+(k*.87+4.5)+"l-2.6,1.5l"+k/2+","+k*.87+"Z",I="m0,1l"+k/2+","+k*.87+"l2.6,-1.5l-"+(k/2+2.6)+",-"+(k*.87+4.5)+"l-"+(k/2+2.6)+","+(k*.87+4.5)+"l2.6,1.5l"+k/2+",-"+k*.87+"Z",D="m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2Z",R=!0;u.clearSelect=function(){m(this.dragOptions),A(this.dragOptions.gd)},u.initInteractions=function(){var F=this,V=F.layers.plotbg.select("path").node(),G=F.graphDiv,J=G._fullLayout._zoomlayer,Z,Y;this.dragOptions={element:V,gd:G,plotinfo:{id:F.id,domain:G._fullLayout[F.id].domain,xaxis:F.xaxis,yaxis:F.yaxis},subplot:F.id,prepFn:function(Be,Ue,xe){F.dragOptions.xaxes=[F.xaxis],F.dragOptions.yaxes=[F.yaxis],Z=G._fullLayout._invScaleX,Y=G._fullLayout._invScaleY;var Pe=F.dragOptions.dragmode=G._fullLayout.dragmode;c(Pe)?F.dragOptions.minDrag=1:F.dragOptions.minDrag=void 0,Pe==="zoom"?(F.dragOptions.moveFn=pe,F.dragOptions.clickFn=te,F.dragOptions.doneFn=ye,ie(Be,Ue,xe)):Pe==="pan"?(F.dragOptions.moveFn=_e,F.dragOptions.clickFn=te,F.dragOptions.doneFn=De,Te(),F.clearSelect(G)):(b(Pe)||c(Pe))&&_(Be,Ue,xe,F.dragOptions,Pe)}};var j,re,se,oe,N,U,q,Q,W,X;function ee(Be){var Ue={};return Ue[F.id+".aaxis.min"]=Be.a,Ue[F.id+".baxis.min"]=Be.b,Ue[F.id+".caxis.min"]=Be.c,Ue}function te(Be,Ue){var xe=G._fullLayout.clickmode;O(G),Be===2&&(G.emit("plotly_doubleclick",null),M.call("_guiRelayout",G,ee({a:0,b:0,c:0}))),xe.indexOf("select")>-1&&Be===1&&s(Ue,G,[F.xaxis],[F.yaxis],F.id,F.dragOptions),xe.indexOf("event")>-1&&p.click(G,Ue,F.id)}function ie(Be,Ue,xe){var Pe=V.getBoundingClientRect();j=Ue-Pe.left,re=xe-Pe.top,G._fullLayout._calcInverseTransform(G);var Ve=G._fullLayout._invTransform,Qe=T.apply3DTransform(Ve)(j,re);j=Qe[0],re=Qe[1],se={a:F.aaxis.range[0],b:F.baxis.range[1],c:F.caxis.range[1]},N=se,oe=F.aaxis.range[1]-se.a,U=v(F.graphDiv._fullLayout[F.id].bgcolor).getLuminance(),q="M0,"+F.h+"L"+F.w/2+", 0L"+F.w+","+F.h+"Z",Q=!1,W=J.append("path").attr("class","zoombox").attr("transform",e(F.x0,F.y0)).style({fill:U>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",q),X=J.append("path").attr("class","zoombox-corners").attr("transform",e(F.x0,F.y0)).style({fill:n.background,stroke:n.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),F.clearSelect(G)}function le(Be,Ue){return 1-Ue/F.h}function ge(Be,Ue){return 1-(Be+(F.h-Ue)/Math.sqrt(3))/F.w}function fe(Be,Ue){return(Be-(F.h-Ue)/Math.sqrt(3))/F.w}function pe(Be,Ue){var xe=j+Be*Z,Pe=re+Ue*Y,Ve=Math.max(0,Math.min(1,le(j,re),le(xe,Pe))),Qe=Math.max(0,Math.min(1,ge(j,re),ge(xe,Pe))),Fe=Math.max(0,Math.min(1,fe(j,re),fe(xe,Pe))),Le=(Ve/2+Fe)*F.w,Ne=(1-Ve/2-Qe)*F.w,dt=(Le+Ne)/2,Dt=Ne-Le,Xt=(1-Ve)*F.h,At=Xt-Dt/L;Dt<h.MINZOOM?(N=se,W.attr("d",q),X.attr("d","M0,0Z")):(N={a:se.a+Ve*oe,b:se.b+Qe*oe,c:se.c+Fe*oe},W.attr("d",q+"M"+Le+","+Xt+"H"+Ne+"L"+dt+","+At+"L"+Le+","+Xt+"Z"),X.attr("d","M"+j+","+re+D+"M"+Le+","+Xt+P+"M"+Ne+","+Xt+z+"M"+dt+","+At+I)),Q||(W.transition().style("fill",U>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),X.transition().style("opacity",1).duration(200),Q=!0),G.emit("plotly_relayouting",ee(N))}function ye(){O(G),N!==se&&(M.call("_guiRelayout",G,ee(N)),R&&G.data&&G._context.showTips&&(T.notifier(a(G,"Double-click to zoom back out"),"long"),R=!1))}function Te(){se={a:F.aaxis.range[0],b:F.baxis.range[1],c:F.caxis.range[1]},N=se}function _e(Be,Ue){var xe=Be/F.xaxis._m,Pe=Ue/F.yaxis._m;N={a:se.a-Pe,b:se.b+(xe+Pe)/2,c:se.c-(xe-Pe)/2};var Ve=[N.a,N.b,N.c].sort(T.sorterAsc),Qe={a:Ve.indexOf(N.a),b:Ve.indexOf(N.b),c:Ve.indexOf(N.c)};Ve[0]<0&&(Ve[1]+Ve[0]/2<0?(Ve[2]+=Ve[0]+Ve[1],Ve[0]=Ve[1]=0):(Ve[2]+=Ve[0]/2,Ve[1]+=Ve[0]/2,Ve[0]=0),N={a:Ve[Qe.a],b:Ve[Qe.b],c:Ve[Qe.c]},Ue=(se.a-N.a)*F.yaxis._m,Be=(se.c-N.c-se.b+N.b)*F.xaxis._m);var Fe=e(F.x0+Be,F.y0+Ue);F.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Fe);var Le=e(-Be,-Ue);F.clipDefRelative.select("path").attr("transform",Le),F.aaxis.range=[N.a,F.sum-N.b-N.c],F.baxis.range=[F.sum-N.a-N.c,N.b],F.caxis.range=[F.sum-N.a-N.b,N.c],F.drawAxes(!1),F._hasClipOnAxisFalse&&F.plotContainer.select(".scatterlayer").selectAll(".trace").call(r.hideOutsideRangePoints,F),G.emit("plotly_relayouting",ee(N))}function De(){M.call("_guiRelayout",G,ee(N))}V.onmousemove=function(Be){p.hover(G,Be,F.id),G._fullLayout._lasthover=V,G._fullLayout._hoversubplot=F.id},V.onmouseout=function(Be){G._dragging||g.unhover(G,Be)},g.init(this.dragOptions)};function O(F){w.select(F).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}},{"../../components/color":366,"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../components/titles":464,"../../lib":503,"../../lib/extend":493,"../../registry":638,"../cartesian/axes":554,"../cartesian/constants":561,"../cartesian/select":575,"../cartesian/set_convert":576,"../plots":619,"@plotly/d3":58,tinycolor2:312}],638:[function(d,ne,ae){var w=d("./lib/loggers"),v=d("./lib/noop"),M=d("./lib/push_unique"),T=d("./lib/is_plain_object"),e=d("./lib/dom").addStyleRule,a=d("./lib/extend"),n=d("./plots/attributes"),r=d("./plots/layout_attributes"),t=a.extendFlat,f=a.extendDeepAll;ae.modules={},ae.allCategories={},ae.allTypes=[],ae.subplotsRegistry={},ae.transformsRegistry={},ae.componentsRegistry={},ae.layoutArrayContainers=[],ae.layoutArrayRegexes=[],ae.traceLayoutAttributes={},ae.localeRegistry={},ae.apiMethodRegistry={},ae.collectableSubplotTypes=null,ae.register=function(m){if(ae.collectableSubplotTypes=null,m)m&&!Array.isArray(m)&&(m=[m]);else throw new Error("No argument passed to Plotly.register.");for(var h=0;h<m.length;h++){var x=m[h];if(!x)throw new Error("Invalid module was attempted to be registered!");switch(x.moduleType){case"trace":o(x);break;case"transform":p(x);break;case"component":g(x);break;case"locale":y(x);break;case"apiMethod":var u=x.name;ae.apiMethodRegistry[u]=x.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},ae.getModule=function(A){var m=ae.modules[s(A)];return m?m._module:!1},ae.traceIs=function(A,m){if(A=s(A),A==="various")return!1;var h=ae.modules[A];return h||(A&&w.log("Unrecognized trace type "+A+"."),h=ae.modules[n.type.dflt]),!!h.categories[m]},ae.getTransformIndices=function(A,m){for(var h=[],x=A.transforms||[],u=0;u<x.length;u++)x[u].type===m&&h.push(u);return h},ae.hasTransform=function(A,m){for(var h=A.transforms||[],x=0;x<h.length;x++)if(h[x].type===m)return!0;return!1},ae.getComponentMethod=function(A,m){var h=ae.componentsRegistry[A];return h&&h[m]||v},ae.call=function(){var A=arguments[0],m=[].slice.call(arguments,1);return ae.apiMethodRegistry[A].apply(null,m)};function o(A){var m=A.name,h=A.categories,x=A.meta;if(ae.modules[m]){w.log("Type "+m+" already registered");return}ae.subplotsRegistry[A.basePlotModule.name]||i(A.basePlotModule);for(var u={},L=0;L<h.length;L++)u[h[L]]=!0,ae.allCategories[h[L]]=!0;ae.modules[m]={_module:A,categories:u},x&&Object.keys(x).length&&(ae.modules[m].meta=x),ae.allTypes.push(m);for(var S in ae.componentsRegistry)b(S,m);A.layoutAttributes&&t(ae.traceLayoutAttributes,A.layoutAttributes);var k=A.basePlotModule,P=k.name;if(P==="mapbox"){var z=k.constants.styleRules;for(var I in z)e(".js-plotly-plot .plotly .mapboxgl-"+I,z[I])}(P==="geo"||P==="mapbox")&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function i(A){var m=A.name;if(ae.subplotsRegistry[m]){w.log("Plot type "+m+" already registered.");return}c(A),ae.subplotsRegistry[m]=A;for(var h in ae.componentsRegistry)_(h,A.name)}function g(A){if(typeof A.name!="string")throw new Error("Component module *name* must be a string.");var m=A.name;ae.componentsRegistry[m]=A,A.layoutAttributes&&(A.layoutAttributes._isLinkedToArray&&M(ae.layoutArrayContainers,m),c(A));for(var h in ae.modules)b(m,h);for(var x in ae.subplotsRegistry)_(m,x);for(var u in ae.transformsRegistry)l(m,u);A.schema&&A.schema.layout&&f(r,A.schema.layout)}function p(A){if(typeof A.name!="string")throw new Error("Transform module *name* must be a string.");var m="Transform module "+A.name,h=typeof A.transform=="function",x=typeof A.calcTransform=="function";if(!h&&!x)throw new Error(m+" is missing a *transform* or *calcTransform* method.");h&&x&&w.log([m+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),T(A.attributes)||w.log(m+" registered without an *attributes* object."),typeof A.supplyDefaults!="function"&&w.log(m+" registered without a *supplyDefaults* method."),ae.transformsRegistry[A.name]=A;for(var u in ae.componentsRegistry)l(u,A.name)}function y(A){var m=A.name,h=m.split("-")[0],x=A.dictionary,u=A.format,L=x&&Object.keys(x).length,S=u&&Object.keys(u).length,k=ae.localeRegistry,P=k[m];if(P||(k[m]=P={}),h!==m){var z=k[h];z||(k[h]=z={}),L&&z.dictionary===P.dictionary&&(z.dictionary=x),S&&z.format===P.format&&(z.format=u)}L&&(P.dictionary=x),S&&(P.format=u)}function c(A){if(A.layoutAttributes){var m=A.layoutAttributes._arrayAttrRegexps;if(m)for(var h=0;h<m.length;h++)M(ae.layoutArrayRegexes,m[h])}}function b(A,m){var h=ae.componentsRegistry[A].schema;if(!(!h||!h.traces)){var x=h.traces[m];x&&f(ae.modules[m]._module.attributes,x)}}function l(A,m){var h=ae.componentsRegistry[A].schema;if(!(!h||!h.transforms)){var x=h.transforms[m];x&&f(ae.transformsRegistry[m].attributes,x)}}function _(A,m){var h=ae.componentsRegistry[A].schema;if(!(!h||!h.subplots)){var x=ae.subplotsRegistry[m],u=x.layoutAttributes,L=x.attr==="subplot"?x.name:x.attr;Array.isArray(L)&&(L=L[0]);var S=h.subplots[L];u&&S&&f(u,S)}}function s(A){return typeof A=="object"&&(A=A.type),A}},{"./lib/dom":491,"./lib/extend":493,"./lib/is_plain_object":504,"./lib/loggers":507,"./lib/noop":512,"./lib/push_unique":518,"./plots/attributes":550,"./plots/layout_attributes":610}],639:[function(d,ne,ae){var w=d("../registry"),v=d("../lib"),M=v.extendFlat,T=v.extendDeep;function e(n){var r;switch(n){case"themes__thumb":r={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":r={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:r={}}return r}function a(n){var r=["xaxis","yaxis","zaxis"];return r.indexOf(n.slice(0,5))>-1}ne.exports=function(r,t){var f,o=r.data,i=r.layout,g=T([],o),p=T({},i,e(t.tileClass)),y=r._context||{};if(t.width&&(p.width=t.width),t.height&&(p.height=t.height),t.tileClass==="thumbnail"||t.tileClass==="themes__thumb"){p.annotations=[];var c=Object.keys(p);for(f=0;f<c.length;f++)a(c[f])&&(p[c[f]].title={text:""});for(f=0;f<g.length;f++){var b=g[f];b.showscale=!1,b.marker&&(b.marker.showscale=!1),w.traceIs(b,"pie-like")&&(b.textposition="none")}}if(Array.isArray(t.annotations))for(f=0;f<t.annotations.length;f++)p.annotations.push(t.annotations[f]);var l=Object.keys(p).filter(function(h){return h.match(/^scene\d*$/)});if(l.length){var _={};for(t.tileClass==="thumbnail"&&(_={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),f=0;f<l.length;f++){var s=p[l[f]];s.xaxis||(s.xaxis={}),s.yaxis||(s.yaxis={}),s.zaxis||(s.zaxis={}),M(s.xaxis,_),M(s.yaxis,_),M(s.zaxis,_),s._scene=null}}var A=document.createElement("div");t.tileClass&&(A.className=t.tileClass);var m={gd:A,td:A,layout:p,data:g,config:{staticPlot:t.staticPlot===void 0?!0:t.staticPlot,plotGlPixelRatio:t.plotGlPixelRatio===void 0?2:t.plotGlPixelRatio,displaylogo:t.displaylogo||!1,showLink:t.showLink||!1,showTips:t.showTips||!1,mapboxAccessToken:y.mapboxAccessToken}};return t.setBackground!=="transparent"&&(m.config.setBackground=t.setBackground||"opaque"),m.gd.defaultLayout=e(t.tileClass),m}},{"../lib":503,"../registry":638}],640:[function(d,ne,ae){var w=d("../lib"),v=d("../plot_api/to_image"),M=d("./filesaver"),T=d("./helpers");function e(a,n){var r;return w.isPlainObject(a)||(r=w.getGraphDiv(a)),n=n||{},n.format=n.format||"png",n.width=n.width||null,n.height=n.height||null,n.imageDataOnly=!0,new Promise(function(t,f){r&&r._snapshotInProgress&&f(new Error("Snapshotting already in progress.")),w.isIE()&&n.format!=="svg"&&f(new Error(T.MSG_IE_BAD_FORMAT)),r&&(r._snapshotInProgress=!0);var o=v(a,n),i=n.filename||a.fn||"newplot";i+="."+n.format.replace("-","."),o.then(function(g){return r&&(r._snapshotInProgress=!1),M(g,i,n.format)}).then(function(g){t(g)}).catch(function(g){r&&(r._snapshotInProgress=!1),f(g)})})}ne.exports=e},{"../lib":503,"../plot_api/to_image":546,"./filesaver":641,"./helpers":642}],641:[function(d,ne,ae){var w=d("../lib"),v=d("./helpers");function M(T,e,a){var n=document.createElement("a"),r="download"in n,t=new Promise(function(f,o){var i,g;if(w.isIE())return i=v.createBlob(T,"svg"),window.navigator.msSaveBlob(i,e),i=null,f(e);if(r)return i=v.createBlob(T,a),g=v.createObjectURL(i),n.href=g,n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n),v.revokeObjectURL(g),i=null,f(e);if(w.isSafari()){var p=a==="svg"?",":";base64,";return v.octetStream(p+encodeURIComponent(T)),f(e)}o(new Error("download error"))});return t}ne.exports=M},{"../lib":503,"./helpers":642}],642:[function(d,ne,ae){var w=d("../registry");ae.getDelay=function(T){return T._has&&(T._has("gl3d")||T._has("gl2d")||T._has("mapbox"))?500:0},ae.getRedrawFunc=function(T){return function(){w.getComponentMethod("colorbar","draw")(T)}},ae.encodeSVG=function(T){return"data:image/svg+xml,"+encodeURIComponent(T)},ae.encodeJSON=function(T){return"data:application/json,"+encodeURIComponent(T)};var v=window.URL||window.webkitURL;ae.createObjectURL=function(T){return v.createObjectURL(T)},ae.revokeObjectURL=function(T){return v.revokeObjectURL(T)},ae.createBlob=function(T,e){if(e==="svg")return new window.Blob([T],{type:"image/svg+xml;charset=utf-8"});if(e==="full-json")return new window.Blob([T],{type:"application/json;charset=utf-8"});var a=M(window.atob(T));return new window.Blob([a],{type:"image/"+e})},ae.octetStream=function(T){document.location.href="data:application/octet-stream"+T};function M(T){for(var e=T.length,a=new ArrayBuffer(e),n=new Uint8Array(a),r=0;r<e;r++)n[r]=T.charCodeAt(r);return a}ae.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,ae.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":638}],643:[function(d,ne,ae){var w=d("./helpers"),v={getDelay:w.getDelay,getRedrawFunc:w.getRedrawFunc,clone:d("./cloneplot"),toSVG:d("./tosvg"),svgToImg:d("./svgtoimg"),toImage:d("./toimage"),downloadImage:d("./download")};ne.exports=v},{"./cloneplot":639,"./download":640,"./helpers":642,"./svgtoimg":644,"./toimage":645,"./tosvg":646}],644:[function(d,ne,ae){var w=d("../lib"),v=d("events").EventEmitter,M=d("./helpers");function T(e){var a=e.emitter||new v,n=new Promise(function(r,t){var f=window.Image,o=e.svg,i=e.format||"png";if(w.isIE()&&i!=="svg"){var g=new Error(M.MSG_IE_BAD_FORMAT);return t(g),e.promise?n:a.emit("error",g)}var p=e.canvas,y=e.scale||1,c=e.width||300,b=e.height||150,l=y*c,_=y*b,s=p.getContext("2d",{willReadFrequently:!0}),A=new f,m,h;i==="svg"||w.isSafari()?h=M.encodeSVG(o):(m=M.createBlob(o,"svg"),h=M.createObjectURL(m)),p.width=l,p.height=_,A.onload=function(){var x;switch(m=null,M.revokeObjectURL(h),i!=="svg"&&s.drawImage(A,0,0,l,_),i){case"jpeg":x=p.toDataURL("image/jpeg");break;case"png":x=p.toDataURL("image/png");break;case"webp":x=p.toDataURL("image/webp");break;case"svg":x=h;break;default:var u="Image format is not jpeg, png, svg or webp.";if(t(new Error(u)),!e.promise)return a.emit("error",u)}r(x),e.promise||a.emit("success",x)},A.onerror=function(x){if(m=null,M.revokeObjectURL(h),t(x),!e.promise)return a.emit("error",x)},A.src=h});return e.promise?n:a}ne.exports=T},{"../lib":503,"./helpers":642,events:84}],645:[function(d,ne,ae){var w=d("events").EventEmitter,v=d("../registry"),M=d("../lib"),T=d("./helpers"),e=d("./cloneplot"),a=d("./tosvg"),n=d("./svgtoimg");function r(t,f){var o=new w,i=e(t,{format:"png"}),g=i.gd;g.style.position="absolute",g.style.left="-5000px",document.body.appendChild(g);function p(){var c=T.getDelay(g._fullLayout);setTimeout(function(){var b=a(g),l=document.createElement("canvas");l.id=M.randstr(),o=n({format:f.format,width:g._fullLayout.width,height:g._fullLayout.height,canvas:l,emitter:o,svg:b}),o.clean=function(){g&&document.body.removeChild(g)}},c)}var y=T.getRedrawFunc(g);return v.call("_doPlot",g,i.data,i.layout,i.config).then(y).then(p).catch(function(c){o.emit("error",c)}),o}ne.exports=r},{"../lib":503,"../registry":638,"./cloneplot":639,"./helpers":642,"./svgtoimg":644,"./tosvg":646,events:84}],646:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../lib"),M=d("../components/drawing"),T=d("../components/color"),e=d("../constants/xmlns_namespaces"),a=/"/g,n="TOBESTRIPPED",r=new RegExp('("'+n+")|("+n+'")',"g");function t(o){var i=w.select("body").append("div").style({display:"none"}).html(""),g=o.replace(/(&[^;]*;)/gi,function(p){return p==="&lt;"?"&#60;":p==="&rt;"?"&#62;":p.indexOf("<")!==-1||p.indexOf(">")!==-1?"":i.html(p).text()});return i.remove(),g}function f(o){return o.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}ne.exports=function(i,g,p){var y=i._fullLayout,c=y._paper,b=y._toppaper,l=y.width,_=y.height,s;c.insert("rect",":first-child").call(M.setRect,0,0,l,_).call(T.fill,y.paper_bgcolor);var A=y._basePlotModules||[];for(s=0;s<A.length;s++){var m=A[s];m.toSVG&&m.toSVG(i)}if(b){var h=b.node().childNodes,x=Array.prototype.slice.call(h);for(s=0;s<x.length;s++){var u=x[s];u.childNodes.length&&c.node().appendChild(u)}}y._draggers&&y._draggers.remove(),c.node().style.background="",c.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var S=w.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){S.remove();return}else S.style({visibility:null,display:null});var k=this.style.fontFamily;k&&k.indexOf('"')!==-1&&S.style("font-family",k.replace(a,n))}),c.selectAll(".gradient_filled,.pattern_filled").each(function(){var S=w.select(this),k=this.style.fill;k&&k.indexOf("url(")!==-1&&S.style("fill",k.replace(a,n));var P=this.style.stroke;P&&P.indexOf("url(")!==-1&&S.style("stroke",P.replace(a,n))}),(g==="pdf"||g==="eps")&&c.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),c.node().setAttributeNS(e.xmlns,"xmlns",e.svg),c.node().setAttributeNS(e.xmlns,"xmlns:xlink",e.xlink),g==="svg"&&p&&(c.attr("width",p*l),c.attr("height",p*_),c.attr("viewBox","0 0 "+l+" "+_));var L=new window.XMLSerializer().serializeToString(c.node());return L=t(L),L=f(L),L=L.replace(r,"'"),v.isIE()&&(L=L.replace(/"/gi,"'"),L=L.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),L=L.replace(/(\\')/gi,'"')),L}},{"../components/color":366,"../components/drawing":388,"../constants/xmlns_namespaces":480,"../lib":503,"@plotly/d3":58}],647:[function(d,ne,ae){var w=d("../../lib");ne.exports=function(M,T){for(var e=0;e<M.length;e++)M[e].i=e;w.mergeArray(T.text,M,"tx"),w.mergeArray(T.hovertext,M,"htx");var a=T.marker;if(a){w.mergeArray(a.opacity,M,"mo",!0),w.mergeArray(a.color,M,"mc");var n=a.line;n&&(w.mergeArray(n.color,M,"mlc"),w.mergeArrayCastPositive(n.width,M,"mlw"))}}},{"../../lib":503}],648:[function(d,ne,ae){var w=d("../scatter/attributes"),v=d("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=d("../../plots/template_attributes").hovertemplateAttrs,T=d("../../plots/template_attributes").texttemplateAttrs,e=d("../../components/colorscale/attributes"),a=d("../../plots/font_attributes"),n=d("./constants"),r=d("../../components/drawing/attributes").pattern,t=d("../../lib/extend").extendFlat,f=a({editType:"calc",arrayOk:!0,colorEditType:"style"}),o=w.marker,i=o.line,g=t({},i.width,{dflt:0}),p=t({width:g,editType:"calc"},e("marker.line")),y=t({line:p,editType:"calc"},e("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:r});ne.exports={x:w.x,x0:w.x0,dx:w.dx,y:w.y,y0:w.y0,dy:w.dy,xperiod:w.xperiod,yperiod:w.yperiod,xperiod0:w.xperiod0,yperiod0:w.yperiod0,xperiodalignment:w.xperiodalignment,yperiodalignment:w.yperiodalignment,xhoverformat:v("x"),yhoverformat:v("y"),text:w.text,texttemplate:T({editType:"plot"},{keys:n.eventDataKeys}),hovertext:w.hovertext,hovertemplate:M({},{keys:n.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:t({},f,{}),insidetextfont:t({},f,{}),outsidetextfont:t({},f,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:t({},w.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:y,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:w.selected.marker.opacity,color:w.selected.marker.color,editType:"style"},textfont:w.selected.textfont,editType:"style"},unselected:{marker:{opacity:w.unselected.marker.opacity,color:w.unselected.marker.color,editType:"style"},textfont:w.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../scatter/attributes":927,"./constants":650}],649:[function(d,ne,ae){var w=d("../../plots/cartesian/axes"),v=d("../../plots/cartesian/align_period"),M=d("../../components/colorscale/helpers").hasColorscale,T=d("../../components/colorscale/calc"),e=d("./arrays_to_calcdata"),a=d("../scatter/calc_selection");ne.exports=function(r,t){var f=w.getFromId(r,t.xaxis||"x"),o=w.getFromId(r,t.yaxis||"y"),i,g,p,y,c,b,l={msUTC:!!(t.base||t.base===0)};t.orientation==="h"?(i=f.makeCalcdata(t,"x",l),p=o.makeCalcdata(t,"y"),y=v(t,o,"y",p),c=!!t.yperiodalignment,b="y"):(i=o.makeCalcdata(t,"y",l),p=f.makeCalcdata(t,"x"),y=v(t,f,"x",p),c=!!t.xperiodalignment,b="x"),g=y.vals;for(var _=Math.min(g.length,i.length),s=new Array(_),A=0;A<_;A++)s[A]={p:g[A],s:i[A]},c&&(s[A].orig_p=p[A],s[A][b+"End"]=y.ends[A],s[A][b+"Start"]=y.starts[A]),t.ids&&(s[A].id=String(t.ids[A]));return M(t,"marker")&&T(r,t,{vals:t.marker.color,containerStr:"marker",cLetter:"c"}),M(t,"marker.line")&&T(r,t,{vals:t.marker.line.color,containerStr:"marker.line",cLetter:"c"}),e(s,t),a(s,t),s}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":929,"./arrays_to_calcdata":647}],650:[function(d,ne,ae){ne.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],651:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("../../lib").isArrayOrTypedArray,M=d("../../constants/numerical").BADNUM,T=d("../../registry"),e=d("../../plots/cartesian/axes"),a=d("../../plots/cartesian/constraints").getAxisGroup,n=d("./sieve.js");function r(L,S){for(var k=S.xaxis,P=S.yaxis,z=L._fullLayout,I=L._fullData,D=L.calcdata,R=[],O=[],F=0;F<I.length;F++){var V=I[F];if(V.visible===!0&&T.traceIs(V,"bar")&&V.xaxis===k._id&&V.yaxis===P._id&&(V.orientation==="h"?R.push(D[F]):O.push(D[F]),V._computePh))for(var G=L.calcdata[F],J=0;J<G.length;J++)typeof G[J].ph0=="function"&&(G[J].ph0=G[J].ph0()),typeof G[J].ph1=="function"&&(G[J].ph1=G[J].ph1())}var Z={xCat:k.type==="category"||k.type==="multicategory",yCat:P.type==="category"||P.type==="multicategory",mode:z.barmode,norm:z.barnorm,gap:z.bargap,groupgap:z.bargroupgap};t(L,k,P,O,Z),t(L,P,k,R,Z)}function t(L,S,k,P,z){if(!!P.length){var I,D,R,O,F;switch(f(k,P),z.mode){case"overlay":o(S,k,P,z);break;case"group":for(I=[],D=[],R=0;R<P.length;R++)O=P[R],F=O[0].trace,F.offset===void 0?D.push(O):I.push(O);D.length&&i(L,S,k,D,z),I.length&&o(S,k,I,z);break;case"stack":case"relative":for(I=[],D=[],R=0;R<P.length;R++)O=P[R],F=O[0].trace,F.base===void 0?D.push(O):I.push(O);D.length&&g(L,S,k,D,z),I.length&&o(S,k,I,z);break}x(P,S)}}function f(L,S){var k,P;for(k=0;k<S.length;k++){var z=S[k],I=z[0].trace,D=I.type==="funnel"?I._base:I.base,R,O=I.orientation==="h"?I.xcalendar:I.ycalendar,F=L.type==="category"||L.type==="multicategory"?function(){return null}:L.d2c;if(v(D)){for(P=0;P<Math.min(D.length,z.length);P++)R=F(D[P],0,O),w(R)?(z[P].b=+R,z[P].hasB=1):z[P].b=0;for(;P<z.length;P++)z[P].b=0}else{R=F(D,0,O);var V=w(R);for(R=V?R:0,P=0;P<z.length;P++)z[P].b=R,V&&(z[P].hasB=1)}}}function o(L,S,k,P){for(var z=0;z<k.length;z++){var I=k[z],D=new n([I],{posAxis:L,sepNegVal:!1,overlapNoMerge:!P.norm});p(L,D,P),P.norm?(A(D),h(S,D,P)):_(S,D)}}function i(L,S,k,P,z){var I=new n(P,{posAxis:S,sepNegVal:!1,overlapNoMerge:!z.norm});y(L,S,I,z),m(I,S),z.norm?(A(I),h(k,I,z)):_(k,I)}function g(L,S,k,P,z){var I=new n(P,{posAxis:S,sepNegVal:z.mode==="relative",overlapNoMerge:!(z.norm||z.mode==="stack"||z.mode==="relative")});p(S,I,z),s(k,I,z);for(var D=0;D<P.length;D++)for(var R=P[D],O=0;O<R.length;O++){var F=R[O];if(F.s!==M){var V=F.b+F.s===I.get(F.p,F.s);V&&(F._outmost=!0)}}z.norm&&h(k,I,z)}function p(L,S,k){for(var P=S.minDiff,z=S.traces,I=P*(1-k.gap),D=I,R=D*(1-(k.groupgap||0)),O=-R/2,F=0;F<z.length;F++){var V=z[F],G=V[0].t;G.barwidth=R,G.poffset=O,G.bargroupwidth=I,G.bardelta=P}S.binWidth=z[0][0].t.barwidth/100,c(S),b(L,S),l(L,S)}function y(L,S,k,P){for(var z=L._fullLayout,I=k.positions,D=k.distinctPositions,R=k.minDiff,O=k.traces,F=O.length,V=I.length!==D.length,G=R*(1-P.gap),J=a(z,S._id)+O[0][0].trace.orientation,Z=z._alignmentOpts[J]||{},Y=0;Y<F;Y++){var j=O[Y],re=j[0].trace,se=Z[re.alignmentgroup]||{},oe=Object.keys(se.offsetGroups||{}).length,N;oe?N=G/oe:N=V?G/F:G;var U=N*(1-(P.groupgap||0)),q;oe?q=((2*re._offsetIndex+1-oe)*N-U)/2:q=V?((2*Y+1-F)*N-U)/2:-U/2;var Q=j[0].t;Q.barwidth=U,Q.poffset=q,Q.bargroupwidth=G,Q.bardelta=R}k.binWidth=O[0][0].t.barwidth/100,c(k),b(S,k),l(S,k,V)}function c(L){var S=L.traces,k,P;for(k=0;k<S.length;k++){var z=S[k],I=z[0],D=I.trace,R=I.t,O=D._offset||D.offset,F=R.poffset,V;if(v(O)){for(V=Array.prototype.slice.call(O,0,z.length),P=0;P<V.length;P++)w(V[P])||(V[P]=F);for(P=V.length;P<z.length;P++)V.push(F);R.poffset=V}else O!==void 0&&(R.poffset=O);var G=D._width||D.width,J=R.barwidth;if(v(G)){var Z=Array.prototype.slice.call(G,0,z.length);for(P=0;P<Z.length;P++)w(Z[P])||(Z[P]=J);for(P=Z.length;P<z.length;P++)Z.push(J);if(R.barwidth=Z,O===void 0){for(V=[],P=0;P<z.length;P++)V.push(F+(J-Z[P])/2);R.poffset=V}}else G!==void 0&&(R.barwidth=G,O===void 0&&(R.poffset=F+(J-G)/2))}}function b(L,S){for(var k=S.traces,P=u(L),z=0;z<k.length;z++)for(var I=k[z],D=I[0].t,R=D.poffset,O=Array.isArray(R),F=D.barwidth,V=Array.isArray(F),G=0;G<I.length;G++){var J=I[G],Z=J.w=V?F[G]:F;J[P]=J.p+(O?R[G]:R)+Z/2}}function l(L,S,k){var P=S.traces,z=S.minDiff,I=z/2;e.minDtick(L,S.minDiff,S.distinctPositions[0],k);for(var D=0;D<P.length;D++){var R=P[D],O=R[0],F=O.trace,V=[],G,J,Z,Y;for(Y=0;Y<R.length;Y++)G=R[Y],J=G.p-I,Z=G.p+I,V.push(J,Z);if(F.width||F.offset){var j=O.t,re=j.poffset,se=j.barwidth,oe=Array.isArray(re),N=Array.isArray(se);for(Y=0;Y<R.length;Y++){G=R[Y];var U=oe?re[Y]:re,q=N?se[Y]:se;J=G.p+U,Z=J+q,V.push(J,Z)}}F._extremes[L._id]=e.findExtremes(L,V,{padded:!1})}}function _(L,S){for(var k=S.traces,P=u(L),z=0;z<k.length;z++){for(var I=k[z],D=I[0].trace,R=[],O=!1,F=0;F<I.length;F++){var V=I[F],G=V.b,J=G+V.s;V[P]=J,R.push(J),V.hasB&&R.push(G),(!V.hasB||!V.b)&&(O=!0)}D._extremes[L._id]=e.findExtremes(L,R,{tozero:O,padded:!0})}}function s(L,S,k){var P=u(L),z=S.traces,I,D,R,O,F,V;for(O=0;O<z.length;O++)if(I=z[O],D=I[0].trace,D.type==="funnel")for(F=0;F<I.length;F++)V=I[F],V.s!==M&&S.put(V.p,-.5*V.s);for(O=0;O<z.length;O++){I=z[O],D=I[0].trace,R=D.type==="funnel";var G=[];for(F=0;F<I.length;F++)if(V=I[F],V.s!==M){var J;R?J=V.s:J=V.s+V.b;var Z=S.put(V.p,J),Y=Z+J;V.b=Z,V[P]=Y,k.norm||(G.push(Y),V.hasB&&G.push(Z))}k.norm||(D._extremes[L._id]=e.findExtremes(L,G,{tozero:!0,padded:!0}))}}function A(L){for(var S=L.traces,k=0;k<S.length;k++)for(var P=S[k],z=0;z<P.length;z++){var I=P[z];I.s!==M&&L.put(I.p,I.b+I.s)}}function m(L,S){for(var k=L.traces,P=0;P<k.length;P++){var z=k[P],I=z[0].trace;if(I.base===void 0)for(var D=new n([z],{posAxis:S,sepNegVal:!0,overlapNoMerge:!0}),R=0;R<z.length;R++){var O=z[R];if(O.p!==M){var F=D.put(O.p,O.b+O.s);F&&(O.b=F)}}}}function h(L,S,k){var P=S.traces,z=u(L),I=k.norm==="fraction"?1:100,D=I/1e9,R=L.l2c(L.c2l(0)),O=k.mode==="stack"?I:R;function F(q){return w(L.c2l(q))&&(q<R-D||q>O+D||!w(R))}for(var V=0;V<P.length;V++){for(var G=P[V],J=G[0].trace,Z=[],Y=!1,j=!1,re=0;re<G.length;re++){var se=G[re];if(se.s!==M){var oe=Math.abs(I/S.get(se.p,se.s));se.b*=oe,se.s*=oe;var N=se.b,U=N+se.s;se[z]=U,Z.push(U),j=j||F(U),se.hasB&&(Z.push(N),j=j||F(N)),(!se.hasB||!se.b)&&(Y=!0)}}J._extremes[L._id]=e.findExtremes(L,Z,{tozero:Y,padded:j})}}function x(L,S){var k=u(S),P={},z,I,D,R=1/0,O=-1/0;for(z=0;z<L.length;z++)for(D=L[z],I=0;I<D.length;I++){var F=D[I].p;w(F)&&(R=Math.min(R,F),O=Math.max(O,F))}var V=1e4/(O-R),G=P.round=function(oe){return String(Math.round(V*(oe-R)))};for(z=0;z<L.length;z++){D=L[z],D[0].t.extents=P;var J=D[0].t.poffset,Z=Array.isArray(J);for(I=0;I<D.length;I++){var Y=D[I],j=Y[k]-Y.w/2;if(w(j)){var re=Y[k]+Y.w/2,se=G(Y.p);P[se]?P[se]=[Math.min(j,P[se][0]),Math.max(re,P[se][1])]:P[se]=[j,re]}Y.p0=Y.p+(Z?J[I]:J),Y.p1=Y.p0+Y.w,Y.s0=Y.b,Y.s1=Y.s0+Y.s}}}function u(L){return L._id.charAt(0)}ne.exports={crossTraceCalc:r,setGroupPositions:t}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../../plots/cartesian/constraints":562,"../../registry":638,"./sieve.js":661,"fast-isnumeric":190}],652:[function(d,ne,ae){var w=d("../../lib"),v=d("../../components/color"),M=d("../../registry"),T=d("../scatter/xy_defaults"),e=d("../scatter/period_defaults"),a=d("./style_defaults"),n=d("../../plots/cartesian/constraints").getAxisGroup,r=d("./attributes"),t=w.coerceFont;function f(p,y,c,b){function l(h,x){return w.coerce(p,y,r,h,x)}var _=T(p,y,b,l);if(!_){y.visible=!1;return}e(p,y,b,l),l("xhoverformat"),l("yhoverformat"),l("orientation",y.x&&!y.y?"h":"v"),l("base"),l("offset"),l("width"),l("text"),l("hovertext"),l("hovertemplate");var s=l("textposition");g(p,y,b,l,s,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),a(p,y,l,c,b);var A=(y.marker.line||{}).color,m=M.getComponentMethod("errorbars","supplyDefaults");m(p,y,A||v.defaultLine,{axis:"y"}),m(p,y,A||v.defaultLine,{axis:"x",inherit:"y"}),w.coerceSelectionMarkerOpacity(y,l)}function o(p,y,c,b){var l=y.orientation,_=y[{v:"x",h:"y"}[l]+"axis"],s=n(c,_)+l,A=c._alignmentOpts||{},m=b("alignmentgroup"),h=A[s];h||(h=A[s]={});var x=h[m];x?x.traces.push(y):x=h[m]={traces:[y],alignmentIndex:Object.keys(h).length,offsetGroups:{}};var u=b("offsetgroup"),L=x.offsetGroups,S=L[u];u&&(S||(S=L[u]={offsetIndex:Object.keys(L).length}),y._offsetIndex=S.offsetIndex)}function i(p,y){var c,b;function l(s){return w.coerce(b._input,b,r,s)}if(y.barmode==="group")for(var _=0;_<p.length;_++)b=p[_],b.type==="bar"&&(c=b._input,o(c,b,y,l))}function g(p,y,c,b,l,_){_=_||{};var s=_.moduleHasSelected!==!1,A=_.moduleHasUnselected!==!1,m=_.moduleHasConstrain!==!1,h=_.moduleHasCliponaxis!==!1,x=_.moduleHasTextangle!==!1,u=_.moduleHasInsideanchor!==!1,L=!!_.hasPathbar,S=Array.isArray(l)||l==="auto",k=S||l==="inside",P=S||l==="outside";if(k||P){var z=t(b,"textfont",c.font),I=w.extendFlat({},z),D=p.textfont&&p.textfont.color,R=!D;if(R&&delete I.color,t(b,"insidetextfont",I),L){var O=w.extendFlat({},z);R&&delete O.color,t(b,"pathbar.textfont",O)}P&&t(b,"outsidetextfont",z),s&&b("selected.textfont.color"),A&&b("unselected.textfont.color"),m&&b("constraintext"),h&&b("cliponaxis"),x&&b("textangle"),b("texttemplate")}k&&u&&b("insidetextanchor")}ne.exports={supplyDefaults:f,crossTraceDefaults:i,handleGroupingDefaults:o,handleText:g}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/constraints":562,"../../registry":638,"../scatter/period_defaults":947,"../scatter/xy_defaults":954,"./attributes":648,"./style_defaults":663}],653:[function(d,ne,ae){ne.exports=function(v,M,T){return v.x="xVal"in M?M.xVal:M.x,v.y="yVal"in M?M.yVal:M.y,M.xa&&(v.xaxis=M.xa),M.ya&&(v.yaxis=M.ya),T.orientation==="h"?(v.label=v.y,v.value=v.x):(v.label=v.x,v.value=v.y),v}},{}],654:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("tinycolor2"),M=d("../../lib").isArrayOrTypedArray;ae.coerceString=function(T,e,a){if(typeof e=="string"){if(e||!T.noBlank)return e}else if((typeof e=="number"||e===!0)&&!T.strict)return String(e);return a!==void 0?a:T.dflt},ae.coerceNumber=function(T,e,a){if(w(e)){e=+e;var n=T.min,r=T.max,t=n!==void 0&&e<n||r!==void 0&&e>r;if(!t)return e}return a!==void 0?a:T.dflt},ae.coerceColor=function(T,e,a){return v(e).isValid()?e:a!==void 0?a:T.dflt},ae.coerceEnumerated=function(T,e,a){return T.coerceNumber&&(e=+e),T.values.indexOf(e)!==-1?e:a!==void 0?a:T.dflt},ae.getValue=function(T,e){var a;return Array.isArray(T)?e<T.length&&(a=T[e]):a=T,a},ae.getLineWidth=function(T,e){var a=0<e.mlw?e.mlw:M(T.marker.line.width)?0:T.marker.line.width;return a}},{"../../lib":503,"fast-isnumeric":190,tinycolor2:312}],655:[function(d,ne,ae){var w=d("../../components/fx"),v=d("../../registry"),M=d("../../components/color"),T=d("../../lib").fillText,e=d("./helpers").getLineWidth,a=d("../../plots/cartesian/axes").hoverLabelText,n=d("../../constants/numerical").BADNUM;function r(o,i,g,p,y){var c=t(o,i,g,p,y);if(c){var b=c.cd,l=b[0].trace,_=b[c.index];return c.color=f(l,_),v.getComponentMethod("errorbars","hoverInfo")(_,l,c),[c]}}function t(o,i,g,p,y){var c=o.cd,b=c[0].trace,l=c[0].t,_=p==="closest",s=b.type==="waterfall",A=o.maxHoverDistance,m=o.maxSpikeDistance,h,x,u,L,S,k,P;b.orientation==="h"?(h=g,x=i,u="y",L="x",S=re,k=Z):(h=i,x=g,u="x",L="y",k=re,S=Z);var z=b[u+"period"],I=_||z;function D(ie){return O(ie,-1)}function R(ie){return O(ie,1)}function O(ie,le){var ge=ie.w;return ie[u]+le*ge/2}function F(ie){return ie[u+"End"]-ie[u+"Start"]}var V=_?D:z?function(ie){return ie.p-F(ie)/2}:function(ie){return Math.min(D(ie),ie.p-l.bardelta/2)},G=_?R:z?function(ie){return ie.p+F(ie)/2}:function(ie){return Math.max(R(ie),ie.p+l.bardelta/2)};function J(ie,le,ge){return y.finiteRange&&(ge=0),w.inbox(ie-h,le-h,ge+Math.min(1,Math.abs(le-ie)/P)-1)}function Z(ie){return J(V(ie),G(ie),A)}function Y(ie){return J(D(ie),R(ie),m)}function j(ie){var le=ie[L];if(s){var ge=Math.abs(ie.rawS)||0;x>0?le+=ge:x<0&&(le-=ge)}return le}function re(ie){var le=x,ge=ie.b,fe=j(ie);return w.inbox(ge-le,fe-le,A+(fe-le)/(fe-ge)-1)}function se(ie){var le=x,ge=ie.b,fe=j(ie);return w.inbox(ge-le,fe-le,m+(fe-le)/(fe-ge)-1)}var oe=o[u+"a"],N=o[L+"a"];P=Math.abs(oe.r2c(oe.range[1])-oe.r2c(oe.range[0]));function U(ie){return(S(ie)+k(ie))/2}var q=w.getDistanceFunction(p,S,k,U);if(w.getClosest(c,q,o),o.index!==!1&&c[o.index].p!==n){I||(V=function(ie){return Math.min(D(ie),ie.p-l.bargroupwidth/2)},G=function(ie){return Math.max(R(ie),ie.p+l.bargroupwidth/2)});var Q=o.index,W=c[Q],X=b.base?W.b+W.s:W.s;o[L+"0"]=o[L+"1"]=N.c2p(W[L],!0),o[L+"LabelVal"]=X;var ee=l.extents[l.extents.round(W.p)];o[u+"0"]=oe.c2p(_?V(W):ee[0],!0),o[u+"1"]=oe.c2p(_?G(W):ee[1],!0);var te=W.orig_p!==void 0;return o[u+"LabelVal"]=te?W.orig_p:W.p,o.labelLabel=a(oe,o[u+"LabelVal"],b[u+"hoverformat"]),o.valueLabel=a(N,o[L+"LabelVal"],b[L+"hoverformat"]),o.baseLabel=a(N,W.b,b[L+"hoverformat"]),o.spikeDistance=(se(W)+Y(W))/2,o[u+"Spike"]=oe.c2p(W.p,!0),T(W,b,o),o.hovertemplate=b.hovertemplate,o}}function f(o,i){var g=i.mcc||o.marker.color,p=i.mlcc||o.marker.line.color,y=e(o,i);if(M.opacity(g))return g;if(M.opacity(p)&&y)return p}ne.exports={hoverPoints:r,hoverOnBars:t,getTraceColor:f}},{"../../components/color":366,"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./helpers":654}],656:[function(d,ne,ae){ne.exports={attributes:d("./attributes"),layoutAttributes:d("./layout_attributes"),supplyDefaults:d("./defaults").supplyDefaults,crossTraceDefaults:d("./defaults").crossTraceDefaults,supplyLayoutDefaults:d("./layout_defaults"),calc:d("./calc"),crossTraceCalc:d("./cross_trace_calc").crossTraceCalc,colorbar:d("../scatter/marker_colorbar"),arraysToCalcdata:d("./arrays_to_calcdata"),plot:d("./plot").plot,style:d("./style").style,styleOnSelect:d("./style").styleOnSelect,hoverPoints:d("./hover").hoverPoints,eventData:d("./event_data"),selectPoints:d("./select"),moduleType:"trace",name:"bar",basePlotModule:d("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":568,"../scatter/marker_colorbar":945,"./arrays_to_calcdata":647,"./attributes":648,"./calc":649,"./cross_trace_calc":651,"./defaults":652,"./event_data":653,"./hover":655,"./layout_attributes":657,"./layout_defaults":658,"./plot":659,"./select":660,"./style":662}],657:[function(d,ne,ae){ne.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],658:[function(d,ne,ae){var w=d("../../registry"),v=d("../../plots/cartesian/axes"),M=d("../../lib"),T=d("./layout_attributes");ne.exports=function(e,a,n){function r(l,_){return M.coerce(e,a,T,l,_)}for(var t=!1,f=!1,o=!1,i={},g=r("barmode"),p=0;p<n.length;p++){var y=n[p];if(w.traceIs(y,"bar")&&y.visible)t=!0;else continue;if(g==="group"){var c=y.xaxis+y.yaxis;i[c]&&(o=!0),i[c]=!0}if(y.visible&&y.type==="histogram"){var b=v.getFromId({_fullLayout:a},y[y.orientation==="v"?"xaxis":"yaxis"]);b.type!=="category"&&(f=!0)}}if(!t){delete a.barmode;return}g!=="overlay"&&r("barnorm"),r("bargap",f&&!o?0:.2),r("bargroupgap")}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./layout_attributes":657}],659:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("fast-isnumeric"),M=d("../../lib"),T=d("../../lib/svg_text_utils"),e=d("../../components/color"),a=d("../../components/drawing"),n=d("../../registry"),r=d("../../plots/cartesian/axes").tickText,t=d("./uniform_text"),f=t.recordMinTextSize,o=t.clearMinTextSize,i=d("./style"),g=d("./helpers"),p=d("./constants"),y=d("./attributes"),c=y.text,b=y.textposition,l=d("../../components/fx/helpers").appendArrayPointValue,_=p.TEXTPAD;function s(V){return V.id}function A(V){if(V.ids)return s}function m(V,G){return V<G?1:-1}function h(V,G,J,Z){var Y=[],j=[],re=Z?G:J,se=Z?J:G;return Y[0]=re.c2p(V.s0,!0),j[0]=se.c2p(V.p0,!0),Y[1]=re.c2p(V.s1,!0),j[1]=se.c2p(V.p1,!0),Z?[Y,j]:[j,Y]}function x(V,G,J,Z){if(!G.uniformtext.mode&&u(J)){var Y;return Z&&(Y=Z()),V.transition().duration(J.duration).ease(J.easing).each("end",function(){Y&&Y()}).each("interrupt",function(){Y&&Y()})}else return V}function u(V){return V&&V.duration>0}function L(V,G,J,Z,Y,j){var re=G.xaxis,se=G.yaxis,oe=V._fullLayout;Y||(Y={mode:oe.barmode,norm:oe.barmode,gap:oe.bargap,groupgap:oe.bargroupgap},o("bar",oe));var N=M.makeTraceGroups(Z,J,"trace bars").each(function(U){var q=w.select(this),Q=U[0].trace,W=Q.type==="waterfall",X=Q.type==="funnel",ee=Q.type==="bar",te=ee||X,ie=0;W&&Q.connector.visible&&Q.connector.mode==="between"&&(ie=Q.connector.line.width/2);var le=Q.orientation==="h",ge=u(Y),fe=M.ensureSingle(q,"g","points"),pe=A(Q),ye=fe.selectAll("g.point").data(M.identity,pe);ye.enter().append("g").classed("point",!0),ye.exit().remove(),ye.each(function(_e,De){var Be=w.select(this),Ue=h(_e,re,se,le),xe=Ue[0][0],Pe=Ue[0][1],Ve=Ue[1][0],Qe=Ue[1][1],Fe=(le?Pe-xe:Qe-Ve)===0;Fe&&te&&g.getLineWidth(Q,_e)&&(Fe=!1),Fe||(Fe=!v(xe)||!v(Pe)||!v(Ve)||!v(Qe)),_e.isBlank=Fe,Fe&&(le?Pe=xe:Qe=Ve),ie&&!Fe&&(le?(xe-=m(xe,Pe)*ie,Pe+=m(xe,Pe)*ie):(Ve-=m(Ve,Qe)*ie,Qe+=m(Ve,Qe)*ie));var Le,Ne;if(Q.type==="waterfall"){if(!Fe){var dt=Q[_e.dir].marker;Le=dt.line.width,Ne=dt.color}}else Le=g.getLineWidth(Q,_e),Ne=_e.mc||Q.marker.color;function Dt(Mt){var rt=w.round(Le/2%1,2);return Y.gap===0&&Y.groupgap===0?w.round(Math.round(Mt)-rt,2):Mt}function Xt(Mt,rt,ct){return ct&&Mt===rt?Mt:Math.abs(Mt-rt)>=2?Dt(Mt):Mt>rt?Math.ceil(Mt):Math.floor(Mt)}if(!V._context.staticPlot){var At=e.opacity(Ne),zt=At<1||Le>.01?Dt:Xt;xe=zt(xe,Pe,le),Pe=zt(Pe,xe,le),Ve=zt(Ve,Qe,!le),Qe=zt(Qe,Ve,!le)}var Ut=x(M.ensureSingle(Be,"path"),oe,Y,j);if(Ut.style("vector-effect","non-scaling-stroke").attr("d",isNaN((Pe-xe)*(Qe-Ve))||Fe&&V._context.staticPlot?"M0,0Z":"M"+xe+","+Ve+"V"+Qe+"H"+Pe+"V"+Ve+"Z").call(a.setClipUrl,G.layerClipId,V),!oe.uniformtext.mode&&ge){var Ct=a.makePointStyleFns(Q);a.singlePointStyle(_e,Ut,Q,Ct,V)}S(V,G,Be,U,De,xe,Pe,Ve,Qe,Y,j),G.layerClipId&&a.hideOutsideRangePoint(_e,Be.select("text"),re,se,Q.xcalendar,Q.ycalendar)});var Te=Q.cliponaxis===!1;a.setClipUrl(q,Te?null:G.layerClipId,V)});n.getComponentMethod("errorbars","plot")(V,N,G,Y)}function S(V,G,J,Z,Y,j,re,se,oe,N,U){var q=G.xaxis,Q=G.yaxis,W=V._fullLayout,X;function ee(Mt,rt,ct){var Ze=M.ensureSingle(Mt,"text").text(rt).attr({class:"bartext bartext-"+X,"text-anchor":"middle","data-notex":1}).call(a.font,ct).call(T.convertToTspans,V);return Ze}var te=Z[0].trace,ie=te.orientation==="h",le=D(W,Z,Y,q,Q);X=R(te,Y);var ge=N.mode==="stack"||N.mode==="relative",fe=Z[Y],pe=!ge||fe._outmost;if(!le||X==="none"||(fe.isBlank||j===re||se===oe)&&(X==="auto"||X==="inside")){J.select("text").remove();return}var ye=W.font,Te=i.getBarColor(Z[Y],te),_e=i.getInsideTextFont(te,Y,ye,Te),De=i.getOutsideTextFont(te,Y,ye),Be=J.datum();ie?q.type==="log"&&Be.s0<=0&&(q.range[0]<q.range[1]?j=0:j=q._length):Q.type==="log"&&Be.s0<=0&&(Q.range[0]<Q.range[1]?se=Q._length:se=0);var Ue=Math.abs(re-j)-2*_,xe=Math.abs(oe-se)-2*_,Pe,Ve,Qe,Fe,Le;if(X==="outside"&&!pe&&!fe.hasB&&(X="inside"),X==="auto")if(pe){X="inside",Le=M.ensureUniformFontSize(V,_e),Pe=ee(J,le,Le),Ve=a.bBox(Pe.node()),Qe=Ve.width,Fe=Ve.height;var Ne=Qe>0&&Fe>0,dt=Qe<=Ue&&Fe<=xe,Dt=Qe<=xe&&Fe<=Ue,Xt=ie?Ue>=Qe*(xe/Fe):xe>=Fe*(Ue/Qe);Ne&&(dt||Dt||Xt)?X="inside":(X="outside",Pe.remove(),Pe=null)}else X="inside";if(!Pe){Le=M.ensureUniformFontSize(V,X==="outside"?De:_e),Pe=ee(J,le,Le);var At=Pe.attr("transform");if(Pe.attr("transform",""),Ve=a.bBox(Pe.node()),Qe=Ve.width,Fe=Ve.height,Pe.attr("transform",At),Qe<=0||Fe<=0){Pe.remove();return}}var zt=te.textangle,Ut,Ct;X==="outside"?(Ct=te.constraintext==="both"||te.constraintext==="outside",Ut=I(j,re,se,oe,Ve,{isHorizontal:ie,constrained:Ct,angle:zt})):(Ct=te.constraintext==="both"||te.constraintext==="inside",Ut=z(j,re,se,oe,Ve,{isHorizontal:ie,constrained:Ct,angle:zt,anchor:te.insidetextanchor})),Ut.fontSize=Le.size,f(te.type==="histogram"?"bar":te.type,Ut,W),fe.transform=Ut,x(Pe,W,N,U).attr("transform",M.getTextTransform(Ut))}function k(V){return V==="auto"?0:V}function P(V,G){var J=Math.PI/180*G,Z=Math.abs(Math.sin(J)),Y=Math.abs(Math.cos(J));return{x:V.width*Y+V.height*Z,y:V.width*Z+V.height*Y}}function z(V,G,J,Z,Y,j){var re=!!j.isHorizontal,se=!!j.constrained,oe=j.angle||0,N=j.anchor||"end",U=N==="end",q=N==="start",Q=j.leftToRight||0,W=(Q+1)/2,X=1-W,ee=Y.width,te=Y.height,ie=Math.abs(G-V),le=Math.abs(Z-J),ge=ie>2*_&&le>2*_?_:0;ie-=2*ge,le-=2*ge;var fe=k(oe);oe==="auto"&&!(ee<=ie&&te<=le)&&(ee>ie||te>le)&&(!(ee>le||te>ie)||ee<te!=ie<le)&&(fe+=90);var pe=P(Y,fe),ye=1;se&&(ye=Math.min(1,ie/pe.x,le/pe.y));var Te=Y.left*X+Y.right*W,_e=(Y.top+Y.bottom)/2,De=(V+_)*X+(G-_)*W,Be=(J+Z)/2,Ue=0,xe=0;if(q||U){var Pe=(re?pe.x:pe.y)/2,Ve=re?m(V,G):m(J,Z);re?q?(De=V+Ve*ge,Ue=-Ve*Pe):(De=G-Ve*ge,Ue=Ve*Pe):q?(Be=J+Ve*ge,xe=-Ve*Pe):(Be=Z-Ve*ge,xe=Ve*Pe)}return{textX:Te,textY:_e,targetX:De,targetY:Be,anchorX:Ue,anchorY:xe,scale:ye,rotate:fe}}function I(V,G,J,Z,Y,j){var re=!!j.isHorizontal,se=!!j.constrained,oe=j.angle||0,N=Y.width,U=Y.height,q=Math.abs(G-V),Q=Math.abs(Z-J),W;re?W=Q>2*_?_:0:W=q>2*_?_:0;var X=1;se&&(X=re?Math.min(1,Q/U):Math.min(1,q/N));var ee=k(oe),te=P(Y,ee),ie=(re?te.x:te.y)/2,le=(Y.left+Y.right)/2,ge=(Y.top+Y.bottom)/2,fe=(V+G)/2,pe=(J+Z)/2,ye=0,Te=0,_e=re?m(G,V):m(J,Z);return re?(fe=G-_e*W,ye=_e*ie):(pe=Z+_e*W,Te=-_e*ie),{textX:le,textY:ge,targetX:fe,targetY:pe,anchorX:ye,anchorY:Te,scale:X,rotate:ee}}function D(V,G,J,Z,Y){var j=G[0].trace,re=j.texttemplate,se;return re?se=O(V,G,J,Z,Y):j.textinfo?se=F(G,J,Z,Y):se=g.getValue(j.text,J),g.coerceString(c,se)}function R(V,G){var J=g.getValue(V.textposition,G);return g.coerceEnumerated(b,J)}function O(V,G,J,Z,Y){var j=G[0].trace,re=M.castOption(j,J,"texttemplate");if(!re)return"";var se=j.type==="histogram",oe=j.type==="waterfall",N=j.type==="funnel",U=j.orientation==="h",q,Q,W,X;U?(q="y",Q=Y,W="x",X=Z):(q="x",Q=Z,W="y",X=Y);function ee(ye){return r(Q,Q.c2l(ye),!0).text}function te(ye){return r(X,X.c2l(ye),!0).text}var ie=G[J],le={};le.label=ie.p,le.labelLabel=le[q+"Label"]=ee(ie.p);var ge=M.castOption(j,ie.i,"text");(ge===0||ge)&&(le.text=ge),le.value=ie.s,le.valueLabel=le[W+"Label"]=te(ie.s);var fe={};l(fe,j,ie.i),(se||fe.x===void 0)&&(fe.x=U?le.value:le.label),(se||fe.y===void 0)&&(fe.y=U?le.label:le.value),(se||fe.xLabel===void 0)&&(fe.xLabel=U?le.valueLabel:le.labelLabel),(se||fe.yLabel===void 0)&&(fe.yLabel=U?le.labelLabel:le.valueLabel),oe&&(le.delta=+ie.rawS||ie.s,le.deltaLabel=te(le.delta),le.final=ie.v,le.finalLabel=te(le.final),le.initial=le.final-le.delta,le.initialLabel=te(le.initial)),N&&(le.value=ie.s,le.valueLabel=te(le.value),le.percentInitial=ie.begR,le.percentInitialLabel=M.formatPercent(ie.begR),le.percentPrevious=ie.difR,le.percentPreviousLabel=M.formatPercent(ie.difR),le.percentTotal=ie.sumR,le.percenTotalLabel=M.formatPercent(ie.sumR));var pe=M.castOption(j,ie.i,"customdata");return pe&&(le.customdata=pe),M.texttemplateString(re,le,V._d3locale,fe,le,j._meta||{})}function F(V,G,J,Z){var Y=V[0].trace,j=Y.orientation==="h",re=Y.type==="waterfall",se=Y.type==="funnel";function oe(pe){var ye=j?Z:J;return r(ye,pe,!0).text}function N(pe){var ye=j?J:Z;return r(ye,+pe,!0).text}var U=Y.textinfo,q=V[G],Q=U.split("+"),W=[],X,ee=function(pe){return Q.indexOf(pe)!==-1};if(ee("label")&&W.push(oe(V[G].p)),ee("text")&&(X=M.castOption(Y,q.i,"text"),(X===0||X)&&W.push(X)),re){var te=+q.rawS||q.s,ie=q.v,le=ie-te;ee("initial")&&W.push(N(le)),ee("delta")&&W.push(N(te)),ee("final")&&W.push(N(ie))}if(se){ee("value")&&W.push(N(q.s));var ge=0;ee("percent initial")&&ge++,ee("percent previous")&&ge++,ee("percent total")&&ge++;var fe=ge>1;ee("percent initial")&&(X=M.formatPercent(q.begR),fe&&(X+=" of initial"),W.push(X)),ee("percent previous")&&(X=M.formatPercent(q.difR),fe&&(X+=" of previous"),W.push(X)),ee("percent total")&&(X=M.formatPercent(q.sumR),fe&&(X+=" of total"),W.push(X))}return W.join("<br>")}ne.exports={plot:L,toMoveInsideBar:z}},{"../../components/color":366,"../../components/drawing":388,"../../components/fx/helpers":402,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"./attributes":648,"./constants":650,"./helpers":654,"./style":662,"./uniform_text":664,"@plotly/d3":58,"fast-isnumeric":190}],660:[function(d,ne,ae){ne.exports=function(M,T){var e=M.cd,a=M.xaxis,n=M.yaxis,r=e[0].trace,t=r.type==="funnel",f=r.orientation==="h",o=[],i;if(T===!1)for(i=0;i<e.length;i++)e[i].selected=0;else for(i=0;i<e.length;i++){var g=e[i],p="ct"in g?g.ct:w(g,a,n,f,t);T.contains(p,!1,i,M)?(o.push({pointNumber:i,x:a.c2d(g.x),y:n.c2d(g.y)}),g.selected=1):g.selected=0}return o};function w(v,M,T,e,a){var n=M.c2p(e?v.s0:v.p0,!0),r=M.c2p(e?v.s1:v.p1,!0),t=T.c2p(e?v.p0:v.s0,!0),f=T.c2p(e?v.p1:v.s1,!0);return a?[(n+r)/2,(t+f)/2]:e?[r,(t+f)/2]:[(n+r)/2,f]}},{}],661:[function(d,ne,ae){ne.exports=M;var w=d("../../lib").distinctVals,v=d("../../constants/numerical").BADNUM;function M(T,e){this.traces=T,this.sepNegVal=e.sepNegVal,this.overlapNoMerge=e.overlapNoMerge;for(var a=1/0,n=[],r=0;r<T.length;r++){for(var t=T[r],f=0;f<t.length;f++){var o=t[f];o.p!==v&&n.push(o.p)}t[0]&&t[0].width1&&(a=Math.min(t[0].width1,a))}this.positions=n;var i=w(n);this.distinctPositions=i.vals,i.vals.length===1&&a!==1/0?this.minDiff=a:this.minDiff=Math.min(i.minDiff,a);var g=(e.posAxis||{}).type;(g==="category"||g==="multicategory")&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}M.prototype.put=function(e,a){var n=this.getLabel(e,a),r=this.bins[n]||0;return this.bins[n]=r+a,r},M.prototype.get=function(e,a){var n=this.getLabel(e,a);return this.bins[n]||0},M.prototype.getLabel=function(e,a){var n=a<0&&this.sepNegVal?"v":"^",r=this.overlapNoMerge?e:Math.round(e/this.binWidth);return n+r}},{"../../constants/numerical":479,"../../lib":503}],662:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../components/color"),M=d("../../components/drawing"),T=d("../../lib"),e=d("../../registry"),a=d("./uniform_text").resizeText,n=d("./attributes"),r=n.textfont,t=n.insidetextfont,f=n.outsidetextfont,o=d("./helpers");function i(x){var u=w.select(x).selectAll("g.barlayer").selectAll("g.trace");a(x,u,"bar");var L=u.size(),S=x._fullLayout;u.style("opacity",function(k){return k[0].trace.opacity}).each(function(k){(S.barmode==="stack"&&L>1||S.bargap===0&&S.bargroupgap===0&&!k[0].trace.marker.line.width)&&w.select(this).attr("shape-rendering","crispEdges")}),u.selectAll("g.points").each(function(k){var P=w.select(this),z=k[0].trace;g(P,z,x)}),e.getComponentMethod("errorbars","style")(u)}function g(x,u,L){M.pointStyle(x.selectAll("path"),u,L),p(x,u,L)}function p(x,u,L){x.selectAll("text").each(function(S){var k=w.select(this),P=T.ensureUniformFontSize(L,l(k,S,u,L));M.font(k,P)})}function y(x,u,L){var S=u[0].trace;S.selectedpoints?c(L,S,x):(g(L,S,x),e.getComponentMethod("errorbars","style")(L))}function c(x,u,L){M.selectedPointStyle(x.selectAll("path"),u),b(x.selectAll("text"),u,L)}function b(x,u,L){x.each(function(S){var k=w.select(this),P;if(S.selected){P=T.ensureUniformFontSize(L,l(k,S,u,L));var z=u.selected.textfont&&u.selected.textfont.color;z&&(P.color=z),M.font(k,P)}else M.selectedTextStyle(k,u)})}function l(x,u,L,S){var k=S._fullLayout.font,P=L.textfont;if(x.classed("bartext-inside")){var z=h(u,L);P=s(L,u.i,k,z)}else x.classed("bartext-outside")&&(P=A(L,u.i,k));return P}function _(x,u,L){return m(r,x.textfont,u,L)}function s(x,u,L,S){var k=_(x,u,L),P=x._input.textfont===void 0||x._input.textfont.color===void 0||Array.isArray(x.textfont.color)&&x.textfont.color[u]===void 0;return P&&(k={color:v.contrast(S),family:k.family,size:k.size}),m(t,x.insidetextfont,u,k)}function A(x,u,L){var S=_(x,u,L);return m(f,x.outsidetextfont,u,S)}function m(x,u,L,S){u=u||{};var k=o.getValue(u.family,L),P=o.getValue(u.size,L),z=o.getValue(u.color,L);return{family:o.coerceString(x.family,k,S.family),size:o.coerceNumber(x.size,P,S.size),color:o.coerceColor(x.color,z,S.color)}}function h(x,u){return u.type==="waterfall"?u[x.dir].marker.color:x.mcc||x.mc||u.marker.color}ne.exports={style:i,styleTextPoints:p,styleOnSelect:y,getInsideTextFont:s,getOutsideTextFont:A,getBarColor:h,resizeText:a}},{"../../components/color":366,"../../components/drawing":388,"../../lib":503,"../../registry":638,"./attributes":648,"./helpers":654,"./uniform_text":664,"@plotly/d3":58}],663:[function(d,ne,ae){var w=d("../../components/color"),v=d("../../components/colorscale/helpers").hasColorscale,M=d("../../components/colorscale/defaults"),T=d("../../lib").coercePattern;ne.exports=function(a,n,r,t,f){var o=r("marker.color",t),i=v(a,"marker");i&&M(a,n,f,r,{prefix:"marker.",cLetter:"c"}),r("marker.line.color",w.defaultLine),v(a,"marker.line")&&M(a,n,f,r,{prefix:"marker.line.",cLetter:"c"}),r("marker.line.width"),r("marker.opacity"),T(r,"marker.pattern",o,i),r("selected.marker.color"),r("unselected.marker.color")}},{"../../components/color":366,"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503}],664:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../lib");function M(n,r,t){var f=n._fullLayout,o=f["_"+t+"Text_minsize"];if(o){var i=f.uniformtext.mode==="hide",g;switch(t){case"funnelarea":case"pie":case"sunburst":g="g.slice";break;case"treemap":case"icicle":g="g.slice, g.pathbar";break;default:g="g.points > g.point"}r.selectAll(g).each(function(p){var y=p.transform;if(y){y.scale=i&&y.hide?0:o/y.fontSize;var c=w.select(this).select("text");c.attr("transform",v.getTextTransform(y))}})}}function T(n,r,t){if(t.uniformtext.mode){var f=a(n),o=t.uniformtext.minsize,i=r.scale*r.fontSize;r.hide=i<o,t[f]=t[f]||1/0,r.hide||(t[f]=Math.min(t[f],Math.max(i,o)))}}function e(n,r){var t=a(n);r[t]=void 0}function a(n){return"_"+n+"Text_minsize"}ne.exports={recordMinTextSize:T,clearMinTextSize:e,resizeText:M}},{"../../lib":503,"@plotly/d3":58}],665:[function(d,ne,ae){var w=d("../../plots/template_attributes").hovertemplateAttrs,v=d("../../lib/extend").extendFlat,M=d("../scatterpolar/attributes"),T=d("../bar/attributes");ne.exports={r:M.r,theta:M.theta,r0:M.r0,dr:M.dr,theta0:M.theta0,dtheta:M.dtheta,thetaunit:M.thetaunit,base:v({},T.base,{}),offset:v({},T.offset,{}),width:v({},T.width,{}),text:v({},T.text,{}),hovertext:v({},T.hovertext,{}),marker:T.marker,hoverinfo:M.hoverinfo,hovertemplate:w(),selected:T.selected,unselected:T.unselected}},{"../../lib/extend":493,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatterpolar/attributes":1002}],666:[function(d,ne,ae){var w=d("../../components/colorscale/helpers").hasColorscale,v=d("../../components/colorscale/calc"),M=d("../bar/arrays_to_calcdata"),T=d("../bar/cross_trace_calc").setGroupPositions,e=d("../scatter/calc_selection"),a=d("../../registry").traceIs,n=d("../../lib").extendFlat;function r(f,o){for(var i=f._fullLayout,g=o.subplot,p=i[g].radialaxis,y=i[g].angularaxis,c=p.makeCalcdata(o,"r"),b=y.makeCalcdata(o,"theta"),l=o._length,_=new Array(l),s=c,A=b,m=0;m<l;m++)_[m]={p:A[m],s:s[m]};function h(x){var u=o[x];u!==void 0&&(o["_"+x]=Array.isArray(u)?y.makeCalcdata(o,x):y.d2c(u,o.thetaunit))}return y.type==="linear"&&(h("width"),h("offset")),w(o,"marker")&&v(f,o,{vals:o.marker.color,containerStr:"marker",cLetter:"c"}),w(o,"marker.line")&&v(f,o,{vals:o.marker.line.color,containerStr:"marker.line",cLetter:"c"}),M(_,o),e(_,o),_}function t(f,o,i){for(var g=f.calcdata,p=[],y=0;y<g.length;y++){var c=g[y],b=c[0].trace;b.visible===!0&&a(b,"bar")&&b.subplot===i&&p.push(c)}var l=n({},o.radialaxis,{_id:"x"}),_=o.angularaxis;T(f,_,l,p,{mode:o.barmode,norm:o.barnorm,gap:o.bargap,groupgap:o.bargroupgap})}ne.exports={calc:r,crossTraceCalc:t}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../lib":503,"../../registry":638,"../bar/arrays_to_calcdata":647,"../bar/cross_trace_calc":651,"../scatter/calc_selection":929}],667:[function(d,ne,ae){var w=d("../../lib"),v=d("../scatterpolar/defaults").handleRThetaDefaults,M=d("../bar/style_defaults"),T=d("./attributes");ne.exports=function(a,n,r,t){function f(i,g){return w.coerce(a,n,T,i,g)}var o=v(a,n,t,f);if(!o){n.visible=!1;return}f("thetaunit"),f("base"),f("offset"),f("width"),f("text"),f("hovertext"),f("hovertemplate"),M(a,n,f,r,t),w.coerceSelectionMarkerOpacity(n,f)}},{"../../lib":503,"../bar/style_defaults":663,"../scatterpolar/defaults":1004,"./attributes":665}],668:[function(d,ne,ae){var w=d("../../components/fx"),v=d("../../lib"),M=d("../bar/hover").getTraceColor,T=v.fillText,e=d("../scatterpolar/hover").makeHoverPointText,a=d("../../plots/polar/helpers").isPtInsidePolygon;ne.exports=function(r,t,f){var o=r.cd,i=o[0].trace,g=r.subplot,p=g.radialAxis,y=g.angularAxis,c=g.vangles,b=c?a:v.isPtInsideSector,l=r.maxHoverDistance,_=y._period||2*Math.PI,s=Math.abs(p.g2p(Math.sqrt(t*t+f*f))),A=Math.atan2(f,t);p.range[0]>p.range[1]&&(A+=Math.PI);var m=function(L){return b(s,A,[L.rp0,L.rp1],[L.thetag0,L.thetag1],c)?l+Math.min(1,Math.abs(L.thetag1-L.thetag0)/_)-1+(L.rp1-s)/(L.rp1-L.rp0)-1:1/0};if(w.getClosest(o,m,r),r.index!==!1){var h=r.index,x=o[h];r.x0=r.x1=x.ct[0],r.y0=r.y1=x.ct[1];var u=v.extendFlat({},x,{r:x.s,theta:x.p});return T(x,i,r),e(u,i,g,r),r.hovertemplate=i.hovertemplate,r.color=M(i,x),r.xLabelVal=r.yLabelVal=void 0,x.s<0&&(r.idealAlign="left"),[r]}}},{"../../components/fx":406,"../../lib":503,"../../plots/polar/helpers":621,"../bar/hover":655,"../scatterpolar/hover":1006}],669:[function(d,ne,ae){ne.exports={moduleType:"trace",name:"barpolar",basePlotModule:d("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:d("./attributes"),layoutAttributes:d("./layout_attributes"),supplyDefaults:d("./defaults"),supplyLayoutDefaults:d("./layout_defaults"),calc:d("./calc").calc,crossTraceCalc:d("./calc").crossTraceCalc,plot:d("./plot"),colorbar:d("../scatter/marker_colorbar"),formatLabels:d("../scatterpolar/format_labels"),style:d("../bar/style").style,styleOnSelect:d("../bar/style").styleOnSelect,hoverPoints:d("./hover"),selectPoints:d("../bar/select"),meta:{}}},{"../../plots/polar":622,"../bar/select":660,"../bar/style":662,"../scatter/marker_colorbar":945,"../scatterpolar/format_labels":1005,"./attributes":665,"./calc":666,"./defaults":667,"./hover":668,"./layout_attributes":670,"./layout_defaults":671,"./plot":672}],670:[function(d,ne,ae){ne.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],671:[function(d,ne,ae){var w=d("../../lib"),v=d("./layout_attributes");ne.exports=function(M,T,e){var a={},n;function r(o,i){return w.coerce(M[n]||{},T[n],v,o,i)}for(var t=0;t<e.length;t++){var f=e[t];f.type==="barpolar"&&f.visible===!0&&(n=f.subplot,a[n]||(r("barmode"),r("bargap"),a[n]=1))}}},{"../../lib":503,"./layout_attributes":670}],672:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("fast-isnumeric"),M=d("../../lib"),T=d("../../components/drawing"),e=d("../../plots/polar/helpers");ne.exports=function(r,t,f){var o=t.xaxis,i=t.yaxis,g=t.radialAxis,p=t.angularAxis,y=a(t),c=t.layers.frontplot.select("g.barlayer");M.makeTraceGroups(c,f,"trace bars").each(function(){var b=w.select(this),l=M.ensureSingle(b,"g","points"),_=l.selectAll("g.point").data(M.identity);_.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),_.exit().remove(),_.each(function(s){var A=w.select(this),m=s.rp0=g.c2p(s.s0),h=s.rp1=g.c2p(s.s1),x=s.thetag0=p.c2g(s.p0),u=s.thetag1=p.c2g(s.p1),L;if(!v(m)||!v(h)||!v(x)||!v(u)||m===h||x===u)L="M0,0Z";else{var S=g.c2g(s.s1),k=(x+u)/2;s.ct=[o.c2p(S*Math.cos(k)),i.c2p(S*Math.sin(k))],L=y(m,h,x,u)}M.ensureSingle(A,"path").attr("d",L)}),T.setClipUrl(b,t._hasClipOnAxisFalse?t.clipIds.forTraces:null,r)})};function a(n){var r=n.cxx,t=n.cyy;return n.vangles?function(f,o,i,g){var p,y;M.angleDelta(i,g)>0?(p=i,y=g):(p=g,y=i);var c=e.findEnclosingVertexAngles(p,n.vangles)[0],b=e.findEnclosingVertexAngles(y,n.vangles)[1],l=[c,(p+y)/2,b];return e.pathPolygonAnnulus(f,o,p,y,l,r,t)}:function(f,o,i,g){return M.pathAnnulus(f,o,i,g,r,t)}}},{"../../components/drawing":388,"../../lib":503,"../../plots/polar/helpers":621,"@plotly/d3":58,"fast-isnumeric":190}],673:[function(d,ne,ae){var w=d("../scatter/attributes"),v=d("../bar/attributes"),M=d("../../components/color/attributes"),T=d("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=d("../../plots/template_attributes").hovertemplateAttrs,a=d("../../lib/extend").extendFlat,n=w.marker,r=n.line;ne.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:w.xperiod,yperiod:w.yperiod,xperiod0:w.xperiod0,yperiod0:w.yperiod0,xperiodalignment:w.xperiodalignment,yperiodalignment:w.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:a({},n.symbol,{arrayOk:!1,editType:"plot"}),opacity:a({},n.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:a({},n.size,{arrayOk:!1,editType:"calc"}),color:a({},n.color,{arrayOk:!1,editType:"style"}),line:{color:a({},r.color,{arrayOk:!1,dflt:M.defaultLine,editType:"style"}),width:a({},r.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:w.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:v.offsetgroup,alignmentgroup:v.alignmentgroup,selected:{marker:w.selected.marker,editType:"style"},unselected:{marker:w.unselected.marker,editType:"style"},text:a({},w.text,{}),hovertext:a({},w.hovertext,{}),hovertemplate:e({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":927}],674:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("../../plots/cartesian/axes"),M=d("../../plots/cartesian/align_period"),T=d("../../lib"),e=d("../../constants/numerical").BADNUM,a=T._;ne.exports=function(A,m){var h=A._fullLayout,x=v.getFromId(A,m.xaxis||"x"),u=v.getFromId(A,m.yaxis||"y"),L=[],S=m.type==="violin"?"_numViolins":"_numBoxes",k,P,z,I,D,R,O;m.orientation==="h"?(z=x,I="x",D=u,R="y",O=!!m.yperiodalignment):(z=u,I="y",D=x,R="x",O=!!m.xperiodalignment);var F=n(m,R,D,h[S]),V=F[0],G=F[1],J=T.distinctVals(V,D),Z=J.vals,Y=J.minDiff/2,j,re,se,oe,N,U,q=(m.boxpoints||m.points)==="all"?T.identity:function(At){return At.v<j.lf||At.v>j.uf};if(m._hasPreCompStats){var Q=m[I],W=function(At){return z.d2c((m[At]||[])[k])},X=1/0,ee=-1/0;for(k=0;k<m._length;k++){var te=V[k];if(!!w(te)){if(j={},j.pos=j[R]=te,O&&G&&(j.orig_p=G[k]),j.q1=W("q1"),j.med=W("median"),j.q3=W("q3"),re=[],Q&&T.isArrayOrTypedArray(Q[k]))for(P=0;P<Q[k].length;P++)U=z.d2c(Q[k][P]),U!==e&&(N={v:U,i:[k,P]},o(N,m,[k,P]),re.push(N));if(j.pts=re.sort(g),se=j[I]=re.map(p),oe=se.length,j.med!==e&&j.q1!==e&&j.q3!==e&&j.med>=j.q1&&j.q3>=j.med){var ie=W("lowerfence");j.lf=ie!==e&&ie<=j.q1?ie:y(j,se,oe);var le=W("upperfence");j.uf=le!==e&&le>=j.q3?le:c(j,se,oe);var ge=W("mean");j.mean=ge!==e?ge:oe?T.mean(se,oe):(j.q1+j.q3)/2;var fe=W("sd");j.sd=ge!==e&&fe>=0?fe:oe?T.stdev(se,oe,j.mean):j.q3-j.q1,j.lo=b(j),j.uo=l(j);var pe=W("notchspan");pe=pe!==e&&pe>0?pe:_(j,oe),j.ln=j.med-pe,j.un=j.med+pe;var ye=j.lf,Te=j.uf;m.boxpoints&&se.length&&(ye=Math.min(ye,se[0]),Te=Math.max(Te,se[oe-1])),m.notched&&(ye=Math.min(ye,j.ln),Te=Math.max(Te,j.un)),j.min=ye,j.max=Te}else{T.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+j.q1,"median = "+j.med,"q3 = "+j.q3].join(`
`));var _e;j.med!==e?_e=j.med:j.q1!==e?j.q3!==e?_e=(j.q1+j.q3)/2:_e=j.q1:j.q3!==e?_e=j.q3:_e=0,j.med=_e,j.q1=j.q3=_e,j.lf=j.uf=_e,j.mean=j.sd=_e,j.ln=j.un=_e,j.min=j.max=_e}X=Math.min(X,j.min),ee=Math.max(ee,j.max),j.pts2=re.filter(q),L.push(j)}}m._extremes[z._id]=v.findExtremes(z,[X,ee],{padded:!0})}else{var De=z.makeCalcdata(m,I),Be=r(Z,Y),Ue=Z.length,xe=t(Ue);for(k=0;k<m._length;k++)if(U=De[k],!!w(U)){var Pe=T.findBin(V[k],Be);Pe>=0&&Pe<Ue&&(N={v:U,i:k},o(N,m,k),xe[Pe].push(N))}var Ve=1/0,Qe=-1/0,Fe=m.quartilemethod,Le=Fe==="exclusive",Ne=Fe==="inclusive";for(k=0;k<Ue;k++)if(xe[k].length>0){if(j={},j.pos=j[R]=Z[k],re=j.pts=xe[k].sort(g),se=j[I]=re.map(p),oe=se.length,j.min=se[0],j.max=se[oe-1],j.mean=T.mean(se,oe),j.sd=T.stdev(se,oe,j.mean),j.med=T.interp(se,.5),oe%2&&(Le||Ne)){var dt,Dt;Le?(dt=se.slice(0,oe/2),Dt=se.slice(oe/2+1)):Ne&&(dt=se.slice(0,oe/2+1),Dt=se.slice(oe/2)),j.q1=T.interp(dt,.5),j.q3=T.interp(Dt,.5)}else j.q1=T.interp(se,.25),j.q3=T.interp(se,.75);j.lf=y(j,se,oe),j.uf=c(j,se,oe),j.lo=b(j),j.uo=l(j);var Xt=_(j,oe);j.ln=j.med-Xt,j.un=j.med+Xt,Ve=Math.min(Ve,j.ln),Qe=Math.max(Qe,j.un),j.pts2=re.filter(q),L.push(j)}m._extremes[z._id]=v.findExtremes(z,m.notched?De.concat([Ve,Qe]):De,{padded:!0})}return i(L,m),L.length>0?(L[0].t={num:h[S],dPos:Y,posLetter:R,valLetter:I,labels:{med:a(A,"median:"),min:a(A,"min:"),q1:a(A,"q1:"),q3:a(A,"q3:"),max:a(A,"max:"),mean:m.boxmean==="sd"?a(A,"mean \xB1 \u03C3:"):a(A,"mean:"),lf:a(A,"lower fence:"),uf:a(A,"upper fence:")}},h[S]++,L):[{t:{empty:!0}}]};function n(s,A,m,h){var x=A in s,u=A+"0"in s,L="d"+A in s;if(x||u&&L){var S=m.makeCalcdata(s,A),k=M(s,m,A,S).vals;return[k,S]}var P;u?P=s[A+"0"]:"name"in s&&(m.type==="category"||w(s.name)&&["linear","log"].indexOf(m.type)!==-1||T.isDateTime(s.name)&&m.type==="date")?P=s.name:P=h;for(var z=m.type==="multicategory"?m.r2c_just_indices(P):m.d2c(P,0,s[A+"calendar"]),I=s._length,D=new Array(I),R=0;R<I;R++)D[R]=z;return[D]}function r(s,A){for(var m=s.length,h=new Array(m+1),x=0;x<m;x++)h[x]=s[x]-A;return h[m]=s[m-1]+A,h}function t(s){for(var A=new Array(s),m=0;m<s;m++)A[m]=[];return A}var f={text:"tx",hovertext:"htx"};function o(s,A,m){for(var h in f)T.isArrayOrTypedArray(A[h])&&(Array.isArray(m)?T.isArrayOrTypedArray(A[h][m[0]])&&(s[f[h]]=A[h][m[0]][m[1]]):s[f[h]]=A[h][m])}function i(s,A){if(T.isArrayOrTypedArray(A.selectedpoints))for(var m=0;m<s.length;m++){for(var h=s[m].pts||[],x={},u=0;u<h.length;u++)x[h[u].i]=u;T.tagSelected(h,A,x)}}function g(s,A){return s.v-A.v}function p(s){return s.v}function y(s,A,m){return m===0?s.q1:Math.min(s.q1,A[Math.min(T.findBin(2.5*s.q1-1.5*s.q3,A,!0)+1,m-1)])}function c(s,A,m){return m===0?s.q3:Math.max(s.q3,A[Math.max(T.findBin(2.5*s.q3-1.5*s.q1,A),0)])}function b(s){return 4*s.q1-3*s.q3}function l(s){return 4*s.q3-3*s.q1}function _(s,A){return A===0?0:1.57*(s.q3-s.q1)/Math.sqrt(A)}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"fast-isnumeric":190}],675:[function(d,ne,ae){var w=d("../../plots/cartesian/axes"),v=d("../../lib"),M=d("../../plots/cartesian/constraints").getAxisGroup,T=["v","h"];function e(n,r){for(var t=n.calcdata,f=r.xaxis,o=r.yaxis,i=0;i<T.length;i++){for(var g=T[i],p=g==="h"?o:f,y=[],c=0;c<t.length;c++){var b=t[c],l=b[0].t,_=b[0].trace;_.visible===!0&&(_.type==="box"||_.type==="candlestick")&&!l.empty&&(_.orientation||"v")===g&&_.xaxis===f._id&&_.yaxis===o._id&&y.push(c)}a("box",n,y,p)}}function a(n,r,t,f){var o=r.calcdata,i=r._fullLayout,g=f._id,p=g.charAt(0),y,c,b,l=[],_=0;for(y=0;y<t.length;y++)for(b=o[t[y]],c=0;c<b.length;c++)l.push(f.c2l(b[c].pos,!0)),_+=(b[c].pts2||[]).length;if(!!l.length){var s=v.distinctVals(l);(f.type==="category"||f.type==="multicategory")&&(s.minDiff=1);var A=s.minDiff/2;w.minDtick(f,s.minDiff,s.vals[0],!0);var m=n==="violin"?"_numViolins":"_numBoxes",h=i[m],x=i[n+"mode"]==="group"&&h>1,u=1-i[n+"gap"],L=1-i[n+"groupgap"];for(y=0;y<t.length;y++){b=o[t[y]];var S=b[0].trace,k=b[0].t,P=S.width,z=S.side,I,D,R,O;if(P)I=D=O=P/2,R=0;else if(I=A,x){var F=M(i,f._id)+S.orientation,V=i._alignmentOpts[F]||{},G=V[S.alignmentgroup]||{},J=Object.keys(G.offsetGroups||{}).length,Z=J||h,Y=J?S._offsetIndex:k.num;D=I*u*L/Z,R=2*I*(-.5+(Y+.5)/Z)*u,O=I*u/Z}else D=I*u*L,R=0,O=I;k.dPos=I,k.bPos=R,k.bdPos=D,k.wHover=O;var j,re,se=R+D,oe,N,U,q,Q,W,X=Boolean(P),ee=(S.boxpoints||S.points)&&_>0;if(z==="positive"?(j=I*(P?1:.5),oe=se,re=oe=R):z==="negative"?(j=oe=R,re=I*(P?1:.5),N=se):(j=re=I,oe=N=se),ee){var te=S.pointpos,ie=S.jitter,le=S.marker.size/2,ge=0;te+ie>=0&&(ge=se*(te+ie),ge>j?(X=!0,Q=le,U=ge):ge>oe&&(Q=le,U=j)),ge<=j&&(U=j);var fe=0;te-ie<=0&&(fe=-se*(te-ie),fe>re?(X=!0,W=le,q=fe):fe>N&&(W=le,q=re)),fe<=re&&(q=re)}else U=j,q=re;var pe=new Array(b.length);for(c=0;c<b.length;c++)pe[c]=b[c].pos;S._extremes[g]=w.findExtremes(f,pe,{padded:X,vpadminus:q,vpadplus:U,vpadLinearized:!0,ppadminus:{x:W,y:Q}[p],ppadplus:{x:Q,y:W}[p]})}}}ne.exports={crossTraceCalc:e,setPositionOffset:a}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../plots/cartesian/constraints":562}],676:[function(d,ne,ae){var w=d("../../lib"),v=d("../../registry"),M=d("../../components/color"),T=d("../scatter/period_defaults"),e=d("../bar/defaults").handleGroupingDefaults,a=d("../../plots/cartesian/axis_autotype"),n=d("./attributes");function r(i,g,p,y){function c(x,u){return w.coerce(i,g,n,x,u)}if(t(i,g,c,y),g.visible!==!1){T(i,g,y,c),c("xhoverformat"),c("yhoverformat");var b=g._hasPreCompStats;b&&(c("lowerfence"),c("upperfence")),c("line.color",(i.marker||{}).color||p),c("line.width"),c("fillcolor",M.addOpacity(g.line.color,.5));var l=!1;if(b){var _=c("mean"),s=c("sd");_&&_.length&&(l=!0,s&&s.length&&(l="sd"))}c("boxmean",l),c("whiskerwidth"),c("width"),c("quartilemethod");var A=!1;if(b){var m=c("notchspan");m&&m.length&&(A=!0)}else w.validate(i.notchwidth,n.notchwidth)&&(A=!0);var h=c("notched",A);h&&c("notchwidth"),f(i,g,c,{prefix:"box"})}}function t(i,g,p,y){function c(J){var Z=0;return J&&J.length&&(Z+=1,w.isArrayOrTypedArray(J[0])&&J[0].length&&(Z+=1)),Z}function b(J){return w.validate(i[J],n[J])}var l=p("y"),_=p("x"),s;if(g.type==="box"){var A=p("q1"),m=p("median"),h=p("q3");g._hasPreCompStats=A&&A.length&&m&&m.length&&h&&h.length,s=Math.min(w.minRowLength(A),w.minRowLength(m),w.minRowLength(h))}var x=c(l),u=c(_),L=x&&w.minRowLength(l),S=u&&w.minRowLength(_),k=y.calendar,P={autotypenumbers:y.autotypenumbers},z,I;if(g._hasPreCompStats)switch(String(u)+String(x)){case"00":var D=b("x0")||b("dx"),R=b("y0")||b("dy");R&&!D?z="h":z="v",I=s;break;case"10":z="v",I=Math.min(s,S);break;case"20":z="h",I=Math.min(s,_.length);break;case"01":z="h",I=Math.min(s,L);break;case"02":z="v",I=Math.min(s,l.length);break;case"12":z="v",I=Math.min(s,S,l.length);break;case"21":z="h",I=Math.min(s,_.length,L);break;case"11":I=0;break;case"22":var O=!1,F;for(F=0;F<_.length;F++)if(a(_[F],k,P)==="category"){O=!0;break}if(O)z="v",I=Math.min(s,S,l.length);else{for(F=0;F<l.length;F++)if(a(l[F],k,P)==="category"){O=!0;break}O?(z="h",I=Math.min(s,_.length,L)):(z="v",I=Math.min(s,S,l.length))}break}else x>0?(z="v",u>0?I=Math.min(S,L):I=Math.min(L)):u>0?(z="h",I=Math.min(S)):I=0;if(!I){g.visible=!1;return}g._length=I;var V=p("orientation",z);g._hasPreCompStats?V==="v"&&u===0?(p("x0",0),p("dx",1)):V==="h"&&x===0&&(p("y0",0),p("dy",1)):V==="v"&&u===0?p("x0"):V==="h"&&x===0&&p("y0");var G=v.getComponentMethod("calendars","handleTraceDefaults");G(i,g,["x","y"],y)}function f(i,g,p,y){var c=y.prefix,b=w.coerce2(i,g,n,"marker.outliercolor"),l=p("marker.line.outliercolor"),_="outliers";g._hasPreCompStats?_="all":(b||l)&&(_="suspectedoutliers");var s=p(c+"points",_);s?(p("jitter",s==="all"?.3:0),p("pointpos",s==="all"?-1.5:0),p("marker.symbol"),p("marker.opacity"),p("marker.size"),p("marker.color",g.line.color),p("marker.line.color"),p("marker.line.width"),s==="suspectedoutliers"&&(p("marker.line.outliercolor",g.marker.color),p("marker.line.outlierwidth")),p("selected.marker.color"),p("unselected.marker.color"),p("selected.marker.size"),p("unselected.marker.size"),p("text"),p("hovertext")):delete g.marker;var A=p("hoveron");(A==="all"||A.indexOf("points")!==-1)&&p("hovertemplate"),w.coerceSelectionMarkerOpacity(g,p)}function o(i,g){var p,y;function c(_){return w.coerce(y._input,y,n,_)}for(var b=0;b<i.length;b++){y=i[b];var l=y.type;(l==="box"||l==="violin")&&(p=y._input,g[l+"mode"]==="group"&&e(p,y,g,c))}}ne.exports={supplyDefaults:r,crossTraceDefaults:o,handleSampleDefaults:t,handlePointsDefaults:f}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/axis_autotype":555,"../../registry":638,"../bar/defaults":652,"../scatter/period_defaults":947,"./attributes":673}],677:[function(d,ne,ae){ne.exports=function(v,M){return M.hoverOnBox&&(v.hoverOnBox=M.hoverOnBox),"xVal"in M&&(v.x=M.xVal),"yVal"in M&&(v.y=M.yVal),M.xa&&(v.xaxis=M.xa),M.ya&&(v.yaxis=M.ya),v}},{}],678:[function(d,ne,ae){var w=d("../../plots/cartesian/axes"),v=d("../../lib"),M=d("../../components/fx"),T=d("../../components/color"),e=v.fillText;function a(t,f,o,i){var g=t.cd,p=g[0].trace,y=p.hoveron,c=[],b;return y.indexOf("boxes")!==-1&&(c=c.concat(n(t,f,o,i))),y.indexOf("points")!==-1&&(b=r(t,f,o)),i==="closest"?b?[b]:c:(b&&c.push(b),c)}function n(t,f,o,i){var g=t.cd,p=t.xa,y=t.ya,c=g[0].trace,b=g[0].t,l=c.type==="violin",_=[],s,A,m,h,x,u,L,S,k,P,z,I=b.bdPos,D,R,O=b.wHover,F=function(ee){return m.c2l(ee.pos)+b.bPos-m.c2l(u)};l&&c.side!=="both"?(c.side==="positive"&&(k=function(ee){var te=F(ee);return M.inbox(te,te+O,P)},D=I,R=0),c.side==="negative"&&(k=function(ee){var te=F(ee);return M.inbox(te-O,te,P)},D=0,R=I)):(k=function(ee){var te=F(ee);return M.inbox(te-O,te+O,P)},D=R=I);var V;l?V=function(ee){return M.inbox(ee.span[0]-x,ee.span[1]-x,P)}:V=function(ee){return M.inbox(ee.min-x,ee.max-x,P)},c.orientation==="h"?(x=f,u=o,L=V,S=k,s="y",m=y,A="x",h=p):(x=o,u=f,L=k,S=V,s="x",m=p,A="y",h=y);var G=Math.min(1,I/Math.abs(m.r2c(m.range[1])-m.r2c(m.range[0])));P=t.maxHoverDistance-G,z=t.maxSpikeDistance-G;function J(ee){return(L(ee)+S(ee))/2}var Z=M.getDistanceFunction(i,L,S,J);if(M.getClosest(g,Z,t),t.index===!1)return[];var Y=g[t.index],j=c.line.color,re=(c.marker||{}).color;T.opacity(j)&&c.line.width?t.color=j:T.opacity(re)&&c.boxpoints?t.color=re:t.color=c.fillcolor,t[s+"0"]=m.c2p(Y.pos+b.bPos-R,!0),t[s+"1"]=m.c2p(Y.pos+b.bPos+D,!0),t[s+"LabelVal"]=Y.orig_p!==void 0?Y.orig_p:Y.pos;var se=s+"Spike";t.spikeDistance=J(Y)*z/P,t[se]=m.c2p(Y.pos,!0);var oe={},N=["med","q1","q3","min","max"];(c.boxmean||(c.meanline||{}).visible)&&N.push("mean"),(c.boxpoints||c.points)&&N.push("lf","uf");for(var U=0;U<N.length;U++){var q=N[U];if(!(!(q in Y)||Y[q]in oe)){oe[Y[q]]=!0;var Q=Y[q],W=h.c2p(Q,!0),X=v.extendFlat({},t);X.attr=q,X[A+"0"]=X[A+"1"]=W,X[A+"LabelVal"]=Q,X[A+"Label"]=(b.labels?b.labels[q]+" ":"")+w.hoverLabelText(h,Q,c[A+"hoverformat"]),X.hoverOnBox=!0,q==="mean"&&"sd"in Y&&c.boxmean==="sd"&&(X[A+"err"]=Y.sd),t.name="",t.spikeDistance=void 0,t[se]=void 0,X.hovertemplate=!1,_.push(X)}}return _}function r(t,f,o){for(var i=t.cd,g=t.xa,p=t.ya,y=i[0].trace,c=g.c2p(f),b=p.c2p(o),l,_=function(F){var V=Math.max(3,F.mrc||0);return Math.max(Math.abs(g.c2p(F.x)-c)-V,1-3/V)},s=function(F){var V=Math.max(3,F.mrc||0);return Math.max(Math.abs(p.c2p(F.y)-b)-V,1-3/V)},A=M.quadrature(_,s),m=!1,h,x,u=0;u<i.length;u++){h=i[u];for(var L=0;L<(h.pts||[]).length;L++){x=h.pts[L];var S=A(x);S<=t.distance&&(t.distance=S,m=[u,L])}}if(!m)return!1;h=i[m[0]],x=h.pts[m[1]];var k=g.c2p(x.x,!0),P=p.c2p(x.y,!0),z=x.mrc||1;l=v.extendFlat({},t,{index:x.i,color:(y.marker||{}).color,name:y.name,x0:k-z,x1:k+z,y0:P-z,y1:P+z,spikeDistance:t.distance,hovertemplate:y.hovertemplate});var I=h.orig_p,D=I!==void 0?I:h.pos,R;y.orientation==="h"?(R=p,l.xLabelVal=x.x,l.yLabelVal=D):(R=g,l.xLabelVal=D,l.yLabelVal=x.y);var O=R._id.charAt(0);return l[O+"Spike"]=R.c2p(h.pos,!0),e(x,y,l),l}ne.exports={hoverPoints:a,hoverOnBoxes:n,hoverOnPoints:r}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"../../plots/cartesian/axes":554}],679:[function(d,ne,ae){ne.exports={attributes:d("./attributes"),layoutAttributes:d("./layout_attributes"),supplyDefaults:d("./defaults").supplyDefaults,crossTraceDefaults:d("./defaults").crossTraceDefaults,supplyLayoutDefaults:d("./layout_defaults").supplyLayoutDefaults,calc:d("./calc"),crossTraceCalc:d("./cross_trace_calc").crossTraceCalc,plot:d("./plot").plot,style:d("./style").style,styleOnSelect:d("./style").styleOnSelect,hoverPoints:d("./hover").hoverPoints,eventData:d("./event_data"),selectPoints:d("./select"),moduleType:"trace",name:"box",basePlotModule:d("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"./attributes":673,"./calc":674,"./cross_trace_calc":675,"./defaults":676,"./event_data":677,"./hover":678,"./layout_attributes":680,"./layout_defaults":681,"./plot":682,"./select":683,"./style":684}],680:[function(d,ne,ae){ne.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],681:[function(d,ne,ae){var w=d("../../registry"),v=d("../../lib"),M=d("./layout_attributes");function T(a,n,r,t,f){for(var o=f+"Layout",i=!1,g=0;g<r.length;g++){var p=r[g];if(w.traceIs(p,o)){i=!0;break}}!i||(t(f+"mode"),t(f+"gap"),t(f+"groupgap"))}function e(a,n,r){function t(f,o){return v.coerce(a,n,M,f,o)}T(a,n,r,t,"box")}ne.exports={supplyLayoutDefaults:e,_supply:T}},{"../../lib":503,"../../registry":638,"./layout_attributes":680}],682:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../lib"),M=d("../../components/drawing"),T=5,e=.01;function a(f,o,i,g){var p=o.xaxis,y=o.yaxis;v.makeTraceGroups(g,i,"trace boxes").each(function(c){var b=w.select(this),l=c[0],_=l.t,s=l.trace;if(_.wdPos=_.bdPos*s.whiskerwidth,s.visible!==!0||_.empty){b.remove();return}var A,m;s.orientation==="h"?(A=y,m=p):(A=p,m=y),n(b,{pos:A,val:m},s,_),r(b,{x:p,y},s,_),t(b,{pos:A,val:m},s,_)})}function n(f,o,i,g){var p=i.orientation==="h",y=o.val,c=o.pos,b=!!c.rangebreaks,l=g.bPos,_=g.wdPos||0,s=g.bPosPxOffset||0,A=i.whiskerwidth||0,m=i.notched||!1,h=m?1-2*i.notchwidth:1,x,u;Array.isArray(g.bdPos)?(x=g.bdPos[0],u=g.bdPos[1]):(x=g.bdPos,u=g.bdPos);var L=f.selectAll("path.box").data(i.type!=="violin"||i.box.visible?v.identity:[]);L.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),L.exit().remove(),L.each(function(S){if(S.empty)return"M0,0Z";var k=c.c2l(S.pos+l,!0),P=c.l2p(k-x)+s,z=c.l2p(k+u)+s,I=b?(P+z)/2:c.l2p(k)+s,D=i.whiskerwidth,R=b?P*D+(1-D)*I:c.l2p(k-_)+s,O=b?z*D+(1-D)*I:c.l2p(k+_)+s,F=c.l2p(k-x*h)+s,V=c.l2p(k+u*h)+s,G=y.c2p(S.q1,!0),J=y.c2p(S.q3,!0),Z=v.constrain(y.c2p(S.med,!0),Math.min(G,J)+1,Math.max(G,J)-1),Y=S.lf===void 0||i.boxpoints===!1,j=y.c2p(Y?S.min:S.lf,!0),re=y.c2p(Y?S.max:S.uf,!0),se=y.c2p(S.ln,!0),oe=y.c2p(S.un,!0);p?w.select(this).attr("d","M"+Z+","+F+"V"+V+"M"+G+","+P+"V"+z+(m?"H"+se+"L"+Z+","+V+"L"+oe+","+z:"")+"H"+J+"V"+P+(m?"H"+oe+"L"+Z+","+F+"L"+se+","+P:"")+"ZM"+G+","+I+"H"+j+"M"+J+","+I+"H"+re+(A===0?"":"M"+j+","+R+"V"+O+"M"+re+","+R+"V"+O)):w.select(this).attr("d","M"+F+","+Z+"H"+V+"M"+P+","+G+"H"+z+(m?"V"+se+"L"+V+","+Z+"L"+z+","+oe:"")+"V"+J+"H"+P+(m?"V"+oe+"L"+F+","+Z+"L"+P+","+se:"")+"ZM"+I+","+G+"V"+j+"M"+I+","+J+"V"+re+(A===0?"":"M"+R+","+j+"H"+O+"M"+R+","+re+"H"+O))})}function r(f,o,i,g){var p=o.x,y=o.y,c=g.bdPos,b=g.bPos,l=i.boxpoints||i.points;v.seedPseudoRandom();var _=function(m){return m.forEach(function(h){h.t=g,h.trace=i}),m},s=f.selectAll("g.points").data(l?_:[]);s.enter().append("g").attr("class","points"),s.exit().remove();var A=s.selectAll("path").data(function(m){var h,x=m.pts2,u=Math.max((m.max-m.min)/10,m.q3-m.q1),L=u*1e-9,S=u*e,k=[],P=0,z;if(i.jitter){if(u===0)for(P=1,k=new Array(x.length),h=0;h<x.length;h++)k[h]=1;else for(h=0;h<x.length;h++){var I=Math.max(0,h-T),D=x[I].v,R=Math.min(x.length-1,h+T),O=x[R].v;l!=="all"&&(x[h].v<m.lf?O=Math.min(O,m.lf):D=Math.max(D,m.uf));var F=Math.sqrt(S*(R-I)/(O-D+L))||0;F=v.constrain(Math.abs(F),0,1),k.push(F),P=Math.max(F,P)}z=i.jitter*2/(P||1)}for(h=0;h<x.length;h++){var V=x[h],G=V.v,J=i.jitter?z*k[h]*(v.pseudoRandom()-.5):0,Z=m.pos+b+c*(i.pointpos+J);i.orientation==="h"?(V.y=Z,V.x=G):(V.x=Z,V.y=G),l==="suspectedoutliers"&&G<m.uo&&G>m.lo&&(V.so=!0)}return x});A.enter().append("path").classed("point",!0),A.exit().remove(),A.call(M.translatePoints,p,y)}function t(f,o,i,g){var p=o.val,y=o.pos,c=!!y.rangebreaks,b=g.bPos,l=g.bPosPxOffset||0,_=i.boxmean||(i.meanline||{}).visible,s,A;Array.isArray(g.bdPos)?(s=g.bdPos[0],A=g.bdPos[1]):(s=g.bdPos,A=g.bdPos);var m=f.selectAll("path.mean").data(i.type==="box"&&i.boxmean||i.type==="violin"&&i.box.visible&&i.meanline.visible?v.identity:[]);m.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),m.exit().remove(),m.each(function(h){var x=y.c2l(h.pos+b,!0),u=y.l2p(x-s)+l,L=y.l2p(x+A)+l,S=c?(u+L)/2:y.l2p(x)+l,k=p.c2p(h.mean,!0),P=p.c2p(h.mean-h.sd,!0),z=p.c2p(h.mean+h.sd,!0);i.orientation==="h"?w.select(this).attr("d","M"+k+","+u+"V"+L+(_==="sd"?"m0,0L"+P+","+S+"L"+k+","+u+"L"+z+","+S+"Z":"")):w.select(this).attr("d","M"+u+","+k+"H"+L+(_==="sd"?"m0,0L"+S+","+P+"L"+u+","+k+"L"+S+","+z+"Z":""))})}ne.exports={plot:a,plotBoxAndWhiskers:n,plotPoints:r,plotBoxMean:t}},{"../../components/drawing":388,"../../lib":503,"@plotly/d3":58}],683:[function(d,ne,ae){ne.exports=function(v,M){var T=v.cd,e=v.xaxis,a=v.yaxis,n=[],r,t;if(M===!1)for(r=0;r<T.length;r++)for(t=0;t<(T[r].pts||[]).length;t++)T[r].pts[t].selected=0;else for(r=0;r<T.length;r++)for(t=0;t<(T[r].pts||[]).length;t++){var f=T[r].pts[t],o=e.c2p(f.x),i=a.c2p(f.y);M.contains([o,i],null,f.i,v)?(n.push({pointNumber:f.i,x:e.c2d(f.x),y:a.c2d(f.y)}),f.selected=1):f.selected=0}return n}},{}],684:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../components/color"),M=d("../../components/drawing");function T(a,n,r){var t=r||w.select(a).selectAll("g.trace.boxes");t.style("opacity",function(f){return f[0].trace.opacity}),t.each(function(f){var o=w.select(this),i=f[0].trace,g=i.line.width;function p(b,l,_,s){b.style("stroke-width",l+"px").call(v.stroke,_).call(v.fill,s)}var y=o.selectAll("path.box");if(i.type==="candlestick")y.each(function(b){if(!b.empty){var l=w.select(this),_=i[b.dir];p(l,_.line.width,_.line.color,_.fillcolor),l.style("opacity",i.selectedpoints&&!b.selected?.3:1)}});else{p(y,g,i.line.color,i.fillcolor),o.selectAll("path.mean").style({"stroke-width":g,"stroke-dasharray":2*g+"px,"+g+"px"}).call(v.stroke,i.line.color);var c=o.selectAll("path.point");M.pointStyle(c,i,a)}})}function e(a,n,r){var t=n[0].trace,f=r.selectAll("path.point");t.selectedpoints?M.selectedPointStyle(f,t):M.pointStyle(f,t,a)}ne.exports={style:T,styleOnSelect:e}},{"../../components/color":366,"../../components/drawing":388,"@plotly/d3":58}],685:[function(d,ne,ae){var w=d("../../lib").extendFlat,v=d("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=d("../ohlc/attributes"),T=d("../box/attributes");function e(a){return{line:{color:w({},T.line.color,{dflt:a}),width:T.line.width,editType:"style"},fillcolor:T.fillcolor,editType:"style"}}ne.exports={xperiod:M.xperiod,xperiod0:M.xperiod0,xperiodalignment:M.xperiodalignment,xhoverformat:v("x"),yhoverformat:v("y"),x:M.x,open:M.open,high:M.high,low:M.low,close:M.close,line:{width:w({},T.line.width,{}),editType:"style"},increasing:e(M.increasing.line.color.dflt),decreasing:e(M.decreasing.line.color.dflt),text:M.text,hovertext:M.hovertext,whiskerwidth:w({},T.whiskerwidth,{dflt:0}),hoverlabel:M.hoverlabel}},{"../../lib":503,"../../plots/cartesian/axis_format_attributes":557,"../box/attributes":673,"../ohlc/attributes":872}],686:[function(d,ne,ae){var w=d("../../lib"),v=d("../../plots/cartesian/axes"),M=d("../../plots/cartesian/align_period"),T=d("../ohlc/calc").calcCommon;ne.exports=function(a,n){var r=a._fullLayout,t=v.getFromId(a,n.xaxis),f=v.getFromId(a,n.yaxis),o=t.makeCalcdata(n,"x"),i=M(n,t,"x",o).vals,g=T(a,n,o,i,f,e);return g.length?(w.extendFlat(g[0].t,{num:r._numBoxes,dPos:w.distinctVals(i).minDiff/2,posLetter:"x",valLetter:"y"}),r._numBoxes++,g):[{t:{empty:!0}}]};function e(a,n,r,t){return{min:r,q1:Math.min(a,t),med:t,q3:Math.max(a,t),max:n}}},{"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../ohlc/calc":873}],687:[function(d,ne,ae){var w=d("../../lib"),v=d("../../components/color"),M=d("../ohlc/ohlc_defaults"),T=d("../scatter/period_defaults"),e=d("./attributes");ne.exports=function(r,t,f,o){function i(p,y){return w.coerce(r,t,e,p,y)}var g=M(r,t,i,o);if(!g){t.visible=!1;return}T(r,t,o,i,{x:!0}),i("xhoverformat"),i("yhoverformat"),i("line.width"),a(r,t,i,"increasing"),a(r,t,i,"decreasing"),i("text"),i("hovertext"),i("whiskerwidth"),o._requestRangeslider[t.xaxis]=!0};function a(n,r,t,f){var o=t(f+".line.color");t(f+".line.width",r.line.width),t(f+".fillcolor",v.addOpacity(o,.5))}},{"../../components/color":366,"../../lib":503,"../ohlc/ohlc_defaults":877,"../scatter/period_defaults":947,"./attributes":685}],688:[function(d,ne,ae){ne.exports={moduleType:"trace",name:"candlestick",basePlotModule:d("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:d("./attributes"),layoutAttributes:d("../box/layout_attributes"),supplyLayoutDefaults:d("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:d("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:d("./defaults"),calc:d("./calc"),plot:d("../box/plot").plot,layerName:"boxlayer",style:d("../box/style").style,hoverPoints:d("../ohlc/hover").hoverPoints,selectPoints:d("../ohlc/select")}},{"../../plots/cartesian":568,"../box/cross_trace_calc":675,"../box/layout_attributes":680,"../box/layout_defaults":681,"../box/plot":682,"../box/style":684,"../ohlc/hover":875,"../ohlc/select":879,"./attributes":685,"./calc":686,"./defaults":687}],689:[function(d,ne,ae){var w=d("./axis_defaults"),v=d("../../plot_api/plot_template");ne.exports=function(e,a,n,r,t){var f=r("a");f||(r("da"),r("a0"));var o=r("b");o||(r("db"),r("b0")),M(e,a,n,t)};function M(T,e,a,n){var r=["aaxis","baxis"];r.forEach(function(t){var f=t.charAt(0),o=T[t]||{},i=v.newContainer(e,t),g={noTicklabelstep:!0,tickfont:"x",id:f+"axis",letter:f,font:e.font,name:t,data:T[f],calendar:e.calendar,dfltColor:n,bgColor:a.paper_bgcolor,autotypenumbersDflt:a.autotypenumbers,fullLayout:a};w(o,i,g),i._categories=i._categories||[],!T[t]&&o.type!=="-"&&(T[t]={type:o.type})})}},{"../../plot_api/plot_template":543,"./axis_defaults":694}],690:[function(d,ne,ae){var w=d("../../lib").isArrayOrTypedArray;ne.exports=function(M){return v(M,0)};function v(M,T){if(!w(M)||T>=10)return null;for(var e=1/0,a=-1/0,n=M.length,r=0;r<n;r++){var t=M[r];if(w(t)){var f=v(t,T+1);f&&(e=Math.min(f[0],e),a=Math.max(f[1],a))}else e=Math.min(t,e),a=Math.max(t,a)}return[e,a]}},{"../../lib":503}],691:[function(d,ne,ae){var w=d("../../plots/font_attributes"),v=d("./axis_attributes"),M=d("../../components/color/attributes"),T=w({editType:"calc"});T.family.dflt='"Open Sans", verdana, arial, sans-serif',T.size.dflt=12,T.color.dflt=M.defaultLine,ne.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:v,baxis:v,font:T,color:{valType:"color",dflt:M.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":365,"../../plots/font_attributes":585,"./axis_attributes":693}],692:[function(d,ne,ae){var w=d("../../lib").isArrayOrTypedArray;ne.exports=function(v,M,T,e){var a,n,r,t,f,o,i,g,p,y,c,b,l,_=w(T)?"a":"b",s=_==="a"?v.aaxis:v.baxis,A=s.smoothing,m=_==="a"?v.a2i:v.b2j,h=_==="a"?T:e,x=_==="a"?e:T,u=_==="a"?M.a.length:M.b.length,L=_==="a"?M.b.length:M.a.length,S=Math.floor(_==="a"?v.b2j(x):v.a2i(x)),k=_==="a"?function(Y){return v.evalxy([],Y,S)}:function(Y){return v.evalxy([],S,Y)};A&&(r=Math.max(0,Math.min(L-2,S)),t=S-r,n=_==="a"?function(Y,j){return v.dxydi([],Y,r,j,t)}:function(Y,j){return v.dxydj([],r,Y,t,j)});var P=m(h[0]),z=m(h[1]),I=P<z?1:-1,D=(z-P)*1e-8,R=I>0?Math.floor:Math.ceil,O=I>0?Math.ceil:Math.floor,F=I>0?Math.min:Math.max,V=I>0?Math.max:Math.min,G=R(P+D),J=O(z-D);i=k(P);var Z=[[i]];for(a=G;a*I<J*I;a+=I)f=[],c=V(P,a),b=F(z,a+I),l=b-c,o=Math.max(0,Math.min(u-2,Math.floor(.5*(c+b)))),g=k(b),A&&(p=n(o,c-o),y=n(o,b-o),f.push([i[0]+p[0]/3*l,i[1]+p[1]/3*l]),f.push([g[0]-y[0]/3*l,g[1]-y[1]/3*l])),f.push(g),Z.push(f),i=g;return Z}},{"../../lib":503}],693:[function(d,ne,ae){var w=d("../../plots/font_attributes"),v=d("../../components/color/attributes"),M=d("../../plots/cartesian/layout_attributes"),T=d("../../plots/cartesian/axis_format_attributes").descriptionWithDates,e=d("../../plot_api/edit_types").overrideAll,a=d("../../components/drawing/attributes").dash,n=d("../../lib/extend").extendFlat;ne.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:w({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:M.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:w({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:T("tick label")},tickformatstops:e(M.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:v.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:n({},a,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:n({},a,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:v.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:w({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":365,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/layout_attributes":569,"../../plots/font_attributes":585}],694:[function(d,ne,ae){var w=d("./attributes"),v=d("../../components/color").addOpacity,M=d("../../registry"),T=d("../../lib"),e=d("../../plots/cartesian/tick_value_defaults"),a=d("../../plots/cartesian/tick_label_defaults"),n=d("../../plots/cartesian/prefix_suffix_defaults"),r=d("../../plots/cartesian/category_order_defaults"),t=d("../../plots/cartesian/set_convert"),f=d("../../plots/cartesian/axis_autotype");ne.exports=function(g,p,y){var c=y.letter,b=y.font||{},l=w[c+"axis"];function _(G,J){return T.coerce(g,p,l,G,J)}function s(G,J){return T.coerce2(g,p,l,G,J)}y.name&&(p._name=y.name,p._id=y.name),_("autotypenumbers",y.autotypenumbersDflt);var A=_("type");if(A==="-"&&(y.data&&o(p,y.data),p.type==="-"?p.type="linear":A=g.type=p.type),_("smoothing"),_("cheatertype"),_("showticklabels"),_("labelprefix",c+" = "),_("labelsuffix"),_("showtickprefix"),_("showticksuffix"),_("separatethousands"),_("tickformat"),_("exponentformat"),_("minexponent"),_("showexponent"),_("categoryorder"),_("tickmode"),_("tickvals"),_("ticktext"),_("tick0"),_("dtick"),p.tickmode==="array"&&(_("arraytick0"),_("arraydtick")),_("labelpadding"),p._hovertitle=c,A==="date"){var m=M.getComponentMethod("calendars","handleDefaults");m(g,p,"calendar",y.calendar)}t(p,y.fullLayout),p.c2p=T.identity;var h=_("color",y.dfltColor),x=h===g.color?h:b.color,u=_("title.text");u&&(T.coerceFont(_,"title.font",{family:b.family,size:T.bigFont(b.size),color:x}),_("title.offset")),_("tickangle");var L=_("autorange",!p.isValidRange(g.range));L&&_("rangemode"),_("range"),p.cleanRange(),_("fixedrange"),e(g,p,_,A),n(g,p,_,A,y),a(g,p,_,A,y),r(g,p,_,{data:y.data,dataAttr:c});var S=s("gridcolor",v(h,.3)),k=s("gridwidth"),P=s("griddash"),z=_("showgrid");z||(delete p.gridcolor,delete p.gridwidth,delete p.griddash);var I=s("startlinecolor",h),D=s("startlinewidth",k),R=_("startline",p.showgrid||!!I||!!D);R||(delete p.startlinecolor,delete p.startlinewidth);var O=s("endlinecolor",h),F=s("endlinewidth",k),V=_("endline",p.showgrid||!!O||!!F);return V||(delete p.endlinecolor,delete p.endlinewidth),z?(_("minorgridcount"),_("minorgridwidth",k),_("minorgriddash",P),_("minorgridcolor",v(S,.06)),p.minorgridcount||(delete p.minorgridwidth,delete p.minorgriddash,delete p.minorgridcolor)):(delete p.gridcolor,delete p.gridwidth,delete p.griddash),p.showticklabels==="none"&&(delete p.tickfont,delete p.tickangle,delete p.showexponent,delete p.exponentformat,delete p.minexponent,delete p.tickformat,delete p.showticksuffix,delete p.showtickprefix),p.showticksuffix||delete p.ticksuffix,p.showtickprefix||delete p.tickprefix,_("tickmode"),p};function o(i,g){if(i.type==="-"){var p=i._id,y=p.charAt(0),c=y+"calendar",b=i[c];i.type=f(g,b,{autotypenumbers:i.autotypenumbers})}}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/axis_autotype":555,"../../plots/cartesian/category_order_defaults":559,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/set_convert":576,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_value_defaults":580,"../../registry":638,"./attributes":691}],695:[function(d,ne,ae){var w=d("../../plots/cartesian/axes"),v=d("../../lib").isArray1D,M=d("./cheater_basis"),T=d("./array_minmax"),e=d("./calc_gridlines"),a=d("./calc_labels"),n=d("./calc_clippath"),r=d("../heatmap/clean_2d_array"),t=d("./smooth_fill_2d_array"),f=d("../heatmap/convert_column_xyz"),o=d("./set_convert");ne.exports=function(g,p){var y=w.getFromId(g,p.xaxis),c=w.getFromId(g,p.yaxis),b=p.aaxis,l=p.baxis,_=p.x,s=p.y,A=[];_&&v(_)&&A.push("x"),s&&v(s)&&A.push("y"),A.length&&f(p,b,l,"a","b",A);var m=p._a=p._a||p.a,h=p._b=p._b||p.b;_=p._x||p.x,s=p._y||p.y;var x={};if(p._cheater){var u=b.cheatertype==="index"?m.length:m,L=l.cheatertype==="index"?h.length:h;_=M(u,L,p.cheaterslope)}p._x=_=r(_),p._y=s=r(s),t(_,m,h),t(s,m,h),o(p),p.setScale();var S=T(_),k=T(s),P=.5*(S[1]-S[0]),z=.5*(S[1]+S[0]),I=.5*(k[1]-k[0]),D=.5*(k[1]+k[0]),R=1.3;return S=[z-P*R,z+P*R],k=[D-I*R,D+I*R],p._extremes[y._id]=w.findExtremes(y,S,{padded:!0}),p._extremes[c._id]=w.findExtremes(c,k,{padded:!0}),e(p,"a","b"),e(p,"b","a"),a(p,b),a(p,l),x.clipsegments=n(p._xctrl,p._yctrl,b,l),x.x=_,x.y=s,x.a=m,x.b=h,[x]}},{"../../lib":503,"../../plots/cartesian/axes":554,"../heatmap/clean_2d_array":794,"../heatmap/convert_column_xyz":796,"./array_minmax":690,"./calc_clippath":696,"./calc_gridlines":697,"./calc_labels":698,"./cheater_basis":700,"./set_convert":713,"./smooth_fill_2d_array":714}],696:[function(d,ne,ae){ne.exports=function(v,M,T,e){var a,n,r,t=[],f=!!T.smoothing,o=!!e.smoothing,i=v[0].length-1,g=v.length-1;for(a=0,n=[],r=[];a<=i;a++)n[a]=v[0][a],r[a]=M[0][a];for(t.push({x:n,y:r,bicubic:f}),a=0,n=[],r=[];a<=g;a++)n[a]=v[a][i],r[a]=M[a][i];for(t.push({x:n,y:r,bicubic:o}),a=i,n=[],r=[];a>=0;a--)n[i-a]=v[g][a],r[i-a]=M[g][a];for(t.push({x:n,y:r,bicubic:f}),a=g,n=[],r=[];a>=0;a--)n[g-a]=v[a][0],r[g-a]=M[a][0];return t.push({x:n,y:r,bicubic:o}),t}},{}],697:[function(d,ne,ae){var w=d("../../plots/cartesian/axes"),v=d("../../lib/extend").extendFlat;ne.exports=function(T,e,a){var n,r,t,f,o,i,g,p,y,c,b,l,_,s,A=T["_"+e],m=T[e+"axis"],h=m._gridlines=[],x=m._minorgridlines=[],u=m._boundarylines=[],L=T["_"+a],S=T[a+"axis"];m.tickmode==="array"&&(m.tickvals=A.slice());var k=T._xctrl,P=T._yctrl,z=k[0].length,I=k.length,D=T._a.length,R=T._b.length;w.prepTicks(m),m.tickmode==="array"&&delete m.tickvals;var O=m.smoothing?3:1;function F(G){var J,Z,Y,j,re,se,oe,N,U,q,Q,W,X=[],ee=[],te={};if(e==="b")for(Z=T.b2j(G),Y=Math.floor(Math.max(0,Math.min(R-2,Z))),j=Z-Y,te.length=R,te.crossLength=D,te.xy=function(ie){return T.evalxy([],ie,Z)},te.dxy=function(ie,le){return T.dxydi([],ie,Y,le,j)},J=0;J<D;J++)se=Math.min(D-2,J),oe=J-se,N=T.evalxy([],J,Z),S.smoothing&&J>0&&(U=T.dxydi([],J-1,Y,0,j),X.push(re[0]+U[0]/3),ee.push(re[1]+U[1]/3),q=T.dxydi([],J-1,Y,1,j),X.push(N[0]-q[0]/3),ee.push(N[1]-q[1]/3)),X.push(N[0]),ee.push(N[1]),re=N;else for(J=T.a2i(G),se=Math.floor(Math.max(0,Math.min(D-2,J))),oe=J-se,te.length=D,te.crossLength=R,te.xy=function(ie){return T.evalxy([],J,ie)},te.dxy=function(ie,le){return T.dxydj([],se,ie,oe,le)},Z=0;Z<R;Z++)Y=Math.min(R-2,Z),j=Z-Y,N=T.evalxy([],J,Z),S.smoothing&&Z>0&&(Q=T.dxydj([],se,Z-1,oe,0),X.push(re[0]+Q[0]/3),ee.push(re[1]+Q[1]/3),W=T.dxydj([],se,Z-1,oe,1),X.push(N[0]-W[0]/3),ee.push(N[1]-W[1]/3)),X.push(N[0]),ee.push(N[1]),re=N;return te.axisLetter=e,te.axis=m,te.crossAxis=S,te.value=G,te.constvar=a,te.index=p,te.x=X,te.y=ee,te.smoothing=S.smoothing,te}function V(G){var J,Z,Y,j,re,se=[],oe=[],N={};if(N.length=A.length,N.crossLength=L.length,e==="b")for(Y=Math.max(0,Math.min(R-2,G)),re=Math.min(1,Math.max(0,G-Y)),N.xy=function(U){return T.evalxy([],U,G)},N.dxy=function(U,q){return T.dxydi([],U,Y,q,re)},J=0;J<z;J++)se[J]=k[G*O][J],oe[J]=P[G*O][J];else for(Z=Math.max(0,Math.min(D-2,G)),j=Math.min(1,Math.max(0,G-Z)),N.xy=function(U){return T.evalxy([],G,U)},N.dxy=function(U,q){return T.dxydj([],Z,U,j,q)},J=0;J<I;J++)se[J]=k[J][G*O],oe[J]=P[J][G*O];return N.axisLetter=e,N.axis=m,N.crossAxis=S,N.value=A[G],N.constvar=a,N.index=G,N.x=se,N.y=oe,N.smoothing=S.smoothing,N}if(m.tickmode==="array"){for(f=5e-15,o=[Math.floor((A.length-1-m.arraytick0)/m.arraydtick*(1+f)),Math.ceil(-m.arraytick0/m.arraydtick/(1+f))].sort(function(G,J){return G-J}),i=o[0]-1,g=o[1]+1,p=i;p<g;p++)r=m.arraytick0+m.arraydtick*p,!(r<0||r>A.length-1)&&h.push(v(V(r),{color:m.gridcolor,width:m.gridwidth,dash:m.griddash}));for(p=i;p<g;p++)if(t=m.arraytick0+m.arraydtick*p,b=Math.min(t+m.arraydtick,A.length-1),!(t<0||t>A.length-1)&&!(b<0||b>A.length-1))for(l=A[t],_=A[b],n=0;n<m.minorgridcount;n++)s=b-t,!(s<=0)&&(c=l+(_-l)*(n+1)/(m.minorgridcount+1)*(m.arraydtick/s),!(c<A[0]||c>A[A.length-1])&&x.push(v(F(c),{color:m.minorgridcolor,width:m.minorgridwidth,dash:m.minorgriddash})));m.startline&&u.push(v(V(0),{color:m.startlinecolor,width:m.startlinewidth})),m.endline&&u.push(v(V(A.length-1),{color:m.endlinecolor,width:m.endlinewidth}))}else{for(f=5e-15,o=[Math.floor((A[A.length-1]-m.tick0)/m.dtick*(1+f)),Math.ceil((A[0]-m.tick0)/m.dtick/(1+f))].sort(function(G,J){return G-J}),i=o[0],g=o[1],p=i;p<=g;p++)y=m.tick0+m.dtick*p,h.push(v(F(y),{color:m.gridcolor,width:m.gridwidth,dash:m.griddash}));for(p=i-1;p<g+1;p++)for(y=m.tick0+m.dtick*p,n=0;n<m.minorgridcount;n++)c=y+m.dtick*(n+1)/(m.minorgridcount+1),!(c<A[0]||c>A[A.length-1])&&x.push(v(F(c),{color:m.minorgridcolor,width:m.minorgridwidth,dash:m.minorgriddash}));m.startline&&u.push(v(F(A[0]),{color:m.startlinecolor,width:m.startlinewidth})),m.endline&&u.push(v(F(A[A.length-1]),{color:m.endlinecolor,width:m.endlinewidth}))}}},{"../../lib/extend":493,"../../plots/cartesian/axes":554}],698:[function(d,ne,ae){var w=d("../../plots/cartesian/axes"),v=d("../../lib/extend").extendFlat;ne.exports=function(T,e){var a,n,r,t,f,o=e._labels=[],i=e._gridlines;for(a=0;a<i.length;a++)f=i[a],["start","both"].indexOf(e.showticklabels)!==-1&&(n=w.tickText(e,f.value),v(n,{prefix:r,suffix:t,endAnchor:!0,xy:f.xy(0),dxy:f.dxy(0,0),axis:f.axis,length:f.crossAxis.length,font:f.axis.tickfont,isFirst:a===0,isLast:a===i.length-1}),o.push(n)),["end","both"].indexOf(e.showticklabels)!==-1&&(n=w.tickText(e,f.value),v(n,{endAnchor:!1,xy:f.xy(f.crossLength-1),dxy:f.dxy(f.crossLength-2,1),axis:f.axis,length:f.crossAxis.length,font:f.axis.tickfont,isFirst:a===0,isLast:a===i.length-1}),o.push(n))}},{"../../lib/extend":493,"../../plots/cartesian/axes":554}],699:[function(d,ne,ae){var w=.5;ne.exports=function(M,T,e,a){var n=M[0]-T[0],r=M[1]-T[1],t=e[0]-T[0],f=e[1]-T[1],o=Math.pow(n*n+r*r,w/2),i=Math.pow(t*t+f*f,w/2),g=(i*i*n-o*o*t)*a,p=(i*i*r-o*o*f)*a,y=i*(o+i)*3,c=o*(o+i)*3;return[[T[0]+(y&&g/y),T[1]+(y&&p/y)],[T[0]-(c&&g/c),T[1]-(c&&p/c)]]}},{}],700:[function(d,ne,ae){var w=d("../../lib").isArrayOrTypedArray;ne.exports=function(v,M,T){var e,a,n,r,t,f,o=[],i=w(v)?v.length:v,g=w(M)?M.length:M,p=w(v)?v:null,y=w(M)?M:null;p&&(n=(p.length-1)/(p[p.length-1]-p[0])/(i-1)),y&&(r=(y.length-1)/(y[y.length-1]-y[0])/(g-1));var c,b=1/0,l=-1/0;for(a=0;a<g;a++)for(o[a]=[],f=y?(y[a]-y[0])*r:a/(g-1),e=0;e<i;e++)t=p?(p[e]-p[0])*n:e/(i-1),c=t-f*T,b=Math.min(c,b),l=Math.max(c,l),o[a][e]=c;var _=1/(l-b),s=-b*_;for(a=0;a<g;a++)for(e=0;e<i;e++)o[a][e]=_*o[a][e]+s;return o}},{"../../lib":503}],701:[function(d,ne,ae){var w=d("./catmull_rom"),v=d("../../lib").ensureArray;function M(T,e,a){var n=-.5*a[0]+1.5*e[0],r=-.5*a[1]+1.5*e[1];return[(2*n+T[0])/3,(2*r+T[1])/3]}ne.exports=function(e,a,n,r,t,f){var o,i,g,p,y,c,b,l,_,s,A=n[0].length,m=n.length,h=t?3*A-2:A,x=f?3*m-2:m;for(e=v(e,x),a=v(a,x),g=0;g<x;g++)e[g]=v(e[g],h),a[g]=v(a[g],h);for(i=0,p=0;i<m;i++,p+=f?3:1)for(y=e[p],c=a[p],b=n[i],l=r[i],o=0,g=0;o<A;o++,g+=t?3:1)y[g]=b[o],c[g]=l[o];if(t)for(i=0,p=0;i<m;i++,p+=f?3:1){for(o=1,g=3;o<A-1;o++,g+=3)_=w([n[i][o-1],r[i][o-1]],[n[i][o],r[i][o]],[n[i][o+1],r[i][o+1]],t),e[p][g-1]=_[0][0],a[p][g-1]=_[0][1],e[p][g+1]=_[1][0],a[p][g+1]=_[1][1];s=M([e[p][0],a[p][0]],[e[p][2],a[p][2]],[e[p][3],a[p][3]]),e[p][1]=s[0],a[p][1]=s[1],s=M([e[p][h-1],a[p][h-1]],[e[p][h-3],a[p][h-3]],[e[p][h-4],a[p][h-4]]),e[p][h-2]=s[0],a[p][h-2]=s[1]}if(f)for(g=0;g<h;g++){for(p=3;p<x-3;p+=3)_=w([e[p-3][g],a[p-3][g]],[e[p][g],a[p][g]],[e[p+3][g],a[p+3][g]],f),e[p-1][g]=_[0][0],a[p-1][g]=_[0][1],e[p+1][g]=_[1][0],a[p+1][g]=_[1][1];s=M([e[0][g],a[0][g]],[e[2][g],a[2][g]],[e[3][g],a[3][g]]),e[1][g]=s[0],a[1][g]=s[1],s=M([e[x-1][g],a[x-1][g]],[e[x-3][g],a[x-3][g]],[e[x-4][g],a[x-4][g]]),e[x-2][g]=s[0],a[x-2][g]=s[1]}if(t&&f)for(p=1;p<x;p+=(p+1)%3===0?2:1){for(g=3;g<h-3;g+=3)_=w([e[p][g-3],a[p][g-3]],[e[p][g],a[p][g]],[e[p][g+3],a[p][g+3]],t),e[p][g-1]=.5*(e[p][g-1]+_[0][0]),a[p][g-1]=.5*(a[p][g-1]+_[0][1]),e[p][g+1]=.5*(e[p][g+1]+_[1][0]),a[p][g+1]=.5*(a[p][g+1]+_[1][1]);s=M([e[p][0],a[p][0]],[e[p][2],a[p][2]],[e[p][3],a[p][3]]),e[p][1]=.5*(e[p][1]+s[0]),a[p][1]=.5*(a[p][1]+s[1]),s=M([e[p][h-1],a[p][h-1]],[e[p][h-3],a[p][h-3]],[e[p][h-4],a[p][h-4]]),e[p][h-2]=.5*(e[p][h-2]+s[0]),a[p][h-2]=.5*(a[p][h-2]+s[1])}return[e,a]}},{"../../lib":503,"./catmull_rom":699}],702:[function(d,ne,ae){ne.exports={RELATIVE_CULL_TOLERANCE:1e-6}},{}],703:[function(d,ne,ae){ne.exports=function(w,v,M){return v&&M?function(T,e,a,n,r){T||(T=[]);var t,f,o,i,g,p;e*=3,a*=3;var y=n*n,c=1-n,b=c*c,l=c*n*2,_=-3*b,s=3*(b-l),A=3*(l-y),m=3*y,h=r*r,x=h*r,u=1-r,L=u*u,S=L*u;for(p=0;p<w.length;p++)g=w[p],t=_*g[a][e]+s*g[a][e+1]+A*g[a][e+2]+m*g[a][e+3],f=_*g[a+1][e]+s*g[a+1][e+1]+A*g[a+1][e+2]+m*g[a+1][e+3],o=_*g[a+2][e]+s*g[a+2][e+1]+A*g[a+2][e+2]+m*g[a+2][e+3],i=_*g[a+3][e]+s*g[a+3][e+1]+A*g[a+3][e+2]+m*g[a+3][e+3],T[p]=S*t+3*(L*r*f+u*h*o)+x*i;return T}:v?function(T,e,a,n,r){T||(T=[]);var t,f,o,i;e*=3;var g=n*n,p=1-n,y=p*p,c=p*n*2,b=-3*y,l=3*(y-c),_=3*(c-g),s=3*g,A=1-r;for(o=0;o<w.length;o++)i=w[o],t=b*i[a][e]+l*i[a][e+1]+_*i[a][e+2]+s*i[a][e+3],f=b*i[a+1][e]+l*i[a+1][e+1]+_*i[a+1][e+2]+s*i[a+1][e+3],T[o]=A*t+r*f;return T}:M?function(T,e,a,n,r){T||(T=[]);var t,f,o,i,g,p;a*=3;var y=r*r,c=y*r,b=1-r,l=b*b,_=l*b;for(g=0;g<w.length;g++)p=w[g],t=p[a][e+1]-p[a][e],f=p[a+1][e+1]-p[a+1][e],o=p[a+2][e+1]-p[a+2][e],i=p[a+3][e+1]-p[a+3][e],T[g]=_*t+3*(l*r*f+b*y*o)+c*i;return T}:function(T,e,a,n,r){T||(T=[]);var t,f,o,i,g=1-r;for(o=0;o<w.length;o++)i=w[o],t=i[a][e+1]-i[a][e],f=i[a+1][e+1]-i[a+1][e],T[o]=g*t+r*f;return T}}},{}],704:[function(d,ne,ae){ne.exports=function(w,v,M){return v&&M?function(T,e,a,n,r){T||(T=[]);var t,f,o,i,g,p;e*=3,a*=3;var y=n*n,c=y*n,b=1-n,l=b*b,_=l*b,s=r*r,A=1-r,m=A*A,h=A*r*2,x=-3*m,u=3*(m-h),L=3*(h-s),S=3*s;for(p=0;p<w.length;p++)g=w[p],t=x*g[a][e]+u*g[a+1][e]+L*g[a+2][e]+S*g[a+3][e],f=x*g[a][e+1]+u*g[a+1][e+1]+L*g[a+2][e+1]+S*g[a+3][e+1],o=x*g[a][e+2]+u*g[a+1][e+2]+L*g[a+2][e+2]+S*g[a+3][e+2],i=x*g[a][e+3]+u*g[a+1][e+3]+L*g[a+2][e+3]+S*g[a+3][e+3],T[p]=_*t+3*(l*n*f+b*y*o)+c*i;return T}:v?function(T,e,a,n,r){T||(T=[]);var t,f,o,i,g,p;e*=3;var y=r*r,c=y*r,b=1-r,l=b*b,_=l*b;for(g=0;g<w.length;g++)p=w[g],t=p[a+1][e]-p[a][e],f=p[a+1][e+1]-p[a][e+1],o=p[a+1][e+2]-p[a][e+2],i=p[a+1][e+3]-p[a][e+3],T[g]=_*t+3*(l*r*f+b*y*o)+c*i;return T}:M?function(T,e,a,n,r){T||(T=[]);var t,f,o,i;a*=3;var g=1-n,p=r*r,y=1-r,c=y*y,b=y*r*2,l=-3*c,_=3*(c-b),s=3*(b-p),A=3*p;for(o=0;o<w.length;o++)i=w[o],t=l*i[a][e]+_*i[a+1][e]+s*i[a+2][e]+A*i[a+3][e],f=l*i[a][e+1]+_*i[a+1][e+1]+s*i[a+2][e+1]+A*i[a+3][e+1],T[o]=g*t+n*f;return T}:function(T,e,a,n,r){T||(T=[]);var t,f,o,i,g=1-n;for(o=0;o<w.length;o++)i=w[o],t=i[a+1][e]-i[a][e],f=i[a+1][e+1]-i[a][e+1],T[o]=g*t+n*f;return T}}},{}],705:[function(d,ne,ae){ne.exports=function(w,v,M,T,e){var a=v-2,n=M-2;return T&&e?function(r,t,f){r||(r=[]);var o,i,g,p,y,c,b=Math.max(0,Math.min(Math.floor(t),a)),l=Math.max(0,Math.min(Math.floor(f),n)),_=Math.max(0,Math.min(1,t-b)),s=Math.max(0,Math.min(1,f-l));b*=3,l*=3;var A=_*_,m=A*_,h=1-_,x=h*h,u=x*h,L=s*s,S=L*s,k=1-s,P=k*k,z=P*k;for(c=0;c<w.length;c++)y=w[c],o=u*y[l][b]+3*(x*_*y[l][b+1]+h*A*y[l][b+2])+m*y[l][b+3],i=u*y[l+1][b]+3*(x*_*y[l+1][b+1]+h*A*y[l+1][b+2])+m*y[l+1][b+3],g=u*y[l+2][b]+3*(x*_*y[l+2][b+1]+h*A*y[l+2][b+2])+m*y[l+2][b+3],p=u*y[l+3][b]+3*(x*_*y[l+3][b+1]+h*A*y[l+3][b+2])+m*y[l+3][b+3],r[c]=z*o+3*(P*s*i+k*L*g)+S*p;return r}:T?function(r,t,f){r||(r=[]);var o=Math.max(0,Math.min(Math.floor(t),a)),i=Math.max(0,Math.min(Math.floor(f),n)),g=Math.max(0,Math.min(1,t-o)),p=Math.max(0,Math.min(1,f-i)),y,c,b,l,_,s;o*=3;var A=g*g,m=A*g,h=1-g,x=h*h,u=x*h,L=1-p;for(_=0;_<w.length;_++)s=w[_],y=L*s[i][o]+p*s[i+1][o],c=L*s[i][o+1]+p*s[i+1][o+1],b=L*s[i][o+2]+p*s[i+1][o+1],l=L*s[i][o+3]+p*s[i+1][o+1],r[_]=u*y+3*(x*g*c+h*A*b)+m*l;return r}:e?function(r,t,f){r||(r=[]);var o=Math.max(0,Math.min(Math.floor(t),a)),i=Math.max(0,Math.min(Math.floor(f),n)),g=Math.max(0,Math.min(1,t-o)),p=Math.max(0,Math.min(1,f-i)),y,c,b,l,_,s;i*=3;var A=p*p,m=A*p,h=1-p,x=h*h,u=x*h,L=1-g;for(_=0;_<w.length;_++)s=w[_],y=L*s[i][o]+g*s[i][o+1],c=L*s[i+1][o]+g*s[i+1][o+1],b=L*s[i+2][o]+g*s[i+2][o+1],l=L*s[i+3][o]+g*s[i+3][o+1],r[_]=u*y+3*(x*p*c+h*A*b)+m*l;return r}:function(r,t,f){r||(r=[]);var o=Math.max(0,Math.min(Math.floor(t),a)),i=Math.max(0,Math.min(Math.floor(f),n)),g=Math.max(0,Math.min(1,t-o)),p=Math.max(0,Math.min(1,f-i)),y,c,b,l,_=1-p,s=1-g;for(b=0;b<w.length;b++)l=w[b],y=s*l[i][o]+g*l[i][o+1],c=s*l[i+1][o]+g*l[i+1][o+1],r[b]=_*y+p*c;return r}}},{}],706:[function(d,ne,ae){var w=d("../../lib"),v=d("./xy_defaults"),M=d("./ab_defaults"),T=d("./attributes"),e=d("../../components/color/attributes");ne.exports=function(n,r,t,f){function o(p,y){return w.coerce(n,r,T,p,y)}r._clipPathId="clip"+r.uid+"carpet";var i=o("color",e.defaultLine);if(w.coerceFont(o,"font"),o("carpet"),M(n,r,f,o,i),!r.a||!r.b){r.visible=!1;return}r.a.length<3&&(r.aaxis.smoothing=0),r.b.length<3&&(r.baxis.smoothing=0);var g=v(n,r,o);g||(r.visible=!1),r._cheater&&o("cheaterslope")}},{"../../components/color/attributes":365,"../../lib":503,"./ab_defaults":689,"./attributes":691,"./xy_defaults":715}],707:[function(d,ne,ae){ne.exports={attributes:d("./attributes"),supplyDefaults:d("./defaults"),plot:d("./plot"),calc:d("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:d("../../plots/cartesian"),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":568,"./attributes":691,"./calc":695,"./defaults":706,"./plot":712}],708:[function(d,ne,ae){ne.exports=function(w,v){for(var M=w._fullData.length,T,e=0;e<M;e++){var a=w._fullData[e];if(a.index!==v.index&&a.type==="carpet"&&(T||(T=a),a.carpet===v.carpet))return a}return T}},{}],709:[function(d,ne,ae){ne.exports=function(v,M,T){if(v.length===0)return"";var e,a=[],n=T?3:1;for(e=0;e<v.length;e+=n)a.push(v[e]+","+M[e]),T&&e<v.length-n&&(a.push("C"),a.push([v[e+1]+","+M[e+1],v[e+2]+","+M[e+2]+" "].join(" ")));return a.join(T?"":"L")}},{}],710:[function(d,ne,ae){var w=d("../../lib").isArrayOrTypedArray;ne.exports=function(M,T,e){var a;for(w(M)?M.length>T.length&&(M=M.slice(0,T.length)):M=[],a=0;a<T.length;a++)M[a]=e(T[a]);return M}},{"../../lib":503}],711:[function(d,ne,ae){ne.exports=function(v,M,T,e,a,n){var r=a[0]*v.dpdx(M),t=a[1]*v.dpdy(T),f=1,o=1;if(n){var i=Math.sqrt(a[0]*a[0]+a[1]*a[1]),g=Math.sqrt(n[0]*n[0]+n[1]*n[1]),p=(a[0]*n[0]+a[1]*n[1])/i/g;o=Math.max(0,p)}var y=Math.atan2(t,r)*180/Math.PI;return y<-90?(y+=180,f=-f):y>90&&(y-=180,f=-f),{angle:y,flip:f,p:v.c2p(e,M,T),offsetMultplier:o}}},{}],712:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../components/drawing"),M=d("./map_1d_array"),T=d("./makepath"),e=d("./orient_text"),a=d("../../lib/svg_text_utils"),n=d("../../lib"),r=n.strRotate,t=n.strTranslate,f=d("../../constants/alignment");ne.exports=function(_,s,A,m){var h=s.xaxis,x=s.yaxis,u=_._fullLayout,L=u._clips;n.makeTraceGroups(m,A,"trace").each(function(S){var k=w.select(this),P=S[0],z=P.trace,I=z.aaxis,D=z.baxis,R=n.ensureSingle(k,"g","minorlayer"),O=n.ensureSingle(k,"g","majorlayer"),F=n.ensureSingle(k,"g","boundarylayer"),V=n.ensureSingle(k,"g","labellayer");k.style("opacity",z.opacity),i(h,x,O,I,"a",I._gridlines),i(h,x,O,D,"b",D._gridlines),i(h,x,R,I,"a",I._minorgridlines),i(h,x,R,D,"b",D._minorgridlines),i(h,x,F,I,"a-boundary",I._boundarylines),i(h,x,F,D,"b-boundary",D._boundarylines);var G=g(_,h,x,z,P,V,I._labels,"a-label"),J=g(_,h,x,z,P,V,D._labels,"b-label");p(_,V,z,P,h,x,G,J),o(z,P,L,h,x)})};function o(l,_,s,A,m){var h,x,u,L,S=s.select("#"+l._clipPathId);S.size()||(S=s.append("clipPath").classed("carpetclip",!0));var k=n.ensureSingle(S,"path","carpetboundary"),P=_.clipsegments,z=[];for(L=0;L<P.length;L++)h=P[L],x=M([],h.x,A.c2p),u=M([],h.y,m.c2p),z.push(T(x,u,h.bicubic));var I="M"+z.join("L")+"Z";S.attr("id",l._clipPathId),k.attr("d",I)}function i(l,_,s,A,m,h){var x="const-"+m+"-lines",u=s.selectAll("."+x).data(h);u.enter().append("path").classed(x,!0).style("vector-effect","non-scaling-stroke"),u.each(function(L){var S=L,k=S.x,P=S.y,z=M([],k,l.c2p),I=M([],P,_.c2p),D="M"+T(z,I,S.smoothing),R=w.select(this);R.attr("d",D).style("stroke-width",S.width).style("stroke",S.color).style("stroke-dasharray",v.dashStyle(S.dash,S.width)).style("fill","none")}),u.exit().remove()}function g(l,_,s,A,m,h,x,u){var L=h.selectAll("text."+u).data(x);L.enter().append("text").classed(u,!0);var S=0,k={};return L.each(function(P,z){var I;if(P.axis.tickangle==="auto")I=e(A,_,s,P.xy,P.dxy);else{var D=(P.axis.tickangle+180)*Math.PI/180;I=e(A,_,s,P.xy,[Math.cos(D),Math.sin(D)])}z||(k={angle:I.angle,flip:I.flip});var R=(P.endAnchor?-1:1)*I.flip,O=w.select(this).attr({"text-anchor":R>0?"start":"end","data-notex":1}).call(v.font,P.font).text(P.text).call(a.convertToTspans,l),F=v.bBox(this);O.attr("transform",t(I.p[0],I.p[1])+r(I.angle)+t(P.axis.labelpadding*R,F.height*.3)),S=Math.max(S,F.width+P.axis.labelpadding)}),L.exit().remove(),k.maxExtent=S,k}function p(l,_,s,A,m,h,x,u){var L,S,k,P,z=n.aggNums(Math.min,null,s.a),I=n.aggNums(Math.max,null,s.a),D=n.aggNums(Math.min,null,s.b),R=n.aggNums(Math.max,null,s.b);L=.5*(z+I),S=D,k=s.ab2xy(L,S,!0),P=s.dxyda_rough(L,S),x.angle===void 0&&n.extendFlat(x,e(s,m,h,k,s.dxydb_rough(L,S))),b(l,_,s,A,k,P,s.aaxis,m,h,x,"a-title"),L=z,S=.5*(D+R),k=s.ab2xy(L,S,!0),P=s.dxydb_rough(L,S),u.angle===void 0&&n.extendFlat(u,e(s,m,h,k,s.dxyda_rough(L,S))),b(l,_,s,A,k,P,s.baxis,m,h,u,"b-title")}var y=f.LINE_SPACING,c=(1-f.MID_SHIFT)/y+1;function b(l,_,s,A,m,h,x,u,L,S,k){var P=[];x.title.text&&P.push(x.title.text);var z=_.selectAll("text."+k).data(P),I=S.maxExtent;z.enter().append("text").classed(k,!0),z.each(function(){var D=e(s,u,L,m,h);["start","both"].indexOf(x.showticklabels)===-1&&(I=0);var R=x.title.font.size;I+=R+x.title.offset;var O=S.angle+(S.flip<0?180:0),F=(O-D.angle+450)%360,V=F>90&&F<270,G=w.select(this);G.text(x.title.text).call(a.convertToTspans,l),V&&(I=(-a.lineCount(G)+c)*y*R-I),G.attr("transform",t(D.p[0],D.p[1])+r(D.angle)+t(0,I)).attr("text-anchor","middle").call(v.font,x.title.font)}),z.exit().remove()}},{"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"./makepath":709,"./map_1d_array":710,"./orient_text":711,"@plotly/d3":58}],713:[function(d,ne,ae){var w=d("./constants"),v=d("../../lib/search").findBin,M=d("./compute_control_points"),T=d("./create_spline_evaluator"),e=d("./create_i_derivative_evaluator"),a=d("./create_j_derivative_evaluator");ne.exports=function(r){var t=r._a,f=r._b,o=t.length,i=f.length,g=r.aaxis,p=r.baxis,y=t[0],c=t[o-1],b=f[0],l=f[i-1],_=t[t.length-1]-t[0],s=f[f.length-1]-f[0],A=_*w.RELATIVE_CULL_TOLERANCE,m=s*w.RELATIVE_CULL_TOLERANCE;y-=A,c+=A,b-=m,l+=m,r.isVisible=function(h,x){return h>y&&h<c&&x>b&&x<l},r.isOccluded=function(h,x){return h<y||h>c||x<b||x>l},r.setScale=function(){var h=r._x,x=r._y,u=M(r._xctrl,r._yctrl,h,x,g.smoothing,p.smoothing);r._xctrl=u[0],r._yctrl=u[1],r.evalxy=T([r._xctrl,r._yctrl],o,i,g.smoothing,p.smoothing),r.dxydi=e([r._xctrl,r._yctrl],g.smoothing,p.smoothing),r.dxydj=a([r._xctrl,r._yctrl],g.smoothing,p.smoothing)},r.i2a=function(h){var x=Math.max(0,Math.floor(h[0]),o-2),u=h[0]-x;return(1-u)*t[x]+u*t[x+1]},r.j2b=function(h){var x=Math.max(0,Math.floor(h[1]),o-2),u=h[1]-x;return(1-u)*f[x]+u*f[x+1]},r.ij2ab=function(h){return[r.i2a(h[0]),r.j2b(h[1])]},r.a2i=function(h){var x=Math.max(0,Math.min(v(h,t),o-2)),u=t[x],L=t[x+1];return Math.max(0,Math.min(o-1,x+(h-u)/(L-u)))},r.b2j=function(h){var x=Math.max(0,Math.min(v(h,f),i-2)),u=f[x],L=f[x+1];return Math.max(0,Math.min(i-1,x+(h-u)/(L-u)))},r.ab2ij=function(h){return[r.a2i(h[0]),r.b2j(h[1])]},r.i2c=function(h,x){return r.evalxy([],h,x)},r.ab2xy=function(h,x,u){if(!u&&(h<t[0]||h>t[o-1]|x<f[0]||x>f[i-1]))return[!1,!1];var L=r.a2i(h),S=r.b2j(x),k=r.evalxy([],L,S);if(u){var P=0,z=0,I=[],D,R,O,F;h<t[0]?(D=0,R=0,P=(h-t[0])/(t[1]-t[0])):h>t[o-1]?(D=o-2,R=1,P=(h-t[o-1])/(t[o-1]-t[o-2])):(D=Math.max(0,Math.min(o-2,Math.floor(L))),R=L-D),x<f[0]?(O=0,F=0,z=(x-f[0])/(f[1]-f[0])):x>f[i-1]?(O=i-2,F=1,z=(x-f[i-1])/(f[i-1]-f[i-2])):(O=Math.max(0,Math.min(i-2,Math.floor(S))),F=S-O),P&&(r.dxydi(I,D,O,R,F),k[0]+=I[0]*P,k[1]+=I[1]*P),z&&(r.dxydj(I,D,O,R,F),k[0]+=I[0]*z,k[1]+=I[1]*z)}return k},r.c2p=function(h,x,u){return[x.c2p(h[0]),u.c2p(h[1])]},r.p2x=function(h,x,u){return[x.p2c(h[0]),u.p2c(h[1])]},r.dadi=function(h){var x=Math.max(0,Math.min(t.length-2,h));return t[x+1]-t[x]},r.dbdj=function(h){var x=Math.max(0,Math.min(f.length-2,h));return f[x+1]-f[x]},r.dxyda=function(h,x,u,L){var S=r.dxydi(null,h,x,u,L),k=r.dadi(h,u);return[S[0]/k,S[1]/k]},r.dxydb=function(h,x,u,L){var S=r.dxydj(null,h,x,u,L),k=r.dbdj(x,L);return[S[0]/k,S[1]/k]},r.dxyda_rough=function(h,x,u){var L=_*(u||.1),S=r.ab2xy(h+L,x,!0),k=r.ab2xy(h-L,x,!0);return[(S[0]-k[0])*.5/L,(S[1]-k[1])*.5/L]},r.dxydb_rough=function(h,x,u){var L=s*(u||.1),S=r.ab2xy(h,x+L,!0),k=r.ab2xy(h,x-L,!0);return[(S[0]-k[0])*.5/L,(S[1]-k[1])*.5/L]},r.dpdx=function(h){return h._m},r.dpdy=function(h){return h._m}}},{"../../lib/search":523,"./compute_control_points":701,"./constants":702,"./create_i_derivative_evaluator":703,"./create_j_derivative_evaluator":704,"./create_spline_evaluator":705}],714:[function(d,ne,ae){var w=d("../../lib");ne.exports=function(M,T,e){var a,n,r,t=[],f=[],o=M[0].length,i=M.length;function g(Z,Y){var j=0,re,se=0;return Z>0&&(re=M[Y][Z-1])!==void 0&&(se++,j+=re),Z<o-1&&(re=M[Y][Z+1])!==void 0&&(se++,j+=re),Y>0&&(re=M[Y-1][Z])!==void 0&&(se++,j+=re),Y<i-1&&(re=M[Y+1][Z])!==void 0&&(se++,j+=re),j/Math.max(1,se)}var p=0;for(a=0;a<o;a++)for(n=0;n<i;n++)M[n][a]===void 0&&(t.push(a),f.push(n),M[n][a]=g(a,n)),p=Math.max(p,Math.abs(M[n][a]));if(!t.length)return M;var y,c,b,l,_,s,A,m,h,x,u,L=1e-5,S=0,k=100,P=0,z=t.length;do{for(S=0,r=0;r<z;r++){a=t[r],n=f[r];var I=0,D=0,R,O,F,V,G,J;a===0?(G=Math.min(o-1,2),F=T[G],V=T[1],R=M[n][G],O=M[n][1],D+=O+(O-R)*(T[0]-V)/(V-F),I++):a===o-1&&(G=Math.max(0,o-3),F=T[G],V=T[o-2],R=M[n][G],O=M[n][o-2],D+=O+(O-R)*(T[o-1]-V)/(V-F),I++),(a===0||a===o-1)&&n>0&&n<i-1&&(y=e[n+1]-e[n],c=e[n]-e[n-1],D+=(c*M[n+1][a]+y*M[n-1][a])/(c+y),I++),n===0?(J=Math.min(i-1,2),F=e[J],V=e[1],R=M[J][a],O=M[1][a],D+=O+(O-R)*(e[0]-V)/(V-F),I++):n===i-1&&(J=Math.max(0,i-3),F=e[J],V=e[i-2],R=M[J][a],O=M[i-2][a],D+=O+(O-R)*(e[i-1]-V)/(V-F),I++),(n===0||n===i-1)&&a>0&&a<o-1&&(y=T[a+1]-T[a],c=T[a]-T[a-1],D+=(c*M[n][a+1]+y*M[n][a-1])/(c+y),I++),I?D/=I:(b=T[a+1]-T[a],l=T[a]-T[a-1],_=e[n+1]-e[n],s=e[n]-e[n-1],A=b*l*(b+l),m=_*s*(_+s),D=(A*(s*M[n+1][a]+_*M[n-1][a])+m*(l*M[n][a+1]+b*M[n][a-1]))/(m*(l+b)+A*(s+_))),h=D-M[n][a],x=h/p,S+=x*x,u=I?0:.85,M[n][a]+=h*(1+u)}S=Math.sqrt(S)}while(P++<k&&S>L);return w.log("Smoother converged to",S,"after",P,"iterations"),M}},{"../../lib":503}],715:[function(d,ne,ae){var w=d("../../lib").isArray1D;ne.exports=function(M,T,e){var a=e("x"),n=a&&a.length,r=e("y"),t=r&&r.length;if(!n&&!t)return!1;if(T._cheater=!a,(!n||w(a))&&(!t||w(r))){var f=n?a.length:1/0;t&&(f=Math.min(f,r.length)),T.a&&T.a.length&&(f=Math.min(f,T.a.length)),T.b&&T.b.length&&(f=Math.min(f,T.b.length)),T._length=f}else T._length=null;return!0}},{"../../lib":503}],716:[function(d,ne,ae){var w=d("../../plots/template_attributes").hovertemplateAttrs,v=d("../scattergeo/attributes"),M=d("../../components/colorscale/attributes"),T=d("../../plots/attributes"),e=d("../../components/color/attributes").defaultLine,a=d("../../lib/extend").extendFlat,n=v.marker.line;ne.exports=a({locations:{valType:"data_array",editType:"calc"},locationmode:v.locationmode,z:{valType:"data_array",editType:"calc"},geojson:a({},v.geojson,{}),featureidkey:v.featureidkey,text:a({},v.text,{}),hovertext:a({},v.hovertext,{}),marker:{line:{color:a({},n.color,{dflt:e}),width:a({},n.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:v.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:v.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:a({},T.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:w(),showlegend:a({},T.showlegend,{dflt:!1})},M("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":365,"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scattergeo/attributes":969}],717:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("../../constants/numerical").BADNUM,M=d("../../components/colorscale/calc"),T=d("../scatter/arrays_to_calcdata"),e=d("../scatter/calc_selection");function a(n){return n&&typeof n=="string"}ne.exports=function(r,t){var f=t._length,o=new Array(f),i;t.geojson?i=function(b){return a(b)||w(b)}:i=a;for(var g=0;g<f;g++){var p=o[g]={},y=t.locations[g],c=t.z[g];i(y)&&w(c)?(p.loc=y,p.z=c):(p.loc=null,p.z=v),p.index=g}return T(o,t),M(r,t,{vals:t.z,containerStr:"",cLetter:"z"}),e(o,t),o}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../scatter/arrays_to_calcdata":926,"../scatter/calc_selection":929,"fast-isnumeric":190}],718:[function(d,ne,ae){var w=d("../../lib"),v=d("../../components/colorscale/defaults"),M=d("./attributes");ne.exports=function(e,a,n,r){function t(c,b){return w.coerce(e,a,M,c,b)}var f=t("locations"),o=t("z");if(!(f&&f.length&&w.isArrayOrTypedArray(o)&&o.length)){a.visible=!1;return}a._length=Math.min(f.length,o.length);var i=t("geojson"),g;(typeof i=="string"&&i!==""||w.isPlainObject(i))&&(g="geojson-id");var p=t("locationmode",g);p==="geojson-id"&&t("featureidkey"),t("text"),t("hovertext"),t("hovertemplate");var y=t("marker.line.width");y&&t("marker.line.color"),t("marker.opacity"),v(e,a,r,t,{prefix:"",cLetter:"z"}),w.coerceSelectionMarkerOpacity(a,t)}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":716}],719:[function(d,ne,ae){ne.exports=function(v,M,T,e,a){v.location=M.location,v.z=M.z;var n=e[a];return n.fIn&&n.fIn.properties&&(v.properties=n.fIn.properties),v.ct=n.ct,v}},{}],720:[function(d,ne,ae){var w=d("../../plots/cartesian/axes"),v=d("./attributes"),M=d("../../lib").fillText;ne.exports=function(a,n,r){var t=a.cd,f=t[0].trace,o=a.subplot,i,g,p,y,c=[n,r],b=[n+360,r];for(g=0;g<t.length;g++)if(i=t[g],y=!1,i._polygons){for(p=0;p<i._polygons.length;p++)i._polygons[p].contains(c)&&(y=!y),i._polygons[p].contains(b)&&(y=!y);if(y)break}if(!(!y||!i))return a.x0=a.x1=a.xa.c2p(i.ct),a.y0=a.y1=a.ya.c2p(i.ct),a.index=i.index,a.location=i.loc,a.z=i.z,a.zLabel=w.tickText(o.mockAxis,o.mockAxis.c2l(i.z),"hover").text,a.hovertemplate=i.hovertemplate,T(a,f,i),[a]};function T(e,a,n){if(!a.hovertemplate){var r=n.hi||a.hoverinfo,t=String(n.loc),f=r==="all"?v.hoverinfo.flags:r.split("+"),o=f.indexOf("name")!==-1,i=f.indexOf("location")!==-1,g=f.indexOf("z")!==-1,p=f.indexOf("text")!==-1,y=!o&&i,c=[];y?e.nameOverride=t:(o&&(e.nameOverride=a.name),i&&c.push(t)),g&&c.push(e.zLabel),p&&M(n,a,c),e.extraText=c.join("<br>")}}},{"../../lib":503,"../../plots/cartesian/axes":554,"./attributes":716}],721:[function(d,ne,ae){ne.exports={attributes:d("./attributes"),supplyDefaults:d("./defaults"),colorbar:d("../heatmap/colorbar"),calc:d("./calc"),calcGeoJSON:d("./plot").calcGeoJSON,plot:d("./plot").plot,style:d("./style").style,styleOnSelect:d("./style").styleOnSelect,hoverPoints:d("./hover"),eventData:d("./event_data"),selectPoints:d("./select"),moduleType:"trace",name:"choropleth",basePlotModule:d("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":589,"../heatmap/colorbar":795,"./attributes":716,"./calc":717,"./defaults":718,"./event_data":719,"./hover":720,"./plot":722,"./select":723,"./style":724}],722:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../lib"),M=d("../../lib/geo_location_utils"),T=d("../../lib/topojson_utils").getTopojsonFeatures,e=d("../../plots/cartesian/autorange").findExtremes,a=d("./style").style;function n(t,f,o){var i=f.layers.backplot.select(".choroplethlayer");v.makeTraceGroups(i,o,"trace choropleth").each(function(g){var p=w.select(this),y=p.selectAll("path.choroplethlocation").data(v.identity);y.enter().append("path").classed("choroplethlocation",!0),y.exit().remove(),a(t,g)})}function r(t,f){for(var o=t[0].trace,i=f[o.geo],g=i._subplot,p=o.locationmode,y=o._length,c=p==="geojson-id"?M.extractTraceFeature(t):T(o,g.topojson),b=[],l=[],_=0;_<y;_++){var s=t[_],A=p==="geojson-id"?s.fOut:M.locationToFeature(p,s.loc,c);if(A){s.geojson=A,s.ct=A.properties.ct,s._polygons=M.feature2polygons(A);var m=M.computeBbox(A);b.push(m[0],m[2]),l.push(m[1],m[3])}else s.geojson=null}if(i.fitbounds==="geojson"&&p==="geojson-id"){var h=M.computeBbox(M.getTraceGeojson(o));b=[h[0],h[2]],l=[h[1],h[3]]}var x={padded:!0};o._extremes.lon=e(i.lonaxis._ax,b,x),o._extremes.lat=e(i.lataxis._ax,l,x)}ne.exports={calcGeoJSON:r,plot:n}},{"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/topojson_utils":532,"../../plots/cartesian/autorange":553,"./style":724,"@plotly/d3":58}],723:[function(d,ne,ae){ne.exports=function(v,M){var T=v.cd,e=v.xaxis,a=v.yaxis,n=[],r,t,f,o,i;if(M===!1)for(r=0;r<T.length;r++)T[r].selected=0;else for(r=0;r<T.length;r++)t=T[r],f=t.ct,f&&(o=e.c2p(f),i=a.c2p(f),M.contains([o,i],null,r,v)?(n.push({pointNumber:r,lon:f[0],lat:f[1]}),t.selected=1):t.selected=0);return n}},{}],724:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../components/color"),M=d("../../components/drawing"),T=d("../../components/colorscale");function e(r,t){t&&a(r,t)}function a(r,t){var f=t[0].trace,o=t[0].node3,i=o.selectAll(".choroplethlocation"),g=f.marker||{},p=g.line||{},y=T.makeColorScaleFuncFromTrace(f);i.each(function(c){w.select(this).attr("fill",y(c.z)).call(v.stroke,c.mlc||p.color).call(M.dashLine,"",c.mlw||p.width||0).style("opacity",g.opacity)}),M.selectedPointStyle(i,f,r)}function n(r,t){var f=t[0].node3,o=t[0].trace;o.selectedpoints?M.selectedPointStyle(f.selectAll(".choroplethlocation"),o,r):a(r,t)}ne.exports={style:e,styleOnSelect:n}},{"../../components/color":366,"../../components/colorscale":378,"../../components/drawing":388,"@plotly/d3":58}],725:[function(d,ne,ae){var w=d("../choropleth/attributes"),v=d("../../components/colorscale/attributes"),M=d("../../plots/template_attributes").hovertemplateAttrs,T=d("../../plots/attributes"),e=d("../../lib/extend").extendFlat;ne.exports=e({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:e({},w.featureidkey,{}),below:{valType:"string",editType:"plot"},text:w.text,hovertext:w.hovertext,marker:{line:{color:e({},w.marker.line.color,{editType:"plot"}),width:e({},w.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:e({},w.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:e({},w.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:e({},w.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:w.hoverinfo,hovertemplate:M({},{keys:["properties"]}),showlegend:e({},T.showlegend,{dflt:!1})},v("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../choropleth/attributes":716}],726:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("../../lib"),M=d("../../components/colorscale"),T=d("../../components/drawing"),e=d("../../lib/geojson_utils").makeBlank,a=d("../../lib/geo_location_utils");function n(t){var f=t[0].trace,o=f.visible===!0&&f._length!==0,i={layout:{visibility:"none"},paint:{}},g={layout:{visibility:"none"},paint:{}},p=f._opts={fill:i,line:g,geojson:e()};if(!o)return p;var y=a.extractTraceFeature(t);if(!y)return p;var c=M.makeColorScaleFuncFromTrace(f),b=f.marker,l=b.line||{},_;v.isArrayOrTypedArray(b.opacity)&&(_=function(S){var k=S.mo;return w(k)?+v.constrain(k,0,1):0});var s;v.isArrayOrTypedArray(l.color)&&(s=function(S){return S.mlc});var A;v.isArrayOrTypedArray(l.width)&&(A=function(S){return S.mlw});for(var m=0;m<t.length;m++){var h=t[m],x=h.fOut;if(x){var u=x.properties;u.fc=c(h.z),_&&(u.mo=_(h)),s&&(u.mlc=s(h)),A&&(u.mlw=A(h)),h.ct=u.ct,h._polygons=a.feature2polygons(x)}}var L=_?{type:"identity",property:"mo"}:b.opacity;return v.extendFlat(i.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":L}),v.extendFlat(g.paint,{"line-color":s?{type:"identity",property:"mlc"}:l.color,"line-width":A?{type:"identity",property:"mlw"}:l.width,"line-opacity":L}),i.layout.visibility="visible",g.layout.visibility="visible",p.geojson={type:"FeatureCollection",features:y},r(t),p}function r(t){var f=t[0].trace,o=f._opts,i;if(f.selectedpoints){for(var g=T.makeSelectedPointStyleFns(f),p=0;p<t.length;p++){var y=t[p];y.fOut&&(y.fOut.properties.mo2=g.selectedOpacityFn(y))}i={type:"identity",property:"mo2"}}else i=v.isArrayOrTypedArray(f.marker.opacity)?{type:"identity",property:"mo"}:f.marker.opacity;return v.extendFlat(o.fill.paint,{"fill-opacity":i}),v.extendFlat(o.line.paint,{"line-opacity":i}),o}ne.exports={convert:n,convertOnSelect:r}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/geojson_utils":497,"fast-isnumeric":190}],727:[function(d,ne,ae){var w=d("../../lib"),v=d("../../components/colorscale/defaults"),M=d("./attributes");ne.exports=function(e,a,n,r){function t(p,y){return w.coerce(e,a,M,p,y)}var f=t("locations"),o=t("z"),i=t("geojson");if(!w.isArrayOrTypedArray(f)||!f.length||!w.isArrayOrTypedArray(o)||!o.length||!(typeof i=="string"&&i!==""||w.isPlainObject(i))){a.visible=!1;return}t("featureidkey"),a._length=Math.min(f.length,o.length),t("below"),t("text"),t("hovertext"),t("hovertemplate");var g=t("marker.line.width");g&&t("marker.line.color"),t("marker.opacity"),v(e,a,r,t,{prefix:"",cLetter:"z"}),w.coerceSelectionMarkerOpacity(a,t)}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":725}],728:[function(d,ne,ae){ne.exports={attributes:d("./attributes"),supplyDefaults:d("./defaults"),colorbar:d("../heatmap/colorbar"),calc:d("../choropleth/calc"),plot:d("./plot"),hoverPoints:d("../choropleth/hover"),eventData:d("../choropleth/event_data"),selectPoints:d("../choropleth/select"),styleOnSelect:function(w,v){if(v){var M=v[0].trace;M._glTrace.updateOnSelect(v)}},getBelow:function(w,v){for(var M=v.getMapLayers(),T=M.length-2;T>=0;T--){var e=M[T].id;if(typeof e=="string"&&e.indexOf("water")===0){for(var a=T+1;a<M.length;a++)if(e=M[a].id,typeof e=="string"&&e.indexOf("plotly-")===-1)return e}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:d("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":613,"../choropleth/calc":717,"../choropleth/event_data":719,"../choropleth/hover":720,"../choropleth/select":723,"../heatmap/colorbar":795,"./attributes":725,"./defaults":727,"./plot":729}],729:[function(d,ne,ae){var w=d("./convert").convert,v=d("./convert").convertOnSelect,M=d("../../plots/mapbox/constants").traceLayerPrefix;function T(a,n){this.type="choroplethmapbox",this.subplot=a,this.uid=n,this.sourceId="source-"+n,this.layerList=[["fill",M+n+"-fill"],["line",M+n+"-line"]],this.below=null}var e=T.prototype;e.update=function(a){this._update(w(a))},e.updateOnSelect=function(a){this._update(v(a))},e._update=function(a){var n=this.subplot,r=this.layerList,t=n.belowLookup["trace-"+this.uid];n.map.getSource(this.sourceId).setData(a.geojson),t!==this.below&&(this._removeLayers(),this._addLayers(a,t),this.below=t);for(var f=0;f<r.length;f++){var o=r[f],i=o[0],g=o[1],p=a[i];n.setOptions(g,"setLayoutProperty",p.layout),p.layout.visibility==="visible"&&n.setOptions(g,"setPaintProperty",p.paint)}},e._addLayers=function(a,n){for(var r=this.subplot,t=this.layerList,f=this.sourceId,o=0;o<t.length;o++){var i=t[o],g=i[0],p=a[g];r.addLayer({type:g,id:i[1],source:f,layout:p.layout,paint:p.paint},n)}},e._removeLayers=function(){for(var a=this.subplot.map,n=this.layerList,r=n.length-1;r>=0;r--)a.removeLayer(n[r][1])},e.dispose=function(){var a=this.subplot.map;this._removeLayers(),a.removeSource(this.sourceId)},ne.exports=function(n,r){var t=r[0].trace,f=new T(n,t.uid),o=f.sourceId,i=w(r),g=f.below=n.belowLookup["trace-"+t.uid];return n.map.addSource(o,{type:"geojson",data:i.geojson}),f._addLayers(i,g),r[0].trace._glTrace=f,f}},{"../../plots/mapbox/constants":611,"./convert":726}],730:[function(d,ne,ae){var w=d("../../components/colorscale/attributes"),v=d("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=d("../../plots/template_attributes").hovertemplateAttrs,T=d("../mesh3d/attributes"),e=d("../../plots/attributes"),a=d("../../lib/extend").extendFlat,n={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:M({editType:"calc"},{keys:["norm"]}),uhoverformat:v("u",1),vhoverformat:v("v",1),whoverformat:v("w",1),xhoverformat:v("x"),yhoverformat:v("y"),zhoverformat:v("z"),showlegend:a({},e.showlegend,{dflt:!1})};a(n,w("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var r=["opacity","lightposition","lighting"];r.forEach(function(t){n[t]=T[t]}),n.hoverinfo=a({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),n.transforms=void 0,ne.exports=n},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],731:[function(d,ne,ae){var w=d("../../components/colorscale/calc");ne.exports=function(M,T){for(var e=T.u,a=T.v,n=T.w,r=Math.min(T.x.length,T.y.length,T.z.length,e.length,a.length,n.length),t=-1/0,f=1/0,o=0;o<r;o++){var i=e[o],g=a[o],p=n[o],y=Math.sqrt(i*i+g*g+p*p);t=Math.max(t,y),f=Math.min(f,y)}T._len=r,T._normMax=t,w(M,T,{vals:[f,t],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],732:[function(d,ne,ae){var w=d("../../../stackgl_modules").gl_cone3d,v=d("../../../stackgl_modules").gl_cone3d.createConeMesh,M=d("../../lib").simpleMap,T=d("../../lib/gl_format_color").parseColorScale,e=d("../../components/colorscale").extractOpts,a=d("../../plots/gl3d/zip3");function n(p,y){this.scene=p,this.uid=y,this.mesh=null,this.data=null}var r=n.prototype;r.handlePick=function(p){if(p.object===this.mesh){var y=p.index=p.data.index,c=this.data.x[y],b=this.data.y[y],l=this.data.z[y],_=this.data.u[y],s=this.data.v[y],A=this.data.w[y];p.traceCoordinate=[c,b,l,_,s,A,Math.sqrt(_*_+s*s+A*A)];var m=this.data.hovertext||this.data.text;return Array.isArray(m)&&m[y]!==void 0?p.textLabel=m[y]:m&&(p.textLabel=m),!0}};var t={xaxis:0,yaxis:1,zaxis:2},f={tip:1,tail:0,cm:.25,center:.5},o={tip:1,tail:1,cm:.75,center:.5};function i(p,y){var c=p.fullSceneLayout,b=p.dataScale,l={};function _(h,x){var u=c[x],L=b[t[x]];return M(h,function(S){return u.d2l(S)*L})}l.vectors=a(_(y.u,"xaxis"),_(y.v,"yaxis"),_(y.w,"zaxis"),y._len),l.positions=a(_(y.x,"xaxis"),_(y.y,"yaxis"),_(y.z,"zaxis"),y._len);var s=e(y);l.colormap=T(y),l.vertexIntensityBounds=[s.min/y._normMax,s.max/y._normMax],l.coneOffset=f[y.anchor],y.sizemode==="scaled"?l.coneSize=y.sizeref||.5:l.coneSize=y.sizeref&&y._normMax?y.sizeref/y._normMax:.5;var A=w(l),m=y.lightposition;return A.lightPosition=[m.x,m.y,m.z],A.ambient=y.lighting.ambient,A.diffuse=y.lighting.diffuse,A.specular=y.lighting.specular,A.roughness=y.lighting.roughness,A.fresnel=y.lighting.fresnel,A.opacity=y.opacity,y._pad=o[y.anchor]*A.vectorScale*A.coneScale*y._normMax,A}r.update=function(p){this.data=p;var y=i(this.scene,p);this.mesh.update(y)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function g(p,y){var c=p.glplot.gl,b=i(p,y),l=v(c,b),_=new n(p,y.uid);return _.mesh=l,_.data=y,l._trace=_,p.glplot.add(l),_}ne.exports=g},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/gl3d/zip3":609}],733:[function(d,ne,ae){var w=d("../../lib"),v=d("../../components/colorscale/defaults"),M=d("./attributes");ne.exports=function(e,a,n,r){function t(c,b){return w.coerce(e,a,M,c,b)}var f=t("u"),o=t("v"),i=t("w"),g=t("x"),p=t("y"),y=t("z");if(!f||!f.length||!o||!o.length||!i||!i.length||!g||!g.length||!p||!p.length||!y||!y.length){a.visible=!1;return}t("sizeref"),t("sizemode"),t("anchor"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),v(e,a,r,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),a._length=null}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":730}],734:[function(d,ne,ae){ne.exports={moduleType:"trace",name:"cone",basePlotModule:d("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:d("./attributes"),supplyDefaults:d("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:d("./calc"),plot:d("./convert"),eventData:function(w,v){return w.norm=v.traceCoordinate[6],w},meta:{}}},{"../../plots/gl3d":598,"./attributes":730,"./calc":731,"./convert":732,"./defaults":733}],735:[function(d,ne,ae){var w=d("../heatmap/attributes"),v=d("../scatter/attributes"),M=d("../../plots/cartesian/axis_format_attributes"),T=M.axisHoverFormat,e=M.descriptionOnlyNumbers,a=d("../../components/colorscale/attributes"),n=d("../../components/drawing/attributes").dash,r=d("../../plots/font_attributes"),t=d("../../lib/extend").extendFlat,f=d("../../constants/filter_ops"),o=f.COMPARISON_OPS2,i=f.INTERVAL_OPS,g=v.line;ne.exports=t({z:w.z,x:w.x,x0:w.x0,dx:w.dx,y:w.y,y0:w.y0,dy:w.dy,xperiod:w.xperiod,yperiod:w.yperiod,xperiod0:v.xperiod0,yperiod0:v.yperiod0,xperiodalignment:w.xperiodalignment,yperiodalignment:w.yperiodalignment,text:w.text,hovertext:w.hovertext,transpose:w.transpose,xtype:w.xtype,ytype:w.ytype,xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:w.hovertemplate,texttemplate:t({},w.texttemplate,{}),textfont:t({},w.textfont,{}),hoverongaps:w.hoverongaps,connectgaps:t({},w.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:r({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:e("contour label")},operation:{valType:"enumerated",values:[].concat(o).concat(i),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:t({},g.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:n,smoothing:t({},g.smoothing,{}),editType:"plot"}},a("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../constants/filter_ops":475,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../heatmap/attributes":792,"../scatter/attributes":927}],736:[function(d,ne,ae){var w=d("../../components/colorscale"),v=d("../heatmap/calc"),M=d("./set_contours"),T=d("./end_plus");ne.exports=function(a,n){var r=v(a,n),t=r[0].z;M(n,t);var f=n.contours,o=w.extractOpts(n),i;if(f.coloring==="heatmap"&&o.auto&&n.autocontour===!1){var g=f.start,p=T(f),y=f.size||1,c=Math.floor((p-g)/y)+1;isFinite(y)||(y=1,c=1);var b=g-y/2,l=b+c*y;i=[b,l]}else i=t;return w.calc(a,n,{vals:i,cLetter:"z"}),r}},{"../../components/colorscale":378,"../heatmap/calc":793,"./end_plus":746,"./set_contours":754}],737:[function(d,ne,ae){ne.exports=function(w,v){var M=w[0],T=M.z,e;switch(v.type){case"levels":var a=Math.min(T[0][0],T[0][1]);for(e=0;e<w.length;e++){var n=w[e];n.prefixBoundary=!n.edgepaths.length&&(a>n.level||n.starts.length&&a===n.level)}break;case"constraint":if(M.prefixBoundary=!1,M.edgepaths.length)return;var r=M.x.length,t=M.y.length,f=-1/0,o=1/0;for(e=0;e<t;e++)o=Math.min(o,T[e][0]),o=Math.min(o,T[e][r-1]),f=Math.max(f,T[e][0]),f=Math.max(f,T[e][r-1]);for(e=1;e<r-1;e++)o=Math.min(o,T[0][e]),o=Math.min(o,T[t-1][e]),f=Math.max(f,T[0][e]),f=Math.max(f,T[t-1][e]);var i=v.value,g,p;switch(v._operation){case">":i>f&&(M.prefixBoundary=!0);break;case"<":(i<o||M.starts.length&&i===o)&&(M.prefixBoundary=!0);break;case"[]":g=Math.min(i[0],i[1]),p=Math.max(i[0],i[1]),(p<o||g>f||M.starts.length&&p===o)&&(M.prefixBoundary=!0);break;case"][":g=Math.min(i[0],i[1]),p=Math.max(i[0],i[1]),g<o&&p>f&&(M.prefixBoundary=!0);break}break}}},{}],738:[function(d,ne,ae){var w=d("../../components/colorscale"),v=d("./make_color_map"),M=d("./end_plus");function T(e,a,n){var r=a.contours,t=a.line,f=r.size||1,o=r.coloring,i=v(a,{isColorbar:!0});if(o==="heatmap"){var g=w.extractOpts(a);n._fillgradient=g.reversescale?w.flipScale(g.colorscale):g.colorscale,n._zrange=[g.min,g.max]}else o==="fill"&&(n._fillcolor=i);n._line={color:o==="lines"?i:t.color,width:r.showlines!==!1?t.width:0,dash:t.dash},n._levels={start:r.start,end:M(r),size:f}}ne.exports={min:"zmin",max:"zmax",calc:T}},{"../../components/colorscale":378,"./end_plus":746,"./make_color_map":751}],739:[function(d,ne,ae){ne.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],740:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("./label_defaults"),M=d("../../components/color"),T=M.addOpacity,e=M.opacity,a=d("../../constants/filter_ops"),n=a.CONSTRAINT_REDUCTION,r=a.COMPARISON_OPS2;ne.exports=function(o,i,g,p,y,c){var b=i.contours,l,_,s,A=g("contours.operation");if(b._operation=n[A],t(g,b),A==="="?l=b.showlines=!0:(l=g("contours.showlines"),s=g("fillcolor",T((o.line||{}).color||y,.5))),l){var m=s&&e(s)?T(i.fillcolor,1):y;_=g("line.color",m),g("line.width",2),g("line.dash")}g("line.smoothing"),v(g,p,_,c)};function t(f,o){var i;r.indexOf(o.operation)===-1?(f("contours.value",[0,1]),Array.isArray(o.value)?o.value.length>2?o.value=o.value.slice(2):o.length===0?o.value=[0,1]:o.length<2?(i=parseFloat(o.value[0]),o.value=[i,i+1]):o.value=[parseFloat(o.value[0]),parseFloat(o.value[1])]:w(o.value)&&(i=parseFloat(o.value),o.value=[i,i+1])):(f("contours.value",0),w(o.value)||(Array.isArray(o.value)?o.value=parseFloat(o.value[0]):o.value=0))}},{"../../components/color":366,"../../constants/filter_ops":475,"./label_defaults":750,"fast-isnumeric":190}],741:[function(d,ne,ae){var w=d("../../constants/filter_ops"),v=d("fast-isnumeric");ne.exports={"[]":T("[]"),"][":T("]["),">":e(">"),"<":e("<"),"=":e("=")};function M(a,n){var r=Array.isArray(n),t;function f(o){return v(o)?+o:null}return w.COMPARISON_OPS2.indexOf(a)!==-1?t=f(r?n[0]:n):w.INTERVAL_OPS.indexOf(a)!==-1?t=r?[f(n[0]),f(n[1])]:[f(n),f(n)]:w.SET_OPS.indexOf(a)!==-1&&(t=r?n.map(f):[f(n)]),t}function T(a){return function(n){n=M(a,n);var r=Math.min(n[0],n[1]),t=Math.max(n[0],n[1]);return{start:r,end:t,size:t-r}}}function e(a){return function(n){return n=M(a,n),{start:n,end:1/0,size:1/0}}}},{"../../constants/filter_ops":475,"fast-isnumeric":190}],742:[function(d,ne,ae){ne.exports=function(v,M,T,e){var a=e("contours.start"),n=e("contours.end"),r=a===!1||n===!1,t=T("contours.size"),f;r?f=M.autocontour=!0:f=T("autocontour",!1),(f||!t)&&T("ncontours")}},{}],743:[function(d,ne,ae){var w=d("../../lib");ne.exports=function(M,T){var e,a,n,r=function(o){return o.reverse()},t=function(o){return o};switch(T){case"=":case"<":return M;case">":for(M.length!==1&&w.warn("Contour data invalid for the specified inequality operation."),a=M[0],e=0;e<a.edgepaths.length;e++)a.edgepaths[e]=r(a.edgepaths[e]);for(e=0;e<a.paths.length;e++)a.paths[e]=r(a.paths[e]);for(e=0;e<a.starts.length;e++)a.starts[e]=r(a.starts[e]);return M;case"][":var f=r;r=t,t=f;case"[]":for(M.length!==2&&w.warn("Contour data invalid for the specified inequality range operation."),a=v(M[0]),n=v(M[1]),e=0;e<a.edgepaths.length;e++)a.edgepaths[e]=r(a.edgepaths[e]);for(e=0;e<a.paths.length;e++)a.paths[e]=r(a.paths[e]);for(e=0;e<a.starts.length;e++)a.starts[e]=r(a.starts[e]);for(;n.edgepaths.length;)a.edgepaths.push(t(n.edgepaths.shift()));for(;n.paths.length;)a.paths.push(t(n.paths.shift()));for(;n.starts.length;)a.starts.push(t(n.starts.shift()));return[a]}};function v(M){return w.extendFlat({},M,{edgepaths:w.extendDeep([],M.edgepaths),paths:w.extendDeep([],M.paths),starts:w.extendDeep([],M.starts)})}},{"../../lib":503}],744:[function(d,ne,ae){var w=d("../../lib"),v=d("../heatmap/xyz_defaults"),M=d("../scatter/period_defaults"),T=d("./constraint_defaults"),e=d("./contours_defaults"),a=d("./style_defaults"),n=d("../heatmap/label_defaults"),r=d("./attributes");ne.exports=function(f,o,i,g){function p(l,_){return w.coerce(f,o,r,l,_)}function y(l){return w.coerce2(f,o,r,l)}var c=v(f,o,p,g);if(!c){o.visible=!1;return}M(f,o,g,p),p("xhoverformat"),p("yhoverformat"),p("text"),p("hovertext"),p("hoverongaps"),p("hovertemplate");var b=p("contours.type")==="constraint";p("connectgaps",w.isArray1D(o.z)),b?T(f,o,p,g,i):(e(f,o,p,y),a(f,o,p,g)),o.contours&&o.contours.coloring==="heatmap"&&n(p,g)}},{"../../lib":503,"../heatmap/label_defaults":802,"../heatmap/xyz_defaults":807,"../scatter/period_defaults":947,"./attributes":735,"./constraint_defaults":740,"./contours_defaults":742,"./style_defaults":756}],745:[function(d,ne,ae){var w=d("../../lib"),v=d("./constraint_mapping"),M=d("./end_plus");ne.exports=function(e,a,n){for(var r=e.type==="constraint"?v[e._operation](e.value):e,t=r.size,f=[],o=M(r),i=n.trace._carpetTrace,g=i?{xaxis:i.aaxis,yaxis:i.baxis,x:n.a,y:n.b}:{xaxis:a.xaxis,yaxis:a.yaxis,x:n.x,y:n.y},p=r.start;p<o;p+=t)if(f.push(w.extendFlat({level:p,crossings:{},starts:[],edgepaths:[],paths:[],z:n.z,smoothing:n.trace.line.smoothing},g)),f.length>1e3){w.warn("Too many contours, clipping at 1000",e);break}return f}},{"../../lib":503,"./constraint_mapping":741,"./end_plus":746}],746:[function(d,ne,ae){ne.exports=function(v){return v.end+v.size/1e6}},{}],747:[function(d,ne,ae){var w=d("../../lib"),v=d("./constants");ne.exports=function(t,f,o){var i,g,p,y,c;for(f=f||.01,o=o||.01,p=0;p<t.length;p++){for(y=t[p],c=0;c<y.starts.length;c++)g=y.starts[c],e(y,g,"edge",f,o);for(i=0;Object.keys(y.crossings).length&&i<1e4;)i++,g=Object.keys(y.crossings)[0].split(",").map(Number),e(y,g,void 0,f,o);i===1e4&&w.log("Infinite loop in contour?")}};function M(r,t,f,o){return Math.abs(r[0]-t[0])<f&&Math.abs(r[1]-t[1])<o}function T(r,t){var f=r[2]-t[2],o=r[3]-t[3];return Math.sqrt(f*f+o*o)}function e(r,t,f,o,i){var g=t.join(","),p=r.crossings[g],y=a(p,f,t),c=[n(r,t,[-y[0],-y[1]])],b=r.z.length,l=r.z[0].length,_=t.slice(),s=y.slice(),A;for(A=0;A<1e4;A++){if(p>20?(p=v.CHOOSESADDLE[p][(y[0]||y[1])<0?0:1],r.crossings[g]=v.SADDLEREMAINDER[p]):delete r.crossings[g],y=v.NEWDELTA[p],!y){w.log("Found bad marching index:",p,t,r.level);break}c.push(n(r,t,y)),t[0]+=y[0],t[1]+=y[1],g=t.join(","),M(c[c.length-1],c[c.length-2],o,i)&&c.pop();var m=y[0]&&(t[0]<0||t[0]>l-2)||y[1]&&(t[1]<0||t[1]>b-2),h=t[0]===_[0]&&t[1]===_[1]&&y[0]===s[0]&&y[1]===s[1];if(h||f&&m)break;p=r.crossings[g]}A===1e4&&w.log("Infinite loop in contour?");var x=M(c[0],c[c.length-1],o,i),u=0,L=.2*r.smoothing,S=[],k=0,P,z,I,D,R,O,F,V,G,J,Z;for(A=1;A<c.length;A++)F=T(c[A],c[A-1]),u+=F,S.push(F);var Y=u/S.length*L;function j(oe){return c[oe%c.length]}for(A=c.length-2;A>=k;A--)if(P=S[A],P<Y){for(I=0,z=A-1;z>=k&&P+S[z]<Y;z--)P+=S[z];if(x&&A===c.length-2)for(I=0;I<z&&P+S[I]<Y;I++)P+=S[I];R=A-z+I+1,O=Math.floor((A+z+I+2)/2),!x&&A===c.length-2?D=c[c.length-1]:!x&&z===-1?D=c[0]:R%2?D=j(O):D=[(j(O)[0]+j(O+1)[0])/2,(j(O)[1]+j(O+1)[1])/2],c.splice(z+1,A-z+1,D),A=z+1,I&&(k=I),x&&(A===c.length-2?c[I]=c[c.length-1]:A===0&&(c[c.length-1]=c[0]))}for(c.splice(0,k),A=0;A<c.length;A++)c[A].length=2;if(!(c.length<2))if(x)c.pop(),r.paths.push(c);else{f||w.log("Unclosed interior contour?",r.level,_.join(","),c.join("L"));var re=!1;for(V=0;V<r.edgepaths.length;V++)if(J=r.edgepaths[V],!re&&M(J[0],c[c.length-1],o,i)){c.pop(),re=!0;var se=!1;for(G=0;G<r.edgepaths.length;G++)if(Z=r.edgepaths[G],M(Z[Z.length-1],c[0],o,i)){se=!0,c.shift(),r.edgepaths.splice(V,1),G===V?r.paths.push(c.concat(Z)):(G>V&&G--,r.edgepaths[G]=Z.concat(c,J));break}se||(r.edgepaths[V]=c.concat(J))}for(V=0;V<r.edgepaths.length&&!re;V++)J=r.edgepaths[V],M(J[J.length-1],c[0],o,i)&&(c.shift(),r.edgepaths[V]=J.concat(c),re=!0);re||r.edgepaths.push(c)}}function a(r,t,f){var o=0,i=0;return r>20&&t?r===208||r===1114?o=f[0]===0?1:-1:i=f[1]===0?1:-1:v.BOTTOMSTART.indexOf(r)!==-1?i=1:v.LEFTSTART.indexOf(r)!==-1?o=1:v.TOPSTART.indexOf(r)!==-1?i=-1:o=-1,[o,i]}function n(r,t,f){var o=t[0]+Math.max(f[0],0),i=t[1]+Math.max(f[1],0),g=r.z[i][o],p=r.xaxis,y=r.yaxis;if(f[1]){var c=(r.level-g)/(r.z[i][o+1]-g),b=(c!==1?(1-c)*p.c2l(r.x[o]):0)+(c!==0?c*p.c2l(r.x[o+1]):0);return[p.c2p(p.l2c(b),!0),y.c2p(r.y[i],!0),o+c,i]}else{var l=(r.level-g)/(r.z[i+1][o]-g),_=(l!==1?(1-l)*y.c2l(r.y[i]):0)+(l!==0?l*y.c2l(r.y[i+1]):0);return[p.c2p(r.x[o],!0),y.c2p(y.l2c(_),!0),o,i+l]}}},{"../../lib":503,"./constants":739}],748:[function(d,ne,ae){var w=d("../../components/color"),v=d("../heatmap/hover");ne.exports=function(T,e,a,n,r){r||(r={}),r.isContour=!0;var t=v(T,e,a,n,r);return t&&t.forEach(function(f){var o=f.trace;o.contours.type==="constraint"&&(o.fillcolor&&w.opacity(o.fillcolor)?f.color=w.addOpacity(o.fillcolor,1):o.contours.showlines&&w.opacity(o.line.color)&&(f.color=w.addOpacity(o.line.color,1)))}),t}},{"../../components/color":366,"../heatmap/hover":799}],749:[function(d,ne,ae){ne.exports={attributes:d("./attributes"),supplyDefaults:d("./defaults"),calc:d("./calc"),plot:d("./plot").plot,style:d("./style"),colorbar:d("./colorbar"),hoverPoints:d("./hover"),moduleType:"trace",name:"contour",basePlotModule:d("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":568,"./attributes":735,"./calc":736,"./colorbar":738,"./defaults":744,"./hover":748,"./plot":753,"./style":755}],750:[function(d,ne,ae){var w=d("../../lib");ne.exports=function(M,T,e,a){a||(a={});var n=M("contours.showlabels");if(n){var r=T.font;w.coerceFont(M,"contours.labelfont",{family:r.family,size:r.size,color:e}),M("contours.labelformat")}a.hasHover!==!1&&M("zhoverformat")}},{"../../lib":503}],751:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../components/colorscale"),M=d("./end_plus");ne.exports=function(e){var a=e.contours,n=a.start,r=M(a),t=a.size||1,f=Math.floor((r-n)/t)+1,o=a.coloring==="lines"?0:1,i=v.extractOpts(e);isFinite(t)||(t=1,f=1);var g=i.reversescale?v.flipScale(i.colorscale):i.colorscale,p=g.length,y=new Array(p),c=new Array(p),b,l;if(a.coloring==="heatmap"){var _=i.min,s=i.max;for(l=0;l<p;l++)b=g[l],y[l]=b[0]*(s-_)+_,c[l]=b[1];var A=w.extent([_,s,a.start,a.start+t*(f-1)]),m=A[_<s?0:1],h=A[_<s?1:0];m!==_&&(y.splice(0,0,m),c.splice(0,0,c[0])),h!==s&&(y.push(h),c.push(c[c.length-1]))}else for(l=0;l<p;l++)b=g[l],y[l]=(b[0]*(f+o-1)-o/2)*t+n,c[l]=b[1];return v.makeColorScaleFunc({domain:y,range:c},{noNumericCheck:!0})}},{"../../components/colorscale":378,"./end_plus":746,"@plotly/d3":58}],752:[function(d,ne,ae){var w=d("./constants");ne.exports=function(T){var e=T[0].z,a=e.length,n=e[0].length,r=a===2||n===2,t,f,o,i,g,p,y,c,b;for(f=0;f<a-1;f++)for(i=[],f===0&&(i=i.concat(w.BOTTOMSTART)),f===a-2&&(i=i.concat(w.TOPSTART)),t=0;t<n-1;t++)for(o=i.slice(),t===0&&(o=o.concat(w.LEFTSTART)),t===n-2&&(o=o.concat(w.RIGHTSTART)),g=t+","+f,p=[[e[f][t],e[f][t+1]],[e[f+1][t],e[f+1][t+1]]],b=0;b<T.length;b++)c=T[b],y=v(c.level,p),y&&(c.crossings[g]=y,o.indexOf(y)!==-1&&(c.starts.push([t,f]),r&&o.indexOf(y,o.indexOf(y)+1)!==-1&&c.starts.push([t,f])))};function v(M,T){var e=(T[0][0]>M?0:1)+(T[0][1]>M?0:2)+(T[1][1]>M?0:4)+(T[1][0]>M?0:8);if(e===5||e===10){var a=(T[0][0]+T[0][1]+T[1][0]+T[1][1])/4;return M>a?e===5?713:1114:e===5?104:208}return e===15?0:e}},{"./constants":739}],753:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../lib"),M=d("../../components/drawing"),T=d("../../components/colorscale"),e=d("../../lib/svg_text_utils"),a=d("../../plots/cartesian/axes"),n=d("../../plots/cartesian/set_convert"),r=d("../heatmap/plot"),t=d("./make_crossings"),f=d("./find_all_paths"),o=d("./empty_pathinfo"),i=d("./convert_to_constraints"),g=d("./close_boundaries"),p=d("./constants"),y=p.LABELOPTIMIZER;ae.plot=function(x,u,L,S){var k=u.xaxis,P=u.yaxis;v.makeTraceGroups(S,L,"contour").each(function(z){var I=w.select(this),D=z[0],R=D.trace,O=D.x,F=D.y,V=R.contours,G=o(V,u,D),J=v.ensureSingle(I,"g","heatmapcoloring"),Z=[];V.coloring==="heatmap"&&(Z=[z]),r(x,u,Z,J),t(G),f(G);var Y=k.c2p(O[0],!0),j=k.c2p(O[O.length-1],!0),re=P.c2p(F[0],!0),se=P.c2p(F[F.length-1],!0),oe=[[Y,se],[j,se],[j,re],[Y,re]],N=G;V.type==="constraint"&&(N=i(G,V._operation)),c(I,oe,V),b(I,N,oe,V),_(I,G,x,D,V),A(I,u,x,D,oe)})};function c(h,x,u){var L=v.ensureSingle(h,"g","contourbg"),S=L.selectAll("path").data(u.coloring==="fill"?[0]:[]);S.enter().append("path"),S.exit().remove(),S.attr("d","M"+x.join("L")+"Z").style("stroke","none")}function b(h,x,u,L){var S=L.coloring==="fill"||L.type==="constraint"&&L._operation!=="=",k="M"+u.join("L")+"Z";S&&g(x,L);var P=v.ensureSingle(h,"g","contourfill"),z=P.selectAll("path").data(S?x:[]);z.enter().append("path"),z.exit().remove(),z.each(function(I){var D=(I.prefixBoundary?k:"")+l(I,u);D?w.select(this).attr("d",D).style("stroke","none"):w.select(this).remove()})}function l(h,x){var u="",L=0,S=h.edgepaths.map(function(Y,j){return j}),k=!0,P,z,I,D,R,O;function F(Y){return Math.abs(Y[1]-x[0][1])<.01}function V(Y){return Math.abs(Y[1]-x[2][1])<.01}function G(Y){return Math.abs(Y[0]-x[0][0])<.01}function J(Y){return Math.abs(Y[0]-x[2][0])<.01}for(;S.length;){for(O=M.smoothopen(h.edgepaths[L],h.smoothing),u+=k?O:O.replace(/^M/,"L"),S.splice(S.indexOf(L),1),P=h.edgepaths[L][h.edgepaths[L].length-1],D=-1,I=0;I<4;I++){if(!P){v.log("Missing end?",L,h);break}for(F(P)&&!J(P)?z=x[1]:G(P)?z=x[0]:V(P)?z=x[3]:J(P)&&(z=x[2]),R=0;R<h.edgepaths.length;R++){var Z=h.edgepaths[R][0];Math.abs(P[0]-z[0])<.01?Math.abs(P[0]-Z[0])<.01&&(Z[1]-P[1])*(z[1]-Z[1])>=0&&(z=Z,D=R):Math.abs(P[1]-z[1])<.01?Math.abs(P[1]-Z[1])<.01&&(Z[0]-P[0])*(z[0]-Z[0])>=0&&(z=Z,D=R):v.log("endpt to newendpt is not vert. or horz.",P,z,Z)}if(P=z,D>=0)break;u+="L"+z}if(D===h.edgepaths.length){v.log("unclosed perimeter path");break}L=D,k=S.indexOf(L)===-1,k&&(L=S[0],u+="Z")}for(L=0;L<h.paths.length;L++)u+=M.smoothclosed(h.paths[L],h.smoothing);return u}function _(h,x,u,L,S){var k=v.ensureSingle(h,"g","contourlines"),P=S.showlines!==!1,z=S.showlabels,I=P&&z,D=ae.createLines(k,P||z,x),R=ae.createLineClip(k,I,u,L.trace.uid),O=h.selectAll("g.contourlabels").data(z?[0]:[]);if(O.exit().remove(),O.enter().append("g").classed("contourlabels",!0),z){var F=[],V=[];v.clearLocationCache();var G=ae.labelFormatter(u,L),J=M.tester.append("text").attr("data-notex",1).call(M.font,S.labelfont),Z=x[0].xaxis,Y=x[0].yaxis,j=Z._length,re=Y._length,se=Z.range,oe=Y.range,N=v.aggNums(Math.min,null,L.x),U=v.aggNums(Math.max,null,L.x),q=v.aggNums(Math.min,null,L.y),Q=v.aggNums(Math.max,null,L.y),W=Math.max(Z.c2p(N,!0),0),X=Math.min(Z.c2p(U,!0),j),ee=Math.max(Y.c2p(Q,!0),0),te=Math.min(Y.c2p(q,!0),re),ie={};se[0]<se[1]?(ie.left=W,ie.right=X):(ie.left=X,ie.right=W),oe[0]<oe[1]?(ie.top=ee,ie.bottom=te):(ie.top=te,ie.bottom=ee),ie.middle=(ie.top+ie.bottom)/2,ie.center=(ie.left+ie.right)/2,F.push([[ie.left,ie.top],[ie.right,ie.top],[ie.right,ie.bottom],[ie.left,ie.bottom]]);var le=Math.sqrt(j*j+re*re),ge=p.LABELDISTANCE*le/Math.max(1,x.length/p.LABELINCREASE);D.each(function(fe){var pe=ae.calcTextOpts(fe.level,G,J,u);w.select(this).selectAll("path").each(function(){var ye=this,Te=v.getVisibleSegment(ye,ie,pe.height/2);if(!!Te&&!(Te.len<(pe.width+pe.height)*p.LABELMIN))for(var _e=Math.min(Math.ceil(Te.len/ge),p.LABELMAX),De=0;De<_e;De++){var Be=ae.findBestTextLocation(ye,Te,pe,V,ie);if(!Be)break;ae.addLabelData(Be,pe,V,F)}})}),J.remove(),ae.drawLabels(O,V,u,R,I?F:null)}z&&!P&&D.remove()}ae.createLines=function(h,x,u){var L=u[0].smoothing,S=h.selectAll("g.contourlevel").data(x?u:[]);if(S.exit().remove(),S.enter().append("g").classed("contourlevel",!0),x){var k=S.selectAll("path.openline").data(function(z){return z.pedgepaths||z.edgepaths});k.exit().remove(),k.enter().append("path").classed("openline",!0),k.attr("d",function(z){return M.smoothopen(z,L)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var P=S.selectAll("path.closedline").data(function(z){return z.ppaths||z.paths});P.exit().remove(),P.enter().append("path").classed("closedline",!0),P.attr("d",function(z){return M.smoothclosed(z,L)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return S},ae.createLineClip=function(h,x,u,L){var S=u._fullLayout._clips,k=x?"clipline"+L:null,P=S.selectAll("#"+k).data(x?[0]:[]);return P.exit().remove(),P.enter().append("clipPath").classed("contourlineclip",!0).attr("id",k),M.setClipUrl(h,k,u),P},ae.labelFormatter=function(h,x){var u=h._fullLayout,L=x.trace,S=L.contours,k={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(S.labelformat)k.tickformat=S.labelformat,n(k,u);else{var P=T.extractOpts(L);if(P&&P.colorbar&&P.colorbar._axis)k=P.colorbar._axis;else{if(S.type==="constraint"){var z=S.value;Array.isArray(z)?k.range=[z[0],z[z.length-1]]:k.range=[z,z]}else k.range=[S.start,S.end],k.nticks=(S.end-S.start)/S.size;k.range[0]===k.range[1]&&(k.range[1]+=k.range[0]||1),k.nticks||(k.nticks=1e3),n(k,u),a.prepTicks(k),k._tmin=null,k._tmax=null}}return function(I){return a.tickText(k,I).text}},ae.calcTextOpts=function(h,x,u,L){var S=x(h);u.text(S).call(e.convertToTspans,L);var k=u.node(),P=M.bBox(k,!0);return{text:S,width:P.width,height:P.height,fontSize:+k.style["font-size"].replace("px",""),level:h,dy:(P.top+P.bottom)/2}},ae.findBestTextLocation=function(h,x,u,L,S){var k=u.width,P,z,I,D,R;x.isClosed?(z=x.len/y.INITIALSEARCHPOINTS,P=x.min+z/2,I=x.max):(z=(x.len-k)/(y.INITIALSEARCHPOINTS+1),P=x.min+z+k/2,I=x.max-(z+k)/2);for(var O=1/0,F=0;F<y.ITERATIONS;F++){for(var V=P;V<I;V+=z){var G=v.getTextLocation(h,x.total,V,k),J=s(G,u,L,S);J<O&&(O=J,R=G,D=V)}if(O>y.MAXCOST*2)break;F&&(z/=2),P=D-z/2,I=P+z*1.5}if(O<=y.MAXCOST)return R};function s(h,x,u,L){var S=x.width/2,k=x.height/2,P=h.x,z=h.y,I=h.theta,D=Math.cos(I)*S,R=Math.sin(I)*S,O=(P>L.center?L.right-P:P-L.left)/(D+Math.abs(Math.sin(I)*k)),F=(z>L.middle?L.bottom-z:z-L.top)/(Math.abs(R)+Math.cos(I)*k);if(O<1||F<1)return 1/0;var V=y.EDGECOST*(1/(O-1)+1/(F-1));V+=y.ANGLECOST*I*I;for(var G=P-D,J=z-R,Z=P+D,Y=z+R,j=0;j<u.length;j++){var re=u[j],se=Math.cos(re.theta)*re.width/2,oe=Math.sin(re.theta)*re.width/2,N=v.segmentDistance(G,J,Z,Y,re.x-se,re.y-oe,re.x+se,re.y+oe)*2/(x.height+re.height),U=re.level===x.level,q=U?y.SAMELEVELDISTANCE:1;if(N<=q)return 1/0;var Q=y.NEIGHBORCOST*(U?y.SAMELEVELFACTOR:1);V+=Q/(N-q)}return V}ae.addLabelData=function(h,x,u,L){var S=x.fontSize,k=x.width+S/3,P=Math.max(0,x.height-S/3),z=h.x,I=h.y,D=h.theta,R=Math.sin(D),O=Math.cos(D),F=function(G,J){return[z+G*O-J*R,I+G*R+J*O]},V=[F(-k/2,-P/2),F(-k/2,P/2),F(k/2,P/2),F(k/2,-P/2)];u.push({text:x.text,x:z,y:I,dy:x.dy,theta:D,level:x.level,width:k,height:P}),L.push(V)},ae.drawLabels=function(h,x,u,L,S){var k=h.selectAll("text").data(x,function(D){return D.text+","+D.x+","+D.y+","+D.theta});if(k.exit().remove(),k.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(D){var R=D.x+Math.sin(D.theta)*D.dy,O=D.y-Math.cos(D.theta)*D.dy;w.select(this).text(D.text).attr({x:R,y:O,transform:"rotate("+180*D.theta/Math.PI+" "+R+" "+O+")"}).call(e.convertToTspans,u)}),S){for(var P="",z=0;z<S.length;z++)P+="M"+S[z].join("L")+"Z";var I=v.ensureSingle(L,"path","");I.attr("d",P)}};function A(h,x,u,L,S){var k=L.trace,P=u._fullLayout._clips,z="clip"+k.uid,I=P.selectAll("#"+z).data(k.connectgaps?[]:[0]);if(I.enter().append("clipPath").classed("contourclip",!0).attr("id",z),I.exit().remove(),k.connectgaps===!1){var D={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:x.xaxis,yaxis:x.yaxis,x:L.x,y:L.y,z:m(L),smoothing:0};t([D]),f([D]),g([D],{type:"levels"});var R=v.ensureSingle(I,"path","");R.attr("d",(D.prefixBoundary?"M"+S.join("L")+"Z":"")+l(D,S))}else z=null;M.setClipUrl(h,z,u)}function m(h){var x=h.trace._emptypoints,u=[],L=h.z.length,S=h.z[0].length,k,P=[],z;for(k=0;k<S;k++)P.push(1);for(k=0;k<L;k++)u.push(P.slice());for(k=0;k<x.length;k++)z=x[k],u[z[0]][z[1]]=0;return h.zmask=u,u}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/set_convert":576,"../heatmap/plot":804,"./close_boundaries":737,"./constants":739,"./convert_to_constraints":743,"./empty_pathinfo":745,"./find_all_paths":747,"./make_crossings":752,"@plotly/d3":58}],754:[function(d,ne,ae){var w=d("../../plots/cartesian/axes"),v=d("../../lib");ne.exports=function(e,a){var n=e.contours;if(e.autocontour){var r=e.zmin,t=e.zmax;(e.zauto||r===void 0)&&(r=v.aggNums(Math.min,null,a)),(e.zauto||t===void 0)&&(t=v.aggNums(Math.max,null,a));var f=M(r,t,e.ncontours);n.size=f.dtick,n.start=w.tickFirst(f),f.range.reverse(),n.end=w.tickFirst(f),n.start===r&&(n.start+=n.size),n.end===t&&(n.end-=n.size),n.start>n.end&&(n.start=n.end=(n.start+n.end)/2),e._input.contours||(e._input.contours={}),v.extendFlat(e._input.contours,{start:n.start,end:n.end,size:n.size}),e._input.autocontour=!0}else if(n.type!=="constraint"){var o=n.start,i=n.end,g=e._input.contours;if(o>i&&(n.start=g.start=i,i=n.end=g.end=o,o=n.start),!(n.size>0)){var p;o===i?p=1:p=M(o,i,e.ncontours).dtick,g.size=n.size=p}}};function M(T,e,a){var n={type:"linear",range:[T,e]};return w.autoTicks(n,(e-T)/(a||15)),n}},{"../../lib":503,"../../plots/cartesian/axes":554}],755:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../components/drawing"),M=d("../heatmap/style"),T=d("./make_color_map");ne.exports=function(a){var n=w.select(a).selectAll("g.contour");n.style("opacity",function(r){return r[0].trace.opacity}),n.each(function(r){var t=w.select(this),f=r[0].trace,o=f.contours,i=f.line,g=o.size||1,p=o.start,y=o.type==="constraint",c=!y&&o.coloring==="lines",b=!y&&o.coloring==="fill",l=c||b?T(f):null;t.selectAll("g.contourlevel").each(function(A){w.select(this).selectAll("path").call(v.lineGroupStyle,i.width,c?l(A.level):i.color,i.dash)});var _=o.labelfont;if(t.selectAll("g.contourlabels text").each(function(A){v.font(w.select(this),{family:_.family,size:_.size,color:_.color||(c?l(A.level):i.color)})}),y)t.selectAll("g.contourfill path").style("fill",f.fillcolor);else if(b){var s;t.selectAll("g.contourfill path").style("fill",function(A){return s===void 0&&(s=A.level),l(A.level+.5*g)}),s===void 0&&(s=p),t.selectAll("g.contourbg path").style("fill",l(s-.5*g))}}),M(a)}},{"../../components/drawing":388,"../heatmap/style":805,"./make_color_map":751,"@plotly/d3":58}],756:[function(d,ne,ae){var w=d("../../components/colorscale/defaults"),v=d("./label_defaults");ne.exports=function(T,e,a,n,r){var t=a("contours.coloring"),f,o="";t==="fill"&&(f=a("contours.showlines")),f!==!1&&(t!=="lines"&&(o=a("line.color","#000")),a("line.width",.5),a("line.dash")),t!=="none"&&(T.showlegend!==!0&&(e.showlegend=!1),e._dfltShowLegend=!1,w(T,e,n,a,{prefix:"",cLetter:"z"})),a("line.smoothing"),v(a,n,o,r)}},{"../../components/colorscale/defaults":376,"./label_defaults":750}],757:[function(d,ne,ae){var w=d("../heatmap/attributes"),v=d("../contour/attributes"),M=d("../../components/colorscale/attributes"),T=d("../../lib/extend").extendFlat,e=v.contours;ne.exports=T({carpet:{valType:"string",editType:"calc"},z:w.z,a:w.x,a0:w.x0,da:w.dx,b:w.y,b0:w.y0,db:w.dy,text:w.text,hovertext:w.hovertext,transpose:w.transpose,atype:w.xtype,btype:w.ytype,fillcolor:v.fillcolor,autocontour:v.autocontour,ncontours:v.ncontours,contours:{type:e.type,start:e.start,end:e.end,size:e.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:e.showlines,showlabels:e.showlabels,labelfont:e.labelfont,labelformat:e.labelformat,operation:e.operation,value:e.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:v.line.color,width:v.line.width,dash:v.line.dash,smoothing:v.line.smoothing,editType:"plot"},transforms:void 0},M("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../contour/attributes":735,"../heatmap/attributes":792}],758:[function(d,ne,ae){var w=d("../../components/colorscale/calc"),v=d("../../lib"),M=d("../heatmap/convert_column_xyz"),T=d("../heatmap/clean_2d_array"),e=d("../heatmap/interp2d"),a=d("../heatmap/find_empties"),n=d("../heatmap/make_bound_array"),r=d("./defaults"),t=d("../carpet/lookup_carpetid"),f=d("../contour/set_contours");ne.exports=function(g,p){var y=p._carpetTrace=t(g,p);if(!(!y||!y.visible||y.visible==="legendonly")){if(!p.a||!p.b){var c=g.data[y.index],b=g.data[p.index];b.a||(b.a=c.a),b.b||(b.b=c.b),r(b,p,p._defaultColor,g._fullLayout)}var l=o(g,p);return f(p,p._z),l}};function o(i,g){var p=g._carpetTrace,y=p.aaxis,c=p.baxis,b,l,_,s,A,m,h;y._minDtick=0,c._minDtick=0,v.isArray1D(g.z)&&M(g,y,c,"a","b",["z"]),b=g._a=g._a||g.a,s=g._b=g._b||g.b,b=b?y.makeCalcdata(g,"_a"):[],s=s?c.makeCalcdata(g,"_b"):[],l=g.a0||0,_=g.da||1,A=g.b0||0,m=g.db||1,h=g._z=T(g._z||g.z,g.transpose),g._emptypoints=a(h),e(h,g._emptypoints);var x=v.maxRowLength(h),u=g.xtype==="scaled"?"":b,L=n(g,u,l,_,x,y),S=g.ytype==="scaled"?"":s,k=n(g,S,A,m,h.length,c),P={a:L,b:k,z:h};return g.contours.type==="levels"&&g.contours.coloring!=="none"&&w(i,g,{vals:h,containerStr:"",cLetter:"z"}),[P]}},{"../../components/colorscale/calc":374,"../../lib":503,"../carpet/lookup_carpetid":708,"../contour/set_contours":754,"../heatmap/clean_2d_array":794,"../heatmap/convert_column_xyz":796,"../heatmap/find_empties":798,"../heatmap/interp2d":801,"../heatmap/make_bound_array":803,"./defaults":759}],759:[function(d,ne,ae){var w=d("../../lib"),v=d("../heatmap/xyz_defaults"),M=d("./attributes"),T=d("../contour/constraint_defaults"),e=d("../contour/contours_defaults"),a=d("../contour/style_defaults");ne.exports=function(r,t,f,o){function i(c,b){return w.coerce(r,t,M,c,b)}function g(c){return w.coerce2(r,t,M,c)}if(i("carpet"),r.a&&r.b){var p=v(r,t,i,o,"a","b");if(!p){t.visible=!1;return}i("text");var y=i("contours.type")==="constraint";y?T(r,t,i,o,f,{hasHover:!1}):(e(r,t,i,g),a(r,t,i,o,{hasHover:!1}))}else t._defaultColor=f,t._length=null}},{"../../lib":503,"../contour/constraint_defaults":740,"../contour/contours_defaults":742,"../contour/style_defaults":756,"../heatmap/xyz_defaults":807,"./attributes":757}],760:[function(d,ne,ae){ne.exports={attributes:d("./attributes"),supplyDefaults:d("./defaults"),colorbar:d("../contour/colorbar"),calc:d("./calc"),plot:d("./plot"),style:d("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:d("../../plots/cartesian"),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":568,"../contour/colorbar":738,"../contour/style":755,"./attributes":757,"./calc":758,"./defaults":759,"./plot":761}],761:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../carpet/map_1d_array"),M=d("../carpet/makepath"),T=d("../../components/drawing"),e=d("../../lib"),a=d("../contour/make_crossings"),n=d("../contour/find_all_paths"),r=d("../contour/plot"),t=d("../contour/constants"),f=d("../contour/convert_to_constraints"),o=d("../contour/empty_pathinfo"),i=d("../contour/close_boundaries"),g=d("../carpet/lookup_carpetid"),p=d("../carpet/axis_aligned_line");ne.exports=function(u,L,S,k){var P=L.xaxis,z=L.yaxis;e.makeTraceGroups(k,S,"contour").each(function(I){var D=w.select(this),R=I[0],O=R.trace,F=O._carpetTrace=g(u,O),V=u.calcdata[F.index][0];if(!F.visible||F.visible==="legendonly")return;var G=R.a,J=R.b,Z=O.contours,Y=o(Z,L,R),j=Z.type==="constraint",re=Z._operation,se=j?re==="="?"lines":"fill":Z.coloring;function oe(ge){var fe=F.ab2xy(ge[0],ge[1],!0);return[P.c2p(fe[0]),z.c2p(fe[1])]}var N=[[G[0],J[J.length-1]],[G[G.length-1],J[J.length-1]],[G[G.length-1],J[0]],[G[0],J[0]]];a(Y);var U=(G[G.length-1]-G[0])*1e-8,q=(J[J.length-1]-J[0])*1e-8;n(Y,U,q);var Q=Y;Z.type==="constraint"&&(Q=f(Y,re)),y(Y,oe);var W,X,ee,te,ie=[];for(te=V.clipsegments.length-1;te>=0;te--)W=V.clipsegments[te],X=v([],W.x,P.c2p),ee=v([],W.y,z.c2p),X.reverse(),ee.reverse(),ie.push(M(X,ee,W.bicubic));var le="M"+ie.join("L")+"Z";A(D,V.clipsegments,P,z,j,se),m(O,D,P,z,Q,N,oe,F,V,se,le),c(D,Y,u,R,Z,L,F),T.setClipUrl(D,F._clipPathId,u)})};function y(x,u){var L,S,k,P,z,I,D,R,O;for(L=0;L<x.length;L++){for(P=x[L],z=P.pedgepaths=[],I=P.ppaths=[],S=0;S<P.edgepaths.length;S++){for(O=P.edgepaths[S],D=[],k=0;k<O.length;k++)D[k]=u(O[k]);z.push(D)}for(S=0;S<P.paths.length;S++){for(O=P.paths[S],R=[],k=0;k<O.length;k++)R[k]=u(O[k]);I.push(R)}}}function c(x,u,L,S,k,P,z){var I=e.ensureSingle(x,"g","contourlines"),D=k.showlines!==!1,R=k.showlabels,O=D&&R,F=r.createLines(I,D||R,u),V=r.createLineClip(I,O,L,S.trace.uid),G=x.selectAll("g.contourlabels").data(R?[0]:[]);if(G.exit().remove(),G.enter().append("g").classed("contourlabels",!0),R){var J=P.xaxis,Z=P.yaxis,Y=J._length,j=Z._length,re=[[[0,0],[Y,0],[Y,j],[0,j]]],se=[];e.clearLocationCache();var oe=r.labelFormatter(L,S),N=T.tester.append("text").attr("data-notex",1).call(T.font,k.labelfont),U={left:0,right:Y,center:Y/2,top:0,bottom:j,middle:j/2},q=Math.sqrt(Y*Y+j*j),Q=t.LABELDISTANCE*q/Math.max(1,u.length/t.LABELINCREASE);F.each(function(W){var X=r.calcTextOpts(W.level,oe,N,L);w.select(this).selectAll("path").each(function(ee){var te=this,ie=e.getVisibleSegment(te,U,X.height/2);if(!!ie&&(b(te,ee,W,ie,z,X.height),!(ie.len<(X.width+X.height)*t.LABELMIN)))for(var le=Math.min(Math.ceil(ie.len/Q),t.LABELMAX),ge=0;ge<le;ge++){var fe=r.findBestTextLocation(te,ie,X,se,U);if(!fe)break;r.addLabelData(fe,X,se,re)}})}),N.remove(),r.drawLabels(G,se,L,V,O?re:null)}R&&!D&&F.remove()}function b(x,u,L,S,k,P){for(var z,I=0;I<L.pedgepaths.length;I++)u===L.pedgepaths[I]&&(z=L.edgepaths[I]);if(!z)return;var D=k.a[0],R=k.a[k.a.length-1],O=k.b[0],F=k.b[k.b.length-1];function V(j,re){var se=0,oe,N=.1;return(Math.abs(j[0]-D)<N||Math.abs(j[0]-R)<N)&&(oe=_(k.dxydb_rough(j[0],j[1],N)),se=Math.max(se,P*s(re,oe)/2)),(Math.abs(j[1]-O)<N||Math.abs(j[1]-F)<N)&&(oe=_(k.dxyda_rough(j[0],j[1],N)),se=Math.max(se,P*s(re,oe)/2)),se}var G=l(x,0,1),J=l(x,S.total,S.total-1),Z=V(z[0],G),Y=S.total-V(z[z.length-1],J);S.min<Z&&(S.min=Z),S.max>Y&&(S.max=Y),S.len=S.max-S.min}function l(x,u,L){var S=x.getPointAtLength(u),k=x.getPointAtLength(L),P=k.x-S.x,z=k.y-S.y,I=Math.sqrt(P*P+z*z);return[P/I,z/I]}function _(x){var u=Math.sqrt(x[0]*x[0]+x[1]*x[1]);return[x[0]/u,x[1]/u]}function s(x,u){var L=Math.abs(x[0]*u[0]+x[1]*u[1]),S=Math.sqrt(1-L*L);return S/L}function A(x,u,L,S,k,P){var z,I,D,R,O=e.ensureSingle(x,"g","contourbg"),F=O.selectAll("path").data(P==="fill"&&!k?[0]:[]);F.enter().append("path"),F.exit().remove();var V=[];for(R=0;R<u.length;R++)z=u[R],I=v([],z.x,L.c2p),D=v([],z.y,S.c2p),V.push(M(I,D,z.bicubic));F.attr("d","M"+V.join("L")+"Z").style("stroke","none")}function m(x,u,L,S,k,P,z,I,D,R,O){var F=R==="fill";F&&i(k,x.contours);var V=e.ensureSingle(u,"g","contourfill"),G=V.selectAll("path").data(F?k:[]);G.enter().append("path"),G.exit().remove(),G.each(function(J){var Z=(J.prefixBoundary?O:"")+h(x,J,P,z,I,D,L,S);Z?w.select(this).attr("d",Z).style("stroke","none"):w.select(this).remove()})}function h(x,u,L,S,k,P,z,I){var D,R="",O=u.edgepaths.map(function(ee,te){return te}),F=!0,V,G,J,Z,Y,j,re=Math.abs(L[0][0]-L[2][0])*1e-4,se=Math.abs(L[0][1]-L[2][1])*1e-4;function oe(ee){return Math.abs(ee[1]-L[0][1])<se}function N(ee){return Math.abs(ee[1]-L[2][1])<se}function U(ee){return Math.abs(ee[0]-L[0][0])<re}function q(ee){return Math.abs(ee[0]-L[2][0])<re}function Q(ee,te){var ie,le,ge,fe,pe="";for(oe(ee)&&!q(ee)||N(ee)&&!U(ee)?(fe=k.aaxis,ge=p(k,P,[ee[0],te[0]],.5*(ee[1]+te[1]))):(fe=k.baxis,ge=p(k,P,.5*(ee[0]+te[0]),[ee[1],te[1]])),ie=1;ie<ge.length;ie++)for(pe+=fe.smoothing?"C":"L",le=0;le<ge[ie].length;le++){var ye=ge[ie][le];pe+=[z.c2p(ye[0]),I.c2p(ye[1])]+" "}return pe}for(D=0,V=null;O.length;){var W=u.edgepaths[D][0];for(V&&(R+=Q(V,W)),j=T.smoothopen(u.edgepaths[D].map(S),u.smoothing),R+=F?j:j.replace(/^M/,"L"),O.splice(O.indexOf(D),1),V=u.edgepaths[D][u.edgepaths[D].length-1],Z=-1,J=0;J<4;J++){if(!V){e.log("Missing end?",D,u);break}for(oe(V)&&!q(V)?G=L[1]:U(V)?G=L[0]:N(V)?G=L[3]:q(V)&&(G=L[2]),Y=0;Y<u.edgepaths.length;Y++){var X=u.edgepaths[Y][0];Math.abs(V[0]-G[0])<re?Math.abs(V[0]-X[0])<re&&(X[1]-V[1])*(G[1]-X[1])>=0&&(G=X,Z=Y):Math.abs(V[1]-G[1])<se?Math.abs(V[1]-X[1])<se&&(X[0]-V[0])*(G[0]-X[0])>=0&&(G=X,Z=Y):e.log("endpt to newendpt is not vert. or horz.",V,G,X)}if(Z>=0)break;R+=Q(V,G),V=G}if(Z===u.edgepaths.length){e.log("unclosed perimeter path");break}D=Z,F=O.indexOf(D)===-1,F&&(D=O[0],R+=Q(V,G)+"Z",V=null)}for(D=0;D<u.paths.length;D++)R+=T.smoothclosed(u.paths[D].map(S),u.smoothing);return R}},{"../../components/drawing":388,"../../lib":503,"../carpet/axis_aligned_line":692,"../carpet/lookup_carpetid":708,"../carpet/makepath":709,"../carpet/map_1d_array":710,"../contour/close_boundaries":737,"../contour/constants":739,"../contour/convert_to_constraints":743,"../contour/empty_pathinfo":745,"../contour/find_all_paths":747,"../contour/make_crossings":752,"../contour/plot":753,"@plotly/d3":58}],762:[function(d,ne,ae){var w=d("../../components/colorscale/attributes"),v=d("../../plots/template_attributes").hovertemplateAttrs,M=d("../../plots/attributes"),T=d("../scattermapbox/attributes"),e=d("../../lib/extend").extendFlat;ne.exports=e({lon:T.lon,lat:T.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:T.text,hovertext:T.hovertext,hoverinfo:e({},M.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:v(),showlegend:e({},M.showlegend,{dflt:!1})},w("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scattermapbox/attributes":993}],763:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("../../lib").isArrayOrTypedArray,M=d("../../constants/numerical").BADNUM,T=d("../../components/colorscale/calc"),e=d("../../lib")._;ne.exports=function(n,r){for(var t=r._length,f=new Array(t),o=r.z,i=v(o)&&o.length,g=0;g<t;g++){var p=f[g]={},y=r.lon[g],c=r.lat[g];if(p.lonlat=w(y)&&w(c)?[+y,+c]:[M,M],i){var b=o[g];p.z=w(b)?b:M}}return T(n,r,{vals:i?o:[0,1],containerStr:"",cLetter:"z"}),t&&(f[0].t={labels:{lat:e(n,"lat:")+" ",lon:e(n,"lon:")+" "}}),f}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],764:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("../../lib"),M=d("../../components/color"),T=d("../../components/colorscale"),e=d("../../constants/numerical").BADNUM,a=d("../../lib/geojson_utils").makeBlank;ne.exports=function(r){var t=r[0].trace,f=t.visible===!0&&t._length!==0,o={layout:{visibility:"none"},paint:{}},i=t._opts={heatmap:o,geojson:a()};if(!f)return i;var g=[],p,y=t.z,c=t.radius,b=v.isArrayOrTypedArray(y)&&y.length,l=v.isArrayOrTypedArray(c);for(p=0;p<r.length;p++){var _=r[p],s=_.lonlat;if(s[0]!==e){var A={};if(b){var m=_.z;A.z=m!==e?m:0}l&&(A.r=w(c[p])&&c[p]>0?+c[p]:0),g.push({type:"Feature",geometry:{type:"Point",coordinates:s},properties:A})}}var h=T.extractOpts(t),x=h.reversescale?T.flipScale(h.colorscale):h.colorscale,u=x[0][1],L=M.opacity(u)<1?u:M.addOpacity(u,0),S=["interpolate",["linear"],["heatmap-density"],0,L];for(p=1;p<x.length;p++)S.push(x[p][0],x[p][1]);var k=["interpolate",["linear"],["get","z"],h.min,0,h.max,1];return v.extendFlat(i.heatmap.paint,{"heatmap-weight":b?k:1/(h.max-h.min),"heatmap-color":S,"heatmap-radius":l?{type:"identity",property:"r"}:t.radius,"heatmap-opacity":t.opacity}),i.geojson={type:"FeatureCollection",features:g},i.heatmap.layout.visibility="visible",i}},{"../../components/color":366,"../../components/colorscale":378,"../../constants/numerical":479,"../../lib":503,"../../lib/geojson_utils":497,"fast-isnumeric":190}],765:[function(d,ne,ae){var w=d("../../lib"),v=d("../../components/colorscale/defaults"),M=d("./attributes");ne.exports=function(e,a,n,r){function t(g,p){return w.coerce(e,a,M,g,p)}var f=t("lon")||[],o=t("lat")||[],i=Math.min(f.length,o.length);if(!i){a.visible=!1;return}a._length=i,t("z"),t("radius"),t("below"),t("text"),t("hovertext"),t("hovertemplate"),v(e,a,r,t,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":762}],766:[function(d,ne,ae){ne.exports=function(v,M){return v.lon=M.lon,v.lat=M.lat,v.z=M.z,v}},{}],767:[function(d,ne,ae){var w=d("../../plots/cartesian/axes"),v=d("../scattermapbox/hover").hoverPoints,M=d("../scattermapbox/hover").getExtraText;ne.exports=function(e,a,n){var r=v(e,a,n);if(!!r){var t=r[0],f=t.cd,o=f[0].trace,i=f[t.index];if(delete t.color,"z"in i){var g=t.subplot.mockAxis;t.z=i.z,t.zLabel=w.tickText(g,g.c2l(i.z),"hover").text}return t.extraText=M(o,i,f[0].t.labels),[t]}}},{"../../plots/cartesian/axes":554,"../scattermapbox/hover":998}],768:[function(d,ne,ae){ne.exports={attributes:d("./attributes"),supplyDefaults:d("./defaults"),colorbar:d("../heatmap/colorbar"),formatLabels:d("../scattermapbox/format_labels"),calc:d("./calc"),plot:d("./plot"),hoverPoints:d("./hover"),eventData:d("./event_data"),getBelow:function(w,v){for(var M=v.getMapLayers(),T=0;T<M.length;T++){var e=M[T],a=e.id;if(e.type==="symbol"&&typeof a=="string"&&a.indexOf("plotly-")===-1)return a}},moduleType:"trace",name:"densitymapbox",basePlotModule:d("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":613,"../heatmap/colorbar":795,"../scattermapbox/format_labels":997,"./attributes":762,"./calc":763,"./defaults":765,"./event_data":766,"./hover":767,"./plot":769}],769:[function(d,ne,ae){var w=d("./convert"),v=d("../../plots/mapbox/constants").traceLayerPrefix;function M(e,a){this.type="densitymapbox",this.subplot=e,this.uid=a,this.sourceId="source-"+a,this.layerList=[["heatmap",v+a+"-heatmap"]],this.below=null}var T=M.prototype;T.update=function(e){var a=this.subplot,n=this.layerList,r=w(e),t=a.belowLookup["trace-"+this.uid];a.map.getSource(this.sourceId).setData(r.geojson),t!==this.below&&(this._removeLayers(),this._addLayers(r,t),this.below=t);for(var f=0;f<n.length;f++){var o=n[f],i=o[0],g=o[1],p=r[i];a.setOptions(g,"setLayoutProperty",p.layout),p.layout.visibility==="visible"&&a.setOptions(g,"setPaintProperty",p.paint)}},T._addLayers=function(e,a){for(var n=this.subplot,r=this.layerList,t=this.sourceId,f=0;f<r.length;f++){var o=r[f],i=o[0],g=e[i];n.addLayer({type:i,id:o[1],source:t,layout:g.layout,paint:g.paint},a)}},T._removeLayers=function(){for(var e=this.subplot.map,a=this.layerList,n=a.length-1;n>=0;n--)e.removeLayer(a[n][1])},T.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)},ne.exports=function(a,n){var r=n[0].trace,t=new M(a,r.uid),f=t.sourceId,o=w(n),i=t.below=a.belowLookup["trace-"+r.uid];return a.map.addSource(f,{type:"geojson",data:o.geojson}),t._addLayers(o,i),t}},{"../../plots/mapbox/constants":611,"./convert":764}],770:[function(d,ne,ae){var w=d("../../lib");ne.exports=function(M,T){for(var e=0;e<M.length;e++)M[e].i=e;w.mergeArray(T.text,M,"tx"),w.mergeArray(T.hovertext,M,"htx");var a=T.marker;if(a){w.mergeArray(a.opacity,M,"mo"),w.mergeArray(a.color,M,"mc");var n=a.line;n&&(w.mergeArray(n.color,M,"mlc"),w.mergeArrayCastPositive(n.width,M,"mlw"))}}},{"../../lib":503}],771:[function(d,ne,ae){var w=d("../bar/attributes"),v=d("../scatter/attributes").line,M=d("../../plots/attributes"),T=d("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=d("../../plots/template_attributes").hovertemplateAttrs,a=d("../../plots/template_attributes").texttemplateAttrs,n=d("./constants"),r=d("../../lib/extend").extendFlat,t=d("../../components/color");ne.exports={x:w.x,x0:w.x0,dx:w.dx,y:w.y,y0:w.y0,dy:w.dy,xperiod:w.xperiod,yperiod:w.yperiod,xperiod0:w.xperiod0,yperiod0:w.yperiod0,xperiodalignment:w.xperiodalignment,yperiodalignment:w.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),hovertext:w.hovertext,hovertemplate:e({},{keys:n.eventDataKeys}),hoverinfo:r({},M.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:a({editType:"plot"},{keys:n.eventDataKeys.concat(["label","value"])}),text:w.text,textposition:w.textposition,insidetextanchor:r({},w.insidetextanchor,{dflt:"middle"}),textangle:r({},w.textangle,{dflt:0}),textfont:w.textfont,insidetextfont:w.insidetextfont,outsidetextfont:w.outsidetextfont,constraintext:w.constraintext,cliponaxis:w.cliponaxis,orientation:r({},w.orientation,{}),offset:r({},w.offset,{arrayOk:!1}),width:r({},w.width,{arrayOk:!1}),marker:f(),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:r({},v.color,{dflt:t.defaultLine}),width:r({},v.width,{dflt:0,editType:"plot"}),dash:v.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:w.offsetgroup,alignmentgroup:w.alignmentgroup};function f(){var o=r({},w.marker);return delete o.pattern,o}},{"../../components/color":366,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":927,"./constants":773}],772:[function(d,ne,ae){var w=d("../../plots/cartesian/axes"),v=d("../../plots/cartesian/align_period"),M=d("./arrays_to_calcdata"),T=d("../scatter/calc_selection"),e=d("../../constants/numerical").BADNUM;ne.exports=function(r,t){var f=w.getFromId(r,t.xaxis||"x"),o=w.getFromId(r,t.yaxis||"y"),i,g,p,y,c,b,l,_;t.orientation==="h"?(i=f.makeCalcdata(t,"x"),p=o.makeCalcdata(t,"y"),y=v(t,o,"y",p),c=!!t.yperiodalignment,b="y"):(i=o.makeCalcdata(t,"y"),p=f.makeCalcdata(t,"x"),y=v(t,f,"x",p),c=!!t.xperiodalignment,b="x"),g=y.vals;var s=Math.min(g.length,i.length),A=new Array(s);for(t._base=[],l=0;l<s;l++){i[l]<0&&(i[l]=e);var m=!1;i[l]!==e&&l+1<s&&i[l+1]!==e&&(m=!0),_=A[l]={p:g[l],s:i[l],cNext:m},t._base[l]=-.5*_.s,c&&(A[l].orig_p=p[l],A[l][b+"End"]=y.ends[l],A[l][b+"Start"]=y.starts[l]),t.ids&&(_.id=String(t.ids[l])),l===0&&(A[0].vTotal=0),A[0].vTotal+=a(_.s),_.begR=a(_.s)/a(A[0].s)}var h;for(l=0;l<s;l++)_=A[l],_.s!==e&&(_.sumR=_.s/A[0].vTotal,_.difR=h!==void 0?_.s/h:1,h=_.s);return M(A,t),T(A,t),A};function a(n){return n===e?0:n}},{"../../constants/numerical":479,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":929,"./arrays_to_calcdata":770}],773:[function(d,ne,ae){ne.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],774:[function(d,ne,ae){var w=d("../bar/cross_trace_calc").setGroupPositions;ne.exports=function(M,T){var e=M._fullLayout,a=M._fullData,n=M.calcdata,r=T.xaxis,t=T.yaxis,f=[],o=[],i=[],g,p;for(p=0;p<a.length;p++){var y=a[p],c=y.orientation==="h";y.visible===!0&&y.xaxis===r._id&&y.yaxis===t._id&&y.type==="funnel"&&(g=n[p],c?i.push(g):o.push(g),f.push(g))}var b={mode:e.funnelmode,norm:e.funnelnorm,gap:e.funnelgap,groupgap:e.funnelgroupgap};for(w(M,r,t,o,b),w(M,t,r,i,b),p=0;p<f.length;p++){g=f[p];for(var l=0;l<g.length;l++)l+1<g.length&&(g[l].nextP0=g[l+1].p0,g[l].nextS0=g[l+1].s0,g[l].nextP1=g[l+1].p1,g[l].nextS1=g[l+1].s1)}}},{"../bar/cross_trace_calc":651}],775:[function(d,ne,ae){var w=d("../../lib"),v=d("../bar/defaults").handleGroupingDefaults,M=d("../bar/defaults").handleText,T=d("../scatter/xy_defaults"),e=d("../scatter/period_defaults"),a=d("./attributes"),n=d("../../components/color");function r(o,i,g,p){function y(m,h){return w.coerce(o,i,a,m,h)}var c=T(o,i,p,y);if(!c){i.visible=!1;return}e(o,i,p,y),y("xhoverformat"),y("yhoverformat"),y("orientation",i.y&&!i.x?"v":"h"),y("offset"),y("width");var b=y("text");y("hovertext"),y("hovertemplate");var l=y("textposition");M(o,i,p,y,l,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),i.textposition!=="none"&&!i.texttemplate&&y("textinfo",Array.isArray(b)?"text+value":"value");var _=y("marker.color",g);y("marker.line.color",n.defaultLine),y("marker.line.width");var s=y("connector.visible");if(s){y("connector.fillcolor",t(_));var A=y("connector.line.width");A&&(y("connector.line.color"),y("connector.line.dash"))}}function t(o){var i=w.isArrayOrTypedArray(o)?"#000":o;return n.addOpacity(i,.5*n.opacity(i))}function f(o,i){var g,p;function y(b){return w.coerce(p._input,p,a,b)}if(i.funnelmode==="group")for(var c=0;c<o.length;c++)p=o[c],g=p._input,v(g,p,i,y)}ne.exports={supplyDefaults:r,crossTraceDefaults:f}},{"../../components/color":366,"../../lib":503,"../bar/defaults":652,"../scatter/period_defaults":947,"../scatter/xy_defaults":954,"./attributes":771}],776:[function(d,ne,ae){ne.exports=function(v,M){return v.x="xVal"in M?M.xVal:M.x,v.y="yVal"in M?M.yVal:M.y,"percentInitial"in M&&(v.percentInitial=M.percentInitial),"percentPrevious"in M&&(v.percentPrevious=M.percentPrevious),"percentTotal"in M&&(v.percentTotal=M.percentTotal),M.xa&&(v.xaxis=M.xa),M.ya&&(v.yaxis=M.ya),v}},{}],777:[function(d,ne,ae){var w=d("../../components/color").opacity,v=d("../bar/hover").hoverOnBars,M=d("../../lib").formatPercent;ne.exports=function(a,n,r,t,f){var o=v(a,n,r,t,f);if(!!o){var i=o.cd,g=i[0].trace,p=g.orientation==="h",y=o.index,c=i[y],b=p?"x":"y";o[b+"LabelVal"]=c.s,o.percentInitial=c.begR,o.percentInitialLabel=M(c.begR,1),o.percentPrevious=c.difR,o.percentPreviousLabel=M(c.difR,1),o.percentTotal=c.sumR,o.percentTotalLabel=M(c.sumR,1);var l=c.hi||g.hoverinfo,_=[];if(l&&l!=="none"&&l!=="skip"){var s=l==="all",A=l.split("+"),m=function(h){return s||A.indexOf(h)!==-1};m("percent initial")&&_.push(o.percentInitialLabel+" of initial"),m("percent previous")&&_.push(o.percentPreviousLabel+" of previous"),m("percent total")&&_.push(o.percentTotalLabel+" of total")}return o.extraText=_.join("<br>"),o.color=T(g,c),[o]}};function T(e,a){var n=e.marker,r=a.mc||n.color,t=a.mlc||n.line.color,f=a.mlw||n.line.width;if(w(r))return r;if(w(t)&&f)return t}},{"../../components/color":366,"../../lib":503,"../bar/hover":655}],778:[function(d,ne,ae){ne.exports={attributes:d("./attributes"),layoutAttributes:d("./layout_attributes"),supplyDefaults:d("./defaults").supplyDefaults,crossTraceDefaults:d("./defaults").crossTraceDefaults,supplyLayoutDefaults:d("./layout_defaults"),calc:d("./calc"),crossTraceCalc:d("./cross_trace_calc"),plot:d("./plot"),style:d("./style").style,hoverPoints:d("./hover"),eventData:d("./event_data"),selectPoints:d("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:d("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../bar/select":660,"./attributes":771,"./calc":772,"./cross_trace_calc":774,"./defaults":775,"./event_data":776,"./hover":777,"./layout_attributes":779,"./layout_defaults":780,"./plot":781,"./style":782}],779:[function(d,ne,ae){ne.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],780:[function(d,ne,ae){var w=d("../../lib"),v=d("./layout_attributes");ne.exports=function(M,T,e){var a=!1;function n(f,o){return w.coerce(M,T,v,f,o)}for(var r=0;r<e.length;r++){var t=e[r];if(t.visible&&t.type==="funnel"){a=!0;break}}a&&(n("funnelmode"),n("funnelgap",.2),n("funnelgroupgap"))}},{"../../lib":503,"./layout_attributes":779}],781:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../lib"),M=d("../../components/drawing"),T=d("../../constants/numerical").BADNUM,e=d("../bar/plot"),a=d("../bar/uniform_text").clearMinTextSize;ne.exports=function(o,i,g,p){var y=o._fullLayout;a("funnel",y),n(o,i,g,p),r(o,i,g,p),e.plot(o,i,g,p,{mode:y.funnelmode,norm:y.funnelmode,gap:y.funnelgap,groupgap:y.funnelgroupgap})};function n(f,o,i,g){var p=o.xaxis,y=o.yaxis;v.makeTraceGroups(g,i,"trace bars").each(function(c){var b=w.select(this),l=c[0].trace,_=v.ensureSingle(b,"g","regions");if(!l.connector||!l.connector.visible){_.remove();return}var s=l.orientation==="h",A=_.selectAll("g.region").data(v.identity);A.enter().append("g").classed("region",!0),A.exit().remove();var m=A.size();A.each(function(h,x){if(!(x!==m-1&&!h.cNext)){var u=t(h,p,y,s),L=u[0],S=u[1],k="";L[0]!==T&&S[0]!==T&&L[1]!==T&&S[1]!==T&&L[2]!==T&&S[2]!==T&&L[3]!==T&&S[3]!==T&&(s?k+="M"+L[0]+","+S[1]+"L"+L[2]+","+S[2]+"H"+L[3]+"L"+L[1]+","+S[1]+"Z":k+="M"+L[1]+","+S[1]+"L"+L[2]+","+S[3]+"V"+S[2]+"L"+L[1]+","+S[0]+"Z"),k===""&&(k="M0,0Z"),v.ensureSingle(w.select(this),"path").attr("d",k).call(M.setClipUrl,o.layerClipId,f)}})})}function r(f,o,i,g){var p=o.xaxis,y=o.yaxis;v.makeTraceGroups(g,i,"trace bars").each(function(c){var b=w.select(this),l=c[0].trace,_=v.ensureSingle(b,"g","lines");if(!l.connector||!l.connector.visible||!l.connector.line.width){_.remove();return}var s=l.orientation==="h",A=_.selectAll("g.line").data(v.identity);A.enter().append("g").classed("line",!0),A.exit().remove();var m=A.size();A.each(function(h,x){if(!(x!==m-1&&!h.cNext)){var u=t(h,p,y,s),L=u[0],S=u[1],k="";L[3]!==void 0&&S[3]!==void 0&&(s?(k+="M"+L[0]+","+S[1]+"L"+L[2]+","+S[2],k+="M"+L[1]+","+S[1]+"L"+L[3]+","+S[2]):(k+="M"+L[1]+","+S[1]+"L"+L[2]+","+S[3],k+="M"+L[1]+","+S[0]+"L"+L[2]+","+S[2])),k===""&&(k="M0,0Z"),v.ensureSingle(w.select(this),"path").attr("d",k).call(M.setClipUrl,o.layerClipId,f)}})})}function t(f,o,i,g){var p=[],y=[],c=g?o:i,b=g?i:o;return p[0]=c.c2p(f.s0,!0),y[0]=b.c2p(f.p0,!0),p[1]=c.c2p(f.s1,!0),y[1]=b.c2p(f.p1,!0),p[2]=c.c2p(f.nextS0,!0),y[2]=b.c2p(f.nextP0,!0),p[3]=c.c2p(f.nextS1,!0),y[3]=b.c2p(f.nextP1,!0),g?[p,y]:[y,p]}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../bar/plot":659,"../bar/uniform_text":664,"@plotly/d3":58}],782:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../components/drawing"),M=d("../../components/color"),T=d("../../constants/interactions").DESELECTDIM,e=d("../bar/style"),a=d("../bar/uniform_text").resizeText,n=e.styleTextPoints;function r(t,f,o){var i=o||w.select(t).selectAll("g.funnellayer").selectAll("g.trace");a(t,i,"funnel"),i.style("opacity",function(g){return g[0].trace.opacity}),i.each(function(g){var p=w.select(this),y=g[0].trace;p.selectAll(".point > path").each(function(c){if(!c.isBlank){var b=y.marker;w.select(this).call(M.fill,c.mc||b.color).call(M.stroke,c.mlc||b.line.color).call(v.dashLine,b.line.dash,c.mlw||b.line.width).style("opacity",y.selectedpoints&&!c.selected?T:1)}}),n(p,y,t),p.selectAll(".regions").each(function(){w.select(this).selectAll("path").style("stroke-width",0).call(M.fill,y.connector.fillcolor)}),p.selectAll(".lines").each(function(){var c=y.connector.line;v.lineGroupStyle(w.select(this).selectAll("path"),c.width,c.color,c.dash)})})}ne.exports={style:r}},{"../../components/color":366,"../../components/drawing":388,"../../constants/interactions":478,"../bar/style":662,"../bar/uniform_text":664,"@plotly/d3":58}],783:[function(d,ne,ae){var w=d("../pie/attributes"),v=d("../../plots/attributes"),M=d("../../plots/domain").attributes,T=d("../../plots/template_attributes").hovertemplateAttrs,e=d("../../plots/template_attributes").texttemplateAttrs,a=d("../../lib/extend").extendFlat;ne.exports={labels:w.labels,label0:w.label0,dlabel:w.dlabel,values:w.values,marker:{colors:w.marker.colors,line:{color:a({},w.marker.line.color,{dflt:null}),width:a({},w.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:w.text,hovertext:w.hovertext,scalegroup:a({},w.scalegroup,{}),textinfo:a({},w.textinfo,{flags:["label","text","value","percent"]}),texttemplate:e({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:a({},v.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:T({},{keys:["label","color","value","text","percent"]}),textposition:a({},w.textposition,{values:["inside","none"],dflt:"inside"}),textfont:w.textfont,insidetextfont:w.insidetextfont,title:{text:w.title.text,font:w.title.font,position:a({},w.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:M({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":901}],784:[function(d,ne,ae){var w=d("../../plots/plots");ae.name="funnelarea",ae.plot=function(v,M,T,e){w.plotBasePlot(ae.name,v,M,T,e)},ae.clean=function(v,M,T,e){w.cleanBasePlot(ae.name,v,M,T,e)}},{"../../plots/plots":619}],785:[function(d,ne,ae){var w=d("../pie/calc");function v(T,e){return w.calc(T,e)}function M(T){w.crossTraceCalc(T,{type:"funnelarea"})}ne.exports={calc:v,crossTraceCalc:M}},{"../pie/calc":903}],786:[function(d,ne,ae){var w=d("../../lib"),v=d("./attributes"),M=d("../../plots/domain").defaults,T=d("../bar/defaults").handleText,e=d("../pie/defaults").handleLabelsAndValues;ne.exports=function(n,r,t,f){function o(m,h){return w.coerce(n,r,v,m,h)}var i=o("labels"),g=o("values"),p=e(i,g),y=p.len;if(r._hasLabels=p.hasLabels,r._hasValues=p.hasValues,!r._hasLabels&&r._hasValues&&(o("label0"),o("dlabel")),!y){r.visible=!1;return}r._length=y;var c=o("marker.line.width");c&&o("marker.line.color",f.paper_bgcolor),o("marker.colors"),o("scalegroup");var b=o("text"),l=o("texttemplate"),_;if(l||(_=o("textinfo",Array.isArray(b)?"text+percent":"percent")),o("hovertext"),o("hovertemplate"),l||_&&_!=="none"){var s=o("textposition");T(n,r,f,o,s,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}M(r,f,o);var A=o("title.text");A&&(o("title.position"),w.coerceFont(o,"title.font",f.font)),o("aspectratio"),o("baseratio")}},{"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"../pie/defaults":904,"./attributes":783}],787:[function(d,ne,ae){ne.exports={moduleType:"trace",name:"funnelarea",basePlotModule:d("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:d("./attributes"),layoutAttributes:d("./layout_attributes"),supplyDefaults:d("./defaults"),supplyLayoutDefaults:d("./layout_defaults"),calc:d("./calc").calc,crossTraceCalc:d("./calc").crossTraceCalc,plot:d("./plot"),style:d("./style"),styleOne:d("../pie/style_one"),meta:{}}},{"../pie/style_one":912,"./attributes":783,"./base_plot":784,"./calc":785,"./defaults":786,"./layout_attributes":788,"./layout_defaults":789,"./plot":790,"./style":791}],788:[function(d,ne,ae){var w=d("../pie/layout_attributes").hiddenlabels;ne.exports={hiddenlabels:w,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":908}],789:[function(d,ne,ae){var w=d("../../lib"),v=d("./layout_attributes");ne.exports=function(T,e){function a(n,r){return w.coerce(T,e,v,n,r)}a("hiddenlabels"),a("funnelareacolorway",e.colorway),a("extendfunnelareacolors")}},{"../../lib":503,"./layout_attributes":788}],790:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../components/drawing"),M=d("../../lib"),T=M.strScale,e=M.strTranslate,a=d("../../lib/svg_text_utils"),n=d("../bar/plot"),r=n.toMoveInsideBar,t=d("../bar/uniform_text"),f=t.recordMinTextSize,o=t.clearMinTextSize,i=d("../pie/helpers"),g=d("../pie/plot"),p=g.attachFxHandlers,y=g.determineInsideTextFont,c=g.layoutAreas,b=g.prerenderTitles,l=g.positionTitleOutside,_=g.formatSliceLabel;ne.exports=function(x,u){var L=x._fullLayout;o("funnelarea",L),b(u,x),c(u,L._size),M.makeTraceGroups(L._funnelarealayer,u,"trace").each(function(S){var k=w.select(this),P=S[0],z=P.trace;m(S),k.each(function(){var I=w.select(this).selectAll("g.slice").data(S);I.enter().append("g").classed("slice",!0),I.exit().remove(),I.each(function(R,O){if(R.hidden){w.select(this).selectAll("path,g").remove();return}R.pointNumber=R.i,R.curveNumber=z.index;var F=P.cx,V=P.cy,G=w.select(this),J=G.selectAll("path.surface").data([R]);J.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),G.call(p,x,S);var Z="M"+(F+R.TR[0])+","+(V+R.TR[1])+s(R.TR,R.BR)+s(R.BR,R.BL)+s(R.BL,R.TL)+"Z";J.attr("d",Z),_(x,R,P);var Y=i.castOption(z.textposition,R.pts),j=G.selectAll("g.slicetext").data(R.text&&Y!=="none"?[0]:[]);j.enter().append("g").classed("slicetext",!0),j.exit().remove(),j.each(function(){var re=M.ensureSingle(w.select(this),"text","",function(X){X.attr("data-notex",1)}),se=M.ensureUniformFontSize(x,y(z,R,L.font));re.text(R.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(v.font,se).call(a.convertToTspans,x);var oe=v.bBox(re.node()),N,U,q,Q=Math.min(R.BL[1],R.BR[1])+V,W=Math.max(R.TL[1],R.TR[1])+V;U=Math.max(R.TL[0],R.BL[0])+F,q=Math.min(R.TR[0],R.BR[0])+F,N=r(U,q,Q,W,oe,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"}),N.fontSize=se.size,f(z.type,N,L),S[O].transform=N,re.attr("transform",M.getTextTransform(N))})});var D=w.select(this).selectAll("g.titletext").data(z.title.text?[0]:[]);D.enter().append("g").classed("titletext",!0),D.exit().remove(),D.each(function(){var R=M.ensureSingle(w.select(this),"text","",function(V){V.attr("data-notex",1)}),O=z.title.text;z._meta&&(O=M.templateString(O,z._meta)),R.text(O).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(v.font,z.title.font).call(a.convertToTspans,x);var F=l(P,L._size);R.attr("transform",e(F.x,F.y)+T(Math.min(1,F.scale))+e(F.tx,F.ty))})})})};function s(h,x){var u=x[0]-h[0],L=x[1]-h[1];return"l"+u+","+L}function A(h,x){return[.5*(h[0]+x[0]),.5*(h[1]+x[1])]}function m(h){if(!h.length)return;var x=h[0],u=x.trace,L=u.aspectratio,S=u.baseratio;S>.999&&(S=.999);var k=Math.pow(S,2),P=x.vTotal,z=P*k/(1-k),I=P,D=z/P;function R(){var te=Math.sqrt(D);return{x:te,y:-te}}function O(){var te=R();return[te.x,te.y]}var F,V=[];V.push(O());var G,J;for(G=h.length-1;G>-1;G--)if(J=h[G],!J.hidden){var Z=J.v/I;D+=Z,V.push(O())}var Y=1/0,j=-1/0;for(G=0;G<V.length;G++)F=V[G],Y=Math.min(Y,F[1]),j=Math.max(j,F[1]);for(G=0;G<V.length;G++)V[G][1]-=(j+Y)/2;var re=V[V.length-1][0],se=x.r,oe=(j-Y)/2,N=se/re,U=se/oe*L;for(x.r=U*oe,G=0;G<V.length;G++)V[G][0]*=N,V[G][1]*=U;F=V[0];var q=[-F[0],F[1]],Q=[F[0],F[1]],W=0;for(G=h.length-1;G>-1;G--)if(J=h[G],!J.hidden){W+=1;var X=V[W][0],ee=V[W][1];J.TL=[-X,ee],J.TR=[X,ee],J.BL=q,J.BR=Q,J.pxmid=A(J.TR,J.BR),q=J.TL,Q=J.TR}}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../bar/plot":659,"../bar/uniform_text":664,"../pie/helpers":906,"../pie/plot":910,"@plotly/d3":58}],791:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../pie/style_one"),M=d("../bar/uniform_text").resizeText;ne.exports=function(e){var a=e._fullLayout._funnelarealayer.selectAll(".trace");M(e,a,"funnelarea"),a.each(function(n){var r=n[0],t=r.trace,f=w.select(this);f.style({opacity:t.opacity}),f.selectAll("path.surface").each(function(o){w.select(this).call(v,o,t)})})}},{"../bar/uniform_text":664,"../pie/style_one":912,"@plotly/d3":58}],792:[function(d,ne,ae){var w=d("../scatter/attributes"),v=d("../../plots/attributes"),M=d("../../plots/font_attributes"),T=d("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=d("../../plots/template_attributes").hovertemplateAttrs,a=d("../../plots/template_attributes").texttemplateAttrs,n=d("../../components/colorscale/attributes"),r=d("../../lib/extend").extendFlat;ne.exports=r({z:{valType:"data_array",editType:"calc"},x:r({},w.x,{impliedEdits:{xtype:"array"}}),x0:r({},w.x0,{impliedEdits:{xtype:"scaled"}}),dx:r({},w.dx,{impliedEdits:{xtype:"scaled"}}),y:r({},w.y,{impliedEdits:{ytype:"array"}}),y0:r({},w.y0,{impliedEdits:{ytype:"scaled"}}),dy:r({},w.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:r({},w.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:r({},w.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:r({},w.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:r({},w.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:r({},w.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:r({},w.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:e(),texttemplate:a({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:M({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:r({},v.showlegend,{dflt:!1})},{transforms:void 0},n("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../scatter/attributes":927}],793:[function(d,ne,ae){var w=d("../../registry"),v=d("../../lib"),M=d("../../plots/cartesian/axes"),T=d("../../plots/cartesian/align_period"),e=d("../histogram2d/calc"),a=d("../../components/colorscale/calc"),n=d("./convert_column_xyz"),r=d("./clean_2d_array"),t=d("./interp2d"),f=d("./find_empties"),o=d("./make_bound_array"),i=d("../../constants/numerical").BADNUM;ne.exports=function(c,b){var l=M.getFromId(c,b.xaxis||"x"),_=M.getFromId(c,b.yaxis||"y"),s=w.traceIs(b,"contour"),A=w.traceIs(b,"histogram"),m=w.traceIs(b,"gl2d"),h=s?"best":b.zsmooth,x,u,L,S,k,P,z,I,D,R,O;if(l._minDtick=0,_._minDtick=0,A)O=e(c,b),S=O.orig_x,x=O.x,u=O.x0,L=O.dx,I=O.orig_y,k=O.y,P=O.y0,z=O.dy,D=O.z;else{var F=b.z;v.isArray1D(F)?(n(b,l,_,"x","y",["z"]),x=b._x,k=b._y,F=b._z):(S=b.x?l.makeCalcdata(b,"x"):[],I=b.y?_.makeCalcdata(b,"y"):[],x=T(b,l,"x",S).vals,k=T(b,_,"y",I).vals,b._x=x,b._y=k),u=b.x0,L=b.dx,P=b.y0,z=b.dy,D=r(F,b,l,_)}(l.rangebreaks||_.rangebreaks)&&(D=p(x,k,D),A||(x=g(x),k=g(k),b._x=x,b._y=k)),!A&&(s||b.connectgaps)&&(b._emptypoints=f(D),t(D,b._emptypoints));function V(Q){h=b._input.zsmooth=b.zsmooth=!1,v.warn('cannot use zsmooth: "fast": '+Q)}if(h==="fast"){if(l.type==="log"||_.type==="log")V("log axis found");else if(!A){if(x.length){var G=(x[x.length-1]-x[0])/(x.length-1),J=Math.abs(G/100);for(R=0;R<x.length-1;R++)if(Math.abs(x[R+1]-x[R]-G)>J){V("x scale is not linear");break}}if(k.length&&h==="fast"){var Z=(k[k.length-1]-k[0])/(k.length-1),Y=Math.abs(Z/100);for(R=0;R<k.length-1;R++)if(Math.abs(k[R+1]-k[R]-Z)>Y){V("y scale is not linear");break}}}}var j=v.maxRowLength(D),re=b.xtype==="scaled"?"":x,se=o(b,re,u,L,j,l),oe=b.ytype==="scaled"?"":k,N=o(b,oe,P,z,D.length,_);m||(b._extremes[l._id]=M.findExtremes(l,se),b._extremes[_._id]=M.findExtremes(_,N));var U={x:se,y:N,z:D,text:b._text||b.text,hovertext:b._hovertext||b.hovertext};if(b.xperiodalignment&&S&&(U.orig_x=S),b.yperiodalignment&&I&&(U.orig_y=I),re&&re.length===se.length-1&&(U.xCenter=re),oe&&oe.length===N.length-1&&(U.yCenter=oe),A&&(U.xRanges=O.xRanges,U.yRanges=O.yRanges,U.pts=O.pts),s||a(c,b,{vals:D,cLetter:"z"}),s&&b.contours&&b.contours.coloring==="heatmap"){var q={type:b.type==="contour"?"heatmap":"histogram2d",xcalendar:b.xcalendar,ycalendar:b.ycalendar};U.xfill=o(q,re,u,L,j,l),U.yfill=o(q,oe,P,z,D.length,_)}return[U]};function g(y){for(var c=[],b=y.length,l=0;l<b;l++){var _=y[l];_!==i&&c.push(_)}return c}function p(y,c,b){for(var l=[],_=-1,s=0;s<b.length;s++)if(c[s]!==i){_++,l[_]=[];for(var A=0;A<b[s].length;A++)y[A]!==i&&l[_].push(b[s][A])}return l}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../../registry":638,"../histogram2d/calc":826,"./clean_2d_array":794,"./convert_column_xyz":796,"./find_empties":798,"./interp2d":801,"./make_bound_array":803}],794:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("../../lib"),M=d("../../constants/numerical").BADNUM;ne.exports=function(e,a,n,r){var t,f,o,i,g,p;function y(A){if(!!w(A))return+A}if(a&&a.transpose){for(t=0,g=0;g<e.length;g++)t=Math.max(t,e[g].length);if(t===0)return!1;o=function(A){return A.length},i=function(A,m,h){return(A[h]||[])[m]}}else t=e.length,o=function(A,m){return A[m].length},i=function(A,m,h){return(A[m]||[])[h]};var c=function(A,m,h){return m===M||h===M?M:i(A,m,h)};function b(A){if(a&&a.type!=="carpet"&&a.type!=="contourcarpet"&&A&&A.type==="category"&&a["_"+A._id.charAt(0)].length){var m=A._id.charAt(0),h={},x=a["_"+m+"CategoryMap"]||a[m];for(g=0;g<x.length;g++)h[x[g]]=g;return function(u){var L=h[A._categories[u]];return L+1?L:M}}else return v.identity}var l=b(n),_=b(r);r&&r.type==="category"&&(t=r._categories.length);var s=new Array(t);for(g=0;g<t;g++)for(n&&n.type==="category"?f=n._categories.length:f=o(e,g),s[g]=new Array(f),p=0;p<f;p++)s[g][p]=y(c(e,_(g),l(p)));return s}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],795:[function(d,ne,ae){ne.exports={min:"zmin",max:"zmax"}},{}],796:[function(d,ne,ae){var w=d("../../lib"),v=d("../../constants/numerical").BADNUM,M=d("../../plots/cartesian/align_period");ne.exports=function(e,a,n,r,t,f){var o=e._length,i=a.makeCalcdata(e,r),g=n.makeCalcdata(e,t);i=M(e,a,r,i).vals,g=M(e,n,t,g).vals;var p=e.text,y=p!==void 0&&w.isArray1D(p),c=e.hovertext,b=c!==void 0&&w.isArray1D(c),l,_,s=w.distinctVals(i),A=s.vals,m=w.distinctVals(g),h=m.vals,x=[],u,L,S=h.length,k=A.length;for(l=0;l<f.length;l++)x[l]=w.init2dArray(S,k);y&&(u=w.init2dArray(S,k)),b&&(L=w.init2dArray(S,k));var P=w.init2dArray(S,k);for(l=0;l<o;l++)if(i[l]!==v&&g[l]!==v){var z=w.findBin(i[l]+s.minDiff/2,A),I=w.findBin(g[l]+m.minDiff/2,h);for(_=0;_<f.length;_++){var D=f[_],R=e[D],O=x[_];O[I][z]=R[l],P[I][z]=l}y&&(u[I][z]=p[l]),b&&(L[I][z]=c[l])}for(e["_"+r]=A,e["_"+t]=h,_=0;_<f.length;_++)e["_"+f[_]]=x[_];y&&(e._text=u),b&&(e._hovertext=L),a&&a.type==="category"&&(e["_"+r+"CategoryMap"]=A.map(function(F){return a._categories[F]})),n&&n.type==="category"&&(e["_"+t+"CategoryMap"]=h.map(function(F){return n._categories[F]})),e._after2before=P}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551}],797:[function(d,ne,ae){var w=d("../../lib"),v=d("./xyz_defaults"),M=d("./label_defaults"),T=d("../scatter/period_defaults"),e=d("./style_defaults"),a=d("../../components/colorscale/defaults"),n=d("./attributes");ne.exports=function(t,f,o,i){function g(y,c){return w.coerce(t,f,n,y,c)}var p=v(t,f,g,i);if(!p){f.visible=!1;return}T(t,f,i,g),g("xhoverformat"),g("yhoverformat"),g("text"),g("hovertext"),g("hovertemplate"),M(g,i),e(t,f,g,i),g("hoverongaps"),g("connectgaps",w.isArray1D(f.z)&&f.zsmooth!==!1),a(t,f,i,g,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":376,"../../lib":503,"../scatter/period_defaults":947,"./attributes":792,"./label_defaults":802,"./style_defaults":806,"./xyz_defaults":807}],798:[function(d,ne,ae){var w=d("../../lib").maxRowLength;ne.exports=function(M){var T=[],e={},a=[],n=M[0],r=[],t=[0,0,0],f=w(M),o,i,g,p,y,c,b,l;for(i=0;i<M.length;i++)for(o=r,r=n,n=M[i+1]||[],g=0;g<f;g++)r[g]===void 0&&(c=(r[g-1]!==void 0?1:0)+(r[g+1]!==void 0?1:0)+(o[g]!==void 0?1:0)+(n[g]!==void 0?1:0),c?(i===0&&c++,g===0&&c++,i===M.length-1&&c++,g===r.length-1&&c++,c<4&&(e[[i,g]]=[i,g,c]),T.push([i,g,c])):a.push([i,g]));for(;a.length;){for(b={},l=!1,y=a.length-1;y>=0;y--)p=a[y],i=p[0],g=p[1],c=((e[[i-1,g]]||t)[2]+(e[[i+1,g]]||t)[2]+(e[[i,g-1]]||t)[2]+(e[[i,g+1]]||t)[2])/20,c&&(b[p]=[i,g,c],a.splice(y,1),l=!0);if(!l)throw"findEmpties iterated with no new neighbors";for(p in b)e[p]=b[p],T.push(b[p])}return T.sort(function(_,s){return s[2]-_[2]})}},{"../../lib":503}],799:[function(d,ne,ae){var w=d("../../components/fx"),v=d("../../lib"),M=d("../../plots/cartesian/axes"),T=d("../../components/colorscale").extractOpts;ne.exports=function(a,n,r,t,f){f||(f={});var o=f.isContour,i=a.cd[0],g=i.trace,p=a.xa,y=a.ya,c=i.x,b=i.y,l=i.z,_=i.xCenter,s=i.yCenter,A=i.zmask,m=g.zhoverformat,h=c,x=b,u,L,S,k;if(a.index!==!1){try{S=Math.round(a.index[1]),k=Math.round(a.index[0])}catch{v.error("Error hovering on heatmap, pointNumber must be [row,col], found:",a.index);return}if(S<0||S>=l[0].length||k<0||k>l.length)return}else{if(w.inbox(n-c[0],n-c[c.length-1],0)>0||w.inbox(r-b[0],r-b[b.length-1],0)>0)return;if(o){var P;for(h=[2*c[0]-c[1]],P=1;P<c.length;P++)h.push((c[P]+c[P-1])/2);for(h.push([2*c[c.length-1]-c[c.length-2]]),x=[2*b[0]-b[1]],P=1;P<b.length;P++)x.push((b[P]+b[P-1])/2);x.push([2*b[b.length-1]-b[b.length-2]])}S=Math.max(0,Math.min(h.length-2,v.findBin(n,h))),k=Math.max(0,Math.min(x.length-2,v.findBin(r,x)))}var z=p.c2p(c[S]),I=p.c2p(c[S+1]),D=y.c2p(b[k]),R=y.c2p(b[k+1]),O,F;o?(O=i.orig_x||c,F=i.orig_y||b,I=z,u=O[S],R=D,L=F[k]):(O=i.orig_x||_||c,F=i.orig_y||s||b,u=_?O[S]:(O[S]+O[S+1])/2,L=s?F[k]:(F[k]+F[k+1])/2,p&&p.type==="category"&&(u=c[S]),y&&y.type==="category"&&(L=b[k]),g.zsmooth&&(z=I=p.c2p(u),D=R=y.c2p(L)));var V=l[k][S];if(A&&!A[k][S]&&(V=void 0),!(V===void 0&&!g.hoverongaps)){var G;Array.isArray(i.hovertext)&&Array.isArray(i.hovertext[k])?G=i.hovertext[k][S]:Array.isArray(i.text)&&Array.isArray(i.text[k])&&(G=i.text[k][S]);var J=T(g),Z={type:"linear",range:[J.min,J.max],hoverformat:m,_separators:p._separators,_numFormat:p._numFormat},Y=M.tickText(Z,V,"hover").text;return[v.extendFlat(a,{index:g._after2before?g._after2before[k][S]:[k,S],distance:a.maxHoverDistance,spikeDistance:a.maxSpikeDistance,x0:z,x1:I,y0:D,y1:R,xLabelVal:u,yLabelVal:L,zLabelVal:V,zLabel:Y,text:G})]}}},{"../../components/colorscale":378,"../../components/fx":406,"../../lib":503,"../../plots/cartesian/axes":554}],800:[function(d,ne,ae){ne.exports={attributes:d("./attributes"),supplyDefaults:d("./defaults"),calc:d("./calc"),plot:d("./plot"),colorbar:d("./colorbar"),style:d("./style"),hoverPoints:d("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:d("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":568,"./attributes":792,"./calc":793,"./colorbar":795,"./defaults":797,"./hover":799,"./plot":804,"./style":805}],801:[function(d,ne,ae){var w=d("../../lib"),v=.01,M=[[-1,0],[1,0],[0,-1],[0,1]];function T(a){return .5-.25*Math.min(1,a*.5)}ne.exports=function(n,r){var t=1,f;for(e(n,r),f=0;f<r.length&&!(r[f][2]<4);f++);for(r=r.slice(f),f=0;f<100&&t>v;f++)t=e(n,r,T(t));return t>v&&w.log("interp2d didn't converge quickly",t),n};function e(a,n,r){var t=0,f,o,i,g,p,y,c,b,l,_,s,A,m;for(g=0;g<n.length;g++){for(f=n[g],o=f[0],i=f[1],s=a[o][i],_=0,l=0,p=0;p<4;p++)y=M[p],c=a[o+y[0]],c&&(b=c[i+y[1]],b!==void 0&&(_===0?A=m=b:(A=Math.min(A,b),m=Math.max(m,b)),l++,_+=b));if(l===0)throw"iterateInterp2d order is wrong: no defined neighbors";a[o][i]=_/l,s===void 0?l<4&&(t=1):(a[o][i]=(1+r)*a[o][i]-r*s,m>A&&(t=Math.max(t,Math.abs(a[o][i]-s)/(m-A))))}return t}},{"../../lib":503}],802:[function(d,ne,ae){var w=d("../../lib");ne.exports=function(M,T){M("texttemplate");var e=w.extendFlat({},T.font,{color:"auto",size:"auto"});w.coerceFont(M,"textfont",e)}},{"../../lib":503}],803:[function(d,ne,ae){var w=d("../../registry"),v=d("../../lib").isArrayOrTypedArray;ne.exports=function(T,e,a,n,r,t){var f=[],o=w.traceIs(T,"contour"),i=w.traceIs(T,"histogram"),g=w.traceIs(T,"gl2d"),p,y,c,b=v(e)&&e.length>1;if(b&&!i&&t.type!=="category"){var l=e.length;if(l<=r){if(o||g)f=e.slice(0,r);else if(r===1)f=[e[0]-.5,e[0]+.5];else{for(f=[1.5*e[0]-.5*e[1]],c=1;c<l;c++)f.push((e[c-1]+e[c])*.5);f.push(1.5*e[l-1]-.5*e[l-2])}if(l<r){var _=f[f.length-1],s=_-f[f.length-2];for(c=l;c<r;c++)_+=s,f.push(_)}}else return o?e.slice(0,r):e.slice(0,r+1)}else{var A=T[t._id.charAt(0)+"calendar"];if(i)p=t.r2c(a,0,A);else if(v(e)&&e.length===1)p=e[0];else if(a===void 0)p=0;else{var m=t.type==="log"?t.d2c:t.r2c;p=m(a,0,A)}for(y=n||1,c=o||g?0:-.5;c<r;c++)f.push(p+y*c)}return f}},{"../../lib":503,"../../registry":638}],804:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("tinycolor2"),M=d("../../registry"),T=d("../../components/drawing"),e=d("../../plots/cartesian/axes"),a=d("../../lib"),n=d("../../lib/svg_text_utils"),r=d("../scatter/format_labels"),t=d("../../components/color"),f=d("../../components/colorscale").extractOpts,o=d("../../components/colorscale").makeColorScaleFuncFromTrace,i=d("../../constants/xmlns_namespaces"),g=d("../../constants/alignment"),p=g.LINE_SPACING,y="heatmap-label";function c(A){return A.selectAll("g."+y)}function b(A){c(A).remove()}ne.exports=function(A,m,h,x){var u=m.xaxis,L=m.yaxis;a.makeTraceGroups(x,h,"hm").each(function(S){var k=w.select(this),P=S[0],z=P.trace,I=z.xgap||0,D=z.ygap||0,R=P.z,O=P.x,F=P.y,V=P.xCenter,G=P.yCenter,J=M.traceIs(z,"contour"),Z=J?"best":z.zsmooth,Y=R.length,j=a.maxRowLength(R),re=!1,se=!1,oe,N,U,q,Q,W,X,ee;for(W=0;oe===void 0&&W<O.length-1;)oe=u.c2p(O[W]),W++;for(W=O.length-1;N===void 0&&W>0;)N=u.c2p(O[W]),W--;for(N<oe&&(U=N,N=oe,oe=U,re=!0),W=0;q===void 0&&W<F.length-1;)q=L.c2p(F[W]),W++;for(W=F.length-1;Q===void 0&&W>0;)Q=L.c2p(F[W]),W--;if(Q<q&&(U=q,q=Q,Q=U,se=!0),J&&(V=O,G=F,O=P.xfill,F=P.yfill),Z!=="fast"){var te=Z==="best"?0:.5;oe=Math.max(-te*u._length,oe),N=Math.min((1+te)*u._length,N),q=Math.max(-te*L._length,q),Q=Math.min((1+te)*L._length,Q)}var ie=Math.round(N-oe),le=Math.round(Q-q),ge=ie<=0||le<=0;if(ge){var fe=k.selectAll("image").data([]);fe.exit().remove(),b(k);return}var pe,ye;Z==="fast"?(pe=j,ye=Y):(pe=ie,ye=le);var Te=document.createElement("canvas");Te.width=pe,Te.height=ye;var _e=Te.getContext("2d"),De=o(z,{noNumericCheck:!0,returnArray:!0}),Be,Ue;Z==="fast"?(Be=re?function(Pr){return j-1-Pr}:a.identity,Ue=se?function(Pr){return Y-1-Pr}:a.identity):(Be=function(Pr){return a.constrain(Math.round(u.c2p(O[Pr])-oe),0,ie)},Ue=function(Pr){return a.constrain(Math.round(L.c2p(F[Pr])-q),0,le)});var xe=Ue(0),Pe=[xe,xe],Ve=re?0:1,Qe=se?0:1,Fe=0,Le=0,Ne=0,dt=0,Dt,Xt,At,zt,Ut;function Ct(Pr,wr){if(Pr!==void 0){var Nr=De(Pr);return Nr[0]=Math.round(Nr[0]),Nr[1]=Math.round(Nr[1]),Nr[2]=Math.round(Nr[2]),Fe+=wr,Le+=Nr[0]*wr,Ne+=Nr[1]*wr,dt+=Nr[2]*wr,Nr}return[0,0,0,0]}function Mt(Pr,wr,Nr,Sn){var _n=Pr[Nr.bin0];if(_n===void 0)return Ct(void 0,1);var Wn=Pr[Nr.bin1],Ln=wr[Nr.bin0],Xn=wr[Nr.bin1],Kn=Wn-_n||0,Aa=Ln-_n||0,Ta;return Wn===void 0?Xn===void 0?Ta=0:Ln===void 0?Ta=2*(Xn-_n):Ta=(2*Xn-Ln-_n)*2/3:Xn===void 0?Ln===void 0?Ta=0:Ta=(2*_n-Wn-Ln)*2/3:Ln===void 0?Ta=(2*Xn-Wn-_n)*2/3:Ta=Xn+_n-Wn-Ln,Ct(_n+Nr.frac*Kn+Sn.frac*(Aa+Nr.frac*Ta))}if(Z){var rt=0,ct;try{ct=new Uint8Array(ie*le*4)}catch{ct=new Array(ie*le*4)}if(Z==="best"){var Ze=V||O,ke=G||F,Ge=new Array(Ze.length),Je=new Array(ke.length),ot=new Array(ie),Pt=V?_:l,_t=G?_:l,Bt,qt,Ot;for(W=0;W<Ze.length;W++)Ge[W]=Math.round(u.c2p(Ze[W])-oe);for(W=0;W<ke.length;W++)Je[W]=Math.round(L.c2p(ke[W])-q);for(W=0;W<ie;W++)ot[W]=Pt(W,Ge);for(X=0;X<le;X++)for(Bt=_t(X,Je),qt=R[Bt.bin0],Ot=R[Bt.bin1],W=0;W<ie;W++,rt+=4)Ut=Mt(qt,Ot,ot[W],Bt),s(ct,rt,Ut)}else for(X=0;X<Y;X++)for(zt=R[X],Pe=Ue(X),W=0;W<ie;W++)Ut=Ct(zt[W],1),rt=(Pe*ie+Be(W))*4,s(ct,rt,Ut);var $t=_e.createImageData(ie,le);try{$t.data.set(ct)}catch{var rr=$t.data,er=rr.length;for(X=0;X<er;X++)rr[X]=ct[X]}_e.putImageData($t,0,0)}else{var pr=Math.floor(I/2),Xr=Math.floor(D/2);for(X=0;X<Y;X++)if(zt=R[X],Pe.reverse(),Pe[Qe]=Ue(X+1),!(Pe[0]===Pe[1]||Pe[0]===void 0||Pe[1]===void 0))for(Xt=Be(0),Dt=[Xt,Xt],W=0;W<j;W++)Dt.reverse(),Dt[Ve]=Be(W+1),!(Dt[0]===Dt[1]||Dt[0]===void 0||Dt[1]===void 0)&&(At=zt[W],Ut=Ct(At,(Dt[1]-Dt[0])*(Pe[1]-Pe[0])),_e.fillStyle="rgba("+Ut.join(",")+")",_e.fillRect(Dt[0]+pr,Pe[0]+Xr,Dt[1]-Dt[0]-I,Pe[1]-Pe[0]-D))}Le=Math.round(Le/Fe),Ne=Math.round(Ne/Fe),dt=Math.round(dt/Fe);var hn=v("rgb("+Le+","+Ne+","+dt+")");A._hmpixcount=(A._hmpixcount||0)+Fe,A._hmlumcount=(A._hmlumcount||0)+Fe*hn.getLuminance();var Qr=k.selectAll("image").data(S);Qr.enter().append("svg:image").attr({xmlns:i.svg,preserveAspectRatio:"none"}),Qr.attr({height:le,width:ie,x:oe,y:q,"xlink:href":Te.toDataURL("image/png")}),b(k);var nt=z.texttemplate;if(nt){var Ht=f(z),Kt={type:"linear",range:[Ht.min,Ht.max],_separators:u._separators,_numFormat:u._numFormat},Gt=z.type==="histogram2dcontour",br=z.type==="contour",tt=br?1:0,je=br?Y-1:Y,st=br?1:0,ft=br?j-1:j,Me=[];for(W=tt;W<je;W++){var Se;if(br)Se=P.y[W];else if(Gt){if(W===0||W===Y-1)continue;Se=P.y[W]}else if(P.yCenter)Se=P.yCenter[W];else{if(W+1===Y&&P.y[W+1]===void 0)continue;Se=(P.y[W]+P.y[W+1])/2}var Ke=Math.round(L.c2p(Se));if(!(0>Ke||Ke>L._length))for(X=st;X<ft;X++){var Xe;if(br)Xe=P.x[X];else if(Gt){if(X===0||X===j-1)continue;Xe=P.x[X]}else if(P.xCenter)Xe=P.xCenter[X];else{if(X+1===j&&P.x[X+1]===void 0)continue;Xe=(P.x[X]+P.x[X+1])/2}var it=Math.round(u.c2p(Xe));if(!(0>it||it>u._length)){var pt=r({x:Xe,y:Se},z,A._fullLayout);pt.x=Xe,pt.y=Se;var vt=P.z[W][X];vt===void 0?(pt.z="",pt.zLabel=""):(pt.z=vt,pt.zLabel=e.tickText(Kt,vt,"hover").text);var St=P.text&&P.text[W]&&P.text[W][X];(St===void 0||St===!1)&&(St=""),pt.text=St;var kt=a.texttemplateString(nt,pt,A._fullLayout._d3locale,pt,z._meta||{});if(!!kt){var Nt=kt.split("<br>"),nr=Nt.length,fr=0;for(ee=0;ee<nr;ee++)fr=Math.max(fr,Nt[ee].length);Me.push({l:nr,c:fr,t:kt,x:it,y:Ke,z:vt})}}}}var Hr=z.textfont,Er=Hr.family,_r=Hr.size,en=A._fullLayout.font.size;if(!_r||_r==="auto"){var dr=1/0,xr=1/0,Ur=0,Yr=0;for(ee=0;ee<Me.length;ee++){var Ar=Me[ee];if(Ur=Math.max(Ur,Ar.l),Yr=Math.max(Yr,Ar.c),ee<Me.length-1){var et=Me[ee+1],Lt=Math.abs(et.x-Ar.x),Zt=Math.abs(et.y-Ar.y);Lt&&(dr=Math.min(dr,Lt)),Zt&&(xr=Math.min(xr,Zt))}}!isFinite(dr)||!isFinite(xr)?_r=en:(dr-=I,xr-=D,dr/=Yr,xr/=Ur,dr/=p/2,xr/=p,_r=Math.min(Math.floor(dr),Math.floor(xr),en))}if(_r<=0||!isFinite(_r))return;var sr=function(Pr){return Pr.x},Ir=function(Pr){return Pr.y-_r*(Pr.l*p/2-1)},Zr=c(k).data(Me);Zr.enter().append("g").classed(y,1).append("text").attr("text-anchor","middle").each(function(Pr){var wr=w.select(this),Nr=Hr.color;(!Nr||Nr==="auto")&&(Nr=t.contrast("rgba("+De(Pr.z).join()+")")),wr.attr("data-notex",1).call(n.positionText,sr(Pr),Ir(Pr)).call(T.font,Er,_r,Nr).text(Pr.t).call(n.convertToTspans,A)})}})};function l(A,m){var h=m.length-2,x=a.constrain(a.findBin(A,m),0,h),u=m[x],L=m[x+1],S=a.constrain(x+(A-u)/(L-u)-.5,0,h),k=Math.round(S),P=Math.abs(S-k);return!S||S===h||!P?{bin0:k,bin1:k,frac:0}:{bin0:k,frac:P,bin1:Math.round(k+P/(S-k))}}function _(A,m){var h=m.length-1,x=a.constrain(a.findBin(A,m),0,h),u=m[x],L=m[x+1],S=(A-u)/(L-u)||0;return S<=0?{bin0:x,bin1:x,frac:0}:S<.5?{bin0:x,bin1:x+1,frac:S}:{bin0:x+1,bin1:x,frac:1-S}}function s(A,m,h){A[m]=h[0],A[m+1]=h[1],A[m+2]=h[2],A[m+3]=Math.round(h[3]*255)}},{"../../components/color":366,"../../components/colorscale":378,"../../components/drawing":388,"../../constants/alignment":471,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"../scatter/format_labels":936,"@plotly/d3":58,tinycolor2:312}],805:[function(d,ne,ae){var w=d("@plotly/d3");ne.exports=function(M){w.select(M).selectAll(".hm image").style("opacity",function(T){return T.trace.opacity})}},{"@plotly/d3":58}],806:[function(d,ne,ae){ne.exports=function(v,M,T){var e=T("zsmooth");e===!1&&(T("xgap"),T("ygap")),T("zhoverformat")}},{}],807:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("../../lib"),M=d("../../registry");ne.exports=function(n,r,t,f,o,i){var g=t("z");o=o||"x",i=i||"y";var p,y;if(g===void 0||!g.length)return 0;if(v.isArray1D(n.z)){p=t(o),y=t(i);var c=v.minRowLength(p),b=v.minRowLength(y);if(c===0||b===0)return 0;r._length=Math.min(c,b,g.length)}else{if(p=T(o,t),y=T(i,t),!e(g))return 0;t("transpose"),r._length=null}if(n.type==="heatmapgl")return!0;var l=M.getComponentMethod("calendars","handleTraceDefaults");return l(n,r,[o,i],f),!0};function T(a,n){var r=n(a),t=r?n(a+"type","array"):"scaled";return t==="scaled"&&(n(a+"0"),n("d"+a)),r}function e(a){for(var n=!0,r=!1,t=!1,f,o=0;o<a.length;o++){if(f=a[o],!v.isArrayOrTypedArray(f)){n=!1;break}f.length>0&&(r=!0);for(var i=0;i<f.length;i++)if(w(f[i])){t=!0;break}}return n&&r&&t}},{"../../lib":503,"../../registry":638,"fast-isnumeric":190}],808:[function(d,ne,ae){for(var w=d("../heatmap/attributes"),v=d("../../components/colorscale/attributes"),M=d("../../lib/extend").extendFlat,T=d("../../plot_api/edit_types").overrideAll,e=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],a={},n=0;n<e.length;n++){var r=e[n];a[r]=w[r]}a.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},M(a,v("",{cLetter:"z",autoColorDflt:!1})),ne.exports=T(a,"calc","nested")},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../heatmap/attributes":792}],809:[function(d,ne,ae){var w=d("../../../stackgl_modules").gl_heatmap2d,v=d("../../plots/cartesian/axes"),M=d("../../lib/str2rgbarray");function T(r,t){this.scene=r,this.uid=t,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=w(r.glplot,this.options),this.heatmap._trace=this}var e=T.prototype;e.handlePick=function(r){var t=this.options,f=t.shape,o=r.pointId,i=o%f[0],g=Math.floor(o/f[0]),p=o;return{trace:this,dataCoord:r.dataCoord,traceCoord:[t.x[i],t.y[g],t.z[p]],textLabel:this.textLabels[o],name:this.name,pointIndex:[g,i],hoverinfo:this.hoverinfo}},e.update=function(r,t){var f=t[0];this.index=r.index,this.name=r.name,this.hoverinfo=r.hoverinfo;var o=f.z;this.options.z=[].concat.apply([],o);var i=o[0].length,g=o.length;this.options.shape=[i,g],this.options.x=f.x,this.options.y=f.y,this.options.zsmooth=r.zsmooth;var p=a(r);this.options.colorLevels=p.colorLevels,this.options.colorValues=p.colorValues,this.textLabels=[].concat.apply([],r.text),this.heatmap.update(this.options);var y=this.scene.xaxis,c=this.scene.yaxis,b,l;r.zsmooth===!1&&(b={ppad:f.x[1]-f.x[0]},l={ppad:f.y[1]-f.y[0]}),r._extremes[y._id]=v.findExtremes(y,f.x,b),r._extremes[c._id]=v.findExtremes(c,f.y,l)},e.dispose=function(){this.heatmap.dispose()};function a(r){for(var t=r.colorscale,f=r.zmin,o=r.zmax,i=t.length,g=new Array(i),p=new Array(4*i),y=0;y<i;y++){var c=t[y],b=M(c[1]);g[y]=f+c[0]*(o-f);for(var l=0;l<4;l++)p[4*y+l]=b[l]}return{colorLevels:g,colorValues:p}}function n(r,t,f){var o=new T(r,t.uid);return o.update(t,f),o}ne.exports=n},{"../../../stackgl_modules":1124,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554}],810:[function(d,ne,ae){var w=d("../../lib"),v=d("../heatmap/xyz_defaults"),M=d("../../components/colorscale/defaults"),T=d("./attributes");ne.exports=function(a,n,r,t){function f(i,g){return w.coerce(a,n,T,i,g)}var o=v(a,n,f,t);if(!o){n.visible=!1;return}f("text"),f("zsmooth"),M(a,n,t,f,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":376,"../../lib":503,"../heatmap/xyz_defaults":807,"./attributes":808}],811:[function(d,ne,ae){ne.exports={attributes:d("./attributes"),supplyDefaults:d("./defaults"),colorbar:d("../heatmap/colorbar"),calc:d("../heatmap/calc"),plot:d("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:d("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":596,"../heatmap/calc":793,"../heatmap/colorbar":795,"./attributes":808,"./convert":809,"./defaults":810}],812:[function(d,ne,ae){var w=d("../bar/attributes"),v=d("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=d("../../plots/template_attributes").hovertemplateAttrs,T=d("../../plots/template_attributes").texttemplateAttrs,e=d("../../plots/font_attributes"),a=d("./bin_attributes"),n=d("./constants"),r=d("../../lib/extend").extendFlat;ne.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:v("x"),yhoverformat:v("y"),text:r({},w.text,{}),hovertext:r({},w.hovertext,{}),orientation:w.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:a("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:a("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:M({},{keys:n.eventDataKeys}),texttemplate:T({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:r({},w.textposition,{arrayOk:!1}),textfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:w.insidetextanchor,textangle:w.textangle,cliponaxis:w.cliponaxis,constraintext:w.constraintext,marker:w.marker,offsetgroup:w.offsetgroup,alignmentgroup:w.alignmentgroup,selected:w.selected,unselected:w.unselected,_deprecated:{bardir:w._deprecated.bardir}}},{"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../bar/attributes":648,"./bin_attributes":814,"./constants":818}],813:[function(d,ne,ae){ne.exports=function(v,M){for(var T=v.length,e=0,a=0;a<T;a++)M[a]?(v[a]/=M[a],e+=v[a]):v[a]=null;return e}},{}],814:[function(d,ne,ae){ne.exports=function(v,M){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],815:[function(d,ne,ae){var w=d("fast-isnumeric");ne.exports={count:function(v,M,T){return T[v]++,1},sum:function(v,M,T,e){var a=e[M];return w(a)?(a=Number(a),T[v]+=a,a):0},avg:function(v,M,T,e,a){var n=e[M];return w(n)&&(n=Number(n),T[v]+=n,a[v]++),0},min:function(v,M,T,e){var a=e[M];if(w(a))if(a=Number(a),w(T[v])){if(T[v]>a){var n=a-T[v];return T[v]=a,n}}else return T[v]=a,a;return 0},max:function(v,M,T,e){var a=e[M];if(w(a))if(a=Number(a),w(T[v])){if(T[v]<a){var n=a-T[v];return T[v]=a,n}}else return T[v]=a,a;return 0}}},{"fast-isnumeric":190}],816:[function(d,ne,ae){var w=d("../../constants/numerical"),v=w.ONEAVGYEAR,M=w.ONEAVGMONTH,T=w.ONEDAY,e=w.ONEHOUR,a=w.ONEMIN,n=w.ONESEC,r=d("../../plots/cartesian/axes").tickIncrement;ne.exports=function(p,y,c,b,l){var _=-1.1*y,s=-.1*y,A=p-s,m=c[0],h=c[1],x=Math.min(t(m+s,m+A,b,l),t(h+s,h+A,b,l)),u=Math.min(t(m+_,m+s,b,l),t(h+_,h+s,b,l)),L,S;if(x>u&&u<Math.abs(h-m)/4e3?(L=x,S=!1):(L=Math.min(x,u),S=!0),b.type==="date"&&L>T){var k=L===v?1:6,P=L===v?"M12":"M1";return function(z,I){var D=b.c2d(z,v,l),R=D.indexOf("-",k);R>0&&(D=D.substr(0,R));var O=b.d2c(D,0,l);if(O<z){var F=r(O,P,!1,l);(O+F)/2<z+p&&(O=F)}return I&&S?r(O,P,!0,l):O}}return function(z,I){var D=L*Math.round(z/L);return D+L/10<z&&D+L*.9<z+p&&(D+=L),I&&S&&(D-=L),D}};function t(g,p,y,c){if(g*p<=0)return 1/0;for(var b=Math.abs(p-g),l=y.type==="date",_=f(b,l),s=0;s<10;s++){var A=f(_*80,l);if(_===A)break;if(o(A,g,p,l,y,c))_=A;else break}return _}function f(g,p){return p&&g>n?g>T?g>v*1.1?v:g>M*1.1?M:T:g>e?e:g>a?a:n:Math.pow(10,Math.floor(Math.log(g)/Math.LN10))}function o(g,p,y,c,b,l){if(c&&g>T){var _=i(p,b,l),s=i(y,b,l),A=g===v?0:1;return _[A]!==s[A]}return Math.floor(y/g)-Math.floor(p/g)>.1}function i(g,p,y){var c=p.c2d(g,v,y).split("-");return c[0]===""&&(c.unshift(),c[0]="-"+c[0]),c}},{"../../constants/numerical":479,"../../plots/cartesian/axes":554}],817:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("../../lib"),M=d("../../registry"),T=d("../../plots/cartesian/axes"),e=d("../bar/arrays_to_calcdata"),a=d("./bin_functions"),n=d("./norm_functions"),r=d("./average"),t=d("./bin_label_vals");function f(y,c){var b=[],l=[],_=c.orientation==="h",s=T.getFromId(y,_?c.yaxis:c.xaxis),A=_?"y":"x",m={x:"y",y:"x"}[A],h=c[A+"calendar"],x=c.cumulative,u,L=o(y,c,s,A),S=L[0],k=L[1],P=typeof S.size=="string",z=[],I=P?z:S,D=[],R=[],O=[],F=0,V=c.histnorm,G=c.histfunc,J=V.indexOf("density")!==-1,Z,Y,j;x.enabled&&J&&(V=V.replace(/ ?density$/,""),J=!1);var re=G==="max"||G==="min",se=re?null:0,oe=a.count,N=n[V],U=!1,q=function(Ue){return s.r2c(Ue,0,h)},Q;for(v.isArrayOrTypedArray(c[m])&&G!=="count"&&(Q=c[m],U=G==="avg",oe=a[G]),u=q(S.start),Y=q(S.end)+(u-T.tickIncrement(u,S.size,!1,h))/1e6;u<Y&&b.length<1e6&&(Z=T.tickIncrement(u,S.size,!1,h),b.push((u+Z)/2),l.push(se),O.push([]),z.push(u),J&&D.push(1/(Z-u)),U&&R.push(0),!(Z<=u));)u=Z;z.push(u),!P&&s.type==="date"&&(I={start:q(I.start),end:q(I.end),size:I.size}),y._fullLayout._roundFnOpts||(y._fullLayout._roundFnOpts={});var W=c["_"+A+"bingroup"],X={leftGap:1/0,rightGap:1/0};W&&(y._fullLayout._roundFnOpts[W]||(y._fullLayout._roundFnOpts[W]=X),X=y._fullLayout._roundFnOpts[W]);var ee=l.length,te=!0,ie=X.leftGap,le=X.rightGap,ge={};for(u=0;u<k.length;u++){var fe=k[u];j=v.findBin(fe,I),j>=0&&j<ee&&(F+=oe(j,u,l,Q,R),te&&O[j].length&&fe!==k[O[j][0]]&&(te=!1),O[j].push(u),ge[u]=j,ie=Math.min(ie,fe-z[j]),le=Math.min(le,z[j+1]-fe))}X.leftGap=ie,X.rightGap=le;var pe;te||(pe=function(Ue,xe){return function(){var Pe=y._fullLayout._roundFnOpts[W];return t(Pe.leftGap,Pe.rightGap,z,s,h)(Ue,xe)}}),U&&(F=r(l,R)),N&&N(l,F,D),x.enabled&&p(l,x.direction,x.currentbin);var ye=Math.min(b.length,l.length),Te=[],_e=0,De=ye-1;for(u=0;u<ye;u++)if(l[u]){_e=u;break}for(u=ye-1;u>=_e;u--)if(l[u]){De=u;break}for(u=_e;u<=De;u++)if(w(b[u])&&w(l[u])){var Be={p:b[u],s:l[u],b:0};x.enabled||(Be.pts=O[u],te?Be.ph0=Be.ph1=O[u].length?k[O[u][0]]:b[u]:(c._computePh=!0,Be.ph0=pe(z[u]),Be.ph1=pe(z[u+1],!0))),Te.push(Be)}return Te.length===1&&(Te[0].width1=T.tickIncrement(Te[0].p,S.size,!1,h)-Te[0].p),e(Te,c),v.isArrayOrTypedArray(c.selectedpoints)&&v.tagSelected(Te,c,ge),Te}function o(y,c,b,l,_){var s=l+"bins",A=y._fullLayout,m=c["_"+l+"bingroup"],h=A._histogramBinOpts[m],x=A.barmode==="overlay",u,L,S,k,P,z,I,D=function(fe){return b.r2c(fe,0,k)},R=function(fe){return b.c2r(fe,0,k)},O=b.type==="date"?function(fe){return fe||fe===0?v.cleanDate(fe,null,k):null}:function(fe){return w(fe)?Number(fe):null};function F(fe,pe,ye){pe[fe+"Found"]?(pe[fe]=O(pe[fe]),pe[fe]===null&&(pe[fe]=ye[fe])):(z[fe]=pe[fe]=ye[fe],v.nestedProperty(L[0],s+"."+fe).set(ye[fe]))}if(c["_"+l+"autoBinFinished"])delete c["_"+l+"autoBinFinished"];else{L=h.traces;var V=[],G=!0,J=!1,Z=!1;for(u=0;u<L.length;u++)if(S=L[u],S.visible){var Y=h.dirs[u];P=S["_"+Y+"pos0"]=b.makeCalcdata(S,Y),V=v.concat(V,P),delete S["_"+l+"autoBinFinished"],c.visible===!0&&(G?G=!1:(delete S._autoBin,S["_"+l+"autoBinFinished"]=1),M.traceIs(S,"2dMap")&&(J=!0),S.type==="histogram2dcontour"&&(Z=!0))}k=L[0][l+"calendar"];var j=T.autoBin(V,b,h.nbins,J,k,h.sizeFound&&h.size),re=L[0]._autoBin={};if(z=re[h.dirs[0]]={},Z&&(h.size||(j.start=R(T.tickIncrement(D(j.start),j.size,!0,k))),h.end===void 0&&(j.end=R(T.tickIncrement(D(j.end),j.size,!1,k)))),x&&!M.traceIs(c,"2dMap")&&j._dataSpan===0&&b.type!=="category"&&b.type!=="multicategory"){if(_)return[j,P,!0];j=i(y,c,b,l,s)}I=S.cumulative||{},I.enabled&&I.currentbin!=="include"&&(I.direction==="decreasing"?j.start=R(T.tickIncrement(D(j.start),j.size,!0,k)):j.end=R(T.tickIncrement(D(j.end),j.size,!1,k))),h.size=j.size,h.sizeFound||(z.size=j.size,v.nestedProperty(L[0],s+".size").set(j.size)),F("start",h,j),F("end",h,j)}P=c["_"+l+"pos0"],delete c["_"+l+"pos0"];var se=c._input[s]||{},oe=v.extendFlat({},h),N=h.start,U=b.r2l(se.start),q=U!==void 0;if((h.startFound||q)&&U!==b.r2l(N)){var Q=q?U:v.aggNums(Math.min,null,P),W={type:b.type==="category"||b.type==="multicategory"?"linear":b.type,r2l:b.r2l,dtick:h.size,tick0:N,calendar:k,range:[Q,T.tickIncrement(Q,h.size,!1,k)].map(b.l2r)},X=T.tickFirst(W);X>b.r2l(Q)&&(X=T.tickIncrement(X,h.size,!0,k)),oe.start=b.l2r(X),q||v.nestedProperty(c,s+".start").set(oe.start)}var ee=h.end,te=b.r2l(se.end),ie=te!==void 0;if((h.endFound||ie)&&te!==b.r2l(ee)){var le=ie?te:v.aggNums(Math.max,null,P);oe.end=b.l2r(le),ie||v.nestedProperty(c,s+".start").set(oe.end)}var ge="autobin"+l;return c._input[ge]===!1&&(c._input[s]=v.extendFlat({},c[s]||{}),delete c._input[ge],delete c[ge]),[oe,P]}function i(y,c,b,l,_){var s=y._fullLayout,A=g(y,c),m=!1,h=1/0,x=[c],u,L,S;for(u=0;u<A.length;u++)if(L=A[u],L===c)m=!0;else if(!m)S=s._histogramBinOpts[L["_"+l+"bingroup"]],h=Math.min(h,S.size||L[_].size);else{var k=o(y,L,b,l,!0),P=k[0],z=k[2];L["_"+l+"autoBinFinished"]=1,L["_"+l+"pos0"]=k[1],z?x.push(L):h=Math.min(h,P.size)}var I=new Array(x.length);for(u=0;u<x.length;u++)for(var D=x[u]["_"+l+"pos0"],R=0;R<D.length;R++)if(D[R]!==void 0){I[u]=D[R];break}for(isFinite(h)||(h=v.distinctVals(I).minDiff),u=0;u<x.length;u++){L=x[u];var O=L[l+"calendar"],F={start:b.c2r(I[u]-h/2,0,O),end:b.c2r(I[u]+h/2,0,O),size:h};L._input[_]=L[_]=F,S=s._histogramBinOpts[L["_"+l+"bingroup"]],S&&v.extendFlat(S,F)}return c[_]}function g(y,c){for(var b=c.xaxis,l=c.yaxis,_=c.orientation,s=[],A=y._fullData,m=0;m<A.length;m++){var h=A[m];h.type==="histogram"&&h.visible===!0&&h.orientation===_&&h.xaxis===b&&h.yaxis===l&&s.push(h)}return s}function p(y,c,b){var l,_,s;function A(h){s=y[h],y[h]/=2}function m(h){_=y[h],y[h]=s+_/2,s+=_}if(b==="half")if(c==="increasing")for(A(0),l=1;l<y.length;l++)m(l);else for(A(y.length-1),l=y.length-2;l>=0;l--)m(l);else if(c==="increasing"){for(l=1;l<y.length;l++)y[l]+=y[l-1];b==="exclude"&&(y.unshift(0),y.pop())}else{for(l=y.length-2;l>=0;l--)y[l]+=y[l+1];b==="exclude"&&(y.push(0),y.shift())}}ne.exports={calc:f,calcAllAutoBins:o}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"../bar/arrays_to_calcdata":647,"./average":813,"./bin_functions":815,"./bin_label_vals":816,"./norm_functions":824,"fast-isnumeric":190}],818:[function(d,ne,ae){ne.exports={eventDataKeys:["binNumber"]}},{}],819:[function(d,ne,ae){var w=d("../../lib"),v=d("../../plots/cartesian/axis_ids"),M=d("../../registry").traceIs,T=d("../bar/defaults").handleGroupingDefaults,e=w.nestedProperty,a=d("../../plots/cartesian/constraints").getAxisGroup,n=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],r=["x","y"];ne.exports=function(f,o){var i=o._histogramBinOpts={},g=[],p={},y=[],c,b,l,_,s,A,m;function h(Z,Y){return w.coerce(c._input,c,c._module.attributes,Z,Y)}function x(Z){return Z.orientation==="v"?"x":"y"}function u(Z,Y){var j=v.getFromTrace({_fullLayout:o},Z,Y);return j.type}function L(Z,Y,j){var re=Z.uid+"__"+j;Y||(Y=re);var se=u(Z,j),oe=Z[j+"calendar"]||"",N=i[Y],U=!0;N&&(se===N.axType&&oe===N.calendar?(U=!1,N.traces.push(Z),N.dirs.push(j)):(Y=re,se!==N.axType&&w.warn(["Attempted to group the bins of trace",Z.index,"set on a","type:"+se,"axis","with bins on","type:"+N.axType,"axis."].join(" ")),oe!==N.calendar&&w.warn(["Attempted to group the bins of trace",Z.index,"set with a",oe,"calendar","with bins",N.calendar?"on a "+N.calendar+" calendar":"w/o a set calendar"].join(" ")))),U&&(i[Y]={traces:[Z],dirs:[j],axType:se,calendar:Z[j+"calendar"]||""}),Z["_"+j+"bingroup"]=Y}for(s=0;s<f.length;s++)c=f[s],M(c,"histogram")&&(g.push(c),delete c._xautoBinFinished,delete c._yautoBinFinished,M(c,"2dMap")||T(c._input,c,o,h));var S=o._alignmentOpts||{};for(s=0;s<g.length;s++){if(c=g[s],l="",!M(c,"2dMap")){if(_=x(c),o.barmode==="group"&&c.alignmentgroup){var k=c[_+"axis"],P=a(o,k)+c.orientation;(S[P]||{})[c.alignmentgroup]&&(l=P)}!l&&o.barmode!=="overlay"&&(l=a(o,c.xaxis)+a(o,c.yaxis)+x(c))}l?(p[l]||(p[l]=[]),p[l].push(c)):y.push(c)}for(l in p){if(b=p[l],b.length===1){y.push(b[0]);continue}var z=!1;for(b.length&&(c=b[0],z=h("bingroup")),l=z||l,s=0;s<b.length;s++){c=b[s];var I=c._input.bingroup;I&&I!==l&&w.warn(["Trace",c.index,"must match","within bingroup",l+".","Ignoring its bingroup:",I,"setting."].join(" ")),c.bingroup=l,L(c,l,x(c))}}for(s=0;s<y.length;s++){c=y[s];var D=h("bingroup");if(M(c,"2dMap"))for(m=0;m<2;m++){_=r[m];var R=h(_+"bingroup",D?D+"__"+_:null);L(c,R,_)}else L(c,D,x(c))}for(l in i){var O=i[l];for(b=O.traces,A=0;A<n.length;A++){var F=n[A],V=F.name,G,J;if(!(V==="nbins"&&O.sizeFound)){for(s=0;s<b.length;s++){if(c=b[s],_=O.dirs[s],G=F.aStr[_],e(c._input,G).get()!==void 0){O[V]=h(G),O[V+"Found"]=!0;break}J=(c._autoBin||{})[_]||{},J[V]&&e(c,G).set(J[V])}if(V==="start"||V==="end")for(;s<b.length;s++)c=b[s],c["_"+_+"bingroup"]&&(J=(c._autoBin||{})[_]||{},h(G,J[V]));V==="nbins"&&!O.sizeFound&&!O.nbinsFound&&(c=b[0],O[V]=h(G))}}}}},{"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../plots/cartesian/constraints":562,"../../registry":638,"../bar/defaults":652}],820:[function(d,ne,ae){var w=d("../../registry"),v=d("../../lib"),M=d("../../components/color"),T=d("../bar/defaults").handleText,e=d("../bar/style_defaults"),a=d("./attributes");ne.exports=function(r,t,f,o){function i(u,L){return v.coerce(r,t,a,u,L)}var g=i("x"),p=i("y"),y=i("cumulative.enabled");y&&(i("cumulative.direction"),i("cumulative.currentbin")),i("text");var c=i("textposition");T(r,t,o,i,c,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat");var b=i("orientation",p&&!g?"h":"v"),l=b==="v"?"x":"y",_=b==="v"?"y":"x",s=g&&p?Math.min(v.minRowLength(g)&&v.minRowLength(p)):v.minRowLength(t[l]||[]);if(!s){t.visible=!1;return}t._length=s;var A=w.getComponentMethod("calendars","handleTraceDefaults");A(r,t,["x","y"],o);var m=t[_];m&&i("histfunc"),i("histnorm"),i("autobin"+l),e(r,t,i,f,o),v.coerceSelectionMarkerOpacity(t,i);var h=(t.marker.line||{}).color,x=w.getComponentMethod("errorbars","supplyDefaults");x(r,t,h||M.defaultLine,{axis:"y"}),x(r,t,h||M.defaultLine,{axis:"x",inherit:"y"})}},{"../../components/color":366,"../../lib":503,"../../registry":638,"../bar/defaults":652,"../bar/style_defaults":663,"./attributes":812}],821:[function(d,ne,ae){ne.exports=function(v,M,T,e,a){if(v.x="xVal"in M?M.xVal:M.x,v.y="yVal"in M?M.yVal:M.y,"zLabelVal"in M&&(v.z=M.zLabelVal),M.xa&&(v.xaxis=M.xa),M.ya&&(v.yaxis=M.ya),!(T.cumulative||{}).enabled){var n=Array.isArray(a)?e[0].pts[a[0]][a[1]]:e[a].pts;v.pointNumbers=n,v.binNumber=v.pointNumber,delete v.pointNumber,delete v.pointIndex;var r;if(T._indexToPoints){r=[];for(var t=0;t<n.length;t++)r=r.concat(T._indexToPoints[n[t]])}else r=n;v.pointIndices=r}return v}},{}],822:[function(d,ne,ae){var w=d("../bar/hover").hoverPoints,v=d("../../plots/cartesian/axes").hoverLabelText;ne.exports=function(T,e,a,n,r){var t=w(T,e,a,n,r);if(!!t){T=t[0];var f=T.cd[T.index],o=T.cd[0].trace;if(!o.cumulative.enabled){var i=o.orientation==="h"?"y":"x";T[i+"Label"]=v(T[i+"a"],[f.ph0,f.ph1],o[i+"hoverformat"])}return t}}},{"../../plots/cartesian/axes":554,"../bar/hover":655}],823:[function(d,ne,ae){ne.exports={attributes:d("./attributes"),layoutAttributes:d("../bar/layout_attributes"),supplyDefaults:d("./defaults"),crossTraceDefaults:d("./cross_trace_defaults"),supplyLayoutDefaults:d("../bar/layout_defaults"),calc:d("./calc").calc,crossTraceCalc:d("../bar/cross_trace_calc").crossTraceCalc,plot:d("../bar/plot").plot,layerName:"barlayer",style:d("../bar/style").style,styleOnSelect:d("../bar/style").styleOnSelect,colorbar:d("../scatter/marker_colorbar"),hoverPoints:d("./hover"),selectPoints:d("../bar/select"),eventData:d("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:d("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../bar/cross_trace_calc":651,"../bar/layout_attributes":657,"../bar/layout_defaults":658,"../bar/plot":659,"../bar/select":660,"../bar/style":662,"../scatter/marker_colorbar":945,"./attributes":812,"./calc":817,"./cross_trace_defaults":819,"./defaults":820,"./event_data":821,"./hover":822}],824:[function(d,ne,ae){ne.exports={percent:function(w,v){for(var M=w.length,T=100/v,e=0;e<M;e++)w[e]*=T},probability:function(w,v){for(var M=w.length,T=0;T<M;T++)w[T]/=v},density:function(w,v,M,T){var e=w.length;T=T||1;for(var a=0;a<e;a++)w[a]*=M[a]*T},"probability density":function(w,v,M,T){var e=w.length;T&&(v/=T);for(var a=0;a<e;a++)w[a]*=M[a]/v}}},{}],825:[function(d,ne,ae){var w=d("../histogram/attributes"),v=d("../histogram/bin_attributes"),M=d("../heatmap/attributes"),T=d("../../plots/attributes"),e=d("../../plots/cartesian/axis_format_attributes").axisHoverFormat,a=d("../../plots/template_attributes").hovertemplateAttrs,n=d("../../plots/template_attributes").texttemplateAttrs,r=d("../../components/colorscale/attributes"),t=d("../../lib/extend").extendFlat;ne.exports=t({x:w.x,y:w.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:w.histnorm,histfunc:w.histfunc,nbinsx:w.nbinsx,xbins:v("x"),nbinsy:w.nbinsy,ybins:v("y"),autobinx:w.autobinx,autobiny:w.autobiny,bingroup:t({},w.bingroup,{}),xbingroup:t({},w.bingroup,{}),ybingroup:t({},w.bingroup,{}),xgap:M.xgap,ygap:M.ygap,zsmooth:M.zsmooth,xhoverformat:e("x"),yhoverformat:e("y"),zhoverformat:e("z",1),hovertemplate:a({},{keys:"z"}),texttemplate:n({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:M.textfont,showlegend:t({},T.showlegend,{dflt:!1})},r("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../heatmap/attributes":792,"../histogram/attributes":812,"../histogram/bin_attributes":814}],826:[function(d,ne,ae){var w=d("../../lib"),v=d("../../plots/cartesian/axes"),M=d("../histogram/bin_functions"),T=d("../histogram/norm_functions"),e=d("../histogram/average"),a=d("../histogram/bin_label_vals"),n=d("../histogram/calc").calcAllAutoBins;ne.exports=function(i,g){var p=v.getFromId(i,g.xaxis),y=v.getFromId(i,g.yaxis),c=g.xcalendar,b=g.ycalendar,l=function(rt){return p.r2c(rt,0,c)},_=function(rt){return y.r2c(rt,0,b)},s=function(rt){return p.c2r(rt,0,c)},A=function(rt){return y.c2r(rt,0,b)},m,h,x,u,L=n(i,g,p,"x"),S=L[0],k=L[1],P=n(i,g,y,"y"),z=P[0],I=P[1],D=g._length;k.length>D&&k.splice(D,k.length-D),I.length>D&&I.splice(D,I.length-D);var R=[],O=[],F=[],V=typeof S.size=="string",G=typeof z.size=="string",J=[],Z=[],Y=V?J:S,j=G?Z:z,re=0,se=[],oe=[],N=g.histnorm,U=g.histfunc,q=N.indexOf("density")!==-1,Q=U==="max"||U==="min",W=Q?null:0,X=M.count,ee=T[N],te=!1,ie=[],le=[],ge="z"in g?g.z:"marker"in g&&Array.isArray(g.marker.color)?g.marker.color:"";ge&&U!=="count"&&(te=U==="avg",X=M[U]);var fe=S.size,pe=l(S.start),ye=l(S.end)+(pe-v.tickIncrement(pe,fe,!1,c))/1e6;for(m=pe;m<ye;m=v.tickIncrement(m,fe,!1,c))O.push(W),J.push(m),te&&F.push(0);J.push(m);var Te=O.length,_e=(m-pe)/Te,De=s(pe+_e/2),Be=z.size,Ue=_(z.start),xe=_(z.end)+(Ue-v.tickIncrement(Ue,Be,!1,b))/1e6;for(m=Ue;m<xe;m=v.tickIncrement(m,Be,!1,b)){R.push(O.slice()),Z.push(m);var Pe=new Array(Te);for(h=0;h<Te;h++)Pe[h]=[];oe.push(Pe),te&&se.push(F.slice())}Z.push(m);var Ve=R.length,Qe=(m-Ue)/Ve,Fe=A(Ue+Qe/2);q&&(ie=r(O.length,Y,_e,V),le=r(R.length,j,Qe,G)),!V&&p.type==="date"&&(Y=t(l,Y)),!G&&y.type==="date"&&(j=t(_,j));var Le=!0,Ne=!0,dt=new Array(Te),Dt=new Array(Ve),Xt=1/0,At=1/0,zt=1/0,Ut=1/0;for(m=0;m<D;m++){var Ct=k[m],Mt=I[m];x=w.findBin(Ct,Y),u=w.findBin(Mt,j),x>=0&&x<Te&&u>=0&&u<Ve&&(re+=X(x,m,R[u],ge,se[u]),oe[u][x].push(m),Le&&(dt[x]===void 0?dt[x]=Ct:dt[x]!==Ct&&(Le=!1)),Ne&&(Dt[u]===void 0?Dt[u]=Mt:Dt[u]!==Mt&&(Ne=!1)),Xt=Math.min(Xt,Ct-J[x]),At=Math.min(At,J[x+1]-Ct),zt=Math.min(zt,Mt-Z[u]),Ut=Math.min(Ut,Z[u+1]-Mt))}if(te)for(u=0;u<Ve;u++)re+=e(R[u],se[u]);if(ee)for(u=0;u<Ve;u++)ee(R[u],re,ie,le[u]);return{x:k,xRanges:f(J,Le&&dt,Xt,At,p,c),x0:De,dx:_e,y:I,yRanges:f(Z,Ne&&Dt,zt,Ut,y,b),y0:Fe,dy:Qe,z:R,pts:oe}};function r(o,i,g,p){var y=new Array(o),c;if(p)for(c=0;c<o;c++)y[c]=1/(i[c+1]-i[c]);else{var b=1/g;for(c=0;c<o;c++)y[c]=b}return y}function t(o,i){return{start:o(i.start),end:o(i.end),size:i.size}}function f(o,i,g,p,y,c){var b,l=o.length-1,_=new Array(l),s=a(g,p,o,y,c);for(b=0;b<l;b++){var A=(i||[])[b];_[b]=A===void 0?[s(o[b]),s(o[b+1],!0)]:[A,A]}return _}},{"../../lib":503,"../../plots/cartesian/axes":554,"../histogram/average":813,"../histogram/bin_functions":815,"../histogram/bin_label_vals":816,"../histogram/calc":817,"../histogram/norm_functions":824}],827:[function(d,ne,ae){var w=d("../../lib"),v=d("./sample_defaults"),M=d("../heatmap/style_defaults"),T=d("../../components/colorscale/defaults"),e=d("../heatmap/label_defaults"),a=d("./attributes");ne.exports=function(r,t,f,o){function i(g,p){return w.coerce(r,t,a,g,p)}v(r,t,i,o),t.visible!==!1&&(M(r,t,i,o),T(r,t,o,i,{prefix:"",cLetter:"z"}),i("hovertemplate"),e(i,o),i("xhoverformat"),i("yhoverformat"))}},{"../../components/colorscale/defaults":376,"../../lib":503,"../heatmap/label_defaults":802,"../heatmap/style_defaults":806,"./attributes":825,"./sample_defaults":830}],828:[function(d,ne,ae){var w=d("../heatmap/hover"),v=d("../../plots/cartesian/axes").hoverLabelText;ne.exports=function(T,e,a,n,r){var t=w(T,e,a,n,r);if(!!t){T=t[0];var f=T.index,o=f[0],i=f[1],g=T.cd[0],p=g.trace,y=g.xRanges[i],c=g.yRanges[o];return T.xLabel=v(T.xa,[y[0],y[1]],p.xhoverformat),T.yLabel=v(T.ya,[c[0],c[1]],p.yhoverformat),t}}},{"../../plots/cartesian/axes":554,"../heatmap/hover":799}],829:[function(d,ne,ae){ne.exports={attributes:d("./attributes"),supplyDefaults:d("./defaults"),crossTraceDefaults:d("../histogram/cross_trace_defaults"),calc:d("../heatmap/calc"),plot:d("../heatmap/plot"),layerName:"heatmaplayer",colorbar:d("../heatmap/colorbar"),style:d("../heatmap/style"),hoverPoints:d("./hover"),eventData:d("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:d("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../heatmap/calc":793,"../heatmap/colorbar":795,"../heatmap/plot":804,"../heatmap/style":805,"../histogram/cross_trace_defaults":819,"../histogram/event_data":821,"./attributes":825,"./defaults":827,"./hover":828}],830:[function(d,ne,ae){var w=d("../../registry"),v=d("../../lib");ne.exports=function(T,e,a,n){var r=a("x"),t=a("y"),f=v.minRowLength(r),o=v.minRowLength(t);if(!f||!o){e.visible=!1;return}e._length=Math.min(f,o);var i=w.getComponentMethod("calendars","handleTraceDefaults");i(T,e,["x","y"],n);var g=a("z")||a("marker.color");g&&a("histfunc"),a("histnorm"),a("autobinx"),a("autobiny")}},{"../../lib":503,"../../registry":638}],831:[function(d,ne,ae){var w=d("../histogram2d/attributes"),v=d("../contour/attributes"),M=d("../../components/colorscale/attributes"),T=d("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=d("../../lib/extend").extendFlat;ne.exports=e({x:w.x,y:w.y,z:w.z,marker:w.marker,histnorm:w.histnorm,histfunc:w.histfunc,nbinsx:w.nbinsx,xbins:w.xbins,nbinsy:w.nbinsy,ybins:w.ybins,autobinx:w.autobinx,autobiny:w.autobiny,bingroup:w.bingroup,xbingroup:w.xbingroup,ybingroup:w.ybingroup,autocontour:v.autocontour,ncontours:v.ncontours,contours:v.contours,line:{color:v.line.color,width:e({},v.line.width,{dflt:.5}),dash:v.line.dash,smoothing:v.line.smoothing,editType:"plot"},xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z",1),hovertemplate:w.hovertemplate,texttemplate:v.texttemplate,textfont:v.textfont},M("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../contour/attributes":735,"../histogram2d/attributes":825}],832:[function(d,ne,ae){var w=d("../../lib"),v=d("../histogram2d/sample_defaults"),M=d("../contour/contours_defaults"),T=d("../contour/style_defaults"),e=d("../heatmap/label_defaults"),a=d("./attributes");ne.exports=function(r,t,f,o){function i(p,y){return w.coerce(r,t,a,p,y)}function g(p){return w.coerce2(r,t,a,p)}v(r,t,i,o),t.visible!==!1&&(M(r,t,i,g),T(r,t,i,o),i("xhoverformat"),i("yhoverformat"),i("hovertemplate"),t.contours&&t.contours.coloring==="heatmap"&&e(i,o))}},{"../../lib":503,"../contour/contours_defaults":742,"../contour/style_defaults":756,"../heatmap/label_defaults":802,"../histogram2d/sample_defaults":830,"./attributes":831}],833:[function(d,ne,ae){ne.exports={attributes:d("./attributes"),supplyDefaults:d("./defaults"),crossTraceDefaults:d("../histogram/cross_trace_defaults"),calc:d("../contour/calc"),plot:d("../contour/plot").plot,layerName:"contourlayer",style:d("../contour/style"),colorbar:d("../contour/colorbar"),hoverPoints:d("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:d("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../contour/calc":736,"../contour/colorbar":738,"../contour/hover":748,"../contour/plot":753,"../contour/style":755,"../histogram/cross_trace_defaults":819,"./attributes":831,"./defaults":832}],834:[function(d,ne,ae){var w=d("../../plots/template_attributes").hovertemplateAttrs,v=d("../../plots/template_attributes").texttemplateAttrs,M=d("../../components/colorscale/attributes"),T=d("../../plots/domain").attributes,e=d("../pie/attributes"),a=d("../sunburst/attributes"),n=d("../treemap/attributes"),r=d("../treemap/constants"),t=d("../../lib/extend").extendFlat;ne.exports={labels:a.labels,parents:a.parents,values:a.values,branchvalues:a.branchvalues,count:a.count,level:a.level,maxdepth:a.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:n.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:t({colors:a.marker.colors,line:a.marker.line,editType:"calc"},M("marker",{colorAttr:"colors",anim:!1})),leaf:a.leaf,pathbar:n.pathbar,text:e.text,textinfo:a.textinfo,texttemplate:v({editType:"plot"},{keys:r.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:a.hoverinfo,hovertemplate:w({},{keys:r.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:n.outsidetextfont,textposition:n.textposition,sort:e.sort,root:a.root,domain:T({name:"icicle",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":901,"../sunburst/attributes":1049,"../treemap/attributes":1075,"../treemap/constants":1078}],835:[function(d,ne,ae){var w=d("../../plots/plots");ae.name="icicle",ae.plot=function(v,M,T,e){w.plotBasePlot(ae.name,v,M,T,e)},ae.clean=function(v,M,T,e){w.cleanBasePlot(ae.name,v,M,T,e)}},{"../../plots/plots":619}],836:[function(d,ne,ae){var w=d("../sunburst/calc");ae.calc=function(v,M){return w.calc(v,M)},ae.crossTraceCalc=function(v){return w._runCrossTraceCalc("icicle",v)}},{"../sunburst/calc":1051}],837:[function(d,ne,ae){var w=d("../../lib"),v=d("./attributes"),M=d("../../components/color"),T=d("../../plots/domain").defaults,e=d("../bar/defaults").handleText,a=d("../bar/constants").TEXTPAD,n=d("../../components/colorscale"),r=n.hasColorscale,t=n.handleDefaults;ne.exports=function(o,i,g,p){function y(x,u){return w.coerce(o,i,v,x,u)}var c=y("labels"),b=y("parents");if(!c||!c.length||!b||!b.length){i.visible=!1;return}var l=y("values");l&&l.length?y("branchvalues"):y("count"),y("level"),y("maxdepth"),y("tiling.orientation"),y("tiling.flip"),y("tiling.pad");var _=y("text");y("texttemplate"),i.texttemplate||y("textinfo",Array.isArray(_)?"text+label":"label"),y("hovertext"),y("hovertemplate");var s=y("pathbar.visible"),A="auto";e(o,i,p,y,A,{hasPathbar:s,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),y("textposition");var m=y("marker.line.width");m&&y("marker.line.color",p.paper_bgcolor),y("marker.colors");var h=i._hasColorscale=r(o,"marker","colors")||(o.marker||{}).coloraxis;h&&t(o,i,p,y,{prefix:"marker.",cLetter:"c"}),y("leaf.opacity",h?1:.7),i._hovered={marker:{line:{width:2,color:M.contrast(p.paper_bgcolor)}}},s&&(y("pathbar.thickness",i.pathbar.textfont.size+2*a),y("pathbar.side"),y("pathbar.edgeshape")),y("sort"),y("root.color"),T(i,p,y),i._length=null}},{"../../components/color":366,"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/constants":650,"../bar/defaults":652,"./attributes":834}],838:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../lib"),M=d("../../components/drawing"),T=d("../../lib/svg_text_utils"),e=d("./partition"),a=d("./style").styleOne,n=d("../treemap/constants"),r=d("../sunburst/helpers"),t=d("../sunburst/fx"),f=d("../sunburst/plot").formatSliceLabel,o=!1;ne.exports=function(g,p,y,c,b){var l=b.width,_=b.height,s=b.viewX,A=b.viewY,m=b.pathSlice,h=b.toMoveInsideSlice,x=b.strTransform,u=b.hasTransition,L=b.handleSlicesExit,S=b.makeUpdateSliceInterpolator,k=b.makeUpdateTextInterpolator,P=b.prevEntry,z={},I=g._fullLayout,D=p[0],R=D.trace,O=R.textposition.indexOf("left")!==-1,F=R.textposition.indexOf("right")!==-1,V=R.textposition.indexOf("bottom")!==-1,G=e(y,[l,_],{flipX:R.tiling.flip.indexOf("x")>-1,flipY:R.tiling.flip.indexOf("y")>-1,orientation:R.tiling.orientation,pad:{inner:R.tiling.pad},maxDepth:R._maxDepth}),J=G.descendants(),Z=1/0,Y=-1/0;J.forEach(function(N){var U=N.depth;U>=R._maxDepth?(N.x0=N.x1=(N.x0+N.x1)/2,N.y0=N.y1=(N.y0+N.y1)/2):(Z=Math.min(Z,U),Y=Math.max(Y,U))}),c=c.data(J,r.getPtId),R._maxVisibleLayers=isFinite(Y)?Y-Z+1:0,c.enter().append("g").classed("slice",!0),L(c,o,z,[l,_],m),c.order();var j=null;if(u&&P){var re=r.getPtId(P);c.each(function(N){j===null&&r.getPtId(N)===re&&(j={x0:N.x0,x1:N.x1,y0:N.y0,y1:N.y1})})}var se=function(){return j||{x0:0,x1:l,y0:0,y1:_}},oe=c;return u&&(oe=oe.transition().each("end",function(){var N=w.select(this);r.setSliceCursor(N,g,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),oe.each(function(N){N._x0=s(N.x0),N._x1=s(N.x1),N._y0=A(N.y0),N._y1=A(N.y1),N._hoverX=s(N.x1-R.tiling.pad),N._hoverY=A(V?N.y1-R.tiling.pad/2:N.y0+R.tiling.pad/2);var U=w.select(this),q=v.ensureSingle(U,"path","surface",function(ee){ee.style("pointer-events","all")});u?q.transition().attrTween("d",function(ee){var te=S(ee,o,se(),[l,_],{orientation:R.tiling.orientation,flipX:R.tiling.flip.indexOf("x")>-1,flipY:R.tiling.flip.indexOf("y")>-1});return function(ie){return m(te(ie))}}):q.attr("d",m),U.call(t,y,g,p,{styleOne:a,eventDataKeys:n.eventDataKeys,transitionTime:n.CLICK_TRANSITION_TIME,transitionEasing:n.CLICK_TRANSITION_EASING}).call(r.setSliceCursor,g,{isTransitioning:g._transitioning}),q.call(a,N,R,{hovered:!1}),N.x0===N.x1||N.y0===N.y1?N._text="":N._text=f(N,y,R,p,I)||"";var Q=v.ensureSingle(U,"g","slicetext"),W=v.ensureSingle(Q,"text","",function(ee){ee.attr("data-notex",1)}),X=v.ensureUniformFontSize(g,r.determineTextFont(R,N,I.font));W.text(N._text||" ").classed("slicetext",!0).attr("text-anchor",F?"end":O?"start":"middle").call(M.font,X).call(T.convertToTspans,g),N.textBB=M.bBox(W.node()),N.transform=h(N,{fontSize:X.size}),N.transform.fontSize=X.size,u?W.transition().attrTween("transform",function(ee){var te=k(ee,o,se(),[l,_]);return function(ie){return x(te(ie))}}):W.attr("transform",x(N))}),j}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1054,"../sunburst/helpers":1055,"../sunburst/plot":1059,"../treemap/constants":1078,"./partition":842,"./style":844,"@plotly/d3":58}],839:[function(d,ne,ae){ne.exports={moduleType:"trace",name:"icicle",basePlotModule:d("./base_plot"),categories:[],animatable:!0,attributes:d("./attributes"),layoutAttributes:d("./layout_attributes"),supplyDefaults:d("./defaults"),supplyLayoutDefaults:d("./layout_defaults"),calc:d("./calc").calc,crossTraceCalc:d("./calc").crossTraceCalc,plot:d("./plot"),style:d("./style").style,colorbar:d("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":945,"./attributes":834,"./base_plot":835,"./calc":836,"./defaults":837,"./layout_attributes":840,"./layout_defaults":841,"./plot":843,"./style":844}],840:[function(d,ne,ae){ne.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],841:[function(d,ne,ae){var w=d("../../lib"),v=d("./layout_attributes");ne.exports=function(T,e){function a(n,r){return w.coerce(T,e,v,n,r)}a("iciclecolorway",e.colorway),a("extendiciclecolors")}},{"../../lib":503,"./layout_attributes":840}],842:[function(d,ne,ae){var w=d("d3-hierarchy"),v=d("../treemap/flip_tree");ne.exports=function(T,e,a){var n=a.flipX,r=a.flipY,t=a.orientation==="h",f=a.maxDepth,o=e[0],i=e[1];f&&(o=(T.height+1)*e[0]/Math.min(T.height+1,f),i=(T.height+1)*e[1]/Math.min(T.height+1,f));var g=w.partition().padding(a.pad.inner).size(t?[e[1],o]:[e[0],i])(T);return(t||n||r)&&v(g,e,{swapXY:t,flipX:n,flipY:r}),g}},{"../treemap/flip_tree":1083,"d3-hierarchy":115}],843:[function(d,ne,ae){var w=d("../treemap/draw"),v=d("./draw_descendants");ne.exports=function(T,e,a,n){return w(T,e,a,n,{type:"icicle",drawDescendants:v})}},{"../treemap/draw":1080,"./draw_descendants":838}],844:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../components/color"),M=d("../../lib"),T=d("../bar/uniform_text").resizeText;function e(n){var r=n._fullLayout._iciclelayer.selectAll(".trace");T(n,r,"icicle"),r.each(function(t){var f=w.select(this),o=t[0],i=o.trace;f.style("opacity",i.opacity),f.selectAll("path.surface").each(function(g){w.select(this).call(a,g,i)})})}function a(n,r,t){var f=r.data.data,o=!r.children,i=f.i,g=M.castOption(t,i,"marker.line.color")||v.defaultLine,p=M.castOption(t,i,"marker.line.width")||0;n.style("stroke-width",p).call(v.fill,f.color).call(v.stroke,g).style("opacity",o?t.leaf.opacity:null)}ne.exports={style:e,styleOne:a}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"@plotly/d3":58}],845:[function(d,ne,ae){for(var w=d("../../plots/attributes"),v=d("../../plots/template_attributes").hovertemplateAttrs,M=d("../../lib/extend").extendFlat,T=d("./constants").colormodel,e=["rgb","rgba","rgba256","hsl","hsla"],a=[],n=[],r=0;r<e.length;r++){var t=T[e[r]];a.push("For the `"+e[r]+"` colormodel, it is ["+(t.zminDflt||t.min).join(", ")+"]."),n.push("For the `"+e[r]+"` colormodel, it is ["+(t.zmaxDflt||t.max).join(", ")+"].")}ne.exports=M({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:e,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:M({},w.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:v({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"./constants":847}],846:[function(d,ne,ae){var w=d("../../lib"),v=d("./constants"),M=d("fast-isnumeric"),T=d("../../plots/cartesian/axes"),e=d("../../lib").maxRowLength,a=d("./helpers").getImageSize;ne.exports=function(o,i){var g,p;if(i._hasZ)g=i.z.length,p=e(i.z);else if(i._hasSource){var y=a(i.source);g=y.height,p=y.width}var c=T.getFromId(o,i.xaxis||"x"),b=T.getFromId(o,i.yaxis||"y"),l=c.d2c(i.x0)-i.dx/2,_=b.d2c(i.y0)-i.dy/2,s,A=[l,l+p*i.dx],m=[_,_+g*i.dy];if(c&&c.type==="log")for(s=0;s<p;s++)A.push(l+s*i.dx);if(b&&b.type==="log")for(s=0;s<g;s++)m.push(_+s*i.dy);i._extremes[c._id]=T.findExtremes(c,A),i._extremes[b._id]=T.findExtremes(b,m),i._scaler=t(i);var h={x0:l,y0:_,z:i.z,w:p,h:g};return[h]};function n(f,o,i,g){return function(p){return w.constrain((p-f)*o,i,g)}}function r(f,o){return function(i){return w.constrain(i,f,o)}}function t(f){var o=v.colormodel[f.colormodel],i=o.colormodel||f.colormodel,g=i.length;f._sArray=[];for(var p=0;p<g;p++)o.min[p]!==f.zmin[p]||o.max[p]!==f.zmax[p]?f._sArray.push(n(f.zmin[p],(o.max[p]-o.min[p])/(f.zmax[p]-f.zmin[p]),o.min[p],o.max[p])):f._sArray.push(r(o.min[p],o.max[p]));return function(y){for(var c=y.slice(0,g),b=0;b<g;b++){var l=c[b];if(!M(l))return!1;c[b]=f._sArray[b](l)}return c}}},{"../../lib":503,"../../plots/cartesian/axes":554,"./constants":847,"./helpers":850,"fast-isnumeric":190}],847:[function(d,ne,ae){ne.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(w){return w.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(w){return w.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(w){return w.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(w){var v=w.slice(0,3);return v[1]=v[1]+"%",v[2]=v[2]+"%",v},suffix:["\xB0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(w){var v=w.slice(0,4);return v[1]=v[1]+"%",v[2]=v[2]+"%",v},suffix:["\xB0","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},{}],848:[function(d,ne,ae){var w=d("../../lib"),v=d("./attributes"),M=d("./constants"),T=d("../../snapshot/helpers").IMAGE_URL_PREFIX;ne.exports=function(a,n){function r(o,i){return w.coerce(a,n,v,o,i)}r("source"),n.source&&!n.source.match(T)&&delete n.source,n._hasSource=!!n.source;var t=r("z");if(n._hasZ=!(t===void 0||!t.length||!t[0]||!t[0].length),!n._hasZ&&!n._hasSource){n.visible=!1;return}r("x0"),r("y0"),r("dx"),r("dy");var f;n._hasZ?(r("colormodel","rgb"),f=M.colormodel[n.colormodel],r("zmin",f.zminDflt||f.min),r("zmax",f.zmaxDflt||f.max)):n._hasSource&&(n.colormodel="rgba256",f=M.colormodel[n.colormodel],n.zmin=f.zminDflt,n.zmax=f.zmaxDflt),r("zsmooth"),r("text"),r("hovertext"),r("hovertemplate"),n._length=null}},{"../../lib":503,"../../snapshot/helpers":642,"./attributes":845,"./constants":847}],849:[function(d,ne,ae){ne.exports=function(v,M){return"xVal"in M&&(v.x=M.xVal),"yVal"in M&&(v.y=M.yVal),M.xa&&(v.xaxis=M.xa),M.ya&&(v.yaxis=M.ya),v.color=M.color,v.colormodel=M.trace.colormodel,v.z||(v.z=M.color),v}},{}],850:[function(d,ne,ae){var w=d("probe-image-size/sync"),v=d("../../snapshot/helpers").IMAGE_URL_PREFIX,M=d("buffer/").Buffer;ae.getImageSize=function(T){var e=T.replace(v,""),a=new M(e,"base64");return w(a)}},{"../../snapshot/helpers":642,"buffer/":85,"probe-image-size/sync":276}],851:[function(d,ne,ae){var w=d("../../components/fx"),v=d("../../lib"),M=d("./constants");ne.exports=function(e,a,n){var r=e.cd[0],t=r.trace,f=e.xa,o=e.ya;if(!(w.inbox(a-r.x0,a-(r.x0+r.w*t.dx),0)>0||w.inbox(n-r.y0,n-(r.y0+r.h*t.dy),0)>0)){var i=Math.floor((a-r.x0)/t.dx),g=Math.floor(Math.abs(n-r.y0)/t.dy),p;if(t._hasZ?p=r.z[g][i]:t._hasSource&&(p=t._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(i,g,1,1).data),!!p){var y=r.hi||t.hoverinfo,c;if(y){var b=y.split("+");b.indexOf("all")!==-1&&(b=["color"]),b.indexOf("color")!==-1&&(c=!0)}var l=M.colormodel[t.colormodel],_=l.colormodel||t.colormodel,s=_.length,A=t._scaler(p),m=l.suffix,h=[];(t.hovertemplate||c)&&(h.push("["+[A[0]+m[0],A[1]+m[1],A[2]+m[2]].join(", ")),s===4&&h.push(", "+A[3]+m[3]),h.push("]"),h=h.join(""),e.extraText=_.toUpperCase()+": "+h);var x;Array.isArray(t.hovertext)&&Array.isArray(t.hovertext[g])?x=t.hovertext[g][i]:Array.isArray(t.text)&&Array.isArray(t.text[g])&&(x=t.text[g][i]);var u=o.c2p(r.y0+(g+.5)*t.dy),L=r.x0+(i+.5)*t.dx,S=r.y0+(g+.5)*t.dy,k="["+p.slice(0,t.colormodel.length).join(", ")+"]";return[v.extendFlat(e,{index:[g,i],x0:f.c2p(r.x0+i*t.dx),x1:f.c2p(r.x0+(i+1)*t.dx),y0:u,y1:u,color:A,xVal:L,xLabelVal:L,yVal:S,yLabelVal:S,zLabelVal:k,text:x,hovertemplateLabels:{zLabel:k,colorLabel:h,"color[0]Label":A[0]+m[0],"color[1]Label":A[1]+m[1],"color[2]Label":A[2]+m[2],"color[3]Label":A[3]+m[3]}})]}}}},{"../../components/fx":406,"../../lib":503,"./constants":847}],852:[function(d,ne,ae){ne.exports={attributes:d("./attributes"),supplyDefaults:d("./defaults"),calc:d("./calc"),plot:d("./plot"),style:d("./style"),hoverPoints:d("./hover"),eventData:d("./event_data"),moduleType:"trace",name:"image",basePlotModule:d("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":568,"./attributes":845,"./calc":846,"./defaults":848,"./event_data":849,"./hover":851,"./plot":853,"./style":854}],853:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../lib"),M=v.strTranslate,T=d("../../constants/xmlns_namespaces"),e=d("./constants"),a=v.isIOS()||v.isSafari()||v.isIE();ne.exports=function(r,t,f,o){var i=t.xaxis,g=t.yaxis,p=!(a||r._context._exportedPlot);v.makeTraceGroups(o,f,"im").each(function(y){var c=w.select(this),b=y[0],l=b.trace,_=(l.zsmooth==="fast"||l.zsmooth===!1&&p)&&!l._hasZ&&l._hasSource&&i.type==="linear"&&g.type==="linear";l._realImage=_;var s=b.z,A=b.x0,m=b.y0,h=b.w,x=b.h,u=l.dx,L=l.dy,S,k,P,z,I,D;for(D=0;S===void 0&&D<h;)S=i.c2p(A+D*u),D++;for(D=h;k===void 0&&D>0;)k=i.c2p(A+D*u),D--;for(D=0;z===void 0&&D<x;)z=g.c2p(m+D*L),D++;for(D=x;I===void 0&&D>0;)I=g.c2p(m+D*L),D--;if(k<S&&(P=k,k=S,S=P),I<z&&(P=z,z=I,I=P),!_){var R=.5;S=Math.max(-R*i._length,S),k=Math.min((1+R)*i._length,k),z=Math.max(-R*g._length,z),I=Math.min((1+R)*g._length,I)}var O=Math.round(k-S),F=Math.round(I-z),V=O<=0||F<=0;if(V){var G=c.selectAll("image").data([]);G.exit().remove();return}function J(Q){var W=document.createElement("canvas");W.width=O,W.height=F;var X=W.getContext("2d",{willReadFrequently:!0}),ee=function(Be){return v.constrain(Math.round(i.c2p(A+Be*u)-S),0,O)},te=function(Be){return v.constrain(Math.round(g.c2p(m+Be*L)-z),0,F)},ie=e.colormodel[l.colormodel],le=ie.colormodel||l.colormodel,ge=ie.fmt,fe;for(D=0;D<b.w;D++){var pe=ee(D),ye=ee(D+1);if(!(ye===pe||isNaN(ye)||isNaN(pe)))for(var Te=0;Te<b.h;Te++){var _e=te(Te),De=te(Te+1);De===_e||isNaN(De)||isNaN(_e)||!Q(D,Te)||(fe=l._scaler(Q(D,Te)),fe?X.fillStyle=le+"("+ge(fe).join(",")+")":X.fillStyle="rgba(0,0,0,0)",X.fillRect(pe,_e,ye-pe,De-_e))}}return W}var Z=c.selectAll("image").data([y]);Z.enter().append("svg:image").attr({xmlns:T.svg,preserveAspectRatio:"none"}),Z.exit().remove();var Y=l.zsmooth===!1?e.pixelatedStyle:"";if(_){var j=v.simpleMap(i.range,i.r2l),re=v.simpleMap(g.range,g.r2l),se=j[1]<j[0],oe=re[1]>re[0];if(se||oe){var N=S+O/2,U=z+F/2;Y+="transform:"+M(N+"px",U+"px")+"scale("+(se?-1:1)+","+(oe?-1:1)+")"+M(-N+"px",-U+"px")+";"}}Z.attr("style",Y);var q=new Promise(function(Q){if(l._hasZ)Q();else if(l._hasSource)if(l._canvas&&l._canvas.el.width===h&&l._canvas.el.height===x&&l._canvas.source===l.source)Q();else{var W=document.createElement("canvas");W.width=h,W.height=x;var X=W.getContext("2d",{willReadFrequently:!0});l._image=l._image||new Image;var ee=l._image;ee.onload=function(){X.drawImage(ee,0,0),l._canvas={el:W,source:l.source},Q()},ee.setAttribute("src",l.source)}}).then(function(){var Q,W;if(l._hasZ)W=J(function(te,ie){return s[ie][te]}),Q=W.toDataURL("image/png");else if(l._hasSource)if(_)Q=l.source;else{var X=l._canvas.el.getContext("2d",{willReadFrequently:!0}),ee=X.getImageData(0,0,h,x).data;W=J(function(te,ie){var le=4*(ie*h+te);return[ee[le],ee[le+1],ee[le+2],ee[le+3]]}),Q=W.toDataURL("image/png")}Z.attr({"xlink:href":Q,height:F,width:O,x:S,y:z})});r._promises.push(q)})}},{"../../constants/xmlns_namespaces":480,"../../lib":503,"./constants":847,"@plotly/d3":58}],854:[function(d,ne,ae){var w=d("@plotly/d3");ne.exports=function(M){w.select(M).selectAll(".im image").style("opacity",function(T){return T[0].trace.opacity})}},{"@plotly/d3":58}],855:[function(d,ne,ae){var w=d("../../lib/extend").extendFlat,v=d("../../lib/extend").extendDeep,M=d("../../plot_api/edit_types").overrideAll,T=d("../../plots/font_attributes"),e=d("../../components/color/attributes"),a=d("../../plots/domain").attributes,n=d("../../plots/cartesian/layout_attributes"),r=d("../../plot_api/plot_template").templatedArray,t=d("../../constants/delta.js"),f=d("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,o=T({editType:"plot",colorEditType:"plot"}),i={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:e.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},g={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},p=r("step",v({},i,{range:g}));ne.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:a({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:w({},o,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:f("value")},font:w({},o,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:f("value")},increasing:{symbol:{valType:"string",dflt:t.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:t.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:t.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:t.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:w({},o,{}),editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:v({},i,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:M({range:g,visible:w({},n.visible,{dflt:!0}),tickmode:n.tickmode,nticks:n.nticks,tick0:n.tick0,dtick:n.dtick,tickvals:n.tickvals,ticktext:n.ticktext,ticks:w({},n.ticks,{dflt:"outside"}),ticklen:n.ticklen,tickwidth:n.tickwidth,tickcolor:n.tickcolor,ticklabelstep:n.ticklabelstep,showticklabels:n.showticklabels,tickfont:T({}),tickangle:n.tickangle,tickformat:n.tickformat,tickformatstops:n.tickformatstops,tickprefix:n.tickprefix,showtickprefix:n.showtickprefix,ticksuffix:n.ticksuffix,showticksuffix:n.showticksuffix,separatethousands:n.separatethousands,exponentformat:n.exponentformat,minexponent:n.minexponent,showexponent:n.showexponent,editType:"plot"},"plot"),steps:p,threshold:{line:{color:w({},i.line.color,{}),width:w({},i.line.width,{dflt:1}),editType:"plot"},thickness:w({},i.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":365,"../../constants/delta.js":473,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/layout_attributes":569,"../../plots/domain":584,"../../plots/font_attributes":585}],856:[function(d,ne,ae){var w=d("../../plots/plots");ae.name="indicator",ae.plot=function(v,M,T,e){w.plotBasePlot(ae.name,v,M,T,e)},ae.clean=function(v,M,T,e){w.cleanBasePlot(ae.name,v,M,T,e)}},{"../../plots/plots":619}],857:[function(d,ne,ae){function w(v,M){var T=[],e=M.value;typeof M._lastValue!="number"&&(M._lastValue=M.value);var a=M._lastValue,n=a;return M._hasDelta&&typeof M.delta.reference=="number"&&(n=M.delta.reference),T[0]={y:e,lastY:a,delta:e-n,relativeDelta:(e-n)/n},T}ne.exports={calc:w}},{}],858:[function(d,ne,ae){ne.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],859:[function(d,ne,ae){var w=d("../../lib"),v=d("./attributes"),M=d("../../plots/domain").defaults,T=d("../../plot_api/plot_template"),e=d("../../plots/array_container_defaults"),a=d("./constants.js"),n=d("../../plots/cartesian/tick_value_defaults"),r=d("../../plots/cartesian/tick_mark_defaults"),t=d("../../plots/cartesian/tick_label_defaults"),f=d("../../plots/cartesian/prefix_suffix_defaults");function o(g,p,y,c){function b(D,R){return w.coerce(g,p,v,D,R)}M(p,c,b),b("mode"),p._hasNumber=p.mode.indexOf("number")!==-1,p._hasDelta=p.mode.indexOf("delta")!==-1,p._hasGauge=p.mode.indexOf("gauge")!==-1;var l=b("value");p._range=[0,typeof l=="number"?1.5*l:1];var _=new Array(2),s;p._hasNumber&&(b("number.valueformat"),b("number.font.color",c.font.color),b("number.font.family",c.font.family),b("number.font.size"),p.number.font.size===void 0&&(p.number.font.size=a.defaultNumberFontSize,_[0]=!0),b("number.prefix"),b("number.suffix"),s=p.number.font.size);var A;p._hasDelta&&(b("delta.font.color",c.font.color),b("delta.font.family",c.font.family),b("delta.font.size"),p.delta.font.size===void 0&&(p.delta.font.size=(p._hasNumber?.5:1)*(s||a.defaultNumberFontSize),_[1]=!0),b("delta.reference",p.value),b("delta.relative"),b("delta.valueformat",p.delta.relative?"2%":""),b("delta.increasing.symbol"),b("delta.increasing.color"),b("delta.decreasing.symbol"),b("delta.decreasing.color"),b("delta.position"),A=p.delta.font.size),p._scaleNumbers=(!p._hasNumber||_[0])&&(!p._hasDelta||_[1])||!1,b("title.font.color",c.font.color),b("title.font.family",c.font.family),b("title.font.size",.25*(s||A||a.defaultNumberFontSize)),b("title.text");var m,h,x,u;function L(D,R){return w.coerce(m,h,v.gauge,D,R)}function S(D,R){return w.coerce(x,u,v.gauge.axis,D,R)}if(p._hasGauge){m=g.gauge,m||(m={}),h=T.newContainer(p,"gauge"),L("shape");var k=p._isBullet=p.gauge.shape==="bullet";k||b("title.align","center");var P=p._isAngular=p.gauge.shape==="angular";P||b("align","center"),L("bgcolor",c.paper_bgcolor),L("borderwidth"),L("bordercolor"),L("bar.color"),L("bar.line.color"),L("bar.line.width");var z=a.valueThickness*(p.gauge.shape==="bullet"?.5:1);L("bar.thickness",z),e(m,h,{name:"steps",handleItemDefaults:i}),L("threshold.value"),L("threshold.thickness"),L("threshold.line.width"),L("threshold.line.color"),x={},m&&(x=m.axis||{}),u=T.newContainer(h,"axis"),S("visible"),p._range=S("range",p._range);var I={outerTicks:!0};n(x,u,S,"linear"),f(x,u,S,"linear",I),t(x,u,S,"linear",I),r(x,u,S,I)}else b("title.align","center"),b("align","center"),p._isAngular=p._isBullet=!1;p._length=null}function i(g,p){function y(c,b){return w.coerce(g,p,v.gauge.steps,c,b)}y("color"),y("line.color"),y("line.width"),y("range"),y("thickness")}ne.exports={supplyDefaults:o}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_mark_defaults":579,"../../plots/cartesian/tick_value_defaults":580,"../../plots/domain":584,"./attributes":855,"./constants.js":858}],860:[function(d,ne,ae){ne.exports={moduleType:"trace",name:"indicator",basePlotModule:d("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:d("./attributes"),supplyDefaults:d("./defaults").supplyDefaults,calc:d("./calc").calc,plot:d("./plot"),meta:{}}},{"./attributes":855,"./base_plot":856,"./calc":857,"./defaults":859,"./plot":861}],861:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("d3-interpolate").interpolate,M=d("d3-interpolate").interpolateNumber,T=d("../../lib"),e=T.strScale,a=T.strTranslate,n=T.rad2deg,r=d("../../constants/alignment").MID_SHIFT,t=d("../../components/drawing"),f=d("./constants"),o=d("../../lib/svg_text_utils"),i=d("../../plots/cartesian/axes"),g=d("../../plots/cartesian/axis_defaults"),p=d("../../plots/cartesian/position_defaults"),y=d("../../plots/cartesian/layout_attributes"),c=d("../../components/color"),b={left:"start",center:"middle",right:"end"},l={left:0,center:.5,right:1},_=/[yzafpnµmkMGTPEZY]/;function s(I){return I&&I.duration>0}ne.exports=function(D,R,O,F){var V=D._fullLayout,G;s(O)&&F&&(G=F()),T.makeTraceGroups(V._indicatorlayer,R,"trace").each(function(J){var Z=J[0],Y=Z.trace,j=w.select(this),re=Y._hasGauge,se=Y._isAngular,oe=Y._isBullet,N=Y.domain,U={w:V._size.w*(N.x[1]-N.x[0]),h:V._size.h*(N.y[1]-N.y[0]),l:V._size.l+V._size.w*N.x[0],r:V._size.r+V._size.w*(1-N.x[1]),t:V._size.t+V._size.h*(1-N.y[1]),b:V._size.b+V._size.h*N.y[0]},q=U.l+U.w/2,Q=U.t+U.h/2,W=Math.min(U.w/2,U.h),X=f.innerRadius*W,ee,te,ie,le=Y.align||"center";if(te=Q,!re)ee=U.l+l[le]*U.w,ie=function(xe){return S(xe,U.w,U.h)};else if(se&&(ee=q,te=Q+W/2,ie=function(xe){return k(xe,.9*X)}),oe){var ge=f.bulletPadding,fe=1-f.bulletNumberDomainSize+ge;ee=U.l+(fe+(1-fe)*l[le])*U.w,ie=function(xe){return S(xe,(f.bulletNumberDomainSize-ge)*U.w,U.h)}}h(D,j,J,{numbersX:ee,numbersY:te,numbersScaler:ie,transitionOpts:O,onComplete:G});var pe,ye;re&&(pe={range:Y.gauge.axis.range,color:Y.gauge.bgcolor,line:{color:Y.gauge.bordercolor,width:0},thickness:1},ye={range:Y.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:Y.gauge.bordercolor,width:Y.gauge.borderwidth},thickness:1});var Te=j.selectAll("g.angular").data(se?J:[]);Te.exit().remove();var _e=j.selectAll("g.angularaxis").data(se?J:[]);_e.exit().remove(),se&&m(D,j,J,{radius:W,innerRadius:X,gauge:Te,layer:_e,size:U,gaugeBg:pe,gaugeOutline:ye,transitionOpts:O,onComplete:G});var De=j.selectAll("g.bullet").data(oe?J:[]);De.exit().remove();var Be=j.selectAll("g.bulletaxis").data(oe?J:[]);Be.exit().remove(),oe&&A(D,j,J,{gauge:De,layer:Be,size:U,gaugeBg:pe,gaugeOutline:ye,transitionOpts:O,onComplete:G});var Ue=j.selectAll("text.title").data(J);Ue.exit().remove(),Ue.enter().append("text").classed("title",!0),Ue.attr("text-anchor",function(){return oe?b.right:b[Y.title.align]}).text(Y.title.text).call(t.font,Y.title.font).call(o.convertToTspans,D),Ue.attr("transform",function(){var xe=U.l+U.w*l[Y.title.align],Pe,Ve=f.titlePadding,Qe=t.bBox(Ue.node());if(re){if(se)if(Y.gauge.axis.visible){var Fe=t.bBox(_e.node());Pe=Fe.top-Ve-Qe.bottom}else Pe=U.t+U.h/2-W/2-Qe.bottom-Ve;oe&&(Pe=te-(Qe.top+Qe.bottom)/2,xe=U.l-f.bulletPadding*U.w)}else Pe=Y._numbersTop-Ve-Qe.bottom;return a(xe,Pe)})})};function A(I,D,R,O){var F=R[0].trace,V=O.gauge,G=O.layer,J=O.gaugeBg,Z=O.gaugeOutline,Y=O.size,j=F.domain,re=O.transitionOpts,se=O.onComplete,oe,N,U,q,Q;V.enter().append("g").classed("bullet",!0),V.attr("transform",a(Y.l,Y.t)),G.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),G.selectAll("g.xbulletaxistick,path,text").remove();var W=Y.h,X=F.gauge.bar.thickness*W,ee=j.x[0],te=j.x[0]+(j.x[1]-j.x[0])*(F._hasNumber||F._hasDelta?1-f.bulletNumberDomainSize:1);oe=L(I,F.gauge.axis),oe._id="xbulletaxis",oe.domain=[ee,te],oe.setScale(),N=i.calcTicks(oe),U=i.makeTransTickFn(oe),q=i.getTickSigns(oe)[2],Q=Y.t+Y.h,oe.visible&&(i.drawTicks(I,oe,{vals:oe.ticks==="inside"?i.clipEnds(oe,N):N,layer:G,path:i.makeTickPath(oe,Q,q),transFn:U}),i.drawLabels(I,oe,{vals:N,layer:G,transFn:U,labelFns:i.makeLabelFns(oe,Q)}));function ie(_e){_e.attr("width",function(De){return Math.max(0,oe.c2p(De.range[1])-oe.c2p(De.range[0]))}).attr("x",function(De){return oe.c2p(De.range[0])}).attr("y",function(De){return .5*(1-De.thickness)*W}).attr("height",function(De){return De.thickness*W})}var le=[J].concat(F.gauge.steps),ge=V.selectAll("g.bg-bullet").data(le);ge.enter().append("g").classed("bg-bullet",!0).append("rect"),ge.select("rect").call(ie).call(x),ge.exit().remove();var fe=V.selectAll("g.value-bullet").data([F.gauge.bar]);fe.enter().append("g").classed("value-bullet",!0).append("rect"),fe.select("rect").attr("height",X).attr("y",(W-X)/2).call(x),s(re)?fe.select("rect").transition().duration(re.duration).ease(re.easing).each("end",function(){se&&se()}).each("interrupt",function(){se&&se()}).attr("width",Math.max(0,oe.c2p(Math.min(F.gauge.axis.range[1],R[0].y)))):fe.select("rect").attr("width",typeof R[0].y=="number"?Math.max(0,oe.c2p(Math.min(F.gauge.axis.range[1],R[0].y))):0),fe.exit().remove();var pe=R.filter(function(){return F.gauge.threshold.value||F.gauge.threshold.value===0}),ye=V.selectAll("g.threshold-bullet").data(pe);ye.enter().append("g").classed("threshold-bullet",!0).append("line"),ye.select("line").attr("x1",oe.c2p(F.gauge.threshold.value)).attr("x2",oe.c2p(F.gauge.threshold.value)).attr("y1",(1-F.gauge.threshold.thickness)/2*W).attr("y2",(1-(1-F.gauge.threshold.thickness)/2)*W).call(c.stroke,F.gauge.threshold.line.color).style("stroke-width",F.gauge.threshold.line.width),ye.exit().remove();var Te=V.selectAll("g.gauge-outline").data([Z]);Te.enter().append("g").classed("gauge-outline",!0).append("rect"),Te.select("rect").call(ie).call(x),Te.exit().remove()}function m(I,D,R,O){var F=R[0].trace,V=O.size,G=O.radius,J=O.innerRadius,Z=O.gaugeBg,Y=O.gaugeOutline,j=[V.l+V.w/2,V.t+V.h/2+G/2],re=O.gauge,se=O.layer,oe=O.transitionOpts,N=O.onComplete,U=Math.PI/2;function q(Le){var Ne=F.gauge.axis.range[0],dt=F.gauge.axis.range[1],Dt=(Le-Ne)/(dt-Ne)*Math.PI-U;return Dt<-U?-U:Dt>U?U:Dt}function Q(Le){return w.svg.arc().innerRadius((J+G)/2-Le/2*(G-J)).outerRadius((J+G)/2+Le/2*(G-J)).startAngle(-U)}function W(Le){Le.attr("d",function(Ne){return Q(Ne.thickness).startAngle(q(Ne.range[0])).endAngle(q(Ne.range[1]))()})}var X,ee,te,ie;re.enter().append("g").classed("angular",!0),re.attr("transform",a(j[0],j[1])),se.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),se.selectAll("g.xangularaxistick,path,text").remove(),X=L(I,F.gauge.axis),X.type="linear",X.range=F.gauge.axis.range,X._id="xangularaxis",X.ticklabeloverflow="allow",X.setScale();var le=function(Le){return(X.range[0]-Le.x)/(X.range[1]-X.range[0])*Math.PI+Math.PI},ge={},fe=i.makeLabelFns(X,0),pe=fe.labelStandoff;ge.xFn=function(Le){var Ne=le(Le);return Math.cos(Ne)*pe},ge.yFn=function(Le){var Ne=le(Le),dt=Math.sin(Ne)>0?.2:1;return-Math.sin(Ne)*(pe+Le.fontSize*dt)+Math.abs(Math.cos(Ne))*(Le.fontSize*r)},ge.anchorFn=function(Le){var Ne=le(Le),dt=Math.cos(Ne);return Math.abs(dt)<.1?"middle":dt>0?"start":"end"},ge.heightFn=function(Le,Ne,dt){var Dt=le(Le);return-.5*(1+Math.sin(Dt))*dt};var ye=function(Le){return a(j[0]+G*Math.cos(Le),j[1]-G*Math.sin(Le))};te=function(Le){return ye(le(Le))};var Te=function(Le){var Ne=le(Le);return ye(Ne)+"rotate("+-n(Ne)+")"};if(ee=i.calcTicks(X),ie=i.getTickSigns(X)[2],X.visible){ie=X.ticks==="inside"?-1:1;var _e=(X.linewidth||1)/2;i.drawTicks(I,X,{vals:ee,layer:se,path:"M"+ie*_e+",0h"+ie*X.ticklen,transFn:Te}),i.drawLabels(I,X,{vals:ee,layer:se,transFn:te,labelFns:ge})}var De=[Z].concat(F.gauge.steps),Be=re.selectAll("g.bg-arc").data(De);Be.enter().append("g").classed("bg-arc",!0).append("path"),Be.select("path").call(W).call(x),Be.exit().remove();var Ue=Q(F.gauge.bar.thickness),xe=re.selectAll("g.value-arc").data([F.gauge.bar]);xe.enter().append("g").classed("value-arc",!0).append("path");var Pe=xe.select("path");s(oe)?(Pe.transition().duration(oe.duration).ease(oe.easing).each("end",function(){N&&N()}).each("interrupt",function(){N&&N()}).attrTween("d",u(Ue,q(R[0].lastY),q(R[0].y))),F._lastValue=R[0].y):Pe.attr("d",typeof R[0].y=="number"?Ue.endAngle(q(R[0].y)):"M0,0Z"),Pe.call(x),xe.exit().remove(),De=[];var Ve=F.gauge.threshold.value;(Ve||Ve===0)&&De.push({range:[Ve,Ve],color:F.gauge.threshold.color,line:{color:F.gauge.threshold.line.color,width:F.gauge.threshold.line.width},thickness:F.gauge.threshold.thickness});var Qe=re.selectAll("g.threshold-arc").data(De);Qe.enter().append("g").classed("threshold-arc",!0).append("path"),Qe.select("path").call(W).call(x),Qe.exit().remove();var Fe=re.selectAll("g.gauge-outline").data([Y]);Fe.enter().append("g").classed("gauge-outline",!0).append("path"),Fe.select("path").call(W).call(x),Fe.exit().remove()}function h(I,D,R,O){var F=R[0].trace,V=O.numbersX,G=O.numbersY,J=F.align||"center",Z=b[J],Y=O.transitionOpts,j=O.onComplete,re=T.ensureSingle(D,"g","numbers"),se,oe,N,U=[];F._hasNumber&&U.push("number"),F._hasDelta&&(U.push("delta"),F.delta.position==="left"&&U.reverse());var q=re.selectAll("text").data(U);q.enter().append("text"),q.attr("text-anchor",function(){return Z}).attr("class",function(ye){return ye}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),q.exit().remove();function Q(ye,Te,_e,De){if(ye.match("s")&&_e>=0!=De>=0&&!Te(_e).slice(-1).match(_)&&!Te(De).slice(-1).match(_)){var Be=ye.slice().replace("s","f").replace(/\d+/,function(xe){return parseInt(xe)-1}),Ue=L(I,{tickformat:Be});return function(xe){return Math.abs(xe)<1?i.tickText(Ue,xe).text:Te(xe)}}else return Te}function W(){var ye=L(I,{tickformat:F.number.valueformat},F._range);ye.setScale(),i.prepTicks(ye);var Te=function(xe){return i.tickText(ye,xe).text},_e=F.number.suffix,De=F.number.prefix,Be=re.select("text.number");function Ue(){var xe=typeof R[0].y=="number"?De+Te(R[0].y)+_e:"-";Be.text(xe).call(t.font,F.number.font).call(o.convertToTspans,I)}return s(Y)?Be.transition().duration(Y.duration).ease(Y.easing).each("end",function(){Ue(),j&&j()}).each("interrupt",function(){Ue(),j&&j()}).attrTween("text",function(){var xe=w.select(this),Pe=M(R[0].lastY,R[0].y);F._lastValue=R[0].y;var Ve=Q(F.number.valueformat,Te,R[0].lastY,R[0].y);return function(Qe){xe.text(De+Ve(Pe(Qe))+_e)}}):Ue(),se=P(De+Te(R[0].y)+_e,F.number.font,Z,I),Be}function X(){var ye=L(I,{tickformat:F.delta.valueformat},F._range);ye.setScale(),i.prepTicks(ye);var Te=function(Pe){return i.tickText(ye,Pe).text},_e=function(Pe){var Ve=F.delta.relative?Pe.relativeDelta:Pe.delta;return Ve},De=function(Pe,Ve){return Pe===0||typeof Pe!="number"||isNaN(Pe)?"-":(Pe>0?F.delta.increasing.symbol:F.delta.decreasing.symbol)+Ve(Pe)},Be=function(Pe){return Pe.delta>=0?F.delta.increasing.color:F.delta.decreasing.color};F._deltaLastValue===void 0&&(F._deltaLastValue=_e(R[0]));var Ue=re.select("text.delta");Ue.call(t.font,F.delta.font).call(c.fill,Be({delta:F._deltaLastValue}));function xe(){Ue.text(De(_e(R[0]),Te)).call(c.fill,Be(R[0])).call(o.convertToTspans,I)}return s(Y)?Ue.transition().duration(Y.duration).ease(Y.easing).tween("text",function(){var Pe=w.select(this),Ve=_e(R[0]),Qe=F._deltaLastValue,Fe=Q(F.delta.valueformat,Te,Qe,Ve),Le=M(Qe,Ve);return F._deltaLastValue=Ve,function(Ne){Pe.text(De(Le(Ne),Fe)),Pe.call(c.fill,Be({delta:Le(Ne)}))}}).each("end",function(){xe(),j&&j()}).each("interrupt",function(){xe(),j&&j()}):xe(),oe=P(De(_e(R[0]),Te),F.delta.font,Z,I),Ue}var ee=F.mode+F.align,te;if(F._hasDelta&&(te=X(),ee+=F.delta.position+F.delta.font.size+F.delta.font.family+F.delta.valueformat,ee+=F.delta.increasing.symbol+F.delta.decreasing.symbol,N=oe),F._hasNumber&&(W(),ee+=F.number.font.size+F.number.font.family+F.number.valueformat+F.number.suffix+F.number.prefix,N=se),F._hasDelta&&F._hasNumber){var ie=[(se.left+se.right)/2,(se.top+se.bottom)/2],le=[(oe.left+oe.right)/2,(oe.top+oe.bottom)/2],ge,fe,pe=.75*F.delta.font.size;F.delta.position==="left"&&(ge=z(F,"deltaPos",0,-1*(se.width*l[F.align]+oe.width*(1-l[F.align])+pe),ee,Math.min),fe=ie[1]-le[1],N={width:se.width+oe.width+pe,height:Math.max(se.height,oe.height),left:oe.left+ge,right:se.right,top:Math.min(se.top,oe.top+fe),bottom:Math.max(se.bottom,oe.bottom+fe)}),F.delta.position==="right"&&(ge=z(F,"deltaPos",0,se.width*(1-l[F.align])+oe.width*l[F.align]+pe,ee,Math.max),fe=ie[1]-le[1],N={width:se.width+oe.width+pe,height:Math.max(se.height,oe.height),left:se.left,right:oe.right+ge,top:Math.min(se.top,oe.top+fe),bottom:Math.max(se.bottom,oe.bottom+fe)}),F.delta.position==="bottom"&&(ge=null,fe=oe.height,N={width:Math.max(se.width,oe.width),height:se.height+oe.height,left:Math.min(se.left,oe.left),right:Math.max(se.right,oe.right),top:se.bottom-se.height,bottom:se.bottom+oe.height}),F.delta.position==="top"&&(ge=null,fe=se.top,N={width:Math.max(se.width,oe.width),height:se.height+oe.height,left:Math.min(se.left,oe.left),right:Math.max(se.right,oe.right),top:se.bottom-se.height-oe.height,bottom:se.bottom}),te.attr({dx:ge,dy:fe})}(F._hasNumber||F._hasDelta)&&re.attr("transform",function(){var ye=O.numbersScaler(N);ee+=ye[2];var Te=z(F,"numbersScale",1,ye[0],ee,Math.min),_e;F._scaleNumbers||(Te=1),F._isAngular?_e=G-Te*N.bottom:_e=G-Te*(N.top+N.bottom)/2,F._numbersTop=Te*N.top+_e;var De=N[J];J==="center"&&(De=(N.left+N.right)/2);var Be=V-Te*De;return Be=z(F,"numbersTranslate",0,Be,ee,Math.max),a(Be,_e)+e(Te)})}function x(I){I.each(function(D){c.stroke(w.select(this),D.line.color)}).each(function(D){c.fill(w.select(this),D.color)}).style("stroke-width",function(D){return D.line.width})}function u(I,D,R){return function(){var O=v(D,R);return function(F){return I.endAngle(O(F))()}}}function L(I,D,R){var O=I._fullLayout,F=T.extendFlat({type:"linear",ticks:"outside",range:R,showline:!0},D),V={type:"linear",_id:"x"+D._id},G={letter:"x",font:O.font,noHover:!0,noTickson:!0};function J(Z,Y){return T.coerce(F,V,y,Z,Y)}return g(F,V,J,G,O),p(F,V,J,G),V}function S(I,D,R){var O=Math.min(D/I.width,R/I.height);return[O,I,D+"x"+R]}function k(I,D){var R=Math.sqrt(I.width/2*(I.width/2)+I.height*I.height),O=D/R;return[O,I,D]}function P(I,D,R,O){var F=document.createElementNS("http://www.w3.org/2000/svg","text"),V=w.select(F);return V.text(I).attr("x",0).attr("y",0).attr("text-anchor",R).attr("data-unformatted",I).call(o.convertToTspans,O).call(t.font,D),t.bBox(V.node())}function z(I,D,R,O,F,V){var G="_cache"+D;I[G]&&I[G].key===F||(I[G]={key:F,value:R});var J=T.aggNums(V,null,[I[G].value,O],2);return I[G].value=J,J}},{"../../components/color":366,"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_defaults":556,"../../plots/cartesian/layout_attributes":569,"../../plots/cartesian/position_defaults":572,"./constants":858,"@plotly/d3":58,"d3-interpolate":116}],862:[function(d,ne,ae){var w=d("../../components/colorscale/attributes"),v=d("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=d("../../plots/template_attributes").hovertemplateAttrs,T=d("../mesh3d/attributes"),e=d("../../plots/attributes"),a=d("../../lib/extend").extendFlat,n=d("../../plot_api/edit_types").overrideAll;function r(o){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function t(o){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}var f=ne.exports=n(a({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:r(),y:r(),z:r()},caps:{x:t(),y:t(),z:t()},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:M(),xhoverformat:v("x"),yhoverformat:v("y"),zhoverformat:v("z"),valuehoverformat:v("value",1),showlegend:a({},e.showlegend,{dflt:!1})},w("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,lightposition:T.lightposition,lighting:T.lighting,flatshading:T.flatshading,contour:T.contour,hoverinfo:a({},e.hoverinfo)}),"calc","nested");f.flatshading.dflt=!0,f.lighting.facenormalsepsilon.dflt=0,f.x.editType=f.y.editType=f.z.editType=f.value.editType="calc+clearAxisTypes",f.transforms=void 0},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],863:[function(d,ne,ae){var w=d("../../components/colorscale/calc"),v=d("../streamtube/calc").processGrid,M=d("../streamtube/calc").filter;ne.exports=function(e,a){a._len=Math.min(a.x.length,a.y.length,a.z.length,a.value.length),a._x=M(a.x,a._len),a._y=M(a.y,a._len),a._z=M(a.z,a._len),a._value=M(a.value,a._len);var n=v(a);a._gridFill=n.fill,a._Xs=n.Xs,a._Ys=n.Ys,a._Zs=n.Zs,a._len=n.len;for(var r=1/0,t=-1/0,f=0;f<a._len;f++){var o=a._value[f];r=Math.min(r,o),t=Math.max(t,o)}a._minValues=r,a._maxValues=t,a._vMin=a.isomin===void 0||a.isomin===null?r:a.isomin,a._vMax=a.isomax===void 0||a.isomin===null?t:a.isomax,w(e,a,{vals:[a._vMin,a._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374,"../streamtube/calc":1045}],864:[function(d,ne,ae){var w=d("../../../stackgl_modules").gl_mesh3d,v=d("../../lib/gl_format_color").parseColorScale,M=d("../../lib/str2rgbarray"),T=d("../../components/colorscale").extractOpts,e=d("../../plots/gl3d/zip3"),a=function(i,g){for(var p=g.length-1;p>0;p--){var y=Math.min(g[p],g[p-1]),c=Math.max(g[p],g[p-1]);if(c>y&&y<i&&i<=c)return{id:p,distRatio:(c-i)/(c-y)}}return{id:0,distRatio:0}};function n(i,g,p){this.scene=i,this.uid=p,this.mesh=g,this.name="",this.data=null,this.showContour=!1}var r=n.prototype;r.handlePick=function(i){if(i.object===this.mesh){var g=i.data.index,p=this.data._meshX[g],y=this.data._meshY[g],c=this.data._meshZ[g],b=this.data._Ys.length,l=this.data._Zs.length,_=a(p,this.data._Xs).id,s=a(y,this.data._Ys).id,A=a(c,this.data._Zs).id,m=i.index=A+l*s+l*b*_;i.traceCoordinate=[this.data._meshX[m],this.data._meshY[m],this.data._meshZ[m],this.data._value[m]];var h=this.data.hovertext||this.data.text;return Array.isArray(h)&&h[m]!==void 0?i.textLabel=h[m]:h&&(i.textLabel=h),!0}},r.update=function(i){var g=this.scene,p=g.fullSceneLayout;this.data=f(i);function y(s,A,m,h){return A.map(function(x){return s.d2l(x,0,h)*m})}var c=e(y(p.xaxis,i._meshX,g.dataScale[0],i.xcalendar),y(p.yaxis,i._meshY,g.dataScale[1],i.ycalendar),y(p.zaxis,i._meshZ,g.dataScale[2],i.zcalendar)),b=e(i._meshI,i._meshJ,i._meshK),l={positions:c,cells:b,lightPosition:[i.lightposition.x,i.lightposition.y,i.lightposition.z],ambient:i.lighting.ambient,diffuse:i.lighting.diffuse,specular:i.lighting.specular,roughness:i.lighting.roughness,fresnel:i.lighting.fresnel,vertexNormalsEpsilon:i.lighting.vertexnormalsepsilon,faceNormalsEpsilon:i.lighting.facenormalsepsilon,opacity:i.opacity,contourEnable:i.contour.show,contourColor:M(i.contour.color).slice(0,3),contourWidth:i.contour.width,useFacetNormals:i.flatshading},_=T(i);l.vertexIntensity=i._meshIntensity,l.vertexIntensityBounds=[_.min,_.max],l.colormap=v(i),this.mesh.update(l)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var t=["xyz","xzy","yxz","yzx","zxy","zyx"];function f(i){i._meshI=[],i._meshJ=[],i._meshK=[];var g=i.surface.show,p=i.spaceframe.show,y=i.surface.fill,c=i.spaceframe.fill,b=!1,l=!1,_=0,s,A,m=i._Xs,h=i._Ys,x=i._Zs,u=m.length,L=h.length,S=x.length,k=t.indexOf(i._gridFill.replace(/-/g,"").replace(/\+/g,"")),P=function(Ct,Mt,rt){switch(k){case 5:return rt+S*Mt+S*L*Ct;case 4:return rt+S*Ct+S*u*Mt;case 3:return Mt+L*rt+L*S*Ct;case 2:return Mt+L*Ct+L*u*rt;case 1:return Ct+u*rt+u*S*Mt;default:return Ct+u*Mt+u*L*rt}},z=i._minValues,I=i._maxValues,D=i._vMin,R=i._vMax,O,F,V,G;function J(Ct,Mt,rt){for(var ct=G.length,Ze=A;Ze<ct;Ze++)if(Ct===O[Ze]&&Mt===F[Ze]&&rt===V[Ze])return Ze;return-1}function Z(){A=s}function Y(){O=[],F=[],V=[],G=[],s=0,Z()}function j(Ct,Mt,rt,ct){return O.push(Ct),F.push(Mt),V.push(rt),G.push(ct),s++,s-1}function re(Ct,Mt,rt){return i._meshI.push(Ct),i._meshJ.push(Mt),i._meshK.push(rt),_++,_-1}function se(Ct,Mt,rt){for(var ct=[],Ze=0;Ze<Ct.length;Ze++)ct[Ze]=(Ct[Ze]+Mt[Ze]+rt[Ze])/3;return ct}function oe(Ct,Mt,rt){for(var ct=[],Ze=0;Ze<Ct.length;Ze++)ct[Ze]=Ct[Ze]*(1-rt)+rt*Mt[Ze];return ct}var N;function U(Ct){N=Ct}function q(Ct,Mt){var rt=Ct[0],ct=Ct[1],Ze=Ct[2],ke=se(rt,ct,Ze),Ge=Math.sqrt(1-N),Je=oe(ke,rt,Ge),ot=oe(ke,ct,Ge),Pt=oe(ke,Ze,Ge),_t=Mt[0],Bt=Mt[1],qt=Mt[2];return{xyzv:[[rt,ct,ot],[ot,Je,rt],[ct,Ze,Pt],[Pt,ot,ct],[Ze,rt,Je],[Je,Pt,Ze]],abc:[[_t,Bt,-1],[-1,-1,_t],[Bt,qt,-1],[-1,-1,Bt],[qt,_t,-1],[-1,-1,qt]]}}function Q(Ct,Mt){return Ct==="all"||Ct===null?!0:Ct.indexOf(Mt)>-1}function W(Ct,Mt){return Ct===null?Mt:Ct}function X(Ct,Mt,rt){Z();var ct=[Mt],Ze=[rt];if(N>=1)ct=[Mt],Ze=[rt];else if(N>0){var ke=q(Mt,rt);ct=ke.xyzv,Ze=ke.abc}for(var Ge=0;Ge<ct.length;Ge++){Mt=ct[Ge],rt=Ze[Ge];for(var Je=[],ot=0;ot<3;ot++){var Pt=Mt[ot][0],_t=Mt[ot][1],Bt=Mt[ot][2],qt=Mt[ot][3],Ot=rt[ot]>-1?rt[ot]:J(Pt,_t,Bt);Ot>-1?Je[ot]=Ot:Je[ot]=j(Pt,_t,Bt,W(Ct,qt))}re(Je[0],Je[1],Je[2])}}function ee(Ct,Mt,rt){var ct=function(Ze,ke,Ge){X(Ct,[Mt[Ze],Mt[ke],Mt[Ge]],[rt[Ze],rt[ke],rt[Ge]])};ct(0,1,2),ct(2,3,0)}function te(Ct,Mt,rt){var ct=function(Ze,ke,Ge){X(Ct,[Mt[Ze],Mt[ke],Mt[Ge]],[rt[Ze],rt[ke],rt[Ge]])};ct(0,1,2),ct(3,0,1),ct(2,3,0),ct(1,2,3)}function ie(Ct,Mt,rt,ct){var Ze=Ct[3];Ze<rt&&(Ze=rt),Ze>ct&&(Ze=ct);for(var ke=(Ct[3]-Ze)/(Ct[3]-Mt[3]+1e-9),Ge=[],Je=0;Je<4;Je++)Ge[Je]=(1-ke)*Ct[Je]+ke*Mt[Je];return Ge}function le(Ct,Mt,rt){return Ct>=Mt&&Ct<=rt}function ge(Ct){var Mt=.001*(R-D);return Ct>=D-Mt&&Ct<=R+Mt}function fe(Ct){for(var Mt=[],rt=0;rt<4;rt++){var ct=Ct[rt];Mt.push([i._x[ct],i._y[ct],i._z[ct],i._value[ct]])}return Mt}var pe=3;function ye(Ct,Mt,rt,ct,Ze,ke){ke||(ke=1),rt=[-1,-1,-1];var Ge=!1,Je=[le(Mt[0][3],ct,Ze),le(Mt[1][3],ct,Ze),le(Mt[2][3],ct,Ze)];if(!Je[0]&&!Je[1]&&!Je[2])return!1;var ot=function(_t,Bt,qt){return ge(Bt[0][3])&&ge(Bt[1][3])&&ge(Bt[2][3])?(X(_t,Bt,qt),!0):ke<pe?ye(_t,Bt,qt,D,R,++ke):!1};if(Je[0]&&Je[1]&&Je[2])return ot(Ct,Mt,rt)||Ge;var Pt=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(_t){if(Je[_t[0]]&&Je[_t[1]]&&!Je[_t[2]]){var Bt=Mt[_t[0]],qt=Mt[_t[1]],Ot=Mt[_t[2]],$t=ie(Ot,Bt,ct,Ze),rr=ie(Ot,qt,ct,Ze);Ge=ot(Ct,[rr,$t,Bt],[-1,-1,rt[_t[0]]])||Ge,Ge=ot(Ct,[Bt,qt,rr],[rt[_t[0]],rt[_t[1]],-1])||Ge,Pt=!0}}),Pt||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(_t){if(Je[_t[0]]&&!Je[_t[1]]&&!Je[_t[2]]){var Bt=Mt[_t[0]],qt=Mt[_t[1]],Ot=Mt[_t[2]],$t=ie(qt,Bt,ct,Ze),rr=ie(Ot,Bt,ct,Ze);Ge=ot(Ct,[rr,$t,Bt],[-1,-1,rt[_t[0]]])||Ge,Pt=!0}}),Ge}function Te(Ct,Mt,rt,ct){var Ze=!1,ke=fe(Mt),Ge=[le(ke[0][3],rt,ct),le(ke[1][3],rt,ct),le(ke[2][3],rt,ct),le(ke[3][3],rt,ct)];if(!Ge[0]&&!Ge[1]&&!Ge[2]&&!Ge[3])return Ze;if(Ge[0]&&Ge[1]&&Ge[2]&&Ge[3])return l&&(Ze=te(Ct,ke,Mt)||Ze),Ze;var Je=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(ot){if(Ge[ot[0]]&&Ge[ot[1]]&&Ge[ot[2]]&&!Ge[ot[3]]){var Pt=ke[ot[0]],_t=ke[ot[1]],Bt=ke[ot[2]],qt=ke[ot[3]];if(l)Ze=X(Ct,[Pt,_t,Bt],[Mt[ot[0]],Mt[ot[1]],Mt[ot[2]]])||Ze;else{var Ot=ie(qt,Pt,rt,ct),$t=ie(qt,_t,rt,ct),rr=ie(qt,Bt,rt,ct);Ze=X(null,[Ot,$t,rr],[-1,-1,-1])||Ze}Je=!0}}),Je||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(ot){if(Ge[ot[0]]&&Ge[ot[1]]&&!Ge[ot[2]]&&!Ge[ot[3]]){var Pt=ke[ot[0]],_t=ke[ot[1]],Bt=ke[ot[2]],qt=ke[ot[3]],Ot=ie(Bt,Pt,rt,ct),$t=ie(Bt,_t,rt,ct),rr=ie(qt,_t,rt,ct),er=ie(qt,Pt,rt,ct);l?(Ze=X(Ct,[Pt,er,Ot],[Mt[ot[0]],-1,-1])||Ze,Ze=X(Ct,[_t,$t,rr],[Mt[ot[1]],-1,-1])||Ze):Ze=ee(null,[Ot,$t,rr,er],[-1,-1,-1,-1])||Ze,Je=!0}}),Je)||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(ot){if(Ge[ot[0]]&&!Ge[ot[1]]&&!Ge[ot[2]]&&!Ge[ot[3]]){var Pt=ke[ot[0]],_t=ke[ot[1]],Bt=ke[ot[2]],qt=ke[ot[3]],Ot=ie(_t,Pt,rt,ct),$t=ie(Bt,Pt,rt,ct),rr=ie(qt,Pt,rt,ct);l?(Ze=X(Ct,[Pt,Ot,$t],[Mt[ot[0]],-1,-1])||Ze,Ze=X(Ct,[Pt,$t,rr],[Mt[ot[0]],-1,-1])||Ze,Ze=X(Ct,[Pt,rr,Ot],[Mt[ot[0]],-1,-1])||Ze):Ze=X(null,[Ot,$t,rr],[-1,-1,-1])||Ze,Je=!0}}),Ze}function _e(Ct,Mt,rt,ct,Ze,ke,Ge,Je,ot,Pt,_t){var Bt=!1;return b&&(Q(Ct,"A")&&(Bt=Te(null,[Mt,rt,ct,ke],Pt,_t)||Bt),Q(Ct,"B")&&(Bt=Te(null,[rt,ct,Ze,ot],Pt,_t)||Bt),Q(Ct,"C")&&(Bt=Te(null,[rt,ke,Ge,ot],Pt,_t)||Bt),Q(Ct,"D")&&(Bt=Te(null,[ct,ke,Je,ot],Pt,_t)||Bt),Q(Ct,"E")&&(Bt=Te(null,[rt,ct,ke,ot],Pt,_t)||Bt)),l&&(Bt=Te(Ct,[rt,ct,ke,ot],Pt,_t)||Bt),Bt}function De(Ct,Mt,rt,ct,Ze,ke,Ge,Je){return[Je[0]===!0?!0:ye(Ct,fe([Mt,rt,ct]),[Mt,rt,ct],ke,Ge),Je[1]===!0?!0:ye(Ct,fe([ct,Ze,Mt]),[ct,Ze,Mt],ke,Ge)]}function Be(Ct,Mt,rt,ct,Ze,ke,Ge,Je,ot){return Je?De(Ct,Mt,rt,Ze,ct,ke,Ge,ot):De(Ct,rt,Ze,ct,Mt,ke,Ge,ot)}function Ue(Ct,Mt,rt,ct,Ze,ke,Ge){var Je=!1,ot,Pt,_t,Bt,qt=function(){Je=ye(Ct,[ot,Pt,_t],[-1,-1,-1],Ze,ke)||Je,Je=ye(Ct,[_t,Bt,ot],[-1,-1,-1],Ze,ke)||Je},Ot=Ge[0],$t=Ge[1],rr=Ge[2];return Ot&&(ot=oe(fe([P(Mt,rt-0,ct-0)])[0],fe([P(Mt-1,rt-0,ct-0)])[0],Ot),Pt=oe(fe([P(Mt,rt-0,ct-1)])[0],fe([P(Mt-1,rt-0,ct-1)])[0],Ot),_t=oe(fe([P(Mt,rt-1,ct-1)])[0],fe([P(Mt-1,rt-1,ct-1)])[0],Ot),Bt=oe(fe([P(Mt,rt-1,ct-0)])[0],fe([P(Mt-1,rt-1,ct-0)])[0],Ot),qt()),$t&&(ot=oe(fe([P(Mt-0,rt,ct-0)])[0],fe([P(Mt-0,rt-1,ct-0)])[0],$t),Pt=oe(fe([P(Mt-0,rt,ct-1)])[0],fe([P(Mt-0,rt-1,ct-1)])[0],$t),_t=oe(fe([P(Mt-1,rt,ct-1)])[0],fe([P(Mt-1,rt-1,ct-1)])[0],$t),Bt=oe(fe([P(Mt-1,rt,ct-0)])[0],fe([P(Mt-1,rt-1,ct-0)])[0],$t),qt()),rr&&(ot=oe(fe([P(Mt-0,rt-0,ct)])[0],fe([P(Mt-0,rt-0,ct-1)])[0],rr),Pt=oe(fe([P(Mt-0,rt-1,ct)])[0],fe([P(Mt-0,rt-1,ct-1)])[0],rr),_t=oe(fe([P(Mt-1,rt-1,ct)])[0],fe([P(Mt-1,rt-1,ct-1)])[0],rr),Bt=oe(fe([P(Mt-1,rt-0,ct)])[0],fe([P(Mt-1,rt-0,ct-1)])[0],rr),qt()),Je}function xe(Ct,Mt,rt,ct,Ze,ke,Ge,Je,ot,Pt,_t,Bt){var qt=Ct;return Bt?(b&&Ct==="even"&&(qt=null),_e(qt,Mt,rt,ct,Ze,ke,Ge,Je,ot,Pt,_t)):(b&&Ct==="odd"&&(qt=null),_e(qt,ot,Je,Ge,ke,Ze,ct,rt,Mt,Pt,_t))}function Pe(Ct,Mt,rt,ct,Ze){for(var ke=[],Ge=0,Je=0;Je<Mt.length;Je++)for(var ot=Mt[Je],Pt=1;Pt<S;Pt++)for(var _t=1;_t<L;_t++)ke.push(Be(Ct,P(ot,_t-1,Pt-1),P(ot,_t-1,Pt),P(ot,_t,Pt-1),P(ot,_t,Pt),rt,ct,(ot+_t+Pt)%2,Ze&&Ze[Ge]?Ze[Ge]:[])),Ge++;return ke}function Ve(Ct,Mt,rt,ct,Ze){for(var ke=[],Ge=0,Je=0;Je<Mt.length;Je++)for(var ot=Mt[Je],Pt=1;Pt<u;Pt++)for(var _t=1;_t<S;_t++)ke.push(Be(Ct,P(Pt-1,ot,_t-1),P(Pt,ot,_t-1),P(Pt-1,ot,_t),P(Pt,ot,_t),rt,ct,(Pt+ot+_t)%2,Ze&&Ze[Ge]?Ze[Ge]:[])),Ge++;return ke}function Qe(Ct,Mt,rt,ct,Ze){for(var ke=[],Ge=0,Je=0;Je<Mt.length;Je++)for(var ot=Mt[Je],Pt=1;Pt<L;Pt++)for(var _t=1;_t<u;_t++)ke.push(Be(Ct,P(_t-1,Pt-1,ot),P(_t-1,Pt,ot),P(_t,Pt-1,ot),P(_t,Pt,ot),rt,ct,(_t+Pt+ot)%2,Ze&&Ze[Ge]?Ze[Ge]:[])),Ge++;return ke}function Fe(Ct,Mt,rt){for(var ct=1;ct<S;ct++)for(var Ze=1;Ze<L;Ze++)for(var ke=1;ke<u;ke++)xe(Ct,P(ke-1,Ze-1,ct-1),P(ke-1,Ze-1,ct),P(ke-1,Ze,ct-1),P(ke-1,Ze,ct),P(ke,Ze-1,ct-1),P(ke,Ze-1,ct),P(ke,Ze,ct-1),P(ke,Ze,ct),Mt,rt,(ke+Ze+ct)%2)}function Le(Ct,Mt,rt){l=!0,Fe(Ct,Mt,rt),l=!1}function Ne(Ct,Mt,rt){b=!0,Fe(Ct,Mt,rt),b=!1}function dt(Ct,Mt,rt,ct,Ze,ke){for(var Ge=[],Je=0,ot=0;ot<Mt.length;ot++)for(var Pt=Mt[ot],_t=1;_t<S;_t++)for(var Bt=1;Bt<L;Bt++)Ge.push(Ue(Ct,Pt,Bt,_t,rt,ct,Ze[ot],ke&&ke[Je]?ke[Je]:[])),Je++;return Ge}function Dt(Ct,Mt,rt,ct,Ze,ke){for(var Ge=[],Je=0,ot=0;ot<Mt.length;ot++)for(var Pt=Mt[ot],_t=1;_t<u;_t++)for(var Bt=1;Bt<S;Bt++)Ge.push(Ue(Ct,_t,Pt,Bt,rt,ct,Ze[ot],ke&&ke[Je]?ke[Je]:[])),Je++;return Ge}function Xt(Ct,Mt,rt,ct,Ze,ke){for(var Ge=[],Je=0,ot=0;ot<Mt.length;ot++)for(var Pt=Mt[ot],_t=1;_t<L;_t++)for(var Bt=1;Bt<u;Bt++)Ge.push(Ue(Ct,Bt,_t,Pt,rt,ct,Ze[ot],ke&&ke[Je]?ke[Je]:[])),Je++;return Ge}function At(Ct,Mt){for(var rt=[],ct=Ct;ct<Mt;ct++)rt.push(ct);return rt}function zt(){for(var Ct=0;Ct<u;Ct++)for(var Mt=0;Mt<L;Mt++)for(var rt=0;rt<S;rt++){var ct=P(Ct,Mt,rt);j(i._x[ct],i._y[ct],i._z[ct],i._value[ct])}}function Ut(){Y(),zt();var Ct=null;if(p&&c&&(U(c),Le(Ct,D,R)),g&&y){U(y);for(var Mt=i.surface.pattern,rt=i.surface.count,ct=0;ct<rt;ct++){var Ze=rt===1?.5:ct/(rt-1),ke=(1-Ze)*D+Ze*R,Ge=Math.abs(ke-z),Je=Math.abs(ke-I),ot=Ge>Je?[z,ke]:[ke,I];Ne(Mt,ot[0],ot[1])}}var Pt=[[Math.min(D,I),Math.max(D,I)],[Math.min(z,R),Math.max(z,R)]];["x","y","z"].forEach(function(_t){for(var Bt=[],qt=0;qt<Pt.length;qt++){var Ot=0,$t=Pt[qt][0],rr=Pt[qt][1],er=i.slices[_t];if(er.show&&er.fill){U(er.fill);var pr=[],Xr=[],hn=[];if(er.locations.length)for(var Qr=0;Qr<er.locations.length;Qr++){var nt=a(er.locations[Qr],_t==="x"?m:_t==="y"?h:x);nt.distRatio===0?pr.push(nt.id):nt.id>0&&(Xr.push(nt.id),_t==="x"?hn.push([nt.distRatio,0,0]):_t==="y"?hn.push([0,nt.distRatio,0]):hn.push([0,0,nt.distRatio]))}else _t==="x"?pr=At(1,u-1):_t==="y"?pr=At(1,L-1):pr=At(1,S-1);Xr.length>0&&(_t==="x"?Bt[Ot]=dt(Ct,Xr,$t,rr,hn,Bt[Ot]):_t==="y"?Bt[Ot]=Dt(Ct,Xr,$t,rr,hn,Bt[Ot]):Bt[Ot]=Xt(Ct,Xr,$t,rr,hn,Bt[Ot]),Ot++),pr.length>0&&(_t==="x"?Bt[Ot]=Pe(Ct,pr,$t,rr,Bt[Ot]):_t==="y"?Bt[Ot]=Ve(Ct,pr,$t,rr,Bt[Ot]):Bt[Ot]=Qe(Ct,pr,$t,rr,Bt[Ot]),Ot++)}var Ht=i.caps[_t];Ht.show&&Ht.fill&&(U(Ht.fill),_t==="x"?Bt[Ot]=Pe(Ct,[0,u-1],$t,rr,Bt[Ot]):_t==="y"?Bt[Ot]=Ve(Ct,[0,L-1],$t,rr,Bt[Ot]):Bt[Ot]=Qe(Ct,[0,S-1],$t,rr,Bt[Ot]),Ot++)}}),_===0&&Y(),i._meshX=O,i._meshY=F,i._meshZ=V,i._meshIntensity=G,i._Xs=m,i._Ys=h,i._Zs=x}return Ut(),i}function o(i,g){var p=i.glplot.gl,y=w({gl:p}),c=new n(i,y,g.uid);return y._trace=c,c.update(g),i.glplot.add(y),c}ne.exports={findNearestOnAxis:a,generateIsoMeshes:f,createIsosurfaceTrace:o}},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609}],865:[function(d,ne,ae){var w=d("../../lib"),v=d("../../registry"),M=d("./attributes"),T=d("../../components/colorscale/defaults");function e(n,r,t,f){function o(i,g){return w.coerce(n,r,M,i,g)}a(n,r,t,f,o)}function a(n,r,t,f,o){var i=o("isomin"),g=o("isomax");g!=null&&i!==void 0&&i!==null&&i>g&&(r.isomin=null,r.isomax=null);var p=o("x"),y=o("y"),c=o("z"),b=o("value");if(!p||!p.length||!y||!y.length||!c||!c.length||!b||!b.length){r.visible=!1;return}var l=v.getComponentMethod("calendars","handleTraceDefaults");l(n,r,["x","y","z"],f),o("valuehoverformat"),["x","y","z"].forEach(function(m){o(m+"hoverformat");var h="caps."+m,x=o(h+".show");x&&o(h+".fill");var u="slices."+m,L=o(u+".show");L&&(o(u+".fill"),o(u+".locations"))});var _=o("spaceframe.show");_&&o("spaceframe.fill");var s=o("surface.show");s&&(o("surface.count"),o("surface.fill"),o("surface.pattern"));var A=o("contour.show");A&&(o("contour.color"),o("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(m){o(m)}),T(n,r,f,o,{prefix:"",cLetter:"c"}),r._length=null}ne.exports={supplyDefaults:e,supplyIsoDefaults:a}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":862}],866:[function(d,ne,ae){ne.exports={attributes:d("./attributes"),supplyDefaults:d("./defaults").supplyDefaults,calc:d("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:d("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:d("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":862,"./calc":863,"./convert":864,"./defaults":865}],867:[function(d,ne,ae){var w=d("../../components/colorscale/attributes"),v=d("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=d("../../plots/template_attributes").hovertemplateAttrs,T=d("../surface/attributes"),e=d("../../plots/attributes"),a=d("../../lib/extend").extendFlat;ne.exports=a({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:M({editType:"calc"}),xhoverformat:v("x"),yhoverformat:v("y"),zhoverformat:v("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},w("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:T.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:a({},T.contours.x.show,{}),color:T.contours.x.color,width:T.contours.x.width,editType:"calc"},lightposition:{x:a({},T.lightposition.x,{dflt:1e5}),y:a({},T.lightposition.y,{dflt:1e5}),z:a({},T.lightposition.z,{dflt:0}),editType:"calc"},lighting:a({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},T.lighting),hoverinfo:a({},e.hoverinfo,{editType:"calc"}),showlegend:a({},e.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../surface/attributes":1061}],868:[function(d,ne,ae){var w=d("../../components/colorscale/calc");ne.exports=function(M,T){T.intensity&&w(M,T,{vals:T.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],869:[function(d,ne,ae){var w=d("../../../stackgl_modules").gl_mesh3d,v=d("../../../stackgl_modules").delaunay_triangulate,M=d("../../../stackgl_modules").alpha_shape,T=d("../../../stackgl_modules").convex_hull,e=d("../../lib/gl_format_color").parseColorScale,a=d("../../lib/str2rgbarray"),n=d("../../components/colorscale").extractOpts,r=d("../../plots/gl3d/zip3");function t(b,l,_){this.scene=b,this.uid=_,this.mesh=l,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var f=t.prototype;f.handlePick=function(b){if(b.object===this.mesh){var l=b.index=b.data.index;b.data._cellCenter?b.traceCoordinate=b.data.dataCoordinate:b.traceCoordinate=[this.data.x[l],this.data.y[l],this.data.z[l]];var _=this.data.hovertext||this.data.text;return Array.isArray(_)&&_[l]!==void 0?b.textLabel=_[l]:_&&(b.textLabel=_),!0}};function o(b){for(var l=[],_=b.length,s=0;s<_;s++)l[s]=a(b[s]);return l}function i(b,l,_,s){for(var A=[],m=l.length,h=0;h<m;h++)A[h]=b.d2l(l[h],0,s)*_;return A}function g(b){for(var l=[],_=b.length,s=0;s<_;s++)l[s]=Math.round(b[s]);return l}function p(b,l){for(var _=["x","y","z"].indexOf(b),s=[],A=l.length,m=0;m<A;m++)s[m]=[l[m][(_+1)%3],l[m][(_+2)%3]];return v(s)}function y(b,l){for(var _=b.length,s=0;s<_;s++)if(b[s]<=-.5||b[s]>=l-.5)return!1;return!0}f.update=function(b){var l=this.scene,_=l.fullSceneLayout;this.data=b;var s=b.x.length,A=r(i(_.xaxis,b.x,l.dataScale[0],b.xcalendar),i(_.yaxis,b.y,l.dataScale[1],b.ycalendar),i(_.zaxis,b.z,l.dataScale[2],b.zcalendar)),m;if(b.i&&b.j&&b.k){if(b.i.length!==b.j.length||b.j.length!==b.k.length||!y(b.i,s)||!y(b.j,s)||!y(b.k,s))return;m=r(g(b.i),g(b.j),g(b.k))}else b.alphahull===0?m=T(A):b.alphahull>0?m=M(b.alphahull,A):m=p(b.delaunayaxis,A);var h={positions:A,cells:m,lightPosition:[b.lightposition.x,b.lightposition.y,b.lightposition.z],ambient:b.lighting.ambient,diffuse:b.lighting.diffuse,specular:b.lighting.specular,roughness:b.lighting.roughness,fresnel:b.lighting.fresnel,vertexNormalsEpsilon:b.lighting.vertexnormalsepsilon,faceNormalsEpsilon:b.lighting.facenormalsepsilon,opacity:b.opacity,contourEnable:b.contour.show,contourColor:a(b.contour.color).slice(0,3),contourWidth:b.contour.width,useFacetNormals:b.flatshading};if(b.intensity){var x=n(b);this.color="#fff";var u=b.intensitymode;h[u+"Intensity"]=b.intensity,h[u+"IntensityBounds"]=[x.min,x.max],h.colormap=e(b)}else b.vertexcolor?(this.color=b.vertexcolor[0],h.vertexColors=o(b.vertexcolor)):b.facecolor?(this.color=b.facecolor[0],h.cellColors=o(b.facecolor)):(this.color=b.color,h.meshColor=a(b.color));this.mesh.update(h)},f.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function c(b,l){var _=b.glplot.gl,s=w({gl:_}),A=new t(b,s,l.uid);return s._trace=A,A.update(l),b.glplot.add(s),A}ne.exports=c},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609}],870:[function(d,ne,ae){var w=d("../../registry"),v=d("../../lib"),M=d("../../components/colorscale/defaults"),T=d("./attributes");ne.exports=function(a,n,r,t){function f(y,c){return v.coerce(a,n,T,y,c)}function o(y){var c=y.map(function(b){var l=f(b);return l&&v.isArrayOrTypedArray(l)?l:null});return c.every(function(b){return b&&b.length===c[0].length})&&c}var i=o(["x","y","z"]);if(!i){n.visible=!1;return}if(o(["i","j","k"]),n.i&&(!n.j||!n.k)||n.j&&(!n.k||!n.i)||n.k&&(!n.i||!n.j)){n.visible=!1;return}var g=w.getComponentMethod("calendars","handleTraceDefaults");g(a,n,["x","y","z"],t),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(y){f(y)});var p=f("contour.show");p&&(f("contour.color"),f("contour.width")),"intensity"in a?(f("intensity"),f("intensitymode"),M(a,n,t,f,{prefix:"",cLetter:"c"})):(n.showscale=!1,"facecolor"in a?f("facecolor"):"vertexcolor"in a?f("vertexcolor"):f("color",r)),f("text"),f("hovertext"),f("hovertemplate"),f("xhoverformat"),f("yhoverformat"),f("zhoverformat"),n._length=null}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":867}],871:[function(d,ne,ae){ne.exports={attributes:d("./attributes"),supplyDefaults:d("./defaults"),calc:d("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:d("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:d("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":867,"./calc":868,"./convert":869,"./defaults":870}],872:[function(d,ne,ae){var w=d("../../lib").extendFlat,v=d("../scatter/attributes"),M=d("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=d("../../components/drawing/attributes").dash,e=d("../../components/fx/attributes"),a=d("../../constants/delta.js"),n=a.INCREASING.COLOR,r=a.DECREASING.COLOR,t=v.line;function f(o){return{line:{color:w({},t.color,{dflt:o}),width:t.width,dash:T,editType:"style"},editType:"style"}}ne.exports={xperiod:v.xperiod,xperiod0:v.xperiod0,xperiodalignment:v.xperiodalignment,xhoverformat:M("x"),yhoverformat:M("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:w({},t.width,{}),dash:w({},T,{}),editType:"style"},increasing:f(n),decreasing:f(r),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:w({},e.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":387,"../../components/fx/attributes":397,"../../constants/delta.js":473,"../../lib":503,"../../plots/cartesian/axis_format_attributes":557,"../scatter/attributes":927}],873:[function(d,ne,ae){var w=d("../../lib"),v=w._,M=d("../../plots/cartesian/axes"),T=d("../../plots/cartesian/align_period"),e=d("../../constants/numerical").BADNUM;function a(f,o){var i=M.getFromId(f,o.xaxis),g=M.getFromId(f,o.yaxis),p=t(f,i,o),y=o._minDiff;o._minDiff=null;var c=o._origX;o._origX=null;var b=o._xcalc;o._xcalc=null;var l=r(f,o,c,b,g,n);return o._extremes[i._id]=M.findExtremes(i,b,{vpad:y/2}),l.length?(w.extendFlat(l[0].t,{wHover:y/2,tickLen:p}),l):[{t:{empty:!0}}]}function n(f,o,i,g){return{o:f,h:o,l:i,c:g}}function r(f,o,i,g,p,y){for(var c=p.makeCalcdata(o,"open"),b=p.makeCalcdata(o,"high"),l=p.makeCalcdata(o,"low"),_=p.makeCalcdata(o,"close"),s=Array.isArray(o.text),A=Array.isArray(o.hovertext),m=!0,h=null,x=!!o.xperiodalignment,u=[],L=0;L<g.length;L++){var S=g[L],k=c[L],P=b[L],z=l[L],I=_[L];if(S!==e&&k!==e&&P!==e&&z!==e&&I!==e){I===k?h!==null&&I!==h&&(m=I>h):m=I>k,h=I;var D=y(k,P,z,I);D.pos=S,D.yc=(k+I)/2,D.i=L,D.dir=m?"increasing":"decreasing",D.x=D.pos,D.y=[z,P],x&&(D.orig_p=i[L]),s&&(D.tx=o.text[L]),A&&(D.htx=o.hovertext[L]),u.push(D)}else u.push({pos:S,empty:!0})}return o._extremes[p._id]=M.findExtremes(p,w.concat(l,b),{padded:!0}),u.length&&(u[0].t={labels:{open:v(f,"open:")+" ",high:v(f,"high:")+" ",low:v(f,"low:")+" ",close:v(f,"close:")+" "}}),u}function t(f,o,i){var g=i._minDiff;if(!g){var p=f._fullData,y=[];g=1/0;var c;for(c=0;c<p.length;c++){var b=p[c];if(b.type==="ohlc"&&b.visible===!0&&b.xaxis===o._id){y.push(b);var l=o.makeCalcdata(b,"x");b._origX=l;var _=T(i,o,"x",l).vals;b._xcalc=_;var s=w.distinctVals(_).minDiff;s&&isFinite(s)&&(g=Math.min(g,s))}}for(g===1/0&&(g=1),c=0;c<y.length;c++)y[c]._minDiff=g}return g*i.tickwidth}ne.exports={calc:a,calcCommon:r}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554}],874:[function(d,ne,ae){var w=d("../../lib"),v=d("./ohlc_defaults"),M=d("../scatter/period_defaults"),T=d("./attributes");ne.exports=function(n,r,t,f){function o(g,p){return w.coerce(n,r,T,g,p)}var i=v(n,r,o,f);if(!i){r.visible=!1;return}M(n,r,f,o,{x:!0}),o("xhoverformat"),o("yhoverformat"),o("line.width"),o("line.dash"),e(n,r,o,"increasing"),e(n,r,o,"decreasing"),o("text"),o("hovertext"),o("tickwidth"),f._requestRangeslider[r.xaxis]=!0};function e(a,n,r,t){r(t+".line.color"),r(t+".line.width",n.line.width),r(t+".line.dash",n.line.dash)}},{"../../lib":503,"../scatter/period_defaults":947,"./attributes":872,"./ohlc_defaults":877}],875:[function(d,ne,ae){var w=d("../../plots/cartesian/axes"),v=d("../../lib"),M=d("../../components/fx"),T=d("../../components/color"),e=d("../../lib").fillText,a=d("../../constants/delta.js"),n={increasing:a.INCREASING.SYMBOL,decreasing:a.DECREASING.SYMBOL};function r(i,g,p,y){var c=i.cd,b=c[0].trace;return b.hoverlabel.split?f(i,g,p,y):o(i,g,p,y)}function t(i,g,p,y){var c=i.cd,b=i.xa,l=c[0].trace,_=c[0].t,s=l.type,A=s==="ohlc"?"l":"min",m=s==="ohlc"?"h":"max",h,x,u=_.bPos||0,L=function(J){return J.pos+u-g},S=_.bdPos||_.tickLen,k=_.wHover,P=Math.min(1,S/Math.abs(b.r2c(b.range[1])-b.r2c(b.range[0])));h=i.maxHoverDistance-P,x=i.maxSpikeDistance-P;function z(J){var Z=L(J);return M.inbox(Z-k,Z+k,h)}function I(J){var Z=J[A],Y=J[m];return Z===Y||M.inbox(Z-p,Y-p,h)}function D(J){return(z(J)+I(J))/2}var R=M.getDistanceFunction(y,z,I,D);if(M.getClosest(c,R,i),i.index===!1)return null;var O=c[i.index];if(O.empty)return null;var F=O.dir,V=l[F],G=V.line.color;return T.opacity(G)&&V.line.width?i.color=G:i.color=V.fillcolor,i.x0=b.c2p(O.pos+u-S,!0),i.x1=b.c2p(O.pos+u+S,!0),i.xLabelVal=O.orig_p!==void 0?O.orig_p:O.pos,i.spikeDistance=D(O)*x/h,i.xSpike=b.c2p(O.pos,!0),i}function f(i,g,p,y){var c=i.cd,b=i.ya,l=c[0].trace,_=c[0].t,s=[],A=t(i,g,p,y);if(!A)return[];var m=A.index,h=c[m],x=h.hi||l.hoverinfo,u=x.split("+"),L=x==="all",S=L||u.indexOf("y")!==-1;if(!S)return[];for(var k=["high","open","close","low"],P={},z=0;z<k.length;z++){var I=k[z],D=l[I][A.index],R=b.c2p(D,!0),O;D in P?(O=P[D],O.yLabel+="<br>"+_.labels[I]+w.hoverLabelText(b,D,l.yhoverformat)):(O=v.extendFlat({},A),O.y0=O.y1=R,O.yLabelVal=D,O.yLabel=_.labels[I]+w.hoverLabelText(b,D,l.yhoverformat),O.name="",s.push(O),P[D]=O)}return s}function o(i,g,p,y){var c=i.cd,b=i.ya,l=c[0].trace,_=c[0].t,s=t(i,g,p,y);if(!s)return[];var A=s.index,m=c[A],h=s.index=m.i,x=m.dir;function u(D){return _.labels[D]+w.hoverLabelText(b,l[D][h],l.yhoverformat)}var L=m.hi||l.hoverinfo,S=L.split("+"),k=L==="all",P=k||S.indexOf("y")!==-1,z=k||S.indexOf("text")!==-1,I=P?[u("open"),u("high"),u("low"),u("close")+"  "+n[x]]:[];return z&&e(m,l,I),s.extraText=I.join("<br>"),s.y0=s.y1=b.c2p(m.yc,!0),[s]}ne.exports={hoverPoints:r,hoverSplit:f,hoverOnPoints:o}},{"../../components/color":366,"../../components/fx":406,"../../constants/delta.js":473,"../../lib":503,"../../plots/cartesian/axes":554}],876:[function(d,ne,ae){ne.exports={moduleType:"trace",name:"ohlc",basePlotModule:d("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:d("./attributes"),supplyDefaults:d("./defaults"),calc:d("./calc").calc,plot:d("./plot"),style:d("./style"),hoverPoints:d("./hover").hoverPoints,selectPoints:d("./select")}},{"../../plots/cartesian":568,"./attributes":872,"./calc":873,"./defaults":874,"./hover":875,"./plot":878,"./select":879,"./style":880}],877:[function(d,ne,ae){var w=d("../../registry"),v=d("../../lib");ne.exports=function(T,e,a,n){var r=a("x"),t=a("open"),f=a("high"),o=a("low"),i=a("close");a("hoverlabel.split");var g=w.getComponentMethod("calendars","handleTraceDefaults");if(g(T,e,["x"],n),!!(t&&f&&o&&i)){var p=Math.min(t.length,f.length,o.length,i.length);return r&&(p=Math.min(p,v.minRowLength(r))),e._length=p,p}}},{"../../lib":503,"../../registry":638}],878:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../lib");ne.exports=function(T,e,a,n){var r=e.yaxis,t=e.xaxis,f=!!t.rangebreaks;v.makeTraceGroups(n,a,"trace ohlc").each(function(o){var i=w.select(this),g=o[0],p=g.t,y=g.trace;if(y.visible!==!0||p.empty){i.remove();return}var c=p.tickLen,b=i.selectAll("path").data(v.identity);b.enter().append("path"),b.exit().remove(),b.attr("d",function(l){if(l.empty)return"M0,0Z";var _=t.c2p(l.pos-c,!0),s=t.c2p(l.pos+c,!0),A=f?(_+s)/2:t.c2p(l.pos,!0),m=r.c2p(l.o,!0),h=r.c2p(l.h,!0),x=r.c2p(l.l,!0),u=r.c2p(l.c,!0);return"M"+_+","+m+"H"+A+"M"+A+","+h+"V"+x+"M"+s+","+u+"H"+A})})}},{"../../lib":503,"@plotly/d3":58}],879:[function(d,ne,ae){ne.exports=function(v,M){var T=v.cd,e=v.xaxis,a=v.yaxis,n=[],r,t=T[0].t.bPos||0;if(M===!1)for(r=0;r<T.length;r++)T[r].selected=0;else for(r=0;r<T.length;r++){var f=T[r];M.contains([e.c2p(f.pos+t),a.c2p(f.yc)],null,f.i,v)?(n.push({pointNumber:f.i,x:e.c2d(f.pos),y:a.c2d(f.yc)}),f.selected=1):f.selected=0}return n}},{}],880:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../components/drawing"),M=d("../../components/color");ne.exports=function(e,a,n){var r=n||w.select(e).selectAll("g.ohlclayer").selectAll("g.trace");r.style("opacity",function(t){return t[0].trace.opacity}),r.each(function(t){var f=t[0].trace;w.select(this).selectAll("path").each(function(o){if(!o.empty){var i=f[o.dir].line;w.select(this).style("fill","none").call(M.stroke,i.color).call(v.dashLine,i.dash,i.width).style("opacity",f.selectedpoints&&!o.selected?.3:1)}})})}},{"../../components/color":366,"../../components/drawing":388,"@plotly/d3":58}],881:[function(d,ne,ae){var w=d("../../lib/extend").extendFlat,v=d("../../plots/attributes"),M=d("../../plots/font_attributes"),T=d("../../components/colorscale/attributes"),e=d("../../plots/template_attributes").hovertemplateAttrs,a=d("../../plots/domain").attributes,n=w({editType:"calc"},T("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});ne.exports={domain:a({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:w({},v.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:M({editType:"calc"}),tickfont:M({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:n,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],882:[function(d,ne,ae){var w=d("../../plots/get_data").getModuleCalcData,v=d("./plot"),M="parcats";ae.name=M,ae.plot=function(T,e,a,n){var r=w(T.calcdata,M);if(r.length){var t=r[0];v(T,t,a,n)}},ae.clean=function(T,e,a,n){var r=n._has&&n._has("parcats"),t=e._has&&e._has("parcats");r&&!t&&n._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":593,"./plot":887}],883:[function(d,ne,ae){var w=d("../../lib/gup").wrap,v=d("../../components/colorscale/helpers").hasColorscale,M=d("../../components/colorscale/calc"),T=d("../../lib/filter_unique.js"),e=d("../../components/drawing"),a=d("../../lib"),n=d("fast-isnumeric");ne.exports=function(_,s){var A=a.filterVisible(s.dimensions);if(A.length===0)return[];var m=A.map(function(se){var oe;if(se.categoryorder==="trace")oe=null;else if(se.categoryorder==="array")oe=se.categoryarray;else{oe=T(se.values);for(var N=!0,U=0;U<oe.length;U++)if(!n(oe[U])){N=!1;break}oe.sort(N?a.sorterAsc:void 0),se.categoryorder==="category descending"&&(oe=oe.reverse())}return p(se.values,oe)}),h,x,u;a.isArrayOrTypedArray(s.counts)?h=s.counts:h=[s.counts],y(A),A.forEach(function(se,oe){c(se,m[oe])});var L=s.line,S;L?(v(s,"line")&&M(_,s,{vals:s.line.color,containerStr:"line",cLetter:"c"}),S=e.tryColorscale(L)):S=a.identity;function k(se){var oe,N;return a.isArrayOrTypedArray(L.color)?(oe=L.color[se%L.color.length],N=oe):oe=L.color,{color:S(oe),rawColor:N}}var P=A[0].values.length,z={},I=m.map(function(se){return se.inds});u=0;var D,R;for(D=0;D<P;D++){var O=[];for(R=0;R<I.length;R++)O.push(I[R][D]);x=h[D%h.length],u+=x;var F=k(D),V=O+"-"+F.rawColor;z[V]===void 0&&(z[V]=i(O,F.color,F.rawColor)),g(z[V],D,x)}var G=A.map(function(se,oe){return t(oe,se._index,se._displayindex,se.label,u)});for(D=0;D<P;D++)for(x=h[D%h.length],R=0;R<G.length;R++){var J=G[R].containerInd,Z=m[R].inds[D],Y=G[R].categories;if(Y[Z]===void 0){var j=s.dimensions[J]._categoryarray[Z],re=s.dimensions[J]._ticktext[Z];Y[Z]=f(R,Z,j,re)}o(Y[Z],D,x)}return w(r(G,z,u))};function r(l,_,s){var A=l.map(function(m){return m.categories.length}).reduce(function(m,h){return Math.max(m,h)});return{dimensions:l,paths:_,trace:void 0,maxCats:A,count:s}}function t(l,_,s,A,m){return{dimensionInd:l,containerInd:_,displayInd:s,dimensionLabel:A,count:m,categories:[],dragX:null}}function f(l,_,s,A){return{dimensionInd:l,categoryInd:_,categoryValue:s,displayInd:_,categoryLabel:A,valueInds:[],count:0,dragY:null}}function o(l,_,s){l.valueInds.push(_),l.count+=s}function i(l,_,s){return{categoryInds:l,color:_,rawColor:s,valueInds:[],count:0}}function g(l,_,s){l.valueInds.push(_),l.count+=s}function p(l,_){_==null?_=[]:_=_.map(function(S){return S});var s={},A={},m=[];_.forEach(function(S,k){s[S]=0,A[S]=k});for(var h=0;h<l.length;h++){var x=l[h],u;s[x]===void 0?(s[x]=1,u=_.push(x)-1,A[x]=u):(s[x]++,u=A[x]),m.push(u)}var L=_.map(function(S){return s[S]});return{uniqueValues:_,uniqueCounts:L,inds:m}}function y(l){var _=l.map(function(A){return A.displayindex}),s;if(b(_))for(s=0;s<l.length;s++)l[s]._displayindex=l[s].displayindex;else for(s=0;s<l.length;s++)l[s]._displayindex=s}function c(l,_){l._categoryarray=_.uniqueValues,l.ticktext===null||l.ticktext===void 0?l._ticktext=[]:l._ticktext=l.ticktext.slice();for(var s=l._ticktext.length;s<_.uniqueValues.length;s++)l._ticktext.push(_.uniqueValues[s])}function b(l){for(var _=new Array(l.length),s=0;s<l.length;s++){if(l[s]<0||l[s]>=l.length||_[l[s]]!==void 0)return!1;_[l[s]]=!0}return!0}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../components/drawing":388,"../../lib":503,"../../lib/filter_unique.js":494,"../../lib/gup":500,"fast-isnumeric":190}],884:[function(d,ne,ae){var w=d("../../lib"),v=d("../../components/colorscale/helpers").hasColorscale,M=d("../../components/colorscale/defaults"),T=d("../../plots/domain").defaults,e=d("../../plots/array_container_defaults"),a=d("./attributes"),n=d("../parcoords/merge_length");function r(f,o,i,g,p){p("line.shape"),p("line.hovertemplate");var y=p("line.color",g.colorway[0]);if(v(f,"line")&&w.isArrayOrTypedArray(y)){if(y.length)return p("line.colorscale"),M(f,o,g,p,{prefix:"line.",cLetter:"c"}),y.length;o.line.color=i}return 1/0}function t(f,o){function i(_,s){return w.coerce(f,o,a.dimensions,_,s)}var g=i("values"),p=i("visible");if(g&&g.length||(p=o.visible=!1),p){i("label"),i("displayindex",o._index);var y=f.categoryarray,c=Array.isArray(y)&&y.length>0,b;c&&(b="array");var l=i("categoryorder",b);l==="array"?(i("categoryarray"),i("ticktext")):(delete f.categoryarray,delete f.ticktext),!c&&l==="array"&&(o.categoryorder="trace")}}ne.exports=function(o,i,g,p){function y(s,A){return w.coerce(o,i,a,s,A)}var c=e(o,i,{name:"dimensions",handleItemDefaults:t}),b=r(o,i,g,p,y);T(i,p,y),(!Array.isArray(c)||!c.length)&&(i.visible=!1),n(i,c,"values",b),y("hoveron"),y("hovertemplate"),y("arrangement"),y("bundlecolors"),y("sortpaths"),y("counts");var l={family:p.font.family,size:Math.round(p.font.size),color:p.font.color};w.coerceFont(y,"labelfont",l);var _={family:p.font.family,size:Math.round(p.font.size/1.2),color:p.font.color};w.coerceFont(y,"tickfont",_)}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/domain":584,"../parcoords/merge_length":898,"./attributes":881}],885:[function(d,ne,ae){ne.exports={attributes:d("./attributes"),supplyDefaults:d("./defaults"),calc:d("./calc"),plot:d("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:d("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":881,"./base_plot":882,"./calc":883,"./defaults":884,"./plot":887}],886:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("d3-interpolate").interpolateNumber,M=d("../../plot_api/plot_api"),T=d("../../components/fx"),e=d("../../lib"),a=e.strTranslate,n=d("../../components/drawing"),r=d("tinycolor2"),t=d("../../lib/svg_text_utils");function f(U,q,Q,W){var X=U.map(j.bind(0,q,Q)),ee=W.selectAll("g.parcatslayer").data([null]);ee.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");var te=ee.selectAll("g.trace.parcats").data(X,o),ie=te.enter().append("g").attr("class","trace parcats");te.attr("transform",function(xe){return a(xe.x,xe.y)}),ie.append("g").attr("class","paths");var le=te.select("g.paths"),ge=le.selectAll("path.path").data(function(xe){return xe.paths},o);ge.attr("fill",function(xe){return xe.model.color});var fe=ge.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(xe){return xe.model.color}).attr("fill-opacity",0);_(fe),ge.attr("d",function(xe){return xe.svgD}),fe.empty()||ge.sort(g),ge.exit().remove(),ge.on("mouseover",p).on("mouseout",y).on("click",l),ie.append("g").attr("class","dimensions");var pe=te.select("g.dimensions"),ye=pe.selectAll("g.dimension").data(function(xe){return xe.dimensions},o);ye.enter().append("g").attr("class","dimension"),ye.attr("transform",function(xe){return a(xe.x,0)}),ye.exit().remove();var Te=ye.selectAll("g.category").data(function(xe){return xe.categories},o),_e=Te.enter().append("g").attr("class","category");Te.attr("transform",function(xe){return a(0,xe.y)}),_e.append("rect").attr("class","catrect").attr("pointer-events","none"),Te.select("rect.catrect").attr("fill","none").attr("width",function(xe){return xe.width}).attr("height",function(xe){return xe.height}),m(_e);var De=Te.selectAll("rect.bandrect").data(function(xe){return xe.bands},o);De.each(function(){e.raiseToTop(this)}),De.attr("fill",function(xe){return xe.color});var Be=De.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(xe){return xe.color}).attr("fill-opacity",0);De.attr("fill",function(xe){return xe.color}).attr("width",function(xe){return xe.width}).attr("height",function(xe){return xe.height}).attr("y",function(xe){return xe.y}).attr("cursor",function(xe){return xe.parcatsViewModel.arrangement==="fixed"?"default":xe.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),x(Be),De.exit().remove(),_e.append("text").attr("class","catlabel").attr("pointer-events","none");var Ue=q._fullLayout.paper_bgcolor;Te.select("text.catlabel").attr("text-anchor",function(xe){return i(xe)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",t.makeTextShadow(Ue)).style("fill","rgb(0, 0, 0)").attr("x",function(xe){return i(xe)?xe.width+5:-5}).attr("y",function(xe){return xe.height/2}).text(function(xe){return xe.model.categoryLabel}).each(function(xe){n.font(w.select(this),xe.parcatsViewModel.categorylabelfont),t.convertToTspans(w.select(this),q)}),_e.append("text").attr("class","dimlabel"),Te.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(xe){return xe.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(xe){return xe.width/2}).attr("y",-5).text(function(xe,Pe){return Pe===0?xe.parcatsViewModel.model.dimensions[xe.model.dimensionInd].dimensionLabel:null}).each(function(xe){n.font(w.select(this),xe.parcatsViewModel.labelfont)}),Te.selectAll("rect.bandrect").on("mouseover",R).on("mouseout",O),Te.exit().remove(),ye.call(w.behavior.drag().origin(function(xe){return{x:xe.x,y:0}}).on("dragstart",F).on("drag",V).on("dragend",G)),te.each(function(xe){xe.traceSelection=w.select(this),xe.pathSelection=w.select(this).selectAll("g.paths").selectAll("path.path"),xe.dimensionSelection=w.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),te.exit().remove()}ne.exports=function(U,q,Q,W){f(Q,U,W,q)};function o(U){return U.key}function i(U){var q=U.parcatsViewModel.dimensions.length,Q=U.parcatsViewModel.dimensions[q-1].model.dimensionInd;return U.model.dimensionInd===Q}function g(U,q){return U.model.rawColor>q.model.rawColor?1:U.model.rawColor<q.model.rawColor?-1:0}function p(U){if(!U.parcatsViewModel.dragDimension&&U.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){e.raiseToTop(this),s(w.select(this));var q=c(U),Q=b(U);if(U.parcatsViewModel.graphDiv.emit("plotly_hover",{points:q,event:w.event,constraints:Q}),U.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var W=w.mouse(this)[0],X=U.parcatsViewModel.graphDiv,ee=U.parcatsViewModel.trace,te=X._fullLayout,ie=te._paperdiv.node().getBoundingClientRect(),le=U.parcatsViewModel.graphDiv.getBoundingClientRect(),ge,fe,pe;for(pe=0;pe<U.leftXs.length-1;pe++)if(U.leftXs[pe]+U.dimWidths[pe]-2<=W&&W<=U.leftXs[pe+1]+2){var ye=U.parcatsViewModel.dimensions[pe],Te=U.parcatsViewModel.dimensions[pe+1];ge=(ye.x+ye.width+Te.x)/2,fe=(U.topYs[pe]+U.topYs[pe+1]+U.height)/2;break}var _e=U.parcatsViewModel.x+ge,De=U.parcatsViewModel.y+fe,Be=r.mostReadable(U.model.color,["black","white"]),Ue=U.model.count,xe=Ue/U.parcatsViewModel.model.count,Pe={countLabel:Ue,probabilityLabel:xe.toFixed(3)},Ve=[];U.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Ve.push(["Count:",Pe.countLabel].join(" ")),U.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&Ve.push(["P:",Pe.probabilityLabel].join(" "));var Qe=Ve.join("<br>"),Fe=w.mouse(X)[0];T.loneHover({trace:ee,x:_e-ie.left+le.left,y:De-ie.top+le.top,text:Qe,color:U.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:Be,idealAlign:Fe<_e?"right":"left",hovertemplate:(ee.line||{}).hovertemplate,hovertemplateLabels:Pe,eventData:[{data:ee._input,fullData:ee,count:Ue,probability:xe}]},{container:te._hoverlayer.node(),outerContainer:te._paper.node(),gd:X})}}}function y(U){if(!U.parcatsViewModel.dragDimension&&(_(w.select(this)),T.loneUnhover(U.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),U.parcatsViewModel.pathSelection.sort(g),U.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var q=c(U),Q=b(U);U.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:q,event:w.event,constraints:Q})}}function c(U){for(var q=[],Q=J(U.parcatsViewModel),W=0;W<U.model.valueInds.length;W++){var X=U.model.valueInds[W];q.push({curveNumber:Q,pointNumber:X})}return q}function b(U){for(var q={},Q=U.parcatsViewModel.model.dimensions,W=0;W<Q.length;W++){var X=Q[W],ee=X.categories[U.model.categoryInds[W]];q[X.containerInd]=ee.categoryValue}return U.model.rawColor!==void 0&&(q.color=U.model.rawColor),q}function l(U){if(U.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var q=c(U),Q=b(U);U.parcatsViewModel.graphDiv.emit("plotly_click",{points:q,event:w.event,constraints:Q})}}function _(U){U.attr("fill",function(q){return q.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function s(U){U.attr("fill-opacity",.8).attr("stroke",function(q){return r.mostReadable(q.model.color,["black","white"])}).attr("stroke-width",.3)}function A(U){U.select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}function m(U){U.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function h(U){U.attr("stroke","black").attr("stroke-width",1.5)}function x(U){U.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function u(U){var q=U.parcatsViewModel.pathSelection,Q=U.categoryViewModel.model.dimensionInd,W=U.categoryViewModel.model.categoryInd;return q.filter(function(X){return X.model.categoryInds[Q]===W&&X.model.color===U.color})}function L(U){var q=w.select(U.parentNode).selectAll("rect.bandrect");q.each(function(Q){var W=u(Q);s(W),W.each(function(){e.raiseToTop(this)})}),A(w.select(U.parentNode))}function S(U){var q=w.select(U).datum(),Q=u(q);s(Q),Q.each(function(){e.raiseToTop(this)}),w.select(U.parentNode).selectAll("rect.bandrect").filter(function(W){return W.color===q.color}).each(function(){e.raiseToTop(this),h(w.select(this))})}function k(U,q,Q){var W=w.select(U).datum(),X=W.categoryViewModel.model,ee=W.parcatsViewModel.graphDiv,te=w.select(U.parentNode).selectAll("rect.bandrect"),ie=[];te.each(function(ge){var fe=u(ge);fe.each(function(pe){Array.prototype.push.apply(ie,c(pe))})});var le={};le[X.dimensionInd]=X.categoryValue,ee.emit(q,{points:ie,event:Q,constraints:le})}function P(U,q,Q){var W=w.select(U).datum(),X=W.categoryViewModel.model,ee=W.parcatsViewModel.graphDiv,te=u(W),ie=[];te.each(function(ge){Array.prototype.push.apply(ie,c(ge))});var le={};le[X.dimensionInd]=X.categoryValue,W.rawColor!==void 0&&(le.color=W.rawColor),ee.emit(q,{points:ie,event:Q,constraints:le})}function z(U,q,Q){U._fullLayout._calcInverseTransform(U);var W=U._fullLayout._invScaleX,X=U._fullLayout._invScaleY,ee=w.select(Q.parentNode).select("rect.catrect"),te=ee.node().getBoundingClientRect(),ie=ee.datum(),le=ie.parcatsViewModel,ge=le.model.dimensions[ie.model.dimensionInd],fe=le.trace,pe=te.top+te.height/2,ye,Te;le.dimensions.length>1&&ge.displayInd===le.dimensions.length-1?(ye=te.left,Te="left"):(ye=te.left+te.width,Te="right");var _e=ie.model.count,De=ie.model.categoryLabel,Be=_e/ie.parcatsViewModel.model.count,Ue={countLabel:_e,categoryLabel:De,probabilityLabel:Be.toFixed(3)},xe=[];ie.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&xe.push(["Count:",Ue.countLabel].join(" ")),ie.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&xe.push(["P("+Ue.categoryLabel+"):",Ue.probabilityLabel].join(" "));var Pe=xe.join("<br>");return{trace:fe,x:W*(ye-q.left),y:X*(pe-q.top),text:Pe,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:Te,hovertemplate:fe.hovertemplate,hovertemplateLabels:Ue,eventData:[{data:fe._input,fullData:fe,count:_e,category:De,probability:Be}]}}function I(U,q,Q){var W=[];return w.select(Q.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){var X=this;W.push(z(U,q,X))}),W}function D(U,q,Q){U._fullLayout._calcInverseTransform(U);var W=U._fullLayout._invScaleX,X=U._fullLayout._invScaleY,ee=Q.getBoundingClientRect(),te=w.select(Q).datum(),ie=te.categoryViewModel,le=ie.parcatsViewModel,ge=le.model.dimensions[ie.model.dimensionInd],fe=le.trace,pe=ee.y+ee.height/2,ye,Te;le.dimensions.length>1&&ge.displayInd===le.dimensions.length-1?(ye=ee.left,Te="left"):(ye=ee.left+ee.width,Te="right");var _e=ie.model.categoryLabel,De=te.parcatsViewModel.model.count,Be=0;te.categoryViewModel.bands.forEach(function(Dt){Dt.color===te.color&&(Be+=Dt.count)});var Ue=ie.model.count,xe=0;le.pathSelection.each(function(Dt){Dt.model.color===te.color&&(xe+=Dt.model.count)});var Pe=Be/De,Ve=Be/xe,Qe=Be/Ue,Fe={countLabel:De,categoryLabel:_e,probabilityLabel:Pe.toFixed(3)},Le=[];ie.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Le.push(["Count:",Fe.countLabel].join(" ")),ie.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(Le.push("P(color \u2229 "+_e+"): "+Fe.probabilityLabel),Le.push("P("+_e+" | color): "+Ve.toFixed(3)),Le.push("P(color | "+_e+"): "+Qe.toFixed(3)));var Ne=Le.join("<br>"),dt=r.mostReadable(te.color,["black","white"]);return{trace:fe,x:W*(ye-q.left),y:X*(pe-q.top),text:Ne,color:te.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:dt,fontSize:10,idealAlign:Te,hovertemplate:fe.hovertemplate,hovertemplateLabels:Fe,eventData:[{data:fe._input,fullData:fe,category:_e,count:De,probability:Pe,categorycount:Ue,colorcount:xe,bandcolorcount:Be}]}}function R(U){if(!U.parcatsViewModel.dragDimension&&U.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var q=w.mouse(this)[1];if(q<-1)return;var Q=U.parcatsViewModel.graphDiv,W=Q._fullLayout,X=W._paperdiv.node().getBoundingClientRect(),ee=U.parcatsViewModel.hoveron,te=this;if(ee==="color"?(S(te),P(te,"plotly_hover",w.event)):(L(te),k(te,"plotly_hover",w.event)),U.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var ie;ee==="category"?ie=z(Q,X,te):ee==="color"?ie=D(Q,X,te):ee==="dimension"&&(ie=I(Q,X,te)),ie&&T.loneHover(ie,{container:W._hoverlayer.node(),outerContainer:W._paper.node(),gd:Q})}}}function O(U){var q=U.parcatsViewModel;if(!q.dragDimension&&(_(q.pathSelection),m(q.dimensionSelection.selectAll("g.category")),x(q.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),T.loneUnhover(q.graphDiv._fullLayout._hoverlayer.node()),q.pathSelection.sort(g),q.hoverinfoItems.indexOf("skip")===-1)){var Q=U.parcatsViewModel.hoveron,W=this;Q==="color"?P(W,"plotly_unhover",w.event):k(W,"plotly_unhover",w.event)}}function F(U){U.parcatsViewModel.arrangement!=="fixed"&&(U.dragDimensionDisplayInd=U.model.displayInd,U.initialDragDimensionDisplayInds=U.parcatsViewModel.model.dimensions.map(function(q){return q.displayInd}),U.dragHasMoved=!1,U.dragCategoryDisplayInd=null,w.select(this).selectAll("g.category").select("rect.catrect").each(function(q){var Q=w.mouse(this)[0],W=w.mouse(this)[1];-2<=Q&&Q<=q.width+2&&-2<=W&&W<=q.height+2&&(U.dragCategoryDisplayInd=q.model.displayInd,U.initialDragCategoryDisplayInds=U.model.categories.map(function(X){return X.displayInd}),q.model.dragY=q.y,e.raiseToTop(this.parentNode),w.select(this.parentNode).selectAll("rect.bandrect").each(function(X){X.y<W&&W<=X.y+X.height&&(U.potentialClickBand=this)}))}),U.parcatsViewModel.dragDimension=U,T.loneUnhover(U.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function V(U){if(U.parcatsViewModel.arrangement!=="fixed"&&(U.dragHasMoved=!0,U.dragDimensionDisplayInd!==null)){var q=U.dragDimensionDisplayInd,Q=q-1,W=q+1,X=U.parcatsViewModel.dimensions[q];if(U.dragCategoryDisplayInd!==null){var ee=X.categories[U.dragCategoryDisplayInd];ee.model.dragY+=w.event.dy;var te=ee.model.dragY,ie=ee.model.displayInd,le=X.categories,ge=le[ie-1],fe=le[ie+1];ge!==void 0&&te<ge.y+ge.height/2&&(ee.model.displayInd=ge.model.displayInd,ge.model.displayInd=ie),fe!==void 0&&te+ee.height>fe.y+fe.height/2&&(ee.model.displayInd=fe.model.displayInd,fe.model.displayInd=ie),U.dragCategoryDisplayInd=ee.model.displayInd}if(U.dragCategoryDisplayInd===null||U.parcatsViewModel.arrangement==="freeform"){X.model.dragX=w.event.x;var pe=U.parcatsViewModel.dimensions[Q],ye=U.parcatsViewModel.dimensions[W];pe!==void 0&&X.model.dragX<pe.x+pe.width&&(X.model.displayInd=pe.model.displayInd,pe.model.displayInd=q),ye!==void 0&&X.model.dragX+X.width>ye.x&&(X.model.displayInd=ye.model.displayInd,ye.model.displayInd=U.dragDimensionDisplayInd),U.dragDimensionDisplayInd=X.model.displayInd}oe(U.parcatsViewModel),se(U.parcatsViewModel),Y(U.parcatsViewModel),Z(U.parcatsViewModel)}}function G(U){if(U.parcatsViewModel.arrangement!=="fixed"&&U.dragDimensionDisplayInd!==null){w.select(this).selectAll("text").attr("font-weight","normal");var q={},Q=J(U.parcatsViewModel),W=U.parcatsViewModel.model.dimensions.map(function(ye){return ye.displayInd}),X=U.initialDragDimensionDisplayInds.some(function(ye,Te){return ye!==W[Te]});X&&W.forEach(function(ye,Te){var _e=U.parcatsViewModel.model.dimensions[Te].containerInd;q["dimensions["+_e+"].displayindex"]=ye});var ee=!1;if(U.dragCategoryDisplayInd!==null){var te=U.model.categories.map(function(ye){return ye.displayInd});if(ee=U.initialDragCategoryDisplayInds.some(function(ye,Te){return ye!==te[Te]}),ee){var ie=U.model.categories.slice().sort(function(ye,Te){return ye.displayInd-Te.displayInd}),le=ie.map(function(ye){return ye.categoryValue}),ge=ie.map(function(ye){return ye.categoryLabel});q["dimensions["+U.model.containerInd+"].categoryarray"]=[le],q["dimensions["+U.model.containerInd+"].ticktext"]=[ge],q["dimensions["+U.model.containerInd+"].categoryorder"]="array"}}if(U.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!U.dragHasMoved&&U.potentialClickBand&&(U.parcatsViewModel.hoveron==="color"?P(U.potentialClickBand,"plotly_click",w.event.sourceEvent):k(U.potentialClickBand,"plotly_click",w.event.sourceEvent)),U.model.dragX=null,U.dragCategoryDisplayInd!==null){var fe=U.parcatsViewModel.dimensions[U.dragDimensionDisplayInd].categories[U.dragCategoryDisplayInd];fe.model.dragY=null,U.dragCategoryDisplayInd=null}U.dragDimensionDisplayInd=null,U.parcatsViewModel.dragDimension=null,U.dragHasMoved=null,U.potentialClickBand=null,oe(U.parcatsViewModel),se(U.parcatsViewModel);var pe=w.transition().duration(300).ease("cubic-in-out");pe.each(function(){Y(U.parcatsViewModel,!0),Z(U.parcatsViewModel,!0)}).each("end",function(){(X||ee)&&M.restyle(U.parcatsViewModel.graphDiv,q,[Q])})}}function J(U){for(var q,Q=U.graphDiv._fullData,W=0;W<Q.length;W++)if(U.key===Q[W].uid){q=W;break}return q}function Z(U,q){q===void 0&&(q=!1);function Q(W){return q?W.transition():W}U.pathSelection.data(function(W){return W.paths},o),Q(U.pathSelection).attr("d",function(W){return W.svgD})}function Y(U,q){q===void 0&&(q=!1);function Q(le){return q?le.transition():le}U.dimensionSelection.data(function(le){return le.dimensions},o);var W=U.dimensionSelection.selectAll("g.category").data(function(le){return le.categories},o);Q(U.dimensionSelection).attr("transform",function(le){return a(le.x,0)}),Q(W).attr("transform",function(le){return a(0,le.y)});var X=W.select(".dimlabel");X.text(function(le,ge){return ge===0?le.parcatsViewModel.model.dimensions[le.model.dimensionInd].dimensionLabel:null});var ee=W.select(".catlabel");ee.attr("text-anchor",function(le){return i(le)?"start":"end"}).attr("x",function(le){return i(le)?le.width+5:-5}).each(function(le){var ge,fe;i(le)?(ge=le.width+5,fe="start"):(ge=-5,fe="end"),w.select(this).selectAll("tspan").attr("x",ge).attr("text-anchor",fe)});var te=W.selectAll("rect.bandrect").data(function(le){return le.bands},o),ie=te.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(le){return le.color}).attr("fill-opacity",0);te.attr("fill",function(le){return le.color}).attr("width",function(le){return le.width}).attr("height",function(le){return le.height}).attr("y",function(le){return le.y}),x(ie),te.each(function(){e.raiseToTop(this)}),te.exit().remove()}function j(U,q,Q){var W=Q[0],X=q.margin||{l:80,r:80,t:100,b:80},ee=W.trace,te=ee.domain,ie=q.width,le=q.height,ge=Math.floor(ie*(te.x[1]-te.x[0])),fe=Math.floor(le*(te.y[1]-te.y[0])),pe=te.x[0]*ie+X.l,ye=q.height-te.y[1]*q.height+X.t,Te=ee.line.shape,_e;ee.hoverinfo==="all"?_e=["count","probability"]:_e=(ee.hoverinfo||"").split("+");var De={trace:ee,key:ee.uid,model:W,x:pe,y:ye,width:ge,height:fe,hoveron:ee.hoveron,hoverinfoItems:_e,arrangement:ee.arrangement,bundlecolors:ee.bundlecolors,sortpaths:ee.sortpaths,labelfont:ee.labelfont,categorylabelfont:ee.tickfont,pathShape:Te,dragDimension:null,margin:X,paths:[],dimensions:[],graphDiv:U,traceSelection:null,pathSelection:null,dimensionSelection:null};return W.dimensions&&(oe(De),se(De)),De}function re(U,q,Q,W,X){var ee=[],te=[],ie,le;for(le=0;le<Q.length-1;le++)ie=v(Q[le]+U[le],U[le+1]),ee.push(ie(X)),te.push(ie(1-X));var ge="M "+U[0]+","+q[0];for(ge+="l"+Q[0]+",0 ",le=1;le<Q.length;le++)ge+="C"+ee[le-1]+","+q[le-1]+" "+te[le-1]+","+q[le]+" "+U[le]+","+q[le],ge+="l"+Q[le]+",0 ";for(ge+="l0,"+W+" ",ge+="l -"+Q[Q.length-1]+",0 ",le=Q.length-2;le>=0;le--)ge+="C"+te[le]+","+(q[le+1]+W)+" "+ee[le]+","+(q[le]+W)+" "+(U[le]+Q[le])+","+(q[le]+W),ge+="l-"+Q[le]+",0 ";return ge+="Z",ge}function se(U){var q=U.dimensions,Q=U.model,W=q.map(function(zt){return zt.categories.map(function(Ut){return Ut.y})}),X=U.model.dimensions.map(function(zt){return zt.categories.map(function(Ut){return Ut.displayInd})}),ee=U.model.dimensions.map(function(zt){return zt.displayInd}),te=U.dimensions.map(function(zt){return zt.model.dimensionInd}),ie=q.map(function(zt){return zt.x}),le=q.map(function(zt){return zt.width}),ge=[];for(var fe in Q.paths)Q.paths.hasOwnProperty(fe)&&ge.push(Q.paths[fe]);function pe(zt){var Ut=zt.categoryInds.map(function(Mt,rt){return X[rt][Mt]}),Ct=te.map(function(Mt){return Ut[Mt]});return Ct}ge.sort(function(zt,Ut){var Ct=pe(zt),Mt=pe(Ut);return U.sortpaths==="backward"&&(Ct.reverse(),Mt.reverse()),Ct.push(zt.valueInds[0]),Mt.push(Ut.valueInds[0]),U.bundlecolors&&(Ct.unshift(zt.rawColor),Mt.unshift(Ut.rawColor)),Ct<Mt?-1:Ct>Mt?1:0});for(var ye=new Array(ge.length),Te=q[0].model.count,_e=q[0].categories.map(function(zt){return zt.height}).reduce(function(zt,Ut){return zt+Ut}),De=0;De<ge.length;De++){var Be=ge[De],Ue;Te>0?Ue=_e*(Be.count/Te):Ue=0;for(var xe=new Array(W.length),Pe=0;Pe<Be.categoryInds.length;Pe++){var Ve=Be.categoryInds[Pe],Qe=X[Pe][Ve],Fe=ee[Pe];xe[Fe]=W[Fe][Qe],W[Fe][Qe]+=Ue;var Le=U.dimensions[Fe].categories[Qe],Ne=Le.bands.length,dt=Le.bands[Ne-1];if(dt===void 0||Be.rawColor!==dt.rawColor){var Dt=dt===void 0?0:dt.y+dt.height;Le.bands.push({key:Dt,color:Be.color,rawColor:Be.rawColor,height:Ue,width:Le.width,count:Be.count,y:Dt,categoryViewModel:Le,parcatsViewModel:U})}else{var Xt=Le.bands[Ne-1];Xt.height+=Ue,Xt.count+=Be.count}}var At;U.pathShape==="hspline"?At=re(ie,xe,le,Ue,.5):At=re(ie,xe,le,Ue,0),ye[De]={key:Be.valueInds[0],model:Be,height:Ue,leftXs:ie,topYs:xe,dimWidths:le,svgD:At,parcatsViewModel:U}}U.paths=ye}function oe(U){var q=U.model.dimensions.map(function(te){return{displayInd:te.displayInd,dimensionInd:te.dimensionInd}});q.sort(function(te,ie){return te.displayInd-ie.displayInd});var Q=[];for(var W in q){var X=q[W].dimensionInd,ee=U.model.dimensions[X];Q.push(N(U,ee))}U.dimensions=Q}function N(U,q){var Q=40,W=16,X=U.model.dimensions.length,ee=q.displayInd,te,ie,le;X>1?te=(U.width-2*Q-W)/(X-1):te=0,ie=Q,le=ie+te*ee;var ge=[],fe=U.model.maxCats,pe=q.categories.length,ye=8,Te=q.count,_e=U.height-ye*(fe-1),De,Be,Ue,xe,Pe,Ve=(fe-pe)*ye/2,Qe=q.categories.map(function(Fe){return{displayInd:Fe.displayInd,categoryInd:Fe.categoryInd}});for(Qe.sort(function(Fe,Le){return Fe.displayInd-Le.displayInd}),Pe=0;Pe<pe;Pe++)xe=Qe[Pe].categoryInd,Be=q.categories[xe],Te>0?De=Be.count/Te*_e:De=0,Ue={key:Be.valueInds[0],model:Be,width:W,height:De,y:Be.dragY!==null?Be.dragY:Ve,bands:[],parcatsViewModel:U},Ve=Ve+De+ye,ge.push(Ue);return{key:q.dimensionInd,x:q.dragX!==null?q.dragX:le,y:0,width:W,model:q,categories:ge,parcatsViewModel:U,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}},{"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_api":540,"@plotly/d3":58,"d3-interpolate":116,tinycolor2:312}],887:[function(d,ne,ae){var w=d("./parcats");ne.exports=function(M,T,e,a){var n=M._fullLayout,r=n._paper,t=n._size;w(M,r,T,{width:t.w,height:t.h,margin:{t:t.t,r:t.r,b:t.b,l:t.l}},e,a)}},{"./parcats":886}],888:[function(d,ne,ae){var w=d("../../components/colorscale/attributes"),v=d("../../plots/cartesian/layout_attributes"),M=d("../../plots/font_attributes"),T=d("../../plots/domain").attributes,e=d("../../lib/extend").extendFlat,a=d("../../plot_api/plot_template").templatedArray;ne.exports={domain:T({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:M({editType:"plot"}),tickfont:M({editType:"plot"}),rangefont:M({editType:"plot"}),dimensions:a("dimension",{label:{valType:"string",editType:"plot"},tickvals:e({},v.tickvals,{editType:"plot"}),ticktext:e({},v.ticktext,{editType:"plot"}),tickformat:e({},v.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:e({editType:"calc"},w("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"}))}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/layout_attributes":569,"../../plots/domain":584,"../../plots/font_attributes":585}],889:[function(d,ne,ae){var w=d("./constants"),v=d("@plotly/d3"),M=d("../../lib/gup").keyFun,T=d("../../lib/gup").repeat,e=d("../../lib").sorterAsc,a=d("../../lib").strTranslate,n=w.bar.snapRatio;function r(G,J){return G*(1-n)+J*n}var t=w.bar.snapClose;function f(G,J){return G*(1-t)+J*t}function o(G,J,Z,Y){if(i(Z,Y))return Z;var j=G?-1:1,re=0,se=J.length-1;if(j<0){var oe=re;re=se,se=oe}for(var N=J[re],U=N,q=re;j*q<j*se;q+=j){var Q=q+j,W=J[Q];if(j*Z<j*f(N,W))return r(N,U);if(j*Z<j*W||Q===se)return r(W,N);U=N,N=W}}function i(G,J){for(var Z=0;Z<J.length;Z++)if(G>=J[Z][0]&&G<=J[Z][1])return!0;return!1}function g(G){G.attr("x",-w.bar.captureWidth/2).attr("width",w.bar.captureWidth)}function p(G){G.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function y(G){if(!G.brush.filterSpecified)return"0,"+G.height;for(var J=c(G.brush.filter.getConsolidated(),G.height),Z=[0],Y,j,re,se=J.length?J[0][0]:null,oe=0;oe<J.length;oe++)Y=J[oe],j=Y[1]-Y[0],Z.push(se),Z.push(j),re=oe+1,re<J.length&&(se=J[re][0]-Y[1]);return Z.push(G.height),Z}function c(G,J){return G.map(function(Z){return Z.map(function(Y){return Math.max(0,Y*J)}).sort(e)})}function b(G,J){var Z=w.bar.handleHeight;if(!(J>G[1]+Z||J<G[0]-Z))return J>=.9*G[1]+.1*G[0]?"n":J<=.9*G[0]+.1*G[1]?"s":"ns"}function l(){v.select(document.body).style("cursor",null)}function _(G){G.attr("stroke-dasharray",y)}function s(G,J){var Z=v.select(G).selectAll(".highlight, .highlight-shadow"),Y=J?Z.transition().duration(w.bar.snapDuration).each("end",J):Z;_(Y)}function A(G,J){var Z=G.brush,Y=Z.filterSpecified,j=NaN,re={},se;if(Y){var oe=G.height,N=Z.filter.getConsolidated(),U=c(N,oe),q=NaN,Q=NaN,W=NaN;for(se=0;se<=U.length;se++){var X=U[se];if(X&&X[0]<=J&&J<=X[1]){q=se;break}else if(Q=se?se-1:NaN,X&&X[0]>J){W=se;break}}if(j=q,isNaN(j)&&(isNaN(Q)||isNaN(W)?j=isNaN(Q)?W:Q:j=J-U[Q][1]<U[W][0]-J?Q:W),!isNaN(j)){var ee=U[j],te=b(ee,J);te&&(re.interval=N[j],re.intervalPix=ee,re.region=te)}}if(G.ordinal&&!re.region){var ie=G.unitTickvals,le=G.unitToPaddedPx.invert(J);for(se=0;se<ie.length;se++){var ge=[ie[Math.max(se-1,0)]*.25+ie[se]*.75,ie[Math.min(se+1,ie.length-1)]*.25+ie[se]*.75];if(le>=ge[0]&&le<=ge[1]){re.clickableOrdinalRange=ge;break}}}return re}function m(G,J){v.event.sourceEvent.stopPropagation();var Z=J.height-v.mouse(G)[1]-2*w.verticalPadding,Y=J.unitToPaddedPx.invert(Z),j=J.brush,re=A(J,Z),se=re.interval,oe=j.svgBrush;if(oe.wasDragged=!1,oe.grabbingBar=re.region==="ns",oe.grabbingBar){var N=se.map(J.unitToPaddedPx);oe.grabPoint=Z-N[0]-w.verticalPadding,oe.barLength=N[1]-N[0]}oe.clickableOrdinalRange=re.clickableOrdinalRange,oe.stayingIntervals=J.multiselect&&j.filterSpecified?j.filter.getConsolidated():[],se&&(oe.stayingIntervals=oe.stayingIntervals.filter(function(U){return U[0]!==se[0]&&U[1]!==se[1]})),oe.startExtent=re.region?se[re.region==="s"?1:0]:Y,J.parent.inBrushDrag=!0,oe.brushStartCallback()}function h(G,J){v.event.sourceEvent.stopPropagation();var Z=J.height-v.mouse(G)[1]-2*w.verticalPadding,Y=J.brush.svgBrush;Y.wasDragged=!0,Y._dragging=!0,Y.grabbingBar?Y.newExtent=[Z-Y.grabPoint,Z+Y.barLength-Y.grabPoint].map(J.unitToPaddedPx.invert):Y.newExtent=[Y.startExtent,J.unitToPaddedPx.invert(Z)].sort(e),J.brush.filterSpecified=!0,Y.extent=Y.stayingIntervals.concat([Y.newExtent]),Y.brushCallback(J),s(G.parentNode)}function x(G,J){var Z=J.brush,Y=Z.filter,j=Z.svgBrush;j._dragging||(u(G,J),h(G,J),J.brush.svgBrush.wasDragged=!1),j._dragging=!1;var re=v.event;re.sourceEvent.stopPropagation();var se=j.grabbingBar;if(j.grabbingBar=!1,j.grabLocation=void 0,J.parent.inBrushDrag=!1,l(),!j.wasDragged){j.wasDragged=void 0,j.clickableOrdinalRange?Z.filterSpecified&&J.multiselect?j.extent.push(j.clickableOrdinalRange):(j.extent=[j.clickableOrdinalRange],Z.filterSpecified=!0):se?(j.extent=j.stayingIntervals,j.extent.length===0&&I(Z)):I(Z),j.brushCallback(J),s(G.parentNode),j.brushEndCallback(Z.filterSpecified?Y.getConsolidated():[]);return}var oe=function(){Y.set(Y.getConsolidated())};if(J.ordinal){var N=J.unitTickvals;N[N.length-1]<N[0]&&N.reverse(),j.newExtent=[o(0,N,j.newExtent[0],j.stayingIntervals),o(1,N,j.newExtent[1],j.stayingIntervals)];var U=j.newExtent[1]>j.newExtent[0];j.extent=j.stayingIntervals.concat(U?[j.newExtent]:[]),j.extent.length||I(Z),j.brushCallback(J),U?s(G.parentNode,oe):(oe(),s(G.parentNode))}else oe();j.brushEndCallback(Z.filterSpecified?Y.getConsolidated():[])}function u(G,J){var Z=J.height-v.mouse(G)[1]-2*w.verticalPadding,Y=A(J,Z),j="crosshair";Y.clickableOrdinalRange?j="pointer":Y.region&&(j=Y.region+"-resize"),v.select(document.body).style("cursor",j)}function L(G){G.on("mousemove",function(J){v.event.preventDefault(),J.parent.inBrushDrag||u(this,J)}).on("mouseleave",function(J){J.parent.inBrushDrag||l()}).call(v.behavior.drag().on("dragstart",function(J){m(this,J)}).on("drag",function(J){h(this,J)}).on("dragend",function(J){x(this,J)}))}function S(G,J){return G[0]-J[0]}function k(G,J){var Z=G.selectAll(".background").data(T);Z.enter().append("rect").classed("background",!0).call(g).call(p).style("pointer-events","auto").attr("transform",a(0,w.verticalPadding)),Z.call(L).attr("height",function(re){return re.height-w.verticalPadding});var Y=G.selectAll(".highlight-shadow").data(T);Y.enter().append("line").classed("highlight-shadow",!0).attr("x",-w.bar.width/2).attr("stroke-width",w.bar.width+w.bar.strokeWidth).attr("stroke",J).attr("opacity",w.bar.strokeOpacity).attr("stroke-linecap","butt"),Y.attr("y1",function(re){return re.height}).call(_);var j=G.selectAll(".highlight").data(T);j.enter().append("line").classed("highlight",!0).attr("x",-w.bar.width/2).attr("stroke-width",w.bar.width-w.bar.strokeWidth).attr("stroke",w.bar.fillColor).attr("opacity",w.bar.fillOpacity).attr("stroke-linecap","butt"),j.attr("y1",function(re){return re.height}).call(_)}function P(G,J){var Z=G.selectAll("."+w.cn.axisBrush).data(T,M);Z.enter().append("g").classed(w.cn.axisBrush,!0),k(Z,J)}function z(G){return G.svgBrush.extent.map(function(J){return J.slice()})}function I(G){G.filterSpecified=!1,G.svgBrush.extent=[[-1/0,1/0]]}function D(G){return function(Z){var Y=Z.brush,j=z(Y),re=j.slice();Y.filter.set(re),G()}}function R(G){for(var J=G.slice(),Z=[],Y,j=J.shift();j;){for(Y=j.slice();(j=J.shift())&&j[0]<=Y[1];)Y[1]=Math.max(Y[1],j[1]);Z.push(Y)}return Z.length===1&&Z[0][0]>Z[0][1]&&(Z=[]),Z}function O(){var G=[],J,Z;return{set:function(Y){G=Y.map(function(j){return j.slice().sort(e)}).sort(S),G.length===1&&G[0][0]===-1/0&&G[0][1]===1/0&&(G=[[0,-1]]),J=R(G),Z=G.reduce(function(j,re){return[Math.min(j[0],re[0]),Math.max(j[1],re[1])]},[1/0,-1/0])},get:function(){return G.slice()},getConsolidated:function(){return J},getBounds:function(){return Z}}}function F(G,J,Z,Y,j,re){var se=O();return se.set(Z),{filter:se,filterSpecified:J,svgBrush:{extent:[],brushStartCallback:Y,brushCallback:D(j),brushEndCallback:re}}}function V(G,J){if(Array.isArray(G[0])?(G=G.map(function(Y){return Y.sort(e)}),J.multiselect?G=R(G.sort(S)):G=[G[0]]):G=[G.sort(e)],J.tickvals){var Z=J.tickvals.slice().sort(e);if(G=G.map(function(Y){var j=[o(0,Z,Y[0],[]),o(1,Z,Y[1],[])];if(j[1]>j[0])return j}).filter(function(Y){return Y}),!G.length)return}return G.length>1?G:G[0]}ne.exports={makeBrush:F,ensureAxisBrush:P,cleanRanges:V}},{"../../lib":503,"../../lib/gup":500,"./constants":893,"@plotly/d3":58}],890:[function(d,ne,ae){ne.exports={attributes:d("./attributes"),supplyDefaults:d("./defaults"),calc:d("./calc"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:d("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":888,"./base_plot":891,"./calc":892,"./defaults":894}],891:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../plots/get_data").getModuleCalcData,M=d("./plot"),T=d("../../constants/xmlns_namespaces");ae.name="parcoords",ae.plot=function(e){var a=v(e.calcdata,"parcoords")[0];a.length&&M(e,a)},ae.clean=function(e,a,n,r){var t=r._has&&r._has("parcoords"),f=a._has&&a._has("parcoords");t&&!f&&(r._paperdiv.selectAll(".parcoords").remove(),r._glimages.selectAll("*").remove())},ae.toSVG=function(e){var a=e._fullLayout._glimages,n=w.select(e).selectAll(".svg-container"),r=n.filter(function(f,o){return o===n.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function t(){var f=this,o=f.toDataURL("image/png"),i=a.append("svg:image");i.attr({xmlns:T.svg,"xlink:href":o,preserveAspectRatio:"none",x:0,y:0,width:f.style.width,height:f.style.height})}r.each(t),window.setTimeout(function(){w.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":480,"../../plots/get_data":593,"./plot":900,"@plotly/d3":58}],892:[function(d,ne,ae){var w=d("../../lib").isArrayOrTypedArray,v=d("../../components/colorscale"),M=d("../../lib/gup").wrap;ne.exports=function(a,n){var r,t;return v.hasColorscale(n,"line")&&w(n.line.color)?(r=n.line.color,t=v.extractOpts(n.line).colorscale,v.calc(a,n,{vals:r,containerStr:"line",cLetter:"c"})):(r=T(n._length),t=[[0,n.line.color],[1,n.line.color]]),M({lineColor:r,cscale:t})};function T(e){for(var a=new Array(e),n=0;n<e;n++)a[n]=.5;return a}},{"../../components/colorscale":378,"../../lib":503,"../../lib/gup":500}],893:[function(d,ne,ae){ne.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,deselectedLineColor:"#777",bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],894:[function(d,ne,ae){var w=d("../../lib"),v=d("../../components/colorscale/helpers").hasColorscale,M=d("../../components/colorscale/defaults"),T=d("../../plots/domain").defaults,e=d("../../plots/array_container_defaults"),a=d("../../plots/cartesian/axes"),n=d("./attributes"),r=d("./axisbrush"),t=d("./constants").maxDimensionCount,f=d("./merge_length");function o(g,p,y,c,b){var l=b("line.color",y);if(v(g,"line")&&w.isArrayOrTypedArray(l)){if(l.length)return b("line.colorscale"),M(g,p,c,b,{prefix:"line.",cLetter:"c"}),l.length;p.line.color=y}return 1/0}function i(g,p,y,c){function b(m,h){return w.coerce(g,p,n.dimensions,m,h)}var l=b("values"),_=b("visible");if(l&&l.length||(_=p.visible=!1),_){b("label"),b("tickvals"),b("ticktext"),b("tickformat");var s=b("range");p._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:s},a.setConvert(p._ax,c.layout),b("multiselect");var A=b("constraintrange");A&&(p.constraintrange=r.cleanRanges(A,p))}}ne.exports=function(p,y,c,b){function l(h,x){return w.coerce(p,y,n,h,x)}var _=p.dimensions;Array.isArray(_)&&_.length>t&&(w.log("parcoords traces support up to "+t+" dimensions at the moment"),_.splice(t));var s=e(p,y,{name:"dimensions",layout:b,handleItemDefaults:i}),A=o(p,y,c,b,l);T(y,b,l),(!Array.isArray(s)||!s.length)&&(y.visible=!1),f(y,s,"values",A);var m={family:b.font.family,size:Math.round(b.font.size/1.2),color:b.font.color};w.coerceFont(l,"labelfont",m),w.coerceFont(l,"tickfont",m),w.coerceFont(l,"rangefont",m),l("labelangle"),l("labelside")}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"../../plots/domain":584,"./attributes":888,"./axisbrush":889,"./constants":893,"./merge_length":898}],895:[function(d,ne,ae){var w=d("../../lib").isTypedArray;ae.convertTypedArray=function(v){return w(v)?Array.prototype.slice.call(v):v},ae.isOrdinal=function(v){return!!v.tickvals},ae.isVisible=function(v){return v.visible||!("visible"in v)}},{"../../lib":503}],896:[function(d,ne,ae){var w=d("./base_index");w.plot=d("./plot"),ne.exports=w},{"./base_index":890,"./plot":900}],897:[function(d,ne,ae){var w=d("glslify"),v=w([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

attribute vec4 p01_04, p05_08, p09_12, p13_16,
               p17_20, p21_24, p25_28, p29_32,
               p33_36, p37_40, p41_44, p45_48,
               p49_52, p53_56, p57_60, colors;

uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,
             loA, hiA, loB, hiB, loC, hiC, loD, hiD;

uniform vec2 resolution, viewBoxPos, viewBoxSize;
uniform float maskHeight;
uniform float drwLayer; // 0: context, 1: focus, 2: pick
uniform vec4 contextColor;
uniform sampler2D maskTexture, palette;

bool isPick    = (drwLayer > 1.5);
bool isContext = (drwLayer < 0.5);

const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);
const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);

float val(mat4 p, mat4 v) {
    return dot(matrixCompMult(p, v) * UNITS, UNITS);
}

float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {
    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);
    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);
    return y1 * (1.0 - ratio) + y2 * ratio;
}

int iMod(int a, int b) {
    return a - b * (a / b);
}

bool fOutside(float p, float lo, float hi) {
    return (lo < hi) && (lo > p || p > hi);
}

bool vOutside(vec4 p, vec4 lo, vec4 hi) {
    return (
        fOutside(p[0], lo[0], hi[0]) ||
        fOutside(p[1], lo[1], hi[1]) ||
        fOutside(p[2], lo[2], hi[2]) ||
        fOutside(p[3], lo[3], hi[3])
    );
}

bool mOutside(mat4 p, mat4 lo, mat4 hi) {
    return (
        vOutside(p[0], lo[0], hi[0]) ||
        vOutside(p[1], lo[1], hi[1]) ||
        vOutside(p[2], lo[2], hi[2]) ||
        vOutside(p[3], lo[3], hi[3])
    );
}

bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {
    return mOutside(A, loA, hiA) ||
           mOutside(B, loB, hiB) ||
           mOutside(C, loC, hiC) ||
           mOutside(D, loD, hiD);
}

bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {
    mat4 pnts[4];
    pnts[0] = A;
    pnts[1] = B;
    pnts[2] = C;
    pnts[3] = D;

    for(int i = 0; i < 4; ++i) {
        for(int j = 0; j < 4; ++j) {
            for(int k = 0; k < 4; ++k) {
                if(0 == iMod(
                    int(255.0 * texture2D(maskTexture,
                        vec2(
                            (float(i * 2 + j / 2) + 0.5) / 8.0,
                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight
                        ))[3]
                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),
                    2
                )) return true;
            }
        }
    }
    return false;
}

vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {
    float x = 0.5 * sign(v) + 0.5;
    float y = axisY(x, A, B, C, D);
    float z = 1.0 - abs(v);

    z += isContext ? 0.0 : 2.0 * float(
        outsideBoundingBox(A, B, C, D) ||
        outsideRasterMask(A, B, C, D)
    );

    return vec4(
        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,
        z,
        1.0
    );
}

void main() {
    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);
    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);
    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);
    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);

    float v = colors[3];

    gl_Position = position(isContext, v, A, B, C, D);

    fragColor =
        isContext ? vec4(contextColor) :
        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));
}
`]),M=w([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
    gl_FragColor = fragColor;
}
`]),T=d("./constants").maxDimensionCount,e=d("../../lib"),a=1e-6,n=2048,r=new Uint8Array(4),t=new Uint8Array(4),f={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function o(u){u.read({x:0,y:0,width:1,height:1,data:r})}function i(u,L,S,k,P){var z=u._gl;z.enable(z.SCISSOR_TEST),z.scissor(L,S,k,P),u.clear({color:[0,0,0,0],depth:1})}function g(u,L,S,k,P,z){var I=z.key;function D(R){var O=Math.min(k,P-R*k);R===0&&(window.cancelAnimationFrame(S.currentRafs[I]),delete S.currentRafs[I],i(u,z.scissorX,z.scissorY,z.scissorWidth,z.viewBoxSize[1])),!S.clearOnly&&(z.count=2*O,z.offset=2*R*k,L(z),R*k+O<P&&(S.currentRafs[I]=window.requestAnimationFrame(function(){D(R+1)})),S.drawCompleted=!1)}S.drawCompleted||(o(u),S.drawCompleted=!0),D(0)}function p(u){return Math.max(a,Math.min(1-a,u))}function y(u,L){for(var S=new Array(256),k=0;k<256;k++)S[k]=u(k/255).concat(L);return S}function c(u,L){return(u>>>8*L)%256/255}function b(u,L,S){for(var k=new Array(u*(T+4)),P=0,z=0;z<u;z++){for(var I=0;I<T;I++)k[P++]=I<L.length?L[I].paddedUnitValues[z]:.5;k[P++]=c(z,2),k[P++]=c(z,1),k[P++]=c(z,0),k[P++]=p(S[z])}return k}function l(u,L,S){for(var k=new Array(L*8),P=0,z=0;z<L;z++)for(var I=0;I<2;I++)for(var D=0;D<4;D++){var R=u*4+D,O=S[z*64+R];R===63&&I===0&&(O*=-1),k[P++]=O}return k}function _(u){var L="0"+u;return L.substr(L.length-2)}function s(u){return u<T?"p"+_(u+1)+"_"+_(u+4):"colors"}function A(u,L,S){for(var k=0;k<=T;k+=4)u[s(k)](l(k/4,L,S))}function m(u){for(var L={},S=0;S<=T;S+=4)L[s(S)]=u.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return L}function h(u,L,S,k,P,z,I,D,R,O,F,V,G,J){for(var Z=[[],[]],Y=0;Y<64;Y++)Z[0][Y]=Y===P?1:0,Z[1][Y]=Y===z?1:0;I*=J,D*=J,R*=J,O*=J;var j=u.lines.canvasOverdrag*J,re=u.domain,se=u.canvasWidth*J,oe=u.canvasHeight*J,N=u.pad.l*J,U=u.pad.b*J,q=u.layoutHeight*J,Q=u.layoutWidth*J,W=u.deselectedLines.color,X=e.extendFlat({key:F,resolution:[se,oe],viewBoxPos:[I+j,D],viewBoxSize:[R,O],i0:P,i1:z,dim0A:Z[0].slice(0,16),dim0B:Z[0].slice(16,32),dim0C:Z[0].slice(32,48),dim0D:Z[0].slice(48,64),dim1A:Z[1].slice(0,16),dim1B:Z[1].slice(16,32),dim1C:Z[1].slice(32,48),dim1D:Z[1].slice(48,64),drwLayer:V,contextColor:[W[0]/255,W[1]/255,W[2]/255,W[3]<1?W[3]:Math.max(1/255,Math.pow(1/u.lines.color.length,1/3))],scissorX:(k===L?0:I+j)+(N-j)+Q*re.x[0],scissorWidth:(k===S?se-I+j:R+.5)+(k===L?I+j:0),scissorY:D+U+q*re.y[0],scissorHeight:O,viewportX:N-j+Q*re.x[0],viewportY:U+q*re.y[0],viewportWidth:se,viewportHeight:oe},G);return X}function x(u){var L=n-1,S=Math.max(0,Math.floor(u[0]*L),0),k=Math.min(L,Math.ceil(u[1]*L),L);return[Math.min(S,k),Math.max(S,k)]}ne.exports=function(u,L){var S=L.context,k=L.pick,P=L.regl,z=P._gl,I=z.getParameter(z.ALIASED_LINE_WIDTH_RANGE),D=Math.max(I[0],Math.min(I[1],L.viewModel.plotGlPixelRatio)),R={currentRafs:{},drawCompleted:!0,clearOnly:!1},O,F,V,G,J=m(P),Z,Y=P.texture(f),j=[];se(L);var re=P({profile:!1,blend:{enable:S,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!S,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:P.prop("scissorX"),y:P.prop("scissorY"),width:P.prop("scissorWidth"),height:P.prop("scissorHeight")}},viewport:{x:P.prop("viewportX"),y:P.prop("viewportY"),width:P.prop("viewportWidth"),height:P.prop("viewportHeight")},dither:!1,vert:v,frag:M,primitive:"lines",lineWidth:D,attributes:J,uniforms:{resolution:P.prop("resolution"),viewBoxPos:P.prop("viewBoxPos"),viewBoxSize:P.prop("viewBoxSize"),dim0A:P.prop("dim0A"),dim1A:P.prop("dim1A"),dim0B:P.prop("dim0B"),dim1B:P.prop("dim1B"),dim0C:P.prop("dim0C"),dim1C:P.prop("dim1C"),dim0D:P.prop("dim0D"),dim1D:P.prop("dim1D"),loA:P.prop("loA"),hiA:P.prop("hiA"),loB:P.prop("loB"),hiB:P.prop("hiB"),loC:P.prop("loC"),hiC:P.prop("hiC"),loD:P.prop("loD"),hiD:P.prop("hiD"),palette:Y,contextColor:P.prop("contextColor"),maskTexture:P.prop("maskTexture"),drwLayer:P.prop("drwLayer"),maskHeight:P.prop("maskHeight")},offset:P.prop("offset"),count:P.prop("count")});function se(W){O=W.model,F=W.viewModel,V=F.dimensions.slice(),G=V[0]?V[0].values.length:0;var X=O.lines,ee=k?X.color.map(function(ie,le){return le/X.color.length}):X.color,te=b(G,V,ee);A(J,G,te),!S&&!k&&(Y=P.texture(e.extendFlat({data:y(O.unitToColor,255)},f)))}function oe(W){var X,ee,te,ie=[[],[]];for(te=0;te<64;te++){var le=!W&&te<V.length?V[te].brush.filter.getBounds():[-1/0,1/0];ie[0][te]=le[0],ie[1][te]=le[1]}var ge=n*8,fe=new Array(ge);for(X=0;X<ge;X++)fe[X]=255;if(!W)for(X=0;X<V.length;X++){var pe=X%8,ye=(X-pe)/8,Te=Math.pow(2,pe),_e=V[X],De=_e.brush.filter.get();if(!(De.length<2)){var Be=x(De[0])[1];for(ee=1;ee<De.length;ee++){var Ue=x(De[ee]);for(te=Be+1;te<Ue[0];te++)fe[te*8+ye]&=~Te;Be=Math.max(Be,Ue[1])}}}var xe={shape:[8,n],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:fe};return Z?Z(xe):Z=P.texture(xe),{maskTexture:Z,maskHeight:n,loA:ie[0].slice(0,16),loB:ie[0].slice(16,32),loC:ie[0].slice(32,48),loD:ie[0].slice(48,64),hiA:ie[1].slice(0,16),hiB:ie[1].slice(16,32),hiC:ie[1].slice(32,48),hiD:ie[1].slice(48,64)}}function N(W,X,ee){var te=W.length,ie,le,ge,fe=1/0,pe=-1/0;for(ie=0;ie<te;ie++)W[ie].dim0.canvasX<fe&&(fe=W[ie].dim0.canvasX,le=ie),W[ie].dim1.canvasX>pe&&(pe=W[ie].dim1.canvasX,ge=ie);te===0&&i(P,0,0,O.canvasWidth,O.canvasHeight);var ye=oe(S);for(ie=0;ie<te;ie++){var Te=W[ie],_e=Te.dim0.crossfilterDimensionIndex,De=Te.dim1.crossfilterDimensionIndex,Be=Te.canvasX,Ue=Te.canvasY,xe=Be+Te.panelSizeX,Pe=Te.plotGlPixelRatio;if(X||!j[_e]||j[_e][0]!==Be||j[_e][1]!==xe){j[_e]=[Be,xe];var Ve=h(O,le,ge,ie,_e,De,Be,Ue,Te.panelSizeX,Te.panelSizeY,Te.dim0.crossfilterDimensionIndex,S?0:k?2:1,ye,Pe);R.clearOnly=ee;var Qe=X?O.lines.blockLineCount:G;g(P,re,R,Qe,G,Ve)}}}function U(W,X){return P.read({x:W,y:X,width:1,height:1,data:t}),t}function q(W,X,ee,te){var ie=new Uint8Array(4*ee*te);return P.read({x:W,y:X,width:ee,height:te,data:ie}),ie}function Q(){u.style["pointer-events"]="none",Y.destroy(),Z&&Z.destroy();for(var W in J)J[W].destroy()}return{render:N,readPixel:U,readPixels:q,destroy:Q,update:se}}},{"../../lib":503,"./constants":893,glslify:227}],898:[function(d,ne,ae){ne.exports=function(w,v,M,T){T||(T=1/0);var e,a;for(e=0;e<v.length;e++)a=v[e],a.visible&&(T=Math.min(T,a[M].length));for(T===1/0&&(T=0),w._length=T,e=0;e<v.length;e++)a=v[e],a.visible&&(a._length=T);return T}},{}],899:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../lib"),M=v.numberFormat,T=d("color-rgba"),e=d("../../plots/cartesian/axes"),a=v.strRotate,n=v.strTranslate,r=d("../../lib/svg_text_utils"),t=d("../../components/drawing"),f=d("../../components/colorscale"),o=d("../../lib/gup"),i=o.keyFun,g=o.repeat,p=o.unwrap,y=d("./helpers"),c=d("./constants"),b=d("./axisbrush"),l=d("./lines");function _(Z,Y,j){return v.aggNums(Z,null,Y,j)}function s(Z,Y){return m(_(Math.min,Z,Y),_(Math.max,Z,Y))}function A(Z){var Y=Z.range;return Y?m(Y[0],Y[1]):s(Z.values,Z._length)}function m(Z,Y){return(isNaN(Z)||!isFinite(Z))&&(Z=0),(isNaN(Y)||!isFinite(Y))&&(Y=0),Z===Y&&(Z===0?(Z-=1,Y+=1):(Z*=.9,Y*=1.1)),[Z,Y]}function h(Z,Y){return Y?function(j,re){var se=Y[re];return se??Z(j)}:Z}function x(Z,Y,j,re,se){var oe=A(j);return re?w.scale.ordinal().domain(re.map(h(M(j.tickformat),se))).range(re.map(function(N){var U=(N-oe[0])/(oe[1]-oe[0]);return Z-Y+U*(2*Y-Z)})):w.scale.linear().domain(oe).range([Z-Y,Y])}function u(Z,Y){return w.scale.linear().range([Y,Z-Y])}function L(Z,Y){return w.scale.linear().domain(A(Z)).range([Y,1-Y])}function S(Z){if(!!Z.tickvals){var Y=A(Z);return w.scale.ordinal().domain(Z.tickvals).range(Z.tickvals.map(function(j){return(j-Y[0])/(Y[1]-Y[0])}))}}function k(Z){var Y=Z.map(function(oe){return oe[0]}),j=Z.map(function(oe){var N=T(oe[1]);return w.rgb("rgb("+N[0]+","+N[1]+","+N[2]+")")}),re=function(oe){return function(N){return N[oe]}},se="rgb".split("").map(function(oe){return w.scale.linear().clamp(!0).domain(Y).range(j.map(re(oe)))});return function(oe){return se.map(function(N){return N(oe)})}}function P(Z){return Z.dimensions.some(function(Y){return Y.brush.filterSpecified})}function z(Z,Y,j){var re=p(Y),se=re.trace,oe=y.convertTypedArray(re.lineColor),N=se.line,U={color:T(c.deselectedLineColor)},q=f.extractOpts(N),Q=q.reversescale?f.flipScale(re.cscale):re.cscale,W=se.domain,X=se.dimensions,ee=Z.width,te=se.labelangle,ie=se.labelside,le=se.labelfont,ge=se.tickfont,fe=se.rangefont,pe=v.extendDeepNoArrays({},N,{color:oe.map(w.scale.linear().domain(A({values:oe,range:[q.min,q.max],_length:se._length}))),blockLineCount:c.blockLineCount,canvasOverdrag:c.overdrag*c.canvasPixelRatio}),ye=Math.floor(ee*(W.x[1]-W.x[0])),Te=Math.floor(Z.height*(W.y[1]-W.y[0])),_e=Z.margin||{l:80,r:80,t:100,b:80},De=ye,Be=Te;return{key:j,colCount:X.filter(y.isVisible).length,dimensions:X,tickDistance:c.tickDistance,unitToColor:k(Q),lines:pe,deselectedLines:U,labelAngle:te,labelSide:ie,labelFont:le,tickFont:ge,rangeFont:fe,layoutWidth:ee,layoutHeight:Z.height,domain:W,translateX:W.x[0]*ee,translateY:Z.height-W.y[1]*Z.height,pad:_e,canvasWidth:De*c.canvasPixelRatio+2*pe.canvasOverdrag,canvasHeight:Be*c.canvasPixelRatio,width:De,height:Be,canvasPixelRatio:c.canvasPixelRatio}}function I(Z,Y,j){var re=j.width,se=j.height,oe=j.dimensions,N=j.canvasPixelRatio,U=function(ee){return re*ee/Math.max(1,j.colCount-1)},q=c.verticalPadding/se,Q=u(se,c.verticalPadding),W={key:j.key,xScale:U,model:j,inBrushDrag:!1},X={};return W.dimensions=oe.filter(y.isVisible).map(function(ee,te){var ie=L(ee,q),le=X[ee.label];X[ee.label]=(le||0)+1;var ge=ee.label+(le?"__"+le:""),fe=ee.constraintrange,pe=fe&&fe.length;pe&&!Array.isArray(fe[0])&&(fe=[fe]);var ye=pe?fe.map(function(Fe){return Fe.map(ie)}):[[-1/0,1/0]],Te=function(){var Fe=W;Fe.focusLayer&&Fe.focusLayer.render(Fe.panels,!0);var Le=P(Fe);!Z.contextShown()&&Le?(Fe.contextLayer&&Fe.contextLayer.render(Fe.panels,!0),Z.contextShown(!0)):Z.contextShown()&&!Le&&(Fe.contextLayer&&Fe.contextLayer.render(Fe.panels,!0,!0),Z.contextShown(!1))},_e=ee.values;_e.length>ee._length&&(_e=_e.slice(0,ee._length));var De=ee.tickvals,Be;function Ue(Fe,Le){return{val:Fe,text:Be[Le]}}function xe(Fe,Le){return Fe.val-Le.val}if(Array.isArray(De)&&De.length){Be=ee.ticktext,!Array.isArray(Be)||!Be.length?Be=De.map(M(ee.tickformat)):Be.length>De.length?Be=Be.slice(0,De.length):De.length>Be.length&&(De=De.slice(0,Be.length));for(var Pe=1;Pe<De.length;Pe++)if(De[Pe]<De[Pe-1]){for(var Ve=De.map(Ue).sort(xe),Qe=0;Qe<De.length;Qe++)De[Qe]=Ve[Qe].val,Be[Qe]=Ve[Qe].text;break}}else De=void 0;return _e=y.convertTypedArray(_e),{key:ge,label:ee.label,tickFormat:ee.tickformat,tickvals:De,ticktext:Be,ordinal:y.isOrdinal(ee),multiselect:ee.multiselect,xIndex:te,crossfilterDimensionIndex:te,visibleIndex:ee._index,height:se,values:_e,paddedUnitValues:_e.map(ie),unitTickvals:De&&De.map(ie),xScale:U,x:U(te),canvasX:U(te)*N,unitToPaddedPx:Q,domainScale:x(se,c.verticalPadding,ee,De,Be),ordinalScale:S(ee),parent:W,model:j,brush:b.makeBrush(Z,pe,ye,function(){Z.linePickActive(!1)},Te,function(Fe){if(W.focusLayer.render(W.panels,!0),W.pickLayer&&W.pickLayer.render(W.panels,!0),Z.linePickActive(!0),Y&&Y.filterChanged){var Le=ie.invert,Ne=Fe.map(function(dt){return dt.map(Le).sort(v.sorterAsc)}).sort(function(dt,Dt){return dt[0]-Dt[0]});Y.filterChanged(W.key,ee._index,Ne)}})}}),W}function D(Z){Z.classed(c.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function R(){var Z=!0,Y=!1;return{linePickActive:function(j){return arguments.length?Z=!!j:Z},contextShown:function(j){return arguments.length?Y=!!j:Y}}}function O(Z,Y){var j=Y==="top"?1:-1,re=Z*Math.PI/180,se=Math.sin(re),oe=Math.cos(re);return{dir:j,dx:se,dy:oe,degrees:Z}}function F(Z,Y,j){for(var re=Y.panels||(Y.panels=[]),se=Z.data(),oe=0;oe<se.length-1;oe++){var N=re[oe]||(re[oe]={}),U=se[oe],q=se[oe+1];N.dim0=U,N.dim1=q,N.canvasX=U.canvasX,N.panelSizeX=q.canvasX-U.canvasX,N.panelSizeY=Y.model.canvasHeight,N.y=0,N.canvasY=0,N.plotGlPixelRatio=j}}function V(Z){for(var Y=0;Y<Z.length;Y++)for(var j=0;j<Z[Y].length;j++)for(var re=Z[Y][j].trace,se=re.dimensions,oe=0;oe<se.length;oe++){var N=se[oe].values,U=se[oe]._ax;U&&(U.range?U.range=m(U.range[0],U.range[1]):U.range=s(N,re._length),U.dtick||(U.dtick=.01*(Math.abs(U.range[1]-U.range[0])||1)),U.tickformat=se[oe].tickformat,e.calcTicks(U),U.cleanRange())}}function G(Z,Y){return e.tickText(Z._ax,Y,!1).text}function J(Z,Y){if(Z.ordinal)return"";var j=Z.domainScale.domain(),re=j[Y?j.length-1:0];return G(Z.model.dimensions[Z.visibleIndex],re)}ne.exports=function(Y,j,re,se){var oe=Y._fullLayout,N=oe._toppaper,U=oe._glcontainer,q=Y._context.plotGlPixelRatio,Q=Y._fullLayout.paper_bgcolor;V(j);var W=R(),X=j.filter(function(Ve){return p(Ve).trace.visible}).map(z.bind(0,re)).map(I.bind(0,W,se));U.each(function(Ve,Qe){return v.extendFlat(Ve,X[Qe])});var ee=U.selectAll(".gl-canvas").each(function(Ve){Ve.viewModel=X[0],Ve.viewModel.plotGlPixelRatio=q,Ve.viewModel.paperColor=Q,Ve.model=Ve.viewModel?Ve.viewModel.model:null}),te=null,ie=ee.filter(function(Ve){return Ve.pick});ie.style("pointer-events","auto").on("mousemove",function(Ve){if(W.linePickActive()&&Ve.lineLayer&&se&&se.hover){var Qe=w.event,Fe=this.width,Le=this.height,Ne=w.mouse(this),dt=Ne[0],Dt=Ne[1];if(dt<0||Dt<0||dt>=Fe||Dt>=Le)return;var Xt=Ve.lineLayer.readPixel(dt,Le-1-Dt),At=Xt[3]!==0,zt=At?Xt[2]+256*(Xt[1]+256*Xt[0]):null,Ut={x:dt,y:Dt,clientX:Qe.clientX,clientY:Qe.clientY,dataIndex:Ve.model.key,curveNumber:zt};zt!==te&&(At?se.hover(Ut):se.unhover&&se.unhover(Ut),te=zt)}}),ee.style("opacity",function(Ve){return Ve.pick?0:1}),N.style("background","rgba(255, 255, 255, 0)");var le=N.selectAll("."+c.cn.parcoords).data(X,i);le.exit().remove(),le.enter().append("g").classed(c.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),le.attr("transform",function(Ve){return n(Ve.model.translateX,Ve.model.translateY)});var ge=le.selectAll("."+c.cn.parcoordsControlView).data(g,i);ge.enter().append("g").classed(c.cn.parcoordsControlView,!0),ge.attr("transform",function(Ve){return n(Ve.model.pad.l,Ve.model.pad.t)});var fe=ge.selectAll("."+c.cn.yAxis).data(function(Ve){return Ve.dimensions},i);fe.enter().append("g").classed(c.cn.yAxis,!0),ge.each(function(Ve){F(fe,Ve,q)}),ee.each(function(Ve){if(Ve.viewModel){!Ve.lineLayer||se?Ve.lineLayer=l(this,Ve):Ve.lineLayer.update(Ve),(Ve.key||Ve.key===0)&&(Ve.viewModel[Ve.key]=Ve.lineLayer);var Qe=!Ve.context||se;Ve.lineLayer.render(Ve.viewModel.panels,Qe)}}),fe.attr("transform",function(Ve){return n(Ve.xScale(Ve.xIndex),0)}),fe.call(w.behavior.drag().origin(function(Ve){return Ve}).on("drag",function(Ve){var Qe=Ve.parent;W.linePickActive(!1),Ve.x=Math.max(-c.overdrag,Math.min(Ve.model.width+c.overdrag,w.event.x)),Ve.canvasX=Ve.x*Ve.model.canvasPixelRatio,fe.sort(function(Fe,Le){return Fe.x-Le.x}).each(function(Fe,Le){Fe.xIndex=Le,Fe.x=Ve===Fe?Fe.x:Fe.xScale(Fe.xIndex),Fe.canvasX=Fe.x*Fe.model.canvasPixelRatio}),F(fe,Qe,q),fe.filter(function(Fe){return Math.abs(Ve.xIndex-Fe.xIndex)!==0}).attr("transform",function(Fe){return n(Fe.xScale(Fe.xIndex),0)}),w.select(this).attr("transform",n(Ve.x,0)),fe.each(function(Fe,Le,Ne){Ne===Ve.parent.key&&(Qe.dimensions[Le]=Fe)}),Qe.contextLayer&&Qe.contextLayer.render(Qe.panels,!1,!P(Qe)),Qe.focusLayer.render&&Qe.focusLayer.render(Qe.panels)}).on("dragend",function(Ve){var Qe=Ve.parent;Ve.x=Ve.xScale(Ve.xIndex),Ve.canvasX=Ve.x*Ve.model.canvasPixelRatio,F(fe,Qe,q),w.select(this).attr("transform",function(Fe){return n(Fe.x,0)}),Qe.contextLayer&&Qe.contextLayer.render(Qe.panels,!1,!P(Qe)),Qe.focusLayer&&Qe.focusLayer.render(Qe.panels),Qe.pickLayer&&Qe.pickLayer.render(Qe.panels,!0),W.linePickActive(!0),se&&se.axesMoved&&se.axesMoved(Qe.key,Qe.dimensions.map(function(Fe){return Fe.crossfilterDimensionIndex}))})),fe.exit().remove();var pe=fe.selectAll("."+c.cn.axisOverlays).data(g,i);pe.enter().append("g").classed(c.cn.axisOverlays,!0),pe.selectAll("."+c.cn.axis).remove();var ye=pe.selectAll("."+c.cn.axis).data(g,i);ye.enter().append("g").classed(c.cn.axis,!0),ye.each(function(Ve){var Qe=Ve.model.height/Ve.model.tickDistance,Fe=Ve.domainScale,Le=Fe.domain();w.select(this).call(w.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Qe,Ve.tickFormat).tickValues(Ve.ordinal?Le:null).tickFormat(function(Ne){return y.isOrdinal(Ve)?Ne:G(Ve.model.dimensions[Ve.visibleIndex],Ne)}).scale(Fe)),t.font(ye.selectAll("text"),Ve.model.tickFont)}),ye.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),ye.selectAll("text").style("text-shadow",r.makeTextShadow(Q)).style("cursor","default");var Te=pe.selectAll("."+c.cn.axisHeading).data(g,i);Te.enter().append("g").classed(c.cn.axisHeading,!0);var _e=Te.selectAll("."+c.cn.axisTitle).data(g,i);_e.enter().append("text").classed(c.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events","auto"),_e.text(function(Ve){return Ve.label}).each(function(Ve){var Qe=w.select(this);t.font(Qe,Ve.model.labelFont),r.convertToTspans(Qe,Y)}).attr("transform",function(Ve){var Qe=O(Ve.model.labelAngle,Ve.model.labelSide),Fe=c.axisTitleOffset;return(Qe.dir>0?"":n(0,2*Fe+Ve.model.height))+a(Qe.degrees)+n(-Fe*Qe.dx,-Fe*Qe.dy)}).attr("text-anchor",function(Ve){var Qe=O(Ve.model.labelAngle,Ve.model.labelSide),Fe=Math.abs(Qe.dx),Le=Math.abs(Qe.dy);return 2*Fe>Le?Qe.dir*Qe.dx<0?"start":"end":"middle"});var De=pe.selectAll("."+c.cn.axisExtent).data(g,i);De.enter().append("g").classed(c.cn.axisExtent,!0);var Be=De.selectAll("."+c.cn.axisExtentTop).data(g,i);Be.enter().append("g").classed(c.cn.axisExtentTop,!0),Be.attr("transform",n(0,-c.axisExtentOffset));var Ue=Be.selectAll("."+c.cn.axisExtentTopText).data(g,i);Ue.enter().append("text").classed(c.cn.axisExtentTopText,!0).call(D),Ue.text(function(Ve){return J(Ve,!0)}).each(function(Ve){t.font(w.select(this),Ve.model.rangeFont)});var xe=De.selectAll("."+c.cn.axisExtentBottom).data(g,i);xe.enter().append("g").classed(c.cn.axisExtentBottom,!0),xe.attr("transform",function(Ve){return n(0,Ve.model.height+c.axisExtentOffset)});var Pe=xe.selectAll("."+c.cn.axisExtentBottomText).data(g,i);Pe.enter().append("text").classed(c.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(D),Pe.text(function(Ve){return J(Ve,!1)}).each(function(Ve){t.font(w.select(this),Ve.model.rangeFont)}),b.ensureAxisBrush(pe,Q)}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"./axisbrush":889,"./constants":893,"./helpers":895,"./lines":897,"@plotly/d3":58,"color-rgba":91}],900:[function(d,ne,n){var w=d("./parcoords"),v=d("../../lib/prepare_regl"),M=d("./helpers").isVisible,T={};function e(r,t,f){var o=t.indexOf(f),i=r.indexOf(o);return i===-1&&(i+=t.length),i}function a(r,t){return function(o,i){return e(r,t,o)-e(r,t,i)}}var n=ne.exports=function(t,f){var o=t._fullLayout,i=v(t,[],T);if(!!i){var g={},p={},y={},c={},b=o._size;f.forEach(function(m,h){var x=m[0].trace;y[h]=x.index;var u=c[h]=x._fullInput.index;g[h]=t.data[u].dimensions,p[h]=t.data[u].dimensions.slice()});var l=function(m,h,x){var u=p[m][h],L=x.map(function(D){return D.slice()}),S="dimensions["+h+"].constraintrange",k=o._tracePreGUI[t._fullData[y[m]]._fullInput.uid];if(k[S]===void 0){var P=u.constraintrange;k[S]=P||null}var z=t._fullData[y[m]].dimensions[h];L.length?(L.length===1&&(L=L[0]),u.constraintrange=L,z.constraintrange=L.slice(),L=[L]):(delete u.constraintrange,delete z.constraintrange,L=null);var I={};I[S]=L,t.emit("plotly_restyle",[I,[c[m]]])},_=function(m){t.emit("plotly_hover",m)},s=function(m){t.emit("plotly_unhover",m)},A=function(m,h){var x=a(h,p[m].filter(M));g[m].sort(x),p[m].filter(function(u){return!M(u)}).sort(function(u){return p[m].indexOf(u)}).forEach(function(u){g[m].splice(g[m].indexOf(u),1),g[m].splice(p[m].indexOf(u),0,u)}),t.emit("plotly_restyle",[{dimensions:[g[m]]},[c[m]]])};w(t,f,{width:b.w,height:b.h,margin:{t:b.t,r:b.r,b:b.b,l:b.l}},{filterChanged:l,hover:_,unhover:s,axesMoved:A})}};n.reglPrecompiled=T},{"../../lib/prepare_regl":516,"./helpers":895,"./parcoords":899}],901:[function(d,ne,ae){var w=d("../../plots/attributes"),v=d("../../plots/domain").attributes,M=d("../../plots/font_attributes"),T=d("../../components/color/attributes"),e=d("../../plots/template_attributes").hovertemplateAttrs,a=d("../../plots/template_attributes").texttemplateAttrs,n=d("../../lib/extend").extendFlat,r=M({editType:"plot",arrayOk:!0,colorEditType:"plot"});ne.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:T.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:n({},w.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:e({},{keys:["label","color","value","percent","text"]}),texttemplate:a({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:n({},r,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:n({},r,{}),outsidetextfont:n({},r,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:n({},r,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:v({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:n({},r,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],902:[function(d,ne,ae){var w=d("../../plots/plots");ae.name="pie",ae.plot=function(v,M,T,e){w.plotBasePlot(ae.name,v,M,T,e)},ae.clean=function(v,M,T,e){w.cleanBasePlot(ae.name,v,M,T,e)}},{"../../plots/plots":619}],903:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("tinycolor2"),M=d("../../components/color"),T={};function e(t,f){var o=[],i=t._fullLayout,g=i.hiddenlabels||[],p=f.labels,y=f.marker.colors||[],c=f.values,b=f._length,l=f._hasValues&&b,_,s;if(f.dlabel)for(p=new Array(b),_=0;_<b;_++)p[_]=String(f.label0+_*f.dlabel);var A={},m=a(i["_"+f.type+"colormap"]),h=0,x=!1;for(_=0;_<b;_++){var u,L,S;if(l){if(u=c[_],!w(u))continue;u=+u}else u=1;L=p[_],(L===void 0||L==="")&&(L=_),L=String(L);var k=A[L];k===void 0?(A[L]=o.length,S=g.indexOf(L)!==-1,S||(h+=u),o.push({v:u,label:L,color:m(y[_],L),i:_,pts:[_],hidden:S})):(x=!0,s=o[k],s.v+=u,s.pts.push(_),s.hidden||(h+=u),s.color===!1&&y[_]&&(s.color=m(y[_],L)))}o=o.filter(function(z){return z.v>=0});var P=f.type==="funnelarea"?x:f.sort;return P&&o.sort(function(z,I){return I.v-z.v}),o[0]&&(o[0].vTotal=h),o}function a(t){return function(o,i){return!o||(o=v(o),!o.isValid())?!1:(o=M.addOpacity(o,o.getAlpha()),t[i]||(t[i]=o),o)}}function n(t,f){var o=(f||{}).type;o||(o="pie");var i=t._fullLayout,g=t.calcdata,p=i[o+"colorway"],y=i["_"+o+"colormap"];i["extend"+o+"colors"]&&(p=r(p,T));for(var c=0,b=0;b<g.length;b++){var l=g[b],_=l[0].trace.type;if(_===o)for(var s=0;s<l.length;s++){var A=l[s];A.color===!1&&(y[A.label]?A.color=y[A.label]:(y[A.label]=A.color=p[c%p.length],c++))}}}function r(t,f){var o,i=JSON.stringify(t),g=f[i];if(!g){for(g=t.slice(),o=0;o<t.length;o++)g.push(v(t[o]).lighten(20).toHexString());for(o=0;o<t.length;o++)g.push(v(t[o]).darken(20).toHexString());f[i]=g}return g}ne.exports={calc:e,crossTraceCalc:n,makePullColorFn:a,generateExtendedColors:r}},{"../../components/color":366,"fast-isnumeric":190,tinycolor2:312}],904:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("../../lib"),M=d("./attributes"),T=d("../../plots/domain").defaults,e=d("../bar/defaults").handleText;function a(r,t){var f=Array.isArray(r),o=v.isArrayOrTypedArray(t),i=Math.min(f?r.length:1/0,o?t.length:1/0);if(isFinite(i)||(i=0),i&&o){for(var g,p=0;p<i;p++){var y=t[p];if(w(y)&&y>0){g=!0;break}}g||(i=0)}return{hasLabels:f,hasValues:o,len:i}}function n(r,t,f,o){function i(S,k){return v.coerce(r,t,M,S,k)}var g=i("labels"),p=i("values"),y=a(g,p),c=y.len;if(t._hasLabels=y.hasLabels,t._hasValues=y.hasValues,!t._hasLabels&&t._hasValues&&(i("label0"),i("dlabel")),!c){t.visible=!1;return}t._length=c;var b=i("marker.line.width");b&&i("marker.line.color"),i("marker.colors"),i("scalegroup");var l=i("text"),_=i("texttemplate"),s;if(_||(s=i("textinfo",Array.isArray(l)?"text+percent":"percent")),i("hovertext"),i("hovertemplate"),_||s&&s!=="none"){var A=i("textposition");e(r,t,o,i,A,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});var m=Array.isArray(A)||A==="auto",h=m||A==="outside";h&&i("automargin"),(A==="inside"||A==="auto"||Array.isArray(A))&&i("insidetextorientation")}T(t,o,i);var x=i("hole"),u=i("title.text");if(u){var L=i("title.position",x?"middle center":"top center");!x&&L==="middle center"&&(t.title.position="top center"),v.coerceFont(i,"title.font",o.font)}i("sort"),i("direction"),i("rotation"),i("pull")}ne.exports={handleLabelsAndValues:a,supplyDefaults:n}},{"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"./attributes":901,"fast-isnumeric":190}],905:[function(d,ne,ae){var w=d("../../components/fx/helpers").appendArrayMultiPointValues;ne.exports=function(M,T){var e={curveNumber:T.index,pointNumbers:M.pts,data:T._input,fullData:T,label:M.label,color:M.color,value:M.v,percent:M.percent,text:M.text,bbox:M.bbox,v:M.v};return M.pts.length===1&&(e.pointNumber=e.i=M.pts[0]),w(e,T,M.pts),T.type==="funnelarea"&&(delete e.v,delete e.i),e}},{"../../components/fx/helpers":402}],906:[function(d,ne,ae){var w=d("../../lib");function v(M){return M.indexOf("e")!==-1?M.replace(/[.]?0+e/,"e"):M.indexOf(".")!==-1?M.replace(/[.]?0+$/,""):M}ae.formatPiePercent=function(T,e){var a=v((T*100).toPrecision(3));return w.numSeparate(a,e)+"%"},ae.formatPieValue=function(T,e){var a=v(T.toPrecision(10));return w.numSeparate(a,e)},ae.getFirstFilled=function(T,e){if(!!Array.isArray(T))for(var a=0;a<e.length;a++){var n=T[e[a]];if(n||n===0||n==="")return n}},ae.castOption=function(T,e){if(Array.isArray(T))return ae.getFirstFilled(T,e);if(T)return T},ae.getRotationAngle=function(M){return(M==="auto"?0:M)*Math.PI/180}},{"../../lib":503}],907:[function(d,ne,ae){ne.exports={attributes:d("./attributes"),supplyDefaults:d("./defaults").supplyDefaults,supplyLayoutDefaults:d("./layout_defaults"),layoutAttributes:d("./layout_attributes"),calc:d("./calc").calc,crossTraceCalc:d("./calc").crossTraceCalc,plot:d("./plot").plot,style:d("./style"),styleOne:d("./style_one"),moduleType:"trace",name:"pie",basePlotModule:d("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":901,"./base_plot":902,"./calc":903,"./defaults":904,"./layout_attributes":908,"./layout_defaults":909,"./plot":910,"./style":911,"./style_one":912}],908:[function(d,ne,ae){ne.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],909:[function(d,ne,ae){var w=d("../../lib"),v=d("./layout_attributes");ne.exports=function(T,e){function a(n,r){return w.coerce(T,e,v,n,r)}a("hiddenlabels"),a("piecolorway",e.colorway),a("extendpiecolors")}},{"../../lib":503,"./layout_attributes":908}],910:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../plots/plots"),M=d("../../components/fx"),T=d("../../components/color"),e=d("../../components/drawing"),a=d("../../lib"),n=a.strScale,r=a.strTranslate,t=d("../../lib/svg_text_utils"),f=d("../bar/uniform_text"),o=f.recordMinTextSize,i=f.clearMinTextSize,g=d("../bar/constants").TEXTPAD,p=d("./helpers"),y=d("./event_data"),c=d("../../lib").isValidTextValue;function b(oe,N){var U=oe._fullLayout,q=U._size;i("pie",U),m(N,oe),J(N,q);var Q=a.makeTraceGroups(U._pielayer,N,"trace").each(function(W){var X=w.select(this),ee=W[0],te=ee.trace;Y(W),X.attr("stroke-linejoin","round"),X.each(function(){var ie=w.select(this).selectAll("g.slice").data(W);ie.enter().append("g").classed("slice",!0),ie.exit().remove();var le=[[[],[]],[[],[]]],ge=!1;ie.each(function(Ue,xe){if(Ue.hidden){w.select(this).selectAll("path,g").remove();return}Ue.pointNumber=Ue.i,Ue.curveNumber=te.index,le[Ue.pxmid[1]<0?0:1][Ue.pxmid[0]<0?0:1].push(Ue);var Pe=ee.cx,Ve=ee.cy,Qe=w.select(this),Fe=Qe.selectAll("path.surface").data([Ue]);if(Fe.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),Qe.call(_,oe,W),te.pull){var Le=+p.castOption(te.pull,Ue.pts)||0;Le>0&&(Pe+=Le*Ue.pxmid[0],Ve+=Le*Ue.pxmid[1])}Ue.cxFinal=Pe,Ue.cyFinal=Ve;function Ne(Ct,Mt,rt,ct){var Ze=ct*(Mt[0]-Ct[0]),ke=ct*(Mt[1]-Ct[1]);return"a"+ct*ee.r+","+ct*ee.r+" 0 "+Ue.largeArc+(rt?" 1 ":" 0 ")+Ze+","+ke}var dt=te.hole;if(Ue.v===ee.vTotal){var Dt="M"+(Pe+Ue.px0[0])+","+(Ve+Ue.px0[1])+Ne(Ue.px0,Ue.pxmid,!0,1)+Ne(Ue.pxmid,Ue.px0,!0,1)+"Z";dt?Fe.attr("d","M"+(Pe+dt*Ue.px0[0])+","+(Ve+dt*Ue.px0[1])+Ne(Ue.px0,Ue.pxmid,!1,dt)+Ne(Ue.pxmid,Ue.px0,!1,dt)+"Z"+Dt):Fe.attr("d",Dt)}else{var Xt=Ne(Ue.px0,Ue.px1,!0,1);if(dt){var At=1-dt;Fe.attr("d","M"+(Pe+dt*Ue.px1[0])+","+(Ve+dt*Ue.px1[1])+Ne(Ue.px1,Ue.px0,!1,dt)+"l"+At*Ue.px0[0]+","+At*Ue.px0[1]+Xt+"Z")}else Fe.attr("d","M"+Pe+","+Ve+"l"+Ue.px0[0]+","+Ue.px0[1]+Xt+"Z")}re(oe,Ue,ee);var zt=p.castOption(te.textposition,Ue.pts),Ut=Qe.selectAll("g.slicetext").data(Ue.text&&zt!=="none"?[0]:[]);Ut.enter().append("g").classed("slicetext",!0),Ut.exit().remove(),Ut.each(function(){var Ct=a.ensureSingle(w.select(this),"text","",function(ot){ot.attr("data-notex",1)}),Mt=a.ensureUniformFontSize(oe,zt==="outside"?s(te,Ue,U.font):A(te,Ue,U.font));Ct.text(Ue.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(e.font,Mt).call(t.convertToTspans,oe);var rt=e.bBox(Ct.node()),ct;if(zt==="outside")ct=I(rt,Ue);else if(ct=h(rt,Ue,ee),zt==="auto"&&ct.scale<1){var Ze=a.ensureUniformFontSize(oe,te.outsidetextfont);Ct.call(e.font,Ze),rt=e.bBox(Ct.node()),ct=I(rt,Ue)}var ke=ct.textPosAngle,Ge=ke===void 0?Ue.pxmid:j(ee.r,ke);if(ct.targetX=Pe+Ge[0]*ct.rCenter+(ct.x||0),ct.targetY=Ve+Ge[1]*ct.rCenter+(ct.y||0),se(ct,rt),ct.outside){var Je=ct.targetY;Ue.yLabelMin=Je-rt.height/2,Ue.yLabelMid=Je,Ue.yLabelMax=Je+rt.height/2,Ue.labelExtraX=0,Ue.labelExtraY=0,ge=!0}ct.fontSize=Mt.size,o(te.type,ct,U),W[xe].transform=ct,Ct.attr("transform",a.getTextTransform(ct))})});var fe=w.select(this).selectAll("g.titletext").data(te.title.text?[0]:[]);if(fe.enter().append("g").classed("titletext",!0),fe.exit().remove(),fe.each(function(){var Ue=a.ensureSingle(w.select(this),"text","",function(Ve){Ve.attr("data-notex",1)}),xe=te.title.text;te._meta&&(xe=a.templateString(xe,te._meta)),Ue.text(xe).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(e.font,te.title.font).call(t.convertToTspans,oe);var Pe;te.title.position==="middle center"?Pe=D(ee):Pe=R(ee,q),Ue.attr("transform",r(Pe.x,Pe.y)+n(Math.min(1,Pe.scale))+r(Pe.tx,Pe.ty))}),ge&&G(le,te),l(ie,te),ge&&te.automargin){var pe=e.bBox(X.node()),ye=te.domain,Te=q.w*(ye.x[1]-ye.x[0]),_e=q.h*(ye.y[1]-ye.y[0]),De=(.5*Te-ee.r)/q.w,Be=(.5*_e-ee.r)/q.h;v.autoMargin(oe,"pie."+te.uid+".automargin",{xl:ye.x[0]-De,xr:ye.x[1]+De,yb:ye.y[0]-Be,yt:ye.y[1]+Be,l:Math.max(ee.cx-ee.r-pe.left,0),r:Math.max(pe.right-(ee.cx+ee.r),0),b:Math.max(pe.bottom-(ee.cy+ee.r),0),t:Math.max(ee.cy-ee.r-pe.top,0),pad:5})}})});setTimeout(function(){Q.selectAll("tspan").each(function(){var W=w.select(this);W.attr("dy")&&W.attr("dy",W.attr("dy"))})},0)}function l(oe,N){oe.each(function(U){var q=w.select(this);if(!U.labelExtraX&&!U.labelExtraY){q.select("path.textline").remove();return}var Q=q.select("g.slicetext text");U.transform.targetX+=U.labelExtraX,U.transform.targetY+=U.labelExtraY,Q.attr("transform",a.getTextTransform(U.transform));var W=U.cxFinal+U.pxmid[0],X=U.cyFinal+U.pxmid[1],ee="M"+W+","+X,te=(U.yLabelMax-U.yLabelMin)*(U.pxmid[0]<0?-1:1)/4;if(U.labelExtraX){var ie=U.labelExtraX*U.pxmid[1]/U.pxmid[0],le=U.yLabelMid+U.labelExtraY-(U.cyFinal+U.pxmid[1]);Math.abs(ie)>Math.abs(le)?ee+="l"+le*U.pxmid[0]/U.pxmid[1]+","+le+"H"+(W+U.labelExtraX+te):ee+="l"+U.labelExtraX+","+ie+"v"+(le-ie)+"h"+te}else ee+="V"+(U.yLabelMid+U.labelExtraY)+"h"+te;a.ensureSingle(q,"path","textline").call(T.stroke,N.outsidetextfont.color).attr({"stroke-width":Math.min(2,N.outsidetextfont.size/8),d:ee,fill:"none"})})}function _(oe,N,U){var q=U[0],Q=q.cx,W=q.cy,X=q.trace,ee=X.type==="funnelarea";"_hasHoverLabel"in X||(X._hasHoverLabel=!1),"_hasHoverEvent"in X||(X._hasHoverEvent=!1),oe.on("mouseover",function(te){var ie=N._fullLayout,le=N._fullData[X.index];if(!(N._dragging||ie.hovermode===!1)){var ge=le.hoverinfo;if(Array.isArray(ge)&&(ge=M.castHoverinfo({hoverinfo:[p.castOption(ge,te.pts)],_module:X._module},ie,0)),ge==="all"&&(ge="label+text+value+percent+name"),le.hovertemplate||ge!=="none"&&ge!=="skip"&&ge){var fe=te.rInscribed||0,pe=Q+te.pxmid[0]*(1-fe),ye=W+te.pxmid[1]*(1-fe),Te=ie.separators,_e=[];if(ge&&ge.indexOf("label")!==-1&&_e.push(te.label),te.text=p.castOption(le.hovertext||le.text,te.pts),ge&&ge.indexOf("text")!==-1){var De=te.text;a.isValidTextValue(De)&&_e.push(De)}te.value=te.v,te.valueLabel=p.formatPieValue(te.v,Te),ge&&ge.indexOf("value")!==-1&&_e.push(te.valueLabel),te.percent=te.v/q.vTotal,te.percentLabel=p.formatPiePercent(te.percent,Te),ge&&ge.indexOf("percent")!==-1&&_e.push(te.percentLabel);var Be=le.hoverlabel,Ue=Be.font,xe=[];M.loneHover({trace:X,x0:pe-fe*q.r,x1:pe+fe*q.r,y:ye,_x0:ee?Q+te.TL[0]:pe-fe*q.r,_x1:ee?Q+te.TR[0]:pe+fe*q.r,_y0:ee?W+te.TL[1]:ye-fe*q.r,_y1:ee?W+te.BL[1]:ye+fe*q.r,text:_e.join("<br>"),name:le.hovertemplate||ge.indexOf("name")!==-1?le.name:void 0,idealAlign:te.pxmid[0]<0?"left":"right",color:p.castOption(Be.bgcolor,te.pts)||te.color,borderColor:p.castOption(Be.bordercolor,te.pts),fontFamily:p.castOption(Ue.family,te.pts),fontSize:p.castOption(Ue.size,te.pts),fontColor:p.castOption(Ue.color,te.pts),nameLength:p.castOption(Be.namelength,te.pts),textAlign:p.castOption(Be.align,te.pts),hovertemplate:p.castOption(le.hovertemplate,te.pts),hovertemplateLabels:te,eventData:[y(te,le)]},{container:ie._hoverlayer.node(),outerContainer:ie._paper.node(),gd:N,inOut_bbox:xe}),te.bbox=xe[0],X._hasHoverLabel=!0}X._hasHoverEvent=!0,N.emit("plotly_hover",{points:[y(te,le)],event:w.event})}}),oe.on("mouseout",function(te){var ie=N._fullLayout,le=N._fullData[X.index],ge=w.select(this).datum();X._hasHoverEvent&&(te.originalEvent=w.event,N.emit("plotly_unhover",{points:[y(ge,le)],event:w.event}),X._hasHoverEvent=!1),X._hasHoverLabel&&(M.loneUnhover(ie._hoverlayer.node()),X._hasHoverLabel=!1)}),oe.on("click",function(te){var ie=N._fullLayout,le=N._fullData[X.index];N._dragging||ie.hovermode===!1||(N._hoverdata=[y(te,le)],M.click(N,w.event))})}function s(oe,N,U){var q=p.castOption(oe.outsidetextfont.color,N.pts)||p.castOption(oe.textfont.color,N.pts)||U.color,Q=p.castOption(oe.outsidetextfont.family,N.pts)||p.castOption(oe.textfont.family,N.pts)||U.family,W=p.castOption(oe.outsidetextfont.size,N.pts)||p.castOption(oe.textfont.size,N.pts)||U.size;return{color:q,family:Q,size:W}}function A(oe,N,U){var q=p.castOption(oe.insidetextfont.color,N.pts);!q&&oe._input.textfont&&(q=p.castOption(oe._input.textfont.color,N.pts));var Q=p.castOption(oe.insidetextfont.family,N.pts)||p.castOption(oe.textfont.family,N.pts)||U.family,W=p.castOption(oe.insidetextfont.size,N.pts)||p.castOption(oe.textfont.size,N.pts)||U.size;return{color:q||T.contrast(N.color),family:Q,size:W}}function m(oe,N){for(var U,q,Q=0;Q<oe.length;Q++)if(U=oe[Q][0],q=U.trace,q.title.text){var W=q.title.text;q._meta&&(W=a.templateString(W,q._meta));var X=e.tester.append("text").attr("data-notex",1).text(W).call(e.font,q.title.font).call(t.convertToTspans,N),ee=e.bBox(X.node(),!0);U.titleBox={width:ee.width,height:ee.height},X.remove()}}function h(oe,N,U){var q=U.r||N.rpx1,Q=N.rInscribed,W=N.startangle===N.stopangle;if(W)return{rCenter:1-Q,scale:0,rotate:0,textPosAngle:0};var X=N.ring,ee=X===1&&Math.abs(N.startangle-N.stopangle)===Math.PI*2,te=N.halfangle,ie=N.midangle,le=U.trace.insidetextorientation,ge=le==="horizontal",fe=le==="tangential",pe=le==="radial",ye=le==="auto",Te=[],_e;if(!ye){var De=function(Fe,Le){if(x(N,Fe)){var Ne=Math.abs(Fe-N.startangle),dt=Math.abs(Fe-N.stopangle),Dt=Ne<dt?Ne:dt;Le==="tan"?_e=L(oe,q,X,Dt,0):_e=u(oe,q,X,Dt,Math.PI/2),_e.textPosAngle=Fe,Te.push(_e)}},Be;if(ge||fe){for(Be=4;Be>=-4;Be-=2)De(Math.PI*Be,"tan");for(Be=4;Be>=-4;Be-=2)De(Math.PI*(Be+1),"tan")}if(ge||pe){for(Be=4;Be>=-4;Be-=2)De(Math.PI*(Be+1.5),"rad");for(Be=4;Be>=-4;Be-=2)De(Math.PI*(Be+.5),"rad")}}if(ee||ye||ge){var Ue=Math.sqrt(oe.width*oe.width+oe.height*oe.height);if(_e={scale:Q*q*2/Ue,rCenter:1-Q,rotate:0},_e.textPosAngle=(N.startangle+N.stopangle)/2,_e.scale>=1)return _e;Te.push(_e)}(ye||pe)&&(_e=u(oe,q,X,te,ie),_e.textPosAngle=(N.startangle+N.stopangle)/2,Te.push(_e)),(ye||fe)&&(_e=L(oe,q,X,te,ie),_e.textPosAngle=(N.startangle+N.stopangle)/2,Te.push(_e));for(var xe=0,Pe=0,Ve=0;Ve<Te.length;Ve++){var Qe=Te[Ve].scale;if(Pe<Qe&&(Pe=Qe,xe=Ve),!ye&&Pe>=1)break}return Te[xe]}function x(oe,N){var U=oe.startangle,q=oe.stopangle;return U>N&&N>q||U<N&&N<q}function u(oe,N,U,q,Q){N=Math.max(0,N-2*g);var W=oe.width/oe.height,X=P(W,q,N,U);return{scale:X*2/oe.height,rCenter:S(W,X/N),rotate:k(Q)}}function L(oe,N,U,q,Q){N=Math.max(0,N-2*g);var W=oe.height/oe.width,X=P(W,q,N,U);return{scale:X*2/oe.width,rCenter:S(W,X/N),rotate:k(Q+Math.PI/2)}}function S(oe,N){return Math.cos(N)-oe*N}function k(oe){return(180/Math.PI*oe+720)%180-90}function P(oe,N,U,q){var Q=oe+1/(2*Math.tan(N));return U*Math.min(1/(Math.sqrt(Q*Q+.5)+Q),q/(Math.sqrt(oe*oe+q/2)+oe))}function z(oe,N){return oe.v===N.vTotal&&!N.trace.hole?1:Math.min(1/(1+1/Math.sin(oe.halfangle)),oe.ring/2)}function I(oe,N){var U=N.pxmid[0],q=N.pxmid[1],Q=oe.width/2,W=oe.height/2;return U<0&&(Q*=-1),q<0&&(W*=-1),{scale:1,rCenter:1,rotate:0,x:Q+Math.abs(W)*(Q>0?1:-1)/2,y:W/(1+U*U/(q*q)),outside:!0}}function D(oe){var N=Math.sqrt(oe.titleBox.width*oe.titleBox.width+oe.titleBox.height*oe.titleBox.height);return{x:oe.cx,y:oe.cy,scale:oe.trace.hole*oe.r*2/N,tx:0,ty:-oe.titleBox.height/2+oe.trace.title.font.size}}function R(oe,N){var U=1,q=1,Q,W=oe.trace,X={x:oe.cx,y:oe.cy},ee={tx:0,ty:0};ee.ty+=W.title.font.size,Q=V(W),W.title.position.indexOf("top")!==-1?(X.y-=(1+Q)*oe.r,ee.ty-=oe.titleBox.height):W.title.position.indexOf("bottom")!==-1&&(X.y+=(1+Q)*oe.r);var te=O(oe.r,oe.trace.aspectratio),ie=N.w*(W.domain.x[1]-W.domain.x[0])/2;return W.title.position.indexOf("left")!==-1?(ie=ie+te,X.x-=(1+Q)*te,ee.tx+=oe.titleBox.width/2):W.title.position.indexOf("center")!==-1?ie*=2:W.title.position.indexOf("right")!==-1&&(ie=ie+te,X.x+=(1+Q)*te,ee.tx-=oe.titleBox.width/2),U=ie/oe.titleBox.width,q=F(oe,N)/oe.titleBox.height,{x:X.x,y:X.y,scale:Math.min(U,q),tx:ee.tx,ty:ee.ty}}function O(oe,N){return oe/(N===void 0?1:N)}function F(oe,N){var U=oe.trace,q=N.h*(U.domain.y[1]-U.domain.y[0]);return Math.min(oe.titleBox.height,q/2)}function V(oe){var N=oe.pull;if(!N)return 0;var U;if(Array.isArray(N))for(N=0,U=0;U<oe.pull.length;U++)oe.pull[U]>N&&(N=oe.pull[U]);return N}function G(oe,N){var U,q,Q,W,X,ee,te,ie,le,ge,fe,pe,ye;function Te(Ue,xe){return Ue.pxmid[1]-xe.pxmid[1]}function _e(Ue,xe){return xe.pxmid[1]-Ue.pxmid[1]}function De(Ue,xe){xe||(xe={});var Pe=xe.labelExtraY+(q?xe.yLabelMax:xe.yLabelMin),Ve=q?Ue.yLabelMin:Ue.yLabelMax,Qe=q?Ue.yLabelMax:Ue.yLabelMin,Fe=Ue.cyFinal+X(Ue.px0[1],Ue.px1[1]),Le=Pe-Ve,Ne,dt,Dt,Xt,At,zt;if(Le*te>0&&(Ue.labelExtraY=Le),!!Array.isArray(N.pull))for(dt=0;dt<ge.length;dt++)Dt=ge[dt],!(Dt===Ue||(p.castOption(N.pull,Ue.pts)||0)>=(p.castOption(N.pull,Dt.pts)||0))&&((Ue.pxmid[1]-Dt.pxmid[1])*te>0?(Xt=Dt.cyFinal+X(Dt.px0[1],Dt.px1[1]),Le=Xt-Ve-Ue.labelExtraY,Le*te>0&&(Ue.labelExtraY+=Le)):(Qe+Ue.labelExtraY-Fe)*te>0&&(Ne=3*ee*Math.abs(dt-ge.indexOf(Ue)),At=Dt.cxFinal+W(Dt.px0[0],Dt.px1[0]),zt=At+Ne-(Ue.cxFinal+Ue.pxmid[0])-Ue.labelExtraX,zt*ee>0&&(Ue.labelExtraX+=zt)))}for(q=0;q<2;q++)for(Q=q?Te:_e,X=q?Math.max:Math.min,te=q?1:-1,U=0;U<2;U++){for(W=U?Math.max:Math.min,ee=U?1:-1,ie=oe[q][U],ie.sort(Q),le=oe[1-q][U],ge=le.concat(ie),pe=[],fe=0;fe<ie.length;fe++)ie[fe].yLabelMid!==void 0&&pe.push(ie[fe]);for(ye=!1,fe=0;q&&fe<le.length;fe++)if(le[fe].yLabelMid!==void 0){ye=le[fe];break}for(fe=0;fe<pe.length;fe++){var Be=fe&&pe[fe-1];ye&&!fe&&(Be=ye),De(pe[fe],Be)}}}function J(oe,N){for(var U=[],q=0;q<oe.length;q++){var Q=oe[q][0],W=Q.trace,X=W.domain,ee=N.w*(X.x[1]-X.x[0]),te=N.h*(X.y[1]-X.y[0]);W.title.text&&W.title.position!=="middle center"&&(te-=F(Q,N));var ie=ee/2,le=te/2;W.type==="funnelarea"&&!W.scalegroup&&(le/=W.aspectratio),Q.r=Math.min(ie,le)/(1+V(W)),Q.cx=N.l+N.w*(W.domain.x[1]+W.domain.x[0])/2,Q.cy=N.t+N.h*(1-W.domain.y[0])-te/2,W.title.text&&W.title.position.indexOf("bottom")!==-1&&(Q.cy-=F(Q,N)),W.scalegroup&&U.indexOf(W.scalegroup)===-1&&U.push(W.scalegroup)}Z(oe,U)}function Z(oe,N){for(var U,q,Q,W=0;W<N.length;W++){var X=1/0,ee=N[W];for(q=0;q<oe.length;q++)if(U=oe[q][0],Q=U.trace,Q.scalegroup===ee){var te;if(Q.type==="pie")te=U.r*U.r;else if(Q.type==="funnelarea"){var ie,le;Q.aspectratio>1?(ie=U.r,le=ie/Q.aspectratio):(le=U.r,ie=le*Q.aspectratio),ie*=(1+Q.baseratio)/2,te=ie*le}X=Math.min(X,te/U.vTotal)}for(q=0;q<oe.length;q++)if(U=oe[q][0],Q=U.trace,Q.scalegroup===ee){var ge=X*U.vTotal;Q.type==="funnelarea"&&(ge/=(1+Q.baseratio)/2,ge/=Q.aspectratio),U.r=Math.sqrt(ge)}}}function Y(oe){var N=oe[0],U=N.r,q=N.trace,Q=p.getRotationAngle(q.rotation),W=2*Math.PI/N.vTotal,X="px0",ee="px1",te,ie,le;if(q.direction==="counterclockwise"){for(te=0;te<oe.length&&oe[te].hidden;te++);if(te===oe.length)return;Q+=W*oe[te].v,W*=-1,X="px1",ee="px0"}for(le=j(U,Q),te=0;te<oe.length;te++)ie=oe[te],!ie.hidden&&(ie[X]=le,ie.startangle=Q,Q+=W*ie.v/2,ie.pxmid=j(U,Q),ie.midangle=Q,Q+=W*ie.v/2,le=j(U,Q),ie.stopangle=Q,ie[ee]=le,ie.largeArc=ie.v>N.vTotal/2?1:0,ie.halfangle=Math.PI*Math.min(ie.v/N.vTotal,.5),ie.ring=1-q.hole,ie.rInscribed=z(ie,N))}function j(oe,N){return[oe*Math.sin(N),-oe*Math.cos(N)]}function re(oe,N,U){var q=oe._fullLayout,Q=U.trace,W=Q.texttemplate,X=Q.textinfo;if(!W&&X&&X!=="none"){var ee=X.split("+"),te=function(xe){return ee.indexOf(xe)!==-1},ie=te("label"),le=te("text"),ge=te("value"),fe=te("percent"),pe=q.separators,ye;if(ye=ie?[N.label]:[],le){var Te=p.getFirstFilled(Q.text,N.pts);c(Te)&&ye.push(Te)}ge&&ye.push(p.formatPieValue(N.v,pe)),fe&&ye.push(p.formatPiePercent(N.v/U.vTotal,pe)),N.text=ye.join("<br>")}function _e(xe){return{label:xe.label,value:xe.v,valueLabel:p.formatPieValue(xe.v,q.separators),percent:xe.v/U.vTotal,percentLabel:p.formatPiePercent(xe.v/U.vTotal,q.separators),color:xe.color,text:xe.text,customdata:a.castOption(Q,xe.i,"customdata")}}if(W){var De=a.castOption(Q,N.i,"texttemplate");if(!De)N.text="";else{var Be=_e(N),Ue=p.getFirstFilled(Q.text,N.pts);(c(Ue)||Ue==="")&&(Be.text=Ue),N.text=a.texttemplateString(De,Be,oe._fullLayout._d3locale,Be,Q._meta||{})}}}function se(oe,N){var U=oe.rotate*Math.PI/180,q=Math.cos(U),Q=Math.sin(U),W=(N.left+N.right)/2,X=(N.top+N.bottom)/2;oe.textX=W*q-X*Q,oe.textY=W*Q+X*q,oe.noCenter=!0}ne.exports={plot:b,formatSliceLabel:re,transformInsideText:h,determineInsideTextFont:A,positionTitleOutside:R,prerenderTitles:m,layoutAreas:J,attachFxHandlers:_,computeTransform:se}},{"../../components/color":366,"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../bar/constants":650,"../bar/uniform_text":664,"./event_data":905,"./helpers":906,"@plotly/d3":58}],911:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("./style_one"),M=d("../bar/uniform_text").resizeText;ne.exports=function(e){var a=e._fullLayout._pielayer.selectAll(".trace");M(e,a,"pie"),a.each(function(n){var r=n[0],t=r.trace,f=w.select(this);f.style({opacity:t.opacity}),f.selectAll("path.surface").each(function(o){w.select(this).call(v,o,t)})})}},{"../bar/uniform_text":664,"./style_one":912,"@plotly/d3":58}],912:[function(d,ne,ae){var w=d("../../components/color"),v=d("./helpers").castOption;ne.exports=function(T,e,a){var n=a.marker.line,r=v(n.color,e.pts)||w.defaultLine,t=v(n.width,e.pts)||0;T.style("stroke-width",t).call(w.fill,e.color).call(w.stroke,r)}},{"../../components/color":366,"./helpers":906}],913:[function(d,ne,ae){var w=d("../scatter/attributes");ne.exports={x:w.x,y:w.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:w.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":927}],914:[function(d,ne,ae){var w=d("../../../stackgl_modules").gl_pointcloud2d,v=d("../../lib/str2rgbarray"),M=d("../../plots/cartesian/autorange").findExtremes,T=d("../scatter/get_trace_color");function e(r,t){this.scene=r,this.uid=t,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=w(r.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var a=e.prototype;a.handlePick=function(r){var t=this.idToIndex[r.pointId];return{trace:this,dataCoord:r.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[t*2],this.pickXYData[t*2+1]]:[this.pickXData[t],this.pickYData[t]],textLabel:Array.isArray(this.textLabels)?this.textLabels[t]:this.textLabels,color:this.color,name:this.name,pointIndex:t,hoverinfo:this.hoverinfo}},a.update=function(r){this.index=r.index,this.textLabels=r.text,this.name=r.name,this.hoverinfo=r.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(r),this.color=T(r,{})},a.updateFast=function(r){var t=this.xData=this.pickXData=r.x,f=this.yData=this.pickYData=r.y,o=this.pickXYData=r.xy,i=r.xbounds&&r.ybounds,g=r.indices,p,y,c,b=this.bounds,l,_,s;if(o){if(c=o,p=o.length>>>1,i)b[0]=r.xbounds[0],b[2]=r.xbounds[1],b[1]=r.ybounds[0],b[3]=r.ybounds[1];else for(s=0;s<p;s++)l=c[s*2],_=c[s*2+1],l<b[0]&&(b[0]=l),l>b[2]&&(b[2]=l),_<b[1]&&(b[1]=_),_>b[3]&&(b[3]=_);if(g)y=g;else for(y=new Int32Array(p),s=0;s<p;s++)y[s]=s}else for(p=t.length,c=new Float32Array(2*p),y=new Int32Array(p),s=0;s<p;s++)l=t[s],_=f[s],y[s]=s,c[s*2]=l,c[s*2+1]=_,l<b[0]&&(b[0]=l),l>b[2]&&(b[2]=l),_<b[1]&&(b[1]=_),_>b[3]&&(b[3]=_);this.idToIndex=y,this.pointcloudOptions.idToIndex=y,this.pointcloudOptions.positions=c;var A=v(r.marker.color),m=v(r.marker.border.color),h=r.opacity*r.marker.opacity;A[3]*=h,this.pointcloudOptions.color=A;var x=r.marker.blend;if(x===null){var u=100;x=t.length<u||f.length<u}this.pointcloudOptions.blend=x,m[3]*=h,this.pointcloudOptions.borderColor=m;var L=r.marker.sizemin,S=Math.max(r.marker.sizemax,r.marker.sizemin);this.pointcloudOptions.sizeMin=L,this.pointcloudOptions.sizeMax=S,this.pointcloudOptions.areaRatio=r.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var k=this.scene.xaxis,P=this.scene.yaxis,z=S/2||.5;r._extremes[k._id]=M(k,[b[0],b[2]],{ppad:z}),r._extremes[P._id]=M(P,[b[1],b[3]],{ppad:z})},a.dispose=function(){this.pointcloud.dispose()};function n(r,t){var f=new e(r,t.uid);return f.update(t),f}ne.exports=n},{"../../../stackgl_modules":1124,"../../lib/str2rgbarray":528,"../../plots/cartesian/autorange":553,"../scatter/get_trace_color":937}],915:[function(d,ne,ae){var w=d("../../lib"),v=d("./attributes");ne.exports=function(T,e,a){function n(r,t){return w.coerce(T,e,v,r,t)}n("x"),n("y"),n("xbounds"),n("ybounds"),T.xy&&T.xy instanceof Float32Array&&(e.xy=T.xy),T.indices&&T.indices instanceof Int32Array&&(e.indices=T.indices),n("text"),n("marker.color",a),n("marker.opacity"),n("marker.blend"),n("marker.sizemin"),n("marker.sizemax"),n("marker.border.color",a),n("marker.border.arearatio"),e._length=null}},{"../../lib":503,"./attributes":913}],916:[function(d,ne,ae){ne.exports={attributes:d("./attributes"),supplyDefaults:d("./defaults"),calc:d("../scatter3d/calc"),plot:d("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:d("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":596,"../scatter3d/calc":956,"./attributes":913,"./convert":914,"./defaults":915}],917:[function(d,ne,ae){var w=d("../../plots/font_attributes"),v=d("../../plots/attributes"),M=d("../../components/color/attributes"),T=d("../../components/fx/attributes"),e=d("../../plots/domain").attributes,a=d("../../plots/template_attributes").hovertemplateAttrs,n=d("../../components/colorscale/attributes"),r=d("../../plot_api/plot_template").templatedArray,t=d("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,f=d("../../lib/extend").extendFlat,o=d("../../plot_api/edit_types").overrideAll,i=ne.exports=o({hoverinfo:f({},v.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:T.hoverlabel,domain:e({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:t("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:w({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:M.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:a({},{keys:["value","label"]})},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:M.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:T.hoverlabel,hovertemplate:a({},{keys:["value","label"]}),colorscales:r("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:f(n().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested");i.transforms=void 0},{"../../components/color/attributes":365,"../../components/colorscale/attributes":373,"../../components/fx/attributes":397,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],918:[function(d,ne,ae){var w=d("../../plot_api/edit_types").overrideAll,v=d("../../plots/get_data").getModuleCalcData,M=d("./plot"),T=d("../../components/fx/layout_attributes"),e=d("../../lib/setcursor"),a=d("../../components/dragelement"),n=d("../../plots/cartesian/select").prepSelect,r=d("../../lib"),t=d("../../registry"),f="sankey";ae.name=f,ae.baseLayoutAttrOverrides=w({hoverlabel:T.hoverlabel},"plot","nested"),ae.plot=function(i){var g=v(i.calcdata,f)[0];M(i,g),ae.updateFx(i)},ae.clean=function(i,g,p,y){var c=y._has&&y._has(f),b=g._has&&g._has(f);c&&!b&&(y._paperdiv.selectAll(".sankey").remove(),y._paperdiv.selectAll(".bgsankey").remove())},ae.updateFx=function(i){for(var g=0;g<i._fullData.length;g++)o(i,g)};function o(i,g){var p=i._fullData[g],y=i._fullLayout,c=y.dragmode,b=y.dragmode==="pan"?"move":"crosshair",l=p._bgRect;if(!(c==="pan"||c==="zoom")){e(l,b);var _={_id:"x",c2p:r.identity,_offset:p._sankey.translateX,_length:p._sankey.width},s={_id:"y",c2p:r.identity,_offset:p._sankey.translateY,_length:p._sankey.height},A={gd:i,element:l.node(),plotinfo:{id:g,xaxis:_,yaxis:s,fillRangeItems:r.noop},subplot:g,xaxes:[_],yaxes:[s],doneFnCompleted:function(m){var h=i._fullData[g],x,u=h.node.groups.slice(),L=[];function S(I){for(var D=h._sankey.graph.nodes,R=0;R<D.length;R++)if(D[R].pointNumber===I)return D[R]}for(var k=0;k<m.length;k++){var P=S(m[k].pointNumber);if(!!P)if(P.group){for(var z=0;z<P.childrenNodes.length;z++)L.push(P.childrenNodes[z].pointNumber);u[P.pointNumber-h.node._count]=!1}else L.push(P.pointNumber)}x=u.filter(Boolean).concat([L]),t.call("_guiRestyle",i,{"node.groups":[x]},g)}};A.prepFn=function(m,h,x){n(m,h,x,A,c)},a.init(A)}}},{"../../components/dragelement":385,"../../components/fx/layout_attributes":407,"../../lib":503,"../../lib/setcursor":524,"../../plot_api/edit_types":536,"../../plots/cartesian/select":575,"../../plots/get_data":593,"../../registry":638,"./plot":923}],919:[function(d,ne,ae){var w=d("strongly-connected-components"),v=d("../../lib"),M=d("../../lib/gup").wrap,T=v.isArrayOrTypedArray,e=v.isIndex,a=d("../../components/colorscale");function n(t){var f=t.node,o=t.link,i=[],g=T(o.color),p=T(o.customdata),y={},c={},b=o.colorscales.length,l;for(l=0;l<b;l++){var _=o.colorscales[l],s=a.extractScale(_,{cLetter:"c"}),A=a.makeColorScaleFunc(s);c[_.label]=A}var m=0;for(l=0;l<o.value.length;l++)o.source[l]>m&&(m=o.source[l]),o.target[l]>m&&(m=o.target[l]);var h=m+1;t.node._count=h;var x,u=t.node.groups,L={};for(l=0;l<u.length;l++){var S=u[l];for(x=0;x<S.length;x++){var k=S[x],P=h+l;L.hasOwnProperty(k)?v.warn("Node "+k+" is already part of a group."):L[k]=P}}var z={source:[],target:[]};for(l=0;l<o.value.length;l++){var I=o.value[l],D=o.source[l],R=o.target[l];if(!!(I>0&&e(D,h)&&e(R,h))&&!(L.hasOwnProperty(D)&&L.hasOwnProperty(R)&&L[D]===L[R])){L.hasOwnProperty(R)&&(R=L[R]),L.hasOwnProperty(D)&&(D=L[D]),D=+D,R=+R,y[D]=y[R]=!0;var O="";o.label&&o.label[l]&&(O=o.label[l]);var F=null;O&&c.hasOwnProperty(O)&&(F=c[O]),i.push({pointNumber:l,label:O,color:g?o.color[l]:o.color,customdata:p?o.customdata[l]:o.customdata,concentrationscale:F,source:D,target:R,value:+I}),z.source.push(D),z.target.push(R)}}var V=h+u.length,G=T(f.color),J=T(f.customdata),Z=[];for(l=0;l<V;l++)if(!!y[l]){var Y=f.label[l];Z.push({group:l>h-1,childrenNodes:[],pointNumber:l,label:Y,color:G?f.color[l]:f.color,customdata:J?f.customdata[l]:f.customdata})}var j=!1;return r(V,z.source,z.target)&&(j=!0),{circular:j,links:i,nodes:Z,groups:u,groupLookup:L}}function r(t,f,o){for(var i=v.init2dArray(t,0),g=0;g<Math.min(f.length,o.length);g++)if(v.isIndex(f[g],t)&&v.isIndex(o[g],t)){if(f[g]===o[g])return!0;i[f[g]].push(o[g])}var p=w(i);return p.components.some(function(y){return y.length>1})}ne.exports=function(f,o){var i=n(o);return M({circular:i.circular,_nodes:i.nodes,_links:i.links,_groups:i.groups,_groupLookup:i.groupLookup})}},{"../../components/colorscale":378,"../../lib":503,"../../lib/gup":500,"strongly-connected-components":306}],920:[function(d,ne,ae){ne.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},{}],921:[function(d,ne,ae){var w=d("../../lib"),v=d("./attributes"),M=d("../../components/color"),T=d("tinycolor2"),e=d("../../plots/domain").defaults,a=d("../../components/fx/hoverlabel_defaults"),n=d("../../plot_api/plot_template"),r=d("../../plots/array_container_defaults");ne.exports=function(o,i,g,p){function y(S,k){return w.coerce(o,i,v,S,k)}var c=w.extendDeep(p.hoverlabel,o.hoverlabel),b=o.node,l=n.newContainer(i,"node");function _(S,k){return w.coerce(b,l,v.node,S,k)}_("label"),_("groups"),_("x"),_("y"),_("pad"),_("thickness"),_("line.color"),_("line.width"),_("hoverinfo",o.hoverinfo),a(b,l,_,c),_("hovertemplate");var s=p.colorway,A=function(S){return s[S%s.length]};_("color",l.label.map(function(S,k){return M.addOpacity(A(k),.8)})),_("customdata");var m=o.link||{},h=n.newContainer(i,"link");function x(S,k){return w.coerce(m,h,v.link,S,k)}x("label"),x("source"),x("target"),x("value"),x("line.color"),x("line.width"),x("hoverinfo",o.hoverinfo),a(m,h,x,c),x("hovertemplate");var u=T(p.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";x("color",w.repeat(u,h.value.length)),x("customdata"),r(m,h,{name:"colorscales",handleItemDefaults:t}),e(i,p,y),y("orientation"),y("valueformat"),y("valuesuffix");var L;l.x.length&&l.y.length&&(L="freeform"),y("arrangement",L),w.coerceFont(y,"textfont",w.extendFlat({},p.font)),i._length=null};function t(f,o){function i(g,p){return w.coerce(f,o,v.link.colorscales,g,p)}i("label"),i("cmin"),i("cmax"),i("colorscale")}},{"../../components/color":366,"../../components/fx/hoverlabel_defaults":404,"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../../plots/domain":584,"./attributes":917,tinycolor2:312}],922:[function(d,ne,ae){ne.exports={attributes:d("./attributes"),supplyDefaults:d("./defaults"),calc:d("./calc"),plot:d("./plot"),moduleType:"trace",name:"sankey",basePlotModule:d("./base_plot"),selectPoints:d("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":917,"./base_plot":918,"./calc":919,"./defaults":921,"./plot":923,"./select.js":925}],923:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../lib"),M=v.numberFormat,T=d("./render"),e=d("../../components/fx"),a=d("../../components/color"),n=d("./constants").cn,r=v._;function t(s){return s!==""}function f(s,A){return s.filter(function(m){return m.key===A.traceId})}function o(s,A){w.select(s).select("path").style("fill-opacity",A),w.select(s).select("rect").style("fill-opacity",A)}function i(s){w.select(s).select("text.name").style("fill","black")}function g(s){return function(A){return s.node.sourceLinks.indexOf(A.link)!==-1||s.node.targetLinks.indexOf(A.link)!==-1}}function p(s){return function(A){return A.node.sourceLinks.indexOf(s.link)!==-1||A.node.targetLinks.indexOf(s.link)!==-1}}function y(s,A,m){A&&m&&f(m,A).selectAll("."+n.sankeyLink).filter(g(A)).call(b.bind(0,A,m,!1))}function c(s,A,m){A&&m&&f(m,A).selectAll("."+n.sankeyLink).filter(g(A)).call(l.bind(0,A,m,!1))}function b(s,A,m,h){var x=h.datum().link.label;h.style("fill-opacity",function(u){if(!u.link.concentrationscale)return .4}),x&&f(A,s).selectAll("."+n.sankeyLink).filter(function(u){return u.link.label===x}).style("fill-opacity",function(u){if(!u.link.concentrationscale)return .4}),m&&f(A,s).selectAll("."+n.sankeyNode).filter(p(s)).call(y)}function l(s,A,m,h){var x=h.datum().link.label;h.style("fill-opacity",function(u){return u.tinyColorAlpha}),x&&f(A,s).selectAll("."+n.sankeyLink).filter(function(u){return u.link.label===x}).style("fill-opacity",function(u){return u.tinyColorAlpha}),m&&f(A,s).selectAll(n.sankeyNode).filter(p(s)).call(c)}function _(s,A){var m=s.hoverlabel||{},h=v.nestedProperty(m,A).get();return Array.isArray(h)?!1:h}ne.exports=function(A,m){for(var h=A._fullLayout,x=h._paper,u=h._size,L=0;L<A._fullData.length;L++)if(!!A._fullData[L].visible&&A._fullData[L].type===n.sankey&&!A._fullData[L]._viewInitial){var S=A._fullData[L].node;A._fullData[L]._viewInitial={node:{groups:S.groups.slice(),x:S.x.slice(),y:S.y.slice()}}}var k=function(j,re){var se=re.link;se.originalEvent=w.event,A._hoverdata=[se],e.click(A,{target:!0})},P=function(j,re,se){A._fullLayout.hovermode!==!1&&(w.select(j).call(b.bind(0,re,se,!0)),re.link.trace.link.hoverinfo!=="skip"&&(re.link.fullData=re.link.trace,A.emit("plotly_hover",{event:w.event,points:[re.link]})))},z=r(A,"source:")+" ",I=r(A,"target:")+" ",D=r(A,"concentration:")+" ",R=r(A,"incoming flow count:")+" ",O=r(A,"outgoing flow count:")+" ",F=function(j,re){if(A._fullLayout.hovermode===!1)return;var se=re.link.trace.link;if(se.hoverinfo==="none"||se.hoverinfo==="skip")return;var oe=[];function N(te){var ie,le;te.circular?(ie=(te.circularPathData.leftInnerExtent+te.circularPathData.rightInnerExtent)/2,le=te.circularPathData.verticalFullExtent):(ie=(te.source.x1+te.target.x0)/2,le=(te.y0+te.y1)/2);var ge=[ie,le];return te.trace.orientation==="v"&&ge.reverse(),ge[0]+=re.parent.translateX,ge[1]+=re.parent.translateY,ge}for(var U=0,q=0;q<re.flow.links.length;q++){var Q=re.flow.links[q];if(!(A._fullLayout.hovermode==="closest"&&re.link.pointNumber!==Q.pointNumber)){re.link.pointNumber===Q.pointNumber&&(U=q),Q.fullData=Q.trace,se=re.link.trace.link;var W=N(Q),X={valueLabel:M(re.valueFormat)(Q.value)+re.valueSuffix};oe.push({x:W[0],y:W[1],name:X.valueLabel,text:[Q.label||"",z+Q.source.label,I+Q.target.label,Q.concentrationscale?D+M("%0.2f")(Q.flow.labelConcentration):""].filter(t).join("<br>"),color:_(se,"bgcolor")||a.addOpacity(Q.color,1),borderColor:_(se,"bordercolor"),fontFamily:_(se,"font.family"),fontSize:_(se,"font.size"),fontColor:_(se,"font.color"),nameLength:_(se,"namelength"),textAlign:_(se,"align"),idealAlign:w.event.x<W[0]?"right":"left",hovertemplate:se.hovertemplate,hovertemplateLabels:X,eventData:[Q]})}}var ee=e.loneHover(oe,{container:h._hoverlayer.node(),outerContainer:h._paper.node(),gd:A,anchorIndex:U});ee.each(function(){var te=this;re.link.concentrationscale||o(te,.65),i(te)})},V=function(j,re,se){A._fullLayout.hovermode!==!1&&(w.select(j).call(l.bind(0,re,se,!0)),re.link.trace.link.hoverinfo!=="skip"&&(re.link.fullData=re.link.trace,A.emit("plotly_unhover",{event:w.event,points:[re.link]})),e.loneUnhover(h._hoverlayer.node()))},G=function(j,re,se){var oe=re.node;oe.originalEvent=w.event,A._hoverdata=[oe],w.select(j).call(c,re,se),e.click(A,{target:!0})},J=function(j,re,se){A._fullLayout.hovermode!==!1&&(w.select(j).call(y,re,se),re.node.trace.node.hoverinfo!=="skip"&&(re.node.fullData=re.node.trace,A.emit("plotly_hover",{event:w.event,points:[re.node]})))},Z=function(j,re){if(A._fullLayout.hovermode!==!1){var se=re.node.trace.node;if(!(se.hoverinfo==="none"||se.hoverinfo==="skip")){var oe=w.select(j).select("."+n.nodeRect),N=A._fullLayout._paperdiv.node().getBoundingClientRect(),U=oe.node().getBoundingClientRect(),q=U.left-2-N.left,Q=U.right+2-N.left,W=U.top+U.height/4-N.top,X={valueLabel:M(re.valueFormat)(re.node.value)+re.valueSuffix};re.node.fullData=re.node.trace,A._fullLayout._calcInverseTransform(A);var ee=A._fullLayout._invScaleX,te=A._fullLayout._invScaleY,ie=e.loneHover({x0:ee*q,x1:ee*Q,y:te*W,name:M(re.valueFormat)(re.node.value)+re.valueSuffix,text:[re.node.label,R+re.node.targetLinks.length,O+re.node.sourceLinks.length].filter(t).join("<br>"),color:_(se,"bgcolor")||re.tinyColorHue,borderColor:_(se,"bordercolor"),fontFamily:_(se,"font.family"),fontSize:_(se,"font.size"),fontColor:_(se,"font.color"),nameLength:_(se,"namelength"),textAlign:_(se,"align"),idealAlign:"left",hovertemplate:se.hovertemplate,hovertemplateLabels:X,eventData:[re.node]},{container:h._hoverlayer.node(),outerContainer:h._paper.node(),gd:A});o(ie,.85),i(ie)}}},Y=function(j,re,se){A._fullLayout.hovermode!==!1&&(w.select(j).call(c,re,se),re.node.trace.node.hoverinfo!=="skip"&&(re.node.fullData=re.node.trace,A.emit("plotly_unhover",{event:w.event,points:[re.node]})),e.loneUnhover(h._hoverlayer.node()))};T(A,x,m,{width:u.w,height:u.h,margin:{t:u.t,r:u.r,b:u.b,l:u.l}},{linkEvents:{hover:P,follow:F,unhover:V,select:k},nodeEvents:{hover:J,follow:Z,unhover:Y,select:G}})}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"./constants":920,"./render":924,"@plotly/d3":58}],924:[function(d,ne,ae){var w=d("d3-force"),v=d("d3-interpolate").interpolateNumber,M=d("@plotly/d3"),T=d("@plotly/d3-sankey"),e=d("@plotly/d3-sankey-circular"),a=d("./constants"),n=d("tinycolor2"),r=d("../../components/color"),t=d("../../components/drawing"),f=d("../../lib"),o=f.strTranslate,i=f.strRotate,g=d("../../lib/gup"),p=g.keyFun,y=g.repeat,c=g.unwrap,b=d("../../lib/svg_text_utils"),l=d("../../registry"),_=d("../../constants/alignment"),s=_.CAP_SHIFT,A=_.LINE_SPACING,m=3;function h(N,U,q){var Q=c(U),W=Q.trace,X=W.domain,ee=W.orientation==="h",te=W.node.pad,ie=W.node.thickness,le=N.width*(X.x[1]-X.x[0]),ge=N.height*(X.y[1]-X.y[0]),fe=Q._nodes,pe=Q._links,ye=Q.circular,Te;ye?Te=e.sankeyCircular().circularLinkGap(0):Te=T.sankey(),Te.iterations(a.sankeyIterations).size(ee?[le,ge]:[ge,le]).nodeWidth(ie).nodePadding(te).nodeId(function(At){return At.pointNumber}).nodes(fe).links(pe);var _e=Te();Te.nodePadding()<te&&f.warn("node.pad was reduced to ",Te.nodePadding()," to fit within the figure.");var De,Be,Ue;for(var xe in Q._groupLookup){var Pe=parseInt(Q._groupLookup[xe]),Ve;for(De=0;De<_e.nodes.length;De++)if(_e.nodes[De].pointNumber===Pe){Ve=_e.nodes[De];break}if(!!Ve){var Qe={pointNumber:parseInt(xe),x0:Ve.x0,x1:Ve.x1,y0:Ve.y0,y1:Ve.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};_e.nodes.unshift(Qe),Ve.childrenNodes.unshift(Qe)}}function Fe(){for(De=0;De<_e.nodes.length;De++){var At=_e.nodes[De],zt={},Ut,Ct;for(Be=0;Be<At.targetLinks.length;Be++)Ct=At.targetLinks[Be],Ut=Ct.source.pointNumber+":"+Ct.target.pointNumber,zt.hasOwnProperty(Ut)||(zt[Ut]=[]),zt[Ut].push(Ct);var Mt=Object.keys(zt);for(Be=0;Be<Mt.length;Be++){Ut=Mt[Be];var rt=zt[Ut],ct=0,Ze={};for(Ue=0;Ue<rt.length;Ue++)Ct=rt[Ue],Ze[Ct.label]||(Ze[Ct.label]=0),Ze[Ct.label]+=Ct.value,ct+=Ct.value;for(Ue=0;Ue<rt.length;Ue++)Ct=rt[Ue],Ct.flow={value:ct,labelConcentration:Ze[Ct.label]/ct,concentration:Ct.value/ct,links:rt},Ct.concentrationscale&&(Ct.color=n(Ct.concentrationscale(Ct.flow.labelConcentration)))}var ke=0;for(Be=0;Be<At.sourceLinks.length;Be++)ke+=At.sourceLinks[Be].value;for(Be=0;Be<At.sourceLinks.length;Be++)Ct=At.sourceLinks[Be],Ct.concentrationOut=Ct.value/ke;var Ge=0;for(Be=0;Be<At.targetLinks.length;Be++)Ge+=At.targetLinks[Be].value;for(Be=0;Be<At.targetLinks.length;Be++)Ct=At.targetLinks[Be],Ct.concenrationIn=Ct.value/Ge}}Fe();function Le(At){At.forEach(function(zt){var Ut,Ct,Mt=0,rt=zt.length,ct;for(zt.sort(function(Ze,ke){return Ze.y0-ke.y0}),ct=0;ct<rt;++ct)Ut=zt[ct],Ut.y0>=Mt||(Ct=Mt-Ut.y0,Ct>1e-6&&(Ut.y0+=Ct,Ut.y1+=Ct)),Mt=Ut.y1+te})}function Ne(At){var zt=At.map(function(ke,Ge){return{x0:ke.x0,index:Ge}}).sort(function(ke,Ge){return ke.x0-Ge.x0}),Ut=[],Ct=-1,Mt,rt=-1/0,ct;for(De=0;De<zt.length;De++){var Ze=At[zt[De].index];Ze.x0>rt+ie&&(Ct+=1,Mt=Ze.x0),rt=Ze.x0,Ut[Ct]||(Ut[Ct]=[]),Ut[Ct].push(Ze),ct=Mt-Ze.x0,Ze.x0+=ct,Ze.x1+=ct}return Ut}if(W.node.x.length&&W.node.y.length){for(De=0;De<Math.min(W.node.x.length,W.node.y.length,_e.nodes.length);De++)if(W.node.x[De]&&W.node.y[De]){var dt=[W.node.x[De]*le,W.node.y[De]*ge];_e.nodes[De].x0=dt[0]-ie/2,_e.nodes[De].x1=dt[0]+ie/2;var Dt=_e.nodes[De].y1-_e.nodes[De].y0;_e.nodes[De].y0=dt[1]-Dt/2,_e.nodes[De].y1=dt[1]+Dt/2}if(W.arrangement==="snap"){fe=_e.nodes;var Xt=Ne(fe);Le(Xt)}Te.update(_e)}return{circular:ye,key:q,trace:W,guid:f.randstr(),horizontal:ee,width:le,height:ge,nodePad:W.node.pad,nodeLineColor:W.node.line.color,nodeLineWidth:W.node.line.width,linkLineColor:W.link.line.color,linkLineWidth:W.link.line.width,valueFormat:W.valueformat,valueSuffix:W.valuesuffix,textFont:W.textfont,translateX:X.x[0]*N.width+N.margin.l,translateY:N.height-X.y[1]*N.height+N.margin.t,dragParallel:ee?ge:le,dragPerpendicular:ee?le:ge,arrangement:W.arrangement,sankey:Te,graph:_e,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function x(N,U,q){var Q=n(U.color),W=U.source.label+"|"+U.target.label,X=W+"__"+q;return U.trace=N.trace,U.curveNumber=N.trace.index,{circular:N.circular,key:X,traceId:N.key,pointNumber:U.pointNumber,link:U,tinyColorHue:r.tinyRGB(Q),tinyColorAlpha:Q.getAlpha(),linkPath:L,linkLineColor:N.linkLineColor,linkLineWidth:N.linkLineWidth,valueFormat:N.valueFormat,valueSuffix:N.valueSuffix,sankey:N.sankey,parent:N,interactionState:N.interactionState,flow:U.flow}}function u(N){var U="",q=N.width/2,Q=N.circularPathData;return N.circularLinkType==="top"?U="M "+Q.targetX+" "+(Q.targetY+q)+" L"+Q.rightInnerExtent+" "+(Q.targetY+q)+"A"+(Q.rightLargeArcRadius+q)+" "+(Q.rightSmallArcRadius+q)+" 0 0 1 "+(Q.rightFullExtent-q)+" "+(Q.targetY-Q.rightSmallArcRadius)+"L"+(Q.rightFullExtent-q)+" "+Q.verticalRightInnerExtent+"A"+(Q.rightLargeArcRadius+q)+" "+(Q.rightLargeArcRadius+q)+" 0 0 1 "+Q.rightInnerExtent+" "+(Q.verticalFullExtent-q)+"L"+Q.leftInnerExtent+" "+(Q.verticalFullExtent-q)+"A"+(Q.leftLargeArcRadius+q)+" "+(Q.leftLargeArcRadius+q)+" 0 0 1 "+(Q.leftFullExtent+q)+" "+Q.verticalLeftInnerExtent+"L"+(Q.leftFullExtent+q)+" "+(Q.sourceY-Q.leftSmallArcRadius)+"A"+(Q.leftLargeArcRadius+q)+" "+(Q.leftSmallArcRadius+q)+" 0 0 1 "+Q.leftInnerExtent+" "+(Q.sourceY+q)+"L"+Q.sourceX+" "+(Q.sourceY+q)+"L"+Q.sourceX+" "+(Q.sourceY-q)+"L"+Q.leftInnerExtent+" "+(Q.sourceY-q)+"A"+(Q.leftLargeArcRadius-q)+" "+(Q.leftSmallArcRadius-q)+" 0 0 0 "+(Q.leftFullExtent-q)+" "+(Q.sourceY-Q.leftSmallArcRadius)+"L"+(Q.leftFullExtent-q)+" "+Q.verticalLeftInnerExtent+"A"+(Q.leftLargeArcRadius-q)+" "+(Q.leftLargeArcRadius-q)+" 0 0 0 "+Q.leftInnerExtent+" "+(Q.verticalFullExtent+q)+"L"+Q.rightInnerExtent+" "+(Q.verticalFullExtent+q)+"A"+(Q.rightLargeArcRadius-q)+" "+(Q.rightLargeArcRadius-q)+" 0 0 0 "+(Q.rightFullExtent+q)+" "+Q.verticalRightInnerExtent+"L"+(Q.rightFullExtent+q)+" "+(Q.targetY-Q.rightSmallArcRadius)+"A"+(Q.rightLargeArcRadius-q)+" "+(Q.rightSmallArcRadius-q)+" 0 0 0 "+Q.rightInnerExtent+" "+(Q.targetY-q)+"L"+Q.targetX+" "+(Q.targetY-q)+"Z":U="M "+Q.targetX+" "+(Q.targetY-q)+" L"+Q.rightInnerExtent+" "+(Q.targetY-q)+"A"+(Q.rightLargeArcRadius+q)+" "+(Q.rightSmallArcRadius+q)+" 0 0 0 "+(Q.rightFullExtent-q)+" "+(Q.targetY+Q.rightSmallArcRadius)+"L"+(Q.rightFullExtent-q)+" "+Q.verticalRightInnerExtent+"A"+(Q.rightLargeArcRadius+q)+" "+(Q.rightLargeArcRadius+q)+" 0 0 0 "+Q.rightInnerExtent+" "+(Q.verticalFullExtent+q)+"L"+Q.leftInnerExtent+" "+(Q.verticalFullExtent+q)+"A"+(Q.leftLargeArcRadius+q)+" "+(Q.leftLargeArcRadius+q)+" 0 0 0 "+(Q.leftFullExtent+q)+" "+Q.verticalLeftInnerExtent+"L"+(Q.leftFullExtent+q)+" "+(Q.sourceY+Q.leftSmallArcRadius)+"A"+(Q.leftLargeArcRadius+q)+" "+(Q.leftSmallArcRadius+q)+" 0 0 0 "+Q.leftInnerExtent+" "+(Q.sourceY-q)+"L"+Q.sourceX+" "+(Q.sourceY-q)+"L"+Q.sourceX+" "+(Q.sourceY+q)+"L"+Q.leftInnerExtent+" "+(Q.sourceY+q)+"A"+(Q.leftLargeArcRadius-q)+" "+(Q.leftSmallArcRadius-q)+" 0 0 1 "+(Q.leftFullExtent-q)+" "+(Q.sourceY+Q.leftSmallArcRadius)+"L"+(Q.leftFullExtent-q)+" "+Q.verticalLeftInnerExtent+"A"+(Q.leftLargeArcRadius-q)+" "+(Q.leftLargeArcRadius-q)+" 0 0 1 "+Q.leftInnerExtent+" "+(Q.verticalFullExtent-q)+"L"+Q.rightInnerExtent+" "+(Q.verticalFullExtent-q)+"A"+(Q.rightLargeArcRadius-q)+" "+(Q.rightLargeArcRadius-q)+" 0 0 1 "+(Q.rightFullExtent+q)+" "+Q.verticalRightInnerExtent+"L"+(Q.rightFullExtent+q)+" "+(Q.targetY+Q.rightSmallArcRadius)+"A"+(Q.rightLargeArcRadius-q)+" "+(Q.rightSmallArcRadius-q)+" 0 0 1 "+Q.rightInnerExtent+" "+(Q.targetY+q)+"L"+Q.targetX+" "+(Q.targetY+q)+"Z",U}function L(){var N=.5;function U(q){if(q.link.circular)return u(q.link);var Q=q.link.source.x1,W=q.link.target.x0,X=v(Q,W),ee=X(N),te=X(1-N),ie=q.link.y0-q.link.width/2,le=q.link.y0+q.link.width/2,ge=q.link.y1-q.link.width/2,fe=q.link.y1+q.link.width/2;return"M"+Q+","+ie+"C"+ee+","+ie+" "+te+","+ge+" "+W+","+ge+"L"+W+","+fe+"C"+te+","+fe+" "+ee+","+le+" "+Q+","+le+"Z"}return U}function S(N,U){var q=n(U.color),Q=a.nodePadAcross,W=N.nodePad/2;U.dx=U.x1-U.x0,U.dy=U.y1-U.y0;var X=U.dx,ee=Math.max(.5,U.dy),te="node_"+U.pointNumber;return U.group&&(te=f.randstr()),U.trace=N.trace,U.curveNumber=N.trace.index,{index:U.pointNumber,key:te,partOfGroup:U.partOfGroup||!1,group:U.group,traceId:N.key,trace:N.trace,node:U,nodePad:N.nodePad,nodeLineColor:N.nodeLineColor,nodeLineWidth:N.nodeLineWidth,textFont:N.textFont,size:N.horizontal?N.height:N.width,visibleWidth:Math.ceil(X),visibleHeight:ee,zoneX:-Q,zoneY:-W,zoneWidth:X+2*Q,zoneHeight:ee+2*W,labelY:N.horizontal?U.dy/2+1:U.dx/2+1,left:U.originalLayer===1,sizeAcross:N.width,forceLayouts:N.forceLayouts,horizontal:N.horizontal,darkBackground:q.getBrightness()<=128,tinyColorHue:r.tinyRGB(q),tinyColorAlpha:q.getAlpha(),valueFormat:N.valueFormat,valueSuffix:N.valueSuffix,sankey:N.sankey,graph:N.graph,arrangement:N.arrangement,uniqueNodeLabelPathId:[N.guid,N.key,te].join("_"),interactionState:N.interactionState,figure:N}}function k(N){N.attr("transform",function(U){return o(U.node.x0.toFixed(3),U.node.y0.toFixed(3))})}function P(N){N.call(k)}function z(N,U){N.call(P),U.attr("d",L())}function I(N){N.attr("width",function(U){return U.node.x1-U.node.x0}).attr("height",function(U){return U.visibleHeight})}function D(N){return N.link.width>1||N.linkLineWidth>0}function R(N){var U=o(N.translateX,N.translateY);return U+(N.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function O(N,U,q){N.on(".basic",null).on("mouseover.basic",function(Q){!Q.interactionState.dragInProgress&&!Q.partOfGroup&&(q.hover(this,Q,U),Q.interactionState.hovered=[this,Q])}).on("mousemove.basic",function(Q){!Q.interactionState.dragInProgress&&!Q.partOfGroup&&(q.follow(this,Q),Q.interactionState.hovered=[this,Q])}).on("mouseout.basic",function(Q){!Q.interactionState.dragInProgress&&!Q.partOfGroup&&(q.unhover(this,Q,U),Q.interactionState.hovered=!1)}).on("click.basic",function(Q){Q.interactionState.hovered&&(q.unhover(this,Q,U),Q.interactionState.hovered=!1),!Q.interactionState.dragInProgress&&!Q.partOfGroup&&q.select(this,Q,U)})}function F(N,U,q,Q){var W=M.behavior.drag().origin(function(X){return{x:X.node.x0+X.visibleWidth/2,y:X.node.y0+X.visibleHeight/2}}).on("dragstart",function(X){if(X.arrangement!=="fixed"&&(f.ensureSingle(Q._fullLayout._infolayer,"g","dragcover",function(te){Q._fullLayout._dragCover=te}),f.raiseToTop(this),X.interactionState.dragInProgress=X.node,j(X.node),X.interactionState.hovered&&(q.nodeEvents.unhover.apply(0,X.interactionState.hovered),X.interactionState.hovered=!1),X.arrangement==="snap")){var ee=X.traceId+"|"+X.key;X.forceLayouts[ee]?X.forceLayouts[ee].alpha(1):V(N,ee,X),G(N,U,X,ee,Q)}}).on("drag",function(X){if(X.arrangement!=="fixed"){var ee=M.event.x,te=M.event.y;X.arrangement==="snap"?(X.node.x0=ee-X.visibleWidth/2,X.node.x1=ee+X.visibleWidth/2,X.node.y0=te-X.visibleHeight/2,X.node.y1=te+X.visibleHeight/2):(X.arrangement==="freeform"&&(X.node.x0=ee-X.visibleWidth/2,X.node.x1=ee+X.visibleWidth/2),te=Math.max(0,Math.min(X.size-X.visibleHeight/2,te)),X.node.y0=te-X.visibleHeight/2,X.node.y1=te+X.visibleHeight/2),j(X.node),X.arrangement!=="snap"&&(X.sankey.update(X.graph),z(N.filter(re(X)),U))}}).on("dragend",function(X){if(X.arrangement!=="fixed"){X.interactionState.dragInProgress=!1;for(var ee=0;ee<X.node.childrenNodes.length;ee++)X.node.childrenNodes[ee].x=X.node.x,X.node.childrenNodes[ee].y=X.node.y;X.arrangement!=="snap"&&Z(X,Q)}});N.on(".drag",null).call(W)}function V(N,U,q,Q){se(q.graph.nodes);var W=q.graph.nodes.filter(function(X){return X.originalX===q.node.originalX}).filter(function(X){return!X.partOfGroup});q.forceLayouts[U]=w.forceSimulation(W).alphaDecay(0).force("collide",w.forceCollide().radius(function(X){return X.dy/2+q.nodePad/2}).strength(1).iterations(a.forceIterations)).force("constrain",J(N,U,W,q)).stop()}function G(N,U,q,Q,W){window.requestAnimationFrame(function X(){var ee;for(ee=0;ee<a.forceTicksPerFrame;ee++)q.forceLayouts[Q].tick();var te=q.graph.nodes;if(oe(te),q.sankey.update(q.graph),z(N.filter(re(q)),U),q.forceLayouts[Q].alpha()>0)window.requestAnimationFrame(X);else{var ie=q.node.originalX;q.node.x0=ie-q.visibleWidth/2,q.node.x1=ie+q.visibleWidth/2,Z(q,W)}})}function J(N,U,q,Q){return function(){for(var X=0,ee=0;ee<q.length;ee++){var te=q[ee];te===Q.interactionState.dragInProgress?(te.x=te.lastDraggedX,te.y=te.lastDraggedY):(te.vx=(te.originalX-te.x)/a.forceTicksPerFrame,te.y=Math.min(Q.size-te.dy/2,Math.max(te.dy/2,te.y))),X=Math.max(X,Math.abs(te.vx),Math.abs(te.vy))}!Q.interactionState.dragInProgress&&X<.1&&Q.forceLayouts[U].alpha()>0&&Q.forceLayouts[U].alpha(0)}}function Z(N,U){for(var q=[],Q=[],W=0;W<N.graph.nodes.length;W++){var X=(N.graph.nodes[W].x0+N.graph.nodes[W].x1)/2,ee=(N.graph.nodes[W].y0+N.graph.nodes[W].y1)/2;q.push(X/N.figure.width),Q.push(ee/N.figure.height)}l.call("_guiRestyle",U,{"node.x":[q],"node.y":[Q]},N.trace.index).then(function(){U._fullLayout._dragCover&&U._fullLayout._dragCover.remove()})}function Y(N){var U=[],q;for(q=0;q<N.length;q++)N[q].originalX=(N[q].x0+N[q].x1)/2,N[q].originalY=(N[q].y0+N[q].y1)/2,U.indexOf(N[q].originalX)===-1&&U.push(N[q].originalX);for(U.sort(function(Q,W){return Q-W}),q=0;q<N.length;q++)N[q].originalLayerIndex=U.indexOf(N[q].originalX),N[q].originalLayer=N[q].originalLayerIndex/(U.length-1)}function j(N){N.lastDraggedX=N.x0+N.dx/2,N.lastDraggedY=N.y0+N.dy/2}function re(N){return function(U){return U.node.originalX===N.node.originalX}}function se(N){for(var U=0;U<N.length;U++)N[U].y=(N[U].y0+N[U].y1)/2,N[U].x=(N[U].x0+N[U].x1)/2}function oe(N){for(var U=0;U<N.length;U++)N[U].y0=N[U].y-N[U].dy/2,N[U].y1=N[U].y0+N[U].dy,N[U].x0=N[U].x-N[U].dx/2,N[U].x1=N[U].x0+N[U].dx}ne.exports=function(N,U,q,Q,W){var X=!1;f.ensureSingle(N._fullLayout._infolayer,"g","first-render",function(){X=!0});var ee=N._fullLayout._dragCover,te=q.filter(function(_e){return c(_e).trace.visible}).map(h.bind(null,Q)),ie=U.selectAll("."+a.cn.sankey).data(te,p);ie.exit().remove(),ie.enter().append("g").classed(a.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",R),ie.each(function(_e,De){N._fullData[De]._sankey=_e;var Be="bgsankey-"+_e.trace.uid+"-"+De;f.ensureSingle(N._fullLayout._draggers,"rect",Be),N._fullData[De]._bgRect=M.select("."+Be),N._fullData[De]._bgRect.style("pointer-events","all").attr("width",_e.width).attr("height",_e.height).attr("x",_e.translateX).attr("y",_e.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),ie.transition().ease(a.ease).duration(a.duration).attr("transform",R);var le=ie.selectAll("."+a.cn.sankeyLinks).data(y,p);le.enter().append("g").classed(a.cn.sankeyLinks,!0).style("fill","none");var ge=le.selectAll("."+a.cn.sankeyLink).data(function(_e){var De=_e.graph.links;return De.filter(function(Be){return Be.value}).map(x.bind(null,_e))},p);ge.enter().append("path").classed(a.cn.sankeyLink,!0).call(O,ie,W.linkEvents),ge.style("stroke",function(_e){return D(_e)?r.tinyRGB(n(_e.linkLineColor)):_e.tinyColorHue}).style("stroke-opacity",function(_e){return D(_e)?r.opacity(_e.linkLineColor):_e.tinyColorAlpha}).style("fill",function(_e){return _e.tinyColorHue}).style("fill-opacity",function(_e){return _e.tinyColorAlpha}).style("stroke-width",function(_e){return D(_e)?_e.linkLineWidth:1}).attr("d",L()),ge.style("opacity",function(){return N._context.staticPlot||X||ee?1:0}).transition().ease(a.ease).duration(a.duration).style("opacity",1),ge.exit().transition().ease(a.ease).duration(a.duration).style("opacity",0).remove();var fe=ie.selectAll("."+a.cn.sankeyNodeSet).data(y,p);fe.enter().append("g").classed(a.cn.sankeyNodeSet,!0),fe.style("cursor",function(_e){switch(_e.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var pe=fe.selectAll("."+a.cn.sankeyNode).data(function(_e){var De=_e.graph.nodes;return Y(De),De.map(S.bind(null,_e))},p);pe.enter().append("g").classed(a.cn.sankeyNode,!0).call(k).style("opacity",function(_e){return(N._context.staticPlot||X)&&!_e.partOfGroup?1:0}),pe.call(O,ie,W.nodeEvents).call(F,ge,W,N),pe.transition().ease(a.ease).duration(a.duration).call(k).style("opacity",function(_e){return _e.partOfGroup?0:1}),pe.exit().transition().ease(a.ease).duration(a.duration).style("opacity",0).remove();var ye=pe.selectAll("."+a.cn.nodeRect).data(y);ye.enter().append("rect").classed(a.cn.nodeRect,!0).call(I),ye.style("stroke-width",function(_e){return _e.nodeLineWidth}).style("stroke",function(_e){return r.tinyRGB(n(_e.nodeLineColor))}).style("stroke-opacity",function(_e){return r.opacity(_e.nodeLineColor)}).style("fill",function(_e){return _e.tinyColorHue}).style("fill-opacity",function(_e){return _e.tinyColorAlpha}),ye.transition().ease(a.ease).duration(a.duration).call(I);var Te=pe.selectAll("."+a.cn.nodeLabel).data(y);Te.enter().append("text").classed(a.cn.nodeLabel,!0).style("cursor","default"),Te.attr("data-notex",1).text(function(_e){return _e.node.label}).each(function(_e){var De=M.select(this);t.font(De,_e.textFont),b.convertToTspans(De,N)}).style("text-shadow",b.makeTextShadow(N._fullLayout.paper_bgcolor)).attr("text-anchor",function(_e){return _e.horizontal&&_e.left?"end":"start"}).attr("transform",function(_e){var De=M.select(this),Be=b.lineCount(De),Ue=_e.textFont.size*((Be-1)*A-s),xe=_e.nodeLineWidth/2+m,Pe=((_e.horizontal?_e.visibleHeight:_e.visibleWidth)-Ue)/2;_e.horizontal&&(_e.left?xe=-xe:xe+=_e.visibleWidth);var Ve=_e.horizontal?"":"scale(-1,1)"+i(90);return o(_e.horizontal?xe:Pe,_e.horizontal?Pe:xe)+Ve}),Te.transition().ease(a.ease).duration(a.duration)}},{"../../components/color":366,"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"../../registry":638,"./constants":920,"@plotly/d3":58,"@plotly/d3-sankey":57,"@plotly/d3-sankey-circular":56,"d3-force":111,"d3-interpolate":116,tinycolor2:312}],925:[function(d,ne,ae){ne.exports=function(v,M){for(var T=v.cd,e=[],a=T[0].trace,n=a._sankey.graph.nodes,r=0;r<n.length;r++){var t=n[r];if(!t.partOfGroup){var f=[(t.x0+t.x1)/2,(t.y0+t.y1)/2];a.orientation==="v"&&f.reverse(),M&&M.contains(f,!1,r,v)&&e.push({pointNumber:t.pointNumber})}}return e}},{}],926:[function(d,ne,ae){var w=d("../../lib");ne.exports=function(M,T){for(var e=0;e<M.length;e++)M[e].i=e;w.mergeArray(T.text,M,"tx"),w.mergeArray(T.texttemplate,M,"txt"),w.mergeArray(T.hovertext,M,"htx"),w.mergeArray(T.customdata,M,"data"),w.mergeArray(T.textposition,M,"tp"),T.textfont&&(w.mergeArrayCastPositive(T.textfont.size,M,"ts"),w.mergeArray(T.textfont.color,M,"tc"),w.mergeArray(T.textfont.family,M,"tf"));var a=T.marker;if(a){w.mergeArrayCastPositive(a.size,M,"ms"),w.mergeArrayCastPositive(a.opacity,M,"mo"),w.mergeArray(a.symbol,M,"mx"),w.mergeArray(a.color,M,"mc");var n=a.line;a.line&&(w.mergeArray(n.color,M,"mlc"),w.mergeArrayCastPositive(n.width,M,"mlw"));var r=a.gradient;r&&r.type!=="none"&&(w.mergeArray(r.type,M,"mgt"),w.mergeArray(r.color,M,"mgc"))}}},{"../../lib":503}],927:[function(d,ne,ae){var w=d("../../plots/cartesian/axis_format_attributes").axisHoverFormat,v=d("../../plots/template_attributes").texttemplateAttrs,M=d("../../plots/template_attributes").hovertemplateAttrs,T=d("../../components/colorscale/attributes"),e=d("../../plots/font_attributes"),a=d("../../components/drawing/attributes").dash,n=d("../../components/drawing/attributes").pattern,r=d("../../components/drawing"),t=d("./constants"),f=d("../../lib/extend").extendFlat;function o(p){return{valType:"any",dflt:0,editType:"calc"}}function i(p){return{valType:"any",editType:"calc"}}function g(p){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}ne.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:o(),yperiod:o(),xperiod0:i(),yperiod0:i(),xperiodalignment:g(),yperiodalignment:g(),xhoverformat:w("x"),yhoverformat:w("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:v({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:M({},{keys:t.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:f({},a,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:n,marker:f({symbol:{valType:"enumerated",values:r.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:f({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},T("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},T("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:e({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":373,"../../components/drawing":388,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"./constants":931}],928:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("../../lib"),M=d("../../plots/cartesian/axes"),T=d("../../plots/cartesian/align_period"),e=d("../../constants/numerical").BADNUM,a=d("./subtypes"),n=d("./colorscale_calc"),r=d("./arrays_to_calcdata"),t=d("./calc_selection");function f(c,b){var l=c._fullLayout,_=M.getFromId(c,b.xaxis||"x"),s=M.getFromId(c,b.yaxis||"y"),A=_.makeCalcdata(b,"x"),m=s.makeCalcdata(b,"y"),h=T(b,_,"x",A),x=T(b,s,"y",m),u=h.vals,L=x.vals,S=b._length,k=new Array(S),P=b.ids,z=y(b,l,_,s),I=!1,D,R,O,F,V,G;g(l,b);var J="x",Z="y",Y;if(z)v.pushUnique(z.traceIndices,b._expandedIndex),D=z.orientation==="v",D?(Z="s",Y="x"):(J="s",Y="y"),V=z.stackgaps==="interpolate";else{var j=i(b,S);o(c,b,_,s,u,L,j)}var re=!!b.xperiodalignment,se=!!b.yperiodalignment;for(R=0;R<S;R++){var oe=k[R]={},N=w(u[R]),U=w(L[R]);N&&U?(oe[J]=u[R],oe[Z]=L[R],re&&(oe.orig_x=A[R],oe.xEnd=h.ends[R],oe.xStart=h.starts[R]),se&&(oe.orig_y=m[R],oe.yEnd=x.ends[R],oe.yStart=x.starts[R])):z&&(D?N:U)?(oe[Y]=D?u[R]:L[R],oe.gap=!0,V?(oe.s=e,I=!0):oe.s=0):oe[J]=oe[Z]=e,P&&(oe.id=String(P[R]))}if(r(k,b),n(c,b),t(k,b),z){for(R=0;R<k.length;)k[R][Y]===e?k.splice(R,1):R++;if(v.sort(k,function(X,ee){return X[Y]-ee[Y]||X.i-ee.i}),I){for(R=0;R<k.length-1&&k[R].gap;)R++;for(G=k[R].s,G||(G=k[R].s=0),O=0;O<R;O++)k[O].s=G;for(F=k.length-1;F>R&&k[F].gap;)F--;for(G=k[F].s,O=k.length-1;O>F;O--)k[O].s=G;for(;R<F;)if(R++,k[R].gap){for(O=R+1;k[O].gap;)O++;for(var q=k[R-1][Y],Q=k[R-1].s,W=(k[O].s-Q)/(k[O][Y]-q);R<O;)k[R].s=Q+(k[R][Y]-q)*W,R++}}}return k}function o(c,b,l,_,s,A,m){var h=b._length,x=c._fullLayout,u=l._id,L=_._id,S=x._firstScatter[p(b)]===b.uid,k=(y(b,x,l,_)||{}).orientation,P=b.fill;l._minDtick=0,_._minDtick=0;var z={padded:!0},I={padded:!0};m&&(z.ppad=I.ppad=m);var D=h<2||s[0]!==s[h-1]||A[0]!==A[h-1];D&&(P==="tozerox"||P==="tonextx"&&(S||k==="h"))?z.tozero=!0:!(b.error_y||{}).visible&&(P==="tonexty"||P==="tozeroy"||!a.hasMarkers(b)&&!a.hasText(b))&&(z.padded=!1,z.ppad=0),D&&(P==="tozeroy"||P==="tonexty"&&(S||k==="v"))?I.tozero=!0:(P==="tonextx"||P==="tozerox")&&(I.padded=!1),u&&(b._extremes[u]=M.findExtremes(l,s,z)),L&&(b._extremes[L]=M.findExtremes(_,A,I))}function i(c,b){if(!!a.hasMarkers(c)){var l=c.marker,_=1.6*(c.marker.sizeref||1),s;if(c.marker.sizemode==="area"?s=function(u){return Math.max(Math.sqrt((u||0)/_),3)}:s=function(u){return Math.max((u||0)/_,3)},v.isArrayOrTypedArray(l.size)){var A={type:"linear"};M.setConvert(A);for(var m=A.makeCalcdata(c.marker,"size"),h=new Array(b),x=0;x<b;x++)h[x]=s(m[x]);return h}else return s(l.size)}}function g(c,b){var l=p(b),_=c._firstScatter;_[l]||(_[l]=b.uid)}function p(c){var b=c.stackgroup;return c.xaxis+c.yaxis+c.type+(b?"-"+b:"")}function y(c,b,l,_){var s=c.stackgroup;if(!!s){var A=b._scatterStackOpts[l._id+_._id][s],m=A.orientation==="v"?_:l;if(m.type==="linear"||m.type==="log")return A}}ne.exports={calc:f,calcMarkerSize:i,calcAxisExpansion:o,setFirstScatter:g,getStackOpts:y}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"./arrays_to_calcdata":926,"./calc_selection":929,"./colorscale_calc":930,"./subtypes":952,"fast-isnumeric":190}],929:[function(d,ne,ae){var w=d("../../lib");ne.exports=function(M,T){w.isArrayOrTypedArray(T.selectedpoints)&&w.tagSelected(M,T)}},{"../../lib":503}],930:[function(d,ne,ae){var w=d("../../components/colorscale/helpers").hasColorscale,v=d("../../components/colorscale/calc"),M=d("./subtypes");ne.exports=function(e,a){M.hasLines(a)&&w(a,"line")&&v(e,a,{vals:a.line.color,containerStr:"line",cLetter:"c"}),M.hasMarkers(a)&&(w(a,"marker")&&v(e,a,{vals:a.marker.color,containerStr:"marker",cLetter:"c"}),w(a,"marker.line")&&v(e,a,{vals:a.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"./subtypes":952}],931:[function(d,ne,ae){ne.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],932:[function(d,ne,ae){var w=d("./calc");ne.exports=function(e,a){var n=a.xaxis,r=a.yaxis,t=n._id+r._id,f=e._fullLayout._scatterStackOpts[t];if(!!f){var o=e.calcdata,i,g,p,y,c,b,l,_,s,A,m,h,x,u,L;for(var S in f){A=f[S];var k=A.traceIndices;if(!!k.length){for(m=A.stackgaps==="interpolate",h=A.groupnorm,A.orientation==="v"?(x="x",u="y"):(x="y",u="x"),L=new Array(k.length),i=0;i<L.length;i++)L[i]=!1;b=o[k[0]];var P=new Array(b.length);for(i=0;i<b.length;i++)P[i]=b[i][x];for(i=1;i<k.length;i++){for(c=o[k[i]],g=p=0;g<c.length;g++){for(l=c[g][x];l>P[p]&&p<P.length;p++)v(c,g,P[p],i,L,m,x),g++;if(l!==P[p]){for(y=0;y<i;y++)v(o[k[y]],p,l,y,L,m,x);P.splice(p,0,l)}p++}for(;p<P.length;p++)v(c,g,P[p],i,L,m,x),g++}var z=P.length;for(g=0;g<b.length;g++){for(_=b[g][u]=b[g].s,i=1;i<k.length;i++)c=o[k[i]],c[0].trace._rawLength=c[0].trace._length,c[0].trace._length=z,_+=c[g].s,c[g][u]=_;if(h)for(s=(h==="fraction"?_:_/100)||1,i=0;i<k.length;i++){var I=o[k[i]][g];I[u]/=s,I.sNorm=I.s/s}}for(i=0;i<k.length;i++){c=o[k[i]];var D=c[0].trace,R=w.calcMarkerSize(D,D._rawLength),O=Array.isArray(R);if(R&&L[i]||O){var F=R;for(R=new Array(z),g=0;g<z;g++)R[g]=c[g].gap?0:O?F[c[g].i]:F}var V=new Array(z),G=new Array(z);for(g=0;g<z;g++)V[g]=c[g].x,G[g]=c[g].y;w.calcAxisExpansion(e,D,n,r,V,G,R),c[0].t.orientation=A.orientation}}}}};function v(T,e,a,n,r,t,f){r[n]=!0;var o={i:null,gap:!0,s:0};if(o[f]=a,T.splice(e,0,o),e&&a===T[e-1][f]){var i=T[e-1];o.s=i.s,o.i=i.i,o.gap=i.gap}else t&&(o.s=M(T,e,a,f));e||(T[0].t=T[1].t,T[0].trace=T[1].trace,delete T[1].t,delete T[1].trace)}function M(T,e,a,n){var r=T[e-1],t=T[e+1];return t?r?r.s+(t.s-r.s)*(a-r[n])/(t[n]-r[n]):t.s:r.s}},{"./calc":928}],933:[function(d,ne,ae){ne.exports=function(v){for(var M=0;M<v.length;M++){var T=v[M];if(T.type==="scatter"){var e=T.fill;if(!(e==="none"||e==="toself")&&(T.opacity=void 0,e==="tonexty"||e==="tonextx"))for(var a=M-1;a>=0;a--){var n=v[a];if(n.type==="scatter"&&n.xaxis===T.xaxis&&n.yaxis===T.yaxis){n.opacity=void 0;break}}}}}},{}],934:[function(d,ne,ae){var w=d("../../lib"),v=d("../../registry"),M=d("./attributes"),T=d("./constants"),e=d("./subtypes"),a=d("./xy_defaults"),n=d("./period_defaults"),r=d("./stack_defaults"),t=d("./marker_defaults"),f=d("./line_defaults"),o=d("./line_shape_defaults"),i=d("./text_defaults"),g=d("./fillcolor_defaults"),p=d("../../lib").coercePattern;ne.exports=function(c,b,l,_){function s(k,P){return w.coerce(c,b,M,k,P)}var A=a(c,b,_,s);if(A||(b.visible=!1),!!b.visible){n(c,b,_,s),s("xhoverformat"),s("yhoverformat");var m=r(c,b,_,s),h=!m&&A<T.PTS_LINESONLY?"lines+markers":"lines";s("text"),s("hovertext"),s("mode",h),e.hasLines(b)&&(f(c,b,l,_,s),o(c,b,s),s("connectgaps"),s("line.simplify")),e.hasMarkers(b)&&t(c,b,l,_,s,{gradient:!0}),e.hasText(b)&&(s("texttemplate"),i(c,b,_,s));var x=[];(e.hasMarkers(b)||e.hasText(b))&&(s("cliponaxis"),s("marker.maxdisplayed"),x.push("points")),s("fill",m?m.fillDflt:"none"),b.fill!=="none"&&(g(c,b,l,s),e.hasLines(b)||o(c,b,s),p(s,"fillpattern",b.fillcolor,!1));var u=(b.line||{}).color,L=(b.marker||{}).color;(b.fill==="tonext"||b.fill==="toself")&&x.push("fills"),s("hoveron",x.join("+")||"points"),b.hoveron!=="fills"&&s("hovertemplate");var S=v.getComponentMethod("errorbars","supplyDefaults");S(c,b,u||L||l,{axis:"y"}),S(c,b,u||L||l,{axis:"x",inherit:"y"}),w.coerceSelectionMarkerOpacity(b,s)}}},{"../../lib":503,"../../registry":638,"./attributes":927,"./constants":931,"./fillcolor_defaults":935,"./line_defaults":940,"./line_shape_defaults":942,"./marker_defaults":946,"./period_defaults":947,"./stack_defaults":950,"./subtypes":952,"./text_defaults":953,"./xy_defaults":954}],935:[function(d,ne,ae){var w=d("../../components/color"),v=d("../../lib").isArrayOrTypedArray;ne.exports=function(T,e,a,n){var r=!1;if(e.marker){var t=e.marker.color,f=(e.marker.line||{}).color;t&&!v(t)?r=t:f&&!v(f)&&(r=f)}n("fillcolor",w.addOpacity((e.line||{}).color||r||a,.5))}},{"../../components/color":366,"../../lib":503}],936:[function(d,ne,ae){var w=d("../../plots/cartesian/axes");ne.exports=function(M,T,e){var a={},n={_fullLayout:e},r=w.getFromTrace(n,T,"x"),t=w.getFromTrace(n,T,"y");return a.xLabel=w.tickText(r,r.c2l(M.x),!0).text,a.yLabel=w.tickText(t,t.c2l(M.y),!0).text,a}},{"../../plots/cartesian/axes":554}],937:[function(d,ne,ae){var w=d("../../components/color"),v=d("./subtypes");ne.exports=function(T,e){var a,n;if(T.mode==="lines")return a=T.line.color,a&&w.opacity(a)?a:T.fillcolor;if(T.mode==="none")return T.fill?T.fillcolor:"";var r=e.mcc||(T.marker||{}).color,t=e.mlcc||((T.marker||{}).line||{}).color;return n=r&&w.opacity(r)?r:t&&w.opacity(t)&&(e.mlw||((T.marker||{}).line||{}).width)?t:"",n?w.opacity(n)<.3?w.addOpacity(n,.3):n:(a=(T.line||{}).color,a&&w.opacity(a)&&v.hasLines(T)&&T.line.width?a:T.fillcolor)}},{"../../components/color":366,"./subtypes":952}],938:[function(d,ne,ae){var w=d("../../lib"),v=d("../../components/fx"),M=d("../../registry"),T=d("./get_trace_color"),e=d("../../components/color"),a=w.fillText;ne.exports=function(r,t,f,o){var i=r.cd,g=i[0].trace,p=r.xa,y=r.ya,c=p.c2p(t),b=y.c2p(f),l=[c,b],_=g.hoveron||"",s=g.mode.indexOf("markers")!==-1?3:.5,A=!!g.xperiodalignment,m=!!g.yperiodalignment;if(_.indexOf("points")!==-1){var h=function(ie){if(A){var le=p.c2p(ie.xStart),ge=p.c2p(ie.xEnd);return c>=Math.min(le,ge)&&c<=Math.max(le,ge)?0:1/0}var fe=Math.max(3,ie.mrc||0),pe=1-1/fe,ye=Math.abs(p.c2p(ie.x)-c);return ye<fe?pe*ye/fe:ye-fe+pe},x=function(ie){if(m){var le=y.c2p(ie.yStart),ge=y.c2p(ie.yEnd);return b>=Math.min(le,ge)&&b<=Math.max(le,ge)?0:1/0}var fe=Math.max(3,ie.mrc||0),pe=1-1/fe,ye=Math.abs(y.c2p(ie.y)-b);return ye<fe?pe*ye/fe:ye-fe+pe},u=function(ie){var le=Math.max(s,ie.mrc||0),ge=p.c2p(ie.x)-c,fe=y.c2p(ie.y)-b;return Math.max(Math.sqrt(ge*ge+fe*fe)-le,1-s/le)},L=v.getDistanceFunction(o,h,x,u);if(v.getClosest(i,L,r),r.index!==!1){var S=i[r.index],k=p.c2p(S.x,!0),P=y.c2p(S.y,!0),z=S.mrc||1;r.index=S.i;var I=i[0].t.orientation,D=I&&(S.sNorm||S.s),R=I==="h"?D:S.orig_x!==void 0?S.orig_x:S.x,O=I==="v"?D:S.orig_y!==void 0?S.orig_y:S.y;return w.extendFlat(r,{color:T(g,S),x0:k-z,x1:k+z,xLabelVal:R,y0:P-z,y1:P+z,yLabelVal:O,spikeDistance:u(S),hovertemplate:g.hovertemplate}),a(S,g,r),M.getComponentMethod("errorbars","hoverInfo")(S,g,r),[r]}}if(_.indexOf("fills")!==-1&&g._polygons){var F=g._polygons,V=[],G=!1,J=1/0,Z=-1/0,Y=1/0,j=-1/0,re,se,oe,N,U,q,Q,W,X;for(re=0;re<F.length;re++)oe=F[re],oe.contains(l)&&(G=!G,V.push(oe),Y=Math.min(Y,oe.ymin),j=Math.max(j,oe.ymax));if(G){Y=Math.max(Y,0),j=Math.min(j,y._length);var ee=(Y+j)/2;for(re=0;re<V.length;re++)for(N=V[re].pts,se=1;se<N.length;se++)W=N[se-1][1],X=N[se][1],W>ee!=X>=ee&&(q=N[se-1][0],Q=N[se][0],X-W&&(U=q+(Q-q)*(ee-W)/(X-W),J=Math.min(J,U),Z=Math.max(Z,U)));J=Math.max(J,0),Z=Math.min(Z,p._length);var te=e.defaultLine;return e.opacity(g.fillcolor)?te=g.fillcolor:e.opacity((g.line||{}).color)&&(te=g.line.color),w.extendFlat(r,{distance:r.maxHoverDistance,x0:J,x1:Z,y0:ee,y1:ee,color:te,hovertemplate:!1}),delete r.index,g.text&&!Array.isArray(g.text)?r.text=String(g.text):r.text=g.name,[r]}}}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"../../registry":638,"./get_trace_color":937}],939:[function(d,ne,ae){var w=d("./subtypes");ne.exports={hasLines:w.hasLines,hasMarkers:w.hasMarkers,hasText:w.hasText,isBubble:w.isBubble,attributes:d("./attributes"),supplyDefaults:d("./defaults"),crossTraceDefaults:d("./cross_trace_defaults"),calc:d("./calc").calc,crossTraceCalc:d("./cross_trace_calc"),arraysToCalcdata:d("./arrays_to_calcdata"),plot:d("./plot"),colorbar:d("./marker_colorbar"),formatLabels:d("./format_labels"),style:d("./style").style,styleOnSelect:d("./style").styleOnSelect,hoverPoints:d("./hover"),selectPoints:d("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:d("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"./arrays_to_calcdata":926,"./attributes":927,"./calc":928,"./cross_trace_calc":932,"./cross_trace_defaults":933,"./defaults":934,"./format_labels":936,"./hover":938,"./marker_colorbar":945,"./plot":948,"./select":949,"./style":951,"./subtypes":952}],940:[function(d,ne,ae){var w=d("../../lib").isArrayOrTypedArray,v=d("../../components/colorscale/helpers").hasColorscale,M=d("../../components/colorscale/defaults");ne.exports=function(e,a,n,r,t,f){var o=(e.marker||{}).color;if(t("line.color",n),v(e,"line"))M(e,a,r,t,{prefix:"line.",cLetter:"c"});else{var i=(w(o)?!1:o)||n;t("line.color",i)}t("line.width"),(f||{}).noDash||t("line.dash")}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503}],941:[function(d,ne,ae){var w=d("../../constants/numerical"),v=w.BADNUM,M=w.LOG_CLIP,T=M+.5,e=M-.5,a=d("../../lib"),n=a.segmentsIntersect,r=a.constrain,t=d("./constants");ne.exports=function(o,i){var g=i.xaxis,p=i.yaxis,y=g.type==="log",c=p.type==="log",b=g._length,l=p._length,_=i.connectGaps,s=i.baseTolerance,A=i.shape,m=A==="linear",h=i.fill&&i.fill!=="none",x=[],u=t.minTolerance,L=o.length,S=new Array(L),k=0,P,z,I,D,R,O,F,V,G,J,Z,Y,j,re,se,oe;function N(At){var zt=o[At];if(!zt)return!1;var Ut=i.linearized?g.l2p(zt.x):g.c2p(zt.x),Ct=i.linearized?p.l2p(zt.y):p.c2p(zt.y);if(Ut===v){if(y&&(Ut=g.c2p(zt.x,!0)),Ut===v)return!1;c&&Ct===v&&(Ut*=Math.abs(g._m*l*(g._m>0?T:e)/(p._m*b*(p._m>0?T:e)))),Ut*=1e3}if(Ct===v){if(c&&(Ct=p.c2p(zt.y,!0)),Ct===v)return!1;Ct*=1e3}return[Ut,Ct]}function U(At,zt,Ut,Ct){var Mt=Ut-At,rt=Ct-zt,ct=.5-At,Ze=.5-zt,ke=Mt*Mt+rt*rt,Ge=Mt*ct+rt*Ze;if(Ge>0&&Ge<ke){var Je=ct*rt-Ze*Mt;if(Je*Je<ke)return!0}}var q,Q;function W(At,zt){var Ut=At[0]/b,Ct=At[1]/l,Mt=Math.max(0,-Ut,Ut-1,-Ct,Ct-1);return Mt&&q!==void 0&&U(Ut,Ct,q,Q)&&(Mt=0),Mt&&zt&&U(Ut,Ct,zt[0]/b,zt[1]/l)&&(Mt=0),(1+t.toleranceGrowth*Mt)*s}function X(At,zt){var Ut=At[0]-zt[0],Ct=At[1]-zt[1];return Math.sqrt(Ut*Ut+Ct*Ct)}var ee=t.maxScreensAway,te=-b*ee,ie=b*(1+ee),le=-l*ee,ge=l*(1+ee),fe=[[te,le,ie,le],[ie,le,ie,ge],[ie,ge,te,ge],[te,ge,te,le]],pe,ye,Te,_e,De,Be;function Ue(At,zt){for(var Ut=[],Ct=0,Mt=0;Mt<4;Mt++){var rt=fe[Mt],ct=n(At[0],At[1],zt[0],zt[1],rt[0],rt[1],rt[2],rt[3]);ct&&(!Ct||Math.abs(ct.x-Ut[0][0])>1||Math.abs(ct.y-Ut[0][1])>1)&&(ct=[ct.x,ct.y],Ct&&X(ct,At)<X(Ut[0],At)?Ut.unshift(ct):Ut.push(ct),Ct++)}return Ut}function xe(At){if(At[0]<te||At[0]>ie||At[1]<le||At[1]>ge)return[r(At[0],te,ie),r(At[1],le,ge)]}function Pe(At,zt){if(At[0]===zt[0]&&(At[0]===te||At[0]===ie)||At[1]===zt[1]&&(At[1]===le||At[1]===ge))return!0}function Ve(At,zt){var Ut=[],Ct=xe(At),Mt=xe(zt);return Ct&&Mt&&Pe(Ct,Mt)||(Ct&&Ut.push(Ct),Mt&&Ut.push(Mt)),Ut}function Qe(At,zt,Ut){return function(Ct,Mt){var rt=xe(Ct),ct=xe(Mt),Ze=[];if(rt&&ct&&Pe(rt,ct))return Ze;rt&&Ze.push(rt),ct&&Ze.push(ct);var ke=2*a.constrain((Ct[At]+Mt[At])/2,zt,Ut)-((rt||Ct)[At]+(ct||Mt)[At]);if(ke){var Ge;rt&&ct?Ge=ke>0==rt[At]>ct[At]?rt:ct:Ge=rt||ct,Ge[At]+=ke}return Ze}}var Fe;A==="linear"||A==="spline"?Fe=Ue:A==="hv"||A==="vh"?Fe=Ve:A==="hvh"?Fe=Qe(0,te,ie):A==="vhv"&&(Fe=Qe(1,le,ge));function Le(At,zt){var Ut=zt[0]-At[0],Ct=(zt[1]-At[1])/Ut,Mt=(At[1]*zt[0]-zt[1]*At[0])/Ut;return Mt>0?[Ct>0?te:ie,ge]:[Ct>0?ie:te,le]}function Ne(At){var zt=At[0],Ut=At[1],Ct=zt===S[k-1][0],Mt=Ut===S[k-1][1];if(!(Ct&&Mt))if(k>1){var rt=zt===S[k-2][0],ct=Ut===S[k-2][1];Ct&&(zt===te||zt===ie)&&rt?ct?k--:S[k-1]=At:Mt&&(Ut===le||Ut===ge)&&ct?rt?k--:S[k-1]=At:S[k++]=At}else S[k++]=At}function dt(At){S[k-1][0]!==At[0]&&S[k-1][1]!==At[1]&&Ne([Te,_e]),Ne(At),De=null,Te=_e=0}function Dt(At){if(q=At[0]/b,Q=At[1]/l,pe=At[0]<te?te:At[0]>ie?ie:0,ye=At[1]<le?le:At[1]>ge?ge:0,pe||ye){if(!k)S[k++]=[pe||At[0],ye||At[1]];else if(De){var zt=Fe(De,At);zt.length>1&&(dt(zt[0]),S[k++]=zt[1])}else Be=Fe(S[k-1],At)[0],S[k++]=Be;var Ut=S[k-1];pe&&ye&&(Ut[0]!==pe||Ut[1]!==ye)?(De&&(Te!==pe&&_e!==ye?Ne(Te&&_e?Le(De,At):[Te||pe,_e||ye]):Te&&_e&&Ne([Te,_e])),Ne([pe,ye])):Te-pe&&_e-ye&&Ne([pe||Te,ye||_e]),De=At,Te=pe,_e=ye}else De&&dt(Fe(De,At)[0]),S[k++]=At}for(P=0;P<L;P++)if(z=N(P),!!z){for(k=0,De=null,Dt(z),P++;P<L;P++){if(D=N(P),!D){if(_)continue;break}if(!m||!i.simplify){Dt(D);continue}var Xt=N(P+1);if(J=X(D,z),!(!(h&&(k===0||k===L-1))&&J<W(D,Xt)*u)){for(V=[(D[0]-z[0])/J,(D[1]-z[1])/J],R=z,Z=J,Y=re=se=0,F=!1,I=D,P++;P<o.length;P++){if(O=Xt,Xt=N(P+1),!O){if(_)continue;break}if(G=[O[0]-z[0],O[1]-z[1]],oe=G[0]*V[1]-G[1]*V[0],re=Math.min(re,oe),se=Math.max(se,oe),se-re>W(O,Xt))break;I=O,j=G[0]*V[0]+G[1]*V[1],j>Z?(Z=j,D=O,F=!1):j<Y&&(Y=j,R=O,F=!0)}if(F?(Dt(D),I!==R&&Dt(R)):(R!==z&&Dt(R),I!==D&&Dt(D)),Dt(I),P>=o.length||!O)break;Dt(O),z=O}}De&&Ne([Te||De[0],_e||De[1]]),x.push(S.slice(0,k))}return x}},{"../../constants/numerical":479,"../../lib":503,"./constants":931}],942:[function(d,ne,ae){ne.exports=function(v,M,T){var e=T("line.shape");e==="spline"&&T("line.smoothing")}},{}],943:[function(d,ne,ae){var w={tonextx:1,tonexty:1,tonext:1};ne.exports=function(M,T,e){var a,n,r,t,f,o={},i=!1,g=-1,p=0,y=-1;for(n=0;n<e.length;n++)a=e[n][0].trace,r=a.stackgroup||"",r?r in o?f=o[r]:(f=o[r]=p,p++):a.fill in w&&y>=0?f=y:(f=y=p,p++),f<g&&(i=!0),a._groupIndex=g=f;var c=e.slice();i&&c.sort(function(l,_){var s=l[0].trace,A=_[0].trace;return s._groupIndex-A._groupIndex||s.index-A.index});var b={};for(n=0;n<c.length;n++)a=c[n][0].trace,r=a.stackgroup||"",a.visible===!0?(a._nexttrace=null,a.fill in w&&(t=b[r],a._prevtrace=t||null,t&&(t._nexttrace=a)),a._ownfill=a.fill&&(a.fill.substr(0,6)==="tozero"||a.fill==="toself"||a.fill.substr(0,2)==="to"&&!a._prevtrace),b[r]=a):a._prevtrace=a._nexttrace=a._ownfill=null;return c}},{}],944:[function(d,ne,ae){var w=d("fast-isnumeric");ne.exports=function(M,T){T||(T=2);var e=M.marker,a=e.sizeref||1,n=e.sizemin||0,r=e.sizemode==="area"?function(t){return Math.sqrt(t/a)}:function(t){return t/a};return function(t){var f=r(t/T);return w(f)&&f>0?Math.max(f,n):0}}},{"fast-isnumeric":190}],945:[function(d,ne,ae){ne.exports={container:"marker",min:"cmin",max:"cmax"}},{}],946:[function(d,ne,ae){var w=d("../../components/color"),v=d("../../components/colorscale/helpers").hasColorscale,M=d("../../components/colorscale/defaults"),T=d("./subtypes");ne.exports=function(a,n,r,t,f,o){var i=T.isBubble(a),g=(a.line||{}).color,p;if(o=o||{},g&&(r=g),f("marker.symbol"),f("marker.opacity",i?.7:1),f("marker.size"),f("marker.color",r),v(a,"marker")&&M(a,n,t,f,{prefix:"marker.",cLetter:"c"}),o.noSelect||(f("selected.marker.color"),f("unselected.marker.color"),f("selected.marker.size"),f("unselected.marker.size")),o.noLine||(g&&!Array.isArray(g)&&n.marker.color!==g?p=g:i?p=w.background:p=w.defaultLine,f("marker.line.color",p),v(a,"marker.line")&&M(a,n,t,f,{prefix:"marker.line.",cLetter:"c"}),f("marker.line.width",i?1:0)),i&&(f("marker.sizeref"),f("marker.sizemin"),f("marker.sizemode")),o.gradient){var y=f("marker.gradient.type");y!=="none"&&f("marker.gradient.color")}}},{"../../components/color":366,"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"./subtypes":952}],947:[function(d,ne,ae){var w=d("../../lib").dateTick0,v=d("../../constants/numerical"),M=v.ONEWEEK;function T(e,a){return e%M===0?w(a,1):w(a,0)}ne.exports=function(a,n,r,t,f){if(f||(f={x:!0,y:!0}),f.x){var o=t("xperiod");o&&(t("xperiod0",T(o,n.xcalendar)),t("xperiodalignment"))}if(f.y){var i=t("yperiod");i&&(t("yperiod0",T(i,n.ycalendar)),t("yperiodalignment"))}}},{"../../constants/numerical":479,"../../lib":503}],948:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../registry"),M=d("../../lib"),T=M.ensureSingle,e=M.identity,a=d("../../components/drawing"),n=d("./subtypes"),r=d("./line_points"),t=d("./link_traces"),f=d("../../lib/polygon").tester;ne.exports=function(y,c,b,l,_,s){var A,m,h=!_,x=!!_&&_.duration>0,u=t(y,c,b);if(A=l.selectAll("g.trace").data(u,function(S){return S[0].trace.uid}),A.enter().append("g").attr("class",function(S){return"trace scatter trace"+S[0].trace.uid}).style("stroke-miterlimit",2),A.order(),o(y,A,c),x){s&&(m=s());var L=w.transition().duration(_.duration).ease(_.easing).each("end",function(){m&&m()}).each("interrupt",function(){m&&m()});L.each(function(){l.selectAll("g.trace").each(function(S,k){i(y,k,c,S,u,this,_)})})}else A.each(function(S,k){i(y,k,c,S,u,this,_)});h&&A.exit().remove(),l.selectAll("path:not([d])").remove()};function o(p,y,c){y.each(function(b){var l=T(w.select(this),"g","fills");a.setClipUrl(l,c.layerClipId,p);var _=b[0].trace,s=[];_._ownfill&&s.push("_ownFill"),_._nexttrace&&s.push("_nextFill");var A=l.selectAll("g").data(s,e);A.enter().append("g"),A.exit().each(function(m){_[m]=null}).remove(),A.order().each(function(m){_[m]=T(w.select(this),"path","js-fill")})})}function i(p,y,c,b,l,_,s){var A;g(p,y,c,b,l);var m=!!s&&s.duration>0;function h(Ue){return m?Ue.transition():Ue}var x=c.xaxis,u=c.yaxis,L=b[0].trace,S=L.line,k=w.select(_),P=T(k,"g","errorbars"),z=T(k,"g","lines"),I=T(k,"g","points"),D=T(k,"g","text");if(v.getComponentMethod("errorbars","plot")(p,P,c,s),L.visible!==!0)return;h(k).style("opacity",L.opacity);var R,O,F=L.fill.charAt(L.fill.length-1);F!=="x"&&F!=="y"&&(F=""),b[0][c.isRangePlot?"nodeRangePlot3":"node3"]=k;var V="",G=[],J=L._prevtrace;J&&(V=J._prevRevpath||"",O=J._nextFill,G=J._polygons);var Z,Y,j="",re="",se,oe,N,U,q,Q,W,X=[],ee=M.noop;if(R=L._ownFill,n.hasLines(L)||L.fill!=="none"){for(O&&O.datum(b),["hv","vh","hvh","vhv"].indexOf(S.shape)!==-1?(se=a.steps(S.shape),oe=a.steps(S.shape.split("").reverse().join(""))):S.shape==="spline"?se=oe=function(Ue){var xe=Ue[Ue.length-1];return Ue.length>1&&Ue[0][0]===xe[0]&&Ue[0][1]===xe[1]?a.smoothclosed(Ue.slice(1),S.smoothing):a.smoothopen(Ue,S.smoothing)}:se=oe=function(Ue){return"M"+Ue.join("L")},N=function(Ue){return oe(Ue.reverse())},X=r(b,{xaxis:x,yaxis:u,connectGaps:L.connectgaps,baseTolerance:Math.max(S.width||1,3)/4,shape:S.shape,simplify:S.simplify,fill:L.fill}),W=L._polygons=new Array(X.length),A=0;A<X.length;A++)L._polygons[A]=f(X[A]);X.length&&(U=X[0][0],q=X[X.length-1],Q=q[q.length-1]),ee=function(Ue){return function(xe){if(Z=se(xe),Y=N(xe),j?F?(j+="L"+Z.substr(1),re=Y+("L"+re.substr(1))):(j+="Z"+Z,re=Y+"Z"+re):(j=Z,re=Y),n.hasLines(L)&&xe.length>1){var Pe=w.select(this);if(Pe.datum(b),Ue)h(Pe.style("opacity",0).attr("d",Z).call(a.lineGroupStyle)).style("opacity",1);else{var Ve=h(Pe);Ve.attr("d",Z),a.singleLineStyle(b,Ve)}}}}}var te=z.selectAll(".js-line").data(X);h(te.exit()).style("opacity",0).remove(),te.each(ee(!1)),te.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(a.lineGroupStyle).each(ee(!0)),a.setClipUrl(te,c.layerClipId,p);function ie(Ue){h(Ue).attr("d","M0,0Z")}X.length?(R?(R.datum(b),U&&Q&&(F?(F==="y"?U[1]=Q[1]=u.c2p(0,!0):F==="x"&&(U[0]=Q[0]=x.c2p(0,!0)),h(R).attr("d","M"+Q+"L"+U+"L"+j.substr(1)).call(a.singleFillStyle,p)):h(R).attr("d",j+"Z").call(a.singleFillStyle,p))):O&&(L.fill.substr(0,6)==="tonext"&&j&&V?(L.fill==="tonext"?h(O).attr("d",j+"Z"+V+"Z").call(a.singleFillStyle,p):h(O).attr("d",j+"L"+V.substr(1)+"Z").call(a.singleFillStyle,p),L._polygons=L._polygons.concat(G)):(ie(O),L._polygons=null)),L._prevRevpath=re,L._prevPolygons=W):(R?ie(R):O&&ie(O),L._polygons=L._prevRevpath=L._prevPolygons=null);function le(Ue){return Ue.filter(function(xe){return!xe.gap&&xe.vis})}function ge(Ue){return Ue.filter(function(xe){return xe.vis})}function fe(Ue){return Ue.filter(function(xe){return!xe.gap})}function pe(Ue){return Ue.id}function ye(Ue){if(Ue.ids)return pe}function Te(){return!1}function _e(Ue,xe,Pe){var Ve,Qe,Fe,Le=Pe[0].trace,Ne=n.hasMarkers(Le),dt=n.hasText(Le),Dt=ye(Le),Xt=Te,At=Te;if(Ne||dt){var zt=e,Ut=Le.stackgroup,Ct=Ut&&p._fullLayout._scatterStackOpts[x._id+u._id][Ut].stackgaps==="infer zero";Le.marker.maxdisplayed||Le._needsCull?zt=Ct?ge:le:Ut&&!Ct&&(zt=fe),Ne&&(Xt=zt),dt&&(At=zt)}Qe=Ue.selectAll("path.point"),Ve=Qe.data(Xt,Dt);var Mt=Ve.enter().append("path").classed("point",!0);m&&Mt.call(a.pointStyle,Le,p).call(a.translatePoints,x,u).style("opacity",0).transition().style("opacity",1),Ve.order();var rt;Ne&&(rt=a.makePointStyleFns(Le)),Ve.each(function(ct){var Ze=w.select(this),ke=h(Ze);Fe=a.translatePoint(ct,ke,x,u),Fe?(a.singlePointStyle(ct,ke,Le,rt,p),c.layerClipId&&a.hideOutsideRangePoint(ct,ke,x,u,Le.xcalendar,Le.ycalendar),Le.customdata&&Ze.classed("plotly-customdata",ct.data!==null&&ct.data!==void 0)):ke.remove()}),m?Ve.exit().transition().style("opacity",0).remove():Ve.exit().remove(),Qe=xe.selectAll("g"),Ve=Qe.data(At,Dt),Ve.enter().append("g").classed("textpoint",!0).append("text"),Ve.order(),Ve.each(function(ct){var Ze=w.select(this),ke=h(Ze.select("text"));Fe=a.translatePoint(ct,ke,x,u),Fe?c.layerClipId&&a.hideOutsideRangePoint(ct,Ze,x,u,Le.xcalendar,Le.ycalendar):Ze.remove()}),Ve.selectAll("text").call(a.textPointStyle,Le,p).each(function(ct){var Ze=x.c2p(ct.x),ke=u.c2p(ct.y);w.select(this).selectAll("tspan.line").each(function(){h(w.select(this)).attr({x:Ze,y:ke})})}),Ve.exit().remove()}I.datum(b),D.datum(b),_e(I,D,b);var De=L.cliponaxis===!1,Be=De?null:c.layerClipId;a.setClipUrl(I,Be,p),a.setClipUrl(D,Be,p)}function g(p,y,c,b,l){var _=c.xaxis,s=c.yaxis,A=w.extent(M.simpleMap(_.range,_.r2c)),m=w.extent(M.simpleMap(s.range,s.r2c)),h=b[0].trace;if(!!n.hasMarkers(h)){var x=h.marker.maxdisplayed;if(x!==0){var u=b.filter(function(P){return P.x>=A[0]&&P.x<=A[1]&&P.y>=m[0]&&P.y<=m[1]}),L=Math.ceil(u.length/x),S=0;l.forEach(function(P,z){var I=P[0].trace;n.hasMarkers(I)&&I.marker.maxdisplayed>0&&z<y&&S++});var k=Math.round(S*L/3+Math.floor(S/3)*L/7.1);b.forEach(function(P){delete P.vis}),u.forEach(function(P,z){Math.round((z+k)%L)===0&&(P.vis=!0)})}}}},{"../../components/drawing":388,"../../lib":503,"../../lib/polygon":515,"../../registry":638,"./line_points":941,"./link_traces":943,"./subtypes":952,"@plotly/d3":58}],949:[function(d,ne,ae){var w=d("./subtypes");ne.exports=function(M,T){var e=M.cd,a=M.xaxis,n=M.yaxis,r=[],t=e[0].trace,f,o,i,g,p=!w.hasMarkers(t)&&!w.hasText(t);if(p)return[];if(T===!1)for(f=0;f<e.length;f++)e[f].selected=0;else for(f=0;f<e.length;f++)o=e[f],i=a.c2p(o.x),g=n.c2p(o.y),o.i!==null&&T.contains([i,g],!1,f,M)?(r.push({pointNumber:o.i,x:a.c2d(o.x),y:n.c2d(o.y)}),o.selected=1):o.selected=0;return r}},{"./subtypes":952}],950:[function(d,ne,ae){var w=["orientation","groupnorm","stackgaps"];ne.exports=function(M,T,e,a){var n=e._scatterStackOpts,r=a("stackgroup");if(r){var t=T.xaxis+T.yaxis,f=n[t];f||(f=n[t]={});var o=f[r],i=!1;o?o.traces.push(T):(o=f[r]={traceIndices:[],traces:[T]},i=!0);for(var g={orientation:T.x&&!T.y?"h":"v"},p=0;p<w.length;p++){var y=w[p],c=y+"Found";if(!o[c]){var b=M[y]!==void 0,l=y==="orientation";if((b||i)&&(o[y]=a(y,g[y]),l&&(o.fillDflt=o[y]==="h"?"tonextx":"tonexty"),b&&(o[c]=!0,!i&&(delete o.traces[0][y],l))))for(var _=0;_<o.traces.length-1;_++){var s=o.traces[_];s._input.fill!==s.fill&&(s.fill=o.fillDflt)}}}return o}}},{}],951:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../components/drawing"),M=d("../../registry");function T(r){var t=w.select(r).selectAll("g.trace.scatter");t.style("opacity",function(f){return f[0].trace.opacity}),t.selectAll("g.points").each(function(f){var o=w.select(this),i=f.trace||f[0].trace;e(o,i,r)}),t.selectAll("g.text").each(function(f){var o=w.select(this),i=f.trace||f[0].trace;a(o,i,r)}),t.selectAll("g.trace path.js-line").call(v.lineGroupStyle),t.selectAll("g.trace path.js-fill").call(v.fillGroupStyle,r),M.getComponentMethod("errorbars","style")(t)}function e(r,t,f){v.pointStyle(r.selectAll("path.point"),t,f)}function a(r,t,f){v.textPointStyle(r.selectAll("text"),t,f)}function n(r,t,f){var o=t[0].trace;o.selectedpoints?(v.selectedPointStyle(f.selectAll("path.point"),o),v.selectedTextStyle(f.selectAll("text"),o)):(e(f,o,r),a(f,o,r))}ne.exports={style:T,stylePoints:e,styleText:a,styleOnSelect:n}},{"../../components/drawing":388,"../../registry":638,"@plotly/d3":58}],952:[function(d,ne,ae){var w=d("../../lib");ne.exports={hasLines:function(v){return v.visible&&v.mode&&v.mode.indexOf("lines")!==-1},hasMarkers:function(v){return v.visible&&(v.mode&&v.mode.indexOf("markers")!==-1||v.type==="splom")},hasText:function(v){return v.visible&&v.mode&&v.mode.indexOf("text")!==-1},isBubble:function(v){return w.isPlainObject(v.marker)&&w.isArrayOrTypedArray(v.marker.size)}}},{"../../lib":503}],953:[function(d,ne,ae){var w=d("../../lib");ne.exports=function(v,M,T,e,a){a=a||{},e("textposition"),w.coerceFont(e,"textfont",T.font),a.noSelect||(e("selected.textfont.color"),e("unselected.textfont.color"))}},{"../../lib":503}],954:[function(d,ne,ae){var w=d("../../lib"),v=d("../../registry");ne.exports=function(T,e,a,n){var r=n("x"),t=n("y"),f,o=v.getComponentMethod("calendars","handleTraceDefaults");if(o(T,e,["x","y"],a),r){var i=w.minRowLength(r);t?f=Math.min(i,w.minRowLength(t)):(f=i,n("y0"),n("dy"))}else{if(!t)return 0;f=w.minRowLength(t),n("x0"),n("dx")}return e._length=f,f}},{"../../lib":503,"../../registry":638}],955:[function(d,ne,ae){var w=d("../scatter/attributes"),v=d("../../components/colorscale/attributes"),M=d("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=d("../../plots/template_attributes").hovertemplateAttrs,e=d("../../plots/template_attributes").texttemplateAttrs,a=d("../../plots/attributes"),n=d("../../constants/gl3d_dashes"),r=d("../../constants/gl3d_markers"),t=d("../../lib/extend").extendFlat,f=d("../../plot_api/edit_types").overrideAll,o=d("../../lib/sort_object_keys"),i=w.line,g=w.marker,p=g.line,y=t({width:i.width,dash:{valType:"enumerated",values:o(n),dflt:"solid"}},v("line"));function c(l){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}var b=ne.exports=f({x:w.x,y:w.y,z:{valType:"data_array"},text:t({},w.text,{}),texttemplate:e({},{}),hovertext:t({},w.hovertext,{}),hovertemplate:T(),xhoverformat:M("x"),yhoverformat:M("y"),zhoverformat:M("z"),mode:t({},w.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:c(),y:c(),z:c()},connectgaps:w.connectgaps,line:y,marker:t({symbol:{valType:"enumerated",values:o(r),dflt:"circle",arrayOk:!0},size:t({},g.size,{dflt:8}),sizeref:g.sizeref,sizemin:g.sizemin,sizemode:g.sizemode,opacity:t({},g.opacity,{arrayOk:!1}),colorbar:g.colorbar,line:t({width:t({},p.width,{arrayOk:!1})},v("marker.line"))},v("marker")),textposition:t({},w.textposition,{dflt:"top center"}),textfont:{color:w.textfont.color,size:w.textfont.size,family:t({},w.textfont.family,{arrayOk:!1})},opacity:a.opacity,hoverinfo:t({},a.hoverinfo)},"calc","nested");b.x.editType=b.y.editType=b.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":373,"../../constants/gl3d_dashes":476,"../../constants/gl3d_markers":477,"../../lib/extend":493,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../scatter/attributes":927}],956:[function(d,ne,ae){var w=d("../scatter/arrays_to_calcdata"),v=d("../scatter/colorscale_calc");ne.exports=function(T,e){var a=[{x:!1,y:!1,trace:e,t:{}}];return w(a,e),v(T,e),a}},{"../scatter/arrays_to_calcdata":926,"../scatter/colorscale_calc":930}],957:[function(d,ne,ae){var w=d("../../registry");function v(e,a,n,r){if(!a||!a.visible)return null;for(var t=w.getComponentMethod("errorbars","makeComputeError")(a),f=new Array(e.length),o=0;o<e.length;o++){var i=t(+e[o],o);if(r.type==="log"){var g=r.c2l(e[o]),p=e[o]-i[0],y=e[o]+i[1];if(f[o]=[(r.c2l(p,!0)-g)*n,(r.c2l(y,!0)-g)*n],p>0){var c=r.c2l(p);r._lowerLogErrorBound||(r._lowerLogErrorBound=c),r._lowerErrorBound=Math.min(r._lowerLogErrorBound,c)}}else f[o]=[-i[0]*n,i[1]*n]}return f}function M(e){for(var a=0;a<e.length;a++)if(e[a])return e[a].length;return 0}function T(e,a,n){var r=[v(e.x,e.error_x,a[0],n.xaxis),v(e.y,e.error_y,a[1],n.yaxis),v(e.z,e.error_z,a[2],n.zaxis)],t=M(r);if(t===0)return null;for(var f=new Array(t),o=0;o<t;o++){for(var i=[[0,0,0],[0,0,0]],g=0;g<3;g++)if(r[g])for(var p=0;p<2;p++)i[p][g]=r[g][o][p];f[o]=i}return f}ne.exports=T},{"../../registry":638}],958:[function(d,ne,ae){var w=d("../../../stackgl_modules").gl_line3d,v=d("../../../stackgl_modules").gl_scatter3d,M=d("../../../stackgl_modules").gl_error3d,T=d("../../../stackgl_modules").gl_mesh3d,e=d("../../../stackgl_modules").delaunay_triangulate,a=d("../../lib"),n=d("../../lib/str2rgbarray"),r=d("../../lib/gl_format_color").formatColor,t=d("../scatter/make_bubble_size_func"),f=d("../../constants/gl3d_dashes"),o=d("../../constants/gl3d_markers"),i=d("../../plots/cartesian/axes"),g=d("../../components/fx/helpers").appendArrayPointValue,p=d("./calc_errors");function y(P,z){this.scene=P,this.uid=z,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var c=y.prototype;c.handlePick=function(P){if(P.object&&(P.object===this.linePlot||P.object===this.delaunayMesh||P.object===this.textMarkers||P.object===this.scatterPlot)){var z=P.index=P.data.index;return P.object.highlight&&P.object.highlight(null),this.scatterPlot&&(P.object=this.scatterPlot,this.scatterPlot.highlight(P.data)),P.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[z]||this.textLabels[z]===0)&&(P.textLabel=this.textLabels[z]):P.textLabel=this.textLabels),P.traceCoordinate=[this.data.x[z],this.data.y[z],this.data.z[z]],!0}};function b(P,z,I){var D=(I+1)%3,R=(I+2)%3,O=[],F=[],V;for(V=0;V<P.length;++V){var G=P[V];isNaN(G[D])||!isFinite(G[D])||isNaN(G[R])||!isFinite(G[R])||(O.push([G[D],G[R]]),F.push(V))}var J=e(O);for(V=0;V<J.length;++V)for(var Z=J[V],Y=0;Y<Z.length;++Y)Z[Y]=F[Z[Y]];return{positions:P,cells:J,meshColor:z}}function l(P){for(var z=[0,0,0],I=[[0,0,0],[0,0,0],[0,0,0]],D=[1,1,1],R=0;R<3;R++){var O=P[R];O&&O.copy_zstyle!==!1&&P[2].visible!==!1&&(O=P[2]),!(!O||!O.visible)&&(z[R]=O.width/2,I[R]=n(O.color),D[R]=O.thickness)}return{capSize:z,color:I,lineWidth:D}}function _(P){return P==null?0:P.indexOf("left")>-1?-1:P.indexOf("right")>-1?1:0}function s(P){return P==null?0:P.indexOf("top")>-1?-1:P.indexOf("bottom")>-1?1:0}function A(P){var z=0,I=0,D=[z,I];if(Array.isArray(P))for(var R=0;R<P.length;R++)D[R]=[z,I],P[R]&&(D[R][0]=_(P[R]),D[R][1]=s(P[R]));else D[0]=_(P),D[1]=s(P);return D}function m(P,z){return z(P*4)}function h(P){return o[P]}function x(P,z,I,D,R){var O=null;if(a.isArrayOrTypedArray(P)){O=[];for(var F=0;F<z;F++)P[F]===void 0?O[F]=D:O[F]=I(P[F],R)}else O=I(P,a.identity);return O}function u(P,z){var I=[],D=P.fullSceneLayout,R=P.dataScale,O=D.xaxis,F=D.yaxis,V=D.zaxis,G=z.marker,J=z.line,Z=z.x||[],Y=z.y||[],j=z.z||[],re=Z.length,se=z.xcalendar,oe=z.ycalendar,N=z.zcalendar,U,q,Q,W,X,ee;for(X=0;X<re;X++)U=O.d2l(Z[X],0,se)*R[0],q=F.d2l(Y[X],0,oe)*R[1],Q=V.d2l(j[X],0,N)*R[2],I[X]=[U,q,Q];if(Array.isArray(z.text))ee=z.text;else if(z.text!==void 0)for(ee=new Array(re),X=0;X<re;X++)ee[X]=z.text;function te(Qe,Fe){var Le=D[Qe];return i.tickText(Le,Le.d2l(Fe),!0).text}var ie=z.texttemplate;if(ie){var le=P.fullLayout,ge=le._d3locale,fe=Array.isArray(ie),pe=fe?Math.min(ie.length,re):re,ye=fe?function(Qe){return ie[Qe]}:function(){return ie};for(ee=new Array(pe),X=0;X<pe;X++){var Te={x:Z[X],y:Y[X],z:j[X]},_e={xLabel:te("xaxis",Z[X]),yLabel:te("yaxis",Y[X]),zLabel:te("zaxis",j[X])},De={};g(De,z,X);var Be=z._meta||{};ee[X]=a.texttemplateString(ye(X),_e,ge,De,Te,Be)}}if(W={position:I,mode:z.mode,text:ee},"line"in z&&(W.lineColor=r(J,1,re),W.lineWidth=J.width,W.lineDashes=J.dash),"marker"in z){var Ue=t(z);W.scatterColor=r(G,1,re),W.scatterSize=x(G.size,re,m,20,Ue),W.scatterMarker=x(G.symbol,re,h,"\u25CF"),W.scatterLineWidth=G.line.width,W.scatterLineColor=r(G.line,1,re),W.scatterAngle=0}"textposition"in z&&(W.textOffset=A(z.textposition),W.textColor=r(z.textfont,1,re),W.textSize=x(z.textfont.size,re,a.identity,12),W.textFont=z.textfont.family,W.textAngle=0);var xe=["x","y","z"];for(W.project=[!1,!1,!1],W.projectScale=[1,1,1],W.projectOpacity=[1,1,1],X=0;X<3;++X){var Pe=z.projection[xe[X]];(W.project[X]=Pe.show)&&(W.projectOpacity[X]=Pe.opacity,W.projectScale[X]=Pe.scale)}W.errorBounds=p(z,R,D);var Ve=l([z.error_x,z.error_y,z.error_z]);return W.errorColor=Ve.color,W.errorLineWidth=Ve.lineWidth,W.errorCapSize=Ve.capSize,W.delaunayAxis=z.surfaceaxis,W.delaunayColor=n(z.surfacecolor),W}function L(P){if(a.isArrayOrTypedArray(P)){var z=P[0];return a.isArrayOrTypedArray(z)&&(P=z),"rgb("+P.slice(0,3).map(function(I){return Math.round(I*255)})+")"}return null}function S(P){return a.isArrayOrTypedArray(P)?P.length===4&&typeof P[0]=="number"?L(P):P.map(L):null}c.update=function(P){var z=this.scene.glplot.gl,I,D,R,O,F=f.solid;this.data=P;var V=u(this.scene,P);"mode"in V&&(this.mode=V.mode),"lineDashes"in V&&V.lineDashes in f&&(F=f[V.lineDashes]),this.color=S(V.scatterColor)||S(V.lineColor),this.dataPoints=V.position,I={gl:this.scene.glplot.gl,position:V.position,color:V.lineColor,lineWidth:V.lineWidth||1,dashes:F[0],dashScale:F[1],opacity:P.opacity,connectGaps:P.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(I):(this.linePlot=w(I),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var G=P.opacity;if(P.marker&&P.marker.opacity&&(G*=P.marker.opacity),D={gl:this.scene.glplot.gl,position:V.position,color:V.scatterColor,size:V.scatterSize,glyph:V.scatterMarker,opacity:G,orthographic:!0,lineWidth:V.scatterLineWidth,lineColor:V.scatterLineColor,project:V.project,projectScale:V.projectScale,projectOpacity:V.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(D):(this.scatterPlot=v(D),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),O={gl:this.scene.glplot.gl,position:V.position,glyph:V.text,color:V.textColor,size:V.textSize,angle:V.textAngle,alignment:V.textOffset,font:V.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:P.opacity},this.textLabels=P.hovertext||P.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(O):(this.textMarkers=v(O),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),R={gl:this.scene.glplot.gl,position:V.position,color:V.errorColor,error:V.errorBounds,lineWidth:V.errorLineWidth,capSize:V.errorCapSize,opacity:P.opacity},this.errorBars?V.errorBounds?this.errorBars.update(R):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):V.errorBounds&&(this.errorBars=M(R),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),V.delaunayAxis>=0){var J=b(V.position,V.delaunayColor,V.delaunayAxis);J.opacity=P.opacity,this.delaunayMesh?this.delaunayMesh.update(J):(J.gl=z,this.delaunayMesh=T(J),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},c.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};function k(P,z){var I=new y(P,z.uid);return I.update(z),I}ne.exports=k},{"../../../stackgl_modules":1124,"../../components/fx/helpers":402,"../../constants/gl3d_dashes":476,"../../constants/gl3d_markers":477,"../../lib":503,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554,"../scatter/make_bubble_size_func":944,"./calc_errors":957}],959:[function(d,ne,ae){var w=d("../../registry"),v=d("../../lib"),M=d("../scatter/subtypes"),T=d("../scatter/marker_defaults"),e=d("../scatter/line_defaults"),a=d("../scatter/text_defaults"),n=d("./attributes");ne.exports=function(f,o,i,g){function p(m,h){return v.coerce(f,o,n,m,h)}var y=r(f,o,p,g);if(!y){o.visible=!1;return}p("text"),p("hovertext"),p("hovertemplate"),p("xhoverformat"),p("yhoverformat"),p("zhoverformat"),p("mode"),M.hasLines(o)&&(p("connectgaps"),e(f,o,i,g,p)),M.hasMarkers(o)&&T(f,o,i,g,p,{noSelect:!0}),M.hasText(o)&&(p("texttemplate"),a(f,o,g,p,{noSelect:!0}));var c=(o.line||{}).color,b=(o.marker||{}).color;p("surfaceaxis")>=0&&p("surfacecolor",c||b);for(var l=["x","y","z"],_=0;_<3;++_){var s="projection."+l[_];p(s+".show")&&(p(s+".opacity"),p(s+".scale"))}var A=w.getComponentMethod("errorbars","supplyDefaults");A(f,o,c||b||i,{axis:"z"}),A(f,o,c||b||i,{axis:"y",inherit:"z"}),A(f,o,c||b||i,{axis:"x",inherit:"z"})};function r(t,f,o,i){var g=0,p=o("x"),y=o("y"),c=o("z"),b=w.getComponentMethod("calendars","handleTraceDefaults");return b(t,f,["x","y","z"],i),p&&y&&c&&(g=Math.min(p.length,y.length,c.length),f._length=f._xlength=f._ylength=f._zlength=g),g}},{"../../lib":503,"../../registry":638,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":955}],960:[function(d,ne,ae){ne.exports={plot:d("./convert"),attributes:d("./attributes"),markerSymbols:d("../../constants/gl3d_markers"),supplyDefaults:d("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:d("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:d("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":477,"../../plots/gl3d":598,"./attributes":955,"./calc":956,"./convert":958,"./defaults":959}],961:[function(d,ne,ae){var w=d("../scatter/attributes"),v=d("../../plots/attributes"),M=d("../../plots/template_attributes").hovertemplateAttrs,T=d("../../plots/template_attributes").texttemplateAttrs,e=d("../../components/colorscale/attributes"),a=d("../../lib/extend").extendFlat,n=w.marker,r=w.line,t=n.line;ne.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:a({},w.mode,{dflt:"markers"}),text:a({},w.text,{}),texttemplate:T({editType:"plot"},{keys:["a","b","text"]}),hovertext:a({},w.hovertext,{}),line:{color:r.color,width:r.width,dash:r.dash,shape:a({},r.shape,{values:["linear","spline"]}),smoothing:r.smoothing,editType:"calc"},connectgaps:w.connectgaps,fill:a({},w.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:w.fillcolor,marker:a({symbol:n.symbol,opacity:n.opacity,maxdisplayed:n.maxdisplayed,size:n.size,sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,line:a({width:t.width,editType:"calc"},e("marker.line")),gradient:n.gradient,editType:"calc"},e("marker")),textfont:w.textfont,textposition:w.textposition,selected:w.selected,unselected:w.unselected,hoverinfo:a({},v.hoverinfo,{flags:["a","b","text","name"]}),hoveron:w.hoveron,hovertemplate:M()}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],962:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("../scatter/colorscale_calc"),M=d("../scatter/arrays_to_calcdata"),T=d("../scatter/calc_selection"),e=d("../scatter/calc").calcMarkerSize,a=d("../carpet/lookup_carpetid");ne.exports=function(r,t){var f=t._carpetTrace=a(r,t);if(!(!f||!f.visible||f.visible==="legendonly")){var o;t.xaxis=f.xaxis,t.yaxis=f.yaxis;var i=t._length,g=new Array(i),p,y,c=!1;for(o=0;o<i;o++)if(p=t.a[o],y=t.b[o],w(p)&&w(y)){var b=f.ab2xy(+p,+y,!0),l=f.isVisible(+p,+y);l||(c=!0),g[o]={x:b[0],y:b[1],a:p,b:y,vis:l}}else g[o]={x:!1,y:!1};return t._needsCull=c,g[0].carpet=f,g[0].trace=t,e(t,i),v(r,t),M(g,t),T(g,t),g}}},{"../carpet/lookup_carpetid":708,"../scatter/arrays_to_calcdata":926,"../scatter/calc":928,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],963:[function(d,ne,ae){var w=d("../../lib"),v=d("../scatter/constants"),M=d("../scatter/subtypes"),T=d("../scatter/marker_defaults"),e=d("../scatter/line_defaults"),a=d("../scatter/line_shape_defaults"),n=d("../scatter/text_defaults"),r=d("../scatter/fillcolor_defaults"),t=d("./attributes");ne.exports=function(o,i,g,p){function y(m,h){return w.coerce(o,i,t,m,h)}y("carpet"),i.xaxis="x",i.yaxis="y";var c=y("a"),b=y("b"),l=Math.min(c.length,b.length);if(!l){i.visible=!1;return}i._length=l,y("text"),y("texttemplate"),y("hovertext");var _=l<v.PTS_LINESONLY?"lines+markers":"lines";y("mode",_),M.hasLines(i)&&(e(o,i,g,p,y),a(o,i,y),y("connectgaps")),M.hasMarkers(i)&&T(o,i,g,p,y,{gradient:!0}),M.hasText(i)&&n(o,i,p,y);var s=[];(M.hasMarkers(i)||M.hasText(i))&&(y("marker.maxdisplayed"),s.push("points")),y("fill"),i.fill!=="none"&&(r(o,i,g,y),M.hasLines(i)||a(o,i,y)),(i.fill==="tonext"||i.fill==="toself")&&s.push("fills");var A=y("hoveron",s.join("+")||"points");A!=="fills"&&y("hovertemplate"),w.coerceSelectionMarkerOpacity(i,y)}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/line_shape_defaults":942,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":961}],964:[function(d,ne,ae){ne.exports=function(v,M,T,e,a){var n=e[a];return v.a=n.a,v.b=n.b,v.y=n.y,v}},{}],965:[function(d,ne,ae){ne.exports=function(v,M){var T={},e=M._carpet,a=e.ab2ij([v.a,v.b]),n=Math.floor(a[0]),r=a[0]-n,t=Math.floor(a[1]),f=a[1]-t,o=e.evalxy([],n,t,r,f);return T.yLabel=o[1].toFixed(3),T}},{}],966:[function(d,ne,ae){var w=d("../scatter/hover"),v=d("../../lib").fillText;ne.exports=function(T,e,a,n){var r=w(T,e,a,n);if(!r||r[0].index===!1)return;var t=r[0];if(t.index===void 0){var f=1-t.y0/T.ya._length,o=T.xa._length,i=o*f/2,g=o-i;return t.x0=Math.max(Math.min(t.x0,g),i),t.x1=Math.max(Math.min(t.x1,g),i),r}var p=t.cd[t.index];t.a=p.a,t.b=p.b,t.xLabelVal=void 0,t.yLabelVal=void 0;var y=t.trace,c=y._carpet,b=y._module.formatLabels(p,y);t.yLabel=b.yLabel,delete t.text;var l=[];function _(m,h){var x;m.labelprefix&&m.labelprefix.length>0?x=m.labelprefix.replace(/ = $/,""):x=m._hovertitle,l.push(x+": "+h.toFixed(3)+m.labelsuffix)}if(!y.hovertemplate){var s=p.hi||y.hoverinfo,A=s.split("+");A.indexOf("all")!==-1&&(A=["a","b","text"]),A.indexOf("a")!==-1&&_(c.aaxis,p.a),A.indexOf("b")!==-1&&_(c.baxis,p.b),l.push("y: "+t.yLabel),A.indexOf("text")!==-1&&v(p,y,l),t.extraText=l.join("<br>")}return r}},{"../../lib":503,"../scatter/hover":938}],967:[function(d,ne,ae){ne.exports={attributes:d("./attributes"),supplyDefaults:d("./defaults"),colorbar:d("../scatter/marker_colorbar"),formatLabels:d("./format_labels"),calc:d("./calc"),plot:d("./plot"),style:d("../scatter/style").style,styleOnSelect:d("../scatter/style").styleOnSelect,hoverPoints:d("./hover"),selectPoints:d("../scatter/select"),eventData:d("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:d("../../plots/cartesian"),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../scatter/marker_colorbar":945,"../scatter/select":949,"../scatter/style":951,"./attributes":961,"./calc":962,"./defaults":963,"./event_data":964,"./format_labels":965,"./hover":966,"./plot":968}],968:[function(d,ne,ae){var w=d("../scatter/plot"),v=d("../../plots/cartesian/axes"),M=d("../../components/drawing");ne.exports=function(e,a,n,r){var t,f,o,i=n[0][0].carpet,g={xaxis:v.getFromId(e,i.xaxis||"x"),yaxis:v.getFromId(e,i.yaxis||"y"),plot:a.plot};for(w(e,g,n,r),t=0;t<n.length;t++)f=n[t][0].trace,o=r.selectAll("g.trace"+f.uid+" .js-line"),M.setClipUrl(o,n[t][0].carpet._clipPathId,e)}},{"../../components/drawing":388,"../../plots/cartesian/axes":554,"../scatter/plot":948}],969:[function(d,ne,ae){var w=d("../../plots/template_attributes").hovertemplateAttrs,v=d("../../plots/template_attributes").texttemplateAttrs,M=d("../scatter/attributes"),T=d("../../plots/attributes"),e=d("../../components/colorscale/attributes"),a=d("../../components/drawing/attributes").dash,n=d("../../lib/extend").extendFlat,r=d("../../plot_api/edit_types").overrideAll,t=M.marker,f=M.line,o=t.line;ne.exports=r({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:n({},M.mode,{dflt:"markers"}),text:n({},M.text,{}),texttemplate:v({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:n({},M.hovertext,{}),textfont:M.textfont,textposition:M.textposition,line:{color:f.color,width:f.width,dash:a},connectgaps:M.connectgaps,marker:n({symbol:t.symbol,opacity:t.opacity,size:t.size,sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,colorbar:t.colorbar,line:n({width:o.width},e("marker.line")),gradient:t.gradient},e("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:M.fillcolor,selected:M.selected,unselected:M.unselected,hoverinfo:n({},T.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:w()},"calc","nested")},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],970:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("../../constants/numerical").BADNUM,M=d("../scatter/colorscale_calc"),T=d("../scatter/arrays_to_calcdata"),e=d("../scatter/calc_selection"),a=d("../../lib")._;function n(r){return r&&typeof r=="string"}ne.exports=function(t,f){var o=Array.isArray(f.locations),i=o?f.locations.length:f._length,g=new Array(i),p;f.geojson?p=function(s){return n(s)||w(s)}:p=n;for(var y=0;y<i;y++){var c=g[y]={};if(o){var b=f.locations[y];c.loc=p(b)?b:null}else{var l=f.lon[y],_=f.lat[y];w(l)&&w(_)?c.lonlat=[+l,+_]:c.lonlat=[v,v]}}return T(g,f),M(t,f),e(g,f),i&&(g[0].t={labels:{lat:a(t,"lat:")+" ",lon:a(t,"lon:")+" "}}),g}},{"../../constants/numerical":479,"../../lib":503,"../scatter/arrays_to_calcdata":926,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],971:[function(d,ne,ae){var w=d("../../lib"),v=d("../scatter/subtypes"),M=d("../scatter/marker_defaults"),T=d("../scatter/line_defaults"),e=d("../scatter/text_defaults"),a=d("../scatter/fillcolor_defaults"),n=d("./attributes");ne.exports=function(t,f,o,i){function g(A,m){return w.coerce(t,f,n,A,m)}var p=g("locations"),y;if(p&&p.length){var c=g("geojson"),b;(typeof c=="string"&&c!==""||w.isPlainObject(c))&&(b="geojson-id");var l=g("locationmode",b);l==="geojson-id"&&g("featureidkey"),y=p.length}else{var _=g("lon")||[],s=g("lat")||[];y=Math.min(_.length,s.length)}if(!y){f.visible=!1;return}f._length=y,g("text"),g("hovertext"),g("hovertemplate"),g("mode"),v.hasLines(f)&&(T(t,f,o,i,g),g("connectgaps")),v.hasMarkers(f)&&M(t,f,o,i,g,{gradient:!0}),v.hasText(f)&&(g("texttemplate"),e(t,f,i,g)),g("fill"),f.fill!=="none"&&a(t,f,o,g),w.coerceSelectionMarkerOpacity(f,g)}},{"../../lib":503,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":969}],972:[function(d,ne,ae){ne.exports=function(v,M,T,e,a){v.lon=M.lon,v.lat=M.lat,v.location=M.loc?M.loc:null;var n=e[a];return n.fIn&&n.fIn.properties&&(v.properties=n.fIn.properties),v}},{}],973:[function(d,ne,ae){var w=d("../../plots/cartesian/axes");ne.exports=function(M,T,e){var a={},n=e[T.geo]._subplot,r=n.mockAxis,t=M.lonlat;return a.lonLabel=w.tickText(r,r.c2l(t[0]),!0).text,a.latLabel=w.tickText(r,r.c2l(t[1]),!0).text,a}},{"../../plots/cartesian/axes":554}],974:[function(d,ne,ae){var w=d("../../components/fx"),v=d("../../constants/numerical").BADNUM,M=d("../scatter/get_trace_color"),T=d("../../lib").fillText,e=d("./attributes");ne.exports=function(r,t,f){var o=r.cd,i=o[0].trace,g=r.xa,p=r.ya,y=r.subplot,c=y.projection.isLonLatOverEdges,b=y.project;function l(u){var L=u.lonlat;if(L[0]===v||c(L))return 1/0;var S=b(L),k=b([t,f]),P=Math.abs(S[0]-k[0]),z=Math.abs(S[1]-k[1]),I=Math.max(3,u.mrc||0);return Math.max(Math.sqrt(P*P+z*z)-I,1-3/I)}if(w.getClosest(o,l,r),r.index!==!1){var _=o[r.index],s=_.lonlat,A=[g.c2p(s),p.c2p(s)],m=_.mrc||1;r.x0=A[0]-m,r.x1=A[0]+m,r.y0=A[1]-m,r.y1=A[1]+m,r.loc=_.loc,r.lon=s[0],r.lat=s[1];var h={};h[i.geo]={_subplot:y};var x=i._module.formatLabels(_,i,h);return r.lonLabel=x.lonLabel,r.latLabel=x.latLabel,r.color=M(i,_),r.extraText=a(i,_,r,o[0].t.labels),r.hovertemplate=i.hovertemplate,[r]}};function a(n,r,t,f){if(n.hovertemplate)return;var o=r.hi||n.hoverinfo,i=o==="all"?e.hoverinfo.flags:o.split("+"),g=i.indexOf("location")!==-1&&Array.isArray(n.locations),p=i.indexOf("lon")!==-1,y=i.indexOf("lat")!==-1,c=i.indexOf("text")!==-1,b=[];function l(_){return _+"\xB0"}return g?b.push(r.loc):p&&y?b.push("("+l(t.latLabel)+", "+l(t.lonLabel)+")"):p?b.push(f.lon+l(t.lonLabel)):y&&b.push(f.lat+l(t.latLabel)),c&&T(r,n,b),b.join("<br>")}},{"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../scatter/get_trace_color":937,"./attributes":969}],975:[function(d,ne,ae){ne.exports={attributes:d("./attributes"),supplyDefaults:d("./defaults"),colorbar:d("../scatter/marker_colorbar"),formatLabels:d("./format_labels"),calc:d("./calc"),calcGeoJSON:d("./plot").calcGeoJSON,plot:d("./plot").plot,style:d("./style"),styleOnSelect:d("../scatter/style").styleOnSelect,hoverPoints:d("./hover"),eventData:d("./event_data"),selectPoints:d("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:d("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":589,"../scatter/marker_colorbar":945,"../scatter/style":951,"./attributes":969,"./calc":970,"./defaults":971,"./event_data":972,"./format_labels":973,"./hover":974,"./plot":976,"./select":977,"./style":978}],976:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../lib"),M=d("../../lib/topojson_utils").getTopojsonFeatures,T=d("../../lib/geojson_utils"),e=d("../../lib/geo_location_utils"),a=d("../../plots/cartesian/autorange").findExtremes,n=d("../../constants/numerical").BADNUM,r=d("../scatter/calc").calcMarkerSize,t=d("../scatter/subtypes"),f=d("./style");function o(g,p,y){var c=p.layers.frontplot.select(".scatterlayer"),b=v.makeTraceGroups(c,y,"trace scattergeo");function l(_,s){_.lonlat[0]===n&&w.select(s).remove()}b.selectAll("*").remove(),b.each(function(_){var s=w.select(this),A=_[0].trace;if(t.hasLines(A)||A.fill!=="none"){var m=T.calcTraceToLineCoords(_),h=A.fill!=="none"?T.makePolygon(m):T.makeLine(m);s.selectAll("path.js-line").data([{geojson:h,trace:A}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}t.hasMarkers(A)&&s.selectAll("path.point").data(v.identity).enter().append("path").classed("point",!0).each(function(x){l(x,this)}),t.hasText(A)&&s.selectAll("g").data(v.identity).enter().append("g").append("text").each(function(x){l(x,this)}),f(g,_)})}function i(g,p){var y=g[0].trace,c=p[y.geo],b=c._subplot,l=y._length,_,s;if(Array.isArray(y.locations)){var A=y.locationmode,m=A==="geojson-id"?e.extractTraceFeature(g):M(y,b.topojson);for(_=0;_<l;_++){s=g[_];var h=A==="geojson-id"?s.fOut:e.locationToFeature(A,s.loc,m);s.lonlat=h?h.properties.ct:[n,n]}}var x={padded:!0},u,L;if(c.fitbounds==="geojson"&&y.locationmode==="geojson-id"){var S=e.computeBbox(e.getTraceGeojson(y));u=[S[0],S[2]],L=[S[1],S[3]]}else{for(u=new Array(l),L=new Array(l),_=0;_<l;_++)s=g[_],u[_]=s.lonlat[0],L[_]=s.lonlat[1];x.ppad=r(y,l)}y._extremes.lon=a(c.lonaxis._ax,u,x),y._extremes.lat=a(c.lataxis._ax,L,x)}ne.exports={calcGeoJSON:i,plot:o}},{"../../constants/numerical":479,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/geojson_utils":497,"../../lib/topojson_utils":532,"../../plots/cartesian/autorange":553,"../scatter/calc":928,"../scatter/subtypes":952,"./style":978,"@plotly/d3":58}],977:[function(d,ne,ae){var w=d("../scatter/subtypes"),v=d("../../constants/numerical").BADNUM;ne.exports=function(T,e){var a=T.cd,n=T.xaxis,r=T.yaxis,t=[],f=a[0].trace,o,i,g,p,y,c=!w.hasMarkers(f)&&!w.hasText(f);if(c)return[];if(e===!1)for(y=0;y<a.length;y++)a[y].selected=0;else for(y=0;y<a.length;y++)o=a[y],i=o.lonlat,i[0]!==v&&(g=n.c2p(i),p=r.c2p(i),e.contains([g,p],null,y,T)?(t.push({pointNumber:y,lon:i[0],lat:i[1]}),o.selected=1):o.selected=0);return t}},{"../../constants/numerical":479,"../scatter/subtypes":952}],978:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../components/drawing"),M=d("../../components/color"),T=d("../scatter/style"),e=T.stylePoints,a=T.styleText;ne.exports=function(t,f){f&&n(t,f)};function n(r,t){var f=t[0].trace,o=t[0].node3;o.style("opacity",t[0].trace.opacity),e(o,f,r),a(o,f,r),o.selectAll("path.js-line").style("fill","none").each(function(i){var g=w.select(this),p=i.trace,y=p.line||{};g.call(M.stroke,y.color).call(v.dashLine,y.dash||"",y.width||0),p.fill!=="none"&&g.call(M.fill,p.fillcolor)})}},{"../../components/color":366,"../../components/drawing":388,"../scatter/style":951,"@plotly/d3":58}],979:[function(d,ne,ae){var w=d("../../plots/attributes"),v=d("../scatter/attributes"),M=d("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=d("../../components/colorscale/attributes"),e=d("../../lib/sort_object_keys"),a=d("../../lib/extend").extendFlat,n=d("../../plot_api/edit_types").overrideAll,r=d("./constants").DASHES,t=v.line,f=v.marker,o=f.line,i=ne.exports=n({x:v.x,x0:v.x0,dx:v.dx,y:v.y,y0:v.y0,dy:v.dy,xperiod:v.xperiod,yperiod:v.yperiod,xperiod0:v.xperiod0,yperiod0:v.yperiod0,xperiodalignment:v.xperiodalignment,yperiodalignment:v.yperiodalignment,xhoverformat:M("x"),yhoverformat:M("y"),text:v.text,hovertext:v.hovertext,textposition:v.textposition,textfont:v.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:t.color,width:t.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:e(r),dflt:"solid"}},marker:a({},T("marker"),{symbol:f.symbol,size:f.size,sizeref:f.sizeref,sizemin:f.sizemin,sizemode:f.sizemode,opacity:f.opacity,colorbar:f.colorbar,line:a({},T("marker.line"),{width:o.width})}),connectgaps:v.connectgaps,fill:a({},v.fill,{dflt:"none"}),fillcolor:v.fillcolor,selected:{marker:v.selected.marker,textfont:v.selected.textfont},unselected:{marker:v.unselected.marker,textfont:v.unselected.textfont},opacity:w.opacity},"calc","nested");i.x.editType=i.y.editType=i.x0.editType=i.y0.editType="calc+clearAxisTypes",i.hovertemplate=v.hovertemplate,i.texttemplate=v.texttemplate},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../scatter/attributes":927,"./constants":982}],980:[function(d,ne,ae){var w=d("./hover");ne.exports={moduleType:"trace",name:"scattergl",basePlotModule:d("../../plots/cartesian"),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:d("./attributes"),supplyDefaults:d("./defaults"),crossTraceDefaults:d("../scatter/cross_trace_defaults"),colorbar:d("../scatter/marker_colorbar"),formatLabels:d("./format_labels"),calc:d("./calc"),hoverPoints:w.hoverPoints,selectPoints:d("./select"),meta:{}}},{"../../plots/cartesian":568,"../scatter/cross_trace_defaults":933,"../scatter/marker_colorbar":945,"./attributes":979,"./calc":981,"./defaults":984,"./format_labels":986,"./hover":988,"./select":992}],981:[function(d,ne,ae){var w=d("@plotly/point-cluster"),v=d("../../lib"),M=d("../../plots/cartesian/axis_ids"),T=d("../../plots/cartesian/autorange").findExtremes,e=d("../../plots/cartesian/align_period"),a=d("../scatter/calc"),n=a.calcMarkerSize,r=a.calcAxisExpansion,t=a.setFirstScatter,f=d("../scatter/colorscale_calc"),o=d("./convert"),i=d("./scene_update"),g=d("../../constants/numerical").BADNUM,p=d("./constants").TOO_MANY_POINTS;ne.exports=function(l,_){var s=l._fullLayout,A=M.getFromId(l,_.xaxis),m=M.getFromId(l,_.yaxis),h=s._plots[_.xaxis+_.yaxis],x=_._length,u=x>=p,L=x*2,S={},k,P=A.makeCalcdata(_,"x"),z=m.makeCalcdata(_,"y"),I=e(_,A,"x",P),D=e(_,m,"y",z),R=I.vals,O=D.vals;_._x=R,_._y=O,_.xperiodalignment&&(_._origX=P,_._xStarts=I.starts,_._xEnds=I.ends),_.yperiodalignment&&(_._origY=z,_._yStarts=D.starts,_._yEnds=D.ends);var F=new Array(L),V=new Array(x);for(k=0;k<x;k++)F[k*2]=R[k]===g?NaN:R[k],F[k*2+1]=O[k]===g?NaN:O[k],V[k]=k;if(A.type==="log")for(k=0;k<L;k+=2)F[k]=A.c2l(F[k]);if(m.type==="log")for(k=1;k<L;k+=2)F[k]=m.c2l(F[k]);u&&A.type!=="log"&&m.type!=="log"?S.tree=w(F):S.ids=V,f(l,_);var G=c(l,h,_,F,R,O),J=i(l,h);t(s,_);var Z;return u?G.marker&&(Z=G.marker.sizeAvg||Math.max(G.marker.size,3)):Z=n(_,x),r(l,_,A,m,R,O,Z),G.errorX&&y(_,A,G.errorX),G.errorY&&y(_,m,G.errorY),G.fill&&!J.fill2d&&(J.fill2d=!0),G.marker&&!J.scatter2d&&(J.scatter2d=!0),G.line&&!J.line2d&&(J.line2d=!0),(G.errorX||G.errorY)&&!J.error2d&&(J.error2d=!0),G.text&&!J.glText&&(J.glText=!0),G.marker&&(G.marker.snap=x),J.lineOptions.push(G.line),J.errorXOptions.push(G.errorX),J.errorYOptions.push(G.errorY),J.fillOptions.push(G.fill),J.markerOptions.push(G.marker),J.markerSelectedOptions.push(G.markerSel),J.markerUnselectedOptions.push(G.markerUnsel),J.textOptions.push(G.text),J.textSelectedOptions.push(G.textSel),J.textUnselectedOptions.push(G.textUnsel),J.selectBatch.push([]),J.unselectBatch.push([]),S._scene=J,S.index=J.count,S.x=R,S.y=O,S.positions=F,J.count++,[{x:!1,y:!1,t:S,trace:_}]};function y(b,l,_){var s=b._extremes[l._id],A=T(l,_._bnds,{padded:!0});s.min=s.min.concat(A.min),s.max=s.max.concat(A.max)}function c(b,l,_,s,A,m){var h=o.style(b,_);if(h.marker&&(h.marker.positions=s),h.line&&s.length>1&&v.extendFlat(h.line,o.linePositions(b,_,s)),h.errorX||h.errorY){var x=o.errorBarPositions(b,_,s,A,m);h.errorX&&v.extendFlat(h.errorX,x.x),h.errorY&&v.extendFlat(h.errorY,x.y)}return h.text&&(v.extendFlat(h.text,{positions:s},o.textPosition(b,_,h.text,h.marker)),v.extendFlat(h.textSel,{positions:s},o.textPosition(b,_,h.text,h.markerSel)),v.extendFlat(h.textUnsel,{positions:s},o.textPosition(b,_,h.text,h.markerUnsel))),h}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/autorange":553,"../../plots/cartesian/axis_ids":558,"../scatter/calc":928,"../scatter/colorscale_calc":930,"./constants":982,"./convert":983,"./scene_update":991,"@plotly/point-cluster":59}],982:[function(d,ne,ae){var w=20;ne.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:w,SYMBOL_STROKE:w/20,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],983:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("svg-path-sdf"),M=d("color-normalize"),T=d("../../registry"),e=d("../../lib"),a=d("../../components/drawing"),n=d("../../plots/cartesian/axis_ids"),r=d("../../lib/gl_format_color").formatColor,t=d("../scatter/subtypes"),f=d("../scatter/make_bubble_size_func"),o=d("./helpers"),i=d("./constants"),g=d("../../constants/interactions").DESELECTDIM,p={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},y=d("../../components/fx/helpers").appendArrayPointValue;function c(I,D){var R,O={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},F=I._context.plotGlPixelRatio;if(D.visible!==!0)return O;if(t.hasText(D)&&(O.text=b(I,D),O.textSel=s(I,D,D.selected),O.textUnsel=s(I,D,D.unselected)),t.hasMarkers(D)&&(O.marker=l(D),O.markerSel=_(D,D.selected),O.markerUnsel=_(D,D.unselected),!D.unselected&&e.isArrayOrTypedArray(D.marker.opacity))){var V=D.marker.opacity;for(O.markerUnsel.opacity=new Array(V.length),R=0;R<V.length;R++)O.markerUnsel.opacity[R]=g*V[R]}if(t.hasLines(D)){O.line={overlay:!0,thickness:D.line.width*F,color:D.line.color,opacity:D.opacity};var G=(i.DASHES[D.line.dash]||[1]).slice();for(R=0;R<G.length;++R)G[R]*=D.line.width*F;O.line.dashes=G}return D.error_x&&D.error_x.visible&&(O.errorX=A(D,D.error_x,F)),D.error_y&&D.error_y.visible&&(O.errorY=A(D,D.error_y,F)),!!D.fill&&D.fill!=="none"&&(O.fill={closed:!0,fill:D.fillcolor,thickness:0}),O}function b(I,D){var R=I._fullLayout,O=D._length,F=D.textfont,V=D.textposition,G=Array.isArray(V)?V:[V],J=F.color,Z=F.size,Y=F.family,j={},re,se=I._context.plotGlPixelRatio,oe=D.texttemplate;if(oe){j.text=[];var N=R._d3locale,U=Array.isArray(oe),q=U?Math.min(oe.length,O):O,Q=U?function(ge){return oe[ge]}:function(){return oe};for(re=0;re<q;re++){var W={i:re},X=D._module.formatLabels(W,D,R),ee={};y(ee,D,re);var te=D._meta||{};j.text.push(e.texttemplateString(Q(re),X,N,ee,W,te))}}else Array.isArray(D.text)&&D.text.length<O?j.text=D.text.slice():j.text=D.text;if(Array.isArray(j.text))for(re=j.text.length;re<O;re++)j.text[re]="";for(j.opacity=D.opacity,j.font={},j.align=[],j.baseline=[],re=0;re<G.length;re++){var ie=G[re].split(/\s+/);switch(ie[1]){case"left":j.align.push("right");break;case"right":j.align.push("left");break;default:j.align.push(ie[1])}switch(ie[0]){case"top":j.baseline.push("bottom");break;case"bottom":j.baseline.push("top");break;default:j.baseline.push(ie[0])}}if(Array.isArray(J))for(j.color=new Array(O),re=0;re<O;re++)j.color[re]=J[re];else j.color=J;if(e.isArrayOrTypedArray(Z)||Array.isArray(Y))for(j.font=new Array(O),re=0;re<O;re++){var le=j.font[re]={};le.size=(e.isTypedArray(Z)?Z[re]:Array.isArray(Z)?w(Z[re])?Z[re]:0:Z)*se,le.family=Array.isArray(Y)?Y[re]:Y}else j.font={size:Z*se,family:Y};return j}function l(I){var D=I._length,R=I.marker,O={},F,V=e.isArrayOrTypedArray(R.symbol),G=e.isArrayOrTypedArray(R.color),J=e.isArrayOrTypedArray(R.line.color),Z=e.isArrayOrTypedArray(R.opacity),Y=e.isArrayOrTypedArray(R.size),j=e.isArrayOrTypedArray(R.line.width),re;if(V||(re=o.isOpenSymbol(R.symbol)),V||G||J||Z){O.colors=new Array(D),O.borderColors=new Array(D);var se=r(R,R.opacity,D),oe=r(R.line,R.opacity,D);if(!Array.isArray(oe[0])){var N=oe;for(oe=Array(D),F=0;F<D;F++)oe[F]=N}if(!Array.isArray(se[0])){var U=se;for(se=Array(D),F=0;F<D;F++)se[F]=U}for(O.colors=se,O.borderColors=oe,F=0;F<D;F++){if(V){var q=R.symbol[F];re=o.isOpenSymbol(q)}re&&(oe[F]=se[F].slice(),se[F]=se[F].slice(),se[F][3]=0)}O.opacity=I.opacity}else re?(O.color=M(R.color,"uint8"),O.color[3]=0,O.borderColor=M(R.color,"uint8")):(O.color=M(R.color,"uint8"),O.borderColor=M(R.line.color,"uint8")),O.opacity=I.opacity*R.opacity;if(V)for(O.markers=new Array(D),F=0;F<D;F++)O.markers[F]=S(R.symbol[F]);else O.marker=S(R.symbol);var Q=1,W=f(I,Q),X;if(Y||j){var ee=O.sizes=new Array(D),te=O.borderSizes=new Array(D),ie=0,le;if(Y){for(F=0;F<D;F++)ee[F]=W(R.size[F]),ie+=ee[F];le=ie/D}else for(X=W(R.size),F=0;F<D;F++)ee[F]=X;if(j)for(F=0;F<D;F++)te[F]=R.line.width[F];else for(X=R.line.width,F=0;F<D;F++)te[F]=X;O.sizeAvg=le}else O.size=W(R&&R.size||10),O.borderSizes=W(R.line.width);return O}function _(I,D){var R=I.marker,O={};return D&&(D.marker&&D.marker.symbol?O=l(e.extendFlat({},R,D.marker)):D.marker&&(D.marker.size&&(O.size=D.marker.size),D.marker.color&&(O.colors=D.marker.color),D.marker.opacity!==void 0&&(O.opacity=D.marker.opacity))),O}function s(I,D,R){var O={};if(!R)return O;if(R.textfont){var F={opacity:1,text:D.text,texttemplate:D.texttemplate,textposition:D.textposition,textfont:e.extendFlat({},D.textfont)};R.textfont&&e.extendFlat(F.textfont,R.textfont),O=b(I,F)}return O}function A(I,D,R){var O={capSize:D.width*2*R,lineWidth:D.thickness*R,color:D.color};return D.copy_ystyle&&(O=I.error_y),O}var m=i.SYMBOL_SDF_SIZE,h=i.SYMBOL_SIZE,x=i.SYMBOL_STROKE,u={},L=a.symbolFuncs[0](h*.05);function S(I){if(I==="circle")return null;var D,R,O=a.symbolNumber(I),F=a.symbolFuncs[O%100],V=!!a.symbolNoDot[O%100],G=!!a.symbolNoFill[O%100],J=o.isDotSymbol(I);return u[I]?u[I]:(J&&!V?D=F(h*1.1)+L:D=F(h),R=v(D,{w:m,h:m,viewBox:[-h,-h,h,h],stroke:G?x:-x}),u[I]=R,R||null)}function k(I,D,R){var O=R.length,F=O/2,V,G;if(t.hasLines(D)&&F)if(D.line.shape==="hv"){for(V=[],G=0;G<F-1;G++)isNaN(R[G*2])||isNaN(R[G*2+1])?V.push(NaN,NaN,NaN,NaN):(V.push(R[G*2],R[G*2+1]),!isNaN(R[G*2+2])&&!isNaN(R[G*2+3])?V.push(R[G*2+2],R[G*2+1]):V.push(NaN,NaN));V.push(R[O-2],R[O-1])}else if(D.line.shape==="hvh"){for(V=[],G=0;G<F-1;G++)if(isNaN(R[G*2])||isNaN(R[G*2+1])||isNaN(R[G*2+2])||isNaN(R[G*2+3]))!isNaN(R[G*2])&&!isNaN(R[G*2+1])?V.push(R[G*2],R[G*2+1]):V.push(NaN,NaN),V.push(NaN,NaN);else{var J=(R[G*2]+R[G*2+2])/2;V.push(R[G*2],R[G*2+1],J,R[G*2+1],J,R[G*2+3])}V.push(R[O-2],R[O-1])}else if(D.line.shape==="vhv"){for(V=[],G=0;G<F-1;G++)if(isNaN(R[G*2])||isNaN(R[G*2+1])||isNaN(R[G*2+2])||isNaN(R[G*2+3]))!isNaN(R[G*2])&&!isNaN(R[G*2+1])?V.push(R[G*2],R[G*2+1]):V.push(NaN,NaN),V.push(NaN,NaN);else{var Z=(R[G*2+1]+R[G*2+3])/2;V.push(R[G*2],R[G*2+1],R[G*2],Z,R[G*2+2],Z)}V.push(R[O-2],R[O-1])}else if(D.line.shape==="vh"){for(V=[],G=0;G<F-1;G++)isNaN(R[G*2])||isNaN(R[G*2+1])?V.push(NaN,NaN,NaN,NaN):(V.push(R[G*2],R[G*2+1]),!isNaN(R[G*2+2])&&!isNaN(R[G*2+3])?V.push(R[G*2],R[G*2+3]):V.push(NaN,NaN));V.push(R[O-2],R[O-1])}else V=R;var Y=!1;for(G=0;G<V.length;G++)if(isNaN(V[G])){Y=!0;break}var j=Y||V.length>i.TOO_MANY_POINTS||t.hasMarkers(D)?"rect":"round";if(Y&&D.connectgaps){var re=V[0],se=V[1];for(G=0;G<V.length;G+=2)isNaN(V[G])||isNaN(V[G+1])?(V[G]=re,V[G+1]=se):(re=V[G],se=V[G+1])}return{join:j,positions:V}}function P(I,D,R,O,F){var V=T.getComponentMethod("errorbars","makeComputeError"),G=n.getFromId(I,D.xaxis),J=n.getFromId(I,D.yaxis),Z=R.length/2,Y={};function j(re,se){var oe=se._id.charAt(0),N=D["error_"+oe];if(N&&N.visible&&(se.type==="linear"||se.type==="log")){for(var U=V(N),q={x:0,y:1}[oe],Q={x:[0,1,2,3],y:[2,3,0,1]}[oe],W=new Float64Array(4*Z),X=1/0,ee=-1/0,te=0,ie=0;te<Z;te++,ie+=4){var le=re[te];if(w(le)){var ge=R[te*2+q],fe=U(le,te),pe=fe[0],ye=fe[1];if(w(pe)&&w(ye)){var Te=le-pe,_e=le+ye;W[ie+Q[0]]=ge-se.c2l(Te),W[ie+Q[1]]=se.c2l(_e)-ge,W[ie+Q[2]]=0,W[ie+Q[3]]=0,X=Math.min(X,le-pe),ee=Math.max(ee,le+ye)}}}Y[oe]={positions:R,errors:W,_bnds:[X,ee]}}}return j(O,G),j(F,J),Y}function z(I,D,R,O){var F=D._length,V={},G;if(t.hasMarkers(D)){var J=R.font,Z=R.align,Y=R.baseline;for(V.offset=new Array(F),G=0;G<F;G++){var j=O.sizes?O.sizes[G]:O.size,re=Array.isArray(J)?J[G].size:J.size,se=Array.isArray(Z)?Z.length>1?Z[G]:Z[0]:Z,oe=Array.isArray(Y)?Y.length>1?Y[G]:Y[0]:Y,N=p[se],U=p[oe],q=j?j/.8+1:0,Q=-U*q-U*.5;V.offset[G]=[N*q/re,Q/re]}}return V}ne.exports={style:c,markerStyle:l,markerSelection:_,linePositions:k,errorBarPositions:P,textPosition:z}},{"../../components/drawing":388,"../../components/fx/helpers":402,"../../constants/interactions":478,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/cartesian/axis_ids":558,"../../registry":638,"../scatter/make_bubble_size_func":944,"../scatter/subtypes":952,"./constants":982,"./helpers":987,"color-normalize":89,"fast-isnumeric":190,"svg-path-sdf":310}],984:[function(d,ne,ae){var w=d("../../lib"),v=d("../../registry"),M=d("./helpers"),T=d("./attributes"),e=d("../scatter/constants"),a=d("../scatter/subtypes"),n=d("../scatter/xy_defaults"),r=d("../scatter/period_defaults"),t=d("../scatter/marker_defaults"),f=d("../scatter/line_defaults"),o=d("../scatter/fillcolor_defaults"),i=d("../scatter/text_defaults");ne.exports=function(p,y,c,b){function l(L,S){return w.coerce(p,y,T,L,S)}var _=p.marker?M.isOpenSymbol(p.marker.symbol):!1,s=a.isBubble(p),A=n(p,y,b,l);if(!A){y.visible=!1;return}r(p,y,b,l),l("xhoverformat"),l("yhoverformat");var m=A<e.PTS_LINESONLY?"lines+markers":"lines";l("text"),l("hovertext"),l("hovertemplate"),l("mode",m),a.hasLines(y)&&(l("connectgaps"),f(p,y,c,b,l),l("line.shape")),a.hasMarkers(y)&&(t(p,y,c,b,l),l("marker.line.width",_||s?1:0)),a.hasText(y)&&(l("texttemplate"),i(p,y,b,l));var h=(y.line||{}).color,x=(y.marker||{}).color;l("fill"),y.fill!=="none"&&o(p,y,c,l);var u=v.getComponentMethod("errorbars","supplyDefaults");u(p,y,h||x||c,{axis:"y"}),u(p,y,h||x||c,{axis:"x",inherit:"y"}),w.coerceSelectionMarkerOpacity(y,l)}},{"../../lib":503,"../../registry":638,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/period_defaults":947,"../scatter/subtypes":952,"../scatter/text_defaults":953,"../scatter/xy_defaults":954,"./attributes":979,"./helpers":987}],985:[function(d,ne,ae){var w=d("../../lib"),v=d("../../components/color"),M=d("../../constants/interactions").DESELECTDIM;function T(e){var a=e[0],n=a.trace,r=a.t,t=r._scene,f=r.index,o=t.selectBatch[f],i=t.unselectBatch[f],g=t.textOptions[f],p=t.textSelectedOptions[f]||{},y=t.textUnselectedOptions[f]||{},c=w.extendFlat({},g),b,l;if(o.length||i.length){var _=p.color,s=y.color,A=g.color,m=Array.isArray(A);for(c.color=new Array(n._length),b=0;b<o.length;b++)l=o[b],c.color[l]=_||(m?A[l]:A);for(b=0;b<i.length;b++){l=i[b];var h=m?A[l]:A;c.color[l]=s||(_?h:v.addOpacity(h,M))}}t.glText[f].update(c)}ne.exports={styleTextSelection:T}},{"../../components/color":366,"../../constants/interactions":478,"../../lib":503}],986:[function(d,ne,ae){var w=d("../scatter/format_labels");ne.exports=function(M,T,e){var a=M.i;return"x"in M||(M.x=T._x[a]),"y"in M||(M.y=T._y[a]),w(M,T,e)}},{"../scatter/format_labels":936}],987:[function(d,ne,ae){var w=d("./constants");ae.isOpenSymbol=function(v){return typeof v=="string"?w.OPEN_RE.test(v):v%200>100},ae.isDotSymbol=function(v){return typeof v=="string"?w.DOT_RE.test(v):v>200}},{"./constants":982}],988:[function(d,ne,ae){var w=d("../../registry"),v=d("../../lib"),M=d("../scatter/get_trace_color");function T(a,n,r,t){var f=a.cd,o=f[0].t,i=f[0].trace,g=a.xa,p=a.ya,y=o.x,c=o.y,b=g.c2p(n),l=p.c2p(r),_=a.distance,s;if(o.tree){var A=g.p2c(b-_),m=g.p2c(b+_),h=p.p2c(l-_),x=p.p2c(l+_);t==="x"?s=o.tree.range(Math.min(A,m),Math.min(p._rl[0],p._rl[1]),Math.max(A,m),Math.max(p._rl[0],p._rl[1])):s=o.tree.range(Math.min(A,m),Math.min(h,x),Math.max(A,m),Math.max(h,x))}else s=o.ids;var u,L,S,k,P,z,I,D,R,O=_;if(t==="x"){var F=!!i.xperiodalignment,V=!!i.yperiodalignment;for(P=0;P<s.length;P++){if(u=s[P],S=y[u],z=Math.abs(g.c2p(S)-b),F){var G=g.c2p(i._xStarts[u]),J=g.c2p(i._xEnds[u]);z=b>=Math.min(G,J)&&b<=Math.max(G,J)?0:1/0}if(z<O){if(O=z,k=c[u],I=p.c2p(k)-l,V){var Z=p.c2p(i._yStarts[u]),Y=p.c2p(i._yEnds[u]);I=l>=Math.min(Z,Y)&&l<=Math.max(Z,Y)?0:1/0}R=Math.sqrt(z*z+I*I),L=s[P]}}}else for(P=s.length-1;P>-1;P--)u=s[P],S=y[u],k=c[u],z=g.c2p(S)-b,I=p.c2p(k)-l,D=Math.sqrt(z*z+I*I),D<O&&(O=R=D,L=u);return a.index=L,a.distance=O,a.dxy=R,L===void 0?[a]:[e(a,y,c,i)]}function e(a,n,r,t){var f=a.xa,o=a.ya,i=a.distance,g=a.dxy,p=a.index,y={pointNumber:p,x:n[p],y:r[p]};y.tx=Array.isArray(t.text)?t.text[p]:t.text,y.htx=Array.isArray(t.hovertext)?t.hovertext[p]:t.hovertext,y.data=Array.isArray(t.customdata)?t.customdata[p]:t.customdata,y.tp=Array.isArray(t.textposition)?t.textposition[p]:t.textposition;var c=t.textfont;c&&(y.ts=v.isArrayOrTypedArray(c.size)?c.size[p]:c.size,y.tc=Array.isArray(c.color)?c.color[p]:c.color,y.tf=Array.isArray(c.family)?c.family[p]:c.family);var b=t.marker;b&&(y.ms=v.isArrayOrTypedArray(b.size)?b.size[p]:b.size,y.mo=v.isArrayOrTypedArray(b.opacity)?b.opacity[p]:b.opacity,y.mx=v.isArrayOrTypedArray(b.symbol)?b.symbol[p]:b.symbol,y.mc=v.isArrayOrTypedArray(b.color)?b.color[p]:b.color);var l=b&&b.line;l&&(y.mlc=Array.isArray(l.color)?l.color[p]:l.color,y.mlw=v.isArrayOrTypedArray(l.width)?l.width[p]:l.width);var _=b&&b.gradient;_&&_.type!=="none"&&(y.mgt=Array.isArray(_.type)?_.type[p]:_.type,y.mgc=Array.isArray(_.color)?_.color[p]:_.color);var s=f.c2p(y.x,!0),A=o.c2p(y.y,!0),m=y.mrc||1,h=t.hoverlabel;h&&(y.hbg=Array.isArray(h.bgcolor)?h.bgcolor[p]:h.bgcolor,y.hbc=Array.isArray(h.bordercolor)?h.bordercolor[p]:h.bordercolor,y.hts=v.isArrayOrTypedArray(h.font.size)?h.font.size[p]:h.font.size,y.htc=Array.isArray(h.font.color)?h.font.color[p]:h.font.color,y.htf=Array.isArray(h.font.family)?h.font.family[p]:h.font.family,y.hnl=v.isArrayOrTypedArray(h.namelength)?h.namelength[p]:h.namelength);var x=t.hoverinfo;x&&(y.hi=Array.isArray(x)?x[p]:x);var u=t.hovertemplate;u&&(y.ht=Array.isArray(u)?u[p]:u);var L={};L[a.index]=y;var S=t._origX,k=t._origY,P=v.extendFlat({},a,{color:M(t,y),x0:s-m,x1:s+m,xLabelVal:S?S[p]:y.x,y0:A-m,y1:A+m,yLabelVal:k?k[p]:y.y,cd:L,distance:i,spikeDistance:g,hovertemplate:y.ht});return y.htx?P.text=y.htx:y.tx?P.text=y.tx:t.text&&(P.text=t.text),v.fillText(y,t,P),w.getComponentMethod("errorbars","hoverInfo")(y,t,P),P}ne.exports={hoverPoints:T,calcHover:e}},{"../../lib":503,"../../registry":638,"../scatter/get_trace_color":937}],989:[function(d,ne,ae){arguments[4][896][0].apply(ae,arguments)},{"./base_index":980,"./plot":990,dup:896}],990:[function(d,ne,g){var w=d("regl-scatter2d"),v=d("regl-line2d"),M=d("regl-error2d"),T=d("gl-text"),e=d("../../lib"),a=d("../../components/dragelement/helpers").selectMode,n=d("../../lib/prepare_regl"),r=d("../scatter/subtypes"),t=d("../scatter/link_traces"),f=d("./edit_style").styleTextSelection,o={};function i(p,y,c,b){var l=p._size,_=p.width*b,s=p.height*b,A=l.l*b,m=l.b*b,h=l.r*b,x=l.t*b,u=l.w*b,L=l.h*b;return[A+y.domain[0]*u,m+c.domain[0]*L,_-h-(1-y.domain[1])*u,s-x-(1-c.domain[1])*L]}var g=ne.exports=function(y,c,b){if(!!b.length){var l=y._fullLayout,_=c._scene,s=c.xaxis,A=c.yaxis,m,h;if(!!_){var x=n(y,["ANGLE_instanced_arrays","OES_element_index_uint"],o);if(!x){_.init();return}var u=_.count,L=l._glcanvas.data()[0].regl;if(t(y,c,b),_.dirty){if(_.error2d===!0&&(_.error2d=M(L)),_.line2d===!0&&(_.line2d=v(L)),_.scatter2d===!0&&(_.scatter2d=w(L)),_.fill2d===!0&&(_.fill2d=v(L)),_.glText===!0)for(_.glText=new Array(u),m=0;m<u;m++)_.glText[m]=new T(L);if(_.glText){if(u>_.glText.length){var S=u-_.glText.length;for(m=0;m<S;m++)_.glText.push(new T(L))}else if(u<_.glText.length){var k=_.glText.length-u,P=_.glText.splice(u,k);P.forEach(function(W){W.destroy()})}for(m=0;m<u;m++)_.glText[m].update(_.textOptions[m])}if(_.line2d&&(_.line2d.update(_.lineOptions),_.lineOptions=_.lineOptions.map(function(W){if(W&&W.positions){for(var X=W.positions,ee=0;ee<X.length&&(isNaN(X[ee])||isNaN(X[ee+1]));)ee+=2;for(var te=X.length-2;te>ee&&(isNaN(X[te])||isNaN(X[te+1]));)te-=2;W.positions=X.slice(ee,te+2)}return W}),_.line2d.update(_.lineOptions)),_.error2d){var z=(_.errorXOptions||[]).concat(_.errorYOptions||[]);_.error2d.update(z)}_.scatter2d&&_.scatter2d.update(_.markerOptions),_.fillOrder=e.repeat(null,u),_.fill2d&&(_.fillOptions=_.fillOptions.map(function(W,X){var ee=b[X];if(!(!W||!ee||!ee[0]||!ee[0].trace)){var te=ee[0],ie=te.trace,le=te.t,ge=_.lineOptions[X],fe,pe,ye=[];ie._ownfill&&ye.push(X),ie._nexttrace&&ye.push(X+1),ye.length&&(_.fillOrder[X]=ye);var Te=[],_e=ge&&ge.positions||le.positions,De,Be;if(ie.fill==="tozeroy"){for(De=0;De<_e.length&&isNaN(_e[De+1]);)De+=2;for(Be=_e.length-2;Be>De&&isNaN(_e[Be+1]);)Be-=2;_e[De+1]!==0&&(Te=[_e[De],0]),Te=Te.concat(_e.slice(De,Be+2)),_e[Be+1]!==0&&(Te=Te.concat([_e[Be],0]))}else if(ie.fill==="tozerox"){for(De=0;De<_e.length&&isNaN(_e[De]);)De+=2;for(Be=_e.length-2;Be>De&&isNaN(_e[Be]);)Be-=2;_e[De]!==0&&(Te=[0,_e[De+1]]),Te=Te.concat(_e.slice(De,Be+2)),_e[Be]!==0&&(Te=Te.concat([0,_e[Be+1]]))}else if(ie.fill==="toself"||ie.fill==="tonext"){for(Te=[],fe=0,W.splitNull=!0,pe=0;pe<_e.length;pe+=2)(isNaN(_e[pe])||isNaN(_e[pe+1]))&&(Te=Te.concat(_e.slice(fe,pe)),Te.push(_e[fe],_e[fe+1]),Te.push(null,null),fe=pe+2);Te=Te.concat(_e.slice(fe)),fe&&Te.push(_e[fe],_e[fe+1])}else{var Ue=ie._nexttrace;if(Ue){var xe=_.lineOptions[X+1];if(xe){var Pe=xe.positions;if(ie.fill==="tonexty"){for(Te=_e.slice(),X=Math.floor(Pe.length/2);X--;){var Ve=Pe[X*2],Qe=Pe[X*2+1];isNaN(Ve)||isNaN(Qe)||Te.push(Ve,Qe)}W.fill=Ue.fillcolor}}}}if(ie._prevtrace&&ie._prevtrace.fill==="tonext"){var Fe=_.lineOptions[X-1].positions,Le=Te.length/2;fe=Le;var Ne=[fe];for(pe=0;pe<Fe.length;pe+=2)(isNaN(Fe[pe])||isNaN(Fe[pe+1]))&&(Ne.push(pe/2+Le+1),fe=pe+2);Te=Te.concat(Fe),W.hole=Ne}return W.fillmode=ie.fill,W.opacity=ie.opacity,W.positions=Te,W}}),_.fill2d.update(_.fillOptions))}var I=l.dragmode,D=a(I),R=l.clickmode.indexOf("select")>-1;for(m=0;m<u;m++){var O=b[m][0],F=O.trace,V=O.t,G=V.index,J=F._length,Z=V.x,Y=V.y;if(F.selectedpoints||D||R){if(D||(D=!0),F.selectedpoints){var j=_.selectBatch[G]=e.selIndices2selPoints(F),re={};for(h=0;h<j.length;h++)re[j[h]]=1;var se=[];for(h=0;h<J;h++)re[h]||se.push(h);_.unselectBatch[G]=se}var oe=V.xpx=new Array(J),N=V.ypx=new Array(J);for(h=0;h<J;h++)oe[h]=s.c2p(Z[h]),N[h]=A.c2p(Y[h])}else V.xpx=V.ypx=null}if(D){if(_.select2d||(_.select2d=w(l._glcanvas.data()[1].regl)),_.scatter2d){var U=new Array(u);for(m=0;m<u;m++)U[m]=_.selectBatch[m].length||_.unselectBatch[m].length?_.markerUnselectedOptions[m]:{};_.scatter2d.update(U)}_.select2d&&(_.select2d.update(_.markerOptions),_.select2d.update(_.markerSelectedOptions)),_.glText&&b.forEach(function(W){var X=((W||[])[0]||{}).trace||{};r.hasText(X)&&f(W)})}else _.scatter2d&&_.scatter2d.update(_.markerOptions);var q={viewport:i(l,s,A,y._context.plotGlPixelRatio),range:[(s._rl||s.range)[0],(A._rl||A.range)[0],(s._rl||s.range)[1],(A._rl||A.range)[1]]},Q=e.repeat(q,_.count);_.fill2d&&_.fill2d.update(Q),_.line2d&&_.line2d.update(Q),_.error2d&&_.error2d.update(Q.concat(Q)),_.scatter2d&&_.scatter2d.update(Q),_.select2d&&_.select2d.update(Q),_.glText&&_.glText.forEach(function(W){W.update(q)})}}};g.reglPrecompiled=o},{"../../components/dragelement/helpers":384,"../../lib":503,"../../lib/prepare_regl":516,"../scatter/link_traces":943,"../scatter/subtypes":952,"./edit_style":985,"gl-text":225,"regl-error2d":279,"regl-line2d":280,"regl-scatter2d":281}],991:[function(d,ne,ae){var w=d("../../lib");ne.exports=function(M,T){var e=T._scene,a={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},n={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return T._scene||(e=T._scene={},e.init=function(){w.extendFlat(e,n,a)},e.init(),e.update=function(t){var f=w.repeat(t,e.count);if(e.fill2d&&e.fill2d.update(f),e.scatter2d&&e.scatter2d.update(f),e.line2d&&e.line2d.update(f),e.error2d&&e.error2d.update(f.concat(f)),e.select2d&&e.select2d.update(f),e.glText)for(var o=0;o<e.count;o++)e.glText[o].update(t)},e.draw=function(){for(var t=e.count,f=e.fill2d,o=e.error2d,i=e.line2d,g=e.scatter2d,p=e.glText,y=e.select2d,c=e.selectBatch,b=e.unselectBatch,l=0;l<t;l++){if(f&&e.fillOrder[l]&&f.draw(e.fillOrder[l]),i&&e.lineOptions[l]&&i.draw(l),o&&(e.errorXOptions[l]&&o.draw(l),e.errorYOptions[l]&&o.draw(l+t)),g&&e.markerOptions[l])if(b[l].length){var _=w.repeat([],e.count);_[l]=b[l],g.draw(_)}else c[l].length||g.draw(l);p[l]&&e.textOptions[l]&&p[l].render()}y&&y.draw(c),e.dirty=!1},e.destroy=function(){e.fill2d&&e.fill2d.destroy&&e.fill2d.destroy(),e.scatter2d&&e.scatter2d.destroy&&e.scatter2d.destroy(),e.error2d&&e.error2d.destroy&&e.error2d.destroy(),e.line2d&&e.line2d.destroy&&e.line2d.destroy(),e.select2d&&e.select2d.destroy&&e.select2d.destroy(),e.glText&&e.glText.forEach(function(t){t.destroy&&t.destroy()}),e.lineOptions=null,e.fillOptions=null,e.markerOptions=null,e.markerSelectedOptions=null,e.markerUnselectedOptions=null,e.errorXOptions=null,e.errorYOptions=null,e.textOptions=null,e.textSelectedOptions=null,e.textUnselectedOptions=null,e.selectBatch=null,e.unselectBatch=null,T._scene=null}),e.dirty||w.extendFlat(e,a),e}},{"../../lib":503}],992:[function(d,ne,ae){var w=d("../scatter/subtypes"),v=d("./edit_style").styleTextSelection;ne.exports=function(T,e){var a=T.cd,n=T.xaxis,r=T.yaxis,t=[],f=a[0].trace,o=a[0].t,i=f._length,g=o.x,p=o.y,y=o._scene,c=o.index;if(!y)return t;var b=w.hasText(f),l=w.hasMarkers(f),_=!l&&!b;if(f.visible!==!0||_)return t;var s=[],A=[];if(e!==!1&&!e.degenerate)for(var m=0;m<i;m++)e.contains([o.xpx[m],o.ypx[m]],!1,m,T)?(s.push(m),t.push({pointNumber:m,x:n.c2d(g[m]),y:r.c2d(p[m])})):A.push(m);if(l){var h=y.scatter2d;if(!s.length&&!A.length){var x=new Array(y.count);x[c]=y.markerOptions[c],h.update.apply(h,x)}else if(!y.selectBatch[c].length&&!y.unselectBatch[c].length){var u=new Array(y.count);u[c]=y.markerUnselectedOptions[c],h.update.apply(h,u)}}return y.selectBatch[c]=s,y.unselectBatch[c]=A,b&&v(a),t}},{"../scatter/subtypes":952,"./edit_style":985}],993:[function(d,ne,ae){var w=d("../../plots/template_attributes").hovertemplateAttrs,v=d("../../plots/template_attributes").texttemplateAttrs,M=d("../scattergeo/attributes"),T=d("../scatter/attributes"),e=d("../../plots/mapbox/layout_attributes"),a=d("../../plots/attributes"),n=d("../../components/colorscale/attributes"),r=d("../../lib/extend").extendFlat,t=d("../../plot_api/edit_types").overrideAll,f=M.line,o=M.marker;ne.exports=t({lon:M.lon,lat:M.lat,mode:r({},T.mode,{dflt:"markers"}),text:r({},T.text,{}),texttemplate:v({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:r({},T.hovertext,{}),line:{color:f.color,width:f.width},connectgaps:T.connectgaps,marker:r({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:o.opacity,size:o.size,sizeref:o.sizeref,sizemin:o.sizemin,sizemode:o.sizemode},n("marker")),fill:M.fill,fillcolor:T.fillcolor,textfont:e.layers.symbol.textfont,textposition:e.layers.symbol.textposition,below:{valType:"string"},selected:{marker:T.selected.marker},unselected:{marker:T.unselected.marker},hoverinfo:r({},a.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:w()},"calc","nested")},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/mapbox/layout_attributes":615,"../../plots/template_attributes":633,"../scatter/attributes":927,"../scattergeo/attributes":969}],994:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("../../lib"),M=d("../../constants/numerical").BADNUM,T=d("../../lib/geojson_utils"),e=d("../../components/colorscale"),a=d("../../components/drawing"),n=d("../scatter/make_bubble_size_func"),r=d("../scatter/subtypes"),t=d("../../plots/mapbox/convert_text_opts"),f=d("../../components/fx/helpers").appendArrayPointValue,o=d("../../lib/svg_text_utils").NEWLINES,i=d("../../lib/svg_text_utils").BR_TAG_ALL;ne.exports=function(s,A){var m=A[0].trace,h=m.visible===!0&&m._length!==0,x=m.fill!=="none",u=r.hasLines(m),L=r.hasMarkers(m),S=r.hasText(m),k=L&&m.marker.symbol==="circle",P=L&&m.marker.symbol!=="circle",z=g(),I=g(),D=g(),R=g(),O={fill:z,line:I,circle:D,symbol:R};if(!h)return O;var F;if((x||u)&&(F=T.calcTraceToLineCoords(A)),x&&(z.geojson=T.makePolygon(F),z.layout.visibility="visible",v.extendFlat(z.paint,{"fill-color":m.fillcolor})),u&&(I.geojson=T.makeLine(F),I.layout.visibility="visible",v.extendFlat(I.paint,{"line-width":m.line.width,"line-color":m.line.color,"line-opacity":m.opacity})),k){var V=p(A);D.geojson=V.geojson,D.layout.visibility="visible",v.extendFlat(D.paint,{"circle-color":V.mcc,"circle-radius":V.mrc,"circle-opacity":V.mo})}if((P||S)&&(R.geojson=y(A,s),v.extendFlat(R.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),P&&(v.extendFlat(R.layout,{"icon-size":m.marker.size/10}),"angle"in m.marker&&m.marker.angle!=="auto"&&v.extendFlat(R.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),R.layout["icon-allow-overlap"]=m.marker.allowoverlap,v.extendFlat(R.paint,{"icon-opacity":m.opacity*m.marker.opacity,"icon-color":m.marker.color})),S)){var G=(m.marker||{}).size,J=t(m.textposition,G);v.extendFlat(R.layout,{"text-size":m.textfont.size,"text-anchor":J.anchor,"text-offset":J.offset}),v.extendFlat(R.paint,{"text-color":m.textfont.color,"text-opacity":m.opacity})}return O};function g(){return{geojson:T.makeBlank(),layout:{visibility:"none"},paint:{}}}function p(_){var s=_[0].trace,A=s.marker,m=s.selectedpoints,h=v.isArrayOrTypedArray(A.color),x=v.isArrayOrTypedArray(A.size),u=v.isArrayOrTypedArray(A.opacity),L;function S(J){return s.opacity*J}function k(J){return J/2}var P;h&&(e.hasColorscale(s,"marker")?P=e.makeColorScaleFuncFromTrace(A):P=v.identity);var z;x&&(z=n(s));var I;u&&(I=function(J){var Z=w(J)?+v.constrain(J,0,1):0;return S(Z)});var D=[];for(L=0;L<_.length;L++){var R=_[L],O=R.lonlat;if(!l(O)){var F={};P&&(F.mcc=R.mcc=P(R.mc)),z&&(F.mrc=R.mrc=z(R.ms)),I&&(F.mo=I(R.mo)),m&&(F.selected=R.selected||0),D.push({type:"Feature",geometry:{type:"Point",coordinates:O},properties:F})}}var V;if(m)for(V=a.makeSelectedPointStyleFns(s),L=0;L<D.length;L++){var G=D[L].properties;V.selectedOpacityFn&&(G.mo=S(V.selectedOpacityFn(G))),V.selectedColorFn&&(G.mcc=V.selectedColorFn(G)),V.selectedSizeFn&&(G.mrc=V.selectedSizeFn(G))}return{geojson:{type:"FeatureCollection",features:D},mcc:h||V&&V.selectedColorFn?{type:"identity",property:"mcc"}:A.color,mrc:x||V&&V.selectedSizeFn?{type:"identity",property:"mrc"}:k(A.size),mo:u||V&&V.selectedOpacityFn?{type:"identity",property:"mo"}:S(A.opacity)}}function y(_,s){for(var A=s._fullLayout,m=_[0].trace,h=m.marker||{},x=h.symbol,u=h.angle,L=x!=="circle"?c(x):b,S=u!=="auto"?c(u,!0):b,k=r.hasText(m)?c(m.text):b,P=[],z=0;z<_.length;z++){var I=_[z];if(!l(I.lonlat)){var D=m.texttemplate,R;if(D){var O=Array.isArray(D)?D[z]||"":D,F=m._module.formatLabels(I,m,A),V={};f(V,m,I.i);var G=m._meta||{};R=v.texttemplateString(O,F,A._d3locale,V,I,G)}else R=k(z);R&&(R=R.replace(o,"").replace(i,`
`)),P.push({type:"Feature",geometry:{type:"Point",coordinates:I.lonlat},properties:{symbol:L(z),angle:S(z),text:R}})}}return{type:"FeatureCollection",features:P}}function c(_,s){return v.isArrayOrTypedArray(_)?s?function(A){return w(_[A])?+_[A]:0}:function(A){return _[A]}:_?function(){return _}:b}function b(){return""}function l(_){return _[0]===M}},{"../../components/colorscale":378,"../../components/drawing":388,"../../components/fx/helpers":402,"../../constants/numerical":479,"../../lib":503,"../../lib/geojson_utils":497,"../../lib/svg_text_utils":529,"../../plots/mapbox/convert_text_opts":612,"../scatter/make_bubble_size_func":944,"../scatter/subtypes":952,"fast-isnumeric":190}],995:[function(d,ne,ae){var w=d("../../lib"),v=d("../scatter/subtypes"),M=d("../scatter/marker_defaults"),T=d("../scatter/line_defaults"),e=d("../scatter/text_defaults"),a=d("../scatter/fillcolor_defaults"),n=d("./attributes");ne.exports=function(f,o,i,g){function p(b,l){return w.coerce(f,o,n,b,l)}var y=r(f,o,p);if(!y){o.visible=!1;return}if(p("text"),p("texttemplate"),p("hovertext"),p("hovertemplate"),p("mode"),p("below"),v.hasLines(o)&&(T(f,o,i,g,p,{noDash:!0}),p("connectgaps")),v.hasMarkers(o)){M(f,o,i,g,p,{noLine:!0}),p("marker.allowoverlap"),p("marker.angle");var c=o.marker;c.symbol!=="circle"&&(w.isArrayOrTypedArray(c.size)&&(c.size=c.size[0]),w.isArrayOrTypedArray(c.color)&&(c.color=c.color[0]))}v.hasText(o)&&e(f,o,g,p,{noSelect:!0}),p("fill"),o.fill!=="none"&&a(f,o,i,p),w.coerceSelectionMarkerOpacity(o,p)};function r(t,f,o){var i=o("lon")||[],g=o("lat")||[],p=Math.min(i.length,g.length);return f._length=p,p}},{"../../lib":503,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":993}],996:[function(d,ne,ae){ne.exports=function(v,M){return v.lon=M.lon,v.lat=M.lat,v}},{}],997:[function(d,ne,ae){var w=d("../../plots/cartesian/axes");ne.exports=function(M,T,e){var a={},n=e[T.subplot]._subplot,r=n.mockAxis,t=M.lonlat;return a.lonLabel=w.tickText(r,r.c2l(t[0]),!0).text,a.latLabel=w.tickText(r,r.c2l(t[1]),!0).text,a}},{"../../plots/cartesian/axes":554}],998:[function(d,ne,ae){var w=d("../../components/fx"),v=d("../../lib"),M=d("../scatter/get_trace_color"),T=v.fillText,e=d("../../constants/numerical").BADNUM;function a(r,t,f){var o=r.cd,i=o[0].trace,g=r.xa,p=r.ya,y=r.subplot,c=t>=0?Math.floor((t+180)/360):Math.ceil((t-180)/360),b=c*360,l=t-b;function _(k){var P=k.lonlat;if(P[0]===e)return 1/0;var z=v.modHalf(P[0],360),I=P[1],D=y.project([z,I]),R=D.x-g.c2p([l,I]),O=D.y-p.c2p([z,f]),F=Math.max(3,k.mrc||0);return Math.max(Math.sqrt(R*R+O*O)-F,1-3/F)}if(w.getClosest(o,_,r),r.index!==!1){var s=o[r.index],A=s.lonlat,m=[v.modHalf(A[0],360)+b,A[1]],h=g.c2p(m),x=p.c2p(m),u=s.mrc||1;r.x0=h-u,r.x1=h+u,r.y0=x-u,r.y1=x+u;var L={};L[i.subplot]={_subplot:y};var S=i._module.formatLabels(s,i,L);return r.lonLabel=S.lonLabel,r.latLabel=S.latLabel,r.color=M(i,s),r.extraText=n(i,s,o[0].t.labels),r.hovertemplate=i.hovertemplate,[r]}}function n(r,t,f){if(r.hovertemplate)return;var o=t.hi||r.hoverinfo,i=o.split("+"),g=i.indexOf("all")!==-1,p=i.indexOf("lon")!==-1,y=i.indexOf("lat")!==-1,c=t.lonlat,b=[];function l(_){return _+"\xB0"}return g||p&&y?b.push("("+l(c[1])+", "+l(c[0])+")"):p?b.push(f.lon+l(c[0])):y&&b.push(f.lat+l(c[1])),(g||i.indexOf("text")!==-1)&&T(t,r,b),b.join("<br>")}ne.exports={hoverPoints:a,getExtraText:n}},{"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../scatter/get_trace_color":937}],999:[function(d,ne,ae){ne.exports={attributes:d("./attributes"),supplyDefaults:d("./defaults"),colorbar:d("../scatter/marker_colorbar"),formatLabels:d("./format_labels"),calc:d("../scattergeo/calc"),plot:d("./plot"),hoverPoints:d("./hover").hoverPoints,eventData:d("./event_data"),selectPoints:d("./select"),styleOnSelect:function(w,v){if(v){var M=v[0].trace;M._glTrace.update(v)}},moduleType:"trace",name:"scattermapbox",basePlotModule:d("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":613,"../scatter/marker_colorbar":945,"../scattergeo/calc":970,"./attributes":993,"./defaults":995,"./event_data":996,"./format_labels":997,"./hover":998,"./plot":1e3,"./select":1001}],1e3:[function(d,ne,ae){var w=d("./convert"),v=d("../../plots/mapbox/constants").traceLayerPrefix,M=["fill","line","circle","symbol"];function T(a,n){this.type="scattermapbox",this.subplot=a,this.uid=n,this.sourceIds={fill:"source-"+n+"-fill",line:"source-"+n+"-line",circle:"source-"+n+"-circle",symbol:"source-"+n+"-symbol"},this.layerIds={fill:v+n+"-fill",line:v+n+"-line",circle:v+n+"-circle",symbol:v+n+"-symbol"},this.below=null}var e=T.prototype;e.addSource=function(a,n){this.subplot.map.addSource(this.sourceIds[a],{type:"geojson",data:n.geojson})},e.setSourceData=function(a,n){this.subplot.map.getSource(this.sourceIds[a]).setData(n.geojson)},e.addLayer=function(a,n,r){this.subplot.addLayer({type:a,id:this.layerIds[a],source:this.sourceIds[a],layout:n.layout,paint:n.paint},r)},e.update=function(n){var r=this.subplot,t=r.map,f=w(r.gd,n),o=r.belowLookup["trace-"+this.uid],i,g,p;if(o!==this.below){for(i=M.length-1;i>=0;i--)g=M[i],t.removeLayer(this.layerIds[g]);for(i=0;i<M.length;i++)g=M[i],p=f[g],this.addLayer(g,p,o);this.below=o}for(i=0;i<M.length;i++)g=M[i],p=f[g],r.setOptions(this.layerIds[g],"setLayoutProperty",p.layout),p.layout.visibility==="visible"&&(this.setSourceData(g,p),r.setOptions(this.layerIds[g],"setPaintProperty",p.paint));n[0].trace._glTrace=this},e.dispose=function(){for(var n=this.subplot.map,r=M.length-1;r>=0;r--){var t=M[r];n.removeLayer(this.layerIds[t]),n.removeSource(this.sourceIds[t])}},ne.exports=function(n,r){for(var t=r[0].trace,f=new T(n,t.uid),o=w(n.gd,r),i=f.below=n.belowLookup["trace-"+t.uid],g=0;g<M.length;g++){var p=M[g],y=o[p];f.addSource(p,y),f.addLayer(p,y,i)}return r[0].trace._glTrace=f,f}},{"../../plots/mapbox/constants":611,"./convert":994}],1001:[function(d,ne,ae){var w=d("../../lib"),v=d("../scatter/subtypes"),M=d("../../constants/numerical").BADNUM;ne.exports=function(e,a){var n=e.cd,r=e.xaxis,t=e.yaxis,f=[],o=n[0].trace,i;if(!v.hasMarkers(o))return[];if(a===!1)for(i=0;i<n.length;i++)n[i].selected=0;else for(i=0;i<n.length;i++){var g=n[i],p=g.lonlat;if(p[0]!==M){var y=[w.modHalf(p[0],360),p[1]],c=[r.c2p(y),t.c2p(y)];a.contains(c,null,i,e)?(f.push({pointNumber:i,lon:p[0],lat:p[1]}),g.selected=1):g.selected=0}}return f}},{"../../constants/numerical":479,"../../lib":503,"../scatter/subtypes":952}],1002:[function(d,ne,ae){var w=d("../../plots/template_attributes").hovertemplateAttrs,v=d("../../plots/template_attributes").texttemplateAttrs,M=d("../../lib/extend").extendFlat,T=d("../scatter/attributes"),e=d("../../plots/attributes"),a=T.line;ne.exports={mode:T.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:T.text,texttemplate:v({editType:"plot"},{keys:["r","theta","text"]}),hovertext:T.hovertext,line:{color:a.color,width:a.width,dash:a.dash,shape:M({},a.shape,{values:["linear","spline"]}),smoothing:a.smoothing,editType:"calc"},connectgaps:T.connectgaps,marker:T.marker,cliponaxis:M({},T.cliponaxis,{dflt:!1}),textposition:T.textposition,textfont:T.textfont,fill:M({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T.fillcolor,hoverinfo:M({},e.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:T.hoveron,hovertemplate:w(),selected:T.selected,unselected:T.unselected}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],1003:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("../../constants/numerical").BADNUM,M=d("../../plots/cartesian/axes"),T=d("../scatter/colorscale_calc"),e=d("../scatter/arrays_to_calcdata"),a=d("../scatter/calc_selection"),n=d("../scatter/calc").calcMarkerSize;ne.exports=function(t,f){for(var o=t._fullLayout,i=f.subplot,g=o[i].radialaxis,p=o[i].angularaxis,y=g.makeCalcdata(f,"r"),c=p.makeCalcdata(f,"theta"),b=f._length,l=new Array(b),_=0;_<b;_++){var s=y[_],A=c[_],m=l[_]={};w(s)&&w(A)?(m.r=s,m.theta=A):m.r=v}var h=n(f,b);return f._extremes.x=M.findExtremes(g,y,{ppad:h}),T(t,f),e(l,f),a(l,f),l}},{"../../constants/numerical":479,"../../plots/cartesian/axes":554,"../scatter/arrays_to_calcdata":926,"../scatter/calc":928,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],1004:[function(d,ne,ae){var w=d("../../lib"),v=d("../scatter/subtypes"),M=d("../scatter/marker_defaults"),T=d("../scatter/line_defaults"),e=d("../scatter/line_shape_defaults"),a=d("../scatter/text_defaults"),n=d("../scatter/fillcolor_defaults"),r=d("../scatter/constants").PTS_LINESONLY,t=d("./attributes");function f(i,g,p,y){function c(_,s){return w.coerce(i,g,t,_,s)}var b=o(i,g,y,c);if(!b){g.visible=!1;return}c("thetaunit"),c("mode",b<r?"lines+markers":"lines"),c("text"),c("hovertext"),g.hoveron!=="fills"&&c("hovertemplate"),v.hasLines(g)&&(T(i,g,p,y,c),e(i,g,c),c("connectgaps")),v.hasMarkers(g)&&M(i,g,p,y,c,{gradient:!0}),v.hasText(g)&&(c("texttemplate"),a(i,g,y,c));var l=[];(v.hasMarkers(g)||v.hasText(g))&&(c("cliponaxis"),c("marker.maxdisplayed"),l.push("points")),c("fill"),g.fill!=="none"&&(n(i,g,p,c),v.hasLines(g)||e(i,g,c)),(g.fill==="tonext"||g.fill==="toself")&&l.push("fills"),c("hoveron",l.join("+")||"points"),w.coerceSelectionMarkerOpacity(g,c)}function o(i,g,p,y){var c=y("r"),b=y("theta"),l;if(c)b?l=Math.min(c.length,b.length):(l=c.length,y("theta0"),y("dtheta"));else{if(!b)return 0;l=g.theta.length,y("r0"),y("dr")}return g._length=l,l}ne.exports={handleRThetaDefaults:o,supplyDefaults:f}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/line_shape_defaults":942,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":1002}],1005:[function(d,ne,ae){var w=d("../../lib"),v=d("../../plots/cartesian/axes");ne.exports=function(T,e,a){var n={},r=a[e.subplot]._subplot,t,f;r?(t=r.radialAxis,f=r.angularAxis):(r=a[e.subplot],t=r.radialaxis,f=r.angularaxis);var o=t.c2l(T.r);n.rLabel=v.tickText(t,o,!0).text;var i=f.thetaunit==="degrees"?w.rad2deg(T.theta):T.theta;return n.thetaLabel=v.tickText(f,i,!0).text,n}},{"../../lib":503,"../../plots/cartesian/axes":554}],1006:[function(d,ne,ae){var w=d("../scatter/hover");function v(T,e,a,n){var r=w(T,e,a,n);if(!(!r||r[0].index===!1)){var t=r[0];if(t.index===void 0)return r;var f=T.subplot,o=t.cd[t.index],i=t.trace;if(!!f.isPtInside(o))return t.xLabelVal=void 0,t.yLabelVal=void 0,M(o,i,f,t),t.hovertemplate=i.hovertemplate,r}}function M(T,e,a,n){var r=a.radialAxis,t=a.angularAxis;r._hovertitle="r",t._hovertitle="\u03B8";var f={};f[e.subplot]={_subplot:a};var o=e._module.formatLabels(T,e,f);n.rLabel=o.rLabel,n.thetaLabel=o.thetaLabel;var i=T.hi||e.hoverinfo,g=[];function p(c,b){g.push(c._hovertitle+": "+b)}if(!e.hovertemplate){var y=i.split("+");y.indexOf("all")!==-1&&(y=["r","theta","text"]),y.indexOf("r")!==-1&&p(r,n.rLabel),y.indexOf("theta")!==-1&&p(t,n.thetaLabel),y.indexOf("text")!==-1&&n.text&&(g.push(n.text),delete n.text),n.extraText=g.join("<br>")}}ne.exports={hoverPoints:v,makeHoverPointText:M}},{"../scatter/hover":938}],1007:[function(d,ne,ae){ne.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:d("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:d("./attributes"),supplyDefaults:d("./defaults").supplyDefaults,colorbar:d("../scatter/marker_colorbar"),formatLabels:d("./format_labels"),calc:d("./calc"),plot:d("./plot"),style:d("../scatter/style").style,styleOnSelect:d("../scatter/style").styleOnSelect,hoverPoints:d("./hover").hoverPoints,selectPoints:d("../scatter/select"),meta:{}}},{"../../plots/polar":622,"../scatter/marker_colorbar":945,"../scatter/select":949,"../scatter/style":951,"./attributes":1002,"./calc":1003,"./defaults":1004,"./format_labels":1005,"./hover":1006,"./plot":1008}],1008:[function(d,ne,ae){var w=d("../scatter/plot"),v=d("../../constants/numerical").BADNUM;ne.exports=function(T,e,a){for(var n=e.layers.frontplot.select("g.scatterlayer"),r={xaxis:e.xaxis,yaxis:e.yaxis,plot:e.framework,layerClipId:e._hasClipOnAxisFalse?e.clipIds.forTraces:null},t=e.radialAxis,f=e.angularAxis,o=0;o<a.length;o++)for(var i=a[o],g=0;g<i.length;g++){var p=i[g],y=p.r;if(y===v)p.x=p.y=v;else{var c=t.c2g(y),b=f.c2g(p.theta);p.x=c*Math.cos(b),p.y=c*Math.sin(b)}}w(T,r,a,n)}},{"../../constants/numerical":479,"../scatter/plot":948}],1009:[function(d,ne,ae){var w=d("../scatterpolar/attributes"),v=d("../scattergl/attributes"),M=d("../../plots/template_attributes").texttemplateAttrs;ne.exports={mode:w.mode,r:w.r,theta:w.theta,r0:w.r0,dr:w.dr,theta0:w.theta0,dtheta:w.dtheta,thetaunit:w.thetaunit,text:w.text,texttemplate:M({editType:"plot"},{keys:["r","theta","text"]}),hovertext:w.hovertext,hovertemplate:w.hovertemplate,line:v.line,connectgaps:v.connectgaps,marker:v.marker,fill:v.fill,fillcolor:v.fillcolor,textposition:v.textposition,textfont:v.textfont,hoverinfo:w.hoverinfo,selected:w.selected,unselected:w.unselected}},{"../../plots/template_attributes":633,"../scattergl/attributes":979,"../scatterpolar/attributes":1002}],1010:[function(d,ne,ae){ne.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:d("../../plots/polar"),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:d("./attributes"),supplyDefaults:d("./defaults"),colorbar:d("../scatter/marker_colorbar"),formatLabels:d("./format_labels"),calc:d("./calc"),hoverPoints:d("./hover").hoverPoints,selectPoints:d("../scattergl/select"),meta:{}}},{"../../plots/polar":622,"../scatter/marker_colorbar":945,"../scattergl/select":992,"./attributes":1009,"./calc":1011,"./defaults":1012,"./format_labels":1013,"./hover":1014}],1011:[function(d,ne,ae){var w=d("../scatter/colorscale_calc"),v=d("../scatter/calc").calcMarkerSize,M=d("../scattergl/convert"),T=d("../../plots/cartesian/axes"),e=d("../scattergl/constants").TOO_MANY_POINTS;ne.exports=function(n,r){var t=n._fullLayout,f=r.subplot,o=t[f].radialaxis,i=t[f].angularaxis,g=r._r=o.makeCalcdata(r,"r"),p=r._theta=i.makeCalcdata(r,"theta"),y=r._length,c={};y<g.length&&(g=g.slice(0,y)),y<p.length&&(p=p.slice(0,y)),c.r=g,c.theta=p,w(n,r);var b=c.opts=M.style(n,r),l;return y<e?l=v(r,y):b.marker&&(l=2*(b.marker.sizeAvg||Math.max(b.marker.size,3))),r._extremes.x=T.findExtremes(o,g,{ppad:l}),[{x:!1,y:!1,t:c,trace:r}]}},{"../../plots/cartesian/axes":554,"../scatter/calc":928,"../scatter/colorscale_calc":930,"../scattergl/constants":982,"../scattergl/convert":983}],1012:[function(d,ne,ae){var w=d("../../lib"),v=d("../scatter/subtypes"),M=d("../scatterpolar/defaults").handleRThetaDefaults,T=d("../scatter/marker_defaults"),e=d("../scatter/line_defaults"),a=d("../scatter/text_defaults"),n=d("../scatter/fillcolor_defaults"),r=d("../scatter/constants").PTS_LINESONLY,t=d("./attributes");ne.exports=function(o,i,g,p){function y(b,l){return w.coerce(o,i,t,b,l)}var c=M(o,i,p,y);if(!c){i.visible=!1;return}y("thetaunit"),y("mode",c<r?"lines+markers":"lines"),y("text"),y("hovertext"),i.hoveron!=="fills"&&y("hovertemplate"),v.hasLines(i)&&(e(o,i,g,p,y),y("connectgaps")),v.hasMarkers(i)&&T(o,i,g,p,y),v.hasText(i)&&(y("texttemplate"),a(o,i,p,y)),y("fill"),i.fill!=="none"&&n(o,i,g,y),w.coerceSelectionMarkerOpacity(i,y)}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"../scatterpolar/defaults":1004,"./attributes":1009}],1013:[function(d,ne,ae){var w=d("../scatterpolar/format_labels");ne.exports=function(M,T,e){var a=M.i;return"r"in M||(M.r=T._r[a]),"theta"in M||(M.theta=T._theta[a]),w(M,T,e)}},{"../scatterpolar/format_labels":1005}],1014:[function(d,ne,ae){var w=d("../scattergl/hover"),v=d("../scatterpolar/hover").makeHoverPointText;function M(T,e,a,n){var r=T.cd,t=r[0].t,f=t.r,o=t.theta,i=w.hoverPoints(T,e,a,n);if(!(!i||i[0].index===!1)){var g=i[0];if(g.index===void 0)return i;var p=T.subplot,y=g.cd[g.index],c=g.trace;if(y.r=f[g.index],y.theta=o[g.index],!!p.isPtInside(y))return g.xLabelVal=void 0,g.yLabelVal=void 0,v(y,c,p,g),i}}ne.exports={hoverPoints:M}},{"../scattergl/hover":988,"../scatterpolar/hover":1006}],1015:[function(d,ne,ae){arguments[4][896][0].apply(ae,arguments)},{"./base_index":1010,"./plot":1016,dup:896}],1016:[function(d,ne,ae){var w=d("@plotly/point-cluster"),v=d("fast-isnumeric"),M=d("../scattergl/plot"),T=d("../scattergl/scene_update"),e=d("../scattergl/convert"),a=d("../../lib"),n=d("../scattergl/constants").TOO_MANY_POINTS,r={};ne.exports=function(f,o,i){if(!!i.length){var g=o.radialAxis,p=o.angularAxis,y=T(f,o);return i.forEach(function(c){if(!(!c||!c[0]||!c[0].trace)){var b=c[0],l=b.trace,_=b.t,s=l._length,A=_.r,m=_.theta,h=_.opts,x,u=A.slice(),L=m.slice();for(x=0;x<A.length;x++)o.isPtInside({r:A[x],theta:m[x]})||(u[x]=NaN,L[x]=NaN);var S=new Array(s*2),k=Array(s),P=Array(s);for(x=0;x<s;x++){var z=u[x],I,D;if(v(z)){var R=g.c2g(z),O=p.c2g(L[x],l.thetaunit);I=R*Math.cos(O),D=R*Math.sin(O)}else I=D=NaN;k[x]=S[x*2]=I,P[x]=S[x*2+1]=D}_.tree=w(S),h.marker&&s>=n&&(h.marker.cluster=_.tree),h.marker&&(h.markerSel.positions=h.markerUnsel.positions=h.marker.positions=S),h.line&&S.length>1&&a.extendFlat(h.line,e.linePositions(f,l,S)),h.text&&(a.extendFlat(h.text,{positions:S},e.textPosition(f,l,h.text,h.marker)),a.extendFlat(h.textSel,{positions:S},e.textPosition(f,l,h.text,h.markerSel)),a.extendFlat(h.textUnsel,{positions:S},e.textPosition(f,l,h.text,h.markerUnsel))),h.fill&&!y.fill2d&&(y.fill2d=!0),h.marker&&!y.scatter2d&&(y.scatter2d=!0),h.line&&!y.line2d&&(y.line2d=!0),h.text&&!y.glText&&(y.glText=!0),y.lineOptions.push(h.line),y.fillOptions.push(h.fill),y.markerOptions.push(h.marker),y.markerSelectedOptions.push(h.markerSel),y.markerUnselectedOptions.push(h.markerUnsel),y.textOptions.push(h.text),y.textSelectedOptions.push(h.textSel),y.textUnselectedOptions.push(h.textUnsel),y.selectBatch.push([]),y.unselectBatch.push([]),_.x=k,_.y=P,_.rawx=k,_.rawy=P,_.r=A,_.theta=m,_.positions=S,_._scene=y,_.index=y.count,y.count++}}),M(f,o,i)}},ne.exports.reglPrecompiled=r},{"../../lib":503,"../scattergl/constants":982,"../scattergl/convert":983,"../scattergl/plot":990,"../scattergl/scene_update":991,"@plotly/point-cluster":59,"fast-isnumeric":190}],1017:[function(d,ne,ae){var w=d("../../plots/template_attributes").hovertemplateAttrs,v=d("../../plots/template_attributes").texttemplateAttrs,M=d("../../lib/extend").extendFlat,T=d("../scatter/attributes"),e=d("../../plots/attributes"),a=T.line;ne.exports={mode:T.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:T.text,texttemplate:v({editType:"plot"},{keys:["real","imag","text"]}),hovertext:T.hovertext,line:{color:a.color,width:a.width,dash:a.dash,shape:M({},a.shape,{values:["linear","spline"]}),smoothing:a.smoothing,editType:"calc"},connectgaps:T.connectgaps,marker:T.marker,cliponaxis:M({},T.cliponaxis,{dflt:!1}),textposition:T.textposition,textfont:T.textfont,fill:M({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T.fillcolor,hoverinfo:M({},e.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:T.hoveron,hovertemplate:w(),selected:T.selected,unselected:T.unselected}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],1018:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("../../constants/numerical").BADNUM,M=d("../scatter/colorscale_calc"),T=d("../scatter/arrays_to_calcdata"),e=d("../scatter/calc_selection"),a=d("../scatter/calc").calcMarkerSize;ne.exports=function(r,t){for(var f=r._fullLayout,o=t.subplot,i=f[o].realaxis,g=f[o].imaginaryaxis,p=i.makeCalcdata(t,"real"),y=g.makeCalcdata(t,"imag"),c=t._length,b=new Array(c),l=0;l<c;l++){var _=p[l],s=y[l],A=b[l]={};w(_)&&w(s)?(A.real=_,A.imag=s):A.real=v}return a(t,c),M(r,t),T(b,t),e(b,t),b}},{"../../constants/numerical":479,"../scatter/arrays_to_calcdata":926,"../scatter/calc":928,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],1019:[function(d,ne,ae){var w=d("../../lib"),v=d("../scatter/subtypes"),M=d("../scatter/marker_defaults"),T=d("../scatter/line_defaults"),e=d("../scatter/line_shape_defaults"),a=d("../scatter/text_defaults"),n=d("../scatter/fillcolor_defaults"),r=d("../scatter/constants").PTS_LINESONLY,t=d("./attributes");ne.exports=function(i,g,p,y){function c(_,s){return w.coerce(i,g,t,_,s)}var b=f(i,g,y,c);if(!b){g.visible=!1;return}c("mode",b<r?"lines+markers":"lines"),c("text"),c("hovertext"),g.hoveron!=="fills"&&c("hovertemplate"),v.hasLines(g)&&(T(i,g,p,y,c),e(i,g,c),c("connectgaps")),v.hasMarkers(g)&&M(i,g,p,y,c,{gradient:!0}),v.hasText(g)&&(c("texttemplate"),a(i,g,y,c));var l=[];(v.hasMarkers(g)||v.hasText(g))&&(c("cliponaxis"),c("marker.maxdisplayed"),l.push("points")),c("fill"),g.fill!=="none"&&(n(i,g,p,c),v.hasLines(g)||e(i,g,c)),(g.fill==="tonext"||g.fill==="toself")&&l.push("fills"),c("hoveron",l.join("+")||"points"),w.coerceSelectionMarkerOpacity(g,c)};function f(o,i,g,p){var y=p("real"),c=p("imag"),b;return y&&c&&(b=Math.min(y.length,c.length)),i._length=b,b}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/line_shape_defaults":942,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":1017}],1020:[function(d,ne,ae){var w=d("../../plots/cartesian/axes");ne.exports=function(M,T,e){var a={},n=e[T.subplot]._subplot;return a.realLabel=w.tickText(n.radialAxis,M.real,!0).text,a.imagLabel=w.tickText(n.angularAxis,M.imag,!0).text,a}},{"../../plots/cartesian/axes":554}],1021:[function(d,ne,ae){var w=d("../scatter/hover");function v(T,e,a,n){var r=w(T,e,a,n);if(!(!r||r[0].index===!1)){var t=r[0];if(t.index===void 0)return r;var f=T.subplot,o=t.cd[t.index],i=t.trace;if(!!f.isPtInside(o))return t.xLabelVal=void 0,t.yLabelVal=void 0,M(o,i,f,t),t.hovertemplate=i.hovertemplate,r}}function M(T,e,a,n){var r=a.radialAxis,t=a.angularAxis;r._hovertitle="real",t._hovertitle="imag";var f={};f[e.subplot]={_subplot:a};var o=e._module.formatLabels(T,e,f);n.realLabel=o.realLabel,n.imagLabel=o.imagLabel;var i=T.hi||e.hoverinfo,g=[];function p(c,b){g.push(c._hovertitle+": "+b)}if(!e.hovertemplate){var y=i.split("+");y.indexOf("all")!==-1&&(y=["real","imag","text"]),y.indexOf("real")!==-1&&p(r,n.realLabel),y.indexOf("imag")!==-1&&p(t,n.imagLabel),y.indexOf("text")!==-1&&n.text&&(g.push(n.text),delete n.text),n.extraText=g.join("<br>")}}ne.exports={hoverPoints:v,makeHoverPointText:M}},{"../scatter/hover":938}],1022:[function(d,ne,ae){ne.exports={moduleType:"trace",name:"scattersmith",basePlotModule:d("../../plots/smith"),categories:["smith","symbols","showLegend","scatter-like"],attributes:d("./attributes"),supplyDefaults:d("./defaults"),colorbar:d("../scatter/marker_colorbar"),formatLabels:d("./format_labels"),calc:d("./calc"),plot:d("./plot"),style:d("../scatter/style").style,styleOnSelect:d("../scatter/style").styleOnSelect,hoverPoints:d("./hover").hoverPoints,selectPoints:d("../scatter/select"),meta:{}}},{"../../plots/smith":629,"../scatter/marker_colorbar":945,"../scatter/select":949,"../scatter/style":951,"./attributes":1017,"./calc":1018,"./defaults":1019,"./format_labels":1020,"./hover":1021,"./plot":1023}],1023:[function(d,ne,ae){var w=d("../scatter/plot"),v=d("../../constants/numerical").BADNUM,M=d("../../plots/smith/helpers"),T=M.smith;ne.exports=function(a,n,r){for(var t=n.layers.frontplot.select("g.scatterlayer"),f={xaxis:n.xaxis,yaxis:n.yaxis,plot:n.framework,layerClipId:n._hasClipOnAxisFalse?n.clipIds.forTraces:null},o=0;o<r.length;o++)for(var i=r[o],g=0;g<i.length;g++){var p=i[g],y=p.real;if(y===v)p.x=p.y=v;else{var c=T([y,p.imag]);p.x=c[0],p.y=c[1]}}w(a,f,r,t)}},{"../../constants/numerical":479,"../../plots/smith/helpers":628,"../scatter/plot":948}],1024:[function(d,ne,ae){var w=d("../../plots/template_attributes").hovertemplateAttrs,v=d("../../plots/template_attributes").texttemplateAttrs,M=d("../scatter/attributes"),T=d("../../plots/attributes"),e=d("../../components/colorscale/attributes"),a=d("../../components/drawing/attributes").dash,n=d("../../lib/extend").extendFlat,r=M.marker,t=M.line,f=r.line;ne.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:n({},M.mode,{dflt:"markers"}),text:n({},M.text,{}),texttemplate:v({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:n({},M.hovertext,{}),line:{color:t.color,width:t.width,dash:a,shape:n({},t.shape,{values:["linear","spline"]}),smoothing:t.smoothing,editType:"calc"},connectgaps:M.connectgaps,cliponaxis:M.cliponaxis,fill:n({},M.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:M.fillcolor,marker:n({symbol:r.symbol,opacity:r.opacity,maxdisplayed:r.maxdisplayed,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,line:n({width:f.width,editType:"calc"},e("marker.line")),gradient:r.gradient,editType:"calc"},e("marker")),textfont:M.textfont,textposition:M.textposition,selected:M.selected,unselected:M.unselected,hoverinfo:n({},T.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:M.hoveron,hovertemplate:w()}},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],1025:[function(d,ne,ae){var w=d("fast-isnumeric"),v=d("../scatter/colorscale_calc"),M=d("../scatter/arrays_to_calcdata"),T=d("../scatter/calc_selection"),e=d("../scatter/calc").calcMarkerSize,a=["a","b","c"],n={a:["b","c"],b:["a","c"],c:["a","b"]};ne.exports=function(t,f){var o=t._fullLayout[f.subplot],i=o.sum,g=f.sum||i,p={a:f.a,b:f.b,c:f.c},y,c,b,l,_,s;for(y=0;y<a.length;y++)if(b=a[y],!p[b]){for(_=p[n[b][0]],s=p[n[b][1]],l=new Array(_.length),c=0;c<_.length;c++)l[c]=g-_[c]-s[c];p[b]=l}var A=f._length,m=new Array(A),h,x,u,L,S,k;for(y=0;y<A;y++)h=p.a[y],x=p.b[y],u=p.c[y],w(h)&&w(x)&&w(u)?(h=+h,x=+x,u=+u,L=i/(h+x+u),L!==1&&(h*=L,x*=L,u*=L),k=h,S=u-x,m[y]={x:S,y:k,a:h,b:x,c:u}):m[y]={x:!1,y:!1};return e(f,A),v(t,f),M(m,f),T(m,f),m}},{"../scatter/arrays_to_calcdata":926,"../scatter/calc":928,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],1026:[function(d,ne,ae){var w=d("../../lib"),v=d("../scatter/constants"),M=d("../scatter/subtypes"),T=d("../scatter/marker_defaults"),e=d("../scatter/line_defaults"),a=d("../scatter/line_shape_defaults"),n=d("../scatter/text_defaults"),r=d("../scatter/fillcolor_defaults"),t=d("./attributes");ne.exports=function(o,i,g,p){function y(m,h){return w.coerce(o,i,t,m,h)}var c=y("a"),b=y("b"),l=y("c"),_;if(c?(_=c.length,b?(_=Math.min(_,b.length),l&&(_=Math.min(_,l.length))):l?_=Math.min(_,l.length):_=0):b&&l&&(_=Math.min(b.length,l.length)),!_){i.visible=!1;return}i._length=_,y("sum"),y("text"),y("hovertext"),i.hoveron!=="fills"&&y("hovertemplate");var s=_<v.PTS_LINESONLY?"lines+markers":"lines";y("mode",s),M.hasLines(i)&&(e(o,i,g,p,y),a(o,i,y),y("connectgaps")),M.hasMarkers(i)&&T(o,i,g,p,y,{gradient:!0}),M.hasText(i)&&(y("texttemplate"),n(o,i,p,y));var A=[];(M.hasMarkers(i)||M.hasText(i))&&(y("cliponaxis"),y("marker.maxdisplayed"),A.push("points")),y("fill"),i.fill!=="none"&&(r(o,i,g,y),M.hasLines(i)||a(o,i,y)),(i.fill==="tonext"||i.fill==="toself")&&A.push("fills"),y("hoveron",A.join("+")||"points"),w.coerceSelectionMarkerOpacity(i,y)}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/line_shape_defaults":942,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":1024}],1027:[function(d,ne,ae){ne.exports=function(v,M,T,e,a){if(M.xa&&(v.xaxis=M.xa),M.ya&&(v.yaxis=M.ya),e[a]){var n=e[a];v.a=n.a,v.b=n.b,v.c=n.c}else v.a=M.a,v.b=M.b,v.c=M.c;return v}},{}],1028:[function(d,ne,ae){var w=d("../../plots/cartesian/axes");ne.exports=function(M,T,e){var a={},n=e[T.subplot]._subplot;return a.aLabel=w.tickText(n.aaxis,M.a,!0).text,a.bLabel=w.tickText(n.baxis,M.b,!0).text,a.cLabel=w.tickText(n.caxis,M.c,!0).text,a}},{"../../plots/cartesian/axes":554}],1029:[function(d,ne,ae){var w=d("../scatter/hover");ne.exports=function(M,T,e,a){var n=w(M,T,e,a);if(!n||n[0].index===!1)return;var r=n[0];if(r.index===void 0){var t=1-r.y0/M.ya._length,f=M.xa._length,o=f*t/2,i=f-o;return r.x0=Math.max(Math.min(r.x0,i),o),r.x1=Math.max(Math.min(r.x1,i),o),n}var g=r.cd[r.index],p=r.trace,y=r.subplot;r.a=g.a,r.b=g.b,r.c=g.c,r.xLabelVal=void 0,r.yLabelVal=void 0;var c={};c[p.subplot]={_subplot:y};var b=p._module.formatLabels(g,p,c);r.aLabel=b.aLabel,r.bLabel=b.bLabel,r.cLabel=b.cLabel;var l=g.hi||p.hoverinfo,_=[];function s(m,h){_.push(m._hovertitle+": "+h)}if(!p.hovertemplate){var A=l.split("+");A.indexOf("all")!==-1&&(A=["a","b","c"]),A.indexOf("a")!==-1&&s(y.aaxis,r.aLabel),A.indexOf("b")!==-1&&s(y.baxis,r.bLabel),A.indexOf("c")!==-1&&s(y.caxis,r.cLabel)}return r.extraText=_.join("<br>"),r.hovertemplate=p.hovertemplate,n}},{"../scatter/hover":938}],1030:[function(d,ne,ae){ne.exports={attributes:d("./attributes"),supplyDefaults:d("./defaults"),colorbar:d("../scatter/marker_colorbar"),formatLabels:d("./format_labels"),calc:d("./calc"),plot:d("./plot"),style:d("../scatter/style").style,styleOnSelect:d("../scatter/style").styleOnSelect,hoverPoints:d("./hover"),selectPoints:d("../scatter/select"),eventData:d("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:d("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":634,"../scatter/marker_colorbar":945,"../scatter/select":949,"../scatter/style":951,"./attributes":1024,"./calc":1025,"./defaults":1026,"./event_data":1027,"./format_labels":1028,"./hover":1029,"./plot":1031}],1031:[function(d,ne,ae){var w=d("../scatter/plot");ne.exports=function(M,T,e){var a=T.plotContainer;a.select(".scatterlayer").selectAll("*").remove();var n={xaxis:T.xaxis,yaxis:T.yaxis,plot:a,layerClipId:T._hasClipOnAxisFalse?T.clipIdRelative:null},r=T.layers.frontplot.select("g.scatterlayer");w(M,n,e,r)}},{"../scatter/plot":948}],1032:[function(d,ne,ae){var w=d("../scatter/attributes"),v=d("../../components/colorscale/attributes"),M=d("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=d("../../plots/template_attributes").hovertemplateAttrs,e=d("../scattergl/attributes"),a=d("../../plots/cartesian/constants").idRegex,n=d("../../plot_api/plot_template").templatedArray,r=d("../../lib/extend").extendFlat,t=w.marker,f=t.line,o=r(v("marker.line",{editTypeOverride:"calc"}),{width:r({},f.width,{editType:"calc"}),editType:"calc"}),i=r(v("marker"),{symbol:t.symbol,size:r({},t.size,{editType:"markerSize"}),sizeref:t.sizeref,sizemin:t.sizemin,sizemode:t.sizemode,opacity:t.opacity,colorbar:t.colorbar,line:o,editType:"calc"});i.color.editType=i.cmin.editType=i.cmax.editType="style";function g(p){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:a[p],editType:"plot"}}}ne.exports={dimensions:n("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:r({},e.text,{}),hovertext:r({},e.hovertext,{}),hovertemplate:T(),xhoverformat:M("x"),yhoverformat:M("y"),marker:i,xaxes:g("x"),yaxes:g("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:e.selected.marker,editType:"calc"},unselected:{marker:e.unselected.marker,editType:"calc"},opacity:e.opacity}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/constants":561,"../../plots/template_attributes":633,"../scatter/attributes":927,"../scattergl/attributes":979}],1033:[function(d,ne,ae){var w=d("../../registry"),v=d("../../components/grid");ne.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:d("./attributes"),supplyDefaults:d("./defaults"),colorbar:d("../scatter/marker_colorbar"),calc:d("./calc"),plot:d("./plot"),hoverPoints:d("./hover").hoverPoints,selectPoints:d("./select"),editStyle:d("./edit_style"),meta:{}},w.register(v)},{"../../components/grid":410,"../../registry":638,"../scatter/marker_colorbar":945,"./attributes":1032,"./calc":1035,"./defaults":1036,"./edit_style":1037,"./hover":1039,"./plot":1041,"./select":1043}],1034:[function(d,ne,ae){var w=d("regl-line2d"),v=d("../../registry"),M=d("../../lib/prepare_regl"),T=d("../../plots/get_data").getModuleCalcData,e=d("../../plots/cartesian"),a=d("../../plots/cartesian/axis_ids").getFromId,n=d("../../plots/cartesian/axes").shouldShowZeroLine,r="splom",t={};function f(c){var b=c._fullLayout,l=v.getModule(r),_=T(c.calcdata,l)[0],s=M(c,["ANGLE_instanced_arrays","OES_element_index_uint"],t);!s||(b._hasOnlyLargeSploms&&g(c),l.plot(c,{},_))}function o(c){var b=c.calcdata,l=c._fullLayout;l._hasOnlyLargeSploms&&g(c);for(var _=0;_<b.length;_++){var s=b[_][0],A=s.trace,m=l._splomScenes[A.uid];A.type==="splom"&&m&&m.matrix&&i(c,A,m)}}function i(c,b,l){for(var _=l.matrixOptions.data.length,s=b._visibleDims,A=l.viewOpts.ranges=new Array(_),m=0;m<s.length;m++){var h=s[m],x=A[m]=new Array(4),u=a(c,b._diag[h][0]);u&&(x[0]=u.r2l(u.range[0]),x[2]=u.r2l(u.range[1]));var L=a(c,b._diag[h][1]);L&&(x[1]=L.r2l(L.range[0]),x[3]=L.r2l(L.range[1]))}l.selectBatch.length||l.unselectBatch.length?l.matrix.update({ranges:A},{ranges:A}):l.matrix.update({ranges:A})}function g(c){var b=c._fullLayout,l=b._glcanvas.data()[0].regl,_=b._splomGrid;_||(_=b._splomGrid=w(l)),_.update(p(c))}function p(c){var b=c._context.plotGlPixelRatio,l=c._fullLayout,_=l._size,s=[0,0,l.width*b,l.height*b],A={},m;function h(J,Z,Y,j,re,se){Y*=b,j*=b,re*=b,se*=b;var oe=Z[J+"color"],N=Z[J+"width"],U=String(oe+N);U in A?A[U].data.push(NaN,NaN,Y,j,re,se):A[U]={data:[Y,j,re,se],join:"rect",thickness:N*b,color:oe,viewport:s,range:s,overlay:!1}}for(m in l._splomSubplots){var x=l._plots[m],u=x.xaxis,L=x.yaxis,S=u._gridVals,k=L._gridVals,P=u._offset,z=u._length,I=L._length,D=_.b+L.domain[0]*_.h,R=-L._m,O=-R*L.r2l(L.range[0],L.calendar),F,V;if(u.showgrid)for(m=0;m<S.length;m++)F=P+u.l2p(S[m].x),h("grid",u,F,D,F,D+I);if(L.showgrid)for(m=0;m<k.length;m++)V=D+O+R*k[m].x,h("grid",L,P,V,P+z,V);n(c,u,L)&&(F=P+u.l2p(0),h("zeroline",u,F,D,F,D+I)),n(c,L,u)&&(V=D+O+0,h("zeroline",L,P,V,P+z,V))}var G=[];for(m in A)G.push(A[m]);return G}function y(c,b,l,_){var s={},A;if(_._splomScenes){for(A=0;A<c.length;A++){var m=c[A];m.type==="splom"&&(s[m.uid]=1)}for(A=0;A<l.length;A++){var h=l[A];if(!s[h.uid]){var x=_._splomScenes[h.uid];x&&x.destroy&&x.destroy(),_._splomScenes[h.uid]=null,delete _._splomScenes[h.uid]}}}Object.keys(_._splomScenes||{}).length===0&&delete _._splomScenes,_._splomGrid&&!b._hasOnlyLargeSploms&&_._hasOnlyLargeSploms&&(_._splomGrid.destroy(),_._splomGrid=null,delete _._splomGrid),e.clean(c,b,l,_)}ne.exports={name:r,attr:e.attr,attrRegex:e.attrRegex,layoutAttributes:e.layoutAttributes,supplyLayoutDefaults:e.supplyLayoutDefaults,drawFramework:e.drawFramework,plot:f,drag:o,updateGrid:g,clean:y,updateFx:e.updateFx,toSVG:e.toSVG,reglPrecompiled:t}},{"../../lib/prepare_regl":516,"../../plots/cartesian":568,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_ids":558,"../../plots/get_data":593,"../../registry":638,"regl-line2d":280}],1035:[function(d,ne,ae){var w=d("../../lib"),v=d("../../plots/cartesian/axis_ids"),M=d("../scatter/calc").calcMarkerSize,T=d("../scatter/calc").calcAxisExpansion,e=d("../scatter/colorscale_calc"),a=d("../scattergl/convert").markerSelection,n=d("../scattergl/convert").markerStyle,r=d("./scene_update"),t=d("../../constants/numerical").BADNUM,f=d("../scattergl/constants").TOO_MANY_POINTS;ne.exports=function(i,g){var p=g.dimensions,y=g._length,c={},b=c.cdata=[],l=c.data=[],_=g._visibleDims=[],s,A,m,h,x;function u(z,I){for(var D=z.makeCalcdata({v:I.values,vcalendar:g.calendar},"v"),R=0;R<D.length;R++)D[R]=D[R]===t?NaN:D[R];b.push(D),l.push(z.type==="log"?w.simpleMap(D,z.c2l):D)}for(s=0;s<p.length;s++)if(m=p[s],m.visible){if(h=v.getFromId(i,g._diag[s][0]),x=v.getFromId(i,g._diag[s][1]),h&&x&&h.type!==x.type){w.log("Skipping splom dimension "+s+" with conflicting axis types");continue}h?(u(h,m),x&&x.type==="category"&&(x._categories=h._categories.slice())):u(x,m),_.push(s)}e(i,g),w.extendFlat(c,n(g));var L=b.length,S=L*y>f,k;for(S?k=c.sizeAvg||Math.max(c.size,3):k=M(g,y),A=0;A<_.length;A++)s=_[A],m=p[s],h=v.getFromId(i,g._diag[s][0])||{},x=v.getFromId(i,g._diag[s][1])||{},T(i,g,h,x,b[A],b[A],k);var P=r(i,g);return P.matrix||(P.matrix=!0),P.matrixOptions=c,P.selectedOptions=a(g,g.selected),P.unselectedOptions=a(g,g.unselected),[{x:!1,y:!1,t:{},trace:g}]}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axis_ids":558,"../scatter/calc":928,"../scatter/colorscale_calc":930,"../scattergl/constants":982,"../scattergl/convert":983,"./scene_update":1042}],1036:[function(d,ne,ae){var w=d("../../lib"),v=d("../../plots/array_container_defaults"),M=d("./attributes"),T=d("../scatter/subtypes"),e=d("../scatter/marker_defaults"),a=d("../parcoords/merge_length"),n=d("../scattergl/helpers").isOpenSymbol;ne.exports=function(o,i,g,p){function y(h,x){return w.coerce(o,i,M,h,x)}var c=v(o,i,{name:"dimensions",handleItemDefaults:r}),b=y("diagonal.visible"),l=y("showupperhalf"),_=y("showlowerhalf"),s=a(i,c,"values");if(!s||!b&&!l&&!_){i.visible=!1;return}y("text"),y("hovertext"),y("hovertemplate"),y("xhoverformat"),y("yhoverformat"),e(o,i,g,p,y);var A=n(i.marker.symbol),m=T.isBubble(i);y("marker.line.width",A||m?1:0),t(o,i,p,y),w.coerceSelectionMarkerOpacity(i,y)};function r(f,o){function i(p,y){return w.coerce(f,o,M.dimensions,p,y)}i("label");var g=i("values");g&&g.length?i("visible"):o.visible=!1,i("axis.type"),i("axis.matches")}function t(f,o,i,g){var p=o.dimensions,y=p.length,c=o.showupperhalf,b=o.showlowerhalf,l=o.diagonal.visible,_,s,A=new Array(y),m=new Array(y);for(_=0;_<y;_++){var h=_?_+1:"";A[_]="x"+h,m[_]="y"+h}var x=g("xaxes",A),u=g("yaxes",m),L=o._diag=new Array(y);o._xaxes={},o._yaxes={};var S=[],k=[];function P(J,Z,Y,j){if(!!J){var re=J.charAt(0),se=i._splomAxes[re];if(o["_"+re+"axes"][J]=1,j.push(J),!(J in se)){var oe=se[J]={};Y&&(oe.label=Y.label||"",Y.visible&&Y.axis&&(Y.axis.type&&(oe.type=Y.axis.type),Y.axis.matches&&(oe.matches=Z)))}}}var z=!l&&!b,I=!l&&!c;for(o._axesDim={},_=0;_<y;_++){var D=p[_],R=_===0,O=_===y-1,F=R&&z||O&&I?void 0:x[_],V=R&&I||O&&z?void 0:u[_];P(F,V,D,S),P(V,F,D,k),L[_]=[F,V],o._axesDim[F]=_,o._axesDim[V]=_}for(_=0;_<S.length;_++)for(s=0;s<k.length;s++){var G=S[_]+k[s];(_>s&&c||_<s&&b||_===s&&(l||!b||!c))&&(i._splomSubplots[G]=1)}(!b||!l&&c&&b)&&(i._splomGridDflt.xside="bottom",i._splomGridDflt.yside="left")}},{"../../lib":503,"../../plots/array_container_defaults":549,"../parcoords/merge_length":898,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scattergl/helpers":987,"./attributes":1032}],1037:[function(d,ne,ae){var w=d("../../lib"),v=d("../scatter/colorscale_calc"),M=d("../scattergl/convert").markerStyle;ne.exports=function(e,a){var n=a.trace,r=e._fullLayout._splomScenes[n.uid];if(r){v(e,n),w.extendFlat(r.matrixOptions,M(n));var t=w.extendFlat({},r.matrixOptions,r.viewOpts);r.matrix.update(t,null)}}},{"../../lib":503,"../scatter/colorscale_calc":930,"../scattergl/convert":983}],1038:[function(d,ne,ae){ae.getDimIndex=function(v,M){for(var T=M._id,e=T.charAt(0),a={x:0,y:1}[e],n=v._visibleDims,r=0;r<n.length;r++){var t=n[r];if(v._diag[t][a]===T)return r}return!1}},{}],1039:[function(d,ne,ae){var w=d("./helpers"),v=d("../scattergl/hover").calcHover;function M(T,e,a){var n=T.cd,r=n[0].trace,t=T.scene,f=t.matrixOptions.cdata,o=T.xa,i=T.ya,g=o.c2p(e),p=i.c2p(a),y=T.distance,c=w.getDimIndex(r,o),b=w.getDimIndex(r,i);if(c===!1||b===!1)return[T];for(var l=f[c],_=f[b],s,A,m=y,h=0;h<l.length;h++){var x=l[h],u=_[h],L=o.c2p(x)-g,S=i.c2p(u)-p,k=Math.sqrt(L*L+S*S);k<m&&(m=A=k,s=h)}return T.index=s,T.distance=m,T.dxy=A,s===void 0?[T]:[v(T,l,_,r)]}ne.exports={hoverPoints:M}},{"../scattergl/hover":988,"./helpers":1038}],1040:[function(d,ne,ae){var w=d("./base_index");w.basePlotModule=d("./base_plot"),ne.exports=w},{"./base_index":1033,"./base_plot":1034}],1041:[function(d,ne,ae){var w=d("regl-splom"),v=d("../../lib"),M=d("../../plots/cartesian/axis_ids"),T=d("../../components/dragelement/helpers").selectMode;ne.exports=function(n,r,t){if(!!t.length)for(var f=0;f<t.length;f++)e(n,t[f][0])};function e(a,n){var r=a._fullLayout,t=r._size,f=n.trace,o=n.t,i=r._splomScenes[f.uid],g=i.matrixOptions,p=g.cdata,y=r._glcanvas.data()[0].regl,c=r.dragmode,b,l,_,s,A;if(p.length!==0){g.lower=f.showupperhalf,g.upper=f.showlowerhalf,g.diagonal=f.diagonal.visible;var m=f._visibleDims,h=p.length,x=i.viewOpts={};for(x.ranges=new Array(h),x.domains=new Array(h),A=0;A<m.length;A++){_=m[A];var u=x.ranges[A]=new Array(4),L=x.domains[A]=new Array(4);b=M.getFromId(a,f._diag[_][0]),b&&(u[0]=b._rl[0],u[2]=b._rl[1],L[0]=b.domain[0],L[2]=b.domain[1]),l=M.getFromId(a,f._diag[_][1]),l&&(u[1]=l._rl[0],u[3]=l._rl[1],L[1]=l.domain[0],L[3]=l.domain[1])}var S=a._context.plotGlPixelRatio,k=t.l*S,P=t.b*S,z=t.w*S,I=t.h*S;x.viewport=[k,P,z+k,I+P],i.matrix===!0&&(i.matrix=w(y));var D=r.clickmode.indexOf("select")>-1,R=T(c)||!!f.selectedpoints||D,O=!0;if(R){var F=f._length;if(f.selectedpoints){i.selectBatch=f.selectedpoints;var V=f.selectedpoints,G={};for(_=0;_<V.length;_++)G[V[_]]=!0;var J=[];for(_=0;_<F;_++)G[_]||J.push(_);i.unselectBatch=J}var Z=o.xpx=new Array(h),Y=o.ypx=new Array(h);for(A=0;A<m.length;A++){if(_=m[A],b=M.getFromId(a,f._diag[_][0]),b)for(Z[A]=new Array(F),s=0;s<F;s++)Z[A][s]=b.c2p(p[A][s]);if(l=M.getFromId(a,f._diag[_][1]),l)for(Y[A]=new Array(F),s=0;s<F;s++)Y[A][s]=l.c2p(p[A][s])}if(i.selectBatch.length||i.unselectBatch.length){var j=v.extendFlat({},g,i.unselectedOptions,x),re=v.extendFlat({},g,i.selectedOptions,x);i.matrix.update(j,re),O=!1}}else o.xpx=o.ypx=null;if(O){var se=v.extendFlat({},g,x);i.matrix.update(se,null)}}}},{"../../components/dragelement/helpers":384,"../../lib":503,"../../plots/cartesian/axis_ids":558,"regl-splom":282}],1042:[function(d,ne,ae){var w=d("../../lib");ne.exports=function(M,T){var e=M._fullLayout,a=T.uid,n=e._splomScenes;n||(n=e._splomScenes={});var r={dirty:!0,selectBatch:[],unselectBatch:[]},t={matrix:!1,selectBatch:[],unselectBatch:[]},f=n[T.uid];return f||(f=n[a]=w.extendFlat({},r,t),f.draw=function(){f.matrix&&f.matrix.draw&&(f.selectBatch.length||f.unselectBatch.length?f.matrix.draw(f.unselectBatch,f.selectBatch):f.matrix.draw()),f.dirty=!1},f.destroy=function(){f.matrix&&f.matrix.destroy&&f.matrix.destroy(),f.matrixOptions=null,f.selectBatch=null,f.unselectBatch=null,f=null}),f.dirty||w.extendFlat(f,r),f}},{"../../lib":503}],1043:[function(d,ne,ae){var w=d("../../lib"),v=d("../scatter/subtypes"),M=d("./helpers");ne.exports=function(e,a){var n=e.cd,r=n[0].trace,t=n[0].t,f=e.scene,o=f.matrixOptions.cdata,i=e.xaxis,g=e.yaxis,p=[];if(!f)return p;var y=!v.hasMarkers(r)&&!v.hasText(r);if(r.visible!==!0||y)return p;var c=M.getDimIndex(r,i),b=M.getDimIndex(r,g);if(c===!1||b===!1)return p;var l=t.xpx[c],_=t.ypx[b],s=o[c],A=o[b],m=[],h=[];if(a!==!1&&!a.degenerate)for(var x=0;x<s.length;x++)a.contains([l[x],_[x]],null,x,e)?(m.push(x),p.push({pointNumber:x,x:s[x],y:A[x]})):h.push(x);var u=f.matrixOptions;return!m.length&&!h.length?f.matrix.update(u,null):!f.selectBatch.length&&!f.unselectBatch.length&&f.matrix.update(f.unselectedOptions,w.extendFlat({},u,f.selectedOptions,f.viewOpts)),f.selectBatch=m,f.unselectBatch=h,p}},{"../../lib":503,"../scatter/subtypes":952,"./helpers":1038}],1044:[function(d,ne,ae){var w=d("../../components/colorscale/attributes"),v=d("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=d("../../plots/template_attributes").hovertemplateAttrs,T=d("../mesh3d/attributes"),e=d("../../plots/attributes"),a=d("../../lib/extend").extendFlat,n={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:M({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:v("u",1),vhoverformat:v("v",1),whoverformat:v("w",1),xhoverformat:v("x"),yhoverformat:v("y"),zhoverformat:v("z"),showlegend:a({},e.showlegend,{dflt:!1})};a(n,w("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var r=["opacity","lightposition","lighting"];r.forEach(function(t){n[t]=T[t]}),n.hoverinfo=a({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),n.transforms=void 0,ne.exports=n},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],1045:[function(d,ne,ae){var w=d("../../lib"),v=d("../../components/colorscale/calc");function M(n,r){r._len=Math.min(r.u.length,r.v.length,r.w.length,r.x.length,r.y.length,r.z.length),r._u=a(r.u,r._len),r._v=a(r.v,r._len),r._w=a(r.w,r._len),r._x=a(r.x,r._len),r._y=a(r.y,r._len),r._z=a(r.z,r._len);var t=T(r);r._gridFill=t.fill,r._Xs=t.Xs,r._Ys=t.Ys,r._Zs=t.Zs,r._len=t.len;var f=0,o,i,g;r.starts&&(o=a(r.starts.x||[]),i=a(r.starts.y||[]),g=a(r.starts.z||[]),f=Math.min(o.length,i.length,g.length)),r._startsX=o||[],r._startsY=i||[],r._startsZ=g||[];var p=0,y=1/0,c;for(c=0;c<r._len;c++){var b=r._u[c],l=r._v[c],_=r._w[c],s=Math.sqrt(b*b+l*l+_*_);p=Math.max(p,s),y=Math.min(y,s)}for(v(n,r,{vals:[y,p],containerStr:"",cLetter:"c"}),c=0;c<f;c++){var A=o[c];t.xMax=Math.max(t.xMax,A),t.xMin=Math.min(t.xMin,A);var m=i[c];t.yMax=Math.max(t.yMax,m),t.yMin=Math.min(t.yMin,m);var h=g[c];t.zMax=Math.max(t.zMax,h),t.zMin=Math.min(t.zMin,h)}r._slen=f,r._normMax=p,r._xbnds=[t.xMin,t.xMax],r._ybnds=[t.yMin,t.yMax],r._zbnds=[t.zMin,t.zMax]}function T(n){var r=n._x,t=n._y,f=n._z,o=n._len,i,g,p,y=-1/0,c=1/0,b=-1/0,l=1/0,_=-1/0,s=1/0,A="",m,h,x,u,L,S,k,P,z;for(o&&(u=r[0],S=t[0],P=f[0]),o>1&&(L=r[o-1],k=t[o-1],z=f[o-1]),i=0;i<o;i++)y=Math.max(y,r[i]),c=Math.min(c,r[i]),b=Math.max(b,t[i]),l=Math.min(l,t[i]),_=Math.max(_,f[i]),s=Math.min(s,f[i]),!m&&r[i]!==u&&(m=!0,A+="x"),!h&&t[i]!==S&&(h=!0,A+="y"),!x&&f[i]!==P&&(x=!0,A+="z");m||(A+="x"),h||(A+="y"),x||(A+="z");var I=e(n._x),D=e(n._y),R=e(n._z);A=A.replace("x",(u>L?"-":"+")+"x"),A=A.replace("y",(S>k?"-":"+")+"y"),A=A.replace("z",(P>z?"-":"+")+"z");var O=function(){o=0,I=[],D=[],R=[]};(!o||o<I.length*D.length*R.length)&&O();var F=function(ie){return ie==="x"?r:ie==="y"?t:f},V=function(ie){return ie==="x"?I:ie==="y"?D:R},G=function(ie){return ie[o-1]<ie[0]?-1:1},J=F(A[1]),Z=F(A[3]),Y=F(A[5]),j=V(A[1]).length,re=V(A[3]).length,se=V(A[5]).length,oe=!1,N=function(ie,le,ge){return j*(re*ie+le)+ge},U=G(F(A[1])),q=G(F(A[3])),Q=G(F(A[5]));for(i=0;i<se-1;i++){for(g=0;g<re-1;g++){for(p=0;p<j-1;p++){var W=N(i,g,p),X=N(i,g,p+1),ee=N(i,g+1,p),te=N(i+1,g,p);if((!(J[W]*U<J[X]*U)||!(Z[W]*q<Z[ee]*q)||!(Y[W]*Q<Y[te]*Q))&&(oe=!0),oe)break}if(oe)break}if(oe)break}return oe&&(w.warn("Encountered arbitrary coordinates! Unable to input data grid."),O()),{xMin:c,yMin:l,zMin:s,xMax:y,yMax:b,zMax:_,Xs:I,Ys:D,Zs:R,len:o,fill:A}}function e(n){return w.distinctVals(n).vals}function a(n,r){if(r===void 0&&(r=n.length),w.isTypedArray(n))return n.subarray(0,r);for(var t=[],f=0;f<r;f++)t[f]=+n[f];return t}ne.exports={calc:M,filter:a,processGrid:T}},{"../../components/colorscale/calc":374,"../../lib":503}],1046:[function(d,ne,ae){var w=d("../../../stackgl_modules").gl_streamtube3d,v=w.createTubeMesh,M=d("../../lib"),T=d("../../lib/gl_format_color").parseColorScale,e=d("../../components/colorscale").extractOpts,a=d("../../plots/gl3d/zip3"),n={xaxis:0,yaxis:1,zaxis:2};function r(p,y){this.scene=p,this.uid=y,this.mesh=null,this.data=null}var t=r.prototype;t.handlePick=function(p){var y=this.scene.fullSceneLayout,c=this.scene.dataScale;function b(s,A){var m=y[A],h=c[n[A]];return m.l2c(s)/h}if(p.object===this.mesh){var l=p.data.position,_=p.data.velocity;return p.traceCoordinate=[b(l[0],"xaxis"),b(l[1],"yaxis"),b(l[2],"zaxis"),b(_[0],"xaxis"),b(_[1],"yaxis"),b(_[2],"zaxis"),p.data.intensity*this.data._normMax,p.data.divergence],p.textLabel=this.data.hovertext||this.data.text,!0}};function f(p){var y=p.length,c;return y>2?c=p.slice(1,y-1):y===2?c=[(p[0]+p[1])/2]:c=p,c}function o(p){var y=p.length;return y===1?[.5,.5]:[p[1]-p[0],p[y-1]-p[y-2]]}function i(p,y){var c=p.fullSceneLayout,b=p.dataScale,l=y._len,_={};function s(re,se){var oe=c[se],N=b[n[se]];return M.simpleMap(re,function(U){return oe.d2l(U)*N})}if(_.vectors=a(s(y._u,"xaxis"),s(y._v,"yaxis"),s(y._w,"zaxis"),l),!l)return{positions:[],cells:[]};var A=s(y._Xs,"xaxis"),m=s(y._Ys,"yaxis"),h=s(y._Zs,"zaxis");_.meshgrid=[A,m,h],_.gridFill=y._gridFill;var x=y._slen;if(x)_.startingPositions=a(s(y._startsX,"xaxis"),s(y._startsY,"yaxis"),s(y._startsZ,"zaxis"));else{for(var u=m[0],L=f(A),S=f(h),k=new Array(L.length*S.length),P=0,z=0;z<L.length;z++)for(var I=0;I<S.length;I++)k[P++]=[L[z],u,S[I]];_.startingPositions=k}_.colormap=T(y),_.tubeSize=y.sizeref,_.maxLength=y.maxdisplayed;var D=s(y._xbnds,"xaxis"),R=s(y._ybnds,"yaxis"),O=s(y._zbnds,"zaxis"),F=o(A),V=o(m),G=o(h),J=[[D[0]-F[0],R[0]-V[0],O[0]-G[0]],[D[1]+F[1],R[1]+V[1],O[1]+G[1]]],Z=w(_,J),Y=e(y);Z.vertexIntensityBounds=[Y.min/y._normMax,Y.max/y._normMax];var j=y.lightposition;return Z.lightPosition=[j.x,j.y,j.z],Z.ambient=y.lighting.ambient,Z.diffuse=y.lighting.diffuse,Z.specular=y.lighting.specular,Z.roughness=y.lighting.roughness,Z.fresnel=y.lighting.fresnel,Z.opacity=y.opacity,y._pad=Z.tubeScale*y.sizeref*2,Z}t.update=function(p){this.data=p;var y=i(this.scene,p);this.mesh.update(y)},t.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function g(p,y){var c=p.glplot.gl,b=i(p,y),l=v(c,b),_=new r(p,y.uid);return _.mesh=l,_.data=y,l._trace=_,p.glplot.add(l),_}ne.exports=g},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/gl3d/zip3":609}],1047:[function(d,ne,ae){var w=d("../../lib"),v=d("../../components/colorscale/defaults"),M=d("./attributes");ne.exports=function(e,a,n,r){function t(c,b){return w.coerce(e,a,M,c,b)}var f=t("u"),o=t("v"),i=t("w"),g=t("x"),p=t("y"),y=t("z");if(!f||!f.length||!o||!o.length||!i||!i.length||!g||!g.length||!p||!p.length||!y||!y.length){a.visible=!1;return}t("starts.x"),t("starts.y"),t("starts.z"),t("maxdisplayed"),t("sizeref"),t("lighting.ambient"),t("lighting.diffuse"),t("lighting.specular"),t("lighting.roughness"),t("lighting.fresnel"),t("lightposition.x"),t("lightposition.y"),t("lightposition.z"),v(e,a,r,t,{prefix:"",cLetter:"c"}),t("text"),t("hovertext"),t("hovertemplate"),t("uhoverformat"),t("vhoverformat"),t("whoverformat"),t("xhoverformat"),t("yhoverformat"),t("zhoverformat"),a._length=null}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":1044}],1048:[function(d,ne,ae){ne.exports={moduleType:"trace",name:"streamtube",basePlotModule:d("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:d("./attributes"),supplyDefaults:d("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:d("./calc").calc,plot:d("./convert"),eventData:function(w,v){return w.tubex=w.x,w.tubey=w.y,w.tubez=w.z,w.tubeu=v.traceCoordinate[3],w.tubev=v.traceCoordinate[4],w.tubew=v.traceCoordinate[5],w.norm=v.traceCoordinate[6],w.divergence=v.traceCoordinate[7],delete w.x,delete w.y,delete w.z,w},meta:{}}},{"../../plots/gl3d":598,"./attributes":1044,"./calc":1045,"./convert":1046,"./defaults":1047}],1049:[function(d,ne,ae){var w=d("../../plots/attributes"),v=d("../../plots/template_attributes").hovertemplateAttrs,M=d("../../plots/template_attributes").texttemplateAttrs,T=d("../../components/colorscale/attributes"),e=d("../../plots/domain").attributes,a=d("../pie/attributes"),n=d("./constants"),r=d("../../lib/extend").extendFlat;ne.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:r({colors:{valType:"data_array",editType:"calc"},line:{color:r({},a.marker.line.color,{dflt:null}),width:r({},a.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},T("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:a.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:M({editType:"plot"},{keys:n.eventDataKeys.concat(["label","value"])}),hovertext:a.hovertext,hoverinfo:r({},w.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:v({},{keys:n.eventDataKeys}),textfont:a.textfont,insidetextorientation:a.insidetextorientation,insidetextfont:a.insidetextfont,outsidetextfont:r({},a.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:a.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:e({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":901,"./constants":1052}],1050:[function(d,ne,ae){var w=d("../../plots/plots");ae.name="sunburst",ae.plot=function(v,M,T,e){w.plotBasePlot(ae.name,v,M,T,e)},ae.clean=function(v,M,T,e){w.cleanBasePlot(ae.name,v,M,T,e)}},{"../../plots/plots":619}],1051:[function(d,ne,ae){var w=d("d3-hierarchy"),v=d("fast-isnumeric"),M=d("../../lib"),T=d("../../components/colorscale").makeColorScaleFuncFromTrace,e=d("../pie/calc").makePullColorFn,a=d("../pie/calc").generateExtendedColors,n=d("../../components/colorscale").calc,r=d("../../constants/numerical").ALMOST_EQUAL,t={},f={},o={};ae.calc=function(g,p){var y=g._fullLayout,c=p.ids,b=M.isArrayOrTypedArray(c),l=p.labels,_=p.parents,s=p.values,A=M.isArrayOrTypedArray(s),m=[],h={},x={},u=function(U,q){h[U]?h[U].push(q):h[U]=[q],x[q]=1},L=function(U){return U||typeof U=="number"},S=function(U){return!A||v(s[U])&&s[U]>=0},k,P,z;b?(k=Math.min(c.length,_.length),P=function(U){return L(c[U])&&S(U)},z=function(U){return String(c[U])}):(k=Math.min(l.length,_.length),P=function(U){return L(l[U])&&S(U)},z=function(U){return String(l[U])}),A&&(k=Math.min(k,s.length));for(var I=0;I<k;I++)if(P(I)){var D=z(I),R=L(_[I])?String(_[I]):"",O={i:I,id:D,pid:R,label:L(l[I])?String(l[I]):""};A&&(O.v=+s[I]),m.push(O),u(R,D)}if(h[""]){if(h[""].length>1){for(var G=M.randstr(),J=0;J<m.length;J++)m[J].pid===""&&(m[J].pid=G);m.unshift({hasMultipleRoots:!0,id:G,pid:"",label:""})}}else{var F=[],V;for(V in h)x[V]||F.push(V);if(F.length===1)V=F[0],m.unshift({hasImpliedRoot:!0,id:V,pid:"",label:V});else return M.warn(["Multiple implied roots, cannot build",p.type,"hierarchy of",p.name+".","These roots include:",F.join(", ")].join(" "))}var Z;try{Z=w.stratify().id(function(U){return U.id}).parentId(function(U){return U.pid})(m)}catch(U){return M.warn(["Failed to build",p.type,"hierarchy of",p.name+".","Error:",U.message].join(" "))}var Y=w.hierarchy(Z),j=!1;if(A)switch(p.branchvalues){case"remainder":Y.sum(function(U){return U.data.v});break;case"total":Y.each(function(U){var q=U.data.data,Q=q.v;if(U.children){var W=U.children.reduce(function(X,ee){return X+ee.data.data.v},0);if((q.hasImpliedRoot||q.hasMultipleRoots)&&(Q=W),Q<W*r)return j=!0,M.warn(["Total value for node",U.data.data.id,"of",p.name,"is smaller than the sum of its children.",`
parent value =`,Q,`
children sum =`,W].join(" "))}U.value=Q});break}else i(Y,p,{branches:p.count.indexOf("branches")!==-1,leaves:p.count.indexOf("leaves")!==-1});if(!j){p.sort&&Y.sort(function(U,q){return q.value-U.value});var re,se,oe=p.marker.colors||[],N=!!oe.length;return p._hasColorscale?(N||(oe=A?p.values:p._values),n(g,p,{vals:oe,containerStr:"marker",cLetter:"c"}),se=T(p.marker)):re=e(y["_"+p.type+"colormap"]),Y.each(function(U){var q=U.data.data;q.color=p._hasColorscale?se(oe[q.i]):re(oe[q.i],q.id)}),m[0].hierarchy=Y,m}},ae._runCrossTraceCalc=function(g,p){var y=p._fullLayout,c=p.calcdata,b=y[g+"colorway"],l=y["_"+g+"colormap"];y["extend"+g+"colors"]&&(b=a(b,g==="icicle"?o:g==="treemap"?f:t));var _=0,s;function A(u){var L=u.data.data,S=L.id;L.color===!1&&(l[S]?L.color=l[S]:u.parent?u.parent.parent?L.color=u.parent.data.data.color:(l[S]=L.color=b[_%b.length],_++):L.color=s)}for(var m=0;m<c.length;m++){var h=c[m],x=h[0];x.trace.type===g&&x.hierarchy&&(s=x.trace.root.color,x.hierarchy.each(A))}},ae.crossTraceCalc=function(g){return ae._runCrossTraceCalc("sunburst",g)};function i(g,p,y){var c=0,b=g.children;if(b){for(var l=b.length,_=0;_<l;_++)c+=i(b[_],p,y);y.branches&&c++}else y.leaves&&c++;return g.value=g.data.data.value=c,p._values||(p._values=[]),p._values[g.data.data.i]=c,c}},{"../../components/colorscale":378,"../../constants/numerical":479,"../../lib":503,"../pie/calc":903,"d3-hierarchy":115,"fast-isnumeric":190}],1052:[function(d,ne,ae){ne.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},{}],1053:[function(d,ne,ae){var w=d("../../lib"),v=d("./attributes"),M=d("../../plots/domain").defaults,T=d("../bar/defaults").handleText,e=d("../../components/colorscale"),a=e.hasColorscale,n=e.handleDefaults;ne.exports=function(t,f,o,i){function g(A,m){return w.coerce(t,f,v,A,m)}var p=g("labels"),y=g("parents");if(!p||!p.length||!y||!y.length){f.visible=!1;return}var c=g("values");c&&c.length?g("branchvalues"):g("count"),g("level"),g("maxdepth");var b=g("marker.line.width");b&&g("marker.line.color",i.paper_bgcolor),g("marker.colors");var l=f._hasColorscale=a(t,"marker","colors")||(t.marker||{}).coloraxis;l&&n(t,f,i,g,{prefix:"marker.",cLetter:"c"}),g("leaf.opacity",l?1:.7);var _=g("text");g("texttemplate"),f.texttemplate||g("textinfo",Array.isArray(_)?"text+label":"label"),g("hovertext"),g("hovertemplate");var s="auto";T(t,f,i,g,s,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),g("insidetextorientation"),g("sort"),g("rotation"),g("root.color"),M(f,i,g),f._length=null}},{"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"./attributes":1049}],1054:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../registry"),M=d("../../components/fx/helpers").appendArrayPointValue,T=d("../../components/fx"),e=d("../../lib"),a=d("../../lib/events"),n=d("./helpers"),r=d("../pie/helpers"),t=r.formatPieValue;ne.exports=function(i,g,p,y,c){var b=y[0],l=b.trace,_=b.hierarchy,s=l.type==="sunburst",A=l.type==="treemap"||l.type==="icicle";"_hasHoverLabel"in l||(l._hasHoverLabel=!1),"_hasHoverEvent"in l||(l._hasHoverEvent=!1);var m=function(u){var L=p._fullLayout;if(!(p._dragging||L.hovermode===!1)){var S=p._fullData[l.index],k=u.data.data,P=k.i,z=n.isHierarchyRoot(u),I=n.getParent(_,u),D=n.getValue(u),R=function(X){return e.castOption(S,P,X)},O=R("hovertemplate"),F=T.castHoverinfo(S,L,P),V=L.separators,G;if(O||F&&F!=="none"&&F!=="skip"){var J,Z;s&&(J=b.cx+u.pxmid[0]*(1-u.rInscribed),Z=b.cy+u.pxmid[1]*(1-u.rInscribed)),A&&(J=u._hoverX,Z=u._hoverY);var Y={},j=[],re=[],se=function(X){return j.indexOf(X)!==-1};F&&(j=F==="all"?S._module.attributes.hoverinfo.flags:F.split("+")),Y.label=k.label,se("label")&&Y.label&&re.push(Y.label),k.hasOwnProperty("v")&&(Y.value=k.v,Y.valueLabel=t(Y.value,V),se("value")&&re.push(Y.valueLabel)),Y.currentPath=u.currentPath=n.getPath(u.data),se("current path")&&!z&&re.push(Y.currentPath);var oe,N=[],U=function(){N.indexOf(oe)===-1&&(re.push(oe),N.push(oe))};Y.percentParent=u.percentParent=D/n.getValue(I),Y.parent=u.parentString=n.getPtLabel(I),se("percent parent")&&(oe=n.formatPercent(Y.percentParent,V)+" of "+Y.parent,U()),Y.percentEntry=u.percentEntry=D/n.getValue(g),Y.entry=u.entry=n.getPtLabel(g),se("percent entry")&&!z&&!u.onPathbar&&(oe=n.formatPercent(Y.percentEntry,V)+" of "+Y.entry,U()),Y.percentRoot=u.percentRoot=D/n.getValue(_),Y.root=u.root=n.getPtLabel(_),se("percent root")&&!z&&(oe=n.formatPercent(Y.percentRoot,V)+" of "+Y.root,U()),Y.text=R("hovertext")||R("text"),se("text")&&(oe=Y.text,e.isValidTextValue(oe)&&re.push(oe)),G=[f(u,S,c.eventDataKeys)];var q={trace:S,y:Z,_x0:u._x0,_x1:u._x1,_y0:u._y0,_y1:u._y1,text:re.join("<br>"),name:O||se("name")?S.name:void 0,color:R("hoverlabel.bgcolor")||k.color,borderColor:R("hoverlabel.bordercolor"),fontFamily:R("hoverlabel.font.family"),fontSize:R("hoverlabel.font.size"),fontColor:R("hoverlabel.font.color"),nameLength:R("hoverlabel.namelength"),textAlign:R("hoverlabel.align"),hovertemplate:O,hovertemplateLabels:Y,eventData:G};s&&(q.x0=J-u.rInscribed*u.rpx1,q.x1=J+u.rInscribed*u.rpx1,q.idealAlign=u.pxmid[0]<0?"left":"right"),A&&(q.x=J,q.idealAlign=J<0?"left":"right");var Q=[];T.loneHover(q,{container:L._hoverlayer.node(),outerContainer:L._paper.node(),gd:p,inOut_bbox:Q}),G[0].bbox=Q[0],l._hasHoverLabel=!0}if(A){var W=i.select("path.surface");c.styleOne(W,u,S,{hovered:!0})}l._hasHoverEvent=!0,p.emit("plotly_hover",{points:G||[f(u,S,c.eventDataKeys)],event:w.event})}},h=function(u){var L=p._fullLayout,S=p._fullData[l.index],k=w.select(this).datum();if(l._hasHoverEvent&&(u.originalEvent=w.event,p.emit("plotly_unhover",{points:[f(k,S,c.eventDataKeys)],event:w.event}),l._hasHoverEvent=!1),l._hasHoverLabel&&(T.loneUnhover(L._hoverlayer.node()),l._hasHoverLabel=!1),A){var P=i.select("path.surface");c.styleOne(P,k,S,{hovered:!1})}},x=function(u){var L=p._fullLayout,S=p._fullData[l.index],k=s&&(n.isHierarchyRoot(u)||n.isLeaf(u)),P=n.getPtId(u),z=n.isEntry(u)?n.findEntryWithChild(_,P):n.findEntryWithLevel(_,P),I=n.getPtId(z),D={points:[f(u,S,c.eventDataKeys)],event:w.event};k||(D.nextLevel=I);var R=a.triggerHandler(p,"plotly_"+l.type+"click",D);if(R!==!1&&L.hovermode&&(p._hoverdata=[f(u,S,c.eventDataKeys)],T.click(p,w.event)),!k&&R!==!1&&!p._dragging&&!p._transitioning){v.call("_storeDirectGUIEdit",S,L._tracePreGUI[S.uid],{level:S.level});var O={data:[{level:I}],traces:[l.index]},F={frame:{redraw:!1,duration:c.transitionTime},transition:{duration:c.transitionTime,easing:c.transitionEasing},mode:"immediate",fromcurrent:!0};T.loneUnhover(L._hoverlayer.node()),v.call("animate",p,O,F)}};i.on("mouseover",m),i.on("mouseout",h),i.on("click",x)};function f(o,i,g){for(var p=o.data.data,y={curveNumber:i.index,pointNumber:p.i,data:i._input,fullData:i},c=0;c<g.length;c++){var b=g[c];b in o&&(y[b]=o[b])}return"parentString"in o&&!n.isHierarchyRoot(o)&&(y.parent=o.parentString),M(y,i,p.i),y}},{"../../components/fx":406,"../../components/fx/helpers":402,"../../lib":503,"../../lib/events":492,"../../registry":638,"../pie/helpers":906,"./helpers":1055,"@plotly/d3":58}],1055:[function(d,ne,ae){var w=d("../../lib"),v=d("../../components/color"),M=d("../../lib/setcursor"),T=d("../pie/helpers");ae.findEntryWithLevel=function(r,t){var f;return t&&r.eachAfter(function(o){if(ae.getPtId(o)===t)return f=o.copy()}),f||r},ae.findEntryWithChild=function(r,t){var f;return r.eachAfter(function(o){for(var i=o.children||[],g=0;g<i.length;g++){var p=i[g];if(ae.getPtId(p)===t)return f=o.copy()}}),f||r},ae.isEntry=function(r){return!r.parent},ae.isLeaf=function(r){return!r.children},ae.getPtId=function(r){return r.data.data.id},ae.getPtLabel=function(r){return r.data.data.label},ae.getValue=function(r){return r.value},ae.isHierarchyRoot=function(r){return n(r)===""},ae.setSliceCursor=function(r,t,f){var o=f.isTransitioning;if(!o){var i=r.datum();o=f.hideOnRoot&&ae.isHierarchyRoot(i)||f.hideOnLeaves&&ae.isLeaf(i)}M(r,o?null:"pointer")};function e(r,t,f){return{color:ae.getOutsideTextFontKey("color",r,t,f),family:ae.getOutsideTextFontKey("family",r,t,f),size:ae.getOutsideTextFontKey("size",r,t,f)}}function a(r,t,f,o){var i=(o||{}).onPathbar,g=t.data.data,p=g.i,y=w.castOption(r,p,(i?"pathbar.textfont":"insidetextfont")+".color");return!y&&r._input.textfont&&(y=w.castOption(r._input,p,"textfont.color")),{color:y||v.contrast(g.color),family:ae.getInsideTextFontKey("family",r,t,f,o),size:ae.getInsideTextFontKey("size",r,t,f,o)}}ae.getInsideTextFontKey=function(r,t,f,o,i){var g=(i||{}).onPathbar,p=g?"pathbar.textfont":"insidetextfont",y=f.data.data.i;return w.castOption(t,y,p+"."+r)||w.castOption(t,y,"textfont."+r)||o.size},ae.getOutsideTextFontKey=function(r,t,f,o){var i=f.data.data.i;return w.castOption(t,i,"outsidetextfont."+r)||w.castOption(t,i,"textfont."+r)||o.size},ae.isOutsideText=function(r,t){return!r._hasColorscale&&ae.isHierarchyRoot(t)},ae.determineTextFont=function(r,t,f,o){return ae.isOutsideText(r,t)?e(r,t,f):a(r,t,f,o)},ae.hasTransition=function(r){return!!(r&&r.duration>0)},ae.getMaxDepth=function(r){return r.maxdepth>=0?r.maxdepth:1/0},ae.isHeader=function(r,t){return!(ae.isLeaf(r)||r.depth===t._maxDepth-1)};function n(r){return r.data.data.pid}ae.getParent=function(r,t){return ae.findEntryWithLevel(r,n(t))},ae.listPath=function(r,t){var f=r.parent;if(!f)return[];var o=t?[f.data[t]]:[f];return ae.listPath(f,t).concat(o)},ae.getPath=function(r){return ae.listPath(r,"label").join("/")+"/"},ae.formatValue=T.formatPieValue,ae.formatPercent=function(r,t){var f=w.formatPercent(r,0);return f==="0%"&&(f=T.formatPiePercent(r,t)),f}},{"../../components/color":366,"../../lib":503,"../../lib/setcursor":524,"../pie/helpers":906}],1056:[function(d,ne,ae){ne.exports={moduleType:"trace",name:"sunburst",basePlotModule:d("./base_plot"),categories:[],animatable:!0,attributes:d("./attributes"),layoutAttributes:d("./layout_attributes"),supplyDefaults:d("./defaults"),supplyLayoutDefaults:d("./layout_defaults"),calc:d("./calc").calc,crossTraceCalc:d("./calc").crossTraceCalc,plot:d("./plot").plot,style:d("./style").style,colorbar:d("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":945,"./attributes":1049,"./base_plot":1050,"./calc":1051,"./defaults":1053,"./layout_attributes":1057,"./layout_defaults":1058,"./plot":1059,"./style":1060}],1057:[function(d,ne,ae){ne.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1058:[function(d,ne,ae){var w=d("../../lib"),v=d("./layout_attributes");ne.exports=function(T,e){function a(n,r){return w.coerce(T,e,v,n,r)}a("sunburstcolorway",e.colorway),a("extendsunburstcolors")}},{"../../lib":503,"./layout_attributes":1057}],1059:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("d3-hierarchy"),M=d("d3-interpolate").interpolate,T=d("../../components/drawing"),e=d("../../lib"),a=d("../../lib/svg_text_utils"),n=d("../bar/uniform_text"),r=n.recordMinTextSize,t=n.clearMinTextSize,f=d("../pie/plot"),o=d("../pie/helpers").getRotationAngle,i=f.computeTransform,g=f.transformInsideText,p=d("./style").styleOne,y=d("../bar/style").resizeText,c=d("./fx"),b=d("./constants"),l=d("./helpers");ae.plot=function(x,u,L,S){var k=x._fullLayout,P=k._sunburstlayer,z,I,D=!L,R=!k.uniformtext.mode&&l.hasTransition(L);if(t("sunburst",k),z=P.selectAll("g.trace.sunburst").data(u,function(F){return F[0].trace.uid}),z.enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),z.order(),R){S&&(I=S());var O=w.transition().duration(L.duration).ease(L.easing).each("end",function(){I&&I()}).each("interrupt",function(){I&&I()});O.each(function(){P.selectAll("g.trace").each(function(F){_(x,F,this,L)})})}else z.each(function(F){_(x,F,this,L)}),k.uniformtext.mode&&y(x,k._sunburstlayer.selectAll(".trace"),"sunburst");D&&z.exit().remove()};function _(x,u,L,S){var k=x._fullLayout,P=!k.uniformtext.mode&&l.hasTransition(S),z=w.select(L),I=z.selectAll("g.slice"),D=u[0],R=D.trace,O=D.hierarchy,F=l.findEntryWithLevel(O,R.level),V=l.getMaxDepth(R),G=k._size,J=R.domain,Z=G.w*(J.x[1]-J.x[0]),Y=G.h*(J.y[1]-J.y[0]),j=.5*Math.min(Z,Y),re=D.cx=G.l+G.w*(J.x[1]+J.x[0])/2,se=D.cy=G.t+G.h*(1-J.y[0])-Y/2;if(!F)return I.remove();var oe=null,N={};P&&I.each(function(xe){N[l.getPtId(xe)]={rpx0:xe.rpx0,rpx1:xe.rpx1,x0:xe.x0,x1:xe.x1,transform:xe.transform},!oe&&l.isEntry(xe)&&(oe=xe)});var U=s(F).descendants(),q=F.height+1,Q=0,W=V;D.hasMultipleRoots&&l.isHierarchyRoot(F)&&(U=U.slice(1),q-=1,Q=1,W+=1),U=U.filter(function(xe){return xe.y1<=W});var X=o(R.rotation);X&&U.forEach(function(xe){xe.x0+=X,xe.x1+=X});var ee=Math.min(q,V),te=function(xe){return(xe-Q)/ee*j},ie=function(xe,Pe){return[xe*Math.cos(Pe),-xe*Math.sin(Pe)]},le=function(xe){return e.pathAnnulus(xe.rpx0,xe.rpx1,xe.x0,xe.x1,re,se)},ge=function(xe){return re+m(xe)[0]*(xe.transform.rCenter||0)+(xe.transform.x||0)},fe=function(xe){return se+m(xe)[1]*(xe.transform.rCenter||0)+(xe.transform.y||0)};I=I.data(U,l.getPtId),I.enter().append("g").classed("slice",!0),P?I.exit().transition().each(function(){var xe=w.select(this),Pe=xe.select("path.surface");Pe.transition().attrTween("d",function(Qe){var Fe=_e(Qe);return function(Le){return le(Fe(Le))}});var Ve=xe.select("g.slicetext");Ve.attr("opacity",0)}).remove():I.exit().remove(),I.order();var pe=null;if(P&&oe){var ye=l.getPtId(oe);I.each(function(xe){pe===null&&l.getPtId(xe)===ye&&(pe=xe.x1)})}var Te=I;P&&(Te=Te.transition().each("end",function(){var xe=w.select(this);l.setSliceCursor(xe,x,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),Te.each(function(xe){var Pe=w.select(this),Ve=e.ensureSingle(Pe,"path","surface",function(Dt){Dt.style("pointer-events","all")});xe.rpx0=te(xe.y0),xe.rpx1=te(xe.y1),xe.xmid=(xe.x0+xe.x1)/2,xe.pxmid=ie(xe.rpx1,xe.xmid),xe.midangle=-(xe.xmid-Math.PI/2),xe.startangle=-(xe.x0-Math.PI/2),xe.stopangle=-(xe.x1-Math.PI/2),xe.halfangle=.5*Math.min(e.angleDelta(xe.x0,xe.x1)||Math.PI,Math.PI),xe.ring=1-xe.rpx0/xe.rpx1,xe.rInscribed=A(xe),P?Ve.transition().attrTween("d",function(Dt){var Xt=De(Dt);return function(At){return le(Xt(At))}}):Ve.attr("d",le),Pe.call(c,F,x,u,{eventDataKeys:b.eventDataKeys,transitionTime:b.CLICK_TRANSITION_TIME,transitionEasing:b.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,x,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:x._transitioning}),Ve.call(p,xe,R);var Qe=e.ensureSingle(Pe,"g","slicetext"),Fe=e.ensureSingle(Qe,"text","",function(Dt){Dt.attr("data-notex",1)}),Le=e.ensureUniformFontSize(x,l.determineTextFont(R,xe,k.font));Fe.text(ae.formatSliceLabel(xe,F,R,u,k)).classed("slicetext",!0).attr("text-anchor","middle").call(T.font,Le).call(a.convertToTspans,x);var Ne=T.bBox(Fe.node());xe.transform=g(Ne,xe,D),xe.transform.targetX=ge(xe),xe.transform.targetY=fe(xe);var dt=function(Dt,Xt){var At=Dt.transform;return i(At,Xt),At.fontSize=Le.size,r(R.type,At,k),e.getTextTransform(At)};P?Fe.transition().attrTween("transform",function(Dt){var Xt=Be(Dt);return function(At){return dt(Xt(At),Ne)}}):Fe.attr("transform",dt(xe,Ne))});function _e(xe){var Pe=l.getPtId(xe),Ve=N[Pe],Qe=N[l.getPtId(F)],Fe;if(Qe){var Le=(xe.x1>Qe.x1?2*Math.PI:0)+X;Fe=xe.rpx1<Qe.rpx1?{x0:xe.x0,x1:xe.x1,rpx0:0,rpx1:0}:{x0:Le,x1:Le,rpx0:xe.rpx0,rpx1:xe.rpx1}}else{var Ne,dt=l.getPtId(xe.parent);I.each(function(Ut){if(l.getPtId(Ut)===dt)return Ne=Ut});var Dt=Ne.children,Xt;Dt.forEach(function(Ut,Ct){if(l.getPtId(Ut)===Pe)return Xt=Ct});var At=Dt.length,zt=M(Ne.x0,Ne.x1);Fe={rpx0:j,rpx1:j,x0:zt(Xt/At),x1:zt((Xt+1)/At)}}return M(Ve,Fe)}function De(xe){var Pe=N[l.getPtId(xe)],Ve,Qe={x0:xe.x0,x1:xe.x1,rpx0:xe.rpx0,rpx1:xe.rpx1};if(Pe)Ve=Pe;else if(oe)if(xe.parent)if(pe){var Fe=(xe.x1>pe?2*Math.PI:0)+X;Ve={x0:Fe,x1:Fe}}else Ve={rpx0:j,rpx1:j},e.extendFlat(Ve,Ue(xe));else Ve={rpx0:0,rpx1:0};else Ve={x0:X,x1:X};return M(Ve,Qe)}function Be(xe){var Pe=N[l.getPtId(xe)],Ve,Qe=xe.transform;if(Pe)Ve=Pe;else if(Ve={rpx1:xe.rpx1,transform:{textPosAngle:Qe.textPosAngle,scale:0,rotate:Qe.rotate,rCenter:Qe.rCenter,x:Qe.x,y:Qe.y}},oe)if(xe.parent)if(pe){var Fe=xe.x1>pe?2*Math.PI:0;Ve.x0=Ve.x1=Fe}else e.extendFlat(Ve,Ue(xe));else Ve.x0=Ve.x1=X;else Ve.x0=Ve.x1=X;var Le=M(Ve.transform.textPosAngle,xe.transform.textPosAngle),Ne=M(Ve.rpx1,xe.rpx1),dt=M(Ve.x0,xe.x0),Dt=M(Ve.x1,xe.x1),Xt=M(Ve.transform.scale,Qe.scale),At=M(Ve.transform.rotate,Qe.rotate),zt=Qe.rCenter===0?3:Ve.transform.rCenter===0?1/3:1,Ut=M(Ve.transform.rCenter,Qe.rCenter),Ct=function(Mt){return Ut(Math.pow(Mt,zt))};return function(Mt){var rt=Ne(Mt),ct=dt(Mt),Ze=Dt(Mt),ke=Ct(Mt),Ge=ie(rt,(ct+Ze)/2),Je=Le(Mt),ot={pxmid:Ge,rpx1:rt,transform:{textPosAngle:Je,rCenter:ke,x:Qe.x,y:Qe.y}};return r(R.type,Qe,k),{transform:{targetX:ge(ot),targetY:fe(ot),scale:Xt(Mt),rotate:At(Mt),rCenter:ke}}}}function Ue(xe){var Pe=xe.parent,Ve=N[l.getPtId(Pe)],Qe={};if(Ve){var Fe=Pe.children,Le=Fe.indexOf(xe),Ne=Fe.length,dt=M(Ve.x0,Ve.x1);Qe.x0=dt(Le/Ne),Qe.x1=dt(Le/Ne)}else Qe.x0=Qe.x1=0;return Qe}}function s(x){return v.partition().size([2*Math.PI,x.height+1])(x)}ae.formatSliceLabel=function(x,u,L,S,k){var P=L.texttemplate,z=L.textinfo;if(!P&&(!z||z==="none"))return"";var I=k.separators,D=S[0],R=x.data.data,O=D.hierarchy,F=l.isHierarchyRoot(x),V=l.getParent(O,x),G=l.getValue(x);if(!P){var J=z.split("+"),Z=function(W){return J.indexOf(W)!==-1},Y=[],j;if(Z("label")&&R.label&&Y.push(R.label),R.hasOwnProperty("v")&&Z("value")&&Y.push(l.formatValue(R.v,I)),!F){Z("current path")&&Y.push(l.getPath(x.data));var re=0;Z("percent parent")&&re++,Z("percent entry")&&re++,Z("percent root")&&re++;var se=re>1;if(re){var oe,N=function(W){j=l.formatPercent(oe,I),se&&(j+=" of "+W),Y.push(j)};Z("percent parent")&&!F&&(oe=G/l.getValue(V),N("parent")),Z("percent entry")&&(oe=G/l.getValue(u),N("entry")),Z("percent root")&&(oe=G/l.getValue(O),N("root"))}}return Z("text")&&(j=e.castOption(L,R.i,"text"),e.isValidTextValue(j)&&Y.push(j)),Y.join("<br>")}var U=e.castOption(L,R.i,"texttemplate");if(!U)return"";var q={};R.label&&(q.label=R.label),R.hasOwnProperty("v")&&(q.value=R.v,q.valueLabel=l.formatValue(R.v,I)),q.currentPath=l.getPath(x.data),F||(q.percentParent=G/l.getValue(V),q.percentParentLabel=l.formatPercent(q.percentParent,I),q.parent=l.getPtLabel(V)),q.percentEntry=G/l.getValue(u),q.percentEntryLabel=l.formatPercent(q.percentEntry,I),q.entry=l.getPtLabel(u),q.percentRoot=G/l.getValue(O),q.percentRootLabel=l.formatPercent(q.percentRoot,I),q.root=l.getPtLabel(O),R.hasOwnProperty("color")&&(q.color=R.color);var Q=e.castOption(L,R.i,"text");return(e.isValidTextValue(Q)||Q==="")&&(q.text=Q),q.customdata=e.castOption(L,R.i,"customdata"),e.texttemplateString(U,q,k._d3locale,q,L._meta||{})};function A(x){return x.rpx0===0&&e.isFullCircle([x.x0,x.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(x.halfangle)),x.ring/2))}function m(x){return h(x.rpx1,x.transform.textPosAngle)}function h(x,u){return[x*Math.sin(u),-x*Math.cos(u)]}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../bar/style":662,"../bar/uniform_text":664,"../pie/helpers":906,"../pie/plot":910,"./constants":1052,"./fx":1054,"./helpers":1055,"./style":1060,"@plotly/d3":58,"d3-hierarchy":115,"d3-interpolate":116}],1060:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../components/color"),M=d("../../lib"),T=d("../bar/uniform_text").resizeText;function e(n){var r=n._fullLayout._sunburstlayer.selectAll(".trace");T(n,r,"sunburst"),r.each(function(t){var f=w.select(this),o=t[0],i=o.trace;f.style("opacity",i.opacity),f.selectAll("path.surface").each(function(g){w.select(this).call(a,g,i)})})}function a(n,r,t){var f=r.data.data,o=!r.children,i=f.i,g=M.castOption(t,i,"marker.line.color")||v.defaultLine,p=M.castOption(t,i,"marker.line.width")||0;n.style("stroke-width",p).call(v.fill,f.color).call(v.stroke,g).style("opacity",o?t.leaf.opacity:null)}ne.exports={style:e,styleOne:a}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"@plotly/d3":58}],1061:[function(d,ne,ae){var w=d("../../components/color"),v=d("../../components/colorscale/attributes"),M=d("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=d("../../plots/template_attributes").hovertemplateAttrs,e=d("../../plots/attributes"),a=d("../../lib/extend").extendFlat,n=d("../../plot_api/edit_types").overrideAll;function r(o){return{valType:"boolean",dflt:!1}}function t(o){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:r(),y:r(),z:r()},color:{valType:"color",dflt:w.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:w.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var f=ne.exports=n(a({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:T(),xhoverformat:M("x"),yhoverformat:M("y"),zhoverformat:M("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},v("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:t(),y:t(),z:t()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:a({},v.zauto,{}),zmin:a({},v.zmin,{}),zmax:a({},v.zmax,{})},hoverinfo:a({},e.hoverinfo),showlegend:a({},e.showlegend,{dflt:!1})}),"calc","nested");f.x.editType=f.y.editType=f.z.editType="calc+clearAxisTypes",f.transforms=void 0},{"../../components/color":366,"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633}],1062:[function(d,ne,ae){var w=d("../../components/colorscale/calc");ne.exports=function(M,T){T.surfacecolor?w(M,T,{vals:T.surfacecolor,containerStr:"",cLetter:"c"}):w(M,T,{vals:T.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],1063:[function(d,ne,ae){var w=d("../../../stackgl_modules").gl_surface3d,v=d("../../../stackgl_modules").ndarray,M=d("../../../stackgl_modules").ndarray_linear_interpolate.d2,T=d("../heatmap/interp2d"),e=d("../heatmap/find_empties"),a=d("../../lib").isArrayOrTypedArray,n=d("../../lib/gl_format_color").parseColorScale,r=d("../../lib/str2rgbarray"),t=d("../../components/colorscale").extractOpts;function f(S,k,P){this.scene=S,this.uid=P,this.surface=k,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var o=f.prototype;o.getXat=function(S,k,P,z){var I=a(this.data.x)?a(this.data.x[0])?this.data.x[k][S]:this.data.x[S]:S;return P===void 0?I:z.d2l(I,0,P)},o.getYat=function(S,k,P,z){var I=a(this.data.y)?a(this.data.y[0])?this.data.y[k][S]:this.data.y[k]:k;return P===void 0?I:z.d2l(I,0,P)},o.getZat=function(S,k,P,z){var I=this.data.z[k][S];return I===null&&this.data.connectgaps&&this.data._interpolatedZ&&(I=this.data._interpolatedZ[k][S]),P===void 0?I:z.d2l(I,0,P)},o.handlePick=function(S){if(S.object===this.surface){var k=(S.data.index[0]-1)/this.dataScaleX-1,P=(S.data.index[1]-1)/this.dataScaleY-1,z=Math.max(Math.min(Math.round(k),this.data.z[0].length-1),0),I=Math.max(Math.min(Math.round(P),this.data._ylength-1),0);S.index=[z,I],S.traceCoordinate=[this.getXat(z,I),this.getYat(z,I),this.getZat(z,I)],S.dataCoordinate=[this.getXat(z,I,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(z,I,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(z,I,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var D=0;D<3;D++){var R=S.dataCoordinate[D];R!=null&&(S.dataCoordinate[D]*=this.scene.dataScale[D])}var O=this.data.hovertext||this.data.text;return Array.isArray(O)&&O[I]&&O[I][z]!==void 0?S.textLabel=O[I][z]:O?S.textLabel=O:S.textLabel="",S.data.dataCoordinate=S.dataCoordinate.slice(),this.surface.highlight(S.data),this.scene.glplot.spikes.position=S.dataCoordinate,!0}};function i(S){var k=S[0].rgb,P=S[S.length-1].rgb;return k[0]===P[0]&&k[1]===P[1]&&k[2]===P[2]&&k[3]===P[3]}var g=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function p(S,k){if(S<k)return 0;for(var P=0;Math.floor(S%k)===0;)S/=k,P++;return P}function y(S){for(var k=[],P=0;P<g.length;P++){var z=g[P];k.push(p(S,z))}return k}function c(S){for(var k=y(S),P=S,z=0;z<g.length;z++)if(k[z]>0){P=g[z];break}return P}function b(S,k){if(!(S<1||k<1)){for(var P=y(S),z=y(k),I=1,D=0;D<g.length;D++)I*=Math.pow(g[D],Math.max(P[D],z[D]));return I}}function l(S){if(S.length!==0){for(var k=1,P=0;P<S.length;P++)k=b(k,S[P]);return k}}o.calcXnums=function(S){var k,P=[];for(k=1;k<S;k++){var z=this.getXat(k-1,0),I=this.getXat(k,0);I!==z&&z!==void 0&&z!==null&&I!==void 0&&I!==null?P[k-1]=Math.abs(I-z):P[k-1]=0}var D=0;for(k=1;k<S;k++)D+=P[k-1];for(k=1;k<S;k++)P[k-1]===0?P[k-1]=1:P[k-1]=Math.round(D/P[k-1]);return P},o.calcYnums=function(S){var k,P=[];for(k=1;k<S;k++){var z=this.getYat(0,k-1),I=this.getYat(0,k);I!==z&&z!==void 0&&z!==null&&I!==void 0&&I!==null?P[k-1]=Math.abs(I-z):P[k-1]=0}var D=0;for(k=1;k<S;k++)D+=P[k-1];for(k=1;k<S;k++)P[k-1]===0?P[k-1]=1:P[k-1]=Math.round(D/P[k-1]);return P};var _=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],s=_[9],A=_[13];o.estimateScale=function(S,k){for(var P=k===0?this.calcXnums(S):this.calcYnums(S),z=1+l(P);z<s;)z*=2;for(;z>A;)z--,z/=c(z),z++,z<s&&(z=A);var I=Math.round(z/S);return I>1?I:1};function m(S,k,P){var z=P[8]+P[2]*k[0]+P[5]*k[1];return S[0]=(P[6]+P[0]*k[0]+P[3]*k[1])/z,S[1]=(P[7]+P[1]*k[0]+P[4]*k[1])/z,S}function h(S,k,P){return x(S,k,m,P),S}function x(S,k,P,z){for(var I=[0,0],D=S.shape[0],R=S.shape[1],O=0;O<D;O++)for(var F=0;F<R;F++)P(I,[O,F],z),S.set(O,F,M(k,I[0],I[1]));return S}o.refineCoords=function(S){for(var k=this.dataScaleX,P=this.dataScaleY,z=S[0].shape[0],I=S[0].shape[1],D=Math.floor(S[0].shape[0]*k+1)|0,R=Math.floor(S[0].shape[1]*P+1)|0,O=1+z+1,F=1+I+1,V=v(new Float32Array(O*F),[O,F]),G=[1/k,0,0,0,1/P,0,0,0,1],J=0;J<S.length;++J){this.surface.padField(V,S[J]);var Z=v(new Float32Array(D*R),[D,R]);h(Z,V,G),S[J]=Z}};function u(S,k){for(var P=!1,z=0;z<S.length;z++)if(k===S[z]){P=!0;break}P===!1&&S.push(k)}o.setContourLevels=function(){var S=[[],[],[]],k=[!1,!1,!1],P=!1,z,I,D;for(z=0;z<3;++z)if(this.showContour[z]&&(P=!0,this.contourSize[z]>0&&this.contourStart[z]!==null&&this.contourEnd[z]!==null&&this.contourEnd[z]>this.contourStart[z]))for(k[z]=!0,I=this.contourStart[z];I<this.contourEnd[z];I+=this.contourSize[z])D=I*this.scene.dataScale[z],u(S[z],D);if(P){var R=[[],[],[]];for(z=0;z<3;++z)this.showContour[z]&&(R[z]=k[z]?S[z]:this.scene.contourLevels[z]);this.surface.update({levels:R})}},o.update=function(S){var k=this.scene,P=k.fullSceneLayout,z=this.surface,I=n(S),D=k.dataScale,R=S.z[0].length,O=S._ylength,F=k.contourLevels;this.data=S;var V,G,J,Z,Y=[];for(V=0;V<3;V++)for(Y[V]=[],G=0;G<R;G++)Y[V][G]=[];for(G=0;G<R;G++)for(J=0;J<O;J++)Y[0][G][J]=this.getXat(G,J,S.xcalendar,P.xaxis),Y[1][G][J]=this.getYat(G,J,S.ycalendar,P.yaxis),Y[2][G][J]=this.getZat(G,J,S.zcalendar,P.zaxis);if(S.connectgaps)for(S._emptypoints=e(Y[2]),T(Y[2],S._emptypoints),S._interpolatedZ=[],G=0;G<R;G++)for(S._interpolatedZ[G]=[],J=0;J<O;J++)S._interpolatedZ[G][J]=Y[2][G][J];for(V=0;V<3;V++)for(G=0;G<R;G++)for(J=0;J<O;J++)Z=Y[V][G][J],Z==null?Y[V][G][J]=NaN:Z=Y[V][G][J]*=D[V];for(V=0;V<3;V++)for(G=0;G<R;G++)for(J=0;J<O;J++)Z=Y[V][G][J],Z!=null&&(this.minValues[V]>Z&&(this.minValues[V]=Z),this.maxValues[V]<Z&&(this.maxValues[V]=Z));for(V=0;V<3;V++)this.objectOffset[V]=.5*(this.minValues[V]+this.maxValues[V]);for(V=0;V<3;V++)for(G=0;G<R;G++)for(J=0;J<O;J++)Z=Y[V][G][J],Z!=null&&(Y[V][G][J]-=this.objectOffset[V]);var j=[v(new Float32Array(R*O),[R,O]),v(new Float32Array(R*O),[R,O]),v(new Float32Array(R*O),[R,O])];for(V=0;V<3;V++)for(G=0;G<R;G++)for(J=0;J<O;J++)j[V].set(G,J,Y[V][G][J]);Y=[];var re={colormap:I,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!S.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:S.opacityscale,opacity:S.opacity},se=t(S);if(re.intensityBounds=[se.min,se.max],S.surfacecolor){var oe=v(new Float32Array(R*O),[R,O]);for(G=0;G<R;G++)for(J=0;J<O;J++)oe.set(G,J,S.surfacecolor[J][G]);j.push(oe)}else re.intensityBounds[0]*=D[2],re.intensityBounds[1]*=D[2];(A<j[0].shape[0]||A<j[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(j[0].shape[0],0),this.dataScaleY=this.estimateScale(j[0].shape[1],1),(this.dataScaleX!==1||this.dataScaleY!==1)&&this.refineCoords(j)),S.surfacecolor&&(re.intensity=j.pop());var N=[!0,!0,!0],U=["x","y","z"];for(V=0;V<3;++V){var q=S.contours[U[V]];N[V]=q.highlight,re.showContour[V]=q.show||q.highlight,re.showContour[V]&&(re.contourProject[V]=[q.project.x,q.project.y,q.project.z],q.show?(this.showContour[V]=!0,re.levels[V]=F[V],z.highlightColor[V]=re.contourColor[V]=r(q.color),q.usecolormap?z.highlightTint[V]=re.contourTint[V]=0:z.highlightTint[V]=re.contourTint[V]=1,re.contourWidth[V]=q.width,this.contourStart[V]=q.start,this.contourEnd[V]=q.end,this.contourSize[V]=q.size):(this.showContour[V]=!1,this.contourStart[V]=null,this.contourEnd[V]=null,this.contourSize[V]=0),q.highlight&&(re.dynamicColor[V]=r(q.highlightcolor),re.dynamicWidth[V]=q.highlightwidth))}i(I)&&(re.vertexColor=!0),re.objectOffset=this.objectOffset,re.coords=j,z.update(re),z.visible=S.visible,z.enableDynamic=N,z.enableHighlight=N,z.snapToData=!0,"lighting"in S&&(z.ambientLight=S.lighting.ambient,z.diffuseLight=S.lighting.diffuse,z.specularLight=S.lighting.specular,z.roughness=S.lighting.roughness,z.fresnel=S.lighting.fresnel),"lightposition"in S&&(z.lightPosition=[S.lightposition.x,S.lightposition.y,S.lightposition.z])},o.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()};function L(S,k){var P=S.glplot.gl,z=w({gl:P}),I=new f(S,z,k.uid);return z._trace=I,I.update(k),S.glplot.add(z),I}ne.exports=L},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../heatmap/find_empties":798,"../heatmap/interp2d":801}],1064:[function(d,ne,ae){var w=d("../../registry"),v=d("../../lib"),M=d("../../components/colorscale/defaults"),T=d("./attributes"),e=.1;function a(o,i){for(var g=[],p=32,y=0;y<p;y++){var c=y/(p-1),b=i+(1-i)*(1-Math.pow(Math.sin(o*c*Math.PI),2));g.push([c,Math.max(0,Math.min(1,b))])}return g}function n(o){var i=0;if(!Array.isArray(o)||o.length<2||!o[0]||!o[o.length-1]||+o[0][0]!=0||+o[o.length-1][0]!=1)return!1;for(var g=0;g<o.length;g++){var p=o[g];if(p.length!==2||+p[0]<i)return!1;i=+p[0]}return!0}function r(o,i,g,p){var y,c;function b(S,k){return v.coerce(o,i,T,S,k)}var l=b("x"),_=b("y"),s=b("z");if(!s||!s.length||(l?l.length<1:!1)||(_?_.length<1:!1)){i.visible=!1;return}i._xlength=Array.isArray(l)&&v.isArrayOrTypedArray(l[0])?s.length:s[0].length,i._ylength=s.length;var A=w.getComponentMethod("calendars","handleTraceDefaults");A(o,i,["x","y","z"],p),b("text"),b("hovertext"),b("hovertemplate"),b("xhoverformat"),b("yhoverformat"),b("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(S){b(S)});var m=b("surfacecolor"),h=["x","y","z"];for(y=0;y<3;++y){var x="contours."+h[y],u=b(x+".show"),L=b(x+".highlight");if(u||L)for(c=0;c<3;++c)b(x+".project."+h[c]);u&&(b(x+".color"),b(x+".width"),b(x+".usecolormap")),L&&(b(x+".highlightcolor"),b(x+".highlightwidth")),b(x+".start"),b(x+".end"),b(x+".size")}m||(f(o,"zmin","cmin"),f(o,"zmax","cmax"),f(o,"zauto","cauto")),M(o,i,p,b,{prefix:"",cLetter:"c"}),t(o,i,p,b),i._length=null}function t(o,i,g,p){var y=p("opacityscale");y==="max"?i.opacityscale=[[0,e],[1,1]]:y==="min"?i.opacityscale=[[0,1],[1,e]]:y==="extremes"?i.opacityscale=a(1,e):n(y)||(i.opacityscale=void 0)}function f(o,i,g){i in o&&!(g in o)&&(o[g]=o[i])}ne.exports={supplyDefaults:r,opacityscaleDefaults:t}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":1061}],1065:[function(d,ne,ae){ne.exports={attributes:d("./attributes"),supplyDefaults:d("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:d("./calc"),plot:d("./convert"),moduleType:"trace",name:"surface",basePlotModule:d("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":1061,"./calc":1062,"./convert":1063,"./defaults":1064}],1066:[function(d,ne,ae){var w=d("../../components/annotations/attributes"),v=d("../../lib/extend").extendFlat,M=d("../../plot_api/edit_types").overrideAll,T=d("../../plots/font_attributes"),e=d("../../plots/domain").attributes,a=d("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,n=ne.exports=M({domain:e({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:a("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:v({},w.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:v({},T({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:a("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:v({},w.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:v({},T({arrayOk:!0}))}},"calc","from-root");n.transforms=void 0},{"../../components/annotations/attributes":349,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/axis_format_attributes":557,"../../plots/domain":584,"../../plots/font_attributes":585}],1067:[function(d,ne,ae){var w=d("../../plots/get_data").getModuleCalcData,v=d("./plot"),M="table";ae.name=M,ae.plot=function(T){var e=w(T.calcdata,M)[0];e.length&&v(T,e)},ae.clean=function(T,e,a,n){var r=n._has&&n._has(M),t=e._has&&e._has(M);r&&!t&&n._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":593,"./plot":1074}],1068:[function(d,ne,ae){var w=d("../../lib/gup").wrap;ne.exports=function(){return w({})}},{"../../lib/gup":500}],1069:[function(d,ne,ae){ne.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1070:[function(d,ne,ae){var w=d("./constants"),v=d("../../lib/extend").extendFlat,M=d("fast-isnumeric");ne.exports=function(g,p){var y=a(p.cells.values),c=function(G){return G.slice(p.header.values.length,G.length)},b=a(p.header.values);b.length&&!b[0].length&&(b[0]=[""],b=a(b));var l=b.concat(c(y).map(function(){return n((b[0]||[""]).length)})),_=p.domain,s=Math.floor(g._fullLayout._size.w*(_.x[1]-_.x[0])),A=Math.floor(g._fullLayout._size.h*(_.y[1]-_.y[0])),m=p.header.values.length?l[0].map(function(){return p.header.height}):[w.emptyHeaderHeight],h=y.length?y[0].map(function(){return p.cells.height}):[],x=m.reduce(e,0),u=A-x,L=u+w.uplift,S=f(h,L),k=f(m,x),P=t(k,[]),z=t(S,P),I={},D=p._fullInput.columnorder.concat(c(y.map(function(G,J){return J}))),R=l.map(function(G,J){var Z=Array.isArray(p.columnwidth)?p.columnwidth[Math.min(J,p.columnwidth.length-1)]:p.columnwidth;return M(Z)?Number(Z):1}),O=R.reduce(e,0);R=R.map(function(G){return G/O*s});var F=Math.max(T(p.header.line.width),T(p.cells.line.width)),V={key:p.uid+g._context.staticPlot,translateX:_.x[0]*g._fullLayout._size.w,translateY:g._fullLayout._size.h*(1-_.y[1]),size:g._fullLayout._size,width:s,maxLineWidth:F,height:A,columnOrder:D,groupHeight:A,rowBlocks:z,headerRowBlocks:P,scrollY:0,cells:v({},p.cells,{values:y}),headerCells:v({},p.header,{values:l}),gdColumns:l.map(function(G){return G[0]}),gdColumnsOriginalOrder:l.map(function(G){return G[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:l.map(function(G,J){var Z=I[G];I[G]=(Z||0)+1;var Y=G+"__"+I[G];return{key:Y,label:G,specIndex:J,xIndex:D[J],xScale:r,x:void 0,calcdata:void 0,columnWidth:R[J]}})};return V.columns.forEach(function(G){G.calcdata=V,G.x=r(G)}),V};function T(i){if(Array.isArray(i)){for(var g=0,p=0;p<i.length;p++)g=Math.max(g,T(i[p]));return g}return i}function e(i,g){return i+g}function a(i){var g=i.slice(),p=1/0,y=0,c;for(c=0;c<g.length;c++)Array.isArray(g[c])||(g[c]=[g[c]]),p=Math.min(p,g[c].length),y=Math.max(y,g[c].length);if(p!==y)for(c=0;c<g.length;c++){var b=y-g[c].length;b&&(g[c]=g[c].concat(n(b)))}return g}function n(i){for(var g=new Array(i),p=0;p<i;p++)g[p]="";return g}function r(i){return i.calcdata.columns.reduce(function(g,p){return p.xIndex<i.xIndex?g+p.columnWidth:g},0)}function t(i,g){var p=Object.keys(i);return p.map(function(y){return v({},i[y],{auxiliaryBlocks:g})})}function f(i,g){for(var p={},y,c=0,b=0,l=o(),_=0,s=0,A=0;A<i.length;A++)y=i[A],l.rows.push({rowIndex:A,rowHeight:y}),b+=y,(b>=g||A===i.length-1)&&(p[c]=l,l.key=s++,l.firstRowIndex=_,l.lastRowIndex=A,l=o(),c+=b,_=A+1,b=0);return p}function o(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}},{"../../lib/extend":493,"./constants":1069,"fast-isnumeric":190}],1071:[function(d,ne,ae){var w=d("../../lib/extend").extendFlat;ae.splitToPanels=function(M){var T=[0,0],e=w({},M,{key:"header",type:"header",page:0,prevPages:T,currentRepaint:[null,null],dragHandle:!0,values:M.calcdata.headerCells.values[M.specIndex],rowBlocks:M.calcdata.headerRowBlocks,calcdata:w({},M.calcdata,{cells:M.calcdata.headerCells})}),a=w({},M,{key:"cells1",type:"cells",page:0,prevPages:T,currentRepaint:[null,null],dragHandle:!1,values:M.calcdata.cells.values[M.specIndex],rowBlocks:M.calcdata.rowBlocks}),n=w({},M,{key:"cells2",type:"cells",page:1,prevPages:T,currentRepaint:[null,null],dragHandle:!1,values:M.calcdata.cells.values[M.specIndex],rowBlocks:M.calcdata.rowBlocks});return[a,n,e]},ae.splitToCells=function(M){var T=v(M);return(M.values||[]).slice(T[0],T[1]).map(function(e,a){var n=typeof e=="string"&&e.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:a+n,key:T[0]+a,column:M,calcdata:M.calcdata,page:M.page,rowBlocks:M.rowBlocks,value:e}})};function v(M){var T=M.rowBlocks[M.page],e=T?T.rows[0].rowIndex:0,a=T?e+T.rows.length:0;return[e,a]}},{"../../lib/extend":493}],1072:[function(d,ne,ae){var w=d("../../lib"),v=d("./attributes"),M=d("../../plots/domain").defaults;function T(e,a){for(var n=e.columnorder||[],r=e.header.values.length,t=n.slice(0,r),f=t.slice().sort(function(g,p){return g-p}),o=t.map(function(g){return f.indexOf(g)}),i=o.length;i<r;i++)o.push(i);a("columnorder",o)}ne.exports=function(a,n,r,t){function f(o,i){return w.coerce(a,n,v,o,i)}M(n,t,f),f("columnwidth"),f("header.values"),f("header.format"),f("header.align"),f("header.prefix"),f("header.suffix"),f("header.height"),f("header.line.width"),f("header.line.color"),f("header.fill.color"),w.coerceFont(f,"header.font",w.extendFlat({},t.font)),T(n,f),f("cells.values"),f("cells.format"),f("cells.align"),f("cells.prefix"),f("cells.suffix"),f("cells.height"),f("cells.line.width"),f("cells.line.color"),f("cells.fill.color"),w.coerceFont(f,"cells.font",w.extendFlat({},t.font)),n._length=null}},{"../../lib":503,"../../plots/domain":584,"./attributes":1066}],1073:[function(d,ne,ae){ne.exports={attributes:d("./attributes"),supplyDefaults:d("./defaults"),calc:d("./calc"),plot:d("./plot"),moduleType:"trace",name:"table",basePlotModule:d("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1066,"./base_plot":1067,"./calc":1068,"./defaults":1072,"./plot":1074}],1074:[function(d,ne,ae){var w=d("./constants"),v=d("@plotly/d3"),M=d("../../lib"),T=M.numberFormat,e=d("../../lib/gup"),a=d("../../components/drawing"),n=d("../../lib/svg_text_utils"),r=d("../../lib").raiseToTop,t=d("../../lib").strTranslate,f=d("../../lib").cancelTransition,o=d("./data_preparation_helper"),i=d("./data_split_helpers"),g=d("../../components/color");ne.exports=function(ee,te){var ie=!ee._context.staticPlot,le=ee._fullLayout._paper.selectAll("."+w.cn.table).data(te.map(function(Fe){var Le=e.unwrap(Fe),Ne=Le.trace;return o(ee,Ne)}),e.keyFun);le.exit().remove(),le.enter().append("g").classed(w.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),le.attr("width",function(Fe){return Fe.width+Fe.size.l+Fe.size.r}).attr("height",function(Fe){return Fe.height+Fe.size.t+Fe.size.b}).attr("transform",function(Fe){return t(Fe.translateX,Fe.translateY)});var ge=le.selectAll("."+w.cn.tableControlView).data(e.repeat,e.keyFun),fe=ge.enter().append("g").classed(w.cn.tableControlView,!0).style("box-sizing","content-box");if(ie){var pe="onwheel"in document?"wheel":"mousewheel";fe.on("mousemove",function(Fe){ge.filter(function(Le){return Fe===Le}).call(l,ee)}).on(pe,function(Fe){if(!Fe.scrollbarState.wheeling){Fe.scrollbarState.wheeling=!0;var Le=Fe.scrollY+v.event.deltaY,Ne=Z(ee,ge,null,Le)(Fe);Ne||(v.event.stopPropagation(),v.event.preventDefault()),Fe.scrollbarState.wheeling=!1}}).call(l,ee,!0)}ge.attr("transform",function(Fe){return t(Fe.size.l,Fe.size.t)});var ye=ge.selectAll("."+w.cn.scrollBackground).data(e.repeat,e.keyFun);ye.enter().append("rect").classed(w.cn.scrollBackground,!0).attr("fill","none"),ye.attr("width",function(Fe){return Fe.width}).attr("height",function(Fe){return Fe.height}),ge.each(function(Fe){a.setClipUrl(v.select(this),y(ee,Fe),ee)});var Te=ge.selectAll("."+w.cn.yColumn).data(function(Fe){return Fe.columns},e.keyFun);Te.enter().append("g").classed(w.cn.yColumn,!0),Te.exit().remove(),Te.attr("transform",function(Fe){return t(Fe.x,0)}),ie&&Te.call(v.behavior.drag().origin(function(Fe){var Le=v.select(this);return R(Le,Fe,-w.uplift),r(this),Fe.calcdata.columnDragInProgress=!0,l(ge.filter(function(Ne){return Fe.calcdata.key===Ne.key}),ee),Fe}).on("drag",function(Fe){var Le=v.select(this),Ne=function(Xt){return(Fe===Xt?v.event.x:Xt.x)+Xt.columnWidth/2};Fe.x=Math.max(-w.overdrag,Math.min(Fe.calcdata.width+w.overdrag-Fe.columnWidth,v.event.x));var dt=b(Te).filter(function(Xt){return Xt.calcdata.key===Fe.calcdata.key}),Dt=dt.sort(function(Xt,At){return Ne(Xt)-Ne(At)});Dt.forEach(function(Xt,At){Xt.xIndex=At,Xt.x=Fe===Xt?Xt.x:Xt.xScale(Xt)}),Te.filter(function(Xt){return Fe!==Xt}).transition().ease(w.transitionEase).duration(w.transitionDuration).attr("transform",function(Xt){return t(Xt.x,0)}),Le.call(f).attr("transform",t(Fe.x,-w.uplift))}).on("dragend",function(Fe){var Le=v.select(this),Ne=Fe.calcdata;Fe.x=Fe.xScale(Fe),Fe.calcdata.columnDragInProgress=!1,R(Le,Fe,0),I(ee,Ne,Ne.columns.map(function(dt){return dt.xIndex}))})),Te.each(function(Fe){a.setClipUrl(v.select(this),c(ee,Fe),ee)});var _e=Te.selectAll("."+w.cn.columnBlock).data(i.splitToPanels,e.keyFun);_e.enter().append("g").classed(w.cn.columnBlock,!0).attr("id",function(Fe){return Fe.key}),_e.style("cursor",function(Fe){return Fe.dragHandle?"ew-resize":Fe.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var De=_e.filter(F),Be=_e.filter(O);ie&&Be.call(v.behavior.drag().origin(function(Fe){return v.event.stopPropagation(),Fe}).on("drag",Z(ee,ge,-1)).on("dragend",function(){})),_(ee,ge,De,_e),_(ee,ge,Be,_e);var Ue=ge.selectAll("."+w.cn.scrollAreaClip).data(e.repeat,e.keyFun);Ue.enter().append("clipPath").classed(w.cn.scrollAreaClip,!0).attr("id",function(Fe){return y(ee,Fe)});var xe=Ue.selectAll("."+w.cn.scrollAreaClipRect).data(e.repeat,e.keyFun);xe.enter().append("rect").classed(w.cn.scrollAreaClipRect,!0).attr("x",-w.overdrag).attr("y",-w.uplift).attr("fill","none"),xe.attr("width",function(Fe){return Fe.width+2*w.overdrag}).attr("height",function(Fe){return Fe.height+w.uplift});var Pe=Te.selectAll("."+w.cn.columnBoundary).data(e.repeat,e.keyFun);Pe.enter().append("g").classed(w.cn.columnBoundary,!0);var Ve=Te.selectAll("."+w.cn.columnBoundaryClippath).data(e.repeat,e.keyFun);Ve.enter().append("clipPath").classed(w.cn.columnBoundaryClippath,!0),Ve.attr("id",function(Fe){return c(ee,Fe)});var Qe=Ve.selectAll("."+w.cn.columnBoundaryRect).data(e.repeat,e.keyFun);Qe.enter().append("rect").classed(w.cn.columnBoundaryRect,!0).attr("fill","none"),Qe.attr("width",function(Fe){return Fe.columnWidth+2*p(Fe)}).attr("height",function(Fe){return Fe.calcdata.height+2*p(Fe)+w.uplift}).attr("x",function(Fe){return-p(Fe)}).attr("y",function(Fe){return-p(Fe)}),J(null,Be,ge)};function p(X){return Math.ceil(X.calcdata.maxLineWidth/2)}function y(X,ee){return"clip"+X._fullLayout._uid+"_scrollAreaBottomClip_"+ee.key}function c(X,ee){return"clip"+X._fullLayout._uid+"_columnBoundaryClippath_"+ee.calcdata.key+"_"+ee.specIndex}function b(X){return[].concat.apply([],X.map(function(ee){return ee})).map(function(ee){return ee.__data__})}function l(X,ee,te){function ie(Te){var _e=Te.rowBlocks;return N(_e,_e.length-1)+(_e.length?U(_e[_e.length-1],1/0):1)}var le=X.selectAll("."+w.cn.scrollbarKit).data(e.repeat,e.keyFun);le.enter().append("g").classed(w.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),le.each(function(Te){var _e=Te.scrollbarState;_e.totalHeight=ie(Te),_e.scrollableAreaHeight=Te.groupHeight-V(Te),_e.currentlyVisibleHeight=Math.min(_e.totalHeight,_e.scrollableAreaHeight),_e.ratio=_e.currentlyVisibleHeight/_e.totalHeight,_e.barLength=Math.max(_e.ratio*_e.currentlyVisibleHeight,w.goldenRatio*w.scrollbarWidth),_e.barWiggleRoom=_e.currentlyVisibleHeight-_e.barLength,_e.wiggleRoom=Math.max(0,_e.totalHeight-_e.scrollableAreaHeight),_e.topY=_e.barWiggleRoom===0?0:Te.scrollY/_e.wiggleRoom*_e.barWiggleRoom,_e.bottomY=_e.topY+_e.barLength,_e.dragMultiplier=_e.wiggleRoom/_e.barWiggleRoom}).attr("transform",function(Te){var _e=Te.width+w.scrollbarWidth/2+w.scrollbarOffset;return t(_e,V(Te))});var ge=le.selectAll("."+w.cn.scrollbar).data(e.repeat,e.keyFun);ge.enter().append("g").classed(w.cn.scrollbar,!0);var fe=ge.selectAll("."+w.cn.scrollbarSlider).data(e.repeat,e.keyFun);fe.enter().append("g").classed(w.cn.scrollbarSlider,!0),fe.attr("transform",function(Te){return t(0,Te.scrollbarState.topY||0)});var pe=fe.selectAll("."+w.cn.scrollbarGlyph).data(e.repeat,e.keyFun);pe.enter().append("line").classed(w.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",w.scrollbarWidth).attr("stroke-linecap","round").attr("y1",w.scrollbarWidth/2),pe.attr("y2",function(Te){return Te.scrollbarState.barLength-w.scrollbarWidth/2}).attr("stroke-opacity",function(Te){return Te.columnDragInProgress||!Te.scrollbarState.barWiggleRoom||te?0:.4}),pe.transition().delay(0).duration(0),pe.transition().delay(w.scrollbarHideDelay).duration(w.scrollbarHideDuration).attr("stroke-opacity",0);var ye=ge.selectAll("."+w.cn.scrollbarCaptureZone).data(e.repeat,e.keyFun);ye.enter().append("line").classed(w.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",w.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(Te){var _e=v.event.y,De=this.getBoundingClientRect(),Be=Te.scrollbarState,Ue=_e-De.top,xe=v.scale.linear().domain([0,Be.scrollableAreaHeight]).range([0,Be.totalHeight]).clamp(!0);Be.topY<=Ue&&Ue<=Be.bottomY||Z(ee,X,null,xe(Ue-Be.barLength/2))(Te)}).call(v.behavior.drag().origin(function(Te){return v.event.stopPropagation(),Te.scrollbarState.scrollbarScrollInProgress=!0,Te}).on("drag",Z(ee,X)).on("dragend",function(){})),ye.attr("y2",function(Te){return Te.scrollbarState.scrollableAreaHeight}),ee._context.staticPlot&&(pe.remove(),ye.remove())}function _(X,ee,te,ie){var le=s(te),ge=A(le);u(ge);var fe=m(ge);S(fe);var pe=x(ge),ye=h(pe);L(ye),k(ye,ee,ie,X),oe(ge)}function s(X){var ee=X.selectAll("."+w.cn.columnCells).data(e.repeat,e.keyFun);return ee.enter().append("g").classed(w.cn.columnCells,!0),ee.exit().remove(),ee}function A(X){var ee=X.selectAll("."+w.cn.columnCell).data(i.splitToCells,function(te){return te.keyWithinBlock});return ee.enter().append("g").classed(w.cn.columnCell,!0),ee.exit().remove(),ee}function m(X){var ee=X.selectAll("."+w.cn.cellRect).data(e.repeat,function(te){return te.keyWithinBlock});return ee.enter().append("rect").classed(w.cn.cellRect,!0),ee}function h(X){var ee=X.selectAll("."+w.cn.cellText).data(e.repeat,function(te){return te.keyWithinBlock});return ee.enter().append("text").classed(w.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){v.event.stopPropagation()}),ee}function x(X){var ee=X.selectAll("."+w.cn.cellTextHolder).data(e.repeat,function(te){return te.keyWithinBlock});return ee.enter().append("g").classed(w.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),ee}function u(X){X.each(function(ee,te){var ie=ee.calcdata.cells.font,le=ee.column.specIndex,ge={size:D(ie.size,le,te),color:D(ie.color,le,te),family:D(ie.family,le,te)};ee.rowNumber=ee.key,ee.align=D(ee.calcdata.cells.align,le,te),ee.cellBorderWidth=D(ee.calcdata.cells.line.width,le,te),ee.font=ge})}function L(X){X.each(function(ee){a.font(v.select(this),ee.font)})}function S(X){X.attr("width",function(ee){return ee.column.columnWidth}).attr("stroke-width",function(ee){return ee.cellBorderWidth}).each(function(ee){var te=v.select(this);g.stroke(te,D(ee.calcdata.cells.line.color,ee.column.specIndex,ee.rowNumber)),g.fill(te,D(ee.calcdata.cells.fill.color,ee.column.specIndex,ee.rowNumber))})}function k(X,ee,te,ie){X.text(function(le){var ge=le.column.specIndex,fe=le.rowNumber,pe=le.value,ye=typeof pe=="string",Te=ye&&pe.match(/<br>/i),_e=!ye||Te;le.mayHaveMarkup=ye&&pe.match(/[<&>]/);var De=P(pe);le.latex=De;var Be=De?"":D(le.calcdata.cells.prefix,ge,fe)||"",Ue=De?"":D(le.calcdata.cells.suffix,ge,fe)||"",xe=De?null:D(le.calcdata.cells.format,ge,fe)||null,Pe=Be+(xe?T(xe)(le.value):le.value)+Ue,Ve;le.wrappingNeeded=!le.wrapped&&!_e&&!De&&(Ve=z(Pe)),le.cellHeightMayIncrease=Te||De||le.mayHaveMarkup||(Ve===void 0?z(Pe):Ve),le.needsConvertToTspans=le.mayHaveMarkup||le.wrappingNeeded||le.latex;var Qe;if(le.wrappingNeeded){var Fe=w.wrapSplitCharacter===" "?Pe.replace(/<a href=/ig,"<a_href="):Pe,Le=Fe.split(w.wrapSplitCharacter),Ne=w.wrapSplitCharacter===" "?Le.map(function(dt){return dt.replace(/<a_href=/ig,"<a href=")}):Le;le.fragments=Ne.map(function(dt){return{text:dt,width:null}}),le.fragments.push({fragment:w.wrapSpacer,width:null}),Qe=Ne.join(w.lineBreaker)+w.lineBreaker+w.wrapSpacer}else delete le.fragments,Qe=Pe;return Qe}).attr("dy",function(le){return le.needsConvertToTspans?0:"0.75em"}).each(function(le){var ge=this,fe=v.select(ge),pe=le.wrappingNeeded?j:re;le.needsConvertToTspans?n.convertToTspans(fe,ie,pe(te,ge,ee,ie,le)):v.select(ge.parentNode).attr("transform",function(ye){return t(se(ye),w.cellPad)}).attr("text-anchor",function(ye){return{left:"start",center:"middle",right:"end"}[ye.align]})})}function P(X){return typeof X=="string"&&X.match(w.latexCheck)}function z(X){return X.indexOf(w.wrapSplitCharacter)!==-1}function I(X,ee,te){var ie=ee.gdColumnsOriginalOrder;ee.gdColumns.sort(function(le,ge){return te[ie.indexOf(le)]-te[ie.indexOf(ge)]}),ee.columnorder=te,X.emit("plotly_restyle")}function D(X,ee,te){if(Array.isArray(X)){var ie=X[Math.min(ee,X.length-1)];return Array.isArray(ie)?ie[Math.min(te,ie.length-1)]:ie}else return X}function R(X,ee,te){X.transition().ease(w.releaseTransitionEase).duration(w.releaseTransitionDuration).attr("transform",t(ee.x,te))}function O(X){return X.type==="cells"}function F(X){return X.type==="header"}function V(X){var ee=X.rowBlocks.length?X.rowBlocks[0].auxiliaryBlocks:[];return ee.reduce(function(te,ie){return te+U(ie,1/0)},0)}function G(X,ee,te){for(var ie=[],le=0,ge=0;ge<X.length;ge++){for(var fe=X[ge],pe=fe.rows,ye=0,Te=0;Te<pe.length;Te++)ye+=pe[Te].rowHeight;fe.allRowsHeight=ye;var _e=le+ye,De=ee,Be=De+te;De<_e&&Be>le&&ie.push(ge),le+=ye}return ie}function J(X,ee,te){var ie=b(ee)[0];if(ie!==void 0){var le=ie.rowBlocks,ge=ie.calcdata,fe=N(le,le.length),pe=ie.calcdata.groupHeight-V(ie),ye=ge.scrollY=Math.max(0,Math.min(fe-pe,ge.scrollY)),Te=G(le,ye,pe);Te.length===1&&(Te[0]===le.length-1?Te.unshift(Te[0]-1):Te.push(Te[0]+1)),Te[0]%2&&Te.reverse(),ee.each(function(_e,De){_e.page=Te[De],_e.scrollY=ye}),ee.attr("transform",function(_e){var De=N(_e.rowBlocks,_e.page)-_e.scrollY;return t(0,De)}),X&&(Y(X,te,ee,Te,ie.prevPages,ie,0),Y(X,te,ee,Te,ie.prevPages,ie,1),l(te,X))}}function Z(X,ee,te,ie){return function(ge){var fe=ge.calcdata?ge.calcdata:ge,pe=ee.filter(function(De){return fe.key===De.key}),ye=te||fe.scrollbarState.dragMultiplier,Te=fe.scrollY;fe.scrollY=ie===void 0?fe.scrollY+ye*v.event.dy:ie;var _e=pe.selectAll("."+w.cn.yColumn).selectAll("."+w.cn.columnBlock).filter(O);return J(X,_e,pe),fe.scrollY===Te}}function Y(X,ee,te,ie,le,ge,fe){var pe=ie[fe]!==le[fe];pe&&(clearTimeout(ge.currentRepaint[fe]),ge.currentRepaint[fe]=setTimeout(function(){var ye=te.filter(function(Te,_e){return _e===fe&&ie[_e]!==le[_e]});_(X,ee,ye,te),le[fe]=ie[fe]}))}function j(X,ee,te,ie){return function(){var ge=v.select(ee.parentNode);ge.each(function(fe){var pe=fe.fragments;ge.selectAll("tspan.line").each(function(Pe,Ve){pe[Ve].width=this.getComputedTextLength()});var ye=pe[pe.length-1].width,Te=pe.slice(0,-1),_e=[],De,Be,Ue=0,xe=fe.column.columnWidth-2*w.cellPad;for(fe.value="";Te.length;)De=Te.shift(),Be=De.width+ye,Ue+Be>xe&&(fe.value+=_e.join(w.wrapSpacer)+w.lineBreaker,_e=[],Ue=0),_e.push(De.text),Ue+=Be;Ue&&(fe.value+=_e.join(w.wrapSpacer)),fe.wrapped=!0}),ge.selectAll("tspan.line").remove(),k(ge.select("."+w.cn.cellText),te,X,ie),v.select(ee.parentNode.parentNode).call(oe)}}function re(X,ee,te,ie,le){return function(){if(!le.settledY){var fe=v.select(ee.parentNode),pe=Q(le),ye=le.key-pe.firstRowIndex,Te=pe.rows[ye].rowHeight,_e=le.cellHeightMayIncrease?ee.parentNode.getBoundingClientRect().height+2*w.cellPad:Te,De=Math.max(_e,Te),Be=De-pe.rows[ye].rowHeight;Be&&(pe.rows[ye].rowHeight=De,X.selectAll("."+w.cn.columnCell).call(oe),J(null,X.filter(O),0),l(te,ie,!0)),fe.attr("transform",function(){var Ue=this,xe=Ue.parentNode,Pe=xe.getBoundingClientRect(),Ve=v.select(Ue.parentNode).select("."+w.cn.cellRect).node().getBoundingClientRect(),Qe=Ue.transform.baseVal.consolidate(),Fe=Ve.top-Pe.top+(Qe?Qe.matrix.f:w.cellPad);return t(se(le,v.select(Ue.parentNode).select("."+w.cn.cellTextHolder).node().getBoundingClientRect().width),Fe)}),le.settledY=!0}}}function se(X,ee){switch(X.align){case"left":return w.cellPad;case"right":return X.column.columnWidth-(ee||0)-w.cellPad;case"center":return(X.column.columnWidth-(ee||0))/2;default:return w.cellPad}}function oe(X){X.attr("transform",function(ee){var te=ee.rowBlocks[0].auxiliaryBlocks.reduce(function(fe,pe){return fe+U(pe,1/0)},0),ie=Q(ee),le=U(ie,ee.key),ge=le+te;return t(0,ge)}).selectAll("."+w.cn.cellRect).attr("height",function(ee){return W(Q(ee),ee.key).rowHeight})}function N(X,ee){for(var te=0,ie=ee-1;ie>=0;ie--)te+=q(X[ie]);return te}function U(X,ee){for(var te=0,ie=0;ie<X.rows.length&&X.rows[ie].rowIndex<ee;ie++)te+=X.rows[ie].rowHeight;return te}function q(X){var ee=X.allRowsHeight;if(ee!==void 0)return ee;for(var te=0,ie=0;ie<X.rows.length;ie++)te+=X.rows[ie].rowHeight;return X.allRowsHeight=te,te}function Q(X){return X.rowBlocks[X.page]}function W(X,ee){return X.rows[ee-X.firstRowIndex]}},{"../../components/color":366,"../../components/drawing":388,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"./constants":1069,"./data_preparation_helper":1070,"./data_split_helpers":1071,"@plotly/d3":58}],1075:[function(d,ne,ae){var w=d("../../plots/template_attributes").hovertemplateAttrs,v=d("../../plots/template_attributes").texttemplateAttrs,M=d("../../components/colorscale/attributes"),T=d("../../plots/domain").attributes,e=d("../pie/attributes"),a=d("../sunburst/attributes"),n=d("./constants"),r=d("../../lib/extend").extendFlat;ne.exports={labels:a.labels,parents:a.parents,values:a.values,branchvalues:a.branchvalues,count:a.count,level:a.level,maxdepth:a.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:r({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:a.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:a.marker.line,editType:"calc"},M("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:r({},e.textfont,{}),editType:"calc"},text:e.text,textinfo:a.textinfo,texttemplate:v({editType:"plot"},{keys:n.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:a.hoverinfo,hovertemplate:w({},{keys:n.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:r({},e.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:e.sort,root:a.root,domain:T({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":901,"../sunburst/attributes":1049,"./constants":1078}],1076:[function(d,ne,ae){var w=d("../../plots/plots");ae.name="treemap",ae.plot=function(v,M,T,e){w.plotBasePlot(ae.name,v,M,T,e)},ae.clean=function(v,M,T,e){w.cleanBasePlot(ae.name,v,M,T,e)}},{"../../plots/plots":619}],1077:[function(d,ne,ae){var w=d("../sunburst/calc");ae.calc=function(v,M){return w.calc(v,M)},ae.crossTraceCalc=function(v){return w._runCrossTraceCalc("treemap",v)}},{"../sunburst/calc":1051}],1078:[function(d,ne,ae){ne.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},{}],1079:[function(d,ne,ae){var w=d("../../lib"),v=d("./attributes"),M=d("../../components/color"),T=d("../../plots/domain").defaults,e=d("../bar/defaults").handleText,a=d("../bar/constants").TEXTPAD,n=d("../../components/colorscale"),r=n.hasColorscale,t=n.handleDefaults;ne.exports=function(o,i,g,p){function y(k,P){return w.coerce(o,i,v,k,P)}var c=y("labels"),b=y("parents");if(!c||!c.length||!b||!b.length){i.visible=!1;return}var l=y("values");l&&l.length?y("branchvalues"):y("count"),y("level"),y("maxdepth");var _=y("tiling.packing");_==="squarify"&&y("tiling.squarifyratio"),y("tiling.flip"),y("tiling.pad");var s=y("text");y("texttemplate"),i.texttemplate||y("textinfo",Array.isArray(s)?"text+label":"label"),y("hovertext"),y("hovertemplate");var A=y("pathbar.visible"),m="auto";e(o,i,p,y,m,{hasPathbar:A,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),y("textposition");var h=i.textposition.indexOf("bottom")!==-1,x=y("marker.line.width");x&&y("marker.line.color",p.paper_bgcolor);var u=y("marker.colors"),L=i._hasColorscale=r(o,"marker","colors")||(o.marker||{}).coloraxis;L?t(o,i,p,y,{prefix:"marker.",cLetter:"c"}):y("marker.depthfade",!(u||[]).length);var S=i.textfont.size*2;y("marker.pad.t",h?S/4:S),y("marker.pad.l",S/4),y("marker.pad.r",S/4),y("marker.pad.b",h?S:S/4),i._hovered={marker:{line:{width:2,color:M.contrast(p.paper_bgcolor)}}},A&&(y("pathbar.thickness",i.pathbar.textfont.size+2*a),y("pathbar.side"),y("pathbar.edgeshape")),y("sort"),y("root.color"),T(i,p,y),i._length=null}},{"../../components/color":366,"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/constants":650,"../bar/defaults":652,"./attributes":1075}],1080:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../sunburst/helpers"),M=d("../bar/uniform_text"),T=M.clearMinTextSize,e=d("../bar/style").resizeText,a=d("./plot_one");ne.exports=function(r,t,f,o,i){var g=i.type,p=i.drawDescendants,y=r._fullLayout,c=y["_"+g+"layer"],b,l,_=!f;if(T(g,y),b=c.selectAll("g.trace."+g).data(t,function(A){return A[0].trace.uid}),b.enter().append("g").classed("trace",!0).classed(g,!0),b.order(),!y.uniformtext.mode&&v.hasTransition(f)){o&&(l=o());var s=w.transition().duration(f.duration).ease(f.easing).each("end",function(){l&&l()}).each("interrupt",function(){l&&l()});s.each(function(){c.selectAll("g.trace").each(function(A){a(r,A,this,f,p)})})}else b.each(function(A){a(r,A,this,f,p)}),y.uniformtext.mode&&e(r,c.selectAll(".trace"),g);_&&b.exit().remove()}},{"../bar/style":662,"../bar/uniform_text":664,"../sunburst/helpers":1055,"./plot_one":1089,"@plotly/d3":58}],1081:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../lib"),M=d("../../components/drawing"),T=d("../../lib/svg_text_utils"),e=d("./partition"),a=d("./style").styleOne,n=d("./constants"),r=d("../sunburst/helpers"),t=d("../sunburst/fx"),f=!0;ne.exports=function(i,g,p,y,c){var b=c.barDifY,l=c.width,_=c.height,s=c.viewX,A=c.viewY,m=c.pathSlice,h=c.toMoveInsideSlice,x=c.strTransform,u=c.hasTransition,L=c.handleSlicesExit,S=c.makeUpdateSliceInterpolator,k=c.makeUpdateTextInterpolator,P={},z=i._fullLayout,I=g[0],D=I.trace,R=I.hierarchy,O=l/D._entryDepth,F=r.listPath(p.data,"id"),V=e(R.copy(),[l,_],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();V=V.filter(function(J){var Z=F.indexOf(J.data.id);return Z===-1?!1:(J.x0=O*Z,J.x1=O*(Z+1),J.y0=b,J.y1=b+_,J.onPathbar=!0,!0)}),V.reverse(),y=y.data(V,r.getPtId),y.enter().append("g").classed("pathbar",!0),L(y,f,P,[l,_],m),y.order();var G=y;u&&(G=G.transition().each("end",function(){var J=w.select(this);r.setSliceCursor(J,i,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),G.each(function(J){J._x0=s(J.x0),J._x1=s(J.x1),J._y0=A(J.y0),J._y1=A(J.y1),J._hoverX=s(J.x1-Math.min(l,_)/2),J._hoverY=A(J.y1-_/2);var Z=w.select(this),Y=v.ensureSingle(Z,"path","surface",function(oe){oe.style("pointer-events","all")});u?Y.transition().attrTween("d",function(oe){var N=S(oe,f,P,[l,_]);return function(U){return m(N(U))}}):Y.attr("d",m),Z.call(t,p,i,g,{styleOne:a,eventDataKeys:n.eventDataKeys,transitionTime:n.CLICK_TRANSITION_TIME,transitionEasing:n.CLICK_TRANSITION_EASING}).call(r.setSliceCursor,i,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:i._transitioning}),Y.call(a,J,D,{hovered:!1}),J._text=(r.getPtLabel(J)||"").split("<br>").join(" ")||"";var j=v.ensureSingle(Z,"g","slicetext"),re=v.ensureSingle(j,"text","",function(oe){oe.attr("data-notex",1)}),se=v.ensureUniformFontSize(i,r.determineTextFont(D,J,z.font,{onPathbar:!0}));re.text(J._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(M.font,se).call(T.convertToTspans,i),J.textBB=M.bBox(re.node()),J.transform=h(J,{fontSize:se.size,onPathbar:!0}),J.transform.fontSize=se.size,u?re.transition().attrTween("transform",function(oe){var N=k(oe,f,P,[l,_]);return function(U){return x(N(U))}}):re.attr("transform",x(J))})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1054,"../sunburst/helpers":1055,"./constants":1078,"./partition":1087,"./style":1090,"@plotly/d3":58}],1082:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../lib"),M=d("../../components/drawing"),T=d("../../lib/svg_text_utils"),e=d("./partition"),a=d("./style").styleOne,n=d("./constants"),r=d("../sunburst/helpers"),t=d("../sunburst/fx"),f=d("../sunburst/plot").formatSliceLabel,o=!1;ne.exports=function(g,p,y,c,b){var l=b.width,_=b.height,s=b.viewX,A=b.viewY,m=b.pathSlice,h=b.toMoveInsideSlice,x=b.strTransform,u=b.hasTransition,L=b.handleSlicesExit,S=b.makeUpdateSliceInterpolator,k=b.makeUpdateTextInterpolator,P=b.prevEntry,z={},I=g._fullLayout,D=p[0],R=D.trace,O=R.textposition.indexOf("left")!==-1,F=R.textposition.indexOf("right")!==-1,V=R.textposition.indexOf("bottom")!==-1,G=!V&&!R.marker.pad.t||V&&!R.marker.pad.b,J=e(y,[l,_],{packing:R.tiling.packing,squarifyratio:R.tiling.squarifyratio,flipX:R.tiling.flip.indexOf("x")>-1,flipY:R.tiling.flip.indexOf("y")>-1,pad:{inner:R.tiling.pad,top:R.marker.pad.t,left:R.marker.pad.l,right:R.marker.pad.r,bottom:R.marker.pad.b}}),Z=J.descendants(),Y=1/0,j=-1/0;Z.forEach(function(U){var q=U.depth;q>=R._maxDepth?(U.x0=U.x1=(U.x0+U.x1)/2,U.y0=U.y1=(U.y0+U.y1)/2):(Y=Math.min(Y,q),j=Math.max(j,q))}),c=c.data(Z,r.getPtId),R._maxVisibleLayers=isFinite(j)?j-Y+1:0,c.enter().append("g").classed("slice",!0),L(c,o,z,[l,_],m),c.order();var re=null;if(u&&P){var se=r.getPtId(P);c.each(function(U){re===null&&r.getPtId(U)===se&&(re={x0:U.x0,x1:U.x1,y0:U.y0,y1:U.y1})})}var oe=function(){return re||{x0:0,x1:l,y0:0,y1:_}},N=c;return u&&(N=N.transition().each("end",function(){var U=w.select(this);r.setSliceCursor(U,g,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),N.each(function(U){var q=r.isHeader(U,R);U._x0=s(U.x0),U._x1=s(U.x1),U._y0=A(U.y0),U._y1=A(U.y1),U._hoverX=s(U.x1-R.marker.pad.r),U._hoverY=A(V?U.y1-R.marker.pad.b/2:U.y0+R.marker.pad.t/2);var Q=w.select(this),W=v.ensureSingle(Q,"path","surface",function(ie){ie.style("pointer-events","all")});u?W.transition().attrTween("d",function(ie){var le=S(ie,o,oe(),[l,_]);return function(ge){return m(le(ge))}}):W.attr("d",m),Q.call(t,y,g,p,{styleOne:a,eventDataKeys:n.eventDataKeys,transitionTime:n.CLICK_TRANSITION_TIME,transitionEasing:n.CLICK_TRANSITION_EASING}).call(r.setSliceCursor,g,{isTransitioning:g._transitioning}),W.call(a,U,R,{hovered:!1}),U.x0===U.x1||U.y0===U.y1?U._text="":q?U._text=G?"":r.getPtLabel(U)||"":U._text=f(U,y,R,p,I)||"";var X=v.ensureSingle(Q,"g","slicetext"),ee=v.ensureSingle(X,"text","",function(ie){ie.attr("data-notex",1)}),te=v.ensureUniformFontSize(g,r.determineTextFont(R,U,I.font));ee.text(U._text||" ").classed("slicetext",!0).attr("text-anchor",F?"end":O||q?"start":"middle").call(M.font,te).call(T.convertToTspans,g),U.textBB=M.bBox(ee.node()),U.transform=h(U,{fontSize:te.size,isHeader:q}),U.transform.fontSize=te.size,u?ee.transition().attrTween("transform",function(ie){var le=k(ie,o,oe(),[l,_]);return function(ge){return x(le(ge))}}):ee.attr("transform",x(U))}),re}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1054,"../sunburst/helpers":1055,"../sunburst/plot":1059,"./constants":1078,"./partition":1087,"./style":1090,"@plotly/d3":58}],1083:[function(d,ne,ae){ne.exports=function w(v,M,T){var e;T.swapXY&&(e=v.x0,v.x0=v.y0,v.y0=e,e=v.x1,v.x1=v.y1,v.y1=e),T.flipX&&(e=v.x0,v.x0=M[0]-v.x1,v.x1=M[0]-e),T.flipY&&(e=v.y0,v.y0=M[1]-v.y1,v.y1=M[1]-e);var a=v.children;if(a)for(var n=0;n<a.length;n++)w(a[n],M,T)}},{}],1084:[function(d,ne,ae){ne.exports={moduleType:"trace",name:"treemap",basePlotModule:d("./base_plot"),categories:[],animatable:!0,attributes:d("./attributes"),layoutAttributes:d("./layout_attributes"),supplyDefaults:d("./defaults"),supplyLayoutDefaults:d("./layout_defaults"),calc:d("./calc").calc,crossTraceCalc:d("./calc").crossTraceCalc,plot:d("./plot"),style:d("./style").style,colorbar:d("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":945,"./attributes":1075,"./base_plot":1076,"./calc":1077,"./defaults":1079,"./layout_attributes":1085,"./layout_defaults":1086,"./plot":1088,"./style":1090}],1085:[function(d,ne,ae){ne.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1086:[function(d,ne,ae){var w=d("../../lib"),v=d("./layout_attributes");ne.exports=function(T,e){function a(n,r){return w.coerce(T,e,v,n,r)}a("treemapcolorway",e.colorway),a("extendtreemapcolors")}},{"../../lib":503,"./layout_attributes":1085}],1087:[function(d,ne,ae){var w=d("d3-hierarchy"),v=d("./flip_tree");ne.exports=function(e,a,n){var r=n.flipX,t=n.flipY,f=n.packing==="dice-slice",o=n.pad[t?"bottom":"top"],i=n.pad[r?"right":"left"],g=n.pad[r?"left":"right"],p=n.pad[t?"top":"bottom"],y;f&&(y=i,i=o,o=y,y=g,g=p,p=y);var c=w.treemap().tile(M(n.packing,n.squarifyratio)).paddingInner(n.pad.inner).paddingLeft(i).paddingRight(g).paddingTop(o).paddingBottom(p).size(f?[a[1],a[0]]:a)(e);return(f||r||t)&&v(c,a,{swapXY:f,flipX:r,flipY:t}),c};function M(T,e){switch(T){case"squarify":return w.treemapSquarify.ratio(e);case"binary":return w.treemapBinary;case"dice":return w.treemapDice;case"slice":return w.treemapSlice;default:return w.treemapSliceDice}}},{"./flip_tree":1083,"d3-hierarchy":115}],1088:[function(d,ne,ae){var w=d("./draw"),v=d("./draw_descendants");ne.exports=function(T,e,a,n){return w(T,e,a,n,{type:"treemap",drawDescendants:v})}},{"./draw":1080,"./draw_descendants":1082}],1089:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("d3-interpolate").interpolate,M=d("../sunburst/helpers"),T=d("../../lib"),e=d("../bar/constants").TEXTPAD,a=d("../bar/plot"),n=a.toMoveInsideBar,r=d("../bar/uniform_text"),t=r.recordMinTextSize,f=d("./constants"),o=d("./draw_ancestors");function i(g){return M.isHierarchyRoot(g)?"":M.getPtId(g)}ne.exports=function(p,y,c,b,l){var _=p._fullLayout,s=y[0],A=s.trace,m=A.type,h=m==="icicle",x=s.hierarchy,u=M.findEntryWithLevel(x,A.level),L=w.select(c),S=L.selectAll("g.pathbar"),k=L.selectAll("g.slice");if(!u){S.remove(),k.remove();return}var P=M.isHierarchyRoot(u),z=!_.uniformtext.mode&&M.hasTransition(b),I=M.getMaxDepth(A),D=function(Ne){return Ne.data.depth-u.data.depth<I},R=_._size,O=A.domain,F=R.w*(O.x[1]-O.x[0]),V=R.h*(O.y[1]-O.y[0]),G=F,J=A.pathbar.thickness,Z=A.marker.line.width+f.gapWithPathbar,Y=A.pathbar.visible?A.pathbar.side.indexOf("bottom")>-1?V+Z:-(J+Z):0,j={x0:G,x1:G,y0:Y,y1:Y+J},re=function(Ne,dt,Dt){var Xt=A.tiling.pad,At=function(Mt){return Mt-Xt<=dt.x0},zt=function(Mt){return Mt+Xt>=dt.x1},Ut=function(Mt){return Mt-Xt<=dt.y0},Ct=function(Mt){return Mt+Xt>=dt.y1};return Ne.x0===dt.x0&&Ne.x1===dt.x1&&Ne.y0===dt.y0&&Ne.y1===dt.y1?{x0:Ne.x0,x1:Ne.x1,y0:Ne.y0,y1:Ne.y1}:{x0:At(Ne.x0-Xt)?0:zt(Ne.x0-Xt)?Dt[0]:Ne.x0,x1:At(Ne.x1+Xt)?0:zt(Ne.x1+Xt)?Dt[0]:Ne.x1,y0:Ut(Ne.y0-Xt)?0:Ct(Ne.y0-Xt)?Dt[1]:Ne.y0,y1:Ut(Ne.y1+Xt)?0:Ct(Ne.y1+Xt)?Dt[1]:Ne.y1}},se=null,oe={},N={},U=null,q=function(Ne,dt){return dt?oe[i(Ne)]:N[i(Ne)]},Q=function(Ne,dt,Dt,Xt){if(dt)return oe[i(x)]||j;var At=N[A.level]||Dt;return D(Ne)?re(Ne,At,Xt):{}};s.hasMultipleRoots&&P&&I++,A._maxDepth=I,A._backgroundColor=_.paper_bgcolor,A._entryDepth=u.data.depth,A._atRootLevel=P;var W=-F/2+R.l+R.w*(O.x[1]+O.x[0])/2,X=-V/2+R.t+R.h*(1-(O.y[1]+O.y[0])/2),ee=function(Ne){return W+Ne},te=function(Ne){return X+Ne},ie=te(0),le=ee(0),ge=function(Ne){return le+Ne},fe=function(Ne){return ie+Ne};function pe(Ne,dt){return Ne+","+dt}var ye=ge(0),Te=function(Ne){Ne.x=Math.max(ye,Ne.x)},_e=A.pathbar.edgeshape,De=function(Ne){var dt=ge(Math.max(Math.min(Ne.x0,Ne.x0),0)),Dt=ge(Math.min(Math.max(Ne.x1,Ne.x1),G)),Xt=fe(Ne.y0),At=fe(Ne.y1),zt=J/2,Ut={},Ct={};Ut.x=dt,Ct.x=Dt,Ut.y=Ct.y=(Xt+At)/2;var Mt={x:dt,y:Xt},rt={x:Dt,y:Xt},ct={x:Dt,y:At},Ze={x:dt,y:At};return _e===">"?(Mt.x-=zt,rt.x-=zt,ct.x-=zt,Ze.x-=zt):_e==="/"?(ct.x-=zt,Ze.x-=zt,Ut.x-=zt/2,Ct.x-=zt/2):_e==="\\"?(Mt.x-=zt,rt.x-=zt,Ut.x-=zt/2,Ct.x-=zt/2):_e==="<"&&(Ut.x-=zt,Ct.x-=zt),Te(Mt),Te(Ze),Te(Ut),Te(rt),Te(ct),Te(Ct),"M"+pe(Mt.x,Mt.y)+"L"+pe(rt.x,rt.y)+"L"+pe(Ct.x,Ct.y)+"L"+pe(ct.x,ct.y)+"L"+pe(Ze.x,Ze.y)+"L"+pe(Ut.x,Ut.y)+"Z"},Be=function(Ne){var dt=ee(Ne.x0),Dt=ee(Ne.x1),Xt=te(Ne.y0),At=te(Ne.y1),zt=Dt-dt,Ut=At-Xt;if(!zt||!Ut)return"";var Ct=0,Mt=zt>2*Ct&&Ut>2*Ct?Ct:0,rt=function(ct,Ze){return Mt?"a"+pe(Mt,Mt)+" 0 0 1 "+pe(ct,Ze):""};return"M"+pe(dt,Xt+Mt)+rt(Mt,-Mt)+"L"+pe(Dt-Mt,Xt)+rt(Mt,Mt)+"L"+pe(Dt,At-Mt)+rt(-Mt,Mt)+"L"+pe(dt+Mt,At)+rt(-Mt,-Mt)+"Z"},Ue=function(Ne,dt){var Dt=Ne.x0,Xt=Ne.x1,At=Ne.y0,zt=Ne.y1,Ut=Ne.textBB,Ct=function(Bt){return A.textposition.indexOf(Bt)!==-1},Mt=Ct("bottom"),rt=Ct("top")||dt.isHeader&&!Mt,ct=rt?"start":Mt?"end":"middle",Ze=Ct("right"),ke=Ct("left")||dt.onPathbar,Ge=ke?-1:Ze?1:0,Je=A[h?"tiling":"marker"].pad;if(dt.isHeader){if(Dt+=(h?Je:Je.l)-e,Xt-=(h?Je:Je.r)-e,Dt>=Xt){var ot=(Dt+Xt)/2;Dt=ot,Xt=ot}var Pt;Mt?(Pt=zt-(h?Je:Je.b),At<Pt&&Pt<zt&&(At=Pt)):(Pt=At+(h?Je:Je.t),At<Pt&&Pt<zt&&(zt=Pt))}var _t=n(Dt,Xt,At,zt,Ut,{isHorizontal:!1,constrained:!0,angle:0,anchor:ct,leftToRight:Ge});return _t.fontSize=dt.fontSize,_t.targetX=ee(_t.targetX),_t.targetY=te(_t.targetY),isNaN(_t.targetX)||isNaN(_t.targetY)?{}:(Dt!==Xt&&At!==zt&&t(A.type,_t,_),{scale:_t.scale,rotate:_t.rotate,textX:_t.textX,textY:_t.textY,anchorX:_t.anchorX,anchorY:_t.anchorY,targetX:_t.targetX,targetY:_t.targetY})},xe=function(Ne,dt){for(var Dt,Xt=0,At=Ne;!Dt&&Xt<I;)Xt++,At=At.parent,At?Dt=q(At,dt):Xt=I;return Dt||{}},Pe=function(Ne,dt,Dt,Xt){var At=q(Ne,dt),zt;if(dt)zt=j;else{var Ut=q(u,dt);Ut?zt=re(Ne,Ut,Xt):zt={}}return v(At,zt)},Ve=function(Ne,dt,Dt,Xt,At){var zt=q(Ne,dt),Ut;if(zt)Ut=zt;else if(dt)Ut=j;else if(se)if(Ne.parent){var Ct=U||Dt;Ct&&!dt?Ut=re(Ne,Ct,Xt):(Ut={},T.extendFlat(Ut,xe(Ne,dt)))}else Ut=T.extendFlat({},Ne),h&&(At.orientation==="h"?At.flipX?Ut.x0=Ne.x1:Ut.x1=0:At.flipY?Ut.y0=Ne.y1:Ut.y1=0);else Ut={};return v(Ut,{x0:Ne.x0,x1:Ne.x1,y0:Ne.y0,y1:Ne.y1})},Qe=function(Ne,dt,Dt,Xt){var At=q(Ne,dt),zt={},Ut=Q(Ne,dt,Dt,Xt);T.extendFlat(zt,{transform:Ue({x0:Ut.x0,x1:Ut.x1,y0:Ut.y0,y1:Ut.y1,textBB:Ne.textBB,_text:Ne._text},{isHeader:M.isHeader(Ne,A)})}),At?zt=At:Ne.parent&&T.extendFlat(zt,xe(Ne,dt));var Ct=Ne.transform;return Ne.x0!==Ne.x1&&Ne.y0!==Ne.y1&&t(A.type,Ct,_),v(zt,{transform:{scale:Ct.scale,rotate:Ct.rotate,textX:Ct.textX,textY:Ct.textY,anchorX:Ct.anchorX,anchorY:Ct.anchorY,targetX:Ct.targetX,targetY:Ct.targetY}})},Fe=function(Ne,dt,Dt,Xt,At){var zt=Xt[0],Ut=Xt[1];z?Ne.exit().transition().each(function(){var Ct=w.select(this),Mt=Ct.select("path.surface");Mt.transition().attrTween("d",function(ct){var Ze=Pe(ct,dt,Dt,[zt,Ut]);return function(ke){return At(Ze(ke))}});var rt=Ct.select("g.slicetext");rt.attr("opacity",0)}).remove():Ne.exit().remove()},Le=function(Ne){var dt=Ne.transform;return Ne.x0!==Ne.x1&&Ne.y0!==Ne.y1&&t(A.type,dt,_),T.getTextTransform({textX:dt.textX,textY:dt.textY,anchorX:dt.anchorX,anchorY:dt.anchorY,targetX:dt.targetX,targetY:dt.targetY,scale:dt.scale,rotate:dt.rotate})};z&&(S.each(function(Ne){oe[i(Ne)]={x0:Ne.x0,x1:Ne.x1,y0:Ne.y0,y1:Ne.y1},Ne.transform&&(oe[i(Ne)].transform={textX:Ne.transform.textX,textY:Ne.transform.textY,anchorX:Ne.transform.anchorX,anchorY:Ne.transform.anchorY,targetX:Ne.transform.targetX,targetY:Ne.transform.targetY,scale:Ne.transform.scale,rotate:Ne.transform.rotate})}),k.each(function(Ne){N[i(Ne)]={x0:Ne.x0,x1:Ne.x1,y0:Ne.y0,y1:Ne.y1},Ne.transform&&(N[i(Ne)].transform={textX:Ne.transform.textX,textY:Ne.transform.textY,anchorX:Ne.transform.anchorX,anchorY:Ne.transform.anchorY,targetX:Ne.transform.targetX,targetY:Ne.transform.targetY,scale:Ne.transform.scale,rotate:Ne.transform.rotate}),!se&&M.isEntry(Ne)&&(se=Ne)})),U=l(p,y,u,k,{width:F,height:V,viewX:ee,viewY:te,pathSlice:Be,toMoveInsideSlice:Ue,prevEntry:se,makeUpdateSliceInterpolator:Ve,makeUpdateTextInterpolator:Qe,handleSlicesExit:Fe,hasTransition:z,strTransform:Le}),A.pathbar.visible?o(p,y,u,S,{barDifY:Y,width:G,height:J,viewX:ge,viewY:fe,pathSlice:De,toMoveInsideSlice:Ue,makeUpdateSliceInterpolator:Ve,makeUpdateTextInterpolator:Qe,handleSlicesExit:Fe,hasTransition:z,strTransform:Le}):S.remove()}},{"../../lib":503,"../bar/constants":650,"../bar/plot":659,"../bar/uniform_text":664,"../sunburst/helpers":1055,"./constants":1078,"./draw_ancestors":1081,"@plotly/d3":58,"d3-interpolate":116}],1090:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../components/color"),M=d("../../lib"),T=d("../sunburst/helpers"),e=d("../bar/uniform_text").resizeText;function a(r){var t=r._fullLayout._treemaplayer.selectAll(".trace");e(r,t,"treemap"),t.each(function(f){var o=w.select(this),i=f[0],g=i.trace;o.style("opacity",g.opacity),o.selectAll("path.surface").each(function(p){w.select(this).call(n,p,g,{hovered:!1})})})}function n(r,t,f,o){var i=(o||{}).hovered,g=t.data.data,p=g.i,y,c,b=g.color,l=T.isHierarchyRoot(t),_=1;if(i)y=f._hovered.marker.line.color,c=f._hovered.marker.line.width;else if(l&&b===f.root.color)_=100,y="rgba(0,0,0,0)",c=0;else if(y=M.castOption(f,p,"marker.line.color")||v.defaultLine,c=M.castOption(f,p,"marker.line.width")||0,!f._hasColorscale&&!t.onPathbar){var s=f.marker.depthfade;if(s){var A=v.combine(v.addOpacity(f._backgroundColor,.75),b),m;if(s===!0){var h=T.getMaxDepth(f);isFinite(h)?T.isLeaf(t)?m=0:m=f._maxVisibleLayers-(t.data.depth-f._entryDepth):m=t.data.height+1}else m=t.data.depth-f._entryDepth,f._atRootLevel||m++;if(m>0)for(var x=0;x<m;x++){var u=.5*x/m;b=v.combine(v.addOpacity(A,u),b)}}}r.style("stroke-width",c).call(v.fill,b).call(v.stroke,y).style("opacity",_)}ne.exports={style:a,styleOne:n}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"../sunburst/helpers":1055,"@plotly/d3":58}],1091:[function(d,ne,ae){var w=d("../box/attributes"),v=d("../../lib/extend").extendFlat,M=d("../../plots/cartesian/axis_format_attributes").axisHoverFormat;ne.exports={y:w.y,x:w.x,x0:w.x0,y0:w.y0,xhoverformat:M("x"),yhoverformat:M("y"),name:v({},w.name,{}),orientation:v({},w.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:w.fillcolor,points:v({},w.boxpoints,{}),jitter:v({},w.jitter,{}),pointpos:v({},w.pointpos,{}),width:v({},w.width,{}),marker:w.marker,text:w.text,hovertext:w.hovertext,hovertemplate:w.hovertemplate,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:w.offsetgroup,alignmentgroup:w.alignmentgroup,selected:w.selected,unselected:w.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../box/attributes":673}],1092:[function(d,ne,ae){var w=d("../../lib"),v=d("../../plots/cartesian/axes"),M=d("../box/calc"),T=d("./helpers"),e=d("../../constants/numerical").BADNUM;ne.exports=function(f,o){var i=M(f,o);if(i[0].t.empty)return i;for(var g=f._fullLayout,p=v.getFromId(f,o[o.orientation==="h"?"xaxis":"yaxis"]),y=1/0,c=-1/0,b=0,l=0,_=0;_<i.length;_++){var s=i[_],A=s.pts.map(T.extractVal),m=s.bandwidth=n(o,s,A),h=s.span=r(o,s,p,m);if(s.min===s.max&&m===0)h=s.span=[s.min,s.max],s.density=[{v:1,t:h[0]}],s.bandwidth=m,b=Math.max(b,1);else{var x=h[1]-h[0],u=Math.ceil(x/(m/3)),L=x/u;if(!isFinite(L)||!isFinite(u))return w.error("Something went wrong with computing the violin span"),i[0].t.empty=!0,i;var S=T.makeKDE(s,o,A);s.density=new Array(u);for(var k=0,P=h[0];P<h[1]+L/2;k++,P+=L){var z=S(P);s.density[k]={v:z,t:P},b=Math.max(b,z)}}l=Math.max(l,A.length),y=Math.min(y,h[0]),c=Math.max(c,h[1])}var I=v.findExtremes(p,[y,c],{padded:!0});if(o._extremes[p._id]=I,o.width)i[0].t.maxKDE=b;else{var D=g._violinScaleGroupStats,R=o.scalegroup,O=D[R];O?(O.maxKDE=Math.max(O.maxKDE,b),O.maxCount=Math.max(O.maxCount,l)):D[R]={maxKDE:b,maxCount:l}}return i[0].t.labels.kde=w._(f,"kde:"),i};function a(t,f,o){var i=Math.min(f,o/1.349);return 1.059*i*Math.pow(t,-.2)}function n(t,f,o){var i=f.max-f.min;if(!i)return t.bandwidth?t.bandwidth:0;if(t.bandwidth)return Math.max(t.bandwidth,i/1e4);var g=o.length,p=w.stdev(o,g-1,f.mean);return Math.max(a(g,p,f.q3-f.q1),i/100)}function r(t,f,o,i){var g=t.spanmode,p=t.span||[],y=[f.min,f.max],c=[f.min-2*i,f.max+2*i],b;function l(s){var A=p[s],m=o.type==="multicategory"?o.r2c(A):o.d2c(A,0,t[f.valLetter+"calendar"]);return m===e?c[s]:m}g==="soft"?b=c:g==="hard"?b=y:b=[l(0),l(1)];var _={type:"linear",range:b};return v.setConvert(_),_.cleanRange(),b}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../box/calc":674,"./helpers":1095}],1093:[function(d,ne,ae){var w=d("../box/cross_trace_calc").setPositionOffset,v=["v","h"];ne.exports=function(T,e){for(var a=T.calcdata,n=e.xaxis,r=e.yaxis,t=0;t<v.length;t++){for(var f=v[t],o=f==="h"?r:n,i=[],g=0;g<a.length;g++){var p=a[g],y=p[0].t,c=p[0].trace;c.visible===!0&&c.type==="violin"&&!y.empty&&c.orientation===f&&c.xaxis===n._id&&c.yaxis===r._id&&i.push(g)}w("violin",T,i,o)}}},{"../box/cross_trace_calc":675}],1094:[function(d,ne,ae){var w=d("../../lib"),v=d("../../components/color"),M=d("../box/defaults"),T=d("./attributes");ne.exports=function(a,n,r,t){function f(L,S){return w.coerce(a,n,T,L,S)}function o(L,S){return w.coerce2(a,n,T,L,S)}if(M.handleSampleDefaults(a,n,f,t),n.visible!==!1){f("bandwidth"),f("side");var i=f("width");i||(f("scalegroup",n.name),f("scalemode"));var g=f("span"),p;Array.isArray(g)&&(p="manual"),f("spanmode",p);var y=f("line.color",(a.marker||{}).color||r),c=f("line.width"),b=f("fillcolor",v.addOpacity(n.line.color,.5));M.handlePointsDefaults(a,n,f,{prefix:""});var l=o("box.width"),_=o("box.fillcolor",b),s=o("box.line.color",y),A=o("box.line.width",c),m=f("box.visible",Boolean(l||_||s||A));m||(n.box={visible:!1});var h=o("meanline.color",y),x=o("meanline.width",c),u=f("meanline.visible",Boolean(h||x));u||(n.meanline={visible:!1})}}},{"../../components/color":366,"../../lib":503,"../box/defaults":676,"./attributes":1091}],1095:[function(d,ne,ae){var w=d("../../lib"),v={gaussian:function(M){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*M*M)}};ae.makeKDE=function(M,T,e){var a=e.length,n=v.gaussian,r=M.bandwidth,t=1/(a*r);return function(f){for(var o=0,i=0;i<a;i++)o+=n((f-e[i])/r);return t*o}},ae.getPositionOnKdePath=function(M,T,e){var a,n;T.orientation==="h"?(a="y",n="x"):(a="x",n="y");var r=w.findPointOnPath(M.path,e,n,{pathLength:M.pathLength}),t=M.posCenterPx,f=r[a],o=T.side==="both"?2*t-f:t;return[f,o]},ae.getKdeValue=function(M,T,e){var a=M.pts.map(ae.extractVal),n=ae.makeKDE(M,T,a);return n(e)/M.posDensityScale},ae.extractVal=function(M){return M.v}},{"../../lib":503}],1096:[function(d,ne,ae){var w=d("../../lib"),v=d("../../plots/cartesian/axes"),M=d("../box/hover"),T=d("./helpers");ne.exports=function(a,n,r,t,f){f||(f={});var o=f.hoverLayer,i=a.cd,g=i[0].trace,p=g.hoveron,y=p.indexOf("violins")!==-1,c=p.indexOf("kde")!==-1,b=[],l,_;if(y||c){var s=M.hoverOnBoxes(a,n,r,t);if(c&&s.length>0){var A=a.xa,m=a.ya,h,x,u,L,S;g.orientation==="h"?(S=n,h="y",u=m,x="x",L=A):(S=r,h="x",u=A,x="y",L=m);var k=i[a.index];if(S>=k.span[0]&&S<=k.span[1]){var P=w.extendFlat({},a),z=L.c2p(S,!0),I=T.getKdeValue(k,g,S),D=T.getPositionOnKdePath(k,g,z),R=u._offset,O=u._length;P[h+"0"]=D[0],P[h+"1"]=D[1],P[x+"0"]=P[x+"1"]=z,P[x+"Label"]=x+": "+v.hoverLabelText(L,S,g[x+"hoverformat"])+", "+i[0].t.labels.kde+" "+I.toFixed(3),P.spikeDistance=s[0].spikeDistance;var F=h+"Spike";P[F]=s[0][F],s[0].spikeDistance=void 0,s[0][F]=void 0,P.hovertemplate=!1,b.push(P),_={stroke:a.color},_[h+"1"]=w.constrain(R+D[0],R,R+O),_[h+"2"]=w.constrain(R+D[1],R,R+O),_[x+"1"]=_[x+"2"]=L._offset+z}}y&&(b=b.concat(s))}p.indexOf("points")!==-1&&(l=M.hoverOnPoints(a,n,r));var V=o.selectAll(".violinline-"+g.uid).data(_?[0]:[]);return V.enter().append("line").classed("violinline-"+g.uid,!0).attr("stroke-width",1.5),V.exit().remove(),V.attr(_),t==="closest"?l?[l]:b:(l&&b.push(l),b)}},{"../../lib":503,"../../plots/cartesian/axes":554,"../box/hover":678,"./helpers":1095}],1097:[function(d,ne,ae){ne.exports={attributes:d("./attributes"),layoutAttributes:d("./layout_attributes"),supplyDefaults:d("./defaults"),crossTraceDefaults:d("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:d("./layout_defaults"),calc:d("./calc"),crossTraceCalc:d("./cross_trace_calc"),plot:d("./plot"),style:d("./style"),styleOnSelect:d("../scatter/style").styleOnSelect,hoverPoints:d("./hover"),selectPoints:d("../box/select"),moduleType:"trace",name:"violin",basePlotModule:d("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../box/defaults":676,"../box/select":683,"../scatter/style":951,"./attributes":1091,"./calc":1092,"./cross_trace_calc":1093,"./defaults":1094,"./hover":1096,"./layout_attributes":1098,"./layout_defaults":1099,"./plot":1100,"./style":1101}],1098:[function(d,ne,ae){var w=d("../box/layout_attributes"),v=d("../../lib").extendFlat;ne.exports={violinmode:v({},w.boxmode,{}),violingap:v({},w.boxgap,{}),violingroupgap:v({},w.boxgroupgap,{})}},{"../../lib":503,"../box/layout_attributes":680}],1099:[function(d,ne,ae){var w=d("../../lib"),v=d("./layout_attributes"),M=d("../box/layout_defaults");ne.exports=function(e,a,n){function r(t,f){return w.coerce(e,a,v,t,f)}M._supply(e,a,n,r,"violin")}},{"../../lib":503,"../box/layout_defaults":681,"./layout_attributes":1098}],1100:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../lib"),M=d("../../components/drawing"),T=d("../box/plot"),e=d("../scatter/line_points"),a=d("./helpers");ne.exports=function(r,t,f,o){var i=r._fullLayout,g=t.xaxis,p=t.yaxis;function y(c){var b=e(c,{xaxis:g,yaxis:p,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return M.smoothopen(b[0],1)}v.makeTraceGroups(o,f,"trace violins").each(function(c){var b=w.select(this),l=c[0],_=l.t,s=l.trace;if(s.visible!==!0||_.empty){b.remove();return}var A=_.bPos,m=_.bdPos,h=t[_.valLetter+"axis"],x=t[_.posLetter+"axis"],u=s.side==="both",L=u||s.side==="positive",S=u||s.side==="negative",k=b.selectAll("path.violin").data(v.identity);k.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),k.exit().remove(),k.each(function(V){var G=w.select(this),J=V.density,Z=J.length,Y=x.c2l(V.pos+A,!0),j=x.l2p(Y),re;if(s.width)re=_.maxKDE/m;else{var se=i._violinScaleGroupStats[s.scalegroup];re=s.scalemode==="count"?se.maxKDE/m*(se.maxCount/V.pts.length):se.maxKDE/m}var oe,N,U,q,Q,W,X;if(L){for(W=new Array(Z),q=0;q<Z;q++)X=W[q]={},X[_.posLetter]=Y+J[q].v/re,X[_.valLetter]=h.c2l(J[q].t,!0);oe=y(W)}if(S){for(W=new Array(Z),Q=0,q=Z-1;Q<Z;Q++,q--)X=W[Q]={},X[_.posLetter]=Y-J[q].v/re,X[_.valLetter]=h.c2l(J[q].t,!0);N=y(W)}if(u)U=oe+"L"+N.substr(1)+"Z";else{var ee=[j,h.c2p(J[0].t)],te=[j,h.c2p(J[Z-1].t)];s.orientation==="h"&&(ee.reverse(),te.reverse()),L?U="M"+ee+"L"+oe.substr(1)+"L"+te:U="M"+te+"L"+N.substr(1)+"L"+ee}G.attr("d",U),V.posCenterPx=j,V.posDensityScale=re*m,V.path=G.node(),V.pathLength=V.path.getTotalLength()/(u?2:1)});var P=s.box,z=P.width,I=(P.line||{}).width,D,R;u?(D=m*z,R=0):L?(D=[0,m*z/2],R=I*{x:1,y:-1}[_.posLetter]):(D=[m*z/2,0],R=I*{x:-1,y:1}[_.posLetter]),T.plotBoxAndWhiskers(b,{pos:x,val:h},s,{bPos:A,bdPos:D,bPosPxOffset:R}),T.plotBoxMean(b,{pos:x,val:h},s,{bPos:A,bdPos:D,bPosPxOffset:R});var O;!s.box.visible&&s.meanline.visible&&(O=v.identity);var F=b.selectAll("path.meanline").data(O||[]);F.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),F.exit().remove(),F.each(function(V){var G=h.c2p(V.mean,!0),J=a.getPositionOnKdePath(V,s,G);w.select(this).attr("d",s.orientation==="h"?"M"+G+","+J[0]+"V"+J[1]:"M"+J[0]+","+G+"H"+J[1])}),T.plotPoints(b,{x:g,y:p},s,_)})}},{"../../components/drawing":388,"../../lib":503,"../box/plot":682,"../scatter/line_points":941,"./helpers":1095,"@plotly/d3":58}],1101:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../components/color"),M=d("../scatter/style").stylePoints;ne.exports=function(e){var a=w.select(e).selectAll("g.trace.violins");a.style("opacity",function(n){return n[0].trace.opacity}),a.each(function(n){var r=n[0].trace,t=w.select(this),f=r.box||{},o=f.line||{},i=r.meanline||{},g=i.width;t.selectAll("path.violin").style("stroke-width",r.line.width+"px").call(v.stroke,r.line.color).call(v.fill,r.fillcolor),t.selectAll("path.box").style("stroke-width",o.width+"px").call(v.stroke,o.color).call(v.fill,f.fillcolor);var p={"stroke-width":g+"px","stroke-dasharray":2*g+"px,"+g+"px"};t.selectAll("path.mean").style(p).call(v.stroke,i.color),t.selectAll("path.meanline").style(p).call(v.stroke,i.color),M(t,r,e)})}},{"../../components/color":366,"../scatter/style":951,"@plotly/d3":58}],1102:[function(d,ne,ae){var w=d("../../components/colorscale/attributes"),v=d("../isosurface/attributes"),M=d("../surface/attributes"),T=d("../../plots/attributes"),e=d("../../lib/extend").extendFlat,a=d("../../plot_api/edit_types").overrideAll,n=ne.exports=a(e({x:v.x,y:v.y,z:v.z,value:v.value,isomin:v.isomin,isomax:v.isomax,surface:v.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:v.slices,caps:v.caps,text:v.text,hovertext:v.hovertext,xhoverformat:v.xhoverformat,yhoverformat:v.yhoverformat,zhoverformat:v.zhoverformat,valuehoverformat:v.valuehoverformat,hovertemplate:v.hovertemplate},w("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:v.colorbar,opacity:v.opacity,opacityscale:M.opacityscale,lightposition:v.lightposition,lighting:v.lighting,flatshading:v.flatshading,contour:v.contour,hoverinfo:e({},T.hoverinfo),showlegend:e({},T.showlegend,{dflt:!1})}),"calc","nested");n.x.editType=n.y.editType=n.z.editType=n.value.editType="calc+clearAxisTypes",n.transforms=void 0},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../isosurface/attributes":862,"../surface/attributes":1061}],1103:[function(d,ne,ae){var w=d("../../../stackgl_modules").gl_mesh3d,v=d("../../lib/gl_format_color").parseColorScale,M=d("../../lib/str2rgbarray"),T=d("../../components/colorscale").extractOpts,e=d("../../plots/gl3d/zip3"),a=d("../isosurface/convert").findNearestOnAxis,n=d("../isosurface/convert").generateIsoMeshes;function r(o,i,g){this.scene=o,this.uid=g,this.mesh=i,this.name="",this.data=null,this.showContour=!1}var t=r.prototype;t.handlePick=function(o){if(o.object===this.mesh){var i=o.data.index,g=this.data._meshX[i],p=this.data._meshY[i],y=this.data._meshZ[i],c=this.data._Ys.length,b=this.data._Zs.length,l=a(g,this.data._Xs).id,_=a(p,this.data._Ys).id,s=a(y,this.data._Zs).id,A=o.index=s+b*_+b*c*l;o.traceCoordinate=[this.data._meshX[A],this.data._meshY[A],this.data._meshZ[A],this.data._value[A]];var m=this.data.hovertext||this.data.text;return Array.isArray(m)&&m[A]!==void 0?o.textLabel=m[A]:m&&(o.textLabel=m),!0}},t.update=function(o){var i=this.scene,g=i.fullSceneLayout;this.data=n(o);function p(_,s,A,m){return s.map(function(h){return _.d2l(h,0,m)*A})}var y=e(p(g.xaxis,o._meshX,i.dataScale[0],o.xcalendar),p(g.yaxis,o._meshY,i.dataScale[1],o.ycalendar),p(g.zaxis,o._meshZ,i.dataScale[2],o.zcalendar)),c=e(o._meshI,o._meshJ,o._meshK),b={positions:y,cells:c,lightPosition:[o.lightposition.x,o.lightposition.y,o.lightposition.z],ambient:o.lighting.ambient,diffuse:o.lighting.diffuse,specular:o.lighting.specular,roughness:o.lighting.roughness,fresnel:o.lighting.fresnel,vertexNormalsEpsilon:o.lighting.vertexnormalsepsilon,faceNormalsEpsilon:o.lighting.facenormalsepsilon,opacity:o.opacity,opacityscale:o.opacityscale,contourEnable:o.contour.show,contourColor:M(o.contour.color).slice(0,3),contourWidth:o.contour.width,useFacetNormals:o.flatshading},l=T(o);b.vertexIntensity=o._meshIntensity,b.vertexIntensityBounds=[l.min,l.max],b.colormap=v(o),this.mesh.update(b)},t.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function f(o,i){var g=o.glplot.gl,p=w({gl:g}),y=new r(o,p,i.uid);return p._trace=y,y.update(i),o.glplot.add(p),y}ne.exports=f},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609,"../isosurface/convert":864}],1104:[function(d,ne,ae){var w=d("../../lib"),v=d("./attributes"),M=d("../isosurface/defaults").supplyIsoDefaults,T=d("../surface/defaults").opacityscaleDefaults;ne.exports=function(a,n,r,t){function f(o,i){return w.coerce(a,n,v,o,i)}M(a,n,r,t,f),T(a,n,t,f)}},{"../../lib":503,"../isosurface/defaults":865,"../surface/defaults":1064,"./attributes":1102}],1105:[function(d,ne,ae){ne.exports={attributes:d("./attributes"),supplyDefaults:d("./defaults"),calc:d("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:d("./convert"),moduleType:"trace",name:"volume",basePlotModule:d("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"../isosurface/calc":863,"./attributes":1102,"./convert":1103,"./defaults":1104}],1106:[function(d,ne,ae){var w=d("../bar/attributes"),v=d("../scatter/attributes").line,M=d("../../plots/attributes"),T=d("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=d("../../plots/template_attributes").hovertemplateAttrs,a=d("../../plots/template_attributes").texttemplateAttrs,n=d("./constants"),r=d("../../lib/extend").extendFlat,t=d("../../components/color");function f(o){return{marker:{color:r({},w.marker.color,{arrayOk:!1,editType:"style"}),line:{color:r({},w.marker.line.color,{arrayOk:!1,editType:"style"}),width:r({},w.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}ne.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:w.x,x0:w.x0,dx:w.dx,y:w.y,y0:w.y0,dy:w.dy,xperiod:w.xperiod,yperiod:w.yperiod,xperiod0:w.xperiod0,yperiod0:w.yperiod0,xperiodalignment:w.xperiodalignment,yperiodalignment:w.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),hovertext:w.hovertext,hovertemplate:e({},{keys:n.eventDataKeys}),hoverinfo:r({},M.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:a({editType:"plot"},{keys:n.eventDataKeys.concat(["label"])}),text:w.text,textposition:w.textposition,insidetextanchor:w.insidetextanchor,textangle:w.textangle,textfont:w.textfont,insidetextfont:w.insidetextfont,outsidetextfont:w.outsidetextfont,constraintext:w.constraintext,cliponaxis:w.cliponaxis,orientation:w.orientation,offset:w.offset,width:w.width,increasing:f(),decreasing:f(),totals:f(),connector:{line:{color:r({},v.color,{dflt:t.defaultLine}),width:r({},v.width,{editType:"plot"}),dash:v.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:w.offsetgroup,alignmentgroup:w.alignmentgroup}},{"../../components/color":366,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":927,"./constants":1108}],1107:[function(d,ne,ae){var w=d("../../plots/cartesian/axes"),v=d("../../plots/cartesian/align_period"),M=d("../../lib").mergeArray,T=d("../scatter/calc_selection"),e=d("../../constants/numerical").BADNUM;function a(r){return r==="a"||r==="absolute"}function n(r){return r==="t"||r==="total"}ne.exports=function(t,f){var o=w.getFromId(t,f.xaxis||"x"),i=w.getFromId(t,f.yaxis||"y"),g,p,y,c,b,l;f.orientation==="h"?(g=o.makeCalcdata(f,"x"),y=i.makeCalcdata(f,"y"),c=v(f,i,"y",y),b=!!f.yperiodalignment,l="y"):(g=i.makeCalcdata(f,"y"),y=o.makeCalcdata(f,"x"),c=v(f,o,"x",y),b=!!f.xperiodalignment,l="x"),p=c.vals;for(var _=Math.min(p.length,g.length),s=new Array(_),A=0,m,h=!1,x=0;x<_;x++){var u=g[x]||0,L=!1;(g[x]!==e||n(f.measure[x])||a(f.measure[x]))&&x+1<_&&(g[x+1]!==e||n(f.measure[x+1])||a(f.measure[x+1]))&&(L=!0);var S=s[x]={i:x,p:p[x],s:u,rawS:u,cNext:L};a(f.measure[x])?(A=S.s,S.isSum=!0,S.dir="totals",S.s=A):n(f.measure[x])?(S.isSum=!0,S.dir="totals",S.s=A):(S.isSum=!1,S.dir=S.rawS<0?"decreasing":"increasing",m=S.s,S.s=A+m,A+=m),S.dir==="totals"&&(h=!0),b&&(s[x].orig_p=y[x],s[x][l+"End"]=c.ends[x],s[x][l+"Start"]=c.starts[x]),f.ids&&(S.id=String(f.ids[x])),S.v=(f.base||0)+A}return s.length&&(s[0].hasTotals=h),M(f.text,s,"tx"),M(f.hovertext,s,"htx"),T(s,f),s}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":929}],1108:[function(d,ne,ae){ne.exports={eventDataKeys:["initial","delta","final"]}},{}],1109:[function(d,ne,ae){var w=d("../bar/cross_trace_calc").setGroupPositions;ne.exports=function(M,T){var e=M._fullLayout,a=M._fullData,n=M.calcdata,r=T.xaxis,t=T.yaxis,f=[],o=[],i=[],g,p;for(p=0;p<a.length;p++){var y=a[p];y.visible===!0&&y.xaxis===r._id&&y.yaxis===t._id&&y.type==="waterfall"&&(g=n[p],y.orientation==="h"?i.push(g):o.push(g),f.push(g))}var c={mode:e.waterfallmode,norm:e.waterfallnorm,gap:e.waterfallgap,groupgap:e.waterfallgroupgap};for(w(M,r,t,o,c),w(M,t,r,i,c),p=0;p<f.length;p++){g=f[p];for(var b=0;b<g.length;b++){var l=g[b];l.isSum===!1&&(l.s0+=b===0?0:g[b-1].s),b+1<g.length&&(g[b].nextP0=g[b+1].p0,g[b].nextS0=g[b+1].s0)}}}},{"../bar/cross_trace_calc":651}],1110:[function(d,ne,ae){var w=d("../../lib"),v=d("../bar/defaults").handleGroupingDefaults,M=d("../bar/defaults").handleText,T=d("../scatter/xy_defaults"),e=d("../scatter/period_defaults"),a=d("./attributes"),n=d("../../components/color"),r=d("../../constants/delta.js"),t=r.INCREASING.COLOR,f=r.DECREASING.COLOR,o="#4499FF";function i(y,c,b){y(c+".marker.color",b),y(c+".marker.line.color",n.defaultLine),y(c+".marker.line.width")}function g(y,c,b,l){function _(x,u){return w.coerce(y,c,a,x,u)}var s=T(y,c,l,_);if(!s){c.visible=!1;return}e(y,c,l,_),_("xhoverformat"),_("yhoverformat"),_("measure"),_("orientation",c.x&&!c.y?"h":"v"),_("base"),_("offset"),_("width"),_("text"),_("hovertext"),_("hovertemplate");var A=_("textposition");M(y,c,l,_,A,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),c.textposition!=="none"&&(_("texttemplate"),c.texttemplate||_("textinfo")),i(_,"increasing",t),i(_,"decreasing",f),i(_,"totals",o);var m=_("connector.visible");if(m){_("connector.mode");var h=_("connector.line.width");h&&(_("connector.line.color"),_("connector.line.dash"))}}function p(y,c){var b,l;function _(A){return w.coerce(l._input,l,a,A)}if(c.waterfallmode==="group")for(var s=0;s<y.length;s++)l=y[s],b=l._input,v(b,l,c,_)}ne.exports={supplyDefaults:g,crossTraceDefaults:p}},{"../../components/color":366,"../../constants/delta.js":473,"../../lib":503,"../bar/defaults":652,"../scatter/period_defaults":947,"../scatter/xy_defaults":954,"./attributes":1106}],1111:[function(d,ne,ae){ne.exports=function(v,M){return v.x="xVal"in M?M.xVal:M.x,v.y="yVal"in M?M.yVal:M.y,"initial"in M&&(v.initial=M.initial),"delta"in M&&(v.delta=M.delta),"final"in M&&(v.final=M.final),M.xa&&(v.xaxis=M.xa),M.ya&&(v.yaxis=M.ya),v}},{}],1112:[function(d,ne,ae){var w=d("../../plots/cartesian/axes").hoverLabelText,v=d("../../components/color").opacity,M=d("../bar/hover").hoverOnBars,T=d("../../constants/delta.js"),e={increasing:T.INCREASING.SYMBOL,decreasing:T.DECREASING.SYMBOL};ne.exports=function(r,t,f,o,i){var g=M(r,t,f,o,i);if(!g)return;var p=g.cd,y=p[0].trace,c=y.orientation==="h",b=c?"x":"y",l=c?r.xa:r.ya;function _(P){return w(l,P,y[b+"hoverformat"])}var s=g.index,A=p[s],m=A.isSum?A.b+A.s:A.rawS;if(!A.isSum){g.initial=A.b+A.s-m,g.delta=m,g.final=g.initial+g.delta;var h=_(Math.abs(g.delta));g.deltaLabel=m<0?"("+h+")":h,g.finalLabel=_(g.final),g.initialLabel=_(g.initial)}var x=A.hi||y.hoverinfo,u=[];if(x&&x!=="none"&&x!=="skip"){var L=x==="all",S=x.split("+"),k=function(P){return L||S.indexOf(P)!==-1};A.isSum||(k("final")&&(c?!k("x"):!k("y"))&&u.push(g.finalLabel),k("delta")&&(m<0?u.push(g.deltaLabel+" "+e.decreasing):u.push(g.deltaLabel+" "+e.increasing)),k("initial")&&u.push("Initial: "+g.initialLabel))}return u.length&&(g.extraText=u.join("<br>")),g.color=a(y,A),[g]};function a(n,r){var t=n[r.dir].marker,f=t.color,o=t.line.color,i=t.line.width;if(v(f))return f;if(v(o)&&i)return o}},{"../../components/color":366,"../../constants/delta.js":473,"../../plots/cartesian/axes":554,"../bar/hover":655}],1113:[function(d,ne,ae){ne.exports={attributes:d("./attributes"),layoutAttributes:d("./layout_attributes"),supplyDefaults:d("./defaults").supplyDefaults,crossTraceDefaults:d("./defaults").crossTraceDefaults,supplyLayoutDefaults:d("./layout_defaults"),calc:d("./calc"),crossTraceCalc:d("./cross_trace_calc"),plot:d("./plot"),style:d("./style").style,hoverPoints:d("./hover"),eventData:d("./event_data"),selectPoints:d("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:d("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../bar/select":660,"./attributes":1106,"./calc":1107,"./cross_trace_calc":1109,"./defaults":1110,"./event_data":1111,"./hover":1112,"./layout_attributes":1114,"./layout_defaults":1115,"./plot":1116,"./style":1117}],1114:[function(d,ne,ae){ne.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1115:[function(d,ne,ae){var w=d("../../lib"),v=d("./layout_attributes");ne.exports=function(M,T,e){var a=!1;function n(f,o){return w.coerce(M,T,v,f,o)}for(var r=0;r<e.length;r++){var t=e[r];if(t.visible&&t.type==="waterfall"){a=!0;break}}a&&(n("waterfallmode"),n("waterfallgap",.2),n("waterfallgroupgap"))}},{"../../lib":503,"./layout_attributes":1114}],1116:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../lib"),M=d("../../components/drawing"),T=d("../../constants/numerical").BADNUM,e=d("../bar/plot"),a=d("../bar/uniform_text").clearMinTextSize;ne.exports=function(f,o,i,g){var p=f._fullLayout;a("waterfall",p),e.plot(f,o,i,g,{mode:p.waterfallmode,norm:p.waterfallmode,gap:p.waterfallgap,groupgap:p.waterfallgroupgap}),n(f,o,i,g)};function n(t,f,o,i){var g=f.xaxis,p=f.yaxis;v.makeTraceGroups(i,o,"trace bars").each(function(y){var c=w.select(this),b=y[0].trace,l=v.ensureSingle(c,"g","lines");if(!b.connector||!b.connector.visible){l.remove();return}var _=b.orientation==="h",s=b.connector.mode,A=l.selectAll("g.line").data(v.identity);A.enter().append("g").classed("line",!0),A.exit().remove();var m=A.size();A.each(function(h,x){if(!(x!==m-1&&!h.cNext)){var u=r(h,g,p,_),L=u[0],S=u[1],k="";L[0]!==T&&S[0]!==T&&L[1]!==T&&S[1]!==T&&(s==="spanning"&&!h.isSum&&x>0&&(_?k+="M"+L[0]+","+S[1]+"V"+S[0]:k+="M"+L[1]+","+S[0]+"H"+L[0]),s!=="between"&&(h.isSum||x<m-1)&&(_?k+="M"+L[1]+","+S[0]+"V"+S[1]:k+="M"+L[0]+","+S[1]+"H"+L[1]),L[2]!==T&&S[2]!==T&&(_?k+="M"+L[1]+","+S[1]+"V"+S[2]:k+="M"+L[1]+","+S[1]+"H"+L[2])),k===""&&(k="M0,0Z"),v.ensureSingle(w.select(this),"path").attr("d",k).call(M.setClipUrl,f.layerClipId,t)}})})}function r(t,f,o,i){var g=[],p=[],y=i?f:o,c=i?o:f;return g[0]=y.c2p(t.s0,!0),p[0]=c.c2p(t.p0,!0),g[1]=y.c2p(t.s1,!0),p[1]=c.c2p(t.p1,!0),g[2]=y.c2p(t.nextS0,!0),p[2]=c.c2p(t.nextP0,!0),i?[g,p]:[p,g]}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../bar/plot":659,"../bar/uniform_text":664,"@plotly/d3":58}],1117:[function(d,ne,ae){var w=d("@plotly/d3"),v=d("../../components/drawing"),M=d("../../components/color"),T=d("../../constants/interactions").DESELECTDIM,e=d("../bar/style"),a=d("../bar/uniform_text").resizeText,n=e.styleTextPoints;function r(t,f,o){var i=o||w.select(t).selectAll("g.waterfalllayer").selectAll("g.trace");a(t,i,"waterfall"),i.style("opacity",function(g){return g[0].trace.opacity}),i.each(function(g){var p=w.select(this),y=g[0].trace;p.selectAll(".point > path").each(function(c){if(!c.isBlank){var b=y[c.dir].marker;w.select(this).call(M.fill,b.color).call(M.stroke,b.line.color).call(v.dashLine,b.line.dash,b.line.width).style("opacity",y.selectedpoints&&!c.selected?T:1)}}),n(p,y,t),p.selectAll(".lines").each(function(){var c=y.connector.line;v.lineGroupStyle(w.select(this).selectAll("path"),c.width,c.color,c.dash)})})}ne.exports={style:r}},{"../../components/color":366,"../../components/drawing":388,"../../constants/interactions":478,"../bar/style":662,"../bar/uniform_text":664,"@plotly/d3":58}],1118:[function(d,ne,ae){var w=d("../plots/cartesian/axes"),v=d("../lib"),M=d("../plot_api/plot_schema"),T=d("./helpers").pointsAccessorFunction,e=d("../constants/numerical").BADNUM;ae.moduleType="transform",ae.name="aggregate";var a=ae.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},n=a.aggregations;ae.supplyDefaults=function(g,p){var y={},c;function b(P,z){return v.coerce(g,y,a,P,z)}var l=b("enabled");if(!l)return y;var _=M.findArrayAttributes(p),s={};for(c=0;c<_.length;c++)s[_[c]]=1;var A=b("groups");if(!Array.isArray(A)){if(!s[A])return y.enabled=!1,y;s[A]=0}var m=g.aggregations||[],h=y.aggregations=new Array(m.length),x;function u(P,z){return v.coerce(m[c],x,n,P,z)}for(c=0;c<m.length;c++){x={_index:c};var L=u("target"),S=u("func"),k=u("enabled");k&&L&&(s[L]||S==="count"&&s[L]===void 0)?(S==="stddev"&&u("funcmode"),s[L]=0,h[c]=x):h[c]={enabled:!1,_index:c}}for(c=0;c<_.length;c++)s[_[c]]&&h.push({target:_[c],func:n.func.dflt,enabled:!0,_index:-1});return y},ae.calcTransform=function(g,p,y){if(!!y.enabled){var c=y.groups,b=v.getTargetArray(p,{target:c});if(!!b){var l,_,s,A,m={},h={},x=[],u=T(p.transforms,y),L=b.length;for(p._length&&(L=Math.min(L,p._length)),l=0;l<L;l++)_=b[l],s=m[_],s===void 0?(m[_]=x.length,A=[l],x.push(A),h[m[_]]=u(l)):(x[s].push(l),h[m[_]]=(h[m[_]]||[]).concat(u(l)));y._indexToPoints=h;var S=y.aggregations;for(l=0;l<S.length;l++)r(g,p,x,S[l]);typeof c=="string"&&r(g,p,x,{target:c,func:"first",enabled:!0}),p._length=x.length}}};function r(g,p,y,c){if(!!c.enabled){for(var b=c.target,l=v.nestedProperty(p,b),_=l.get(),s=w.getDataConversions(g,p,b,_),A=t(c,s),m=new Array(y.length),h=0;h<y.length;h++)m[h]=A(_,y[h]);l.set(m),c.func==="count"&&v.pushUnique(p._arrayAttrs,b)}}function t(g,p){var y=g.func,c=p.d2c,b=p.c2d;switch(y){case"count":return f;case"first":return o;case"last":return i;case"sum":return function(l,_){for(var s=0,A=0;A<_.length;A++){var m=c(l[_[A]]);m!==e&&(s+=m)}return b(s)};case"avg":return function(l,_){for(var s=0,A=0,m=0;m<_.length;m++){var h=c(l[_[m]]);h!==e&&(s+=h,A++)}return A?b(s/A):e};case"min":return function(l,_){for(var s=1/0,A=0;A<_.length;A++){var m=c(l[_[A]]);m!==e&&(s=Math.min(s,m))}return s===1/0?e:b(s)};case"max":return function(l,_){for(var s=-1/0,A=0;A<_.length;A++){var m=c(l[_[A]]);m!==e&&(s=Math.max(s,m))}return s===-1/0?e:b(s)};case"range":return function(l,_){for(var s=1/0,A=-1/0,m=0;m<_.length;m++){var h=c(l[_[m]]);h!==e&&(s=Math.min(s,h),A=Math.max(A,h))}return A===-1/0||s===1/0?e:b(A-s)};case"change":return function(l,_){var s=c(l[_[0]]),A=c(l[_[_.length-1]]);return s===e||A===e?e:b(A-s)};case"median":return function(l,_){for(var s=[],A=0;A<_.length;A++){var m=c(l[_[A]]);m!==e&&s.push(m)}if(!s.length)return e;s.sort(v.sorterAsc);var h=(s.length-1)/2;return b((s[Math.floor(h)]+s[Math.ceil(h)])/2)};case"mode":return function(l,_){for(var s={},A=0,m=e,h=0;h<_.length;h++){var x=c(l[_[h]]);if(x!==e){var u=s[x]=(s[x]||0)+1;u>A&&(A=u,m=x)}}return A?b(m):e};case"rms":return function(l,_){for(var s=0,A=0,m=0;m<_.length;m++){var h=c(l[_[m]]);h!==e&&(s+=h*h,A++)}return A?b(Math.sqrt(s/A)):e};case"stddev":return function(l,_){var s=0,A=0,m=1,h=e,x;for(x=0;x<_.length&&h===e;x++)h=c(l[_[x]]);if(h===e)return e;for(;x<_.length;x++){var u=c(l[_[x]]);if(u!==e){var L=u-h;s+=L,A+=L*L,m++}}var S=g.funcmode==="sample"?m-1:m;return S?Math.sqrt((A-s*s/m)/S):0}}}function f(g,p){return p.length}function o(g,p){return g[p[0]]}function i(g,p){return g[p[p.length-1]]}},{"../constants/numerical":479,"../lib":503,"../plot_api/plot_schema":542,"../plots/cartesian/axes":554,"./helpers":1121}],1119:[function(d,ne,ae){var w=d("../lib"),v=d("../registry"),M=d("../plots/cartesian/axes"),T=d("./helpers").pointsAccessorFunction,e=d("../constants/filter_ops"),a=e.COMPARISON_OPS,n=e.INTERVAL_OPS,r=e.SET_OPS;ae.moduleType="transform",ae.name="filter",ae.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(a).concat(n).concat(r),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},ae.supplyDefaults=function(f){var o={};function i(c,b){return w.coerce(f,o,ae.attributes,c,b)}var g=i("enabled");if(g){var p=i("target");if(w.isArrayOrTypedArray(p)&&p.length===0)return o.enabled=!1,o;i("preservegaps"),i("operation"),i("value");var y=v.getComponentMethod("calendars","handleDefaults");y(f,o,"valuecalendar",null),y(f,o,"targetcalendar",null)}return o},ae.calcTransform=function(f,o,i){if(!i.enabled)return;var g=w.getTargetArray(o,i);if(!g)return;var p=i.target,y=g.length;o._length&&(y=Math.min(y,o._length));var c=i.targetcalendar,b=o._arrayAttrs,l=i.preservegaps;if(typeof p=="string"){var _=w.nestedProperty(o,p+"calendar").get();_&&(c=_)}var s=M.getDataToCoordFunc(f,o,p,g),A=t(i,s,c),m={},h={},x=0;function u(I,D){for(var R=0;R<b.length;R++){var O=w.nestedProperty(o,b[R]);I(O,D)}}var L,S;l?(L=function(I){m[I.astr]=w.extendDeep([],I.get()),I.set(new Array(y))},S=function(I,D){var R=m[I.astr][D];I.get()[D]=R}):(L=function(I){m[I.astr]=w.extendDeep([],I.get()),I.set([])},S=function(I,D){var R=m[I.astr][D];I.get().push(R)}),u(L);for(var k=T(o.transforms,i),P=0;P<y;P++){var z=A(g[P]);z?(u(S,P),h[x++]=k(P)):l&&x++}i._indexToPoints=h,o._length=x};function t(f,o,i){var g=f.operation,p=f.value,y=Array.isArray(p);function c(s){return s.indexOf(g)!==-1}var b=function(s){return o(s,0,f.valuecalendar)},l=function(s){return o(s,0,i)},_;switch(c(a)?_=b(y?p[0]:p):c(n)?_=y?[b(p[0]),b(p[1])]:[b(p),b(p)]:c(r)&&(_=y?p.map(b):[b(p)]),g){case"=":return function(s){return l(s)===_};case"!=":return function(s){return l(s)!==_};case"<":return function(s){return l(s)<_};case"<=":return function(s){return l(s)<=_};case">":return function(s){return l(s)>_};case">=":return function(s){return l(s)>=_};case"[]":return function(s){var A=l(s);return A>=_[0]&&A<=_[1]};case"()":return function(s){var A=l(s);return A>_[0]&&A<_[1]};case"[)":return function(s){var A=l(s);return A>=_[0]&&A<_[1]};case"(]":return function(s){var A=l(s);return A>_[0]&&A<=_[1]};case"][":return function(s){var A=l(s);return A<=_[0]||A>=_[1]};case")(":return function(s){var A=l(s);return A<_[0]||A>_[1]};case"](":return function(s){var A=l(s);return A<=_[0]||A>_[1]};case")[":return function(s){var A=l(s);return A<_[0]||A>=_[1]};case"{}":return function(s){return _.indexOf(l(s))!==-1};case"}{":return function(s){return _.indexOf(l(s))===-1}}}},{"../constants/filter_ops":475,"../lib":503,"../plots/cartesian/axes":554,"../registry":638,"./helpers":1121}],1120:[function(d,ne,ae){var w=d("../lib"),v=d("../plot_api/plot_schema"),M=d("../plots/plots"),T=d("./helpers").pointsAccessorFunction;ae.moduleType="transform",ae.name="groupby",ae.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},ae.supplyDefaults=function(a,n,r){var t,f={};function o(b,l){return w.coerce(a,f,ae.attributes,b,l)}var i=o("enabled");if(!i)return f;o("groups"),o("nameformat",r._dataLength>1?"%{group} (%{trace})":"%{group}");var g=a.styles,p=f.styles=[];if(g)for(t=0;t<g.length;t++){var y=p[t]={};w.coerce(g[t],p[t],ae.attributes.styles,"target");var c=w.coerce(g[t],p[t],ae.attributes.styles,"value");w.isPlainObject(c)?y.value=w.extendDeep({},c):c&&delete y.value}return f},ae.transform=function(a,n){var r,t,f,o=[];for(t=0;t<a.length;t++)for(r=e(a[t],n),f=0;f<r.length;f++)o.push(r[f]);return o};function e(a,n){var r,t,f,o,i,g,p,y,c,b,l=n.transform,_=n.transformIndex,s=a.transforms[_].groups,A=T(a.transforms,l);if(!w.isArrayOrTypedArray(s)||s.length===0)return[a];var m=w.filterUnique(s),h=new Array(m.length),x=s.length,u=v.findArrayAttributes(a),L=l.styles||[],S={};for(r=0;r<L.length;r++)S[L[r].target]=L[r].value;l.styles&&(b=w.keyedContainer(l,"styles","target","value.name"));var k={},P={};for(r=0;r<m.length;r++){g=m[r],k[g]=r,P[g]=0,p=h[r]=w.extendDeepNoArrays({},a),p._group=g,p.transforms[_]._indexToPoints={};var z=null;for(b&&(z=b.get(g)),z||z===""?p.name=z:p.name=w.templateString(l.nameformat,{trace:a.name,group:g}),y=p.transforms,p.transforms=[],t=0;t<y.length;t++)p.transforms[t]=w.extendDeepNoArrays({},y[t]);for(t=0;t<u.length;t++)w.nestedProperty(p,u[t]).set([])}for(f=0;f<u.length;f++){for(o=u[f],t=0,c=[];t<m.length;t++)c[t]=w.nestedProperty(h[t],o).get();for(i=w.nestedProperty(a,o).get(),t=0;t<x;t++)c[k[s[t]]].push(i[t])}for(t=0;t<x;t++){p=h[k[s[t]]];var I=p.transforms[_]._indexToPoints;I[P[s[t]]]=A(t),P[s[t]]++}for(r=0;r<m.length;r++)g=m[r],p=h[r],M.clearExpandedTraceDefaultColors(p),p=w.extendDeepNoArrays(p,S[g]||{});return h}},{"../lib":503,"../plot_api/plot_schema":542,"../plots/plots":619,"./helpers":1121}],1121:[function(d,ne,ae){ae.pointsAccessorFunction=function(w,v){for(var M,T,e=0;e<w.length&&(M=w[e],M!==v);e++)!M._indexToPoints||M.enabled===!1||(T=M._indexToPoints);var a=T?function(n){return T[n]}:function(n){return[n]};return a}},{}],1122:[function(d,ne,ae){var w=d("../lib"),v=d("../plots/cartesian/axes"),M=d("./helpers").pointsAccessorFunction,T=d("../constants/numerical").BADNUM;ae.moduleType="transform",ae.name="sort",ae.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},ae.supplyDefaults=function(n){var r={};function t(o,i){return w.coerce(n,r,ae.attributes,o,i)}var f=t("enabled");return f&&(t("target"),t("order")),r},ae.calcTransform=function(n,r,t){if(!!t.enabled){var f=w.getTargetArray(r,t);if(!!f){var o=t.target,i=f.length;r._length&&(i=Math.min(i,r._length));var g=r._arrayAttrs,p=v.getDataToCoordFunc(n,r,o,f),y=e(t,f,p,i),c=M(r.transforms,t),b={},l,_;for(l=0;l<g.length;l++){var s=w.nestedProperty(r,g[l]),A=s.get(),m=new Array(i);for(_=0;_<i;_++)m[_]=A[y[_]];s.set(m)}for(_=0;_<i;_++)b[_]=c(y[_]);t._indexToPoints=b,r._length=i}}};function e(n,r,t,f){var o=new Array(f),i=new Array(f),g;for(g=0;g<f;g++)o[g]={v:r[g],i:g};for(o.sort(a(n,t)),g=0;g<f;g++)i[g]=o[g].i;return i}function a(n,r){switch(n.order){case"ascending":return function(t,f){var o=r(t.v),i=r(f.v);return o===T?1:i===T?-1:o-i};case"descending":return function(t,f){var o=r(t.v),i=r(f.v);return o===T?1:i===T?-1:i-o}}}},{"../constants/numerical":479,"../lib":503,"../plots/cartesian/axes":554,"./helpers":1121}],1123:[function(d,ne,ae){ae.version="2.12.1"},{}],1124:[function(d,ne,ae){(function(w){(function(){(function(v){if(typeof ae=="object"&&typeof ne<"u")ne.exports=v();else{var M;typeof window<"u"?M=window:typeof w<"u"?M=w:typeof self<"u"?M=self:M=this,M.stackgl=v()}})(function(){return function(){function v(M,T,e){function a(t,f){if(!T[t]){if(!M[t]){var o=typeof d=="function"&&d;if(!f&&o)return o(t,!0);if(n)return n(t,!0);var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}var g=T[t]={exports:{}};M[t][0].call(g.exports,function(p){var y=M[t][1][p];return a(y||p)},g,g.exports,v,M,T,e)}return T[t].exports}for(var n=typeof d=="function"&&d,r=0;r<e.length;r++)a(e[r]);return a}return v}()({1:[function(v,M,T){T.byteLength=i,T.toByteArray=p,T.fromByteArray=b;for(var e=[],a=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,f=r.length;t<f;++t)e[t]=r[t],a[r.charCodeAt(t)]=t;a["-".charCodeAt(0)]=62,a["_".charCodeAt(0)]=63;function o(l){var _=l.length;if(_%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var s=l.indexOf("=");s===-1&&(s=_);var A=s===_?0:4-s%4;return[s,A]}function i(l){var _=o(l),s=_[0],A=_[1];return(s+A)*3/4-A}function g(l,_,s){return(_+s)*3/4-s}function p(l){var _,s=o(l),A=s[0],m=s[1],h=new n(g(l,A,m)),x=0,u=m>0?A-4:A,L;for(L=0;L<u;L+=4)_=a[l.charCodeAt(L)]<<18|a[l.charCodeAt(L+1)]<<12|a[l.charCodeAt(L+2)]<<6|a[l.charCodeAt(L+3)],h[x++]=_>>16&255,h[x++]=_>>8&255,h[x++]=_&255;return m===2&&(_=a[l.charCodeAt(L)]<<2|a[l.charCodeAt(L+1)]>>4,h[x++]=_&255),m===1&&(_=a[l.charCodeAt(L)]<<10|a[l.charCodeAt(L+1)]<<4|a[l.charCodeAt(L+2)]>>2,h[x++]=_>>8&255,h[x++]=_&255),h}function y(l){return e[l>>18&63]+e[l>>12&63]+e[l>>6&63]+e[l&63]}function c(l,_,s){for(var A,m=[],h=_;h<s;h+=3)A=(l[h]<<16&16711680)+(l[h+1]<<8&65280)+(l[h+2]&255),m.push(y(A));return m.join("")}function b(l){for(var _,s=l.length,A=s%3,m=[],h=16383,x=0,u=s-A;x<u;x+=h)m.push(c(l,x,x+h>u?u:x+h));return A===1?(_=l[s-1],m.push(e[_>>2]+e[_<<4&63]+"==")):A===2&&(_=(l[s-2]<<8)+l[s-1],m.push(e[_>>10]+e[_>>4&63]+e[_<<2&63]+"=")),m.join("")}},{}],2:[function(v,M,T){},{}],3:[function(v,M,T){(function(e){(function(){var a=v("base64-js"),n=v("ieee754");T.Buffer=o,T.SlowBuffer=A,T.INSPECT_MAX_BYTES=50;var r=2147483647;T.kMaxLength=r,o.TYPED_ARRAY_SUPPORT=t(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function t(){try{var fe=new Uint8Array(1);return fe.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},fe.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(!!o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(!!o.isBuffer(this))return this.byteOffset}});function f(fe){if(fe>r)throw new RangeError('The value "'+fe+'" is invalid for option "size"');var pe=new Uint8Array(fe);return pe.__proto__=o.prototype,pe}function o(fe,pe,ye){if(typeof fe=="number"){if(typeof pe=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return y(fe)}return i(fe,pe,ye)}typeof Symbol<"u"&&Symbol.species!=null&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),o.poolSize=8192;function i(fe,pe,ye){if(typeof fe=="string")return c(fe,pe);if(ArrayBuffer.isView(fe))return b(fe);if(fe==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof fe);if(le(fe,ArrayBuffer)||fe&&le(fe.buffer,ArrayBuffer))return l(fe,pe,ye);if(typeof fe=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var Te=fe.valueOf&&fe.valueOf();if(Te!=null&&Te!==fe)return o.from(Te,pe,ye);var _e=_(fe);if(_e)return _e;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof fe[Symbol.toPrimitive]=="function")return o.from(fe[Symbol.toPrimitive]("string"),pe,ye);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof fe)}o.from=function(fe,pe,ye){return i(fe,pe,ye)},o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array;function g(fe){if(typeof fe!="number")throw new TypeError('"size" argument must be of type number');if(fe<0)throw new RangeError('The value "'+fe+'" is invalid for option "size"')}function p(fe,pe,ye){return g(fe),fe<=0?f(fe):pe!==void 0?typeof ye=="string"?f(fe).fill(pe,ye):f(fe).fill(pe):f(fe)}o.alloc=function(fe,pe,ye){return p(fe,pe,ye)};function y(fe){return g(fe),f(fe<0?0:s(fe)|0)}o.allocUnsafe=function(fe){return y(fe)},o.allocUnsafeSlow=function(fe){return y(fe)};function c(fe,pe){if((typeof pe!="string"||pe==="")&&(pe="utf8"),!o.isEncoding(pe))throw new TypeError("Unknown encoding: "+pe);var ye=m(fe,pe)|0,Te=f(ye),_e=Te.write(fe,pe);return _e!==ye&&(Te=Te.slice(0,_e)),Te}function b(fe){for(var pe=fe.length<0?0:s(fe.length)|0,ye=f(pe),Te=0;Te<pe;Te+=1)ye[Te]=fe[Te]&255;return ye}function l(fe,pe,ye){if(pe<0||fe.byteLength<pe)throw new RangeError('"offset" is outside of buffer bounds');if(fe.byteLength<pe+(ye||0))throw new RangeError('"length" is outside of buffer bounds');var Te;return pe===void 0&&ye===void 0?Te=new Uint8Array(fe):ye===void 0?Te=new Uint8Array(fe,pe):Te=new Uint8Array(fe,pe,ye),Te.__proto__=o.prototype,Te}function _(fe){if(o.isBuffer(fe)){var pe=s(fe.length)|0,ye=f(pe);return ye.length===0||fe.copy(ye,0,0,pe),ye}if(fe.length!==void 0)return typeof fe.length!="number"||ge(fe.length)?f(0):b(fe);if(fe.type==="Buffer"&&Array.isArray(fe.data))return b(fe.data)}function s(fe){if(fe>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return fe|0}function A(fe){return+fe!=fe&&(fe=0),o.alloc(+fe)}o.isBuffer=function(pe){return pe!=null&&pe._isBuffer===!0&&pe!==o.prototype},o.compare=function(pe,ye){if(le(pe,Uint8Array)&&(pe=o.from(pe,pe.offset,pe.byteLength)),le(ye,Uint8Array)&&(ye=o.from(ye,ye.offset,ye.byteLength)),!o.isBuffer(pe)||!o.isBuffer(ye))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(pe===ye)return 0;for(var Te=pe.length,_e=ye.length,De=0,Be=Math.min(Te,_e);De<Be;++De)if(pe[De]!==ye[De]){Te=pe[De],_e=ye[De];break}return Te<_e?-1:_e<Te?1:0},o.isEncoding=function(pe){switch(String(pe).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(pe,ye){if(!Array.isArray(pe))throw new TypeError('"list" argument must be an Array of Buffers');if(pe.length===0)return o.alloc(0);var Te;if(ye===void 0)for(ye=0,Te=0;Te<pe.length;++Te)ye+=pe[Te].length;var _e=o.allocUnsafe(ye),De=0;for(Te=0;Te<pe.length;++Te){var Be=pe[Te];if(le(Be,Uint8Array)&&(Be=o.from(Be)),!o.isBuffer(Be))throw new TypeError('"list" argument must be an Array of Buffers');Be.copy(_e,De),De+=Be.length}return _e};function m(fe,pe){if(o.isBuffer(fe))return fe.length;if(ArrayBuffer.isView(fe)||le(fe,ArrayBuffer))return fe.byteLength;if(typeof fe!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof fe);var ye=fe.length,Te=arguments.length>2&&arguments[2]===!0;if(!Te&&ye===0)return 0;for(var _e=!1;;)switch(pe){case"ascii":case"latin1":case"binary":return ye;case"utf8":case"utf-8":return W(fe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ye*2;case"hex":return ye>>>1;case"base64":return te(fe).length;default:if(_e)return Te?-1:W(fe).length;pe=(""+pe).toLowerCase(),_e=!0}}o.byteLength=m;function h(fe,pe,ye){var Te=!1;if((pe===void 0||pe<0)&&(pe=0),pe>this.length||((ye===void 0||ye>this.length)&&(ye=this.length),ye<=0)||(ye>>>=0,pe>>>=0,ye<=pe))return"";for(fe||(fe="utf8");;)switch(fe){case"hex":return Z(this,pe,ye);case"utf8":case"utf-8":return O(this,pe,ye);case"ascii":return G(this,pe,ye);case"latin1":case"binary":return J(this,pe,ye);case"base64":return R(this,pe,ye);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Y(this,pe,ye);default:if(Te)throw new TypeError("Unknown encoding: "+fe);fe=(fe+"").toLowerCase(),Te=!0}}o.prototype._isBuffer=!0;function x(fe,pe,ye){var Te=fe[pe];fe[pe]=fe[ye],fe[ye]=Te}o.prototype.swap16=function(){var pe=this.length;if(pe%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ye=0;ye<pe;ye+=2)x(this,ye,ye+1);return this},o.prototype.swap32=function(){var pe=this.length;if(pe%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ye=0;ye<pe;ye+=4)x(this,ye,ye+3),x(this,ye+1,ye+2);return this},o.prototype.swap64=function(){var pe=this.length;if(pe%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ye=0;ye<pe;ye+=8)x(this,ye,ye+7),x(this,ye+1,ye+6),x(this,ye+2,ye+5),x(this,ye+3,ye+4);return this},o.prototype.toString=function(){var pe=this.length;return pe===0?"":arguments.length===0?O(this,0,pe):h.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(pe){if(!o.isBuffer(pe))throw new TypeError("Argument must be a Buffer");return this===pe?!0:o.compare(this,pe)===0},o.prototype.inspect=function(){var pe="",ye=T.INSPECT_MAX_BYTES;return pe=this.toString("hex",0,ye).replace(/(.{2})/g,"$1 ").trim(),this.length>ye&&(pe+=" ... "),"<Buffer "+pe+">"},o.prototype.compare=function(pe,ye,Te,_e,De){if(le(pe,Uint8Array)&&(pe=o.from(pe,pe.offset,pe.byteLength)),!o.isBuffer(pe))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof pe);if(ye===void 0&&(ye=0),Te===void 0&&(Te=pe?pe.length:0),_e===void 0&&(_e=0),De===void 0&&(De=this.length),ye<0||Te>pe.length||_e<0||De>this.length)throw new RangeError("out of range index");if(_e>=De&&ye>=Te)return 0;if(_e>=De)return-1;if(ye>=Te)return 1;if(ye>>>=0,Te>>>=0,_e>>>=0,De>>>=0,this===pe)return 0;for(var Be=De-_e,Ue=Te-ye,xe=Math.min(Be,Ue),Pe=this.slice(_e,De),Ve=pe.slice(ye,Te),Qe=0;Qe<xe;++Qe)if(Pe[Qe]!==Ve[Qe]){Be=Pe[Qe],Ue=Ve[Qe];break}return Be<Ue?-1:Ue<Be?1:0};function u(fe,pe,ye,Te,_e){if(fe.length===0)return-1;if(typeof ye=="string"?(Te=ye,ye=0):ye>2147483647?ye=2147483647:ye<-2147483648&&(ye=-2147483648),ye=+ye,ge(ye)&&(ye=_e?0:fe.length-1),ye<0&&(ye=fe.length+ye),ye>=fe.length){if(_e)return-1;ye=fe.length-1}else if(ye<0)if(_e)ye=0;else return-1;if(typeof pe=="string"&&(pe=o.from(pe,Te)),o.isBuffer(pe))return pe.length===0?-1:L(fe,pe,ye,Te,_e);if(typeof pe=="number")return pe=pe&255,typeof Uint8Array.prototype.indexOf=="function"?_e?Uint8Array.prototype.indexOf.call(fe,pe,ye):Uint8Array.prototype.lastIndexOf.call(fe,pe,ye):L(fe,[pe],ye,Te,_e);throw new TypeError("val must be string, number or Buffer")}function L(fe,pe,ye,Te,_e){var De=1,Be=fe.length,Ue=pe.length;if(Te!==void 0&&(Te=String(Te).toLowerCase(),Te==="ucs2"||Te==="ucs-2"||Te==="utf16le"||Te==="utf-16le")){if(fe.length<2||pe.length<2)return-1;De=2,Be/=2,Ue/=2,ye/=2}function xe(Le,Ne){return De===1?Le[Ne]:Le.readUInt16BE(Ne*De)}var Pe;if(_e){var Ve=-1;for(Pe=ye;Pe<Be;Pe++)if(xe(fe,Pe)===xe(pe,Ve===-1?0:Pe-Ve)){if(Ve===-1&&(Ve=Pe),Pe-Ve+1===Ue)return Ve*De}else Ve!==-1&&(Pe-=Pe-Ve),Ve=-1}else for(ye+Ue>Be&&(ye=Be-Ue),Pe=ye;Pe>=0;Pe--){for(var Qe=!0,Fe=0;Fe<Ue;Fe++)if(xe(fe,Pe+Fe)!==xe(pe,Fe)){Qe=!1;break}if(Qe)return Pe}return-1}o.prototype.includes=function(pe,ye,Te){return this.indexOf(pe,ye,Te)!==-1},o.prototype.indexOf=function(pe,ye,Te){return u(this,pe,ye,Te,!0)},o.prototype.lastIndexOf=function(pe,ye,Te){return u(this,pe,ye,Te,!1)};function S(fe,pe,ye,Te){ye=Number(ye)||0;var _e=fe.length-ye;Te?(Te=Number(Te),Te>_e&&(Te=_e)):Te=_e;var De=pe.length;Te>De/2&&(Te=De/2);for(var Be=0;Be<Te;++Be){var Ue=parseInt(pe.substr(Be*2,2),16);if(ge(Ue))return Be;fe[ye+Be]=Ue}return Be}function k(fe,pe,ye,Te){return ie(W(pe,fe.length-ye),fe,ye,Te)}function P(fe,pe,ye,Te){return ie(X(pe),fe,ye,Te)}function z(fe,pe,ye,Te){return P(fe,pe,ye,Te)}function I(fe,pe,ye,Te){return ie(te(pe),fe,ye,Te)}function D(fe,pe,ye,Te){return ie(ee(pe,fe.length-ye),fe,ye,Te)}o.prototype.write=function(pe,ye,Te,_e){if(ye===void 0)_e="utf8",Te=this.length,ye=0;else if(Te===void 0&&typeof ye=="string")_e=ye,Te=this.length,ye=0;else if(isFinite(ye))ye=ye>>>0,isFinite(Te)?(Te=Te>>>0,_e===void 0&&(_e="utf8")):(_e=Te,Te=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var De=this.length-ye;if((Te===void 0||Te>De)&&(Te=De),pe.length>0&&(Te<0||ye<0)||ye>this.length)throw new RangeError("Attempt to write outside buffer bounds");_e||(_e="utf8");for(var Be=!1;;)switch(_e){case"hex":return S(this,pe,ye,Te);case"utf8":case"utf-8":return k(this,pe,ye,Te);case"ascii":return P(this,pe,ye,Te);case"latin1":case"binary":return z(this,pe,ye,Te);case"base64":return I(this,pe,ye,Te);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,pe,ye,Te);default:if(Be)throw new TypeError("Unknown encoding: "+_e);_e=(""+_e).toLowerCase(),Be=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function R(fe,pe,ye){return pe===0&&ye===fe.length?a.fromByteArray(fe):a.fromByteArray(fe.slice(pe,ye))}function O(fe,pe,ye){ye=Math.min(fe.length,ye);for(var Te=[],_e=pe;_e<ye;){var De=fe[_e],Be=null,Ue=De>239?4:De>223?3:De>191?2:1;if(_e+Ue<=ye){var xe,Pe,Ve,Qe;switch(Ue){case 1:De<128&&(Be=De);break;case 2:xe=fe[_e+1],(xe&192)===128&&(Qe=(De&31)<<6|xe&63,Qe>127&&(Be=Qe));break;case 3:xe=fe[_e+1],Pe=fe[_e+2],(xe&192)===128&&(Pe&192)===128&&(Qe=(De&15)<<12|(xe&63)<<6|Pe&63,Qe>2047&&(Qe<55296||Qe>57343)&&(Be=Qe));break;case 4:xe=fe[_e+1],Pe=fe[_e+2],Ve=fe[_e+3],(xe&192)===128&&(Pe&192)===128&&(Ve&192)===128&&(Qe=(De&15)<<18|(xe&63)<<12|(Pe&63)<<6|Ve&63,Qe>65535&&Qe<1114112&&(Be=Qe))}}Be===null?(Be=65533,Ue=1):Be>65535&&(Be-=65536,Te.push(Be>>>10&1023|55296),Be=56320|Be&1023),Te.push(Be),_e+=Ue}return V(Te)}var F=4096;function V(fe){var pe=fe.length;if(pe<=F)return String.fromCharCode.apply(String,fe);for(var ye="",Te=0;Te<pe;)ye+=String.fromCharCode.apply(String,fe.slice(Te,Te+=F));return ye}function G(fe,pe,ye){var Te="";ye=Math.min(fe.length,ye);for(var _e=pe;_e<ye;++_e)Te+=String.fromCharCode(fe[_e]&127);return Te}function J(fe,pe,ye){var Te="";ye=Math.min(fe.length,ye);for(var _e=pe;_e<ye;++_e)Te+=String.fromCharCode(fe[_e]);return Te}function Z(fe,pe,ye){var Te=fe.length;(!pe||pe<0)&&(pe=0),(!ye||ye<0||ye>Te)&&(ye=Te);for(var _e="",De=pe;De<ye;++De)_e+=Q(fe[De]);return _e}function Y(fe,pe,ye){for(var Te=fe.slice(pe,ye),_e="",De=0;De<Te.length;De+=2)_e+=String.fromCharCode(Te[De]+Te[De+1]*256);return _e}o.prototype.slice=function(pe,ye){var Te=this.length;pe=~~pe,ye=ye===void 0?Te:~~ye,pe<0?(pe+=Te,pe<0&&(pe=0)):pe>Te&&(pe=Te),ye<0?(ye+=Te,ye<0&&(ye=0)):ye>Te&&(ye=Te),ye<pe&&(ye=pe);var _e=this.subarray(pe,ye);return _e.__proto__=o.prototype,_e};function j(fe,pe,ye){if(fe%1!==0||fe<0)throw new RangeError("offset is not uint");if(fe+pe>ye)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUIntLE=function(pe,ye,Te){pe=pe>>>0,ye=ye>>>0,Te||j(pe,ye,this.length);for(var _e=this[pe],De=1,Be=0;++Be<ye&&(De*=256);)_e+=this[pe+Be]*De;return _e},o.prototype.readUIntBE=function(pe,ye,Te){pe=pe>>>0,ye=ye>>>0,Te||j(pe,ye,this.length);for(var _e=this[pe+--ye],De=1;ye>0&&(De*=256);)_e+=this[pe+--ye]*De;return _e},o.prototype.readUInt8=function(pe,ye){return pe=pe>>>0,ye||j(pe,1,this.length),this[pe]},o.prototype.readUInt16LE=function(pe,ye){return pe=pe>>>0,ye||j(pe,2,this.length),this[pe]|this[pe+1]<<8},o.prototype.readUInt16BE=function(pe,ye){return pe=pe>>>0,ye||j(pe,2,this.length),this[pe]<<8|this[pe+1]},o.prototype.readUInt32LE=function(pe,ye){return pe=pe>>>0,ye||j(pe,4,this.length),(this[pe]|this[pe+1]<<8|this[pe+2]<<16)+this[pe+3]*16777216},o.prototype.readUInt32BE=function(pe,ye){return pe=pe>>>0,ye||j(pe,4,this.length),this[pe]*16777216+(this[pe+1]<<16|this[pe+2]<<8|this[pe+3])},o.prototype.readIntLE=function(pe,ye,Te){pe=pe>>>0,ye=ye>>>0,Te||j(pe,ye,this.length);for(var _e=this[pe],De=1,Be=0;++Be<ye&&(De*=256);)_e+=this[pe+Be]*De;return De*=128,_e>=De&&(_e-=Math.pow(2,8*ye)),_e},o.prototype.readIntBE=function(pe,ye,Te){pe=pe>>>0,ye=ye>>>0,Te||j(pe,ye,this.length);for(var _e=ye,De=1,Be=this[pe+--_e];_e>0&&(De*=256);)Be+=this[pe+--_e]*De;return De*=128,Be>=De&&(Be-=Math.pow(2,8*ye)),Be},o.prototype.readInt8=function(pe,ye){return pe=pe>>>0,ye||j(pe,1,this.length),this[pe]&128?(255-this[pe]+1)*-1:this[pe]},o.prototype.readInt16LE=function(pe,ye){pe=pe>>>0,ye||j(pe,2,this.length);var Te=this[pe]|this[pe+1]<<8;return Te&32768?Te|4294901760:Te},o.prototype.readInt16BE=function(pe,ye){pe=pe>>>0,ye||j(pe,2,this.length);var Te=this[pe+1]|this[pe]<<8;return Te&32768?Te|4294901760:Te},o.prototype.readInt32LE=function(pe,ye){return pe=pe>>>0,ye||j(pe,4,this.length),this[pe]|this[pe+1]<<8|this[pe+2]<<16|this[pe+3]<<24},o.prototype.readInt32BE=function(pe,ye){return pe=pe>>>0,ye||j(pe,4,this.length),this[pe]<<24|this[pe+1]<<16|this[pe+2]<<8|this[pe+3]},o.prototype.readFloatLE=function(pe,ye){return pe=pe>>>0,ye||j(pe,4,this.length),n.read(this,pe,!0,23,4)},o.prototype.readFloatBE=function(pe,ye){return pe=pe>>>0,ye||j(pe,4,this.length),n.read(this,pe,!1,23,4)},o.prototype.readDoubleLE=function(pe,ye){return pe=pe>>>0,ye||j(pe,8,this.length),n.read(this,pe,!0,52,8)},o.prototype.readDoubleBE=function(pe,ye){return pe=pe>>>0,ye||j(pe,8,this.length),n.read(this,pe,!1,52,8)};function re(fe,pe,ye,Te,_e,De){if(!o.isBuffer(fe))throw new TypeError('"buffer" argument must be a Buffer instance');if(pe>_e||pe<De)throw new RangeError('"value" argument is out of bounds');if(ye+Te>fe.length)throw new RangeError("Index out of range")}o.prototype.writeUIntLE=function(pe,ye,Te,_e){if(pe=+pe,ye=ye>>>0,Te=Te>>>0,!_e){var De=Math.pow(2,8*Te)-1;re(this,pe,ye,Te,De,0)}var Be=1,Ue=0;for(this[ye]=pe&255;++Ue<Te&&(Be*=256);)this[ye+Ue]=pe/Be&255;return ye+Te},o.prototype.writeUIntBE=function(pe,ye,Te,_e){if(pe=+pe,ye=ye>>>0,Te=Te>>>0,!_e){var De=Math.pow(2,8*Te)-1;re(this,pe,ye,Te,De,0)}var Be=Te-1,Ue=1;for(this[ye+Be]=pe&255;--Be>=0&&(Ue*=256);)this[ye+Be]=pe/Ue&255;return ye+Te},o.prototype.writeUInt8=function(pe,ye,Te){return pe=+pe,ye=ye>>>0,Te||re(this,pe,ye,1,255,0),this[ye]=pe&255,ye+1},o.prototype.writeUInt16LE=function(pe,ye,Te){return pe=+pe,ye=ye>>>0,Te||re(this,pe,ye,2,65535,0),this[ye]=pe&255,this[ye+1]=pe>>>8,ye+2},o.prototype.writeUInt16BE=function(pe,ye,Te){return pe=+pe,ye=ye>>>0,Te||re(this,pe,ye,2,65535,0),this[ye]=pe>>>8,this[ye+1]=pe&255,ye+2},o.prototype.writeUInt32LE=function(pe,ye,Te){return pe=+pe,ye=ye>>>0,Te||re(this,pe,ye,4,4294967295,0),this[ye+3]=pe>>>24,this[ye+2]=pe>>>16,this[ye+1]=pe>>>8,this[ye]=pe&255,ye+4},o.prototype.writeUInt32BE=function(pe,ye,Te){return pe=+pe,ye=ye>>>0,Te||re(this,pe,ye,4,4294967295,0),this[ye]=pe>>>24,this[ye+1]=pe>>>16,this[ye+2]=pe>>>8,this[ye+3]=pe&255,ye+4},o.prototype.writeIntLE=function(pe,ye,Te,_e){if(pe=+pe,ye=ye>>>0,!_e){var De=Math.pow(2,8*Te-1);re(this,pe,ye,Te,De-1,-De)}var Be=0,Ue=1,xe=0;for(this[ye]=pe&255;++Be<Te&&(Ue*=256);)pe<0&&xe===0&&this[ye+Be-1]!==0&&(xe=1),this[ye+Be]=(pe/Ue>>0)-xe&255;return ye+Te},o.prototype.writeIntBE=function(pe,ye,Te,_e){if(pe=+pe,ye=ye>>>0,!_e){var De=Math.pow(2,8*Te-1);re(this,pe,ye,Te,De-1,-De)}var Be=Te-1,Ue=1,xe=0;for(this[ye+Be]=pe&255;--Be>=0&&(Ue*=256);)pe<0&&xe===0&&this[ye+Be+1]!==0&&(xe=1),this[ye+Be]=(pe/Ue>>0)-xe&255;return ye+Te},o.prototype.writeInt8=function(pe,ye,Te){return pe=+pe,ye=ye>>>0,Te||re(this,pe,ye,1,127,-128),pe<0&&(pe=255+pe+1),this[ye]=pe&255,ye+1},o.prototype.writeInt16LE=function(pe,ye,Te){return pe=+pe,ye=ye>>>0,Te||re(this,pe,ye,2,32767,-32768),this[ye]=pe&255,this[ye+1]=pe>>>8,ye+2},o.prototype.writeInt16BE=function(pe,ye,Te){return pe=+pe,ye=ye>>>0,Te||re(this,pe,ye,2,32767,-32768),this[ye]=pe>>>8,this[ye+1]=pe&255,ye+2},o.prototype.writeInt32LE=function(pe,ye,Te){return pe=+pe,ye=ye>>>0,Te||re(this,pe,ye,4,2147483647,-2147483648),this[ye]=pe&255,this[ye+1]=pe>>>8,this[ye+2]=pe>>>16,this[ye+3]=pe>>>24,ye+4},o.prototype.writeInt32BE=function(pe,ye,Te){return pe=+pe,ye=ye>>>0,Te||re(this,pe,ye,4,2147483647,-2147483648),pe<0&&(pe=4294967295+pe+1),this[ye]=pe>>>24,this[ye+1]=pe>>>16,this[ye+2]=pe>>>8,this[ye+3]=pe&255,ye+4};function se(fe,pe,ye,Te,_e,De){if(ye+Te>fe.length)throw new RangeError("Index out of range");if(ye<0)throw new RangeError("Index out of range")}function oe(fe,pe,ye,Te,_e){return pe=+pe,ye=ye>>>0,_e||se(fe,pe,ye,4),n.write(fe,pe,ye,Te,23,4),ye+4}o.prototype.writeFloatLE=function(pe,ye,Te){return oe(this,pe,ye,!0,Te)},o.prototype.writeFloatBE=function(pe,ye,Te){return oe(this,pe,ye,!1,Te)};function N(fe,pe,ye,Te,_e){return pe=+pe,ye=ye>>>0,_e||se(fe,pe,ye,8),n.write(fe,pe,ye,Te,52,8),ye+8}o.prototype.writeDoubleLE=function(pe,ye,Te){return N(this,pe,ye,!0,Te)},o.prototype.writeDoubleBE=function(pe,ye,Te){return N(this,pe,ye,!1,Te)},o.prototype.copy=function(pe,ye,Te,_e){if(!o.isBuffer(pe))throw new TypeError("argument should be a Buffer");if(Te||(Te=0),!_e&&_e!==0&&(_e=this.length),ye>=pe.length&&(ye=pe.length),ye||(ye=0),_e>0&&_e<Te&&(_e=Te),_e===Te||pe.length===0||this.length===0)return 0;if(ye<0)throw new RangeError("targetStart out of bounds");if(Te<0||Te>=this.length)throw new RangeError("Index out of range");if(_e<0)throw new RangeError("sourceEnd out of bounds");_e>this.length&&(_e=this.length),pe.length-ye<_e-Te&&(_e=pe.length-ye+Te);var De=_e-Te;if(this===pe&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(ye,Te,_e);else if(this===pe&&Te<ye&&ye<_e)for(var Be=De-1;Be>=0;--Be)pe[Be+ye]=this[Be+Te];else Uint8Array.prototype.set.call(pe,this.subarray(Te,_e),ye);return De},o.prototype.fill=function(pe,ye,Te,_e){if(typeof pe=="string"){if(typeof ye=="string"?(_e=ye,ye=0,Te=this.length):typeof Te=="string"&&(_e=Te,Te=this.length),_e!==void 0&&typeof _e!="string")throw new TypeError("encoding must be a string");if(typeof _e=="string"&&!o.isEncoding(_e))throw new TypeError("Unknown encoding: "+_e);if(pe.length===1){var De=pe.charCodeAt(0);(_e==="utf8"&&De<128||_e==="latin1")&&(pe=De)}}else typeof pe=="number"&&(pe=pe&255);if(ye<0||this.length<ye||this.length<Te)throw new RangeError("Out of range index");if(Te<=ye)return this;ye=ye>>>0,Te=Te===void 0?this.length:Te>>>0,pe||(pe=0);var Be;if(typeof pe=="number")for(Be=ye;Be<Te;++Be)this[Be]=pe;else{var Ue=o.isBuffer(pe)?pe:o.from(pe,_e),xe=Ue.length;if(xe===0)throw new TypeError('The value "'+pe+'" is invalid for argument "value"');for(Be=0;Be<Te-ye;++Be)this[Be+ye]=Ue[Be%xe]}return this};var U=/[^+/0-9A-Za-z-_]/g;function q(fe){if(fe=fe.split("=")[0],fe=fe.trim().replace(U,""),fe.length<2)return"";for(;fe.length%4!==0;)fe=fe+"=";return fe}function Q(fe){return fe<16?"0"+fe.toString(16):fe.toString(16)}function W(fe,pe){pe=pe||1/0;for(var ye,Te=fe.length,_e=null,De=[],Be=0;Be<Te;++Be){if(ye=fe.charCodeAt(Be),ye>55295&&ye<57344){if(!_e){if(ye>56319){(pe-=3)>-1&&De.push(239,191,189);continue}else if(Be+1===Te){(pe-=3)>-1&&De.push(239,191,189);continue}_e=ye;continue}if(ye<56320){(pe-=3)>-1&&De.push(239,191,189),_e=ye;continue}ye=(_e-55296<<10|ye-56320)+65536}else _e&&(pe-=3)>-1&&De.push(239,191,189);if(_e=null,ye<128){if((pe-=1)<0)break;De.push(ye)}else if(ye<2048){if((pe-=2)<0)break;De.push(ye>>6|192,ye&63|128)}else if(ye<65536){if((pe-=3)<0)break;De.push(ye>>12|224,ye>>6&63|128,ye&63|128)}else if(ye<1114112){if((pe-=4)<0)break;De.push(ye>>18|240,ye>>12&63|128,ye>>6&63|128,ye&63|128)}else throw new Error("Invalid code point")}return De}function X(fe){for(var pe=[],ye=0;ye<fe.length;++ye)pe.push(fe.charCodeAt(ye)&255);return pe}function ee(fe,pe){for(var ye,Te,_e,De=[],Be=0;Be<fe.length&&!((pe-=2)<0);++Be)ye=fe.charCodeAt(Be),Te=ye>>8,_e=ye%256,De.push(_e),De.push(Te);return De}function te(fe){return a.toByteArray(q(fe))}function ie(fe,pe,ye,Te){for(var _e=0;_e<Te&&!(_e+ye>=pe.length||_e>=fe.length);++_e)pe[_e+ye]=fe[_e];return _e}function le(fe,pe){return fe instanceof pe||fe!=null&&fe.constructor!=null&&fe.constructor.name!=null&&fe.constructor.name===pe.name}function ge(fe){return fe!==fe}}).call(this)}).call(this,v("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:4}],4:[function(v,M,T){T.read=function(e,a,n,r,t){var f,o,i=t*8-r-1,g=(1<<i)-1,p=g>>1,y=-7,c=n?t-1:0,b=n?-1:1,l=e[a+c];for(c+=b,f=l&(1<<-y)-1,l>>=-y,y+=i;y>0;f=f*256+e[a+c],c+=b,y-=8);for(o=f&(1<<-y)-1,f>>=-y,y+=r;y>0;o=o*256+e[a+c],c+=b,y-=8);if(f===0)f=1-p;else{if(f===g)return o?NaN:(l?-1:1)*(1/0);o=o+Math.pow(2,r),f=f-p}return(l?-1:1)*o*Math.pow(2,f-r)},T.write=function(e,a,n,r,t,f){var o,i,g,p=f*8-t-1,y=(1<<p)-1,c=y>>1,b=t===23?Math.pow(2,-24)-Math.pow(2,-77):0,l=r?0:f-1,_=r?1:-1,s=a<0||a===0&&1/a<0?1:0;for(a=Math.abs(a),isNaN(a)||a===1/0?(i=isNaN(a)?1:0,o=y):(o=Math.floor(Math.log(a)/Math.LN2),a*(g=Math.pow(2,-o))<1&&(o--,g*=2),o+c>=1?a+=b/g:a+=b*Math.pow(2,1-c),a*g>=2&&(o++,g/=2),o+c>=y?(i=0,o=y):o+c>=1?(i=(a*g-1)*Math.pow(2,t),o=o+c):(i=a*Math.pow(2,c-1)*Math.pow(2,t),o=0));t>=8;e[n+l]=i&255,l+=_,i/=256,t-=8);for(o=o<<t|i,p+=t;p>0;e[n+l]=o&255,l+=_,o/=256,p-=8);e[n+l-_]|=s*128}},{}],5:[function(v,M,T){var e=M.exports={},a,n;function r(){throw new Error("setTimeout has not been defined")}function t(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?a=setTimeout:a=r}catch{a=r}try{typeof clearTimeout=="function"?n=clearTimeout:n=t}catch{n=t}})();function f(s){if(a===setTimeout)return setTimeout(s,0);if((a===r||!a)&&setTimeout)return a=setTimeout,setTimeout(s,0);try{return a(s,0)}catch{try{return a.call(null,s,0)}catch{return a.call(this,s,0)}}}function o(s){if(n===clearTimeout)return clearTimeout(s);if((n===t||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(s);try{return n(s)}catch{try{return n.call(null,s)}catch{return n.call(this,s)}}}var i=[],g=!1,p,y=-1;function c(){!g||!p||(g=!1,p.length?i=p.concat(i):y=-1,i.length&&b())}function b(){if(!g){var s=f(c);g=!0;for(var A=i.length;A;){for(p=i,i=[];++y<A;)p&&p[y].run();y=-1,A=i.length}p=null,g=!1,o(s)}}e.nextTick=function(s){var A=new Array(arguments.length-1);if(arguments.length>1)for(var m=1;m<arguments.length;m++)A[m-1]=arguments[m];i.push(new l(s,A)),i.length===1&&!g&&f(b)};function l(s,A){this.fun=s,this.array=A}l.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function _(){}e.on=_,e.addListener=_,e.once=_,e.off=_,e.removeListener=_,e.removeAllListeners=_,e.emit=_,e.prependListener=_,e.prependOnceListener=_,e.listeners=function(s){return[]},e.binding=function(s){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(s){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},{}],6:[function(v,M,T){M.exports={alpha_shape:v("alpha-shape"),convex_hull:v("convex-hull"),delaunay_triangulate:v("delaunay-triangulate"),gl_cone3d:v("gl-cone3d"),gl_error3d:v("gl-error3d"),gl_heatmap2d:v("gl-heatmap2d"),gl_line3d:v("gl-line3d"),gl_mesh3d:v("gl-mesh3d"),gl_plot2d:v("gl-plot2d"),gl_plot3d:v("gl-plot3d"),gl_pointcloud2d:v("gl-pointcloud2d"),gl_scatter3d:v("gl-scatter3d"),gl_select_box:v("gl-select-box"),gl_spikes2d:v("gl-spikes2d"),gl_streamtube3d:v("gl-streamtube3d"),gl_surface3d:v("gl-surface3d"),ndarray:v("ndarray"),ndarray_linear_interpolate:v("ndarray-linear-interpolate")}},{"alpha-shape":12,"convex-hull":58,"delaunay-triangulate":63,"gl-cone3d":79,"gl-error3d":84,"gl-heatmap2d":88,"gl-line3d":91,"gl-mesh3d":112,"gl-plot2d":118,"gl-plot3d":121,"gl-pointcloud2d":123,"gl-scatter3d":128,"gl-select-box":130,"gl-spikes2d":139,"gl-streamtube3d":143,"gl-surface3d":145,ndarray:259,"ndarray-linear-interpolate":253}],7:[function(v,M,T){M.exports=f;var e=v("turntable-camera-controller"),a=v("orbit-camera-controller"),n=v("matrix-camera-controller");function r(o,i){this._controllerNames=Object.keys(o),this._controllerList=this._controllerNames.map(function(g){return o[g]}),this._mode=i,this._active=o[i],this._active||(this._mode="turntable",this._active=o.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var t=r.prototype;t.flush=function(o){for(var i=this._controllerList,g=0;g<i.length;++g)i[g].flush(o)},t.idle=function(o){for(var i=this._controllerList,g=0;g<i.length;++g)i[g].idle(o)},t.lookAt=function(o,i,g,p){for(var y=this._controllerList,c=0;c<y.length;++c)y[c].lookAt(o,i,g,p)},t.rotate=function(o,i,g,p){for(var y=this._controllerList,c=0;c<y.length;++c)y[c].rotate(o,i,g,p)},t.pan=function(o,i,g,p){for(var y=this._controllerList,c=0;c<y.length;++c)y[c].pan(o,i,g,p)},t.translate=function(o,i,g,p){for(var y=this._controllerList,c=0;c<y.length;++c)y[c].translate(o,i,g,p)},t.setMatrix=function(o,i){for(var g=this._controllerList,p=0;p<g.length;++p)g[p].setMatrix(o,i)},t.setDistanceLimits=function(o,i){for(var g=this._controllerList,p=0;p<g.length;++p)g[p].setDistanceLimits(o,i)},t.setDistance=function(o,i){for(var g=this._controllerList,p=0;p<g.length;++p)g[p].setDistance(o,i)},t.recalcMatrix=function(o){this._active.recalcMatrix(o)},t.getDistance=function(o){return this._active.getDistance(o)},t.getDistanceLimits=function(o){return this._active.getDistanceLimits(o)},t.lastT=function(){return this._active.lastT()},t.setMode=function(o){if(o!==this._mode){var i=this._controllerNames.indexOf(o);if(!(i<0)){var g=this._active,p=this._controllerList[i],y=Math.max(g.lastT(),p.lastT());g.recalcMatrix(y),p.setMatrix(y,g.computedMatrix),this._active=p,this._mode=o,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},t.getMode=function(){return this._mode};function f(o){o=o||{};var i=o.eye||[0,0,1],g=o.center||[0,0,0],p=o.up||[0,1,0],y=o.distanceLimits||[0,1/0],c=o.mode||"turntable",b=e(),l=a(),_=n();return b.setDistanceLimits(y[0],y[1]),b.lookAt(0,i,g,p),l.setDistanceLimits(y[0],y[1]),l.lookAt(0,i,g,p),_.setDistanceLimits(y[0],y[1]),_.lookAt(0,i,g,p),new r({turntable:b,orbit:l,matrix:_},c)}},{"matrix-camera-controller":245,"orbit-camera-controller":263,"turntable-camera-controller":305}],8:[function(v,M,T){var e=typeof WeakMap>"u"?v("weak-map"):WeakMap,a=v("gl-buffer"),n=v("gl-vao"),r=new e;function t(f){var o=r.get(f),i=o&&(o._triangleBuffer.handle||o._triangleBuffer.buffer);if(!i||!f.isBuffer(i)){var g=a(f,new Float32Array([-1,-1,-1,4,4,-1]));o=n(f,[{buffer:g,type:f.FLOAT,size:2}]),o._triangleBuffer=g,r.set(f,o)}o.bind(),f.drawArrays(f.TRIANGLES,0,3),o.unbind()}M.exports=t},{"gl-buffer":78,"gl-vao":150,"weak-map":313}],9:[function(v,M,T){var e=v("pad-left");M.exports=a;function a(n,r,t){r=typeof r=="number"?r:1,t=t||": ";var f=n.split(/\r?\n/),o=String(f.length+r-1).length;return f.map(function(i,g){var p=g+r,y=String(p).length,c=e(p,o-y);return c+t+i}).join(`
`)}},{"pad-left":264}],10:[function(v,M,T){M.exports=n;var e=v("robust-orientation");function a(r,t){for(var f=new Array(t+1),o=0;o<r.length;++o)f[o]=r[o];for(var o=0;o<=r.length;++o){for(var i=r.length;i<=t;++i){for(var g=new Array(t),p=0;p<t;++p)g[p]=Math.pow(i+1-o,p);f[i]=g}var y=e.apply(void 0,f);if(y)return!0}return!1}function n(r){var t=r.length;if(t===0)return[];if(t===1)return[0];for(var f=r[0].length,o=[r[0]],i=[0],g=1;g<t;++g){if(o.push(r[g]),!a(o,f)){o.pop();continue}if(i.push(g),i.length===f+1)return i}return i}},{"robust-orientation":284}],11:[function(v,M,T){M.exports=n;var e=v("delaunay-triangulate"),a=v("circumradius");function n(r,t){return e(t).filter(function(f){for(var o=new Array(f.length),i=0;i<f.length;++i)o[i]=t[f[i]];return a(o)*r<1})}},{circumradius:49,"delaunay-triangulate":63}],12:[function(v,M,T){M.exports=n;var e=v("alpha-complex"),a=v("simplicial-complex-boundary");function n(r,t){return a(e(r,t))}},{"alpha-complex":11,"simplicial-complex-boundary":290}],13:[function(v,M,T){M.exports=function(a){return atob(a)}},{}],14:[function(v,M,T){M.exports=n;var e=v("robust-linear-solve");function a(r){for(var t=0,f=0;f<r.length;++f)t+=r[f];return t}function n(r,t){for(var f=t.length,o=new Array(f+1),i=0;i<f;++i){for(var g=new Array(f+1),p=0;p<=f;++p)g[p]=r[p][i];o[i]=g}o[f]=new Array(f+1);for(var i=0;i<=f;++i)o[f][i]=1;for(var y=new Array(f+1),i=0;i<f;++i)y[i]=t[i];y[f]=1;var c=e(o,y),b=a(c[f+1]);b===0&&(b=1);for(var l=new Array(f+1),i=0;i<=f;++i)l[i]=a(c[i])/b;return l}},{"robust-linear-solve":283}],15:[function(v,M,T){var e=v("./lib/rationalize");M.exports=a;function a(n,r){return e(n[0].mul(r[1]).add(r[0].mul(n[1])),n[1].mul(r[1]))}},{"./lib/rationalize":25}],16:[function(v,M,T){M.exports=e;function e(a,n){return a[0].mul(n[1]).cmp(n[0].mul(a[1]))}},{}],17:[function(v,M,T){var e=v("./lib/rationalize");M.exports=a;function a(n,r){return e(n[0].mul(r[1]),n[1].mul(r[0]))}},{"./lib/rationalize":25}],18:[function(v,M,T){var e=v("./is-rat"),a=v("./lib/is-bn"),n=v("./lib/num-to-bn"),r=v("./lib/str-to-bn"),t=v("./lib/rationalize"),f=v("./div");M.exports=o;function o(i,g){if(e(i))return g?f(i,o(g)):[i[0].clone(),i[1].clone()];var p=0,y,c;if(a(i))y=i.clone();else if(typeof i=="string")y=r(i);else{if(i===0)return[n(0),n(1)];if(i===Math.floor(i))y=n(i);else{for(;i!==Math.floor(i);)i=i*Math.pow(2,256),p-=256;y=n(i)}}if(e(g))y.mul(g[1]),c=g[0].clone();else if(a(g))c=g.clone();else if(typeof g=="string")c=r(g);else if(!g)c=n(1);else if(g===Math.floor(g))c=n(g);else{for(;g!==Math.floor(g);)g=g*Math.pow(2,256),p+=256;c=n(g)}return p>0?y=y.ushln(p):p<0&&(c=c.ushln(-p)),t(y,c)}},{"./div":17,"./is-rat":19,"./lib/is-bn":23,"./lib/num-to-bn":24,"./lib/rationalize":25,"./lib/str-to-bn":26}],19:[function(v,M,T){var e=v("./lib/is-bn");M.exports=a;function a(n){return Array.isArray(n)&&n.length===2&&e(n[0])&&e(n[1])}},{"./lib/is-bn":23}],20:[function(v,M,T){var e=v("bn.js");M.exports=a;function a(n){return n.cmp(new e(0))}},{"bn.js":33}],21:[function(v,M,T){var e=v("./bn-sign");M.exports=a;function a(n){var r=n.length,t=n.words,f=0;if(r===1)f=t[0];else if(r===2)f=t[0]+t[1]*67108864;else for(var o=0;o<r;o++){var i=t[o];f+=i*Math.pow(67108864,o)}return e(n)*f}},{"./bn-sign":20}],22:[function(v,M,T){var e=v("double-bits"),a=v("bit-twiddle").countTrailingZeros;M.exports=n;function n(r){var t=a(e.lo(r));if(t<32)return t;var f=a(e.hi(r));return f>20?52:f+32}},{"bit-twiddle":32,"double-bits":64}],23:[function(v,M,T){v("bn.js"),M.exports=e;function e(a){return a&&typeof a=="object"&&Boolean(a.words)}},{"bn.js":33}],24:[function(v,M,T){var e=v("bn.js"),a=v("double-bits");M.exports=n;function n(r){var t=a.exponent(r);return t<52?new e(r):new e(r*Math.pow(2,52-t)).ushln(t-52)}},{"bn.js":33,"double-bits":64}],25:[function(v,M,T){var e=v("./num-to-bn"),a=v("./bn-sign");M.exports=n;function n(r,t){var f=a(r),o=a(t);if(f===0)return[e(0),e(1)];if(o===0)return[e(0),e(0)];o<0&&(r=r.neg(),t=t.neg());var i=r.gcd(t);return i.cmpn(1)?[r.div(i),t.div(i)]:[r,t]}},{"./bn-sign":20,"./num-to-bn":24}],26:[function(v,M,T){var e=v("bn.js");M.exports=a;function a(n){return new e(n)}},{"bn.js":33}],27:[function(v,M,T){var e=v("./lib/rationalize");M.exports=a;function a(n,r){return e(n[0].mul(r[0]),n[1].mul(r[1]))}},{"./lib/rationalize":25}],28:[function(v,M,T){var e=v("./lib/bn-sign");M.exports=a;function a(n){return e(n[0])*e(n[1])}},{"./lib/bn-sign":20}],29:[function(v,M,T){var e=v("./lib/rationalize");M.exports=a;function a(n,r){return e(n[0].mul(r[1]).sub(n[1].mul(r[0])),n[1].mul(r[1]))}},{"./lib/rationalize":25}],30:[function(v,M,T){var e=v("./lib/bn-to-num"),a=v("./lib/ctz");M.exports=n;function n(r){var t=r[0],f=r[1];if(t.cmpn(0)===0)return 0;var o=t.abs().divmod(f.abs()),i=o.div,g=e(i),p=o.mod,y=t.negative!==f.negative?-1:1;if(p.cmpn(0)===0)return y*g;if(g){var c=a(g)+4,b=e(p.ushln(c).divRound(f));return y*(g+b*Math.pow(2,-c))}else{var l=f.bitLength()-p.bitLength()+53,b=e(p.ushln(l).divRound(f));return l<1023?y*b*Math.pow(2,-l):(b*=Math.pow(2,-1023),y*b*Math.pow(2,1023-l))}}},{"./lib/bn-to-num":21,"./lib/ctz":22}],31:[function(v,M,T){function e(o,i,g,p,y){for(var c=y+1;p<=y;){var b=p+y>>>1,l=o[b],_=g!==void 0?g(l,i):l-i;_>=0?(c=b,y=b-1):p=b+1}return c}function a(o,i,g,p,y){for(var c=y+1;p<=y;){var b=p+y>>>1,l=o[b],_=g!==void 0?g(l,i):l-i;_>0?(c=b,y=b-1):p=b+1}return c}function n(o,i,g,p,y){for(var c=p-1;p<=y;){var b=p+y>>>1,l=o[b],_=g!==void 0?g(l,i):l-i;_<0?(c=b,p=b+1):y=b-1}return c}function r(o,i,g,p,y){for(var c=p-1;p<=y;){var b=p+y>>>1,l=o[b],_=g!==void 0?g(l,i):l-i;_<=0?(c=b,p=b+1):y=b-1}return c}function t(o,i,g,p,y){for(;p<=y;){var c=p+y>>>1,b=o[c],l=g!==void 0?g(b,i):b-i;if(l===0)return c;l<=0?p=c+1:y=c-1}return-1}function f(o,i,g,p,y,c){return typeof g=="function"?c(o,i,g,p===void 0?0:p|0,y===void 0?o.length-1:y|0):c(o,i,void 0,g===void 0?0:g|0,p===void 0?o.length-1:p|0)}M.exports={ge:function(o,i,g,p,y){return f(o,i,g,p,y,e)},gt:function(o,i,g,p,y){return f(o,i,g,p,y,a)},lt:function(o,i,g,p,y){return f(o,i,g,p,y,n)},le:function(o,i,g,p,y){return f(o,i,g,p,y,r)},eq:function(o,i,g,p,y){return f(o,i,g,p,y,t)}}},{}],32:[function(v,M,T){var e=32;T.INT_BITS=e,T.INT_MAX=2147483647,T.INT_MIN=-1<<e-1,T.sign=function(r){return(r>0)-(r<0)},T.abs=function(r){var t=r>>e-1;return(r^t)-t},T.min=function(r,t){return t^(r^t)&-(r<t)},T.max=function(r,t){return r^(r^t)&-(r<t)},T.isPow2=function(r){return!(r&r-1)&&!!r},T.log2=function(r){var t,f;return t=(r>65535)<<4,r>>>=t,f=(r>255)<<3,r>>>=f,t|=f,f=(r>15)<<2,r>>>=f,t|=f,f=(r>3)<<1,r>>>=f,t|=f,t|r>>1},T.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},T.popCount=function(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),(r+(r>>>4)&252645135)*16843009>>>24};function a(r){var t=32;return r&=-r,r&&t--,r&65535&&(t-=16),r&16711935&&(t-=8),r&252645135&&(t-=4),r&858993459&&(t-=2),r&1431655765&&(t-=1),t}T.countTrailingZeros=a,T.nextPow2=function(r){return r+=r===0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1},T.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r-(r>>>1)},T.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,r&=15,27030>>>r&1};var n=new Array(256);(function(r){for(var t=0;t<256;++t){var f=t,o=t,i=7;for(f>>>=1;f;f>>>=1)o<<=1,o|=f&1,--i;r[t]=o<<i&255}})(n),T.reverse=function(r){return n[r&255]<<24|n[r>>>8&255]<<16|n[r>>>16&255]<<8|n[r>>>24&255]},T.interleave2=function(r,t){return r&=65535,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,t&=65535,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,r|t<<1},T.deinterleave2=function(r,t){return r=r>>>t&1431655765,r=(r|r>>>1)&858993459,r=(r|r>>>2)&252645135,r=(r|r>>>4)&16711935,r=(r|r>>>16)&65535,r<<16>>16},T.interleave3=function(r,t,f){return r&=1023,r=(r|r<<16)&4278190335,r=(r|r<<8)&251719695,r=(r|r<<4)&3272356035,r=(r|r<<2)&1227133513,t&=1023,t=(t|t<<16)&4278190335,t=(t|t<<8)&251719695,t=(t|t<<4)&3272356035,t=(t|t<<2)&1227133513,r|=t<<1,f&=1023,f=(f|f<<16)&4278190335,f=(f|f<<8)&251719695,f=(f|f<<4)&3272356035,f=(f|f<<2)&1227133513,r|f<<2},T.deinterleave3=function(r,t){return r=r>>>t&1227133513,r=(r|r>>>2)&3272356035,r=(r|r>>>4)&251719695,r=(r|r>>>8)&4278190335,r=(r|r>>>16)&1023,r<<22>>22},T.nextCombination=function(r){var t=r|r-1;return t+1|(~t&-~t)-1>>>a(r)+1}},{}],33:[function(v,M,T){(function(e,a){function n(I,D){if(!I)throw new Error(D||"Assertion failed")}function r(I,D){I.super_=D;var R=function(){};R.prototype=D.prototype,I.prototype=new R,I.prototype.constructor=I}function t(I,D,R){if(t.isBN(I))return I;this.negative=0,this.words=null,this.length=0,this.red=null,I!==null&&((D==="le"||D==="be")&&(R=D,D=10),this._init(I||0,D||10,R||"be"))}typeof e=="object"?e.exports=t:a.BN=t,t.BN=t,t.wordSize=26;var f;try{typeof window<"u"&&typeof window.Buffer<"u"?f=window.Buffer:f=v("buffer").Buffer}catch{}t.isBN=function(D){return D instanceof t?!0:D!==null&&typeof D=="object"&&D.constructor.wordSize===t.wordSize&&Array.isArray(D.words)},t.max=function(D,R){return D.cmp(R)>0?D:R},t.min=function(D,R){return D.cmp(R)<0?D:R},t.prototype._init=function(D,R,O){if(typeof D=="number")return this._initNumber(D,R,O);if(typeof D=="object")return this._initArray(D,R,O);R==="hex"&&(R=16),n(R===(R|0)&&R>=2&&R<=36),D=D.toString().replace(/\s+/g,"");var F=0;D[0]==="-"&&(F++,this.negative=1),F<D.length&&(R===16?this._parseHex(D,F,O):(this._parseBase(D,R,F),O==="le"&&this._initArray(this.toArray(),R,O)))},t.prototype._initNumber=function(D,R,O){D<0&&(this.negative=1,D=-D),D<67108864?(this.words=[D&67108863],this.length=1):D<4503599627370496?(this.words=[D&67108863,D/67108864&67108863],this.length=2):(n(D<9007199254740992),this.words=[D&67108863,D/67108864&67108863,1],this.length=3),O==="le"&&this._initArray(this.toArray(),R,O)},t.prototype._initArray=function(D,R,O){if(n(typeof D.length=="number"),D.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(D.length/3),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var V,G,J=0;if(O==="be")for(F=D.length-1,V=0;F>=0;F-=3)G=D[F]|D[F-1]<<8|D[F-2]<<16,this.words[V]|=G<<J&67108863,this.words[V+1]=G>>>26-J&67108863,J+=24,J>=26&&(J-=26,V++);else if(O==="le")for(F=0,V=0;F<D.length;F+=3)G=D[F]|D[F+1]<<8|D[F+2]<<16,this.words[V]|=G<<J&67108863,this.words[V+1]=G>>>26-J&67108863,J+=24,J>=26&&(J-=26,V++);return this.strip()};function o(I,D){var R=I.charCodeAt(D);return R>=65&&R<=70?R-55:R>=97&&R<=102?R-87:R-48&15}function i(I,D,R){var O=o(I,R);return R-1>=D&&(O|=o(I,R-1)<<4),O}t.prototype._parseHex=function(D,R,O){this.length=Math.ceil((D.length-R)/6),this.words=new Array(this.length);for(var F=0;F<this.length;F++)this.words[F]=0;var V=0,G=0,J;if(O==="be")for(F=D.length-1;F>=R;F-=2)J=i(D,R,F)<<V,this.words[G]|=J&67108863,V>=18?(V-=18,G+=1,this.words[G]|=J>>>26):V+=8;else{var Z=D.length-R;for(F=Z%2===0?R+1:R;F<D.length;F+=2)J=i(D,R,F)<<V,this.words[G]|=J&67108863,V>=18?(V-=18,G+=1,this.words[G]|=J>>>26):V+=8}this.strip()};function g(I,D,R,O){for(var F=0,V=Math.min(I.length,R),G=D;G<V;G++){var J=I.charCodeAt(G)-48;F*=O,J>=49?F+=J-49+10:J>=17?F+=J-17+10:F+=J}return F}t.prototype._parseBase=function(D,R,O){this.words=[0],this.length=1;for(var F=0,V=1;V<=67108863;V*=R)F++;F--,V=V/R|0;for(var G=D.length-O,J=G%F,Z=Math.min(G,G-J)+O,Y=0,j=O;j<Z;j+=F)Y=g(D,j,j+F,R),this.imuln(V),this.words[0]+Y<67108864?this.words[0]+=Y:this._iaddn(Y);if(J!==0){var re=1;for(Y=g(D,j,D.length,R),j=0;j<J;j++)re*=R;this.imuln(re),this.words[0]+Y<67108864?this.words[0]+=Y:this._iaddn(Y)}this.strip()},t.prototype.copy=function(D){D.words=new Array(this.length);for(var R=0;R<this.length;R++)D.words[R]=this.words[R];D.length=this.length,D.negative=this.negative,D.red=this.red},t.prototype.clone=function(){var D=new t(null);return this.copy(D),D},t.prototype._expand=function(D){for(;this.length<D;)this.words[this.length++]=0;return this},t.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},t.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},t.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var p=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],y=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],c=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];t.prototype.toString=function(D,R){D=D||10,R=R|0||1;var O;if(D===16||D==="hex"){O="";for(var F=0,V=0,G=0;G<this.length;G++){var J=this.words[G],Z=((J<<F|V)&16777215).toString(16);V=J>>>24-F&16777215,V!==0||G!==this.length-1?O=p[6-Z.length]+Z+O:O=Z+O,F+=2,F>=26&&(F-=26,G--)}for(V!==0&&(O=V.toString(16)+O);O.length%R!==0;)O="0"+O;return this.negative!==0&&(O="-"+O),O}if(D===(D|0)&&D>=2&&D<=36){var Y=y[D],j=c[D];O="";var re=this.clone();for(re.negative=0;!re.isZero();){var se=re.modn(j).toString(D);re=re.idivn(j),re.isZero()?O=se+O:O=p[Y-se.length]+se+O}for(this.isZero()&&(O="0"+O);O.length%R!==0;)O="0"+O;return this.negative!==0&&(O="-"+O),O}n(!1,"Base should be between 2 and 36")},t.prototype.toNumber=function(){var D=this.words[0];return this.length===2?D+=this.words[1]*67108864:this.length===3&&this.words[2]===1?D+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-D:D},t.prototype.toJSON=function(){return this.toString(16)},t.prototype.toBuffer=function(D,R){return n(typeof f<"u"),this.toArrayLike(f,D,R)},t.prototype.toArray=function(D,R){return this.toArrayLike(Array,D,R)},t.prototype.toArrayLike=function(D,R,O){var F=this.byteLength(),V=O||Math.max(1,F);n(F<=V,"byte array longer than desired length"),n(V>0,"Requested array length <= 0"),this.strip();var G=R==="le",J=new D(V),Z,Y,j=this.clone();if(G){for(Y=0;!j.isZero();Y++)Z=j.andln(255),j.iushrn(8),J[Y]=Z;for(;Y<V;Y++)J[Y]=0}else{for(Y=0;Y<V-F;Y++)J[Y]=0;for(Y=0;!j.isZero();Y++)Z=j.andln(255),j.iushrn(8),J[V-Y-1]=Z}return J},Math.clz32?t.prototype._countBits=function(D){return 32-Math.clz32(D)}:t.prototype._countBits=function(D){var R=D,O=0;return R>=4096&&(O+=13,R>>>=13),R>=64&&(O+=7,R>>>=7),R>=8&&(O+=4,R>>>=4),R>=2&&(O+=2,R>>>=2),O+R},t.prototype._zeroBits=function(D){if(D===0)return 26;var R=D,O=0;return(R&8191)===0&&(O+=13,R>>>=13),(R&127)===0&&(O+=7,R>>>=7),(R&15)===0&&(O+=4,R>>>=4),(R&3)===0&&(O+=2,R>>>=2),(R&1)===0&&O++,O},t.prototype.bitLength=function(){var D=this.words[this.length-1],R=this._countBits(D);return(this.length-1)*26+R};function b(I){for(var D=new Array(I.bitLength()),R=0;R<D.length;R++){var O=R/26|0,F=R%26;D[R]=(I.words[O]&1<<F)>>>F}return D}t.prototype.zeroBits=function(){if(this.isZero())return 0;for(var D=0,R=0;R<this.length;R++){var O=this._zeroBits(this.words[R]);if(D+=O,O!==26)break}return D},t.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},t.prototype.toTwos=function(D){return this.negative!==0?this.abs().inotn(D).iaddn(1):this.clone()},t.prototype.fromTwos=function(D){return this.testn(D-1)?this.notn(D).iaddn(1).ineg():this.clone()},t.prototype.isNeg=function(){return this.negative!==0},t.prototype.neg=function(){return this.clone().ineg()},t.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},t.prototype.iuor=function(D){for(;this.length<D.length;)this.words[this.length++]=0;for(var R=0;R<D.length;R++)this.words[R]=this.words[R]|D.words[R];return this.strip()},t.prototype.ior=function(D){return n((this.negative|D.negative)===0),this.iuor(D)},t.prototype.or=function(D){return this.length>D.length?this.clone().ior(D):D.clone().ior(this)},t.prototype.uor=function(D){return this.length>D.length?this.clone().iuor(D):D.clone().iuor(this)},t.prototype.iuand=function(D){var R;this.length>D.length?R=D:R=this;for(var O=0;O<R.length;O++)this.words[O]=this.words[O]&D.words[O];return this.length=R.length,this.strip()},t.prototype.iand=function(D){return n((this.negative|D.negative)===0),this.iuand(D)},t.prototype.and=function(D){return this.length>D.length?this.clone().iand(D):D.clone().iand(this)},t.prototype.uand=function(D){return this.length>D.length?this.clone().iuand(D):D.clone().iuand(this)},t.prototype.iuxor=function(D){var R,O;this.length>D.length?(R=this,O=D):(R=D,O=this);for(var F=0;F<O.length;F++)this.words[F]=R.words[F]^O.words[F];if(this!==R)for(;F<R.length;F++)this.words[F]=R.words[F];return this.length=R.length,this.strip()},t.prototype.ixor=function(D){return n((this.negative|D.negative)===0),this.iuxor(D)},t.prototype.xor=function(D){return this.length>D.length?this.clone().ixor(D):D.clone().ixor(this)},t.prototype.uxor=function(D){return this.length>D.length?this.clone().iuxor(D):D.clone().iuxor(this)},t.prototype.inotn=function(D){n(typeof D=="number"&&D>=0);var R=Math.ceil(D/26)|0,O=D%26;this._expand(R),O>0&&R--;for(var F=0;F<R;F++)this.words[F]=~this.words[F]&67108863;return O>0&&(this.words[F]=~this.words[F]&67108863>>26-O),this.strip()},t.prototype.notn=function(D){return this.clone().inotn(D)},t.prototype.setn=function(D,R){n(typeof D=="number"&&D>=0);var O=D/26|0,F=D%26;return this._expand(O+1),R?this.words[O]=this.words[O]|1<<F:this.words[O]=this.words[O]&~(1<<F),this.strip()},t.prototype.iadd=function(D){var R;if(this.negative!==0&&D.negative===0)return this.negative=0,R=this.isub(D),this.negative^=1,this._normSign();if(this.negative===0&&D.negative!==0)return D.negative=0,R=this.isub(D),D.negative=1,R._normSign();var O,F;this.length>D.length?(O=this,F=D):(O=D,F=this);for(var V=0,G=0;G<F.length;G++)R=(O.words[G]|0)+(F.words[G]|0)+V,this.words[G]=R&67108863,V=R>>>26;for(;V!==0&&G<O.length;G++)R=(O.words[G]|0)+V,this.words[G]=R&67108863,V=R>>>26;if(this.length=O.length,V!==0)this.words[this.length]=V,this.length++;else if(O!==this)for(;G<O.length;G++)this.words[G]=O.words[G];return this},t.prototype.add=function(D){var R;return D.negative!==0&&this.negative===0?(D.negative=0,R=this.sub(D),D.negative^=1,R):D.negative===0&&this.negative!==0?(this.negative=0,R=D.sub(this),this.negative=1,R):this.length>D.length?this.clone().iadd(D):D.clone().iadd(this)},t.prototype.isub=function(D){if(D.negative!==0){D.negative=0;var R=this.iadd(D);return D.negative=1,R._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(D),this.negative=1,this._normSign();var O=this.cmp(D);if(O===0)return this.negative=0,this.length=1,this.words[0]=0,this;var F,V;O>0?(F=this,V=D):(F=D,V=this);for(var G=0,J=0;J<V.length;J++)R=(F.words[J]|0)-(V.words[J]|0)+G,G=R>>26,this.words[J]=R&67108863;for(;G!==0&&J<F.length;J++)R=(F.words[J]|0)+G,G=R>>26,this.words[J]=R&67108863;if(G===0&&J<F.length&&F!==this)for(;J<F.length;J++)this.words[J]=F.words[J];return this.length=Math.max(this.length,J),F!==this&&(this.negative=1),this.strip()},t.prototype.sub=function(D){return this.clone().isub(D)};function l(I,D,R){R.negative=D.negative^I.negative;var O=I.length+D.length|0;R.length=O,O=O-1|0;var F=I.words[0]|0,V=D.words[0]|0,G=F*V,J=G&67108863,Z=G/67108864|0;R.words[0]=J;for(var Y=1;Y<O;Y++){for(var j=Z>>>26,re=Z&67108863,se=Math.min(Y,D.length-1),oe=Math.max(0,Y-I.length+1);oe<=se;oe++){var N=Y-oe|0;F=I.words[N]|0,V=D.words[oe]|0,G=F*V+re,j+=G/67108864|0,re=G&67108863}R.words[Y]=re|0,Z=j|0}return Z!==0?R.words[Y]=Z|0:R.length--,R.strip()}var _=function(D,R,O){var F=D.words,V=R.words,G=O.words,J=0,Z,Y,j,re=F[0]|0,se=re&8191,oe=re>>>13,N=F[1]|0,U=N&8191,q=N>>>13,Q=F[2]|0,W=Q&8191,X=Q>>>13,ee=F[3]|0,te=ee&8191,ie=ee>>>13,le=F[4]|0,ge=le&8191,fe=le>>>13,pe=F[5]|0,ye=pe&8191,Te=pe>>>13,_e=F[6]|0,De=_e&8191,Be=_e>>>13,Ue=F[7]|0,xe=Ue&8191,Pe=Ue>>>13,Ve=F[8]|0,Qe=Ve&8191,Fe=Ve>>>13,Le=F[9]|0,Ne=Le&8191,dt=Le>>>13,Dt=V[0]|0,Xt=Dt&8191,At=Dt>>>13,zt=V[1]|0,Ut=zt&8191,Ct=zt>>>13,Mt=V[2]|0,rt=Mt&8191,ct=Mt>>>13,Ze=V[3]|0,ke=Ze&8191,Ge=Ze>>>13,Je=V[4]|0,ot=Je&8191,Pt=Je>>>13,_t=V[5]|0,Bt=_t&8191,qt=_t>>>13,Ot=V[6]|0,$t=Ot&8191,rr=Ot>>>13,er=V[7]|0,pr=er&8191,Xr=er>>>13,hn=V[8]|0,Qr=hn&8191,nt=hn>>>13,Ht=V[9]|0,Kt=Ht&8191,Gt=Ht>>>13;O.negative=D.negative^R.negative,O.length=19,Z=Math.imul(se,Xt),Y=Math.imul(se,At),Y=Y+Math.imul(oe,Xt)|0,j=Math.imul(oe,At);var br=(J+Z|0)+((Y&8191)<<13)|0;J=(j+(Y>>>13)|0)+(br>>>26)|0,br&=67108863,Z=Math.imul(U,Xt),Y=Math.imul(U,At),Y=Y+Math.imul(q,Xt)|0,j=Math.imul(q,At),Z=Z+Math.imul(se,Ut)|0,Y=Y+Math.imul(se,Ct)|0,Y=Y+Math.imul(oe,Ut)|0,j=j+Math.imul(oe,Ct)|0;var tt=(J+Z|0)+((Y&8191)<<13)|0;J=(j+(Y>>>13)|0)+(tt>>>26)|0,tt&=67108863,Z=Math.imul(W,Xt),Y=Math.imul(W,At),Y=Y+Math.imul(X,Xt)|0,j=Math.imul(X,At),Z=Z+Math.imul(U,Ut)|0,Y=Y+Math.imul(U,Ct)|0,Y=Y+Math.imul(q,Ut)|0,j=j+Math.imul(q,Ct)|0,Z=Z+Math.imul(se,rt)|0,Y=Y+Math.imul(se,ct)|0,Y=Y+Math.imul(oe,rt)|0,j=j+Math.imul(oe,ct)|0;var je=(J+Z|0)+((Y&8191)<<13)|0;J=(j+(Y>>>13)|0)+(je>>>26)|0,je&=67108863,Z=Math.imul(te,Xt),Y=Math.imul(te,At),Y=Y+Math.imul(ie,Xt)|0,j=Math.imul(ie,At),Z=Z+Math.imul(W,Ut)|0,Y=Y+Math.imul(W,Ct)|0,Y=Y+Math.imul(X,Ut)|0,j=j+Math.imul(X,Ct)|0,Z=Z+Math.imul(U,rt)|0,Y=Y+Math.imul(U,ct)|0,Y=Y+Math.imul(q,rt)|0,j=j+Math.imul(q,ct)|0,Z=Z+Math.imul(se,ke)|0,Y=Y+Math.imul(se,Ge)|0,Y=Y+Math.imul(oe,ke)|0,j=j+Math.imul(oe,Ge)|0;var st=(J+Z|0)+((Y&8191)<<13)|0;J=(j+(Y>>>13)|0)+(st>>>26)|0,st&=67108863,Z=Math.imul(ge,Xt),Y=Math.imul(ge,At),Y=Y+Math.imul(fe,Xt)|0,j=Math.imul(fe,At),Z=Z+Math.imul(te,Ut)|0,Y=Y+Math.imul(te,Ct)|0,Y=Y+Math.imul(ie,Ut)|0,j=j+Math.imul(ie,Ct)|0,Z=Z+Math.imul(W,rt)|0,Y=Y+Math.imul(W,ct)|0,Y=Y+Math.imul(X,rt)|0,j=j+Math.imul(X,ct)|0,Z=Z+Math.imul(U,ke)|0,Y=Y+Math.imul(U,Ge)|0,Y=Y+Math.imul(q,ke)|0,j=j+Math.imul(q,Ge)|0,Z=Z+Math.imul(se,ot)|0,Y=Y+Math.imul(se,Pt)|0,Y=Y+Math.imul(oe,ot)|0,j=j+Math.imul(oe,Pt)|0;var ft=(J+Z|0)+((Y&8191)<<13)|0;J=(j+(Y>>>13)|0)+(ft>>>26)|0,ft&=67108863,Z=Math.imul(ye,Xt),Y=Math.imul(ye,At),Y=Y+Math.imul(Te,Xt)|0,j=Math.imul(Te,At),Z=Z+Math.imul(ge,Ut)|0,Y=Y+Math.imul(ge,Ct)|0,Y=Y+Math.imul(fe,Ut)|0,j=j+Math.imul(fe,Ct)|0,Z=Z+Math.imul(te,rt)|0,Y=Y+Math.imul(te,ct)|0,Y=Y+Math.imul(ie,rt)|0,j=j+Math.imul(ie,ct)|0,Z=Z+Math.imul(W,ke)|0,Y=Y+Math.imul(W,Ge)|0,Y=Y+Math.imul(X,ke)|0,j=j+Math.imul(X,Ge)|0,Z=Z+Math.imul(U,ot)|0,Y=Y+Math.imul(U,Pt)|0,Y=Y+Math.imul(q,ot)|0,j=j+Math.imul(q,Pt)|0,Z=Z+Math.imul(se,Bt)|0,Y=Y+Math.imul(se,qt)|0,Y=Y+Math.imul(oe,Bt)|0,j=j+Math.imul(oe,qt)|0;var Me=(J+Z|0)+((Y&8191)<<13)|0;J=(j+(Y>>>13)|0)+(Me>>>26)|0,Me&=67108863,Z=Math.imul(De,Xt),Y=Math.imul(De,At),Y=Y+Math.imul(Be,Xt)|0,j=Math.imul(Be,At),Z=Z+Math.imul(ye,Ut)|0,Y=Y+Math.imul(ye,Ct)|0,Y=Y+Math.imul(Te,Ut)|0,j=j+Math.imul(Te,Ct)|0,Z=Z+Math.imul(ge,rt)|0,Y=Y+Math.imul(ge,ct)|0,Y=Y+Math.imul(fe,rt)|0,j=j+Math.imul(fe,ct)|0,Z=Z+Math.imul(te,ke)|0,Y=Y+Math.imul(te,Ge)|0,Y=Y+Math.imul(ie,ke)|0,j=j+Math.imul(ie,Ge)|0,Z=Z+Math.imul(W,ot)|0,Y=Y+Math.imul(W,Pt)|0,Y=Y+Math.imul(X,ot)|0,j=j+Math.imul(X,Pt)|0,Z=Z+Math.imul(U,Bt)|0,Y=Y+Math.imul(U,qt)|0,Y=Y+Math.imul(q,Bt)|0,j=j+Math.imul(q,qt)|0,Z=Z+Math.imul(se,$t)|0,Y=Y+Math.imul(se,rr)|0,Y=Y+Math.imul(oe,$t)|0,j=j+Math.imul(oe,rr)|0;var Se=(J+Z|0)+((Y&8191)<<13)|0;J=(j+(Y>>>13)|0)+(Se>>>26)|0,Se&=67108863,Z=Math.imul(xe,Xt),Y=Math.imul(xe,At),Y=Y+Math.imul(Pe,Xt)|0,j=Math.imul(Pe,At),Z=Z+Math.imul(De,Ut)|0,Y=Y+Math.imul(De,Ct)|0,Y=Y+Math.imul(Be,Ut)|0,j=j+Math.imul(Be,Ct)|0,Z=Z+Math.imul(ye,rt)|0,Y=Y+Math.imul(ye,ct)|0,Y=Y+Math.imul(Te,rt)|0,j=j+Math.imul(Te,ct)|0,Z=Z+Math.imul(ge,ke)|0,Y=Y+Math.imul(ge,Ge)|0,Y=Y+Math.imul(fe,ke)|0,j=j+Math.imul(fe,Ge)|0,Z=Z+Math.imul(te,ot)|0,Y=Y+Math.imul(te,Pt)|0,Y=Y+Math.imul(ie,ot)|0,j=j+Math.imul(ie,Pt)|0,Z=Z+Math.imul(W,Bt)|0,Y=Y+Math.imul(W,qt)|0,Y=Y+Math.imul(X,Bt)|0,j=j+Math.imul(X,qt)|0,Z=Z+Math.imul(U,$t)|0,Y=Y+Math.imul(U,rr)|0,Y=Y+Math.imul(q,$t)|0,j=j+Math.imul(q,rr)|0,Z=Z+Math.imul(se,pr)|0,Y=Y+Math.imul(se,Xr)|0,Y=Y+Math.imul(oe,pr)|0,j=j+Math.imul(oe,Xr)|0;var Ke=(J+Z|0)+((Y&8191)<<13)|0;J=(j+(Y>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,Z=Math.imul(Qe,Xt),Y=Math.imul(Qe,At),Y=Y+Math.imul(Fe,Xt)|0,j=Math.imul(Fe,At),Z=Z+Math.imul(xe,Ut)|0,Y=Y+Math.imul(xe,Ct)|0,Y=Y+Math.imul(Pe,Ut)|0,j=j+Math.imul(Pe,Ct)|0,Z=Z+Math.imul(De,rt)|0,Y=Y+Math.imul(De,ct)|0,Y=Y+Math.imul(Be,rt)|0,j=j+Math.imul(Be,ct)|0,Z=Z+Math.imul(ye,ke)|0,Y=Y+Math.imul(ye,Ge)|0,Y=Y+Math.imul(Te,ke)|0,j=j+Math.imul(Te,Ge)|0,Z=Z+Math.imul(ge,ot)|0,Y=Y+Math.imul(ge,Pt)|0,Y=Y+Math.imul(fe,ot)|0,j=j+Math.imul(fe,Pt)|0,Z=Z+Math.imul(te,Bt)|0,Y=Y+Math.imul(te,qt)|0,Y=Y+Math.imul(ie,Bt)|0,j=j+Math.imul(ie,qt)|0,Z=Z+Math.imul(W,$t)|0,Y=Y+Math.imul(W,rr)|0,Y=Y+Math.imul(X,$t)|0,j=j+Math.imul(X,rr)|0,Z=Z+Math.imul(U,pr)|0,Y=Y+Math.imul(U,Xr)|0,Y=Y+Math.imul(q,pr)|0,j=j+Math.imul(q,Xr)|0,Z=Z+Math.imul(se,Qr)|0,Y=Y+Math.imul(se,nt)|0,Y=Y+Math.imul(oe,Qr)|0,j=j+Math.imul(oe,nt)|0;var Xe=(J+Z|0)+((Y&8191)<<13)|0;J=(j+(Y>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,Z=Math.imul(Ne,Xt),Y=Math.imul(Ne,At),Y=Y+Math.imul(dt,Xt)|0,j=Math.imul(dt,At),Z=Z+Math.imul(Qe,Ut)|0,Y=Y+Math.imul(Qe,Ct)|0,Y=Y+Math.imul(Fe,Ut)|0,j=j+Math.imul(Fe,Ct)|0,Z=Z+Math.imul(xe,rt)|0,Y=Y+Math.imul(xe,ct)|0,Y=Y+Math.imul(Pe,rt)|0,j=j+Math.imul(Pe,ct)|0,Z=Z+Math.imul(De,ke)|0,Y=Y+Math.imul(De,Ge)|0,Y=Y+Math.imul(Be,ke)|0,j=j+Math.imul(Be,Ge)|0,Z=Z+Math.imul(ye,ot)|0,Y=Y+Math.imul(ye,Pt)|0,Y=Y+Math.imul(Te,ot)|0,j=j+Math.imul(Te,Pt)|0,Z=Z+Math.imul(ge,Bt)|0,Y=Y+Math.imul(ge,qt)|0,Y=Y+Math.imul(fe,Bt)|0,j=j+Math.imul(fe,qt)|0,Z=Z+Math.imul(te,$t)|0,Y=Y+Math.imul(te,rr)|0,Y=Y+Math.imul(ie,$t)|0,j=j+Math.imul(ie,rr)|0,Z=Z+Math.imul(W,pr)|0,Y=Y+Math.imul(W,Xr)|0,Y=Y+Math.imul(X,pr)|0,j=j+Math.imul(X,Xr)|0,Z=Z+Math.imul(U,Qr)|0,Y=Y+Math.imul(U,nt)|0,Y=Y+Math.imul(q,Qr)|0,j=j+Math.imul(q,nt)|0,Z=Z+Math.imul(se,Kt)|0,Y=Y+Math.imul(se,Gt)|0,Y=Y+Math.imul(oe,Kt)|0,j=j+Math.imul(oe,Gt)|0;var it=(J+Z|0)+((Y&8191)<<13)|0;J=(j+(Y>>>13)|0)+(it>>>26)|0,it&=67108863,Z=Math.imul(Ne,Ut),Y=Math.imul(Ne,Ct),Y=Y+Math.imul(dt,Ut)|0,j=Math.imul(dt,Ct),Z=Z+Math.imul(Qe,rt)|0,Y=Y+Math.imul(Qe,ct)|0,Y=Y+Math.imul(Fe,rt)|0,j=j+Math.imul(Fe,ct)|0,Z=Z+Math.imul(xe,ke)|0,Y=Y+Math.imul(xe,Ge)|0,Y=Y+Math.imul(Pe,ke)|0,j=j+Math.imul(Pe,Ge)|0,Z=Z+Math.imul(De,ot)|0,Y=Y+Math.imul(De,Pt)|0,Y=Y+Math.imul(Be,ot)|0,j=j+Math.imul(Be,Pt)|0,Z=Z+Math.imul(ye,Bt)|0,Y=Y+Math.imul(ye,qt)|0,Y=Y+Math.imul(Te,Bt)|0,j=j+Math.imul(Te,qt)|0,Z=Z+Math.imul(ge,$t)|0,Y=Y+Math.imul(ge,rr)|0,Y=Y+Math.imul(fe,$t)|0,j=j+Math.imul(fe,rr)|0,Z=Z+Math.imul(te,pr)|0,Y=Y+Math.imul(te,Xr)|0,Y=Y+Math.imul(ie,pr)|0,j=j+Math.imul(ie,Xr)|0,Z=Z+Math.imul(W,Qr)|0,Y=Y+Math.imul(W,nt)|0,Y=Y+Math.imul(X,Qr)|0,j=j+Math.imul(X,nt)|0,Z=Z+Math.imul(U,Kt)|0,Y=Y+Math.imul(U,Gt)|0,Y=Y+Math.imul(q,Kt)|0,j=j+Math.imul(q,Gt)|0;var pt=(J+Z|0)+((Y&8191)<<13)|0;J=(j+(Y>>>13)|0)+(pt>>>26)|0,pt&=67108863,Z=Math.imul(Ne,rt),Y=Math.imul(Ne,ct),Y=Y+Math.imul(dt,rt)|0,j=Math.imul(dt,ct),Z=Z+Math.imul(Qe,ke)|0,Y=Y+Math.imul(Qe,Ge)|0,Y=Y+Math.imul(Fe,ke)|0,j=j+Math.imul(Fe,Ge)|0,Z=Z+Math.imul(xe,ot)|0,Y=Y+Math.imul(xe,Pt)|0,Y=Y+Math.imul(Pe,ot)|0,j=j+Math.imul(Pe,Pt)|0,Z=Z+Math.imul(De,Bt)|0,Y=Y+Math.imul(De,qt)|0,Y=Y+Math.imul(Be,Bt)|0,j=j+Math.imul(Be,qt)|0,Z=Z+Math.imul(ye,$t)|0,Y=Y+Math.imul(ye,rr)|0,Y=Y+Math.imul(Te,$t)|0,j=j+Math.imul(Te,rr)|0,Z=Z+Math.imul(ge,pr)|0,Y=Y+Math.imul(ge,Xr)|0,Y=Y+Math.imul(fe,pr)|0,j=j+Math.imul(fe,Xr)|0,Z=Z+Math.imul(te,Qr)|0,Y=Y+Math.imul(te,nt)|0,Y=Y+Math.imul(ie,Qr)|0,j=j+Math.imul(ie,nt)|0,Z=Z+Math.imul(W,Kt)|0,Y=Y+Math.imul(W,Gt)|0,Y=Y+Math.imul(X,Kt)|0,j=j+Math.imul(X,Gt)|0;var vt=(J+Z|0)+((Y&8191)<<13)|0;J=(j+(Y>>>13)|0)+(vt>>>26)|0,vt&=67108863,Z=Math.imul(Ne,ke),Y=Math.imul(Ne,Ge),Y=Y+Math.imul(dt,ke)|0,j=Math.imul(dt,Ge),Z=Z+Math.imul(Qe,ot)|0,Y=Y+Math.imul(Qe,Pt)|0,Y=Y+Math.imul(Fe,ot)|0,j=j+Math.imul(Fe,Pt)|0,Z=Z+Math.imul(xe,Bt)|0,Y=Y+Math.imul(xe,qt)|0,Y=Y+Math.imul(Pe,Bt)|0,j=j+Math.imul(Pe,qt)|0,Z=Z+Math.imul(De,$t)|0,Y=Y+Math.imul(De,rr)|0,Y=Y+Math.imul(Be,$t)|0,j=j+Math.imul(Be,rr)|0,Z=Z+Math.imul(ye,pr)|0,Y=Y+Math.imul(ye,Xr)|0,Y=Y+Math.imul(Te,pr)|0,j=j+Math.imul(Te,Xr)|0,Z=Z+Math.imul(ge,Qr)|0,Y=Y+Math.imul(ge,nt)|0,Y=Y+Math.imul(fe,Qr)|0,j=j+Math.imul(fe,nt)|0,Z=Z+Math.imul(te,Kt)|0,Y=Y+Math.imul(te,Gt)|0,Y=Y+Math.imul(ie,Kt)|0,j=j+Math.imul(ie,Gt)|0;var St=(J+Z|0)+((Y&8191)<<13)|0;J=(j+(Y>>>13)|0)+(St>>>26)|0,St&=67108863,Z=Math.imul(Ne,ot),Y=Math.imul(Ne,Pt),Y=Y+Math.imul(dt,ot)|0,j=Math.imul(dt,Pt),Z=Z+Math.imul(Qe,Bt)|0,Y=Y+Math.imul(Qe,qt)|0,Y=Y+Math.imul(Fe,Bt)|0,j=j+Math.imul(Fe,qt)|0,Z=Z+Math.imul(xe,$t)|0,Y=Y+Math.imul(xe,rr)|0,Y=Y+Math.imul(Pe,$t)|0,j=j+Math.imul(Pe,rr)|0,Z=Z+Math.imul(De,pr)|0,Y=Y+Math.imul(De,Xr)|0,Y=Y+Math.imul(Be,pr)|0,j=j+Math.imul(Be,Xr)|0,Z=Z+Math.imul(ye,Qr)|0,Y=Y+Math.imul(ye,nt)|0,Y=Y+Math.imul(Te,Qr)|0,j=j+Math.imul(Te,nt)|0,Z=Z+Math.imul(ge,Kt)|0,Y=Y+Math.imul(ge,Gt)|0,Y=Y+Math.imul(fe,Kt)|0,j=j+Math.imul(fe,Gt)|0;var kt=(J+Z|0)+((Y&8191)<<13)|0;J=(j+(Y>>>13)|0)+(kt>>>26)|0,kt&=67108863,Z=Math.imul(Ne,Bt),Y=Math.imul(Ne,qt),Y=Y+Math.imul(dt,Bt)|0,j=Math.imul(dt,qt),Z=Z+Math.imul(Qe,$t)|0,Y=Y+Math.imul(Qe,rr)|0,Y=Y+Math.imul(Fe,$t)|0,j=j+Math.imul(Fe,rr)|0,Z=Z+Math.imul(xe,pr)|0,Y=Y+Math.imul(xe,Xr)|0,Y=Y+Math.imul(Pe,pr)|0,j=j+Math.imul(Pe,Xr)|0,Z=Z+Math.imul(De,Qr)|0,Y=Y+Math.imul(De,nt)|0,Y=Y+Math.imul(Be,Qr)|0,j=j+Math.imul(Be,nt)|0,Z=Z+Math.imul(ye,Kt)|0,Y=Y+Math.imul(ye,Gt)|0,Y=Y+Math.imul(Te,Kt)|0,j=j+Math.imul(Te,Gt)|0;var Nt=(J+Z|0)+((Y&8191)<<13)|0;J=(j+(Y>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,Z=Math.imul(Ne,$t),Y=Math.imul(Ne,rr),Y=Y+Math.imul(dt,$t)|0,j=Math.imul(dt,rr),Z=Z+Math.imul(Qe,pr)|0,Y=Y+Math.imul(Qe,Xr)|0,Y=Y+Math.imul(Fe,pr)|0,j=j+Math.imul(Fe,Xr)|0,Z=Z+Math.imul(xe,Qr)|0,Y=Y+Math.imul(xe,nt)|0,Y=Y+Math.imul(Pe,Qr)|0,j=j+Math.imul(Pe,nt)|0,Z=Z+Math.imul(De,Kt)|0,Y=Y+Math.imul(De,Gt)|0,Y=Y+Math.imul(Be,Kt)|0,j=j+Math.imul(Be,Gt)|0;var nr=(J+Z|0)+((Y&8191)<<13)|0;J=(j+(Y>>>13)|0)+(nr>>>26)|0,nr&=67108863,Z=Math.imul(Ne,pr),Y=Math.imul(Ne,Xr),Y=Y+Math.imul(dt,pr)|0,j=Math.imul(dt,Xr),Z=Z+Math.imul(Qe,Qr)|0,Y=Y+Math.imul(Qe,nt)|0,Y=Y+Math.imul(Fe,Qr)|0,j=j+Math.imul(Fe,nt)|0,Z=Z+Math.imul(xe,Kt)|0,Y=Y+Math.imul(xe,Gt)|0,Y=Y+Math.imul(Pe,Kt)|0,j=j+Math.imul(Pe,Gt)|0;var fr=(J+Z|0)+((Y&8191)<<13)|0;J=(j+(Y>>>13)|0)+(fr>>>26)|0,fr&=67108863,Z=Math.imul(Ne,Qr),Y=Math.imul(Ne,nt),Y=Y+Math.imul(dt,Qr)|0,j=Math.imul(dt,nt),Z=Z+Math.imul(Qe,Kt)|0,Y=Y+Math.imul(Qe,Gt)|0,Y=Y+Math.imul(Fe,Kt)|0,j=j+Math.imul(Fe,Gt)|0;var Hr=(J+Z|0)+((Y&8191)<<13)|0;J=(j+(Y>>>13)|0)+(Hr>>>26)|0,Hr&=67108863,Z=Math.imul(Ne,Kt),Y=Math.imul(Ne,Gt),Y=Y+Math.imul(dt,Kt)|0,j=Math.imul(dt,Gt);var Er=(J+Z|0)+((Y&8191)<<13)|0;return J=(j+(Y>>>13)|0)+(Er>>>26)|0,Er&=67108863,G[0]=br,G[1]=tt,G[2]=je,G[3]=st,G[4]=ft,G[5]=Me,G[6]=Se,G[7]=Ke,G[8]=Xe,G[9]=it,G[10]=pt,G[11]=vt,G[12]=St,G[13]=kt,G[14]=Nt,G[15]=nr,G[16]=fr,G[17]=Hr,G[18]=Er,J!==0&&(G[19]=J,O.length++),O};Math.imul||(_=l);function s(I,D,R){R.negative=D.negative^I.negative,R.length=I.length+D.length;for(var O=0,F=0,V=0;V<R.length-1;V++){var G=F;F=0;for(var J=O&67108863,Z=Math.min(V,D.length-1),Y=Math.max(0,V-I.length+1);Y<=Z;Y++){var j=V-Y,re=I.words[j]|0,se=D.words[Y]|0,oe=re*se,N=oe&67108863;G=G+(oe/67108864|0)|0,N=N+J|0,J=N&67108863,G=G+(N>>>26)|0,F+=G>>>26,G&=67108863}R.words[V]=J,O=G,G=F}return O!==0?R.words[V]=O:R.length--,R.strip()}function A(I,D,R){var O=new m;return O.mulp(I,D,R)}t.prototype.mulTo=function(D,R){var O,F=this.length+D.length;return this.length===10&&D.length===10?O=_(this,D,R):F<63?O=l(this,D,R):F<1024?O=s(this,D,R):O=A(this,D,R),O};function m(I,D){this.x=I,this.y=D}m.prototype.makeRBT=function(D){for(var R=new Array(D),O=t.prototype._countBits(D)-1,F=0;F<D;F++)R[F]=this.revBin(F,O,D);return R},m.prototype.revBin=function(D,R,O){if(D===0||D===O-1)return D;for(var F=0,V=0;V<R;V++)F|=(D&1)<<R-V-1,D>>=1;return F},m.prototype.permute=function(D,R,O,F,V,G){for(var J=0;J<G;J++)F[J]=R[D[J]],V[J]=O[D[J]]},m.prototype.transform=function(D,R,O,F,V,G){this.permute(G,D,R,O,F,V);for(var J=1;J<V;J<<=1)for(var Z=J<<1,Y=Math.cos(2*Math.PI/Z),j=Math.sin(2*Math.PI/Z),re=0;re<V;re+=Z)for(var se=Y,oe=j,N=0;N<J;N++){var U=O[re+N],q=F[re+N],Q=O[re+N+J],W=F[re+N+J],X=se*Q-oe*W;W=se*W+oe*Q,Q=X,O[re+N]=U+Q,F[re+N]=q+W,O[re+N+J]=U-Q,F[re+N+J]=q-W,N!==Z&&(X=Y*se-j*oe,oe=Y*oe+j*se,se=X)}},m.prototype.guessLen13b=function(D,R){var O=Math.max(R,D)|1,F=O&1,V=0;for(O=O/2|0;O;O=O>>>1)V++;return 1<<V+1+F},m.prototype.conjugate=function(D,R,O){if(!(O<=1))for(var F=0;F<O/2;F++){var V=D[F];D[F]=D[O-F-1],D[O-F-1]=V,V=R[F],R[F]=-R[O-F-1],R[O-F-1]=-V}},m.prototype.normalize13b=function(D,R){for(var O=0,F=0;F<R/2;F++){var V=Math.round(D[2*F+1]/R)*8192+Math.round(D[2*F]/R)+O;D[F]=V&67108863,V<67108864?O=0:O=V/67108864|0}return D},m.prototype.convert13b=function(D,R,O,F){for(var V=0,G=0;G<R;G++)V=V+(D[G]|0),O[2*G]=V&8191,V=V>>>13,O[2*G+1]=V&8191,V=V>>>13;for(G=2*R;G<F;++G)O[G]=0;n(V===0),n((V&-8192)===0)},m.prototype.stub=function(D){for(var R=new Array(D),O=0;O<D;O++)R[O]=0;return R},m.prototype.mulp=function(D,R,O){var F=2*this.guessLen13b(D.length,R.length),V=this.makeRBT(F),G=this.stub(F),J=new Array(F),Z=new Array(F),Y=new Array(F),j=new Array(F),re=new Array(F),se=new Array(F),oe=O.words;oe.length=F,this.convert13b(D.words,D.length,J,F),this.convert13b(R.words,R.length,j,F),this.transform(J,G,Z,Y,F,V),this.transform(j,G,re,se,F,V);for(var N=0;N<F;N++){var U=Z[N]*re[N]-Y[N]*se[N];Y[N]=Z[N]*se[N]+Y[N]*re[N],Z[N]=U}return this.conjugate(Z,Y,F),this.transform(Z,Y,oe,G,F,V),this.conjugate(oe,G,F),this.normalize13b(oe,F),O.negative=D.negative^R.negative,O.length=D.length+R.length,O.strip()},t.prototype.mul=function(D){var R=new t(null);return R.words=new Array(this.length+D.length),this.mulTo(D,R)},t.prototype.mulf=function(D){var R=new t(null);return R.words=new Array(this.length+D.length),A(this,D,R)},t.prototype.imul=function(D){return this.clone().mulTo(D,this)},t.prototype.imuln=function(D){n(typeof D=="number"),n(D<67108864);for(var R=0,O=0;O<this.length;O++){var F=(this.words[O]|0)*D,V=(F&67108863)+(R&67108863);R>>=26,R+=F/67108864|0,R+=V>>>26,this.words[O]=V&67108863}return R!==0&&(this.words[O]=R,this.length++),this},t.prototype.muln=function(D){return this.clone().imuln(D)},t.prototype.sqr=function(){return this.mul(this)},t.prototype.isqr=function(){return this.imul(this.clone())},t.prototype.pow=function(D){var R=b(D);if(R.length===0)return new t(1);for(var O=this,F=0;F<R.length&&R[F]===0;F++,O=O.sqr());if(++F<R.length)for(var V=O.sqr();F<R.length;F++,V=V.sqr())R[F]!==0&&(O=O.mul(V));return O},t.prototype.iushln=function(D){n(typeof D=="number"&&D>=0);var R=D%26,O=(D-R)/26,F=67108863>>>26-R<<26-R,V;if(R!==0){var G=0;for(V=0;V<this.length;V++){var J=this.words[V]&F,Z=(this.words[V]|0)-J<<R;this.words[V]=Z|G,G=J>>>26-R}G&&(this.words[V]=G,this.length++)}if(O!==0){for(V=this.length-1;V>=0;V--)this.words[V+O]=this.words[V];for(V=0;V<O;V++)this.words[V]=0;this.length+=O}return this.strip()},t.prototype.ishln=function(D){return n(this.negative===0),this.iushln(D)},t.prototype.iushrn=function(D,R,O){n(typeof D=="number"&&D>=0);var F;R?F=(R-R%26)/26:F=0;var V=D%26,G=Math.min((D-V)/26,this.length),J=67108863^67108863>>>V<<V,Z=O;if(F-=G,F=Math.max(0,F),Z){for(var Y=0;Y<G;Y++)Z.words[Y]=this.words[Y];Z.length=G}if(G!==0)if(this.length>G)for(this.length-=G,Y=0;Y<this.length;Y++)this.words[Y]=this.words[Y+G];else this.words[0]=0,this.length=1;var j=0;for(Y=this.length-1;Y>=0&&(j!==0||Y>=F);Y--){var re=this.words[Y]|0;this.words[Y]=j<<26-V|re>>>V,j=re&J}return Z&&j!==0&&(Z.words[Z.length++]=j),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},t.prototype.ishrn=function(D,R,O){return n(this.negative===0),this.iushrn(D,R,O)},t.prototype.shln=function(D){return this.clone().ishln(D)},t.prototype.ushln=function(D){return this.clone().iushln(D)},t.prototype.shrn=function(D){return this.clone().ishrn(D)},t.prototype.ushrn=function(D){return this.clone().iushrn(D)},t.prototype.testn=function(D){n(typeof D=="number"&&D>=0);var R=D%26,O=(D-R)/26,F=1<<R;if(this.length<=O)return!1;var V=this.words[O];return!!(V&F)},t.prototype.imaskn=function(D){n(typeof D=="number"&&D>=0);var R=D%26,O=(D-R)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=O)return this;if(R!==0&&O++,this.length=Math.min(O,this.length),R!==0){var F=67108863^67108863>>>R<<R;this.words[this.length-1]&=F}return this.strip()},t.prototype.maskn=function(D){return this.clone().imaskn(D)},t.prototype.iaddn=function(D){return n(typeof D=="number"),n(D<67108864),D<0?this.isubn(-D):this.negative!==0?this.length===1&&(this.words[0]|0)<D?(this.words[0]=D-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(D),this.negative=1,this):this._iaddn(D)},t.prototype._iaddn=function(D){this.words[0]+=D;for(var R=0;R<this.length&&this.words[R]>=67108864;R++)this.words[R]-=67108864,R===this.length-1?this.words[R+1]=1:this.words[R+1]++;return this.length=Math.max(this.length,R+1),this},t.prototype.isubn=function(D){if(n(typeof D=="number"),n(D<67108864),D<0)return this.iaddn(-D);if(this.negative!==0)return this.negative=0,this.iaddn(D),this.negative=1,this;if(this.words[0]-=D,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var R=0;R<this.length&&this.words[R]<0;R++)this.words[R]+=67108864,this.words[R+1]-=1;return this.strip()},t.prototype.addn=function(D){return this.clone().iaddn(D)},t.prototype.subn=function(D){return this.clone().isubn(D)},t.prototype.iabs=function(){return this.negative=0,this},t.prototype.abs=function(){return this.clone().iabs()},t.prototype._ishlnsubmul=function(D,R,O){var F=D.length+O,V;this._expand(F);var G,J=0;for(V=0;V<D.length;V++){G=(this.words[V+O]|0)+J;var Z=(D.words[V]|0)*R;G-=Z&67108863,J=(G>>26)-(Z/67108864|0),this.words[V+O]=G&67108863}for(;V<this.length-O;V++)G=(this.words[V+O]|0)+J,J=G>>26,this.words[V+O]=G&67108863;if(J===0)return this.strip();for(n(J===-1),J=0,V=0;V<this.length;V++)G=-(this.words[V]|0)+J,J=G>>26,this.words[V]=G&67108863;return this.negative=1,this.strip()},t.prototype._wordDiv=function(D,R){var O=this.length-D.length,F=this.clone(),V=D,G=V.words[V.length-1]|0,J=this._countBits(G);O=26-J,O!==0&&(V=V.ushln(O),F.iushln(O),G=V.words[V.length-1]|0);var Z=F.length-V.length,Y;if(R!=="mod"){Y=new t(null),Y.length=Z+1,Y.words=new Array(Y.length);for(var j=0;j<Y.length;j++)Y.words[j]=0}var re=F.clone()._ishlnsubmul(V,1,Z);re.negative===0&&(F=re,Y&&(Y.words[Z]=1));for(var se=Z-1;se>=0;se--){var oe=(F.words[V.length+se]|0)*67108864+(F.words[V.length+se-1]|0);for(oe=Math.min(oe/G|0,67108863),F._ishlnsubmul(V,oe,se);F.negative!==0;)oe--,F.negative=0,F._ishlnsubmul(V,1,se),F.isZero()||(F.negative^=1);Y&&(Y.words[se]=oe)}return Y&&Y.strip(),F.strip(),R!=="div"&&O!==0&&F.iushrn(O),{div:Y||null,mod:F}},t.prototype.divmod=function(D,R,O){if(n(!D.isZero()),this.isZero())return{div:new t(0),mod:new t(0)};var F,V,G;return this.negative!==0&&D.negative===0?(G=this.neg().divmod(D,R),R!=="mod"&&(F=G.div.neg()),R!=="div"&&(V=G.mod.neg(),O&&V.negative!==0&&V.iadd(D)),{div:F,mod:V}):this.negative===0&&D.negative!==0?(G=this.divmod(D.neg(),R),R!=="mod"&&(F=G.div.neg()),{div:F,mod:G.mod}):(this.negative&D.negative)!==0?(G=this.neg().divmod(D.neg(),R),R!=="div"&&(V=G.mod.neg(),O&&V.negative!==0&&V.isub(D)),{div:G.div,mod:V}):D.length>this.length||this.cmp(D)<0?{div:new t(0),mod:this}:D.length===1?R==="div"?{div:this.divn(D.words[0]),mod:null}:R==="mod"?{div:null,mod:new t(this.modn(D.words[0]))}:{div:this.divn(D.words[0]),mod:new t(this.modn(D.words[0]))}:this._wordDiv(D,R)},t.prototype.div=function(D){return this.divmod(D,"div",!1).div},t.prototype.mod=function(D){return this.divmod(D,"mod",!1).mod},t.prototype.umod=function(D){return this.divmod(D,"mod",!0).mod},t.prototype.divRound=function(D){var R=this.divmod(D);if(R.mod.isZero())return R.div;var O=R.div.negative!==0?R.mod.isub(D):R.mod,F=D.ushrn(1),V=D.andln(1),G=O.cmp(F);return G<0||V===1&&G===0?R.div:R.div.negative!==0?R.div.isubn(1):R.div.iaddn(1)},t.prototype.modn=function(D){n(D<=67108863);for(var R=(1<<26)%D,O=0,F=this.length-1;F>=0;F--)O=(R*O+(this.words[F]|0))%D;return O},t.prototype.idivn=function(D){n(D<=67108863);for(var R=0,O=this.length-1;O>=0;O--){var F=(this.words[O]|0)+R*67108864;this.words[O]=F/D|0,R=F%D}return this.strip()},t.prototype.divn=function(D){return this.clone().idivn(D)},t.prototype.egcd=function(D){n(D.negative===0),n(!D.isZero());var R=this,O=D.clone();R.negative!==0?R=R.umod(D):R=R.clone();for(var F=new t(1),V=new t(0),G=new t(0),J=new t(1),Z=0;R.isEven()&&O.isEven();)R.iushrn(1),O.iushrn(1),++Z;for(var Y=O.clone(),j=R.clone();!R.isZero();){for(var re=0,se=1;(R.words[0]&se)===0&&re<26;++re,se<<=1);if(re>0)for(R.iushrn(re);re-- >0;)(F.isOdd()||V.isOdd())&&(F.iadd(Y),V.isub(j)),F.iushrn(1),V.iushrn(1);for(var oe=0,N=1;(O.words[0]&N)===0&&oe<26;++oe,N<<=1);if(oe>0)for(O.iushrn(oe);oe-- >0;)(G.isOdd()||J.isOdd())&&(G.iadd(Y),J.isub(j)),G.iushrn(1),J.iushrn(1);R.cmp(O)>=0?(R.isub(O),F.isub(G),V.isub(J)):(O.isub(R),G.isub(F),J.isub(V))}return{a:G,b:J,gcd:O.iushln(Z)}},t.prototype._invmp=function(D){n(D.negative===0),n(!D.isZero());var R=this,O=D.clone();R.negative!==0?R=R.umod(D):R=R.clone();for(var F=new t(1),V=new t(0),G=O.clone();R.cmpn(1)>0&&O.cmpn(1)>0;){for(var J=0,Z=1;(R.words[0]&Z)===0&&J<26;++J,Z<<=1);if(J>0)for(R.iushrn(J);J-- >0;)F.isOdd()&&F.iadd(G),F.iushrn(1);for(var Y=0,j=1;(O.words[0]&j)===0&&Y<26;++Y,j<<=1);if(Y>0)for(O.iushrn(Y);Y-- >0;)V.isOdd()&&V.iadd(G),V.iushrn(1);R.cmp(O)>=0?(R.isub(O),F.isub(V)):(O.isub(R),V.isub(F))}var re;return R.cmpn(1)===0?re=F:re=V,re.cmpn(0)<0&&re.iadd(D),re},t.prototype.gcd=function(D){if(this.isZero())return D.abs();if(D.isZero())return this.abs();var R=this.clone(),O=D.clone();R.negative=0,O.negative=0;for(var F=0;R.isEven()&&O.isEven();F++)R.iushrn(1),O.iushrn(1);do{for(;R.isEven();)R.iushrn(1);for(;O.isEven();)O.iushrn(1);var V=R.cmp(O);if(V<0){var G=R;R=O,O=G}else if(V===0||O.cmpn(1)===0)break;R.isub(O)}while(!0);return O.iushln(F)},t.prototype.invm=function(D){return this.egcd(D).a.umod(D)},t.prototype.isEven=function(){return(this.words[0]&1)===0},t.prototype.isOdd=function(){return(this.words[0]&1)===1},t.prototype.andln=function(D){return this.words[0]&D},t.prototype.bincn=function(D){n(typeof D=="number");var R=D%26,O=(D-R)/26,F=1<<R;if(this.length<=O)return this._expand(O+1),this.words[O]|=F,this;for(var V=F,G=O;V!==0&&G<this.length;G++){var J=this.words[G]|0;J+=V,V=J>>>26,J&=67108863,this.words[G]=J}return V!==0&&(this.words[G]=V,this.length++),this},t.prototype.isZero=function(){return this.length===1&&this.words[0]===0},t.prototype.cmpn=function(D){var R=D<0;if(this.negative!==0&&!R)return-1;if(this.negative===0&&R)return 1;this.strip();var O;if(this.length>1)O=1;else{R&&(D=-D),n(D<=67108863,"Number is too big");var F=this.words[0]|0;O=F===D?0:F<D?-1:1}return this.negative!==0?-O|0:O},t.prototype.cmp=function(D){if(this.negative!==0&&D.negative===0)return-1;if(this.negative===0&&D.negative!==0)return 1;var R=this.ucmp(D);return this.negative!==0?-R|0:R},t.prototype.ucmp=function(D){if(this.length>D.length)return 1;if(this.length<D.length)return-1;for(var R=0,O=this.length-1;O>=0;O--){var F=this.words[O]|0,V=D.words[O]|0;if(F!==V){F<V?R=-1:F>V&&(R=1);break}}return R},t.prototype.gtn=function(D){return this.cmpn(D)===1},t.prototype.gt=function(D){return this.cmp(D)===1},t.prototype.gten=function(D){return this.cmpn(D)>=0},t.prototype.gte=function(D){return this.cmp(D)>=0},t.prototype.ltn=function(D){return this.cmpn(D)===-1},t.prototype.lt=function(D){return this.cmp(D)===-1},t.prototype.lten=function(D){return this.cmpn(D)<=0},t.prototype.lte=function(D){return this.cmp(D)<=0},t.prototype.eqn=function(D){return this.cmpn(D)===0},t.prototype.eq=function(D){return this.cmp(D)===0},t.red=function(D){return new P(D)},t.prototype.toRed=function(D){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),D.convertTo(this)._forceRed(D)},t.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},t.prototype._forceRed=function(D){return this.red=D,this},t.prototype.forceRed=function(D){return n(!this.red,"Already a number in reduction context"),this._forceRed(D)},t.prototype.redAdd=function(D){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,D)},t.prototype.redIAdd=function(D){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,D)},t.prototype.redSub=function(D){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,D)},t.prototype.redISub=function(D){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,D)},t.prototype.redShl=function(D){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,D)},t.prototype.redMul=function(D){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.mul(this,D)},t.prototype.redIMul=function(D){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,D),this.red.imul(this,D)},t.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},t.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},t.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},t.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},t.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},t.prototype.redPow=function(D){return n(this.red&&!D.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,D)};var h={k256:null,p224:null,p192:null,p25519:null};function x(I,D){this.name=I,this.p=new t(D,16),this.n=this.p.bitLength(),this.k=new t(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}x.prototype._tmp=function(){var D=new t(null);return D.words=new Array(Math.ceil(this.n/13)),D},x.prototype.ireduce=function(D){var R=D,O;do this.split(R,this.tmp),R=this.imulK(R),R=R.iadd(this.tmp),O=R.bitLength();while(O>this.n);var F=O<this.n?-1:R.ucmp(this.p);return F===0?(R.words[0]=0,R.length=1):F>0?R.isub(this.p):R.strip!==void 0?R.strip():R._strip(),R},x.prototype.split=function(D,R){D.iushrn(this.n,0,R)},x.prototype.imulK=function(D){return D.imul(this.k)};function u(){x.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}r(u,x),u.prototype.split=function(D,R){for(var O=4194303,F=Math.min(D.length,9),V=0;V<F;V++)R.words[V]=D.words[V];if(R.length=F,D.length<=9){D.words[0]=0,D.length=1;return}var G=D.words[9];for(R.words[R.length++]=G&O,V=10;V<D.length;V++){var J=D.words[V]|0;D.words[V-10]=(J&O)<<4|G>>>22,G=J}G>>>=22,D.words[V-10]=G,G===0&&D.length>10?D.length-=10:D.length-=9},u.prototype.imulK=function(D){D.words[D.length]=0,D.words[D.length+1]=0,D.length+=2;for(var R=0,O=0;O<D.length;O++){var F=D.words[O]|0;R+=F*977,D.words[O]=R&67108863,R=F*64+(R/67108864|0)}return D.words[D.length-1]===0&&(D.length--,D.words[D.length-1]===0&&D.length--),D};function L(){x.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}r(L,x);function S(){x.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}r(S,x);function k(){x.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}r(k,x),k.prototype.imulK=function(D){for(var R=0,O=0;O<D.length;O++){var F=(D.words[O]|0)*19+R,V=F&67108863;F>>>=26,D.words[O]=V,R=F}return R!==0&&(D.words[D.length++]=R),D},t._prime=function(D){if(h[D])return h[D];var R;if(D==="k256")R=new u;else if(D==="p224")R=new L;else if(D==="p192")R=new S;else if(D==="p25519")R=new k;else throw new Error("Unknown prime "+D);return h[D]=R,R};function P(I){if(typeof I=="string"){var D=t._prime(I);this.m=D.p,this.prime=D}else n(I.gtn(1),"modulus must be greater than 1"),this.m=I,this.prime=null}P.prototype._verify1=function(D){n(D.negative===0,"red works only with positives"),n(D.red,"red works only with red numbers")},P.prototype._verify2=function(D,R){n((D.negative|R.negative)===0,"red works only with positives"),n(D.red&&D.red===R.red,"red works only with red numbers")},P.prototype.imod=function(D){return this.prime?this.prime.ireduce(D)._forceRed(this):D.umod(this.m)._forceRed(this)},P.prototype.neg=function(D){return D.isZero()?D.clone():this.m.sub(D)._forceRed(this)},P.prototype.add=function(D,R){this._verify2(D,R);var O=D.add(R);return O.cmp(this.m)>=0&&O.isub(this.m),O._forceRed(this)},P.prototype.iadd=function(D,R){this._verify2(D,R);var O=D.iadd(R);return O.cmp(this.m)>=0&&O.isub(this.m),O},P.prototype.sub=function(D,R){this._verify2(D,R);var O=D.sub(R);return O.cmpn(0)<0&&O.iadd(this.m),O._forceRed(this)},P.prototype.isub=function(D,R){this._verify2(D,R);var O=D.isub(R);return O.cmpn(0)<0&&O.iadd(this.m),O},P.prototype.shl=function(D,R){return this._verify1(D),this.imod(D.ushln(R))},P.prototype.imul=function(D,R){return this._verify2(D,R),this.imod(D.imul(R))},P.prototype.mul=function(D,R){return this._verify2(D,R),this.imod(D.mul(R))},P.prototype.isqr=function(D){return this.imul(D,D.clone())},P.prototype.sqr=function(D){return this.mul(D,D)},P.prototype.sqrt=function(D){if(D.isZero())return D.clone();var R=this.m.andln(3);if(n(R%2===1),R===3){var O=this.m.add(new t(1)).iushrn(2);return this.pow(D,O)}for(var F=this.m.subn(1),V=0;!F.isZero()&&F.andln(1)===0;)V++,F.iushrn(1);n(!F.isZero());var G=new t(1).toRed(this),J=G.redNeg(),Z=this.m.subn(1).iushrn(1),Y=this.m.bitLength();for(Y=new t(2*Y*Y).toRed(this);this.pow(Y,Z).cmp(J)!==0;)Y.redIAdd(J);for(var j=this.pow(Y,F),re=this.pow(D,F.addn(1).iushrn(1)),se=this.pow(D,F),oe=V;se.cmp(G)!==0;){for(var N=se,U=0;N.cmp(G)!==0;U++)N=N.redSqr();n(U<oe);var q=this.pow(j,new t(1).iushln(oe-U-1));re=re.redMul(q),j=q.redSqr(),se=se.redMul(j),oe=U}return re},P.prototype.invm=function(D){var R=D._invmp(this.m);return R.negative!==0?(R.negative=0,this.imod(R).redNeg()):this.imod(R)},P.prototype.pow=function(D,R){if(R.isZero())return new t(1).toRed(this);if(R.cmpn(1)===0)return D.clone();var O=4,F=new Array(1<<O);F[0]=new t(1).toRed(this),F[1]=D;for(var V=2;V<F.length;V++)F[V]=this.mul(F[V-1],D);var G=F[0],J=0,Z=0,Y=R.bitLength()%26;for(Y===0&&(Y=26),V=R.length-1;V>=0;V--){for(var j=R.words[V],re=Y-1;re>=0;re--){var se=j>>re&1;if(G!==F[0]&&(G=this.sqr(G)),se===0&&J===0){Z=0;continue}J<<=1,J|=se,Z++,!(Z!==O&&(V!==0||re!==0))&&(G=this.mul(G,F[J]),Z=0,J=0)}Y=26}return G},P.prototype.convertTo=function(D){var R=D.umod(this.m);return R===D?R.clone():R},P.prototype.convertFrom=function(D){var R=D.clone();return R.red=null,R},t.mont=function(D){return new z(D)};function z(I){P.call(this,I),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new t(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}r(z,P),z.prototype.convertTo=function(D){return this.imod(D.ushln(this.shift))},z.prototype.convertFrom=function(D){var R=this.imod(D.mul(this.rinv));return R.red=null,R},z.prototype.imul=function(D,R){if(D.isZero()||R.isZero())return D.words[0]=0,D.length=1,D;var O=D.imul(R),F=O.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),V=O.isub(F).iushrn(this.shift),G=V;return V.cmp(this.m)>=0?G=V.isub(this.m):V.cmpn(0)<0&&(G=V.iadd(this.m)),G._forceRed(this)},z.prototype.mul=function(D,R){if(D.isZero()||R.isZero())return new t(0)._forceRed(this);var O=D.mul(R),F=O.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),V=O.isub(F).iushrn(this.shift),G=V;return V.cmp(this.m)>=0?G=V.isub(this.m):V.cmpn(0)<0&&(G=V.iadd(this.m)),G._forceRed(this)},z.prototype.invm=function(D){var R=this.imod(D._invmp(this.m).mul(this.r2));return R._forceRed(this)}})(typeof M>"u"||M,this)},{buffer:2}],34:[function(v,M,T){M.exports=e;function e(a){var n,r,t,f=a.length,o=0;for(n=0;n<f;++n)o+=a[n].length;var i=new Array(o),g=0;for(n=0;n<f;++n){var p=a[n],y=p.length;for(r=0;r<y;++r){var c=i[g++]=new Array(y-1),b=0;for(t=0;t<y;++t)t!==r&&(c[b++]=p[t]);if(r&1){var l=c[1];c[1]=c[0],c[0]=l}}}return i}},{}],35:[function(v,M,T){M.exports=y;var e=v("typedarray-pool"),a=v("./lib/sweep"),n=v("./lib/intersect");function r(c,b){for(var l=0;l<c;++l)if(!(b[l]<=b[l+c]))return!0;return!1}function t(c,b,l,_){for(var s=0,A=0,m=0,h=c.length;m<h;++m){var x=c[m];if(!r(b,x)){for(var u=0;u<2*b;++u)l[s++]=x[u];_[A++]=m}}return A}function f(c,b,l,_){var s=c.length,A=b.length;if(!(s<=0||A<=0)){var m=c[0].length>>>1;if(!(m<=0)){var h,x=e.mallocDouble(2*m*s),u=e.mallocInt32(s);if(s=t(c,m,x,u),s>0){if(m===1&&_)a.init(s),h=a.sweepComplete(m,l,0,s,x,u,0,s,x,u);else{var L=e.mallocDouble(2*m*A),S=e.mallocInt32(A);A=t(b,m,L,S),A>0&&(a.init(s+A),m===1?h=a.sweepBipartite(m,l,0,s,x,u,0,A,L,S):h=n(m,l,_,s,x,u,A,L,S),e.free(L),e.free(S))}e.free(x),e.free(u)}return h}}}var o;function i(c,b){o.push([c,b])}function g(c){return o=[],f(c,c,i,!0),o}function p(c,b){return o=[],f(c,b,i,!1),o}function y(c,b,l){switch(arguments.length){case 1:return g(c);case 2:return typeof b=="function"?f(c,c,b,!0):p(c,b);case 3:return f(c,b,l,!1);default:throw new Error("box-intersect: Invalid arguments")}}},{"./lib/intersect":37,"./lib/sweep":41,"typedarray-pool":308}],36:[function(v,M,T){function e(){function r(o,i,g,p,y,c,b,l,_,s,A){for(var m=2*o,h=p,x=m*p;h<y;++h,x+=m){var u=c[i+x],L=c[i+x+o],S=b[h];e:for(var k=l,P=m*l;k<_;++k,P+=m){var z=s[i+P],I=s[i+P+o],D=A[k];if(!(I<u||L<z)){for(var R=i+1;R<o;++R){var O=c[R+x],F=c[R+o+x],V=s[R+P],G=s[R+o+P];if(F<V||G<O)continue e}var J=g(S,D);if(J!==void 0)return J}}}}function t(o,i,g,p,y,c,b,l,_,s,A){for(var m=2*o,h=l,x=m*l;h<_;++h,x+=m){var u=s[i+x],L=s[i+x+o],S=A[h];e:for(var k=p,P=m*p;k<y;++k,P+=m){var z=c[i+P],I=c[i+P+o],D=b[k];if(!(L<z||I<u)){for(var R=i+1;R<o;++R){var O=c[R+P],F=c[R+o+P],V=s[R+x],G=s[R+o+x];if(F<V||G<O)continue e}var J=g(D,S);if(J!==void 0)return J}}}}function f(o,i,g,p,y,c,b,l,_,s,A){return y-p>_-l?r(o,i,g,p,y,c,b,l,_,s,A):t(o,i,g,p,y,c,b,l,_,s,A)}return f}function a(){function r(g,p,y,c,b,l,_,s,A,m,h){for(var x=2*g,u=c,L=x*c;u<b;++u,L+=x){var S=l[p+L],k=l[p+L+g],P=_[u];e:for(var z=s,I=x*s;z<A;++z,I+=x){var D=m[p+I],R=h[z];if(!(D<=S||k<D)){for(var O=p+1;O<g;++O){var F=l[O+L],V=l[O+g+L],G=m[O+I],J=m[O+g+I];if(V<G||J<F)continue e}var Z=y(R,P);if(Z!==void 0)return Z}}}}function t(g,p,y,c,b,l,_,s,A,m,h){for(var x=2*g,u=c,L=x*c;u<b;++u,L+=x){var S=l[p+L],k=l[p+L+g],P=_[u];e:for(var z=s,I=x*s;z<A;++z,I+=x){var D=m[p+I],R=h[z];if(!(D<S||k<D)){for(var O=p+1;O<g;++O){var F=l[O+L],V=l[O+g+L],G=m[O+I],J=m[O+g+I];if(V<G||J<F)continue e}var Z=y(P,R);if(Z!==void 0)return Z}}}}function f(g,p,y,c,b,l,_,s,A,m,h){for(var x=2*g,u=s,L=x*s;u<A;++u,L+=x){var S=m[p+L],k=h[u];e:for(var P=c,z=x*c;P<b;++P,z+=x){var I=l[p+z],D=l[p+z+g],R=_[P];if(!(S<=I||D<S)){for(var O=p+1;O<g;++O){var F=l[O+z],V=l[O+g+z],G=m[O+L],J=m[O+g+L];if(V<G||J<F)continue e}var Z=y(k,R);if(Z!==void 0)return Z}}}}function o(g,p,y,c,b,l,_,s,A,m,h){for(var x=2*g,u=s,L=x*s;u<A;++u,L+=x){var S=m[p+L],k=h[u];e:for(var P=c,z=x*c;P<b;++P,z+=x){var I=l[p+z],D=l[p+z+g],R=_[P];if(!(S<I||D<S)){for(var O=p+1;O<g;++O){var F=l[O+z],V=l[O+g+z],G=m[O+L],J=m[O+g+L];if(V<G||J<F)continue e}var Z=y(R,k);if(Z!==void 0)return Z}}}}function i(g,p,y,c,b,l,_,s,A,m,h,x){return l-b>m-A?c?r(g,p,y,b,l,_,s,A,m,h,x):t(g,p,y,b,l,_,s,A,m,h,x):c?f(g,p,y,b,l,_,s,A,m,h,x):o(g,p,y,b,l,_,s,A,m,h,x)}return i}function n(r){return r?e():a()}T.partial=n(!1),T.full=n(!0)},{}],37:[function(v,M,T){M.exports=I;var e=v("typedarray-pool"),a=v("bit-twiddle"),n=v("./brute"),r=n.partial,t=n.full,f=v("./sweep"),o=v("./median"),i=v("./partition"),g=128,p=1<<22,y=1<<22,c=i("!(lo>=p0)&&!(p1>=hi)"),b=i("lo===p0"),l=i("lo<p0"),_=i("hi<=p0"),s=i("lo<=p0&&p0<=hi"),A=i("lo<p0&&p0<=hi"),m=6,h=2,x=1024,u=e.mallocInt32(x),L=e.mallocDouble(x);function S(D,R){var O=8*a.log2(R+1)*(D+1)|0,F=a.nextPow2(m*O);u.length<F&&(e.free(u),u=e.mallocInt32(F));var V=a.nextPow2(h*O);L.length<V&&(e.free(L),L=e.mallocDouble(V))}function k(D,R,O,F,V,G,J,Z,Y){var j=m*D;u[j]=R,u[j+1]=O,u[j+2]=F,u[j+3]=V,u[j+4]=G,u[j+5]=J;var re=h*D;L[re]=Z,L[re+1]=Y}function P(D,R,O,F,V,G,J,Z,Y,j,re){var se=2*D,oe=Y*se,N=j[oe+R];e:for(var U=V,q=V*se;U<G;++U,q+=se){var Q=J[q+R],W=J[q+R+D];if(!(N<Q||W<N)&&!(F&&N===Q)){for(var X=Z[U],ee=R+1;ee<D;++ee){var Q=J[q+ee],W=J[q+ee+D],te=j[oe+ee],ie=j[oe+ee+D];if(W<te||ie<Q)continue e}var le;if(F?le=O(re,X):le=O(X,re),le!==void 0)return le}}}function z(D,R,O,F,V,G,J,Z,Y,j){var re=2*D,se=Z*re,oe=Y[se+R];e:for(var N=F,U=F*re;N<V;++N,U+=re){var q=J[N];if(q!==j){var Q=G[U+R],W=G[U+R+D];if(!(oe<Q||W<oe)){for(var X=R+1;X<D;++X){var Q=G[U+X],W=G[U+X+D],ee=Y[se+X],te=Y[se+X+D];if(W<ee||te<Q)continue e}var ie=O(q,j);if(ie!==void 0)return ie}}}}function I(D,R,O,F,V,G,J,Z,Y){S(D,F+J);var j=0,re=2*D,se;for(k(j++,0,0,F,0,J,O?16:0,-1/0,1/0),O||k(j++,0,0,J,0,F,1,-1/0,1/0);j>0;){j-=1;var oe=j*m,N=u[oe],U=u[oe+1],q=u[oe+2],Q=u[oe+3],W=u[oe+4],X=u[oe+5],ee=j*h,te=L[ee],ie=L[ee+1],le=X&1,ge=!!(X&16),fe=V,pe=G,ye=Z,Te=Y;if(le&&(fe=Z,pe=Y,ye=V,Te=G),!(X&2&&(q=l(D,N,U,q,fe,pe,ie),U>=q))&&!(X&4&&(U=_(D,N,U,q,fe,pe,te),U>=q))){var _e=q-U,De=W-Q;if(ge){if(D*_e*(_e+De)<y){if(se=f.scanComplete(D,N,R,U,q,fe,pe,Q,W,ye,Te),se!==void 0)return se;continue}}else if(D*Math.min(_e,De)<g){if(se=r(D,N,R,le,U,q,fe,pe,Q,W,ye,Te),se!==void 0)return se;continue}else if(D*_e*De<p){if(se=f.scanBipartite(D,N,R,le,U,q,fe,pe,Q,W,ye,Te),se!==void 0)return se;continue}var Be=c(D,N,U,q,fe,pe,te,ie);if(U<Be)if(D*(Be-U)<g){if(se=t(D,N+1,R,U,Be,fe,pe,Q,W,ye,Te),se!==void 0)return se}else if(N===D-2){if(le?se=f.sweepBipartite(D,R,Q,W,ye,Te,U,Be,fe,pe):se=f.sweepBipartite(D,R,U,Be,fe,pe,Q,W,ye,Te),se!==void 0)return se}else k(j++,N+1,U,Be,Q,W,le,-1/0,1/0),k(j++,N+1,Q,W,U,Be,le^1,-1/0,1/0);if(Be<q){var Ue=o(D,N,Q,W,ye,Te),xe=ye[re*Ue+N],Pe=b(D,N,Ue,W,ye,Te,xe);if(Pe<W&&k(j++,N,Be,q,Pe,W,(le|4)+(ge?16:0),xe,ie),Q<Ue&&k(j++,N,Be,q,Q,Ue,(le|2)+(ge?16:0),te,xe),Ue+1===Pe){if(ge?se=z(D,N,R,Be,q,fe,pe,Ue,ye,Te[Ue]):se=P(D,N,R,le,Be,q,fe,pe,Ue,ye,Te[Ue]),se!==void 0)return se}else if(Ue<Pe){var Ve;if(ge){if(Ve=s(D,N,Be,q,fe,pe,xe),Be<Ve){var Qe=b(D,N,Be,Ve,fe,pe,xe);if(N===D-2){if(Be<Qe&&(se=f.sweepComplete(D,R,Be,Qe,fe,pe,Ue,Pe,ye,Te),se!==void 0)||Qe<Ve&&(se=f.sweepBipartite(D,R,Qe,Ve,fe,pe,Ue,Pe,ye,Te),se!==void 0))return se}else Be<Qe&&k(j++,N+1,Be,Qe,Ue,Pe,16,-1/0,1/0),Qe<Ve&&(k(j++,N+1,Qe,Ve,Ue,Pe,0,-1/0,1/0),k(j++,N+1,Ue,Pe,Qe,Ve,1,-1/0,1/0))}}else le?Ve=A(D,N,Be,q,fe,pe,xe):Ve=s(D,N,Be,q,fe,pe,xe),Be<Ve&&(N===D-2?le?se=f.sweepBipartite(D,R,Ue,Pe,ye,Te,Be,Ve,fe,pe):se=f.sweepBipartite(D,R,Be,Ve,fe,pe,Ue,Pe,ye,Te):(k(j++,N+1,Be,Ve,Ue,Pe,le,-1/0,1/0),k(j++,N+1,Ue,Pe,Be,Ve,le^1,-1/0,1/0)))}}}}}},{"./brute":36,"./median":38,"./partition":39,"./sweep":41,"bit-twiddle":32,"typedarray-pool":308}],38:[function(v,M,T){M.exports=t;var e=v("./partition"),a=e("lo<p0"),n=8;function r(f,o,i,g,p,y){for(var c=2*f,b=c*(i+1)+o,l=i+1;l<g;++l,b+=c)for(var _=p[b],s=l,A=c*(l-1);s>i&&p[A+o]>_;--s,A-=c){for(var m=A,h=A+c,x=0;x<c;++x,++m,++h){var u=p[m];p[m]=p[h],p[h]=u}var L=y[s];y[s]=y[s-1],y[s-1]=L}}function t(f,o,i,g,p,y){if(g<=i+1)return i;for(var c=i,b=g,l=g+i>>>1,_=2*f,s=l,A=p[_*l+o];c<b;){if(b-c<n){r(f,o,c,b,p,y),A=p[_*l+o];break}var m=b-c,h=Math.random()*m+c|0,x=p[_*h+o],u=Math.random()*m+c|0,L=p[_*u+o],S=Math.random()*m+c|0,k=p[_*S+o];x<=L?k>=L?(s=u,A=L):x>=k?(s=h,A=x):(s=S,A=k):L>=k?(s=u,A=L):k>=x?(s=h,A=x):(s=S,A=k);for(var I=_*(b-1),D=_*s,P=0;P<_;++P,++I,++D){var z=p[I];p[I]=p[D],p[D]=z}var R=y[b-1];y[b-1]=y[s],y[s]=R,s=a(f,o,c,b-1,p,y,A);for(var I=_*(b-1),D=_*s,P=0;P<_;++P,++I,++D){var z=p[I];p[I]=p[D],p[D]=z}var R=y[b-1];if(y[b-1]=y[s],y[s]=R,l<s){for(b=s-1;c<b&&p[_*(b-1)+o]===A;)b-=1;b+=1}else if(s<l)for(c=s+1;c<b&&p[_*c+o]===A;)c+=1;else break}return a(f,o,i,l,p,y,p[_*l+o])}},{"./partition":39}],39:[function(v,M,T){M.exports=a;var e={"lo===p0":n,"lo<p0":r,"lo<=p0":t,"hi<=p0":f,"lo<p0&&p0<=hi":i,"lo<=p0&&p0<=hi":o,"!(lo>=p0)&&!(p1>=hi)":g};function a(p){return e[p]}function n(p,y,c,b,l,_,s){for(var A=2*p,m=A*c,h=m,x=c,u=y,L=c;b>L;++L,m+=A){var S=l[m+u];if(S===s)if(x===L)x+=1,h+=A;else{for(var k=0;A>k;++k){var P=l[m+k];l[m+k]=l[h],l[h++]=P}var z=_[L];_[L]=_[x],_[x++]=z}}return x}function r(p,y,c,b,l,_,s){for(var A=2*p,m=A*c,h=m,x=c,u=y,L=c;b>L;++L,m+=A){var S=l[m+u];if(S<s)if(x===L)x+=1,h+=A;else{for(var k=0;A>k;++k){var P=l[m+k];l[m+k]=l[h],l[h++]=P}var z=_[L];_[L]=_[x],_[x++]=z}}return x}function t(p,y,c,b,l,_,s){for(var A=2*p,m=A*c,h=m,x=c,u=p+y,L=c;b>L;++L,m+=A){var S=l[m+u];if(S<=s)if(x===L)x+=1,h+=A;else{for(var k=0;A>k;++k){var P=l[m+k];l[m+k]=l[h],l[h++]=P}var z=_[L];_[L]=_[x],_[x++]=z}}return x}function f(p,y,c,b,l,_,s){for(var A=2*p,m=A*c,h=m,x=c,u=p+y,L=c;b>L;++L,m+=A){var S=l[m+u];if(S<=s)if(x===L)x+=1,h+=A;else{for(var k=0;A>k;++k){var P=l[m+k];l[m+k]=l[h],l[h++]=P}var z=_[L];_[L]=_[x],_[x++]=z}}return x}function o(p,y,c,b,l,_,s){for(var A=2*p,m=A*c,h=m,x=c,u=y,L=p+y,S=c;b>S;++S,m+=A){var k=l[m+u],P=l[m+L];if(k<=s&&s<=P)if(x===S)x+=1,h+=A;else{for(var z=0;A>z;++z){var I=l[m+z];l[m+z]=l[h],l[h++]=I}var D=_[S];_[S]=_[x],_[x++]=D}}return x}function i(p,y,c,b,l,_,s){for(var A=2*p,m=A*c,h=m,x=c,u=y,L=p+y,S=c;b>S;++S,m+=A){var k=l[m+u],P=l[m+L];if(k<s&&s<=P)if(x===S)x+=1,h+=A;else{for(var z=0;A>z;++z){var I=l[m+z];l[m+z]=l[h],l[h++]=I}var D=_[S];_[S]=_[x],_[x++]=D}}return x}function g(p,y,c,b,l,_,s,A){for(var m=2*p,h=m*c,x=h,u=c,L=y,S=p+y,k=c;b>k;++k,h+=m){var P=l[h+L],z=l[h+S];if(!(P>=s)&&!(A>=z))if(u===k)u+=1,x+=m;else{for(var I=0;m>I;++I){var D=l[h+I];l[h+I]=l[x],l[x++]=D}var R=_[k];_[k]=_[u],_[u++]=R}}return u}},{}],40:[function(v,M,T){M.exports=a;var e=32;function a(y,c){c<=4*e?n(0,c-1,y):p(0,c-1,y)}function n(y,c,b){for(var l=2*(y+1),_=y+1;_<=c;++_){for(var s=b[l++],A=b[l++],m=_,h=l-2;m-- >y;){var x=b[h-2],u=b[h-1];if(x<s)break;if(x===s&&u<A)break;b[h]=x,b[h+1]=u,h-=2}b[h]=s,b[h+1]=A}}function r(y,c,b){y*=2,c*=2;var l=b[y],_=b[y+1];b[y]=b[c],b[y+1]=b[c+1],b[c]=l,b[c+1]=_}function t(y,c,b){y*=2,c*=2,b[y]=b[c],b[y+1]=b[c+1]}function f(y,c,b,l){y*=2,c*=2,b*=2;var _=l[y],s=l[y+1];l[y]=l[c],l[y+1]=l[c+1],l[c]=l[b],l[c+1]=l[b+1],l[b]=_,l[b+1]=s}function o(y,c,b,l,_){y*=2,c*=2,_[y]=_[c],_[c]=b,_[y+1]=_[c+1],_[c+1]=l}function i(y,c,b){y*=2,c*=2;var l=b[y],_=b[c];return l<_?!1:l===_?b[y+1]>b[c+1]:!0}function g(y,c,b,l){y*=2;var _=l[y];return _<c?!0:_===c?l[y+1]<b:!1}function p(y,c,b){var l=(c-y+1)/6|0,_=y+l,s=c-l,A=y+c>>1,m=A-l,h=A+l,x=_,u=m,L=A,S=h,k=s,P=y+1,z=c-1,I=0;i(x,u,b)&&(I=x,x=u,u=I),i(S,k,b)&&(I=S,S=k,k=I),i(x,L,b)&&(I=x,x=L,L=I),i(u,L,b)&&(I=u,u=L,L=I),i(x,S,b)&&(I=x,x=S,S=I),i(L,S,b)&&(I=L,L=S,S=I),i(u,k,b)&&(I=u,u=k,k=I),i(u,L,b)&&(I=u,u=L,L=I),i(S,k,b)&&(I=S,S=k,k=I);for(var D=b[2*u],R=b[2*u+1],O=b[2*S],F=b[2*S+1],V=2*x,G=2*L,J=2*k,Z=2*_,Y=2*A,j=2*s,re=0;re<2;++re){var se=b[V+re],oe=b[G+re],N=b[J+re];b[Z+re]=se,b[Y+re]=oe,b[j+re]=N}t(m,y,b),t(h,c,b);for(var U=P;U<=z;++U)if(g(U,D,R,b))U!==P&&r(U,P,b),++P;else if(!g(U,O,F,b))for(;;)if(g(z,O,F,b)){g(z,D,R,b)?(f(U,P,z,b),++P,--z):(r(U,z,b),--z);break}else{if(--z<U)break;continue}o(y,P-1,D,R,b),o(c,z+1,O,F,b),P-2-y<=e?n(y,P-2,b):p(y,P-2,b),c-(z+2)<=e?n(z+2,c,b):p(z+2,c,b),z-P<=e?n(P,z,b):p(P,z,b)}},{}],41:[function(v,M,T){M.exports={init:b,sweepBipartite:s,sweepComplete:A,scanBipartite:m,scanComplete:h};var e=v("typedarray-pool"),a=v("bit-twiddle"),n=v("./sort"),r=1<<28,t=1024,f=e.mallocInt32(t),o=e.mallocInt32(t),i=e.mallocInt32(t),g=e.mallocInt32(t),p=e.mallocInt32(t),y=e.mallocInt32(t),c=e.mallocDouble(t*8);function b(x){var u=a.nextPow2(x);f.length<u&&(e.free(f),f=e.mallocInt32(u)),o.length<u&&(e.free(o),o=e.mallocInt32(u)),i.length<u&&(e.free(i),i=e.mallocInt32(u)),g.length<u&&(e.free(g),g=e.mallocInt32(u)),p.length<u&&(e.free(p),p=e.mallocInt32(u)),y.length<u&&(e.free(y),y=e.mallocInt32(u));var L=8*u;c.length<L&&(e.free(c),c=e.mallocDouble(L))}function l(x,u,L,S){var k=u[S],P=x[L-1];x[k]=P,u[P]=k}function _(x,u,L,S){x[L]=S,u[S]=L}function s(x,u,L,S,k,P,z,I,D,R){for(var O=0,F=2*x,V=x-1,G=F-1,J=L;J<S;++J){var Z=P[J],Y=F*J;c[O++]=k[Y+V],c[O++]=-(Z+1),c[O++]=k[Y+G],c[O++]=Z}for(var J=z;J<I;++J){var Z=R[J]+r,j=F*J;c[O++]=D[j+V],c[O++]=-Z,c[O++]=D[j+G],c[O++]=Z}var re=O>>>1;n(c,re);for(var se=0,oe=0,J=0;J<re;++J){var N=c[2*J+1]|0;if(N>=r)N=N-r|0,l(i,g,oe--,N);else if(N>=0)l(f,o,se--,N);else if(N<=-r){N=-N-r|0;for(var U=0;U<se;++U){var q=u(f[U],N);if(q!==void 0)return q}_(i,g,oe++,N)}else{N=-N-1|0;for(var U=0;U<oe;++U){var q=u(N,i[U]);if(q!==void 0)return q}_(f,o,se++,N)}}}function A(x,u,L,S,k,P,z,I,D,R){for(var O=0,F=2*x,V=x-1,G=F-1,J=L;J<S;++J){var Z=P[J]+1<<1,Y=F*J;c[O++]=k[Y+V],c[O++]=-Z,c[O++]=k[Y+G],c[O++]=Z}for(var J=z;J<I;++J){var Z=R[J]+1<<1,j=F*J;c[O++]=D[j+V],c[O++]=-Z|1,c[O++]=D[j+G],c[O++]=Z|1}var re=O>>>1;n(c,re);for(var se=0,oe=0,N=0,J=0;J<re;++J){var U=c[2*J+1]|0,q=U&1;if(J<re-1&&U>>1===c[2*J+3]>>1&&(q=2,J+=1),U<0){for(var Q=-(U>>1)-1,W=0;W<N;++W){var X=u(p[W],Q);if(X!==void 0)return X}if(q!==0)for(var W=0;W<se;++W){var X=u(f[W],Q);if(X!==void 0)return X}if(q!==1)for(var W=0;W<oe;++W){var X=u(i[W],Q);if(X!==void 0)return X}q===0?_(f,o,se++,Q):q===1?_(i,g,oe++,Q):q===2&&_(p,y,N++,Q)}else{var Q=(U>>1)-1;q===0?l(f,o,se--,Q):q===1?l(i,g,oe--,Q):q===2&&l(p,y,N--,Q)}}}function m(x,u,L,S,k,P,z,I,D,R,O,F){var V=0,G=2*x,J=u,Z=u+x,Y=1,j=1;S?j=r:Y=r;for(var re=k;re<P;++re){var se=re+Y,oe=G*re;c[V++]=z[oe+J],c[V++]=-se,c[V++]=z[oe+Z],c[V++]=se}for(var re=D;re<R;++re){var se=re+j,N=G*re;c[V++]=O[N+J],c[V++]=-se}var U=V>>>1;n(c,U);for(var q=0,re=0;re<U;++re){var Q=c[2*re+1]|0;if(Q<0){var se=-Q,W=!1;if(se>=r?(W=!S,se-=r):(W=!!S,se-=1),W)_(f,o,q++,se);else{var X=F[se],ee=G*se,te=O[ee+u+1],ie=O[ee+u+1+x];e:for(var le=0;le<q;++le){var ge=f[le],fe=G*ge;if(!(ie<z[fe+u+1]||z[fe+u+1+x]<te)){for(var pe=u+2;pe<x;++pe)if(O[ee+pe+x]<z[fe+pe]||z[fe+pe+x]<O[ee+pe])continue e;var ye=I[ge],Te;if(S?Te=L(X,ye):Te=L(ye,X),Te!==void 0)return Te}}}}else l(f,o,q--,Q-Y)}}function h(x,u,L,S,k,P,z,I,D,R,O){for(var F=0,V=2*x,G=u,J=u+x,Z=S;Z<k;++Z){var Y=Z+r,j=V*Z;c[F++]=P[j+G],c[F++]=-Y,c[F++]=P[j+J],c[F++]=Y}for(var Z=I;Z<D;++Z){var Y=Z+1,re=V*Z;c[F++]=R[re+G],c[F++]=-Y}var se=F>>>1;n(c,se);for(var oe=0,Z=0;Z<se;++Z){var N=c[2*Z+1]|0;if(N<0){var Y=-N;if(Y>=r)f[oe++]=Y-r;else{Y-=1;var U=O[Y],q=V*Y,Q=R[q+u+1],W=R[q+u+1+x];e:for(var X=0;X<oe;++X){var ee=f[X],te=z[ee];if(te===U)break;var ie=V*ee;if(!(W<P[ie+u+1]||P[ie+u+1+x]<Q)){for(var le=u+2;le<x;++le)if(R[q+le+x]<P[ie+le]||P[ie+le+x]<R[q+le])continue e;var ge=L(te,U);if(ge!==void 0)return ge}}}}else{for(var Y=N-r,X=oe-1;X>=0;--X)if(f[X]===Y){for(var le=X+1;le<oe;++le)f[le-1]=f[le];break}--oe}}}},{"./sort":40,"bit-twiddle":32,"typedarray-pool":308}],42:[function(v,M,T){var e=v("./lib/monotone"),a=v("./lib/triangulation"),n=v("./lib/delaunay"),r=v("./lib/filter");M.exports=g;function t(p){return[Math.min(p[0],p[1]),Math.max(p[0],p[1])]}function f(p,y){return p[0]-y[0]||p[1]-y[1]}function o(p){return p.map(t).sort(f)}function i(p,y,c){return y in p?p[y]:c}function g(p,y,c){Array.isArray(y)?(c=c||{},y=y||[]):(c=y||{},y=[]);var b=!!i(c,"delaunay",!0),l=!!i(c,"interior",!0),_=!!i(c,"exterior",!0),s=!!i(c,"infinity",!1);if(!l&&!_||p.length===0)return[];var A=e(p,y);if(b||l!==_||s){for(var m=a(p.length,o(y)),h=0;h<A.length;++h){var x=A[h];m.addTriangle(x[0],x[1],x[2])}return b&&n(p,m),_?l?s?r(m,0,s):m.cells():r(m,1,s):r(m,-1)}else return A}},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(v,M,T){var e=v("robust-in-sphere")[4];v("binary-search-bounds"),M.exports=n;function a(r,t,f,o,i,g){var p=t.opposite(o,i);if(!(p<0)){if(i<o){var y=o;o=i,i=y,y=g,g=p,p=y}t.isConstraint(o,i)||e(r[o],r[i],r[g],r[p])<0&&f.push(o,i)}}function n(r,t){for(var f=[],o=r.length,i=t.stars,g=0;g<o;++g)for(var p=i[g],y=1;y<p.length;y+=2){var c=p[y];if(!(c<g)&&!t.isConstraint(g,c)){for(var b=p[y-1],l=-1,_=1;_<p.length;_+=2)if(p[_-1]===c){l=p[_];break}l<0||e(r[g],r[c],r[b],r[l])<0&&f.push(g,c)}}for(;f.length>0;){for(var c=f.pop(),g=f.pop(),b=-1,l=-1,p=i[g],s=1;s<p.length;s+=2){var A=p[s-1],m=p[s];A===c?l=m:m===c&&(b=A)}b<0||l<0||e(r[g],r[c],r[b],r[l])>=0||(t.flip(g,c),a(r,t,f,b,g,l),a(r,t,f,g,l,b),a(r,t,f,l,c,b),a(r,t,f,c,b,l))}}},{"binary-search-bounds":31,"robust-in-sphere":282}],44:[function(v,M,T){var e=v("binary-search-bounds");M.exports=o;function a(i,g,p,y,c,b,l){this.cells=i,this.neighbor=g,this.flags=y,this.constraint=p,this.active=c,this.next=b,this.boundary=l}var n=a.prototype;function r(i,g){return i[0]-g[0]||i[1]-g[1]||i[2]-g[2]}n.locate=function(){var i=[0,0,0];return function(g,p,y){var c=g,b=p,l=y;return p<y?p<g&&(c=p,b=y,l=g):y<g&&(c=y,b=g,l=p),c<0?-1:(i[0]=c,i[1]=b,i[2]=l,e.eq(this.cells,i,r))}}();function t(i,g){for(var p=i.cells(),y=p.length,c=0;c<y;++c){var b=p[c],l=b[0],_=b[1],s=b[2];_<s?_<l&&(b[0]=_,b[1]=s,b[2]=l):s<l&&(b[0]=s,b[1]=l,b[2]=_)}p.sort(r);for(var A=new Array(y),c=0;c<A.length;++c)A[c]=0;var m=[],h=[],x=new Array(3*y),u=new Array(3*y),L=null;g&&(L=[]);for(var S=new a(p,x,u,A,m,h,L),c=0;c<y;++c)for(var b=p[c],k=0;k<3;++k){var l=b[k],_=b[(k+1)%3],P=x[3*c+k]=S.locate(_,l,i.opposite(_,l)),z=u[3*c+k]=i.isConstraint(l,_);P<0&&(z?h.push(c):(m.push(c),A[c]=1),g&&L.push([_,l,-1]))}return S}function f(i,g,p){for(var y=0,c=0;c<i.length;++c)g[c]===p&&(i[y++]=i[c]);return i.length=y,i}function o(i,g,p){var y=t(i,p);if(g===0)return p?y.cells.concat(y.boundary):y.cells;for(var c=1,b=y.active,l=y.next,_=y.flags,s=y.cells,A=y.constraint,m=y.neighbor;b.length>0||l.length>0;){for(;b.length>0;){var h=b.pop();if(_[h]!==-c){_[h]=c,s[h];for(var x=0;x<3;++x){var u=m[3*h+x];u>=0&&_[u]===0&&(A[3*h+x]?l.push(u):(b.push(u),_[u]=c))}}}var L=l;l=b,b=L,l.length=0,c=-c}var S=f(s,_,g);return p?S.concat(y.boundary):S}},{"binary-search-bounds":31}],45:[function(v,M,T){var e=v("binary-search-bounds"),a=v("robust-orientation")[3],n=0,r=1,t=2;M.exports=l;function f(_,s,A,m,h){this.a=_,this.b=s,this.idx=A,this.lowerIds=m,this.upperIds=h}function o(_,s,A,m){this.a=_,this.b=s,this.type=A,this.idx=m}function i(_,s){var A=_.a[0]-s.a[0]||_.a[1]-s.a[1]||_.type-s.type;return A||_.type!==n&&(A=a(_.a,_.b,s.b),A)?A:_.idx-s.idx}function g(_,s){return a(_.a,_.b,s)}function p(_,s,A,m,h){for(var x=e.lt(s,m,g),u=e.gt(s,m,g),L=x;L<u;++L){for(var S=s[L],k=S.lowerIds,z=k.length;z>1&&a(A[k[z-2]],A[k[z-1]],m)>0;)_.push([k[z-1],k[z-2],h]),z-=1;k.length=z,k.push(h);for(var P=S.upperIds,z=P.length;z>1&&a(A[P[z-2]],A[P[z-1]],m)<0;)_.push([P[z-2],P[z-1],h]),z-=1;P.length=z,P.push(h)}}function y(_,s){var A;return _.a[0]<s.a[0]?A=a(_.a,_.b,s.a):A=a(s.b,s.a,_.a),A||(s.b[0]<_.b[0]?A=a(_.a,_.b,s.b):A=a(s.b,s.a,_.b),A||_.idx-s.idx)}function c(_,s,A){var m=e.le(_,A,y),h=_[m],x=h.upperIds,u=x[x.length-1];h.upperIds=[u],_.splice(m+1,0,new f(A.a,A.b,A.idx,[u],x))}function b(_,s,A){var m=A.a;A.a=A.b,A.b=m;var h=e.eq(_,A,y),x=_[h],u=_[h-1];u.upperIds=x.upperIds,_.splice(h,1)}function l(_,s){for(var A=_.length,m=s.length,h=[],x=0;x<A;++x)h.push(new o(_[x],null,n,x));for(var x=0;x<m;++x){var u=s[x],L=_[u[0]],S=_[u[1]];L[0]<S[0]?h.push(new o(L,S,t,x),new o(S,L,r,x)):L[0]>S[0]&&h.push(new o(S,L,t,x),new o(L,S,r,x))}h.sort(i);for(var k=h[0].a[0]-(1+Math.abs(h[0].a[0]))*Math.pow(2,-52),P=[new f([k,1],[k,0],-1,[],[],[],[])],z=[],x=0,I=h.length;x<I;++x){var D=h[x],R=D.type;R===n?p(z,P,_,D.a,D.idx):R===t?c(P,_,D):b(P,_,D)}return z}},{"binary-search-bounds":31,"robust-orientation":284}],46:[function(v,M,T){var e=v("binary-search-bounds");M.exports=t;function a(f,o){this.stars=f,this.edges=o}var n=a.prototype;function r(f,o,i){for(var g=1,p=f.length;g<p;g+=2)if(f[g-1]===o&&f[g]===i){f[g-1]=f[p-2],f[g]=f[p-1],f.length=p-2;return}}n.isConstraint=function(){var f=[0,0];function o(i,g){return i[0]-g[0]||i[1]-g[1]}return function(i,g){return f[0]=Math.min(i,g),f[1]=Math.max(i,g),e.eq(this.edges,f,o)>=0}}(),n.removeTriangle=function(f,o,i){var g=this.stars;r(g[f],o,i),r(g[o],i,f),r(g[i],f,o)},n.addTriangle=function(f,o,i){var g=this.stars;g[f].push(o,i),g[o].push(i,f),g[i].push(f,o)},n.opposite=function(f,o){for(var i=this.stars[o],g=1,p=i.length;g<p;g+=2)if(i[g]===f)return i[g-1];return-1},n.flip=function(f,o){var i=this.opposite(f,o),g=this.opposite(o,f);this.removeTriangle(f,o,i),this.removeTriangle(o,f,g),this.addTriangle(f,g,i),this.addTriangle(o,i,g)},n.edges=function(){for(var f=this.stars,o=[],i=0,g=f.length;i<g;++i)for(var p=f[i],y=0,c=p.length;y<c;y+=2)o.push([p[y],p[y+1]]);return o},n.cells=function(){for(var f=this.stars,o=[],i=0,g=f.length;i<g;++i)for(var p=f[i],y=0,c=p.length;y<c;y+=2){var b=p[y],l=p[y+1];i<Math.min(b,l)&&o.push([i,b,l])}return o};function t(f,o){for(var i=new Array(f),g=0;g<f;++g)i[g]=[];return new a(i,o)}},{"binary-search-bounds":31}],47:[function(v,M,T){M.exports=e;function e(a){for(var n=1,r=1;r<a.length;++r)for(var t=0;t<r;++t)if(a[r]<a[t])n=-n;else if(a[t]===a[r])return 0;return n}},{}],48:[function(v,M,T){var e=v("dup"),a=v("robust-linear-solve");function n(f,o){for(var i=0,g=f.length,p=0;p<g;++p)i+=f[p]*o[p];return i}function r(f){var o=f.length;if(o===0)return[];f[0].length;var i=e([f.length+1,f.length+1],1),g=e([f.length+1],1);i[o][o]=0;for(var p=0;p<o;++p){for(var y=0;y<=p;++y)i[y][p]=i[p][y]=2*n(f[p],f[y]);g[p]=n(f[p],f[p])}for(var c=a(i,g),b=0,l=c[o+1],p=0;p<l.length;++p)b+=l[p];for(var _=new Array(o),p=0;p<o;++p){for(var l=c[p],s=0,y=0;y<l.length;++y)s+=l[y];_[p]=s/b}return _}function t(f){if(f.length===0)return[];for(var o=f[0].length,i=e([o]),g=r(f),p=0;p<f.length;++p)for(var y=0;y<o;++y)i[y]+=f[p][y]*g[p];return i}t.barycenetric=r,M.exports=t},{dup:65,"robust-linear-solve":283}],49:[function(v,M,T){M.exports=a;var e=v("circumcenter");function a(n){for(var r=e(n),t=0,f=0;f<n.length;++f)for(var o=n[f],i=0;i<r.length;++i)t+=Math.pow(o[i]-r[i],2);return Math.sqrt(t/n.length)}},{circumcenter:48}],50:[function(v,M,T){M.exports=L;var e=v("union-find"),a=v("box-intersect"),n=v("robust-segment-intersect"),r=v("big-rat"),t=v("big-rat/cmp"),f=v("big-rat/to-float"),o=v("rat-vec"),i=v("nextafter"),g=v("./lib/rat-seg-intersect");function p(S){var k=f(S);return[i(k,-1/0),i(k,1/0)]}function y(S,k){for(var P=new Array(k.length),z=0;z<k.length;++z){var I=k[z],D=S[I[0]],R=S[I[1]];P[z]=[i(Math.min(D[0],R[0]),-1/0),i(Math.min(D[1],R[1]),-1/0),i(Math.max(D[0],R[0]),1/0),i(Math.max(D[1],R[1]),1/0)]}return P}function c(S){for(var k=new Array(S.length),P=0;P<S.length;++P){var z=S[P];k[P]=[i(z[0],-1/0),i(z[1],-1/0),i(z[0],1/0),i(z[1],1/0)]}return k}function b(S,k,P){var z=[];return a(P,function(I,D){var R=k[I],O=k[D];if(!(R[0]===O[0]||R[0]===O[1]||R[1]===O[0]||R[1]===O[1])){var F=S[R[0]],V=S[R[1]],G=S[O[0]],J=S[O[1]];n(F,V,G,J)&&z.push([I,D])}}),z}function l(S,k,P,z){var I=[];return a(P,z,function(D,R){var O=k[D];if(!(O[0]===R||O[1]===R)){var F=S[R],V=S[O[0]],G=S[O[1]];n(V,G,F,F)&&I.push([D,R])}}),I}function _(S,k,P,z,I){var D,R,O=S.map(function(ee){return[r(ee[0]),r(ee[1])]});for(D=0;D<P.length;++D){var F=P[D];R=F[0];var V=F[1],G=k[R],J=k[V],Z=g(o(S[G[0]]),o(S[G[1]]),o(S[J[0]]),o(S[J[1]]));if(!!Z){var Y=S.length;S.push([f(Z[0]),f(Z[1])]),O.push(Z),z.push([R,Y],[V,Y])}}for(z.sort(function(ee,te){if(ee[0]!==te[0])return ee[0]-te[0];var ie=O[ee[1]],le=O[te[1]];return t(ie[0],le[0])||t(ie[1],le[1])}),D=z.length-1;D>=0;--D){var j=z[D];R=j[0];var re=k[R],se=re[0],oe=re[1],N=S[se],U=S[oe];if((N[0]-U[0]||N[1]-U[1])<0){var q=se;se=oe,oe=q}re[0]=se;var Q=re[1]=j[1],W;for(I&&(W=re[2]);D>0&&z[D-1][0]===R;){var j=z[--D],X=j[1];I?k.push([Q,X,W]):k.push([Q,X]),Q=X}I?k.push([Q,oe,W]):k.push([Q,oe])}return O}function s(S,k,P){for(var z=k.length,I=new e(z),D=[],R=0;R<k.length;++R){var O=k[R],F=p(O[0]),V=p(O[1]);D.push([i(F[0],-1/0),i(V[0],-1/0),i(F[1],1/0),i(V[1],1/0)])}a(D,function(j,re){I.link(j,re)});for(var G=!0,J=new Array(z),R=0;R<z;++R){var Z=I.find(R);Z!==R&&(G=!1,S[Z]=[Math.min(S[R][0],S[Z][0]),Math.min(S[R][1],S[Z][1])])}if(G)return null;for(var Y=0,R=0;R<z;++R){var Z=I.find(R);Z===R?(J[R]=Y,S[Y++]=S[R]):J[R]=-1}S.length=Y;for(var R=0;R<z;++R)J[R]<0&&(J[R]=J[I.find(R)]);return J}function A(S,k){return S[0]-k[0]||S[1]-k[1]}function m(S,k){var P=S[0]-k[0]||S[1]-k[1];return P||(S[2]<k[2]?-1:S[2]>k[2]?1:0)}function h(S,k,P){if(S.length!==0){if(k)for(var z=0;z<S.length;++z){var I=S[z],D=k[I[0]],R=k[I[1]];I[0]=Math.min(D,R),I[1]=Math.max(D,R)}else for(var z=0;z<S.length;++z){var I=S[z],D=I[0],R=I[1];I[0]=Math.min(D,R),I[1]=Math.max(D,R)}P?S.sort(m):S.sort(A);for(var O=1,z=1;z<S.length;++z){var F=S[z-1],V=S[z];V[0]===F[0]&&V[1]===F[1]&&(!P||V[2]===F[2])||(S[O++]=V)}S.length=O}}function x(S,k,P){var z=s(S,[],c(S));return h(k,z,P),!!z}function u(S,k,P){var z=y(S,k),I=b(S,k,z),D=c(S),R=l(S,k,z,D),O=_(S,k,I,R,P),F=s(S,O);return h(k,F,P),F?!0:I.length>0||R.length>0}function L(S,k,P){var z;if(P){z=k;for(var I=new Array(k.length),D=0;D<k.length;++D){var R=k[D];I[D]=[R[0],R[1],P[D]]}k=I}for(var O=x(S,k,!!P);u(S,k,!!P);)O=!0;if(!!P&&O){z.length=0,P.length=0;for(var D=0;D<k.length;++D){var R=k[D];z.push([R[0],R[1]]),P.push(R[2])}}return O}},{"./lib/rat-seg-intersect":51,"big-rat":18,"big-rat/cmp":16,"big-rat/to-float":30,"box-intersect":35,nextafter:260,"rat-vec":273,"robust-segment-intersect":287,"union-find":309}],51:[function(v,M,T){M.exports=g;var e=v("big-rat/mul"),a=v("big-rat/div"),n=v("big-rat/sub"),r=v("big-rat/sign"),t=v("rat-vec/sub"),f=v("rat-vec/add"),o=v("rat-vec/muls");function i(p,y){return n(e(p[0],y[1]),e(p[1],y[0]))}function g(p,y,c,b){var l=t(y,p),_=t(b,c),s=i(l,_);if(r(s)===0)return null;var A=t(p,c),m=i(_,A),h=a(m,s),x=o(l,h),u=f(p,x);return u}},{"big-rat/div":17,"big-rat/mul":27,"big-rat/sign":28,"big-rat/sub":29,"rat-vec/add":272,"rat-vec/muls":274,"rat-vec/sub":275}],52:[function(v,M,T){M.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],53:[function(v,M,T){var e=v("./colorScale"),a=v("lerp");M.exports=n;function n(o){var i,g,p,y,c,b,l,_,h,s,A;if(o||(o={}),_=(o.nshades||72)-1,l=o.format||"hex",b=o.colormap,b||(b="jet"),typeof b=="string"){if(b=b.toLowerCase(),!e[b])throw Error(b+" not a supported colorscale");c=e[b]}else if(Array.isArray(b))c=b.slice();else throw Error("unsupported colormap option",b);if(c.length>_+1)throw new Error(b+" map requires nshades to be at least size "+c.length);Array.isArray(o.alpha)?o.alpha.length!==2?s=[1,1]:s=o.alpha.slice():typeof o.alpha=="number"?s=[o.alpha,o.alpha]:s=[1,1],i=c.map(function(L){return Math.round(L.index*_)}),s[0]=Math.min(Math.max(s[0],0),1),s[1]=Math.min(Math.max(s[1],0),1);var m=c.map(function(L,S){var k=c[S].index,P=c[S].rgb.slice();return P.length===4&&P[3]>=0&&P[3]<=1||(P[3]=s[0]+(s[1]-s[0])*k),P}),h=[];for(A=0;A<i.length-1;++A){y=i[A+1]-i[A],g=m[A],p=m[A+1];for(var x=0;x<y;x++){var u=x/y;h.push([Math.round(a(g[0],p[0],u)),Math.round(a(g[1],p[1],u)),Math.round(a(g[2],p[2],u)),a(g[3],p[3],u)])}}return h.push(c[c.length-1].rgb.concat(s[1])),l==="hex"?h=h.map(t):l==="rgbaString"?h=h.map(f):l==="float"&&(h=h.map(r)),h}function r(o){return[o[0]/255,o[1]/255,o[2]/255,o[3]]}function t(o){for(var i,g="#",p=0;p<3;++p)i=o[p],i=i.toString(16),g+=("00"+i).substr(i.length);return g}function f(o){return"rgba("+o.join(",")+")"}},{"./colorScale":52,lerp:240}],54:[function(v,M,T){M.exports=o;var e=v("robust-orientation"),a=v("signum"),n=v("two-sum"),r=v("robust-product"),t=v("robust-sum");function f(i,g,p){var y=n(i[0],-g[0]),c=n(i[1],-g[1]),b=n(p[0],-g[0]),l=n(p[1],-g[1]),_=t(r(y,b),r(c,l));return _[_.length-1]>=0}function o(i,g,p,y){var c=e(g,p,y);if(c===0){var b=a(e(i,g,p)),l=a(e(i,g,y));if(b===l){if(b===0){var _=f(i,g,p),s=f(i,g,y);return _===s?0:_?1:-1}return 0}else{if(l===0)return b>0||f(i,g,y)?-1:1;if(b===0)return l>0||f(i,g,p)?1:-1}return a(l-b)}var A=e(i,g,p);if(A>0)return c>0&&e(i,g,y)>0?1:-1;if(A<0)return c>0||e(i,g,y)>0?1:-1;var m=e(i,g,y);return m>0||f(i,g,p)?1:-1}},{"robust-orientation":284,"robust-product":285,"robust-sum":289,signum:55,"two-sum":307}],55:[function(v,M,T){M.exports=function(a){return a<0?-1:a>0?1:0}},{}],56:[function(v,M,T){M.exports=n;var e=Math.min;function a(r,t){return r-t}function n(r,t){var f=r.length,o=r.length-t.length;if(o)return o;switch(f){case 0:return 0;case 1:return r[0]-t[0];case 2:return r[0]+r[1]-t[0]-t[1]||e(r[0],r[1])-e(t[0],t[1]);case 3:var i=r[0]+r[1],g=t[0]+t[1];if(o=i+r[2]-(g+t[2]),o)return o;var p=e(r[0],r[1]),y=e(t[0],t[1]);return e(p,r[2])-e(y,t[2])||e(p+r[2],i)-e(y+t[2],g);case 4:var c=r[0],b=r[1],l=r[2],_=r[3],s=t[0],A=t[1],m=t[2],h=t[3];return c+b+l+_-(s+A+m+h)||e(c,b,l,_)-e(s,A,m,h,s)||e(c+b,c+l,c+_,b+l,b+_,l+_)-e(s+A,s+m,s+h,A+m,A+h,m+h)||e(c+b+l,c+b+_,c+l+_,b+l+_)-e(s+A+m,s+A+h,s+m+h,A+m+h);default:for(var x=r.slice().sort(a),u=t.slice().sort(a),L=0;L<f;++L)if(o=x[L]-u[L],o)return o;return 0}}},{}],57:[function(v,M,T){var e=v("compare-cell"),a=v("cell-orientation");M.exports=n;function n(r,t){return e(r,t)||a(r)-a(t)}},{"cell-orientation":47,"compare-cell":56}],58:[function(v,M,T){var e=v("./lib/ch1d"),a=v("./lib/ch2d"),n=v("./lib/chnd");M.exports=r;function r(t){var f=t.length;if(f===0)return[];if(f===1)return[[0]];var o=t[0].length;return o===0?[]:o===1?e(t):o===2?a(t):n(t,o)}},{"./lib/ch1d":59,"./lib/ch2d":60,"./lib/chnd":61}],59:[function(v,M,T){M.exports=e;function e(a){for(var n=0,r=0,t=1;t<a.length;++t)a[t][0]<a[n][0]&&(n=t),a[t][0]>a[r][0]&&(r=t);return n<r?[[n],[r]]:n>r?[[r],[n]]:[[n]]}},{}],60:[function(v,M,T){M.exports=a;var e=v("monotone-convex-hull-2d");function a(n){var r=e(n),t=r.length;if(t<=2)return[];for(var f=new Array(t),o=r[t-1],i=0;i<t;++i){var g=r[i];f[i]=[o,g],o=g}return f}},{"monotone-convex-hull-2d":246}],61:[function(v,M,T){M.exports=t;var e=v("incremental-convex-hull"),a=v("affine-hull");function n(f,o){for(var i=f.length,g=new Array(i),p=0;p<o.length;++p)g[p]=f[o[p]];for(var y=o.length,p=0;p<i;++p)o.indexOf(p)<0&&(g[y++]=f[p]);return g}function r(f,o){for(var i=f.length,g=o.length,p=0;p<i;++p)for(var y=f[p],c=0;c<y.length;++c){var b=y[c];if(b<g)y[c]=o[b];else{b=b-g;for(var l=0;l<g;++l)b>=o[l]&&(b+=1);y[c]=b}}return f}function t(f,o){try{return e(f,!0)}catch{var i=a(f);if(i.length<=o)return[];var g=n(f,i),p=e(g,!0);return r(p,i)}}},{"affine-hull":10,"incremental-convex-hull":233}],62:[function(v,M,T){function e(n,r,t,f,o,i){var g=6*o*o-6*o,p=3*o*o-4*o+1,y=-6*o*o+6*o,c=3*o*o-2*o;if(n.length){i||(i=new Array(n.length));for(var b=n.length-1;b>=0;--b)i[b]=g*n[b]+p*r[b]+y*t[b]+c*f[b];return i}return g*n+p*r+y*t[b]+c*f}function a(n,r,t,f,o,i){var g=o-1,p=o*o,y=g*g,c=(1+2*o)*y,b=o*y,l=p*(3-2*o),_=p*g;if(n.length){i||(i=new Array(n.length));for(var s=n.length-1;s>=0;--s)i[s]=c*n[s]+b*r[s]+l*t[s]+_*f[s];return i}return c*n+b*r+l*t+_*f}M.exports=a,M.exports.derivative=e},{}],63:[function(v,M,T){var e=v("incremental-convex-hull"),a=v("uniq");M.exports=f;function n(o,i){this.point=o,this.index=i}function r(o,i){for(var g=o.point,p=i.point,y=g.length,c=0;c<y;++c){var b=p[c]-g[c];if(b)return b}return 0}function t(o,i,g){if(o===1)return g?[[-1,0]]:[];var p=i.map(function(_,s){return[_[0],s]});p.sort(function(_,s){return _[0]-s[0]});for(var y=new Array(o-1),c=1;c<o;++c){var b=p[c-1],l=p[c];y[c-1]=[b[1],l[1]]}return g&&y.push([-1,y[0][1]],[y[o-1][1],-1]),y}function f(o,i){var g=o.length;if(g===0)return[];var p=o[0].length;if(p<1)return[];if(p===1)return t(g,o,i);for(var y=new Array(g),c=1,b=0;b<g;++b){for(var l=o[b],_=new Array(p+1),s=0,A=0;A<p;++A){var m=l[A];_[A]=m,s+=m*m}_[p]=s,y[b]=new n(_,b),c=Math.max(s,c)}a(y,r),g=y.length;for(var h=new Array(g+p+1),x=new Array(g+p+1),u=(p+1)*(p+1)*c,L=new Array(p+1),b=0;b<=p;++b)L[b]=0;L[p]=u,h[0]=L.slice(),x[0]=-1;for(var b=0;b<=p;++b){var _=L.slice();_[b]=1,h[b+1]=_,x[b+1]=-1}for(var b=0;b<g;++b){var S=y[b];h[b+p+1]=S.point,x[b+p+1]=S.index}var k=e(h,!1);if(i?k=k.filter(function(P){for(var z=0,I=0;I<=p;++I){var D=x[P[I]];if(D<0&&++z>=2)return!1;P[I]=D}return!0}):k=k.filter(function(P){for(var z=0;z<=p;++z){var I=x[P[z]];if(I<0)return!1;P[z]=I}return!0}),p&1)for(var b=0;b<k.length;++b){var S=k[b],_=S[0];S[0]=S[1],S[1]=_}return k}},{"incremental-convex-hull":233,uniq:310}],64:[function(v,M,T){(function(e){(function(){var a=!1;if(typeof Float64Array<"u"){var n=new Float64Array(1),r=new Uint32Array(n.buffer);if(n[0]=1,a=!0,r[1]===1072693248){let f=function(g,p){return r[0]=g,r[1]=p,n[0]},o=function(g){return n[0]=g,r[0]},i=function(g){return n[0]=g,r[1]};M.exports=function(p){return n[0]=p,[r[0],r[1]]},M.exports.pack=f,M.exports.lo=o,M.exports.hi=i}else if(r[0]===1072693248){let f=function(g,p){return r[1]=g,r[0]=p,n[0]},o=function(g){return n[0]=g,r[1]},i=function(g){return n[0]=g,r[0]};M.exports=function(p){return n[0]=p,[r[1],r[0]]},M.exports.pack=f,M.exports.lo=o,M.exports.hi=i}else a=!1}if(!a){let f=function(g,p){return t.writeUInt32LE(g,0,!0),t.writeUInt32LE(p,4,!0),t.readDoubleLE(0,!0)},o=function(g){return t.writeDoubleLE(g,0,!0),t.readUInt32LE(0,!0)},i=function(g){return t.writeDoubleLE(g,0,!0),t.readUInt32LE(4,!0)};var t=new e(8);M.exports=function(p){return t.writeDoubleLE(p,0,!0),[t.readUInt32LE(0,!0),t.readUInt32LE(4,!0)]},M.exports.pack=f,M.exports.lo=o,M.exports.hi=i}M.exports.sign=function(f){return M.exports.hi(f)>>>31},M.exports.exponent=function(f){var o=M.exports.hi(f);return(o<<1>>>21)-1023},M.exports.fraction=function(f){var o=M.exports.lo(f),i=M.exports.hi(f),g=i&(1<<20)-1;return i&2146435072&&(g+=1<<20),[o,g]},M.exports.denormalized=function(f){var o=M.exports.hi(f);return!(o&2146435072)}}).call(this)}).call(this,v("buffer").Buffer)},{buffer:3}],65:[function(v,M,T){function e(r,t,f){var o=r[f]|0;if(o<=0)return[];var i=new Array(o),g;if(f===r.length-1)for(g=0;g<o;++g)i[g]=t;else for(g=0;g<o;++g)i[g]=e(r,t,f+1);return i}function a(r,t){var f,o;for(f=new Array(r),o=0;o<r;++o)f[o]=t;return f}function n(r,t){switch(typeof t>"u"&&(t=0),typeof r){case"number":if(r>0)return a(r|0,t);break;case"object":if(typeof r.length=="number")return e(r,t,0);break}return[]}M.exports=n},{}],66:[function(v,M,T){M.exports=a;var e=v("uniq");function a(n,r){var t=n.length;if(typeof r!="number"){r=0;for(var f=0;f<t;++f){var o=n[f];r=Math.max(r,o[0],o[1])}r=(r|0)+1}r=r|0;for(var i=new Array(r),f=0;f<r;++f)i[f]=[];for(var f=0;f<t;++f){var o=n[f];i[o[0]].push(o[1]),i[o[1]].push(o[0])}for(var g=0;g<r;++g)e(i[g],function(p,y){return p-y});return i}},{uniq:310}],67:[function(v,M,T){M.exports=e;function e(a,n,r){var t=n||0,f=r||1;return[[a[12]+a[0],a[13]+a[1],a[14]+a[2],a[15]+a[3]],[a[12]-a[0],a[13]-a[1],a[14]-a[2],a[15]-a[3]],[a[12]+a[4],a[13]+a[5],a[14]+a[6],a[15]+a[7]],[a[12]-a[4],a[13]-a[5],a[14]-a[6],a[15]-a[7]],[t*a[12]+a[8],t*a[13]+a[9],t*a[14]+a[10],t*a[15]+a[11]],[f*a[12]-a[8],f*a[13]-a[9],f*a[14]-a[10],f*a[15]-a[11]]]}},{}],68:[function(v,M,T){M.exports=o;var e=v("cubic-hermite"),a=v("binary-search-bounds");function n(i,g,p){return Math.min(g,Math.max(i,p))}function r(i,g,p){this.dimension=i.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var y=0;y<this.dimension;++y)this.bounds[0][y]=-1/0,this.bounds[1][y]=1/0;this._state=i.slice().reverse(),this._velocity=g.slice().reverse(),this._time=[p],this._scratch=[i.slice(),i.slice(),i.slice(),i.slice(),i.slice()]}var t=r.prototype;t.flush=function(i){var g=a.gt(this._time,i)-1;g<=0||(this._time.splice(0,g),this._state.splice(0,g*this.dimension),this._velocity.splice(0,g*this.dimension))},t.curve=function(i){var g=this._time,p=g.length,y=a.le(g,i),c=this._scratch[0],b=this._state,l=this._velocity,_=this.dimension,s=this.bounds;if(y<0)for(var A=_-1,m=0;m<_;++m,--A)c[m]=b[A];else if(y>=p-1)for(var A=b.length-1,h=i-g[p-1],m=0;m<_;++m,--A)c[m]=b[A]+h*l[A];else{for(var A=_*(y+1)-1,x=g[y],u=g[y+1],L=u-x||1,S=this._scratch[1],k=this._scratch[2],P=this._scratch[3],z=this._scratch[4],I=!0,m=0;m<_;++m,--A)S[m]=b[A],P[m]=l[A]*L,k[m]=b[A+_],z[m]=l[A+_]*L,I=I&&S[m]===k[m]&&P[m]===z[m]&&P[m]===0;if(I)for(var m=0;m<_;++m)c[m]=S[m];else e(S,P,k,z,(i-x)/L,c)}for(var D=s[0],R=s[1],m=0;m<_;++m)c[m]=n(D[m],R[m],c[m]);return c},t.dcurve=function(i){var g=this._time,p=g.length,y=a.le(g,i),c=this._scratch[0],b=this._state,l=this._velocity,_=this.dimension;if(y>=p-1){var s=b.length-1;i-g[p-1];for(var A=0;A<_;++A,--s)c[A]=l[s]}else{for(var s=_*(y+1)-1,m=g[y],h=g[y+1],x=h-m||1,u=this._scratch[1],L=this._scratch[2],S=this._scratch[3],k=this._scratch[4],P=!0,A=0;A<_;++A,--s)u[A]=b[s],S[A]=l[s]*x,L[A]=b[s+_],k[A]=l[s+_]*x,P=P&&u[A]===L[A]&&S[A]===k[A]&&S[A]===0;if(P)for(var A=0;A<_;++A)c[A]=0;else{e.derivative(u,S,L,k,(i-m)/x,c);for(var A=0;A<_;++A)c[A]/=x}}return c},t.lastT=function(){var i=this._time;return i[i.length-1]},t.stable=function(){for(var i=this._velocity,g=i.length,p=this.dimension-1;p>=0;--p)if(i[--g])return!1;return!0},t.jump=function(i){var g=this.lastT(),p=this.dimension;if(!(i<g||arguments.length!==p+1)){var y=this._state,c=this._velocity,b=y.length-this.dimension,l=this.bounds,_=l[0],s=l[1];this._time.push(g,i);for(var A=0;A<2;++A)for(var m=0;m<p;++m)y.push(y[b++]),c.push(0);this._time.push(i);for(var m=p;m>0;--m)y.push(n(_[m-1],s[m-1],arguments[m])),c.push(0)}},t.push=function(i){var g=this.lastT(),p=this.dimension;if(!(i<g||arguments.length!==p+1)){var y=this._state,c=this._velocity,b=y.length-this.dimension,l=i-g,_=this.bounds,s=_[0],A=_[1],m=l>1e-6?1/l:0;this._time.push(i);for(var h=p;h>0;--h){var x=n(s[h-1],A[h-1],arguments[h]);y.push(x),c.push((x-y[b++])*m)}}},t.set=function(i){var g=this.dimension;if(!(i<this.lastT()||arguments.length!==g+1)){var p=this._state,y=this._velocity,c=this.bounds,b=c[0],l=c[1];this._time.push(i);for(var _=g;_>0;--_)p.push(n(b[_-1],l[_-1],arguments[_])),y.push(0)}},t.move=function(i){var g=this.lastT(),p=this.dimension;if(!(i<=g||arguments.length!==p+1)){var y=this._state,c=this._velocity,b=y.length-this.dimension,l=this.bounds,_=l[0],s=l[1],A=i-g,m=A>1e-6?1/A:0;this._time.push(i);for(var h=p;h>0;--h){var x=arguments[h];y.push(n(_[h-1],s[h-1],y[b++]+x)),c.push(x*m)}}},t.idle=function(i){var g=this.lastT();if(!(i<g)){var p=this.dimension,y=this._state,c=this._velocity,b=y.length-p,l=this.bounds,_=l[0],s=l[1],A=i-g;this._time.push(i);for(var m=p-1;m>=0;--m)y.push(n(_[m],s[m],y[b]+A*c[b])),c.push(0),b+=1}};function f(i){for(var g=new Array(i),p=0;p<i;++p)g[p]=0;return g}function o(i,g,p){switch(arguments.length){case 0:return new r([0],[0],0);case 1:if(typeof i=="number"){var y=f(i);return new r(y,y,0)}else return new r(i,f(i.length),0);case 2:if(typeof g=="number"){var y=f(i.length);return new r(i,y,+g)}else p=0;case 3:if(i.length!==g.length)throw new Error("state and velocity lengths must match");return new r(i,g,p)}}},{"binary-search-bounds":31,"cubic-hermite":62}],69:[function(v,M,T){M.exports=A;var e=0,a=1;function n(m,h,x,u,L,S){this._color=m,this.key=h,this.value=x,this.left=u,this.right=L,this._count=S}function r(m){return new n(m._color,m.key,m.value,m.left,m.right,m._count)}function t(m,h){return new n(m,h.key,h.value,h.left,h.right,h._count)}function f(m){m._count=1+(m.left?m.left._count:0)+(m.right?m.right._count:0)}function o(m,h){this._compare=m,this.root=h}var i=o.prototype;Object.defineProperty(i,"keys",{get:function(){var m=[];return this.forEach(function(h,x){m.push(h)}),m}}),Object.defineProperty(i,"values",{get:function(){var m=[];return this.forEach(function(h,x){m.push(x)}),m}}),Object.defineProperty(i,"length",{get:function(){return this.root?this.root._count:0}}),i.insert=function(m,h){for(var x=this._compare,u=this.root,L=[],S=[];u;){var k=x(m,u.key);L.push(u),S.push(k),k<=0?u=u.left:u=u.right}L.push(new n(e,m,h,null,null,1));for(var P=L.length-2;P>=0;--P){var u=L[P];S[P]<=0?L[P]=new n(u._color,u.key,u.value,L[P+1],u.right,u._count+1):L[P]=new n(u._color,u.key,u.value,u.left,L[P+1],u._count+1)}for(var P=L.length-1;P>1;--P){var z=L[P-1],u=L[P];if(z._color===a||u._color===a)break;var I=L[P-2];if(I.left===z)if(z.left===u){var D=I.right;if(D&&D._color===e)z._color=a,I.right=t(a,D),I._color=e,P-=1;else{if(I._color=e,I.left=z.right,z._color=a,z.right=I,L[P-2]=z,L[P-1]=u,f(I),f(z),P>=3){var R=L[P-3];R.left===I?R.left=z:R.right=z}break}}else{var D=I.right;if(D&&D._color===e)z._color=a,I.right=t(a,D),I._color=e,P-=1;else{if(z.right=u.left,I._color=e,I.left=u.right,u._color=a,u.left=z,u.right=I,L[P-2]=u,L[P-1]=z,f(I),f(z),f(u),P>=3){var R=L[P-3];R.left===I?R.left=u:R.right=u}break}}else if(z.right===u){var D=I.left;if(D&&D._color===e)z._color=a,I.left=t(a,D),I._color=e,P-=1;else{if(I._color=e,I.right=z.left,z._color=a,z.left=I,L[P-2]=z,L[P-1]=u,f(I),f(z),P>=3){var R=L[P-3];R.right===I?R.right=z:R.left=z}break}}else{var D=I.left;if(D&&D._color===e)z._color=a,I.left=t(a,D),I._color=e,P-=1;else{if(z.left=u.right,I._color=e,I.right=u.left,u._color=a,u.right=z,u.left=I,L[P-2]=u,L[P-1]=z,f(I),f(z),f(u),P>=3){var R=L[P-3];R.right===I?R.right=u:R.left=u}break}}}return L[0]._color=a,new o(x,L[0])};function g(m,h){if(h.left){var x=g(m,h.left);if(x)return x}var x=m(h.key,h.value);if(x)return x;if(h.right)return g(m,h.right)}function p(m,h,x,u){var L=h(m,u.key);if(L<=0){if(u.left){var S=p(m,h,x,u.left);if(S)return S}var S=x(u.key,u.value);if(S)return S}if(u.right)return p(m,h,x,u.right)}function y(m,h,x,u,L){var S=x(m,L.key),k=x(h,L.key),P;if(S<=0&&(L.left&&(P=y(m,h,x,u,L.left),P)||k>0&&(P=u(L.key,L.value),P)))return P;if(k>0&&L.right)return y(m,h,x,u,L.right)}i.forEach=function(h,x,u){if(!!this.root)switch(arguments.length){case 1:return g(h,this.root);case 2:return p(x,this._compare,h,this.root);case 3:return this._compare(x,u)>=0?void 0:y(x,u,this._compare,h,this.root)}},Object.defineProperty(i,"begin",{get:function(){for(var m=[],h=this.root;h;)m.push(h),h=h.left;return new c(this,m)}}),Object.defineProperty(i,"end",{get:function(){for(var m=[],h=this.root;h;)m.push(h),h=h.right;return new c(this,m)}}),i.at=function(m){if(m<0)return new c(this,[]);for(var h=this.root,x=[];;){if(x.push(h),h.left){if(m<h.left._count){h=h.left;continue}m-=h.left._count}if(!m)return new c(this,x);if(m-=1,h.right){if(m>=h.right._count)break;h=h.right}else break}return new c(this,[])},i.ge=function(m){for(var h=this._compare,x=this.root,u=[],L=0;x;){var S=h(m,x.key);u.push(x),S<=0&&(L=u.length),S<=0?x=x.left:x=x.right}return u.length=L,new c(this,u)},i.gt=function(m){for(var h=this._compare,x=this.root,u=[],L=0;x;){var S=h(m,x.key);u.push(x),S<0&&(L=u.length),S<0?x=x.left:x=x.right}return u.length=L,new c(this,u)},i.lt=function(m){for(var h=this._compare,x=this.root,u=[],L=0;x;){var S=h(m,x.key);u.push(x),S>0&&(L=u.length),S<=0?x=x.left:x=x.right}return u.length=L,new c(this,u)},i.le=function(m){for(var h=this._compare,x=this.root,u=[],L=0;x;){var S=h(m,x.key);u.push(x),S>=0&&(L=u.length),S<0?x=x.left:x=x.right}return u.length=L,new c(this,u)},i.find=function(m){for(var h=this._compare,x=this.root,u=[];x;){var L=h(m,x.key);if(u.push(x),L===0)return new c(this,u);L<=0?x=x.left:x=x.right}return new c(this,[])},i.remove=function(m){var h=this.find(m);return h?h.remove():this},i.get=function(m){for(var h=this._compare,x=this.root;x;){var u=h(m,x.key);if(u===0)return x.value;u<=0?x=x.left:x=x.right}};function c(m,h){this.tree=m,this._stack=h}var b=c.prototype;Object.defineProperty(b,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(b,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),b.clone=function(){return new c(this.tree,this._stack.slice())};function l(m,h){m.key=h.key,m.value=h.value,m.left=h.left,m.right=h.right,m._color=h._color,m._count=h._count}function _(m){for(var h,x,u,L,S=m.length-1;S>=0;--S){if(h=m[S],S===0){h._color=a;return}if(x=m[S-1],x.left===h){if(u=x.right,u.right&&u.right._color===e){if(u=x.right=r(u),L=u.right=r(u.right),x.right=u.left,u.left=x,u.right=L,u._color=x._color,h._color=a,x._color=a,L._color=a,f(x),f(u),S>1){var k=m[S-2];k.left===x?k.left=u:k.right=u}m[S-1]=u;return}else if(u.left&&u.left._color===e){if(u=x.right=r(u),L=u.left=r(u.left),x.right=L.left,u.left=L.right,L.left=x,L.right=u,L._color=x._color,x._color=a,u._color=a,h._color=a,f(x),f(u),f(L),S>1){var k=m[S-2];k.left===x?k.left=L:k.right=L}m[S-1]=L;return}if(u._color===a)if(x._color===e){x._color=a,x.right=t(e,u);return}else{x.right=t(e,u);continue}else{if(u=r(u),x.right=u.left,u.left=x,u._color=x._color,x._color=e,f(x),f(u),S>1){var k=m[S-2];k.left===x?k.left=u:k.right=u}m[S-1]=u,m[S]=x,S+1<m.length?m[S+1]=h:m.push(h),S=S+2}}else{if(u=x.left,u.left&&u.left._color===e){if(u=x.left=r(u),L=u.left=r(u.left),x.left=u.right,u.right=x,u.left=L,u._color=x._color,h._color=a,x._color=a,L._color=a,f(x),f(u),S>1){var k=m[S-2];k.right===x?k.right=u:k.left=u}m[S-1]=u;return}else if(u.right&&u.right._color===e){if(u=x.left=r(u),L=u.right=r(u.right),x.left=L.right,u.right=L.left,L.right=x,L.left=u,L._color=x._color,x._color=a,u._color=a,h._color=a,f(x),f(u),f(L),S>1){var k=m[S-2];k.right===x?k.right=L:k.left=L}m[S-1]=L;return}if(u._color===a)if(x._color===e){x._color=a,x.left=t(e,u);return}else{x.left=t(e,u);continue}else{if(u=r(u),x.left=u.right,u.right=x,u._color=x._color,x._color=e,f(x),f(u),S>1){var k=m[S-2];k.right===x?k.right=u:k.left=u}m[S-1]=u,m[S]=x,S+1<m.length?m[S+1]=h:m.push(h),S=S+2}}}}b.remove=function(){var m=this._stack;if(m.length===0)return this.tree;var h=new Array(m.length),x=m[m.length-1];h[h.length-1]=new n(x._color,x.key,x.value,x.left,x.right,x._count);for(var u=m.length-2;u>=0;--u){var x=m[u];x.left===m[u+1]?h[u]=new n(x._color,x.key,x.value,h[u+1],x.right,x._count):h[u]=new n(x._color,x.key,x.value,x.left,h[u+1],x._count)}if(x=h[h.length-1],x.left&&x.right){var L=h.length;for(x=x.left;x.right;)h.push(x),x=x.right;var S=h[L-1];h.push(new n(x._color,S.key,S.value,x.left,x.right,x._count)),h[L-1].key=x.key,h[L-1].value=x.value;for(var u=h.length-2;u>=L;--u)x=h[u],h[u]=new n(x._color,x.key,x.value,x.left,h[u+1],x._count);h[L-1].left=h[L]}if(x=h[h.length-1],x._color===e){var k=h[h.length-2];k.left===x?k.left=null:k.right===x&&(k.right=null),h.pop();for(var u=0;u<h.length;++u)h[u]._count--;return new o(this.tree._compare,h[0])}else if(x.left||x.right){x.left?l(x,x.left):x.right&&l(x,x.right),x._color=a;for(var u=0;u<h.length-1;++u)h[u]._count--;return new o(this.tree._compare,h[0])}else{if(h.length===1)return new o(this.tree._compare,null);for(var u=0;u<h.length;++u)h[u]._count--;var P=h[h.length-2];_(h),P.left===x?P.left=null:P.right=null}return new o(this.tree._compare,h[0])},Object.defineProperty(b,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(b,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(b,"index",{get:function(){var m=0,h=this._stack;if(h.length===0){var x=this.tree.root;return x?x._count:0}else h[h.length-1].left&&(m=h[h.length-1].left._count);for(var u=h.length-2;u>=0;--u)h[u+1]===h[u].right&&(++m,h[u].left&&(m+=h[u].left._count));return m},enumerable:!0}),b.next=function(){var m=this._stack;if(m.length!==0){var h=m[m.length-1];if(h.right)for(h=h.right;h;)m.push(h),h=h.left;else for(m.pop();m.length>0&&m[m.length-1].right===h;)h=m[m.length-1],m.pop()}},Object.defineProperty(b,"hasNext",{get:function(){var m=this._stack;if(m.length===0)return!1;if(m[m.length-1].right)return!0;for(var h=m.length-1;h>0;--h)if(m[h-1].left===m[h])return!0;return!1}}),b.update=function(m){var h=this._stack;if(h.length===0)throw new Error("Can't update empty node!");var x=new Array(h.length),u=h[h.length-1];x[x.length-1]=new n(u._color,u.key,m,u.left,u.right,u._count);for(var L=h.length-2;L>=0;--L)u=h[L],u.left===h[L+1]?x[L]=new n(u._color,u.key,u.value,x[L+1],u.right,u._count):x[L]=new n(u._color,u.key,u.value,u.left,x[L+1],u._count);return new o(this.tree._compare,x[0])},b.prev=function(){var m=this._stack;if(m.length!==0){var h=m[m.length-1];if(h.left)for(h=h.left;h;)m.push(h),h=h.right;else for(m.pop();m.length>0&&m[m.length-1].left===h;)h=m[m.length-1],m.pop()}},Object.defineProperty(b,"hasPrev",{get:function(){var m=this._stack;if(m.length===0)return!1;if(m[m.length-1].left)return!0;for(var h=m.length-1;h>0;--h)if(m[h-1].right===m[h])return!0;return!1}});function s(m,h){return m<h?-1:m>h?1:0}function A(m){return new o(m||s,null)}},{}],70:[function(v,M,T){M.exports=h;var e=v("./lib/text.js"),a=v("./lib/lines.js"),n=v("./lib/background.js"),r=v("./lib/cube.js"),t=v("./lib/ticks.js"),f=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function o(x,u){return x[0]=u[0],x[1]=u[1],x[2]=u[2],x}function i(x){this.gl=x,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=n(x)}var g=i.prototype;g.update=function(x){x=x||{};function u(G,J,Z){if(Z in x){var Y=x[Z],j=this[Z],re;(G?Array.isArray(Y)&&Array.isArray(Y[0]):Array.isArray(Y))?this[Z]=re=[J(Y[0]),J(Y[1]),J(Y[2])]:this[Z]=re=[J(Y),J(Y),J(Y)];for(var se=0;se<3;++se)if(re[se]!==j[se])return!0}return!1}var L=u.bind(this,!1,Number),S=u.bind(this,!1,Boolean),k=u.bind(this,!1,String),P=u.bind(this,!0,function(G){if(Array.isArray(G)){if(G.length===3)return[+G[0],+G[1],+G[2],1];if(G.length===4)return[+G[0],+G[1],+G[2],+G[3]]}return[0,0,0,1]}),z,I=!1,D=!1;if("bounds"in x)for(var R=x.bounds,O=0;O<2;++O)for(var F=0;F<3;++F)R[O][F]!==this.bounds[O][F]&&(D=!0),this.bounds[O][F]=R[O][F];if("ticks"in x){z=x.ticks,I=!0,this.autoTicks=!1;for(var O=0;O<3;++O)this.tickSpacing[O]=0}else L("tickSpacing")&&(this.autoTicks=!0,D=!0);if(this._firstInit&&("ticks"in x||"tickSpacing"in x||(this.autoTicks=!0),D=!0,I=!0,this._firstInit=!1),D&&this.autoTicks&&(z=t.create(this.bounds,this.tickSpacing),I=!0),I){for(var O=0;O<3;++O)z[O].sort(function(J,Z){return J.x-Z.x});t.equal(z,this.ticks)?I=!1:this.ticks=z}S("tickEnable"),k("tickFont")&&(I=!0),L("tickSize"),L("tickAngle"),L("tickPad"),P("tickColor");var V=k("labels");k("labelFont")&&(V=!0),S("labelEnable"),L("labelSize"),L("labelPad"),P("labelColor"),S("lineEnable"),S("lineMirror"),L("lineWidth"),P("lineColor"),S("lineTickEnable"),S("lineTickMirror"),L("lineTickLength"),L("lineTickWidth"),P("lineTickColor"),S("gridEnable"),L("gridWidth"),P("gridColor"),S("zeroEnable"),P("zeroLineColor"),L("zeroLineWidth"),S("backgroundEnable"),P("backgroundColor"),this._text?this._text&&(V||I)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=e(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&I&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=a(this.gl,this.bounds,this.ticks))};function p(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}var y=[new p,new p,new p];function c(x,u,L,S,k){for(var P=x.primalOffset,z=x.primalMinor,I=x.mirrorOffset,D=x.mirrorMinor,R=S[u],O=0;O<3;++O)if(u!==O){var F=P,V=I,G=z,J=D;R&1<<O&&(F=I,V=P,G=D,J=z),F[O]=L[0][O],V[O]=L[1][O],k[O]>0?(G[O]=-1,J[O]=0):(G[O]=0,J[O]=1)}}var b=[0,0,0],l={model:f,view:f,projection:f,_ortho:!1};g.isOpaque=function(){return!0},g.isTransparent=function(){return!1},g.drawTransparent=function(x){};var _=0,s=[0,0,0],A=[0,0,0],m=[0,0,0];g.draw=function(x){x=x||l;for(var j=this.gl,u=x.model||f,L=x.view||f,S=x.projection||f,k=this.bounds,P=x._ortho||!1,z=r(u,L,S,k,P),I=z.cubeEdges,D=z.axis,R=L[12],O=L[13],F=L[14],V=L[15],G=P?2:1,J=G*this.pixelRatio*(S[3]*R+S[7]*O+S[11]*F+S[15]*V)/j.drawingBufferHeight,Z=0;Z<3;++Z)this.lastCubeProps.cubeEdges[Z]=I[Z],this.lastCubeProps.axis[Z]=D[Z];for(var Y=y,Z=0;Z<3;++Z)c(y[Z],Z,this.bounds,I,D);for(var j=this.gl,re=b,Z=0;Z<3;++Z)this.backgroundEnable[Z]?re[Z]=D[Z]:re[Z]=0;this._background.draw(u,L,S,k,re,this.backgroundColor),this._lines.bind(u,L,S,this);for(var Z=0;Z<3;++Z){var se=[0,0,0];D[Z]>0?se[Z]=k[1][Z]:se[Z]=k[0][Z];for(var oe=0;oe<2;++oe){var N=(Z+1+oe)%3,U=(Z+1+(oe^1))%3;this.gridEnable[N]&&this._lines.drawGrid(N,U,this.bounds,se,this.gridColor[N],this.gridWidth[N]*this.pixelRatio)}for(var oe=0;oe<2;++oe){var N=(Z+1+oe)%3,U=(Z+1+(oe^1))%3;this.zeroEnable[U]&&Math.min(k[0][U],k[1][U])<=0&&Math.max(k[0][U],k[1][U])>=0&&this._lines.drawZero(N,U,this.bounds,se,this.zeroLineColor[U],this.zeroLineWidth[U]*this.pixelRatio)}}for(var Z=0;Z<3;++Z){this.lineEnable[Z]&&this._lines.drawAxisLine(Z,this.bounds,Y[Z].primalOffset,this.lineColor[Z],this.lineWidth[Z]*this.pixelRatio),this.lineMirror[Z]&&this._lines.drawAxisLine(Z,this.bounds,Y[Z].mirrorOffset,this.lineColor[Z],this.lineWidth[Z]*this.pixelRatio);for(var q=o(s,Y[Z].primalMinor),Q=o(A,Y[Z].mirrorMinor),W=this.lineTickLength,oe=0;oe<3;++oe){var X=J/u[5*oe];q[oe]*=W[oe]*X,Q[oe]*=W[oe]*X}this.lineTickEnable[Z]&&this._lines.drawAxisTicks(Z,Y[Z].primalOffset,q,this.lineTickColor[Z],this.lineTickWidth[Z]*this.pixelRatio),this.lineTickMirror[Z]&&this._lines.drawAxisTicks(Z,Y[Z].mirrorOffset,Q,this.lineTickColor[Z],this.lineTickWidth[Z]*this.pixelRatio)}this._lines.unbind(),this._text.bind(u,L,S,this.pixelRatio);var ee,te=.5,ie,le;function ge(De){le=[0,0,0],le[De]=1}function fe(De,Be,Ue){var xe=(De+1)%3,Pe=(De+2)%3,Ve=Be[xe],Qe=Be[Pe],Fe=Ue[xe],Le=Ue[Pe];if(Ve>0&&Le>0){ge(xe);return}else if(Ve>0&&Le<0){ge(xe);return}else if(Ve<0&&Le>0){ge(xe);return}else if(Ve<0&&Le<0){ge(xe);return}else if(Qe>0&&Fe>0){ge(Pe);return}else if(Qe>0&&Fe<0){ge(Pe);return}else if(Qe<0&&Fe>0){ge(Pe);return}else if(Qe<0&&Fe<0){ge(Pe);return}}for(var Z=0;Z<3;++Z){for(var pe=Y[Z].primalMinor,ye=Y[Z].mirrorMinor,Te=o(m,Y[Z].primalOffset),oe=0;oe<3;++oe)this.lineTickEnable[Z]&&(Te[oe]+=J*pe[oe]*Math.max(this.lineTickLength[oe],0)/u[5*oe]);var _e=[0,0,0];if(_e[Z]=1,this.tickEnable[Z]){this.tickAngle[Z]===-3600?(this.tickAngle[Z]=0,this.tickAlign[Z]="auto"):this.tickAlign[Z]=-1,ie=1,ee=[this.tickAlign[Z],te,ie],ee[0]==="auto"?ee[0]=_:ee[0]=parseInt(""+ee[0]),le=[0,0,0],fe(Z,pe,ye);for(var oe=0;oe<3;++oe)Te[oe]+=J*pe[oe]*this.tickPad[oe]/u[5*oe];this._text.drawTicks(Z,this.tickSize[Z],this.tickAngle[Z],Te,this.tickColor[Z],_e,le,ee)}if(this.labelEnable[Z]){ie=0,le=[0,0,0],this.labels[Z].length>4&&(ge(Z),ie=1),ee=[this.labelAlign[Z],te,ie],ee[0]==="auto"?ee[0]=_:ee[0]=parseInt(""+ee[0]);for(var oe=0;oe<3;++oe)Te[oe]+=J*pe[oe]*this.labelPad[oe]/u[5*oe];Te[Z]+=.5*(k[0][Z]+k[1][Z]),this._text.drawLabel(Z,this.labelSize[Z],this.labelAngle[Z],Te,this.labelColor[Z],[0,0,0],le,ee)}}this._text.unbind()},g.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null};function h(x,u){var L=new i(x);return L.update(u),L}},{"./lib/background.js":71,"./lib/cube.js":72,"./lib/lines.js":73,"./lib/text.js":75,"./lib/ticks.js":76}],71:[function(v,M,T){M.exports=f;var e=v("gl-buffer"),a=v("gl-vao"),n=v("./shaders").bg;function r(o,i,g,p){this.gl=o,this.buffer=i,this.vao=g,this.shader=p}var t=r.prototype;t.draw=function(o,i,g,p,y,c){for(var b=!1,l=0;l<3;++l)b=b||y[l];if(!!b){var _=this.gl;_.enable(_.POLYGON_OFFSET_FILL),_.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:o,view:i,projection:g,bounds:p,enable:y,colors:c},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),_.disable(_.POLYGON_OFFSET_FILL)}},t.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function f(o){for(var i=[],g=[],p=0,y=0;y<3;++y)for(var c=(y+1)%3,b=(y+2)%3,l=[0,0,0],_=[0,0,0],s=-1;s<=1;s+=2){g.push(p,p+2,p+1,p+1,p+2,p+3),l[y]=s,_[y]=s;for(var A=-1;A<=1;A+=2){l[c]=A;for(var m=-1;m<=1;m+=2)l[b]=m,i.push(l[0],l[1],l[2],_[0],_[1],_[2]),p+=1}var h=c;c=b,b=h}var x=e(o,new Float32Array(i)),u=e(o,new Uint16Array(g),o.ELEMENT_ARRAY_BUFFER),L=a(o,[{buffer:x,type:o.FLOAT,size:3,offset:0,stride:24},{buffer:x,type:o.FLOAT,size:3,offset:12,stride:24}],u),S=n(o);return S.attributes.position.location=0,S.attributes.normal.location=1,new r(o,x,L,S)}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],72:[function(v,M,T){M.exports=s;var e=v("bit-twiddle"),a=v("gl-mat4/multiply"),n=v("split-polygon"),r=v("robust-orientation"),t=new Array(16),f=new Array(8),o=new Array(8),i=new Array(3),g=[0,0,0];(function(){for(var A=0;A<8;++A)f[A]=[1,1,1,1],o[A]=[1,1,1]})();function p(A,m,h){for(var x=0;x<4;++x){A[x]=h[12+x];for(var u=0;u<3;++u)A[x]+=m[u]*h[4*u+x]}}var y=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function c(A){for(var m=0;m<y.length;++m)if(A=n.positive(A,y[m]),A.length<3)return 0;for(var h=A[0],x=h[0]/h[3],u=h[1]/h[3],L=0,m=1;m+1<A.length;++m){var S=A[m],k=A[m+1],P=S[0]/S[3],z=S[1]/S[3],I=k[0]/k[3],D=k[1]/k[3],R=P-x,O=z-u,F=I-x,V=D-u;L+=Math.abs(R*V-O*F)}return L}var b=[1,1,1],l=[0,0,0],_={cubeEdges:b,axis:l};function s(A,m,h,x,u){a(t,m,A),a(t,h,t);for(var L=0,S=0;S<2;++S){i[2]=x[S][2];for(var k=0;k<2;++k){i[1]=x[k][1];for(var P=0;P<2;++P)i[0]=x[P][0],p(f[L],i,t),L+=1}}for(var z=-1,S=0;S<8;++S){for(var I=f[S][3],D=0;D<3;++D)o[S][D]=f[S][D]/I;u&&(o[S][2]*=-1),I<0&&(z<0||o[S][2]<o[z][2])&&(z=S)}if(z<0){z=0;for(var R=0;R<3;++R){for(var O=(R+2)%3,F=(R+1)%3,V=-1,G=-1,J=0;J<2;++J){var Z=J<<R,Y=Z+(J<<O)+(1-J<<F),j=Z+(1-J<<O)+(J<<F);r(o[Z],o[Y],o[j],g)<0||(J?V=1:G=1)}if(V<0||G<0){G>V&&(z|=1<<R);continue}for(var J=0;J<2;++J){var Z=J<<R,Y=Z+(J<<O)+(1-J<<F),j=Z+(1-J<<O)+(J<<F),re=c([f[Z],f[Y],f[j],f[Z+(1<<O)+(1<<F)]]);J?V=re:G=re}if(G>V){z|=1<<R;continue}}}for(var se=7^z,oe=-1,S=0;S<8;++S)S===z||S===se||(oe<0||o[oe][1]>o[S][1])&&(oe=S);for(var N=-1,S=0;S<3;++S){var U=oe^1<<S;if(!(U===z||U===se)){N<0&&(N=U);var F=o[U];F[0]<o[N][0]&&(N=U)}}for(var q=-1,S=0;S<3;++S){var U=oe^1<<S;if(!(U===z||U===se||U===N)){q<0&&(q=U);var F=o[U];F[0]>o[q][0]&&(q=U)}}var Q=b;Q[0]=Q[1]=Q[2]=0,Q[e.log2(N^oe)]=oe&N,Q[e.log2(oe^q)]=oe&q;var W=q^7;W===z||W===se?(W=N^7,Q[e.log2(q^W)]=W&q):Q[e.log2(N^W)]=W&N;for(var X=l,ee=z,R=0;R<3;++R)ee&1<<R?X[R]=-1:X[R]=1;return _}},{"bit-twiddle":32,"gl-mat4/multiply":100,"robust-orientation":284,"split-polygon":300}],73:[function(v,M,T){M.exports=b;var e=v("gl-buffer"),a=v("gl-vao"),n=v("./shaders").line,r=[0,0,0],t=[0,0,0],f=[0,0,0],o=[0,0,0],i=[1,1];function g(l){return l[0]=l[1]=l[2]=0,l}function p(l,_){return l[0]=_[0],l[1]=_[1],l[2]=_[2],l}function y(l,_,s,A,m,h,x,u){this.gl=l,this.vertBuffer=_,this.vao=s,this.shader=A,this.tickCount=m,this.tickOffset=h,this.gridCount=x,this.gridOffset=u}var c=y.prototype;c.bind=function(l,_,s){this.shader.bind(),this.shader.uniforms.model=l,this.shader.uniforms.view=_,this.shader.uniforms.projection=s,i[0]=this.gl.drawingBufferWidth,i[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=i,this.vao.bind()},c.unbind=function(){this.vao.unbind()},c.drawAxisLine=function(l,_,s,A,m){var h=g(t);this.shader.uniforms.majorAxis=t,h[l]=_[1][l]-_[0][l],this.shader.uniforms.minorAxis=h;var x=p(o,s);x[l]+=_[0][l],this.shader.uniforms.offset=x,this.shader.uniforms.lineWidth=m,this.shader.uniforms.color=A;var u=g(f);u[(l+2)%3]=1,this.shader.uniforms.screenAxis=u,this.vao.draw(this.gl.TRIANGLES,6);var u=g(f);u[(l+1)%3]=1,this.shader.uniforms.screenAxis=u,this.vao.draw(this.gl.TRIANGLES,6)},c.drawAxisTicks=function(l,_,s,A,m){if(!!this.tickCount[l]){var h=g(r);h[l]=1,this.shader.uniforms.majorAxis=h,this.shader.uniforms.offset=_,this.shader.uniforms.minorAxis=s,this.shader.uniforms.color=A,this.shader.uniforms.lineWidth=m;var x=g(f);x[l]=1,this.shader.uniforms.screenAxis=x,this.vao.draw(this.gl.TRIANGLES,this.tickCount[l],this.tickOffset[l])}},c.drawGrid=function(l,_,s,A,m,h){if(!!this.gridCount[l]){var x=g(t);x[_]=s[1][_]-s[0][_],this.shader.uniforms.minorAxis=x;var u=p(o,A);u[_]+=s[0][_],this.shader.uniforms.offset=u;var L=g(r);L[l]=1,this.shader.uniforms.majorAxis=L;var S=g(f);S[l]=1,this.shader.uniforms.screenAxis=S,this.shader.uniforms.lineWidth=h,this.shader.uniforms.color=m,this.vao.draw(this.gl.TRIANGLES,this.gridCount[l],this.gridOffset[l])}},c.drawZero=function(l,_,s,A,m,h){var x=g(t);this.shader.uniforms.majorAxis=x,x[l]=s[1][l]-s[0][l],this.shader.uniforms.minorAxis=x;var u=p(o,A);u[l]+=s[0][l],this.shader.uniforms.offset=u;var L=g(f);L[_]=1,this.shader.uniforms.screenAxis=L,this.shader.uniforms.lineWidth=h,this.shader.uniforms.color=m,this.vao.draw(this.gl.TRIANGLES,6)},c.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()};function b(l,_,s){var A=[],m=[0,0,0],h=[0,0,0],x=[0,0,0],u=[0,0,0];A.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var L=0;L<3;++L){for(var P=A.length/3|0,S=0;S<s[L].length;++S){var k=+s[L][S].x;A.push(k,0,1,k,1,1,k,0,-1,k,0,-1,k,1,1,k,1,-1)}var I=A.length/3|0;m[L]=P,h[L]=I-P;for(var P=A.length/3|0,z=0;z<s[L].length;++z){var k=+s[L][z].x;A.push(k,0,1,k,1,1,k,0,-1,k,0,-1,k,1,1,k,1,-1)}var I=A.length/3|0;x[L]=P,u[L]=I-P}var D=e(l,new Float32Array(A)),R=a(l,[{buffer:D,type:l.FLOAT,size:3,stride:0,offset:0}]),O=n(l);return O.attributes.position.location=0,new y(l,D,R,O,h,m,u,x)}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],74:[function(v,M,T){var e=v("glslify"),a=v("gl-shader"),n=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),r=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);T.line=function(g){return a(g,n,r,null,[{name:"position",type:"vec3"}])};var t=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),f=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);T.text=function(g){return a(g,t,f,null,[{name:"position",type:"vec3"}])};var o=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),i=e([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);T.bg=function(g){return a(g,o,i,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":132,glslify:231}],75:[function(v,M,T){(function(e){(function(){M.exports=b;var a=v("gl-buffer"),n=v("gl-vao"),r=v("vectorize-text"),t=v("./shaders").text,f=window||e.global||{},o=f.__TEXT_CACHE||{};f.__TEXT_CACHE={};var i=3;function g(l,_,s,A){this.gl=l,this.shader=_,this.buffer=s,this.vao=A,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var p=g.prototype,y=[0,0];p.bind=function(l,_,s,A){this.vao.bind(),this.shader.bind();var m=this.shader.uniforms;m.model=l,m.view=_,m.projection=s,m.pixelScale=A,y[0]=this.gl.drawingBufferWidth,y[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=y},p.unbind=function(){this.vao.unbind()},p.update=function(l,_,s,A,m){var h=[];function x(R,O,F,V,G,J){var Z=o[F];Z||(Z=o[F]={});var Y=Z[O];Y||(Y=Z[O]=c(O,{triangles:!0,font:F,textAlign:"center",textBaseline:"middle",lineSpacing:G,styletags:J}));for(var j=(V||12)/12,re=Y.positions,se=Y.cells,oe=0,N=se.length;oe<N;++oe)for(var U=se[oe],q=2;q>=0;--q){var Q=re[U[q]];h.push(j*Q[0],-j*Q[1],R)}}for(var u=[0,0,0],L=[0,0,0],S=[0,0,0],k=[0,0,0],P=1.25,z={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},I=0;I<3;++I){S[I]=h.length/i|0,x(.5*(l[0][I]+l[1][I]),_[I],s[I],12,P,z),k[I]=(h.length/i|0)-S[I],u[I]=h.length/i|0;for(var D=0;D<A[I].length;++D)!A[I][D].text||x(A[I][D].x,A[I][D].text,A[I][D].font||m,A[I][D].fontSize||12,P,z);L[I]=(h.length/i|0)-u[I]}this.buffer.update(h),this.tickOffset=u,this.tickCount=L,this.labelOffset=S,this.labelCount=k},p.drawTicks=function(l,_,s,A,m,h,x,u){!this.tickCount[l]||(this.shader.uniforms.axis=h,this.shader.uniforms.color=m,this.shader.uniforms.angle=s,this.shader.uniforms.scale=_,this.shader.uniforms.offset=A,this.shader.uniforms.alignDir=x,this.shader.uniforms.alignOpt=u,this.vao.draw(this.gl.TRIANGLES,this.tickCount[l],this.tickOffset[l]))},p.drawLabel=function(l,_,s,A,m,h,x,u){!this.labelCount[l]||(this.shader.uniforms.axis=h,this.shader.uniforms.color=m,this.shader.uniforms.angle=s,this.shader.uniforms.scale=_,this.shader.uniforms.offset=A,this.shader.uniforms.alignDir=x,this.shader.uniforms.alignOpt=u,this.vao.draw(this.gl.TRIANGLES,this.labelCount[l],this.labelOffset[l]))},p.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()};function c(l,_){try{return r(l,_)}catch(s){return console.warn('error vectorizing text:"'+l+'" error:',s),{cells:[],positions:[]}}}function b(l,_,s,A,m,h){var x=a(l),u=n(l,[{buffer:x,size:3}]),L=t(l);L.attributes.position.location=0;var S=new g(l,L,x,u);return S.update(_,s,A,m,h),S}}).call(this)}).call(this,v("_process"))},{"./shaders":74,_process:5,"gl-buffer":78,"gl-vao":150,"vectorize-text":311}],76:[function(v,M,T){T.create=a,T.equal=n;function e(r,t){var f=r+"",o=f.indexOf("."),i=0;o>=0&&(i=f.length-o-1);var g=Math.pow(10,i),p=Math.round(r*t*g),y=p+"";if(y.indexOf("e")>=0)return y;var c=p/g,b=p%g;p<0?(c=-Math.ceil(c)|0,b=-b|0):(c=Math.floor(c)|0,b=b|0);var l=""+c;if(p<0&&(l="-"+l),i){for(var _=""+b;_.length<i;)_="0"+_;return l+"."+_}else return l}function a(r,t){for(var f=[],o=0;o<3;++o){var i=[];.5*(r[0][o]+r[1][o]);for(var g=0;g*t[o]<=r[1][o];++g)i.push({x:g*t[o],text:e(t[o],g)});for(var g=-1;g*t[o]>=r[0][o];--g)i.push({x:g*t[o],text:e(t[o],g)});f.push(i)}return f}function n(r,t){for(var f=0;f<3;++f){if(r[f].length!==t[f].length)return!1;for(var o=0;o<r[f].length;++o){var i=r[f][o],g=t[f][o];if(i.x!==g.x||i.text!==g.text||i.font!==g.font||i.fontColor!==g.fontColor||i.fontSize!==g.fontSize||i.dx!==g.dx||i.dy!==g.dy)return!1}}return!0}},{}],77:[function(v,M,T){M.exports=_;var e=v("extract-frustum-planes"),a=v("split-polygon"),n=v("./lib/cube.js"),r=v("gl-mat4/multiply"),t=v("gl-mat4/transpose"),f=v("gl-vec4/transformMat4"),o=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),i=new Float32Array(16);function g(s,A,m){this.lo=s,this.hi=A,this.pixelsPerDataUnit=m}var p=[0,0,0,1],y=[0,0,0,1];function c(s,A,m,h,x){for(var u=0;u<3;++u){for(var L=p,S=y,k=0;k<3;++k)S[k]=L[k]=m[k];S[3]=L[3]=1,S[u]+=1,f(S,S,A),S[3]<0&&(s[u]=1/0),L[u]-=1,f(L,L,A),L[3]<0&&(s[u]=1/0);var P=(L[0]/L[3]-S[0]/S[3])*h,z=(L[1]/L[3]-S[1]/S[3])*x;s[u]=.25*Math.sqrt(P*P+z*z)}return s}var b=[new g(1/0,-1/0,1/0),new g(1/0,-1/0,1/0),new g(1/0,-1/0,1/0)],l=[0,0,0];function _(s,A,m,h,z){var u=A.model||o,L=A.view||o,S=A.projection||o,k=A._ortho||!1,P=s.bounds,z=z||n(u,L,S,P,k),I=z.axis;r(i,L,u),r(i,S,i);for(var D=b,R=0;R<3;++R)D[R].lo=1/0,D[R].hi=-1/0,D[R].pixelsPerDataUnit=1/0;var O=e(t(i,i));t(i,i);for(var F=0;F<3;++F){var V=(F+1)%3,G=(F+2)%3,J=l;e:for(var R=0;R<2;++R){var Z=[];if(I[F]<0!=!!R){J[F]=P[R][F];for(var Y=0;Y<2;++Y){J[V]=P[Y^R][V];for(var j=0;j<2;++j)J[G]=P[j^Y^R][G],Z.push(J.slice())}for(var re=k?5:4,Y=re;Y===re;++Y){if(Z.length===0)continue e;Z=a.positive(Z,O[Y])}for(var Y=0;Y<Z.length;++Y)for(var G=Z[Y],se=c(l,i,G,m,h),j=0;j<3;++j)D[j].lo=Math.min(D[j].lo,G[j]),D[j].hi=Math.max(D[j].hi,G[j]),j!==F&&(D[j].pixelsPerDataUnit=Math.min(D[j].pixelsPerDataUnit,Math.abs(se[j])))}}}return D}},{"./lib/cube.js":72,"extract-frustum-planes":67,"gl-mat4/multiply":100,"gl-mat4/transpose":109,"gl-vec4/transformMat4":221,"split-polygon":300}],78:[function(v,M,T){var e=v("typedarray-pool"),a=v("ndarray-ops"),n=v("ndarray"),r=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function t(y,c,b,l,_){this.gl=y,this.type=c,this.handle=b,this.length=l,this.usage=_}var f=t.prototype;f.bind=function(){this.gl.bindBuffer(this.type,this.handle)},f.unbind=function(){this.gl.bindBuffer(this.type,null)},f.dispose=function(){this.gl.deleteBuffer(this.handle)};function o(y,c,b,l,_,s){var A=_.length*_.BYTES_PER_ELEMENT;if(s<0)return y.bufferData(c,_,l),A;if(A+s>b)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return y.bufferSubData(c,s,_),b}function i(y,c){for(var b=e.malloc(y.length,c),l=y.length,_=0;_<l;++_)b[_]=y[_];return b}function g(y,c){for(var b=1,l=c.length-1;l>=0;--l){if(c[l]!==b)return!1;b*=y[l]}return!0}f.update=function(y,c){if(typeof c!="number"&&(c=-1),this.bind(),typeof y=="object"&&typeof y.shape<"u"){var b=y.dtype;if(r.indexOf(b)<0&&(b="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var l=gl.getExtension("OES_element_index_uint");l&&b!=="uint16"?b="uint32":b="uint16"}if(b===y.dtype&&g(y.shape,y.stride))y.offset===0&&y.data.length===y.shape[0]?this.length=o(this.gl,this.type,this.length,this.usage,y.data,c):this.length=o(this.gl,this.type,this.length,this.usage,y.data.subarray(y.offset,y.shape[0]),c);else{var _=e.malloc(y.size,b),s=n(_,y.shape);a.assign(s,y),c<0?this.length=o(this.gl,this.type,this.length,this.usage,_,c):this.length=o(this.gl,this.type,this.length,this.usage,_.subarray(0,y.size),c),e.free(_)}}else if(Array.isArray(y)){var A;this.type===this.gl.ELEMENT_ARRAY_BUFFER?A=i(y,"uint16"):A=i(y,"float32"),c<0?this.length=o(this.gl,this.type,this.length,this.usage,A,c):this.length=o(this.gl,this.type,this.length,this.usage,A.subarray(0,y.length),c),e.free(A)}else if(typeof y=="object"&&typeof y.length=="number")this.length=o(this.gl,this.type,this.length,this.usage,y,c);else if(typeof y=="number"||y===void 0){if(c>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");y=y|0,y<=0&&(y=1),this.gl.bufferData(this.type,y|0,this.usage),this.length=y}else throw new Error("gl-buffer: Invalid data type")};function p(y,c,b,l){if(b=b||y.ARRAY_BUFFER,l=l||y.DYNAMIC_DRAW,b!==y.ARRAY_BUFFER&&b!==y.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(l!==y.DYNAMIC_DRAW&&l!==y.STATIC_DRAW&&l!==y.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var _=y.createBuffer(),s=new t(y,b,_,0,l);return s.update(c),s}M.exports=p},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],79:[function(v,M,T){var e=v("gl-vec3");M.exports=function(n,r){var t=n.positions,f=n.vectors,o={positions:[],vertexIntensity:[],vertexIntensityBounds:n.vertexIntensityBounds,vectors:[],cells:[],coneOffset:n.coneOffset,colormap:n.colormap};if(n.positions.length===0)return r&&(r[0]=[0,0,0],r[1]=[0,0,0]),o;for(var i=0,g=1/0,p=-1/0,y=1/0,c=-1/0,b=1/0,l=-1/0,_=null,s=null,A=[],m=1/0,h=!1,x=0;x<t.length;x++){var u=t[x];g=Math.min(u[0],g),p=Math.max(u[0],p),y=Math.min(u[1],y),c=Math.max(u[1],c),b=Math.min(u[2],b),l=Math.max(u[2],l);var L=f[x];if(e.length(L)>i&&(i=e.length(L)),x){var S=2*e.distance(_,u)/(e.length(s)+e.length(L));S?(m=Math.min(m,S),h=!1):h=!0}h||(_=u,s=L),A.push(L)}var k=[g,y,b],P=[p,c,l];r&&(r[0]=k,r[1]=P),i===0&&(i=1);var z=1/i;isFinite(m)||(m=1),o.vectorScale=m;var I=n.coneSize||.5;n.absoluteConeSize&&(I=n.absoluteConeSize*z),o.coneScale=I;for(var x=0,D=0;x<t.length;x++)for(var u=t[x],R=u[0],O=u[1],F=u[2],V=A[x],G=e.length(V)*z,J=0,Z=8;J<Z;J++){o.positions.push([R,O,F,D++]),o.positions.push([R,O,F,D++]),o.positions.push([R,O,F,D++]),o.positions.push([R,O,F,D++]),o.positions.push([R,O,F,D++]),o.positions.push([R,O,F,D++]),o.vectors.push(V),o.vectors.push(V),o.vectors.push(V),o.vectors.push(V),o.vectors.push(V),o.vectors.push(V),o.vertexIntensity.push(G,G,G),o.vertexIntensity.push(G,G,G);var Y=o.positions.length;o.cells.push([Y-6,Y-5,Y-4],[Y-3,Y-2,Y-1])}return o};var a=v("./lib/shaders");M.exports.createMesh=v("./create_mesh"),M.exports.createConeMesh=function(n,r){return M.exports.createMesh(n,r,{shaders:a,traceType:"cone"})}},{"./create_mesh":80,"./lib/shaders":81,"gl-vec3":169}],80:[function(v,M,T){var e=v("gl-shader"),a=v("gl-buffer"),n=v("gl-vao"),r=v("gl-texture2d"),t=v("gl-mat4/multiply"),f=v("gl-mat4/invert"),o=v("ndarray"),i=v("colormap"),g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function p(A,m,h,x,u,L,S,k,P,z,I){this.gl=A,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=m,this.dirty=!0,this.triShader=h,this.pickShader=x,this.trianglePositions=u,this.triangleVectors=L,this.triangleColors=k,this.triangleUVs=P,this.triangleIds=S,this.triangleVAO=z,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=I,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=g,this._view=g,this._projection=g,this._resolution=[1,1]}var y=p.prototype;y.isOpaque=function(){return this.opacity>=1},y.isTransparent=function(){return this.opacity<1},y.pickSlots=1,y.setPickBase=function(A){this.pickId=A};function c(A){for(var m=i({colormap:A,nshades:256,format:"rgba"}),h=new Uint8Array(256*4),x=0;x<256;++x){for(var u=m[x],L=0;L<3;++L)h[4*x+L]=u[L];h[4*x+3]=u[3]*255}return o(h,[256,256,4],[4,0,1])}function b(A){for(var m=A.length,h=new Array(m),x=0;x<m;++x)h[x]=A[x][2];return h}y.update=function(A){A=A||{};var m=this.gl;this.dirty=!0,"lightPosition"in A&&(this.lightPosition=A.lightPosition),"opacity"in A&&(this.opacity=A.opacity),"ambient"in A&&(this.ambientLight=A.ambient),"diffuse"in A&&(this.diffuseLight=A.diffuse),"specular"in A&&(this.specularLight=A.specular),"roughness"in A&&(this.roughness=A.roughness),"fresnel"in A&&(this.fresnel=A.fresnel),A.tubeScale!==void 0&&(this.tubeScale=A.tubeScale),A.vectorScale!==void 0&&(this.vectorScale=A.vectorScale),A.coneScale!==void 0&&(this.coneScale=A.coneScale),A.coneOffset!==void 0&&(this.coneOffset=A.coneOffset),A.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=m.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=m.LINEAR,this.texture.setPixels(c(A.colormap)),this.texture.generateMipmap());var h=A.cells,x=A.positions,u=A.vectors;if(!x||!h||!u)return;var L=[],S=[],k=[],P=[],z=[];this.cells=h,this.positions=x,this.vectors=u;var I=A.meshColor||[1,1,1,1],D=A.vertexIntensity,R=1/0,O=-1/0;if(D)if(A.vertexIntensityBounds)R=+A.vertexIntensityBounds[0],O=+A.vertexIntensityBounds[1];else for(var F=0;F<D.length;++F){var V=D[F];R=Math.min(R,V),O=Math.max(O,V)}else for(var F=0;F<x.length;++F){var V=x[F][2];R=Math.min(R,V),O=Math.max(O,V)}D?this.intensity=D:this.intensity=b(x),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var F=0;F<x.length;++F)for(var G=x[F],J=0;J<3;++J)isNaN(G[J])||!isFinite(G[J])||(this.bounds[0][J]=Math.min(this.bounds[0][J],G[J]),this.bounds[1][J]=Math.max(this.bounds[1][J],G[J]));var Z=0;e:for(var F=0;F<h.length;++F){var Y=h[F];switch(Y.length){case 3:for(var J=0;J<3;++J)for(var j=Y[J],G=x[j],re=0;re<3;++re)if(isNaN(G[re])||!isFinite(G[re]))continue e;for(var J=0;J<3;++J){var j=Y[2-J],G=x[j];L.push(G[0],G[1],G[2],G[3]);var se=u[j];S.push(se[0],se[1],se[2],se[3]||0);var oe=I;oe.length===3?k.push(oe[0],oe[1],oe[2],1):k.push(oe[0],oe[1],oe[2],oe[3]);var N;D?N=[(D[j]-R)/(O-R),0]:N=[(G[2]-R)/(O-R),0],P.push(N[0],N[1]),z.push(F)}Z+=1;break}}this.triangleCount=Z,this.trianglePositions.update(L),this.triangleVectors.update(S),this.triangleColors.update(k),this.triangleUVs.update(P),this.triangleIds.update(new Uint32Array(z))},y.drawTransparent=y.draw=function(A){A=A||{};for(var m=this.gl,h=A.model||g,x=A.view||g,u=A.projection||g,L=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],S=0;S<3;++S)L[0][S]=Math.max(L[0][S],this.clipBounds[0][S]),L[1][S]=Math.min(L[1][S],this.clipBounds[1][S]);var k={model:h,view:x,projection:u,inverseModel:g.slice(),clipBounds:L,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};k.inverseModel=f(k.inverseModel,k.model),m.disable(m.CULL_FACE),this.texture.bind(0);var P=new Array(16);t(P,k.view,k.model),t(P,k.projection,P),f(P,P);for(var S=0;S<3;++S)k.eyePosition[S]=P[12+S]/P[15];for(var z=P[15],S=0;S<3;++S)z+=this.lightPosition[S]*P[4*S+3];for(var S=0;S<3;++S){for(var I=P[12+S],D=0;D<3;++D)I+=P[4*D+S]*this.lightPosition[D];k.lightPosition[S]=I/z}if(this.triangleCount>0){var R=this.triShader;R.bind(),R.uniforms=k,this.triangleVAO.bind(),m.drawArrays(m.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}},y.drawPick=function(A){A=A||{};for(var m=this.gl,h=A.model||g,x=A.view||g,u=A.projection||g,L=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],S=0;S<3;++S)L[0][S]=Math.max(L[0][S],this.clipBounds[0][S]),L[1][S]=Math.min(L[1][S],this.clipBounds[1][S]);this._model=[].slice.call(h),this._view=[].slice.call(x),this._projection=[].slice.call(u),this._resolution=[m.drawingBufferWidth,m.drawingBufferHeight];var k={model:h,view:x,projection:u,clipBounds:L,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},P=this.pickShader;P.bind(),P.uniforms=k,this.triangleCount>0&&(this.triangleVAO.bind(),m.drawArrays(m.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind())},y.pick=function(A){if(!A||A.id!==this.pickId)return null;var m=A.value[0]+256*A.value[1]+65536*A.value[2],h=this.cells[m],x=this.positions[h[1]].slice(0,3),u={position:x,dataCoordinate:x,index:Math.floor(h[1]/48)};return this.traceType==="cone"?u.index=Math.floor(h[1]/48):this.traceType==="streamtube"&&(u.intensity=this.intensity[h[1]],u.velocity=this.vectors[h[1]].slice(0,3),u.divergence=this.vectors[h[1]][3],u.index=m),u},y.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()};function l(A,m){var h=e(A,m.meshShader.vertex,m.meshShader.fragment,null,m.meshShader.attributes);return h.attributes.position.location=0,h.attributes.color.location=2,h.attributes.uv.location=3,h.attributes.vector.location=4,h}function _(A,m){var h=e(A,m.pickShader.vertex,m.pickShader.fragment,null,m.pickShader.attributes);return h.attributes.position.location=0,h.attributes.id.location=1,h.attributes.vector.location=4,h}function s(A,m,h){var x=h.shaders;arguments.length===1&&(m=A,A=m.gl);var u=l(A,x),L=_(A,x),S=r(A,o(new Uint8Array([255,255,255,255]),[1,1,4]));S.generateMipmap(),S.minFilter=A.LINEAR_MIPMAP_LINEAR,S.magFilter=A.LINEAR;var k=a(A),P=a(A),z=a(A),I=a(A),D=a(A),R=n(A,[{buffer:k,type:A.FLOAT,size:4},{buffer:D,type:A.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:z,type:A.FLOAT,size:4},{buffer:I,type:A.FLOAT,size:2},{buffer:P,type:A.FLOAT,size:4}]),O=new p(A,S,u,L,k,P,D,z,I,R,h.traceType||"cone");return O.update(m),O}M.exports=s},{colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259}],81:[function(v,M,T){var e=v("glslify"),a=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),n=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),r=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),t=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);T.meshShader={vertex:a,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},T.pickShader={vertex:r,fragment:t,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:231}],82:[function(v,M,T){M.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],83:[function(v,M,T){var e=v("./1.0/numbers");M.exports=function(n){return e[n]}},{"./1.0/numbers":82}],84:[function(v,M,T){M.exports=p;var e=v("gl-buffer"),a=v("gl-vao"),n=v("./shaders/index"),r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function t(y,c,b,l){this.gl=y,this.shader=l,this.buffer=c,this.vao=b,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var f=t.prototype;f.isOpaque=function(){return!this.hasAlpha},f.isTransparent=function(){return this.hasAlpha},f.drawTransparent=f.draw=function(y){var c=this.gl,b=this.shader.uniforms;this.shader.bind();var l=b.view=y.view||r,_=b.projection=y.projection||r;b.model=y.model||r,b.clipBounds=this.clipBounds,b.opacity=this.opacity;var s=l[12],A=l[13],m=l[14],h=l[15],x=y._ortho||!1,u=x?2:1,L=u*this.pixelRatio*(_[3]*s+_[7]*A+_[11]*m+_[15]*h)/c.drawingBufferHeight;this.vao.bind();for(var S=0;S<3;++S)c.lineWidth(this.lineWidth[S]*this.pixelRatio),b.capSize=this.capSize[S]*L,this.lineCount[S]&&c.drawArrays(c.LINES,this.lineOffset[S],this.lineCount[S]);this.vao.unbind()};function o(y,c){for(var b=0;b<3;++b)y[0][b]=Math.min(y[0][b],c[b]),y[1][b]=Math.max(y[1][b],c[b])}var i=function(){for(var y=new Array(3),c=0;c<3;++c){for(var b=[],l=1;l<=2;++l)for(var _=-1;_<=1;_+=2){var s=(l+c)%3,A=[0,0,0];A[s]=_,b.push(A)}y[c]=b}return y}();function g(y,c,b,l){for(var _=i[l],s=0;s<_.length;++s){var A=_[s];y.push(c[0],c[1],c[2],b[0],b[1],b[2],b[3],A[0],A[1],A[2])}return _.length}f.update=function(y){y=y||{},"lineWidth"in y&&(this.lineWidth=y.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in y&&(this.capSize=y.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in y&&(this.opacity=+y.opacity,this.opacity<1&&(this.hasAlpha=!0));var c=y.color||[[0,0,0],[0,0,0],[0,0,0]],b=y.position,l=y.error;if(Array.isArray(c[0])||(c=[c,c,c]),b&&l){var _=[],s=b.length,A=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var m=0;m<3;++m){this.lineOffset[m]=A;e:for(var h=0;h<s;++h){for(var x=b[h],u=0;u<3;++u)if(isNaN(x[u])||!isFinite(x[u]))continue e;var L=l[h],S=c[m];if(Array.isArray(S[0])&&(S=c[h]),S.length===3?S=[S[0],S[1],S[2],1]:S.length===4&&(S=[S[0],S[1],S[2],S[3]],!this.hasAlpha&&S[3]<1&&(this.hasAlpha=!0)),!(isNaN(L[0][m])||isNaN(L[1][m]))){if(L[0][m]<0){var k=x.slice();k[m]+=L[0][m],_.push(x[0],x[1],x[2],S[0],S[1],S[2],S[3],0,0,0,k[0],k[1],k[2],S[0],S[1],S[2],S[3],0,0,0),o(this.bounds,k),A+=2+g(_,k,S,m)}if(L[1][m]>0){var k=x.slice();k[m]+=L[1][m],_.push(x[0],x[1],x[2],S[0],S[1],S[2],S[3],0,0,0,k[0],k[1],k[2],S[0],S[1],S[2],S[3],0,0,0),o(this.bounds,k),A+=2+g(_,k,S,m)}}}this.lineCount[m]=A-this.lineOffset[m]}this.buffer.update(_)}},f.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()};function p(y){var c=y.gl,b=e(c),l=a(c,[{buffer:b,type:c.FLOAT,size:3,offset:0,stride:40},{buffer:b,type:c.FLOAT,size:4,offset:12,stride:40},{buffer:b,type:c.FLOAT,size:3,offset:28,stride:40}]),_=n(c);_.attributes.position.location=0,_.attributes.color.location=1,_.attributes.offset.location=2;var s=new t(c,b,l,_);return s.update(y),s}},{"./shaders/index":85,"gl-buffer":78,"gl-vao":150}],85:[function(v,M,T){var e=v("glslify"),a=v("gl-shader"),n=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),r=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);M.exports=function(t){return a(t,n,r,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":132,glslify:231}],86:[function(v,M,T){var e=v("gl-texture2d");M.exports=A;var a=null,n,r,t,f;function o(m){var h=m.getParameter(m.FRAMEBUFFER_BINDING),x=m.getParameter(m.RENDERBUFFER_BINDING),u=m.getParameter(m.TEXTURE_BINDING_2D);return[h,x,u]}function i(m,h){m.bindFramebuffer(m.FRAMEBUFFER,h[0]),m.bindRenderbuffer(m.RENDERBUFFER,h[1]),m.bindTexture(m.TEXTURE_2D,h[2])}function g(m,h){var x=m.getParameter(h.MAX_COLOR_ATTACHMENTS_WEBGL);a=new Array(x+1);for(var u=0;u<=x;++u){for(var L=new Array(x),S=0;S<u;++S)L[S]=m.COLOR_ATTACHMENT0+S;for(var S=u;S<x;++S)L[S]=m.NONE;a[u]=L}}function p(m){switch(m){case n:throw new Error("gl-fbo: Framebuffer unsupported");case r:throw new Error("gl-fbo: Framebuffer incomplete attachment");case t:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case f:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function y(m,h,x,u,L,S){if(!u)return null;var k=e(m,h,x,L,u);return k.magFilter=m.NEAREST,k.minFilter=m.NEAREST,k.mipSamples=1,k.bind(),m.framebufferTexture2D(m.FRAMEBUFFER,S,m.TEXTURE_2D,k.handle,0),k}function c(m,h,x,u,L){var S=m.createRenderbuffer();return m.bindRenderbuffer(m.RENDERBUFFER,S),m.renderbufferStorage(m.RENDERBUFFER,u,h,x),m.framebufferRenderbuffer(m.FRAMEBUFFER,L,m.RENDERBUFFER,S),S}function b(m){var h=o(m.gl),x=m.gl,u=m.handle=x.createFramebuffer(),L=m._shape[0],S=m._shape[1],k=m.color.length,P=m._ext,z=m._useStencil,I=m._useDepth,D=m._colorType;x.bindFramebuffer(x.FRAMEBUFFER,u);for(var R=0;R<k;++R)m.color[R]=y(x,L,S,D,x.RGBA,x.COLOR_ATTACHMENT0+R);k===0?(m._color_rb=c(x,L,S,x.RGBA4,x.COLOR_ATTACHMENT0),P&&P.drawBuffersWEBGL(a[0])):k>1&&P.drawBuffersWEBGL(a[k]);var O=x.getExtension("WEBGL_depth_texture");O?z?m.depth=y(x,L,S,O.UNSIGNED_INT_24_8_WEBGL,x.DEPTH_STENCIL,x.DEPTH_STENCIL_ATTACHMENT):I&&(m.depth=y(x,L,S,x.UNSIGNED_SHORT,x.DEPTH_COMPONENT,x.DEPTH_ATTACHMENT)):I&&z?m._depth_rb=c(x,L,S,x.DEPTH_STENCIL,x.DEPTH_STENCIL_ATTACHMENT):I?m._depth_rb=c(x,L,S,x.DEPTH_COMPONENT16,x.DEPTH_ATTACHMENT):z&&(m._depth_rb=c(x,L,S,x.STENCIL_INDEX,x.STENCIL_ATTACHMENT));var F=x.checkFramebufferStatus(x.FRAMEBUFFER);if(F!==x.FRAMEBUFFER_COMPLETE){m._destroyed=!0,x.bindFramebuffer(x.FRAMEBUFFER,null),x.deleteFramebuffer(m.handle),m.handle=null,m.depth&&(m.depth.dispose(),m.depth=null),m._depth_rb&&(x.deleteRenderbuffer(m._depth_rb),m._depth_rb=null);for(var R=0;R<m.color.length;++R)m.color[R].dispose(),m.color[R]=null;m._color_rb&&(x.deleteRenderbuffer(m._color_rb),m._color_rb=null),i(x,h),p(F)}i(x,h)}function l(m,h,x,u,L,S,k,P){this.gl=m,this._shape=[h|0,x|0],this._destroyed=!1,this._ext=P,this.color=new Array(L);for(var z=0;z<L;++z)this.color[z]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=u,this._useDepth=S,this._useStencil=k;var I=this,D=[h|0,x|0];Object.defineProperties(D,{0:{get:function(){return I._shape[0]},set:function(R){return I.width=R}},1:{get:function(){return I._shape[1]},set:function(R){return I.height=R}}}),this._shapeVector=D,b(this)}var _=l.prototype;function s(m,h,x){if(m._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(!(m._shape[0]===h&&m._shape[1]===x)){var u=m.gl,L=u.getParameter(u.MAX_RENDERBUFFER_SIZE);if(h<0||h>L||x<0||x>L)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");m._shape[0]=h,m._shape[1]=x;for(var S=o(u),k=0;k<m.color.length;++k)m.color[k].shape=m._shape;m._color_rb&&(u.bindRenderbuffer(u.RENDERBUFFER,m._color_rb),u.renderbufferStorage(u.RENDERBUFFER,u.RGBA4,m._shape[0],m._shape[1])),m.depth&&(m.depth.shape=m._shape),m._depth_rb&&(u.bindRenderbuffer(u.RENDERBUFFER,m._depth_rb),m._useDepth&&m._useStencil?u.renderbufferStorage(u.RENDERBUFFER,u.DEPTH_STENCIL,m._shape[0],m._shape[1]):m._useDepth?u.renderbufferStorage(u.RENDERBUFFER,u.DEPTH_COMPONENT16,m._shape[0],m._shape[1]):m._useStencil&&u.renderbufferStorage(u.RENDERBUFFER,u.STENCIL_INDEX,m._shape[0],m._shape[1])),u.bindFramebuffer(u.FRAMEBUFFER,m.handle);var P=u.checkFramebufferStatus(u.FRAMEBUFFER);P!==u.FRAMEBUFFER_COMPLETE&&(m.dispose(),i(u,S),p(P)),i(u,S)}}Object.defineProperties(_,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(m){if(Array.isArray(m)||(m=[m|0,m|0]),m.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var h=m[0]|0,x=m[1]|0;return s(this,h,x),[h,x]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(m){return m=m|0,s(this,m,this._shape[1]),m},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(m){return m=m|0,s(this,this._shape[0],m),m},enumerable:!1}}),_.bind=function(){if(!this._destroyed){var m=this.gl;m.bindFramebuffer(m.FRAMEBUFFER,this.handle),m.viewport(0,0,this._shape[0],this._shape[1])}},_.dispose=function(){if(!this._destroyed){this._destroyed=!0;var m=this.gl;m.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(m.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var h=0;h<this.color.length;++h)this.color[h].dispose(),this.color[h]=null;this._color_rb&&(m.deleteRenderbuffer(this._color_rb),this._color_rb=null)}};function A(m,h,x,u){n||(n=m.FRAMEBUFFER_UNSUPPORTED,r=m.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,t=m.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,f=m.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var L=m.getExtension("WEBGL_draw_buffers");if(!a&&L&&g(m,L),Array.isArray(h)&&(u=x,x=h[1]|0,h=h[0]|0),typeof h!="number")throw new Error("gl-fbo: Missing shape parameter");var S=m.getParameter(m.MAX_RENDERBUFFER_SIZE);if(h<0||h>S||x<0||x>S)throw new Error("gl-fbo: Parameters are too large for FBO");u=u||{};var k=1;if("color"in u){if(k=Math.max(u.color|0,0),k<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(k>1)if(L){if(k>m.getParameter(L.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+k+" draw buffers")}else throw new Error("gl-fbo: Multiple draw buffer extension not supported")}var P=m.UNSIGNED_BYTE,z=m.getExtension("OES_texture_float");if(u.float&&k>0){if(!z)throw new Error("gl-fbo: Context does not support floating point textures");P=m.FLOAT}else u.preferFloat&&k>0&&z&&(P=m.FLOAT);var I=!0;"depth"in u&&(I=!!u.depth);var D=!1;return"stencil"in u&&(D=!!u.stencil),new l(m,h,x,P,k,I,D,L)}},{"gl-texture2d":146}],87:[function(v,M,T){var e=v("sprintf-js").sprintf,a=v("gl-constants/lookup"),n=v("glsl-shader-name"),r=v("add-line-numbers");M.exports=t;function t(f,o,i){var g=n(o)||"of unknown name (see npm glsl-shader-name)",p="unknown type";i!==void 0&&(p=i===a.FRAGMENT_SHADER?"fragment":"vertex");for(var y=e(`Error compiling %s shader %s:
`,p,g),c=e("%s%s",y,f),b=f.split(`
`),l={},_=0;_<b.length;_++){var s=b[_];if(!(s===""||s==="\0")){var A=parseInt(s.split(":")[2]);if(isNaN(A))throw new Error(e("Could not parse error: %s",s));l[A]=s}}for(var m=r(o).split(`
`),_=0;_<m.length;_++)if(!(!l[_+3]&&!l[_+2]&&!l[_+1])){var h=m[_];if(y+=h+`
`,l[_+1]){var x=l[_+1];x=x.substr(x.split(":",3).join(":").length+1).trim(),y+=e(`^^^ %s

`,x)}}return{long:y.trim(),short:c.trim()}}},{"add-line-numbers":9,"gl-constants/lookup":83,"glsl-shader-name":223,"sprintf-js":301}],88:[function(v,M,T){M.exports=p;var e=v("binary-search-bounds"),a=v("iota-array"),n=v("typedarray-pool"),r=v("gl-shader"),t=v("gl-buffer"),f=v("./lib/shaders");function o(y,c,b,l,_,s,A){this.plot=y,this.shader=c,this.pickShader=b,this.positionBuffer=l,this.weightBuffer=_,this.colorBuffer=s,this.idBuffer=A,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var i=o.prototype,g=[0,0,1,0,0,1,1,0,1,1,0,1];i.draw=function(){var y=[1,0,0,0,1,0,0,0,1];return function(){var c=this.plot,b=this.shader,l=this.bounds,_=this.numVertices;if(!(_<=0)){var s=c.gl,A=c.dataBox,m=l[2]-l[0],h=l[3]-l[1],x=A[2]-A[0],u=A[3]-A[1];y[0]=2*m/x,y[4]=2*h/u,y[6]=2*(l[0]-A[0])/x-1,y[7]=2*(l[1]-A[1])/u-1,b.bind();var L=b.uniforms;L.viewTransform=y,L.shape=this.shape;var S=b.attributes;this.positionBuffer.bind(),S.position.pointer(),this.weightBuffer.bind(),S.weight.pointer(s.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),S.color.pointer(s.UNSIGNED_BYTE,!0),s.drawArrays(s.TRIANGLES,0,_)}}}(),i.drawPick=function(){var y=[1,0,0,0,1,0,0,0,1],c=[0,0,0,0];return function(b){var l=this.plot,_=this.pickShader,s=this.bounds,A=this.numVertices;if(!(A<=0)){var m=l.gl,h=l.dataBox,x=s[2]-s[0],u=s[3]-s[1],L=h[2]-h[0],S=h[3]-h[1];y[0]=2*x/L,y[4]=2*u/S,y[6]=2*(s[0]-h[0])/L-1,y[7]=2*(s[1]-h[1])/S-1;for(var k=0;k<4;++k)c[k]=b>>k*8&255;this.pickOffset=b,_.bind();var P=_.uniforms;P.viewTransform=y,P.pickOffset=c,P.shape=this.shape;var z=_.attributes;return this.positionBuffer.bind(),z.position.pointer(),this.weightBuffer.bind(),z.weight.pointer(m.UNSIGNED_BYTE,!1),this.idBuffer.bind(),z.pickId.pointer(m.UNSIGNED_BYTE,!1),m.drawArrays(m.TRIANGLES,0,A),b+this.shape[0]*this.shape[1]}}}(),i.pick=function(y,c,b){var l=this.pickOffset,_=this.shape[0]*this.shape[1];if(b<l||b>=l+_)return null;var s=b-l,A=this.xData,m=this.yData;return{object:this,pointId:s,dataCoord:[A[s%this.shape[0]],m[s/this.shape[0]|0]]}},i.update=function(y){y=y||{};var c=y.shape||[0,0],b=y.x||a(c[0]),l=y.y||a(c[1]),_=y.z||new Float32Array(c[0]*c[1]),s=y.zsmooth!==!1;this.xData=b,this.yData=l;var A=y.colorLevels||[0],m=y.colorValues||[0,0,0,1],h=A.length,x=this.bounds,u,L,S,k;s?(u=x[0]=b[0],L=x[1]=l[0],S=x[2]=b[b.length-1],k=x[3]=l[l.length-1]):(u=x[0]=b[0]+(b[1]-b[0])/2,L=x[1]=l[0]+(l[1]-l[0])/2,S=x[2]=b[b.length-1]+(b[b.length-1]-b[b.length-2])/2,k=x[3]=l[l.length-1]+(l[l.length-1]-l[l.length-2])/2);var P=1/(S-u),z=1/(k-L),I=c[0],D=c[1];this.shape=[I,D];var R=(s?(I-1)*(D-1):I*D)*(g.length>>>1);this.numVertices=R;for(var O=n.mallocUint8(R*4),F=n.mallocFloat32(R*2),V=n.mallocUint8(R*2),G=n.mallocUint32(R),J=0,Z=s?I-1:I,Y=s?D-1:D,j=0;j<Y;++j){var re,se;s?(re=z*(l[j]-L),se=z*(l[j+1]-L)):(re=j<D-1?z*(l[j]-(l[j+1]-l[j])/2-L):z*(l[j]-(l[j]-l[j-1])/2-L),se=j<D-1?z*(l[j]+(l[j+1]-l[j])/2-L):z*(l[j]+(l[j]-l[j-1])/2-L));for(var oe=0;oe<Z;++oe){var N,U;s?(N=P*(b[oe]-u),U=P*(b[oe+1]-u)):(N=oe<I-1?P*(b[oe]-(b[oe+1]-b[oe])/2-u):P*(b[oe]-(b[oe]-b[oe-1])/2-u),U=oe<I-1?P*(b[oe]+(b[oe+1]-b[oe])/2-u):P*(b[oe]+(b[oe]-b[oe-1])/2-u));for(var q=0;q<g.length;q+=2){var Q=g[q],W=g[q+1],X=s?(j+W)*I+(oe+Q):j*I+oe,ee=_[X],te=e.le(A,ee),ie,le,ge,fe;if(te<0)ie=m[0],le=m[1],ge=m[2],fe=m[3];else if(te===h-1)ie=m[4*h-4],le=m[4*h-3],ge=m[4*h-2],fe=m[4*h-1];else{var pe=(ee-A[te])/(A[te+1]-A[te]),ye=1-pe,Te=4*te,_e=4*(te+1);ie=ye*m[Te]+pe*m[_e],le=ye*m[Te+1]+pe*m[_e+1],ge=ye*m[Te+2]+pe*m[_e+2],fe=ye*m[Te+3]+pe*m[_e+3]}O[4*J]=255*ie,O[4*J+1]=255*le,O[4*J+2]=255*ge,O[4*J+3]=255*fe,F[2*J]=N*.5+U*.5,F[2*J+1]=re*.5+se*.5,V[2*J]=Q,V[2*J+1]=W,G[J]=j*I+oe,J+=1}}}this.positionBuffer.update(F),this.weightBuffer.update(V),this.colorBuffer.update(O),this.idBuffer.update(G),n.free(F),n.free(O),n.free(V),n.free(G)},i.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)};function p(y,c){var b=y.gl,l=r(b,f.vertex,f.fragment),_=r(b,f.pickVertex,f.pickFragment),s=t(b),A=t(b),m=t(b),h=t(b),x=new o(y,l,_,s,A,m,h);return x.update(c),y.addObject(x),x}},{"./lib/shaders":89,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"iota-array":235,"typedarray-pool":308}],89:[function(v,M,T){var e=v("glslify");M.exports={fragment:e([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},{glslify:231}],90:[function(v,M,T){var e=v("glslify"),a=v("gl-shader"),n=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),r=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),t=e([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),f=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];T.createShader=function(o){return a(o,n,r,null,f)},T.createPickShader=function(o){return a(o,n,t,null,f)}},{"gl-shader":132,glslify:231}],91:[function(v,M,T){M.exports=m;var e=v("gl-buffer"),a=v("gl-vao"),n=v("gl-texture2d"),r=new Uint8Array(4),t=new Float32Array(r.buffer);function f(h,x,u,L){return r[0]=L,r[1]=u,r[2]=x,r[3]=h,t[0]}var o=v("binary-search-bounds"),i=v("ndarray"),g=v("./lib/shaders"),p=g.createShader,y=g.createPickShader,c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function b(h,x){for(var u=0,L=0;L<3;++L){var S=h[L]-x[L];u+=S*S}return Math.sqrt(u)}function l(h){for(var x=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],u=0;u<3;++u)x[0][u]=Math.max(h[0][u],x[0][u]),x[1][u]=Math.min(h[1][u],x[1][u]);return x}function _(h,x,u,L){this.arcLength=h,this.position=x,this.index=u,this.dataCoordinate=L}function s(h,x,u,L,S,k){this.gl=h,this.shader=x,this.pickShader=u,this.buffer=L,this.vao=S,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=k,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var A=s.prototype;A.isTransparent=function(){return this.hasAlpha},A.isOpaque=function(){return!this.hasAlpha},A.pickSlots=1,A.setPickBase=function(h){this.pickId=h},A.drawTransparent=A.draw=function(h){if(!!this.vertexCount){var x=this.gl,u=this.shader,L=this.vao;u.bind(),u.uniforms={model:h.model||c,view:h.view||c,projection:h.projection||c,clipBounds:l(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[x.drawingBufferWidth,x.drawingBufferHeight],pixelRatio:this.pixelRatio},L.bind(),L.draw(x.TRIANGLE_STRIP,this.vertexCount),L.unbind()}},A.drawPick=function(h){if(!!this.vertexCount){var x=this.gl,u=this.pickShader,L=this.vao;u.bind(),u.uniforms={model:h.model||c,view:h.view||c,projection:h.projection||c,pickId:this.pickId,clipBounds:l(this.clipBounds),screenShape:[x.drawingBufferWidth,x.drawingBufferHeight],pixelRatio:this.pixelRatio},L.bind(),L.draw(x.TRIANGLE_STRIP,this.vertexCount),L.unbind()}},A.update=function(h){var x,u;this.dirty=!0;var L=!!h.connectGaps;"dashScale"in h&&(this.dashScale=h.dashScale),this.hasAlpha=!1,"opacity"in h&&(this.opacity=+h.opacity,this.opacity<1&&(this.hasAlpha=!0));var S=[],k=[],P=[],z=0,I=0,D=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],R=h.position||h.positions;if(R){var O=h.color||h.colors||[0,0,0,1],F=h.lineWidth||1,V=!1;e:for(x=1;x<R.length;++x){var G=R[x-1],J=R[x];for(k.push(z),P.push(G.slice()),u=0;u<3;++u){if(isNaN(G[u])||isNaN(J[u])||!isFinite(G[u])||!isFinite(J[u])){if(!L&&S.length>0){for(var Z=0;Z<24;++Z)S.push(S[S.length-12]);I+=2,V=!0}continue e}D[0][u]=Math.min(D[0][u],G[u],J[u]),D[1][u]=Math.max(D[1][u],G[u],J[u])}var Y,j;Array.isArray(O[0])?(Y=O.length>x-1?O[x-1]:O.length>0?O[O.length-1]:[0,0,0,1],j=O.length>x?O[x]:O.length>0?O[O.length-1]:[0,0,0,1]):Y=j=O,Y.length===3&&(Y=[Y[0],Y[1],Y[2],1]),j.length===3&&(j=[j[0],j[1],j[2],1]),!this.hasAlpha&&Y[3]<1&&(this.hasAlpha=!0);var re;Array.isArray(F)?re=F.length>x-1?F[x-1]:F.length>0?F[F.length-1]:[0,0,0,1]:re=F;var se=z;if(z+=b(G,J),V){for(u=0;u<2;++u)S.push(G[0],G[1],G[2],J[0],J[1],J[2],se,re,Y[0],Y[1],Y[2],Y[3]);I+=2,V=!1}S.push(G[0],G[1],G[2],J[0],J[1],J[2],se,re,Y[0],Y[1],Y[2],Y[3],G[0],G[1],G[2],J[0],J[1],J[2],se,-re,Y[0],Y[1],Y[2],Y[3],J[0],J[1],J[2],G[0],G[1],G[2],z,-re,j[0],j[1],j[2],j[3],J[0],J[1],J[2],G[0],G[1],G[2],z,re,j[0],j[1],j[2],j[3]),I+=4}}if(this.buffer.update(S),k.push(z),P.push(R[R.length-1].slice()),this.bounds=D,this.vertexCount=I,this.points=P,this.arcLength=k,"dashes"in h){var oe=h.dashes,N=oe.slice();for(N.unshift(0),x=1;x<N.length;++x)N[x]=N[x-1]+N[x];var U=i(new Array(256*4),[256,1,4]);for(x=0;x<256;++x){for(u=0;u<4;++u)U.set(x,0,u,0);o.le(N,N[N.length-1]*x/255)&1?U.set(x,0,0,0):U.set(x,0,0,255)}this.texture.setPixels(U)}},A.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},A.pick=function(h){if(!h||h.id!==this.pickId)return null;var x=f(h.value[0],h.value[1],h.value[2],0),u=o.le(this.arcLength,x);if(u<0)return null;if(u===this.arcLength.length-1)return new _(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),u);for(var L=this.points[u],S=this.points[Math.min(u+1,this.points.length-1)],k=(x-this.arcLength[u])/(this.arcLength[u+1]-this.arcLength[u]),P=1-k,z=[0,0,0],I=0;I<3;++I)z[I]=P*L[I]+k*S[I];var D=Math.min(k<.5?u:u+1,this.points.length-1);return new _(x,z,D,this.points[D])};function m(h){var x=h.gl||h.scene&&h.scene.gl,u=p(x);u.attributes.position.location=0,u.attributes.nextPosition.location=1,u.attributes.arcLength.location=2,u.attributes.lineWidth.location=3,u.attributes.color.location=4;var L=y(x);L.attributes.position.location=0,L.attributes.nextPosition.location=1,L.attributes.arcLength.location=2,L.attributes.lineWidth.location=3,L.attributes.color.location=4;for(var S=e(x),k=a(x,[{buffer:S,size:3,offset:0,stride:48},{buffer:S,size:3,offset:12,stride:48},{buffer:S,size:1,offset:24,stride:48},{buffer:S,size:1,offset:28,stride:48},{buffer:S,size:4,offset:32,stride:48}]),P=i(new Array(256*4),[256,1,4]),z=0;z<256*4;++z)P.data[z]=255;var I=n(x,P);I.wrap=x.REPEAT;var D=new s(x,u,L,S,k,I);return D.update(h),D}},{"./lib/shaders":90,"binary-search-bounds":31,"gl-buffer":78,"gl-texture2d":146,"gl-vao":150,ndarray:259}],92:[function(v,M,T){M.exports=e;function e(a){var n=new Float32Array(16);return n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3],n[4]=a[4],n[5]=a[5],n[6]=a[6],n[7]=a[7],n[8]=a[8],n[9]=a[9],n[10]=a[10],n[11]=a[11],n[12]=a[12],n[13]=a[13],n[14]=a[14],n[15]=a[15],n}},{}],93:[function(v,M,T){M.exports=e;function e(){var a=new Float32Array(16);return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],94:[function(v,M,T){M.exports=e;function e(a){var n=a[0],r=a[1],t=a[2],f=a[3],o=a[4],i=a[5],g=a[6],p=a[7],y=a[8],c=a[9],b=a[10],l=a[11],_=a[12],s=a[13],A=a[14],m=a[15],h=n*i-r*o,x=n*g-t*o,u=n*p-f*o,L=r*g-t*i,S=r*p-f*i,k=t*p-f*g,P=y*s-c*_,z=y*A-b*_,I=y*m-l*_,D=c*A-b*s,R=c*m-l*s,O=b*m-l*A;return h*O-x*R+u*D+L*I-S*z+k*P}},{}],95:[function(v,M,T){M.exports=e;function e(a,n){var r=n[0],t=n[1],f=n[2],o=n[3],i=r+r,g=t+t,p=f+f,y=r*i,c=t*i,b=t*g,l=f*i,_=f*g,s=f*p,A=o*i,m=o*g,h=o*p;return a[0]=1-b-s,a[1]=c+h,a[2]=l-m,a[3]=0,a[4]=c-h,a[5]=1-y-s,a[6]=_+A,a[7]=0,a[8]=l+m,a[9]=_-A,a[10]=1-y-b,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],96:[function(v,M,T){M.exports=e;function e(a,n,r){var t=n[0],f=n[1],o=n[2],i=n[3],g=t+t,p=f+f,y=o+o,c=t*g,b=t*p,l=t*y,_=f*p,s=f*y,A=o*y,m=i*g,h=i*p,x=i*y;return a[0]=1-(_+A),a[1]=b+x,a[2]=l-h,a[3]=0,a[4]=b-x,a[5]=1-(c+A),a[6]=s+m,a[7]=0,a[8]=l+h,a[9]=s-m,a[10]=1-(c+_),a[11]=0,a[12]=r[0],a[13]=r[1],a[14]=r[2],a[15]=1,a}},{}],97:[function(v,M,T){M.exports=e;function e(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}},{}],98:[function(v,M,T){M.exports=e;function e(a,n){var r=n[0],t=n[1],f=n[2],o=n[3],i=n[4],g=n[5],p=n[6],y=n[7],c=n[8],b=n[9],l=n[10],_=n[11],s=n[12],A=n[13],m=n[14],h=n[15],x=r*g-t*i,u=r*p-f*i,L=r*y-o*i,S=t*p-f*g,k=t*y-o*g,P=f*y-o*p,z=c*A-b*s,I=c*m-l*s,D=c*h-_*s,R=b*m-l*A,O=b*h-_*A,F=l*h-_*m,V=x*F-u*O+L*R+S*D-k*I+P*z;return V?(V=1/V,a[0]=(g*F-p*O+y*R)*V,a[1]=(f*O-t*F-o*R)*V,a[2]=(A*P-m*k+h*S)*V,a[3]=(l*k-b*P-_*S)*V,a[4]=(p*D-i*F-y*I)*V,a[5]=(r*F-f*D+o*I)*V,a[6]=(m*L-s*P-h*u)*V,a[7]=(c*P-l*L+_*u)*V,a[8]=(i*O-g*D+y*z)*V,a[9]=(t*D-r*O-o*z)*V,a[10]=(s*k-A*L+h*x)*V,a[11]=(b*L-c*k-_*x)*V,a[12]=(g*I-i*R-p*z)*V,a[13]=(r*R-t*I+f*z)*V,a[14]=(A*u-s*S-m*x)*V,a[15]=(c*S-b*u+l*x)*V,a):null}},{}],99:[function(v,M,T){var e=v("./identity");M.exports=a;function a(n,r,t,f){var o,i,g,p,y,c,b,l,_,s,A=r[0],m=r[1],h=r[2],x=f[0],u=f[1],L=f[2],S=t[0],k=t[1],P=t[2];return Math.abs(A-S)<1e-6&&Math.abs(m-k)<1e-6&&Math.abs(h-P)<1e-6?e(n):(b=A-S,l=m-k,_=h-P,s=1/Math.sqrt(b*b+l*l+_*_),b*=s,l*=s,_*=s,o=u*_-L*l,i=L*b-x*_,g=x*l-u*b,s=Math.sqrt(o*o+i*i+g*g),s?(s=1/s,o*=s,i*=s,g*=s):(o=0,i=0,g=0),p=l*g-_*i,y=_*o-b*g,c=b*i-l*o,s=Math.sqrt(p*p+y*y+c*c),s?(s=1/s,p*=s,y*=s,c*=s):(p=0,y=0,c=0),n[0]=o,n[1]=p,n[2]=b,n[3]=0,n[4]=i,n[5]=y,n[6]=l,n[7]=0,n[8]=g,n[9]=c,n[10]=_,n[11]=0,n[12]=-(o*A+i*m+g*h),n[13]=-(p*A+y*m+c*h),n[14]=-(b*A+l*m+_*h),n[15]=1,n)}},{"./identity":97}],100:[function(v,M,T){M.exports=e;function e(a,n,r){var t=n[0],f=n[1],o=n[2],i=n[3],g=n[4],p=n[5],y=n[6],c=n[7],b=n[8],l=n[9],_=n[10],s=n[11],A=n[12],m=n[13],h=n[14],x=n[15],u=r[0],L=r[1],S=r[2],k=r[3];return a[0]=u*t+L*g+S*b+k*A,a[1]=u*f+L*p+S*l+k*m,a[2]=u*o+L*y+S*_+k*h,a[3]=u*i+L*c+S*s+k*x,u=r[4],L=r[5],S=r[6],k=r[7],a[4]=u*t+L*g+S*b+k*A,a[5]=u*f+L*p+S*l+k*m,a[6]=u*o+L*y+S*_+k*h,a[7]=u*i+L*c+S*s+k*x,u=r[8],L=r[9],S=r[10],k=r[11],a[8]=u*t+L*g+S*b+k*A,a[9]=u*f+L*p+S*l+k*m,a[10]=u*o+L*y+S*_+k*h,a[11]=u*i+L*c+S*s+k*x,u=r[12],L=r[13],S=r[14],k=r[15],a[12]=u*t+L*g+S*b+k*A,a[13]=u*f+L*p+S*l+k*m,a[14]=u*o+L*y+S*_+k*h,a[15]=u*i+L*c+S*s+k*x,a}},{}],101:[function(v,M,T){M.exports=e;function e(a,n,r,t,f,o,i){var g=1/(n-r),p=1/(t-f),y=1/(o-i);return a[0]=-2*g,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*p,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*y,a[11]=0,a[12]=(n+r)*g,a[13]=(f+t)*p,a[14]=(i+o)*y,a[15]=1,a}},{}],102:[function(v,M,T){M.exports=e;function e(a,n,r,t,f){var o=1/Math.tan(n/2),i=1/(t-f);return a[0]=o/r,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=o,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=(f+t)*i,a[11]=-1,a[12]=0,a[13]=0,a[14]=2*f*t*i,a[15]=0,a}},{}],103:[function(v,M,T){M.exports=e;function e(a,n,r,t){var f=t[0],o=t[1],i=t[2],g=Math.sqrt(f*f+o*o+i*i),p,y,c,b,l,_,s,A,m,h,x,u,L,S,k,P,z,I,D,R,O,F,V,G;return Math.abs(g)<1e-6?null:(g=1/g,f*=g,o*=g,i*=g,p=Math.sin(r),y=Math.cos(r),c=1-y,b=n[0],l=n[1],_=n[2],s=n[3],A=n[4],m=n[5],h=n[6],x=n[7],u=n[8],L=n[9],S=n[10],k=n[11],P=f*f*c+y,z=o*f*c+i*p,I=i*f*c-o*p,D=f*o*c-i*p,R=o*o*c+y,O=i*o*c+f*p,F=f*i*c+o*p,V=o*i*c-f*p,G=i*i*c+y,a[0]=b*P+A*z+u*I,a[1]=l*P+m*z+L*I,a[2]=_*P+h*z+S*I,a[3]=s*P+x*z+k*I,a[4]=b*D+A*R+u*O,a[5]=l*D+m*R+L*O,a[6]=_*D+h*R+S*O,a[7]=s*D+x*R+k*O,a[8]=b*F+A*V+u*G,a[9]=l*F+m*V+L*G,a[10]=_*F+h*V+S*G,a[11]=s*F+x*V+k*G,n!==a&&(a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a)}},{}],104:[function(v,M,T){M.exports=e;function e(a,n,r){var t=Math.sin(r),f=Math.cos(r),o=n[4],i=n[5],g=n[6],p=n[7],y=n[8],c=n[9],b=n[10],l=n[11];return n!==a&&(a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[4]=o*f+y*t,a[5]=i*f+c*t,a[6]=g*f+b*t,a[7]=p*f+l*t,a[8]=y*f-o*t,a[9]=c*f-i*t,a[10]=b*f-g*t,a[11]=l*f-p*t,a}},{}],105:[function(v,M,T){M.exports=e;function e(a,n,r){var t=Math.sin(r),f=Math.cos(r),o=n[0],i=n[1],g=n[2],p=n[3],y=n[8],c=n[9],b=n[10],l=n[11];return n!==a&&(a[4]=n[4],a[5]=n[5],a[6]=n[6],a[7]=n[7],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[0]=o*f-y*t,a[1]=i*f-c*t,a[2]=g*f-b*t,a[3]=p*f-l*t,a[8]=o*t+y*f,a[9]=i*t+c*f,a[10]=g*t+b*f,a[11]=p*t+l*f,a}},{}],106:[function(v,M,T){M.exports=e;function e(a,n,r){var t=Math.sin(r),f=Math.cos(r),o=n[0],i=n[1],g=n[2],p=n[3],y=n[4],c=n[5],b=n[6],l=n[7];return n!==a&&(a[8]=n[8],a[9]=n[9],a[10]=n[10],a[11]=n[11],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[0]=o*f+y*t,a[1]=i*f+c*t,a[2]=g*f+b*t,a[3]=p*f+l*t,a[4]=y*f-o*t,a[5]=c*f-i*t,a[6]=b*f-g*t,a[7]=l*f-p*t,a}},{}],107:[function(v,M,T){M.exports=e;function e(a,n,r){var t=r[0],f=r[1],o=r[2];return a[0]=n[0]*t,a[1]=n[1]*t,a[2]=n[2]*t,a[3]=n[3]*t,a[4]=n[4]*f,a[5]=n[5]*f,a[6]=n[6]*f,a[7]=n[7]*f,a[8]=n[8]*o,a[9]=n[9]*o,a[10]=n[10]*o,a[11]=n[11]*o,a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15],a}},{}],108:[function(v,M,T){M.exports=e;function e(a,n,r){var t=r[0],f=r[1],o=r[2],i,g,p,y,c,b,l,_,s,A,m,h;return n===a?(a[12]=n[0]*t+n[4]*f+n[8]*o+n[12],a[13]=n[1]*t+n[5]*f+n[9]*o+n[13],a[14]=n[2]*t+n[6]*f+n[10]*o+n[14],a[15]=n[3]*t+n[7]*f+n[11]*o+n[15]):(i=n[0],g=n[1],p=n[2],y=n[3],c=n[4],b=n[5],l=n[6],_=n[7],s=n[8],A=n[9],m=n[10],h=n[11],a[0]=i,a[1]=g,a[2]=p,a[3]=y,a[4]=c,a[5]=b,a[6]=l,a[7]=_,a[8]=s,a[9]=A,a[10]=m,a[11]=h,a[12]=i*t+c*f+s*o+n[12],a[13]=g*t+b*f+A*o+n[13],a[14]=p*t+l*f+m*o+n[14],a[15]=y*t+_*f+h*o+n[15]),a}},{}],109:[function(v,M,T){M.exports=e;function e(a,n){if(a===n){var r=n[1],t=n[2],f=n[3],o=n[6],i=n[7],g=n[11];a[1]=n[4],a[2]=n[8],a[3]=n[12],a[4]=r,a[6]=n[9],a[7]=n[13],a[8]=t,a[9]=o,a[11]=n[14],a[12]=f,a[13]=i,a[14]=g}else a[0]=n[0],a[1]=n[4],a[2]=n[8],a[3]=n[12],a[4]=n[1],a[5]=n[5],a[6]=n[9],a[7]=n[13],a[8]=n[2],a[9]=n[6],a[10]=n[10],a[11]=n[14],a[12]=n[3],a[13]=n[7],a[14]=n[11],a[15]=n[15];return a}},{}],110:[function(v,M,T){var e=v("barycentric"),a=v("polytope-closest-point/lib/closest_point_2d.js");M.exports=o;function n(i,g){for(var p=[0,0,0,0],y=0;y<4;++y)for(var c=0;c<4;++c)p[c]+=i[4*y+c]*g[y];return p}function r(i,g,p,y,c){for(var b=n(y,n(p,n(g,[i[0],i[1],i[2],1]))),l=0;l<3;++l)b[l]/=b[3];return[.5*c[0]*(1+b[0]),.5*c[1]*(1-b[1])]}function t(i,g){if(i.length===2){for(var p=0,y=0,c=0;c<2;++c)p+=Math.pow(g[c]-i[0][c],2),y+=Math.pow(g[c]-i[1][c],2);return p=Math.sqrt(p),y=Math.sqrt(y),p+y<1e-6?[1,0]:[y/(p+y),p/(y+p)]}else if(i.length===3){var b=[0,0];return a(i[0],i[1],i[2],g,b),e(i,b)}return[]}function f(i,g){for(var p=[0,0,0],y=0;y<i.length;++y)for(var c=i[y],b=g[y],l=0;l<3;++l)p[l]+=b*c[l];return p}function o(i,g,p,y,c,b){if(i.length===1)return[0,i[0].slice()];for(var l=new Array(i.length),_=0;_<i.length;++_)l[_]=r(i[_],p,y,c,b);for(var s=0,A=1/0,_=0;_<l.length;++_){for(var m=0,h=0;h<2;++h)m+=Math.pow(l[_][h]-g[h],2);m<A&&(A=m,s=_)}for(var x=t(l,g),u=0,_=0;_<3;++_){if(x[_]<-.001||x[_]>1.0001)return null;u+=x[_]}return Math.abs(u-1)>.001?null:[s,f(i,x),x]}},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":270}],111:[function(v,M,T){var e=v("glslify"),a=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),n=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),r=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),t=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),f=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),o=e([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),i=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),g=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),p=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),y=e([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),c=e([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);T.meshShader={vertex:a,fragment:n,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},T.wireShader={vertex:r,fragment:t,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},T.pointShader={vertex:f,fragment:o,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},T.pickShader={vertex:i,fragment:g,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},T.pointPickShader={vertex:p,fragment:g,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},T.contourShader={vertex:y,fragment:c,attributes:[{name:"position",type:"vec3"}]}},{glslify:231}],112:[function(v,M,T){var e=1e-6,a=1e-6,n=v("gl-shader"),r=v("gl-buffer"),t=v("gl-vao"),f=v("gl-texture2d"),o=v("normals"),i=v("gl-mat4/multiply"),g=v("gl-mat4/invert"),p=v("ndarray"),y=v("colormap"),c=v("simplicial-complex-contour"),b=v("typedarray-pool"),l=v("./lib/shaders"),_=v("./lib/closest-point"),s=l.meshShader,A=l.wireShader,m=l.pointShader,h=l.pickShader,x=l.pointPickShader,u=l.contourShader,L=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function S(Z,Y,j,re,se,oe,N,U,q,Q,W,X,ee,te,ie,le,ge,fe,pe,ye,Te,_e,De,Be,Ue,xe,Pe){this.gl=Z,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=Y,this.dirty=!0,this.triShader=j,this.lineShader=re,this.pointShader=se,this.pickShader=oe,this.pointPickShader=N,this.contourShader=U,this.trianglePositions=q,this.triangleColors=W,this.triangleNormals=ee,this.triangleUVs=X,this.triangleIds=Q,this.triangleVAO=te,this.triangleCount=0,this.lineWidth=1,this.edgePositions=ie,this.edgeColors=ge,this.edgeUVs=fe,this.edgeIds=le,this.edgeVAO=pe,this.edgeCount=0,this.pointPositions=ye,this.pointColors=_e,this.pointUVs=De,this.pointSizes=Be,this.pointIds=Te,this.pointVAO=Ue,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=xe,this.contourVAO=Pe,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=L,this._view=L,this._projection=L,this._resolution=[1,1]}var k=S.prototype;k.isOpaque=function(){return!this.hasAlpha},k.isTransparent=function(){return this.hasAlpha},k.pickSlots=1,k.setPickBase=function(Z){this.pickId=Z};function P(Z,Y){if(!Y||!Y.length)return 1;for(var j=0;j<Y.length;++j){if(Y.length<2)return 1;if(Y[j][0]===Z)return Y[j][1];if(Y[j][0]>Z&&j>0){var re=(Y[j][0]-Z)/(Y[j][0]-Y[j-1][0]);return Y[j][1]*(1-re)+re*Y[j-1][1]}}return 1}function z(Z,Y){for(var j=y({colormap:Z,nshades:256,format:"rgba"}),re=new Uint8Array(256*4),se=0;se<256;++se){for(var oe=j[se],N=0;N<3;++N)re[4*se+N]=oe[N];Y?re[4*se+3]=255*P(se/255,Y):re[4*se+3]=255*oe[3]}return p(re,[256,256,4],[4,0,1])}function I(Z){for(var Y=Z.length,j=new Array(Y),re=0;re<Y;++re)j[re]=Z[re][2];return j}k.highlight=function(Z){if(!Z||!this.contourEnable){this.contourCount=0;return}for(var Y=c(this.cells,this.intensity,Z.intensity),j=Y.cells,re=Y.vertexIds,se=Y.vertexWeights,oe=j.length,N=b.mallocFloat32(2*3*oe),U=0,q=0;q<oe;++q)for(var Q=j[q],W=0;W<2;++W){var X=Q[0];Q.length===2&&(X=Q[W]);for(var ee=re[X][0],te=re[X][1],ie=se[X],le=1-ie,ge=this.positions[ee],fe=this.positions[te],pe=0;pe<3;++pe)N[U++]=ie*ge[pe]+le*fe[pe]}this.contourCount=U/3|0,this.contourPositions.update(N.subarray(0,U)),b.free(N)},k.update=function(Z){Z=Z||{};var Y=this.gl;this.dirty=!0,"contourEnable"in Z&&(this.contourEnable=Z.contourEnable),"contourColor"in Z&&(this.contourColor=Z.contourColor),"lineWidth"in Z&&(this.lineWidth=Z.lineWidth),"lightPosition"in Z&&(this.lightPosition=Z.lightPosition),this.hasAlpha=!1,"opacity"in Z&&(this.opacity=Z.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in Z&&(this.opacityscale=Z.opacityscale,this.hasAlpha=!0),"ambient"in Z&&(this.ambientLight=Z.ambient),"diffuse"in Z&&(this.diffuseLight=Z.diffuse),"specular"in Z&&(this.specularLight=Z.specular),"roughness"in Z&&(this.roughness=Z.roughness),"fresnel"in Z&&(this.fresnel=Z.fresnel),Z.texture?(this.texture.dispose(),this.texture=f(Y,Z.texture)):Z.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=Y.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=Y.LINEAR,this.texture.setPixels(z(Z.colormap,this.opacityscale)),this.texture.generateMipmap());var j=Z.cells,re=Z.positions;if(!re||!j)return;var se=[],oe=[],N=[],U=[],q=[],Q=[],W=[],X=[],ee=[],te=[],ie=[],le=[],ge=[],fe=[];this.cells=j,this.positions=re;var pe=Z.vertexNormals,ye=Z.cellNormals,Te=Z.vertexNormalsEpsilon===void 0?e:Z.vertexNormalsEpsilon,_e=Z.faceNormalsEpsilon===void 0?a:Z.faceNormalsEpsilon;Z.useFacetNormals&&!ye&&(ye=o.faceNormals(j,re,_e)),!ye&&!pe&&(pe=o.vertexNormals(j,re,Te));var De=Z.vertexColors,Be=Z.cellColors,Ue=Z.meshColor||[1,1,1,1],xe=Z.vertexUVs,Pe=Z.vertexIntensity,Ve=Z.cellUVs,Qe=Z.cellIntensity,Fe=1/0,Le=-1/0;if(!xe&&!Ve)if(Pe)if(Z.vertexIntensityBounds)Fe=+Z.vertexIntensityBounds[0],Le=+Z.vertexIntensityBounds[1];else for(var Ne=0;Ne<Pe.length;++Ne){var dt=Pe[Ne];Fe=Math.min(Fe,dt),Le=Math.max(Le,dt)}else if(Qe)if(Z.cellIntensityBounds)Fe=+Z.cellIntensityBounds[0],Le=+Z.cellIntensityBounds[1];else for(var Ne=0;Ne<Qe.length;++Ne){var dt=Qe[Ne];Fe=Math.min(Fe,dt),Le=Math.max(Le,dt)}else for(var Ne=0;Ne<re.length;++Ne){var dt=re[Ne][2];Fe=Math.min(Fe,dt),Le=Math.max(Le,dt)}Pe?this.intensity=Pe:Qe?this.intensity=Qe:this.intensity=I(re),this.pickVertex=!(Qe||Be);var Dt=Z.pointSizes,Xt=Z.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var Ne=0;Ne<re.length;++Ne)for(var At=re[Ne],zt=0;zt<3;++zt)isNaN(At[zt])||!isFinite(At[zt])||(this.bounds[0][zt]=Math.min(this.bounds[0][zt],At[zt]),this.bounds[1][zt]=Math.max(this.bounds[1][zt],At[zt]));var Ut=0,Ct=0,Mt=0;e:for(var Ne=0;Ne<j.length;++Ne){var rt=j[Ne];switch(rt.length){case 1:for(var ct=rt[0],At=re[ct],zt=0;zt<3;++zt)if(isNaN(At[zt])||!isFinite(At[zt]))continue e;te.push(At[0],At[1],At[2]);var Ze;De?Ze=De[ct]:Be?Ze=Be[Ne]:Ze=Ue,this.opacityscale&&Pe?oe.push(Ze[0],Ze[1],Ze[2],this.opacity*P((Pe[ct]-Fe)/(Le-Fe),this.opacityscale)):Ze.length===3?ie.push(Ze[0],Ze[1],Ze[2],this.opacity):(ie.push(Ze[0],Ze[1],Ze[2],Ze[3]*this.opacity),Ze[3]<1&&(this.hasAlpha=!0));var ke;xe?ke=xe[ct]:Pe?ke=[(Pe[ct]-Fe)/(Le-Fe),0]:Ve?ke=Ve[Ne]:Qe?ke=[(Qe[Ne]-Fe)/(Le-Fe),0]:ke=[(At[2]-Fe)/(Le-Fe),0],le.push(ke[0],ke[1]),Dt?ge.push(Dt[ct]):ge.push(Xt),fe.push(Ne),Mt+=1;break;case 2:for(var zt=0;zt<2;++zt)for(var ct=rt[zt],At=re[ct],Ge=0;Ge<3;++Ge)if(isNaN(At[Ge])||!isFinite(At[Ge]))continue e;for(var zt=0;zt<2;++zt){var ct=rt[zt],At=re[ct];Q.push(At[0],At[1],At[2]);var Ze;De?Ze=De[ct]:Be?Ze=Be[Ne]:Ze=Ue,this.opacityscale&&Pe?oe.push(Ze[0],Ze[1],Ze[2],this.opacity*P((Pe[ct]-Fe)/(Le-Fe),this.opacityscale)):Ze.length===3?W.push(Ze[0],Ze[1],Ze[2],this.opacity):(W.push(Ze[0],Ze[1],Ze[2],Ze[3]*this.opacity),Ze[3]<1&&(this.hasAlpha=!0));var ke;xe?ke=xe[ct]:Pe?ke=[(Pe[ct]-Fe)/(Le-Fe),0]:Ve?ke=Ve[Ne]:Qe?ke=[(Qe[Ne]-Fe)/(Le-Fe),0]:ke=[(At[2]-Fe)/(Le-Fe),0],X.push(ke[0],ke[1]),ee.push(Ne)}Ct+=1;break;case 3:for(var zt=0;zt<3;++zt)for(var ct=rt[zt],At=re[ct],Ge=0;Ge<3;++Ge)if(isNaN(At[Ge])||!isFinite(At[Ge]))continue e;for(var zt=0;zt<3;++zt){var ct=rt[2-zt],At=re[ct];se.push(At[0],At[1],At[2]);var Ze;De?Ze=De[ct]:Be?Ze=Be[Ne]:Ze=Ue,Ze?this.opacityscale&&Pe?oe.push(Ze[0],Ze[1],Ze[2],this.opacity*P((Pe[ct]-Fe)/(Le-Fe),this.opacityscale)):Ze.length===3?oe.push(Ze[0],Ze[1],Ze[2],this.opacity):(oe.push(Ze[0],Ze[1],Ze[2],Ze[3]*this.opacity),Ze[3]<1&&(this.hasAlpha=!0)):oe.push(.5,.5,.5,1);var ke;xe?ke=xe[ct]:Pe?ke=[(Pe[ct]-Fe)/(Le-Fe),0]:Ve?ke=Ve[Ne]:Qe?ke=[(Qe[Ne]-Fe)/(Le-Fe),0]:ke=[(At[2]-Fe)/(Le-Fe),0],U.push(ke[0],ke[1]);var Je;pe?Je=pe[ct]:Je=ye[Ne],N.push(Je[0],Je[1],Je[2]),q.push(Ne)}Ut+=1;break}}this.pointCount=Mt,this.edgeCount=Ct,this.triangleCount=Ut,this.pointPositions.update(te),this.pointColors.update(ie),this.pointUVs.update(le),this.pointSizes.update(ge),this.pointIds.update(new Uint32Array(fe)),this.edgePositions.update(Q),this.edgeColors.update(W),this.edgeUVs.update(X),this.edgeIds.update(new Uint32Array(ee)),this.trianglePositions.update(se),this.triangleColors.update(oe),this.triangleUVs.update(U),this.triangleNormals.update(N),this.triangleIds.update(new Uint32Array(q))},k.drawTransparent=k.draw=function(Z){Z=Z||{};for(var Y=this.gl,j=Z.model||L,re=Z.view||L,se=Z.projection||L,oe=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],N=0;N<3;++N)oe[0][N]=Math.max(oe[0][N],this.clipBounds[0][N]),oe[1][N]=Math.min(oe[1][N],this.clipBounds[1][N]);var U={model:j,view:re,projection:se,inverseModel:L.slice(),clipBounds:oe,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};U.inverseModel=g(U.inverseModel,U.model),Y.disable(Y.CULL_FACE),this.texture.bind(0);var q=new Array(16);i(q,U.view,U.model),i(q,U.projection,q),g(q,q);for(var N=0;N<3;++N)U.eyePosition[N]=q[12+N]/q[15];for(var Q=q[15],N=0;N<3;++N)Q+=this.lightPosition[N]*q[4*N+3];for(var N=0;N<3;++N){for(var W=q[12+N],X=0;X<3;++X)W+=q[4*X+N]*this.lightPosition[X];U.lightPosition[N]=W/Q}if(this.triangleCount>0){var ee=this.triShader;ee.bind(),ee.uniforms=U,this.triangleVAO.bind(),Y.drawArrays(Y.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var ee=this.lineShader;ee.bind(),ee.uniforms=U,this.edgeVAO.bind(),Y.lineWidth(this.lineWidth*this.pixelRatio),Y.drawArrays(Y.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()}if(this.pointCount>0){var ee=this.pointShader;ee.bind(),ee.uniforms=U,this.pointVAO.bind(),Y.drawArrays(Y.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var ee=this.contourShader;ee.bind(),ee.uniforms=U,this.contourVAO.bind(),Y.drawArrays(Y.LINES,0,this.contourCount),this.contourVAO.unbind()}},k.drawPick=function(Z){Z=Z||{};for(var Y=this.gl,j=Z.model||L,re=Z.view||L,se=Z.projection||L,oe=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],N=0;N<3;++N)oe[0][N]=Math.max(oe[0][N],this.clipBounds[0][N]),oe[1][N]=Math.min(oe[1][N],this.clipBounds[1][N]);this._model=[].slice.call(j),this._view=[].slice.call(re),this._projection=[].slice.call(se),this._resolution=[Y.drawingBufferWidth,Y.drawingBufferHeight];var U={model:j,view:re,projection:se,clipBounds:oe,pickId:this.pickId/255},q=this.pickShader;if(q.bind(),q.uniforms=U,this.triangleCount>0&&(this.triangleVAO.bind(),Y.drawArrays(Y.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),Y.lineWidth(this.lineWidth*this.pixelRatio),Y.drawArrays(Y.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()),this.pointCount>0){var q=this.pointPickShader;q.bind(),q.uniforms=U,this.pointVAO.bind(),Y.drawArrays(Y.POINTS,0,this.pointCount),this.pointVAO.unbind()}},k.pick=function(Z){if(!Z||Z.id!==this.pickId)return null;for(var Y=Z.value[0]+256*Z.value[1]+65536*Z.value[2],j=this.cells[Y],re=this.positions,se=new Array(j.length),oe=0;oe<j.length;++oe)se[oe]=re[j[oe]];var N=Z.coord[0],U=Z.coord[1];if(!this.pickVertex){var q=this.positions[j[0]],Q=this.positions[j[1]],W=this.positions[j[2]],X=[(q[0]+Q[0]+W[0])/3,(q[1]+Q[1]+W[1])/3,(q[2]+Q[2]+W[2])/3];return{_cellCenter:!0,position:[N,U],index:Y,cell:j,cellId:Y,intensity:this.intensity[Y],dataCoordinate:X}}var ee=_(se,[N*this.pixelRatio,this._resolution[1]-U*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!ee)return null;for(var te=ee[2],ie=0,oe=0;oe<j.length;++oe)ie+=te[oe]*this.intensity[j[oe]];return{position:ee[1],index:j[ee[0]],cell:j,cellId:Y,intensity:ie,dataCoordinate:this.positions[j[ee[0]]]}},k.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()};function D(Z){var Y=n(Z,s.vertex,s.fragment);return Y.attributes.position.location=0,Y.attributes.color.location=2,Y.attributes.uv.location=3,Y.attributes.normal.location=4,Y}function R(Z){var Y=n(Z,A.vertex,A.fragment);return Y.attributes.position.location=0,Y.attributes.color.location=2,Y.attributes.uv.location=3,Y}function O(Z){var Y=n(Z,m.vertex,m.fragment);return Y.attributes.position.location=0,Y.attributes.color.location=2,Y.attributes.uv.location=3,Y.attributes.pointSize.location=4,Y}function F(Z){var Y=n(Z,h.vertex,h.fragment);return Y.attributes.position.location=0,Y.attributes.id.location=1,Y}function V(Z){var Y=n(Z,x.vertex,x.fragment);return Y.attributes.position.location=0,Y.attributes.id.location=1,Y.attributes.pointSize.location=4,Y}function G(Z){var Y=n(Z,u.vertex,u.fragment);return Y.attributes.position.location=0,Y}function J(Z,Y){arguments.length===1&&(Y=Z,Z=Y.gl);var j=Z.getExtension("OES_standard_derivatives")||Z.getExtension("MOZ_OES_standard_derivatives")||Z.getExtension("WEBKIT_OES_standard_derivatives");if(!j)throw new Error("derivatives not supported");var re=D(Z),se=R(Z),oe=O(Z),N=F(Z),U=V(Z),q=G(Z),Q=f(Z,p(new Uint8Array([255,255,255,255]),[1,1,4]));Q.generateMipmap(),Q.minFilter=Z.LINEAR_MIPMAP_LINEAR,Q.magFilter=Z.LINEAR;var W=r(Z),X=r(Z),ee=r(Z),te=r(Z),ie=r(Z),le=t(Z,[{buffer:W,type:Z.FLOAT,size:3},{buffer:ie,type:Z.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:X,type:Z.FLOAT,size:4},{buffer:ee,type:Z.FLOAT,size:2},{buffer:te,type:Z.FLOAT,size:3}]),ge=r(Z),fe=r(Z),pe=r(Z),ye=r(Z),Te=t(Z,[{buffer:ge,type:Z.FLOAT,size:3},{buffer:ye,type:Z.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:fe,type:Z.FLOAT,size:4},{buffer:pe,type:Z.FLOAT,size:2}]),_e=r(Z),De=r(Z),Be=r(Z),Ue=r(Z),xe=r(Z),Pe=t(Z,[{buffer:_e,type:Z.FLOAT,size:3},{buffer:xe,type:Z.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:De,type:Z.FLOAT,size:4},{buffer:Be,type:Z.FLOAT,size:2},{buffer:Ue,type:Z.FLOAT,size:1}]),Ve=r(Z),Qe=t(Z,[{buffer:Ve,type:Z.FLOAT,size:3}]),Fe=new S(Z,Q,re,se,oe,N,U,q,W,ie,X,ee,te,le,ge,ye,fe,pe,Te,_e,xe,De,Be,Ue,Pe,Ve,Qe);return Fe.update(Y),Fe}M.exports=J},{"./lib/closest-point":110,"./lib/shaders":111,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259,normals:261,"simplicial-complex-contour":291,"typedarray-pool":308}],113:[function(v,M,T){M.exports=f;var e=v("gl-buffer"),a=v("gl-shader"),n=v("./shaders");function r(o,i,g){this.plot=o,this.vbo=i,this.shader=g}var t=r.prototype;t.bind=function(){var o=this.shader;this.vbo.bind(),this.shader.bind(),o.attributes.coord.pointer(),o.uniforms.screenBox=this.plot.screenBox},t.drawBox=function(){var o=[0,0],i=[0,0];return function(g,p,y,c,b){var l=this.plot,_=this.shader,s=l.gl;o[0]=g,o[1]=p,i[0]=y,i[1]=c,_.uniforms.lo=o,_.uniforms.hi=i,_.uniforms.color=b,s.drawArrays(s.TRIANGLE_STRIP,0,4)}}(),t.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function f(o){var i=o.gl,g=e(i,[0,0,0,1,1,0,1,1]),p=a(i,n.boxVert,n.lineFrag);return new r(o,g,p)}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],114:[function(v,M,T){M.exports=i;var e=v("gl-buffer"),a=v("gl-shader"),n=v("binary-search-bounds"),r=v("./shaders");function t(g,p,y,c){this.plot=g,this.vbo=p,this.shader=y,this.tickShader=c,this.ticks=[[],[]]}function f(g,p){return g-p}var o=t.prototype;o.draw=function(){var g=[0,0],p=[0,0],y=[0,0];return function(){for(var c=this.plot,b=this.vbo,l=this.shader,_=this.ticks,s=c.gl,A=c._tickBounds,m=c.dataBox,h=c.viewBox,x=c.gridLineWidth,u=c.gridLineColor,L=c.gridLineEnable,S=c.pixelRatio,k=0;k<2;++k){var P=A[k],z=A[k+2],I=z-P,D=.5*(m[k+2]+m[k]),R=m[k+2]-m[k];p[k]=2*I/R,g[k]=2*(P-D)/R}l.bind(),b.bind(),l.attributes.dataCoord.pointer(),l.uniforms.dataShift=g,l.uniforms.dataScale=p;for(var O=0,k=0;k<2;++k){y[0]=y[1]=0,y[k]=1,l.uniforms.dataAxis=y,l.uniforms.lineWidth=x[k]/(h[k+2]-h[k])*S,l.uniforms.color=u[k];var F=_[k].length*6;L[k]&&F&&s.drawArrays(s.TRIANGLES,O,F),O+=F}}}(),o.drawTickMarks=function(){var g=[0,0],p=[0,0],y=[1,0],c=[0,1],b=[0,0],l=[0,0];return function(){for(var _=this.plot,s=this.vbo,A=this.tickShader,m=this.ticks,h=_.gl,x=_._tickBounds,u=_.dataBox,L=_.viewBox,S=_.pixelRatio,k=_.screenBox,P=k[2]-k[0],z=k[3]-k[1],I=L[2]-L[0],D=L[3]-L[1],R=0;R<2;++R){var O=x[R],F=x[R+2],V=F-O,G=.5*(u[R+2]+u[R]),J=u[R+2]-u[R];p[R]=2*V/J,g[R]=2*(O-G)/J}p[0]*=I/P,g[0]*=I/P,p[1]*=D/z,g[1]*=D/z,A.bind(),s.bind(),A.attributes.dataCoord.pointer();var Z=A.uniforms;Z.dataShift=g,Z.dataScale=p;var Y=_.tickMarkLength,j=_.tickMarkWidth,re=_.tickMarkColor,se=0,oe=m[0].length*6,N=Math.min(n.ge(m[0],(u[0]-x[0])/(x[2]-x[0]),f),m[0].length),U=Math.min(n.gt(m[0],(u[2]-x[0])/(x[2]-x[0]),f),m[0].length),q=se+6*N,Q=6*Math.max(0,U-N),W=Math.min(n.ge(m[1],(u[1]-x[1])/(x[3]-x[1]),f),m[1].length),X=Math.min(n.gt(m[1],(u[3]-x[1])/(x[3]-x[1]),f),m[1].length),ee=oe+6*W,te=6*Math.max(0,X-W);b[0]=2*(L[0]-Y[1])/P-1,b[1]=(L[3]+L[1])/z-1,l[0]=Y[1]*S/P,l[1]=j[1]*S/z,te&&(Z.color=re[1],Z.tickScale=l,Z.dataAxis=c,Z.screenOffset=b,h.drawArrays(h.TRIANGLES,ee,te)),b[0]=(L[2]+L[0])/P-1,b[1]=2*(L[1]-Y[0])/z-1,l[0]=j[0]*S/P,l[1]=Y[0]*S/z,Q&&(Z.color=re[0],Z.tickScale=l,Z.dataAxis=y,Z.screenOffset=b,h.drawArrays(h.TRIANGLES,q,Q)),b[0]=2*(L[2]+Y[3])/P-1,b[1]=(L[3]+L[1])/z-1,l[0]=Y[3]*S/P,l[1]=j[3]*S/z,te&&(Z.color=re[3],Z.tickScale=l,Z.dataAxis=c,Z.screenOffset=b,h.drawArrays(h.TRIANGLES,ee,te)),b[0]=(L[2]+L[0])/P-1,b[1]=2*(L[3]+Y[2])/z-1,l[0]=j[2]*S/P,l[1]=Y[2]*S/z,Q&&(Z.color=re[2],Z.tickScale=l,Z.dataAxis=y,Z.screenOffset=b,h.drawArrays(h.TRIANGLES,q,Q))}}(),o.update=function(){var g=[1,1,-1,-1,1,-1],p=[1,-1,1,1,-1,-1];return function(y){var c=y.ticks,b=y.bounds,l=new Float32Array(6*3*(c[0].length+c[1].length));this.plot.zeroLineEnable;for(var _=0,s=[[],[]],A=0;A<2;++A)for(var m=s[A],h=c[A],x=b[A],u=b[A+2],L=0;L<h.length;++L){var S=(h[L].x-x)/(u-x);m.push(S);for(var k=0;k<6;++k)l[_++]=S,l[_++]=g[k],l[_++]=p[k]}this.ticks=s,this.vbo.update(l)}}(),o.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()};function i(g){var p=g.gl,y=e(p),c=a(p,r.gridVert,r.gridFrag),b=a(p,r.tickVert,r.gridFrag),l=new t(g,y,c,b);return l}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132}],115:[function(v,M,T){M.exports=f;var e=v("gl-buffer"),a=v("gl-shader"),n=v("./shaders");function r(o,i,g){this.plot=o,this.vbo=i,this.shader=g}var t=r.prototype;t.bind=function(){var o=this.shader;this.vbo.bind(),this.shader.bind(),o.attributes.coord.pointer(),o.uniforms.screenBox=this.plot.screenBox},t.drawLine=function(){var o=[0,0],i=[0,0];return function(g,p,y,c,b,l){var _=this.plot,s=this.shader,A=_.gl;o[0]=g,o[1]=p,i[0]=y,i[1]=c,s.uniforms.start=o,s.uniforms.end=i,s.uniforms.width=b*_.pixelRatio,s.uniforms.color=l,A.drawArrays(A.TRIANGLE_STRIP,0,4)}}(),t.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function f(o){var i=o.gl,g=e(i,[-1,-1,-1,1,1,-1,1,1]),p=a(i,n.lineVert,n.lineFrag),y=new r(o,g,p);return y}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],116:[function(v,M,T){var e=v("glslify"),a=e([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);M.exports={lineVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:a,textVert:e([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:a,gridVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:a,boxVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},{glslify:231}],117:[function(v,M,T){M.exports=i;var e=v("gl-buffer"),a=v("gl-shader"),n=v("text-cache"),r=v("binary-search-bounds"),t=v("./shaders");function f(g,p,y){this.plot=g,this.vbo=p,this.shader=y,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var o=f.prototype;o.drawTicks=function(){var g=[0,0],p=[0,0],y=[0,0];return function(c){var b=this.plot,l=this.shader,_=this.tickX[c],s=this.tickOffset[c],A=b.gl,m=b.viewBox,h=b.dataBox,x=b.screenBox,u=b.pixelRatio,L=b.tickEnable,S=b.tickPad,k=b.tickColor,P=b.tickAngle,z=b.labelEnable,I=b.labelPad,D=b.labelColor,R=b.labelAngle,O=this.labelOffset[c],F=this.labelCount[c],V=r.lt(_,h[c]),G=r.le(_,h[c+2]);g[0]=g[1]=0,g[c]=1,p[c]=(m[2+c]+m[c])/(x[2+c]-x[c])-1;var J=2/x[2+(c^1)]-x[c^1];p[c^1]=J*m[c^1]-1,L[c]&&(p[c^1]-=J*u*S[c],V<G&&s[G]>s[V]&&(l.uniforms.dataAxis=g,l.uniforms.screenOffset=p,l.uniforms.color=k[c],l.uniforms.angle=P[c],A.drawArrays(A.TRIANGLES,s[V],s[G]-s[V]))),z[c]&&F&&(p[c^1]-=J*u*I[c],l.uniforms.dataAxis=y,l.uniforms.screenOffset=p,l.uniforms.color=D[c],l.uniforms.angle=R[c],A.drawArrays(A.TRIANGLES,O,F)),p[c^1]=J*m[2+(c^1)]-1,L[c+2]&&(p[c^1]+=J*u*S[c+2],V<G&&s[G]>s[V]&&(l.uniforms.dataAxis=g,l.uniforms.screenOffset=p,l.uniforms.color=k[c+2],l.uniforms.angle=P[c+2],A.drawArrays(A.TRIANGLES,s[V],s[G]-s[V]))),z[c+2]&&F&&(p[c^1]+=J*u*I[c+2],l.uniforms.dataAxis=y,l.uniforms.screenOffset=p,l.uniforms.color=D[c+2],l.uniforms.angle=R[c+2],A.drawArrays(A.TRIANGLES,O,F))}}(),o.drawTitle=function(){var g=[0,0],p=[0,0];return function(){var y=this.plot,c=this.shader,b=y.gl,l=y.screenBox,_=y.titleCenter,s=y.titleAngle,A=y.titleColor,m=y.pixelRatio;if(!!this.titleCount){for(var h=0;h<2;++h)p[h]=2*(_[h]*m-l[h])/(l[2+h]-l[h])-1;c.bind(),c.uniforms.dataAxis=g,c.uniforms.screenOffset=p,c.uniforms.angle=s,c.uniforms.color=A,b.drawArrays(b.TRIANGLES,this.titleOffset,this.titleCount)}}}(),o.bind=function(){var g=[0,0],p=[0,0],y=[0,0];return function(){var c=this.plot,b=this.shader,l=c._tickBounds,_=c.dataBox,s=c.screenBox,A=c.viewBox;b.bind();for(var m=0;m<2;++m){var h=l[m],x=l[m+2],u=x-h,L=.5*(_[m+2]+_[m]),S=_[m+2]-_[m],k=A[m],P=A[m+2],z=P-k,I=s[m],D=s[m+2],R=D-I;p[m]=2*u/S*z/R,g[m]=2*(h-L)/S*z/R}y[1]=2*c.pixelRatio/(s[3]-s[1]),y[0]=y[1]*(s[3]-s[1])/(s[2]-s[0]),b.uniforms.dataScale=p,b.uniforms.dataShift=g,b.uniforms.textScale=y,this.vbo.bind(),b.attributes.textCoordinate.pointer()}}(),o.update=function(g){var p=[],y=g.ticks,c=g.bounds,b,l,_,s,A;for(A=0;A<2;++A){var m=[Math.floor(p.length/3)],h=[-1/0],x=y[A];for(b=0;b<x.length;++b){var u=x[b],L=u.x,S=u.text,k=u.font||"sans-serif";s=u.fontSize||12;for(var P=1/(c[A+2]-c[A]),z=c[A],I=S.split(`
`),D=0;D<I.length;D++)for(_=n(k,I[D]).data,l=0;l<_.length;l+=2)p.push(_[l]*s,-_[l+1]*s-D*s*1.2,(L-z)*P);m.push(Math.floor(p.length/3)),h.push(L)}this.tickOffset[A]=m,this.tickX[A]=h}for(A=0;A<2;++A){for(this.labelOffset[A]=Math.floor(p.length/3),_=n(g.labelFont[A],g.labels[A],{textAlign:"center"}).data,s=g.labelSize[A],b=0;b<_.length;b+=2)p.push(_[b]*s,-_[b+1]*s,0);this.labelCount[A]=Math.floor(p.length/3)-this.labelOffset[A]}for(this.titleOffset=Math.floor(p.length/3),_=n(g.titleFont,g.title).data,s=g.titleSize,b=0;b<_.length;b+=2)p.push(_[b]*s,-_[b+1]*s,0);this.titleCount=Math.floor(p.length/3)-this.titleOffset,this.vbo.update(p)},o.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function i(g){var p=g.gl,y=e(p),c=a(p,t.textVert,t.textFrag),b=new f(g,y,c);return b}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"text-cache":303}],118:[function(v,M,T){M.exports=p;var e=v("gl-select-static"),a=v("./lib/grid"),n=v("./lib/text"),r=v("./lib/line"),t=v("./lib/box");function f(y,c){this.gl=y,this.pickBuffer=c,this.screenBox=[0,0,y.drawingBufferWidth,y.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var o=f.prototype;o.setDirty=function(){this.dirty=this.pickDirty=!0},o.setOverlayDirty=function(){this.dirty=!0},o.nextDepthValue=function(){return this._depthCounter++/65536},o.draw=function(){return function(){var y=this.gl,c=this.screenBox,b=this.viewBox,l=this.dataBox,_=this.pixelRatio,s=this.grid,A=this.line,m=this.text,h=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),!!this.dirty){if(this.dirty=!1,y.bindFramebuffer(y.FRAMEBUFFER,null),y.enable(y.SCISSOR_TEST),y.disable(y.DEPTH_TEST),y.depthFunc(y.LESS),y.depthMask(!1),y.enable(y.BLEND),y.blendEquation(y.FUNC_ADD,y.FUNC_ADD),y.blendFunc(y.ONE,y.ONE_MINUS_SRC_ALPHA),this.borderColor){y.scissor(c[0],c[1],c[2]-c[0],c[3]-c[1]);var x=this.borderColor;y.clearColor(x[0]*x[3],x[1]*x[3],x[2]*x[3],x[3]),y.clear(y.COLOR_BUFFER_BIT|y.DEPTH_BUFFER_BIT)}y.scissor(b[0],b[1],b[2]-b[0],b[3]-b[1]),y.viewport(b[0],b[1],b[2]-b[0],b[3]-b[1]);var u=this.backgroundColor;y.clearColor(u[0]*u[3],u[1]*u[3],u[2]*u[3],u[3]),y.clear(y.COLOR_BUFFER_BIT),s.draw();var L=this.zeroLineEnable,S=this.zeroLineColor,k=this.zeroLineWidth;if(L[0]||L[1]){A.bind();for(var P=0;P<2;++P)if(!(!L[P]||!(l[P]<=0&&l[P+2]>=0))){var z=c[P]-l[P]*(c[P+2]-c[P])/(l[P+2]-l[P]);P===0?A.drawLine(z,c[1],z,c[3],k[P],S[P]):A.drawLine(c[0],z,c[2],z,k[P],S[P])}}for(var P=0;P<h.length;++P)h[P].draw();y.viewport(c[0],c[1],c[2]-c[0],c[3]-c[1]),y.scissor(c[0],c[1],c[2]-c[0],c[3]-c[1]),this.grid.drawTickMarks(),A.bind();var I=this.borderLineEnable,D=this.borderLineWidth,R=this.borderLineColor;I[1]&&A.drawLine(b[0],b[1]-.5*D[1]*_,b[0],b[3]+.5*D[3]*_,D[1],R[1]),I[0]&&A.drawLine(b[0]-.5*D[0]*_,b[1],b[2]+.5*D[2]*_,b[1],D[0],R[0]),I[3]&&A.drawLine(b[2],b[1]-.5*D[1]*_,b[2],b[3]+.5*D[3]*_,D[3],R[3]),I[2]&&A.drawLine(b[0]-.5*D[0]*_,b[3],b[2]+.5*D[2]*_,b[3],D[2],R[2]),m.bind();for(var P=0;P<2;++P)m.drawTicks(P);this.titleEnable&&m.drawTitle();for(var O=this.overlays,P=0;P<O.length;++P)O[P].draw();y.disable(y.SCISSOR_TEST),y.disable(y.BLEND),y.depthMask(!0)}}}(),o.drawPick=function(){return function(){if(!this.static){var y=this.pickBuffer;this.gl,this._pickTimeout=null,y.begin();for(var c=1,b=this.objects,l=0;l<b.length;++l)c=b[l].drawPick(c);y.end()}}}(),o.pick=function(){return function(y,c){if(!this.static){var b=this.pixelRatio,l=this.pickPixelRatio,_=this.viewBox,s=Math.round((y-_[0]/b)*l)|0,A=Math.round((c-_[1]/b)*l)|0,m=this.pickBuffer.query(s,A,this.pickRadius);if(!m)return null;for(var h=m.id+(m.value[0]<<8)+(m.value[1]<<16)+(m.value[2]<<24),x=this.objects,u=0;u<x.length;++u){var L=x[u].pick(s,A,h);if(L)return L}return null}}}();function i(y){for(var c=y.slice(),b=0;b<c.length;++b)c[b]=c[b].slice();return c}function g(y,c){return y.x-c.x}o.setScreenBox=function(y){var c=this.screenBox,b=this.pixelRatio;c[0]=Math.round(y[0]*b)|0,c[1]=Math.round(y[1]*b)|0,c[2]=Math.round(y[2]*b)|0,c[3]=Math.round(y[3]*b)|0,this.setDirty()},o.setDataBox=function(y){var c=this.dataBox,b=c[0]!==y[0]||c[1]!==y[1]||c[2]!==y[2]||c[3]!==y[3];b&&(c[0]=y[0],c[1]=y[1],c[2]=y[2],c[3]=y[3],this.setDirty())},o.setViewBox=function(y){var c=this.pixelRatio,b=this.viewBox;b[0]=Math.round(y[0]*c)|0,b[1]=Math.round(y[1]*c)|0,b[2]=Math.round(y[2]*c)|0,b[3]=Math.round(y[3]*c)|0;var l=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((y[2]-y[0])*l)|0,Math.round((y[3]-y[1])*l)|0],this.setDirty()},o.update=function(y){y=y||{};var c=this.gl;this.pixelRatio=y.pixelRatio||1;var b=this.pixelRatio;this.pickPixelRatio=Math.max(b,1),this.setScreenBox(y.screenBox||[0,0,c.drawingBufferWidth/b,c.drawingBufferHeight/b]),this.screenBox,this.setViewBox(y.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/b,.125*(this.screenBox[3]-this.screenBox[1])/b,.875*(this.screenBox[2]-this.screenBox[0])/b,.875*(this.screenBox[3]-this.screenBox[1])/b]);var l=this.viewBox,_=(l[2]-l[0])/(l[3]-l[1]);this.setDataBox(y.dataBox||[-10,-10/_,10,10/_]),this.borderColor=y.borderColor!==!1?(y.borderColor||[0,0,0,0]).slice():!1,this.backgroundColor=(y.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(y.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(y.gridLineWidth||[1,1]).slice(),this.gridLineColor=i(y.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(y.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(y.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=i(y.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(y.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(y.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=i(y.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(y.titleCenter||[.5*(l[0]+l[2])/b,(l[3]+120)/b]).slice(),this.titleEnable=!("titleEnable"in y)||!!y.titleEnable,this.titleAngle=y.titleAngle||0,this.titleColor=(y.titleColor||[0,0,0,1]).slice(),this.labelPad=(y.labelPad||[15,15,15,15]).slice(),this.labelAngle=(y.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(y.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=i(y.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(y.tickPad||[15,15,15,15]).slice(),this.tickAngle=(y.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(y.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=i(y.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(y.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(y.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=i(y.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var s=y.ticks||[[],[]],A=this._tickBounds;A[0]=A[1]=1/0,A[2]=A[3]=-1/0;for(var m=0;m<2;++m){var h=s[m].slice(0);h.length!==0&&(h.sort(g),A[m]=Math.min(A[m],h[0].x),A[m+2]=Math.max(A[m+2],h[h.length-1].x))}this.grid.update({bounds:A,ticks:s}),this.text.update({bounds:A,ticks:s,labels:y.labels||["x","y"],labelSize:y.labelSize||[12,12],labelFont:y.labelFont||["sans-serif","sans-serif"],title:y.title||"",titleSize:y.titleSize||18,titleFont:y.titleFont||"sans-serif"}),this.static=!!y.static,this.setDirty()},o.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var y=this.objects.length-1;y>=0;--y)this.objects[y].dispose();this.objects.length=0;for(var y=this.overlays.length-1;y>=0;--y)this.overlays[y].dispose();this.overlays.length=0,this.gl=null},o.addObject=function(y){this.objects.indexOf(y)<0&&(this.objects.push(y),this.setDirty())},o.removeObject=function(y){for(var c=this.objects,b=0;b<c.length;++b)if(c[b]===y){c.splice(b,1),this.setDirty();break}},o.addOverlay=function(y){this.overlays.indexOf(y)<0&&(this.overlays.push(y),this.setOverlayDirty())},o.removeOverlay=function(y){for(var c=this.overlays,b=0;b<c.length;++b)if(c[b]===y){c.splice(b,1),this.setOverlayDirty();break}};function p(y){var c=y.gl,b=e(c,[c.drawingBufferWidth,c.drawingBufferHeight]),l=new f(c,b);return l.grid=a(l),l.text=n(l),l.line=r(l),l.box=t(l),l.update(y),l}},{"./lib/box":113,"./lib/grid":114,"./lib/line":115,"./lib/text":117,"gl-select-static":131}],119:[function(v,M,T){M.exports=o;var e=v("right-now"),a=v("3d-view"),n=v("mouse-change"),r=v("mouse-wheel"),t=v("mouse-event-offset"),f=v("has-passive-events");function o(i,g){i=i||document.body,g=g||{};var p=[.01,1/0];"distanceLimits"in g&&(p[0]=g.distanceLimits[0],p[1]=g.distanceLimits[1]),"zoomMin"in g&&(p[0]=g.zoomMin),"zoomMax"in g&&(p[1]=g.zoomMax);var y=a({center:g.center||[0,0,0],up:g.up||[0,1,0],eye:g.eye||[0,0,10],mode:g.mode||"orbit",distanceLimits:p}),c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],b=0,l=i.clientWidth,_=i.clientHeight,s={keyBindingMode:"rotate",enableWheel:!0,view:y,element:i,delay:g.delay||16,rotateSpeed:g.rotateSpeed||1,zoomSpeed:g.zoomSpeed||1,translateSpeed:g.translateSpeed||1,flipX:!!g.flipX,flipY:!!g.flipY,modes:y.modes,_ortho:g._ortho||g.projection&&g.projection.type==="orthographic"||!1,tick:function(){var A=e(),m=this.delay,h=A-2*m;y.idle(A-m),y.recalcMatrix(h),y.flush(A-(100+m*2));for(var x=!0,u=y.computedMatrix,L=0;L<16;++L)x=x&&c[L]===u[L],c[L]=u[L];var S=i.clientWidth===l&&i.clientHeight===_;return l=i.clientWidth,_=i.clientHeight,x?!S:(b=Math.exp(y.computedRadius[0]),!0)},lookAt:function(A,m,h){y.lookAt(y.lastT(),A,m,h)},rotate:function(A,m,h){y.rotate(y.lastT(),A,m,h)},pan:function(A,m,h){y.pan(y.lastT(),A,m,h)},translate:function(A,m,h){y.translate(y.lastT(),A,m,h)}};return Object.defineProperties(s,{matrix:{get:function(){return y.computedMatrix},set:function(A){return y.setMatrix(y.lastT(),A),y.computedMatrix},enumerable:!0},mode:{get:function(){return y.getMode()},set:function(A){var m=y.computedUp.slice(),h=y.computedEye.slice(),x=y.computedCenter.slice();if(y.setMode(A),A==="turntable"){var u=e();y._active.lookAt(u,h,x,m),y._active.lookAt(u+500,h,x,[0,0,1]),y._active.flush(u)}return y.getMode()},enumerable:!0},center:{get:function(){return y.computedCenter},set:function(A){return y.lookAt(y.lastT(),null,A),y.computedCenter},enumerable:!0},eye:{get:function(){return y.computedEye},set:function(A){return y.lookAt(y.lastT(),A),y.computedEye},enumerable:!0},up:{get:function(){return y.computedUp},set:function(A){return y.lookAt(y.lastT(),null,null,A),y.computedUp},enumerable:!0},distance:{get:function(){return b},set:function(A){return y.setDistance(y.lastT(),A),A},enumerable:!0},distanceLimits:{get:function(){return y.getDistanceLimits(p)},set:function(A){return y.setDistanceLimits(A),A},enumerable:!0}}),i.addEventListener("contextmenu",function(A){return A.preventDefault(),!1}),s._lastX=-1,s._lastY=-1,s._lastMods={shift:!1,control:!1,alt:!1,meta:!1},s.enableMouseListeners=function(){s.mouseListener=n(i,A),i.addEventListener("touchstart",function(m){var h=t(m.changedTouches[0],i);A(0,h[0],h[1],s._lastMods),A(1,h[0],h[1],s._lastMods)},f?{passive:!0}:!1),i.addEventListener("touchmove",function(m){var h=t(m.changedTouches[0],i);A(1,h[0],h[1],s._lastMods),m.preventDefault()},f?{passive:!1}:!1),i.addEventListener("touchend",function(m){A(0,s._lastX,s._lastY,s._lastMods)},f?{passive:!0}:!1);function A(m,h,x,u){var L=s.keyBindingMode;if(L!==!1){var S=L==="rotate",k=L==="pan",P=L==="zoom",z=!!u.control,I=!!u.alt,D=!!u.shift,R=!!(m&1),O=!!(m&2),F=!!(m&4),V=1/i.clientHeight,G=V*(h-s._lastX),J=V*(x-s._lastY),Z=s.flipX?1:-1,Y=s.flipY?1:-1,j=Math.PI*s.rotateSpeed,re=e();if(s._lastX!==-1&&s._lastY!==-1&&((S&&R&&!z&&!I&&!D||R&&!z&&!I&&D)&&y.rotate(re,Z*j*G,-Y*j*J,0),(k&&R&&!z&&!I&&!D||O||R&&z&&!I&&!D)&&y.pan(re,-s.translateSpeed*G*b,s.translateSpeed*J*b,0),P&&R&&!z&&!I&&!D||F||R&&!z&&I&&!D)){var se=-s.zoomSpeed*J/window.innerHeight*(re-y.lastT())*100;y.pan(re,0,0,b*(Math.exp(se)-1))}return s._lastX=h,s._lastY=x,s._lastMods=u,!0}}s.wheelListener=r(i,function(m,h){if(s.keyBindingMode!==!1&&!!s.enableWheel){var x=s.flipX?1:-1,u=s.flipY?1:-1,L=e();if(Math.abs(m)>Math.abs(h))y.rotate(L,0,0,-m*x*Math.PI*s.rotateSpeed/window.innerWidth);else if(!s._ortho){var S=-s.zoomSpeed*u*h/window.innerHeight*(L-y.lastT())/20;y.pan(L,0,0,b*(Math.exp(S)-1))}}},!0)},s.enableMouseListeners(),s}},{"3d-view":7,"has-passive-events":232,"mouse-change":247,"mouse-event-offset":248,"mouse-wheel":250,"right-now":278}],120:[function(v,M,T){var e=v("glslify"),a=v("gl-shader"),n=e([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),r=e([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);M.exports=function(t){return a(t,n,r,null,[{name:"position",type:"vec2"}])}},{"gl-shader":132,glslify:231}],121:[function(v,M,T){var e=v("./camera.js"),a=v("gl-axes3d"),n=v("gl-axes3d/properties"),r=v("gl-spikes3d"),t=v("gl-select-static"),f=v("gl-fbo"),o=v("a-big-triangle"),i=v("mouse-change"),g=v("gl-mat4/perspective"),p=v("gl-mat4/ortho"),y=v("./lib/shader"),c=v("is-mobile")({tablet:!0,featureDetect:!0});M.exports={createScene:A,createCamera:e};function b(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function l(h,x){var u=null;try{u=h.getContext("webgl",x),u||(u=h.getContext("experimental-webgl",x))}catch{return null}return u}function _(h){var x=Math.round(Math.log(Math.abs(h))/Math.log(10));if(x<0){var u=Math.round(Math.pow(10,-x));return Math.ceil(h*u)/u}else if(x>0){var u=Math.round(Math.pow(10,x));return Math.ceil(h/u)*u}return Math.ceil(h)}function s(h){return typeof h=="boolean"?h:!0}function A(h){h=h||{},h.camera=h.camera||{};var x=h.canvas;if(!x)if(x=document.createElement("canvas"),h.container){var u=h.container;u.appendChild(x)}else document.body.appendChild(x);var L=h.gl;if(L||(h.glOptions&&(c=!!h.glOptions.preserveDrawingBuffer),L=l(x,h.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:c})),!L)throw new Error("webgl not supported");var S=h.bounds||[[-10,-10,-10],[10,10,10]],k=new b,P=f(L,L.drawingBufferWidth,L.drawingBufferHeight,{preferFloat:!c}),z=y(L),I=h.cameraObject&&h.cameraObject._ortho===!0||h.camera.projection&&h.camera.projection.type==="orthographic"||!1,D={eye:h.camera.eye||[2,0,0],center:h.camera.center||[0,0,0],up:h.camera.up||[0,1,0],zoomMin:h.camera.zoomMax||.1,zoomMax:h.camera.zoomMin||100,mode:h.camera.mode||"turntable",_ortho:I},R=h.axes||{},O=a(L,R);O.enable=!R.disable;var F=h.spikes||{},V=r(L,F),G=[],J=[],Z=[],Y=[],j=!0,N=!0,re=new Array(16),se=new Array(16),oe={view:null,projection:re,model:se,_ortho:!1},N=!0,U=[L.drawingBufferWidth,L.drawingBufferHeight],q=h.cameraObject||e(x,D),Q={gl:L,contextLost:!1,pixelRatio:h.pixelRatio||1,canvas:x,selection:k,camera:q,axes:O,axesPixels:null,spikes:V,bounds:S,objects:G,shape:U,aspect:h.aspectRatio||[1,1,1],pickRadius:h.pickRadius||10,zNear:h.zNear||.01,zFar:h.zFar||1e3,fovy:h.fovy||Math.PI/4,clearColor:h.clearColor||[0,0,0,0],autoResize:s(h.autoResize),autoBounds:s(h.autoBounds),autoScale:!!h.autoScale,autoCenter:s(h.autoCenter),clipToBounds:s(h.clipToBounds),snapToData:!!h.snapToData,onselect:h.onselect||null,onrender:h.onrender||null,onclick:h.onclick||null,cameraParams:oe,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(ye){this.aspect[0]=ye.x,this.aspect[1]=ye.y,this.aspect[2]=ye.z,N=!0},setBounds:function(ye,Te){this.bounds[0][ye]=Te.min,this.bounds[1][ye]=Te.max},setClearColor:function(ye){this.clearColor=ye},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},W=[L.drawingBufferWidth/Q.pixelRatio|0,L.drawingBufferHeight/Q.pixelRatio|0];function X(){if(!Q._stopped&&!!Q.autoResize){var ye=x.parentNode,Te=1,_e=1;ye&&ye!==document.body?(Te=ye.clientWidth,_e=ye.clientHeight):(Te=window.innerWidth,_e=window.innerHeight);var De=Math.ceil(Te*Q.pixelRatio)|0,Be=Math.ceil(_e*Q.pixelRatio)|0;if(De!==x.width||Be!==x.height){x.width=De,x.height=Be;var Ue=x.style;Ue.position=Ue.position||"absolute",Ue.left="0px",Ue.top="0px",Ue.width=Te+"px",Ue.height=_e+"px",j=!0}}}Q.autoResize&&X(),window.addEventListener("resize",X);function ee(){for(var ye=G.length,Te=Y.length,_e=0;_e<Te;++_e)Z[_e]=0;e:for(var _e=0;_e<ye;++_e){var De=G[_e],Be=De.pickSlots;if(!Be){J[_e]=-1;continue}for(var Ue=0;Ue<Te;++Ue)if(Z[Ue]+Be<255){J[_e]=Ue,De.setPickBase(Z[Ue]+1),Z[Ue]+=Be;continue e}var xe=t(L,U);J[_e]=Te,Y.push(xe),Z.push(Be),De.setPickBase(1),Te+=1}for(;Te>0&&Z[Te-1]===0;)Z.pop(),Y.pop().dispose()}Q.update=function(ye){Q._stopped||(j=!0,N=!0)},Q.add=function(ye){Q._stopped||(ye.axes=O,G.push(ye),J.push(-1),j=!0,N=!0,ee())},Q.remove=function(ye){if(!Q._stopped){var Te=G.indexOf(ye);Te<0||(G.splice(Te,1),J.pop(),j=!0,N=!0,ee())}},Q.dispose=function(){if(!Q._stopped&&(Q._stopped=!0,window.removeEventListener("resize",X),x.removeEventListener("webglcontextlost",te),Q.mouseListener.enabled=!1,!Q.contextLost)){O.dispose(),V.dispose();for(var ye=0;ye<G.length;++ye)G[ye].dispose();P.dispose();for(var ye=0;ye<Y.length;++ye)Y[ye].dispose();z.dispose(),L=null,O=null,V=null,G=[]}},Q._mouseRotating=!1,Q._prevButtons=0,Q.enableMouseListeners=function(){Q.mouseListener=i(x,function(ye,Te,_e){if(!Q._stopped){var De=Y.length,Be=G.length,Ue=k.object;k.distance=1/0,k.mouse[0]=Te,k.mouse[1]=_e,k.object=null,k.screen=null,k.dataCoordinate=k.dataPosition=null;var xe=!1;if(ye&&Q._prevButtons)Q._mouseRotating=!0;else{Q._mouseRotating&&(N=!0),Q._mouseRotating=!1;for(var Pe=0;Pe<De;++Pe){var Ve=Y[Pe].query(Te,W[1]-_e-1,Q.pickRadius);if(Ve){if(Ve.distance>k.distance)continue;for(var Qe=0;Qe<Be;++Qe){var Fe=G[Qe];if(J[Qe]===Pe){var Le=Fe.pick(Ve);Le&&(k.buttons=ye,k.screen=Ve.coord,k.distance=Ve.distance,k.object=Fe,k.index=Le.distance,k.dataPosition=Le.position,k.dataCoordinate=Le.dataCoordinate,k.data=Le,xe=!0)}}}}}Ue&&Ue!==k.object&&(Ue.highlight&&Ue.highlight(null),j=!0),k.object&&(k.object.highlight&&k.object.highlight(k.data),j=!0),xe=xe||k.object!==Ue,xe&&Q.onselect&&Q.onselect(k),ye&1&&!(Q._prevButtons&1)&&Q.onclick&&Q.onclick(k),Q._prevButtons=ye}})};function te(){if(Q.contextLost)return!0;L.isContextLost()&&(Q.contextLost=!0,Q.mouseListener.enabled=!1,Q.selection.object=null,Q.oncontextloss&&Q.oncontextloss())}x.addEventListener("webglcontextlost",te);function ie(){if(!te()){L.colorMask(!0,!0,!0,!0),L.depthMask(!0),L.disable(L.BLEND),L.enable(L.DEPTH_TEST),L.depthFunc(L.LEQUAL);for(var ye=G.length,Te=Y.length,_e=0;_e<Te;++_e){var De=Y[_e];De.shape=W,De.begin();for(var Be=0;Be<ye;++Be)if(J[Be]===_e){var Ue=G[Be];Ue.drawPick&&(Ue.pixelRatio=1,Ue.drawPick(oe))}De.end()}}}var le=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],ge=[le[0].slice(),le[1].slice()];function fe(){if(!te()){X();var ye=Q.camera.tick();oe.view=Q.camera.matrix,j=j||ye,N=N||ye,O.pixelRatio=Q.pixelRatio,V.pixelRatio=Q.pixelRatio;var Te=G.length,_e=le[0],De=le[1];_e[0]=_e[1]=_e[2]=1/0,De[0]=De[1]=De[2]=-1/0;for(var Be=0;Be<Te;++Be){var Ue=G[Be];Ue.pixelRatio=Q.pixelRatio,Ue.axes=Q.axes,j=j||!!Ue.dirty,N=N||!!Ue.dirty;var xe=Ue.bounds;if(xe)for(var Pe=xe[0],Ve=xe[1],Qe=0;Qe<3;++Qe)_e[Qe]=Math.min(_e[Qe],Pe[Qe]),De[Qe]=Math.max(De[Qe],Ve[Qe])}var Fe=Q.bounds;if(Q.autoBounds)for(var Qe=0;Qe<3;++Qe){if(De[Qe]<_e[Qe])_e[Qe]=-1,De[Qe]=1;else{_e[Qe]===De[Qe]&&(_e[Qe]-=1,De[Qe]+=1);var Le=.05*(De[Qe]-_e[Qe]);_e[Qe]=_e[Qe]-Le,De[Qe]=De[Qe]+Le}Fe[0][Qe]=_e[Qe],Fe[1][Qe]=De[Qe]}for(var Ne=!1,Qe=0;Qe<3;++Qe)Ne=Ne||ge[0][Qe]!==Fe[0][Qe]||ge[1][Qe]!==Fe[1][Qe],ge[0][Qe]=Fe[0][Qe],ge[1][Qe]=Fe[1][Qe];if(N=N||Ne,j=j||Ne,!!j){if(Ne){for(var dt=[0,0,0],Be=0;Be<3;++Be)dt[Be]=_((Fe[1][Be]-Fe[0][Be])/10);O.autoTicks?O.update({bounds:Fe,tickSpacing:dt}):O.update({bounds:Fe})}var Dt=L.drawingBufferWidth,Xt=L.drawingBufferHeight;U[0]=Dt,U[1]=Xt,W[0]=Math.max(Dt/Q.pixelRatio,1)|0,W[1]=Math.max(Xt/Q.pixelRatio,1)|0,m(Q,I);for(var Be=0;Be<Te;++Be){var Ue=G[Be];Ue.axesBounds=Fe,Q.clipToBounds&&(Ue.clipBounds=Fe)}k.object&&(Q.snapToData?V.position=k.dataCoordinate:V.position=k.dataPosition,V.bounds=Fe),N&&(N=!1,ie()),Q.axesPixels=n(Q.axes,oe,Dt,Xt),Q.onrender&&Q.onrender(),L.bindFramebuffer(L.FRAMEBUFFER,null),L.viewport(0,0,Dt,Xt),Q.clearRGBA(),L.depthMask(!0),L.colorMask(!0,!0,!0,!0),L.enable(L.DEPTH_TEST),L.depthFunc(L.LEQUAL),L.disable(L.BLEND),L.disable(L.CULL_FACE);var At=!1;O.enable&&(At=At||O.isTransparent(),O.draw(oe)),V.axes=O,k.object&&V.draw(oe),L.disable(L.CULL_FACE);for(var Be=0;Be<Te;++Be){var Ue=G[Be];Ue.axes=O,Ue.pixelRatio=Q.pixelRatio,Ue.isOpaque&&Ue.isOpaque()&&Ue.draw(oe),Ue.isTransparent&&Ue.isTransparent()&&(At=!0)}if(At){P.shape=U,P.bind(),L.clear(L.DEPTH_BUFFER_BIT),L.colorMask(!1,!1,!1,!1),L.depthMask(!0),L.depthFunc(L.LESS),O.enable&&O.isTransparent()&&O.drawTransparent(oe);for(var Be=0;Be<Te;++Be){var Ue=G[Be];Ue.isOpaque&&Ue.isOpaque()&&Ue.draw(oe)}L.enable(L.BLEND),L.blendEquation(L.FUNC_ADD),L.blendFunc(L.ONE,L.ONE_MINUS_SRC_ALPHA),L.colorMask(!0,!0,!0,!0),L.depthMask(!1),L.clearColor(0,0,0,0),L.clear(L.COLOR_BUFFER_BIT),O.isTransparent()&&O.drawTransparent(oe);for(var Be=0;Be<Te;++Be){var Ue=G[Be];Ue.isTransparent&&Ue.isTransparent()&&Ue.drawTransparent(oe)}L.bindFramebuffer(L.FRAMEBUFFER,null),L.blendFunc(L.ONE,L.ONE_MINUS_SRC_ALPHA),L.disable(L.DEPTH_TEST),z.bind(),P.color[0].bind(0),z.uniforms.accumBuffer=0,o(L),L.disable(L.BLEND)}j=!1;for(var Be=0;Be<Te;++Be)G[Be].dirty=!1}}}function pe(){Q._stopped||Q.contextLost||(fe(),requestAnimationFrame(pe))}return Q.enableMouseListeners(),pe(),Q.redraw=function(){Q._stopped||(j=!0,fe())},Q}function m(h,x){var u=h.bounds,L=h.cameraParams,S=L.projection,k=L.model,P=h.gl.drawingBufferWidth,z=h.gl.drawingBufferHeight,I=h.zNear,D=h.zFar,R=h.fovy,O=P/z;x?(p(S,-O,O,-1,1,I,D),L._ortho=!0):(g(S,R,O,I,D),L._ortho=!1);for(var F=0;F<16;++F)k[F]=0;k[15]=1;for(var V=0,F=0;F<3;++F)V=Math.max(V,u[1][F]-u[0][F]);for(var F=0;F<3;++F)h.autoScale?k[5*F]=h.aspect[F]/(u[1][F]-u[0][F]):k[5*F]=1/V,h.autoCenter&&(k[12+F]=-k[5*F]*.5*(u[0][F]+u[1][F]))}},{"./camera.js":119,"./lib/shader":120,"a-big-triangle":8,"gl-axes3d":70,"gl-axes3d/properties":77,"gl-fbo":86,"gl-mat4/ortho":101,"gl-mat4/perspective":102,"gl-select-static":131,"gl-spikes3d":141,"is-mobile":238,"mouse-change":247}],122:[function(v,M,T){var e=v("glslify");T.pointVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),T.pointFragment=e([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),T.pickVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),T.pickFragment=e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},{glslify:231}],123:[function(v,M,T){var e=v("gl-shader"),a=v("gl-buffer"),n=v("typedarray-pool"),r=v("./lib/shader");M.exports=i;function t(g,p,y,c,b){this.plot=g,this.offsetBuffer=p,this.pickBuffer=y,this.shader=c,this.pickShader=b,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}var f=t.prototype;f.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},f.update=function(g){var p;g=g||{};function y(m,h){return m in g?g[m]:h}this.sizeMin=y("sizeMin",.5),this.sizeMax=y("sizeMax",20),this.color=y("color",[1,0,0,1]).slice(),this.areaRatio=y("areaRatio",1),this.borderColor=y("borderColor",[0,0,0,1]).slice(),this.blend=y("blend",!1);var c=g.positions.length>>>1,b=g.positions instanceof Float32Array,l=g.idToIndex instanceof Int32Array&&g.idToIndex.length>=c,_=g.positions,s=b?_:n.mallocFloat32(_.length),A=l?g.idToIndex:n.mallocInt32(c);if(b||s.set(_),!l)for(s.set(_),p=0;p<c;p++)A[p]=p;this.points=_,this.offsetBuffer.update(s),this.pickBuffer.update(A),b||n.free(s),l||n.free(A),this.pointCount=c,this.pickOffset=0};function o(g,p){var y=0,c=g.length>>>1,b;for(b=0;b<c;b++){var l=g[b*2],_=g[b*2+1];l>=p[0]&&l<=p[2]&&_>=p[1]&&_<=p[3]&&y++}return y}f.unifiedDraw=function(){var g=[1,0,0,0,1,0,0,0,1],p=[0,0,0,0];return function(y){var c=y!==void 0,b=c?this.pickShader:this.shader,l=this.plot.gl,_=this.plot.dataBox;if(this.pointCount===0)return y;var s=_[2]-_[0],A=_[3]-_[1],m=o(this.points,_),h=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(m,.33333)));g[0]=2/s,g[4]=2/A,g[6]=-2*_[0]/s-1,g[7]=-2*_[1]/A-1,this.offsetBuffer.bind(),b.bind(),b.attributes.position.pointer(),b.uniforms.matrix=g,b.uniforms.color=this.color,b.uniforms.borderColor=this.borderColor,b.uniforms.pointCloud=h<5,b.uniforms.pointSize=h,b.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),c&&(p[0]=y&255,p[1]=y>>8&255,p[2]=y>>16&255,p[3]=y>>24&255,this.pickBuffer.bind(),b.attributes.pickId.pointer(l.UNSIGNED_BYTE),b.uniforms.pickOffset=p,this.pickOffset=y);var x=l.getParameter(l.BLEND),u=l.getParameter(l.DITHER);return x&&!this.blend&&l.disable(l.BLEND),u&&l.disable(l.DITHER),l.drawArrays(l.POINTS,0,this.pointCount),x&&!this.blend&&l.enable(l.BLEND),u&&l.enable(l.DITHER),y+this.pointCount}}(),f.draw=f.unifiedDraw,f.drawPick=f.unifiedDraw,f.pick=function(g,p,y){var c=this.pickOffset,b=this.pointCount;if(y<c||y>=c+b)return null;var l=y-c,_=this.points;return{object:this,pointId:l,dataCoord:[_[2*l],_[2*l+1]]}};function i(g,p){var y=g.gl,c=a(y),b=a(y),l=e(y,r.pointVertex,r.pointFragment),_=e(y,r.pickVertex,r.pickFragment),s=new t(g,c,b,l,_);return s.update(p),g.addObject(s),s}},{"./lib/shader":122,"gl-buffer":78,"gl-shader":132,"typedarray-pool":308}],124:[function(v,M,T){M.exports=e;function e(a,n,r,t){var f=n[0],o=n[1],i=n[2],g=n[3],p=r[0],y=r[1],c=r[2],b=r[3],l,_,s,A,m;return _=f*p+o*y+i*c+g*b,_<0&&(_=-_,p=-p,y=-y,c=-c,b=-b),1-_>1e-6?(l=Math.acos(_),s=Math.sin(l),A=Math.sin((1-t)*l)/s,m=Math.sin(t*l)/s):(A=1-t,m=t),a[0]=A*f+m*p,a[1]=A*o+m*y,a[2]=A*i+m*c,a[3]=A*g+m*b,a}},{}],125:[function(v,M,T){M.exports=function(e){return!e&&e!==0?"":e.toString()}},{}],126:[function(v,M,T){var e=v("vectorize-text");M.exports=n;var a={};function n(r,t,f){var o=a[t];if(o||(o=a[t]={}),r in o)return o[r];var i={textAlign:"center",textBaseline:"middle",lineHeight:1,font:t,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}};i.triangles=!0;var g=e(r,i);i.triangles=!1;var p=e(r,i),y,c;if(f&&f!==1){for(y=0;y<g.positions.length;++y)for(c=0;c<g.positions[y].length;++c)g.positions[y][c]/=f;for(y=0;y<p.positions.length;++y)for(c=0;c<p.positions[y].length;++c)p.positions[y][c]/=f}var b=[[1/0,1/0],[-1/0,-1/0]],l=p.positions.length;for(y=0;y<l;++y){var _=p.positions[y];for(c=0;c<2;++c)b[0][c]=Math.min(b[0][c],_[c]),b[1][c]=Math.max(b[1][c],_[c])}return o[r]=[g,p,b]}},{"vectorize-text":311}],127:[function(v,M,T){var e=v("gl-shader"),a=v("glslify"),n=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),r=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),t=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),f=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),o=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),i=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],g={vertex:n,fragment:f,attributes:i},p={vertex:r,fragment:f,attributes:i},y={vertex:t,fragment:f,attributes:i},c={vertex:n,fragment:o,attributes:i},b={vertex:r,fragment:o,attributes:i},l={vertex:t,fragment:o,attributes:i};function _(s,A){var m=e(s,A),h=m.attributes;return h.position.location=0,h.color.location=1,h.glyph.location=2,h.id.location=3,m}T.createPerspective=function(s){return _(s,g)},T.createOrtho=function(s){return _(s,p)},T.createProject=function(s){return _(s,y)},T.createPickPerspective=function(s){return _(s,c)},T.createPickOrtho=function(s){return _(s,b)},T.createPickProject=function(s){return _(s,l)}},{"gl-shader":132,glslify:231}],128:[function(v,M,T){var e=v("is-string-blank"),a=v("gl-buffer"),n=v("gl-vao"),r=v("typedarray-pool"),t=v("gl-mat4/multiply"),f=v("./lib/shaders"),o=v("./lib/glyphs"),i=v("./lib/get-simple-string"),g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];M.exports=J;function p(Z,Y){var j=Z[0],re=Z[1],se=Z[2],oe=Z[3];return Z[0]=Y[0]*j+Y[4]*re+Y[8]*se+Y[12]*oe,Z[1]=Y[1]*j+Y[5]*re+Y[9]*se+Y[13]*oe,Z[2]=Y[2]*j+Y[6]*re+Y[10]*se+Y[14]*oe,Z[3]=Y[3]*j+Y[7]*re+Y[11]*se+Y[15]*oe,Z}function y(Z,Y,j,re){return p(re,re),p(re,re),p(re,re)}function c(Z,Y){this.index=Z,this.dataCoordinate=this.position=Y}function b(Z){return Z===!0||Z>1?1:Z}function l(Z,Y,j,re,se,oe,N,U,q,Q,W,X){this.gl=Z,this.pixelRatio=1,this.shader=Y,this.orthoShader=j,this.projectShader=re,this.pointBuffer=se,this.colorBuffer=oe,this.glyphBuffer=N,this.idBuffer=U,this.vao=q,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=Q,this.pickOrthoShader=W,this.pickProjectShader=X,this.points=[],this._selectResult=new c(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}var _=l.prototype;_.pickSlots=1,_.setPickBase=function(Z){this.pickId=Z},_.isTransparent=function(){if(this.hasAlpha)return!0;for(var Z=0;Z<3;++Z)if(this.axesProject[Z]&&this.projectHasAlpha)return!0;return!1},_.isOpaque=function(){if(!this.hasAlpha)return!0;for(var Z=0;Z<3;++Z)if(this.axesProject[Z]&&!this.projectHasAlpha)return!0;return!1};var s=[0,0],A=[0,0,0],m=[0,0,0],h=[0,0,0,1],x=[0,0,0,1],u=g.slice(),L=[0,0,0],S=[[0,0,0],[0,0,0]];function k(Z){return Z[0]=Z[1]=Z[2]=0,Z}function P(Z,Y){return Z[0]=Y[0],Z[1]=Y[1],Z[2]=Y[2],Z[3]=1,Z}function z(Z,Y,j,re){return Z[0]=Y[0],Z[1]=Y[1],Z[2]=Y[2],Z[j]=re,Z}function I(Z){for(var Y=S,j=0;j<2;++j)for(var re=0;re<3;++re)Y[j][re]=Math.max(Math.min(Z[j][re],1e8),-1e8);return Y}function D(Z,Y,j,re){var se=Y.axesProject,oe=Y.gl,N=Z.uniforms,U=j.model||g,q=j.view||g,Q=j.projection||g,W=Y.axesBounds,X=I(Y.clipBounds),ee;Y.axes&&Y.axes.lastCubeProps?ee=Y.axes.lastCubeProps.axis:ee=[1,1,1],s[0]=2/oe.drawingBufferWidth,s[1]=2/oe.drawingBufferHeight,Z.bind(),N.view=q,N.projection=Q,N.screenSize=s,N.highlightId=Y.highlightId,N.highlightScale=Y.highlightScale,N.clipBounds=X,N.pickGroup=Y.pickId/255,N.pixelRatio=re;for(var te=0;te<3;++te)if(!!se[te]){N.scale=Y.projectScale[te],N.opacity=Y.projectOpacity[te];for(var ie=u,le=0;le<16;++le)ie[le]=0;for(var le=0;le<4;++le)ie[5*le]=1;ie[5*te]=0,ee[te]<0?ie[12+te]=W[0][te]:ie[12+te]=W[1][te],t(ie,U,ie),N.model=ie;var ge=(te+1)%3,fe=(te+2)%3,pe=k(A),ye=k(m);pe[ge]=1,ye[fe]=1;var Te=y(Q,q,U,P(h,pe)),_e=y(Q,q,U,P(x,ye));if(Math.abs(Te[1])>Math.abs(_e[1])){var De=Te;Te=_e,_e=De,De=pe,pe=ye,ye=De;var Be=ge;ge=fe,fe=Be}Te[0]<0&&(pe[ge]=-1),_e[1]>0&&(ye[fe]=-1);for(var Ue=0,xe=0,le=0;le<4;++le)Ue+=Math.pow(U[4*ge+le],2),xe+=Math.pow(U[4*fe+le],2);pe[ge]/=Math.sqrt(Ue),ye[fe]/=Math.sqrt(xe),N.axes[0]=pe,N.axes[1]=ye,N.fragClipBounds[0]=z(L,X[0],te,-1e8),N.fragClipBounds[1]=z(L,X[1],te,1e8),Y.vao.bind(),Y.vao.draw(oe.TRIANGLES,Y.vertexCount),Y.lineWidth>0&&(oe.lineWidth(Y.lineWidth*re),Y.vao.draw(oe.LINES,Y.lineVertexCount,Y.vertexCount)),Y.vao.unbind()}}var R=[-1e8,-1e8,-1e8],O=[1e8,1e8,1e8],F=[R,O];function V(Z,Y,j,re,se,oe,N){var U=j.gl;if((oe===j.projectHasAlpha||N)&&D(Y,j,re,se),oe===j.hasAlpha||N){Z.bind();var q=Z.uniforms;q.model=re.model||g,q.view=re.view||g,q.projection=re.projection||g,s[0]=2/U.drawingBufferWidth,s[1]=2/U.drawingBufferHeight,q.screenSize=s,q.highlightId=j.highlightId,q.highlightScale=j.highlightScale,q.fragClipBounds=F,q.clipBounds=j.axes.bounds,q.opacity=j.opacity,q.pickGroup=j.pickId/255,q.pixelRatio=se,j.vao.bind(),j.vao.draw(U.TRIANGLES,j.vertexCount),j.lineWidth>0&&(U.lineWidth(j.lineWidth*se),j.vao.draw(U.LINES,j.lineVertexCount,j.vertexCount)),j.vao.unbind()}}_.draw=function(Z){var Y=this.useOrtho?this.orthoShader:this.shader;V(Y,this.projectShader,this,Z,this.pixelRatio,!1,!1)},_.drawTransparent=function(Z){var Y=this.useOrtho?this.orthoShader:this.shader;V(Y,this.projectShader,this,Z,this.pixelRatio,!0,!1)},_.drawPick=function(Z){var Y=this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader;V(Y,this.pickProjectShader,this,Z,1,!0,!0)},_.pick=function(Z){if(!Z||Z.id!==this.pickId)return null;var Y=Z.value[2]+(Z.value[1]<<8)+(Z.value[0]<<16);if(Y>=this.pointCount||Y<0)return null;var j=this.points[Y],re=this._selectResult;re.index=Y;for(var se=0;se<3;++se)re.position[se]=re.dataCoordinate[se]=j[se];return re},_.highlight=function(Z){if(!Z)this.highlightId=[1,1,1,1];else{var Y=Z.index,j=Y&255,re=Y>>8&255,se=Y>>16&255;this.highlightId=[j/255,re/255,se/255,0]}};function G(Z,Y,j,re){var se;Array.isArray(Z)?Y<Z.length?se=Z[Y]:se=void 0:se=Z,se=i(se);var oe=!0;e(se)&&(se="\u25BC",oe=!1);var N=o(se,j,re);return{mesh:N[0],lines:N[1],bounds:N[2],visible:oe}}_.update=function(Z){if(Z=Z||{},"perspective"in Z&&(this.useOrtho=!Z.perspective),"orthographic"in Z&&(this.useOrtho=!!Z.orthographic),"lineWidth"in Z&&(this.lineWidth=Z.lineWidth),"project"in Z)if(Array.isArray(Z.project))this.axesProject=Z.project;else{var Y=!!Z.project;this.axesProject=[Y,Y,Y]}if("projectScale"in Z)if(Array.isArray(Z.projectScale))this.projectScale=Z.projectScale.slice();else{var j=+Z.projectScale;this.projectScale=[j,j,j]}if(this.projectHasAlpha=!1,"projectOpacity"in Z){if(Array.isArray(Z.projectOpacity))this.projectOpacity=Z.projectOpacity.slice();else{var j=+Z.projectOpacity;this.projectOpacity=[j,j,j]}for(var re=0;re<3;++re)this.projectOpacity[re]=b(this.projectOpacity[re]),this.projectOpacity[re]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in Z&&(this.opacity=b(Z.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var se=Z.position,oe=Z.font||"normal",N=Z.alignment||[0,0],U,q;if(N.length===2)U=N[0],q=N[1];else{U=[],q=[];for(var re=0;re<N.length;++re)U[re]=N[re][0],q[re]=N[re][1]}var Q=[1/0,1/0,1/0],W=[-1/0,-1/0,-1/0],X=Z.glyph,ee=Z.color,te=Z.size,ie=Z.angle,le=Z.lineColor,ge=-1,fe=0,pe=0,ye=0;if(se.length){ye=se.length;e:for(var re=0;re<ye;++re){for(var Te=se[re],_e=0;_e<3;++_e)if(isNaN(Te[_e])||!isFinite(Te[_e]))continue e;var De=G(X,re,oe,this.pixelRatio),Be=De.mesh,Ue=De.lines,xe=De.bounds;fe+=Be.cells.length*3,pe+=Ue.edges.length*2}}var Pe=fe+pe,Ve=r.mallocFloat(3*Pe),Qe=r.mallocFloat(4*Pe),Fe=r.mallocFloat(2*Pe),Le=r.mallocUint32(Pe);if(Pe>0){var Ne=0,dt=fe,Dt=[0,0,0,1],Xt=[0,0,0,1],At=Array.isArray(ee)&&Array.isArray(ee[0]),zt=Array.isArray(le)&&Array.isArray(le[0]);e:for(var re=0;re<ye;++re){ge+=1;for(var Te=se[re],_e=0;_e<3;++_e){if(isNaN(Te[_e])||!isFinite(Te[_e]))continue e;W[_e]=Math.max(W[_e],Te[_e]),Q[_e]=Math.min(Q[_e],Te[_e])}var De=G(X,re,oe,this.pixelRatio),Be=De.mesh,Ue=De.lines,xe=De.bounds,Ut=De.visible;if(!Ut)Dt=[1,1,1,0];else if(Array.isArray(ee)){var Ct;if(At?re<ee.length?Ct=ee[re]:Ct=[0,0,0,0]:Ct=ee,Ct.length===3){for(var _e=0;_e<3;++_e)Dt[_e]=Ct[_e];Dt[3]=1}else if(Ct.length===4){for(var _e=0;_e<4;++_e)Dt[_e]=Ct[_e];!this.hasAlpha&&Ct[3]<1&&(this.hasAlpha=!0)}}else Dt[0]=Dt[1]=Dt[2]=0,Dt[3]=1;if(!Ut)Xt=[1,1,1,0];else if(Array.isArray(le)){var Ct;if(zt?re<le.length?Ct=le[re]:Ct=[0,0,0,0]:Ct=le,Ct.length===3){for(var _e=0;_e<3;++_e)Xt[_e]=Ct[_e];Xt[_e]=1}else if(Ct.length===4){for(var _e=0;_e<4;++_e)Xt[_e]=Ct[_e];!this.hasAlpha&&Ct[3]<1&&(this.hasAlpha=!0)}}else Xt[0]=Xt[1]=Xt[2]=0,Xt[3]=1;var Mt=.5;Ut?Array.isArray(te)?re<te.length?Mt=+te[re]:Mt=12:te?Mt=+te:this.useOrtho&&(Mt=12):Mt=0;var rt=0;Array.isArray(ie)?re<ie.length?rt=+ie[re]:rt=0:ie&&(rt=+ie);for(var ct=Math.cos(rt),Ze=Math.sin(rt),Te=se[re],_e=0;_e<3;++_e)W[_e]=Math.max(W[_e],Te[_e]),Q[_e]=Math.min(Q[_e],Te[_e]);var ke=U,Ge=q,ke=0;Array.isArray(U)?re<U.length?ke=U[re]:ke=0:U&&(ke=U);var Ge=0;Array.isArray(q)?re<q.length?Ge=q[re]:Ge=0:q&&(Ge=q),ke*=ke>0?1-xe[0][0]:ke<0?1+xe[1][0]:1,Ge*=Ge>0?1-xe[0][1]:Ge<0?1+xe[1][1]:1;for(var Je=[ke,Ge],qt=Be.cells||[],Ot=Be.positions||[],_e=0;_e<qt.length;++_e)for(var ot=qt[_e],Pt=0;Pt<3;++Pt){for(var _t=0;_t<3;++_t)Ve[3*Ne+_t]=Te[_t];for(var _t=0;_t<4;++_t)Qe[4*Ne+_t]=Dt[_t];Le[Ne]=ge;var Bt=Ot[ot[Pt]];Fe[2*Ne]=Mt*(ct*Bt[0]-Ze*Bt[1]+Je[0]),Fe[2*Ne+1]=Mt*(Ze*Bt[0]+ct*Bt[1]+Je[1]),Ne+=1}for(var qt=Ue.edges,Ot=Ue.positions,_e=0;_e<qt.length;++_e)for(var ot=qt[_e],Pt=0;Pt<2;++Pt){for(var _t=0;_t<3;++_t)Ve[3*dt+_t]=Te[_t];for(var _t=0;_t<4;++_t)Qe[4*dt+_t]=Xt[_t];Le[dt]=ge;var Bt=Ot[ot[Pt]];Fe[2*dt]=Mt*(ct*Bt[0]-Ze*Bt[1]+Je[0]),Fe[2*dt+1]=Mt*(Ze*Bt[0]+ct*Bt[1]+Je[1]),dt+=1}}}this.bounds=[Q,W],this.points=se,this.pointCount=se.length,this.vertexCount=fe,this.lineVertexCount=pe,this.pointBuffer.update(Ve),this.colorBuffer.update(Qe),this.glyphBuffer.update(Fe),this.idBuffer.update(Le),r.free(Ve),r.free(Qe),r.free(Fe),r.free(Le)},_.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()};function J(Z){var Y=Z.gl,j=f.createPerspective(Y),re=f.createOrtho(Y),se=f.createProject(Y),oe=f.createPickPerspective(Y),N=f.createPickOrtho(Y),U=f.createPickProject(Y),q=a(Y),Q=a(Y),W=a(Y),X=a(Y),ee=n(Y,[{buffer:q,size:3,type:Y.FLOAT},{buffer:Q,size:4,type:Y.FLOAT},{buffer:W,size:2,type:Y.FLOAT},{buffer:X,size:4,type:Y.UNSIGNED_BYTE,normalized:!0}]),te=new l(Y,j,re,se,q,Q,W,X,ee,oe,N,U);return te.update(Z),te}},{"./lib/get-simple-string":125,"./lib/glyphs":126,"./lib/shaders":127,"gl-buffer":78,"gl-mat4/multiply":100,"gl-vao":150,"is-string-blank":239,"typedarray-pool":308}],129:[function(v,M,T){var e=v("glslify");T.boxVertex=e([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),T.boxFragment=e([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},{glslify:231}],130:[function(v,M,T){var e=v("gl-shader"),a=v("gl-buffer"),n=v("./lib/shaders");M.exports=f;function r(o,i,g){this.plot=o,this.boxBuffer=i,this.boxShader=g,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}var t=r.prototype;t.draw=function(){if(!!this.enabled){var o=this.plot,i=this.selectBox,g=this.borderWidth;this.innerFill;var p=this.innerColor;this.outerFill;var y=this.outerColor,c=this.borderColor,b=o.box,l=o.screenBox,_=o.dataBox,s=o.viewBox,A=o.pixelRatio,m=(i[0]-_[0])*(s[2]-s[0])/(_[2]-_[0])+s[0],h=(i[1]-_[1])*(s[3]-s[1])/(_[3]-_[1])+s[1],x=(i[2]-_[0])*(s[2]-s[0])/(_[2]-_[0])+s[0],u=(i[3]-_[1])*(s[3]-s[1])/(_[3]-_[1])+s[1];if(m=Math.max(m,s[0]),h=Math.max(h,s[1]),x=Math.min(x,s[2]),u=Math.min(u,s[3]),!(x<m||u<h)){b.bind();var L=l[2]-l[0],S=l[3]-l[1];if(this.outerFill&&(b.drawBox(0,0,L,h,y),b.drawBox(0,h,m,u,y),b.drawBox(0,u,L,S,y),b.drawBox(x,h,L,u,y)),this.innerFill&&b.drawBox(m,h,x,u,p),g>0){var k=g*A;b.drawBox(m-k,h-k,x+k,h+k,c),b.drawBox(m-k,u-k,x+k,u+k,c),b.drawBox(m-k,h-k,m+k,u+k,c),b.drawBox(x-k,h-k,x+k,u+k,c)}}}},t.update=function(o){o=o||{},this.innerFill=!!o.innerFill,this.outerFill=!!o.outerFill,this.innerColor=(o.innerColor||[0,0,0,.5]).slice(),this.outerColor=(o.outerColor||[0,0,0,.5]).slice(),this.borderColor=(o.borderColor||[0,0,0,1]).slice(),this.borderWidth=o.borderWidth||0,this.selectBox=(o.selectBox||this.selectBox).slice()},t.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)};function f(o,i){var g=o.gl,p=a(g,[0,0,0,1,1,0,1,1]),y=e(g,n.boxVertex,n.boxFragment),c=new r(o,p,y);return c.update(i),o.addOverlay(c),c}},{"./lib/shaders":129,"gl-buffer":78,"gl-shader":132}],131:[function(v,M,T){M.exports=g;var e=v("gl-fbo"),a=v("typedarray-pool"),n=v("ndarray"),r=v("bit-twiddle").nextPow2,t=function(p,y,c){for(var b=1e8,l=-1,_=-1,s=p.shape[0],A=p.shape[1],m=0;m<s;m++)for(var h=0;h<A;h++){var x=p.get(m,h,0),u=p.get(m,h,1),L=p.get(m,h,2),S=p.get(m,h,3);if(x<255||u<255||L<255||S<255){var k=y-m,P=c-h,z=k*k+P*P;z<b&&(b=z,l=m,_=h)}}return[l,_,b]};function f(p,y,c,b,l){this.coord=[p,y],this.id=c,this.value=b,this.distance=l}function o(p,y,c){this.gl=p,this.fbo=y,this.buffer=c,this._readTimeout=null;var b=this;this._readCallback=function(){!b.gl||(y.bind(),p.readPixels(0,0,y.shape[0],y.shape[1],p.RGBA,p.UNSIGNED_BYTE,b.buffer),b._readTimeout=null)}}var i=o.prototype;Object.defineProperty(i,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(p){if(!!this.gl){this.fbo.shape=p;var y=this.fbo.shape[0],c=this.fbo.shape[1];if(c*y*4>this.buffer.length){a.free(this.buffer);for(var b=this.buffer=a.mallocUint8(r(c*y*4)),l=0;l<c*y*4;++l)b[l]=255}return p}}}),i.begin=function(){var p=this.gl;this.shape,p&&(this.fbo.bind(),p.clearColor(1,1,1,1),p.clear(p.COLOR_BUFFER_BIT|p.DEPTH_BUFFER_BIT))},i.end=function(){var p=this.gl;!p||(p.bindFramebuffer(p.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},i.query=function(p,y,c){if(!this.gl)return null;var b=this.fbo.shape.slice();p=p|0,y=y|0,typeof c!="number"&&(c=1);var l=Math.min(Math.max(p-c,0),b[0])|0,_=Math.min(Math.max(p+c,0),b[0])|0,s=Math.min(Math.max(y-c,0),b[1])|0,A=Math.min(Math.max(y+c,0),b[1])|0;if(_<=l||A<=s)return null;var m=[_-l,A-s],h=n(this.buffer,[m[0],m[1],4],[4,b[0]*4,1],4*(l+b[0]*s)),x=t(h.hi(m[0],m[1],1),c,c),u=x[0],L=x[1];if(u<0||Math.pow(this.radius,2)<x[2])return null;var S=h.get(u,L,0),k=h.get(u,L,1),P=h.get(u,L,2),z=h.get(u,L,3);return new f(u+l|0,L+s|0,S,[k,P,z],Math.sqrt(x[2]))},i.dispose=function(){!this.gl||(this.fbo.dispose(),a.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))};function g(p,y){var c=y[0],b=y[1],l={},_=e(p,c,b,l),s=a.mallocUint8(c*b*4);return new o(p,_,s)}},{"bit-twiddle":32,"gl-fbo":86,ndarray:259,"typedarray-pool":308}],132:[function(v,M,T){var e=v("./lib/create-uniforms"),a=v("./lib/create-attributes"),n=v("./lib/reflect"),r=v("./lib/shader-cache"),t=v("./lib/runtime-reflect"),f=v("./lib/GLError");function o(y){this.gl=y,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var i=o.prototype;i.bind=function(){this.program||this._relink();var y,c=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),b=this.gl.lastAttribCount;if(c>b)for(y=b;y<c;y++)this.gl.enableVertexAttribArray(y);else if(b>c)for(y=c;y<b;y++)this.gl.disableVertexAttribArray(y);this.gl.lastAttribCount=c,this.gl.useProgram(this.program)},i.dispose=function(){for(var y=this.gl.lastAttribCount,c=0;c<y;c++)this.gl.disableVertexAttribArray(c);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};function g(y,c){return y.name<c.name?-1:1}i.update=function(y,c,b,l){if(!c||arguments.length===1){var _=y;y=_.vertex,c=_.fragment,b=_.uniforms,l=_.attributes}var s=this,A=s.gl,m=s._vref;s._vref=r.shader(A,A.VERTEX_SHADER,y),m&&m.dispose(),s.vertShader=s._vref.shader;var h=this._fref;if(s._fref=r.shader(A,A.FRAGMENT_SHADER,c),h&&h.dispose(),s.fragShader=s._fref.shader,!b||!l){var x=A.createProgram();if(A.attachShader(x,s.fragShader),A.attachShader(x,s.vertShader),A.linkProgram(x),!A.getProgramParameter(x,A.LINK_STATUS)){var u=A.getProgramInfoLog(x);throw new f(u,"Error linking program:"+u)}b=b||t.uniforms(A,x),l=l||t.attributes(A,x),A.deleteProgram(x)}l=l.slice(),l.sort(g);var L=[],S=[],k=[],P;for(P=0;P<l.length;++P){var z=l[P];if(z.type.indexOf("mat")>=0){for(var I=z.type.charAt(z.type.length-1)|0,D=new Array(I),R=0;R<I;++R)D[R]=k.length,S.push(z.name+"["+R+"]"),typeof z.location=="number"?k.push(z.location+R):Array.isArray(z.location)&&z.location.length===I&&typeof z.location[R]=="number"?k.push(z.location[R]|0):k.push(-1);L.push({name:z.name,type:z.type,locations:D})}else L.push({name:z.name,type:z.type,locations:[k.length]}),S.push(z.name),typeof z.location=="number"?k.push(z.location|0):k.push(-1)}var O=0;for(P=0;P<k.length;++P)if(k[P]<0){for(;k.indexOf(O)>=0;)O+=1;k[P]=O}var F=new Array(b.length);function V(){s.program=r.program(A,s._vref,s._fref,S,k);for(var G=0;G<b.length;++G)F[G]=A.getUniformLocation(s.program,b[G].name)}V(),s._relink=V,s.types={uniforms:n(b),attributes:n(l)},s.attributes=a(A,s,L,k),Object.defineProperty(s,"uniforms",e(A,s,b,F))};function p(y,c,b,l,_){var s=new o(y);return s.update(c,b,l,_),s}M.exports=p},{"./lib/GLError":133,"./lib/create-attributes":134,"./lib/create-uniforms":135,"./lib/reflect":136,"./lib/runtime-reflect":137,"./lib/shader-cache":138}],133:[function(v,M,T){function e(a,n,r){this.shortMessage=n||"",this.longMessage=r||"",this.rawError=a||"",this.message="gl-shader: "+(n||a||"")+(r?`
`+r:""),this.stack=new Error().stack}e.prototype=new Error,e.prototype.name="GLError",e.prototype.constructor=e,M.exports=e},{}],134:[function(v,M,T){M.exports=o;var e=v("./GLError");function a(i,g,p,y,c,b){this._gl=i,this._wrapper=g,this._index=p,this._locations=y,this._dimension=c,this._constFunc=b}var n=a.prototype;n.pointer=function(g,p,y,c){var b=this,l=b._gl,_=b._locations[b._index];l.vertexAttribPointer(_,b._dimension,g||l.FLOAT,!!p,y||0,c||0),l.enableVertexAttribArray(_)},n.set=function(i,g,p,y){return this._constFunc(this._locations[this._index],i,g,p,y)},Object.defineProperty(n,"location",{get:function(){return this._locations[this._index]},set:function(i){return i!==this._locations[this._index]&&(this._locations[this._index]=i|0,this._wrapper.program=null),i|0}});var r=[function(i,g,p){return p.length===void 0?i.vertexAttrib1f(g,p):i.vertexAttrib1fv(g,p)},function(i,g,p,y){return p.length===void 0?i.vertexAttrib2f(g,p,y):i.vertexAttrib2fv(g,p)},function(i,g,p,y,c){return p.length===void 0?i.vertexAttrib3f(g,p,y,c):i.vertexAttrib3fv(g,p)},function(i,g,p,y,c,b){return p.length===void 0?i.vertexAttrib4f(g,p,y,c,b):i.vertexAttrib4fv(g,p)}];function t(i,g,p,y,c,b,l){var _=r[c],s=new a(i,g,p,y,c,_);Object.defineProperty(b,l,{set:function(A){return i.disableVertexAttribArray(y[p]),_(i,y[p],A),A},get:function(){return s},enumerable:!0})}function f(i,g,p,y,c,b,l){for(var _=new Array(c),s=new Array(c),A=0;A<c;++A)t(i,g,p[A],y,c,_,A),s[A]=_[A];Object.defineProperty(_,"location",{set:function(x){if(Array.isArray(x))for(var u=0;u<c;++u)s[u].location=x[u];else for(var u=0;u<c;++u)s[u].location=x+u;return x},get:function(){for(var x=new Array(c),u=0;u<c;++u)x[u]=y[p[u]];return x},enumerable:!0}),_.pointer=function(x,u,L,S){x=x||i.FLOAT,u=!!u,L=L||c*c,S=S||0;for(var k=0;k<c;++k){var P=y[p[k]];i.vertexAttribPointer(P,c,x,u,L,S+k*c),i.enableVertexAttribArray(P)}};var m=new Array(c),h=i["vertexAttrib"+c+"fv"];Object.defineProperty(b,l,{set:function(x){for(var u=0;u<c;++u){var L=y[p[u]];if(i.disableVertexAttribArray(L),Array.isArray(x[0]))h.call(i,L,x[u]);else{for(var S=0;S<c;++S)m[S]=x[c*u+S];h.call(i,L,m)}}return x},get:function(){return _},enumerable:!0})}function o(i,g,p,y){for(var c={},b=0,l=p.length;b<l;++b){var _=p[b],s=_.name,A=_.type,m=_.locations;switch(A){case"bool":case"int":case"float":t(i,g,m[0],y,1,c,s);break;default:if(A.indexOf("vec")>=0){var h=A.charCodeAt(A.length-1)-48;if(h<2||h>4)throw new e("","Invalid data type for attribute "+s+": "+A);t(i,g,m[0],y,h,c,s)}else if(A.indexOf("mat")>=0){var h=A.charCodeAt(A.length-1)-48;if(h<2||h>4)throw new e("","Invalid data type for attribute "+s+": "+A);f(i,g,m,y,h,c,s)}else throw new e("","Unknown data type for attribute "+s+": "+A);break}}return c}},{"./GLError":133}],135:[function(v,M,T){var e=v("./reflect"),a=v("./GLError");M.exports=t;function n(f){return function(){return f}}function r(f,o){for(var i=new Array(f),g=0;g<f;++g)i[g]=o;return i}function t(f,o,i,g){function p(A){return function(m,h,x){return m.getUniform(h.program,x[A])}}function y(A){return function(h){for(var x=c("",A),u=0;u<x.length;++u){var L=x[u],S=L[0],k=L[1];if(g[k]){var P=h;if(typeof S=="string"&&(S.indexOf(".")===0||S.indexOf("[")===0)){var z=S;if(S.indexOf(".")===0&&(z=S.slice(1)),z.indexOf("]")===z.length-1){var I=z.indexOf("["),D=z.slice(0,I),R=z.slice(I+1,z.length-1);P=D?h[D][R]:h[R]}else P=h[z]}var O=i[k].type,F;switch(O){case"bool":case"int":case"sampler2D":case"samplerCube":f.uniform1i(g[k],P);break;case"float":f.uniform1f(g[k],P);break;default:var V=O.indexOf("vec");if(0<=V&&V<=1&&O.length===4+V){if(F=O.charCodeAt(O.length-1)-48,F<2||F>4)throw new a("","Invalid data type");switch(O.charAt(0)){case"b":case"i":f["uniform"+F+"iv"](g[k],P);break;case"v":f["uniform"+F+"fv"](g[k],P);break;default:throw new a("","Unrecognized data type for vector "+name+": "+O)}}else if(O.indexOf("mat")===0&&O.length===4){if(F=O.charCodeAt(O.length-1)-48,F<2||F>4)throw new a("","Invalid uniform dimension type for matrix "+name+": "+O);f["uniformMatrix"+F+"fv"](g[k],!1,P);break}else throw new a("","Unknown uniform data type for "+name+": "+O)}}}}}function c(A,m){if(typeof m!="object")return[[A,m]];var h=[];for(var x in m){var u=m[x],L=A;parseInt(x)+""===x?L+="["+x+"]":L+="."+x,typeof u=="object"?h.push.apply(h,c(L,u)):h.push([L,u])}return h}function b(A){switch(A){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var m=A.indexOf("vec");if(0<=m&&m<=1&&A.length===4+m){var h=A.charCodeAt(A.length-1)-48;if(h<2||h>4)throw new a("","Invalid data type");return A.charAt(0)==="b"?r(h,!1):r(h,0)}else if(A.indexOf("mat")===0&&A.length===4){var h=A.charCodeAt(A.length-1)-48;if(h<2||h>4)throw new a("","Invalid uniform dimension type for matrix "+name+": "+A);return r(h*h,0)}else throw new a("","Unknown uniform data type for "+name+": "+A)}}function l(A,m,h){if(typeof h=="object"){var x=_(h);Object.defineProperty(A,m,{get:n(x),set:y(h),enumerable:!0,configurable:!1})}else g[h]?Object.defineProperty(A,m,{get:p(h),set:y(h),enumerable:!0,configurable:!1}):A[m]=b(i[h].type)}function _(A){var m;if(Array.isArray(A)){m=new Array(A.length);for(var h=0;h<A.length;++h)l(m,h,A[h])}else{m={};for(var x in A)l(m,x,A[x])}return m}var s=e(i,!0);return{get:n(_(s)),set:y(s),enumerable:!0,configurable:!0}}},{"./GLError":133,"./reflect":136}],136:[function(v,M,T){M.exports=e;function e(a,n){for(var r={},t=0;t<a.length;++t)for(var f=a[t].name,o=f.split("."),i=r,g=0;g<o.length;++g){var p=o[g].split("[");if(p.length>1){p[0]in i||(i[p[0]]=[]),i=i[p[0]];for(var y=1;y<p.length;++y){var c=parseInt(p[y]);y<p.length-1||g<o.length-1?(c in i||(y<p.length-1?i[c]=[]:i[c]={}),i=i[c]):n?i[c]=t:i[c]=a[t].type}}else g<o.length-1?(p[0]in i||(i[p[0]]={}),i=i[p[0]]):n?i[p[0]]=t:i[p[0]]=a[t].type}return r}},{}],137:[function(v,M,T){T.uniforms=r,T.attributes=t;var e={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},a=null;function n(f,o){if(!a){var i=Object.keys(e);a={};for(var g=0;g<i.length;++g){var p=i[g];a[f[p]]=e[p]}}return a[o]}function r(f,o){for(var i=f.getProgramParameter(o,f.ACTIVE_UNIFORMS),g=[],p=0;p<i;++p){var y=f.getActiveUniform(o,p);if(y){var c=n(f,y.type);if(y.size>1)for(var b=0;b<y.size;++b)g.push({name:y.name.replace("[0]","["+b+"]"),type:c});else g.push({name:y.name,type:c})}}return g}function t(f,o){for(var i=f.getProgramParameter(o,f.ACTIVE_ATTRIBUTES),g=[],p=0;p<i;++p){var y=f.getActiveAttrib(o,p);y&&g.push({name:y.name,type:n(f,y.type)})}return g}},{}],138:[function(v,M,T){T.shader=c,T.program=b;var e=v("./GLError"),a=v("gl-format-compiler-error"),n=typeof WeakMap>"u"?v("weakmap-shim"):WeakMap,r=new n,t=0;function f(l,_,s,A,m,h,x){this.id=l,this.src=_,this.type=s,this.shader=A,this.count=h,this.programs=[],this.cache=x}f.prototype.dispose=function(){if(--this.count===0){for(var l=this.cache,_=l.gl,s=this.programs,A=0,m=s.length;A<m;++A){var h=l.programs[s[A]];h&&(delete l.programs[A],_.deleteProgram(h))}_.deleteShader(this.shader),delete l.shaders[this.type===_.FRAGMENT_SHADER|0][this.src]}};function o(l){this.gl=l,this.shaders=[{},{}],this.programs={}}var i=o.prototype;function g(l,_,s){var A=l.createShader(_);if(l.shaderSource(A,s),l.compileShader(A),!l.getShaderParameter(A,l.COMPILE_STATUS)){var m=l.getShaderInfoLog(A);try{var h=a(m,s,_)}catch(x){throw console.warn("Failed to format compiler error: "+x),new e(m,`Error compiling shader:
`+m)}throw new e(m,h.short,h.long)}return A}i.getShaderReference=function(l,_){var s=this.gl,A=this.shaders[l===s.FRAGMENT_SHADER|0],m=A[_];if(!m||!s.isShader(m.shader)){var h=g(s,l,_);m=A[_]=new f(t++,_,l,h,[],1,this)}else m.count+=1;return m};function p(l,_,s,A,m){var h=l.createProgram();l.attachShader(h,_),l.attachShader(h,s);for(var x=0;x<A.length;++x)l.bindAttribLocation(h,m[x],A[x]);if(l.linkProgram(h),!l.getProgramParameter(h,l.LINK_STATUS)){var u=l.getProgramInfoLog(h);throw new e(u,"Error linking program: "+u)}return h}i.getProgram=function(l,_,s,A){var m=[l.id,_.id,s.join(":"),A.join(":")].join("@"),h=this.programs[m];return(!h||!this.gl.isProgram(h))&&(this.programs[m]=h=p(this.gl,l.shader,_.shader,s,A),l.programs.push(m),_.programs.push(m)),h};function y(l){var _=r.get(l);return _||(_=new o(l),r.set(l,_)),_}function c(l,_,s){return y(l).getShaderReference(_,s)}function b(l,_,s,A,m){return y(l).getProgram(_,s,A,m)}},{"./GLError":133,"gl-format-compiler-error":87,"weakmap-shim":316}],139:[function(v,M,T){M.exports=n;function e(r){this.plot=r,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}var a=e.prototype;a.update=function(r){r=r||{},this.enable=(r.enable||[!0,!0,!1,!1]).slice(),this.width=(r.width||[1,1,1,1]).slice(),this.color=(r.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(t){return t.slice()}),this.center=(r.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},a.draw=function(){var r=this.enable,t=this.width,f=this.color,o=this.center,i=this.plot,g=i.line,p=i.dataBox,y=i.viewBox;if(g.bind(),p[0]<=o[0]&&o[0]<=p[2]&&p[1]<=o[1]&&o[1]<=p[3]){var c=y[0]+(o[0]-p[0])/(p[2]-p[0])*(y[2]-y[0]),b=y[1]+(o[1]-p[1])/(p[3]-p[1])*(y[3]-y[1]);r[0]&&g.drawLine(c,b,y[0],b,t[0],f[0]),r[1]&&g.drawLine(c,b,c,y[1],t[1],f[1]),r[2]&&g.drawLine(c,b,y[2],b,t[2],f[2]),r[3]&&g.drawLine(c,b,c,y[3],t[3],f[3])}},a.dispose=function(){this.plot.removeOverlay(this)};function n(r,t){var f=new e(r);return f.update(t),r.addOverlay(f),f}},{}],140:[function(v,M,T){var e=v("glslify"),a=v("gl-shader"),n=e([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),r=e([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);M.exports=function(t){return a(t,n,r,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":132,glslify:231}],141:[function(v,M,T){var e=v("gl-buffer"),a=v("gl-vao"),n=v("./shaders/index");M.exports=p;var r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function t(y,c,b,l){this.gl=y,this.buffer=c,this.vao=b,this.shader=l,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var f=t.prototype,o=[0,0,0],i=[0,0,0],g=[0,0];f.isTransparent=function(){return!1},f.drawTransparent=function(y){},f.draw=function(y){var c=this.gl,b=this.vao,l=this.shader;b.bind(),l.bind();var _=y.model||r,s=y.view||r,A=y.projection||r,m;this.axes&&(m=this.axes.lastCubeProps.axis);for(var h=o,x=i,u=0;u<3;++u)m&&m[u]<0?(h[u]=this.bounds[0][u],x[u]=this.bounds[1][u]):(h[u]=this.bounds[1][u],x[u]=this.bounds[0][u]);g[0]=c.drawingBufferWidth,g[1]=c.drawingBufferHeight,l.uniforms.model=_,l.uniforms.view=s,l.uniforms.projection=A,l.uniforms.coordinates=[this.position,h,x],l.uniforms.colors=this.colors,l.uniforms.screenShape=g;for(var u=0;u<3;++u)l.uniforms.lineWidth=this.lineWidth[u]*this.pixelRatio,this.enabled[u]&&(b.draw(c.TRIANGLES,6,6*u),this.drawSides[u]&&b.draw(c.TRIANGLES,12,18+12*u));b.unbind()},f.update=function(y){!y||("bounds"in y&&(this.bounds=y.bounds),"position"in y&&(this.position=y.position),"lineWidth"in y&&(this.lineWidth=y.lineWidth),"colors"in y&&(this.colors=y.colors),"enabled"in y&&(this.enabled=y.enabled),"drawSides"in y&&(this.drawSides=y.drawSides))},f.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function p(y,c){var b=[];function l(h,x,u,L,S,k){var P=[h,x,u,0,0,0,1];P[L+3]=1,P[L]=S,b.push.apply(b,P),P[6]=-1,b.push.apply(b,P),P[L]=k,b.push.apply(b,P),b.push.apply(b,P),P[6]=1,b.push.apply(b,P),P[L]=S,b.push.apply(b,P)}l(0,0,0,0,0,1),l(0,0,0,1,0,1),l(0,0,0,2,0,1),l(1,0,0,1,-1,1),l(1,0,0,2,-1,1),l(0,1,0,0,-1,1),l(0,1,0,2,-1,1),l(0,0,1,0,-1,1),l(0,0,1,1,-1,1);var _=e(y,b),s=a(y,[{type:y.FLOAT,buffer:_,size:3,offset:0,stride:28},{type:y.FLOAT,buffer:_,size:3,offset:12,stride:28},{type:y.FLOAT,buffer:_,size:1,offset:24,stride:28}]),A=n(y);A.attributes.position.location=0,A.attributes.color.location=1,A.attributes.weight.location=2;var m=new t(y,_,s,A);return m.update(c),m}},{"./shaders/index":140,"gl-buffer":78,"gl-vao":150}],142:[function(v,M,T){var e=v("glslify"),a=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),n=e([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),r=e([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),t=e([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);T.meshShader={vertex:a,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},T.pickShader={vertex:r,fragment:t,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:231}],143:[function(v,M,T){var e=v("gl-vec3"),a=v("gl-vec4"),n=["xyz","xzy","yxz","yzx","zxy","zyx"],r=function(b,l,_,s){for(var A=b.points,m=b.velocities,h=b.divergences,x=[],u=[],L=[],S=[],k=[],P=[],z=0,I=0,D=a.create(),R=a.create(),O=8,F=0;F<A.length;F++){var V=A[F],G=m[F],J=h[F];l===0&&(J=_*.05),I=e.length(G)/s,D=a.create(),e.copy(D,G),D[3]=J;for(var Z=0;Z<O;Z++)k[Z]=[V[0],V[1],V[2],Z];if(S.length>0)for(var Z=0;Z<O;Z++){var Y=(Z+1)%O;x.push(S[Z],k[Z],k[Y],k[Y],S[Y],S[Z]),L.push(R,D,D,D,R,R),P.push(z,I,I,I,z,z);var j=x.length;u.push([j-6,j-5,j-4],[j-3,j-2,j-1])}var re=S;S=k,k=re;var se=R;R=D,D=se;var oe=z;z=I,I=oe}return{positions:x,cells:u,vectors:L,vertexIntensity:P}},t=function(b,l,_,s){for(var A=0,m=0;m<b.length;m++)for(var h=b[m].velocities,x=0;x<h.length;x++)A=Math.max(A,e.length(h[x]));for(var u=b.map(function(F){return r(F,_,s,A)}),L=[],S=[],k=[],P=[],m=0;m<u.length;m++){var z=u[m],I=L.length;L=L.concat(z.positions),k=k.concat(z.vectors),P=P.concat(z.vertexIntensity);for(var x=0;x<z.cells.length;x++){var D=z.cells[x],R=[];S.push(R);for(var O=0;O<D.length;O++)R.push(D[O]+I)}}return{positions:L,cells:S,vectors:k,vertexIntensity:P,colormap:l}},f=function(b,l){var _=b.length,s;for(s=0;s<_;s++){var A=b[s];if(A===l)return s;if(A>l)return s-1}return s},o=function(b,l,_){return b<l?l:b>_?_:b},i=function(b,l,_){var s=l.vectors,A=l.meshgrid,m=b[0],h=b[1],x=b[2],u=A[0].length,L=A[1].length,S=A[2].length,k=f(A[0],m),P=f(A[1],h),z=f(A[2],x),I=k+1,D=P+1,R=z+1;if(k=o(k,0,u-1),I=o(I,0,u-1),P=o(P,0,L-1),D=o(D,0,L-1),z=o(z,0,S-1),R=o(R,0,S-1),k<0||P<0||z<0||I>u-1||D>L-1||R>S-1)return e.create();var O=A[0][k],F=A[0][I],V=A[1][P],G=A[1][D],J=A[2][z],Z=A[2][R],Y=(m-O)/(F-O),j=(h-V)/(G-V),re=(x-J)/(Z-J);isFinite(Y)||(Y=.5),isFinite(j)||(j=.5),isFinite(re)||(re=.5);var se,oe,N,U,q,Q;switch(_.reversedX&&(k=u-1-k,I=u-1-I),_.reversedY&&(P=L-1-P,D=L-1-D),_.reversedZ&&(z=S-1-z,R=S-1-R),_.filled){case 5:q=z,Q=R,N=P*S,U=D*S,se=k*S*L,oe=I*S*L;break;case 4:q=z,Q=R,se=k*S,oe=I*S,N=P*S*u,U=D*S*u;break;case 3:N=P,U=D,q=z*L,Q=R*L,se=k*L*S,oe=I*L*S;break;case 2:N=P,U=D,se=k*L,oe=I*L,q=z*L*u,Q=R*L*u;break;case 1:se=k,oe=I,q=z*u,Q=R*u,N=P*u*S,U=D*u*S;break;default:se=k,oe=I,N=P*u,U=D*u,q=z*u*L,Q=R*u*L;break}var W=s[se+N+q],X=s[se+N+Q],ee=s[se+U+q],te=s[se+U+Q],ie=s[oe+N+q],le=s[oe+N+Q],ge=s[oe+U+q],fe=s[oe+U+Q],pe=e.create(),ye=e.create(),Te=e.create(),_e=e.create();e.lerp(pe,W,ie,Y),e.lerp(ye,X,le,Y),e.lerp(Te,ee,ge,Y),e.lerp(_e,te,fe,Y);var De=e.create(),Be=e.create();e.lerp(De,pe,Te,j),e.lerp(Be,ye,_e,j);var Ue=e.create();return e.lerp(Ue,De,Be,re),Ue},g=function(b){var l=1/0;b.sort(function(m,h){return m-h});for(var _=b.length,s=1;s<_;s++){var A=Math.abs(b[s]-b[s-1]);A<l&&(l=A)}return l},p=function(b){for(var l=[],_=[],s=[],A={},m={},h={},x=b.length,u=0;u<x;u++){var L=b[u],S=L[0],k=L[1],P=L[2];A[S]||(l.push(S),A[S]=!0),m[k]||(_.push(k),m[k]=!0),h[P]||(s.push(P),h[P]=!0)}var z=g(l),I=g(_),D=g(s),R=Math.min(z,I,D);return isFinite(R)?R:1};M.exports=function(b,l){var _=b.startingPositions,s=b.maxLength||1e3,A=b.tubeSize||1,m=b.absoluteTubeSize,h=b.gridFill||"+x+y+z",x={};h.indexOf("-x")!==-1&&(x.reversedX=!0),h.indexOf("-y")!==-1&&(x.reversedY=!0),h.indexOf("-z")!==-1&&(x.reversedZ=!0),x.filled=n.indexOf(h.replace(/-/g,"").replace(/\+/g,""));var u=b.getVelocity||function(le){return i(le,b,x)},L=b.getDivergence||function(le,ge){var fe=e.create(),pe=1e-4;e.add(fe,le,[pe,0,0]);var ye=u(fe);e.subtract(ye,ye,ge),e.scale(ye,ye,1/pe),e.add(fe,le,[0,pe,0]);var Te=u(fe);e.subtract(Te,Te,ge),e.scale(Te,Te,1/pe),e.add(fe,le,[0,0,pe]);var _e=u(fe);return e.subtract(_e,_e,ge),e.scale(_e,_e,1/pe),e.add(fe,ye,Te),e.add(fe,fe,_e),fe},S=[],k=l[0][0],P=l[0][1],z=l[0][2],I=l[1][0],D=l[1][1],R=l[1][2],O=function(le){var ge=le[0],fe=le[1],pe=le[2];return!(ge<k||ge>I||fe<P||fe>D||pe<z||pe>R)},F=e.distance(l[0],l[1]),V=10*F/s,G=V*V,J=1,Z=0,Y=_.length;Y>1&&(J=p(_));for(var j=0;j<Y;j++){var re=e.create();e.copy(re,_[j]);var se=[re],oe=[],N=u(re),U=re;oe.push(N);var q=[],Q=L(re,N),W=e.length(Q);isFinite(W)&&W>Z&&(Z=W),q.push(W),S.push({points:se,velocities:oe,divergences:q});for(var X=0;X<s*100&&se.length<s&&O(re);){X++;var ee=e.clone(N),te=e.squaredLength(ee);if(te===0)break;if(te>G&&e.scale(ee,ee,V/Math.sqrt(te)),e.add(ee,ee,re),N=u(ee),e.squaredDistance(U,ee)-G>-1e-4*G){se.push(ee),U=ee,oe.push(N);var Q=L(ee,N),W=e.length(Q);isFinite(W)&&W>Z&&(Z=W),q.push(W)}re=ee}}var ie=t(S,b.colormap,Z,J);return m?ie.tubeScale=m:(Z===0&&(Z=1),ie.tubeScale=A*.5*J/Z),ie};var y=v("./lib/shaders"),c=v("gl-cone3d").createMesh;M.exports.createTubeMesh=function(b,l){return c(b,l,{shaders:y,traceType:"streamtube"})}},{"./lib/shaders":142,"gl-cone3d":79,"gl-vec3":169,"gl-vec4":205}],144:[function(v,M,T){var e=v("gl-shader"),a=v("glslify"),n=a([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),r=a([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color \u2014 in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),t=a([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),f=a([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);T.createShader=function(o){var i=e(o,n,r,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i.attributes.normal.location=2,i},T.createPickShader=function(o){var i=e(o,n,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i.attributes.normal.location=2,i},T.createContourShader=function(o){var i=e(o,t,r,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i},T.createPickContourShader=function(o){var i=e(o,t,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return i.attributes.uv.location=0,i.attributes.f.location=1,i}},{"gl-shader":132,glslify:231}],145:[function(v,M,T){M.exports=oe;var e=v("bit-twiddle"),a=v("gl-buffer"),n=v("gl-vao"),r=v("gl-texture2d"),t=v("typedarray-pool"),f=v("colormap"),o=v("ndarray-ops"),i=v("ndarray-pack"),g=v("ndarray"),p=v("surface-nets"),y=v("gl-mat4/multiply"),c=v("gl-mat4/invert"),b=v("binary-search-bounds"),l=v("ndarray-gradient"),_=v("./lib/shaders"),s=_.createShader,A=_.createContourShader,m=_.createPickShader,h=_.createPickContourShader,x=4*(4+3+3),u=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],L=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],S=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var N=0;N<3;++N){var U=S[N],q=(N+1)%3,Q=(N+2)%3;U[q+0]=1,U[Q+3]=1,U[N+6]=1}})();function k(N,U,q,Q,W){this.position=N,this.index=U,this.uv=q,this.level=Q,this.dataCoordinate=W}var P=256;function z(N,U,q,Q,W,X,ee,te,ie,le,ge,fe,pe,ye,Te){this.gl=N,this.shape=U,this.bounds=q,this.objectOffset=Te,this.intensityBounds=[],this._shader=Q,this._pickShader=W,this._coordinateBuffer=X,this._vao=ee,this._colorMap=te,this._contourShader=ie,this._contourPickShader=le,this._contourBuffer=ge,this._contourVAO=fe,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new k([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=pe,this._dynamicVAO=ye,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[g(t.mallocFloat(1024),[0,0]),g(t.mallocFloat(1024),[0,0]),g(t.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var I=z.prototype;I.genColormap=function(N,U){var q=!1,Q=i([f({colormap:N,nshades:P,format:"rgba"}).map(function(W,X){var ee=U?D(X/255,U):W[3];return ee<1&&(q=!0),[W[0],W[1],W[2],255*ee]})]);return o.divseq(Q,255),this.hasAlphaScale=q,Q},I.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},I.isOpaque=function(){return!this.isTransparent()},I.pickSlots=1,I.setPickBase=function(N){this.pickId=N};function D(N,U){if(!U||!U.length)return 1;for(var q=0;q<U.length;++q){if(U.length<2)return 1;if(U[q][0]===N)return U[q][1];if(U[q][0]>N&&q>0){var Q=(U[q][0]-N)/(U[q][0]-U[q-1][0]);return U[q][1]*(1-Q)+Q*U[q-1][1]}}return 1}var R=[0,0,0],O={showSurface:!1,showContour:!1,projections:[u.slice(),u.slice(),u.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function F(N,U){var q,Q,W,X=U.axes&&U.axes.lastCubeProps.axis||R,ee=U.showSurface,te=U.showContour;for(q=0;q<3;++q)for(ee=ee||U.surfaceProject[q],Q=0;Q<3;++Q)te=te||U.contourProject[q][Q];for(q=0;q<3;++q){var ie=O.projections[q];for(Q=0;Q<16;++Q)ie[Q]=0;for(Q=0;Q<4;++Q)ie[5*Q]=1;ie[5*q]=0,ie[12+q]=U.axesBounds[+(X[q]>0)][q],y(ie,N.model,ie);var le=O.clipBounds[q];for(W=0;W<2;++W)for(Q=0;Q<3;++Q)le[W][Q]=N.clipBounds[W][Q];le[0][q]=-1e8,le[1][q]=1e8}return O.showSurface=ee,O.showContour=te,O}var V={model:u,view:u,projection:u,inverseModel:u.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},G=u.slice(),J=[1,0,0,0,1,0,0,0,1];function Z(N,U){N=N||{};var q=this.gl;q.disable(q.CULL_FACE),this._colorMap.bind(0);var Q=V;Q.model=N.model||u,Q.view=N.view||u,Q.projection=N.projection||u,Q.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],Q.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],Q.objectOffset=this.objectOffset,Q.contourColor=this.contourColor[0],Q.inverseModel=c(Q.inverseModel,Q.model);for(var W=0;W<2;++W)for(var X=Q.clipBounds[W],ee=0;ee<3;++ee)X[ee]=Math.min(Math.max(this.clipBounds[W][ee],-1e8),1e8);Q.kambient=this.ambientLight,Q.kdiffuse=this.diffuseLight,Q.kspecular=this.specularLight,Q.roughness=this.roughness,Q.fresnel=this.fresnel,Q.opacity=this.opacity,Q.height=0,Q.permutation=J,Q.vertexColor=this.vertexColor;var te=G;for(y(te,Q.view,Q.model),y(te,Q.projection,te),c(te,te),W=0;W<3;++W)Q.eyePosition[W]=te[12+W]/te[15];var ie=te[15];for(W=0;W<3;++W)ie+=this.lightPosition[W]*te[4*W+3];for(W=0;W<3;++W){var le=te[12+W];for(ee=0;ee<3;++ee)le+=te[4*ee+W]*this.lightPosition[ee];Q.lightPosition[W]=le/ie}var ge=F(Q,this);if(ge.showSurface){for(this._shader.bind(),this._shader.uniforms=Q,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(q.TRIANGLES,this._vertexCount),W=0;W<3;++W)!this.surfaceProject[W]||!this.vertexCount||(this._shader.uniforms.model=ge.projections[W],this._shader.uniforms.clipBounds=ge.clipBounds[W],this._vao.draw(q.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ge.showContour){var fe=this._contourShader;Q.kambient=1,Q.kdiffuse=0,Q.kspecular=0,Q.opacity=1,fe.bind(),fe.uniforms=Q;var pe=this._contourVAO;for(pe.bind(),W=0;W<3;++W)for(fe.uniforms.permutation=S[W],q.lineWidth(this.contourWidth[W]*this.pixelRatio),ee=0;ee<this.contourLevels[W].length;++ee)ee===this.highlightLevel[W]?(fe.uniforms.contourColor=this.highlightColor[W],fe.uniforms.contourTint=this.highlightTint[W]):(ee===0||ee-1===this.highlightLevel[W])&&(fe.uniforms.contourColor=this.contourColor[W],fe.uniforms.contourTint=this.contourTint[W]),this._contourCounts[W][ee]&&(fe.uniforms.height=this.contourLevels[W][ee],pe.draw(q.LINES,this._contourCounts[W][ee],this._contourOffsets[W][ee]));for(W=0;W<3;++W)for(fe.uniforms.model=ge.projections[W],fe.uniforms.clipBounds=ge.clipBounds[W],ee=0;ee<3;++ee)if(!!this.contourProject[W][ee]){fe.uniforms.permutation=S[ee],q.lineWidth(this.contourWidth[ee]*this.pixelRatio);for(var ye=0;ye<this.contourLevels[ee].length;++ye)ye===this.highlightLevel[ee]?(fe.uniforms.contourColor=this.highlightColor[ee],fe.uniforms.contourTint=this.highlightTint[ee]):(ye===0||ye-1===this.highlightLevel[ee])&&(fe.uniforms.contourColor=this.contourColor[ee],fe.uniforms.contourTint=this.contourTint[ee]),this._contourCounts[ee][ye]&&(fe.uniforms.height=this.contourLevels[ee][ye],pe.draw(q.LINES,this._contourCounts[ee][ye],this._contourOffsets[ee][ye]))}for(pe.unbind(),pe=this._dynamicVAO,pe.bind(),W=0;W<3;++W)if(this._dynamicCounts[W]!==0)for(fe.uniforms.model=Q.model,fe.uniforms.clipBounds=Q.clipBounds,fe.uniforms.permutation=S[W],q.lineWidth(this.dynamicWidth[W]*this.pixelRatio),fe.uniforms.contourColor=this.dynamicColor[W],fe.uniforms.contourTint=this.dynamicTint[W],fe.uniforms.height=this.dynamicLevel[W],pe.draw(q.LINES,this._dynamicCounts[W],this._dynamicOffsets[W]),ee=0;ee<3;++ee)!this.contourProject[ee][W]||(fe.uniforms.model=ge.projections[ee],fe.uniforms.clipBounds=ge.clipBounds[ee],pe.draw(q.LINES,this._dynamicCounts[W],this._dynamicOffsets[W]));pe.unbind()}}I.draw=function(N){return Z.call(this,N,!1)},I.drawTransparent=function(N){return Z.call(this,N,!0)};var Y={model:u,view:u,projection:u,inverseModel:u,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};I.drawPick=function(N){N=N||{};var U=this.gl;U.disable(U.CULL_FACE);var q=Y;q.model=N.model||u,q.view=N.view||u,q.projection=N.projection||u,q.shape=this._field[2].shape,q.pickId=this.pickId/255,q.lowerBound=this.bounds[0],q.upperBound=this.bounds[1],q.objectOffset=this.objectOffset,q.permutation=J;for(var Q=0;Q<2;++Q)for(var W=q.clipBounds[Q],X=0;X<3;++X)W[X]=Math.min(Math.max(this.clipBounds[Q][X],-1e8),1e8);var ee=F(q,this);if(ee.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=q,this._vao.bind(),this._vao.draw(U.TRIANGLES,this._vertexCount),Q=0;Q<3;++Q)!this.surfaceProject[Q]||(this._pickShader.uniforms.model=ee.projections[Q],this._pickShader.uniforms.clipBounds=ee.clipBounds[Q],this._vao.draw(U.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ee.showContour){var te=this._contourPickShader;te.bind(),te.uniforms=q;var ie=this._contourVAO;for(ie.bind(),X=0;X<3;++X)for(U.lineWidth(this.contourWidth[X]*this.pixelRatio),te.uniforms.permutation=S[X],Q=0;Q<this.contourLevels[X].length;++Q)this._contourCounts[X][Q]&&(te.uniforms.height=this.contourLevels[X][Q],ie.draw(U.LINES,this._contourCounts[X][Q],this._contourOffsets[X][Q]));for(Q=0;Q<3;++Q)for(te.uniforms.model=ee.projections[Q],te.uniforms.clipBounds=ee.clipBounds[Q],X=0;X<3;++X)if(!!this.contourProject[Q][X]){te.uniforms.permutation=S[X],U.lineWidth(this.contourWidth[X]*this.pixelRatio);for(var le=0;le<this.contourLevels[X].length;++le)this._contourCounts[X][le]&&(te.uniforms.height=this.contourLevels[X][le],ie.draw(U.LINES,this._contourCounts[X][le],this._contourOffsets[X][le]))}ie.unbind()}},I.pick=function(N){if(!N||N.id!==this.pickId)return null;var U=this._field[2].shape,q=this._pickResult,Q=U[0]*(N.value[0]+(N.value[2]>>4)/16)/255,W=Math.floor(Q),X=Q-W,ee=U[1]*(N.value[1]+(N.value[2]&15)/16)/255,te=Math.floor(ee),ie=ee-te;W+=1,te+=1;var le=q.position;le[0]=le[1]=le[2]=0;for(var ge=0;ge<2;++ge)for(var fe=ge?X:1-X,pe=0;pe<2;++pe)for(var ye=pe?ie:1-ie,Te=W+ge,_e=te+pe,De=fe*ye,Be=0;Be<3;++Be)le[Be]+=this._field[Be].get(Te,_e)*De;for(var Ue=this._pickResult.level,xe=0;xe<3;++xe)if(Ue[xe]=b.le(this.contourLevels[xe],le[xe]),Ue[xe]<0)this.contourLevels[xe].length>0&&(Ue[xe]=0);else if(Ue[xe]<this.contourLevels[xe].length-1){var Pe=this.contourLevels[xe][Ue[xe]],Ve=this.contourLevels[xe][Ue[xe]+1];Math.abs(Pe-le[xe])>Math.abs(Ve-le[xe])&&(Ue[xe]+=1)}for(q.index[0]=X<.5?W:W+1,q.index[1]=ie<.5?te:te+1,q.uv[0]=Q/U[0],q.uv[1]=ee/U[1],Be=0;Be<3;++Be)q.dataCoordinate[Be]=this._field[Be].get(q.index[0],q.index[1]);return q},I.padField=function(N,U){var q=U.shape.slice(),Q=N.shape.slice();o.assign(N.lo(1,1).hi(q[0],q[1]),U),o.assign(N.lo(1).hi(q[0],1),U.hi(q[0],1)),o.assign(N.lo(1,Q[1]-1).hi(q[0],1),U.lo(0,q[1]-1).hi(q[0],1)),o.assign(N.lo(0,1).hi(1,q[1]),U.hi(1)),o.assign(N.lo(Q[0]-1,1).hi(1,q[1]),U.lo(q[0]-1)),N.set(0,0,U.get(0,0)),N.set(0,Q[1]-1,U.get(0,q[1]-1)),N.set(Q[0]-1,0,U.get(q[0]-1,0)),N.set(Q[0]-1,Q[1]-1,U.get(q[0]-1,q[1]-1))};function j(N,U){return Array.isArray(N)?[U(N[0]),U(N[1]),U(N[2])]:[U(N),U(N),U(N)]}function re(N){return Array.isArray(N)?N.length===3?[N[0],N[1],N[2],1]:[N[0],N[1],N[2],N[3]]:[0,0,0,1]}function se(N){if(Array.isArray(N)){if(Array.isArray(N))return[re(N[0]),re(N[1]),re(N[2])];var U=re(N);return[U.slice(),U.slice(),U.slice()]}}I.update=function(N){N=N||{},this.objectOffset=N.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in N&&(this.contourWidth=j(N.contourWidth,Number)),"showContour"in N&&(this.showContour=j(N.showContour,Boolean)),"showSurface"in N&&(this.showSurface=!!N.showSurface),"contourTint"in N&&(this.contourTint=j(N.contourTint,Boolean)),"contourColor"in N&&(this.contourColor=se(N.contourColor)),"contourProject"in N&&(this.contourProject=j(N.contourProject,function(pt){return j(pt,Boolean)})),"surfaceProject"in N&&(this.surfaceProject=N.surfaceProject),"dynamicColor"in N&&(this.dynamicColor=se(N.dynamicColor)),"dynamicTint"in N&&(this.dynamicTint=j(N.dynamicTint,Number)),"dynamicWidth"in N&&(this.dynamicWidth=j(N.dynamicWidth,Number)),"opacity"in N&&(this.opacity=N.opacity),"opacityscale"in N&&(this.opacityscale=N.opacityscale),"colorBounds"in N&&(this.colorBounds=N.colorBounds),"vertexColor"in N&&(this.vertexColor=N.vertexColor?1:0),"colormap"in N&&this._colorMap.setPixels(this.genColormap(N.colormap,this.opacityscale));var U=N.field||N.coords&&N.coords[2]||null,q=!1;if(U||(this._field[2].shape[0]||this._field[2].shape[2]?U=this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):U=this._field[2].hi(0,0)),"field"in N||"coords"in N){var Q=(U.shape[0]+2)*(U.shape[1]+2);Q>this._field[2].data.length&&(t.freeFloat(this._field[2].data),this._field[2].data=t.mallocFloat(e.nextPow2(Q))),this._field[2]=g(this._field[2].data,[U.shape[0]+2,U.shape[1]+2]),this.padField(this._field[2],U),this.shape=U.shape.slice();for(var W=this.shape,X=0;X<2;++X)this._field[2].size>this._field[X].data.length&&(t.freeFloat(this._field[X].data),this._field[X].data=t.mallocFloat(this._field[2].size)),this._field[X]=g(this._field[X].data,[W[0]+2,W[1]+2]);if(N.coords){var ee=N.coords;if(!Array.isArray(ee)||ee.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for(X=0;X<2;++X){var te=ee[X];for(pe=0;pe<2;++pe)if(te.shape[pe]!==W[pe])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[X],te)}}else if(N.ticks){var ie=N.ticks;if(!Array.isArray(ie)||ie.length!==2)throw new Error("gl-surface: invalid ticks");for(X=0;X<2;++X){var le=ie[X];if((Array.isArray(le)||le.length)&&(le=g(le)),le.shape[0]!==W[X])throw new Error("gl-surface: invalid tick length");var ge=g(le.data,W);ge.stride[X]=le.stride[0],ge.stride[X^1]=0,this.padField(this._field[X],ge)}}else{for(X=0;X<2;++X){var fe=[0,0];fe[X]=1,this._field[X]=g(this._field[X].data,[W[0]+2,W[1]+2],fe,0)}this._field[0].set(0,0,0);for(var pe=0;pe<W[0];++pe)this._field[0].set(pe+1,0,pe);for(this._field[0].set(W[0]+1,0,W[0]-1),this._field[1].set(0,0,0),pe=0;pe<W[1];++pe)this._field[1].set(0,pe+1,pe);this._field[1].set(0,W[1]+1,W[1]-1)}var ye=this._field,Te=g(t.mallocFloat(ye[2].size*3*2),[3,W[0]+2,W[1]+2,2]);for(X=0;X<3;++X)l(Te.pick(X),ye[X],"mirror");var _e=g(t.mallocFloat(ye[2].size*3),[W[0]+2,W[1]+2,3]);for(X=0;X<W[0]+2;++X)for(pe=0;pe<W[1]+2;++pe){var De=Te.get(0,X,pe,0),Be=Te.get(0,X,pe,1),Ue=Te.get(1,X,pe,0),xe=Te.get(1,X,pe,1),Pe=Te.get(2,X,pe,0),Ve=Te.get(2,X,pe,1),Qe=Ue*Ve-xe*Pe,Fe=Pe*Be-Ve*De,Le=De*xe-Be*Ue,Ne=Math.sqrt(Qe*Qe+Fe*Fe+Le*Le);Ne<1e-8?(Ne=Math.max(Math.abs(Qe),Math.abs(Fe),Math.abs(Le)),Ne<1e-8?(Le=1,Fe=Qe=0,Ne=1):Ne=1/Ne):Ne=1/Math.sqrt(Ne),_e.set(X,pe,0,Qe*Ne),_e.set(X,pe,1,Fe*Ne),_e.set(X,pe,2,Le*Ne)}t.free(Te.data);var dt=[1/0,1/0,1/0],Dt=[-1/0,-1/0,-1/0],Xt=1/0,At=-1/0,zt=(W[0]-1)*(W[1]-1)*6,Ut=t.mallocFloat(e.nextPow2(10*zt)),Ct=0,Mt=0;for(X=0;X<W[0]-1;++X){e:for(pe=0;pe<W[1]-1;++pe){for(var rt=0;rt<2;++rt)for(var ct=0;ct<2;++ct)for(var Ze=0;Ze<3;++Ze){var ke=this._field[Ze].get(1+X+rt,1+pe+ct);if(isNaN(ke)||!isFinite(ke))continue e}for(Ze=0;Ze<6;++Ze){var Ge=X+L[Ze][0],Je=pe+L[Ze][1],ot=this._field[0].get(Ge+1,Je+1),Pt=this._field[1].get(Ge+1,Je+1);ke=this._field[2].get(Ge+1,Je+1),Qe=_e.get(Ge+1,Je+1,0),Fe=_e.get(Ge+1,Je+1,1),Le=_e.get(Ge+1,Je+1,2),N.intensity&&(_t=N.intensity.get(Ge,Je));var _t=N.intensity?N.intensity.get(Ge,Je):ke+this.objectOffset[2];Ut[Ct++]=Ge,Ut[Ct++]=Je,Ut[Ct++]=ot,Ut[Ct++]=Pt,Ut[Ct++]=ke,Ut[Ct++]=0,Ut[Ct++]=_t,Ut[Ct++]=Qe,Ut[Ct++]=Fe,Ut[Ct++]=Le,dt[0]=Math.min(dt[0],ot+this.objectOffset[0]),dt[1]=Math.min(dt[1],Pt+this.objectOffset[1]),dt[2]=Math.min(dt[2],ke+this.objectOffset[2]),Xt=Math.min(Xt,_t),Dt[0]=Math.max(Dt[0],ot+this.objectOffset[0]),Dt[1]=Math.max(Dt[1],Pt+this.objectOffset[1]),Dt[2]=Math.max(Dt[2],ke+this.objectOffset[2]),At=Math.max(At,_t),Mt+=1}}}for(N.intensityBounds&&(Xt=+N.intensityBounds[0],At=+N.intensityBounds[1]),X=6;X<Ct;X+=10)Ut[X]=(Ut[X]-Xt)/(At-Xt);this._vertexCount=Mt,this._coordinateBuffer.update(Ut.subarray(0,Ct)),t.freeFloat(Ut),t.free(_e.data),this.bounds=[dt,Dt],this.intensity=N.intensity||this._field[2],(this.intensityBounds[0]!==Xt||this.intensityBounds[1]!==At)&&(q=!0),this.intensityBounds=[Xt,At]}if("levels"in N){var Bt=N.levels;for(Array.isArray(Bt[0])?Bt=Bt.slice():Bt=[[],[],Bt],X=0;X<3;++X)Bt[X]=Bt[X].slice(),Bt[X].sort(function(pt,vt){return pt-vt});for(X=0;X<3;++X)for(pe=0;pe<Bt[X].length;++pe)Bt[X][pe]-=this.objectOffset[X];e:for(X=0;X<3;++X){if(Bt[X].length!==this.contourLevels[X].length){q=!0;break}for(pe=0;pe<Bt[X].length;++pe)if(Bt[X][pe]!==this.contourLevels[X][pe]){q=!0;break e}}this.contourLevels=Bt}if(q){ye=this._field,W=this.shape;for(var qt=[],Ot=0;Ot<3;++Ot){var $t=this.contourLevels[Ot],rr=[],er=[],pr=[0,0,0];for(X=0;X<$t.length;++X){var Xr=p(this._field[Ot],$t[X]);rr.push(qt.length/5|0),Mt=0;e:for(pe=0;pe<Xr.cells.length;++pe){var hn=Xr.cells[pe];for(Ze=0;Ze<2;++Ze){var Qr=Xr.positions[hn[Ze]],nt=Qr[0],Ht=Math.floor(nt)|0,Kt=nt-Ht,Gt=Qr[1],br=Math.floor(Gt)|0,tt=Gt-br,je=!1;t:for(var st=0;st<3;++st){pr[st]=0;var ft=(Ot+st+1)%3;for(rt=0;rt<2;++rt){var Me=rt?Kt:1-Kt;for(Ge=Math.min(Math.max(Ht+rt,0),W[0])|0,ct=0;ct<2;++ct){var Se=ct?tt:1-tt;if(Je=Math.min(Math.max(br+ct,0),W[1])|0,st<2?ke=this._field[ft].get(Ge,Je):ke=(this.intensity.get(Ge,Je)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(ke)||isNaN(ke)){je=!0;break t}var Ke=Me*Se;pr[st]+=Ke*ke}}}if(!je)qt.push(pr[0],pr[1],Qr[0],Qr[1],pr[2]),Mt+=1;else{if(Ze>0){for(var Xe=0;Xe<5;++Xe)qt.pop();Mt-=1}continue e}}}er.push(Mt)}this._contourOffsets[Ot]=rr,this._contourCounts[Ot]=er}var it=t.mallocFloat(qt.length);for(X=0;X<qt.length;++X)it[X]=qt[X];this._contourBuffer.update(it),t.freeFloat(it)}},I.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var N=0;N<3;++N)t.freeFloat(this._field[N].data)},I.highlight=function(N){var U;if(!N){this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1];return}for(U=0;U<3;++U)this.enableHighlight[U]?this.highlightLevel[U]=N.level[U]:this.highlightLevel[U]=-1;var q;for(this.snapToData?q=N.dataCoordinate:q=N.position,U=0;U<3;++U)q[U]-=this.objectOffset[U];if(!((!this.enableDynamic[0]||q[0]===this.dynamicLevel[0])&&(!this.enableDynamic[1]||q[1]===this.dynamicLevel[1])&&(!this.enableDynamic[2]||q[2]===this.dynamicLevel[2]))){for(var Q=0,W=this.shape,X=t.mallocFloat(12*W[0]*W[1]),ee=0;ee<3;++ee){if(!this.enableDynamic[ee]){this.dynamicLevel[ee]=NaN,this._dynamicCounts[ee]=0;continue}this.dynamicLevel[ee]=q[ee];var te=(ee+1)%3,ie=(ee+2)%3,le=this._field[ee],ge=this._field[te],fe=this._field[ie],pe=p(le,q[ee]),ye=pe.cells,Te=pe.positions;for(this._dynamicOffsets[ee]=Q,U=0;U<ye.length;++U)for(var _e=ye[U],De=0;De<2;++De){var Be=Te[_e[De]],Ue=+Be[0],xe=Ue|0,Pe=Math.min(xe+1,W[0])|0,Ve=Ue-xe,Qe=1-Ve,Fe=+Be[1],Le=Fe|0,Ne=Math.min(Le+1,W[1])|0,dt=Fe-Le,Dt=1-dt,Xt=Qe*Dt,At=Qe*dt,zt=Ve*Dt,Ut=Ve*dt,Ct=Xt*ge.get(xe,Le)+At*ge.get(xe,Ne)+zt*ge.get(Pe,Le)+Ut*ge.get(Pe,Ne),Mt=Xt*fe.get(xe,Le)+At*fe.get(xe,Ne)+zt*fe.get(Pe,Le)+Ut*fe.get(Pe,Ne);if(isNaN(Ct)||isNaN(Mt)){De&&(Q-=1);break}X[2*Q+0]=Ct,X[2*Q+1]=Mt,Q+=1}this._dynamicCounts[ee]=Q-this._dynamicOffsets[ee]}this._dynamicBuffer.update(X.subarray(0,2*Q)),t.freeFloat(X)}};function oe(N){var U=N.gl,q=s(U),Q=m(U),W=A(U),X=h(U),ee=a(U),te=n(U,[{buffer:ee,size:4,stride:x,offset:0},{buffer:ee,size:3,stride:x,offset:16},{buffer:ee,size:3,stride:x,offset:28}]),ie=a(U),le=n(U,[{buffer:ie,size:4,stride:20,offset:0},{buffer:ie,size:1,stride:20,offset:16}]),ge=a(U),fe=n(U,[{buffer:ge,size:2,type:U.FLOAT}]),pe=r(U,1,P,U.RGBA,U.UNSIGNED_BYTE);pe.minFilter=U.LINEAR,pe.magFilter=U.LINEAR;var ye=new z(U,[0,0],[[0,0,0],[0,0,0]],q,Q,ee,te,pe,W,X,ie,le,ge,fe,[0,0,0]),Te={levels:[[],[],[]]};for(var _e in N)Te[_e]=N[_e];return Te.colormap=Te.colormap||"jet",ye.update(Te),ye}},{"./lib/shaders":144,"binary-search-bounds":31,"bit-twiddle":32,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-texture2d":146,"gl-vao":150,ndarray:259,"ndarray-gradient":252,"ndarray-ops":254,"ndarray-pack":255,"surface-nets":302,"typedarray-pool":308}],146:[function(v,M,T){var e=v("ndarray"),a=v("ndarray-ops"),n=v("typedarray-pool");M.exports=h;var r=null,t=null,f=null;function o(x){r=[x.LINEAR,x.NEAREST_MIPMAP_LINEAR,x.LINEAR_MIPMAP_NEAREST,x.LINEAR_MIPMAP_NEAREST],t=[x.NEAREST,x.LINEAR,x.NEAREST_MIPMAP_NEAREST,x.NEAREST_MIPMAP_LINEAR,x.LINEAR_MIPMAP_NEAREST,x.LINEAR_MIPMAP_LINEAR],f=[x.REPEAT,x.CLAMP_TO_EDGE,x.MIRRORED_REPEAT]}function i(x){return typeof HTMLCanvasElement<"u"&&x instanceof HTMLCanvasElement||typeof HTMLImageElement<"u"&&x instanceof HTMLImageElement||typeof HTMLVideoElement<"u"&&x instanceof HTMLVideoElement||typeof ImageData<"u"&&x instanceof ImageData}var g=function(x,u){a.muls(x,u,255)};function p(x,u,L){var S=x.gl,k=S.getParameter(S.MAX_TEXTURE_SIZE);if(u<0||u>k||L<0||L>k)throw new Error("gl-texture2d: Invalid texture size");return x._shape=[u,L],x.bind(),S.texImage2D(S.TEXTURE_2D,0,x.format,u,L,0,x.format,x.type,null),x._mipLevels=[0],x}function y(x,u,L,S,k,P){this.gl=x,this.handle=u,this.format=k,this.type=P,this._shape=[L,S],this._mipLevels=[0],this._magFilter=x.NEAREST,this._minFilter=x.NEAREST,this._wrapS=x.CLAMP_TO_EDGE,this._wrapT=x.CLAMP_TO_EDGE,this._anisoSamples=1;var z=this,I=[this._wrapS,this._wrapT];Object.defineProperties(I,[{get:function(){return z._wrapS},set:function(R){return z.wrapS=R}},{get:function(){return z._wrapT},set:function(R){return z.wrapT=R}}]),this._wrapVector=I;var D=[this._shape[0],this._shape[1]];Object.defineProperties(D,[{get:function(){return z._shape[0]},set:function(R){return z.width=R}},{get:function(){return z._shape[1]},set:function(R){return z.height=R}}]),this._shapeVector=D}var c=y.prototype;Object.defineProperties(c,{minFilter:{get:function(){return this._minFilter},set:function(x){this.bind();var u=this.gl;if(this.type===u.FLOAT&&r.indexOf(x)>=0&&(u.getExtension("OES_texture_float_linear")||(x=u.NEAREST)),t.indexOf(x)<0)throw new Error("gl-texture2d: Unknown filter mode "+x);return u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,x),this._minFilter=x}},magFilter:{get:function(){return this._magFilter},set:function(x){this.bind();var u=this.gl;if(this.type===u.FLOAT&&r.indexOf(x)>=0&&(u.getExtension("OES_texture_float_linear")||(x=u.NEAREST)),t.indexOf(x)<0)throw new Error("gl-texture2d: Unknown filter mode "+x);return u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,x),this._magFilter=x}},mipSamples:{get:function(){return this._anisoSamples},set:function(x){var u=this._anisoSamples;if(this._anisoSamples=Math.max(x,1)|0,u!==this._anisoSamples){var L=this.gl.getExtension("EXT_texture_filter_anisotropic");L&&this.gl.texParameterf(this.gl.TEXTURE_2D,L.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(x){if(this.bind(),f.indexOf(x)<0)throw new Error("gl-texture2d: Unknown wrap mode "+x);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,x),this._wrapS=x}},wrapT:{get:function(){return this._wrapT},set:function(x){if(this.bind(),f.indexOf(x)<0)throw new Error("gl-texture2d: Unknown wrap mode "+x);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,x),this._wrapT=x}},wrap:{get:function(){return this._wrapVector},set:function(x){if(Array.isArray(x)||(x=[x,x]),x.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var u=0;u<2;++u)if(f.indexOf(x[u])<0)throw new Error("gl-texture2d: Unknown wrap mode "+x);this._wrapS=x[0],this._wrapT=x[1];var L=this.gl;return this.bind(),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_S,this._wrapS),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_T,this._wrapT),x}},shape:{get:function(){return this._shapeVector},set:function(x){if(!Array.isArray(x))x=[x|0,x|0];else if(x.length!==2)throw new Error("gl-texture2d: Invalid texture shape");return p(this,x[0]|0,x[1]|0),[x[0]|0,x[1]|0]}},width:{get:function(){return this._shape[0]},set:function(x){return x=x|0,p(this,x,this._shape[1]),x}},height:{get:function(){return this._shape[1]},set:function(x){return x=x|0,p(this,this._shape[0],x),x}}}),c.bind=function(x){var u=this.gl;return x!==void 0&&u.activeTexture(u.TEXTURE0+(x|0)),u.bindTexture(u.TEXTURE_2D,this.handle),x!==void 0?x|0:u.getParameter(u.ACTIVE_TEXTURE)-u.TEXTURE0},c.dispose=function(){this.gl.deleteTexture(this.handle)},c.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var x=Math.min(this._shape[0],this._shape[1]),u=0;x>0;++u,x>>>=1)this._mipLevels.indexOf(u)<0&&this._mipLevels.push(u)},c.setPixels=function(x,u,L,S){var k=this.gl;this.bind(),Array.isArray(u)?(S=L,L=u[1]|0,u=u[0]|0):(u=u||0,L=L||0),S=S||0;var P=i(x)?x:x.raw;if(P){var z=this._mipLevels.indexOf(S)<0;z?(k.texImage2D(k.TEXTURE_2D,0,this.format,this.format,this.type,P),this._mipLevels.push(S)):k.texSubImage2D(k.TEXTURE_2D,S,u,L,this.format,this.type,P)}else if(x.shape&&x.stride&&x.data){if(x.shape.length<2||u+x.shape[1]>this._shape[1]>>>S||L+x.shape[0]>this._shape[0]>>>S||u<0||L<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");l(k,u,L,S,this.format,this.type,this._mipLevels,x)}else throw new Error("gl-texture2d: Unsupported data type")};function b(x,u){return x.length===3?u[2]===1&&u[1]===x[0]*x[2]&&u[0]===x[2]:u[0]===1&&u[1]===x[0]}function l(x,u,L,S,k,P,z,I){var D=I.dtype,R=I.shape.slice();if(R.length<2||R.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var O=0,F=0,V=b(R,I.stride.slice());if(D==="float32"?O=x.FLOAT:D==="float64"?(O=x.FLOAT,V=!1,D="float32"):D==="uint8"?O=x.UNSIGNED_BYTE:(O=x.UNSIGNED_BYTE,V=!1,D="uint8"),R.length===2)F=x.LUMINANCE,R=[R[0],R[1],1],I=e(I.data,R,[I.stride[0],I.stride[1],1],I.offset);else if(R.length===3)if(R[2]===1)F=x.ALPHA;else if(R[2]===2)F=x.LUMINANCE_ALPHA;else if(R[2]===3)F=x.RGB;else if(R[2]===4)F=x.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");else throw new Error("gl-texture2d: Invalid shape for texture");if((F===x.LUMINANCE||F===x.ALPHA)&&(k===x.LUMINANCE||k===x.ALPHA)&&(F=k),F!==k)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var G=I.size,J=z.indexOf(S)<0;if(J&&z.push(S),O===P&&V)I.offset===0&&I.data.length===G?J?x.texImage2D(x.TEXTURE_2D,S,k,R[0],R[1],0,k,P,I.data):x.texSubImage2D(x.TEXTURE_2D,S,u,L,R[0],R[1],k,P,I.data):J?x.texImage2D(x.TEXTURE_2D,S,k,R[0],R[1],0,k,P,I.data.subarray(I.offset,I.offset+G)):x.texSubImage2D(x.TEXTURE_2D,S,u,L,R[0],R[1],k,P,I.data.subarray(I.offset,I.offset+G));else{var Z;P===x.FLOAT?Z=n.mallocFloat32(G):Z=n.mallocUint8(G);var Y=e(Z,R,[R[2],R[2]*R[0],1]);O===x.FLOAT&&P===x.UNSIGNED_BYTE?g(Y,I):a.assign(Y,I),J?x.texImage2D(x.TEXTURE_2D,S,k,R[0],R[1],0,k,P,Z.subarray(0,G)):x.texSubImage2D(x.TEXTURE_2D,S,u,L,R[0],R[1],k,P,Z.subarray(0,G)),P===x.FLOAT?n.freeFloat32(Z):n.freeUint8(Z)}}function _(x){var u=x.createTexture();return x.bindTexture(x.TEXTURE_2D,u),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x.NEAREST),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,x.NEAREST),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,x.CLAMP_TO_EDGE),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,x.CLAMP_TO_EDGE),u}function s(x,u,L,S,k){var P=x.getParameter(x.MAX_TEXTURE_SIZE);if(u<0||u>P||L<0||L>P)throw new Error("gl-texture2d: Invalid texture shape");if(k===x.FLOAT&&!x.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var z=_(x);return x.texImage2D(x.TEXTURE_2D,0,S,u,L,0,S,k,null),new y(x,z,u,L,S,k)}function A(x,u,L,S,k,P){var z=_(x);return x.texImage2D(x.TEXTURE_2D,0,k,k,P,u),new y(x,z,L,S,k,P)}function m(x,u){var L=u.dtype,S=u.shape.slice(),k=x.getParameter(x.MAX_TEXTURE_SIZE);if(S[0]<0||S[0]>k||S[1]<0||S[1]>k)throw new Error("gl-texture2d: Invalid texture size");var P=b(S,u.stride.slice()),z=0;L==="float32"?z=x.FLOAT:L==="float64"?(z=x.FLOAT,P=!1,L="float32"):L==="uint8"?z=x.UNSIGNED_BYTE:(z=x.UNSIGNED_BYTE,P=!1,L="uint8");var I=0;if(S.length===2)I=x.LUMINANCE,S=[S[0],S[1],1],u=e(u.data,S,[u.stride[0],u.stride[1],1],u.offset);else if(S.length===3)if(S[2]===1)I=x.ALPHA;else if(S[2]===2)I=x.LUMINANCE_ALPHA;else if(S[2]===3)I=x.RGB;else if(S[2]===4)I=x.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");else throw new Error("gl-texture2d: Invalid shape for texture");z===x.FLOAT&&!x.getExtension("OES_texture_float")&&(z=x.UNSIGNED_BYTE,P=!1);var D,R,O=u.size;if(P)u.offset===0&&u.data.length===O?D=u.data:D=u.data.subarray(u.offset,u.offset+O);else{var F=[S[2],S[2]*S[0],1];R=n.malloc(O,L);var V=e(R,S,F,0);(L==="float32"||L==="float64")&&z===x.UNSIGNED_BYTE?g(V,u):a.assign(V,u),D=R.subarray(0,O)}var G=_(x);return x.texImage2D(x.TEXTURE_2D,0,I,S[0],S[1],0,I,z,D),P||n.free(R),new y(x,G,S[0],S[1],I,z)}function h(x){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(r||o(x),typeof arguments[1]=="number")return s(x,arguments[1],arguments[2],arguments[3]||x.RGBA,arguments[4]||x.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return s(x,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||x.RGBA,arguments[3]||x.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var u=arguments[1],L=i(u)?u:u.raw;if(L)return A(x,L,u.width|0,u.height|0,arguments[2]||x.RGBA,arguments[3]||x.UNSIGNED_BYTE);if(u.shape&&u.data&&u.stride)return m(x,u)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],147:[function(v,M,T){function e(a,n,r){n?n.bind():a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);var t=a.getParameter(a.MAX_VERTEX_ATTRIBS)|0;if(r){if(r.length>t)throw new Error("gl-vao: Too many vertex attributes");for(var f=0;f<r.length;++f){var o=r[f];if(o.buffer){var i=o.buffer,g=o.size||4,p=o.type||a.FLOAT,y=!!o.normalized,c=o.stride||0,b=o.offset||0;i.bind(),a.enableVertexAttribArray(f),a.vertexAttribPointer(f,g,p,y,c,b)}else{if(typeof o=="number")a.vertexAttrib1f(f,o);else if(o.length===1)a.vertexAttrib1f(f,o[0]);else if(o.length===2)a.vertexAttrib2f(f,o[0],o[1]);else if(o.length===3)a.vertexAttrib3f(f,o[0],o[1],o[2]);else if(o.length===4)a.vertexAttrib4f(f,o[0],o[1],o[2],o[3]);else throw new Error("gl-vao: Invalid vertex attribute");a.disableVertexAttribArray(f)}}for(;f<t;++f)a.disableVertexAttribArray(f)}else{a.bindBuffer(a.ARRAY_BUFFER,null);for(var f=0;f<t;++f)a.disableVertexAttribArray(f)}}M.exports=e},{}],148:[function(v,M,T){var e=v("./do-bind.js");function a(r){this.gl=r,this._elements=null,this._attributes=null,this._elementsType=r.UNSIGNED_SHORT}a.prototype.bind=function(){e(this.gl,this._elements,this._attributes)},a.prototype.update=function(r,t,f){this._elements=t,this._attributes=r,this._elementsType=f||this.gl.UNSIGNED_SHORT},a.prototype.dispose=function(){},a.prototype.unbind=function(){},a.prototype.draw=function(r,t,f){f=f||0;var o=this.gl;this._elements?o.drawElements(r,t,this._elementsType,f):o.drawArrays(r,f,t)};function n(r){return new a(r)}M.exports=n},{"./do-bind.js":147}],149:[function(v,M,T){var e=v("./do-bind.js");function a(t,f,o,i,g,p){this.location=t,this.dimension=f,this.a=o,this.b=i,this.c=g,this.d=p}a.prototype.bind=function(t){switch(this.dimension){case 1:t.vertexAttrib1f(this.location,this.a);break;case 2:t.vertexAttrib2f(this.location,this.a,this.b);break;case 3:t.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:t.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d);break}};function n(t,f,o){this.gl=t,this._ext=f,this.handle=o,this._attribs=[],this._useElements=!1,this._elementsType=t.UNSIGNED_SHORT}n.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var t=0;t<this._attribs.length;++t)this._attribs[t].bind(this.gl)},n.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},n.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},n.prototype.update=function(t,f,o){if(this.bind(),e(this.gl,f,t),this.unbind(),this._attribs.length=0,t)for(var i=0;i<t.length;++i){var g=t[i];typeof g=="number"?this._attribs.push(new a(i,1,g)):Array.isArray(g)&&this._attribs.push(new a(i,g.length,g[0],g[1],g[2],g[3]))}this._useElements=!!f,this._elementsType=o||this.gl.UNSIGNED_SHORT},n.prototype.draw=function(t,f,o){o=o||0;var i=this.gl;this._useElements?i.drawElements(t,f,this._elementsType,o):i.drawArrays(t,o,f)};function r(t,f){return new n(t,f,f.createVertexArrayOES())}M.exports=r},{"./do-bind.js":147}],150:[function(v,M,T){var e=v("./lib/vao-native.js"),a=v("./lib/vao-emulated.js");function n(t){this.bindVertexArrayOES=t.bindVertexArray.bind(t),this.createVertexArrayOES=t.createVertexArray.bind(t),this.deleteVertexArrayOES=t.deleteVertexArray.bind(t)}function r(t,f,o,i){var g=t.createVertexArray?new n(t):t.getExtension("OES_vertex_array_object"),p;return g?p=e(t,g):p=a(t),p.update(f,o,i),p}M.exports=r},{"./lib/vao-emulated.js":148,"./lib/vao-native.js":149}],151:[function(v,M,T){M.exports=e;function e(a,n,r){return a[0]=n[0]+r[0],a[1]=n[1]+r[1],a[2]=n[2]+r[2],a}},{}],152:[function(v,M,T){M.exports=r;var e=v("./fromValues"),a=v("./normalize"),n=v("./dot");function r(t,f){var o=e(t[0],t[1],t[2]),i=e(f[0],f[1],f[2]);a(o,o),a(i,i);var g=n(o,i);return g>1?0:Math.acos(g)}},{"./dot":162,"./fromValues":168,"./normalize":179}],153:[function(v,M,T){M.exports=e;function e(a,n){return a[0]=Math.ceil(n[0]),a[1]=Math.ceil(n[1]),a[2]=Math.ceil(n[2]),a}},{}],154:[function(v,M,T){M.exports=e;function e(a){var n=new Float32Array(3);return n[0]=a[0],n[1]=a[1],n[2]=a[2],n}},{}],155:[function(v,M,T){M.exports=e;function e(a,n){return a[0]=n[0],a[1]=n[1],a[2]=n[2],a}},{}],156:[function(v,M,T){M.exports=e;function e(){var a=new Float32Array(3);return a[0]=0,a[1]=0,a[2]=0,a}},{}],157:[function(v,M,T){M.exports=e;function e(a,n,r){var t=n[0],f=n[1],o=n[2],i=r[0],g=r[1],p=r[2];return a[0]=f*p-o*g,a[1]=o*i-t*p,a[2]=t*g-f*i,a}},{}],158:[function(v,M,T){M.exports=v("./distance")},{"./distance":159}],159:[function(v,M,T){M.exports=e;function e(a,n){var r=n[0]-a[0],t=n[1]-a[1],f=n[2]-a[2];return Math.sqrt(r*r+t*t+f*f)}},{}],160:[function(v,M,T){M.exports=v("./divide")},{"./divide":161}],161:[function(v,M,T){M.exports=e;function e(a,n,r){return a[0]=n[0]/r[0],a[1]=n[1]/r[1],a[2]=n[2]/r[2],a}},{}],162:[function(v,M,T){M.exports=e;function e(a,n){return a[0]*n[0]+a[1]*n[1]+a[2]*n[2]}},{}],163:[function(v,M,T){M.exports=1e-6},{}],164:[function(v,M,T){M.exports=a;var e=v("./epsilon");function a(n,r){var t=n[0],f=n[1],o=n[2],i=r[0],g=r[1],p=r[2];return Math.abs(t-i)<=e*Math.max(1,Math.abs(t),Math.abs(i))&&Math.abs(f-g)<=e*Math.max(1,Math.abs(f),Math.abs(g))&&Math.abs(o-p)<=e*Math.max(1,Math.abs(o),Math.abs(p))}},{"./epsilon":163}],165:[function(v,M,T){M.exports=e;function e(a,n){return a[0]===n[0]&&a[1]===n[1]&&a[2]===n[2]}},{}],166:[function(v,M,T){M.exports=e;function e(a,n){return a[0]=Math.floor(n[0]),a[1]=Math.floor(n[1]),a[2]=Math.floor(n[2]),a}},{}],167:[function(v,M,T){M.exports=a;var e=v("./create")();function a(n,r,t,f,o,i){var g,p;for(r||(r=3),t||(t=0),f?p=Math.min(f*r+t,n.length):p=n.length,g=t;g<p;g+=r)e[0]=n[g],e[1]=n[g+1],e[2]=n[g+2],o(e,e,i),n[g]=e[0],n[g+1]=e[1],n[g+2]=e[2];return n}},{"./create":156}],168:[function(v,M,T){M.exports=e;function e(a,n,r){var t=new Float32Array(3);return t[0]=a,t[1]=n,t[2]=r,t}},{}],169:[function(v,M,T){M.exports={EPSILON:v("./epsilon"),create:v("./create"),clone:v("./clone"),angle:v("./angle"),fromValues:v("./fromValues"),copy:v("./copy"),set:v("./set"),equals:v("./equals"),exactEquals:v("./exactEquals"),add:v("./add"),subtract:v("./subtract"),sub:v("./sub"),multiply:v("./multiply"),mul:v("./mul"),divide:v("./divide"),div:v("./div"),min:v("./min"),max:v("./max"),floor:v("./floor"),ceil:v("./ceil"),round:v("./round"),scale:v("./scale"),scaleAndAdd:v("./scaleAndAdd"),distance:v("./distance"),dist:v("./dist"),squaredDistance:v("./squaredDistance"),sqrDist:v("./sqrDist"),length:v("./length"),len:v("./len"),squaredLength:v("./squaredLength"),sqrLen:v("./sqrLen"),negate:v("./negate"),inverse:v("./inverse"),normalize:v("./normalize"),dot:v("./dot"),cross:v("./cross"),lerp:v("./lerp"),random:v("./random"),transformMat4:v("./transformMat4"),transformMat3:v("./transformMat3"),transformQuat:v("./transformQuat"),rotateX:v("./rotateX"),rotateY:v("./rotateY"),rotateZ:v("./rotateZ"),forEach:v("./forEach")}},{"./add":151,"./angle":152,"./ceil":153,"./clone":154,"./copy":155,"./create":156,"./cross":157,"./dist":158,"./distance":159,"./div":160,"./divide":161,"./dot":162,"./epsilon":163,"./equals":164,"./exactEquals":165,"./floor":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./len":171,"./length":172,"./lerp":173,"./max":174,"./min":175,"./mul":176,"./multiply":177,"./negate":178,"./normalize":179,"./random":180,"./rotateX":181,"./rotateY":182,"./rotateZ":183,"./round":184,"./scale":185,"./scaleAndAdd":186,"./set":187,"./sqrDist":188,"./sqrLen":189,"./squaredDistance":190,"./squaredLength":191,"./sub":192,"./subtract":193,"./transformMat3":194,"./transformMat4":195,"./transformQuat":196}],170:[function(v,M,T){M.exports=e;function e(a,n){return a[0]=1/n[0],a[1]=1/n[1],a[2]=1/n[2],a}},{}],171:[function(v,M,T){M.exports=v("./length")},{"./length":172}],172:[function(v,M,T){M.exports=e;function e(a){var n=a[0],r=a[1],t=a[2];return Math.sqrt(n*n+r*r+t*t)}},{}],173:[function(v,M,T){M.exports=e;function e(a,n,r,t){var f=n[0],o=n[1],i=n[2];return a[0]=f+t*(r[0]-f),a[1]=o+t*(r[1]-o),a[2]=i+t*(r[2]-i),a}},{}],174:[function(v,M,T){M.exports=e;function e(a,n,r){return a[0]=Math.max(n[0],r[0]),a[1]=Math.max(n[1],r[1]),a[2]=Math.max(n[2],r[2]),a}},{}],175:[function(v,M,T){M.exports=e;function e(a,n,r){return a[0]=Math.min(n[0],r[0]),a[1]=Math.min(n[1],r[1]),a[2]=Math.min(n[2],r[2]),a}},{}],176:[function(v,M,T){M.exports=v("./multiply")},{"./multiply":177}],177:[function(v,M,T){M.exports=e;function e(a,n,r){return a[0]=n[0]*r[0],a[1]=n[1]*r[1],a[2]=n[2]*r[2],a}},{}],178:[function(v,M,T){M.exports=e;function e(a,n){return a[0]=-n[0],a[1]=-n[1],a[2]=-n[2],a}},{}],179:[function(v,M,T){M.exports=e;function e(a,n){var r=n[0],t=n[1],f=n[2],o=r*r+t*t+f*f;return o>0&&(o=1/Math.sqrt(o),a[0]=n[0]*o,a[1]=n[1]*o,a[2]=n[2]*o),a}},{}],180:[function(v,M,T){M.exports=e;function e(a,n){n=n||1;var r=Math.random()*2*Math.PI,t=Math.random()*2-1,f=Math.sqrt(1-t*t)*n;return a[0]=Math.cos(r)*f,a[1]=Math.sin(r)*f,a[2]=t*n,a}},{}],181:[function(v,M,T){M.exports=e;function e(a,n,r,t){var f=r[1],o=r[2],i=n[1]-f,g=n[2]-o,p=Math.sin(t),y=Math.cos(t);return a[0]=n[0],a[1]=f+i*y-g*p,a[2]=o+i*p+g*y,a}},{}],182:[function(v,M,T){M.exports=e;function e(a,n,r,t){var f=r[0],o=r[2],i=n[0]-f,g=n[2]-o,p=Math.sin(t),y=Math.cos(t);return a[0]=f+g*p+i*y,a[1]=n[1],a[2]=o+g*y-i*p,a}},{}],183:[function(v,M,T){M.exports=e;function e(a,n,r,t){var f=r[0],o=r[1],i=n[0]-f,g=n[1]-o,p=Math.sin(t),y=Math.cos(t);return a[0]=f+i*y-g*p,a[1]=o+i*p+g*y,a[2]=n[2],a}},{}],184:[function(v,M,T){M.exports=e;function e(a,n){return a[0]=Math.round(n[0]),a[1]=Math.round(n[1]),a[2]=Math.round(n[2]),a}},{}],185:[function(v,M,T){M.exports=e;function e(a,n,r){return a[0]=n[0]*r,a[1]=n[1]*r,a[2]=n[2]*r,a}},{}],186:[function(v,M,T){M.exports=e;function e(a,n,r,t){return a[0]=n[0]+r[0]*t,a[1]=n[1]+r[1]*t,a[2]=n[2]+r[2]*t,a}},{}],187:[function(v,M,T){M.exports=e;function e(a,n,r,t){return a[0]=n,a[1]=r,a[2]=t,a}},{}],188:[function(v,M,T){M.exports=v("./squaredDistance")},{"./squaredDistance":190}],189:[function(v,M,T){M.exports=v("./squaredLength")},{"./squaredLength":191}],190:[function(v,M,T){M.exports=e;function e(a,n){var r=n[0]-a[0],t=n[1]-a[1],f=n[2]-a[2];return r*r+t*t+f*f}},{}],191:[function(v,M,T){M.exports=e;function e(a){var n=a[0],r=a[1],t=a[2];return n*n+r*r+t*t}},{}],192:[function(v,M,T){M.exports=v("./subtract")},{"./subtract":193}],193:[function(v,M,T){M.exports=e;function e(a,n,r){return a[0]=n[0]-r[0],a[1]=n[1]-r[1],a[2]=n[2]-r[2],a}},{}],194:[function(v,M,T){M.exports=e;function e(a,n,r){var t=n[0],f=n[1],o=n[2];return a[0]=t*r[0]+f*r[3]+o*r[6],a[1]=t*r[1]+f*r[4]+o*r[7],a[2]=t*r[2]+f*r[5]+o*r[8],a}},{}],195:[function(v,M,T){M.exports=e;function e(a,n,r){var t=n[0],f=n[1],o=n[2],i=r[3]*t+r[7]*f+r[11]*o+r[15];return i=i||1,a[0]=(r[0]*t+r[4]*f+r[8]*o+r[12])/i,a[1]=(r[1]*t+r[5]*f+r[9]*o+r[13])/i,a[2]=(r[2]*t+r[6]*f+r[10]*o+r[14])/i,a}},{}],196:[function(v,M,T){M.exports=e;function e(a,n,r){var t=n[0],f=n[1],o=n[2],i=r[0],g=r[1],p=r[2],y=r[3],c=y*t+g*o-p*f,b=y*f+p*t-i*o,l=y*o+i*f-g*t,_=-i*t-g*f-p*o;return a[0]=c*y+_*-i+b*-p-l*-g,a[1]=b*y+_*-g+l*-i-c*-p,a[2]=l*y+_*-p+c*-g-b*-i,a}},{}],197:[function(v,M,T){M.exports=e;function e(a,n,r){return a[0]=n[0]+r[0],a[1]=n[1]+r[1],a[2]=n[2]+r[2],a[3]=n[3]+r[3],a}},{}],198:[function(v,M,T){M.exports=e;function e(a){var n=new Float32Array(4);return n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3],n}},{}],199:[function(v,M,T){M.exports=e;function e(a,n){return a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a}},{}],200:[function(v,M,T){M.exports=e;function e(){var a=new Float32Array(4);return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a}},{}],201:[function(v,M,T){M.exports=e;function e(a,n){var r=n[0]-a[0],t=n[1]-a[1],f=n[2]-a[2],o=n[3]-a[3];return Math.sqrt(r*r+t*t+f*f+o*o)}},{}],202:[function(v,M,T){M.exports=e;function e(a,n,r){return a[0]=n[0]/r[0],a[1]=n[1]/r[1],a[2]=n[2]/r[2],a[3]=n[3]/r[3],a}},{}],203:[function(v,M,T){M.exports=e;function e(a,n){return a[0]*n[0]+a[1]*n[1]+a[2]*n[2]+a[3]*n[3]}},{}],204:[function(v,M,T){M.exports=e;function e(a,n,r,t){var f=new Float32Array(4);return f[0]=a,f[1]=n,f[2]=r,f[3]=t,f}},{}],205:[function(v,M,T){M.exports={create:v("./create"),clone:v("./clone"),fromValues:v("./fromValues"),copy:v("./copy"),set:v("./set"),add:v("./add"),subtract:v("./subtract"),multiply:v("./multiply"),divide:v("./divide"),min:v("./min"),max:v("./max"),scale:v("./scale"),scaleAndAdd:v("./scaleAndAdd"),distance:v("./distance"),squaredDistance:v("./squaredDistance"),length:v("./length"),squaredLength:v("./squaredLength"),negate:v("./negate"),inverse:v("./inverse"),normalize:v("./normalize"),dot:v("./dot"),lerp:v("./lerp"),random:v("./random"),transformMat4:v("./transformMat4"),transformQuat:v("./transformQuat")}},{"./add":197,"./clone":198,"./copy":199,"./create":200,"./distance":201,"./divide":202,"./dot":203,"./fromValues":204,"./inverse":206,"./length":207,"./lerp":208,"./max":209,"./min":210,"./multiply":211,"./negate":212,"./normalize":213,"./random":214,"./scale":215,"./scaleAndAdd":216,"./set":217,"./squaredDistance":218,"./squaredLength":219,"./subtract":220,"./transformMat4":221,"./transformQuat":222}],206:[function(v,M,T){M.exports=e;function e(a,n){return a[0]=1/n[0],a[1]=1/n[1],a[2]=1/n[2],a[3]=1/n[3],a}},{}],207:[function(v,M,T){M.exports=e;function e(a){var n=a[0],r=a[1],t=a[2],f=a[3];return Math.sqrt(n*n+r*r+t*t+f*f)}},{}],208:[function(v,M,T){M.exports=e;function e(a,n,r,t){var f=n[0],o=n[1],i=n[2],g=n[3];return a[0]=f+t*(r[0]-f),a[1]=o+t*(r[1]-o),a[2]=i+t*(r[2]-i),a[3]=g+t*(r[3]-g),a}},{}],209:[function(v,M,T){M.exports=e;function e(a,n,r){return a[0]=Math.max(n[0],r[0]),a[1]=Math.max(n[1],r[1]),a[2]=Math.max(n[2],r[2]),a[3]=Math.max(n[3],r[3]),a}},{}],210:[function(v,M,T){M.exports=e;function e(a,n,r){return a[0]=Math.min(n[0],r[0]),a[1]=Math.min(n[1],r[1]),a[2]=Math.min(n[2],r[2]),a[3]=Math.min(n[3],r[3]),a}},{}],211:[function(v,M,T){M.exports=e;function e(a,n,r){return a[0]=n[0]*r[0],a[1]=n[1]*r[1],a[2]=n[2]*r[2],a[3]=n[3]*r[3],a}},{}],212:[function(v,M,T){M.exports=e;function e(a,n){return a[0]=-n[0],a[1]=-n[1],a[2]=-n[2],a[3]=-n[3],a}},{}],213:[function(v,M,T){M.exports=e;function e(a,n){var r=n[0],t=n[1],f=n[2],o=n[3],i=r*r+t*t+f*f+o*o;return i>0&&(i=1/Math.sqrt(i),a[0]=r*i,a[1]=t*i,a[2]=f*i,a[3]=o*i),a}},{}],214:[function(v,M,T){var e=v("./normalize"),a=v("./scale");M.exports=n;function n(r,t){return t=t||1,r[0]=Math.random(),r[1]=Math.random(),r[2]=Math.random(),r[3]=Math.random(),e(r,r),a(r,r,t),r}},{"./normalize":213,"./scale":215}],215:[function(v,M,T){M.exports=e;function e(a,n,r){return a[0]=n[0]*r,a[1]=n[1]*r,a[2]=n[2]*r,a[3]=n[3]*r,a}},{}],216:[function(v,M,T){M.exports=e;function e(a,n,r,t){return a[0]=n[0]+r[0]*t,a[1]=n[1]+r[1]*t,a[2]=n[2]+r[2]*t,a[3]=n[3]+r[3]*t,a}},{}],217:[function(v,M,T){M.exports=e;function e(a,n,r,t,f){return a[0]=n,a[1]=r,a[2]=t,a[3]=f,a}},{}],218:[function(v,M,T){M.exports=e;function e(a,n){var r=n[0]-a[0],t=n[1]-a[1],f=n[2]-a[2],o=n[3]-a[3];return r*r+t*t+f*f+o*o}},{}],219:[function(v,M,T){M.exports=e;function e(a){var n=a[0],r=a[1],t=a[2],f=a[3];return n*n+r*r+t*t+f*f}},{}],220:[function(v,M,T){M.exports=e;function e(a,n,r){return a[0]=n[0]-r[0],a[1]=n[1]-r[1],a[2]=n[2]-r[2],a[3]=n[3]-r[3],a}},{}],221:[function(v,M,T){M.exports=e;function e(a,n,r){var t=n[0],f=n[1],o=n[2],i=n[3];return a[0]=r[0]*t+r[4]*f+r[8]*o+r[12]*i,a[1]=r[1]*t+r[5]*f+r[9]*o+r[13]*i,a[2]=r[2]*t+r[6]*f+r[10]*o+r[14]*i,a[3]=r[3]*t+r[7]*f+r[11]*o+r[15]*i,a}},{}],222:[function(v,M,T){M.exports=e;function e(a,n,r){var t=n[0],f=n[1],o=n[2],i=r[0],g=r[1],p=r[2],y=r[3],c=y*t+g*o-p*f,b=y*f+p*t-i*o,l=y*o+i*f-g*t,_=-i*t-g*f-p*o;return a[0]=c*y+_*-i+b*-p-l*-g,a[1]=b*y+_*-g+l*-i-c*-p,a[2]=l*y+_*-p+c*-g-b*-i,a[3]=n[3],a}},{}],223:[function(v,M,T){var e=v("glsl-tokenizer"),a=v("atob-lite");M.exports=n;function n(r){for(var t=Array.isArray(r)?r:e(r),f=0;f<t.length;f++){var o=t[f];if(o.type==="preprocessor"){var i=o.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(!!i&&!!i[2]){var g=i[1],p=i[2];return(g?a(p):p).trim()}}}}},{"atob-lite":13,"glsl-tokenizer":230}],224:[function(v,M,T){M.exports=u;var e=v("./lib/literals"),a=v("./lib/operators"),n=v("./lib/builtins"),r=v("./lib/literals-300es"),t=v("./lib/builtins-300es"),f=999,o=9999,i=0,g=1,p=2,y=3,c=4,b=5,l=6,_=7,s=8,A=9,m=10,h=11,x=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function u(L){var S=0,k=0,P=f,z,I,D=[],R=[],O=1,F=0,V=0,G=!1,J=!1,Z="",Y;L=L||{};var j=n,re=e;L.version==="300 es"&&(j=t,re=r);for(var se={},oe={},S=0;S<j.length;S++)se[j[S]]=!0;for(var S=0;S<re.length;S++)oe[re[S]]=!0;return function(Te){return R=[],Te!==null?U(Te):q()};function N(Te){Te.length&&R.push({type:x[P],data:Te,position:V,line:O,column:F})}function U(Te){S=0,Te.toString&&(Te=Te.toString()),Z+=Te.replace(/\r\n/g,`
`),Y=Z.length;for(var _e;z=Z[S],S<Y;){switch(_e=S,P){case i:S=te();break;case g:S=ee();break;case p:S=X();break;case y:S=ie();break;case c:S=fe();break;case h:S=ge();break;case b:S=pe();break;case o:S=ye();break;case A:S=W();break;case f:S=Q();break}if(_e!==S)switch(Z[_e]){case`
`:F=0,++O;break;default:++F;break}}return k+=S,Z=Z.slice(S),R}function q(Te){return D.length&&N(D.join("")),P=m,N("(eof)"),R}function Q(){return D=D.length?[]:D,I==="/"&&z==="*"?(V=k+S-1,P=i,I=z,S+1):I==="/"&&z==="/"?(V=k+S-1,P=g,I=z,S+1):z==="#"?(P=p,V=k+S,S):/\s/.test(z)?(P=A,V=k+S,S):(G=/\d/.test(z),J=/[^\w_]/.test(z),V=k+S,P=G?c:J?y:o,S)}function W(){return/[^\s]/g.test(z)?(N(D.join("")),P=f,S):(D.push(z),I=z,S+1)}function X(){return(z==="\r"||z===`
`)&&I!=="\\"?(N(D.join("")),P=f,S):(D.push(z),I=z,S+1)}function ee(){return X()}function te(){return z==="/"&&I==="*"?(D.push(z),N(D.join("")),P=f,S+1):(D.push(z),I=z,S+1)}function ie(){if(I==="."&&/\d/.test(z))return P=b,S;if(I==="/"&&z==="*")return P=i,S;if(I==="/"&&z==="/")return P=g,S;if(z==="."&&D.length){for(;le(D););return P=b,S}if(z===";"||z===")"||z==="("){if(D.length)for(;le(D););return N(z),P=f,S+1}var Te=D.length===2&&z!=="=";if(/[\w_\d\s]/.test(z)||Te){for(;le(D););return P=f,S}return D.push(z),I=z,S+1}function le(Te){var _e=0,De,Be;do{if(De=a.indexOf(Te.slice(0,Te.length+_e).join("")),Be=a[De],De===-1){if(_e--+Te.length>0)continue;Be=Te.slice(0,1).join("")}return N(Be),V+=Be.length,D=D.slice(Be.length),D.length}while(1)}function ge(){return/[^a-fA-F0-9]/.test(z)?(N(D.join("")),P=f,S):(D.push(z),I=z,S+1)}function fe(){return z==="."||/[eE]/.test(z)?(D.push(z),P=b,I=z,S+1):z==="x"&&D.length===1&&D[0]==="0"?(P=h,D.push(z),I=z,S+1):/[^\d]/.test(z)?(N(D.join("")),P=f,S):(D.push(z),I=z,S+1)}function pe(){return z==="f"&&(D.push(z),I=z,S+=1),/[eE]/.test(z)||(z==="-"||z==="+")&&/[eE]/.test(I)?(D.push(z),I=z,S+1):/[^\d]/.test(z)?(N(D.join("")),P=f,S):(D.push(z),I=z,S+1)}function ye(){if(/[^\d\w_]/.test(z)){var Te=D.join("");return oe[Te]?P=s:se[Te]?P=_:P=l,N(D.join("")),P=f,S}return D.push(z),I=z,S+1}}},{"./lib/builtins":226,"./lib/builtins-300es":225,"./lib/literals":228,"./lib/literals-300es":227,"./lib/operators":229}],225:[function(v,M,T){var e=v("./builtins");e=e.slice().filter(function(a){return!/^(gl\_|texture)/.test(a)}),M.exports=e.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":226}],226:[function(v,M,T){M.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],227:[function(v,M,T){var e=v("./literals");M.exports=e.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":228}],228:[function(v,M,T){M.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],229:[function(v,M,T){M.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],230:[function(v,M,T){var e=v("./index");M.exports=a;function a(n,r){var t=e(r),f=[];return f=f.concat(t(n)),f=f.concat(t(null)),f}},{"./index":224}],231:[function(v,M,T){M.exports=function(e){typeof e=="string"&&(e=[e]);for(var a=[].slice.call(arguments,1),n=[],r=0;r<e.length-1;r++)n.push(e[r],a[r]||"");return n.push(e[r]),n.join("")}},{}],232:[function(v,M,T){var e=v("is-browser");function a(){var n=!1;try{var r=Object.defineProperty({},"passive",{get:function(){n=!0}});window.addEventListener("test",null,r),window.removeEventListener("test",null,r)}catch{n=!1}return n}M.exports=e&&a()},{"is-browser":236}],233:[function(v,M,T){M.exports=y;var e=v("robust-orientation"),a=v("simplicial-complex").compareCells;function n(c,b,l){this.vertices=c,this.adjacent=b,this.boundary=l,this.lastVisited=-1}n.prototype.flip=function(){var c=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=c;var b=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=b};function r(c,b,l){this.vertices=c,this.cell=b,this.index=l}function t(c,b){return a(c.vertices,b.vertices)}function f(c){return function(){var b=this.tuple;return c.apply(this,b)}}function o(c){var b=e[c+1];return b||(b=e),f(b)}var i=[];function g(c,b,l){this.dimension=c,this.vertices=b,this.simplices=l,this.interior=l.filter(function(A){return!A.boundary}),this.tuple=new Array(c+1);for(var _=0;_<=c;++_)this.tuple[_]=this.vertices[_];var s=i[c];s||(s=i[c]=o(c)),this.orient=s}var p=g.prototype;p.handleBoundaryDegeneracy=function(c,b){var l=this.dimension,_=this.vertices.length-1,s=this.tuple,A=this.vertices,m=[c];for(c.lastVisited=-_;m.length>0;){c=m.pop();for(var h=c.adjacent,x=0;x<=l;++x){var u=h[x];if(!(!u.boundary||u.lastVisited<=-_)){for(var L=u.vertices,S=0;S<=l;++S){var k=L[S];k<0?s[S]=b:s[S]=A[k]}var P=this.orient();if(P>0)return u;u.lastVisited=-_,P===0&&m.push(u)}}}return null},p.walk=function(c,b){var l=this.vertices.length-1,_=this.dimension,s=this.vertices,A=this.tuple,m=b?this.interior.length*Math.random()|0:this.interior.length-1,h=this.interior[m];e:for(;!h.boundary;){for(var x=h.vertices,u=h.adjacent,L=0;L<=_;++L)A[L]=s[x[L]];h.lastVisited=l;for(var L=0;L<=_;++L){var S=u[L];if(!(S.lastVisited>=l)){var k=A[L];A[L]=c;var P=this.orient();if(A[L]=k,P<0){h=S;continue e}else S.boundary?S.lastVisited=-l:S.lastVisited=l}}return}return h},p.addPeaks=function(c,b){var l=this.vertices.length-1,_=this.dimension,s=this.vertices,A=this.tuple,m=this.interior,h=this.simplices,x=[b];b.lastVisited=l,b.vertices[b.vertices.indexOf(-1)]=l,b.boundary=!1,m.push(b);for(var u=[];x.length>0;){var b=x.pop(),L=b.vertices,S=b.adjacent,k=L.indexOf(l);if(!(k<0)){for(var P=0;P<=_;++P)if(P!==k){var z=S[P];if(!(!z.boundary||z.lastVisited>=l)){var I=z.vertices;if(z.lastVisited!==-l){for(var D=0,R=0;R<=_;++R)I[R]<0?(D=R,A[R]=c):A[R]=s[I[R]];var O=this.orient();if(O>0){I[D]=l,z.boundary=!1,m.push(z),x.push(z),z.lastVisited=l;continue}else z.lastVisited=-l}var F=z.adjacent,V=L.slice(),G=S.slice(),J=new n(V,G,!0);h.push(J);var Z=F.indexOf(b);if(!(Z<0)){F[Z]=J,G[k]=z,V[P]=-1,G[P]=b,S[P]=J,J.flip();for(var R=0;R<=_;++R){var Y=V[R];if(!(Y<0||Y===l)){for(var j=new Array(_-1),re=0,se=0;se<=_;++se){var oe=V[se];oe<0||se===R||(j[re++]=oe)}u.push(new r(j,J,R))}}}}}}}u.sort(t);for(var P=0;P+1<u.length;P+=2){var N=u[P],U=u[P+1],q=N.index,Q=U.index;q<0||Q<0||(N.cell.adjacent[N.index]=U.cell,U.cell.adjacent[U.index]=N.cell)}},p.insert=function(c,b){var l=this.vertices;l.push(c);var _=this.walk(c,b);if(!!_){for(var s=this.dimension,A=this.tuple,m=0;m<=s;++m){var h=_.vertices[m];h<0?A[m]=c:A[m]=l[h]}var x=this.orient(A);x<0||x===0&&(_=this.handleBoundaryDegeneracy(_,c),!_)||this.addPeaks(c,_)}},p.boundary=function(){for(var c=this.dimension,b=[],l=this.simplices,_=l.length,s=0;s<_;++s){var A=l[s];if(A.boundary){for(var m=new Array(c),h=A.vertices,x=0,u=0,L=0;L<=c;++L)h[L]>=0?m[x++]=h[L]:u=L&1;if(u===(c&1)){var S=m[0];m[0]=m[1],m[1]=S}b.push(m)}}return b};function y(c,b){var l=c.length;if(l===0)throw new Error("Must have at least d+1 points");var _=c[0].length;if(l<=_)throw new Error("Must input at least d+1 points");var s=c.slice(0,_+1),A=e.apply(void 0,s);if(A===0)throw new Error("Input not in general position");for(var m=new Array(_+1),h=0;h<=_;++h)m[h]=h;A<0&&(m[0]=1,m[1]=0);for(var x=new n(m,new Array(_+1),!1),u=x.adjacent,L=new Array(_+2),h=0;h<=_;++h){for(var S=m.slice(),k=0;k<=_;++k)k===h&&(S[k]=-1);var P=S[0];S[0]=S[1],S[1]=P;var z=new n(S,new Array(_+1),!0);u[h]=z,L[h]=z}L[_+1]=x;for(var h=0;h<=_;++h)for(var S=u[h].vertices,I=u[h].adjacent,k=0;k<=_;++k){var D=S[k];if(D<0){I[k]=x;continue}for(var R=0;R<=_;++R)u[R].vertices.indexOf(D)<0&&(I[k]=u[R])}for(var O=new g(_,s,L),F=!!b,h=_+1;h<l;++h)O.insert(c[h],F);return O.boundary()}},{"robust-orientation":284,"simplicial-complex":293}],234:[function(v,M,T){var e=v("binary-search-bounds"),a=0,n=1,r=2;M.exports=x;function t(u,L,S,k,P){this.mid=u,this.left=L,this.right=S,this.leftPoints=k,this.rightPoints=P,this.count=(L?L.count:0)+(S?S.count:0)+k.length}var f=t.prototype;function o(u,L){u.mid=L.mid,u.left=L.left,u.right=L.right,u.leftPoints=L.leftPoints,u.rightPoints=L.rightPoints,u.count=L.count}function i(u,L){var S=A(L);u.mid=S.mid,u.left=S.left,u.right=S.right,u.leftPoints=S.leftPoints,u.rightPoints=S.rightPoints,u.count=S.count}function g(u,L){var S=u.intervals([]);S.push(L),i(u,S)}function p(u,L){var S=u.intervals([]),k=S.indexOf(L);return k<0?a:(S.splice(k,1),i(u,S),n)}f.intervals=function(u){return u.push.apply(u,this.leftPoints),this.left&&this.left.intervals(u),this.right&&this.right.intervals(u),u},f.insert=function(u){var L=this.count-this.leftPoints.length;if(this.count+=1,u[1]<this.mid)this.left?4*(this.left.count+1)>3*(L+1)?g(this,u):this.left.insert(u):this.left=A([u]);else if(u[0]>this.mid)this.right?4*(this.right.count+1)>3*(L+1)?g(this,u):this.right.insert(u):this.right=A([u]);else{var S=e.ge(this.leftPoints,u,_),k=e.ge(this.rightPoints,u,s);this.leftPoints.splice(S,0,u),this.rightPoints.splice(k,0,u)}},f.remove=function(u){var L=this.count-this.leftPoints;if(u[1]<this.mid){if(!this.left)return a;var S=this.right?this.right.count:0;if(4*S>3*(L-1))return p(this,u);var k=this.left.remove(u);return k===r?(this.left=null,this.count-=1,n):(k===n&&(this.count-=1),k)}else if(u[0]>this.mid){if(!this.right)return a;var P=this.left?this.left.count:0;if(4*P>3*(L-1))return p(this,u);var k=this.right.remove(u);return k===r?(this.right=null,this.count-=1,n):(k===n&&(this.count-=1),k)}else{if(this.count===1)return this.leftPoints[0]===u?r:a;if(this.leftPoints.length===1&&this.leftPoints[0]===u){if(this.left&&this.right){for(var z=this,I=this.left;I.right;)z=I,I=I.right;if(z===this)I.right=this.right;else{var D=this.left,k=this.right;z.count-=I.count,z.right=I.left,I.left=D,I.right=k}o(this,I),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?o(this,this.left):o(this,this.right);return n}for(var D=e.ge(this.leftPoints,u,_);D<this.leftPoints.length&&this.leftPoints[D][0]===u[0];++D)if(this.leftPoints[D]===u){this.count-=1,this.leftPoints.splice(D,1);for(var k=e.ge(this.rightPoints,u,s);k<this.rightPoints.length&&this.rightPoints[k][1]===u[1];++k)if(this.rightPoints[k]===u)return this.rightPoints.splice(k,1),n}return a}};function y(u,L,S){for(var k=0;k<u.length&&u[k][0]<=L;++k){var P=S(u[k]);if(P)return P}}function c(u,L,S){for(var k=u.length-1;k>=0&&u[k][1]>=L;--k){var P=S(u[k]);if(P)return P}}function b(u,L){for(var S=0;S<u.length;++S){var k=L(u[S]);if(k)return k}}f.queryPoint=function(u,L){if(u<this.mid){if(this.left){var S=this.left.queryPoint(u,L);if(S)return S}return y(this.leftPoints,u,L)}else if(u>this.mid){if(this.right){var S=this.right.queryPoint(u,L);if(S)return S}return c(this.rightPoints,u,L)}else return b(this.leftPoints,L)},f.queryInterval=function(u,L,S){if(u<this.mid&&this.left){var k=this.left.queryInterval(u,L,S);if(k)return k}if(L>this.mid&&this.right){var k=this.right.queryInterval(u,L,S);if(k)return k}return L<this.mid?y(this.leftPoints,L,S):u>this.mid?c(this.rightPoints,u,S):b(this.leftPoints,S)};function l(u,L){return u-L}function _(u,L){var S=u[0]-L[0];return S||u[1]-L[1]}function s(u,L){var S=u[1]-L[1];return S||u[0]-L[0]}function A(u){if(u.length===0)return null;for(var L=[],S=0;S<u.length;++S)L.push(u[S][0],u[S][1]);L.sort(l);for(var k=L[L.length>>1],P=[],z=[],I=[],S=0;S<u.length;++S){var D=u[S];D[1]<k?P.push(D):k<D[0]?z.push(D):I.push(D)}var R=I,O=I.slice();return R.sort(_),O.sort(s),new t(k,A(P),A(z),R,O)}function m(u){this.root=u}var h=m.prototype;h.insert=function(u){this.root?this.root.insert(u):this.root=new t(u[0],null,null,[u],[u])},h.remove=function(u){if(this.root){var L=this.root.remove(u);return L===r&&(this.root=null),L!==a}return!1},h.queryPoint=function(u,L){if(this.root)return this.root.queryPoint(u,L)},h.queryInterval=function(u,L,S){if(u<=L&&this.root)return this.root.queryInterval(u,L,S)},Object.defineProperty(h,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(h,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function x(u){return!u||u.length===0?new m(null):new m(A(u))}},{"binary-search-bounds":31}],235:[function(v,M,T){function e(a){for(var n=new Array(a),r=0;r<a;++r)n[r]=r;return n}M.exports=e},{}],236:[function(v,M,T){M.exports=!0},{}],237:[function(v,M,T){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */M.exports=function(n){return n!=null&&(e(n)||a(n)||!!n._isBuffer)};function e(n){return!!n.constructor&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function a(n){return typeof n.readFloatLE=="function"&&typeof n.slice=="function"&&e(n.slice(0,0))}},{}],238:[function(v,M,T){M.exports=n,M.exports.isMobile=n,M.exports.default=n;var e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,a=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function n(r){r||(r={});var t=r.ua;if(!t&&typeof navigator<"u"&&(t=navigator.userAgent),t&&t.headers&&typeof t.headers["user-agent"]=="string"&&(t=t.headers["user-agent"]),typeof t!="string")return!1;var f=r.tablet?a.test(t):e.test(t);return!f&&r.tablet&&r.featureDetect&&navigator&&navigator.maxTouchPoints>1&&t.indexOf("Macintosh")!==-1&&t.indexOf("Safari")!==-1&&(f=!0),f}},{}],239:[function(v,M,T){M.exports=function(e){for(var a=e.length,n,r=0;r<a;r++)if(n=e.charCodeAt(r),(n<9||n>13)&&n!==32&&n!==133&&n!==160&&n!==5760&&n!==6158&&(n<8192||n>8205)&&n!==8232&&n!==8233&&n!==8239&&n!==8287&&n!==8288&&n!==12288&&n!==65279)return!1;return!0}},{}],240:[function(v,M,T){function e(a,n,r){return a*(1-r)+n*r}M.exports=e},{}],241:[function(v,M,T){var e=v("./normalize"),a=v("gl-mat4/create"),n=v("gl-mat4/clone"),r=v("gl-mat4/determinant"),t=v("gl-mat4/invert"),f=v("gl-mat4/transpose"),o={length:v("gl-vec3/length"),normalize:v("gl-vec3/normalize"),dot:v("gl-vec3/dot"),cross:v("gl-vec3/cross")},i=a(),g=a(),p=[0,0,0,0],y=[[0,0,0],[0,0,0],[0,0,0]],c=[0,0,0];M.exports=function(A,m,h,x,u,L){if(m||(m=[0,0,0]),h||(h=[0,0,0]),x||(x=[0,0,0]),u||(u=[0,0,0,1]),L||(L=[0,0,0,1]),!e(i,A)||(n(g,i),g[3]=0,g[7]=0,g[11]=0,g[15]=1,Math.abs(r(g)<1e-8)))return!1;var S=i[3],k=i[7],P=i[11],z=i[12],I=i[13],D=i[14],R=i[15];if(S!==0||k!==0||P!==0){p[0]=S,p[1]=k,p[2]=P,p[3]=R;var O=t(g,g);if(!O)return!1;f(g,g),b(u,p,g)}else u[0]=u[1]=u[2]=0,u[3]=1;if(m[0]=z,m[1]=I,m[2]=D,l(y,i),h[0]=o.length(y[0]),o.normalize(y[0],y[0]),x[0]=o.dot(y[0],y[1]),_(y[1],y[1],y[0],1,-x[0]),h[1]=o.length(y[1]),o.normalize(y[1],y[1]),x[0]/=h[1],x[1]=o.dot(y[0],y[2]),_(y[2],y[2],y[0],1,-x[1]),x[2]=o.dot(y[1],y[2]),_(y[2],y[2],y[1],1,-x[2]),h[2]=o.length(y[2]),o.normalize(y[2],y[2]),x[1]/=h[2],x[2]/=h[2],o.cross(c,y[1],y[2]),o.dot(y[0],c)<0)for(var F=0;F<3;F++)h[F]*=-1,y[F][0]*=-1,y[F][1]*=-1,y[F][2]*=-1;return L[0]=.5*Math.sqrt(Math.max(1+y[0][0]-y[1][1]-y[2][2],0)),L[1]=.5*Math.sqrt(Math.max(1-y[0][0]+y[1][1]-y[2][2],0)),L[2]=.5*Math.sqrt(Math.max(1-y[0][0]-y[1][1]+y[2][2],0)),L[3]=.5*Math.sqrt(Math.max(1+y[0][0]+y[1][1]+y[2][2],0)),y[2][1]>y[1][2]&&(L[0]=-L[0]),y[0][2]>y[2][0]&&(L[1]=-L[1]),y[1][0]>y[0][1]&&(L[2]=-L[2]),!0};function b(s,A,m){var h=A[0],x=A[1],u=A[2],L=A[3];return s[0]=m[0]*h+m[4]*x+m[8]*u+m[12]*L,s[1]=m[1]*h+m[5]*x+m[9]*u+m[13]*L,s[2]=m[2]*h+m[6]*x+m[10]*u+m[14]*L,s[3]=m[3]*h+m[7]*x+m[11]*u+m[15]*L,s}function l(s,A){s[0][0]=A[0],s[0][1]=A[1],s[0][2]=A[2],s[1][0]=A[4],s[1][1]=A[5],s[1][2]=A[6],s[2][0]=A[8],s[2][1]=A[9],s[2][2]=A[10]}function _(s,A,m,h,x){s[0]=A[0]*h+m[0]*x,s[1]=A[1]*h+m[1]*x,s[2]=A[2]*h+m[2]*x}},{"./normalize":242,"gl-mat4/clone":92,"gl-mat4/create":93,"gl-mat4/determinant":94,"gl-mat4/invert":98,"gl-mat4/transpose":109,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/length":172,"gl-vec3/normalize":179}],242:[function(v,M,T){M.exports=function(a,n){var r=n[15];if(r===0)return!1;for(var t=1/r,f=0;f<16;f++)a[f]=n[f]*t;return!0}},{}],243:[function(v,M,T){var e=v("gl-vec3/lerp"),a=v("mat4-recompose"),n=v("mat4-decompose"),r=v("gl-mat4/determinant"),t=v("quat-slerp"),f=p(),o=p(),i=p();M.exports=g;function g(b,l,_,s){if(r(l)===0||r(_)===0)return!1;var A=n(l,f.translate,f.scale,f.skew,f.perspective,f.quaternion),m=n(_,o.translate,o.scale,o.skew,o.perspective,o.quaternion);return!A||!m?!1:(e(i.translate,f.translate,o.translate,s),e(i.skew,f.skew,o.skew,s),e(i.scale,f.scale,o.scale,s),e(i.perspective,f.perspective,o.perspective,s),t(i.quaternion,f.quaternion,o.quaternion,s),a(b,i.translate,i.scale,i.skew,i.perspective,i.quaternion),!0)}function p(){return{translate:y(),scale:y(1),skew:y(),perspective:c(),quaternion:c()}}function y(b){return[b||0,b||0,b||0]}function c(){return[0,0,0,1]}},{"gl-mat4/determinant":94,"gl-vec3/lerp":173,"mat4-decompose":241,"mat4-recompose":244,"quat-slerp":271}],244:[function(v,M,T){var e={identity:v("gl-mat4/identity"),translate:v("gl-mat4/translate"),multiply:v("gl-mat4/multiply"),create:v("gl-mat4/create"),scale:v("gl-mat4/scale"),fromRotationTranslation:v("gl-mat4/fromRotationTranslation")};e.create();var a=e.create();M.exports=function(r,t,f,o,i,g){return e.identity(r),e.fromRotationTranslation(r,g,t),r[3]=i[0],r[7]=i[1],r[11]=i[2],r[15]=i[3],e.identity(a),o[2]!==0&&(a[9]=o[2],e.multiply(r,r,a)),o[1]!==0&&(a[9]=0,a[8]=o[1],e.multiply(r,r,a)),o[0]!==0&&(a[8]=0,a[4]=o[0],e.multiply(r,r,a)),e.scale(r,r,f),r}},{"gl-mat4/create":93,"gl-mat4/fromRotationTranslation":96,"gl-mat4/identity":97,"gl-mat4/multiply":100,"gl-mat4/scale":107,"gl-mat4/translate":108}],245:[function(v,M,T){var e=v("binary-search-bounds"),a=v("mat4-interpolate"),n=v("gl-mat4/invert"),r=v("gl-mat4/rotateX"),t=v("gl-mat4/rotateY"),f=v("gl-mat4/rotateZ"),o=v("gl-mat4/lookAt"),i=v("gl-mat4/translate");v("gl-mat4/scale");var g=v("gl-vec3/normalize"),p=[0,0,0];M.exports=l;function y(_){this._components=_.slice(),this._time=[0],this.prevMatrix=_.slice(),this.nextMatrix=_.slice(),this.computedMatrix=_.slice(),this.computedInverse=_.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}var c=y.prototype;c.recalcMatrix=function(_){var s=this._time,A=e.le(s,_),m=this.computedMatrix;if(!(A<0)){var h=this._components;if(A===s.length-1)for(var x=16*A,u=0;u<16;++u)m[u]=h[x++];else{for(var L=s[A+1]-s[A],x=16*A,S=this.prevMatrix,k=!0,u=0;u<16;++u)S[u]=h[x++];for(var P=this.nextMatrix,u=0;u<16;++u)P[u]=h[x++],k=k&&S[u]===P[u];if(L<1e-6||k)for(var u=0;u<16;++u)m[u]=S[u];else a(m,S,P,(_-s[A])/L)}var z=this.computedUp;z[0]=m[1],z[1]=m[5],z[2]=m[9],g(z,z);var I=this.computedInverse;n(I,m);var D=this.computedEye,R=I[15];D[0]=I[12]/R,D[1]=I[13]/R,D[2]=I[14]/R;for(var O=this.computedCenter,F=Math.exp(this.computedRadius[0]),u=0;u<3;++u)O[u]=D[u]-m[2+4*u]*F}},c.idle=function(_){if(!(_<this.lastT())){for(var s=this._components,A=s.length-16,m=0;m<16;++m)s.push(s[A++]);this._time.push(_)}},c.flush=function(_){var s=e.gt(this._time,_)-2;s<0||(this._time.splice(0,s),this._components.splice(0,16*s))},c.lastT=function(){return this._time[this._time.length-1]},c.lookAt=function(_,s,A,m){this.recalcMatrix(_),s=s||this.computedEye,A=A||p,m=m||this.computedUp,this.setMatrix(_,o(this.computedMatrix,s,A,m));for(var h=0,x=0;x<3;++x)h+=Math.pow(A[x]-s[x],2);h=Math.log(Math.sqrt(h)),this.computedRadius[0]=h},c.rotate=function(_,s,A,m){this.recalcMatrix(_);var h=this.computedInverse;s&&t(h,h,s),A&&r(h,h,A),m&&f(h,h,m),this.setMatrix(_,n(this.computedMatrix,h))};var b=[0,0,0];c.pan=function(_,s,A,m){b[0]=-(s||0),b[1]=-(A||0),b[2]=-(m||0),this.recalcMatrix(_);var h=this.computedInverse;i(h,h,b),this.setMatrix(_,n(h,h))},c.translate=function(_,s,A,m){b[0]=s||0,b[1]=A||0,b[2]=m||0,this.recalcMatrix(_);var h=this.computedMatrix;i(h,h,b),this.setMatrix(_,h)},c.setMatrix=function(_,s){if(!(_<this.lastT())){this._time.push(_);for(var A=0;A<16;++A)this._components.push(s[A])}},c.setDistance=function(_,s){this.computedRadius[0]=s},c.setDistanceLimits=function(_,s){var A=this._limits;A[0]=_,A[1]=s},c.getDistanceLimits=function(_){var s=this._limits;return _?(_[0]=s[0],_[1]=s[1],_):s};function l(_){_=_||{};var s=_.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new y(s)}},{"binary-search-bounds":31,"gl-mat4/invert":98,"gl-mat4/lookAt":99,"gl-mat4/rotateX":104,"gl-mat4/rotateY":105,"gl-mat4/rotateZ":106,"gl-mat4/scale":107,"gl-mat4/translate":108,"gl-vec3/normalize":179,"mat4-interpolate":243}],246:[function(v,M,T){M.exports=a;var e=v("robust-orientation")[3];function a(n){var r=n.length;if(r<3){for(var c=new Array(r),t=0;t<r;++t)c[t]=t;return r===2&&n[0][0]===n[1][0]&&n[0][1]===n[1][1]?[0]:c}for(var f=new Array(r),t=0;t<r;++t)f[t]=t;f.sort(function(s,A){var m=n[s][0]-n[A][0];return m||n[s][1]-n[A][1]});for(var o=[f[0],f[1]],i=[f[0],f[1]],t=2;t<r;++t){for(var g=f[t],p=n[g],y=o.length;y>1&&e(n[o[y-2]],n[o[y-1]],p)<=0;)y-=1,o.pop();for(o.push(g),y=i.length;y>1&&e(n[i[y-2]],n[i[y-1]],p)>=0;)y-=1,i.pop();i.push(g)}for(var c=new Array(i.length+o.length-2),b=0,t=0,l=o.length;t<l;++t)c[b++]=o[t];for(var _=i.length-2;_>0;--_)c[b++]=i[_];return c}},{"robust-orientation":284}],247:[function(v,M,T){M.exports=a;var e=v("mouse-event");function a(n,r){r||(r=n,n=window);var t=0,f=0,o=0,i={shift:!1,alt:!1,control:!1,meta:!1},g=!1;function p(u){var L=!1;return"altKey"in u&&(L=L||u.altKey!==i.alt,i.alt=!!u.altKey),"shiftKey"in u&&(L=L||u.shiftKey!==i.shift,i.shift=!!u.shiftKey),"ctrlKey"in u&&(L=L||u.ctrlKey!==i.control,i.control=!!u.ctrlKey),"metaKey"in u&&(L=L||u.metaKey!==i.meta,i.meta=!!u.metaKey),L}function y(u,L){var S=e.x(L),k=e.y(L);"buttons"in L&&(u=L.buttons|0),(u!==t||S!==f||k!==o||p(L))&&(t=u|0,f=S||0,o=k||0,r&&r(t,f,o,i))}function c(u){y(0,u)}function b(){(t||f||o||i.shift||i.alt||i.meta||i.control)&&(f=o=0,t=0,i.shift=i.alt=i.control=i.meta=!1,r&&r(0,0,0,i))}function l(u){p(u)&&r&&r(t,f,o,i)}function _(u){e.buttons(u)===0?y(0,u):y(t,u)}function s(u){y(t|e.buttons(u),u)}function A(u){y(t&~e.buttons(u),u)}function m(){g||(g=!0,n.addEventListener("mousemove",_),n.addEventListener("mousedown",s),n.addEventListener("mouseup",A),n.addEventListener("mouseleave",c),n.addEventListener("mouseenter",c),n.addEventListener("mouseout",c),n.addEventListener("mouseover",c),n.addEventListener("blur",b),n.addEventListener("keyup",l),n.addEventListener("keydown",l),n.addEventListener("keypress",l),n!==window&&(window.addEventListener("blur",b),window.addEventListener("keyup",l),window.addEventListener("keydown",l),window.addEventListener("keypress",l)))}function h(){!g||(g=!1,n.removeEventListener("mousemove",_),n.removeEventListener("mousedown",s),n.removeEventListener("mouseup",A),n.removeEventListener("mouseleave",c),n.removeEventListener("mouseenter",c),n.removeEventListener("mouseout",c),n.removeEventListener("mouseover",c),n.removeEventListener("blur",b),n.removeEventListener("keyup",l),n.removeEventListener("keydown",l),n.removeEventListener("keypress",l),n!==window&&(window.removeEventListener("blur",b),window.removeEventListener("keyup",l),window.removeEventListener("keydown",l),window.removeEventListener("keypress",l)))}m();var x={element:n};return Object.defineProperties(x,{enabled:{get:function(){return g},set:function(u){u?m():h()},enumerable:!0},buttons:{get:function(){return t},enumerable:!0},x:{get:function(){return f},enumerable:!0},y:{get:function(){return o},enumerable:!0},mods:{get:function(){return i},enumerable:!0}}),x}},{"mouse-event":249}],248:[function(v,M,T){var e={left:0,top:0};M.exports=a;function a(r,t,f){t=t||r.currentTarget||r.srcElement,Array.isArray(f)||(f=[0,0]);var o=r.clientX||0,i=r.clientY||0,g=n(t);return f[0]=o-g.left,f[1]=i-g.top,f}function n(r){return r===window||r===document||r===document.body?e:r.getBoundingClientRect()}},{}],249:[function(v,M,T){function e(t){if(typeof t=="object"){if("buttons"in t)return t.buttons;if("which"in t){var f=t.which;if(f===2)return 4;if(f===3)return 2;if(f>0)return 1<<f-1}else if("button"in t){var f=t.button;if(f===1)return 4;if(f===2)return 2;if(f>=0)return 1<<f}}return 0}T.buttons=e;function a(t){return t.target||t.srcElement||window}T.element=a;function n(t){if(typeof t=="object"){if("offsetX"in t)return t.offsetX;var f=a(t),o=f.getBoundingClientRect();return t.clientX-o.left}return 0}T.x=n;function r(t){if(typeof t=="object"){if("offsetY"in t)return t.offsetY;var f=a(t),o=f.getBoundingClientRect();return t.clientY-o.top}return 0}T.y=r},{}],250:[function(v,M,T){var e=v("to-px");M.exports=a;function a(n,r,t){typeof n=="function"&&(t=!!r,r=n,n=window);var f=e("ex",n),o=function(i){t&&i.preventDefault();var g=i.deltaX||0,p=i.deltaY||0,y=i.deltaZ||0,c=i.deltaMode,b=1;switch(c){case 1:b=f;break;case 2:b=window.innerHeight;break}if(g*=b,p*=b,y*=b,g||p||y)return r(g,p,y,i)};return n.addEventListener("wheel",o),o}},{"to-px":304}],251:[function(v,M,T){var e=v("typedarray-pool");M.exports=r;var a={"false,0,1":function(f,o,i,g,p){return function(c,b,l,_){var s=c.shape[0]|0,A=c.shape[1]|0,m=c.data,h=c.offset|0,x=c.stride[0]|0,u=c.stride[1]|0,L=h,S,k=-x|0,P=0,z=-u|0,I=0,D=-x-u|0,R=0,O=x|0,F=u-x*s|0,V=0,G=0,J=0,Z=2*s|0,Y=g(Z),j=g(Z),re=0,se=0,oe=-1,N=-1,U=0,q=-s|0,Q=s|0,W=0,X=-s-1|0,ee=s-1|0,te=0,ie=0,le=0;for(V=0;V<s;++V)Y[re++]=i(m[L],b,l,_),L+=O;if(L+=F,A>0){if(G=1,Y[re++]=i(m[L],b,l,_),L+=O,s>0)for(V=1,S=m[L],se=Y[re]=i(S,b,l,_),U=Y[re+oe],W=Y[re+q],te=Y[re+X],(se!==U||se!==W||se!==te)&&(P=m[L+k],I=m[L+z],R=m[L+D],f(V,G,S,P,I,R,se,U,W,te,b,l,_),ie=j[re]=J++),re+=1,L+=O,V=2;V<s;++V)S=m[L],se=Y[re]=i(S,b,l,_),U=Y[re+oe],W=Y[re+q],te=Y[re+X],(se!==U||se!==W||se!==te)&&(P=m[L+k],I=m[L+z],R=m[L+D],f(V,G,S,P,I,R,se,U,W,te,b,l,_),ie=j[re]=J++,te!==U&&o(j[re+oe],ie,R,P,te,U,b,l,_)),re+=1,L+=O;for(L+=F,re=0,le=oe,oe=N,N=le,le=q,q=Q,Q=le,le=X,X=ee,ee=le,G=2;G<A;++G){if(Y[re++]=i(m[L],b,l,_),L+=O,s>0)for(V=1,S=m[L],se=Y[re]=i(S,b,l,_),U=Y[re+oe],W=Y[re+q],te=Y[re+X],(se!==U||se!==W||se!==te)&&(P=m[L+k],I=m[L+z],R=m[L+D],f(V,G,S,P,I,R,se,U,W,te,b,l,_),ie=j[re]=J++,te!==W&&o(j[re+q],ie,I,R,W,te,b,l,_)),re+=1,L+=O,V=2;V<s;++V)S=m[L],se=Y[re]=i(S,b,l,_),U=Y[re+oe],W=Y[re+q],te=Y[re+X],(se!==U||se!==W||se!==te)&&(P=m[L+k],I=m[L+z],R=m[L+D],f(V,G,S,P,I,R,se,U,W,te,b,l,_),ie=j[re]=J++,te!==W&&o(j[re+q],ie,I,R,W,te,b,l,_),te!==U&&o(j[re+oe],ie,R,P,te,U,b,l,_)),re+=1,L+=O;G&1&&(re=0),le=oe,oe=N,N=le,le=q,q=Q,Q=le,le=X,X=ee,ee=le,L+=F}}p(j),p(Y)}},"false,1,0":function(f,o,i,g,p){return function(c,b,l,_){var s=c.shape[0]|0,A=c.shape[1]|0,m=c.data,h=c.offset|0,x=c.stride[0]|0,u=c.stride[1]|0,L=h,S,k=-x|0,P=0,z=-u|0,I=0,D=-x-u|0,R=0,O=u|0,F=x-u*A|0,V=0,G=0,J=0,Z=2*A|0,Y=g(Z),j=g(Z),re=0,se=0,oe=-1,N=-1,U=0,q=-A|0,Q=A|0,W=0,X=-A-1|0,ee=A-1|0,te=0,ie=0,le=0;for(G=0;G<A;++G)Y[re++]=i(m[L],b,l,_),L+=O;if(L+=F,s>0){if(V=1,Y[re++]=i(m[L],b,l,_),L+=O,A>0)for(G=1,S=m[L],se=Y[re]=i(S,b,l,_),W=Y[re+q],U=Y[re+oe],te=Y[re+X],(se!==W||se!==U||se!==te)&&(P=m[L+k],I=m[L+z],R=m[L+D],f(V,G,S,P,I,R,se,W,U,te,b,l,_),ie=j[re]=J++),re+=1,L+=O,G=2;G<A;++G)S=m[L],se=Y[re]=i(S,b,l,_),W=Y[re+q],U=Y[re+oe],te=Y[re+X],(se!==W||se!==U||se!==te)&&(P=m[L+k],I=m[L+z],R=m[L+D],f(V,G,S,P,I,R,se,W,U,te,b,l,_),ie=j[re]=J++,te!==U&&o(j[re+oe],ie,I,R,U,te,b,l,_)),re+=1,L+=O;for(L+=F,re=0,le=q,q=Q,Q=le,le=oe,oe=N,N=le,le=X,X=ee,ee=le,V=2;V<s;++V){if(Y[re++]=i(m[L],b,l,_),L+=O,A>0)for(G=1,S=m[L],se=Y[re]=i(S,b,l,_),W=Y[re+q],U=Y[re+oe],te=Y[re+X],(se!==W||se!==U||se!==te)&&(P=m[L+k],I=m[L+z],R=m[L+D],f(V,G,S,P,I,R,se,W,U,te,b,l,_),ie=j[re]=J++,te!==W&&o(j[re+q],ie,R,P,te,W,b,l,_)),re+=1,L+=O,G=2;G<A;++G)S=m[L],se=Y[re]=i(S,b,l,_),W=Y[re+q],U=Y[re+oe],te=Y[re+X],(se!==W||se!==U||se!==te)&&(P=m[L+k],I=m[L+z],R=m[L+D],f(V,G,S,P,I,R,se,W,U,te,b,l,_),ie=j[re]=J++,te!==U&&o(j[re+oe],ie,I,R,U,te,b,l,_),te!==W&&o(j[re+q],ie,R,P,te,W,b,l,_)),re+=1,L+=O;V&1&&(re=0),le=q,q=Q,Q=le,le=oe,oe=N,N=le,le=X,X=ee,ee=le,L+=F}}p(j),p(Y)}}};function n(t,f,o,i,g,p){var y=[p,g].join(","),c=a[y];return c(t,f,o,e.mallocUint32,e.freeUint32)}function r(t){function f(b){throw new Error("ndarray-extract-contour: "+b)}typeof t!="object"&&f("Must specify arguments");var o=t.order;Array.isArray(o)||f("Must specify order");var i=t.arrayArguments||1;i<1&&f("Must have at least one array argument");var g=t.scalarArguments||0;g<0&&f("Scalar arg count must be > 0"),typeof t.vertex!="function"&&f("Must specify vertex creation function"),typeof t.cell!="function"&&f("Must specify cell creation function"),typeof t.phase!="function"&&f("Must specify phase function");for(var p=t.getters||[],y=new Array(i),c=0;c<i;++c)p.indexOf(c)>=0?y[c]=!0:y[c]=!1;return n(t.vertex,t.cell,t.phase,g,o,y)}},{"typedarray-pool":308}],252:[function(v,M,T){var e=v("dup"),a={zero:function(l,_,s,A){var m=l[0],h=s[0];A|=0;var x=0,u=h;for(x=0;x<m;++x)_[A]=0,A+=u},fdTemplate1:function(l,_,s,A,m,h,x){var u=l[0],L=s[0],S=h[0],k=-1*L,P=L;A|=0,x|=0;var z=0,I=L,D=S;for(z=0;z<u;++z)m[x]=.5*(_[A+k]-_[A+P]),A+=I,x+=D},fdTemplate2:function(l,_,s,A,m,h,x,u,L,S){var k=l[0],P=l[1],z=s[0],I=s[1],D=h[0],R=h[1],O=L[0],F=L[1],V=-1*z,G=z,J=-1*I,Z=I;A|=0,x|=0,S|=0;var Y=0,j=0,re=I,se=z-P*I,oe=R,N=D-P*R,U=F,q=O-P*F;for(j=0;j<k;++j){for(Y=0;Y<P;++Y)m[x]=.5*(_[A+V]-_[A+G]),u[S]=.5*(_[A+J]-_[A+Z]),A+=re,x+=oe,S+=U;A+=se,x+=N,S+=q}}},n={cdiff:function(l){var _={};return function(A,m,h){var x=A.dtype,u=A.order,L=m.dtype,S=m.order,k=h.dtype,P=h.order,z=[x,u.join(),L,S.join(),k,P.join()].join(),I=_[z];return I||(_[z]=I=l([x,u,L,S,k,P])),I(A.shape.slice(0),A.data,A.stride,A.offset|0,m.data,m.stride,m.offset|0,h.data,h.stride,h.offset|0)}},zero:function(l){var _={};return function(A){var m=A.dtype,h=A.order,x=[m,h.join()].join(),u=_[x];return u||(_[x]=u=l([m,h])),u(A.shape.slice(0),A.data,A.stride,A.offset|0)}},fdTemplate1:function(l){var _={};return function(A,m){var h=A.dtype,x=A.order,u=m.dtype,L=m.order,S=[h,x.join(),u,L.join()].join(),k=_[S];return k||(_[S]=k=l([h,x,u,L])),k(A.shape.slice(0),A.data,A.stride,A.offset|0,m.data,m.stride,m.offset|0)}},fdTemplate2:function(l){var _={};return function(A,m,h){var x=A.dtype,u=A.order,L=m.dtype,S=m.order,k=h.dtype,P=h.order,z=[x,u.join(),L,S.join(),k,P.join()].join(),I=_[z];return I||(_[z]=I=l([x,u,L,S,k,P])),I(A.shape.slice(0),A.data,A.stride,A.offset|0,m.data,m.stride,m.offset|0,h.data,h.stride,h.offset|0)}}};function r(l){var _=n[l.funcName];return _(t.bind(void 0,l))}function t(l){return a[l.funcName]}function f(l){return r({funcName:l.funcName})}var o={},i={},g=f({funcName:"cdiff"}),p=f({funcName:"zero"});function y(l){return l in o?o[l]:o[l]=f({funcName:"fdTemplate"+l})}function c(l,_,s,A){return function(m,h){var x=h.shape.slice();return x[0]>2&&x[1]>2&&A(h.pick(-1,-1).lo(1,1).hi(x[0]-2,x[1]-2),m.pick(-1,-1,0).lo(1,1).hi(x[0]-2,x[1]-2),m.pick(-1,-1,1).lo(1,1).hi(x[0]-2,x[1]-2)),x[1]>2&&(s(h.pick(0,-1).lo(1).hi(x[1]-2),m.pick(0,-1,1).lo(1).hi(x[1]-2)),_(m.pick(0,-1,0).lo(1).hi(x[1]-2))),x[1]>2&&(s(h.pick(x[0]-1,-1).lo(1).hi(x[1]-2),m.pick(x[0]-1,-1,1).lo(1).hi(x[1]-2)),_(m.pick(x[0]-1,-1,0).lo(1).hi(x[1]-2))),x[0]>2&&(s(h.pick(-1,0).lo(1).hi(x[0]-2),m.pick(-1,0,0).lo(1).hi(x[0]-2)),_(m.pick(-1,0,1).lo(1).hi(x[0]-2))),x[0]>2&&(s(h.pick(-1,x[1]-1).lo(1).hi(x[0]-2),m.pick(-1,x[1]-1,0).lo(1).hi(x[0]-2)),_(m.pick(-1,x[1]-1,1).lo(1).hi(x[0]-2))),m.set(0,0,0,0),m.set(0,0,1,0),m.set(x[0]-1,0,0,0),m.set(x[0]-1,0,1,0),m.set(0,x[1]-1,0,0),m.set(0,x[1]-1,1,0),m.set(x[0]-1,x[1]-1,0,0),m.set(x[0]-1,x[1]-1,1,0),m}}function b(l){var _=l.join(),x=i[_];if(x)return x;for(var s=l.length,A=[g,p],m=1;m<=s;++m)A.push(y(m));var h=c,x=h.apply(void 0,A);return i[_]=x,x}M.exports=function(_,s,A){if(Array.isArray(A)||(typeof A=="string"?A=e(s.dimension,A):A=e(s.dimension,"clamp")),s.size===0)return _;if(s.dimension===0)return _.set(0),_;var m=b(A);return m(_,s)}},{dup:65}],253:[function(v,M,T){function e(f,o){var i=Math.floor(o),g=o-i,p=0<=i&&i<f.shape[0],y=0<=i+1&&i+1<f.shape[0],c=p?+f.get(i):0,b=y?+f.get(i+1):0;return(1-g)*c+g*b}function a(f,o,i){var g=Math.floor(o),p=o-g,y=0<=g&&g<f.shape[0],c=0<=g+1&&g+1<f.shape[0],b=Math.floor(i),l=i-b,_=0<=b&&b<f.shape[1],s=0<=b+1&&b+1<f.shape[1],A=y&&_?f.get(g,b):0,m=y&&s?f.get(g,b+1):0,h=c&&_?f.get(g+1,b):0,x=c&&s?f.get(g+1,b+1):0;return(1-l)*((1-p)*A+p*h)+l*((1-p)*m+p*x)}function n(f,o,i,g){var p=Math.floor(o),y=o-p,c=0<=p&&p<f.shape[0],b=0<=p+1&&p+1<f.shape[0],l=Math.floor(i),_=i-l,s=0<=l&&l<f.shape[1],A=0<=l+1&&l+1<f.shape[1],m=Math.floor(g),h=g-m,x=0<=m&&m<f.shape[2],u=0<=m+1&&m+1<f.shape[2],L=c&&s&&x?f.get(p,l,m):0,S=c&&A&&x?f.get(p,l+1,m):0,k=b&&s&&x?f.get(p+1,l,m):0,P=b&&A&&x?f.get(p+1,l+1,m):0,z=c&&s&&u?f.get(p,l,m+1):0,I=c&&A&&u?f.get(p,l+1,m+1):0,D=b&&s&&u?f.get(p+1,l,m+1):0,R=b&&A&&u?f.get(p+1,l+1,m+1):0;return(1-h)*((1-_)*((1-y)*L+y*k)+_*((1-y)*S+y*P))+h*((1-_)*((1-y)*z+y*D)+_*((1-y)*I+y*R))}function r(f){var o=f.shape.length|0,i=new Array(o),g=new Array(o),p=new Array(o),y=new Array(o),c,b;for(c=0;c<o;++c)b=+arguments[c+1],i[c]=Math.floor(b),g[c]=b-i[c],p[c]=0<=i[c]&&i[c]<f.shape[c],y[c]=0<=i[c]+1&&i[c]+1<f.shape[c];var l=0,_,s,A;e:for(c=0;c<1<<o;++c){for(s=1,A=f.offset,_=0;_<o;++_)if(c&1<<_){if(!y[_])continue e;s*=g[_],A+=f.stride[_]*(i[_]+1)}else{if(!p[_])continue e;s*=1-g[_],A+=f.stride[_]*i[_]}l+=s*f.data[A]}return l}function t(f,o,i,g){switch(f.shape.length){case 0:return 0;case 1:return e(f,o);case 2:return a(f,o,i);case 3:return n(f,o,i,g);default:return r.apply(void 0,arguments)}}M.exports=t,M.exports.d1=e,M.exports.d2=a,M.exports.d3=n},{}],254:[function(v,M,T){var e={"float64,2,1,0":function(){return function(g,p,y,c,b){var l=g[0],_=g[1],s=g[2],A=y[0],m=y[1],h=y[2];c|=0;var x=0,u=0,L=0,S=h,k=m-s*h,P=A-_*m;for(L=0;L<l;++L){for(u=0;u<_;++u){for(x=0;x<s;++x)p[c]/=b,c+=S;c+=k}c+=P}}},"uint8,2,0,1,float64,2,1,0":function(){return function(g,p,y,c,b,l,_,s){var A=g[0],m=g[1],h=g[2],x=y[0],u=y[1],L=y[2],S=l[0],k=l[1],P=l[2];c|=0,_|=0;for(var z=c,I=_,D=g[0]|0;D>0;){D<64?(A=D,D=0):(A=64,D-=64);for(var R=g[1]|0;R>0;){R<64?(m=R,R=0):(m=64,R-=64),c=z+D*x+R*u,_=I+D*S+R*k;var O=0,F=0,V=0,G=L,J=x-h*L,Z=u-A*x,Y=P,j=S-h*P,re=k-A*S;for(V=0;V<m;++V){for(F=0;F<A;++F){for(O=0;O<h;++O)p[c]=b[_]*s,c+=G,_+=Y;c+=J,_+=j}c+=Z,_+=re}}}}},"float32,1,0,float32,1,0":function(){return function(g,p,y,c,b,l,_){var s=g[0],A=g[1],m=y[0],h=y[1],x=l[0],u=l[1];c|=0,_|=0;var L=0,S=0,k=h,P=m-A*h,z=u,I=x-A*u;for(S=0;S<s;++S){for(L=0;L<A;++L)p[c]=b[_],c+=k,_+=z;c+=P,_+=I}}},"float32,1,0,float32,0,1":function(){return function(g,p,y,c,b,l,_){var s=g[0],A=g[1],m=y[0],h=y[1],x=l[0],u=l[1];c|=0,_|=0;for(var L=c,S=_,k=g[1]|0;k>0;){k<64?(A=k,k=0):(A=64,k-=64);for(var P=g[0]|0;P>0;){P<64?(s=P,P=0):(s=64,P-=64),c=L+k*h+P*m,_=S+k*u+P*x;var z=0,I=0,D=h,R=m-A*h,O=u,F=x-A*u;for(I=0;I<s;++I){for(z=0;z<A;++z)p[c]=b[_],c+=D,_+=O;c+=R,_+=F}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(g,p,y,c,b,l,_){var s=g[0],A=g[1],m=g[2],h=y[0],x=y[1],u=y[2],L=l[0],S=l[1],k=l[2];c|=0,_|=0;for(var P=c,z=_,I=g[2]|0;I>0;){I<64?(m=I,I=0):(m=64,I-=64);for(var D=g[0]|0;D>0;){D<64?(s=D,D=0):(s=64,D-=64);for(var R=g[1]|0;R>0;){R<64?(A=R,R=0):(A=64,R-=64),c=P+I*u+D*h+R*x,_=z+I*k+D*L+R*S;var O=0,F=0,V=0,G=u,J=h-m*u,Z=x-s*h,Y=k,j=L-m*k,re=S-s*L;for(V=0;V<A;++V){for(F=0;F<s;++F){for(O=0;O<m;++O)p[c]=b[_],c+=G,_+=Y;c+=J,_+=j}c+=Z,_+=re}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(g,p,y,c,b,l,_){var s=g[0],A=g[1],m=g[2],h=y[0],x=y[1],u=y[2],L=l[0],S=l[1],k=l[2];c|=0,_|=0;var P=0,z=0,I=0,D=u,R=h-m*u,O=x-s*h,F=k,V=L-m*k,G=S-s*L;for(I=0;I<A;++I){for(z=0;z<s;++z){for(P=0;P<m;++P)p[c]=b[_],c+=D,_+=F;c+=R,_+=V}c+=O,_+=G}}}};function a(i,g){var p=g.join(","),y=e[p];return y()}var n=a,r={mul:function(i){var g={};return function(y,c,b){var l=y.dtype,_=y.order,s=c.dtype,A=c.order,m=b.dtype,h=b.order,x=[l,_.join(),s,A.join(),m,h.join()].join(),u=g[x];return u||(g[x]=u=i([l,_,s,A,m,h])),u(y.shape.slice(0),y.data,y.stride,y.offset|0,c.data,c.stride,c.offset|0,b.data,b.stride,b.offset|0)}},muls:function(i){var g={};return function(y,c,b){var l=y.dtype,_=y.order,s=c.dtype,A=c.order,m=[l,_.join(),s,A.join()].join(),h=g[m];return h||(g[m]=h=i([l,_,s,A])),h(y.shape.slice(0),y.data,y.stride,y.offset|0,c.data,c.stride,c.offset|0,b)}},mulseq:function(i){var g={};return function(y,c){var b=y.dtype,l=y.order,_=[b,l.join()].join(),s=g[_];return s||(g[_]=s=i([b,l])),s(y.shape.slice(0),y.data,y.stride,y.offset|0,c)}},div:function(i){var g={};return function(y,c,b){var l=y.dtype,_=y.order,s=c.dtype,A=c.order,m=b.dtype,h=b.order,x=[l,_.join(),s,A.join(),m,h.join()].join(),u=g[x];return u||(g[x]=u=i([l,_,s,A,m,h])),u(y.shape.slice(0),y.data,y.stride,y.offset|0,c.data,c.stride,c.offset|0,b.data,b.stride,b.offset|0)}},divs:function(i){var g={};return function(y,c,b){var l=y.dtype,_=y.order,s=c.dtype,A=c.order,m=[l,_.join(),s,A.join()].join(),h=g[m];return h||(g[m]=h=i([l,_,s,A])),h(y.shape.slice(0),y.data,y.stride,y.offset|0,c.data,c.stride,c.offset|0,b)}},divseq:function(i){var g={};return function(y,c){var b=y.dtype,l=y.order,_=[b,l.join()].join(),s=g[_];return s||(g[_]=s=i([b,l])),s(y.shape.slice(0),y.data,y.stride,y.offset|0,c)}},assign:function(i){var g={};return function(y,c){var b=y.dtype,l=y.order,_=c.dtype,s=c.order,A=[b,l.join(),_,s.join()].join(),m=g[A];return m||(g[A]=m=i([b,l,_,s])),m(y.shape.slice(0),y.data,y.stride,y.offset|0,c.data,c.stride,c.offset|0)}}};function t(i){var g=r[i.funcName];return g(n.bind(void 0,i))}function f(i){return t({funcName:i.funcName})}var o={mul:"*",div:"/"};(function(){for(var i in o)T[i]=f({funcName:i}),T[i+"s"]=f({funcName:i+"s"}),T[i+"seq"]=f({funcName:i+"seq"})})(),T.assign=f({funcName:"assign"})},{}],255:[function(v,M,T){var e=v("ndarray"),a=v("./doConvert.js");M.exports=function(r,t){for(var f=[],o=r,i=1;Array.isArray(o);)f.push(o.length),i*=o.length,o=o[0];return f.length===0?e():(t||(t=e(new Float64Array(i),f)),a(t,r),t)}},{"./doConvert.js":256,ndarray:259}],256:[function(v,M,T){function e(){return function(o,i,g,p,y){var c=o[0],b=o[1],l=o[2],_=g[0],s=g[1],A=g[2],m=[0,0,0];p|=0;var h=0,x=0,u=0,L=A,S=s-l*A,k=_-b*s;for(u=0;u<c;++u){for(x=0;x<b;++x){for(h=0;h<l;++h){{var P=y,z;for(z=0;z<m.length-1;++z)P=P[m[z]];i[p]=P[m[m.length-1]]}p+=L,++m[2]}p+=S,m[2]-=l,++m[1]}p+=k,m[1]-=b,++m[0]}}}function a(){return e()}var n=a;function r(o){var i={};return function(p,y){var c=p.dtype,b=p.order,l=[c,b.join()].join(),_=i[l];return _||(i[l]=_=o([c,b])),_(p.shape.slice(0),p.data,p.stride,p.offset|0,y)}}function t(o){return r(n.bind(void 0,o))}function f(o){return t({funcName:o.funcName})}M.exports=f({funcName:"convert"})},{}],257:[function(v,M,T){var e=v("typedarray-pool");function a(g){switch(g){case"uint32":return[e.mallocUint32,e.freeUint32];default:return null}}var n={"uint32,1,0":function(g,p){return function(c,b,l,_,s,A,m,h,x,u,L){var S,k,P,z=c*s+_,I,D=g(h),R,O,F,V;for(S=c+1;S<=b;++S){for(k=S,z+=s,P=z,R=0,O=z,I=0;I<h;++I)D[R++]=l[O],O+=x;e:for(;k-- >c;){R=0,O=P-s;t:for(I=0;I<h;++I){if(F=l[O],V=D[R],F<V)break e;if(F>V)break t;O+=u,R+=L}for(R=P,O=P-s,I=0;I<h;++I)l[R]=l[O],R+=x,O+=x;P-=s}for(R=P,O=0,I=0;I<h;++I)l[R]=D[O++],R+=x}p(D)}}};function r(g,p){var y=a(p),c=[p,g].join(","),b=n[c];return y?b(y[0],y[1]):b()}var t={"uint32,1,0":function(g,p,y){return function c(b,l,_,s,A,m,h,x,u,L,S){var k=(l-b+1)/6|0,P=b+k,z=l-k,I=b+l>>1,D=I-k,R=I+k,O=P,F=D,V=I,G=R,J=z,Z=b+1,Y=l-1,j=!0,re,se,oe,N,U,q,Q,W,X,ee=0,te=0,ie=0,le,ge,fe,pe,ye,Te,_e,De,Be,Ue,xe,Pe,Ve,Qe,Fe,Le,Ne=x,dt=p(Ne),Dt=p(Ne);ge=A*O,fe=A*F,Le=s;e:for(le=0;le<x;++le){if(Q=ge+Le,W=fe+Le,ie=_[Q]-_[W],ie>0){se=O,O=F,F=se;break e}if(ie<0)break e;Le+=L}ge=A*G,fe=A*J,Le=s;e:for(le=0;le<x;++le){if(Q=ge+Le,W=fe+Le,ie=_[Q]-_[W],ie>0){se=G,G=J,J=se;break e}if(ie<0)break e;Le+=L}ge=A*O,fe=A*V,Le=s;e:for(le=0;le<x;++le){if(Q=ge+Le,W=fe+Le,ie=_[Q]-_[W],ie>0){se=O,O=V,V=se;break e}if(ie<0)break e;Le+=L}ge=A*F,fe=A*V,Le=s;e:for(le=0;le<x;++le){if(Q=ge+Le,W=fe+Le,ie=_[Q]-_[W],ie>0){se=F,F=V,V=se;break e}if(ie<0)break e;Le+=L}ge=A*O,fe=A*G,Le=s;e:for(le=0;le<x;++le){if(Q=ge+Le,W=fe+Le,ie=_[Q]-_[W],ie>0){se=O,O=G,G=se;break e}if(ie<0)break e;Le+=L}ge=A*V,fe=A*G,Le=s;e:for(le=0;le<x;++le){if(Q=ge+Le,W=fe+Le,ie=_[Q]-_[W],ie>0){se=V,V=G,G=se;break e}if(ie<0)break e;Le+=L}ge=A*F,fe=A*J,Le=s;e:for(le=0;le<x;++le){if(Q=ge+Le,W=fe+Le,ie=_[Q]-_[W],ie>0){se=F,F=J,J=se;break e}if(ie<0)break e;Le+=L}ge=A*F,fe=A*V,Le=s;e:for(le=0;le<x;++le){if(Q=ge+Le,W=fe+Le,ie=_[Q]-_[W],ie>0){se=F,F=V,V=se;break e}if(ie<0)break e;Le+=L}ge=A*G,fe=A*J,Le=s;e:for(le=0;le<x;++le){if(Q=ge+Le,W=fe+Le,ie=_[Q]-_[W],ie>0){se=G,G=J,J=se;break e}if(ie<0)break e;Le+=L}for(ge=A*O,fe=A*F,pe=A*V,ye=A*G,Te=A*J,_e=A*P,De=A*I,Be=A*z,Fe=0,Le=s,le=0;le<x;++le)Q=ge+Le,W=fe+Le,X=pe+Le,Ue=ye+Le,xe=Te+Le,Pe=_e+Le,Ve=De+Le,Qe=Be+Le,dt[Fe]=_[W],Dt[Fe]=_[Ue],j=j&&dt[Fe]===Dt[Fe],oe=_[Q],N=_[X],U=_[xe],_[Pe]=oe,_[Ve]=N,_[Qe]=U,++Fe,Le+=u;for(ge=A*D,fe=A*b,Le=s,le=0;le<x;++le)Q=ge+Le,W=fe+Le,_[Q]=_[W],Le+=u;for(ge=A*R,fe=A*l,Le=s,le=0;le<x;++le)Q=ge+Le,W=fe+Le,_[Q]=_[W],Le+=u;if(j)for(q=Z;q<=Y;++q){Q=s+q*A,Fe=0;e:for(le=0;le<x;++le){if(ie=_[Q]-dt[Fe],ie!==0)break e;Fe+=S,Q+=L}if(ie!==0)if(ie<0){if(q!==Z)for(ge=A*q,fe=A*Z,Le=s,le=0;le<x;++le)Q=ge+Le,W=fe+Le,re=_[Q],_[Q]=_[W],_[W]=re,Le+=u;++Z}else for(;;){Q=s+Y*A,Fe=0;e:for(le=0;le<x;++le){if(ie=_[Q]-dt[Fe],ie!==0)break e;Fe+=S,Q+=L}if(ie>0)Y--;else if(ie<0){for(ge=A*q,fe=A*Z,pe=A*Y,Le=s,le=0;le<x;++le)Q=ge+Le,W=fe+Le,X=pe+Le,re=_[Q],_[Q]=_[W],_[W]=_[X],_[X]=re,Le+=u;++Z,--Y;break}else{for(ge=A*q,fe=A*Y,Le=s,le=0;le<x;++le)Q=ge+Le,W=fe+Le,re=_[Q],_[Q]=_[W],_[W]=re,Le+=u;--Y;break}}}else for(q=Z;q<=Y;++q){Q=s+q*A,Fe=0;e:for(le=0;le<x;++le){if(ee=_[Q]-dt[Fe],ee!==0)break e;Fe+=S,Q+=L}if(ee<0){if(q!==Z)for(ge=A*q,fe=A*Z,Le=s,le=0;le<x;++le)Q=ge+Le,W=fe+Le,re=_[Q],_[Q]=_[W],_[W]=re,Le+=u;++Z}else{Q=s+q*A,Fe=0;e:for(le=0;le<x;++le){if(te=_[Q]-Dt[Fe],te!==0)break e;Fe+=S,Q+=L}if(te>0)for(;;){Q=s+Y*A,Fe=0;e:for(le=0;le<x;++le){if(ie=_[Q]-Dt[Fe],ie!==0)break e;Fe+=S,Q+=L}if(ie>0){if(--Y<q)break;continue}else{Q=s+Y*A,Fe=0;e:for(le=0;le<x;++le){if(ie=_[Q]-dt[Fe],ie!==0)break e;Fe+=S,Q+=L}if(ie<0){for(ge=A*q,fe=A*Z,pe=A*Y,Le=s,le=0;le<x;++le)Q=ge+Le,W=fe+Le,X=pe+Le,re=_[Q],_[Q]=_[W],_[W]=_[X],_[X]=re,Le+=u;++Z,--Y}else{for(ge=A*q,fe=A*Y,Le=s,le=0;le<x;++le)Q=ge+Le,W=fe+Le,re=_[Q],_[Q]=_[W],_[W]=re,Le+=u;--Y}break}}}}for(ge=A*b,fe=A*(Z-1),Fe=0,Le=s,le=0;le<x;++le)Q=ge+Le,W=fe+Le,_[Q]=_[W],_[W]=dt[Fe],++Fe,Le+=u;for(ge=A*l,fe=A*(Y+1),Fe=0,Le=s,le=0;le<x;++le)Q=ge+Le,W=fe+Le,_[Q]=_[W],_[W]=Dt[Fe],++Fe,Le+=u;if(Z-2-b<=32?g(b,Z-2,_,s,A,m,h,x,u,L,S):c(b,Z-2,_,s,A,m,h,x,u,L,S),l-(Y+2)<=32?g(Y+2,l,_,s,A,m,h,x,u,L,S):c(Y+2,l,_,s,A,m,h,x,u,L,S),j){y(dt),y(Dt);return}if(Z<P&&Y>z){e:for(;;){for(Q=s+Z*A,Fe=0,Le=s,le=0;le<x;++le){if(_[Q]!==dt[Fe])break e;++Fe,Q+=u}++Z}e:for(;;){for(Q=s+Y*A,Fe=0,Le=s,le=0;le<x;++le){if(_[Q]!==Dt[Fe])break e;++Fe,Q+=u}--Y}for(q=Z;q<=Y;++q){Q=s+q*A,Fe=0;e:for(le=0;le<x;++le){if(ee=_[Q]-dt[Fe],ee!==0)break e;Fe+=S,Q+=L}if(ee===0){if(q!==Z)for(ge=A*q,fe=A*Z,Le=s,le=0;le<x;++le)Q=ge+Le,W=fe+Le,re=_[Q],_[Q]=_[W],_[W]=re,Le+=u;++Z}else{Q=s+q*A,Fe=0;e:for(le=0;le<x;++le){if(te=_[Q]-Dt[Fe],te!==0)break e;Fe+=S,Q+=L}if(te===0)for(;;){Q=s+Y*A,Fe=0;e:for(le=0;le<x;++le){if(ie=_[Q]-Dt[Fe],ie!==0)break e;Fe+=S,Q+=L}if(ie===0){if(--Y<q)break;continue}else{Q=s+Y*A,Fe=0;e:for(le=0;le<x;++le){if(ie=_[Q]-dt[Fe],ie!==0)break e;Fe+=S,Q+=L}if(ie<0){for(ge=A*q,fe=A*Z,pe=A*Y,Le=s,le=0;le<x;++le)Q=ge+Le,W=fe+Le,X=pe+Le,re=_[Q],_[Q]=_[W],_[W]=_[X],_[X]=re,Le+=u;++Z,--Y}else{for(ge=A*q,fe=A*Y,Le=s,le=0;le<x;++le)Q=ge+Le,W=fe+Le,re=_[Q],_[Q]=_[W],_[W]=re,Le+=u;--Y}break}}}}}y(dt),y(Dt),Y-Z<=32?g(Z,Y,_,s,A,m,h,x,u,L,S):c(Z,Y,_,s,A,m,h,x,u,L,S)}}};function f(g,p,y){var c=a(p),b=[p,g].join(","),l=t[b];return g.length>1&&c?l(y,c[0],c[1]):l(y)}var o={"uint32,1,0":function(g,p){return function(y){var c=y.data,b=y.offset|0,l=y.shape,_=y.stride,s=_[0]|0,A=l[0]|0,m=_[1]|0,h=l[1]|0,x=m,u=m,L=1;A<=32?g(0,A-1,c,b,s,m,A,h,x,u,L):p(0,A-1,c,b,s,m,A,h,x,u,L)}}};function i(g,p){var y=[p,g].join(","),c=o[y],b=r(g,p),l=f(g,p,b);return c(b,l)}M.exports=i},{"typedarray-pool":308}],258:[function(v,M,T){var e=v("./lib/compile_sort.js"),a={};function n(r){var t=r.order,f=r.dtype,o=[t,f],i=o.join(":"),g=a[i];return g||(a[i]=g=e(t,f)),g(r),r}M.exports=n},{"./lib/compile_sort.js":257}],259:[function(v,M,T){var e=v("is-buffer"),a=typeof Float64Array<"u";function n(p,y){return p[0]-y[0]}function r(){var p=this.stride,y=new Array(p.length),c;for(c=0;c<y.length;++c)y[c]=[Math.abs(p[c]),c];y.sort(n);var b=new Array(y.length);for(c=0;c<b.length;++c)b[c]=y[c][1];return b}var t={T:function(p){function y(b){this.data=b}var c=y.prototype;return c.dtype=p,c.index=function(){return-1},c.size=0,c.dimension=-1,c.shape=c.stride=c.order=[],c.lo=c.hi=c.transpose=c.step=function(){return new y(this.data)},c.get=c.set=function(){},c.pick=function(){return null},function(l){return new y(l)}},0:function(p,y){function c(l,_){this.data=l,this.offset=_}var b=c.prototype;return b.dtype=p,b.index=function(){return this.offset},b.dimension=0,b.size=1,b.shape=b.stride=b.order=[],b.lo=b.hi=b.transpose=b.step=function(){return new c(this.data,this.offset)},b.pick=function(){return y(this.data)},b.valueOf=b.get=function(){return p==="generic"?this.data.get(this.offset):this.data[this.offset]},b.set=function(_){return p==="generic"?this.data.set(this.offset,_):this.data[this.offset]=_},function(_,s,A,m){return new c(_,m)}},1:function(p,y,c){function b(_,s,A,m){this.data=_,this.shape=[s],this.stride=[A],this.offset=m|0}var l=b.prototype;return l.dtype=p,l.dimension=1,Object.defineProperty(l,"size",{get:function(){return this.shape[0]}}),l.order=[0],l.set=function(s,A){return p==="generic"?this.data.set(this.offset+this.stride[0]*s,A):this.data[this.offset+this.stride[0]*s]=A},l.get=function(s){return p==="generic"?this.data.get(this.offset+this.stride[0]*s):this.data[this.offset+this.stride[0]*s]},l.index=function(s){return this.offset+this.stride[0]*s},l.hi=function(s){return new b(this.data,typeof s!="number"||s<0?this.shape[0]:s|0,this.stride[0],this.offset)},l.lo=function(s){var A=this.offset,m=0,h=this.shape[0],x=this.stride[0];return typeof s=="number"&&s>=0&&(m=s|0,A+=x*m,h-=m),new b(this.data,h,x,A)},l.step=function(s){var A=this.shape[0],m=this.stride[0],h=this.offset,x=0,u=Math.ceil;return typeof s=="number"&&(x=s|0,x<0?(h+=m*(A-1),A=u(-A/x)):A=u(A/x),m*=x),new b(this.data,A,m,h)},l.transpose=function(s){s=s===void 0?0:s|0;var A=this.shape,m=this.stride;return new b(this.data,A[s],m[s],this.offset)},l.pick=function(s){var A=[],m=[],h=this.offset;typeof s=="number"&&s>=0?h=h+this.stride[0]*s|0:(A.push(this.shape[0]),m.push(this.stride[0]));var x=y[A.length+1];return x(this.data,A,m,h)},function(s,A,m,h){return new b(s,A[0],m[0],h)}},2:function(p,y,c){function b(_,s,A,m,h,x){this.data=_,this.shape=[s,A],this.stride=[m,h],this.offset=x|0}var l=b.prototype;return l.dtype=p,l.dimension=2,Object.defineProperty(l,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(l,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),l.set=function(s,A,m){return p==="generic"?this.data.set(this.offset+this.stride[0]*s+this.stride[1]*A,m):this.data[this.offset+this.stride[0]*s+this.stride[1]*A]=m},l.get=function(s,A){return p==="generic"?this.data.get(this.offset+this.stride[0]*s+this.stride[1]*A):this.data[this.offset+this.stride[0]*s+this.stride[1]*A]},l.index=function(s,A){return this.offset+this.stride[0]*s+this.stride[1]*A},l.hi=function(s,A){return new b(this.data,typeof s!="number"||s<0?this.shape[0]:s|0,typeof A!="number"||A<0?this.shape[1]:A|0,this.stride[0],this.stride[1],this.offset)},l.lo=function(s,A){var m=this.offset,h=0,x=this.shape[0],u=this.shape[1],L=this.stride[0],S=this.stride[1];return typeof s=="number"&&s>=0&&(h=s|0,m+=L*h,x-=h),typeof A=="number"&&A>=0&&(h=A|0,m+=S*h,u-=h),new b(this.data,x,u,L,S,m)},l.step=function(s,A){var m=this.shape[0],h=this.shape[1],x=this.stride[0],u=this.stride[1],L=this.offset,S=0,k=Math.ceil;return typeof s=="number"&&(S=s|0,S<0?(L+=x*(m-1),m=k(-m/S)):m=k(m/S),x*=S),typeof A=="number"&&(S=A|0,S<0?(L+=u*(h-1),h=k(-h/S)):h=k(h/S),u*=S),new b(this.data,m,h,x,u,L)},l.transpose=function(s,A){s=s===void 0?0:s|0,A=A===void 0?1:A|0;var m=this.shape,h=this.stride;return new b(this.data,m[s],m[A],h[s],h[A],this.offset)},l.pick=function(s,A){var m=[],h=[],x=this.offset;typeof s=="number"&&s>=0?x=x+this.stride[0]*s|0:(m.push(this.shape[0]),h.push(this.stride[0])),typeof A=="number"&&A>=0?x=x+this.stride[1]*A|0:(m.push(this.shape[1]),h.push(this.stride[1]));var u=y[m.length+1];return u(this.data,m,h,x)},function(s,A,m,h){return new b(s,A[0],A[1],m[0],m[1],h)}},3:function(p,y,c){function b(_,s,A,m,h,x,u,L){this.data=_,this.shape=[s,A,m],this.stride=[h,x,u],this.offset=L|0}var l=b.prototype;return l.dtype=p,l.dimension=3,Object.defineProperty(l,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(l,"order",{get:function(){var s=Math.abs(this.stride[0]),A=Math.abs(this.stride[1]),m=Math.abs(this.stride[2]);return s>A?A>m?[2,1,0]:s>m?[1,2,0]:[1,0,2]:s>m?[2,0,1]:m>A?[0,1,2]:[0,2,1]}}),l.set=function(s,A,m,h){return p==="generic"?this.data.set(this.offset+this.stride[0]*s+this.stride[1]*A+this.stride[2]*m,h):this.data[this.offset+this.stride[0]*s+this.stride[1]*A+this.stride[2]*m]=h},l.get=function(s,A,m){return p==="generic"?this.data.get(this.offset+this.stride[0]*s+this.stride[1]*A+this.stride[2]*m):this.data[this.offset+this.stride[0]*s+this.stride[1]*A+this.stride[2]*m]},l.index=function(s,A,m){return this.offset+this.stride[0]*s+this.stride[1]*A+this.stride[2]*m},l.hi=function(s,A,m){return new b(this.data,typeof s!="number"||s<0?this.shape[0]:s|0,typeof A!="number"||A<0?this.shape[1]:A|0,typeof m!="number"||m<0?this.shape[2]:m|0,this.stride[0],this.stride[1],this.stride[2],this.offset)},l.lo=function(s,A,m){var h=this.offset,x=0,u=this.shape[0],L=this.shape[1],S=this.shape[2],k=this.stride[0],P=this.stride[1],z=this.stride[2];return typeof s=="number"&&s>=0&&(x=s|0,h+=k*x,u-=x),typeof A=="number"&&A>=0&&(x=A|0,h+=P*x,L-=x),typeof m=="number"&&m>=0&&(x=m|0,h+=z*x,S-=x),new b(this.data,u,L,S,k,P,z,h)},l.step=function(s,A,m){var h=this.shape[0],x=this.shape[1],u=this.shape[2],L=this.stride[0],S=this.stride[1],k=this.stride[2],P=this.offset,z=0,I=Math.ceil;return typeof s=="number"&&(z=s|0,z<0?(P+=L*(h-1),h=I(-h/z)):h=I(h/z),L*=z),typeof A=="number"&&(z=A|0,z<0?(P+=S*(x-1),x=I(-x/z)):x=I(x/z),S*=z),typeof m=="number"&&(z=m|0,z<0?(P+=k*(u-1),u=I(-u/z)):u=I(u/z),k*=z),new b(this.data,h,x,u,L,S,k,P)},l.transpose=function(s,A,m){s=s===void 0?0:s|0,A=A===void 0?1:A|0,m=m===void 0?2:m|0;var h=this.shape,x=this.stride;return new b(this.data,h[s],h[A],h[m],x[s],x[A],x[m],this.offset)},l.pick=function(s,A,m){var h=[],x=[],u=this.offset;typeof s=="number"&&s>=0?u=u+this.stride[0]*s|0:(h.push(this.shape[0]),x.push(this.stride[0])),typeof A=="number"&&A>=0?u=u+this.stride[1]*A|0:(h.push(this.shape[1]),x.push(this.stride[1])),typeof m=="number"&&m>=0?u=u+this.stride[2]*m|0:(h.push(this.shape[2]),x.push(this.stride[2]));var L=y[h.length+1];return L(this.data,h,x,u)},function(s,A,m,h){return new b(s,A[0],A[1],A[2],m[0],m[1],m[2],h)}},4:function(p,y,c){function b(_,s,A,m,h,x,u,L,S,k){this.data=_,this.shape=[s,A,m,h],this.stride=[x,u,L,S],this.offset=k|0}var l=b.prototype;return l.dtype=p,l.dimension=4,Object.defineProperty(l,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(l,"order",{get:c}),l.set=function(s,A,m,h,x){return p==="generic"?this.data.set(this.offset+this.stride[0]*s+this.stride[1]*A+this.stride[2]*m+this.stride[3]*h,x):this.data[this.offset+this.stride[0]*s+this.stride[1]*A+this.stride[2]*m+this.stride[3]*h]=x},l.get=function(s,A,m,h){return p==="generic"?this.data.get(this.offset+this.stride[0]*s+this.stride[1]*A+this.stride[2]*m+this.stride[3]*h):this.data[this.offset+this.stride[0]*s+this.stride[1]*A+this.stride[2]*m+this.stride[3]*h]},l.index=function(s,A,m,h){return this.offset+this.stride[0]*s+this.stride[1]*A+this.stride[2]*m+this.stride[3]*h},l.hi=function(s,A,m,h){return new b(this.data,typeof s!="number"||s<0?this.shape[0]:s|0,typeof A!="number"||A<0?this.shape[1]:A|0,typeof m!="number"||m<0?this.shape[2]:m|0,typeof h!="number"||h<0?this.shape[3]:h|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},l.lo=function(s,A,m,h){var x=this.offset,u=0,L=this.shape[0],S=this.shape[1],k=this.shape[2],P=this.shape[3],z=this.stride[0],I=this.stride[1],D=this.stride[2],R=this.stride[3];return typeof s=="number"&&s>=0&&(u=s|0,x+=z*u,L-=u),typeof A=="number"&&A>=0&&(u=A|0,x+=I*u,S-=u),typeof m=="number"&&m>=0&&(u=m|0,x+=D*u,k-=u),typeof h=="number"&&h>=0&&(u=h|0,x+=R*u,P-=u),new b(this.data,L,S,k,P,z,I,D,R,x)},l.step=function(s,A,m,h){var x=this.shape[0],u=this.shape[1],L=this.shape[2],S=this.shape[3],k=this.stride[0],P=this.stride[1],z=this.stride[2],I=this.stride[3],D=this.offset,R=0,O=Math.ceil;return typeof s=="number"&&(R=s|0,R<0?(D+=k*(x-1),x=O(-x/R)):x=O(x/R),k*=R),typeof A=="number"&&(R=A|0,R<0?(D+=P*(u-1),u=O(-u/R)):u=O(u/R),P*=R),typeof m=="number"&&(R=m|0,R<0?(D+=z*(L-1),L=O(-L/R)):L=O(L/R),z*=R),typeof h=="number"&&(R=h|0,R<0?(D+=I*(S-1),S=O(-S/R)):S=O(S/R),I*=R),new b(this.data,x,u,L,S,k,P,z,I,D)},l.transpose=function(s,A,m,h){s=s===void 0?0:s|0,A=A===void 0?1:A|0,m=m===void 0?2:m|0,h=h===void 0?3:h|0;var x=this.shape,u=this.stride;return new b(this.data,x[s],x[A],x[m],x[h],u[s],u[A],u[m],u[h],this.offset)},l.pick=function(s,A,m,h){var x=[],u=[],L=this.offset;typeof s=="number"&&s>=0?L=L+this.stride[0]*s|0:(x.push(this.shape[0]),u.push(this.stride[0])),typeof A=="number"&&A>=0?L=L+this.stride[1]*A|0:(x.push(this.shape[1]),u.push(this.stride[1])),typeof m=="number"&&m>=0?L=L+this.stride[2]*m|0:(x.push(this.shape[2]),u.push(this.stride[2])),typeof h=="number"&&h>=0?L=L+this.stride[3]*h|0:(x.push(this.shape[3]),u.push(this.stride[3]));var S=y[x.length+1];return S(this.data,x,u,L)},function(s,A,m,h){return new b(s,A[0],A[1],A[2],A[3],m[0],m[1],m[2],m[3],h)}},5:function(y,c,b){function l(s,A,m,h,x,u,L,S,k,P,z,I){this.data=s,this.shape=[A,m,h,x,u],this.stride=[L,S,k,P,z],this.offset=I|0}var _=l.prototype;return _.dtype=y,_.dimension=5,Object.defineProperty(_,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(_,"order",{get:b}),_.set=function(A,m,h,x,u,L){return y==="generic"?this.data.set(this.offset+this.stride[0]*A+this.stride[1]*m+this.stride[2]*h+this.stride[3]*x+this.stride[4]*u,L):this.data[this.offset+this.stride[0]*A+this.stride[1]*m+this.stride[2]*h+this.stride[3]*x+this.stride[4]*u]=L},_.get=function(A,m,h,x,u){return y==="generic"?this.data.get(this.offset+this.stride[0]*A+this.stride[1]*m+this.stride[2]*h+this.stride[3]*x+this.stride[4]*u):this.data[this.offset+this.stride[0]*A+this.stride[1]*m+this.stride[2]*h+this.stride[3]*x+this.stride[4]*u]},_.index=function(A,m,h,x,u){return this.offset+this.stride[0]*A+this.stride[1]*m+this.stride[2]*h+this.stride[3]*x+this.stride[4]*u},_.hi=function(A,m,h,x,u){return new l(this.data,typeof A!="number"||A<0?this.shape[0]:A|0,typeof m!="number"||m<0?this.shape[1]:m|0,typeof h!="number"||h<0?this.shape[2]:h|0,typeof x!="number"||x<0?this.shape[3]:x|0,typeof u!="number"||u<0?this.shape[4]:u|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},_.lo=function(A,m,h,x,u){var L=this.offset,S=0,k=this.shape[0],P=this.shape[1],z=this.shape[2],I=this.shape[3],D=this.shape[4],R=this.stride[0],O=this.stride[1],F=this.stride[2],V=this.stride[3],G=this.stride[4];return typeof A=="number"&&A>=0&&(S=A|0,L+=R*S,k-=S),typeof m=="number"&&m>=0&&(S=m|0,L+=O*S,P-=S),typeof h=="number"&&h>=0&&(S=h|0,L+=F*S,z-=S),typeof x=="number"&&x>=0&&(S=x|0,L+=V*S,I-=S),typeof u=="number"&&u>=0&&(S=u|0,L+=G*S,D-=S),new l(this.data,k,P,z,I,D,R,O,F,V,G,L)},_.step=function(A,m,h,x,u){var L=this.shape[0],S=this.shape[1],k=this.shape[2],P=this.shape[3],z=this.shape[4],I=this.stride[0],D=this.stride[1],R=this.stride[2],O=this.stride[3],F=this.stride[4],V=this.offset,G=0,J=Math.ceil;return typeof A=="number"&&(G=A|0,G<0?(V+=I*(L-1),L=J(-L/G)):L=J(L/G),I*=G),typeof m=="number"&&(G=m|0,G<0?(V+=D*(S-1),S=J(-S/G)):S=J(S/G),D*=G),typeof h=="number"&&(G=h|0,G<0?(V+=R*(k-1),k=J(-k/G)):k=J(k/G),R*=G),typeof x=="number"&&(G=x|0,G<0?(V+=O*(P-1),P=J(-P/G)):P=J(P/G),O*=G),typeof u=="number"&&(G=u|0,G<0?(V+=F*(z-1),z=J(-z/G)):z=J(z/G),F*=G),new l(this.data,L,S,k,P,z,I,D,R,O,F,V)},_.transpose=function(A,m,h,x,u){A=A===void 0?0:A|0,m=m===void 0?1:m|0,h=h===void 0?2:h|0,x=x===void 0?3:x|0,u=u===void 0?4:u|0;var L=this.shape,S=this.stride;return new l(this.data,L[A],L[m],L[h],L[x],L[u],S[A],S[m],S[h],S[x],S[u],this.offset)},_.pick=function(A,m,h,x,u){var L=[],S=[],k=this.offset;typeof A=="number"&&A>=0?k=k+this.stride[0]*A|0:(L.push(this.shape[0]),S.push(this.stride[0])),typeof m=="number"&&m>=0?k=k+this.stride[1]*m|0:(L.push(this.shape[1]),S.push(this.stride[1])),typeof h=="number"&&h>=0?k=k+this.stride[2]*h|0:(L.push(this.shape[2]),S.push(this.stride[2])),typeof x=="number"&&x>=0?k=k+this.stride[3]*x|0:(L.push(this.shape[3]),S.push(this.stride[3])),typeof u=="number"&&u>=0?k=k+this.stride[4]*u|0:(L.push(this.shape[4]),S.push(this.stride[4]));var P=c[L.length+1];return P(this.data,L,S,k)},function(A,m,h,x){return new l(A,m[0],m[1],m[2],m[3],m[4],h[0],h[1],h[2],h[3],h[4],x)}}};function f(p,y){var c=y===-1?"T":String(y),b=t[c];return y===-1?b(p):y===0?b(p,i[p][0]):b(p,i[p],r)}function o(p){if(e(p))return"buffer";if(a)switch(Object.prototype.toString.call(p)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(p)?"array":"generic"}var i={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};function g(p,y,c,b){if(p===void 0){var h=i.array[0];return h([])}else typeof p=="number"&&(p=[p]);y===void 0&&(y=[p.length]);var l=y.length;if(c===void 0){c=new Array(l);for(var _=l-1,s=1;_>=0;--_)c[_]=s,s*=y[_]}if(b===void 0){b=0;for(var _=0;_<l;++_)c[_]<0&&(b-=(y[_]-1)*c[_])}for(var A=o(p),m=i[A];m.length<=l+1;)m.push(f(A,m.length-1));var h=m[l+1];return h(p,y,c,b)}M.exports=g},{"is-buffer":237}],260:[function(v,M,T){var e=v("double-bits"),a=Math.pow(2,-1074),n=-1>>>0;M.exports=r;function r(t,f){if(isNaN(t)||isNaN(f))return NaN;if(t===f)return t;if(t===0)return f<0?-a:a;var o=e.hi(t),i=e.lo(t);return f>t==t>0?i===n?(o+=1,i=0):i+=1:i===0?(i=n,o-=1):i-=1,e.pack(i,o)}},{"double-bits":64}],261:[function(v,M,T){var e=1e-6,a=1e-6;T.vertexNormals=function(n,r,t){for(var f=r.length,o=new Array(f),i=t===void 0?e:t,g=0;g<f;++g)o[g]=[0,0,0];for(var g=0;g<n.length;++g)for(var p=n[g],y=0,c=p[p.length-1],b=p[0],l=0;l<p.length;++l){y=c,c=b,b=p[(l+1)%p.length];for(var _=r[y],s=r[c],A=r[b],m=new Array(3),h=0,x=new Array(3),u=0,L=0;L<3;++L)m[L]=_[L]-s[L],h+=m[L]*m[L],x[L]=A[L]-s[L],u+=x[L]*x[L];if(h*u>i)for(var S=o[c],k=1/Math.sqrt(h*u),L=0;L<3;++L){var P=(L+1)%3,z=(L+2)%3;S[L]+=k*(x[P]*m[z]-x[z]*m[P])}}for(var g=0;g<f;++g){for(var S=o[g],I=0,L=0;L<3;++L)I+=S[L]*S[L];if(I>i)for(var k=1/Math.sqrt(I),L=0;L<3;++L)S[L]*=k;else for(var L=0;L<3;++L)S[L]=0}return o},T.faceNormals=function(n,r,t){for(var f=n.length,o=new Array(f),i=t===void 0?a:t,g=0;g<f;++g){for(var p=n[g],y=new Array(3),c=0;c<3;++c)y[c]=r[p[c]];for(var b=new Array(3),l=new Array(3),c=0;c<3;++c)b[c]=y[1][c]-y[0][c],l[c]=y[2][c]-y[0][c];for(var _=new Array(3),s=0,c=0;c<3;++c){var A=(c+1)%3,m=(c+2)%3;_[c]=b[A]*l[m]-b[m]*l[A],s+=_[c]*_[c]}s>i?s=1/Math.sqrt(s):s=0;for(var c=0;c<3;++c)_[c]*=s;o[g]=_}return o}},{}],262:[function(v,M,T){M.exports=e;function e(a,n,r,t,f,o,i,g,p,y){var c=n+o+y;if(b>0){var b=Math.sqrt(c+1);a[0]=.5*(i-p)/b,a[1]=.5*(g-t)/b,a[2]=.5*(r-o)/b,a[3]=.5*b}else{var l=Math.max(n,o,y),b=Math.sqrt(2*l-c+1);n>=l?(a[0]=.5*b,a[1]=.5*(f+r)/b,a[2]=.5*(g+t)/b,a[3]=.5*(i-p)/b):o>=l?(a[0]=.5*(r+f)/b,a[1]=.5*b,a[2]=.5*(p+i)/b,a[3]=.5*(g-t)/b):(a[0]=.5*(t+g)/b,a[1]=.5*(i+p)/b,a[2]=.5*b,a[3]=.5*(r-f)/b)}return a}},{}],263:[function(v,M,T){M.exports=y;var e=v("filtered-vector"),a=v("gl-mat4/lookAt"),n=v("gl-mat4/fromQuat"),r=v("gl-mat4/invert"),t=v("./lib/quatFromFrame");function f(c,b,l){return Math.sqrt(Math.pow(c,2)+Math.pow(b,2)+Math.pow(l,2))}function o(c,b,l,_){return Math.sqrt(Math.pow(c,2)+Math.pow(b,2)+Math.pow(l,2)+Math.pow(_,2))}function i(c,b){var l=b[0],_=b[1],s=b[2],A=b[3],m=o(l,_,s,A);m>1e-6?(c[0]=l/m,c[1]=_/m,c[2]=s/m,c[3]=A/m):(c[0]=c[1]=c[2]=0,c[3]=1)}function g(c,b,l){this.radius=e([l]),this.center=e(b),this.rotation=e(c),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var p=g.prototype;p.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},p.recalcMatrix=function(c){this.radius.curve(c),this.center.curve(c),this.rotation.curve(c);var b=this.computedRotation;i(b,b);var l=this.computedMatrix;n(l,b);var _=this.computedCenter,s=this.computedEye,A=this.computedUp,m=Math.exp(this.computedRadius[0]);s[0]=_[0]+m*l[2],s[1]=_[1]+m*l[6],s[2]=_[2]+m*l[10],A[0]=l[1],A[1]=l[5],A[2]=l[9];for(var h=0;h<3;++h){for(var x=0,u=0;u<3;++u)x+=l[h+4*u]*s[u];l[12+h]=-x}},p.getMatrix=function(c,b){this.recalcMatrix(c);var l=this.computedMatrix;if(b){for(var _=0;_<16;++_)b[_]=l[_];return b}return l},p.idle=function(c){this.center.idle(c),this.radius.idle(c),this.rotation.idle(c)},p.flush=function(c){this.center.flush(c),this.radius.flush(c),this.rotation.flush(c)},p.pan=function(c,b,l,_){b=b||0,l=l||0,_=_||0,this.recalcMatrix(c);var s=this.computedMatrix,A=s[1],m=s[5],h=s[9],x=f(A,m,h);A/=x,m/=x,h/=x;var u=s[0],L=s[4],S=s[8],k=u*A+L*m+S*h;u-=A*k,L-=m*k,S-=h*k;var P=f(u,L,S);u/=P,L/=P,S/=P,s[2],s[6],s[10];var z=u*b+A*l,I=L*b+m*l,D=S*b+h*l;this.center.move(c,z,I,D);var R=Math.exp(this.computedRadius[0]);R=Math.max(1e-4,R+_),this.radius.set(c,Math.log(R))},p.rotate=function(c,b,l,_){this.recalcMatrix(c),b=b||0,l=l||0;var s=this.computedMatrix,A=s[0],m=s[4],h=s[8],x=s[1],u=s[5],L=s[9],S=s[2],k=s[6],P=s[10],z=b*A+l*x,I=b*m+l*u,D=b*h+l*L,R=-(k*D-P*I),O=-(P*z-S*D),F=-(S*I-k*z),V=Math.sqrt(Math.max(0,1-Math.pow(R,2)-Math.pow(O,2)-Math.pow(F,2))),G=o(R,O,F,V);G>1e-6?(R/=G,O/=G,F/=G,V/=G):(R=O=F=0,V=1);var J=this.computedRotation,Z=J[0],Y=J[1],j=J[2],re=J[3],se=Z*V+re*R+Y*F-j*O,oe=Y*V+re*O+j*R-Z*F,N=j*V+re*F+Z*O-Y*R,U=re*V-Z*R-Y*O-j*F;if(_){R=S,O=k,F=P;var q=Math.sin(_)/f(R,O,F);R*=q,O*=q,F*=q,V=Math.cos(b),se=se*V+U*R+oe*F-N*O,oe=oe*V+U*O+N*R-se*F,N=N*V+U*F+se*O-oe*R,U=U*V-se*R-oe*O-N*F}var Q=o(se,oe,N,U);Q>1e-6?(se/=Q,oe/=Q,N/=Q,U/=Q):(se=oe=N=0,U=1),this.rotation.set(c,se,oe,N,U)},p.lookAt=function(c,b,l,_){this.recalcMatrix(c),l=l||this.computedCenter,b=b||this.computedEye,_=_||this.computedUp;var s=this.computedMatrix;a(s,b,l,_);var A=this.computedRotation;t(A,s[0],s[1],s[2],s[4],s[5],s[6],s[8],s[9],s[10]),i(A,A),this.rotation.set(c,A[0],A[1],A[2],A[3]);for(var m=0,h=0;h<3;++h)m+=Math.pow(l[h]-b[h],2);this.radius.set(c,.5*Math.log(Math.max(m,1e-6))),this.center.set(c,l[0],l[1],l[2])},p.translate=function(c,b,l,_){this.center.move(c,b||0,l||0,_||0)},p.setMatrix=function(c,b){var l=this.computedRotation;t(l,b[0],b[1],b[2],b[4],b[5],b[6],b[8],b[9],b[10]),i(l,l),this.rotation.set(c,l[0],l[1],l[2],l[3]);var _=this.computedMatrix;r(_,b);var s=_[15];if(Math.abs(s)>1e-6){var A=_[12]/s,m=_[13]/s,h=_[14]/s;this.recalcMatrix(c);var x=Math.exp(this.computedRadius[0]);this.center.set(c,A-_[2]*x,m-_[6]*x,h-_[10]*x),this.radius.idle(c)}else this.center.idle(c),this.radius.idle(c)},p.setDistance=function(c,b){b>0&&this.radius.set(c,Math.log(b))},p.setDistanceLimits=function(c,b){c>0?c=Math.log(c):c=-1/0,b>0?b=Math.log(b):b=1/0,b=Math.max(b,c),this.radius.bounds[0][0]=c,this.radius.bounds[1][0]=b},p.getDistanceLimits=function(c){var b=this.radius.bounds;return c?(c[0]=Math.exp(b[0][0]),c[1]=Math.exp(b[1][0]),c):[Math.exp(b[0][0]),Math.exp(b[1][0])]},p.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},p.fromJSON=function(c){var b=this.lastT(),l=c.center;l&&this.center.set(b,l[0],l[1],l[2]);var _=c.rotation;_&&this.rotation.set(b,_[0],_[1],_[2],_[3]);var s=c.distance;s&&s>0&&this.radius.set(b,Math.log(s)),this.setDistanceLimits(c.zoomMin,c.zoomMax)};function y(c){c=c||{};var b=c.center||[0,0,0],l=c.rotation||[0,0,0,1],_=c.radius||1;b=[].slice.call(b,0,3),l=[].slice.call(l,0,4),i(l,l);var s=new g(l,b,Math.log(_));return s.setDistanceLimits(c.zoomMin,c.zoomMax),("eye"in c||"up"in c)&&s.lookAt(0,c.eye,c.center,c.up),s}},{"./lib/quatFromFrame":262,"filtered-vector":68,"gl-mat4/fromQuat":95,"gl-mat4/invert":98,"gl-mat4/lookAt":99}],264:[function(v,M,T){var e=v("repeat-string");M.exports=function(n,r,t){return t=typeof t<"u"?t+"":" ",e(t,r)+n}},{"repeat-string":277}],265:[function(v,M,T){M.exports=function(a,n){n||(n=[0,""]),a=String(a);var r=parseFloat(a,10);return n[0]=r,n[1]=a.match(/[\d.\-\+]*\s*(.*)/)[1]||"",n}},{}],266:[function(v,M,T){M.exports=a;var e=v("compare-angle");function a(n,r){for(var t=r.length|0,f=n.length,o=[new Array(t),new Array(t)],i=0;i<t;++i)o[0][i]=[],o[1][i]=[];for(var i=0;i<f;++i){var g=n[i];o[0][g[0]].push(g),o[1][g[1]].push(g)}for(var p=[],i=0;i<t;++i)o[0][i].length+o[1][i].length===0&&p.push([i]);function y(m,h){var x=o[h][m[h]];x.splice(x.indexOf(m),1)}function c(m,h,x){for(var u,L,S,k=0;k<2;++k)if(o[k][h].length>0){u=o[k][h][0],S=k;break}L=u[S^1];for(var P=0;P<2;++P)for(var z=o[P][h],I=0;I<z.length;++I){var D=z[I],R=D[P^1],O=e(r[m],r[h],r[L],r[R]);O>0&&(u=D,L=R,S=P)}return x||u&&y(u,S),L}function b(m,h){var x=o[h][m][0],u=[m];y(x,h);for(var L=x[h^1];;){for(;L!==m;)u.push(L),L=c(u[u.length-2],L,!1);if(o[0][m].length+o[1][m].length===0)break;var S=u[u.length-1],k=m,P=u[1],z=c(S,k,!0);if(e(r[S],r[k],r[P],r[z])<0)break;u.push(m),L=c(S,k)}return u}function l(m,h){return h[1]===h[h.length-1]}for(var i=0;i<t;++i)for(var _=0;_<2;++_){for(var s=[];o[_][i].length>0;){o[0][i].length;var A=b(i,_);l(s,A)?s.push.apply(s,A):(s.length>0&&p.push(s),s=A)}s.length>0&&p.push(s)}return p}},{"compare-angle":54}],267:[function(v,M,T){M.exports=a;var e=v("edges-to-adjacency-list");function a(n,r){for(var t=e(n,r.length),f=new Array(r.length),o=new Array(r.length),i=[],g=0;g<r.length;++g){var p=t[g].length;o[g]=p,f[g]=!0,p<=1&&i.push(g)}for(;i.length>0;){var y=i.pop();f[y]=!1;for(var c=t[y],g=0;g<c.length;++g){var b=c[g];--o[b]===0&&i.push(b)}}for(var l=new Array(r.length),_=[],g=0;g<r.length;++g)if(f[g]){var y=_.length;l[g]=y,_.push(r[g])}else l[g]=-1;for(var s=[],g=0;g<n.length;++g){var A=n[g];f[A[0]]&&f[A[1]]&&s.push([l[A[0]],l[A[1]]])}return[s,_]}},{"edges-to-adjacency-list":66}],268:[function(v,M,T){M.exports=p;var e=v("edges-to-adjacency-list"),a=v("planar-dual"),n=v("point-in-big-polygon"),r=v("two-product"),t=v("robust-sum"),f=v("uniq"),o=v("./lib/trim-leaves");function i(y,c){for(var b=new Array(y),l=0;l<y;++l)b[l]=c;return b}function g(y){for(var c=new Array(y),b=0;b<y;++b)c[b]=[];return c}function p(y,c){var U=o(y,c);y=U[0],c=U[1];var b=c.length;y.length;for(var l=e(y,c.length),_=0;_<b;++_)if(l[_].length%2===1)throw new Error("planar-graph-to-polyline: graph must be manifold");var s=a(y,c);function A(ie){for(var le=ie.length,ge=[0],fe=0;fe<le;++fe){var pe=c[ie[fe]],ye=c[ie[(fe+1)%le]],Te=r(-pe[0],pe[1]),_e=r(-pe[0],ye[1]),De=r(ye[0],pe[1]),Be=r(ye[0],ye[1]);ge=t(ge,t(t(Te,_e),t(De,Be)))}return ge[ge.length-1]>0}s=s.filter(A);for(var m=s.length,h=new Array(m),x=new Array(m),_=0;_<m;++_){h[_]=_;var u=new Array(m),L=s[_].map(function(le){return c[le]}),S=n([L]),k=0;e:for(var P=0;P<m;++P)if(u[P]=0,_!==P){for(var z=s[P],I=z.length,D=0;D<I;++D){var R=S(c[z[D]]);if(R!==0){R<0&&(u[P]=1,k+=1);continue e}}u[P]=1,k+=1}x[_]=[k,_,u]}x.sort(function(ie,le){return le[0]-ie[0]});for(var _=0;_<m;++_)for(var u=x[_],O=u[1],F=u[2],P=0;P<m;++P)F[P]&&(h[P]=O);for(var V=g(m),_=0;_<m;++_)V[_].push(h[_]),V[h[_]].push(_);for(var G={},J=i(b,!1),_=0;_<m;++_)for(var z=s[_],I=z.length,P=0;P<I;++P){var Z=z[P],Y=z[(P+1)%I],j=Math.min(Z,Y)+":"+Math.max(Z,Y);if(j in G){var re=G[j];V[re].push(_),V[_].push(re),J[Z]=J[Y]=!0}else G[j]=_}function se(ie){for(var le=ie.length,ge=0;ge<le;++ge)if(!J[ie[ge]])return!1;return!0}for(var oe=[],N=i(m,-1),_=0;_<m;++_)h[_]===_&&!se(s[_])?(oe.push(_),N[_]=0):N[_]=-1;for(var U=[];oe.length>0;){var q=oe.pop(),Q=V[q];f(Q,function(ie,le){return ie-le});var W=Q.length,X=N[q],ee;if(X===0){var z=s[q];ee=[z]}for(var _=0;_<W;++_){var te=Q[_];if(!(N[te]>=0)&&(N[te]=X^1,oe.push(te),X===0)){var z=s[te];se(z)||(z.reverse(),ee.push(z))}}X===0&&U.push(ee)}return U}},{"./lib/trim-leaves":267,"edges-to-adjacency-list":66,"planar-dual":266,"point-in-big-polygon":269,"robust-sum":289,"two-product":306,uniq:310}],269:[function(v,M,T){M.exports=c;var e=v("robust-orientation")[3],a=v("slab-decomposition"),n=v("interval-tree-1d"),r=v("binary-search-bounds");function t(){return!0}function f(b){return function(l,_){var s=b[l];return s?!!s.queryPoint(_,t):!1}}function o(b){for(var l={},_=0;_<b.length;++_){var s=b[_],A=s[0][0],m=s[0][1],h=s[1][1],x=[Math.min(m,h),Math.max(m,h)];A in l?l[A].push(x):l[A]=[x]}for(var u={},L=Object.keys(l),_=0;_<L.length;++_){var S=l[L[_]];u[L[_]]=n(S)}return f(u)}function i(b,l){return function(_){var s=r.le(l,_[0]);if(s<0)return 1;var A=b[s];if(!A)if(s>0&&l[s]===_[0])A=b[s-1];else return 1;for(var m=1;A;){var h=A.key,x=e(_,h[0],h[1]);if(h[0][0]<h[1][0])if(x<0)A=A.left;else if(x>0)m=-1,A=A.right;else return 0;else if(x>0)A=A.left;else if(x<0)m=1,A=A.right;else return 0}return m}}function g(b){return 1}function p(b){return function(_){return b(_[0],_[1])?0:1}}function y(b,l){return function(s){return b(s[0],s[1])?0:l(s)}}function c(b){for(var l=b.length,_=[],s=[],A=0;A<l;++A)for(var m=b[A],h=m.length,x=h-1,u=0;u<h;x=u++){var L=m[x],S=m[u];L[0]===S[0]?s.push([L,S]):_.push([L,S])}if(_.length===0)return s.length===0?g:p(o(s));var k=a(_),P=i(k.slabs,k.coordinates);return s.length===0?P:y(o(s),P)}},{"binary-search-bounds":31,"interval-tree-1d":234,"robust-orientation":284,"slab-decomposition":299}],270:[function(v,M,T){var e=new Float64Array(4),a=new Float64Array(4),n=new Float64Array(4);function r(t,f,o,i,g){e.length<i.length&&(e=new Float64Array(i.length),a=new Float64Array(i.length),n=new Float64Array(i.length));for(var p=0;p<i.length;++p)e[p]=t[p]-i[p],a[p]=f[p]-t[p],n[p]=o[p]-t[p];for(var y=0,c=0,b=0,l=0,_=0,s=0,p=0;p<i.length;++p){var A=a[p],m=n[p],h=e[p];y+=A*A,c+=A*m,b+=m*m,l+=h*A,_+=h*m,s+=h*h}var x=Math.abs(y*b-c*c),u=c*_-b*l,L=c*l-y*_,S;if(u+L<=x)if(u<0)L<0&&l<0?(L=0,-l>=y?(u=1,S=y+2*l+s):(u=-l/y,S=l*u+s)):(u=0,_>=0?(L=0,S=s):-_>=b?(L=1,S=b+2*_+s):(L=-_/b,S=_*L+s));else if(L<0)L=0,l>=0?(u=0,S=s):-l>=y?(u=1,S=y+2*l+s):(u=-l/y,S=l*u+s);else{var k=1/x;u*=k,L*=k,S=u*(y*u+c*L+2*l)+L*(c*u+b*L+2*_)+s}else{var P,z,I,D;u<0?(P=c+l,z=b+_,z>P?(I=z-P,D=y-2*c+b,I>=D?(u=1,L=0,S=y+2*l+s):(u=I/D,L=1-u,S=u*(y*u+c*L+2*l)+L*(c*u+b*L+2*_)+s)):(u=0,z<=0?(L=1,S=b+2*_+s):_>=0?(L=0,S=s):(L=-_/b,S=_*L+s))):L<0?(P=c+_,z=y+l,z>P?(I=z-P,D=y-2*c+b,I>=D?(L=1,u=0,S=b+2*_+s):(L=I/D,u=1-L,S=u*(y*u+c*L+2*l)+L*(c*u+b*L+2*_)+s)):(L=0,z<=0?(u=1,S=y+2*l+s):l>=0?(u=0,S=s):(u=-l/y,S=l*u+s))):(I=b+_-c-l,I<=0?(u=0,L=1,S=b+2*_+s):(D=y-2*c+b,I>=D?(u=1,L=0,S=y+2*l+s):(u=I/D,L=1-u,S=u*(y*u+c*L+2*l)+L*(c*u+b*L+2*_)+s)))}for(var R=1-u-L,p=0;p<i.length;++p)g[p]=R*t[p]+u*f[p]+L*o[p];return S<0?0:S}M.exports=r},{}],271:[function(v,M,T){M.exports=v("gl-quat/slerp")},{"gl-quat/slerp":124}],272:[function(v,M,T){var e=v("big-rat/add");M.exports=a;function a(n,r){for(var t=n.length,f=new Array(t),o=0;o<t;++o)f[o]=e(n[o],r[o]);return f}},{"big-rat/add":15}],273:[function(v,M,T){M.exports=a;var e=v("big-rat");function a(n){for(var r=new Array(n.length),t=0;t<n.length;++t)r[t]=e(n[t]);return r}},{"big-rat":18}],274:[function(v,M,T){var e=v("big-rat"),a=v("big-rat/mul");M.exports=n;function n(r,t){for(var f=e(t),o=r.length,i=new Array(o),g=0;g<o;++g)i[g]=a(r[g],f);return i}},{"big-rat":18,"big-rat/mul":27}],275:[function(v,M,T){var e=v("big-rat/sub");M.exports=a;function a(n,r){for(var t=n.length,f=new Array(t),o=0;o<t;++o)f[o]=e(n[o],r[o]);return f}},{"big-rat/sub":29}],276:[function(v,M,T){var e=v("compare-cell"),a=v("compare-oriented-cell"),n=v("cell-orientation");M.exports=r;function r(t){t.sort(a);for(var f=t.length,o=0,i=0;i<f;++i){var g=t[i],p=n(g);if(p!==0){if(o>0){var y=t[o-1];if(e(g,y)===0&&n(y)!==p){o-=1;continue}}t[o++]=g}}return t.length=o,t}},{"cell-orientation":47,"compare-cell":56,"compare-oriented-cell":57}],277:[function(v,M,T){var e="",a;M.exports=n;function n(r,t){if(typeof r!="string")throw new TypeError("expected a string");if(t===1)return r;if(t===2)return r+r;var f=r.length*t;if(a!==r||typeof a>"u")a=r,e="";else if(e.length>=f)return e.substr(0,f);for(;f>e.length&&t>1;)t&1&&(e+=r),t>>=1,r+=r;return e+=r,e=e.substr(0,f),e}},{}],278:[function(v,M,T){(function(e){(function(){M.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,typeof w<"u"?w:typeof self<"u"?self:typeof window<"u"?window:{})},{}],279:[function(v,M,T){M.exports=e;function e(a){for(var n=a.length,r=a[a.length-1],t=n,f=n-2;f>=0;--f){var o=r,i=a[f];r=o+i;var g=r-o,p=i-g;p&&(a[--t]=r,r=p)}for(var y=0,f=t;f<n;++f){var o=a[f],i=r;r=o+i;var g=r-o,p=i-g;p&&(a[y++]=p)}return a[y++]=r,a.length=y,a}},{}],280:[function(v,M,T){var e=v("two-product"),a=v("robust-sum"),n=v("robust-scale"),r=v("robust-compress"),t=6;function f(l,_,s,A){return function(h){return A(l(s(h[0][0],h[1][1]),s(-h[0][1],h[1][0])))}}function o(l,_,s,A){return function(h){return A(l(_(l(s(h[1][1],h[2][2]),s(-h[1][2],h[2][1])),h[0][0]),l(_(l(s(h[1][0],h[2][2]),s(-h[1][2],h[2][0])),-h[0][1]),_(l(s(h[1][0],h[2][1]),s(-h[1][1],h[2][0])),h[0][2]))))}}function i(l,_,s,A){return function(h){return A(l(l(_(l(_(l(s(h[2][2],h[3][3]),s(-h[2][3],h[3][2])),h[1][1]),l(_(l(s(h[2][1],h[3][3]),s(-h[2][3],h[3][1])),-h[1][2]),_(l(s(h[2][1],h[3][2]),s(-h[2][2],h[3][1])),h[1][3]))),h[0][0]),_(l(_(l(s(h[2][2],h[3][3]),s(-h[2][3],h[3][2])),h[1][0]),l(_(l(s(h[2][0],h[3][3]),s(-h[2][3],h[3][0])),-h[1][2]),_(l(s(h[2][0],h[3][2]),s(-h[2][2],h[3][0])),h[1][3]))),-h[0][1])),l(_(l(_(l(s(h[2][1],h[3][3]),s(-h[2][3],h[3][1])),h[1][0]),l(_(l(s(h[2][0],h[3][3]),s(-h[2][3],h[3][0])),-h[1][1]),_(l(s(h[2][0],h[3][1]),s(-h[2][1],h[3][0])),h[1][3]))),h[0][2]),_(l(_(l(s(h[2][1],h[3][2]),s(-h[2][2],h[3][1])),h[1][0]),l(_(l(s(h[2][0],h[3][2]),s(-h[2][2],h[3][0])),-h[1][1]),_(l(s(h[2][0],h[3][1]),s(-h[2][1],h[3][0])),h[1][2]))),-h[0][3]))))}}function g(l,_,s,A){return function(h){return A(l(l(_(l(l(_(l(_(l(s(h[3][3],h[4][4]),s(-h[3][4],h[4][3])),h[2][2]),l(_(l(s(h[3][2],h[4][4]),s(-h[3][4],h[4][2])),-h[2][3]),_(l(s(h[3][2],h[4][3]),s(-h[3][3],h[4][2])),h[2][4]))),h[1][1]),_(l(_(l(s(h[3][3],h[4][4]),s(-h[3][4],h[4][3])),h[2][1]),l(_(l(s(h[3][1],h[4][4]),s(-h[3][4],h[4][1])),-h[2][3]),_(l(s(h[3][1],h[4][3]),s(-h[3][3],h[4][1])),h[2][4]))),-h[1][2])),l(_(l(_(l(s(h[3][2],h[4][4]),s(-h[3][4],h[4][2])),h[2][1]),l(_(l(s(h[3][1],h[4][4]),s(-h[3][4],h[4][1])),-h[2][2]),_(l(s(h[3][1],h[4][2]),s(-h[3][2],h[4][1])),h[2][4]))),h[1][3]),_(l(_(l(s(h[3][2],h[4][3]),s(-h[3][3],h[4][2])),h[2][1]),l(_(l(s(h[3][1],h[4][3]),s(-h[3][3],h[4][1])),-h[2][2]),_(l(s(h[3][1],h[4][2]),s(-h[3][2],h[4][1])),h[2][3]))),-h[1][4]))),h[0][0]),_(l(l(_(l(_(l(s(h[3][3],h[4][4]),s(-h[3][4],h[4][3])),h[2][2]),l(_(l(s(h[3][2],h[4][4]),s(-h[3][4],h[4][2])),-h[2][3]),_(l(s(h[3][2],h[4][3]),s(-h[3][3],h[4][2])),h[2][4]))),h[1][0]),_(l(_(l(s(h[3][3],h[4][4]),s(-h[3][4],h[4][3])),h[2][0]),l(_(l(s(h[3][0],h[4][4]),s(-h[3][4],h[4][0])),-h[2][3]),_(l(s(h[3][0],h[4][3]),s(-h[3][3],h[4][0])),h[2][4]))),-h[1][2])),l(_(l(_(l(s(h[3][2],h[4][4]),s(-h[3][4],h[4][2])),h[2][0]),l(_(l(s(h[3][0],h[4][4]),s(-h[3][4],h[4][0])),-h[2][2]),_(l(s(h[3][0],h[4][2]),s(-h[3][2],h[4][0])),h[2][4]))),h[1][3]),_(l(_(l(s(h[3][2],h[4][3]),s(-h[3][3],h[4][2])),h[2][0]),l(_(l(s(h[3][0],h[4][3]),s(-h[3][3],h[4][0])),-h[2][2]),_(l(s(h[3][0],h[4][2]),s(-h[3][2],h[4][0])),h[2][3]))),-h[1][4]))),-h[0][1])),l(_(l(l(_(l(_(l(s(h[3][3],h[4][4]),s(-h[3][4],h[4][3])),h[2][1]),l(_(l(s(h[3][1],h[4][4]),s(-h[3][4],h[4][1])),-h[2][3]),_(l(s(h[3][1],h[4][3]),s(-h[3][3],h[4][1])),h[2][4]))),h[1][0]),_(l(_(l(s(h[3][3],h[4][4]),s(-h[3][4],h[4][3])),h[2][0]),l(_(l(s(h[3][0],h[4][4]),s(-h[3][4],h[4][0])),-h[2][3]),_(l(s(h[3][0],h[4][3]),s(-h[3][3],h[4][0])),h[2][4]))),-h[1][1])),l(_(l(_(l(s(h[3][1],h[4][4]),s(-h[3][4],h[4][1])),h[2][0]),l(_(l(s(h[3][0],h[4][4]),s(-h[3][4],h[4][0])),-h[2][1]),_(l(s(h[3][0],h[4][1]),s(-h[3][1],h[4][0])),h[2][4]))),h[1][3]),_(l(_(l(s(h[3][1],h[4][3]),s(-h[3][3],h[4][1])),h[2][0]),l(_(l(s(h[3][0],h[4][3]),s(-h[3][3],h[4][0])),-h[2][1]),_(l(s(h[3][0],h[4][1]),s(-h[3][1],h[4][0])),h[2][3]))),-h[1][4]))),h[0][2]),l(_(l(l(_(l(_(l(s(h[3][2],h[4][4]),s(-h[3][4],h[4][2])),h[2][1]),l(_(l(s(h[3][1],h[4][4]),s(-h[3][4],h[4][1])),-h[2][2]),_(l(s(h[3][1],h[4][2]),s(-h[3][2],h[4][1])),h[2][4]))),h[1][0]),_(l(_(l(s(h[3][2],h[4][4]),s(-h[3][4],h[4][2])),h[2][0]),l(_(l(s(h[3][0],h[4][4]),s(-h[3][4],h[4][0])),-h[2][2]),_(l(s(h[3][0],h[4][2]),s(-h[3][2],h[4][0])),h[2][4]))),-h[1][1])),l(_(l(_(l(s(h[3][1],h[4][4]),s(-h[3][4],h[4][1])),h[2][0]),l(_(l(s(h[3][0],h[4][4]),s(-h[3][4],h[4][0])),-h[2][1]),_(l(s(h[3][0],h[4][1]),s(-h[3][1],h[4][0])),h[2][4]))),h[1][2]),_(l(_(l(s(h[3][1],h[4][2]),s(-h[3][2],h[4][1])),h[2][0]),l(_(l(s(h[3][0],h[4][2]),s(-h[3][2],h[4][0])),-h[2][1]),_(l(s(h[3][0],h[4][1]),s(-h[3][1],h[4][0])),h[2][2]))),-h[1][4]))),-h[0][3]),_(l(l(_(l(_(l(s(h[3][2],h[4][3]),s(-h[3][3],h[4][2])),h[2][1]),l(_(l(s(h[3][1],h[4][3]),s(-h[3][3],h[4][1])),-h[2][2]),_(l(s(h[3][1],h[4][2]),s(-h[3][2],h[4][1])),h[2][3]))),h[1][0]),_(l(_(l(s(h[3][2],h[4][3]),s(-h[3][3],h[4][2])),h[2][0]),l(_(l(s(h[3][0],h[4][3]),s(-h[3][3],h[4][0])),-h[2][2]),_(l(s(h[3][0],h[4][2]),s(-h[3][2],h[4][0])),h[2][3]))),-h[1][1])),l(_(l(_(l(s(h[3][1],h[4][3]),s(-h[3][3],h[4][1])),h[2][0]),l(_(l(s(h[3][0],h[4][3]),s(-h[3][3],h[4][0])),-h[2][1]),_(l(s(h[3][0],h[4][1]),s(-h[3][1],h[4][0])),h[2][3]))),h[1][2]),_(l(_(l(s(h[3][1],h[4][2]),s(-h[3][2],h[4][1])),h[2][0]),l(_(l(s(h[3][0],h[4][2]),s(-h[3][2],h[4][0])),-h[2][1]),_(l(s(h[3][0],h[4][1]),s(-h[3][1],h[4][0])),h[2][2]))),-h[1][3]))),h[0][4])))))}}function p(l){var _=l===2?f:l===3?o:l===4?i:l===5?g:void 0;return _(a,n,e,r)}var y=[function(){return[0]},function(_){return[_[0][0]]}];function c(l,_,s,A,m,h,x,u){return function(S){switch(S.length){case 0:return l(S);case 1:return _(S);case 2:return s(S);case 3:return A(S);case 4:return m(S);case 5:return h(S)}var k=x[S.length];return k||(k=x[S.length]=u(S.length)),k(S)}}function b(){for(;y.length<t;)y.push(p(y.length));M.exports=c.apply(void 0,y.concat([y,p]));for(var l=0;l<y.length;++l)M.exports[l]=y[l]}b()},{"robust-compress":279,"robust-scale":286,"robust-sum":289,"two-product":306}],281:[function(v,M,T){var e=v("two-product"),a=v("robust-sum");M.exports=n;function n(r,t){for(var f=e(r[0],t[0]),o=1;o<r.length;++o)f=a(f,e(r[o],t[o]));return f}},{"robust-sum":289,"two-product":306}],282:[function(v,M,T){var e=v("two-product"),a=v("robust-sum"),n=v("robust-subtract"),r=v("robust-scale"),t=6;function f(m){var h=m===3?p:m===4?y:m===5?c:b;return h(a,n,e,r)}function o(){return 0}function i(){return 0}function g(){return 0}function p(m,h,x,u){function L(S,k,P){var z=x(S[0],S[0]),I=u(z,k[0]),D=u(z,P[0]),R=x(k[0],k[0]),O=u(R,S[0]),F=u(R,P[0]),V=x(P[0],P[0]),G=u(V,S[0]),J=u(V,k[0]),Z=m(h(J,F),h(O,I)),Y=h(G,D),j=h(Z,Y);return j[j.length-1]}return L}function y(m,h,x,u){function L(S,k,P,z){var I=m(x(S[0],S[0]),x(S[1],S[1])),D=u(I,k[0]),R=u(I,P[0]),O=u(I,z[0]),F=m(x(k[0],k[0]),x(k[1],k[1])),V=u(F,S[0]),G=u(F,P[0]),J=u(F,z[0]),Z=m(x(P[0],P[0]),x(P[1],P[1])),Y=u(Z,S[0]),j=u(Z,k[0]),re=u(Z,z[0]),se=m(x(z[0],z[0]),x(z[1],z[1])),oe=u(se,S[0]),N=u(se,k[0]),U=u(se,P[0]),q=m(m(u(h(U,re),k[1]),m(u(h(N,J),-P[1]),u(h(j,G),z[1]))),m(u(h(N,J),S[1]),m(u(h(oe,O),-k[1]),u(h(V,D),z[1])))),Q=m(m(u(h(U,re),S[1]),m(u(h(oe,O),-P[1]),u(h(Y,R),z[1]))),m(u(h(j,G),S[1]),m(u(h(Y,R),-k[1]),u(h(V,D),P[1])))),W=h(q,Q);return W[W.length-1]}return L}function c(m,h,x,u){function L(S,k,P,z,I){var D=m(x(S[0],S[0]),m(x(S[1],S[1]),x(S[2],S[2]))),R=u(D,k[0]),O=u(D,P[0]),F=u(D,z[0]),V=u(D,I[0]),G=m(x(k[0],k[0]),m(x(k[1],k[1]),x(k[2],k[2]))),J=u(G,S[0]),Z=u(G,P[0]),Y=u(G,z[0]),j=u(G,I[0]),re=m(x(P[0],P[0]),m(x(P[1],P[1]),x(P[2],P[2]))),se=u(re,S[0]),oe=u(re,k[0]),N=u(re,z[0]),U=u(re,I[0]),q=m(x(z[0],z[0]),m(x(z[1],z[1]),x(z[2],z[2]))),Q=u(q,S[0]),W=u(q,k[0]),X=u(q,P[0]),ee=u(q,I[0]),te=m(x(I[0],I[0]),m(x(I[1],I[1]),x(I[2],I[2]))),ie=u(te,S[0]),le=u(te,k[0]),ge=u(te,P[0]),fe=u(te,z[0]),pe=m(m(m(u(m(u(h(fe,ee),P[1]),m(u(h(ge,U),-z[1]),u(h(X,N),I[1]))),k[2]),m(u(m(u(h(fe,ee),k[1]),m(u(h(le,j),-z[1]),u(h(W,Y),I[1]))),-P[2]),u(m(u(h(ge,U),k[1]),m(u(h(le,j),-P[1]),u(h(oe,Z),I[1]))),z[2]))),m(u(m(u(h(X,N),k[1]),m(u(h(W,Y),-P[1]),u(h(oe,Z),z[1]))),-I[2]),m(u(m(u(h(fe,ee),k[1]),m(u(h(le,j),-z[1]),u(h(W,Y),I[1]))),S[2]),u(m(u(h(fe,ee),S[1]),m(u(h(ie,V),-z[1]),u(h(Q,F),I[1]))),-k[2])))),m(m(u(m(u(h(le,j),S[1]),m(u(h(ie,V),-k[1]),u(h(J,R),I[1]))),z[2]),m(u(m(u(h(W,Y),S[1]),m(u(h(Q,F),-k[1]),u(h(J,R),z[1]))),-I[2]),u(m(u(h(X,N),k[1]),m(u(h(W,Y),-P[1]),u(h(oe,Z),z[1]))),S[2]))),m(u(m(u(h(X,N),S[1]),m(u(h(Q,F),-P[1]),u(h(se,O),z[1]))),-k[2]),m(u(m(u(h(W,Y),S[1]),m(u(h(Q,F),-k[1]),u(h(J,R),z[1]))),P[2]),u(m(u(h(oe,Z),S[1]),m(u(h(se,O),-k[1]),u(h(J,R),P[1]))),-z[2]))))),ye=m(m(m(u(m(u(h(fe,ee),P[1]),m(u(h(ge,U),-z[1]),u(h(X,N),I[1]))),S[2]),u(m(u(h(fe,ee),S[1]),m(u(h(ie,V),-z[1]),u(h(Q,F),I[1]))),-P[2])),m(u(m(u(h(ge,U),S[1]),m(u(h(ie,V),-P[1]),u(h(se,O),I[1]))),z[2]),u(m(u(h(X,N),S[1]),m(u(h(Q,F),-P[1]),u(h(se,O),z[1]))),-I[2]))),m(m(u(m(u(h(ge,U),k[1]),m(u(h(le,j),-P[1]),u(h(oe,Z),I[1]))),S[2]),u(m(u(h(ge,U),S[1]),m(u(h(ie,V),-P[1]),u(h(se,O),I[1]))),-k[2])),m(u(m(u(h(le,j),S[1]),m(u(h(ie,V),-k[1]),u(h(J,R),I[1]))),P[2]),u(m(u(h(oe,Z),S[1]),m(u(h(se,O),-k[1]),u(h(J,R),P[1]))),-I[2])))),Te=h(pe,ye);return Te[Te.length-1]}return L}function b(m,h,x,u){function L(S,k,P,z,I,D){var R=m(m(x(S[0],S[0]),x(S[1],S[1])),m(x(S[2],S[2]),x(S[3],S[3]))),O=u(R,k[0]),F=u(R,P[0]),V=u(R,z[0]),G=u(R,I[0]),J=u(R,D[0]),Z=m(m(x(k[0],k[0]),x(k[1],k[1])),m(x(k[2],k[2]),x(k[3],k[3]))),Y=u(Z,S[0]),j=u(Z,P[0]),re=u(Z,z[0]),se=u(Z,I[0]),oe=u(Z,D[0]),N=m(m(x(P[0],P[0]),x(P[1],P[1])),m(x(P[2],P[2]),x(P[3],P[3]))),U=u(N,S[0]),q=u(N,k[0]),Q=u(N,z[0]),W=u(N,I[0]),X=u(N,D[0]),ee=m(m(x(z[0],z[0]),x(z[1],z[1])),m(x(z[2],z[2]),x(z[3],z[3]))),te=u(ee,S[0]),ie=u(ee,k[0]),le=u(ee,P[0]),ge=u(ee,I[0]),fe=u(ee,D[0]),pe=m(m(x(I[0],I[0]),x(I[1],I[1])),m(x(I[2],I[2]),x(I[3],I[3]))),ye=u(pe,S[0]),Te=u(pe,k[0]),_e=u(pe,P[0]),De=u(pe,z[0]),Be=u(pe,D[0]),Ue=m(m(x(D[0],D[0]),x(D[1],D[1])),m(x(D[2],D[2]),x(D[3],D[3]))),xe=u(Ue,S[0]),Pe=u(Ue,k[0]),Ve=u(Ue,P[0]),Qe=u(Ue,z[0]),Fe=u(Ue,I[0]),Le=m(m(m(u(m(m(u(m(u(h(Fe,Be),z[1]),m(u(h(Qe,fe),-I[1]),u(h(De,ge),D[1]))),P[2]),u(m(u(h(Fe,Be),P[1]),m(u(h(Ve,X),-I[1]),u(h(_e,W),D[1]))),-z[2])),m(u(m(u(h(Qe,fe),P[1]),m(u(h(Ve,X),-z[1]),u(h(le,Q),D[1]))),I[2]),u(m(u(h(De,ge),P[1]),m(u(h(_e,W),-z[1]),u(h(le,Q),I[1]))),-D[2]))),k[3]),m(u(m(m(u(m(u(h(Fe,Be),z[1]),m(u(h(Qe,fe),-I[1]),u(h(De,ge),D[1]))),k[2]),u(m(u(h(Fe,Be),k[1]),m(u(h(Pe,oe),-I[1]),u(h(Te,se),D[1]))),-z[2])),m(u(m(u(h(Qe,fe),k[1]),m(u(h(Pe,oe),-z[1]),u(h(ie,re),D[1]))),I[2]),u(m(u(h(De,ge),k[1]),m(u(h(Te,se),-z[1]),u(h(ie,re),I[1]))),-D[2]))),-P[3]),u(m(m(u(m(u(h(Fe,Be),P[1]),m(u(h(Ve,X),-I[1]),u(h(_e,W),D[1]))),k[2]),u(m(u(h(Fe,Be),k[1]),m(u(h(Pe,oe),-I[1]),u(h(Te,se),D[1]))),-P[2])),m(u(m(u(h(Ve,X),k[1]),m(u(h(Pe,oe),-P[1]),u(h(q,j),D[1]))),I[2]),u(m(u(h(_e,W),k[1]),m(u(h(Te,se),-P[1]),u(h(q,j),I[1]))),-D[2]))),z[3]))),m(m(u(m(m(u(m(u(h(Qe,fe),P[1]),m(u(h(Ve,X),-z[1]),u(h(le,Q),D[1]))),k[2]),u(m(u(h(Qe,fe),k[1]),m(u(h(Pe,oe),-z[1]),u(h(ie,re),D[1]))),-P[2])),m(u(m(u(h(Ve,X),k[1]),m(u(h(Pe,oe),-P[1]),u(h(q,j),D[1]))),z[2]),u(m(u(h(le,Q),k[1]),m(u(h(ie,re),-P[1]),u(h(q,j),z[1]))),-D[2]))),-I[3]),u(m(m(u(m(u(h(De,ge),P[1]),m(u(h(_e,W),-z[1]),u(h(le,Q),I[1]))),k[2]),u(m(u(h(De,ge),k[1]),m(u(h(Te,se),-z[1]),u(h(ie,re),I[1]))),-P[2])),m(u(m(u(h(_e,W),k[1]),m(u(h(Te,se),-P[1]),u(h(q,j),I[1]))),z[2]),u(m(u(h(le,Q),k[1]),m(u(h(ie,re),-P[1]),u(h(q,j),z[1]))),-I[2]))),D[3])),m(u(m(m(u(m(u(h(Fe,Be),z[1]),m(u(h(Qe,fe),-I[1]),u(h(De,ge),D[1]))),k[2]),u(m(u(h(Fe,Be),k[1]),m(u(h(Pe,oe),-I[1]),u(h(Te,se),D[1]))),-z[2])),m(u(m(u(h(Qe,fe),k[1]),m(u(h(Pe,oe),-z[1]),u(h(ie,re),D[1]))),I[2]),u(m(u(h(De,ge),k[1]),m(u(h(Te,se),-z[1]),u(h(ie,re),I[1]))),-D[2]))),S[3]),u(m(m(u(m(u(h(Fe,Be),z[1]),m(u(h(Qe,fe),-I[1]),u(h(De,ge),D[1]))),S[2]),u(m(u(h(Fe,Be),S[1]),m(u(h(xe,J),-I[1]),u(h(ye,G),D[1]))),-z[2])),m(u(m(u(h(Qe,fe),S[1]),m(u(h(xe,J),-z[1]),u(h(te,V),D[1]))),I[2]),u(m(u(h(De,ge),S[1]),m(u(h(ye,G),-z[1]),u(h(te,V),I[1]))),-D[2]))),-k[3])))),m(m(m(u(m(m(u(m(u(h(Fe,Be),k[1]),m(u(h(Pe,oe),-I[1]),u(h(Te,se),D[1]))),S[2]),u(m(u(h(Fe,Be),S[1]),m(u(h(xe,J),-I[1]),u(h(ye,G),D[1]))),-k[2])),m(u(m(u(h(Pe,oe),S[1]),m(u(h(xe,J),-k[1]),u(h(Y,O),D[1]))),I[2]),u(m(u(h(Te,se),S[1]),m(u(h(ye,G),-k[1]),u(h(Y,O),I[1]))),-D[2]))),z[3]),u(m(m(u(m(u(h(Qe,fe),k[1]),m(u(h(Pe,oe),-z[1]),u(h(ie,re),D[1]))),S[2]),u(m(u(h(Qe,fe),S[1]),m(u(h(xe,J),-z[1]),u(h(te,V),D[1]))),-k[2])),m(u(m(u(h(Pe,oe),S[1]),m(u(h(xe,J),-k[1]),u(h(Y,O),D[1]))),z[2]),u(m(u(h(ie,re),S[1]),m(u(h(te,V),-k[1]),u(h(Y,O),z[1]))),-D[2]))),-I[3])),m(u(m(m(u(m(u(h(De,ge),k[1]),m(u(h(Te,se),-z[1]),u(h(ie,re),I[1]))),S[2]),u(m(u(h(De,ge),S[1]),m(u(h(ye,G),-z[1]),u(h(te,V),I[1]))),-k[2])),m(u(m(u(h(Te,se),S[1]),m(u(h(ye,G),-k[1]),u(h(Y,O),I[1]))),z[2]),u(m(u(h(ie,re),S[1]),m(u(h(te,V),-k[1]),u(h(Y,O),z[1]))),-I[2]))),D[3]),u(m(m(u(m(u(h(Qe,fe),P[1]),m(u(h(Ve,X),-z[1]),u(h(le,Q),D[1]))),k[2]),u(m(u(h(Qe,fe),k[1]),m(u(h(Pe,oe),-z[1]),u(h(ie,re),D[1]))),-P[2])),m(u(m(u(h(Ve,X),k[1]),m(u(h(Pe,oe),-P[1]),u(h(q,j),D[1]))),z[2]),u(m(u(h(le,Q),k[1]),m(u(h(ie,re),-P[1]),u(h(q,j),z[1]))),-D[2]))),S[3]))),m(m(u(m(m(u(m(u(h(Qe,fe),P[1]),m(u(h(Ve,X),-z[1]),u(h(le,Q),D[1]))),S[2]),u(m(u(h(Qe,fe),S[1]),m(u(h(xe,J),-z[1]),u(h(te,V),D[1]))),-P[2])),m(u(m(u(h(Ve,X),S[1]),m(u(h(xe,J),-P[1]),u(h(U,F),D[1]))),z[2]),u(m(u(h(le,Q),S[1]),m(u(h(te,V),-P[1]),u(h(U,F),z[1]))),-D[2]))),-k[3]),u(m(m(u(m(u(h(Qe,fe),k[1]),m(u(h(Pe,oe),-z[1]),u(h(ie,re),D[1]))),S[2]),u(m(u(h(Qe,fe),S[1]),m(u(h(xe,J),-z[1]),u(h(te,V),D[1]))),-k[2])),m(u(m(u(h(Pe,oe),S[1]),m(u(h(xe,J),-k[1]),u(h(Y,O),D[1]))),z[2]),u(m(u(h(ie,re),S[1]),m(u(h(te,V),-k[1]),u(h(Y,O),z[1]))),-D[2]))),P[3])),m(u(m(m(u(m(u(h(Ve,X),k[1]),m(u(h(Pe,oe),-P[1]),u(h(q,j),D[1]))),S[2]),u(m(u(h(Ve,X),S[1]),m(u(h(xe,J),-P[1]),u(h(U,F),D[1]))),-k[2])),m(u(m(u(h(Pe,oe),S[1]),m(u(h(xe,J),-k[1]),u(h(Y,O),D[1]))),P[2]),u(m(u(h(q,j),S[1]),m(u(h(U,F),-k[1]),u(h(Y,O),P[1]))),-D[2]))),-z[3]),u(m(m(u(m(u(h(le,Q),k[1]),m(u(h(ie,re),-P[1]),u(h(q,j),z[1]))),S[2]),u(m(u(h(le,Q),S[1]),m(u(h(te,V),-P[1]),u(h(U,F),z[1]))),-k[2])),m(u(m(u(h(ie,re),S[1]),m(u(h(te,V),-k[1]),u(h(Y,O),z[1]))),P[2]),u(m(u(h(q,j),S[1]),m(u(h(U,F),-k[1]),u(h(Y,O),P[1]))),-z[2]))),D[3]))))),Ne=m(m(m(u(m(m(u(m(u(h(Fe,Be),z[1]),m(u(h(Qe,fe),-I[1]),u(h(De,ge),D[1]))),P[2]),u(m(u(h(Fe,Be),P[1]),m(u(h(Ve,X),-I[1]),u(h(_e,W),D[1]))),-z[2])),m(u(m(u(h(Qe,fe),P[1]),m(u(h(Ve,X),-z[1]),u(h(le,Q),D[1]))),I[2]),u(m(u(h(De,ge),P[1]),m(u(h(_e,W),-z[1]),u(h(le,Q),I[1]))),-D[2]))),S[3]),m(u(m(m(u(m(u(h(Fe,Be),z[1]),m(u(h(Qe,fe),-I[1]),u(h(De,ge),D[1]))),S[2]),u(m(u(h(Fe,Be),S[1]),m(u(h(xe,J),-I[1]),u(h(ye,G),D[1]))),-z[2])),m(u(m(u(h(Qe,fe),S[1]),m(u(h(xe,J),-z[1]),u(h(te,V),D[1]))),I[2]),u(m(u(h(De,ge),S[1]),m(u(h(ye,G),-z[1]),u(h(te,V),I[1]))),-D[2]))),-P[3]),u(m(m(u(m(u(h(Fe,Be),P[1]),m(u(h(Ve,X),-I[1]),u(h(_e,W),D[1]))),S[2]),u(m(u(h(Fe,Be),S[1]),m(u(h(xe,J),-I[1]),u(h(ye,G),D[1]))),-P[2])),m(u(m(u(h(Ve,X),S[1]),m(u(h(xe,J),-P[1]),u(h(U,F),D[1]))),I[2]),u(m(u(h(_e,W),S[1]),m(u(h(ye,G),-P[1]),u(h(U,F),I[1]))),-D[2]))),z[3]))),m(m(u(m(m(u(m(u(h(Qe,fe),P[1]),m(u(h(Ve,X),-z[1]),u(h(le,Q),D[1]))),S[2]),u(m(u(h(Qe,fe),S[1]),m(u(h(xe,J),-z[1]),u(h(te,V),D[1]))),-P[2])),m(u(m(u(h(Ve,X),S[1]),m(u(h(xe,J),-P[1]),u(h(U,F),D[1]))),z[2]),u(m(u(h(le,Q),S[1]),m(u(h(te,V),-P[1]),u(h(U,F),z[1]))),-D[2]))),-I[3]),u(m(m(u(m(u(h(De,ge),P[1]),m(u(h(_e,W),-z[1]),u(h(le,Q),I[1]))),S[2]),u(m(u(h(De,ge),S[1]),m(u(h(ye,G),-z[1]),u(h(te,V),I[1]))),-P[2])),m(u(m(u(h(_e,W),S[1]),m(u(h(ye,G),-P[1]),u(h(U,F),I[1]))),z[2]),u(m(u(h(le,Q),S[1]),m(u(h(te,V),-P[1]),u(h(U,F),z[1]))),-I[2]))),D[3])),m(u(m(m(u(m(u(h(Fe,Be),P[1]),m(u(h(Ve,X),-I[1]),u(h(_e,W),D[1]))),k[2]),u(m(u(h(Fe,Be),k[1]),m(u(h(Pe,oe),-I[1]),u(h(Te,se),D[1]))),-P[2])),m(u(m(u(h(Ve,X),k[1]),m(u(h(Pe,oe),-P[1]),u(h(q,j),D[1]))),I[2]),u(m(u(h(_e,W),k[1]),m(u(h(Te,se),-P[1]),u(h(q,j),I[1]))),-D[2]))),S[3]),u(m(m(u(m(u(h(Fe,Be),P[1]),m(u(h(Ve,X),-I[1]),u(h(_e,W),D[1]))),S[2]),u(m(u(h(Fe,Be),S[1]),m(u(h(xe,J),-I[1]),u(h(ye,G),D[1]))),-P[2])),m(u(m(u(h(Ve,X),S[1]),m(u(h(xe,J),-P[1]),u(h(U,F),D[1]))),I[2]),u(m(u(h(_e,W),S[1]),m(u(h(ye,G),-P[1]),u(h(U,F),I[1]))),-D[2]))),-k[3])))),m(m(m(u(m(m(u(m(u(h(Fe,Be),k[1]),m(u(h(Pe,oe),-I[1]),u(h(Te,se),D[1]))),S[2]),u(m(u(h(Fe,Be),S[1]),m(u(h(xe,J),-I[1]),u(h(ye,G),D[1]))),-k[2])),m(u(m(u(h(Pe,oe),S[1]),m(u(h(xe,J),-k[1]),u(h(Y,O),D[1]))),I[2]),u(m(u(h(Te,se),S[1]),m(u(h(ye,G),-k[1]),u(h(Y,O),I[1]))),-D[2]))),P[3]),u(m(m(u(m(u(h(Ve,X),k[1]),m(u(h(Pe,oe),-P[1]),u(h(q,j),D[1]))),S[2]),u(m(u(h(Ve,X),S[1]),m(u(h(xe,J),-P[1]),u(h(U,F),D[1]))),-k[2])),m(u(m(u(h(Pe,oe),S[1]),m(u(h(xe,J),-k[1]),u(h(Y,O),D[1]))),P[2]),u(m(u(h(q,j),S[1]),m(u(h(U,F),-k[1]),u(h(Y,O),P[1]))),-D[2]))),-I[3])),m(u(m(m(u(m(u(h(_e,W),k[1]),m(u(h(Te,se),-P[1]),u(h(q,j),I[1]))),S[2]),u(m(u(h(_e,W),S[1]),m(u(h(ye,G),-P[1]),u(h(U,F),I[1]))),-k[2])),m(u(m(u(h(Te,se),S[1]),m(u(h(ye,G),-k[1]),u(h(Y,O),I[1]))),P[2]),u(m(u(h(q,j),S[1]),m(u(h(U,F),-k[1]),u(h(Y,O),P[1]))),-I[2]))),D[3]),u(m(m(u(m(u(h(De,ge),P[1]),m(u(h(_e,W),-z[1]),u(h(le,Q),I[1]))),k[2]),u(m(u(h(De,ge),k[1]),m(u(h(Te,se),-z[1]),u(h(ie,re),I[1]))),-P[2])),m(u(m(u(h(_e,W),k[1]),m(u(h(Te,se),-P[1]),u(h(q,j),I[1]))),z[2]),u(m(u(h(le,Q),k[1]),m(u(h(ie,re),-P[1]),u(h(q,j),z[1]))),-I[2]))),S[3]))),m(m(u(m(m(u(m(u(h(De,ge),P[1]),m(u(h(_e,W),-z[1]),u(h(le,Q),I[1]))),S[2]),u(m(u(h(De,ge),S[1]),m(u(h(ye,G),-z[1]),u(h(te,V),I[1]))),-P[2])),m(u(m(u(h(_e,W),S[1]),m(u(h(ye,G),-P[1]),u(h(U,F),I[1]))),z[2]),u(m(u(h(le,Q),S[1]),m(u(h(te,V),-P[1]),u(h(U,F),z[1]))),-I[2]))),-k[3]),u(m(m(u(m(u(h(De,ge),k[1]),m(u(h(Te,se),-z[1]),u(h(ie,re),I[1]))),S[2]),u(m(u(h(De,ge),S[1]),m(u(h(ye,G),-z[1]),u(h(te,V),I[1]))),-k[2])),m(u(m(u(h(Te,se),S[1]),m(u(h(ye,G),-k[1]),u(h(Y,O),I[1]))),z[2]),u(m(u(h(ie,re),S[1]),m(u(h(te,V),-k[1]),u(h(Y,O),z[1]))),-I[2]))),P[3])),m(u(m(m(u(m(u(h(_e,W),k[1]),m(u(h(Te,se),-P[1]),u(h(q,j),I[1]))),S[2]),u(m(u(h(_e,W),S[1]),m(u(h(ye,G),-P[1]),u(h(U,F),I[1]))),-k[2])),m(u(m(u(h(Te,se),S[1]),m(u(h(ye,G),-k[1]),u(h(Y,O),I[1]))),P[2]),u(m(u(h(q,j),S[1]),m(u(h(U,F),-k[1]),u(h(Y,O),P[1]))),-I[2]))),-z[3]),u(m(m(u(m(u(h(le,Q),k[1]),m(u(h(ie,re),-P[1]),u(h(q,j),z[1]))),S[2]),u(m(u(h(le,Q),S[1]),m(u(h(te,V),-P[1]),u(h(U,F),z[1]))),-k[2])),m(u(m(u(h(ie,re),S[1]),m(u(h(te,V),-k[1]),u(h(Y,O),z[1]))),P[2]),u(m(u(h(q,j),S[1]),m(u(h(U,F),-k[1]),u(h(Y,O),P[1]))),-z[2]))),I[3]))))),dt=h(Le,Ne);return dt[dt.length-1]}return L}var l=[o,i,g];function _(m){var h=l[m.length];return h||(h=l[m.length]=f(m.length)),h.apply(void 0,m)}function s(m,h,x,u,L,S,k,P){function z(I,D,R,O,F,V){switch(arguments.length){case 0:case 1:return 0;case 2:return u(I,D);case 3:return L(I,D,R);case 4:return S(I,D,R,O);case 5:return k(I,D,R,O,F);case 6:return P(I,D,R,O,F,V)}for(var G=new Array(arguments.length),J=0;J<arguments.length;++J)G[J]=arguments[J];return m(G)}return z}function A(){for(;l.length<=t;)l.push(f(l.length));M.exports=s.apply(void 0,[_].concat(l));for(var m=0;m<=t;++m)M.exports[m]=l[m]}A()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],283:[function(v,M,T){var e=v("robust-determinant"),a=6;function n(l){var _=l===2?f:l===3?o:l===4?i:l===5?g:p;return l<6?_(e[l]):_(e)}function r(){return[[0]]}function t(l,_){return[[_[0]],[l[0][0]]]}function f(l){return function(s,A){return[l([[+A[0],+s[0][1]],[+A[1],+s[1][1]]]),l([[+s[0][0],+A[0]],[+s[1][0],+A[1]]]),l(s)]}}function o(l){return function(s,A){return[l([[+A[0],+s[0][1],+s[0][2]],[+A[1],+s[1][1],+s[1][2]],[+A[2],+s[2][1],+s[2][2]]]),l([[+s[0][0],+A[0],+s[0][2]],[+s[1][0],+A[1],+s[1][2]],[+s[2][0],+A[2],+s[2][2]]]),l([[+s[0][0],+s[0][1],+A[0]],[+s[1][0],+s[1][1],+A[1]],[+s[2][0],+s[2][1],+A[2]]]),l(s)]}}function i(l){return function(s,A){return[l([[+A[0],+s[0][1],+s[0][2],+s[0][3]],[+A[1],+s[1][1],+s[1][2],+s[1][3]],[+A[2],+s[2][1],+s[2][2],+s[2][3]],[+A[3],+s[3][1],+s[3][2],+s[3][3]]]),l([[+s[0][0],+A[0],+s[0][2],+s[0][3]],[+s[1][0],+A[1],+s[1][2],+s[1][3]],[+s[2][0],+A[2],+s[2][2],+s[2][3]],[+s[3][0],+A[3],+s[3][2],+s[3][3]]]),l([[+s[0][0],+s[0][1],+A[0],+s[0][3]],[+s[1][0],+s[1][1],+A[1],+s[1][3]],[+s[2][0],+s[2][1],+A[2],+s[2][3]],[+s[3][0],+s[3][1],+A[3],+s[3][3]]]),l([[+s[0][0],+s[0][1],+s[0][2],+A[0]],[+s[1][0],+s[1][1],+s[1][2],+A[1]],[+s[2][0],+s[2][1],+s[2][2],+A[2]],[+s[3][0],+s[3][1],+s[3][2],+A[3]]]),l(s)]}}function g(l){return function(s,A){return[l([[+A[0],+s[0][1],+s[0][2],+s[0][3],+s[0][4]],[+A[1],+s[1][1],+s[1][2],+s[1][3],+s[1][4]],[+A[2],+s[2][1],+s[2][2],+s[2][3],+s[2][4]],[+A[3],+s[3][1],+s[3][2],+s[3][3],+s[3][4]],[+A[4],+s[4][1],+s[4][2],+s[4][3],+s[4][4]]]),l([[+s[0][0],+A[0],+s[0][2],+s[0][3],+s[0][4]],[+s[1][0],+A[1],+s[1][2],+s[1][3],+s[1][4]],[+s[2][0],+A[2],+s[2][2],+s[2][3],+s[2][4]],[+s[3][0],+A[3],+s[3][2],+s[3][3],+s[3][4]],[+s[4][0],+A[4],+s[4][2],+s[4][3],+s[4][4]]]),l([[+s[0][0],+s[0][1],+A[0],+s[0][3],+s[0][4]],[+s[1][0],+s[1][1],+A[1],+s[1][3],+s[1][4]],[+s[2][0],+s[2][1],+A[2],+s[2][3],+s[2][4]],[+s[3][0],+s[3][1],+A[3],+s[3][3],+s[3][4]],[+s[4][0],+s[4][1],+A[4],+s[4][3],+s[4][4]]]),l([[+s[0][0],+s[0][1],+s[0][2],+A[0],+s[0][4]],[+s[1][0],+s[1][1],+s[1][2],+A[1],+s[1][4]],[+s[2][0],+s[2][1],+s[2][2],+A[2],+s[2][4]],[+s[3][0],+s[3][1],+s[3][2],+A[3],+s[3][4]],[+s[4][0],+s[4][1],+s[4][2],+A[4],+s[4][4]]]),l([[+s[0][0],+s[0][1],+s[0][2],+s[0][3],+A[0]],[+s[1][0],+s[1][1],+s[1][2],+s[1][3],+A[1]],[+s[2][0],+s[2][1],+s[2][2],+s[2][3],+A[2]],[+s[3][0],+s[3][1],+s[3][2],+s[3][3],+A[3]],[+s[4][0],+s[4][1],+s[4][2],+s[4][3],+A[4]]]),l(s)]}}function p(l){return function(s,A){return[l([[+A[0],+s[0][1],+s[0][2],+s[0][3],+s[0][4],+s[0][5]],[+A[1],+s[1][1],+s[1][2],+s[1][3],+s[1][4],+s[1][5]],[+A[2],+s[2][1],+s[2][2],+s[2][3],+s[2][4],+s[2][5]],[+A[3],+s[3][1],+s[3][2],+s[3][3],+s[3][4],+s[3][5]],[+A[4],+s[4][1],+s[4][2],+s[4][3],+s[4][4],+s[4][5]],[+A[5],+s[5][1],+s[5][2],+s[5][3],+s[5][4],+s[5][5]]]),l([[+s[0][0],+A[0],+s[0][2],+s[0][3],+s[0][4],+s[0][5]],[+s[1][0],+A[1],+s[1][2],+s[1][3],+s[1][4],+s[1][5]],[+s[2][0],+A[2],+s[2][2],+s[2][3],+s[2][4],+s[2][5]],[+s[3][0],+A[3],+s[3][2],+s[3][3],+s[3][4],+s[3][5]],[+s[4][0],+A[4],+s[4][2],+s[4][3],+s[4][4],+s[4][5]],[+s[5][0],+A[5],+s[5][2],+s[5][3],+s[5][4],+s[5][5]]]),l([[+s[0][0],+s[0][1],+A[0],+s[0][3],+s[0][4],+s[0][5]],[+s[1][0],+s[1][1],+A[1],+s[1][3],+s[1][4],+s[1][5]],[+s[2][0],+s[2][1],+A[2],+s[2][3],+s[2][4],+s[2][5]],[+s[3][0],+s[3][1],+A[3],+s[3][3],+s[3][4],+s[3][5]],[+s[4][0],+s[4][1],+A[4],+s[4][3],+s[4][4],+s[4][5]],[+s[5][0],+s[5][1],+A[5],+s[5][3],+s[5][4],+s[5][5]]]),l([[+s[0][0],+s[0][1],+s[0][2],+A[0],+s[0][4],+s[0][5]],[+s[1][0],+s[1][1],+s[1][2],+A[1],+s[1][4],+s[1][5]],[+s[2][0],+s[2][1],+s[2][2],+A[2],+s[2][4],+s[2][5]],[+s[3][0],+s[3][1],+s[3][2],+A[3],+s[3][4],+s[3][5]],[+s[4][0],+s[4][1],+s[4][2],+A[4],+s[4][4],+s[4][5]],[+s[5][0],+s[5][1],+s[5][2],+A[5],+s[5][4],+s[5][5]]]),l([[+s[0][0],+s[0][1],+s[0][2],+s[0][3],+A[0],+s[0][5]],[+s[1][0],+s[1][1],+s[1][2],+s[1][3],+A[1],+s[1][5]],[+s[2][0],+s[2][1],+s[2][2],+s[2][3],+A[2],+s[2][5]],[+s[3][0],+s[3][1],+s[3][2],+s[3][3],+A[3],+s[3][5]],[+s[4][0],+s[4][1],+s[4][2],+s[4][3],+A[4],+s[4][5]],[+s[5][0],+s[5][1],+s[5][2],+s[5][3],+A[5],+s[5][5]]]),l([[+s[0][0],+s[0][1],+s[0][2],+s[0][3],+s[0][4],+A[0]],[+s[1][0],+s[1][1],+s[1][2],+s[1][3],+s[1][4],+A[1]],[+s[2][0],+s[2][1],+s[2][2],+s[2][3],+s[2][4],+A[2]],[+s[3][0],+s[3][1],+s[3][2],+s[3][3],+s[3][4],+A[3]],[+s[4][0],+s[4][1],+s[4][2],+s[4][3],+s[4][4],+A[4]],[+s[5][0],+s[5][1],+s[5][2],+s[5][3],+s[5][4],+A[5]]]),l(s)]}}var y=[r,t];function c(l,_,s,A,m,h,x,u){return function(S,k){switch(S.length){case 0:return l(S,k);case 1:return _(S,k);case 2:return s(S,k);case 3:return A(S,k);case 4:return m(S,k);case 5:return h(S,k)}var P=x[S.length];return P||(P=x[S.length]=u(S.length)),P(S,k)}}function b(){for(;y.length<a;)y.push(n(y.length));M.exports=c.apply(void 0,y.concat([y,n]));for(var l=0;l<a;++l)M.exports[l]=y[l]}b()},{"robust-determinant":280}],284:[function(v,M,T){var e=v("two-product"),a=v("robust-sum"),n=v("robust-scale"),r=v("robust-subtract"),t=5,f=11102230246251565e-32,o=(3+16*f)*f,i=(7+56*f)*f;function g(h,x,u,L){return function(k,P,z){var I=h(h(x(P[1],z[0]),x(-z[1],P[0])),h(x(k[1],P[0]),x(-P[1],k[0]))),D=h(x(k[1],z[0]),x(-z[1],k[0])),R=L(I,D);return R[R.length-1]}}function p(h,x,u,L){return function(k,P,z,I){var D=h(h(u(h(x(z[1],I[0]),x(-I[1],z[0])),P[2]),h(u(h(x(P[1],I[0]),x(-I[1],P[0])),-z[2]),u(h(x(P[1],z[0]),x(-z[1],P[0])),I[2]))),h(u(h(x(P[1],I[0]),x(-I[1],P[0])),k[2]),h(u(h(x(k[1],I[0]),x(-I[1],k[0])),-P[2]),u(h(x(k[1],P[0]),x(-P[1],k[0])),I[2])))),R=h(h(u(h(x(z[1],I[0]),x(-I[1],z[0])),k[2]),h(u(h(x(k[1],I[0]),x(-I[1],k[0])),-z[2]),u(h(x(k[1],z[0]),x(-z[1],k[0])),I[2]))),h(u(h(x(P[1],z[0]),x(-z[1],P[0])),k[2]),h(u(h(x(k[1],z[0]),x(-z[1],k[0])),-P[2]),u(h(x(k[1],P[0]),x(-P[1],k[0])),z[2])))),O=L(D,R);return O[O.length-1]}}function y(h,x,u,L){return function(k,P,z,I,D){var R=h(h(h(u(h(u(h(x(I[1],D[0]),x(-D[1],I[0])),z[2]),h(u(h(x(z[1],D[0]),x(-D[1],z[0])),-I[2]),u(h(x(z[1],I[0]),x(-I[1],z[0])),D[2]))),P[3]),h(u(h(u(h(x(I[1],D[0]),x(-D[1],I[0])),P[2]),h(u(h(x(P[1],D[0]),x(-D[1],P[0])),-I[2]),u(h(x(P[1],I[0]),x(-I[1],P[0])),D[2]))),-z[3]),u(h(u(h(x(z[1],D[0]),x(-D[1],z[0])),P[2]),h(u(h(x(P[1],D[0]),x(-D[1],P[0])),-z[2]),u(h(x(P[1],z[0]),x(-z[1],P[0])),D[2]))),I[3]))),h(u(h(u(h(x(z[1],I[0]),x(-I[1],z[0])),P[2]),h(u(h(x(P[1],I[0]),x(-I[1],P[0])),-z[2]),u(h(x(P[1],z[0]),x(-z[1],P[0])),I[2]))),-D[3]),h(u(h(u(h(x(I[1],D[0]),x(-D[1],I[0])),P[2]),h(u(h(x(P[1],D[0]),x(-D[1],P[0])),-I[2]),u(h(x(P[1],I[0]),x(-I[1],P[0])),D[2]))),k[3]),u(h(u(h(x(I[1],D[0]),x(-D[1],I[0])),k[2]),h(u(h(x(k[1],D[0]),x(-D[1],k[0])),-I[2]),u(h(x(k[1],I[0]),x(-I[1],k[0])),D[2]))),-P[3])))),h(h(u(h(u(h(x(P[1],D[0]),x(-D[1],P[0])),k[2]),h(u(h(x(k[1],D[0]),x(-D[1],k[0])),-P[2]),u(h(x(k[1],P[0]),x(-P[1],k[0])),D[2]))),I[3]),h(u(h(u(h(x(P[1],I[0]),x(-I[1],P[0])),k[2]),h(u(h(x(k[1],I[0]),x(-I[1],k[0])),-P[2]),u(h(x(k[1],P[0]),x(-P[1],k[0])),I[2]))),-D[3]),u(h(u(h(x(z[1],I[0]),x(-I[1],z[0])),P[2]),h(u(h(x(P[1],I[0]),x(-I[1],P[0])),-z[2]),u(h(x(P[1],z[0]),x(-z[1],P[0])),I[2]))),k[3]))),h(u(h(u(h(x(z[1],I[0]),x(-I[1],z[0])),k[2]),h(u(h(x(k[1],I[0]),x(-I[1],k[0])),-z[2]),u(h(x(k[1],z[0]),x(-z[1],k[0])),I[2]))),-P[3]),h(u(h(u(h(x(P[1],I[0]),x(-I[1],P[0])),k[2]),h(u(h(x(k[1],I[0]),x(-I[1],k[0])),-P[2]),u(h(x(k[1],P[0]),x(-P[1],k[0])),I[2]))),z[3]),u(h(u(h(x(P[1],z[0]),x(-z[1],P[0])),k[2]),h(u(h(x(k[1],z[0]),x(-z[1],k[0])),-P[2]),u(h(x(k[1],P[0]),x(-P[1],k[0])),z[2]))),-I[3]))))),O=h(h(h(u(h(u(h(x(I[1],D[0]),x(-D[1],I[0])),z[2]),h(u(h(x(z[1],D[0]),x(-D[1],z[0])),-I[2]),u(h(x(z[1],I[0]),x(-I[1],z[0])),D[2]))),k[3]),u(h(u(h(x(I[1],D[0]),x(-D[1],I[0])),k[2]),h(u(h(x(k[1],D[0]),x(-D[1],k[0])),-I[2]),u(h(x(k[1],I[0]),x(-I[1],k[0])),D[2]))),-z[3])),h(u(h(u(h(x(z[1],D[0]),x(-D[1],z[0])),k[2]),h(u(h(x(k[1],D[0]),x(-D[1],k[0])),-z[2]),u(h(x(k[1],z[0]),x(-z[1],k[0])),D[2]))),I[3]),u(h(u(h(x(z[1],I[0]),x(-I[1],z[0])),k[2]),h(u(h(x(k[1],I[0]),x(-I[1],k[0])),-z[2]),u(h(x(k[1],z[0]),x(-z[1],k[0])),I[2]))),-D[3]))),h(h(u(h(u(h(x(z[1],D[0]),x(-D[1],z[0])),P[2]),h(u(h(x(P[1],D[0]),x(-D[1],P[0])),-z[2]),u(h(x(P[1],z[0]),x(-z[1],P[0])),D[2]))),k[3]),u(h(u(h(x(z[1],D[0]),x(-D[1],z[0])),k[2]),h(u(h(x(k[1],D[0]),x(-D[1],k[0])),-z[2]),u(h(x(k[1],z[0]),x(-z[1],k[0])),D[2]))),-P[3])),h(u(h(u(h(x(P[1],D[0]),x(-D[1],P[0])),k[2]),h(u(h(x(k[1],D[0]),x(-D[1],k[0])),-P[2]),u(h(x(k[1],P[0]),x(-P[1],k[0])),D[2]))),z[3]),u(h(u(h(x(P[1],z[0]),x(-z[1],P[0])),k[2]),h(u(h(x(k[1],z[0]),x(-z[1],k[0])),-P[2]),u(h(x(k[1],P[0]),x(-P[1],k[0])),z[2]))),-D[3])))),F=L(R,O);return F[F.length-1]}}function c(h){var x=h===3?g:h===4?p:y;return x(a,e,n,r)}var b=c(3),l=c(4),_=[function(){return 0},function(){return 0},function(x,u){return u[0]-x[0]},function(x,u,L){var S=(x[1]-L[1])*(u[0]-L[0]),k=(x[0]-L[0])*(u[1]-L[1]),P=S-k,z;if(S>0){if(k<=0)return P;z=S+k}else if(S<0){if(k>=0)return P;z=-(S+k)}else return P;var I=o*z;return P>=I||P<=-I?P:b(x,u,L)},function(x,u,L,S){var k=x[0]-S[0],P=u[0]-S[0],z=L[0]-S[0],I=x[1]-S[1],D=u[1]-S[1],R=L[1]-S[1],O=x[2]-S[2],F=u[2]-S[2],V=L[2]-S[2],G=P*R,J=z*D,Z=z*I,Y=k*R,j=k*D,re=P*I,se=O*(G-J)+F*(Z-Y)+V*(j-re),oe=(Math.abs(G)+Math.abs(J))*Math.abs(O)+(Math.abs(Z)+Math.abs(Y))*Math.abs(F)+(Math.abs(j)+Math.abs(re))*Math.abs(V),N=i*oe;return se>N||-se>N?se:l(x,u,L,S)}];function s(h){var x=_[h.length];return x||(x=_[h.length]=c(h.length)),x.apply(void 0,h)}function A(h,x,u,L,S,k,P){return function(I,D,R,O,F){switch(arguments.length){case 0:case 1:return 0;case 2:return L(I,D);case 3:return S(I,D,R);case 4:return k(I,D,R,O);case 5:return P(I,D,R,O,F)}for(var V=new Array(arguments.length),G=0;G<arguments.length;++G)V[G]=arguments[G];return h(V)}}function m(){for(;_.length<=t;)_.push(c(_.length));M.exports=A.apply(void 0,[s].concat(_));for(var h=0;h<=t;++h)M.exports[h]=_[h]}m()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],285:[function(v,M,T){var e=v("robust-sum"),a=v("robust-scale");M.exports=n;function n(r,t){if(r.length===1)return a(t,r[0]);if(t.length===1)return a(r,t[0]);if(r.length===0||t.length===0)return[0];var f=[0];if(r.length<t.length)for(var o=0;o<r.length;++o)f=e(f,a(t,r[o]));else for(var o=0;o<t.length;++o)f=e(f,a(r,t[o]));return f}},{"robust-scale":286,"robust-sum":289}],286:[function(v,M,T){var e=v("two-product"),a=v("two-sum");M.exports=n;function n(r,t){var f=r.length;if(f===1){var o=e(r[0],t);return o[0]?o:[o[1]]}var i=new Array(2*f),g=[.1,.1],p=[.1,.1],y=0;e(r[0],t,g),g[0]&&(i[y++]=g[0]);for(var c=1;c<f;++c){e(r[c],t,p);var b=g[1];a(b,p[0],g),g[0]&&(i[y++]=g[0]);var l=p[1],_=g[1],s=l+_,A=s-l,m=_-A;g[1]=s,m&&(i[y++]=m)}return g[1]&&(i[y++]=g[1]),y===0&&(i[y++]=0),i.length=y,i}},{"two-product":306,"two-sum":307}],287:[function(v,M,T){M.exports=n;var e=v("robust-orientation")[3];function a(r,t,f,o){for(var i=0;i<2;++i){var g=r[i],p=t[i],y=Math.min(g,p),c=Math.max(g,p),b=f[i],l=o[i],_=Math.min(b,l),s=Math.max(b,l);if(s<y||c<_)return!1}return!0}function n(r,t,f,o){var i=e(r,f,o),g=e(t,f,o);if(i>0&&g>0||i<0&&g<0)return!1;var p=e(f,r,t),y=e(o,r,t);return p>0&&y>0||p<0&&y<0?!1:i===0&&g===0&&p===0&&y===0?a(r,t,f,o):!0}},{"robust-orientation":284}],288:[function(v,M,T){M.exports=a;function e(n,r){var t=n+r,f=t-n,o=t-f,i=r-f,g=n-o,p=g+i;return p?[p,t]:[t]}function a(n,r){var t=n.length|0,f=r.length|0;if(t===1&&f===1)return e(n[0],-r[0]);var o=t+f,i=new Array(o),g=0,p=0,y=0,c=Math.abs,b=n[p],l=c(b),_=-r[y],s=c(_),A,m;l<s?(m=b,p+=1,p<t&&(b=n[p],l=c(b))):(m=_,y+=1,y<f&&(_=-r[y],s=c(_))),p<t&&l<s||y>=f?(A=b,p+=1,p<t&&(b=n[p],l=c(b))):(A=_,y+=1,y<f&&(_=-r[y],s=c(_)));for(var h=A+m,x=h-A,u=m-x,L=u,S=h,k,P,z,I,D;p<t&&y<f;)l<s?(A=b,p+=1,p<t&&(b=n[p],l=c(b))):(A=_,y+=1,y<f&&(_=-r[y],s=c(_))),m=L,h=A+m,x=h-A,u=m-x,u&&(i[g++]=u),k=S+h,P=k-S,z=k-P,I=h-P,D=S-z,L=D+I,S=k;for(;p<t;)A=b,m=L,h=A+m,x=h-A,u=m-x,u&&(i[g++]=u),k=S+h,P=k-S,z=k-P,I=h-P,D=S-z,L=D+I,S=k,p+=1,p<t&&(b=n[p]);for(;y<f;)A=_,m=L,h=A+m,x=h-A,u=m-x,u&&(i[g++]=u),k=S+h,P=k-S,z=k-P,I=h-P,D=S-z,L=D+I,S=k,y+=1,y<f&&(_=-r[y]);return L&&(i[g++]=L),S&&(i[g++]=S),g||(i[g++]=0),i.length=g,i}},{}],289:[function(v,M,T){M.exports=a;function e(n,r){var t=n+r,f=t-n,o=t-f,i=r-f,g=n-o,p=g+i;return p?[p,t]:[t]}function a(n,r){var t=n.length|0,f=r.length|0;if(t===1&&f===1)return e(n[0],r[0]);var o=t+f,i=new Array(o),g=0,p=0,y=0,c=Math.abs,b=n[p],l=c(b),_=r[y],s=c(_),A,m;l<s?(m=b,p+=1,p<t&&(b=n[p],l=c(b))):(m=_,y+=1,y<f&&(_=r[y],s=c(_))),p<t&&l<s||y>=f?(A=b,p+=1,p<t&&(b=n[p],l=c(b))):(A=_,y+=1,y<f&&(_=r[y],s=c(_)));for(var h=A+m,x=h-A,u=m-x,L=u,S=h,k,P,z,I,D;p<t&&y<f;)l<s?(A=b,p+=1,p<t&&(b=n[p],l=c(b))):(A=_,y+=1,y<f&&(_=r[y],s=c(_))),m=L,h=A+m,x=h-A,u=m-x,u&&(i[g++]=u),k=S+h,P=k-S,z=k-P,I=h-P,D=S-z,L=D+I,S=k;for(;p<t;)A=b,m=L,h=A+m,x=h-A,u=m-x,u&&(i[g++]=u),k=S+h,P=k-S,z=k-P,I=h-P,D=S-z,L=D+I,S=k,p+=1,p<t&&(b=n[p]);for(;y<f;)A=_,m=L,h=A+m,x=h-A,u=m-x,u&&(i[g++]=u),k=S+h,P=k-S,z=k-P,I=h-P,D=S-z,L=D+I,S=k,y+=1,y<f&&(_=r[y]);return L&&(i[g++]=L),S&&(i[g++]=S),g||(i[g++]=0),i.length=g,i}},{}],290:[function(v,M,T){M.exports=n;var e=v("boundary-cells"),a=v("reduce-simplicial-complex");function n(r){return a(e(r))}},{"boundary-cells":34,"reduce-simplicial-complex":276}],291:[function(v,M,T){M.exports=y;var e=v("ndarray"),a=v("typedarray-pool"),n=v("ndarray-sort"),r=v("./lib/codegen");function t(c){for(var b=c.length,l=0,_=0;_<b;++_)l=Math.max(l,c[_].length)|0;return l-1}function f(c,b){for(var l=c.length,_=a.mallocUint8(l),s=0;s<l;++s)_[s]=c[s]<b|0;return _}function o(c,b){for(var l=c.length,_=b*(b+1)/2*l|0,s=a.mallocUint32(_*2),A=0,m=0;m<l;++m)for(var h=c[m],b=h.length,x=0;x<b;++x)for(var u=0;u<x;++u){var L=h[u],S=h[x];s[A++]=Math.min(L,S)|0,s[A++]=Math.max(L,S)|0}var k=A/2|0;n(e(s,[k,2]));for(var P=2,m=2;m<A;m+=2)s[m-2]===s[m]&&s[m-1]===s[m+1]||(s[P++]=s[m],s[P++]=s[m+1]);return e(s,[P/2|0,2])}function i(c,b,l,_){for(var s=c.data,A=c.shape[0],m=a.mallocDouble(A),h=0,x=0;x<A;++x){var u=s[2*x],L=s[2*x+1];if(l[u]!==l[L]){var S=b[u],k=b[L];s[2*h]=u,s[2*h+1]=L,m[h++]=(k-_)/(k-S)}}return c.shape[0]=h,e(m,[h])}function g(c,b){var l=a.mallocInt32(b*2),_=c.shape[0],s=c.data;l[0]=0;for(var A=0,m=0;m<_;++m){var h=s[2*m];if(h!==A){for(l[2*A+1]=m;++A<h;)l[2*A]=m,l[2*A+1]=m;l[2*A]=m}}for(l[2*A+1]=_;++A<b;)l[2*A]=l[2*A+1]=_;return l}function p(c){for(var b=c.shape[0]|0,l=c.data,_=new Array(b),s=0;s<b;++s)_[s]=[l[2*s],l[2*s+1]];return _}function y(c,b,l,_){l=l||0,typeof _>"u"&&(_=t(c));var s=c.length;if(s===0||_<1)return{cells:[],vertexIds:[],vertexWeights:[]};var A=f(b,+l),m=o(c,_),h=i(m,b,A,+l),x=g(m,b.length|0),u=r(_)(c,m.data,x,A),L=p(m),S=[].slice.call(h.data,0,h.shape[0]);return a.free(A),a.free(m.data),a.free(h.data),a.free(x),{cells:u,vertexIds:L,vertexWeights:S}}},{"./lib/codegen":292,ndarray:259,"ndarray-sort":258,"typedarray-pool":308}],292:[function(v,M,T){M.exports=a;var e=[function(){function r(t,f,o,i){for(var g=t.length,p=[],y=0;y<g;++y){var c=t[y];c.length}return p}return r},function(){function r(f,o,i,g){for(var p=Math.min(i,g)|0,y=Math.max(i,g)|0,c=f[2*p],b=f[2*p+1];c<b;){var l=c+b>>1,_=o[2*l+1];if(_===y)return l;y<_?b=l:c=l+1}return c}function t(f,o,i,g){for(var p=f.length,y=[],c=0;c<p;++c){var b=f[c],l=b.length;if(l===2){var _=(g[b[0]]<<0)+(g[b[1]]<<1);if(_===0||_===3)continue;switch(_){case 0:break;case 1:y.push([r(i,o,b[0],b[1])]);break;case 2:y.push([r(i,o,b[1],b[0])]);break}}}return y}return t},function(){function r(f,o,i,g){for(var p=Math.min(i,g)|0,y=Math.max(i,g)|0,c=f[2*p],b=f[2*p+1];c<b;){var l=c+b>>1,_=o[2*l+1];if(_===y)return l;y<_?b=l:c=l+1}return c}function t(f,o,i,g){for(var p=f.length,y=[],c=0;c<p;++c){var b=f[c],l=b.length;if(l===3){var _=(g[b[0]]<<0)+(g[b[1]]<<1)+(g[b[2]]<<2);if(_===0||_===7)continue;switch(_){case 0:break;case 1:y.push([r(i,o,b[0],b[2]),r(i,o,b[0],b[1])]);break;case 2:y.push([r(i,o,b[1],b[0]),r(i,o,b[1],b[2])]);break;case 3:y.push([r(i,o,b[0],b[2]),r(i,o,b[1],b[2])]);break;case 4:y.push([r(i,o,b[2],b[1]),r(i,o,b[2],b[0])]);break;case 5:y.push([r(i,o,b[2],b[1]),r(i,o,b[0],b[1])]);break;case 6:y.push([r(i,o,b[1],b[0]),r(i,o,b[2],b[0])]);break}}else if(l===2){var _=(g[b[0]]<<0)+(g[b[1]]<<1);if(_===0||_===3)continue;switch(_){case 0:break;case 1:y.push([r(i,o,b[0],b[1])]);break;case 2:y.push([r(i,o,b[1],b[0])]);break}}}return y}return t},function(){function r(f,o,i,g){for(var p=Math.min(i,g)|0,y=Math.max(i,g)|0,c=f[2*p],b=f[2*p+1];c<b;){var l=c+b>>1,_=o[2*l+1];if(_===y)return l;y<_?b=l:c=l+1}return c}function t(f,o,i,g){for(var p=f.length,y=[],c=0;c<p;++c){var b=f[c],l=b.length;if(l===4){var _=(g[b[0]]<<0)+(g[b[1]]<<1)+(g[b[2]]<<2)+(g[b[3]]<<3);if(_===0||_===15)continue;switch(_){case 0:break;case 1:y.push([r(i,o,b[0],b[1]),r(i,o,b[0],b[2]),r(i,o,b[0],b[3])]);break;case 2:y.push([r(i,o,b[1],b[2]),r(i,o,b[1],b[0]),r(i,o,b[1],b[3])]);break;case 3:y.push([r(i,o,b[1],b[2]),r(i,o,b[0],b[2]),r(i,o,b[0],b[3])],[r(i,o,b[1],b[3]),r(i,o,b[1],b[2]),r(i,o,b[0],b[3])]);break;case 4:y.push([r(i,o,b[2],b[0]),r(i,o,b[2],b[1]),r(i,o,b[2],b[3])]);break;case 5:y.push([r(i,o,b[0],b[1]),r(i,o,b[2],b[1]),r(i,o,b[0],b[3])],[r(i,o,b[2],b[1]),r(i,o,b[2],b[3]),r(i,o,b[0],b[3])]);break;case 6:y.push([r(i,o,b[2],b[0]),r(i,o,b[1],b[0]),r(i,o,b[1],b[3])],[r(i,o,b[2],b[3]),r(i,o,b[2],b[0]),r(i,o,b[1],b[3])]);break;case 7:y.push([r(i,o,b[0],b[3]),r(i,o,b[1],b[3]),r(i,o,b[2],b[3])]);break;case 8:y.push([r(i,o,b[3],b[1]),r(i,o,b[3],b[0]),r(i,o,b[3],b[2])]);break;case 9:y.push([r(i,o,b[3],b[1]),r(i,o,b[0],b[1]),r(i,o,b[0],b[2])],[r(i,o,b[3],b[2]),r(i,o,b[3],b[1]),r(i,o,b[0],b[2])]);break;case 10:y.push([r(i,o,b[1],b[0]),r(i,o,b[3],b[0]),r(i,o,b[1],b[2])],[r(i,o,b[3],b[0]),r(i,o,b[3],b[2]),r(i,o,b[1],b[2])]);break;case 11:y.push([r(i,o,b[1],b[2]),r(i,o,b[0],b[2]),r(i,o,b[3],b[2])]);break;case 12:y.push([r(i,o,b[3],b[0]),r(i,o,b[2],b[0]),r(i,o,b[2],b[1])],[r(i,o,b[3],b[1]),r(i,o,b[3],b[0]),r(i,o,b[2],b[1])]);break;case 13:y.push([r(i,o,b[0],b[1]),r(i,o,b[2],b[1]),r(i,o,b[3],b[1])]);break;case 14:y.push([r(i,o,b[2],b[0]),r(i,o,b[1],b[0]),r(i,o,b[3],b[0])]);break}}else if(l===3){var _=(g[b[0]]<<0)+(g[b[1]]<<1)+(g[b[2]]<<2);if(_===0||_===7)continue;switch(_){case 0:break;case 1:y.push([r(i,o,b[0],b[2]),r(i,o,b[0],b[1])]);break;case 2:y.push([r(i,o,b[1],b[0]),r(i,o,b[1],b[2])]);break;case 3:y.push([r(i,o,b[0],b[2]),r(i,o,b[1],b[2])]);break;case 4:y.push([r(i,o,b[2],b[1]),r(i,o,b[2],b[0])]);break;case 5:y.push([r(i,o,b[2],b[1]),r(i,o,b[0],b[1])]);break;case 6:y.push([r(i,o,b[1],b[0]),r(i,o,b[2],b[0])]);break}}else if(l===2){var _=(g[b[0]]<<0)+(g[b[1]]<<1);if(_===0||_===3)continue;switch(_){case 0:break;case 1:y.push([r(i,o,b[0],b[1])]);break;case 2:y.push([r(i,o,b[1],b[0])]);break}}}return y}return t}];function a(n){return e[n]()}},{}],293:[function(v,M,T){var e=v("bit-twiddle"),a=v("union-find");function n(h){for(var x=0,u=Math.max,L=0,S=h.length;L<S;++L)x=u(x,h[L].length);return x-1}T.dimension=n;function r(h){for(var x=-1,u=Math.max,L=0,S=h.length;L<S;++L)for(var k=h[L],P=0,z=k.length;P<z;++P)x=u(x,k[P]);return x+1}T.countVertices=r;function t(h){for(var x=new Array(h.length),u=0,L=h.length;u<L;++u)x[u]=h[u].slice(0);return x}T.cloneCells=t;function f(h,x){var u=h.length,L=h.length-x.length,S=Math.min;if(L)return L;switch(u){case 0:return 0;case 1:return h[0]-x[0];case 2:var D=h[0]+h[1]-x[0]-x[1];return D||S(h[0],h[1])-S(x[0],x[1]);case 3:var k=h[0]+h[1],P=x[0]+x[1];if(D=k+h[2]-(P+x[2]),D)return D;var z=S(h[0],h[1]),I=S(x[0],x[1]),D=S(z,h[2])-S(I,x[2]);return D||S(z+h[2],k)-S(I+x[2],P);default:var R=h.slice(0);R.sort();var O=x.slice(0);O.sort();for(var F=0;F<u;++F)if(L=R[F]-O[F],L)return L;return 0}}T.compareCells=f;function o(h,x){return f(h[0],x[0])}function i(h,x){if(x){for(var u=h.length,L=new Array(u),S=0;S<u;++S)L[S]=[h[S],x[S]];L.sort(o);for(var S=0;S<u;++S)h[S]=L[S][0],x[S]=L[S][1];return h}else return h.sort(f),h}T.normalize=i;function g(h){if(h.length===0)return[];for(var x=1,u=h.length,L=1;L<u;++L){var S=h[L];if(f(S,h[L-1])){if(L===x){x++;continue}h[x++]=S}}return h.length=x,h}T.unique=g;function p(h,x){for(var u=0,L=h.length-1,S=-1;u<=L;){var k=u+L>>1,P=f(h[k],x);P<=0?(P===0&&(S=k),u=k+1):P>0&&(L=k-1)}return S}T.findCell=p;function y(h,x){for(var u=new Array(h.length),L=0,S=u.length;L<S;++L)u[L]=[];for(var k=[],L=0,P=x.length;L<P;++L)for(var z=x[L],I=z.length,D=1,R=1<<I;D<R;++D){k.length=e.popCount(D);for(var O=0,F=0;F<I;++F)D&1<<F&&(k[O++]=z[F]);var V=p(h,k);if(!(V<0))for(;u[V++].push(L),!(V>=h.length||f(h[V],k)!==0););}return u}T.incidence=y;function c(h,x){if(!x)return y(g(l(h,0)),h);for(var u=new Array(x),L=0;L<x;++L)u[L]=[];for(var L=0,S=h.length;L<S;++L)for(var k=h[L],P=0,z=k.length;P<z;++P)u[k[P]].push(L);return u}T.dual=c;function b(h){for(var x=[],u=0,L=h.length;u<L;++u)for(var S=h[u],k=S.length|0,P=1,z=1<<k;P<z;++P){for(var I=[],D=0;D<k;++D)P>>>D&1&&I.push(S[D]);x.push(I)}return i(x)}T.explode=b;function l(h,x){if(x<0)return[];for(var u=[],L=(1<<x+1)-1,S=0;S<h.length;++S)for(var k=h[S],P=L;P<1<<k.length;P=e.nextCombination(P)){for(var z=new Array(x+1),I=0,D=0;D<k.length;++D)P&1<<D&&(z[I++]=k[D]);u.push(z)}return i(u)}T.skeleton=l;function _(h){for(var x=[],u=0,L=h.length;u<L;++u)for(var S=h[u],k=0,P=S.length;k<P;++k){for(var z=new Array(S.length-1),I=0,D=0;I<P;++I)I!==k&&(z[D++]=S[I]);x.push(z)}return i(x)}T.boundary=_;function s(h,x){for(var u=new a(x),L=0;L<h.length;++L)for(var S=h[L],k=0;k<S.length;++k)for(var P=k+1;P<S.length;++P)u.link(S[k],S[P]);for(var z=[],I=u.ranks,L=0;L<I.length;++L)I[L]=-1;for(var L=0;L<h.length;++L){var D=u.find(h[L][0]);I[D]<0?(I[D]=z.length,z.push([h[L].slice(0)])):z[I[D]].push(h[L].slice(0))}return z}function A(h){for(var x=g(i(l(h,0))),u=new a(x.length),L=0;L<h.length;++L)for(var S=h[L],k=0;k<S.length;++k)for(var P=p(x,[S[k]]),z=k+1;z<S.length;++z)u.link(P,p(x,[S[z]]));for(var I=[],D=u.ranks,L=0;L<D.length;++L)D[L]=-1;for(var L=0;L<h.length;++L){var R=u.find(p(x,[h[L][0]]));D[R]<0?(D[R]=I.length,I.push([h[L].slice(0)])):I[D[R]].push(h[L].slice(0))}return I}function m(h,x){return x?s(h,x):A(h)}T.connectedComponents=m},{"bit-twiddle":32,"union-find":309}],294:[function(v,M,T){arguments[4][32][0].apply(T,arguments)},{dup:32}],295:[function(v,M,T){arguments[4][293][0].apply(T,arguments)},{"bit-twiddle":294,dup:293,"union-find":296}],296:[function(v,M,T){M.exports=e;function e(a){this.roots=new Array(a),this.ranks=new Array(a);for(var n=0;n<a;++n)this.roots[n]=n,this.ranks[n]=0}e.prototype.length=function(){return this.roots.length},e.prototype.makeSet=function(){var a=this.roots.length;return this.roots.push(a),this.ranks.push(0),a},e.prototype.find=function(a){for(var n=this.roots;n[a]!==a;){var r=n[a];n[a]=n[r],a=r}return a},e.prototype.link=function(a,n){var r=this.find(a),t=this.find(n);if(r!==t){var f=this.ranks,o=this.roots,i=f[r],g=f[t];i<g?o[r]=t:g<i?o[t]=r:(o[t]=r,++f[r])}}},{}],297:[function(v,M,T){M.exports=r;var e=v("robust-orientation"),a=v("simplicial-complex");function n(t,f,o){var i=Math.abs(e(t,f,o)),g=Math.sqrt(Math.pow(f[0]-o[0],2)+Math.pow(f[1]-o[1],2));return i/g}function r(t,f,o){for(var i=f.length,g=t.length,p=new Array(i),y=new Array(i),c=new Array(i),b=new Array(i),l=0;l<i;++l)p[l]=y[l]=-1,c[l]=1/0,b[l]=!1;for(var l=0;l<g;++l){var _=t[l];if(_.length!==2)throw new Error("Input must be a graph");var s=_[1],A=_[0];y[A]!==-1?y[A]=-2:y[A]=s,p[s]!==-1?p[s]=-2:p[s]=A}function m(Z){if(b[Z])return 1/0;var Y=p[Z],j=y[Z];return Y<0||j<0?1/0:n(f[Z],f[Y],f[j])}function h(Z,Y){var j=I[Z],re=I[Y];I[Z]=re,I[Y]=j,D[j]=Y,D[re]=Z}function x(Z){return c[I[Z]]}function u(Z){return Z&1?Z-1>>1:(Z>>1)-1}function L(Z){for(var Y=x(Z);;){var j=Y,re=2*Z+1,se=2*(Z+1),oe=Z;if(re<O){var N=x(re);N<j&&(oe=re,j=N)}if(se<O){var U=x(se);U<j&&(oe=se)}if(oe===Z)return Z;h(Z,oe),Z=oe}}function S(Z){for(var Y=x(Z);Z>0;){var j=u(Z);if(j>=0){var re=x(j);if(Y<re){h(Z,j),Z=j;continue}}return Z}}function k(){if(O>0){var Z=I[0];return h(0,O-1),O-=1,L(0),Z}return-1}function P(Z,Y){var j=I[Z];return c[j]===Y?Z:(c[j]=-1/0,S(Z),k(),c[j]=Y,O+=1,S(O-1))}function z(Z){if(!b[Z]){b[Z]=!0;var Y=p[Z],j=y[Z];p[j]>=0&&(p[j]=Y),y[Y]>=0&&(y[Y]=j),D[Y]>=0&&P(D[Y],m(Y)),D[j]>=0&&P(D[j],m(j))}}for(var I=[],D=new Array(i),l=0;l<i;++l){var R=c[l]=m(l);R<1/0?(D[l]=I.length,I.push(l)):D[l]=-1}for(var O=I.length,l=O>>1;l>=0;--l)L(l);for(;;){var F=k();if(F<0||c[F]>o)break;z(F)}for(var V=[],l=0;l<i;++l)b[l]||(D[l]=V.length,V.push(f[l].slice()));V.length;function G(Z,Y){if(Z[Y]<0)return Y;var j=Y,re=Y;do{var se=Z[re];if(!b[re]||se<0||se===re||(re=se,se=Z[re],!b[re]||se<0||se===re))break;re=se,j=Z[j]}while(j!==re);for(var oe=Y;oe!==re;oe=Z[oe])Z[oe]=re;return re}var J=[];return t.forEach(function(Z){var Y=G(p,Z[0]),j=G(y,Z[1]);if(Y>=0&&j>=0&&Y!==j){var re=D[Y],se=D[j];re!==se&&J.push([re,se])}}),a.unique(a.normalize(J)),{positions:V,edges:J}}},{"robust-orientation":284,"simplicial-complex":295}],298:[function(v,M,T){M.exports=n;var e=v("robust-orientation");function a(r,t){var f,o;if(t[0][0]<t[1][0])f=t[0],o=t[1];else if(t[0][0]>t[1][0])f=t[1],o=t[0];else{var i=Math.min(r[0][1],r[1][1]),g=Math.max(r[0][1],r[1][1]),p=Math.min(t[0][1],t[1][1]),y=Math.max(t[0][1],t[1][1]);return g<p?g-p:i>y?i-y:g-y}var c,b;r[0][1]<r[1][1]?(c=r[0],b=r[1]):(c=r[1],b=r[0]);var l=e(o,f,c);return l||(l=e(o,f,b),l)?l:b-o}function n(r,t){var f,o;if(t[0][0]<t[1][0])f=t[0],o=t[1];else if(t[0][0]>t[1][0])f=t[1],o=t[0];else return a(t,r);var i,g;if(r[0][0]<r[1][0])i=r[0],g=r[1];else if(r[0][0]>r[1][0])i=r[1],g=r[0];else return-a(r,t);var p=e(f,o,g),y=e(f,o,i);if(p<0){if(y<=0)return p}else if(p>0){if(y>=0)return p}else if(y)return y;if(p=e(g,i,o),y=e(g,i,f),p<0){if(y<=0)return p}else if(p>0){if(y>=0)return p}else if(y)return y;return o[0]-g[0]}},{"robust-orientation":284}],299:[function(v,M,T){M.exports=y;var e=v("binary-search-bounds"),a=v("functional-red-black-tree"),n=v("robust-orientation"),r=v("./lib/order-segments");function t(c,b,l){this.slabs=c,this.coordinates=b,this.horizontal=l}var f=t.prototype;function o(c,b){return c.y-b}function i(c,b){for(var l=null;c;){var _=c.key,s,A;_[0][0]<_[1][0]?(s=_[0],A=_[1]):(s=_[1],A=_[0]);var m=n(s,A,b);if(m<0)c=c.left;else if(m>0)if(b[0]!==_[1][0])l=c,c=c.right;else{var h=i(c.right,b);if(h)return h;c=c.left}else{if(b[0]!==_[1][0])return c;var h=i(c.right,b);if(h)return h;c=c.left}}return l}f.castUp=function(c){var b=e.le(this.coordinates,c[0]);if(b<0)return-1;this.slabs[b];var l=i(this.slabs[b],c),_=-1;if(l&&(_=l.value),this.coordinates[b]===c[0]){var s=null;if(l&&(s=l.key),b>0){var A=i(this.slabs[b-1],c);A&&(s?r(A.key,s)>0&&(s=A.key,_=A.value):(_=A.value,s=A.key))}var m=this.horizontal[b];if(m.length>0){var h=e.ge(m,c[1],o);if(h<m.length){var x=m[h];if(c[1]===x.y){if(x.closed)return x.index;for(;h<m.length-1&&m[h+1].y===c[1];)if(h=h+1,x=m[h],x.closed)return x.index;if(x.y===c[1]&&!x.start){if(h=h+1,h>=m.length)return _;x=m[h]}}if(x.start)if(s){var u=n(s[0],s[1],[c[0],x.y]);s[0][0]>s[1][0]&&(u=-u),u>0&&(_=x.index)}else _=x.index;else x.y!==c[1]&&(_=x.index)}}}return _};function g(c,b,l,_){this.y=c,this.index=b,this.start=l,this.closed=_}function p(c,b,l,_){this.x=c,this.segment=b,this.create=l,this.index=_}function y(c){for(var b=c.length,l=2*b,_=new Array(l),s=0;s<b;++s){var A=c[s],m=A[0][0]<A[1][0];_[2*s]=new p(A[0][0],A,m,s),_[2*s+1]=new p(A[1][0],A,!m,s)}_.sort(function(z,I){var D=z.x-I.x;return D||(D=z.create-I.create,D)?D:Math.min(z.segment[0][1],z.segment[1][1])-Math.min(I.segment[0][1],I.segment[1][1])});for(var h=a(r),x=[],u=[],L=[],s=0;s<l;){for(var S=_[s].x,k=[];s<l;){var P=_[s];if(P.x!==S)break;s+=1,P.segment[0][0]===P.x&&P.segment[1][0]===P.x?P.create&&(P.segment[0][1]<P.segment[1][1]?(k.push(new g(P.segment[0][1],P.index,!0,!0)),k.push(new g(P.segment[1][1],P.index,!1,!1))):(k.push(new g(P.segment[1][1],P.index,!0,!1)),k.push(new g(P.segment[0][1],P.index,!1,!0)))):P.create?h=h.insert(P.segment,P.index):h=h.remove(P.segment)}x.push(h.root),u.push(S),L.push(k)}return new t(x,u,L)}},{"./lib/order-segments":298,"binary-search-bounds":31,"functional-red-black-tree":69,"robust-orientation":284}],300:[function(v,M,T){var e=v("robust-dot-product"),a=v("robust-sum");M.exports=t,M.exports.positive=f,M.exports.negative=o;function n(i,g){var p=a(e(i,g),[g[g.length-1]]);return p[p.length-1]}function r(i,g,p,y){var c=y-g,b=-g/c;b<0?b=0:b>1&&(b=1);for(var l=1-b,_=i.length,s=new Array(_),A=0;A<_;++A)s[A]=b*i[A]+l*p[A];return s}function t(i,g){for(var p=[],y=[],c=n(i[i.length-1],g),b=i[i.length-1],l=i[0],_=0;_<i.length;++_,b=l){l=i[_];var s=n(l,g);if(c<0&&s>0||c>0&&s<0){var A=r(b,s,l,c);p.push(A),y.push(A.slice())}s<0?y.push(l.slice()):s>0?p.push(l.slice()):(p.push(l.slice()),y.push(l.slice())),c=s}return{positive:p,negative:y}}function f(i,g){for(var p=[],y=n(i[i.length-1],g),c=i[i.length-1],b=i[0],l=0;l<i.length;++l,c=b){b=i[l];var _=n(b,g);(y<0&&_>0||y>0&&_<0)&&p.push(r(c,_,b,y)),_>=0&&p.push(b.slice()),y=_}return p}function o(i,g){for(var p=[],y=n(i[i.length-1],g),c=i[i.length-1],b=i[0],l=0;l<i.length;++l,c=b){b=i[l];var _=n(b,g);(y<0&&_>0||y>0&&_<0)&&p.push(r(c,_,b,y)),_<=0&&p.push(b.slice()),y=_}return p}},{"robust-dot-product":281,"robust-sum":289}],301:[function(v,M,T){(function(){var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function a(o){return r(f(o),arguments)}function n(o,i){return a.apply(null,[o].concat(i||[]))}function r(o,i){var g=1,p=o.length,y,c="",b,l,_,s,A,m,h,x;for(b=0;b<p;b++)if(typeof o[b]=="string")c+=o[b];else if(typeof o[b]=="object"){if(_=o[b],_.keys)for(y=i[g],l=0;l<_.keys.length;l++){if(y==null)throw new Error(a('[sprintf] Cannot access property "%s" of undefined value "%s"',_.keys[l],_.keys[l-1]));y=y[_.keys[l]]}else _.param_no?y=i[_.param_no]:y=i[g++];if(e.not_type.test(_.type)&&e.not_primitive.test(_.type)&&y instanceof Function&&(y=y()),e.numeric_arg.test(_.type)&&typeof y!="number"&&isNaN(y))throw new TypeError(a("[sprintf] expecting number but found %T",y));switch(e.number.test(_.type)&&(h=y>=0),_.type){case"b":y=parseInt(y,10).toString(2);break;case"c":y=String.fromCharCode(parseInt(y,10));break;case"d":case"i":y=parseInt(y,10);break;case"j":y=JSON.stringify(y,null,_.width?parseInt(_.width):0);break;case"e":y=_.precision?parseFloat(y).toExponential(_.precision):parseFloat(y).toExponential();break;case"f":y=_.precision?parseFloat(y).toFixed(_.precision):parseFloat(y);break;case"g":y=_.precision?String(Number(y.toPrecision(_.precision))):parseFloat(y);break;case"o":y=(parseInt(y,10)>>>0).toString(8);break;case"s":y=String(y),y=_.precision?y.substring(0,_.precision):y;break;case"t":y=String(!!y),y=_.precision?y.substring(0,_.precision):y;break;case"T":y=Object.prototype.toString.call(y).slice(8,-1).toLowerCase(),y=_.precision?y.substring(0,_.precision):y;break;case"u":y=parseInt(y,10)>>>0;break;case"v":y=y.valueOf(),y=_.precision?y.substring(0,_.precision):y;break;case"x":y=(parseInt(y,10)>>>0).toString(16);break;case"X":y=(parseInt(y,10)>>>0).toString(16).toUpperCase();break}e.json.test(_.type)?c+=y:(e.number.test(_.type)&&(!h||_.sign)?(x=h?"+":"-",y=y.toString().replace(e.sign,"")):x="",A=_.pad_char?_.pad_char==="0"?"0":_.pad_char.charAt(1):" ",m=_.width-(x+y).length,s=_.width&&m>0?A.repeat(m):"",c+=_.align?x+y+s:A==="0"?x+s+y:s+x+y)}return c}var t=Object.create(null);function f(o){if(t[o])return t[o];for(var i=o,g,p=[],y=0;i;){if((g=e.text.exec(i))!==null)p.push(g[0]);else if((g=e.modulo.exec(i))!==null)p.push("%");else if((g=e.placeholder.exec(i))!==null){if(g[2]){y|=1;var c=[],b=g[2],l=[];if((l=e.key.exec(b))!==null)for(c.push(l[1]);(b=b.substring(l[0].length))!=="";)if((l=e.key_access.exec(b))!==null)c.push(l[1]);else if((l=e.index_access.exec(b))!==null)c.push(l[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");g[2]=c}else y|=2;if(y===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");p.push({placeholder:g[0],param_no:g[1],keys:g[2],sign:g[3],pad_char:g[4],align:g[5],width:g[6],precision:g[7],type:g[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");i=i.substring(g[0].length)}return t[o]=p}typeof T<"u"&&(T.sprintf=a,T.vsprintf=n),typeof window<"u"&&(window.sprintf=a,window.vsprintf=n)})()},{}],302:[function(v,M,T){M.exports=o;var e=v("ndarray-extract-contour"),a=v("zero-crossings"),n={"2d":function(i,g,p){var y=i({order:g,scalarArguments:3,getters:p==="generic"?[0]:void 0,phase:function(b,l,_,s){return b>s|0},vertex:function(b,l,_,s,A,m,h,x,u,L,S,k,P){var z=(h<<0)+(x<<1)+(u<<2)+(L<<3)|0;if(!(z===0||z===15))switch(z){case 0:S.push([b-.5,l-.5]);break;case 1:S.push([b-.25-.25*(s+_-2*P)/(_-s),l-.25-.25*(A+_-2*P)/(_-A)]);break;case 2:S.push([b-.75-.25*(-s-_+2*P)/(s-_),l-.25-.25*(m+s-2*P)/(s-m)]);break;case 3:S.push([b-.5,l-.5-.5*(A+_+m+s-4*P)/(_-A+s-m)]);break;case 4:S.push([b-.25-.25*(m+A-2*P)/(A-m),l-.75-.25*(-A-_+2*P)/(A-_)]);break;case 5:S.push([b-.5-.5*(s+_+m+A-4*P)/(_-s+A-m),l-.5]);break;case 6:S.push([b-.5-.25*(-s-_+m+A)/(s-_+A-m),l-.5-.25*(-A-_+m+s)/(A-_+s-m)]);break;case 7:S.push([b-.75-.25*(m+A-2*P)/(A-m),l-.75-.25*(m+s-2*P)/(s-m)]);break;case 8:S.push([b-.75-.25*(-m-A+2*P)/(m-A),l-.75-.25*(-m-s+2*P)/(m-s)]);break;case 9:S.push([b-.5-.25*(s+_+-m-A)/(_-s+m-A),l-.5-.25*(A+_+-m-s)/(_-A+m-s)]);break;case 10:S.push([b-.5-.5*(-s-_+-m-A+4*P)/(s-_+m-A),l-.5]);break;case 11:S.push([b-.25-.25*(-m-A+2*P)/(m-A),l-.75-.25*(A+_-2*P)/(_-A)]);break;case 12:S.push([b-.5,l-.5-.5*(-A-_+-m-s+4*P)/(A-_+m-s)]);break;case 13:S.push([b-.75-.25*(s+_-2*P)/(_-s),l-.25-.25*(-m-s+2*P)/(m-s)]);break;case 14:S.push([b-.25-.25*(-s-_+2*P)/(s-_),l-.25-.25*(-A-_+2*P)/(A-_)]);break;case 15:S.push([b-.5,l-.5]);break}},cell:function(b,l,_,s,A,m,h,x,u){A?x.push([b,l]):x.push([l,b])}});return function(c,b){var l=[],_=[];return y(c,l,_,b),{positions:l,cells:_}}}};function r(i,g){var p=i.length+"d",y=n[p];if(y)return y(e,i,g)}function t(i,g){for(var p=a(i,g),y=p.length,c=new Array(y),b=new Array(y),l=0;l<y;++l)c[l]=[p[l]],b[l]=[l];return{positions:c,cells:b}}var f={};function o(i,c){if(i.dimension<=0)return{positions:[],cells:[]};if(i.dimension===1)return t(i,c);var p=i.order.join()+"-"+i.dtype,y=f[p],c=+c||0;return y||(y=f[p]=r(i.order,i.dtype)),y(i,c)}},{"ndarray-extract-contour":251,"zero-crossings":318}],303:[function(v,M,T){(function(e){(function(){M.exports=f;var a=v("vectorize-text"),n=window||e.global||{},r=n.__TEXT_CACHE||{};n.__TEXT_CACHE={};function t(o){for(var i=o.cells,g=o.positions,p=new Float32Array(i.length*6),y=0,c=0,b=0;b<i.length;++b)for(var l=i[b],_=0;_<3;++_){var s=g[l[_]];p[y++]=s[0],p[y++]=s[1]+1.4,c=Math.max(s[0],c)}return{data:p,shape:c}}function f(o,i,p){var p=p||{},y=r[o];y||(y=r[o]={" ":{data:new Float32Array(0),shape:.2}});var c=y[i];if(!c)if(i.length<=1||!/\d/.test(i))c=y[i]=t(a(i,{triangles:!0,font:o,textAlign:p.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var b=i.split(/(\d|\s)/),l=new Array(b.length),_=0,s=0,A=0;A<b.length;++A)l[A]=f(o,b[A]),_+=l[A].data.length,s+=l[A].shape,A>0&&(s+=.02);for(var m=new Float32Array(_),h=0,x=-.5*s,A=0;A<l.length;++A){for(var u=l[A].data,L=0;L<u.length;L+=2)m[h++]=u[L]+x,m[h++]=u[L+1];x+=l[A].shape+.02}c=y[i]={data:m,shape:s}}return c}}).call(this)}).call(this,v("_process"))},{_process:5,"vectorize-text":311}],304:[function(v,M,T){var e=v("parse-unit");M.exports=t;var a=96;function n(f,o){var i=e(getComputedStyle(f).getPropertyValue(o));return i[0]*t(i[1],f)}function r(f,o){var i=document.createElement("div");i.style["font-size"]="128"+f,o.appendChild(i);var g=n(i,"font-size")/128;return o.removeChild(i),g}function t(f,o){switch(o=o||document.body,f=(f||"px").trim().toLowerCase(),(o===window||o===document)&&(o=document.body),f){case"%":return o.clientHeight/100;case"ch":case"ex":return r(f,o);case"em":return n(o,"font-size");case"rem":return n(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return a;case"cm":return a/2.54;case"mm":return a/25.4;case"pt":return a/72;case"pc":return a/6}return 1}},{"parse-unit":265}],305:[function(v,M,T){M.exports=b;var e=v("filtered-vector"),a=v("gl-mat4/invert"),n=v("gl-mat4/rotate"),r=v("gl-vec3/cross"),t=v("gl-vec3/normalize"),f=v("gl-vec3/dot");function o(l,_,s){return Math.sqrt(Math.pow(l,2)+Math.pow(_,2)+Math.pow(s,2))}function i(l){return Math.min(1,Math.max(-1,l))}function g(l){var _=Math.abs(l[0]),s=Math.abs(l[1]),A=Math.abs(l[2]),m=[0,0,0];_>Math.max(s,A)?m[2]=1:s>Math.max(_,A)?m[0]=1:m[1]=1;for(var h=0,x=0,u=0;u<3;++u)h+=l[u]*l[u],x+=m[u]*l[u];for(var u=0;u<3;++u)m[u]-=x/h*l[u];return t(m,m),m}function p(l,_,s,A,m,h,x,u){this.center=e(s),this.up=e(A),this.right=e(m),this.radius=e([h]),this.angle=e([x,u]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(l,_),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var L=0;L<16;++L)this.computedMatrix[L]=.5;this.recalcMatrix(0)}var y=p.prototype;y.setDistanceLimits=function(l,_){l>0?l=Math.log(l):l=-1/0,_>0?_=Math.log(_):_=1/0,_=Math.max(_,l),this.radius.bounds[0][0]=l,this.radius.bounds[1][0]=_},y.getDistanceLimits=function(l){var _=this.radius.bounds[0];return l?(l[0]=Math.exp(_[0][0]),l[1]=Math.exp(_[1][0]),l):[Math.exp(_[0][0]),Math.exp(_[1][0])]},y.recalcMatrix=function(l){this.center.curve(l),this.up.curve(l),this.right.curve(l),this.radius.curve(l),this.angle.curve(l);for(var _=this.computedUp,s=this.computedRight,A=0,m=0,h=0;h<3;++h)m+=_[h]*s[h],A+=_[h]*_[h];for(var x=Math.sqrt(A),u=0,h=0;h<3;++h)s[h]-=_[h]*m/A,u+=s[h]*s[h],_[h]/=x;for(var L=Math.sqrt(u),h=0;h<3;++h)s[h]/=L;var S=this.computedToward;r(S,_,s),t(S,S);for(var k=Math.exp(this.computedRadius[0]),P=this.computedAngle[0],z=this.computedAngle[1],I=Math.cos(P),D=Math.sin(P),R=Math.cos(z),O=Math.sin(z),F=this.computedCenter,V=I*R,G=D*R,J=O,Z=-I*O,Y=-D*O,j=R,re=this.computedEye,se=this.computedMatrix,h=0;h<3;++h){var oe=V*s[h]+G*S[h]+J*_[h];se[4*h+1]=Z*s[h]+Y*S[h]+j*_[h],se[4*h+2]=oe,se[4*h+3]=0}var N=se[1],U=se[5],q=se[9],Q=se[2],W=se[6],X=se[10],ee=U*X-q*W,te=q*Q-N*X,ie=N*W-U*Q,le=o(ee,te,ie);ee/=le,te/=le,ie/=le,se[0]=ee,se[4]=te,se[8]=ie;for(var h=0;h<3;++h)re[h]=F[h]+se[2+4*h]*k;for(var h=0;h<3;++h){for(var u=0,ge=0;ge<3;++ge)u+=se[h+4*ge]*re[ge];se[12+h]=-u}se[15]=1},y.getMatrix=function(l,_){this.recalcMatrix(l);var s=this.computedMatrix;if(_){for(var A=0;A<16;++A)_[A]=s[A];return _}return s};var c=[0,0,0];y.rotate=function(l,_,s,A){if(this.angle.move(l,_,s),A){this.recalcMatrix(l);var m=this.computedMatrix;c[0]=m[2],c[1]=m[6],c[2]=m[10];for(var h=this.computedUp,x=this.computedRight,u=this.computedToward,L=0;L<3;++L)m[4*L]=h[L],m[4*L+1]=x[L],m[4*L+2]=u[L];n(m,m,A,c);for(var L=0;L<3;++L)h[L]=m[4*L],x[L]=m[4*L+1];this.up.set(l,h[0],h[1],h[2]),this.right.set(l,x[0],x[1],x[2])}},y.pan=function(l,_,s,A){_=_||0,s=s||0,A=A||0,this.recalcMatrix(l);var m=this.computedMatrix;Math.exp(this.computedRadius[0]);var h=m[1],x=m[5],u=m[9],L=o(h,x,u);h/=L,x/=L,u/=L;var S=m[0],k=m[4],P=m[8],z=S*h+k*x+P*u;S-=h*z,k-=x*z,P-=u*z;var I=o(S,k,P);S/=I,k/=I,P/=I;var D=S*_+h*s,R=k*_+x*s,O=P*_+u*s;this.center.move(l,D,R,O);var F=Math.exp(this.computedRadius[0]);F=Math.max(1e-4,F+A),this.radius.set(l,Math.log(F))},y.translate=function(l,_,s,A){this.center.move(l,_||0,s||0,A||0)},y.setMatrix=function(l,_,s,A){var m=1;typeof s=="number"&&(m=s|0),(m<0||m>3)&&(m=1);var h=(m+2)%3;_||(this.recalcMatrix(l),_=this.computedMatrix);var x=_[m],u=_[m+4],L=_[m+8];if(A){var k=Math.abs(x),P=Math.abs(u),z=Math.abs(L),I=Math.max(k,P,z);k===I?(x=x<0?-1:1,u=L=0):z===I?(L=L<0?-1:1,x=u=0):(u=u<0?-1:1,x=L=0)}else{var S=o(x,u,L);x/=S,u/=S,L/=S}var D=_[h],R=_[h+4],O=_[h+8],F=D*x+R*u+O*L;D-=x*F,R-=u*F,O-=L*F;var V=o(D,R,O);D/=V,R/=V,O/=V;var G=u*O-L*R,J=L*D-x*O,Z=x*R-u*D,Y=o(G,J,Z);G/=Y,J/=Y,Z/=Y,this.center.jump(l,Te,_e,De),this.radius.idle(l),this.up.jump(l,x,u,L),this.right.jump(l,D,R,O);var j,re;if(m===2){var se=_[1],oe=_[5],N=_[9],U=se*D+oe*R+N*O,q=se*G+oe*J+N*Z;ee<0?j=-Math.PI/2:j=Math.PI/2,re=Math.atan2(q,U)}else{var Q=_[2],W=_[6],X=_[10],ee=Q*x+W*u+X*L,te=Q*D+W*R+X*O,ie=Q*G+W*J+X*Z;j=Math.asin(i(ee)),re=Math.atan2(ie,te)}this.angle.jump(l,re,j),this.recalcMatrix(l);var le=_[2],ge=_[6],fe=_[10],pe=this.computedMatrix;a(pe,_);var ye=pe[15],Te=pe[12]/ye,_e=pe[13]/ye,De=pe[14]/ye,Be=Math.exp(this.computedRadius[0]);this.center.jump(l,Te-le*Be,_e-ge*Be,De-fe*Be)},y.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},y.idle=function(l){this.center.idle(l),this.up.idle(l),this.right.idle(l),this.radius.idle(l),this.angle.idle(l)},y.flush=function(l){this.center.flush(l),this.up.flush(l),this.right.flush(l),this.radius.flush(l),this.angle.flush(l)},y.setDistance=function(l,_){_>0&&this.radius.set(l,Math.log(_))},y.lookAt=function(l,_,s,A){this.recalcMatrix(l),_=_||this.computedEye,s=s||this.computedCenter,A=A||this.computedUp;var m=A[0],h=A[1],x=A[2],u=o(m,h,x);if(!(u<1e-6)){m/=u,h/=u,x/=u;var L=_[0]-s[0],S=_[1]-s[1],k=_[2]-s[2],P=o(L,S,k);if(!(P<1e-6)){L/=P,S/=P,k/=P;var z=this.computedRight,I=z[0],D=z[1],R=z[2],O=m*I+h*D+x*R;I-=O*m,D-=O*h,R-=O*x;var F=o(I,D,R);if(!(F<.01&&(I=h*k-x*S,D=x*L-m*k,R=m*S-h*L,F=o(I,D,R),F<1e-6))){I/=F,D/=F,R/=F,this.up.set(l,m,h,x),this.right.set(l,I,D,R),this.center.set(l,s[0],s[1],s[2]),this.radius.set(l,Math.log(P));var V=h*R-x*D,G=x*I-m*R,J=m*D-h*I,Z=o(V,G,J);V/=Z,G/=Z,J/=Z;var Y=m*L+h*S+x*k,j=I*L+D*S+R*k,re=V*L+G*S+J*k,se=Math.asin(i(Y)),oe=Math.atan2(re,j),N=this.angle._state,U=N[N.length-1],q=N[N.length-2];U=U%(2*Math.PI);var Q=Math.abs(U+2*Math.PI-oe),W=Math.abs(U-oe),X=Math.abs(U-2*Math.PI-oe);Q<W&&(U+=2*Math.PI),X<W&&(U-=2*Math.PI),this.angle.jump(this.angle.lastT(),U,q),this.angle.set(l,oe,se)}}}};function b(l){l=l||{};var _=l.center||[0,0,0],s=l.up||[0,1,0],A=l.right||g(s),m=l.radius||1,h=l.theta||0,x=l.phi||0;if(_=[].slice.call(_,0,3),s=[].slice.call(s,0,3),t(s,s),A=[].slice.call(A,0,3),t(A,A),"eye"in l){var u=l.eye,L=[u[0]-_[0],u[1]-_[1],u[2]-_[2]];r(A,L,s),o(A[0],A[1],A[2])<1e-6?A=g(s):t(A,A),m=o(L[0],L[1],L[2]);var S=f(s,L)/m,k=f(A,L)/m;x=Math.acos(S),h=Math.acos(k)}return m=Math.log(m),new p(l.zoomMin,l.zoomMax,_,s,A,m,h,x)}},{"filtered-vector":68,"gl-mat4/invert":98,"gl-mat4/rotate":103,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/normalize":179}],306:[function(v,M,T){M.exports=a;var e=+(Math.pow(2,27)+1);function a(n,r,t){var f=n*r,o=e*n,i=o-n,g=o-i,p=n-g,y=e*r,c=y-r,b=y-c,l=r-b,_=f-g*b,s=_-p*b,A=s-g*l,m=p*l-A;return t?(t[0]=m,t[1]=f,t):[m,f]}},{}],307:[function(v,M,T){M.exports=e;function e(a,n,r){var t=a+n,f=t-a,o=t-f,i=n-f,g=a-o;return r?(r[0]=g+i,r[1]=t,r):[g+i,t]}},{}],308:[function(v,M,T){(function(e){(function(){var a=v("bit-twiddle"),n=v("dup"),r=v("buffer").Buffer;e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:n([32,0]),UINT16:n([32,0]),UINT32:n([32,0]),BIGUINT64:n([32,0]),INT8:n([32,0]),INT16:n([32,0]),INT32:n([32,0]),BIGINT64:n([32,0]),FLOAT:n([32,0]),DOUBLE:n([32,0]),DATA:n([32,0]),UINT8C:n([32,0]),BUFFER:n([32,0])});var t=typeof Uint8ClampedArray<"u",f=typeof BigUint64Array<"u",o=typeof BigInt64Array<"u",i=e.__TYPEDARRAY_POOL;i.UINT8C||(i.UINT8C=n([32,0])),i.BIGUINT64||(i.BIGUINT64=n([32,0])),i.BIGINT64||(i.BIGINT64=n([32,0])),i.BUFFER||(i.BUFFER=n([32,0]));var g=i.DATA,p=i.BUFFER;T.free=function(D){if(r.isBuffer(D))p[a.log2(D.length)].push(D);else{if(Object.prototype.toString.call(D)!=="[object ArrayBuffer]"&&(D=D.buffer),!D)return;var R=D.length||D.byteLength,O=a.log2(R)|0;g[O].push(D)}};function y(I){if(!!I){var D=I.length||I.byteLength,R=a.log2(D);g[R].push(I)}}function c(I){y(I.buffer)}T.freeUint8=T.freeUint16=T.freeUint32=T.freeBigUint64=T.freeInt8=T.freeInt16=T.freeInt32=T.freeBigInt64=T.freeFloat32=T.freeFloat=T.freeFloat64=T.freeDouble=T.freeUint8Clamped=T.freeDataView=c,T.freeArrayBuffer=y,T.freeBuffer=function(D){p[a.log2(D.length)].push(D)},T.malloc=function(D,R){if(R===void 0||R==="arraybuffer")return b(D);switch(R){case"uint8":return l(D);case"uint16":return _(D);case"uint32":return s(D);case"int8":return A(D);case"int16":return m(D);case"int32":return h(D);case"float":case"float32":return x(D);case"double":case"float64":return u(D);case"uint8_clamped":return L(D);case"bigint64":return k(D);case"biguint64":return S(D);case"buffer":return z(D);case"data":case"dataview":return P(D);default:return null}return null};function b(D){var D=a.nextPow2(D),R=a.log2(D),O=g[R];return O.length>0?O.pop():new ArrayBuffer(D)}T.mallocArrayBuffer=b;function l(I){return new Uint8Array(b(I),0,I)}T.mallocUint8=l;function _(I){return new Uint16Array(b(2*I),0,I)}T.mallocUint16=_;function s(I){return new Uint32Array(b(4*I),0,I)}T.mallocUint32=s;function A(I){return new Int8Array(b(I),0,I)}T.mallocInt8=A;function m(I){return new Int16Array(b(2*I),0,I)}T.mallocInt16=m;function h(I){return new Int32Array(b(4*I),0,I)}T.mallocInt32=h;function x(I){return new Float32Array(b(4*I),0,I)}T.mallocFloat32=T.mallocFloat=x;function u(I){return new Float64Array(b(8*I),0,I)}T.mallocFloat64=T.mallocDouble=u;function L(I){return t?new Uint8ClampedArray(b(I),0,I):l(I)}T.mallocUint8Clamped=L;function S(I){return f?new BigUint64Array(b(8*I),0,I):null}T.mallocBigUint64=S;function k(I){return o?new BigInt64Array(b(8*I),0,I):null}T.mallocBigInt64=k;function P(I){return new DataView(b(I),0,I)}T.mallocDataView=P;function z(I){I=a.nextPow2(I);var D=a.log2(I),R=p[D];return R.length>0?R.pop():new r(I)}T.mallocBuffer=z,T.clearCache=function(){for(var D=0;D<32;++D)i.UINT8[D].length=0,i.UINT16[D].length=0,i.UINT32[D].length=0,i.INT8[D].length=0,i.INT16[D].length=0,i.INT32[D].length=0,i.FLOAT[D].length=0,i.DOUBLE[D].length=0,i.BIGUINT64[D].length=0,i.BIGINT64[D].length=0,i.UINT8C[D].length=0,g[D].length=0,p[D].length=0}}).call(this)}).call(this,typeof w<"u"?w:typeof self<"u"?self:typeof window<"u"?window:{})},{"bit-twiddle":32,buffer:3,dup:65}],309:[function(v,M,T){M.exports=e;function e(n){this.roots=new Array(n),this.ranks=new Array(n);for(var r=0;r<n;++r)this.roots[r]=r,this.ranks[r]=0}var a=e.prototype;Object.defineProperty(a,"length",{get:function(){return this.roots.length}}),a.makeSet=function(){var n=this.roots.length;return this.roots.push(n),this.ranks.push(0),n},a.find=function(n){for(var r=n,t=this.roots;t[n]!==n;)n=t[n];for(;t[r]!==n;){var f=t[r];t[r]=n,r=f}return n},a.link=function(n,r){var t=this.find(n),f=this.find(r);if(t!==f){var o=this.ranks,i=this.roots,g=o[t],p=o[f];g<p?i[t]=f:p<g?i[f]=t:(i[f]=t,++o[t])}}},{}],310:[function(v,M,T){function e(r,t){for(var f=1,o=r.length,i=r[0],g=r[0],p=1;p<o;++p)if(g=i,i=r[p],t(i,g)){if(p===f){f++;continue}r[f++]=i}return r.length=f,r}function a(r){for(var t=1,f=r.length,o=r[0],i=r[0],g=1;g<f;++g,i=o)if(i=o,o=r[g],o!==i){if(g===t){t++;continue}r[t++]=o}return r.length=t,r}function n(r,t,f){return r.length===0?r:t?(f||r.sort(t),e(r,t)):(f||r.sort(),a(r))}M.exports=n},{}],311:[function(v,M,T){M.exports=r;var e=v("./lib/vtext"),a=null,n=null;typeof document<"u"&&(a=document.createElement("canvas"),a.width=8192,a.height=1024,n=a.getContext("2d"));function r(t,f){return(typeof f!="object"||f===null)&&(f={}),e(t,f.canvas||a,f.context||n,f)}},{"./lib/vtext":312}],312:[function(v,M,T){M.exports=S,M.exports.processPixels=L;var e=v("surface-nets"),a=v("ndarray"),n=v("simplify-planar-graph"),r=v("clean-pslg"),t=v("cdt2d"),f=v("planar-graph-to-polyline"),o="b",i="b|",g="i",p="i|",y="sup",c="+",b="+1",l="sub",_="-",s="-1";function A(k,P,z,I){for(var D="<"+k+">",R="</"+k+">",O=D.length,F=R.length,V=P[0]===c||P[0]===_,G=0,J=-F;G>-1&&(G=z.indexOf(D,G),!(G===-1||(J=z.indexOf(R,G+O),J===-1)||J<=G));){for(var Z=G;Z<J+F;++Z)if(Z<G+O||Z>=J)I[Z]=null,z=z.substr(0,Z)+" "+z.substr(Z+1);else if(I[Z]!==null){var Y=I[Z].indexOf(P[0]);Y===-1?I[Z]+=P:V&&(I[Z]=I[Z].substr(0,Y+1)+(1+parseInt(I[Z][Y+1]))+I[Z].substr(Y+2))}var j=G+O,re=z.substr(j,J-j),se=re.indexOf(D);se!==-1?G=se:G=J+F}return I}function m(k,P,z){for(var I=P.textAlign||"start",D=P.textBaseline||"alphabetic",R=[1<<30,1<<30],O=[0,0],F=k.length,V=0;V<F;++V)for(var G=k[V],J=0;J<2;++J)R[J]=Math.min(R[J],G[J])|0,O[J]=Math.max(O[J],G[J])|0;var Z=0;switch(I){case"center":Z=-.5*(R[0]+O[0]);break;case"right":case"end":Z=-O[0];break;case"left":case"start":Z=-R[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+I+"'")}var Y=0;switch(D){case"hanging":case"top":Y=-R[1];break;case"middle":Y=-.5*(R[1]+O[1]);break;case"alphabetic":case"ideographic":Y=-3*z;break;case"bottom":Y=-O[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+D+"'")}var j=1/z;return"lineHeight"in P?j*=+P.lineHeight:"width"in P?j=P.width/(O[0]-R[0]):"height"in P&&(j=P.height/(O[1]-R[1])),k.map(function(re){return[j*(re[0]+Z),j*(re[1]+Y)]})}function h(k,P,z,I,D,R){z=z.replace(/\n/g,""),R.breaklines===!0?z=z.replace(/\<br\>/g,`
`):z=z.replace(/\<br\>/g," ");var O="",F=[];for(U=0;U<z.length;++U)F[U]=O;R.bolds===!0&&(F=A(o,i,z,F)),R.italics===!0&&(F=A(g,p,z,F)),R.superscripts===!0&&(F=A(y,b,z,F)),R.subscripts===!0&&(F=A(l,s,z,F));var V=[],G="";for(U=0;U<z.length;++U)F[U]!==null&&(G+=z[U],V.push(F[U]));var J=G.split(`
`),Z=J.length,Y=Math.round(D*I),j=I,re=I*2,se=0,oe=Z*Y+re;k.height<oe&&(k.height=oe),P.fillStyle="#000",P.fillRect(0,0,k.width,k.height),P.fillStyle="#fff";var N,U,q,Q,W,X=0,ee="";function te(){if(ee!==""){var De=P.measureText(ee).width;P.fillText(ee,j+q,re+Q),q+=De}}function ie(){return""+Math.round(W)+"px "}function le(De,Be){var Ue=""+P.font;if(R.subscripts===!0){var xe=De.indexOf(_),Pe=Be.indexOf(_),Ve=xe>-1?parseInt(De[1+xe]):0,Qe=Pe>-1?parseInt(Be[1+Pe]):0;Ve!==Qe&&(Ue=Ue.replace(ie(),"?px "),W*=Math.pow(.75,Qe-Ve),Ue=Ue.replace("?px ",ie())),Q+=.25*Y*(Qe-Ve)}if(R.superscripts===!0){var Fe=De.indexOf(c),Le=Be.indexOf(c),Ne=Fe>-1?parseInt(De[1+Fe]):0,dt=Le>-1?parseInt(Be[1+Le]):0;Ne!==dt&&(Ue=Ue.replace(ie(),"?px "),W*=Math.pow(.75,dt-Ne),Ue=Ue.replace("?px ",ie())),Q-=.25*Y*(dt-Ne)}if(R.bolds===!0){var Dt=De.indexOf(i)>-1,Xt=Be.indexOf(i)>-1;!Dt&&Xt&&(At?Ue=Ue.replace("italic ","italic bold "):Ue="bold "+Ue),Dt&&!Xt&&(Ue=Ue.replace("bold ",""))}if(R.italics===!0){var At=De.indexOf(p)>-1,zt=Be.indexOf(p)>-1;!At&&zt&&(Ue="italic "+Ue),At&&!zt&&(Ue=Ue.replace("italic ",""))}P.font=Ue}for(N=0;N<Z;++N){var ge=J[N]+`
`;for(q=0,Q=N*Y,W=I,ee="",U=0;U<ge.length;++U){var fe=U+X<V.length?V[U+X]:V[V.length-1];O===fe?ee+=ge[U]:(te(),ee=ge[U],fe!==void 0&&(le(O,fe),O=fe))}te(),X+=ge.length;var pe=Math.round(q+2*j)|0;se<pe&&(se=pe)}var ye=se,Te=re+Y*Z,_e=a(P.getImageData(0,0,ye,Te).data,[Te,ye,4]);return _e.pick(-1,-1,0).transpose(1,0)}function x(k,P){var z=e(k,128);return P?n(z.cells,z.positions,.25):{edges:z.cells,positions:z.positions}}function u(k,P,z,I){var D=x(k,I),R=m(D.positions,P,z),O=D.edges,F=P.orientation==="ccw";if(r(R,O),P.polygons||P.polygon||P.polyline){for(var V=f(O,R),G=new Array(V.length),J=0;J<V.length;++J){for(var Z=V[J],Y=new Array(Z.length),j=0;j<Z.length;++j){for(var re=Z[j],se=new Array(re.length),oe=0;oe<re.length;++oe)se[oe]=R[re[oe]].slice();F&&se.reverse(),Y[j]=se}G[J]=Y}return G}else return P.triangles||P.triangulate||P.triangle?{cells:t(R,O,{delaunay:!1,exterior:!1,interior:!0}),positions:R}:{edges:O,positions:R}}function L(k,P,z){try{return u(k,P,z,!0)}catch{}try{return u(k,P,z,!1)}catch{}return P.polygons||P.polyline||P.polygon?[]:P.triangles||P.triangulate||P.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function S(k,P,z,I){var D=64,R=1.25,O={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};I&&(I.size&&I.size>0&&(D=I.size),I.lineSpacing&&I.lineSpacing>0&&(R=I.lineSpacing),I.styletags&&I.styletags.breaklines&&(O.breaklines=!!I.styletags.breaklines),I.styletags&&I.styletags.bolds&&(O.bolds=!!I.styletags.bolds),I.styletags&&I.styletags.italics&&(O.italics=!!I.styletags.italics),I.styletags&&I.styletags.subscripts&&(O.subscripts=!!I.styletags.subscripts),I.styletags&&I.styletags.superscripts&&(O.superscripts=!!I.styletags.superscripts)),z.font=[I.fontStyle,I.fontVariant,I.fontWeight,D+"px",I.font].filter(function(V){return V}).join(" "),z.textAlign="start",z.textBaseline="alphabetic",z.direction="ltr";var F=h(P,z,k,D,R,O);return L(F,I,D)}},{cdt2d:42,"clean-pslg":50,ndarray:259,"planar-graph-to-polyline":268,"simplify-planar-graph":297,"surface-nets":302}],313:[function(v,M,T){(function(){if(typeof ses<"u"&&ses.ok&&!ses.ok())return;function a(L){L.permitHostObjects___&&L.permitHostObjects___(a)}typeof ses<"u"&&(ses.weakMapPermitHostObjects=a);var n=!1;if(typeof WeakMap=="function"){var r=WeakMap;if(!(typeof navigator<"u"&&/Firefox/.test(navigator.userAgent))){var t=new r,f=Object.freeze({});if(t.set(f,1),t.get(f)!==1)n=!0;else{M.exports=WeakMap;return}}}var o=Object.getOwnPropertyNames,i=Object.defineProperty,g=Object.isExtensible,p="weakmap:",y=p+"ident:"+Math.random()+"___";if(typeof crypto<"u"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var c=new ArrayBuffer(25),b=new Uint8Array(c);crypto.getRandomValues(b),y=p+"rand:"+Array.prototype.map.call(b,function(L){return(L%36).toString(36)}).join("")+"___"}function l(L){return!(L.substr(0,p.length)==p&&L.substr(L.length-3)==="___")}if(i(Object,"getOwnPropertyNames",{value:function(S){return o(S).filter(l)}}),"getPropertyNames"in Object){var _=Object.getPropertyNames;i(Object,"getPropertyNames",{value:function(S){return _(S).filter(l)}})}function s(L){if(L!==Object(L))throw new TypeError("Not an object: "+L);var S=L[y];if(S&&S.key===L)return S;if(!!g(L)){S={key:L};try{return i(L,y,{value:S,writable:!1,enumerable:!1,configurable:!1}),S}catch{return}}}(function(){var L=Object.freeze;i(Object,"freeze",{value:function(z){return s(z),L(z)}});var S=Object.seal;i(Object,"seal",{value:function(z){return s(z),S(z)}});var k=Object.preventExtensions;i(Object,"preventExtensions",{value:function(z){return s(z),k(z)}})})();function A(L){return L.prototype=null,Object.freeze(L)}var m=!1;function h(){!m&&typeof console<"u"&&(m=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}var x=0,u=function(){this instanceof u||h();var L=[],S=[],k=x++;function P(R,O){var F,V=s(R);return V?k in V?V[k]:O:(F=L.indexOf(R),F>=0?S[F]:O)}function z(R){var O=s(R);return O?k in O:L.indexOf(R)>=0}function I(R,O){var F,V=s(R);return V?V[k]=O:(F=L.indexOf(R),F>=0?S[F]=O:(F=L.length,S[F]=O,L[F]=R)),this}function D(R){var O=s(R),F,V;return O?k in O&&delete O[k]:(F=L.indexOf(R),F<0?!1:(V=L.length-1,L[F]=void 0,S[F]=S[V],L[F]=L[V],L.length=V,S.length=V,!0))}return Object.create(u.prototype,{get___:{value:A(P)},has___:{value:A(z)},set___:{value:A(I)},delete___:{value:A(D)}})};u.prototype=Object.create(Object.prototype,{get:{value:function(S,k){return this.get___(S,k)},writable:!0,configurable:!0},has:{value:function(S){return this.has___(S)},writable:!0,configurable:!0},set:{value:function(S,k){return this.set___(S,k)},writable:!0,configurable:!0},delete:{value:function(S){return this.delete___(S)},writable:!0,configurable:!0}}),typeof r=="function"?function(){n&&typeof Proxy<"u"&&(Proxy=void 0);function L(){this instanceof u||h();var S=new r,k=void 0,P=!1;function z(O,F){return k?S.has(O)?S.get(O):k.get___(O,F):S.get(O,F)}function I(O){return S.has(O)||(k?k.has___(O):!1)}var D;n?D=function(O,F){return S.set(O,F),S.has(O)||(k||(k=new u),k.set(O,F)),this}:D=function(O,F){if(P)try{S.set(O,F)}catch{k||(k=new u),k.set___(O,F)}else S.set(O,F);return this};function R(O){var F=!!S.delete(O);return k&&k.delete___(O)||F}return Object.create(u.prototype,{get___:{value:A(z)},has___:{value:A(I)},set___:{value:A(D)},delete___:{value:A(R)},permitHostObjects___:{value:A(function(O){if(O===a)P=!0;else throw new Error("bogus call to permitHostObjects___")})}})}L.prototype=u.prototype,M.exports=L,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy<"u"&&(Proxy=void 0),M.exports=u)})()},{}],314:[function(v,M,T){var e=v("./hidden-store.js");M.exports=a;function a(){var n={};return function(r){if((typeof r!="object"||r===null)&&typeof r!="function")throw new Error("Weakmap-shim: Key must be object");var t=r.valueOf(n);return t&&t.identity===n?t:e(r,n)}}},{"./hidden-store.js":315}],315:[function(v,M,T){M.exports=e;function e(a,n){var r={identity:n},t=a.valueOf;return Object.defineProperty(a,"valueOf",{value:function(f){return f!==n?t.apply(this,arguments):r},writable:!0}),r}},{}],316:[function(v,M,T){var e=v("./create-store.js");M.exports=a;function a(){var n=e();return{get:function(r,t){var f=n(r);return f.hasOwnProperty("value")?f.value:t},set:function(r,t){return n(r).value=t,this},has:function(r){return"value"in n(r)},delete:function(r){return delete n(r).value}}}},{"./create-store.js":314}],317:[function(v,M,T){function e(){return function(o,i,g,p,y,c){var b=o[0],l=g[0],_=[0],s=l;p|=0;var A=0,m=l;for(A=0;A<b;++A){{var h=i[p]-c,x=i[p+s]-c;h>=0!=x>=0&&y.push(_[0]+.5+.5*(h+x)/(h-x))}p+=m,++_[0]}}}function a(){return e()}var n=a;function r(o){var i={};return function(p,y,c){var b=p.dtype,l=p.order,_=[b,l.join()].join(),s=i[_];return s||(i[_]=s=o([b,l])),s(p.shape.slice(0),p.data,p.stride,p.offset|0,y,c)}}function t(o){return r(n.bind(void 0,o))}function f(o){return t({funcName:o.funcName})}M.exports=f({funcName:"zeroCrossings"})},{}],318:[function(v,M,T){M.exports=a;var e=v("./lib/zc-core");function a(n,r){var t=[];return r=+r||0,e(n.hi(n.shape[0]-1),t,r),t}},{"./lib/zc-core":317}]},{},[6])(6)})}).call(this)}).call(this,typeof To<"u"?To:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[27])(27)})})(Mh);var D0=P0(Mh.exports),R0=L0({__proto__:null,default:D0},[Mh.exports]);export{R0 as p};
